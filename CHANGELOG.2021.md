### [2021-12-31T22:23:24+00:00](https://github.com/leanprover-community/mathlib/commit/8db2fa05bdcfed5d6db0c4ce9ece038a9904c868)
chore(category_theory/closed/cartesian): make exp right-associative ([#11172](https://github.com/leanprover-community/mathlib/pull/#11172))

This makes `X ⟹ Y ⟹ Z` parse as `X ⟹ (Y ⟹ Z)`, like ordinary function types.

### [2021-12-31T22:23:23+00:00](https://github.com/leanprover-community/mathlib/commit/559951cd0e861fe41629d4e93ecef11cffb6502d)
feat(data/quot): Add quotient pi induction ([#11137](https://github.com/leanprover-community/mathlib/pull/#11137))

I am planning to use this later to show that the (pi) product of homotopy classes of paths is well-defined, and prove
properties about that product. 



Co-authored-by: prakol16 <prakol16@users.noreply.github.com>

### [2021-12-31T22:23:22+00:00](https://github.com/leanprover-community/mathlib/commit/200f47d36636dc4cd0b0d9e4ee358da533531702)
feat(analysis/normed_space/banach_steinhaus): prove the standard Banach-Steinhaus theorem ([#10663](https://github.com/leanprover-community/mathlib/pull/#10663))

Here we prove the Banach-Steinhaus theorem for maps from a Banach space into a (semi-)normed space. This is the standard version of the theorem and the proof proceeds via the Baire category theorem. Notably, the version from barelled spaces to locally convex spaces is not included because these spaces do not yet exist in `mathlib`. In addition, it is established that the pointwise limit of continuous linear maps from a Banach space into a normed space is itself a continuous linear map.

- [x] depends on: [#10700](https://github.com/leanprover-community/mathlib/pull/#10700) 



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-12-31T21:03:20+00:00](https://github.com/leanprover-community/mathlib/commit/ea710ca6ceaac4a1398e7ee87f32d5cb83f8c482)
feat(data/polynomial/ring_division): golf and generalize `leading_coeff_div_by_monic_of_monic` ([#11077](https://github.com/leanprover-community/mathlib/pull/#11077))

No longer require that the underlying ring is a domain.
Also added helper API lemma `leading_coeff_monic_mul`.

### [2021-12-31T21:03:19+00:00](https://github.com/leanprover-community/mathlib/commit/8ec59f9c837efd0cb51be291c163ce311722285f)
feat(data/int/gcd): add theorem `gcd_least_linear` ([#10743](https://github.com/leanprover-community/mathlib/pull/#10743))

For nonzero integers `a` and `b`, `gcd a b` is the smallest positive integer that can be written in the form `a * x + b * y` for some pair of integers `x` and `y`

This is an extension of Bézout's lemma (`gcd_eq_gcd_ab`), which says that `gcd a b` can be written in that form.

### [2021-12-31T19:13:58+00:00](https://github.com/leanprover-community/mathlib/commit/e4607f8f819db97e16e900cf5c38b7d5914cbea4)
chore(data/sym/basic): golf and add missing simp lemmas ([#11160](https://github.com/leanprover-community/mathlib/pull/#11160))

By changing `cons` to not use pattern matching, `(a :: s).1 = a ::ₘ s.1` is true by `rfl`, which is convenient here and there for golfing.

### [2021-12-31T19:13:57+00:00](https://github.com/leanprover-community/mathlib/commit/fbbbdfa0a0f3ebdc37025908fc3be1604ed174a9)
feat(algebra/star/self_adjoint): define the self-adjoint elements of a star additive group ([#11135](https://github.com/leanprover-community/mathlib/pull/#11135))

Given a type `R` with `[add_group R] [star_add_monoid R]`, we define `self_adjoint R` as the additive subgroup of self-adjoint elements, i.e. those such that `star x = x`. To avoid confusion, we move `is_self_adjoint` (which defines this to mean `⟪T x, y⟫ = ⟪x, T y⟫` in an inner product space) to the `inner_product_space` namespace.

### [2021-12-31T19:13:55+00:00](https://github.com/leanprover-community/mathlib/commit/fdf09df0ba410ac68ed716ab4cdfcce26559209b)
feat(data/polynomial/degree/lemmas): (nat_)degree_sum_eq_of_disjoint ([#11121](https://github.com/leanprover-community/mathlib/pull/#11121))

Also two helper lemmas on `nat_degree`.
Generalize `degree_sum_fin_lt` to semirings

### [2021-12-31T16:13:18+00:00](https://github.com/leanprover-community/mathlib/commit/c4caf0ee72988fde59158b189a539c7c517c6b4e)
feat(linear_algebra/multilinear/basic): add dependent version of `multilinear_map.dom_dom_congr_linear_equiv` ([#10474](https://github.com/leanprover-community/mathlib/pull/#10474))

Formalized as part of the Sphere Eversion project.

### [2021-12-31T14:15:50+00:00](https://github.com/leanprover-community/mathlib/commit/9a38c196381a86501e53c6e6b92a8a7682a0418a)
feat(data/list/indexes): map_with_index_eq_of_fn ([#11163](https://github.com/leanprover-community/mathlib/pull/#11163))

Some `list.map_with_index` API.

### [2021-12-31T14:15:49+00:00](https://github.com/leanprover-community/mathlib/commit/b92afc9007b533272087efd567ba8e480e9d9e37)
chore(data/equiv/basic): missing dsimp lemmas ([#11159](https://github.com/leanprover-community/mathlib/pull/#11159))

### [2021-12-31T14:15:48+00:00](https://github.com/leanprover-community/mathlib/commit/bcf1d2ddd047fcba2f641d5bf4bf86e0eba896a6)
feat(category_theory/sites/plus): Adds a functorial version of `J.diagram P`, functorial in `P`. ([#11155](https://github.com/leanprover-community/mathlib/pull/#11155))

### [2021-12-31T14:15:46+00:00](https://github.com/leanprover-community/mathlib/commit/7b387924a1845ea8a590ae8d4e5eaee6e8089d99)
feat(category_theory/limits/functor_category): Some additional isomorphisms involving (co)limits of functors. ([#11152](https://github.com/leanprover-community/mathlib/pull/#11152))

### [2021-12-31T14:15:45+00:00](https://github.com/leanprover-community/mathlib/commit/b142b6979c68e5df20ec3628b93c44668ef74310)
feat(data/list/count): add lemma `count_le_count_map` ([#11148](https://github.com/leanprover-community/mathlib/pull/#11148))

Generalises `count_map_map`: for any `f : α → β` (not necessarily injective), `count x l ≤ count (f x) (map f l)`

### [2021-12-31T14:15:44+00:00](https://github.com/leanprover-community/mathlib/commit/dc57b5449561eb76d8af6862f8eb86a422cd0cd0)
feat(ring_theory/localization): Transferring `is_localization` along equivs. ([#11146](https://github.com/leanprover-community/mathlib/pull/#11146))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-31T14:15:43+00:00](https://github.com/leanprover-community/mathlib/commit/bc5e00813ef5e16eaa17c70683d512228bf1907b)
feat(data/dfinsupp/order): Pointwise order on finitely supported dependent functions ([#11138](https://github.com/leanprover-community/mathlib/pull/#11138))

This defines the pointwise order on `Π₀ i, α i`, in very much the same way as in `data.finsupp.order`. It also moves `data.dfinsupp` to `data.dfinsupp.basic`.

### [2021-12-31T14:15:42+00:00](https://github.com/leanprover-community/mathlib/commit/2e8ebdc083b8eaf48d068447e0cffcb0201c936d)
feat(algebra/homology): Construction of null homotopic chain complex … ([#11125](https://github.com/leanprover-community/mathlib/pull/#11125))

…morphisms and one lemma on addivity of homotopies



Co-authored-by: Joël Riou <37772949+joelriou@users.noreply.github.com>

### [2021-12-31T14:15:41+00:00](https://github.com/leanprover-community/mathlib/commit/ff7e837a7487581042834f5101fdcd05c434fa37)
feat(combinatorics/configuration): Variant of `exists_injective_of_card_le` ([#11116](https://github.com/leanprover-community/mathlib/pull/#11116))

Proves a variant of `exists_injective_of_card_le` that will be useful in an upcoming proof.

### [2021-12-31T14:15:41+00:00](https://github.com/leanprover-community/mathlib/commit/1fd70b1b8b33840d1b1ba7ac1851aa3a1e8841bf)
refactor(algebra/big_operators/basic): Reorder lemmas ([#11113](https://github.com/leanprover-community/mathlib/pull/#11113))

This PR does the following things:
- Move `prod_bij` and `prod_bij'` earlier in the file, so that they can be put to use.
- Move `prod_product` and `prod_product'` past `prod_sigma` and `prod_sigma'` down to `prod_product_right` and `prod_product_right'`.
- Use `prod_bij` and `prod_sigma` to give an easier proof of `prod_product`.
- The new proof introduces `prod_finset_product` and the remaining three analogs of the four `prod_product` lemmas.
`prod_finset_product` is a lemma that I found helpful in my own work.

### [2021-12-31T14:15:40+00:00](https://github.com/leanprover-community/mathlib/commit/99e3ffbd3e732d466312bb0680e6ce5140a5bbbc)
feat(data/fin/tuple): new directory and file on sorting ([#11096](https://github.com/leanprover-community/mathlib/pull/#11096))

Code written by @kmill at https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Permutation.20to.20make.20a.20function.20monotone

Co-authored by: Kyle Miller <kmill31415@gmail.com>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2021-12-31T14:15:39+00:00](https://github.com/leanprover-community/mathlib/commit/06a019715809b7c4c67fbf550578a2ea9d55c13e)
feat(category_theory/bicategory/basic): define bicategories ([#11079](https://github.com/leanprover-community/mathlib/pull/#11079))

This PR defines bicategories and gives basic lemmas.

### [2021-12-31T14:15:37+00:00](https://github.com/leanprover-community/mathlib/commit/a5573f375bd8dc13cf2ebdb1b02d9cbf85b0a9c7)
feat(data/{fin,multi}set/powerset): add some lemmas about powerset_len ([#10866](https://github.com/leanprover-community/mathlib/pull/#10866))

For both multisets and finsets

From flt-regular

### [2021-12-31T12:26:01+00:00](https://github.com/leanprover-community/mathlib/commit/78a9900b40942b6b1181ef21dc31be8f24473eeb)
refactor(algebra/group/hom_instances): relax semiring to non_unital_non_assoc_semiring in add_monoid_hom.mul ([#11165](https://github.com/leanprover-community/mathlib/pull/#11165))

Previously `algebra.group.hom_instances` ended with some results showing that left and right multiplication operators are additive monoid homomorphisms between (unital, associative) semirings. The assumptions of a unit and associativity are not required for these results to work, so we relax the condition to `non_unital_non_assoc_semiring`.

Required for [#11073](https://github.com/leanprover-community/mathlib/pull/#11073) .

### [2021-12-31T07:44:08+00:00](https://github.com/leanprover-community/mathlib/commit/dc1525fb3ef6eb4348fb1749c302d8abc303d34a)
docs(data/sum/basic): Expand module docstring and cleanup ([#11158](https://github.com/leanprover-community/mathlib/pull/#11158))

This moves `data.sum` to `data.sum.basic`, provides a proper docstring for it, cleans it up.

There are no new declarations, just some file rearrangement, variable grouping, unindentation, and a `protected` attribute for `sum.lex.inl`/`sum.lex.inr` to avoid them clashing with `sum.inl`/`sum.inr`.

### [2021-12-30T21:39:31+00:00](https://github.com/leanprover-community/mathlib/commit/e1a8b886daae1ab55277babe94b5afa723a28302)
feat(tactic/itauto): add support for [decidable p] assumptions ([#10744](https://github.com/leanprover-community/mathlib/pull/#10744))

This allows proving theorems like the following, which use excluded middle selectively through `decidable` assumptions:
```
example (p q r : Prop) [decidable p] : (p → (q ∨ r)) → ((p → q) ∨ (p → r)) := by itauto
```
This also fixes a bug in the proof search order of the original itauto implementation causing nontermination in one of the new tests, which also makes the "big test" at the end run instantly.

Also adds a `!` option to enable decidability for all propositions using classical logic.

Because adding decidability instances can be expensive for proof search, they are disabled by default. You can specify specific decidable instances to add by `itauto [p, q]`, or use `itauto*` which adds all decidable atoms. (The `!` option is useless on its own, and should be combined with `*` or `[p]` options.)

### [2021-12-30T20:16:32+00:00](https://github.com/leanprover-community/mathlib/commit/7f9283298073946e479c122ce0f95c8ecb6aaa17)
feat(category_theory/currying): `flip` is isomorphic to uncurrying, swapping, and currying. ([#11151](https://github.com/leanprover-community/mathlib/pull/#11151))

### [2021-12-30T18:41:23+00:00](https://github.com/leanprover-community/mathlib/commit/3dad7c8c1b89082f5fc59153f5a41161247d80de)
chore(algebra/ring/comp_typeclasses): fix doctrings ([#11150](https://github.com/leanprover-community/mathlib/pull/#11150))

This fixes the docstrings of two typeclasses.

### [2021-12-30T16:51:28+00:00](https://github.com/leanprover-community/mathlib/commit/682f1e63ac26eb36d99b7a0a0431e3e1078db5cf)
feat(analysis/normed_space/operator_norm): generalize linear_map.bound_of_ball_bound ([#11140](https://github.com/leanprover-community/mathlib/pull/#11140))

This was proved over `is_R_or_C` but holds (in a slightly different form) over all nondiscrete normed fields.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-30T16:51:27+00:00](https://github.com/leanprover-community/mathlib/commit/c0b5ce1290831ea5ab3365e081422a06267649ff)
feat(data/nat/choose/basic): choose_eq_zero_iff ([#11120](https://github.com/leanprover-community/mathlib/pull/#11120))

### [2021-12-30T16:51:27+00:00](https://github.com/leanprover-community/mathlib/commit/993a470e3c0bec394719691cdb888f99be93de30)
feat(analysis/special_functions/log): add log_div_self_antitone_on ([#10985](https://github.com/leanprover-community/mathlib/pull/#10985))

Adds lemma `log_div_self_antitone_on`, which shows that `log x / x` is decreasing when `exp 1 \le x`. Needed for Bertrand's postulate ([#8002](https://github.com/leanprover-community/mathlib/pull/#8002)).

### [2021-12-30T14:54:46+00:00](https://github.com/leanprover-community/mathlib/commit/ac976755c62166345eb53dd5c785146144128973)
feat(data/polynomial/degree/definition): nat_degree_monomial in ite form ([#11123](https://github.com/leanprover-community/mathlib/pull/#11123))

Changed the proof usage elsewhere.
This helps deal with sums of over monomials.

### [2021-12-30T14:54:45+00:00](https://github.com/leanprover-community/mathlib/commit/424773a728ca0e8ad7bc10bb23c9e719b0b4f80b)
feat(data/finset/fold): fold_const, fold_ite ([#11122](https://github.com/leanprover-community/mathlib/pull/#11122))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-12-30T14:54:44+00:00](https://github.com/leanprover-community/mathlib/commit/c8a57623b75fc66a36aa7be3fce55f4b65096347)
feat(order/galois_connection): gc magic ([#11114](https://github.com/leanprover-community/mathlib/pull/#11114))

see [Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/.28l.E2.82.81.20S.29.2Emap.20.CF.83.20.E2.89.A4.20l.E2.82.82.20.28S.2Emap.20.E2.87.91.CF.83.29).

### [2021-12-30T14:54:43+00:00](https://github.com/leanprover-community/mathlib/commit/f6d0f8d15300390b6a6371d92a0fe9401cf4a704)
refactor(analysis/normed_space/operator_norm): split a proof ([#11112](https://github.com/leanprover-community/mathlib/pull/#11112))

Split the proof of `continuous_linear_map.complete_space` into
reusable steps.

Motivated by [#9862](https://github.com/leanprover-community/mathlib/pull/#9862)

### [2021-12-30T14:54:42+00:00](https://github.com/leanprover-community/mathlib/commit/11de86740ea992ce5a0a47f056960d6309fcb6e9)
feat(data/fin/interval): add lemmas ([#11102](https://github.com/leanprover-community/mathlib/pull/#11102))

From flt-regular.

### [2021-12-30T14:54:41+00:00](https://github.com/leanprover-community/mathlib/commit/3398efa6888a220e6efdbd1c75205774f6073885)
feat(topology/homeomorph): homeo of continuous equivalence from compact to T2 ([#11072](https://github.com/leanprover-community/mathlib/pull/#11072))




Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-12-30T14:54:40+00:00](https://github.com/leanprover-community/mathlib/commit/7b1c7751940df9259bad3eec48edee322d7cad60)
chore(category_theory/adjunction/limits): generalize universe ([#11070](https://github.com/leanprover-community/mathlib/pull/#11070))




Co-authored-by: Junyan Xu <junyanxu.math@gmail.com>

### [2021-12-30T14:54:39+00:00](https://github.com/leanprover-community/mathlib/commit/d49ae1277855460f7d8091ad207c3c38d3200587)
feat(topology/homotopy): Add homotopy product ([#10946](https://github.com/leanprover-community/mathlib/pull/#10946))

Binary product and pi product of homotopies.



Co-authored-by: prakol16 <prakol16@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-30T14:14:55+00:00](https://github.com/leanprover-community/mathlib/commit/52841fbfc5680a2e2ba4a80a176edc987f4961f4)
feat(ring_theory/polynomial/cyclotomic/basic): add cyclotomic_expand_eq_cyclotomic_mul ([#11005](https://github.com/leanprover-community/mathlib/pull/#11005))

We prove that, if `¬p ∣ n`, then `expand R p (cyclotomic n R) = (cyclotomic (n * p) R) * (cyclotomic n R)`

- [x] depends on: [#10965](https://github.com/leanprover-community/mathlib/pull/#10965)

### [2021-12-30T08:19:12+00:00](https://github.com/leanprover-community/mathlib/commit/655c2f06a0ad597467f1a586d619e0be96b4899a)
chore(topology/algebra/weak_dual_topology): review ([#11141](https://github.com/leanprover-community/mathlib/pull/#11141))

* Fix universes in `pi.has_continuous_smul`.
* Add `function.injective.embedding_induced` and
  `weak_dual.coe_fn_embedding`.
* Golf some proofs.
* Review `weak_dual.module` etc instances to ensure, e.g.,
  `module ℝ (weak_dual ℂ E)`.

### [2021-12-30T06:52:10+00:00](https://github.com/leanprover-community/mathlib/commit/04071ae352e201ca3509835a4cf66ad1d272186f)
feat(analysis/inner_product_space/adjoint): define the adjoint for linear maps between finite-dimensional spaces ([#11119](https://github.com/leanprover-community/mathlib/pull/#11119))

This PR defines the adjoint of a linear map between finite-dimensional inner product spaces. We use the fact that such maps are always continuous and define it as the adjoint of the corresponding continuous linear map.



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2021-12-30T06:52:09+00:00](https://github.com/leanprover-community/mathlib/commit/9443a7b35ad99b0a3d3743b5602a015352a5dbc2)
feat(data/nat/prime): min fac of a power ([#11115](https://github.com/leanprover-community/mathlib/pull/#11115))

### [2021-12-30T06:52:09+00:00](https://github.com/leanprover-community/mathlib/commit/0b6f9ebb154970327071edbd8a9a1599b4b85652)
feat(logic/small): The image of a small set is small ([#11108](https://github.com/leanprover-community/mathlib/pull/#11108))

A followup to [#11029](https://github.com/leanprover-community/mathlib/pull/#11029). Only realized this could be easily proved once that PR was approved.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-12-30T06:52:08+00:00](https://github.com/leanprover-community/mathlib/commit/864a43bc4d52cd052bfa1206bcf07110f4e91e1d)
feat(combinatorics/simple_graph): lemmas describing edge set of subgraphs ([#11087](https://github.com/leanprover-community/mathlib/pull/#11087))

### [2021-12-30T06:52:06+00:00](https://github.com/leanprover-community/mathlib/commit/8f873b72250a54353f7e5d1bdbffed8dde6490b8)
chore(data/nat/prime): move some results ([#11066](https://github.com/leanprover-community/mathlib/pull/#11066))

I was expecting there'd be more that could be moved, but it doesn't seem like it.

### [2021-12-30T06:04:19+00:00](https://github.com/leanprover-community/mathlib/commit/0c149c9071a4394930ca174bfe8a9a61ab50d8cc)
feat(analysis/special_functions/log): sum of logs is log of product ([#11106](https://github.com/leanprover-community/mathlib/pull/#11106))

### [2021-12-30T02:10:59+00:00](https://github.com/leanprover-community/mathlib/commit/23fdf99d22febd5fc7a77981e9b78a90d8ddf329)
chore(measure_theory/function/lp_space): move `fact`s ([#11107](https://github.com/leanprover-community/mathlib/pull/#11107))

Move from `measure_theory/function/lp_space` to `data/real/ennreal` the `fact`s
- `fact_one_le_one_ennreal`
- `fact_one_le_two_ennreal`
- `fact_one_le_top_ennreal`

so that they can be used not just in the measure theory development of `Lp` space but also in the new `lp` spaces.

### [2021-12-30T01:02:33+00:00](https://github.com/leanprover-community/mathlib/commit/4f3e99a6cd37d4c535c7331323aa26f6c214ecb8)
feat(topology/algebra): range of `coe_fn : (M₁ →ₛₗ[σ] M₂) → (M₁ → M₂)` is closed ([#11105](https://github.com/leanprover-community/mathlib/pull/#11105))

Motivated by [#9862](https://github.com/leanprover-community/mathlib/pull/#9862)

### [2021-12-30T00:20:50+00:00](https://github.com/leanprover-community/mathlib/commit/ea95523def185290d6b071165fe12bfdd41023b6)
feat(analysis/normed_space/dual): add lemmas, golf ([#11132](https://github.com/leanprover-community/mathlib/pull/#11132))

* add `polar_univ`, `is_closed_polar`, `polar_gc`, `polar_Union`,
  `polar_union`, `polar_antitone`, `polar_zero`, `polar_closure`;

* extract `polar_ball_subset_closed_ball_div` and
  `closed_ball_inv_subset_polar_closed_ball` out of the proofs of
  `polar_closed_ball` and `polar_bounded_of_nhds_zero`;

* rename `polar_bounded_of_nhds_zero` to
  `bounded_polar_of_mem_nhds_zero`, use `metric.bounded`;

* use `r⁻¹` instead of `1 / r` in `polar_closed_ball`. This is the
  simp normal form (though we might want to change this in the future).

### [2021-12-29T21:58:43+00:00](https://github.com/leanprover-community/mathlib/commit/be17b92a692e057dd6f39baaf903b63f14365830)
feat(topology/metric_space/lipschitz): image of a bdd set ([#11134](https://github.com/leanprover-community/mathlib/pull/#11134))

Prove that `f '' s` is bounded provided that `f` is Lipschitz
continuous and `s` is bounded.

### [2021-12-29T21:58:42+00:00](https://github.com/leanprover-community/mathlib/commit/5bfd924571c0b59c639b0128ecf228ef8d3fddc8)
chore(analysis/normed_space/basic): add `normed_space.unbounded_univ` ([#11131](https://github.com/leanprover-community/mathlib/pull/#11131))

Extract it from the proof of `normed_space.noncompact_space`.

### [2021-12-29T21:58:41+00:00](https://github.com/leanprover-community/mathlib/commit/5ac87153729bc9091ae190edbbded37f1825e27b)
split(data/finsupp/multiset): Split off `data.finsupp.basic` ([#11110](https://github.com/leanprover-community/mathlib/pull/#11110))

This moves `finsupp.to_multiset`, `multiset.to_finsupp` and `finsupp.order_iso_multiset` to a new file `data.finsupp.multiset`.

### [2021-12-29T21:58:40+00:00](https://github.com/leanprover-community/mathlib/commit/b8833e9e3c0a5a0f64572d4a4c9f9878643a3dd4)
chore(data/*): Eliminate `finish` ([#11099](https://github.com/leanprover-community/mathlib/pull/#11099))

Removing uses of `finish`, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-12-29T21:58:39+00:00](https://github.com/leanprover-community/mathlib/commit/2a929f242de84859830c8d89cb112e903e68ad9b)
feat(algebra/ne_zero): typeclass for n ≠ 0 ([#11033](https://github.com/leanprover-community/mathlib/pull/#11033))



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-12-29T21:03:06+00:00](https://github.com/leanprover-community/mathlib/commit/dd65894befbb81e96c57570eebbdf79397e134f0)
chore(*): Eliminate some more instances of `finish` ([#11136](https://github.com/leanprover-community/mathlib/pull/#11136))

Removing uses of `finish`, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)

This (and the previous series of PRs) eliminates the last few instances of `finish` in the main body of mathlib, leaving only instances in the `scripts`, `test`, `tactic`, and `archive` folders.



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-12-29T21:03:05+00:00](https://github.com/leanprover-community/mathlib/commit/d67a1dc6608da0ceefe13b9c10c7e3fe5c787880)
chore(number_theory/quadratic_reciprocity): Eliminate `finish` ([#11133](https://github.com/leanprover-community/mathlib/pull/#11133))

Removing uses of `finish`, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)

### [2021-12-29T21:03:04+00:00](https://github.com/leanprover-community/mathlib/commit/c03dbd16a9961ee876ae8ddda23c4a92e0ff0b3b)
chore(algebra/continued_fractions/computation/translations): Eliminate `finish` ([#11130](https://github.com/leanprover-community/mathlib/pull/#11130))

Removing uses of `finish`, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-12-29T21:03:03+00:00](https://github.com/leanprover-community/mathlib/commit/90d12bb1d9e8b605e09b390d733b565ad5f452e1)
chore(computability/NFA): Eliminate `finish` ([#11103](https://github.com/leanprover-community/mathlib/pull/#11103))

Removing uses of `finish`, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-12-29T20:15:05+00:00](https://github.com/leanprover-community/mathlib/commit/6703cdda6e8505fd615a0a6829022ed42273db13)
chore([normed/charted]_space): Eliminate `finish` ([#11126](https://github.com/leanprover-community/mathlib/pull/#11126))

Removing uses of `finish`, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)




Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-12-29T18:18:57+00:00](https://github.com/leanprover-community/mathlib/commit/c25bd03efeb4f89dfd92e1a598a5ae86c61a26d3)
feat(algebra/order/field): prove `a / a ≤ 1` ([#11118](https://github.com/leanprover-community/mathlib/pull/#11118))

### [2021-12-29T16:12:37+00:00](https://github.com/leanprover-community/mathlib/commit/395e27554fc8db530ad6a1c3dbaff0a602653aa6)
chore(topology/metric_space/basic): +1 version of Heine-Borel ([#11127](https://github.com/leanprover-community/mathlib/pull/#11127))

* Mark `metric.is_compact_of_closed_bounded` as "Heine-Borel" theorem
  too.
* Add `metric.bounded.is_compact_closure`.

### [2021-12-29T16:12:36+00:00](https://github.com/leanprover-community/mathlib/commit/cb37df34a3785b2da712ceae79f0c8a05d9238a3)
feat(data/list/pairwise): pairwise repeat ([#11117](https://github.com/leanprover-community/mathlib/pull/#11117))

### [2021-12-29T14:53:37+00:00](https://github.com/leanprover-community/mathlib/commit/d8b426744168429666bdec0112301056cb76193f)
chore(algebra/big_operators/finprod): Eliminate `finish` ([#10923](https://github.com/leanprover-community/mathlib/pull/#10923))

Removing uses of finish, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-12-29T12:26:04+00:00](https://github.com/leanprover-community/mathlib/commit/e003d6e278e4cbb0bf9c0abad75b1d04794bf08a)
feat(data/polynomial): more API for roots ([#11081](https://github.com/leanprover-community/mathlib/pull/#11081))

`leading_coeff_monic_mul`
`leading_coeff_X_sub_C`
`root_multiplicity_C`
`not_is_root_C`
`roots_smul_nonzero`
`leading_coeff_div_by_monic_X_sub_C`
`roots_eq_zero_iff`

also generalized various statements about `X - C a` to `X + C a` over semirings.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-12-29T02:26:11+00:00](https://github.com/leanprover-community/mathlib/commit/268d1a8620537cf9f7304c9f4caceac9e7c1f785)
chore(topology/metric_space/basic): golf, add dot notation ([#11111](https://github.com/leanprover-community/mathlib/pull/#11111))

* add `cauchy_seq.bounded_range`;
* golf `metric.bounded_range_of_tendsto`.

### [2021-12-28T20:56:25+00:00](https://github.com/leanprover-community/mathlib/commit/a82c48193df7903ddbfc702ec6ae068fa142ee33)
feat(data/polynomial/basic): `add_submonoid.closure` of monomials is `⊤` ([#11101](https://github.com/leanprover-community/mathlib/pull/#11101))

Use it to golf `polynomial.add_hom_ext`.

### [2021-12-28T20:56:24+00:00](https://github.com/leanprover-community/mathlib/commit/134ff7d239107597d5054302bb1fdcd310c62c52)
feat(data/option/basic): add `eq_of_mem_of_mem` ([#11098](https://github.com/leanprover-community/mathlib/pull/#11098))

If `a : α` belongs to both `o1 o2 : option α` then `o1 = o2`

### [2021-12-28T20:56:23+00:00](https://github.com/leanprover-community/mathlib/commit/f11d3ca2cb0c2e54abba8acbbd7dcb69b51f8be1)
feat(analysis/special_functions/pow): `rpow` as an `order_iso` ([#10831](https://github.com/leanprover-community/mathlib/pull/#10831))

Bundles `rpow` into an order isomorphism on `ennreal` when the exponent is a fixed positive real.

- [x] depends on: [#10701](https://github.com/leanprover-community/mathlib/pull/#10701) 


Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2021-12-28T19:49:35+00:00](https://github.com/leanprover-community/mathlib/commit/8d41552f25865211986ac5541a4a9b94da14dc61)
feat(logic/small): The range of a function from a small type is small ([#11029](https://github.com/leanprover-community/mathlib/pull/#11029))

That is, you don't actually need an equivalence to build `small α`, a mere function does the trick.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-12-28T19:49:34+00:00](https://github.com/leanprover-community/mathlib/commit/8d24a1fe324e8610dbefa95b281bffbd0b79c78d)
refactor(category_theory/shift): make shifts more flexible ([#10573](https://github.com/leanprover-community/mathlib/pull/#10573))

Co-authored-by: Andrew Yang <the.erd.one@gmail.com>



Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>
Co-authored-by: erd1 <the.erd.one@gmail.com>

### [2021-12-28T18:16:58+00:00](https://github.com/leanprover-community/mathlib/commit/0b80d0cb74a609f3f37f8425634ce8e3f44b5cac)
chore(ring_theory/*): Eliminate `finish` ([#11100](https://github.com/leanprover-community/mathlib/pull/#11100))

Removing uses of `finish`, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)

### [2021-12-28T15:39:49+00:00](https://github.com/leanprover-community/mathlib/commit/143fec6454a59f67c2bf71673f4ecf5cb3b7c922)
chore(linear_algebra/*): Eliminate `finish` ([#11074](https://github.com/leanprover-community/mathlib/pull/#11074))

Removing uses of `finish`, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)

### [2021-12-28T13:53:36+00:00](https://github.com/leanprover-community/mathlib/commit/d053d57a44b64b3f1323c4805cb864524183d16f)
feat(topology): missing lemmas for Kyle ([#11076](https://github.com/leanprover-community/mathlib/pull/#11076))

Discussion [on Zulip](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Continuous.20bijective.20from.20compact.20to.20T1.20implies.20homeomorphis) revealed gaps in library. This PR fills those gaps and related ones discovered on the way. It will simplify [#11072](https://github.com/leanprover-community/mathlib/pull/#11072). Note that it unprotects `topological_space.nhds_adjoint` and puts it into the root namespace. I guess this was protected because it was seen only as a technical tools to prove properties of `nhds`.

### [2021-12-28T12:15:06+00:00](https://github.com/leanprover-community/mathlib/commit/10771d7e9b7f3c3f12960df5d0400b00b2d5fbf9)
doc(combinatorics/configuration): Make comments into docstrings ([#11097](https://github.com/leanprover-community/mathlib/pull/#11097))

These comments should have been docstrings.

### [2021-12-28T12:15:05+00:00](https://github.com/leanprover-community/mathlib/commit/d3aa0a43d4a9a45e62c804c434e3873ddfda5555)
feat(data/polynomial/coeff): generalize to coeff_X_add_C_pow ([#11093](https://github.com/leanprover-community/mathlib/pull/#11093))

That golfs the proof for `coeff_X_add_one_pow`.

### [2021-12-28T12:15:03+00:00](https://github.com/leanprover-community/mathlib/commit/afff1bbcadd3d4050aa49c51f94700234d63a702)
chore(data/polynomial/eval): golf a proof, add versions ([#11092](https://github.com/leanprover-community/mathlib/pull/#11092))

* golf the proof of `polynomial.eval_prod`;
* add versions `polynomial.eval_multiset_prod` and
  `polynomial.eval_list_prod`.

### [2021-12-28T11:35:38+00:00](https://github.com/leanprover-community/mathlib/commit/c04a42fe08fc17c0b4a8520eea2be47d91c2bb88)
feat(measure_theory/integral/{interval,circle}_integral): add strict inequalities ([#11061](https://github.com/leanprover-community/mathlib/pull/#11061))

### [2021-12-28T09:40:04+00:00](https://github.com/leanprover-community/mathlib/commit/f452b383f80405745167ea1ed3620417f9dd0db1)
feat(data/pi): bit[01]_apply simp lemmas ([#11086](https://github.com/leanprover-community/mathlib/pull/#11086))

### [2021-12-28T07:03:21+00:00](https://github.com/leanprover-community/mathlib/commit/94bb466741ca701f1dde4990e286c6b1ec153344)
feat(tactic/fin_cases): document `fin_cases with` and add `fin_cases using` ([#11085](https://github.com/leanprover-community/mathlib/pull/#11085))

Closes [#11016](https://github.com/leanprover-community/mathlib/pull/#11016) 



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2021-12-28T06:21:09+00:00](https://github.com/leanprover-community/mathlib/commit/44f22aac657517f7d2961a0e01b0a7ae2580ff70)
feat(ring_theory/power_series/basic): add api for coeffs of shifts ([#11082](https://github.com/leanprover-community/mathlib/pull/#11082))

Based on the corresponding API for polynomials

### [2021-12-28T03:25:46+00:00](https://github.com/leanprover-community/mathlib/commit/f0ca4338262cf5c305ea10c7059e0556f7785db6)
feat(data/set/finite): finite_or_infinite ([#11084](https://github.com/leanprover-community/mathlib/pull/#11084))

### [2021-12-28T03:25:45+00:00](https://github.com/leanprover-community/mathlib/commit/612a47669aee1dff89dd33966bc21aebc97dc45a)
feat(ring_theory/polynomial/cyclotomic/basic): add cyclotomic_expand_eq_cyclotomic ([#10974](https://github.com/leanprover-community/mathlib/pull/#10974))

We prove that, if `p ∣ n`, then `expand R p (cyclotomic n R) = cyclotomic (p * n) R`.

- [x] depends on: [#10965](https://github.com/leanprover-community/mathlib/pull/#10965)
- [x] depends on: [#10971](https://github.com/leanprover-community/mathlib/pull/#10971)

### [2021-12-28T02:46:14+00:00](https://github.com/leanprover-community/mathlib/commit/10ea8609f39cf73f504ff5b09f024e184e75a45d)
feat(ring_theory/polynomial/cyclotomic/basic): cyclotomic_prime_mul_X_sub_one ([#11063](https://github.com/leanprover-community/mathlib/pull/#11063))

From flt-regular.

### [2021-12-27T18:57:58+00:00](https://github.com/leanprover-community/mathlib/commit/294e78e75d771a09dcd296d2068f215933ff7e2a)
feat(algebra/group_with_zero/power): With zero lemmas ([#11051](https://github.com/leanprover-community/mathlib/pull/#11051))

This proves the `group_with_zero` variant of some lemmas and moves lemmas from `algebra.group_power.basic` to `algebra.group_with_zero.power`.

### [2021-12-27T18:57:57+00:00](https://github.com/leanprover-community/mathlib/commit/1332fe1aceee17725cd9121705a1ae85ac3bd541)
fix(tactic/rcases): more with_desc fail ([#11004](https://github.com/leanprover-community/mathlib/pull/#11004))

This causes hovers for definitions using `rcases_patt_parse` to print
weird stuff for the parser description.

### [2021-12-27T16:46:26+00:00](https://github.com/leanprover-community/mathlib/commit/0e8cca3668de65af22c5156ae5c30c644c9260b8)
feat(algebra/big_operators/order): `prod_eq_prod_iff_of_le` ([#11068](https://github.com/leanprover-community/mathlib/pull/#11068))

If `f i ≤ g i` for all `i ∈ s`, then `∏ i in s, f i = ∏ i in s, g i` if and only if `f i = g i` for all `i ∈ s`.

### [2021-12-27T16:46:25+00:00](https://github.com/leanprover-community/mathlib/commit/6ed17fc73b62fe5f7a5f9043d3f8e1677a0118fb)
refactor(combinatorics/configuration): Generalize results ([#11065](https://github.com/leanprover-community/mathlib/pull/#11065))

This PR slightly generalizes the results in `configuration.lean` by weakening the definitions of `has_points` and `has_lines`. The new definitions are also more natural, in my opinion.

### [2021-12-27T16:46:24+00:00](https://github.com/leanprover-community/mathlib/commit/e1133ccc8f62be3eabb1bf0e006b0ae20aa7f69f)
chore(order/*): Eliminate `finish` ([#11064](https://github.com/leanprover-community/mathlib/pull/#11064))

Removing uses of `finish`, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)

Credit to Ruben Van de Velde who suggested the solution for `eventually_lift'_powerset_eventually`

### [2021-12-27T16:46:23+00:00](https://github.com/leanprover-community/mathlib/commit/46566c5b4f2e93a7fede84bf198bf49e22f21a5b)
split(data/list/infix): Split off `data.list.basic` ([#11062](https://github.com/leanprover-community/mathlib/pull/#11062))

This moves `list.prefix`, `list.subfix`, `list.infix`, `list.inits`, `list.tails` and `insert` lemmas from `data.list.basic` to a new file `data.list.infix`.

### [2021-12-27T16:46:22+00:00](https://github.com/leanprover-community/mathlib/commit/2ecf48000c004a34458fe9daeefe51083ec977bc)
feat(algebra/group/units): generalize `units.coe_lift` ([#11057](https://github.com/leanprover-community/mathlib/pull/#11057))

* Generalize `units.coe_lift` from `group_with_zero` to `monoid`; use condition `is_unit` instead of `≠ 0`.
* Add some missing `@[to_additive]` attrs.

### [2021-12-27T16:46:21+00:00](https://github.com/leanprover-community/mathlib/commit/de6f57d2041f209a5229d421ac0f019a78a7c7c4)
chore(ring_theory/unique_factorization_domain): Eliminate `finish` ([#11055](https://github.com/leanprover-community/mathlib/pull/#11055))

Removing uses of finish, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)

### [2021-12-27T16:46:20+00:00](https://github.com/leanprover-community/mathlib/commit/d67c469705810c3f31d3f8a9bb6d03da430dc92e)
feat(combinatorics/simple_graph/basic): edge deletion ([#11054](https://github.com/leanprover-community/mathlib/pull/#11054))

Function to delete edges from a simple graph, and some associated lemmas.

Also defines `sym2.to_rel` as an inverse to `sym2.from_rel`.

### [2021-12-27T16:46:19+00:00](https://github.com/leanprover-community/mathlib/commit/ca2c3443f0f81636d79741067d7e5ce99d1bb57b)
split(data/finsupp/order): Split off `data.finsupp.basic` ([#11045](https://github.com/leanprover-community/mathlib/pull/#11045))

This moves all order instances about `finsupp` from `data.finsupp.basic` and `data.finsupp.lattice` to a new file `data.finsupp.order`.

I'm crediting
* Johan for [#1216](https://github.com/leanprover-community/mathlib/pull/#1216), [#1244](https://github.com/leanprover-community/mathlib/pull/#1244)
* Aaron Anderson for [#3335](https://github.com/leanprover-community/mathlib/pull/#3335)

### [2021-12-27T16:46:18+00:00](https://github.com/leanprover-community/mathlib/commit/463be8849332eb1e14ad1439a399b4a41e85baf3)
feat(algebra/group_with_zero): add zero_mul_eq_const and mul_zero_eq_const ([#11021](https://github.com/leanprover-community/mathlib/pull/#11021))

These are to match the corresponding lemmas about unapplied application of multiplication by 1. Like those lemmas, these are not marked simp.

### [2021-12-27T16:46:17+00:00](https://github.com/leanprover-community/mathlib/commit/a36035475cc86d469fe9b828a5d9f47a751e108a)
feat(algebraic_geometry): Basic open set is empty iff section is zero in reduced schemes. ([#11012](https://github.com/leanprover-community/mathlib/pull/#11012))



Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-27T16:46:16+00:00](https://github.com/leanprover-community/mathlib/commit/ae8f08fe3a46d5bc9d5d1544bc6d0b68cc1d48e7)
feat(combinatorics/simple_graph/connectivity): more lemmas ([#11010](https://github.com/leanprover-community/mathlib/pull/#11010))

This is the second chunk of [#8737](https://github.com/leanprover-community/mathlib/pull/#8737), which gives some more lemmas for manipulating the support and edge lists of walks. This also turns `is_trail` back into a structure.

### [2021-12-27T16:46:14+00:00](https://github.com/leanprover-community/mathlib/commit/f525f93e1c9e97853981e0ee66aad5a0e3f67d75)
chore(*): Eliminate `finish` ([#10970](https://github.com/leanprover-community/mathlib/pull/#10970))

Eliminating the use of `finish` in `data/set/basic`, `order/filter/bases`, and `topology/algebra/valued_field`.

### [2021-12-27T16:46:13+00:00](https://github.com/leanprover-community/mathlib/commit/2f3b966f7bf12f4cde30bb35a24e9febbfaa1d3d)
feat(number_theory/cyclotomic/basic): add is_cyclotomic_extension ([#10849](https://github.com/leanprover-community/mathlib/pull/#10849))

We add a class `is_cyclotomic_extension S A B` expressing the fact that `B` is obtained by `A` by adding `n`-th
primitive roots of unity, for all `n ∈ S`, where `S : set ℕ+`, and some basic properties.

We will add more properties of cyclotomic extensions in a future work.

From flt-regular.

### [2021-12-27T14:52:07+00:00](https://github.com/leanprover-community/mathlib/commit/002b8d97c0d560057726b29f760f747a140e9753)
feat(algebra/group_with_zero/basic): mul_{left,right}_eq_self₀ ([#11069](https://github.com/leanprover-community/mathlib/pull/#11069))

Defined on `cancel_monoid_with_zero`,
copying the name and proofs from `{left,right)_cancel_monoid`s,

### [2021-12-27T12:07:40+00:00](https://github.com/leanprover-community/mathlib/commit/b28734c8d2bf09f6d5648d48065833db5dd5eaa5)
feat(data/sym): Provide API for data.sym ([#11032](https://github.com/leanprover-community/mathlib/pull/#11032))




Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-12-27T08:24:00+00:00](https://github.com/leanprover-community/mathlib/commit/7e0b994c3654d40782a30bf535e7761dbc7bba6a)
feat(topology/compact_convergence): define compact convergence ([#10967](https://github.com/leanprover-community/mathlib/pull/#10967))

And prove that the topology it induces is the compact-open topology

Co-authored-by: Chris Birkbeck <cd.birkbeck@gmail.com>

### [2021-12-26T23:49:34+00:00](https://github.com/leanprover-community/mathlib/commit/7c9ce5c0ea5dbbecb0cd0fd5ca36b3cd4c24f9ba)
feat(algebra/order/monoid_lemmas): `mul_eq_mul_iff_eq_and_eq` ([#11056](https://github.com/leanprover-community/mathlib/pull/#11056))

If `a ≤ c` and `b ≤ d`, then `a * b = c * d` iff `a = c` and `b = d`.

### [2021-12-26T05:05:27+00:00](https://github.com/leanprover-community/mathlib/commit/4f02336c50986e4aecf9b3f251e3178896f9fd0b)
chore(analysis/complex/circle): minor review ([#11059](https://github.com/leanprover-community/mathlib/pull/#11059))

* use implicit arg in `mem_circle_iff_abs`;
* rename `abs_eq_of_mem_circle` to `abs_coe_circle` to reflect the type of LHS;
* add `mem_circle_iff_norm_sq`.

### [2021-12-26T03:49:28+00:00](https://github.com/leanprover-community/mathlib/commit/daab3ac4ffff3f939ba0db430f7fd5c148c36890)
feat(data/pi/interval): Dependent functions to locally finite orders are locally finite ([#11050](https://github.com/leanprover-community/mathlib/pull/#11050))

This provides the locally finite order instance for `Π i, α i` where the `α i` are locally finite.

### [2021-12-26T03:49:27+00:00](https://github.com/leanprover-community/mathlib/commit/2e2510ee65b6d83dc6c0ad0aacb110a84e61ab75)
chore(logic/small): Some golfing ([#11030](https://github.com/leanprover-community/mathlib/pull/#11030))

### [2021-12-26T03:49:26+00:00](https://github.com/leanprover-community/mathlib/commit/dd6707c96bf4112ca701b8f4de732c51c3faec5e)
feat(measure_theory/integral): a couple of lemmas on integrals and integrability ([#10983](https://github.com/leanprover-community/mathlib/pull/#10983))

Adds a couple of congruence lemmas for integrating on intervals and integrability

### [2021-12-26T02:00:29+00:00](https://github.com/leanprover-community/mathlib/commit/34e79d6cab63b89d7213e2b1fba1d2e4e18f1555)
chore(data/list/prod): remove an out of date comment ([#11058](https://github.com/leanprover-community/mathlib/pull/#11058))

Due to changes in the library structure this comment is no longer relevant.

### [2021-12-26T01:20:52+00:00](https://github.com/leanprover-community/mathlib/commit/266d12becf1de778c866893cfb49c0c126502966)
chore(ring_theory/polynomial/bernstein): use `∑` notation ([#11060](https://github.com/leanprover-community/mathlib/pull/#11060))

Also rewrite a proof using `calc` mode

### [2021-12-25T21:05:18+00:00](https://github.com/leanprover-community/mathlib/commit/abf96572adcfb0618a57db83ebd8a6919e95f4c6)
feat(algebraic_geometry): Results about open immersions of schemes. ([#10977](https://github.com/leanprover-community/mathlib/pull/#10977))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-25T21:05:17+00:00](https://github.com/leanprover-community/mathlib/commit/07b578e55ca0d4264a372c6ebb265eed2d129fcf)
feat(data/int/basic): add lemma `gcd_greatest` ([#10613](https://github.com/leanprover-community/mathlib/pull/#10613))

Proving a uniqueness property for `gcd`.  This is (a version of) Theorem 1.3 in Apostol (1976) Introduction to Analytic Number Theory.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-12-25T19:14:06+00:00](https://github.com/leanprover-community/mathlib/commit/8d426f0401c4fd47fb032daea6acdd577f848f29)
split(algebra/big_operators/multiset): Split off `data.multiset.basic` ([#11043](https://github.com/leanprover-community/mathlib/pull/#11043))

This moves
* `multiset.prod`, `multiset.sum` to `algebra.big_operators.multiset`
* `multiset.join`, `multiset.bind`, `multiset.product`, `multiset.sigma` to `data.multiset.bind`. This is needed as `join` is defined
  using `sum`.

The file was quite messy, so I reorganized `algebra.big_operators.multiset` by increasing typeclass assumptions.

I'm crediting Mario for 0663945f55335e51c2b9b3a0177a84262dd87eaf (`prod`, `sum`, `join`), f9de18397dc1a43817803c2fe5d84b282287ed0d (`bind`, `product`), 16d40d7491d1fe8a733d21e90e516e0dd3f41c5b (`sigma`).

### [2021-12-25T17:20:05+00:00](https://github.com/leanprover-community/mathlib/commit/4923cfc5d68c9c28370cea9745e71f8291e0044b)
chore(set_theory/ordinal): Removed redundant argument from `enum_typein` ([#11049](https://github.com/leanprover-community/mathlib/pull/#11049))

### [2021-12-25T17:20:04+00:00](https://github.com/leanprover-community/mathlib/commit/ad99529e631580946e5342b77ae6e09db662eabc)
feat(data/set/basic): Added `range_eq_iff` ([#11044](https://github.com/leanprover-community/mathlib/pull/#11044))

This serves as a convenient theorem for proving statements of the form `range f = S`.

### [2021-12-25T16:16:30+00:00](https://github.com/leanprover-community/mathlib/commit/914250ef97a85a75f9e47ce7a6682367842a1344)
chore(data/real/ennreal): adjust form of `to_real_pos_iff` ([#11047](https://github.com/leanprover-community/mathlib/pull/#11047))

We have a principle (which may not have been crystallized at the time of writing of `data/real/ennreal`) that hypotheses of lemmas should contain the weak form `a ≠ ∞`, while conclusions should report the strong form `a < ∞`, and also the same for  `a ≠ 0`, `0 < a`.

In the case of the existing lemma
```lean
lemma to_real_pos_iff : 0 < a.to_real ↔ (0 < a ∧ a ≠ ∞):=
```
it's not clear whether the RHS of the iff should count as a hypothesis or a conclusion.  So I have rewritten to provide two forms,
```lean
lemma to_real_pos_iff : 0 < a.to_real ↔ (0 < a ∧ a < ∞):=
lemma to_real_pos {a : ℝ≥0∞} (ha₀ : a ≠ 0) (ha_top : a ≠ ∞) : 0 < a.to_real :=
```
Having both versions available shortens many proofs slightly.

### [2021-12-25T10:29:50+00:00](https://github.com/leanprover-community/mathlib/commit/c9f47c978dc7f76d92a176e239f74708e6fe45fb)
chore(data/matrix/block): Eliminate `finish` ([#10948](https://github.com/leanprover-community/mathlib/pull/#10948))

Removing uses of finish, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-12-25T10:29:49+00:00](https://github.com/leanprover-community/mathlib/commit/0aca7061a79824531b1c23860be9053d7af24efc)
feat(measure_theory/integral): define `circle_integral` ([#10906](https://github.com/leanprover-community/mathlib/pull/#10906))

### [2021-12-25T05:51:25+00:00](https://github.com/leanprover-community/mathlib/commit/ef8005cd55e1025982ca0761bc3573bdbec95e20)
chore(category_theory/limits) : Remove instance requirement  ([#11041](https://github.com/leanprover-community/mathlib/pull/#11041))

### [2021-12-25T05:51:24+00:00](https://github.com/leanprover-community/mathlib/commit/864a12e878f348dc1ddf3b5db7a4dd0ddc474948)
chore(measure_theory/function/lp_space): use notation for `nnnorm` ([#11039](https://github.com/leanprover-community/mathlib/pull/#11039))

### [2021-12-25T05:51:23+00:00](https://github.com/leanprover-community/mathlib/commit/0f076d24f86d3e3d6345e14bdcd6edb1d45517d1)
chore(algebra/*): Eliminate `finish` ([#11034](https://github.com/leanprover-community/mathlib/pull/#11034))

Removing uses of `finish`, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-25T05:51:22+00:00](https://github.com/leanprover-community/mathlib/commit/f9561d4023135a1017bdd1e7477f8c7711e22c0f)
feat(ring_theory/localization): The localization at a fg submonoid is of finite type. ([#10990](https://github.com/leanprover-community/mathlib/pull/#10990))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-25T05:51:21+00:00](https://github.com/leanprover-community/mathlib/commit/5719a029d82be9c1f95dde5c1bc7616458fe9498)
feat(data/nat/totient): add totient_mul_prime_div ([#10971](https://github.com/leanprover-community/mathlib/pull/#10971))

We add `(p * n).totient = p * n.totient` if `p ∣ n`.

### [2021-12-25T05:51:20+00:00](https://github.com/leanprover-community/mathlib/commit/d28b3bd5c3a26b62a4c67900eaa888e22343222a)
feat(combinatorics/configuration): Points and lines inequality ([#10772](https://github.com/leanprover-community/mathlib/pull/#10772))

If a nondegenerate configuration has a unique line through any two points, then there are at least as many lines as points.

### [2021-12-25T05:09:25+00:00](https://github.com/leanprover-community/mathlib/commit/0dd60aeb1314f7c0c853e3afaf7e591bb92c6e4e)
feat(algebraic_geometry): Schemes are sober. ([#11040](https://github.com/leanprover-community/mathlib/pull/#11040))

Also renamed things in `topology/sober.lean`.

### [2021-12-25T02:17:30+00:00](https://github.com/leanprover-community/mathlib/commit/f80c18bfdf620b6fcf462430136c61d0ded07035)
feat(measure_theory/measure/haar_lebesgue): Lebesgue measure of the image of a set under a linear map ([#11038](https://github.com/leanprover-community/mathlib/pull/#11038))

The image of a set `s` under a linear map `f` has measure equal to `μ s` times the absolute value of the determinant of `f`.

### [2021-12-24T23:10:00+00:00](https://github.com/leanprover-community/mathlib/commit/aa669096b6155506f7e923130fd22cd36194290f)
chore(algebraic_geometry): Remove unwanted spaces. ([#11042](https://github.com/leanprover-community/mathlib/pull/#11042))




Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-12-24T23:09:59+00:00](https://github.com/leanprover-community/mathlib/commit/d6ecc14a8ec09ae5c4b124cb6b7464af72734c59)
feat(data/mv_polynomial): API for mv polynomial.rename ([#10921](https://github.com/leanprover-community/mathlib/pull/#10921))

Relation between `rename` and `support`, `degrees` and `degree_of` when `f : σ → τ` is injective.

- I'm not sure if we already have something like `sup_map_multiset`.
- I've stated `sup_map_multiset`using `embedding` but I've used `injective` elsewhere because `mv_polynomial.rename` is written using `injective`.
-  I'm not sure if we should have `map_domain_embedding_of_injective`.
 


Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-12-24T23:09:58+00:00](https://github.com/leanprover-community/mathlib/commit/f7038c242f36b19a59c2c7bf80a5284cfad371e5)
feat(analysis/inner_product_space/adjoint): show that continuous linear maps on a Hilbert space form a C*-algebra ([#10837](https://github.com/leanprover-community/mathlib/pull/#10837))

This PR puts a `cstar_ring` instance on `E →L[𝕜] E`, thereby showing that it forms a C*-algebra.

- [x] depends on: [#10825](https://github.com/leanprover-community/mathlib/pull/#10825) [which defines the adjoint]



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2021-12-24T21:14:13+00:00](https://github.com/leanprover-community/mathlib/commit/8a997f3fb1cdbfc1f83bbd907ea7f24a48eb494e)
feat(combinatorics/configuration): Inequality between `point_count` and `line_count` ([#11036](https://github.com/leanprover-community/mathlib/pull/#11036))

An inequality between `point_count` and `line_count`.

### [2021-12-24T21:14:12+00:00](https://github.com/leanprover-community/mathlib/commit/8181fe892b720bcf7f4906537044b47a2742406b)
feat(measure_theory/covering/besicovitch): covering a set by balls with controlled measure ([#11035](https://github.com/leanprover-community/mathlib/pull/#11035))

We show that, in a real vector space, any set `s` can be covered by balls whose measures add up to at most `μ s + ε`, as a consequence of the Besicovitch covering theorem.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-24T21:14:11+00:00](https://github.com/leanprover-community/mathlib/commit/a998db668254d468845021f8633ab780ae98eedd)
refactor(data/nat/prime): redefine nat.prime as irreducible ([#11031](https://github.com/leanprover-community/mathlib/pull/#11031))

### [2021-12-24T21:14:10+00:00](https://github.com/leanprover-community/mathlib/commit/3588c3a0882b493c75670c0f645b98b76ecf8e96)
feat(data/multiset/basic): empty_or_exists_mem ([#11023](https://github.com/leanprover-community/mathlib/pull/#11023))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-12-24T21:14:09+00:00](https://github.com/leanprover-community/mathlib/commit/404a9125ec4d6f9d61ac213cfb60623362013718)
chore(ring_theory/adjoin/power_basis): add `simps` ([#11018](https://github.com/leanprover-community/mathlib/pull/#11018))





Co-authored-by: Eric Rodriguez <ericrboidi@gmail.com>

### [2021-12-24T21:14:08+00:00](https://github.com/leanprover-community/mathlib/commit/d5a3e8c2335b168ab854c66485af8a3d380ce7fd)
feat(ring_theory/derivation): add 3 lemmas ([#10996](https://github.com/leanprover-community/mathlib/pull/#10996))

Add `map_smul_of_tower`, `map_coe_nat`, and `map_coe_int`.

### [2021-12-24T21:14:07+00:00](https://github.com/leanprover-community/mathlib/commit/c4268a86536905915ab15be9122afcc8ce2e46e5)
feat(topology,analysis): there exists `y ∈ frontier s` at distance `inf_dist x sᶜ` from `x` ([#10976](https://github.com/leanprover-community/mathlib/pull/#10976))

### [2021-12-24T19:23:20+00:00](https://github.com/leanprover-community/mathlib/commit/5dac1c08d2b08476002213270834cf57e806906a)
chore(topology/*): Eliminate `finish` ([#10991](https://github.com/leanprover-community/mathlib/pull/#10991))

Removing uses of finish, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-12-24T16:32:31+00:00](https://github.com/leanprover-community/mathlib/commit/35b67fd9c1f6e2bf71affd2680e4371d40efbf0a)
feat(algebra/order/field, data/real/basic): lemmas about `Sup` and `is_lub` ([#11013](https://github.com/leanprover-community/mathlib/pull/#11013))

Add a lemma stating that for `f : α → ℝ` with `α` empty, `(⨆ i, f i) = 0`; a lemma stating that in an ordered field `is_lub` scales under multiplication by a nonnegative constant, and some variants.

### [2021-12-24T16:32:30+00:00](https://github.com/leanprover-community/mathlib/commit/3377bccdb5b8624a7b38c2c6dbfe557a84c5653d)
feat(analysis/inner_product_space/adjoint): define the adjoint of a continuous linear map between Hilbert spaces ([#10825](https://github.com/leanprover-community/mathlib/pull/#10825))

This PR defines the adjoint of an operator `A : E →L[𝕜] F` as the unique operator `adjoint A : F →L[𝕜] E` such that `⟪x, A y⟫ = ⟪adjoint A x, y⟫` for all `x` and `y`. We then use this to put a star algebra structure on `E →L[𝕜] E` with the adjoint as the star operation (while leaving the C* property for a subsequent PR).

Co-authored-by: Heather Macbeth hmacbeth1@fordham.edu



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2021-12-24T15:31:49+00:00](https://github.com/leanprover-community/mathlib/commit/99c634cccec3028c53feed87e17a3c74c442e9d0)
feat(analysis/normed_space/spectrum): adds easy direction of Gelfand's formula for the spectral radius ([#10847](https://github.com/leanprover-community/mathlib/pull/#10847))

This adds the easy direction (i.e., an inequality) of Gelfand's formula for the spectral radius. Namely, we prove that `spectral_radius 𝕜 a ≤ ∥a ^ (n + 1)∥₊ ^ (1 / (n + 1) : ℝ)` for all `n : ℕ` using the spectral mapping theorem for polynomials.

- [x] depends on: [#10783](https://github.com/leanprover-community/mathlib/pull/#10783)

### [2021-12-24T13:57:18+00:00](https://github.com/leanprover-community/mathlib/commit/ffbab0dc69635c8a0839fa00e5958d529d52b5d4)
chore(group_theory/quotient_group): change injective_ker_lift to ker_lift_injective for naming regularisation ([#11027](https://github.com/leanprover-community/mathlib/pull/#11027))

Minor change for naming regularisation.



Co-authored-by: Multramate <dka316@ic.ac.uk>

### [2021-12-24T13:57:17+00:00](https://github.com/leanprover-community/mathlib/commit/a0993e4d04ced42e88e676ef70143adf47740e5b)
feat(combinatorics/configuration): Sum of line counts equals sum of point counts ([#11026](https://github.com/leanprover-community/mathlib/pull/#11026))

Counting the set `{(p,l) : P × L | p ∈ l}` in two different ways.

### [2021-12-24T13:57:16+00:00](https://github.com/leanprover-community/mathlib/commit/04aeb019a341ec2a1ab6abddf7ea3389d8892689)
feat(data/polynomial/ring_division): roots.le_of_dvd ([#11025](https://github.com/leanprover-community/mathlib/pull/#11025))

### [2021-12-24T13:57:15+00:00](https://github.com/leanprover-community/mathlib/commit/c0e613a240c6b4d9ffc16f2087ef131a513fb7d3)
feat(combinatorics/configuration): `nondegenerate.exists_injective_of_card_le` ([#11019](https://github.com/leanprover-community/mathlib/pull/#11019))

If a nondegenerate configuration has at least as many points as lines, then there exists an injective function `f` from lines to points, such that `f l` does not lie on `l`.

This is the key lemma for [#10772](https://github.com/leanprover-community/mathlib/pull/#10772). The proof is an application of Hall's marriage theorem.

### [2021-12-24T13:57:14+00:00](https://github.com/leanprover-community/mathlib/commit/2c4e6dfdeffa8a2ba4ce79062f778cb1d3ce0dec)
feat(data/real/ennreal): trichotomy lemmas ([#11014](https://github.com/leanprover-community/mathlib/pull/#11014))

If there is a case split one performs frequently, it can be useful to provide the case split and the standard data-wrangling one performs after the case split together.  I do this here for the `ennreal` case-split lemma
```lean
protected lemma trichotomy (p : ℝ≥0∞) : p = 0 ∨ p = ∞ ∨ 0 < p.to_real :=
```
and a couple of variants.

### [2021-12-24T13:57:12+00:00](https://github.com/leanprover-community/mathlib/commit/7c7195f6b1af7989cca461c66e96dcbca478d129)
feat(field_theory/adjoin): lemmas about `inf`s of `intermediate_field`s ([#10997](https://github.com/leanprover-community/mathlib/pull/#10997))

This adjusts the data in the `galois_insertion` slightly such that this new lemma is true by `rfl`, to match how we handle this in `subalgebra`. As a result, `top_to_subalgebra` is now refl, but `adjoin_univ` is no longer refl.

This also adds a handful of trivial simp lemmas.

### [2021-12-24T13:57:11+00:00](https://github.com/leanprover-community/mathlib/commit/d329d6bd24ddcd5512a56adc180c7a0bd192dc56)
feat(combinatorics/simple_graph/connectivity): walks, paths, cycles ([#10981](https://github.com/leanprover-community/mathlib/pull/#10981))

This is the first chunk of [#8737](https://github.com/leanprover-community/mathlib/pull/#8737), which gives a type for walks in a simple graph as well as some basic operations.

It is designed to one day generalize to other types of graphs once there is a more generic framework by swapping out the `G.adj u v` argument from `walk`.

### [2021-12-24T13:57:10+00:00](https://github.com/leanprover-community/mathlib/commit/028c161c1ff4432c42caef0c8a406ac44d89fb9e)
feat(topology/is_locally_homeomorph): New file ([#10960](https://github.com/leanprover-community/mathlib/pull/#10960))

This PR defines local homeomorphisms.

### [2021-12-24T13:57:09+00:00](https://github.com/leanprover-community/mathlib/commit/a0f12bc17cf5a8e95785409746a53943dc8a5eec)
feat(field_theory/adjoin): Supremum of finite dimensional intermediate fields ([#10938](https://github.com/leanprover-community/mathlib/pull/#10938))

The supremum of finite dimensional intermediate fields is finite dimensional.

### [2021-12-24T13:57:08+00:00](https://github.com/leanprover-community/mathlib/commit/084b1ac2bd09218a333f3914e36775e3dad42639)
feat(group_theory/specific_groups/cyclic): |G|=expG ↔ G is cyclic ([#10692](https://github.com/leanprover-community/mathlib/pull/#10692))



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-24T12:49:44+00:00](https://github.com/leanprover-community/mathlib/commit/6c6c7da8ed8db5805f4b8d8dc130519719144f9d)
feat(topology/connected): add `inducing.is_preconnected_image` ([#11011](https://github.com/leanprover-community/mathlib/pull/#11011))

Generalize the proof of `subtype.preconnected_space` to any `inducing`
map. Also golf the proof of `is_preconnected.subset_right_of_subset_union`.

### [2021-12-24T03:30:38+00:00](https://github.com/leanprover-community/mathlib/commit/67cf4061035cbfd0940fbe87ff4a1845238bb588)
chore(scripts): update nolints.txt ([#11028](https://github.com/leanprover-community/mathlib/pull/#11028))

I am happy to remove some nolints for you!

### [2021-12-24T03:30:37+00:00](https://github.com/leanprover-community/mathlib/commit/f846a4268e98cc53684795bcd55b155722612e4c)
feat(algebra/pointwise): expand API for multiplication / addition of finsets by copying the corresponding API for sets ([#10600](https://github.com/leanprover-community/mathlib/pull/#10600))

From flt-regular, I wanted to be able to add finsets so we add a lot of API to show that the existing definition has good algebraic properties by copying the existing set API.

Where possible I tried to give proofs that use the existing set lemmas and cast the finsets to sets to make it clear that these are essentially the same lemmas.
It would be nice to have a better system for duplicating this API of course, some general versions for set_like or Galois insertions perhaps to unify the theories, but I don't know what that would look like.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-12-24T02:34:32+00:00](https://github.com/leanprover-community/mathlib/commit/7b641cbaf503fae33292da76c6e3a6426454dd35)
chore(number_theory/primorial): golf some proofs ([#11024](https://github.com/leanprover-community/mathlib/pull/#11024))

### [2021-12-24T00:43:12+00:00](https://github.com/leanprover-community/mathlib/commit/1dd60802fedd14787ab4794c135f60dff01b81dc)
feat(ring_theory/derivation): drop unused `is_scalar_tower` ([#10995](https://github.com/leanprover-community/mathlib/pull/#10995))

### [2021-12-24T00:43:11+00:00](https://github.com/leanprover-community/mathlib/commit/f03447fbb796e616b45dd98b8d9fa8ccdbf3714e)
feat(analysis/normed_space): a normed space over a nondiscrete normed field is noncompact ([#10994](https://github.com/leanprover-community/mathlib/pull/#10994))

Register this as an instance for a nondiscrete normed field and for a real normed vector space. Also add `is_compact.ne_univ`.

### [2021-12-24T00:43:10+00:00](https://github.com/leanprover-community/mathlib/commit/0ac9f83be4ba31b0a32f7514db045848eb61e0fa)
feat(analysis/mean_inequalities): Minkowski inequality for infinite sums ([#10984](https://github.com/leanprover-community/mathlib/pull/#10984))

A few versions of the Minkowski inequality for `tsum` and `has_sum`.

### [2021-12-24T00:43:09+00:00](https://github.com/leanprover-community/mathlib/commit/1a780f69e112218cb93971190cd2a14bc47678ba)
chore(topology/metric_space): export `is_compact_closed_ball` ([#10973](https://github.com/leanprover-community/mathlib/pull/#10973))

### [2021-12-24T00:43:08+00:00](https://github.com/leanprover-community/mathlib/commit/36ba1acd0684fb5e78eca5cfc7f0173c9786c082)
feat(algebraic_geometry): Define `open_cover`s of Schemes. ([#10931](https://github.com/leanprover-community/mathlib/pull/#10931))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-24T00:43:07+00:00](https://github.com/leanprover-community/mathlib/commit/c374a3b92856a4d8005276d7ea173e9d89d83373)
feat(data/nat/nth): add nth function ([#10707](https://github.com/leanprover-community/mathlib/pull/#10707))


Split off from [#9457](https://github.com/leanprover-community/mathlib/pull/#9457), introduces `nth` and proves theorems about it.



Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: YaelDillies <yael.dillies@gmail.com>
Co-authored-by: Eric <ericrboidi@gmail.com>
Co-authored-by: Kyle Miller <kmill31415@gmail.com>
Co-authored-by: Vladimir Goryachev <gor050299@gmail.com>

### [2021-12-23T22:35:58+00:00](https://github.com/leanprover-community/mathlib/commit/421b9bbeb81d089e72218eb398feb08802a15741)
feat(algebraic_topology): alternating face map complex of a simplicial object ([#10927](https://github.com/leanprover-community/mathlib/pull/#10927))

added the alternating face map complex of a simplicial object in a preadditive category and the natural inclusion of the normalized_Moore_complex



Co-authored-by: Joël Riou <37772949+joelriou@users.noreply.github.com>

### [2021-12-23T22:35:57+00:00](https://github.com/leanprover-community/mathlib/commit/dc57de22942673b45ce0a54c067255abbdefb47a)
feat(logic/basic): When a dependent If-Then-Else is not one of its arguments ([#10924](https://github.com/leanprover-community/mathlib/pull/#10924))

This is the dependent version of [#10800](https://github.com/leanprover-community/mathlib/pull/#10800).

### [2021-12-23T22:35:56+00:00](https://github.com/leanprover-community/mathlib/commit/1db0052eb3c03e283f990ab62df4006a9114125f)
feat(group_theory/submonoid/membership): upgrade definition of pow from a set morphism to a monoid morphism ([#10898](https://github.com/leanprover-community/mathlib/pull/#10898))

This comes at no extra cost. All the prerequisite definitions and lemmas were already in mathlib.

### [2021-12-23T22:35:55+00:00](https://github.com/leanprover-community/mathlib/commit/68aada0d1fc094389f99bb6a79b867da00bfe253)
feat(algebra/algebra/spectrum): prove the spectral mapping theorem for polynomials ([#10783](https://github.com/leanprover-community/mathlib/pull/#10783))

Prove the spectral mapping theorem for polynomials. That is, if `p` is a polynomial and `a : A` where `A` is an algebra over a field `𝕜`, then `p (σ a) ⊆ σ (p a)`. Moreover, if `𝕜` is algebraically closed, then this inclusion is an equality.



Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2021-12-23T22:35:54+00:00](https://github.com/leanprover-community/mathlib/commit/720fa8fa18e054169dcc2da136d4ca3df6a622bf)
feat(data/rat/basic): API around rat.mk ([#10782](https://github.com/leanprover-community/mathlib/pull/#10782))

### [2021-12-23T19:11:42+00:00](https://github.com/leanprover-community/mathlib/commit/4ce0d047cce6fb6d6fe934fa45d5f6bca6e5efd9)
feat(data/real/sqrt): add a few lemmas ([#11003](https://github.com/leanprover-community/mathlib/pull/#11003))

### [2021-12-23T19:11:41+00:00](https://github.com/leanprover-community/mathlib/commit/694b3f85dd2d584ddb394780f515a90c99e44bfc)
chore(measure_theory): golf a proof ([#11002](https://github.com/leanprover-community/mathlib/pull/#11002))

### [2021-12-23T19:11:40+00:00](https://github.com/leanprover-community/mathlib/commit/3362b1e2d617fb3d202ead25eca87fba78423905)
refactor(analysis/seminorm): Weaken typeclasses ([#10999](https://github.com/leanprover-community/mathlib/pull/#10999))

This weakens `normed_field` to the appropriate `normed_whatever`.

### [2021-12-23T19:11:39+00:00](https://github.com/leanprover-community/mathlib/commit/cce09a6bfbd376a60bf408929b2625765eead72d)
feat(ring_theory/finiteness): prove that a surjective endomorphism of a finite module over a comm ring is injective ([#10944](https://github.com/leanprover-community/mathlib/pull/#10944))

Using an approach of Vasconcelos, treating the module as a module over the polynomial ring, with action induced by the endomorphism.

This result was rescued from [#1822](https://github.com/leanprover-community/mathlib/pull/#1822).

### [2021-12-23T19:11:38+00:00](https://github.com/leanprover-community/mathlib/commit/327bacc4447f453bffe6910263aa4e1cb6a90745)
feat(field_theory/adjoin): `intermediate_field.to_subalgebra` distributes over supremum ([#10937](https://github.com/leanprover-community/mathlib/pull/#10937))

This PR proves `(E1 ⊔ E2).to_subalgebra = E1.to_subalgebra ⊔ E2.to_subalgebra`, under the assumption that `E1` and `E2` are finite-dimensional over `F`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-12-23T19:11:37+00:00](https://github.com/leanprover-community/mathlib/commit/e6f4852b59789a1a0b2e3f2f35849c5854432247)
feat(group_theory/exponent): exponent G = ⨆ g : G, order_of g ([#10767](https://github.com/leanprover-community/mathlib/pull/#10767))

Precursor to [#10692](https://github.com/leanprover-community/mathlib/pull/#10692).



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-23T19:11:36+00:00](https://github.com/leanprover-community/mathlib/commit/1107693bf52684ac00c6990bb1b5e2a69e1b1c29)
feat(combinatorics/simple_graph/basic): add lemmas about the neighbor set of a vertex in the complement graph ([#7138](https://github.com/leanprover-community/mathlib/pull/#7138))

Add lemmas about the neighbor set of a vertex in the complement graph, including a lemma proving that the complement of a regular graph is regular. Part of [#5698](https://github.com/leanprover-community/mathlib/pull/#5698) in order to prove facts about strongly regular graphs. 



Co-authored-by: Kyle Miller <kmill31415@gmail.com>

### [2021-12-23T18:32:08+00:00](https://github.com/leanprover-community/mathlib/commit/63a0936b7e8ce849fc0de288694a0f852df26f06)
ci(.github/workflows/*): cleanup after upload step ([#11008](https://github.com/leanprover-community/mathlib/pull/#11008))

cf. https://github.com/actions/upload-artifact/issues/256

### [2021-12-23T16:33:07+00:00](https://github.com/leanprover-community/mathlib/commit/cf345987170bbe22e8fd716e24c362db8743efdb)
chore(tactic/norm_cast): minor cleanup ([#10993](https://github.com/leanprover-community/mathlib/pull/#10993))

### [2021-12-23T16:33:06+00:00](https://github.com/leanprover-community/mathlib/commit/1a57c79e5e518b0ee49e1db4e165f498b79b82d4)
feat(analysis/calculus): assorted simple lemmas ([#10975](https://github.com/leanprover-community/mathlib/pull/#10975))

Various lemmas from the formalization of the Cauchy integral formula ([#10000](https://github.com/leanprover-community/mathlib/pull/#10000) and some later developments on top of it).
Also add `@[measurability]` attrs to theorems like `measurable_fderiv`.

### [2021-12-23T16:33:04+00:00](https://github.com/leanprover-community/mathlib/commit/35ede3d456a778fa2e7e8a1f04f8e3372a8aa45b)
chore(algebra/algebra/*): add some `simp` lemmas ([#10969](https://github.com/leanprover-community/mathlib/pull/#10969))

### [2021-12-23T16:33:03+00:00](https://github.com/leanprover-community/mathlib/commit/7defe7df1fb993af5075f1a19f96ecf00fd91996)
feat(field_theory/separable): add expand_eval and expand_monic ([#10965](https://github.com/leanprover-community/mathlib/pull/#10965))

Simple properties of `polynomial.expand`.

### [2021-12-23T16:33:01+00:00](https://github.com/leanprover-community/mathlib/commit/2be37b00e7d546af18439af4baece167b2754a22)
feat(combinatorics/set_family/shadow): Upper shadow of a set family ([#10956](https://github.com/leanprover-community/mathlib/pull/#10956))

This defines the upper shadow of `𝒜 : finset (finset α)`, which is the dual of the shadow. Instead of removing each element from each set, we add each element not in each set.

### [2021-12-23T16:33:00+00:00](https://github.com/leanprover-community/mathlib/commit/60c2b68c1ca2c6e06abc7e4eb5b8099b58316559)
feat(data/sigma/order): The lexicographical order has a bot/top ([#10905](https://github.com/leanprover-community/mathlib/pull/#10905))

Also fix localized instances declarations. They weren't using fully qualified names and I had forgotten `sigma.lex.linear_order`.

### [2021-12-23T16:32:59+00:00](https://github.com/leanprover-community/mathlib/commit/87fa060ceb16e3f07f81fe91016a7eb0c6ad2035)
feat(combinatorics/configuration): Define `line_count` and `point_count` ([#10884](https://github.com/leanprover-community/mathlib/pull/#10884))

Adds definitions for the number of lines through a given point and the number of points through a given line.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-12-23T16:32:57+00:00](https://github.com/leanprover-community/mathlib/commit/bd164c7f9e0ad19d1b2e61efaf90e38fb9afdc02)
feat(data/polynomial/ring_division): add `polynomial.card_le_degree_of_subset_roots` ([#10824](https://github.com/leanprover-community/mathlib/pull/#10824))





Co-authored-by: Iván Sadofschi Costa <isadofschi@users.noreply.github.com>

### [2021-12-23T16:32:55+00:00](https://github.com/leanprover-community/mathlib/commit/ec6d9a73748d16c9017476f3f821ebedb487ba1e)
feat(topology/algebra/group): definitionally better lattice ([#10792](https://github.com/leanprover-community/mathlib/pull/#10792))

This provides `(⊓)`, `⊤`, and `⊥` explicitly such that the associated `to_topological_space` lemmas are definitionally equal.

### [2021-12-23T16:32:53+00:00](https://github.com/leanprover-community/mathlib/commit/6e9b01122cb5c4b930c99b8c4ac940b139c0b574)
feat(linear_algebra/orientation): composing with linear equivs and determinant ([#10737](https://github.com/leanprover-community/mathlib/pull/#10737))

Add lemmas that composing an alternating map with a linear equiv using
`comp_linear_map`, or composing a basis with a linear equiv using
`basis.map`, produces the same orientation if and only if the
determinant of that linear equiv is positive.





Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-12-23T14:26:41+00:00](https://github.com/leanprover-community/mathlib/commit/34993236a081102912e8151779d1fb92d21b1a9c)
chore(data/vector3): Make linter happy ([#10998](https://github.com/leanprover-community/mathlib/pull/#10998))

and clean up a bit.

### [2021-12-23T14:26:40+00:00](https://github.com/leanprover-community/mathlib/commit/72b4541a89f3fcc15d6565249a88ed523b10e287)
feat(data/option): simple lemmas about orelse ([#10972](https://github.com/leanprover-community/mathlib/pull/#10972))

Some simple lemmas about orelse. Analogous to `bind_eq_some` and friends.

### [2021-12-23T14:26:39+00:00](https://github.com/leanprover-community/mathlib/commit/db1788c4538312e58da1c2b094bd869c2aeb6132)
feat(ring_theory/tensor_product): Supremum of finite dimensional subalgebras ([#10922](https://github.com/leanprover-community/mathlib/pull/#10922))

The supremum of finite dimensional subalgebras is finite dimensional.

### [2021-12-23T12:54:33+00:00](https://github.com/leanprover-community/mathlib/commit/f3b380e4f0c9bf09e911a91ba3acef89b0ed2393)
feat(algebraic_geometry): Prime spectrum is sober. ([#10989](https://github.com/leanprover-community/mathlib/pull/#10989))

### [2021-12-23T10:36:41+00:00](https://github.com/leanprover-community/mathlib/commit/086469f741e9e6f9622c23359a20e2892c25cdf6)
chore(order/*): Change `order_hom` notation ([#10988](https://github.com/leanprover-community/mathlib/pull/#10988))

This changes the notation for `order_hom` from `α →ₘ β` to `α →o β` to match `order_embedding` and `order_iso`, which are respectively `α ↪o β` and `α ≃o β`. This also solves the conflict with measurable functions.

### [2021-12-23T10:36:40+00:00](https://github.com/leanprover-community/mathlib/commit/03062ea444a3867cce8c2a638bf8d663be8bb256)
feat(ring_theory/integral_closure): The product of the leading coeff and the root is integral. ([#10807](https://github.com/leanprover-community/mathlib/pull/#10807))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-23T08:49:38+00:00](https://github.com/leanprover-community/mathlib/commit/2cfa052b4dc2a4d87c116484ba724cff9386ea7c)
feat(data/list/count): countp of true and false ([#10986](https://github.com/leanprover-community/mathlib/pull/#10986))

### [2021-12-23T07:22:33+00:00](https://github.com/leanprover-community/mathlib/commit/08b13ec9e81f4d04970985a946bb434d0723546e)
feat(field_theory/adjoin): add dim_bot, finrank_bot ([#10964](https://github.com/leanprover-community/mathlib/pull/#10964))

Added two simp lemmas, showing that the dimension and finrank respectively of bottom intermediate fields are 1. 

Co-authored-by: Sebastian-Monnet <54352341+Sebastian-Monnet@users.noreply.github.com>

### [2021-12-23T05:35:04+00:00](https://github.com/leanprover-community/mathlib/commit/f4e46fd2dcb291d67ff850c03f427a2e04de3b14)
feat(data/list/count): count_le_length ([#10982](https://github.com/leanprover-community/mathlib/pull/#10982))

### [2021-12-23T03:43:57+00:00](https://github.com/leanprover-community/mathlib/commit/04779a329e8f8c230b91a32d024519f615c633d7)
feat(order/complete_boolean_algebra): lemmas about binfi ([#10852](https://github.com/leanprover-community/mathlib/pull/#10852))

Adds corresponding `binfi` and `Inf` lemmas for existing `infi` results, especially where `rw` struggles to achieve the same thing alone.

### [2021-12-23T02:02:13+00:00](https://github.com/leanprover-community/mathlib/commit/f00007dc12c35a1efc657532e2884e86dba0ded8)
feat(analysis/normed_space/pointwise): more on pointwise operations on sets in normed spaces  ([#10820](https://github.com/leanprover-community/mathlib/pull/#10820))

Also move all related results to a new file `analysis/normed_space/pointwise`, to shorten `normed_space/basic` a little bit.

### [2021-12-22T23:07:54+00:00](https://github.com/leanprover-community/mathlib/commit/e15e015bb437d36c2ae01ce996afab86787dc2c2)
split(data/finset/sigma): Split off `data.finset.basic` ([#10957](https://github.com/leanprover-community/mathlib/pull/#10957))

This moves `finset.sigma` to a new file `data.finset.sigma`.

I'm crediting Mario for 16d40d7491d1fe8a733d21e90e516e0dd3f41c5b

### [2021-12-22T23:07:53+00:00](https://github.com/leanprover-community/mathlib/commit/3f16409975f8e2c94e65eaa27808370f17df916c)
feat(data/finset/*): Random lemmas ([#10955](https://github.com/leanprover-community/mathlib/pull/#10955))

Prove some `compl` lemmas for `finset`, `(s.erase a).card + 1 = s.card` for `list`, `multiset`, `set`, copy over one more `generalized_boolean_algebra` lemma.

### [2021-12-22T23:07:52+00:00](https://github.com/leanprover-community/mathlib/commit/2b9ab3bb7ab268f9edd706a2804111db38634625)
split(data/psigma/order): Split off `order.lexicographic` ([#10953](https://github.com/leanprover-community/mathlib/pull/#10953))

This moves all the stuff about `Σ' i, α i` to a new file `data.psigma.order`. This mimics the file organisation of `sigma`.

I'm crediting:
* Scott for [#820](https://github.com/leanprover-community/mathlib/pull/#820)
* Minchao for [#914](https://github.com/leanprover-community/mathlib/pull/#914)

### [2021-12-22T23:07:51+00:00](https://github.com/leanprover-community/mathlib/commit/431597372f9280309a149c79df90ef251021d229)
feat(quadratic_form/prod): quadratic forms on product and pi types ([#10939](https://github.com/leanprover-community/mathlib/pull/#10939))

In order to provide the `pos_def` members, some new API was needed.

### [2021-12-22T23:07:50+00:00](https://github.com/leanprover-community/mathlib/commit/c8f0afcdf91f546ccae3c5710a64a406937fd5cf)
feat(group_theory/index): Transitivity of finite relative index. ([#10936](https://github.com/leanprover-community/mathlib/pull/#10936))

If `H` has finite relative index in `K`, and `K` has finite relative index in `L`, then `H` has finite relative index in `L`. Golfed from [#9545](https://github.com/leanprover-community/mathlib/pull/#9545).

### [2021-12-22T23:07:49+00:00](https://github.com/leanprover-community/mathlib/commit/24cefb50128a2ecac1e68c93de1cbdc71c6ee96e)
feat(data/real/ennreal): add monotonicity lemmas for ennreal.to_nnreal ([#10556](https://github.com/leanprover-community/mathlib/pull/#10556))

Add four lemmas about monotonicity of `to_nnreal` on extended nonnegative reals, `to_nnreal_mono`, `to_nnreal_le_to_nnreal`, `to_nnreal_strict_mono`, `to_nnreal_lt_to_nnreal` (analogous to `to_real_mono`, `to_real_le_to_nnreal`, `to_real_strict_mono`, `to_real_lt_to_real`).

### [2021-12-22T21:32:02+00:00](https://github.com/leanprover-community/mathlib/commit/c5bb320c3d72e2c420ef0e7f1c26b49f90ca19a7)
refactor(*): Random lemmas and modifications from the shifting refactor. ([#10940](https://github.com/leanprover-community/mathlib/pull/#10940))

### [2021-12-22T20:39:43+00:00](https://github.com/leanprover-community/mathlib/commit/ee25d58a7438814d7bc6646cdac1e14a1d465d5a)
feat(linear_algebra/quadratic_form/basic): `linear_map.comp_quadratic_form` ([#10950](https://github.com/leanprover-community/mathlib/pull/#10950))

The name is taken to mirror `linear_map.comp_multilinear_map`

### [2021-12-22T20:39:42+00:00](https://github.com/leanprover-community/mathlib/commit/b2e881b917e6672d39295016003d643c07d590f4)
feat(linear_algebra/eigenspace): the eigenvalues of a linear endomorphism are in its spectrum ([#10912](https://github.com/leanprover-community/mathlib/pull/#10912))

This PR shows that the eigenvalues of `f : End R M` are in `spectrum R f`.



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2021-12-22T18:48:37+00:00](https://github.com/leanprover-community/mathlib/commit/12ee59fa5dc756e57ae002f6c57d461d784c2639)
feat(data/{finset,multiset}/locally_finite): When an `Icc` is a singleton, cardinality generalization ([#10925](https://github.com/leanprover-community/mathlib/pull/#10925))

This proves `Icc a b = {c} ↔ a = c ∧ b = c` for sets and finsets, gets rid of the `a ≤ b` assumption in `card_Ico_eq_card_Icc_sub_one` and friends and proves them for multisets.

### [2021-12-22T18:07:18+00:00](https://github.com/leanprover-community/mathlib/commit/da07a99263da690e7d59437b4e84fb174ea11810)
feat(ring_theory/tensor_product): Range of `tensor_product.product_map` ([#10882](https://github.com/leanprover-community/mathlib/pull/#10882))

This PR proves `(product_map f g).range = f.range ⊔ g.range`.

### [2021-12-22T16:18:16+00:00](https://github.com/leanprover-community/mathlib/commit/dda469d0e38b4b3043834fef1baacf7e674807f4)
chore(analysis/normed_space/exponential + logic/function/iterate): fix typos in doc-strings ([#10968](https://github.com/leanprover-community/mathlib/pull/#10968))

One `m` was missing in 3 different places.

### [2021-12-22T14:28:32+00:00](https://github.com/leanprover-community/mathlib/commit/7ca68f8e03953c4b365b2bb1f32d5df8a80def2d)
chore(*): fix some doc ([#10966](https://github.com/leanprover-community/mathlib/pull/#10966))

### [2021-12-22T12:04:48+00:00](https://github.com/leanprover-community/mathlib/commit/af683b11d1bd89d1e85a03bf1eb5519379aabdc9)
feat(topology/tietze_extension): Tietze extension theorem ([#10701](https://github.com/leanprover-community/mathlib/pull/#10701))

### [2021-12-21T23:32:37+00:00](https://github.com/leanprover-community/mathlib/commit/fc66d88c16a10f72936a6b41c5d2739838e72dd9)
refactor(ring_theory/derivation): use weaker TC assumptions ([#10952](https://github.com/leanprover-community/mathlib/pull/#10952))

Don't assume `[add_cancel_comm_monoid M]`, add `map_one_eq_zero` as an axiom instead. Add a constructor `derivation.mk'` that deduces `map_one_eq_zero` from `leibniz`.

Also generalize `smul`/`module` instances.

### [2021-12-21T19:23:31+00:00](https://github.com/leanprover-community/mathlib/commit/55f575f16a0092f68306356a86b5b198359565c1)
feat(linear_algebra/quadratic_form/complex): all non-degenerate quadratic forms over ℂ are equivalent ([#10951](https://github.com/leanprover-community/mathlib/pull/#10951))

### [2021-12-21T18:06:48+00:00](https://github.com/leanprover-community/mathlib/commit/b434a0db6aa344003fe12b50714b2385ca9e167a)
feat(data/nat/prime): `prime.dvd_prod_iff`; golf `mem_list_primes_of_dvd_prod` ([#10624](https://github.com/leanprover-community/mathlib/pull/#10624))

Adds a generalisation of `prime.dvd_mul`: prime `p` divides the product of `L : list ℕ` iff it divides some `a ∈ L`.   The `.mp` direction of this lemma is the second part of Theorem 1.9 in Apostol (1976) Introduction to Analytic Number Theory.

Also adds the converse `prime.not_dvd_prod`, and uses `dvd_prod_iff` to golf the proof of `mem_list_primes_of_dvd_prod`.

### [2021-12-21T16:21:11+00:00](https://github.com/leanprover-community/mathlib/commit/ca554bee0b1dc5349e9e55f9b5fcee48e1d4c6fa)
chore(group_theory/quotient_group): make pow definitionally equal ([#10833](https://github.com/leanprover-community/mathlib/pull/#10833))

Motivated by a TODO comment.

### [2021-12-21T16:21:10+00:00](https://github.com/leanprover-community/mathlib/commit/cea1988f335ebc4d0bf98d512a034432822a7a9d)
feat(data/finsupp/basic): add lemma `disjoint_prod_add` ([#10799](https://github.com/leanprover-community/mathlib/pull/#10799))

For disjoint finsupps `f1` and `f2`, and function `g`, the product of the products of `g` over `f1` and `f2` equals the product of `g` over `f1 + f2`

### [2021-12-21T15:17:17+00:00](https://github.com/leanprover-community/mathlib/commit/4aa7ac67daa77abdb065fe179a6050cadfa8efcf)
feat(data/mv_polynomial): add `mv_polynomial.linear_map_ext` ([#10945](https://github.com/leanprover-community/mathlib/pull/#10945))

### [2021-12-21T12:42:47+00:00](https://github.com/leanprover-community/mathlib/commit/8dafccc18103ae3bec914fda5d233e58237cafd7)
chore(data/nat/digits): Eliminate `finish` ([#10947](https://github.com/leanprover-community/mathlib/pull/#10947))

Removing uses of finish, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)

### [2021-12-21T12:42:46+00:00](https://github.com/leanprover-community/mathlib/commit/7e48e350bbb3c23fac2b5a1b6dc8ff384bdc8a0c)
feat(algebra/module/submodule_lattice, linear_algebra/projection): two lemmas about `is_compl` ([#10709](https://github.com/leanprover-community/mathlib/pull/#10709))

### [2021-12-21T12:42:45+00:00](https://github.com/leanprover-community/mathlib/commit/a6b2f94ad1106767505ab64f8ebe7f79da81d2cc)
refactor(linear_algebra/sesquilinear_form): Use similar definition as used in `bilinear_map` ([#10443](https://github.com/leanprover-community/mathlib/pull/#10443))

Define sesquilinear forms as `M →ₗ[R] M →ₛₗ[I] R`.

### [2021-12-21T10:53:02+00:00](https://github.com/leanprover-community/mathlib/commit/d56537362d4e653869545091aa8cf4d14ec2f8f3)
feat(order/galois_connection, linear_algebra/basic): `x ∈ R ∙ y` is a transitive relation ([#10943](https://github.com/leanprover-community/mathlib/pull/#10943))

### [2021-12-21T07:22:28+00:00](https://github.com/leanprover-community/mathlib/commit/2ceda7850a0aaa35f31697072c755fb3de3dbaa7)
feat(order/monovary): Monovariance of a pair of functions. ([#10890](https://github.com/leanprover-community/mathlib/pull/#10890))

`f` monovaries with `g` if `g i < g j → f i ≤ f j`. `f` antivaries with `g` if `g i < g j → f j ≤ f i`.

This is a way to talk about functions being monotone together, without needing an order on the index type.

### [2021-12-21T01:43:24+00:00](https://github.com/leanprover-community/mathlib/commit/d145e8e39b72eeda7d59f245a2774ebb59939122)
chore(combinatorics/simple_graph/basic): Golf and cleanup ([#10942](https://github.com/leanprover-community/mathlib/pull/#10942))

This kills a few `simp` and fixes typos.

### [2021-12-20T23:36:13+00:00](https://github.com/leanprover-community/mathlib/commit/5ac4cd35850b6f7ca621cfef830cf2955b18c279)
feat(analysis/special_functions/non_integrable): examples of non-integrable functions ([#10788](https://github.com/leanprover-community/mathlib/pull/#10788))

### [2021-12-20T21:49:20+00:00](https://github.com/leanprover-community/mathlib/commit/c88943fac2c518ae515681ffbe5f3a9d12d7f97d)
feat(algebra/algebra/subalgebra): define the center of a (unital) algebra ([#10910](https://github.com/leanprover-community/mathlib/pull/#10910))

### [2021-12-20T21:49:18+00:00](https://github.com/leanprover-community/mathlib/commit/3b6bd9971a84f6c546b62034d8d90194d9ed0769)
chore(data/finset/prod): eliminate `finish` ([#10904](https://github.com/leanprover-community/mathlib/pull/#10904))

Removing uses of finish, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)

### [2021-12-20T20:42:22+00:00](https://github.com/leanprover-community/mathlib/commit/ed250f7b7f01c58e473dbe2245de8416c8282278)
feat(topology/[path_]connected): add random [path-]connectedness lemmas ([#10932](https://github.com/leanprover-community/mathlib/pull/#10932))

From sphere-eversion

### [2021-12-20T19:47:57+00:00](https://github.com/leanprover-community/mathlib/commit/7555ea78ed1c80bdb88e7598735d6cf719be6724)
feat(ring_theory/integral_closure): Supremum of integral subalgebras ([#10935](https://github.com/leanprover-community/mathlib/pull/#10935))

The supremum of integral subalgebras is integral.

### [2021-12-20T19:47:56+00:00](https://github.com/leanprover-community/mathlib/commit/5dd0edefc8a3095252e78360ab30874897785483)
refactor(algebra/category/CommRing/constructions): Squeeze a slow simp ([#10934](https://github.com/leanprover-community/mathlib/pull/#10934))

`prod_fan_is_limit` was causing timeouts on CI for another PR, so I squeezed one of the simps.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-12-20T18:57:10+00:00](https://github.com/leanprover-community/mathlib/commit/082665e8acd3f5672a73a0d4acebb132265b7696)
feat(group_theory/index): relindex_eq_zero_of_le_right ([#10928](https://github.com/leanprover-community/mathlib/pull/#10928))

If H has infinite index in K, then so does any L ≥ K.

### [2021-12-20T16:29:56+00:00](https://github.com/leanprover-community/mathlib/commit/d910e8352ef26ca40ed6a94b92b8a6153984f401)
chore(*): ensure all open_locales work without any open namespaces ([#10913](https://github.com/leanprover-community/mathlib/pull/#10913))

Inspired by [#10905](https://github.com/leanprover-community/mathlib/pull/#10905) we clean up the localized notation in all locales by using the full names of declarations, this should mean that `open_locale blah` should almost never error.

The cases I'm aware of where this doesn't hold still are the locales:
- `witt` which hard codes the variable name `p`, if there is no `p` in context this will fail
- `list.func` and `topological_space` opening `list.func` breaks the notation in `topological_space` due to ``notation as `{` m ` ↦ ` a `}` := list.func.set a as m`` in `list.func` and ``localized "notation `𝓝[≠] ` x:100 := nhds_within x {x}ᶜ" in topological_space``
- likewise for `parser` and `kronecker` due to ``localized "infix ` ⊗ₖ `:100 := matrix.kronecker_map (*)" in kronecker``

But we don't fix these in this PR.

There may be others instances like this too as these errors can depend on the ordering chosen and  I didn't check them all.

A very basic script to check this sort of thing is at https://github.com/leanprover-community/mathlib/tree/alexjbest/check_localized

### [2021-12-20T16:29:55+00:00](https://github.com/leanprover-community/mathlib/commit/d14ac1fe6c17f0148e5a1df2a459d1000ba9ba1d)
feat(*) : added missing lemma for pointwise smul of  submonoid, add_subgroup, add_submonoid, subsemiring, and semiring. ([#10908](https://github.com/leanprover-community/mathlib/pull/#10908))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-12-20T16:29:54+00:00](https://github.com/leanprover-community/mathlib/commit/c2debc48804b1a1627d5363bc343efbe8a42d269)
refactor(combinatorics/configuration): Implicit arguments for `nondegenerate.eq_or_eq` ([#10885](https://github.com/leanprover-community/mathlib/pull/#10885))

The arguments `p₁`, `p₂`, `l₁`, `l₂` can be implicit, since they can be inferred from `p₁ ∈ l₁`, `p₂ ∈ l₁`, `p₁ ∈ l₂`, `p₂ ∈ l₂`.

### [2021-12-20T15:51:29+00:00](https://github.com/leanprover-community/mathlib/commit/b9fbef82195b93bc07cc4572e6360ac4a8af01b4)
feat(tactic/observe): have a claim proved by library_search under the hood ([#10878](https://github.com/leanprover-community/mathlib/pull/#10878))

### [2021-12-20T13:27:04+00:00](https://github.com/leanprover-community/mathlib/commit/ab654e5ce427b1c0c5199e888dea76ad351ec1ac)
feat(topology/sober): Specialization & generic points & sober spaces ([#10914](https://github.com/leanprover-community/mathlib/pull/#10914))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-20T13:27:01+00:00](https://github.com/leanprover-community/mathlib/commit/e473898e7c72a15a2b7fe9e151b18229d550fdb1)
feat(category_theory/glue_data): Some more API for glue_data ([#10881](https://github.com/leanprover-community/mathlib/pull/#10881))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-20T13:26:57+00:00](https://github.com/leanprover-community/mathlib/commit/6cfc8d8240d95b62ee5bf166add94e7f9e1c57d5)
feat(algebraic_geometry/locally_ringed_space): LocallyRingedSpace is cocomplete. ([#10791](https://github.com/leanprover-community/mathlib/pull/#10791))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-20T11:53:20+00:00](https://github.com/leanprover-community/mathlib/commit/b02e2ea151cb9ef73bd14dc416ce4f50ba2f966d)
feat(group_theory/coset): Embeddings of quotients ([#10901](https://github.com/leanprover-community/mathlib/pull/#10901))

If `K ≤ L`, then there is an embedding `K ⧸ (H.subgroup_of K) ↪ L ⧸ (H.subgroup_of L)`. Golfed from [#9545](https://github.com/leanprover-community/mathlib/pull/#9545).

### [2021-12-20T11:53:19+00:00](https://github.com/leanprover-community/mathlib/commit/b4961da264f818470d249660570e2db3ae4325e3)
feat(analysis/calculus/{f,}deriv): generalize `has_fderiv_at_filter.is_O_sub_rev` ([#10897](https://github.com/leanprover-community/mathlib/pull/#10897))



Also add `has_deriv_at.is_O_sub_rev`

### [2021-12-20T10:07:40+00:00](https://github.com/leanprover-community/mathlib/commit/bcf20b09239034fdb600d91e2072043b9eb900c9)
feat(combinatorics/simple_graph/matching): is_matching iff all degrees = 1 ([#10864](https://github.com/leanprover-community/mathlib/pull/#10864))

### [2021-12-20T10:07:38+00:00](https://github.com/leanprover-community/mathlib/commit/1929025764a7cc98256930aa4bc96b74c472c457)
feat(ring_theory/polynomial/cyclotomic): generalize a few results to domains ([#10741](https://github.com/leanprover-community/mathlib/pull/#10741))

Primarily for flt-regular



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-20T09:01:19+00:00](https://github.com/leanprover-community/mathlib/commit/5a79047139662753c66294a813b4327ef4efc310)
feat(group_theory/index): `relindex_eq_zero_of_le_left` ([#10902](https://github.com/leanprover-community/mathlib/pull/#10902))

If `K` has infinite index in `L`, then so does any `H ≤ K`.
The `right`-version is forthcoming.
Making the subgroups explicit in `relindex_mul_relindex` makes rewriting much easier (both in this situation, and in others).

### [2021-12-20T09:01:18+00:00](https://github.com/leanprover-community/mathlib/commit/5c05ca288b229371e0e7c982f761340ce4b9fb45)
feat(ring_theory/integral_closure): `is_field_iff_is_field` ([#10875](https://github.com/leanprover-community/mathlib/pull/#10875))

If `R/S` is an integral extension, then `R` is a field if and only if `S` is a field. One direction was already in mathlib, and this PR proves the converse direction.

### [2021-12-20T09:01:16+00:00](https://github.com/leanprover-community/mathlib/commit/d5de8eacaab37e2866a2fa2ee55e236744dbb3a3)
feat(data/polynomial): add some simp attributes and commuted versions of coeff_mul_X_pow ([#10868](https://github.com/leanprover-community/mathlib/pull/#10868))

I couldn't find these before and accidentally rewrote them from scratch, I think part of the reason is that I would have expected all of these vesions to be simp lemmas, so we add some more versions of these lemmas and tag everything as simp.

From flt-regular

### [2021-12-20T07:48:27+00:00](https://github.com/leanprover-community/mathlib/commit/ade581e93e547bd9a84c9d47571a61d01b795309)
feat(algebraic_geometry): Open immersions of locally ringed spaces have pullbacks ([#10917](https://github.com/leanprover-community/mathlib/pull/#10917))

### [2021-12-20T05:51:57+00:00](https://github.com/leanprover-community/mathlib/commit/093aef54ce6c643133ad851980c1449ef6b52e5c)
feat(order/monotone): Functions from/to subsingletons are monotone ([#10903](https://github.com/leanprover-community/mathlib/pull/#10903))

A few really trivial results about monotonicity/antitonicity of `f : α → β` where `subsingleton α` or `subsingleton β`.

Also fixes the markdown heading levels in this file

### [2021-12-20T04:47:45+00:00](https://github.com/leanprover-community/mathlib/commit/1067556a2fb13e05dd2967ad75549b639cd7939c)
refactor(data/polynomial/eval): Golf `hom_eval₂` ([#10920](https://github.com/leanprover-community/mathlib/pull/#10920))

Here's a much easier proof of `hom_eval₂`.

### [2021-12-20T01:54:00+00:00](https://github.com/leanprover-community/mathlib/commit/c40c70133c3ebf9d44024fbd947b4a0ccb8dd723)
feat(docs/references) : Added reference for [#10791](https://github.com/leanprover-community/mathlib/pull/#10791) ([#10915](https://github.com/leanprover-community/mathlib/pull/#10915))

### [2021-12-20T01:53:58+00:00](https://github.com/leanprover-community/mathlib/commit/9cbd828ad0bd2180a6c14fa345eaee7e941d5a19)
feat(data/finset/basic): add image_congr ([#10911](https://github.com/leanprover-community/mathlib/pull/#10911))

Add `finset.image_congr`

### [2021-12-20T01:53:57+00:00](https://github.com/leanprover-community/mathlib/commit/f7b24fa762418396c77f5bca70ed17c7621c236b)
refactor(ring_theory/tensor_product): Speed up slow proofs ([#10883](https://github.com/leanprover-community/mathlib/pull/#10883))

`alg_hom_of_linear_map_tensor_product` was causing timeouts, due to many uses of `simp`. This refactor speeds up the proofs.

### [2021-12-20T00:57:04+00:00](https://github.com/leanprover-community/mathlib/commit/6ab0f9090c5e82bf287364644909f14108bc7af3)
chore(category_theory/filtered): avoid `finish` ([#10918](https://github.com/leanprover-community/mathlib/pull/#10918))

Removing uses of finish, as discussed on Zulip (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers).

### [2021-12-19T20:49:08+00:00](https://github.com/leanprover-community/mathlib/commit/5dd3537717706e4581823286748fb6ffc9c4e6d2)
feat(algebra/algebra/subalgebra): `subalgebra.map` commutes with supremum ([#10899](https://github.com/leanprover-community/mathlib/pull/#10899))

This PR proves `(S ⊔ T).map f = S.map f ⊔ T.map f`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-12-19T18:51:43+00:00](https://github.com/leanprover-community/mathlib/commit/41ced1ca209ce85edcc638a36e104e8fd2d587ee)
feat(ring_theory/tensor_product): The tensor product `A ⊗ B` is generated by tensors `a ⊗ₜ b` ([#10900](https://github.com/leanprover-community/mathlib/pull/#10900))

The tensor product is generated by tensors, in terms of `algebra.adjoin`. This is an immediate consequence of `span_tmul_eq_top`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-12-19T18:51:42+00:00](https://github.com/leanprover-community/mathlib/commit/194bde8f09098e16f427ac68b60854e0acdd74ce)
feat(order/monotone): add `monotone_int_of_le_succ` etc ([#10895](https://github.com/leanprover-community/mathlib/pull/#10895))

Also use new lemmas to golf `zpow_strict_mono` and prove `zpow_strict_anti`.

### [2021-12-19T18:51:41+00:00](https://github.com/leanprover-community/mathlib/commit/a60ef7c914c01f97aefdcf2afd8d1f8a85e5184a)
feat(data/list/sort): subperm sorted implies sublist ([#10892](https://github.com/leanprover-community/mathlib/pull/#10892))

A "sub" version of the lemma directly above.

### [2021-12-19T18:51:40+00:00](https://github.com/leanprover-community/mathlib/commit/faee3582c2e44d3acd71d4bb04853fa53c098d75)
feat (order/lexicographic):  add API lemmas ([#10887](https://github.com/leanprover-community/mathlib/pull/#10887))

### [2021-12-19T18:51:40+00:00](https://github.com/leanprover-community/mathlib/commit/45ed9deddac7a768b48b2d91b2813a497f900eae)
chore(order/complete_lattice): eliminate `finish` ([#10876](https://github.com/leanprover-community/mathlib/pull/#10876))

Removing uses of finish, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)

### [2021-12-19T17:06:17+00:00](https://github.com/leanprover-community/mathlib/commit/68d9b42b16eaa7300a2053a05f3748d2e5dbf77c)
feat(data/list/count): add lemma `list.count_singleton'` ([#10880](https://github.com/leanprover-community/mathlib/pull/#10880))

A generalisation of `count_singleton`: `count a [b] = ite (a = b) 1 0`

### [2021-12-19T12:15:00+00:00](https://github.com/leanprover-community/mathlib/commit/9e5cbc127f3800aab9f98a5cc77ec6c02acece58)
feat(algebra/group_power/basic): generalize `zpow_neg_one` to `div_inv_monoid` ([#10894](https://github.com/leanprover-community/mathlib/pull/#10894))

Drop `zpow_neg_one₀`

### [2021-12-19T11:16:32+00:00](https://github.com/leanprover-community/mathlib/commit/3fc32e3e05d21945d41e73840f7859c691d5671e)
feat(analysis/asymptotics): add `is_O.inv_rev`, `is_o.inv_rev` ([#10896](https://github.com/leanprover-community/mathlib/pull/#10896))

### [2021-12-19T10:01:23+00:00](https://github.com/leanprover-community/mathlib/commit/72224634f19c962095f7a9bc01e5b509768f9a61)
chore(algebra/iterate_hom): use to_additive to fill missing lemmas ([#10886](https://github.com/leanprover-community/mathlib/pull/#10886))

### [2021-12-19T02:48:13+00:00](https://github.com/leanprover-community/mathlib/commit/a2c3b29330e31a3ea9634cd92183f7d70c60d567)
chore(scripts): update nolints.txt ([#10893](https://github.com/leanprover-community/mathlib/pull/#10893))

I am happy to remove some nolints for you!

### [2021-12-18T20:11:21+00:00](https://github.com/leanprover-community/mathlib/commit/ee17ab3a89c0551f8ea08a447696701cf25329c8)
refactor(measure_theory/measure/hausdorff): change Hausdorff measure definition at 0 ([#10859](https://github.com/leanprover-community/mathlib/pull/#10859))

Currently, our definition of the Hausdorff measure ensures that it has no atom. This differs from the standard definition of the 0-Hausdorff measure, which is the counting measure -- and this convention is better behaved in many respects, for instance in a `d`-dimensional space the `d`-Hausdorff measure is proportional to Lebesgue measure, while currently we only have this for `d > 0`.

This PR refactors the definition of the Hausdorff measure, to conform to the standard definition.

### [2021-12-18T20:11:20+00:00](https://github.com/leanprover-community/mathlib/commit/289ebe58fe25ff99536bd6e7d9e07a9f5aaf7069)
chore(category_theory/monoidal/End): Adding API for monoidal functors into `C ⥤ C` ([#10841](https://github.com/leanprover-community/mathlib/pull/#10841))

Needed for the shift refactor

### [2021-12-18T20:11:19+00:00](https://github.com/leanprover-community/mathlib/commit/9f1b9bcd7585e78c87f034cecac4856fe31d34fb)
feat(linear_algebra/determinant): more properties of the determinant of linear maps ([#10809](https://github.com/leanprover-community/mathlib/pull/#10809))

### [2021-12-18T20:11:18+00:00](https://github.com/leanprover-community/mathlib/commit/0d4736962edcc2f49511b90f9ab47e42f512c148)
feat(topology/metric/hausdorff_distance): more properties of cthickening ([#10808](https://github.com/leanprover-community/mathlib/pull/#10808))

### [2021-12-18T18:09:36+00:00](https://github.com/leanprover-community/mathlib/commit/a6179f61075711e3a7c183a0e8c532c3792df086)
feat(linear_algebra/affine_space/affine_equiv): isomorphism with the units ([#10798](https://github.com/leanprover-community/mathlib/pull/#10798))

This adds:
* `affine_equiv.equiv_units_affine_map` (the main point in this PR)
* `affine_map.linear_hom`
* `affine_equiv.linear_hom`
* `simps` configuration for `affine_equiv`. In order to makes `simp` happy, we adjust the order of the implicit variables to all lemmas in this file, so that they match the order of the arguments to `affine_equiv`.

The new definition can be used to majorly golf `homothety_units_mul_hom`

### [2021-12-18T18:09:35+00:00](https://github.com/leanprover-community/mathlib/commit/2c4e66f7582699ef2be385bc0220ed9f89af41c5)
split(data/finset/*): Split `data.finset.card` and `data.finset.fin` off `data.finset.basic` ([#10796](https://github.com/leanprover-community/mathlib/pull/#10796))

This moves stuff from `data.finset.basic` in two new files:
* Stuff about `finset.card` goes into `data.finset.card`
* Stuff about `finset.fin_range` and `finset.attach_fin` goes into `data.finset.fin`. I expect this file to be shortlived as I'm planning on killing `fin_range`.

I reordered lemmas thematically and it appeared that there were two pairs of duplicated lemmas:
* `finset.one_lt_card`, `finset.one_lt_card_iff`. They differ only for binder order.
* `finset.card_union_eq`, `finset.card_disjoint_union`. They are literally the same.

All are used so I will clean up in a later PR.

I'm crediting:
* Microsoft Corporation, Leonardo, Jeremy for 8dbee5b1ca9680a22ffe90751654f51d6852d7f0
* Chris Hughes for [#231](https://github.com/leanprover-community/mathlib/pull/#231)
* Scott for [#3319](https://github.com/leanprover-community/mathlib/pull/#3319)

### [2021-12-18T18:09:34+00:00](https://github.com/leanprover-community/mathlib/commit/fa46ef10fbbdfed481098500f1b31576d78fa4b5)
feat(linear_algebra/affine_space/combination): vsub distributivity lemmas ([#10786](https://github.com/leanprover-community/mathlib/pull/#10786))

Add lemmas about weighted sums of `-ᵥ` expressions in terms of
`weighted_vsub_of_point`, `weighted_vsub` and `affine_combination`,
with special cases where the points on one side of the subtractions
are constant, and lemmas about those three functions for constant
points used to prove those special cases.

These were suggested by one of the lemmas in [#10632](https://github.com/leanprover-community/mathlib/pull/#10632); the lemma
`affine_basis.vsub_eq_coord_smul_sum` is a very specific case, but
showed up that these distributivity lemmas were missing (and should
follow immediately from
`sum_smul_const_vsub_eq_vsub_affine_combination` in this PR).

### [2021-12-18T18:09:32+00:00](https://github.com/leanprover-community/mathlib/commit/ecec43a2d206cd090fb38c905cec99bed85e49aa)
feat(algebraic_geometry/open_immersion): Easy results about open immersions. ([#10776](https://github.com/leanprover-community/mathlib/pull/#10776))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-18T18:09:31+00:00](https://github.com/leanprover-community/mathlib/commit/6e59fbe3a7010b861e3220d46ae1702f0b24e417)
feat(field_theory/splitting_field): generalize some results from field to domain ([#10726](https://github.com/leanprover-community/mathlib/pull/#10726))

This PR does a few things generalizing / golfing facts related to polynomials and splitting fields.
- Generalize some results in `data.polynomial.field_division` to division rings
- generalize `C_leading_coeff_mul_prod_multiset_X_sub_C` from a field to a domain
- same for `prod_multiset_X_sub_C_of_monic_of_roots_card_eq`
- add a supporting useful lemma `roots_map_of_injective_card_eq_total_degree` saying that if we already have a full (multi)set of roots over a domain, passing along an injection gives the set of roots of the mapped polynomial

Inspired by needs of flt-regular.





Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-18T18:09:30+00:00](https://github.com/leanprover-community/mathlib/commit/fec084c3c5231fe8f751a56e6f3f551dad7ed248)
feat(order/cover): The covering relation ([#10676](https://github.com/leanprover-community/mathlib/pull/#10676))

This defines `a ⋖ b` to mean that `a < b` and there is no element in between. It is generally useful, but in particular in the context of polytopes and successor orders.

Co-authored-by: Violeta Hernández <vi.hdz.p@gmail.com>
Co-authored-by: Grayson Burton <noobie365@gmail.com>

### [2021-12-18T16:15:43+00:00](https://github.com/leanprover-community/mathlib/commit/011203d9fc8921e7b44301443cc7b41992334709)
feat(algebra/group/inj_surj): _pow definitions for surjective too ([#10832](https://github.com/leanprover-community/mathlib/pull/#10832))

We already have these three variants for the injective counterparts, added in [#10152](https://github.com/leanprover-community/mathlib/pull/#10152).

### [2021-12-18T16:15:42+00:00](https://github.com/leanprover-community/mathlib/commit/591525485df16aa847eed805c6646ba4fe851e14)
feat(data/matrix/rank): rank of a matrix ([#10826](https://github.com/leanprover-community/mathlib/pull/#10826))

### [2021-12-18T16:15:41+00:00](https://github.com/leanprover-community/mathlib/commit/915e2b5b2de13ce22ff69a0ea599d3848b828dcc)
feat(linear_algebra/orientation): add orientation.map ([#10815](https://github.com/leanprover-community/mathlib/pull/#10815))

This also adds `alternating_map.dom_lcongr` following the naming established by `finsupp.dom_lcongr`.

### [2021-12-18T16:15:40+00:00](https://github.com/leanprover-community/mathlib/commit/e70faf3428692c091f4b07252e0721a3e73fbe5b)
feat(ring_theory/prinicipal_ideal_domain): Bézout's lemma for PIDs ([#10810](https://github.com/leanprover-community/mathlib/pull/#10810))

### [2021-12-18T16:15:39+00:00](https://github.com/leanprover-community/mathlib/commit/47c676ed2c65e0f975eb744b0bf2237f16cc02d4)
feat(linear_algebra/affine_space/affine_subspace): affine_subspace.comap ([#10795](https://github.com/leanprover-community/mathlib/pull/#10795))

This copies a handful of lemmas from `group_theory/subgroup/basic.lean` to get things started.

### [2021-12-18T16:15:38+00:00](https://github.com/leanprover-community/mathlib/commit/00454f23470a0926e9bde24e6d0d7d79b574ba38)
feat(topology/algebra/mul_action): add an instance in the presence of `is_central_scalar` ([#10787](https://github.com/leanprover-community/mathlib/pull/#10787))

### [2021-12-18T16:15:38+00:00](https://github.com/leanprover-community/mathlib/commit/5603398265a1518858e7866a6125a2b3995bc74c)
feat(ring_theory/local_properties): Being finite / of finite type is local. ([#10775](https://github.com/leanprover-community/mathlib/pull/#10775))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-18T16:15:36+00:00](https://github.com/leanprover-community/mathlib/commit/c10a87287ac9da7dc6a8c03e4ca17cd1ceefd06d)
feat(order): define a `rel_hom_class` for types of relation-preserving maps ([#10755](https://github.com/leanprover-community/mathlib/pull/#10755))

Use the design of [#9888](https://github.com/leanprover-community/mathlib/pull/#9888) to define a class `rel_hom_class F r s` for types of maps such that all `f : F` satisfy `r a b → s (f a) (f b)`. Requested by @YaelDillies.

`order_hom_class F α β` is defined as an abbreviation for `rel_hom_class F (≤) (≤)`.

### [2021-12-18T14:23:59+00:00](https://github.com/leanprover-community/mathlib/commit/af682d35c83e8242d6bd74b1667b5cb09203b678)
feat(algebraic_geometry): A scheme is reduced iff its stalks are reduced. ([#10879](https://github.com/leanprover-community/mathlib/pull/#10879))

### [2021-12-18T14:23:58+00:00](https://github.com/leanprover-community/mathlib/commit/65118e5fe1105375d7f433964ac843dec1075404)
feat(analysis/calculus/deriv): add `has_deriv_at.tendsto_punctured_nhds` ([#10877](https://github.com/leanprover-community/mathlib/pull/#10877))

### [2021-12-18T14:23:57+00:00](https://github.com/leanprover-community/mathlib/commit/01088844b4cbf9bb807c503cc878e9fed4c747f3)
feat(ring_theory/integral_closure): A subalgebra is contained in the integral closure iff it is integral ([#10874](https://github.com/leanprover-community/mathlib/pull/#10874))

A subalgebra is contained in the integral closure iff it is integral.

### [2021-12-18T14:23:56+00:00](https://github.com/leanprover-community/mathlib/commit/7de517b2eab45486d9c08ab835627c3bf6c754fb)
feat(algebra/algebra/subalgebra): Elements of supremum ([#10872](https://github.com/leanprover-community/mathlib/pull/#10872))

Adds a few lemmas about elements of a supremum of subalgebras (essentially copied from the analogous lemmas in `group_theory/subgroup.basic`).

### [2021-12-18T14:23:55+00:00](https://github.com/leanprover-community/mathlib/commit/df1130200449118e85e87892784a482b908a90b7)
feat(algebra/algebra/subalgebra): Lemmas about `alg_hom.range` ([#10871](https://github.com/leanprover-community/mathlib/pull/#10871))

This PR adds a few lemmas about `alg_hom.range`.

### [2021-12-18T14:23:54+00:00](https://github.com/leanprover-community/mathlib/commit/ac10136ff63ac6bd3eea351c669b1d5f704a4461)
feat(algebraic_geometry): The underlying topological space of a Scheme is T0 ([#10869](https://github.com/leanprover-community/mathlib/pull/#10869))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-18T14:23:53+00:00](https://github.com/leanprover-community/mathlib/commit/cb0a6f70989a41a027ece15ebcff4766151c29fa)
feat(data/int): various lemmas ([#10862](https://github.com/leanprover-community/mathlib/pull/#10862))

### [2021-12-18T14:23:52+00:00](https://github.com/leanprover-community/mathlib/commit/04e2f5f7d69917d0c6269c6b82616a583a74b696)
feat(algebra/group/basic): add a few lemmas ([#10856](https://github.com/leanprover-community/mathlib/pull/#10856))

* move `inv_eq_one`, `one_eq_inv`, and `inv_ne_one` up;
* move `div_one'` below `div_eq_one` to golf the proof;
* add `div_eq_inv_iff`;
* golf 2 proofs.

### [2021-12-18T14:23:51+00:00](https://github.com/leanprover-community/mathlib/commit/5859ec0f77e8fdf927714f6cc67995cc59efc62c)
feat(analysis/normed_space/lattice_ordered_group): prove `order_closed_topology` for `normed_lattice_add_comm_group` ([#10838](https://github.com/leanprover-community/mathlib/pull/#10838))

### [2021-12-18T12:49:52+00:00](https://github.com/leanprover-community/mathlib/commit/6353d6b2197a5972e843bbf841238e3d8a1ebe89)
chore(*): more assorted proof simplifications ([#10863](https://github.com/leanprover-community/mathlib/pull/#10863))

A few more random small golfs found by linters

### [2021-12-18T11:01:55+00:00](https://github.com/leanprover-community/mathlib/commit/0e995a378522cdb4b434b83c1d18141f10279dad)
refactor(*): kill a few uses of finish ([#10860](https://github.com/leanprover-community/mathlib/pull/#10860))

### [2021-12-18T10:22:17+00:00](https://github.com/leanprover-community/mathlib/commit/ec2f350923213220e9a6f9bc4c1a098f1271ea2c)
feat(field_theory/intermediate_field): Range of `intermediate_field.val` ([#10873](https://github.com/leanprover-community/mathlib/pull/#10873))

The range of the algebra homomorphism `S.val` equals `S.to_subalgebra`.

### [2021-12-18T10:22:16+00:00](https://github.com/leanprover-community/mathlib/commit/718ea932267bcf1906b1f92fcbca8021bdea41d8)
feat(category_theory): Glue data ([#10436](https://github.com/leanprover-community/mathlib/pull/#10436))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-18T06:26:17+00:00](https://github.com/leanprover-community/mathlib/commit/a252427ae428124e13e20c29e52d0c7abe7773f7)
chore(algebra/algebra/basic): fix instances names to make doc links work ([#10834](https://github.com/leanprover-community/mathlib/pull/#10834))

The blank lines avoid sentences being pulled into the bulleted list above them.

### [2021-12-17T23:05:39+00:00](https://github.com/leanprover-community/mathlib/commit/2043748c367bde194215198aa0fc02867281240d)
feat(data/finset/basic): add to_list_insert and to_list_cons ([#10840](https://github.com/leanprover-community/mathlib/pull/#10840))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-12-17T21:25:06+00:00](https://github.com/leanprover-community/mathlib/commit/fc09b17fab5ae6b3aa09d40daf571f79a0f3eb89)
feat(measure_theory/integral/bochner): prove `set_integral_eq_subtype` ([#10858](https://github.com/leanprover-community/mathlib/pull/#10858))

Relate integral w.r.t. `μ.restrict s` and w.r.t. `comap (coe : s → α) μ`.

### [2021-12-17T19:23:39+00:00](https://github.com/leanprover-community/mathlib/commit/86493f12c539b868901fadd4d771b8d706fc1377)
feat(data/nat): decidable exists le instance ([#10857](https://github.com/leanprover-community/mathlib/pull/#10857))

Adds the `le` instance for a corresponding `lt` instance above.

### [2021-12-17T19:23:38+00:00](https://github.com/leanprover-community/mathlib/commit/70f4ba0746bda1eed39dae6c0498f6281a26ff2b)
feat(algebra/group/hom): generalize `semiconj_by.map` and `commute.map` ([#10854](https://github.com/leanprover-community/mathlib/pull/#10854))

This generalizes the results in 2 ways: from `monoid_hom` to `mul_hom` and from `mul_hom` to `mul_hom_class`. For use in [#10783](https://github.com/leanprover-community/mathlib/pull/#10783).

### [2021-12-17T19:23:37+00:00](https://github.com/leanprover-community/mathlib/commit/0b5f0a2da2ee6ef25bb992db9f04c99ef918fb26)
feat(data/finset/basic): add ite_subset_union, inter_subset_ite for finset ([#10586](https://github.com/leanprover-community/mathlib/pull/#10586))

Just a couple of lemmas to simplify expressions involving ite and union / inter on finsets, note that this is not related to `set.ite`.
From flt-regular.

### [2021-12-17T17:22:44+00:00](https://github.com/leanprover-community/mathlib/commit/e5a844e13eaa556e74eb248138c7bff54dcff068)
feat(data/finsupp/basic): add two versions of `finsupp.mul_prod_erase` ([#10708](https://github.com/leanprover-community/mathlib/pull/#10708))

Adding a counterpart for `finsupp` of `finset.mul_prod_erase`

### [2021-12-17T15:21:19+00:00](https://github.com/leanprover-community/mathlib/commit/c9fe6d1af66282b74d2d3c54b7451538cf54d074)
feat(algebra/algebra): instantiate `ring_hom_class` for `alg_hom` ([#10853](https://github.com/leanprover-community/mathlib/pull/#10853))

This PR provides a `ring_hom_class` instance for `alg_hom`, to be used in [#10783](https://github.com/leanprover-community/mathlib/pull/#10783). I'm not quite finished with my design of morphism classes for linear maps, but I expect this instance will stick around anyway: to avoid a dangerous instance `alg_hom_class F R A B → ring_hom_class F A B` (where the base ring `R` can't be inferred), `alg_hom_class` will probably have to be unbundled and take a `ring_hom_class` as a parameter.

### [2021-12-17T15:21:18+00:00](https://github.com/leanprover-community/mathlib/commit/ba24b38bc6d119ff6fbcdb8da02ee453790c7ea1)
feat(ring_theory/noetherian): fg_pi ([#10845](https://github.com/leanprover-community/mathlib/pull/#10845))

### [2021-12-17T13:26:57+00:00](https://github.com/leanprover-community/mathlib/commit/5a5980031fc077ef8ebbd98f4b4bb03a0d67abae)
feat(data/set/function): Cancelling composition on a set ([#10803](https://github.com/leanprover-community/mathlib/pull/#10803))

A few stupid lemmas

### [2021-12-17T12:31:31+00:00](https://github.com/leanprover-community/mathlib/commit/6838233ff4f076cc325ae5f208500847c24d1ca0)
feat(combinatorics/configuration): New file ([#10773](https://github.com/leanprover-community/mathlib/pull/#10773))

This PR defines abstract configurations of points and lines, and provides some basic definitions. Actual results are in the followup PR.

### [2021-12-17T12:31:30+00:00](https://github.com/leanprover-community/mathlib/commit/8743573ea38a34a1a76037b1c715b8bf8a797ad0)
feat(data/nat/count): The count function on naturals ([#9457](https://github.com/leanprover-community/mathlib/pull/#9457))

Defines `nat.count` a generic counting function on `ℕ`, computing how many numbers under `k` satisfy a given predicate".

Co-authored by:
Yaël Dillies, yael.dillies@gmail.com
Vladimir Goryachev, gor050299@gmail.com
Kyle Miller, kmill31415@gmail.com
Scott Morrison, scott@tqft.net
Eric Rodriguez, ericrboidi@gmail.com



Co-authored-by: YaelDillies <yael.dillies@gmail.com>
Co-authored-by: Eric <ericrboidi@gmail.com>
Co-authored-by: Kyle Miller <kmill31415@gmail.com>
Co-authored-by: Vladimir Goryachev <gor050299@gmail.com>

### [2021-12-17T10:49:01+00:00](https://github.com/leanprover-community/mathlib/commit/081cb8abf40e6f82cde11ec216040d47e3d63ba3)
chore(algebra/associated): split off dependencies of `big_operators` ([#10848](https://github.com/leanprover-community/mathlib/pull/#10848))

This prepares for the replacement of `nat.prime` with `_root_.prime` by reducing the amount of dependencies needed to define `_root_.prime`.

Note that there wouldn't be an import loop without this change, just that `data/nat/prime.lean` would have a bigger amount of imports.

Zulip discussion: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.2Eprime





Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-12-17T10:49:00+00:00](https://github.com/leanprover-community/mathlib/commit/862a68c91ab0340c8ac5f5c1179b59aa613f2809)
feat(algebra/big_operators/basic): add finset.prod_to_list ([#10842](https://github.com/leanprover-community/mathlib/pull/#10842))




Co-authored-by: jlh <48520973+Jlh18@users.noreply.github.com>

### [2021-12-17T09:42:27+00:00](https://github.com/leanprover-community/mathlib/commit/5558fd9f3836ab4096932df595b85443952b12d7)
feat(topology/subset_properties): open/closed sets are locally compact spaces ([#10844](https://github.com/leanprover-community/mathlib/pull/#10844))

* add `inducing.image_mem_nhds_within`;
* move `inducing.is_compact_iff` up, use it to prove `embedding.is_compact_iff_is_compact_image`;
* prove `closed_embedding.is_compact_preimage`, use it to prove `closed_embedding.tendsto_cocompact`;
* prove `closed_embedding.locally_compact_space`, `open_embedding.locally_compact_space`;
* specialize to `is_closed.locally_compact_space`, `is_open.locally_compact_space`;
* rename `locally_finite.countable_of_sigma_compact` to `locally_finite.countable_univ`, provide `locally_finite.encodable`.

### [2021-12-17T02:13:44+00:00](https://github.com/leanprover-community/mathlib/commit/b100af69da789d0ad3b5e5fe8b3ee9c5c26466bb)
feat(combinatorics/simple_graph/basic): Incidence set lemmas ([#10839](https://github.com/leanprover-community/mathlib/pull/#10839))

Some more `simple_graph.incidence_set` API.

### [2021-12-16T21:36:33+00:00](https://github.com/leanprover-community/mathlib/commit/9f9015c645d85695581237cc761981036be8bd37)
refactor(category_theory/sites/*): Redefine the category of sheaves. ([#10678](https://github.com/leanprover-community/mathlib/pull/#10678))

This refactor redefines sheaves and morphisms of sheaves using bespoke structures.
This is an attempt to make automation more useful when dealing with categories of sheaves.

See the associated [zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Redefining.20Sheaves/near/263308542)

### [2021-12-16T17:52:29+00:00](https://github.com/leanprover-community/mathlib/commit/601f2ab7af970e1709d20aa0cc1ed9c55595577e)
fix(ring_theory/ideal/basic): remove universe restriction ([#10843](https://github.com/leanprover-community/mathlib/pull/#10843))

### [2021-12-16T16:16:13+00:00](https://github.com/leanprover-community/mathlib/commit/905d887fc24531f98d40c82930cb34a63003e400)
chore(field_theory/ratfunc): to_fraction_ring_ring_equiv ([#10806](https://github.com/leanprover-community/mathlib/pull/#10806))

Rename the underlying `ratfunc.aux_equiv` for discoverability.



Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>

### [2021-12-16T10:58:20+00:00](https://github.com/leanprover-community/mathlib/commit/eeef771da0c028dfb75bfd6b1d190761960bd3aa)
chore(field_theory/ratfunc): has_scalar in terms of localization ([#10828](https://github.com/leanprover-community/mathlib/pull/#10828))

Now that `localization.has_scalar` is general enough, fix a TODO

### [2021-12-16T10:58:19+00:00](https://github.com/leanprover-community/mathlib/commit/542471fd8fdb9b62dfcf66547baa9d92de96ac77)
feat(data/set/function): Congruence lemmas for `monotone_on` and friends ([#10817](https://github.com/leanprover-community/mathlib/pull/#10817))

Congruence lemmas for `monotone_on`, `antitone_on`, `strict_mono_on`, `strict_anti_on` using `set.eq_on`.

`data.set.function` imports `order.monotone` so we must put them here.

### [2021-12-16T10:58:18+00:00](https://github.com/leanprover-community/mathlib/commit/b5b19a6993ffedcd81ab40e4c31118b269884714)
feat(ring_theory/local_property): Being reduced is a local property. ([#10734](https://github.com/leanprover-community/mathlib/pull/#10734))

### [2021-12-16T09:07:54+00:00](https://github.com/leanprover-community/mathlib/commit/68ced9a9f4ac05a3b51276009c3ea58133bc0125)
chore(analysis/mean_inequalities_pow): nnreal versions of some ennreal inequalities ([#10836](https://github.com/leanprover-community/mathlib/pull/#10836))

Make `nnreal` versions of the existing `ennreal` lemmas
```lean
lemma add_rpow_le_rpow_add {p : ℝ} (a b : ℝ≥0∞) (hp1 : 1 ≤ p) :
  a ^ p + b ^ p ≤ (a + b) ^ p 
```
and similar, introduced by @RemyDegenne in [#5828](https://github.com/leanprover-community/mathlib/pull/#5828).  Refactor the proofs of the `ennreal` versions to pass through these.

### [2021-12-16T09:07:53+00:00](https://github.com/leanprover-community/mathlib/commit/d212f3eb8c15137ffa59b0b4840e3dad391e19e5)
feat(measure_theory/measure): new class is_finite_measure_on_compacts ([#10827](https://github.com/leanprover-community/mathlib/pull/#10827))

We have currently four independent type classes guaranteeing that a measure of compact sets is finite: `is_locally_finite_measure`, `is_regular_measure`, `is_haar_measure` and `is_add_haar_measure`. Instead of repeting lemmas for all these classes, we introduce a new typeclass saying that a measure is finite on compact sets.

### [2021-12-16T08:30:05+00:00](https://github.com/leanprover-community/mathlib/commit/87e2f24b3de909fc1288676ff030cd6905d53488)
feat(category_theory/adjunction/evaluation): Evaluation has a left and a right adjoint. ([#10793](https://github.com/leanprover-community/mathlib/pull/#10793))

### [2021-12-16T02:33:43+00:00](https://github.com/leanprover-community/mathlib/commit/8e4b3b0f6383a85415cce60f150c32ffb3cc8918)
chore(data/polynomial/field_division): beta-reduce ([#10835](https://github.com/leanprover-community/mathlib/pull/#10835))

### [2021-12-15T21:49:21+00:00](https://github.com/leanprover-community/mathlib/commit/5a835b7bcd7934dd93bef973d974f5475e4be4a5)
chore(*): tweaks taken from gh-8889 ([#10829](https://github.com/leanprover-community/mathlib/pull/#10829))

That PR is stale, but contained some trivial changes we should just take.

### [2021-12-15T21:49:20+00:00](https://github.com/leanprover-community/mathlib/commit/8218a78854da41dae517848729a6670237defe0f)
feat(analysis/normed_space/basic): formula for `c • sphere x r` ([#10814](https://github.com/leanprover-community/mathlib/pull/#10814))

### [2021-12-15T21:49:19+00:00](https://github.com/leanprover-community/mathlib/commit/b82c0d25566c6b6b7954aabaead8868262c30bbf)
feat(topology/metric_space/isometry): (pre)image of a (closed) ball or a sphere ([#10813](https://github.com/leanprover-community/mathlib/pull/#10813))

Also specialize for translations in a normed add torsor.

### [2021-12-15T21:49:18+00:00](https://github.com/leanprover-community/mathlib/commit/21c9d3b3e8bef5f908060f2e1daf3a3c6cb66c99)
feat(topology/metric_space/hausdorff_distance): add more topological properties API to thickenings ([#10661](https://github.com/leanprover-community/mathlib/pull/#10661))

More lemmas about thickenings, especially topological properties, still in preparation for the portmanteau theorem on characterizations of weak convergence of Borel probability measures.



Co-authored-by: kkytola <39528102+kkytola@users.noreply.github.com>

### [2021-12-15T19:58:19+00:00](https://github.com/leanprover-community/mathlib/commit/ef69cac14e698dad01e96952b0a21a2c39f4a504)
chore(topology/continuous_function/bounded): remove extra typeclass assumption ([#10823](https://github.com/leanprover-community/mathlib/pull/#10823))

Remove `[normed_star_monoid β]` from the typeclass assumptions of `[cstar_ring (α →ᵇ β)]` -- it was doing no harm, since it's implied by the assumption `[cstar_ring β]`, but it's unnecessary.

### [2021-12-15T19:58:18+00:00](https://github.com/leanprover-community/mathlib/commit/00c55f5eec2a7ec18ae6c4d0071b073269113056)
feat(algebra/module/linear_map): interaction of linear maps and pointwise operations on sets ([#10821](https://github.com/leanprover-community/mathlib/pull/#10821))

### [2021-12-15T19:58:17+00:00](https://github.com/leanprover-community/mathlib/commit/dfb78f7ee80bf39355fe91ef49b2f4ba1b7f3beb)
feat(analysis/special_functions/complex): range of `complex.exp (↑x * I)` ([#10816](https://github.com/leanprover-community/mathlib/pull/#10816))

### [2021-12-15T19:58:16+00:00](https://github.com/leanprover-community/mathlib/commit/81e58c9ec35045679c425a257b04858ddeb966fe)
feat(analysis/mean_inequalities): corollary of Hölder inequality ([#10789](https://github.com/leanprover-community/mathlib/pull/#10789))

Several versions of the fact that
```
(∑ i in s, f i) ^ p ≤ (card s) ^ (p - 1) * ∑ i in s, (f i) ^ p
```
for `1 ≤ p`.

### [2021-12-15T19:58:15+00:00](https://github.com/leanprover-community/mathlib/commit/026e6929c8eae1e0cbe9666110ae5dc0133ae00f)
chore(combinatorics/simple_graph): fix name mixup ([#10785](https://github.com/leanprover-community/mathlib/pull/#10785))

Fixes the name mixup from [#10778](https://github.com/leanprover-community/mathlib/pull/#10778) and reorders lemmas to make the difference more clear.

### [2021-12-15T19:58:13+00:00](https://github.com/leanprover-community/mathlib/commit/204aa7e823801cf3bf3b1da81a32b833941118b4)
feat(data/int/basic): more int.sign API ([#10781](https://github.com/leanprover-community/mathlib/pull/#10781))

### [2021-12-15T19:58:12+00:00](https://github.com/leanprover-community/mathlib/commit/75b4e5f5f107fe5f9d4195fa13d12613874bf015)
chore(*): remove edge case assumptions from lemmas  ([#10774](https://github.com/leanprover-community/mathlib/pull/#10774))

Remove edge case assumptions from lemmas when the result is easy to prove without the assumption.

We clean up a few lemmas in the library which assume something like `n \ne 0`,  `0 < n`, or `set.nonempty` but where the result is easy to prove by case splitting on this instead and then simplifying.
Removing these unneeded assumptions makes such lemmas easier to apply, and lets us minorly golf a few other proofs along the way.
The main external changes are to remove assumptions to around 30 lemmas, and make some arguments explicit when they were no longer inferable, all other lines are just fixing up the proofs, which shortens some proofs in the process.
I also added a couple of lemmas to help simp in a couple of examples.

The code I used to find these is in the branch https://github.com/leanprover-community/mathlib/tree/alexjbest/simple_edge_cases_linter

### [2021-12-15T19:58:10+00:00](https://github.com/leanprover-community/mathlib/commit/3f55e0279efdc14d6ae7077e4b2e37205f951504)
feat(data/{multiset, finset}/basic): add card_mono ([#10771](https://github.com/leanprover-community/mathlib/pull/#10771))

Add a `@[mono]` lemma for `finset.card`. Also `multiset.card_mono` as an alias of a preexisting lemma.

### [2021-12-15T19:58:08+00:00](https://github.com/leanprover-community/mathlib/commit/a0b6bab2cd1f046cc5bbd4bac4c367895a0e2cdb)
split(logic/nonempty): Split off `logic.basic` ([#10762](https://github.com/leanprover-community/mathlib/pull/#10762))

This moves the lemmas about `nonempty` to a new file `logic.basic`

I'm crediting Johannes for 79483182abffcac3a1ddd7098d47a475e75a5ed2

### [2021-12-15T19:58:07+00:00](https://github.com/leanprover-community/mathlib/commit/02cdc812bac7f1c0f2b1587223831b27c5d9a1bb)
refactor(order/sup_indep): Get rid of decidable equality assumption ([#10673](https://github.com/leanprover-community/mathlib/pull/#10673))

The `erase` in the definition required a `decidable_eq`. We can make do without it while keeping it functionally the same.

### [2021-12-15T19:58:06+00:00](https://github.com/leanprover-community/mathlib/commit/9525f5e02775c3c0d56d13217f3a0c389c126867)
feat(order/zorn): Added some results about chains ([#10658](https://github.com/leanprover-community/mathlib/pull/#10658))

Added `chain_empty`, `chain_subsingleton`, and `chain.max_chain_of_chain`.

The first two of these are immediate yet useful lemmas. The last one is a consequence of Zorn's lemma, which generalizes Hausdorff's maximality principle. 



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-12-15T19:58:04+00:00](https://github.com/leanprover-community/mathlib/commit/accdb8fc9b57edc7d5c6bb4d8f39dc84a2322486)
feat(measure_theory/integral/divergence_theorem): specialize for `f : ℝ → E` and `f g : ℝ × ℝ → E` ([#10616](https://github.com/leanprover-community/mathlib/pull/#10616))

### [2021-12-15T18:06:00+00:00](https://github.com/leanprover-community/mathlib/commit/4ff9b82ad4ef71ebd5bbdb934ebca4ad90681e84)
feat(data/set/lattice): new lemma Union_singleton_eq_range ([#10819](https://github.com/leanprover-community/mathlib/pull/#10819))

### [2021-12-15T18:05:59+00:00](https://github.com/leanprover-community/mathlib/commit/dc732a3c3fb1aca11f5a9a7106f34e6bfdf3b390)
feat(logic/basic): When an If-Then-Else is not one of its arguments ([#10800](https://github.com/leanprover-community/mathlib/pull/#10800))

Conditions for `ite P a b ≠ a` and `ite P a b ≠ b`.

### [2021-12-15T18:05:58+00:00](https://github.com/leanprover-community/mathlib/commit/7130d75d783ea43c0d8e46234ac577cf30205e10)
chore(*): introduce notation for left/right/punctured nhds ([#10694](https://github.com/leanprover-community/mathlib/pull/#10694))

New notation:

* `𝓝[≤] x`: the filter `nhds_within x (set.Iic x)` of left-neighborhoods of `x`;
* `𝓝[≥] x`: the filter `nhds_within x (set.Ici x)` of right-neighborhoods of `x`;
* `𝓝[<] x`: the filter `nhds_within x (set.Iio x)` of punctured left-neighborhoods of `x`;
* `𝓝[>] x`: the filter `nhds_within x (set.Ioi x)` of punctured right-neighborhoods of `x`;
* `𝓝[≠] x`: the filter `nhds_within x {x}ᶜ` of punctured neighborhoods of `x`.

### [2021-12-15T18:05:57+00:00](https://github.com/leanprover-community/mathlib/commit/6043522e1a4f7d19d78035deec02cc900170acfe)
refactor(order/basic): Change definition of `<` on `α × β` ([#10667](https://github.com/leanprover-community/mathlib/pull/#10667))

This prove that `a < b` on `prod` is equivalent to `a.1 < b.1 ∧ a.2 ≤ b.2 ∨ a.1 ≤ b.1 ∧ a.2 < b.2`.

### [2021-12-15T18:05:56+00:00](https://github.com/leanprover-community/mathlib/commit/6530769acd0b590d8d6054bf7d35e67b785ececb)
doc(algebra/algebra/basic): expand the docstring ([#10221](https://github.com/leanprover-community/mathlib/pull/#10221))

This doesn't rule out having a better way to spell "non-unital non-associative algebra" in future, but let's document how it can be done today.

Much of this description is taken from [my talk at CICM's FMM](https://eric-wieser.github.io/fmm-2021/#/algebras).

### [2021-12-15T17:00:14+00:00](https://github.com/leanprover-community/mathlib/commit/bb51df36f42ad00d1e22ab45c5c0953f26b5af77)
chore(computability/regular_expressions): eliminate `finish` ([#10811](https://github.com/leanprover-community/mathlib/pull/#10811))

Removing uses of `finish`, as discussed in this Zulip thread (https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20sat.20solvers)

### [2021-12-15T17:00:12+00:00](https://github.com/leanprover-community/mathlib/commit/5658241a1248aae521a4fd42bb67008fa5249856)
feat(ring_theory/localization,group_theory/monoid_localization): other scalar action instances ([#10804](https://github.com/leanprover-community/mathlib/pull/#10804))

As requested by @pechersky. With this instance it's possible to state:
```lean
import field_theory.ratfunc
import data.complex.basic
import ring_theory.laurent_series

noncomputable example : ratfunc ℂ ≃ₐ[ℂ] fraction_ring (polynomial ℂ) := sorry
```

### [2021-12-15T17:00:11+00:00](https://github.com/leanprover-community/mathlib/commit/930ae468f06ff7888ac1825b07af4f438fef2644)
chore(analysis/special_functions/pow): remove duplicate lemmas concerning monotonicity of `rpow` ([#10794](https://github.com/leanprover-community/mathlib/pull/#10794))

The lemmas `rpow_left_monotone_of_nonneg` and `rpow_left_strict_mono_of_pos` were duplicates of `monotone_rpow_of_nonneg` and `strict_mono_rpow_of_pos`, respectively. The duplicates are removed as well as references to them in mathlib in `measure_theory/function/{continuous_function_dense, lp_space}`

### [2021-12-15T15:40:27+00:00](https://github.com/leanprover-community/mathlib/commit/61949afee4a93ef1f3c4ceed098bbdcf75fd128b)
doc(linear_algebra/std_basis): update module doc ([#10818](https://github.com/leanprover-community/mathlib/pull/#10818))

The old module documentation for this file still referred to the removed old `is_basis`-based definitions. This PR updates the documentation to refer to the new bundled `basis`-based definitions.

### [2021-12-15T12:44:42+00:00](https://github.com/leanprover-community/mathlib/commit/9f787c2c70f1ed65e9bc7211ff8db73de238252b)
doc(undergrad): Link the affine group ([#10797](https://github.com/leanprover-community/mathlib/pull/#10797))

This is the statement `group (P₁ ≃ᵃ[k] P₁)`. Per the "Undergrad TODO trivial targets" wiki page, this should [match wikipedia](https://en.wikipedia.org/wiki/Affine_group), which says:

> In mathematics, the affine group or general affine group of any affine space over a field K is the group of all invertible affine transformations from the space into itself.

I guess you could also ask for the statement that `(P₁ ≃ᵃ[k] P₁) ≃ units (P₁ →ᵃ[k] P₁)`, but I'll PR that separately.



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-12-15T10:36:10+00:00](https://github.com/leanprover-community/mathlib/commit/c574e38747e23457425e576478949118336bdd80)
feat(data/finsupp/basic): Add `finsupp.erase_of_not_mem_support` ([#10689](https://github.com/leanprover-community/mathlib/pull/#10689))

Analogous to `list.erase_of_not_mem`

### [2021-12-15T09:53:43+00:00](https://github.com/leanprover-community/mathlib/commit/03a250a47d28035d98b01999aae8003904db7eed)
chore(data/sym/sym2): Better lemma names ([#10801](https://github.com/leanprover-community/mathlib/pull/#10801))

Renames
* `mk_has_mem` to `mk_mem_left`
* `mk_has_mem_right` to `mk_mem_right`. Just doesn't follow the convention.
* `mem_other` to `other` in lemma names. The `mem` is confusing and is only part of the fully qualified name for dot notation to work.
* `sym2.elems_iff_eq` to `mem_and_mem_iff`. `elems` is never used elsewhere. Could also be `mem_mem_iff`.
* `is_diag_iff_eq` to `mk_is_diag_iff`. The form of the argument was ambiguous. Adding `mk` solves it.

### [2021-12-15T07:05:10+00:00](https://github.com/leanprover-community/mathlib/commit/40cfdecddb5d36ecf912dbd3930df93afeb12ab5)
chore(algebra/algebra/basic): alg_equiv.map_smul ([#10805](https://github.com/leanprover-community/mathlib/pull/#10805))

### [2021-12-15T06:22:11+00:00](https://github.com/leanprover-community/mathlib/commit/8f5031ae44a7e3bfefc9f632eed99c1378d9dbdd)
docs(undergrad): more links ([#10790](https://github.com/leanprover-community/mathlib/pull/#10790))

The only change to existing declaration links is removing wrong claims of having proving Sylvester's law of inertia (we don't have that the number of 1 and -1 is independent from the basis).

### [2021-12-14T14:14:24+00:00](https://github.com/leanprover-community/mathlib/commit/e3eb0eb024dd2c436c94d3e7386c70f50c5f1261)
feat(measure_theory/integral/set_to_l1): various properties of the set_to_fun construction ([#10713](https://github.com/leanprover-community/mathlib/pull/#10713))




Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2021-12-14T12:57:08+00:00](https://github.com/leanprover-community/mathlib/commit/1367c19b1b5d53ec699e4003f7aaa40a8099a643)
feat(algebraic_geometry): LocallyRingedSpace has coproducts. ([#10665](https://github.com/leanprover-community/mathlib/pull/#10665))

### [2021-12-14T11:07:17+00:00](https://github.com/leanprover-community/mathlib/commit/9078914e2a7f87681293cc8ae31bb542a842098e)
feat(algebra/group): make `map_[z]pow` generic in `monoid_hom_class` ([#10749](https://github.com/leanprover-community/mathlib/pull/#10749))

This PR makes `map_pow` take a `monoid_hom_class` instead of specifically a `monoid_hom`.

### [2021-12-14T09:33:38+00:00](https://github.com/leanprover-community/mathlib/commit/f46a7a0f60118a6ba4437bd214e6387686b40012)
chore(data/equiv/ring): inv_fun_eq_symm ([#10779](https://github.com/leanprover-community/mathlib/pull/#10779))

Like what we have for `alg_equiv`.

### [2021-12-14T09:33:37+00:00](https://github.com/leanprover-community/mathlib/commit/6d15ea430b2ef725a39ee3ccc828f4e266c317bd)
feat(combinatorics/simple_graph): simp lemmas about spanning coe ([#10778](https://github.com/leanprover-community/mathlib/pull/#10778))

A couple of lemmas from [#8737](https://github.com/leanprover-community/mathlib/pull/#8737) which don't involve connectivity, plus some extra related results.

cc @kmill

### [2021-12-14T09:33:36+00:00](https://github.com/leanprover-community/mathlib/commit/05d87671abd59b14518969354778b03e63e79690)
feat(group_theory/order_of_element): additivize ([#10766](https://github.com/leanprover-community/mathlib/pull/#10766))

### [2021-12-14T07:40:55+00:00](https://github.com/leanprover-community/mathlib/commit/85cb4a81e6c89a48aa51c2a88178a029481b17cd)
chore(measure_theory/decomposition/signed_hahn): Fixed a few typos ([#10777](https://github.com/leanprover-community/mathlib/pull/#10777))

### [2021-12-14T07:40:54+00:00](https://github.com/leanprover-community/mathlib/commit/f070a69b1aaa557e55bcb89f21a165bee046ea0a)
move(algebra/order/lattice_group): Move from `algebra.lattice_ordered_group` ([#10763](https://github.com/leanprover-community/mathlib/pull/#10763))

Rename `algebra.lattice_ordered_group` in `algebra/order/lattice_group`.

### [2021-12-14T07:40:53+00:00](https://github.com/leanprover-community/mathlib/commit/f727e1266d3c1ca28f5fe5a2b43e640c4c60d7df)
chore(logic/basic): tidy `ite` section and misplaced lemmas ([#10761](https://github.com/leanprover-community/mathlib/pull/#10761))

Moves a few lemmas down and use `variables`.

### [2021-12-14T07:40:52+00:00](https://github.com/leanprover-community/mathlib/commit/dda8a10a3fce5d0499e894f072cfca0640bc4fa7)
feat(data/mv_polynomial/basic): add `mv_polynomial.support_sum` ([#10731](https://github.com/leanprover-community/mathlib/pull/#10731))




Co-authored-by: Iván Sadofschi Costa <isadofschi@users.noreply.github.com>

### [2021-12-14T07:40:51+00:00](https://github.com/leanprover-community/mathlib/commit/9af43e4e2f7b2208be1574753a1a81139bb7283b)
feat(analysis/inner_product_space/basic): inner product as a (continuous) sesquilinear map ([#10684](https://github.com/leanprover-community/mathlib/pull/#10684))

This PR replaces `inner_right (v : E) : E →L[𝕜] 𝕜` (the inner product with a fixed left element as a continuous linear map) by `innerₛₗ : E →ₗ⋆[𝕜] E →ₗ[𝕜] 𝕜 ` and `innerSL : E →L⋆[𝕜] E →L[𝕜] 𝕜 `, which bundle the inner product as a sesquilinear map and as a continuous sesquilinear map respectively.

### [2021-12-14T05:36:16+00:00](https://github.com/leanprover-community/mathlib/commit/f3fa5e3f8956ed6a3c976c442a2f8953308c2cbf)
feat(data/mv_polynomial/variables): add `mv_polynomial.degree_of_zero` ([#10768](https://github.com/leanprover-community/mathlib/pull/#10768))

### [2021-12-14T05:36:15+00:00](https://github.com/leanprover-community/mathlib/commit/ee78812f3afcf7df9f6538e7e905ac4c1147e1b5)
feat(number_theory/padics/padic_norm): lemmas ([#10765](https://github.com/leanprover-community/mathlib/pull/#10765))

### [2021-12-14T05:36:14+00:00](https://github.com/leanprover-community/mathlib/commit/9b1a8321c15c9ef87e1b44242e7483c4cf499dda)
feat(data/nat/prime): dvd_of_factors_subperm ([#10764](https://github.com/leanprover-community/mathlib/pull/#10764))

### [2021-12-14T05:36:13+00:00](https://github.com/leanprover-community/mathlib/commit/d9edeea2de1e947f08049c22eeed44182abbdd0e)
refactor(linear_algebra/orientation): add refl, symm, and trans lemma ([#10753](https://github.com/leanprover-community/mathlib/pull/#10753))

This restates the `reflexive`, `symmetric`, and `transitive` lemmas in a form understood by `@[refl]`, `@[symm]`, and `@[trans]`.
As a bonus, these versions also work with dot notation.

I've discarded the original statements, since they're always recoverable via the fields of equivalence_same_ray, and keeping them is just noise.

### [2021-12-14T05:36:12+00:00](https://github.com/leanprover-community/mathlib/commit/0000497509cddbebddba74cb6ff3ac28b3f5af04)
feat(order/basic, order/bounded_order): Generalized `preorder` to `has_lt` ([#10695](https://github.com/leanprover-community/mathlib/pull/#10695))

This is a continuation of [#10664](https://github.com/leanprover-community/mathlib/pull/#10664).

### [2021-12-14T04:24:23+00:00](https://github.com/leanprover-community/mathlib/commit/32c24f1b3dc6e1491df590d8f3e6f62fbfee0faa)
chore(set_theory/ordinal_arithmetic): simplified proof of `is_normal.le_self` ([#10770](https://github.com/leanprover-community/mathlib/pull/#10770))

Thanks to [#10732](https://github.com/leanprover-community/mathlib/pull/#10732), this proof is now a one-liner.

### [2021-12-14T01:29:31+00:00](https://github.com/leanprover-community/mathlib/commit/cd462cdaf0f4d6a3e76cf36717eba737b18f2459)
feat(topology/algebra/*, analysis/normed_space/operator_norm): construct bundled {monoid_hom, linear_map} from limits of such maps ([#10700](https://github.com/leanprover-community/mathlib/pull/#10700))

Given a function which is a pointwise limit of {`monoid_hom`, `add_monoid_hom`, `linear_map`} maps, construct a bundled version of the corresponding type with that function as its `to_fun`. Then this construction is used to replace the existing in-proof construction that the continuous linear maps into a banach space is itself complete. 



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-12-14T00:37:44+00:00](https://github.com/leanprover-community/mathlib/commit/77e524848f0d6cbae14d1d0c9e37ba8f5cc2a8b3)
feat(algebra/triv_sq_zero_ext): universal property ([#10754](https://github.com/leanprover-community/mathlib/pull/#10754))

### [2021-12-13T23:34:29+00:00](https://github.com/leanprover-community/mathlib/commit/c3391c26e62709c33f5824e3a55118ab438637ef)
feat(analysis/convex/simplicial_complex): Simplicial complexes ([#9762](https://github.com/leanprover-community/mathlib/pull/#9762))

This introduces simplicial complexes in modules.

### [2021-12-13T21:33:22+00:00](https://github.com/leanprover-community/mathlib/commit/7181b3afa4631d5868cf97126d62a61e84a2bd27)
chore(order/hom): rearrange definitions of `order_{hom,iso,embedding}` ([#10752](https://github.com/leanprover-community/mathlib/pull/#10752))

We symmetrize the locations of `rel_{hom,iso,embedding}` and `order_{hom,iso,embedding}` by putting the `rel_` definitions in `order/rel_iso.lean` and the `order_` definitions in `order/hom/basic.lean`. (`order_hom.lean` needed to be split up to fix an import loop.) Requested by @YaelDillies.

## Moved definitions
 * `order_hom`, `order_iso`, `order_embedding` are now in `order/hom/basic.lean`
 * `order_hom.has_sup` ... `order_hom.complete_lattice` are now in `order/hom/lattice.lean`

## Other changes

Some import cleanup.

### [2021-12-13T19:31:53+00:00](https://github.com/leanprover-community/mathlib/commit/b351ca986f1b42ee20d8c3af221ab78adc6d976f)
chore(algebra/algebra/tower): golf ext lemma ([#10756](https://github.com/leanprover-community/mathlib/pull/#10756))

It turns out that we have both `algebra.ext` and `algebra.algebra_ext`, with slightly different statements.
This changes one to be proved in terms of the other.

### [2021-12-13T19:31:52+00:00](https://github.com/leanprover-community/mathlib/commit/3b2cf53dfd982fdf54ec7f9a8fe1a605f8a06ef2)
feat(order/well_founded) Added `strict_mono.id_le_of_wo` ([#10732](https://github.com/leanprover-community/mathlib/pull/#10732))

This generalizes `strict_mono.id_le`.

### [2021-12-13T19:31:51+00:00](https://github.com/leanprover-community/mathlib/commit/c895ddd962d63dfd3b99869cb9ce228fec609380)
feat(topology/algebra/group): add homeomorph.prod_units ([#10725](https://github.com/leanprover-community/mathlib/pull/#10725))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-13T19:31:50+00:00](https://github.com/leanprover-community/mathlib/commit/ad88a836ea126a91e37b267fdb8a3071ceb47fc2)
feat(probability_theory/martingale): add super/sub-martingales ([#10710](https://github.com/leanprover-community/mathlib/pull/#10710))

### [2021-12-13T19:31:49+00:00](https://github.com/leanprover-community/mathlib/commit/c7e355d341d70cf9da02ef3ddcb884b3db9f86ab)
feat(algebra/big_operators/finprod): add div lemmas ([#10472](https://github.com/leanprover-community/mathlib/pull/#10472))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-13T17:35:09+00:00](https://github.com/leanprover-community/mathlib/commit/0c0ee7b0644e7b825ba2a07675a010f7804838f1)
refactor(data/set/pairwise): Make arguments of `set.pairwise` semi-implicit ([#10740](https://github.com/leanprover-community/mathlib/pull/#10740))

The previous definition was `∀ x ∈ s, ∀ y ∈ s, x ≠ y → r x y`. It now is `∀ ⦃x⦄, x ∈ s → ∀ ⦃y⦄, y ∈ s → x ≠ y → r x y`.

The explicitness resulted in a lot of useless `_` and general pain using `set.pairwise`, `set.pairwise_disjoint`, `zorn.chain`, `is_antichain`...

### [2021-12-13T15:33:28+00:00](https://github.com/leanprover-community/mathlib/commit/ee8de4cf3cca22e9f0ade131c01a3e34a6822fe0)
doc(linear_algebra/finite_dimensional): update doc to new definition ([#10758](https://github.com/leanprover-community/mathlib/pull/#10758))

`finite_dimensional` is now (since a couple of months) defined to be `module.finite`. The lines modified by this PR are about the old definition.

### [2021-12-13T15:33:27+00:00](https://github.com/leanprover-community/mathlib/commit/108eb0b223d69685935140656f03a6520c4ad515)
feat(combinatorics/additive/salem_spencer): Salem-Spencer sets and Roth numbers ([#10509](https://github.com/leanprover-community/mathlib/pull/#10509))

This defines Salem-Spencer sets and Roth numbers in (additive) monoids.



Co-authored-by: Bhavik Mehta <bhavikmehta8@gmail.com>

### [2021-12-13T15:33:26+00:00](https://github.com/leanprover-community/mathlib/commit/e17473645875e51fbc13a16be01fb1e199ed5486)
feat(ring_theory/unique_factorization_domain): add count lemmas ([#10475](https://github.com/leanprover-community/mathlib/pull/#10475))

### [2021-12-13T15:33:25+00:00](https://github.com/leanprover-community/mathlib/commit/efbbb767b2d953a930f9898cc9063c7718f69888)
feat(ring_theory/graded_algebra): `homogeneous_element` ([#10118](https://github.com/leanprover-community/mathlib/pull/#10118))

This pr is about what `homogeneous_element` of graded ring is.

We need this definition to make the definition of homogeneous ideal more natural, i.e. we can say that a homogeneous ideal is just an ideal spanned by homogeneous elements.



Co-authored-by: jjaassoonn <jujian.zhang1998@out.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-12-13T13:35:58+00:00](https://github.com/leanprover-community/mathlib/commit/1589c7b4d1715778e18fe48ed0ff5970a165451a)
feat(linear_algebra/determinant): determinant of a linear equivalence as a unit ([#10751](https://github.com/leanprover-community/mathlib/pull/#10751))

### [2021-12-13T13:35:57+00:00](https://github.com/leanprover-community/mathlib/commit/324a605fd491ec0e0536dded8ad4725076c76160)
chore(order): rename `preorder_hom` to `order_hom` ([#10750](https://github.com/leanprover-community/mathlib/pull/#10750))

For consistency with `order_embedding` and `order_iso`, this PR renames `preorder_hom` to `order_hom`, at the request of @YaelDillies.

### [2021-12-13T13:35:56+00:00](https://github.com/leanprover-community/mathlib/commit/35cd7c0c286c7be952b0bfce47710fc2fb7a65b5)
refactor(set_theory/ordinal_arithmetic) Separate `is_normal.lt_iff` ([#10745](https://github.com/leanprover-community/mathlib/pull/#10745))

We split off `is_normal.strict_mono` from `is_normal.lt_iff`. The reasoning is that normal functions are usually defined as being strictly monotone, so this should be a separate theorem.

### [2021-12-13T11:53:34+00:00](https://github.com/leanprover-community/mathlib/commit/7697ec6e234446544f8c454797829290ec94540d)
feat(analysis/special_function/integrals): integral of `x ^ r`, `r : ℝ`, and `x ^ n`, `n : ℤ` ([#10650](https://github.com/leanprover-community/mathlib/pull/#10650))

Also generalize `has_deriv_at.div_const` etc.

### [2021-12-13T09:36:41+00:00](https://github.com/leanprover-community/mathlib/commit/779517b6ffd584b6080b164cac0e36e7ad343f40)
feat(algebra/order/floor): Floor of `a / n` and other lemmas ([#10748](https://github.com/leanprover-community/mathlib/pull/#10748))

A few floor lemmas + one `tsub` lemma

### [2021-12-13T09:36:40+00:00](https://github.com/leanprover-community/mathlib/commit/563c36439275f8bc6a89317c4eb3a5183bad06c6)
chore(topology/maps): golf, use section vars ([#10747](https://github.com/leanprover-community/mathlib/pull/#10747))

Also add `quotient_map.is_closed_preimage`

### [2021-12-13T09:36:38+00:00](https://github.com/leanprover-community/mathlib/commit/10fb7f91a2718c641ad4b95b180d515e943ad639)
feat(archive/imo): IMO 2005 problem 4 (modular arithmetic) ([#10746](https://github.com/leanprover-community/mathlib/pull/#10746))

### [2021-12-13T09:36:37+00:00](https://github.com/leanprover-community/mathlib/commit/9d73418ccb0cf205a52060a4704c364e2d69acc4)
split(data/set/prod): split off `data.set.basic` ([#10739](https://github.com/leanprover-community/mathlib/pull/#10739))

This moves `set.prod`, `set.pi` and `set.diagonal` from `data.set.basic` to a new file `data.set.prod`.

I'm crediting
* Mario for `set.prod` from bd013e8089378e8057dc7e93c9eaf2c8ebaf25a2
* Johannes for `set.pi` from da7bbd7fc2c80a785f7992bb7751304f6cafe235
* Patrick for `set.diagonal` from [#3118](https://github.com/leanprover-community/mathlib/pull/#3118)

### [2021-12-13T09:36:36+00:00](https://github.com/leanprover-community/mathlib/commit/e60899c5b8521fdf4a40eb7a3173fd53ccdc32c6)
feat(linear_algebra/orientation): inherit an action by `units R` on `module.ray R M` ([#10738](https://github.com/leanprover-community/mathlib/pull/#10738))

This action is just the action inherited on the elements of the module under the quotient.
We provide it generally for any group `G` that satisfies the required properties, but are only really interested in `G = units R`.

This PR also provides `module.ray.map`, for sending a ray through a linear equivalence.

This generalization also provides us with `mul_action (M ≃ₗ[R] M) (module.ray R M)`, which might also turn out to be useful.

### [2021-12-13T09:36:35+00:00](https://github.com/leanprover-community/mathlib/commit/ea88bd61d675134621aec40c42baa7702a201f4a)
refactor(algebra/triv_sq_zero_ext): generalize and cleanup ([#10729](https://github.com/leanprover-community/mathlib/pull/#10729))

This:
* Generalizes typeclass assumptions on many lemmas
* Generalizes and adds missing typeclass instances on `triv_sq_zero_ext`, most notably the algebra structure over a different ring.
* Reorders many of the lemmas in the file to ensure that the right arguments are implicit / explicit

### [2021-12-13T09:36:34+00:00](https://github.com/leanprover-community/mathlib/commit/e70e22f238a2af953e928b2d72a2e04003cfe130)
feat(data/{list, multiset, finset}/range): add range_add ([#10706](https://github.com/leanprover-community/mathlib/pull/#10706))


Adds `range_add` lemmas

### [2021-12-13T09:36:32+00:00](https://github.com/leanprover-community/mathlib/commit/e4b6b5cc30a12f7ff8a1d146ed0dac0d473eecd4)
feat(order/galois_connection): add lt_iff_lt ([#10702](https://github.com/leanprover-community/mathlib/pull/#10702))


A lemma for galois connections on linear orders.

### [2021-12-13T09:36:31+00:00](https://github.com/leanprover-community/mathlib/commit/29fecae5040e016657f03cb2cb6ac93333b7888f)
feat(data/polynomial/degree/definitions): add pow lemmas ([#10698](https://github.com/leanprover-community/mathlib/pull/#10698))

Add lemmas `nat_degree_pow_le` and `coeff_pow_degree_mul_degree`



Co-authored-by: greysome <ultraficial@gmail.com>

### [2021-12-13T09:36:30+00:00](https://github.com/leanprover-community/mathlib/commit/fb8195012b4f451580d7799671088c48390bddc6)
feat(analysis/convex/basic): lemmas about midpoint and segment ([#10682](https://github.com/leanprover-community/mathlib/pull/#10682))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-13T09:36:28+00:00](https://github.com/leanprover-community/mathlib/commit/f8171e09d58667ddd739f7735378f86105a0efdd)
feat(algebra/graded_monoid): dependent products ([#10674](https://github.com/leanprover-community/mathlib/pull/#10674))

This introduces `list.dprod`, which takes the (possibly non-commutative) product of a list of graded elements of type `A i`. This definition primarily exist to allow `graded_monoid.mk` and `direct_sum.of` to be pulled outside a product, such as in the new `graded_monoid.mk_list_dprod` and `direct_sum.of_list_dprod` lemmas added in this PR.

### [2021-12-13T09:36:27+00:00](https://github.com/leanprover-community/mathlib/commit/309da2019a2a5ceac0bd810ba926efe4e3ae2544)
feat(*): Random lemmas about adjoin/span. ([#10666](https://github.com/leanprover-community/mathlib/pull/#10666))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-13T09:36:26+00:00](https://github.com/leanprover-community/mathlib/commit/e19473a94f5c16242a6f2d8acac00830505e9f1d)
feat(algebra/pointwise): Multiplying a singleton  ([#10660](https://github.com/leanprover-community/mathlib/pull/#10660))

and other lemmas about `finset.product` and singletons.

### [2021-12-13T09:36:25+00:00](https://github.com/leanprover-community/mathlib/commit/ec48e3b96f249a3daa6abe86021630bcafc168cf)
feat(analysis/convex/strict): Strictly convex sets ([#10648](https://github.com/leanprover-community/mathlib/pull/#10648))

This defines strictly convex sets.

### [2021-12-13T09:36:23+00:00](https://github.com/leanprover-community/mathlib/commit/2d47c1d63a4e80faaab3b2add9edc319a563d012)
feat(ring_theory/polynomial/cyclotomic/*): ɸₙ(1) = 1 ([#10483](https://github.com/leanprover-community/mathlib/pull/#10483))

(for `n` not a prime power)



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-13T07:53:00+00:00](https://github.com/leanprover-community/mathlib/commit/7cd8adb7a9d7d0498d2e76c23cd4255f966899f5)
chore(category_theory/limits): Generalize universe for preserving limits ([#10736](https://github.com/leanprover-community/mathlib/pull/#10736))

### [2021-12-13T07:52:59+00:00](https://github.com/leanprover-community/mathlib/commit/381b95415f49bb9d1395f146ab09850625d2371d)
feat(algebraic_geometry): An integral scheme is reduced and irreducible ([#10733](https://github.com/leanprover-community/mathlib/pull/#10733))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-13T07:52:58+00:00](https://github.com/leanprover-community/mathlib/commit/214a80f33cc52437c2241298e74801869d566086)
feat(data/mv_polynomial/variables): API for mv_polynomial.degree_of ([#10646](https://github.com/leanprover-community/mathlib/pull/#10646))

This PR provides some API for `mv_polynomial.degree_of` for `comm_ring` and `comm_semiring`. I don't know which of these lemmas should be simp lemmas.



Co-authored-by: Iván Sadofschi Costa <isadofschi@users.noreply.github.com>

### [2021-12-13T07:52:57+00:00](https://github.com/leanprover-community/mathlib/commit/8b8f08d05564618ebdd1a90d1646ad5cd3527a53)
feat(category_theory/limits): The associativity of pullbacks and pushouts. ([#10619](https://github.com/leanprover-community/mathlib/pull/#10619))

Also provides the pasting lemma for pullback (pushout) squares



Co-authored-by: erd1 <the.erd.one@gmail.com>

### [2021-12-13T07:52:56+00:00](https://github.com/leanprover-community/mathlib/commit/b6b47ed5b3bf885a5d89803f9ce7271aecd4622a)
feat(algebraic_geometry/presheafed_space): Open immersions of presheafed spaces has pullbacks. ([#10069](https://github.com/leanprover-community/mathlib/pull/#10069))




Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-12-13T07:15:39+00:00](https://github.com/leanprover-community/mathlib/commit/fcd0f11c70df2b2b27588bac67bc5a02ff1bb9bc)
feat(category_theory/flat_functor): Generalize results into algebraic categories. ([#10735](https://github.com/leanprover-community/mathlib/pull/#10735))

Also proves that the identity is flat, and compositions of flat functors are flat.

### [2021-12-13T00:12:14+00:00](https://github.com/leanprover-community/mathlib/commit/06905422533ba5d8cee473f21e8d6550e8debb95)
feat(data/nat/prime): add `prime.dvd_mul_of_dvd_ne` ([#10727](https://github.com/leanprover-community/mathlib/pull/#10727))

### [2021-12-13T00:12:12+00:00](https://github.com/leanprover-community/mathlib/commit/0c248b7460fad4961d3719e23c387e4cdffc4678)
feat(algebra/{group,ring}/opposite): `{ring,monoid}_hom.from_opposite` ([#10723](https://github.com/leanprover-community/mathlib/pull/#10723))

We already have the `to_opposite` versions.

### [2021-12-13T00:12:11+00:00](https://github.com/leanprover-community/mathlib/commit/4b07949617985410c885d84d777a68d5115b1841)
chore(algebra/module/submodule): missing is_central_scalar instance ([#10720](https://github.com/leanprover-community/mathlib/pull/#10720))

### [2021-12-13T00:12:10+00:00](https://github.com/leanprover-community/mathlib/commit/41def6a8b3ae683b839cafc75a60117fd3066414)
feat(algebra/tropical/big_operators): sum, prod, Inf ([#10544](https://github.com/leanprover-community/mathlib/pull/#10544))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-12-12T23:25:29+00:00](https://github.com/leanprover-community/mathlib/commit/b9f244080354e33551475ce94d61a6387b87a46a)
chore(linear_algebra/orientation): golf a proof ([#10742](https://github.com/leanprover-community/mathlib/pull/#10742))

### [2021-12-12T21:34:23+00:00](https://github.com/leanprover-community/mathlib/commit/19dd4be384c7256e77ef365abf5b6a15358ef7db)
chore(tactic/reserved_notation): change precedence of sup and inf ([#10623](https://github.com/leanprover-community/mathlib/pull/#10623))

Put the precedence of `⊔` and `⊓` at 68 and 69 respectively, which is above `+` (65), `∑` and `∏` (67), and below `*` (70). This makes sure that inf and sup behave in the same way in expressions where arithmetic operations appear (which was not the case before).

Discussion: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly



Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2021-12-12T15:54:29+00:00](https://github.com/leanprover-community/mathlib/commit/61b0f4199c7ff006ff0cd74dcfc1284359b4ddcb)
refactor(data/{mv_,}polynomial): lemmas about `adjoin` ([#10670](https://github.com/leanprover-community/mathlib/pull/#10670))

Prove `adjoin {X} = ⊤` and `adjoin (range X) = ⊤` for `polynomial`s
and `mv_polynomial`s much earlier and use these equalities to golf
some proofs.

Also drop some `comm_` in typeclass assumptions.

### [2021-12-12T06:54:07+00:00](https://github.com/leanprover-community/mathlib/commit/e68fcf8dede813727dd0a47c873938ade3f90ef1)
move(data/bool/*): Move `bool` files in one folder ([#10718](https://github.com/leanprover-community/mathlib/pull/#10718))

* renames `data.bool` to `data.bool.basic`
* renames `data.set.bool` to `data.bool.set`
* splits `data.bool.all_any` off `data.list.basic`

### [2021-12-12T01:37:53+00:00](https://github.com/leanprover-community/mathlib/commit/50e318ec8ebf0b3641e133fb57360c984b5bf78e)
feat(algebra/order/ring): pos_iff_pos_of_mul_pos, neg_iff_neg_of_mul_pos ([#10634](https://github.com/leanprover-community/mathlib/pull/#10634))

Add four lemmas, deducing equivalence of `a` and `b` being positive or
negative from such a hypothesis for their product, that don't currently
seem to be present.

### [2021-12-11T21:21:53+00:00](https://github.com/leanprover-community/mathlib/commit/f3613738b290e545fffe2d167c51f917b1727062)
chore(order/boolean_algebra): add `compl_sdiff` ([#10722](https://github.com/leanprover-community/mathlib/pull/#10722))

Also mark `sdiff_compl` and `top_sdiff` as `@[simp]`.

### [2021-12-11T21:21:52+00:00](https://github.com/leanprover-community/mathlib/commit/f9fff7c6d1731bf0c7461fac0926675891e747c0)
feat(measure_theory): integral is mono in measure ([#10721](https://github.com/leanprover-community/mathlib/pull/#10721))

* Bochner integral of a nonnegative function is monotone in measure;
* set integral of a nonnegative function is monotone in set (generalize existing lemma);
* interval integral of a nonnegative function is monotone in interval.

### [2021-12-11T21:21:51+00:00](https://github.com/leanprover-community/mathlib/commit/cc5ff8cae20e492501afc2e043db08da3d088675)
feat(group_theory/submonoid): The submonoid of left inverses of a submonoid ([#10679](https://github.com/leanprover-community/mathlib/pull/#10679))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-11T21:21:50+00:00](https://github.com/leanprover-community/mathlib/commit/1c2b7420bab7cff02454370b47508fbac8c079e8)
feat(ring_theory/polynomial/cyclotomic/eval): `cyclotomic_pos` ([#10482](https://github.com/leanprover-community/mathlib/pull/#10482))



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-11T19:31:57+00:00](https://github.com/leanprover-community/mathlib/commit/f068b9de9fd315587e3c1f58f40123ba7e2a87e3)
refactor(algebra/group/basic): Migrate add_comm_group section into comm_group section ([#10565](https://github.com/leanprover-community/mathlib/pull/#10565))

Currently mathlib has a rich set of lemmas connecting the addition, subtraction and negation additive commutative group operations, but a far thinner collection of results for multiplication, division and inverse multiplicative commutative group operations, despite the fact that the former can be generated easily from the latter via to_additive.

This PR refactors the additive results in the `add_comm_group` section as the equivalent multiplicative results in the `comm_group` section and then recovers the additive results via to_additive. There is a complication in that unfortunately the multiplicative forms of the names of some of the `add_comm_group` lemmas collide with existing names in `group_with_zero`. I have worked around this by appending an apostrophe to the name and then manually overriding the names generated by to_additive. In a few cases, names with `1...n` appended apostrophes already existed. In these cases I have appended `n+1` apostrophes.

Previous discussion

The `add_group` section was previously tackled in [#10532](https://github.com/leanprover-community/mathlib/pull/#10532).

### [2021-12-11T13:03:44+00:00](https://github.com/leanprover-community/mathlib/commit/294753e92891d1e77dc30191a22064d5791170a8)
Fix comment typo ([#10715](https://github.com/leanprover-community/mathlib/pull/#10715))

### [2021-12-11T11:06:55+00:00](https://github.com/leanprover-community/mathlib/commit/97417665891caa0ca8836e69a5601f266e887ad8)
feat(analysis/normed_space): normed space is homeomorphic to the unit ball ([#10690](https://github.com/leanprover-community/mathlib/pull/#10690))

### [2021-12-11T09:33:55+00:00](https://github.com/leanprover-community/mathlib/commit/08d30d667caa33675b917e5633d911554dad5dbf)
chore(algebra/pointwise): Better `variables` management ([#10686](https://github.com/leanprover-community/mathlib/pull/#10686))

Moves a few variables from lemma statements to `variables`.

### [2021-12-11T04:23:13+00:00](https://github.com/leanprover-community/mathlib/commit/d856bf9b7fd5c46c24e5b0159ffc8e9bbec20242)
feat(ring_theory/localization): Clearing denominators ([#10668](https://github.com/leanprover-community/mathlib/pull/#10668))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-10T23:48:44+00:00](https://github.com/leanprover-community/mathlib/commit/0b87b0ae9ae4cdba39d4944abf52fa76218e8bd6)
chore(algebra/group_with_zero/defs: Rename `comm_cancel_monoid_with_zero` to `cancel_comm_monoid_with_zero` ([#10669](https://github.com/leanprover-community/mathlib/pull/#10669))

We currently have `cancel_comm_monoid` but `comm_cancel_monoid_with_zero`. This renames the latter to follow the former.

Replaced `comm_cancel_` by `cancel_comm_` everywhere.

### [2021-12-10T21:59:37+00:00](https://github.com/leanprover-community/mathlib/commit/52c2f74297105cc1fb97ced2a68fec2a01ad7ac2)
docs(topology/homotopy): add namespace in docstring to fix links ([#10711](https://github.com/leanprover-community/mathlib/pull/#10711))

Currently all the occurences of `homotopy` in the docs link to `algebra/homology/homotopy`.

### [2021-12-10T21:59:36+00:00](https://github.com/leanprover-community/mathlib/commit/a12fc70511b270c0e05498487e758a0ed1ab500e)
feat(logic/function/basic): surjective function is an epimorphism ([#10691](https://github.com/leanprover-community/mathlib/pull/#10691))

* Move proofs about `surjective`/`injective` and `epi`/`mono` to `logic.function.basic` (formulated in terms of injectivity of composition), make them universe polymorphic.
* drop `forall_iff_forall_surj`, use `function.surjective.forall` instead.

### [2021-12-10T20:23:28+00:00](https://github.com/leanprover-community/mathlib/commit/3e1d4d325718af302ede322434b18b30178744c9)
feat(algebra/gcd_monoid): `associates` lemmas ([#10705](https://github.com/leanprover-community/mathlib/pull/#10705))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-12-10T19:12:57+00:00](https://github.com/leanprover-community/mathlib/commit/b7ac8334c78441ab920bb458191c8fd98d875986)
feat(ring_theory/discriminant): add the discriminant of a family of vectors ([#10350](https://github.com/leanprover-community/mathlib/pull/#10350))

We add the definition and some basic results about the discriminant.

From FLT-regular.

- [x] depends on: [#10657](https://github.com/leanprover-community/mathlib/pull/#10657) 



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-12-10T17:07:55+00:00](https://github.com/leanprover-community/mathlib/commit/71e9f90dcbdccb40181ed6dbb9204a9bf9e58399)
feat(order/basic): Slightly generalized `densely_ordered` ([#10664](https://github.com/leanprover-community/mathlib/pull/#10664))


Changed `[preorder α]` to `[has_lt α]`.

### [2021-12-10T15:16:09+00:00](https://github.com/leanprover-community/mathlib/commit/12e18e8ea6b8201fc21e877a74b8ee532c40bc35)
feat(data/nat/gcd): coprime add mul lemmas ([#10588](https://github.com/leanprover-community/mathlib/pull/#10588))

Adds `coprime m (n + k * m) ↔ coprime m n` for nats, (and permutations thereof).

### [2021-12-10T15:16:08+00:00](https://github.com/leanprover-community/mathlib/commit/18ce3a8fd711af17accb8ad517a78c794f5ca6cd)
feat(group_theory/group_action/defs): add a typeclass to show that an action is central (aka symmetric) ([#10543](https://github.com/leanprover-community/mathlib/pull/#10543))

This adds a new `is_central_scalar` typeclass to indicate that `op m • a = m • a` (or rather, to indicate that a type has the same right and left scalar action on another type).

The main instance for this is `comm_semigroup.is_central_scalar`, for when `m • a = m * a` and `op m • a = a * m`, and then all the other instances follow transitively when `has_scalar R (f M)` is derived from `has_scalar R M`:

* `prod`
* `pi`
* `ulift`
* `finsupp`
* `dfinsupp`
* `monoid_algebra`
* `add_monoid_algebra`
* `polynomial`
* `mv_polynomial`
* `matrix`
* `add_monoid_hom`
* `linear_map`
* `complex`
* `pointwise` instances on:
  * `set`
  * `submonoid`
  * `add_submonoid`
  * `subgroup`
  * `add_subgroup`
  * `subsemiring`
  * `subring`
  * `submodule`

### [2021-12-10T13:26:26+00:00](https://github.com/leanprover-community/mathlib/commit/94d51b99c0da36929fea99f6e708a6f0ab886159)
chore(algebraic_geometry/presheafed_space): Make `has_colimits` work faster ([#10703](https://github.com/leanprover-community/mathlib/pull/#10703))

### [2021-12-10T13:26:25+00:00](https://github.com/leanprover-community/mathlib/commit/c29b7067b98614287b9b0e414634d583908bc992)
feat(data/int/gcd): another version of Euclid's lemma ([#10622](https://github.com/leanprover-community/mathlib/pull/#10622))

We already have something described as "Euclid's lemma" in `ring_theory/unique_factorization_domain`, but not this specific statement of the lemma.

This is Theorem 1.5 in Apostol (1976) Introduction to Analytic Number Theory

### [2021-12-10T13:26:24+00:00](https://github.com/leanprover-community/mathlib/commit/4471de6112e382c4aefe370cbd769e15d41144e1)
feat(order/lattice): define a lattice structure using an injective map to another lattice ([#10615](https://github.com/leanprover-community/mathlib/pull/#10615))

This is done similarly to `function.injective.group` etc.



Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2021-12-10T13:26:23+00:00](https://github.com/leanprover-community/mathlib/commit/ebbb991ae4b8c88d58a8661571c53be2f151cedb)
feat(ring_theory/principal_ideal_domain): add some corollaries about is_coprime ([#10601](https://github.com/leanprover-community/mathlib/pull/#10601))

### [2021-12-10T13:26:22+00:00](https://github.com/leanprover-community/mathlib/commit/46ac3c41144908d34dff0c513d3ed130ec12e745)
feat(*): introduce classes for types of homomorphism ([#9888](https://github.com/leanprover-community/mathlib/pull/#9888))

This PR is the main proof-of-concept in my plan to use typeclasses to reduce duplication surrounding `hom` classes. Essentially, I want to take each type of bundled homs, such as `monoid_hom`, and add a class `monoid_hom_class` which has an instance for each *type* extending `monoid_hom`. Declarations that now take a parameter of the specific type `monoid_hom M N` can instead take a more general `{F : Type*} [monoid_hom_class F M N] (f : F)`; this means we don't need to duplicate e.g. `monoid_hom.map_prod` to `ring_hom.map_prod`, `mul_equiv.map_prod`, `ring_equiv.map_prod`, or `monoid_hom.map_div` to `ring_hom.map_div`, `mul_equiv.map_div`, `ring_equiv.map_div`, ...

Basically, instead of having `O(n * k)` declarations for `n` types of homs and `k` lemmas, following the plan we only need `O(n + k)`.

## Overview

 * Change `has_coe_to_fun` to include the type of the function as a parameter (rather than a field of the structure) (**done** as part of [#7033](https://github.com/leanprover-community/mathlib/pull/#7033))
 * Define a class `fun_like`, analogous to `set_like`, for types of bundled function + proof (**done** in [#10286](https://github.com/leanprover-community/mathlib/pull/#10286))
 * Extend `fun_like` for each `foo_hom` to create a `foo_hom_class` (**done** in this PR for `ring_hom` and its ancestors, **todo** in follow-up for the rest)
 * Change parameters of type `foo_hom A B` to take `{F : Type*} [foo_hom_class F A B] (f : F)` instead (**done** in this PR for `map_{add,zero,mul,one,sub,div}`, **todo** in follow-up for remaining declarations)

## API changes

Lemmas matching `*_hom.map_{add,zero,mul,one,sub,div}` are deprecated. Use the new `simp` lemmas called simply `map_add`, `map_zero`, ...

Namespaced lemmas of the form `map_{add,zero,mul,one,sub,div}` are now protected. This includes e.g. `polynomial.map_add` and `multiset.map_add`, which involve `polynomial.map` and `multiset.map` respectively. In fact, it should be possible to turn those `map` definitions into bundled maps, so we don't even need to worry about the name change.

## New classes

 * `zero_hom_class`, `one_hom_class` defines `map_zero`, `map_one`
 * `add_hom_class`, `mul_hom_class` defines `map_add`, `map_mul`
 * `add_monoid_hom_class`, `monoid_hom_class` extends `{zero,one}_hom_class`, `{add,mul}_hom_class`
 * `monoid_with_zero_hom_class` extends `monoid_hom_class` and `zero_hom_class`
 * `ring_hom_class` extends `monoid_hom_class`, `add_monoid_hom_class` and `monoid_with_zero_hom_class`

## Classes still to be implemented

Some of the core algebraic homomorphisms are still missing their corresponding classes:

 * `mul_action_hom_class` defines `map_smul`
 * `distrib_mul_action_hom_class`, `mul_semiring_action_hom_class` extends the above
 * `linear_map_class` extends `add_hom_class` and defines `map_smulₛₗ`
 * `alg_hom_class` extends `ring_hom_class` and defines `commutes`

We could also add an `equiv_like` and its descendants `add_equiv_class`, `mul_equiv_class`, `ring_equiv_class`, `linear_equiv_class`, ...

## Other changes

`coe_fn_coe_base` now has an appropriately low priority, so it doesn't take precedence over `fun_like.has_coe_to_fun`.

## Why are you unbundling the morphisms again?

It's not quite the same thing as unbundling. When using unbundled morphisms, parameters have the form `(f : A → B) (hf : is_foo_hom f)`; bundled morphisms look like `(f : foo_hom A B)` (where `foo_hom A B` is equivalent to `{ f : A → B // is_foo_hom f }`; typically you would use a custom structure instead of `subtype`). This plan puts a predicate on the *type* `foo_hom` rather than the *elements* of the type as you would with unbundled morphisms. I believe this will preserve the advantages of the bundled approach (being able to talk about the identity map, making it work with `simp`), while addressing one of its disadvantages (needing to duplicate all the lemmas whenever extending the type of morphisms).

## Discussion

Main Zulip thread: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Typeclasses.20for.20morphisms

Some other threads referencing this plan:
 * https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Morphism.20refactor
 * https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/issue.20.231044.3A.20bundling.20morphisms
 * [#1044](https://github.com/leanprover-community/mathlib/pull/#1044)
 * [#4985](https://github.com/leanprover-community/mathlib/pull/#4985)



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-12-10T11:52:56+00:00](https://github.com/leanprover-community/mathlib/commit/165e05564b6e72042963a29918dd5d44411ade71)
refactor(group_theory/quotient_group): use `con` ([#10699](https://github.com/leanprover-community/mathlib/pull/#10699))

Use `con` to define `group` structure on `G ⧸ N` instead of repeating the construction in this case.

### [2021-12-10T11:52:55+00:00](https://github.com/leanprover-community/mathlib/commit/9a24b3e515f585cb975b0aa06e7b6496464d0a68)
chore(ring_theory/noetherian): rename `submodule.fg_map` to `submodule.fg.map` ([#10688](https://github.com/leanprover-community/mathlib/pull/#10688))

This renames:
* `submodule.fg_map` to `submodule.fg.map` (to match `submonoid.fg.map` and enable dot notation)
* `submodule.map_fg_of_fg` to `ideal.fg.map`
* `submodule.fg_ker_ring_hom_comp` to `ideal.fg_ker_comp` to match `submodule.fg_ker_comp`

and defines a new `ideal.fg` alias to avoid unfolding to `submodule R R` and `submodule.span`.

### [2021-12-10T11:52:54+00:00](https://github.com/leanprover-community/mathlib/commit/24cf723e25ee38a422b02dfc42059a4cce90b562)
feat(ring_theory/polynomial/cyclotomic): generalize `is_root_cyclotomic` ([#10687](https://github.com/leanprover-community/mathlib/pull/#10687))

### [2021-12-10T11:52:52+00:00](https://github.com/leanprover-community/mathlib/commit/3dcdf93f31a5133f3541b22bf7177f46d68eed9c)
feat(group_theory/finiteness): Lemmas about finitely generated submonoids ([#10681](https://github.com/leanprover-community/mathlib/pull/#10681))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-10T11:52:50+00:00](https://github.com/leanprover-community/mathlib/commit/508fc18177ccc5db269743dbc7cd47625e4bd179)
feat(ring_theory/ideal): Power of a spanning set is a spanning set ([#10656](https://github.com/leanprover-community/mathlib/pull/#10656))




Co-authored-by: erd1 <the.erd.one@gmail.com>

### [2021-12-10T09:20:23+00:00](https://github.com/leanprover-community/mathlib/commit/ce0e2c443352fbfe44f19d6ab7137024e55eee7d)
feat(category_theory/limits): Pullback API ([#10620](https://github.com/leanprover-community/mathlib/pull/#10620))

Needed for constructing fibered products of Schemes



Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-10T03:16:48+00:00](https://github.com/leanprover-community/mathlib/commit/e7959fb89efbd72d50636a1c41cc41158c03dbaa)
chore(scripts): update nolints.txt ([#10697](https://github.com/leanprover-community/mathlib/pull/#10697))

I am happy to remove some nolints for you!

### [2021-12-10T00:34:16+00:00](https://github.com/leanprover-community/mathlib/commit/1ecdf71437b104962027c9cea485208c3cfb06fe)
chore(algebra/punit_instances): add `comm_cancel_monoid_with_zero`, `normalized_gcd_monoid`, and scalar action instances ([#10312](https://github.com/leanprover-community/mathlib/pull/#10312))

Motivated by [this Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Is.200.20not.20equal.20to.201.3F/near/261366868). 

This also moves the simp lemmas closer to the instances they refer to.



Co-authored-by: Anne Baanen <vierkantor@vierkantor.com>

### [2021-12-09T21:51:35+00:00](https://github.com/leanprover-community/mathlib/commit/61dd343281403dc60e29c793d1d2ce011debac2c)
feat(probability_theory/martingale): define martingales ([#10625](https://github.com/leanprover-community/mathlib/pull/#10625))




Co-authored-by: RemyDegenne <remydegenne@gmail.com>

### [2021-12-09T19:38:25+00:00](https://github.com/leanprover-community/mathlib/commit/e618cfe3d4c22a395b1e5199c81c93cdadfb0b3d)
feat(topology/continuous_function/bounded): register instances of `star` structures ([#10570](https://github.com/leanprover-community/mathlib/pull/#10570))

Prove that the bounded continuous functions which take values in a normed C⋆-ring themselves form a C⋆-ring. Moreover, if the codomain is a normed algebra and a star module over a normed ⋆-ring, then so are the bounded continuous functions. Thus the bounded continuous functions form a C⋆-algebra when the codomain is a C⋆-algebra.

### [2021-12-09T17:18:51+00:00](https://github.com/leanprover-community/mathlib/commit/25386262a4582cf64940d46654dec5a067af32e4)
fix(tactic/ring): instantiate metavariables ([#10589](https://github.com/leanprover-community/mathlib/pull/#10589))

Fixes the issue reported in [#10572](https://github.com/leanprover-community/mathlib/pull/#10572).

- [x] depends on: [#10572](https://github.com/leanprover-community/mathlib/pull/#10572)

### [2021-12-09T16:26:29+00:00](https://github.com/leanprover-community/mathlib/commit/94783bef0877b1246cb709dc3bc17599abc585bf)
feat(algebra/algebra/spectrum): lemmas when scalars are a field ([#10476](https://github.com/leanprover-community/mathlib/pull/#10476))

Prove some properties of the spectrum when the underlying scalar ring
is a field, and mostly assuming the algebra is itself nontrivial.
Show that the spectrum of a scalar (i.e., `algebra_map 𝕜 A k`) is
the singleton `{k}`. Prove that `σ (a * b) \ {0} = σ (b * a) \ {0}`.

### [2021-12-09T14:52:57+00:00](https://github.com/leanprover-community/mathlib/commit/08215b55f595834ae0126dd7194404fc97409c7f)
feat(data/finsupp/basic): lemmas on the support of the `tsub` of `finsupp`s ([#10651](https://github.com/leanprover-community/mathlib/pull/#10651))

### [2021-12-09T14:52:56+00:00](https://github.com/leanprover-community/mathlib/commit/9ef122d25eed5860a57fc93eb5086969b52ffaab)
feat(measure_theory/integral/set_to_l1): properties of (dominated_)fin_meas_additive ([#10590](https://github.com/leanprover-community/mathlib/pull/#10590))

Various properties of `fin_meas_additive` and `dominated_fin_meas_additive` which will be useful to generalize results about integrals to `set_to_fun`.

### [2021-12-09T13:20:38+00:00](https://github.com/leanprover-community/mathlib/commit/c23b54c7f83a8fc87a06be376572e8474a35b7b6)
feat(group_theory/submonoid): The monoid_hom from a submonoid to its image. ([#10680](https://github.com/leanprover-community/mathlib/pull/#10680))

### [2021-12-09T13:20:36+00:00](https://github.com/leanprover-community/mathlib/commit/97e4468774ae63573ef8c1eaa5b6730f57fd5d6a)
feat(analysis/calculus/deriv): generalize some lemmas ([#10639](https://github.com/leanprover-community/mathlib/pull/#10639))

Generalize lemmas about the chain rule to work with different fields.

### [2021-12-09T11:18:26+00:00](https://github.com/leanprover-community/mathlib/commit/bfe595d379f0d1350594a1727fa754a869104b17)
feat(order/filter,topology/instances/real): lemmas about `at_top`, `at_bot`, and `cocompact` ([#10652](https://github.com/leanprover-community/mathlib/pull/#10652))

* prove `comap abs at_top = at_bot ⊔ at_top`;
* prove `comap coe at_top = at_top` and `comap coe at_bot = at_bot` for coercion from `ℕ`, `ℤ`, or `ℚ` to an archimedian semiring, ring, or field, respectively;
* prove `cocompact ℤ = at_bot ⊔ at_top` and `cocompact ℝ = at_bot ⊔ at_top`.

### [2021-12-09T09:57:14+00:00](https://github.com/leanprover-community/mathlib/commit/e3d9adf1b79881d8f6cfd0430732623d8b97edba)
chore(measure_theory/function/conditional_expectation): change condexp notation ([#10584](https://github.com/leanprover-community/mathlib/pull/#10584))

The previous definition and notation showed the `measurable_space` argument only through the other argument `m \le m0`, which tends to be replaced by `_` in the goal view if it becomes complicated.

### [2021-12-09T08:54:18+00:00](https://github.com/leanprover-community/mathlib/commit/70171ac4b09b4957339476715715d5fa72f39e6e)
feat(topology/instances/real_vector_space): add an `is_scalar_tower` instance ([#10490](https://github.com/leanprover-community/mathlib/pull/#10490))

There is at most one topological real vector space structure on a topological additive group, so `[is_scalar_tower real A E]` holds automatically as long as `A` is a topological real algebra and `E` is a topological module over `A`.

### [2021-12-09T07:29:46+00:00](https://github.com/leanprover-community/mathlib/commit/4efa9d8aa54a6f2f1c6d77144aa4406bc784072c)
chore(algebra/direct_limit): remove module.directed_system ([#10636](https://github.com/leanprover-community/mathlib/pull/#10636))

This typeclass duplicated `_root_.directed_system`

### [2021-12-09T05:38:21+00:00](https://github.com/leanprover-community/mathlib/commit/11bf7e5221bd60cd381acd48bd0fddd33e967e03)
feat(analysis/normed_space/weak_dual): add polar sets in preparation for Banach-Alaoglu theorem ([#9836](https://github.com/leanprover-community/mathlib/pull/#9836))

The first of two parts to add the Banach-Alaoglu theorem about the compactness of the closed unit ball (and more generally polar sets of neighborhoods of the origin) of the dual of a normed space in the weak-star topology.

This first half is about polar sets (for a set `s` in a normed space `E`, the `polar s` is the subset of `weak_dual _ E` consisting of the functionals that evaluate to something of norm at most one at all elements of `s`).



Co-authored-by: kkytola <39528102+kkytola@users.noreply.github.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-12-09T03:56:43+00:00](https://github.com/leanprover-community/mathlib/commit/fc3116f9760d4bf830e7940d10e4b91ba6acd999)
doc(data/nat/prime): fix links ([#10677](https://github.com/leanprover-community/mathlib/pull/#10677))

### [2021-12-09T03:56:42+00:00](https://github.com/leanprover-community/mathlib/commit/ab316732ac69850d6d380bea5fa5ce3d72b3c13a)
feat(data/finset/basic): val_le_iff_val_subset ([#10603](https://github.com/leanprover-community/mathlib/pull/#10603))

I'm not sure if we have something like this already on mathlib. The application of `val_le_of_val_subset` that I have in mind is to deduce

```
theorem polynomial.card_roots'' {F : Type u} [field F]{p : polynomial F}(h : p ≠ 0)
{Z : finset F} (hZ : ∀ z ∈ Z, polynomial.eval z p = 0) : Z.card ≤ p.nat_degree
```
from [polynomial.card_roots' ](https://github.com/leanprover-community/mathlib/blob/1376f53dacd3c3ccd3c345b6b8552cce96c5d0c8/src/data/polynomial/ring_division.lean#L318)

If this approach seems right, I will send the proof of `polynomial.card_roots''` in a follow up PR.



Co-authored-by: Iván Sadofschi Costa <isadofschi@users.noreply.github.com>

### [2021-12-09T01:13:05+00:00](https://github.com/leanprover-community/mathlib/commit/60c1d60ec0023cb505800d168c8065988b530693)
feat(data/mv_polynomial/basic)  induction_on'' ([#10621](https://github.com/leanprover-community/mathlib/pull/#10621))

A new flavor of `induction_on` which is useful when we do not have ` h_add : ∀p q, M p → M q → M (p + q)` but we have
```
h_add_weak : ∀ (a : σ →₀ ℕ) (b : R) (f : (σ →₀ ℕ) →₀ R),  a ∉ f.support → b ≠ 0 → M f → M (monomial a b + f)
```



Co-authored-by: Iván Sadofschi Costa <isadofschi@users.noreply.github.com>

### [2021-12-09T01:13:04+00:00](https://github.com/leanprover-community/mathlib/commit/e14dc11a8a44e0ede6a31275fd46c0b9a32dd286)
feat(data/int/basic): add `nat_abs_eq_nat_abs_iff_*` lemmas for nonnegative and nonpositive arguments ([#10611](https://github.com/leanprover-community/mathlib/pull/#10611))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-12-08T22:28:20+00:00](https://github.com/leanprover-community/mathlib/commit/baab5d3091555838751562e6caad33c844bea15e)
refactor(data/matrix): reverse the direction of `matrix.minor_mul_equiv` ([#10657](https://github.com/leanprover-community/mathlib/pull/#10657))

In [#10350](https://github.com/leanprover-community/mathlib/pull/#10350) this change was proposed, since we apparently use that backwards way more than we use it forwards.

We also change `reindex_linear_equiv_mul`, which is similarly much more popular backwards than forwards.

Closes: [#10638](https://github.com/leanprover-community/mathlib/pull/#10638)

### [2021-12-08T22:28:19+00:00](https://github.com/leanprover-community/mathlib/commit/2ea1fb68fe5cfa8a98fff2fb6970e09b742fd26d)
feat(data/list/range): fin_range_succ_eq_map ([#10654](https://github.com/leanprover-community/mathlib/pull/#10654))

### [2021-12-08T22:28:18+00:00](https://github.com/leanprover-community/mathlib/commit/fdb773a2ae3787c712ccbd50795e1d70d4be2213)
chore(algebra/tropical/basic): golf and clean ([#10633](https://github.com/leanprover-community/mathlib/pull/#10633))

### [2021-12-08T22:28:16+00:00](https://github.com/leanprover-community/mathlib/commit/bcd9a745bacf025dd08a26e8da08b9e3043bc89f)
refactor(data/complex/is_R_or_C): `finite_dimensional.proper_is_R_or_C` is not an `instance` anymore ([#10629](https://github.com/leanprover-community/mathlib/pull/#10629))

This instance caused a search for `[finite_dimensional ?x E]` with an unknown `?x`. Turn it into a lemma and add `haveI` to some proofs. Also add an instance for `K ∙ x`.

### [2021-12-08T22:28:15+00:00](https://github.com/leanprover-community/mathlib/commit/e289343a049e89a48fa9fa00b221c76460f9afae)
feat(algebra/graded_monoid): add lemmas about power and product membership ([#10627](https://github.com/leanprover-community/mathlib/pull/#10627))

This adds:
* `set_like.graded_monoid.pow_mem`
* `set_like.graded_monoid.list_prod_map_mem`
* `set_like.graded_monoid.list_prod_of_fn_mem`

It doesn't bother to add the multiset and finset versions for now, because these are not imported at this point, and require the ring to be commutative.

### [2021-12-08T18:44:55+00:00](https://github.com/leanprover-community/mathlib/commit/1d0bb8653cc2a281d19360f8b22039f709d490fd)
fix(data/finsupp/basic): add missing decidable arguments ([#10672](https://github.com/leanprover-community/mathlib/pull/#10672))

`finsupp` is classical, meaning that `def`s should just use noncomputable decidable instances rather than taking arguments that make more work for mathematicians.

However, this doesn't mean that lemma _statements_ should use noncomputable decidable instances, as this just makes the lemma less general and harder to apply (as shown by the `congr` removed elsewhere in the diff).

These were found by removing `open_locale classical` from the top of the file, adding `by classical; exact` to some definitions, and then fixing the broken lemma statements. In future we should detect this type of mistake with a linter.

### [2021-12-08T17:16:46+00:00](https://github.com/leanprover-community/mathlib/commit/2ce95ca882b8cbc45e9521b68b516e554cc34ed1)
refactor(data/finsupp): use `{f : α →₀ M | ∃ a b, f = single a b}` instead of union of ranges ([#10671](https://github.com/leanprover-community/mathlib/pull/#10671))

### [2021-12-08T17:16:44+00:00](https://github.com/leanprover-community/mathlib/commit/8ab1b3b4ab7cf09272fb660a029902574f439e12)
feat(measure_theory/probability_mass_function): Calculate supports of pmf constructions ([#10371](https://github.com/leanprover-community/mathlib/pull/#10371))

This PR gives explicit descriptions for the `support` of the various `pmf` constructions in mathlib. 

This also tries to clean up the variable declarations in the different sections, so that all the lemmas don't need to specify them explicitly.

### [2021-12-08T15:28:51+00:00](https://github.com/leanprover-community/mathlib/commit/678566f2197cc8c971a7ba1d26a525458490cb94)
feat(topology/algebra/group): Addition of interiors ([#10659](https://github.com/leanprover-community/mathlib/pull/#10659))

This proves `interior s * t ⊆ interior (s * t)`, a few prerequisites, and generalizes to `is_open.mul_left`/`is_open.mul_right`.

### [2021-12-08T13:44:00+00:00](https://github.com/leanprover-community/mathlib/commit/eedb906cfd169e56bfbaa5c51eed670b6c5742e4)
feat(measure_theory/integral): `∫ x in b..b+a, f x = ∫ x in c..c + a, f x` for a periodic `f` ([#10477](https://github.com/leanprover-community/mathlib/pull/#10477))

### [2021-12-08T05:53:32+00:00](https://github.com/leanprover-community/mathlib/commit/4d56716d2a687e74fcda17fe586325f67e756fef)
fix(data/finsupp/basic): add missing decidable argument ([#10649](https://github.com/leanprover-community/mathlib/pull/#10649))

While `finsupp.erase` is classical and requires no decidability, `finset.erase` is not so.

Without this argument, this lemma does not apply in the general case, and introduces mismatching decidable instances. With it, a `congr` is no longer needed elsewhere in mathlib.

### [2021-12-08T05:53:31+00:00](https://github.com/leanprover-community/mathlib/commit/e5ba338e9ae4e7feae5027fd5198850971f0fa6a)
fix(algebra/direct_sum): change `ring_hom_ext` to not duplicate `ring_hom_ext'` ([#10640](https://github.com/leanprover-community/mathlib/pull/#10640))

These two lemmas differed only in the explicitness of their binders.
The statement of the unprimed version has been changed to be fully applied.

This also renames `alg_hom_ext` to `alg_hom_ext'` to make way for the fully applied version. This is consistent with `direct_sum.add_hom_ext` vs `direct_sum.add_hom_ext'`.

### [2021-12-08T04:59:26+00:00](https://github.com/leanprover-community/mathlib/commit/b495fdfd8e8335391e98e2683929163b3939cf05)
feat(category_theory): Filtered colimits preserves finite limits in algebraic categories ([#10604](https://github.com/leanprover-community/mathlib/pull/#10604))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-08T03:50:05+00:00](https://github.com/leanprover-community/mathlib/commit/2bfa76841cc2fa48034fdc35f996dac46e0abef8)
feat(analysis/normed_space/operator_norm): module and norm instances on continuous semilinear maps ([#10494](https://github.com/leanprover-community/mathlib/pull/#10494))

This PR adds a module and a norm instance on continuous semilinear maps, generalizes most of the results in `operator_norm.lean` to the semilinear case. Many of these results require the ring homomorphism to be isometric, which is expressed via the new typeclass `[ring_hom_isometric σ]`.



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2021-12-08T02:36:46+00:00](https://github.com/leanprover-community/mathlib/commit/1a92bc9742949f33acd4b7706b2ba7bfd5b537ef)
chore(scripts): update nolints.txt ([#10662](https://github.com/leanprover-community/mathlib/pull/#10662))

I am happy to remove some nolints for you!

### [2021-12-07T21:13:01+00:00](https://github.com/leanprover-community/mathlib/commit/eaa9e8762ee921cac0b959ab129bb5eaa30aca24)
chore(measure_theory/integral/set_to_l1): change definition of dominated_fin_meas_additive ([#10585](https://github.com/leanprover-community/mathlib/pull/#10585))

Change the definition to check the property only on measurable sets with finite measure (like every other property in that file).
Also make some arguments of `set_to_fun` explicit to improve readability.

### [2021-12-07T19:16:26+00:00](https://github.com/leanprover-community/mathlib/commit/54aeec7436917a5ac3310383828fc6b760e5a584)
feat(topology/algebra/ordered/basic): Interior of `{x | f x ≤ g x}` ([#10653](https://github.com/leanprover-community/mathlib/pull/#10653))

and golf the dual one: `closure_lt_subset_le`

### [2021-12-07T18:28:16+00:00](https://github.com/leanprover-community/mathlib/commit/a803e21dc890c05d9871638d6181b2a57a7f36da)
feat(measure_theory/lattice): define typeclasses for measurability of lattice operations, define a lattice on ae_eq_fun ([#10591](https://github.com/leanprover-community/mathlib/pull/#10591))

As was previously done for measurability of arithmetic operations, I define typeclasses for the measurability of sup and inf in a lattice. In the borel_space file, instances of these are provided when the lattice operations are continuous.
Finally I've put a lattice structure on `ae_eq_fun`.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-12-07T15:39:30+00:00](https://github.com/leanprover-community/mathlib/commit/ae7a88d1bf0fbd4978e6e0d20000a25712b94284)
feat(field_theory/finite/basic): generalize lemma from field to integral domain ([#10655](https://github.com/leanprover-community/mathlib/pull/#10655))

### [2021-12-07T15:39:28+00:00](https://github.com/leanprover-community/mathlib/commit/9a2c29988d0e1ec851203e335b1f274133b22a14)
feat(data/pi): add `pi.single_inj` ([#10644](https://github.com/leanprover-community/mathlib/pull/#10644))

### [2021-12-07T15:39:27+00:00](https://github.com/leanprover-community/mathlib/commit/03dd404ad9928d2bdc5a04203ed770a6593bf499)
feat(algebra/category): (co)limits in CommRing ([#10593](https://github.com/leanprover-community/mathlib/pull/#10593))



Co-authored-by: erd1 <the.erd.one@gmail.com>

### [2021-12-07T14:45:55+00:00](https://github.com/leanprover-community/mathlib/commit/173a21ab2cea3618e2b08a17cbaaf75ebe9f3f82)
feat(topology/sheaves): `F(U ⨿ V) = F(U) × F(V)` ([#10597](https://github.com/leanprover-community/mathlib/pull/#10597))




Co-authored-by: erd1 <the.erd.one@gmail.com>

### [2021-12-07T06:39:50+00:00](https://github.com/leanprover-community/mathlib/commit/ba1cbfac3e0f2123bfa7fc13c7abcf0ff8002e4d)
feat(topology/algebra/ordered/basic): Add alternative formulations of four lemmas. ([#10630](https://github.com/leanprover-community/mathlib/pull/#10630))

Add alternative formulations of lemmas about interiors and frontiers of `Iic` and `Ici`. The existing formulations make typeclass assumptions `[no_top_order]` or `[no_bot_order]`. These alternative formulations assume instead that the endpoint of the interval is not top or bottom; and as such they can be applied in, e.g., `nnreal` and `ennreal`.

Also, some lemmas now assume `(Ioi a).nonempty` or `(Iio a).nonempty` instead of `{b} (h : a < b)` or `{b} (h : b < a)`, respectively.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-12-07T00:26:04+00:00](https://github.com/leanprover-community/mathlib/commit/90319890de58e00f5cfad220f8c8f4cfb84f8f83)
chore(*): fix last line length and notation style linter errors ([#10642](https://github.com/leanprover-community/mathlib/pull/#10642))

These are the last non-module doc style linter errors (from https://github.com/leanprover-community/mathlib/blob/master/scripts/style-exceptions.txt).



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2021-12-07T00:26:03+00:00](https://github.com/leanprover-community/mathlib/commit/cd857f77effdf723dd6438587287a074e9fbaf3b)
feat(data/int/basic): four lemmas about integer divisibility ([#10602](https://github.com/leanprover-community/mathlib/pull/#10602))

Theorem 1.1, parts (c), (i), (j), and (k) of Apostol (1976) Introduction to Analytic Number Theory

### [2021-12-06T22:38:00+00:00](https://github.com/leanprover-community/mathlib/commit/eec4b70c93319a2ef12fe98052acaef72c540d6d)
feat(algebra/geom_sum): criteria for 0 < geom_sum ([#10567](https://github.com/leanprover-community/mathlib/pull/#10567))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-06T21:05:46+00:00](https://github.com/leanprover-community/mathlib/commit/a8c086fe2de3c950a50932c953aa9a1d44543391)
feat(linear_algebra/determinant): linear_equiv.det_mul_det_symm ([#10635](https://github.com/leanprover-community/mathlib/pull/#10635))

Add lemmas that the determinants of a `linear_equiv` and its
inverse multiply to 1.  There are a few other lemmas involving
determinants and `linear_equiv`, but apparently not this one.

### [2021-12-06T19:23:02+00:00](https://github.com/leanprover-community/mathlib/commit/1d5202ae5ea8dd8b36abec3c563f51433dbf9f4b)
feat(data/multiset): add some lemmas about filter (eq x) ([#10626](https://github.com/leanprover-community/mathlib/pull/#10626))




Co-authored-by: Eric <wieser.eric@gmail.com>

### [2021-12-06T14:45:34+00:00](https://github.com/leanprover-community/mathlib/commit/812431404d4669d4e055e2a790e964068ba5ac92)
feat(linear_algebra/multilinear/basic,linear_algebra/alternating): comp_linear_map lemmas ([#10631](https://github.com/leanprover-community/mathlib/pull/#10631))

Add more lemmas about composing multilinear and alternating maps with
linear maps in each argument.

Where I wanted a lemma for either of multilinear or alternating maps,
I added it for both.  There are however some lemmas for
`alternating_map.comp_linear_map` that don't have equivalents at
present for `multilinear_map.comp_linear_map` (I added one such
equivalent `multilinear_map.zero_comp_linear_map` because I needed it
for another lemma, but didn't try adding such equivalents of existing
lemmas where I didn't need them).

### [2021-12-06T13:25:54+00:00](https://github.com/leanprover-community/mathlib/commit/f50984d8a20a8a3d65c5c67423699f11fda2d41c)
chore(linear_algebra/affine_space/basis): remove unhelpful coercion ([#10637](https://github.com/leanprover-community/mathlib/pull/#10637))

It is more useful to have a statement of equality of linear maps than
of raw functions.

### [2021-12-06T06:48:34+00:00](https://github.com/leanprover-community/mathlib/commit/e6ad0f29b51f877842a5223bccb9fe2d46731d53)
chore(analysis/inner_product/projections): generalize some lemmas ([#10608](https://github.com/leanprover-community/mathlib/pull/#10608))

* generalize a few lemmas from `[finite_dimensional 𝕜 ?x]` to `[complete_space ?x]`;
* drop unneeded TC assumption in `isometry.tendsto_nhds_iff`;
* image of a complete set/submodule under an isometry is a complete set/submodule.

### [2021-12-06T05:02:03+00:00](https://github.com/leanprover-community/mathlib/commit/e726945e8e56042dc275b99382172b09d88f896e)
refactor(order/atoms): is_simple_order from is_simple_lattice ([#10537](https://github.com/leanprover-community/mathlib/pull/#10537))

Rename `is_simple_lattice` to `is_simple_order`, still stating that every element is either `bot` or `top` are, and that it is nontrivial.
To state `is_simple_order`, `has_le` and `bounded_order` are required to be defined. This allows for an order where `⊤ ≤ ⊥` (the always true order). 
Many proofs/statements about `is_simple_order`s have been generalized to require solely `partial_order` and not `lattice`. The statements themselves have not been changed. 
The `is_simple_order.distrib_lattice` instance has been downgraded into a `def` to prevent loops.
Helper defs have been added like `is_simple_order.preorder` (which is true given the `has_le` `bounded_order` axioms) `is_simple_order.linear_order`, and `is_simple_order.lattice` (which are true when `partial_order`, implying `⊥ < ⊤`.). 



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-12-05T19:54:45+00:00](https://github.com/leanprover-community/mathlib/commit/e7bd49f210becdb8eec70d554ba6e67f45951dbf)
chore(scripts/mk_all.sh): allow 'mk_all.sh ../test' ([#10628](https://github.com/leanprover-community/mathlib/pull/#10628))

Helpful for mathport CI, cf https://github.com/leanprover-community/mathport/pull/64



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-12-05T18:05:59+00:00](https://github.com/leanprover-community/mathlib/commit/2b2d1167e0745ad4b3dce30fd9a229861758e1ac)
chore(combinatorics/simple_graph/coloring): remove extra asterisk ([#10618](https://github.com/leanprover-community/mathlib/pull/#10618))

### [2021-12-05T16:33:11+00:00](https://github.com/leanprover-community/mathlib/commit/8c1f2b5d38f1651585fb5908403ecd1223610939)
feat(ring_theory/graded_algebra): projection map of graded algebra ([#10116](https://github.com/leanprover-community/mathlib/pull/#10116))

This pr defines and proves some property about `graded_algebra.proj : A →ₗ[R] A`



Co-authored-by: jjaassoonn <jujian.zhang1998@out.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-12-05T11:46:50+00:00](https://github.com/leanprover-community/mathlib/commit/428b9e555ce04b5542fb6668372325fad8543065)
feat(topology/continuous_function/bounded): continuous bounded real-valued functions form a normed vector lattice ([#10322](https://github.com/leanprover-community/mathlib/pull/#10322))

feat(topology/continuous_function/bounded): continuous bounded real-valued functions form a normed vector lattice



Co-authored-by: Christopher Hoskin <mans0954@users.noreply.github.com>

### [2021-12-05T03:46:59+00:00](https://github.com/leanprover-community/mathlib/commit/37f343cfbadc060c84aebf1d6fbbd9a44890c083)
chore(data/stream): merge `basic` into `init` ([#10617](https://github.com/leanprover-community/mathlib/pull/#10617))

### [2021-12-04T15:25:01+00:00](https://github.com/leanprover-community/mathlib/commit/6eeb54e6f5bf8b2f9894582792bc2b652daf2526)
fix(topology/algebra/uniform_field): remove unnecessary topological_r… ([#10614](https://github.com/leanprover-community/mathlib/pull/#10614))

…ing variable

Right now the last three definitions in `topology.algebra.uniform_field` (after line 115) have `[topological_division_ring K]` and `[topological_ring K]`. For example

```
mul_hat_inv_cancel :
  ∀ {K : Type u_1} [_inst_1 : field K] [_inst_2 : uniform_space K] [_inst_3 : topological_division_ring K]
  [_inst_4 : completable_top_field K] [_inst_5 : uniform_add_group K] [_inst_6 : topological_ring K]
  {x : uniform_space.completion K}, x ≠ 0 → x * hat_inv x = 1
```

Whilst it is not obvious from the notation, both of these are `Prop`s so there is no danger of diamonds. The full logic is: `field` and `uniform_space` are data, and the rest are Props (so should be called things like `is_topological_ring` etc IMO). `topological_division_ring` is the assertion of continuity of `add`, `neg`, `mul` and `inv` (away from 0), `completable_top_field` is another assertion about how inversion plays well with the topology (and which is not implied by `topological_division_ring`), `uniform_add_group` is the assertion about `add` and `neg` playing well with the uniform structure, and then `topological_ring` is a prop which is implied by `topological_division_ring`. I am not sure I see the benefits of carrying around the extra `topological_ring` for these three definitions so I've removed it to see if mathlib still compiles. Edit: it does.

### [2021-12-04T15:25:00+00:00](https://github.com/leanprover-community/mathlib/commit/c940e4743fa0f04e44fc19a304272613abb80f75)
chore(topology/continuous_function): remove forget_boundedness ([#10612](https://github.com/leanprover-community/mathlib/pull/#10612))

It is the same as `to_continuous_map`.

### [2021-12-04T13:36:16+00:00](https://github.com/leanprover-community/mathlib/commit/b3b7fe672c0154d381bfea447b579d7b6f7f9fc4)
chore(algebra/module): generalize `char_zero.of_algebra` to `char_zero.of_module` ([#10609](https://github.com/leanprover-community/mathlib/pull/#10609))

### [2021-12-04T08:58:37+00:00](https://github.com/leanprover-community/mathlib/commit/5d0e65aa982aaab8b3e542c3136b20d00ecc6db3)
chore(order/galois_connection): upgrade `is_glb_l` to `is_least_l` ([#10606](https://github.com/leanprover-community/mathlib/pull/#10606))

* upgrade `galois_connection.is_glb_l` to `galois_connection.is_least_l`;
* upgrade `galois_connection.is_lub_l` to `galois_connection.is_greatest_l`.

### [2021-12-04T07:14:54+00:00](https://github.com/leanprover-community/mathlib/commit/3479b7f1ddb1987184196679518cbaae979e5efc)
chore(order/complete_lattice): golf a proof ([#10607](https://github.com/leanprover-community/mathlib/pull/#10607))

Also reformulate `le_Sup_iff` in terms of `upper_bounds`.

### [2021-12-04T05:05:06+00:00](https://github.com/leanprover-community/mathlib/commit/9c4e41aea85ee16790b16e6da0acf3a65d9771e3)
feat(number_theory/modular): the action of `SL(2, ℤ)` on the upper half plane ([#8611](https://github.com/leanprover-community/mathlib/pull/#8611))

We define the action of `SL(2,ℤ)` on `ℍ` (via restriction of the `SL(2,ℝ)` action in `analysis.complex.upper_half_plane`). We then define the standard fundamental domain `𝒟` for this action and show that any point in `ℍ` can be moved inside `𝒟`.

Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored-by: Marc Masdeu <marc.masdeu@gmail.com>



Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored-by: Marc Masdeu <marc.masdeu@gmail.com>

### [2021-12-04T03:25:04+00:00](https://github.com/leanprover-community/mathlib/commit/2da25ede75d49d0c121d4c078d84609a026fee0f)
feat(combinatorics/simple_graph): Graph coloring and partitions ([#10287](https://github.com/leanprover-community/mathlib/pull/#10287))




Co-authored-by: Kyle Miller <kmill31415@gmail.com>

### [2021-12-04T01:52:50+00:00](https://github.com/leanprover-community/mathlib/commit/ef3540a9b942cb0c94a15eb390a1a34fb8e084e7)
chore(measure_theory/function/conditional_expectation): golf condexp_L1 proofs using set_to_fun lemmas ([#10592](https://github.com/leanprover-community/mathlib/pull/#10592))

### [2021-12-04T01:52:49+00:00](https://github.com/leanprover-community/mathlib/commit/23dfe700e4ea137eae6e808538971a90cd2a08d1)
feat(*): `A ⧸ B` notation for quotients in algebra ([#10501](https://github.com/leanprover-community/mathlib/pull/#10501))

We introduce a class `has_quotient` that provides `⧸` (U+29F8 BIG SOLIDUS) notation for quotients, e.g. if `H : subgroup G` then `quotient_group.quotient H` is now written as `G ⧸ H`. Thanks to @jcommelin for suggesting the initial design.

Zulip thread: https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Notation.20for.20group.28module.2Cideal.29.20quotients



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-12-04T00:14:36+00:00](https://github.com/leanprover-community/mathlib/commit/0bd9b6a330b93fd0332387bec856ca7f0f3d39ff)
feat(group_theory/order_of_element): order of a product of elements ([#10399](https://github.com/leanprover-community/mathlib/pull/#10399))

The lemma is: If `x` and `y` are commuting elements of coprime orders, then the order of `x * y` is the product of the orders of `x` and `y`. This also gives a version for the minimal period in dynamics from which the algebraic statement is derived.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-12-03T20:46:31+00:00](https://github.com/leanprover-community/mathlib/commit/1376f53dacd3c3ccd3c345b6b8552cce96c5d0c8)
feat(analysis.normed_space.lattice_ordered_group): Add `two_inf_sub_two_inf_le`, `two_sup_sub_two_sup_le` and supporting lemmas ([#10514](https://github.com/leanprover-community/mathlib/pull/#10514))

feat(analysis.normed_space.lattice_ordered_group): Add `two_inf_sub_two_inf_le`, `two_sup_sub_two_sup_le` and supporting lemmas



Co-authored-by: Christopher Hoskin <mans0954@users.noreply.github.com>

### [2021-12-03T19:27:08+00:00](https://github.com/leanprover-community/mathlib/commit/cd2230b4e016e0e0eb17955fd46245b814f016f4)
chore(data/nat/prime): golf some proofs ([#10599](https://github.com/leanprover-community/mathlib/pull/#10599))

### [2021-12-03T19:27:05+00:00](https://github.com/leanprover-community/mathlib/commit/bddc16a54a02e547d1c941045d14562f9f60dd31)
fix(tactic/abel): handle smul on groups ([#10587](https://github.com/leanprover-community/mathlib/pull/#10587))

The issue was that `abel` expects to see only `smulg` used for groups and only `smul` for monoids, but you can also use `smul` on groups so we have to normalize that away.

fixes [#8456](https://github.com/leanprover-community/mathlib/pull/#8456)

### [2021-12-03T17:46:34+00:00](https://github.com/leanprover-community/mathlib/commit/46e9a235abda1c0af48a0fd57f5b6331d5ebe130)
feat(probability_theory/stopping): generalize a lemma ([#10598](https://github.com/leanprover-community/mathlib/pull/#10598))

### [2021-12-03T17:46:33+00:00](https://github.com/leanprover-community/mathlib/commit/1e8974586a76fa3ad96fb87e85edec01eb6daa2c)
feat(data/finset/lattice): add sup_eq_bot_iff and inf_eq_top_iff ([#10596](https://github.com/leanprover-community/mathlib/pull/#10596))

From flt-regular.

### [2021-12-03T17:46:32+00:00](https://github.com/leanprover-community/mathlib/commit/92fafba2d13e474fbd1087192dd0a6feac022f5b)
feat(data/(mv_)polynomial): add aeval_prod and aeval_sum for (mv_)polynomial ([#10594](https://github.com/leanprover-community/mathlib/pull/#10594))

Another couple of small polynomial helper lemmas from flt-regular.

### [2021-12-03T17:46:31+00:00](https://github.com/leanprover-community/mathlib/commit/4de07731a6e0180e4634d7683f1e8e6f94ab4f65)
feat(category_theory/limits): Strict terminal objects. ([#10582](https://github.com/leanprover-community/mathlib/pull/#10582))

### [2021-12-03T17:46:29+00:00](https://github.com/leanprover-community/mathlib/commit/d45708fca5d5fc6de7b8be759368cb4223c8fe93)
feat(topology/sheaves): The empty component of a sheaf is terminal ([#10578](https://github.com/leanprover-community/mathlib/pull/#10578))

### [2021-12-03T16:11:45+00:00](https://github.com/leanprover-community/mathlib/commit/1e18e93d9cd3fb37da9b048463c1cba519e835cd)
chore(algebra/lattice_ordered_group): review (names, spaces, golf...) ([#10595](https://github.com/leanprover-community/mathlib/pull/#10595))

This is a review of `algebra/lattice_ordered_group` and `analysis/normed_space/lattice_ordered_group`:
- delete or add spaces at many places
- add brackets around goals
- replace `apply` by `exact` when closing a goal
- change many names to better fit the naming convention
- cut some big proofs into several lemmas
- add a few `simp` attributes
- remove a non-terminal simp
- golf
- add some simple API lemmas

I did not do anything about the docstrings of the lemmas. Some of them don't interact correctly with `to_additive` (the additive comment is shown for the multiplicative lemma in the doc, for example).

### [2021-12-03T16:11:43+00:00](https://github.com/leanprover-community/mathlib/commit/a7b4018a07b95a79153b4767f641bf601198d26d)
fix(tactic/ring): bugfixes in ring_nf ([#10572](https://github.com/leanprover-community/mathlib/pull/#10572))

As reported by @hrmacbeth:
https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60ring_nf.60.20behaves.20strangely.20with.20def.20in.20original.20goal





Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2021-12-03T16:11:41+00:00](https://github.com/leanprover-community/mathlib/commit/df9316643c67d238166364c7e62d6c4ef76056fa)
feat(algebraic_geometry): Explicit description of the colimit of presheafed spaces. ([#10466](https://github.com/leanprover-community/mathlib/pull/#10466))



Co-authored-by: erd1 <the.erd.one@gmail.com>

### [2021-12-03T16:11:40+00:00](https://github.com/leanprover-community/mathlib/commit/b7ed03f98ec16279cc5a442521764ae772bd47a7)
feat(algebraic_geometry): Open immersions of presheafed spaces ([#10437](https://github.com/leanprover-community/mathlib/pull/#10437))



Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-03T16:11:38+00:00](https://github.com/leanprover-community/mathlib/commit/2f44ac8ffb7188d318d1611f68289fb1c19c57ea)
feat(algebra/monoid_algebra/grading): internal graded structure for an arbitrary degree function ([#10435](https://github.com/leanprover-community/mathlib/pull/#10435))

This gives an internal graded structure of an additive monoid algebra for the grading given by an arbitrary degree function. The grading in the original file is redefined as the grading for the identity degree function.

### [2021-12-03T16:11:37+00:00](https://github.com/leanprover-community/mathlib/commit/f0a1cd1a1e4ac98f6fd6739048233c5cd6b0e78c)
feat(category_theory/*): Representably flat functors ([#9519](https://github.com/leanprover-community/mathlib/pull/#9519))

Defined representably flat functors as functors `F : C ⥤ D` such that `(X/F)` is cofiltered for each `X : C`.
- Proved that if `C` has all finite limits and `F` preserves them, then `F` is flat.
- Proved that flat functors preserves finite limits.
In particular, if `C` is finitely complete, then flat iff left exact.
- Proved that if `C, D` are small, then `F` flat implies `Lan F.op` preserves finite limits implies `F` preserves finite limits.
In particular, if `C` is finitely cocomplete, then flat iff `Lan F.op` is left exact.



Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-12-03T14:32:19+00:00](https://github.com/leanprover-community/mathlib/commit/8bb26a72a8cf761aedf0483724a950ca1bac2189)
chore(*): protect `to_fun` and `map_{add,zero,mul,one,div}` ([#10580](https://github.com/leanprover-community/mathlib/pull/#10580))

This PR prepares for [#9888](https://github.com/leanprover-community/mathlib/pull/#9888) by namespacing all usages of `to_fun` and `map_{add,zero,mul,one,div}` that do not involve the classes of [#9888](https://github.com/leanprover-community/mathlib/pull/#9888). This includes e.g. `polynomial.map_add` and `multiset.map_add`, which involve `polynomial.map` and `multiset.map` respectively.

### [2021-12-03T14:32:17+00:00](https://github.com/leanprover-community/mathlib/commit/235e5839dfeedcd872862c5af64cfedf8218d6ed)
feat(topology/metric_space/hausdorff_distance): add definition and lemmas about closed thickenings of subsets ([#10542](https://github.com/leanprover-community/mathlib/pull/#10542))

Add definition and basic API about closed thickenings of subsets in metric spaces, in preparation for the portmanteau theorem on characterizations of weak convergence of Borel probability measures.



Co-authored-by: kkytola <39528102+kkytola@users.noreply.github.com>

### [2021-12-03T12:40:48+00:00](https://github.com/leanprover-community/mathlib/commit/65335003d79b1ebe9edc0e60bfe4981a959715a3)
feat(data/mv_polynomial): add total_degree_add_of_total_degree_lt ([#10571](https://github.com/leanprover-community/mathlib/pull/#10571))

A helpful lemma to compute total degrees from flt-regular.

### [2021-12-03T12:40:47+00:00](https://github.com/leanprover-community/mathlib/commit/672e2b20026ef7e98a98b1b4c78391021af655a1)
feat(src/algebra/gcd_monoid,src/ring_theory): add some exists_associated_pow_of_mul_eq_pow variants ([#10560](https://github.com/leanprover-community/mathlib/pull/#10560))

### [2021-12-03T12:40:46+00:00](https://github.com/leanprover-community/mathlib/commit/89697a24fef0245e718e5ea95c7d758e33c6964d)
feat(data/fintype/order): complete order instances for fintype ([#7123](https://github.com/leanprover-community/mathlib/pull/#7123))

This PR adds several instances (as defs) for fintypes:
* `order_bot` from `semilattice_inf`, `order_top` from `semilattice_sup`, `bounded_order` from `lattice`.
* `complete_lattice` from `lattice`.
* `complete_linear_order` from `linear_order`.

We use this last one to give a `complete_linear_order` instance for `fin (n + 1)` .



Co-authored-by: Peter Nelson <apnelson@uwaterloo.ca>
Co-authored-by: Peter Nelson <71660771+apnelson1@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2021-12-03T10:55:10+00:00](https://github.com/leanprover-community/mathlib/commit/e0c27fe41bee7fcbd87759ace37da3f6900c4416)
feat(order/bounded_order): a few more `simp` lemmas ([#10533](https://github.com/leanprover-community/mathlib/pull/#10533))

Inspired by [#10486](https://github.com/leanprover-community/mathlib/pull/#10486)



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-03T10:55:09+00:00](https://github.com/leanprover-community/mathlib/commit/970f0746106a0fa57f58354a618b950ef3004abf)
feat(analysis/convex/star): Star-convex sets ([#10524](https://github.com/leanprover-community/mathlib/pull/#10524))

This defines `star_convex 𝕜 x s` to mean that a set is star-convex (aka star-shaped, radially convex, or a star domain) at `x`. This means that every segment from `x` to a point in `s` is a subset of `s`.

### [2021-12-03T10:55:08+00:00](https://github.com/leanprover-community/mathlib/commit/44b649cabf1212c8c2361e326d5e0479226e8edc)
doc(algebra.lattice_ordered_group): Remove verbose docstrings ([#10468](https://github.com/leanprover-community/mathlib/pull/#10468))

doc(algebra.lattice_ordered_group): Remove verbose docstrings

### [2021-12-03T08:57:31+00:00](https://github.com/leanprover-community/mathlib/commit/2648e68535e5eee687d3bff54df1b5ad20bae5e1)
chore(int/*): dedup lemma ([#10583](https://github.com/leanprover-community/mathlib/pull/#10583))

### [2021-12-03T08:57:30+00:00](https://github.com/leanprover-community/mathlib/commit/0453320a5f80e64f89d8fa8a3aad852dd3cb2136)
feat(category_theory/limits): The product is the pullback over the terminal objects. ([#10581](https://github.com/leanprover-community/mathlib/pull/#10581))

### [2021-12-03T08:57:28+00:00](https://github.com/leanprover-community/mathlib/commit/bfccd1b8ff105cb7de6a627f4a98303d0f0eb42c)
chore(topology/{metric_space,instances/real}): cleanup ([#10577](https://github.com/leanprover-community/mathlib/pull/#10577))

* merge `real.ball_eq` and `real.ball_eq_Ioo` into `real.ball_eq_Ioo`;
* merge `real.closed_ball_eq` and `real.closed_ball_eq_Icc` into `real.closed_ball_eq_Icc`;
* add missing `real.Icc_eq_closed_ball`;
* generalize lemmas about `*bounded_Ixx` so that they work for (indexed) products of conditionally complete linear orders.

### [2021-12-03T08:57:27+00:00](https://github.com/leanprover-community/mathlib/commit/158263c16cec289f9c7ea6c449ab0ac115208721)
feat(ring_theory): Nilradical and reduced ring ([#10576](https://github.com/leanprover-community/mathlib/pull/#10576))



Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-03T08:57:26+00:00](https://github.com/leanprover-community/mathlib/commit/c176aa5d74d6a8321faeaf29d864f25d2eac81ca)
refactor(data/stream): swap args of `stream.nth` ([#10559](https://github.com/leanprover-community/mathlib/pull/#10559))

This way it agrees with (a) `list.nth`; (b) a possible redefinition

```lean
structure stream (α : Type*) := (nth : nat → α)
```

### [2021-12-03T08:57:25+00:00](https://github.com/leanprover-community/mathlib/commit/55b64b615dda7f96440962d851922da621ca4f9c)
chore(group_theory/*): additivise! ([#10557](https://github.com/leanprover-community/mathlib/pull/#10557))

### [2021-12-03T08:57:23+00:00](https://github.com/leanprover-community/mathlib/commit/56c9cab5e2237a765963540a9e9bbf16c7a0c27f)
feat(data/sigma{lex,order}): Lexicographic and disjoint orders on a sigma type ([#10552](https://github.com/leanprover-community/mathlib/pull/#10552))

This defines the two natural order on a sigma type: the one where we just juxtapose the summands with their respective order, and the one where we also add in an order between summands.

### [2021-12-03T08:57:22+00:00](https://github.com/leanprover-community/mathlib/commit/d62b5178118fdba8b3ac97a178f8bb00f939b73d)
feat(category_theory/limits): Walking parallel pair equiv to its op. ([#10516](https://github.com/leanprover-community/mathlib/pull/#10516))




Co-authored-by: erdOne <the.erd.one@gmail.com>

### [2021-12-03T08:57:21+00:00](https://github.com/leanprover-community/mathlib/commit/c151a121083593390dc3c9636c316623cbcfa0af)
feat(algebra/gcd_monoid/*): assorted lemmas ([#10508](https://github.com/leanprover-community/mathlib/pull/#10508))

From flt-regular.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-03T08:57:20+00:00](https://github.com/leanprover-community/mathlib/commit/c093d04d822cdeb9bac7f645f4103e07c27a6250)
feat(data/nat/basic): Monotonicity of `nat.find_greatest` ([#10507](https://github.com/leanprover-community/mathlib/pull/#10507))

This proves that `nat.find_greatest` is monotone in both arguments.

### [2021-12-03T08:57:19+00:00](https://github.com/leanprover-community/mathlib/commit/00e9e90a944433beb6f8eb23fd12662e88a9f645)
feat(topology/urysohns_bounded): +2 versions of Urysohn's lemma ([#10479](https://github.com/leanprover-community/mathlib/pull/#10479))

### [2021-12-03T07:10:46+00:00](https://github.com/leanprover-community/mathlib/commit/403d9c0eb776ca0b43253d2c5264013946096ae8)
feat(category_theory/adjunction): Added simp lemmas for `left_adjoint_uniq` and `right_adjoint_uniq` ([#10551](https://github.com/leanprover-community/mathlib/pull/#10551))

### [2021-12-03T07:10:45+00:00](https://github.com/leanprover-community/mathlib/commit/30185dca0c1bc92da89cd5d42a599234083d8f31)
feat(topology/algebra/group): group topologies on a given group form a complete lattice ([#10531](https://github.com/leanprover-community/mathlib/pull/#10531))

### [2021-12-03T07:10:44+00:00](https://github.com/leanprover-community/mathlib/commit/cfecf72099450e623ab56894c640b7b9c9291764)
feat(algebra/module): push forward the action of `R` on `M` along `f : R → S` ([#10502](https://github.com/leanprover-community/mathlib/pull/#10502))

If `f : R →+* S` is compatible with the `R`-module structure on `M`, and the scalar action of `S` on `M`, then `M` gets an `S`-module structure too. Additionally, if `R` is a ring and the kernel of `f` acts on `M` by sending it to `0`, then we don't need to specify the scalar action of `S` on `M` (but it is still possible for defeq purposes).

These definitions should allow you to turn an action of `R` on `M` into an action of `R/I` on `M/N` via the (previously defined) action of `R` on `M/N`.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-12-03T07:10:43+00:00](https://github.com/leanprover-community/mathlib/commit/461051aecb447a5fca313fb135808b6f1cdc41c6)
feat(algebraic_geometry): Localization map is an embedding. ([#10471](https://github.com/leanprover-community/mathlib/pull/#10471))

### [2021-12-03T07:10:41+00:00](https://github.com/leanprover-community/mathlib/commit/6bd6b45e0b5255daa13a788f86e73e100dcec08c)
feat(algebraic_geometry): Isomorphisms of presheafed space. ([#10461](https://github.com/leanprover-community/mathlib/pull/#10461))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-03T07:10:40+00:00](https://github.com/leanprover-community/mathlib/commit/f8f28da0f12c419ef35469c331c54b76ead0d644)
feat(linear_algebra/orientation): orientations of modules and rays in modules ([#10306](https://github.com/leanprover-community/mathlib/pull/#10306))

Define orientations of modules, along the lines of a definition
suggested by @hrmacbeth: equivalence classes of nonzero alternating
maps.  See:
https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/adding.20angles/near/243856522

Rays are defined in an arbitrary module over an
`ordered_comm_semiring`, then orientations are considered as the case
of rays for the space of alternating maps.  That definition uses an
arbitrary index type; the motivating use case is where this has the
cardinality of a basis (two-dimensional use cases will use an index
type that is definitionally `fin 2`, for example).

The motivating use case is over the reals, but the definitions and
lemmas are for `ordered_comm_semiring`, `ordered_comm_ring`,
`linear_ordered_comm_ring` or `linear_ordered_field` as appropriate (a
`nontrivial` `ordered_comm_semiring` looks like it's the weakest case
for which much useful can be done with this definition).

Given an intended use case (oriented angles for Euclidean geometry)
where it will make sense for many proofs (and notation) to fix a
choice of orientation throughout, there is also a `module.oriented`
type class so the choice of orientation can be implicit in such proofs
and the lemmas they use.  However, nothing yet makes use of the type
class; everything so far is for explicit rays or orientations.

I expect more definitions and lemmas about orientations will need
adding to make much use of orientations.  In particular, I expect to
need to add more about orientations in relation to bases
(e.g. extracting a basis that gives a given orientation, in positive
dimension).

### [2021-12-03T07:10:39+00:00](https://github.com/leanprover-community/mathlib/commit/2bb627fc2e13d8d9d5e544ba8de5f82a848cb1fc)
feat(analysis/convex/[basic, topology]): generalize path connectedness of convex sets to topological real vector spaces ([#10011](https://github.com/leanprover-community/mathlib/pull/#10011))

### [2021-12-03T06:35:10+00:00](https://github.com/leanprover-community/mathlib/commit/8915dc8e13ee08c7d2e69d6bb400b9287791aa09)
feat(ring_theory/polynomial/cyclotomic): `is_root_cyclotomic_iff` ([#10422](https://github.com/leanprover-community/mathlib/pull/#10422))

From the flt-regular project.



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-12-03T05:24:46+00:00](https://github.com/leanprover-community/mathlib/commit/6f745cd2d31b8541eb81c83a127b8953635ceb2d)
feat(category_theory/limits): Lemmas about preserving pullbacks ([#10438](https://github.com/leanprover-community/mathlib/pull/#10438))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-02T23:23:50+00:00](https://github.com/leanprover-community/mathlib/commit/c791747db0de552239b06124e39010b24cc5801c)
feat(algebra/tropical/basic): various API ([#10487](https://github.com/leanprover-community/mathlib/pull/#10487))

Generalize some order instance to just require `has_le` of the base `R`.
`(un)trop_monotone`
`trop_(min|inf)`
iffs between addition and order
`tropical.add_comm_monoid` (in parallel to [#10486](https://github.com/leanprover-community/mathlib/pull/#10486))
`(co|contra)variant` instances





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-12-02T22:04:36+00:00](https://github.com/leanprover-community/mathlib/commit/ac767452ab58fca836e3028499d680dd45963ce1)
feat(data/finsupp/basic): add `finsupp.prod_congr` and `sum_congr` ([#10568](https://github.com/leanprover-community/mathlib/pull/#10568))

These are the counterparts for `finsupp` of a simpler form of `finset.prod_congr`

### [2021-12-02T20:44:25+00:00](https://github.com/leanprover-community/mathlib/commit/42d3cbc350aea035e434da5652189e441c245bc2)
feat(data/finsupp/basic): add `nat.cast_finsupp_prod` and 3 others ([#10579](https://github.com/leanprover-community/mathlib/pull/#10579))

Add counterparts for `finsupp` of `nat.cast_prod` etc., as discussed in this thread https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/push_cast

### [2021-12-02T19:28:48+00:00](https://github.com/leanprover-community/mathlib/commit/4cfe637bb7856f8f10e04020dfe33ac952aa86ad)
chore(category_theory/sites/*): Adjust some `simp` lemmas. ([#10574](https://github.com/leanprover-community/mathlib/pull/#10574))

The primary change is removing some `simp` tags from the definition of `sheafify` and friends, so that the sheafification related constructions are not unfolded to the `plus` constructions.

Also -- added coercion from Sheaves to presheaves, and some `rfl` simp lemmas which help some proofs move along.

Some proofs cleaned up as well.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-02T19:28:46+00:00](https://github.com/leanprover-community/mathlib/commit/cbb2d2c0d8b3d2da3f0323e77189545e8b577dc2)
feat(data/nat/prime): Add lemma `count_factors_mul_of_pos` ([#10536](https://github.com/leanprover-community/mathlib/pull/#10536))

Adding the counterpart to `count_factors_mul_of_coprime` for positive `a` and `b`

### [2021-12-02T17:52:35+00:00](https://github.com/leanprover-community/mathlib/commit/38ae0c96492dd4792838c4336580d004a2d81aef)
feat(data/nat/prime): add coprime_of_prime lemmas ([#10534](https://github.com/leanprover-community/mathlib/pull/#10534))


Adds `coprime_of_lt_prime` and `eq_or_coprime_of_le_prime`, which help one to prove a number is coprime to a prime. Spun off of [#9080](https://github.com/leanprover-community/mathlib/pull/#9080).

### [2021-12-02T14:23:28+00:00](https://github.com/leanprover-community/mathlib/commit/5e0229253cf65473eaeff7328fbf4ec17b3cdea8)
feat(data/finset/*): Diverse lemmas ([#10388](https://github.com/leanprover-community/mathlib/pull/#10388))

A bunch of simple lemmas

### [2021-12-02T14:23:27+00:00](https://github.com/leanprover-community/mathlib/commit/790d6373ef38149923654d9d080c86df854e076b)
feat(combinatorics/set_family/compression/uv): UV-compression of a set family ([#10238](https://github.com/leanprover-community/mathlib/pull/#10238))

This defines the UV-compression of a set family, along with a bunch of preliminary definitions and some basic results.

### [2021-12-02T12:47:03+00:00](https://github.com/leanprover-community/mathlib/commit/17c22094c31fe00249363f53d6cc387884cea5f2)
feat(probability_theory/stopping): define filtration and stopping time ([#10553](https://github.com/leanprover-community/mathlib/pull/#10553))


This PR defines filtrations and stopping times which are used in stochastic processes. This is the first step towards creating a theory of martingales in lean.

### [2021-12-02T12:47:02+00:00](https://github.com/leanprover-community/mathlib/commit/6806050777148eeed7c852f59443199959477ca4)
feat(category_theory/sites/adjunction): Adjunctions between categories of sheaves. ([#10541](https://github.com/leanprover-community/mathlib/pull/#10541))

We construct adjunctions between categories of sheaves obtained by composition (and sheafification) with functors which form a given adjunction.

Will be used in LTE.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-12-02T12:47:00+00:00](https://github.com/leanprover-community/mathlib/commit/3e72feb3e42179161ea2e128df5ba0c25522015e)
feat(ring_theory/localization): The localization of a localization is a localization. ([#10456](https://github.com/leanprover-community/mathlib/pull/#10456))

Also provides an easy consequence : the map of `Spec M⁻¹R ⟶ Spec R` is isomorphic on stalks.



Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-12-02T11:02:49+00:00](https://github.com/leanprover-community/mathlib/commit/fed2929bf1aa9a5927762ced99b5834ff66a12fa)
chore(*): golf some proofs ([#10575](https://github.com/leanprover-community/mathlib/pull/#10575))

Also add `strict_mono_on.monotone_on` and `strict_anti_on.antitone_on`.

### [2021-12-02T05:21:48+00:00](https://github.com/leanprover-community/mathlib/commit/665c13a49e4011af210e8a6123b09edbfbb7edb9)
chore(*): clean up/golf proofs with unneeded or case splits ([#10569](https://github.com/leanprover-community/mathlib/pull/#10569))

Golf/simplify/clean up some more proofs with unnecessary case splits, this time found by linting for `or.dcases_on` with branches proving the more general fact.

### [2021-12-02T03:37:51+00:00](https://github.com/leanprover-community/mathlib/commit/34758d3fad7534c2d06e2b228dce1f295f729a20)
doc(group_theory/index): add a theorem name and fix a to_additive ([#10564](https://github.com/leanprover-community/mathlib/pull/#10564))

I wanted to find the theorem I know as "Lagrange's theorem" but couldn't by searching.
This PR adds the name Lagrange's theorem to the relevant file, and also fixes an extra eager `to_additive` renaming that creates a lemma `add_subgroup.index_add_card` which talks about multiplication previously.

### [2021-12-02T03:37:50+00:00](https://github.com/leanprover-community/mathlib/commit/70435215aef364c637f8257f51d059552d535bab)
chore(algebra/order/*): drop some `[nontrivial _]` assumptions ([#10550](https://github.com/leanprover-community/mathlib/pull/#10550))

Use `pullback_nonzero` to deduce `nontrivial _` in some `function.injective.*` constructors.

### [2021-12-02T03:37:49+00:00](https://github.com/leanprover-community/mathlib/commit/0f12400c1ac8351eae32afd5291941db16e04351)
chore(*): more cleanups of by_cases ([#10549](https://github.com/leanprover-community/mathlib/pull/#10549))

Follow up  [#10523](https://github.com/leanprover-community/mathlib/pull/#10523) with more tool-assisted golfing, see that PR for details.

### [2021-12-01T17:04:54+00:00](https://github.com/leanprover-community/mathlib/commit/c09501db540b08aad42ce1f45af2c183e8ecb551)
feat(*): assorted `finset` lemmas ([#10566](https://github.com/leanprover-community/mathlib/pull/#10566))

### [2021-12-01T11:46:33+00:00](https://github.com/leanprover-community/mathlib/commit/cc60470635be24ae663643c46e178095a22e7833)
feat(data/nat/prime): Add lemma `factors_count_pow` ([#10554](https://github.com/leanprover-community/mathlib/pull/#10554))

### [2021-12-01T03:17:51+00:00](https://github.com/leanprover-community/mathlib/commit/599a51188e83b98dfaf74c6da2044ae02af973ec)
feat(analysis/normed_space/star and data/complex/is_R_or_C): register instances of `cstar_ring` ([#10555](https://github.com/leanprover-community/mathlib/pull/#10555))

Register instances `cstar_ring ℝ` and `cstar_ring K` when `[is_R_or_C K]`

### [2021-12-01T02:41:28+00:00](https://github.com/leanprover-community/mathlib/commit/3f7d0cfdeff521d14791f8355d146d1e9354fd9b)
chore(scripts): update nolints.txt ([#10563](https://github.com/leanprover-community/mathlib/pull/#10563))

I am happy to remove some nolints for you!

### [2021-11-30T16:52:36+00:00](https://github.com/leanprover-community/mathlib/commit/49f8b6b87321fb5672a4d8db01f27cc4776f191c)
chore(analysis/mean_inequalities[_pow]): use vector notation ([#10546](https://github.com/leanprover-community/mathlib/pull/#10546))

Several elementary inequalities in the library are expressed both in arbitrary n-ary versions and in explicit binary, ternary etc versions, with the latter deduced from the former.  This PR introduces vector notation to the proof terms deducing the latter from the former, which shortens them, and also makes them more readable.

### [2021-11-30T16:52:35+00:00](https://github.com/leanprover-community/mathlib/commit/b876e76b07d8307de9465c158263535fafce2556)
feat(algebra/char_p/two): couple more lemmas + 🏌️ ([#10467](https://github.com/leanprover-community/mathlib/pull/#10467))




Co-authored-by: Eric <ericrboidi@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-11-30T15:07:49+00:00](https://github.com/leanprover-community/mathlib/commit/cd69351b4b77e4ee3db6b01309bb2f011e678448)
doc(data/stream/defs): add docstrings to most defs ([#10547](https://github.com/leanprover-community/mathlib/pull/#10547))

Also move 1 def from `basic` to `defs`.

### [2021-11-30T15:07:48+00:00](https://github.com/leanprover-community/mathlib/commit/8bce7eb0cfc3f4e45d42c20df3107c5a04625bc3)
refactor(algebra/group/basic): Migrate `add_group` section into `group` section ([#10532](https://github.com/leanprover-community/mathlib/pull/#10532))

### [2021-11-30T13:24:44+00:00](https://github.com/leanprover-community/mathlib/commit/41fa32b3ff6ebcdda51cd66da6dd8b71a0f4a0ac)
feat(data/nat/pairing): add an `equiv` version of `nat.mkpair`/`nat.unpair` ([#10520](https://github.com/leanprover-community/mathlib/pull/#10520))

### [2021-11-30T13:24:43+00:00](https://github.com/leanprover-community/mathlib/commit/af5c778c831af37bdc0cc93b7698301b49d3718e)
feat(topology/[continuous_function, path_connected]): add bundled versions of prod_mk and prod_map ([#10512](https://github.com/leanprover-community/mathlib/pull/#10512))

I also added a definition for pointwise addition of paths, but I'm not sure it would be really useful in general (my use case is the Sphere eversion project, where I need to add together two paths living in complement subspaces of a real TVS).

### [2021-11-30T13:24:41+00:00](https://github.com/leanprover-community/mathlib/commit/4d90ff975938e2c8da5a28e35d881aeb53bc5e52)
feat(topology/connected): Connectedness in sum and sigma type ([#10511](https://github.com/leanprover-community/mathlib/pull/#10511))

This provides the `compact_space` and `totally_disconnected_space` instances for `α ⊕ β` and `Σ i, π i`.

### [2021-11-30T13:24:39+00:00](https://github.com/leanprover-community/mathlib/commit/73562699090bcaa0bd94e9eecbc3a334775bedca)
feat(linear_algebra/affine_space/basis): upgrade `affine_basis.coords` to an affine map ([#10452](https://github.com/leanprover-community/mathlib/pull/#10452))


Formalized as part of the Sphere Eversion project.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-11-30T12:39:15+00:00](https://github.com/leanprover-community/mathlib/commit/35574bbf2879b7438b6b1c63caec16d8fb7f5267)
fix(*): replace "the the" by "the" ([#10548](https://github.com/leanprover-community/mathlib/pull/#10548))

### [2021-11-30T11:49:06+00:00](https://github.com/leanprover-community/mathlib/commit/1077f34696d685cc8a3fb2d159f740eec170ca35)
feat(algebraic_geometry): Generalized basic open for arbitrary sections ([#10515](https://github.com/leanprover-community/mathlib/pull/#10515))

### [2021-11-30T10:08:21+00:00](https://github.com/leanprover-community/mathlib/commit/6102d771a46a8562771c30e6cb2b4c59576fe404)
feat(group_theory/submonoid/pointwise): pointwise inverse of a submonoid ([#10451](https://github.com/leanprover-community/mathlib/pull/#10451))

This also adds `order_iso.map_{supr,infi,Sup,Inf}` which are used here to provide some short proofs.

### [2021-11-30T07:29:05+00:00](https://github.com/leanprover-community/mathlib/commit/4a9aa275232398a55c68a8079c6221e56087fef5)
feat(analysis/normed_space/spectrum and algebra/algebra/spectrum): prove properties of spectrum in a Banach algebra ([#10530](https://github.com/leanprover-community/mathlib/pull/#10530))

Prove that the `spectrum` of an element in a Banach algebra is closed and bounded, hence compact when the scalar field is                               
proper. Compute the derivative of the `resolvent a` function in preparation for showing that the spectrum is nonempty when  the base field is ℂ. Define the `spectral_radius` and prove that it is bounded by the norm. Also rename the resolvent set to `resolvent_set` instead of `resolvent` so that it doesn't clash with the function name.

### [2021-11-30T06:50:40+00:00](https://github.com/leanprover-community/mathlib/commit/f11d505e3a1dcc1d56d9af51f934d1a647f57b66)
feat(category_theory/sites/compatible_*): Compatibility of plus and sheafification with composition. ([#10510](https://github.com/leanprover-community/mathlib/pull/#10510))

Compatibility of sheafification with composition. This will be used later to obtain adjunctions between categories of sheaves.

### [2021-11-30T02:52:47+00:00](https://github.com/leanprover-community/mathlib/commit/396351bd16122af3b36be014e0031afeacf0c4a3)
chore(scripts): update nolints.txt ([#10545](https://github.com/leanprover-community/mathlib/pull/#10545))

I am happy to remove some nolints for you!

### [2021-11-29T21:29:13+00:00](https://github.com/leanprover-community/mathlib/commit/04fc415ad0f682d04bc8ffe8faac64074b4e1cfc)
feat(algebra/char_p/two): lemmas about characteristic two ([#10442](https://github.com/leanprover-community/mathlib/pull/#10442))

### [2021-11-29T19:42:43+00:00](https://github.com/leanprover-community/mathlib/commit/f798f22eb0ba10e9b3af9ef31dc8492f28635955)
refactor(order/filter/bases): drop `p` in `has_antitone_basis` ([#10499](https://github.com/leanprover-community/mathlib/pull/#10499))

We never use `has_antitone_basis` for `p ≠ λ _, true` in `mathlib`.



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-11-29T17:49:24+00:00](https://github.com/leanprover-community/mathlib/commit/da6aceb806c3c289898b09159d60f46f9868ddd0)
chore(order): fix-ups after [#9891](https://github.com/leanprover-community/mathlib/pull/#9891) ([#10538](https://github.com/leanprover-community/mathlib/pull/#10538))

### [2021-11-29T17:49:23+00:00](https://github.com/leanprover-community/mathlib/commit/7545909c980eac4edaf8283cdaf92faaaf7e2d6d)
chore(logic/function): allow `Sort*` in `function.inv_fun` ([#10526](https://github.com/leanprover-community/mathlib/pull/#10526))

### [2021-11-29T17:49:21+00:00](https://github.com/leanprover-community/mathlib/commit/3ac9ae733bdbf7c5c15a540ecde5469afd79d538)
chore(data/stream): dedup `take` and `approx` ([#10525](https://github.com/leanprover-community/mathlib/pull/#10525))

`stream.take` and `stream.approx` were propositionally equal. Merge
them into one function `stream.take`; the definition comes from the old `stream.approx`.

### [2021-11-29T17:49:20+00:00](https://github.com/leanprover-community/mathlib/commit/bc4ed5c0dbde40d470ead139debd502141500db4)
chore(*): cleanup unneeded uses of by_cases across the library ([#10523](https://github.com/leanprover-community/mathlib/pull/#10523))

Many proofs in the library do case splits but then never use the introduced assumption in one of the cases, meaning the case split can be removed and replaced with the general argument.
Its easy to either accidentally introduce these more complicated than needed arguments when writing proofs, or in some cases presumably refactors made assumptions unnecessary, we golf / simplify several of these to simplify these proofs.
Similar things happen for `split_ifs` and explicit `if ... then` proofs.

Rather remarkably the changes to `uniformly_extend_spec` make the separated space assumption unnecessary too, and removing this removes this assumption from around 10 other lemmas in the library too.

Some more random golfs were added in the review process

Found with a work in progress linter.

### [2021-11-29T17:49:19+00:00](https://github.com/leanprover-community/mathlib/commit/56018332bad24724a1035af59eb55a6d0e8e6598)
chore(*): a few facts about `pprod` ([#10519](https://github.com/leanprover-community/mathlib/pull/#10519))

Add `equiv.pprod_equiv_prod` and `function.embedding.pprod_map`.

### [2021-11-29T17:49:18+00:00](https://github.com/leanprover-community/mathlib/commit/be48f9583e76864903c78d2e40fb28900db743b5)
refactor(algebra.order.group): Convert abs_eq_sup_neg to multiplicative form ([#10505](https://github.com/leanprover-community/mathlib/pull/#10505))

refactor(algebra.order.group): Convert abs_eq_sup_neg to multiplicative form

### [2021-11-29T17:49:17+00:00](https://github.com/leanprover-community/mathlib/commit/2ed7c0ff0b9675fd331677e87e8d34069d82fafc)
doc(field_theory/galois): add comment that separable extensions are a… ([#10500](https://github.com/leanprover-community/mathlib/pull/#10500))

…lgebraic

I teach my students that a Galois extension is algebraic, normal and separable, and was
just taken aback when I read the mathlib definition which omits "algebraic". Apparently
there are two conventions for the definition of separability, one implying algebraic and the other not:
https://en.wikipedia.org/wiki/Separable_extension#Separability_of_transcendental_extensions .
Right now we have separability implies algebraic in mathlib so mathematically we're fine; I just
add a note to clarify what's going on. In particular if we act on the TODO in
the separability definition, we may (perhaps unwittingly) break the definition of
`is_galois`; hopefully this note lessens the chance that this happens.

### [2021-11-29T17:49:15+00:00](https://github.com/leanprover-community/mathlib/commit/fcbe7142652738201037d64519c097962fd2bbd6)
refactor(data/nat/fib): use `nat.iterate` ([#10489](https://github.com/leanprover-community/mathlib/pull/#10489))

The main drawback of the new definition is that `fib (n + 2) = fib n + fib (n + 1)` is no longer `rfl` but I think that we should have one API for iterates.

See discussion at https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60nat.2Eiterate.60.20vs.20.60stream.2Eiterate.60

### [2021-11-29T17:11:51+00:00](https://github.com/leanprover-community/mathlib/commit/b849b3c2d2b0e9c90d84c6e4e268728c5bdee9c1)
feat(number_theory/padics/padic_norm): prime powers in divisors ([#10481](https://github.com/leanprover-community/mathlib/pull/#10481))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-11-29T09:57:02+00:00](https://github.com/leanprover-community/mathlib/commit/957fa4bb292a70161679811a0bd2309aee5a8351)
feat(order/locally_finite): `with_top α`/`with_bot α` are locally finite orders ([#10202](https://github.com/leanprover-community/mathlib/pull/#10202))

This provides the two instances `locally_finite_order (with_top α)` and `locally_finite_order (with_bot α)`.



Co-authored-by: Adam Topaz <github@adamtopaz.com>

### [2021-11-29T06:52:12+00:00](https://github.com/leanprover-community/mathlib/commit/202ca0b13d65e717fe155306d274c1e6870b0e18)
feat(*/is_R_or_C): deduplicate ([#10522](https://github.com/leanprover-community/mathlib/pull/#10522))

I noticed that the same argument, that in a normed space over `is_R_or_C` an element can be normalized, appears in a couple of different places in the library.  I have deduplicated and placed it in `analysis/normed_space/is_R_or_C`.

### [2021-11-29T06:52:11+00:00](https://github.com/leanprover-community/mathlib/commit/a53da16ca67bf95f1dcbccc6c2b179d4c102ed59)
feat(data/int/basic): `nat_abs_dvd_iff_dvd` ([#10469](https://github.com/leanprover-community/mathlib/pull/#10469))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-11-29T06:04:28+00:00](https://github.com/leanprover-community/mathlib/commit/50cc57be33e3775ec01ad91a0a7841a59f28c00a)
chore(category_theory/limits/shapes/wide_pullbacks): speed up `wide_cospan` ([#10535](https://github.com/leanprover-community/mathlib/pull/#10535))

### [2021-11-29T01:36:13+00:00](https://github.com/leanprover-community/mathlib/commit/16daabf74a759b06857973aac5beb24504ac2a61)
chore(algebra/group_power): golf a few proofs ([#10498](https://github.com/leanprover-community/mathlib/pull/#10498))

* move `pow_lt_pow_of_lt_one` and `pow_lt_pow_iff_of_lt_one` from
  `algebra.group_power.lemmas` to `algebra.group_power.order`;
* add `strict_anti_pow`, use it to golf the proofs of the two lemmas
  above;
* golf a few other proofs;
* add `nnreal.exists_pow_lt_of_lt_one`.

### [2021-11-28T23:50:39+00:00](https://github.com/leanprover-community/mathlib/commit/77ba0c4160793de8a824461128c57ca394792143)
chore(logic): allow `Sort*` args in 2 lemmas ([#10517](https://github.com/leanprover-community/mathlib/pull/#10517))

### [2021-11-28T23:50:38+00:00](https://github.com/leanprover-community/mathlib/commit/c058607c6fa3495125e109f37ccf83665100b285)
chore(order): generalize `min_top_left` ([#10486](https://github.com/leanprover-community/mathlib/pull/#10486))

As well as its relative `min_top_right`.
Also provide `max_bot_(left|right)`.

### [2021-11-28T23:50:37+00:00](https://github.com/leanprover-community/mathlib/commit/43519fc7e8fbab3a01a85280ba7851cbfd46a678)
feat(tactic/lint/misc): unused arguments checks for more sorry's ([#10431](https://github.com/leanprover-community/mathlib/pull/#10431))

* The `unused_arguments` linter now checks whether `sorry` occurs in any of the `_proof_i` declarations and will not raise an error if this is the case
* Two minor changes: `open tactic` in all of `meta.expr` and fix a typo.
* I cannot add a test without adding a `sorry` to the test suite, but this succeeds without linter warning:
```lean
import tactic.lint

/-- dummy doc -/
def one (h : 0 < 1) : {n : ℕ // 0 < n} := ⟨1, sorry⟩

#lint
```





Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2021-11-28T22:06:26+00:00](https://github.com/leanprover-community/mathlib/commit/dfa98e0ea5a426aceedd805dee99f527720690ed)
chore(algebra/opposites): split out lemmas about rings and groups ([#10457](https://github.com/leanprover-community/mathlib/pull/#10457))

All these lemmas are just moved.

The advantage of this is that `algebra.opposites` becomes a much lighter-weight import, allowing us to use the `has_mul` and `has_scalar` instance on opposite types earlier in the import hierarchy.

It also matches how we structure the instances on `prod` and `pi` types.

This follows on from [#10383](https://github.com/leanprover-community/mathlib/pull/#10383)

### [2021-11-28T20:23:10+00:00](https://github.com/leanprover-community/mathlib/commit/f684721dbec28322690f799b214b545b298d22ba)
chore(data/nat/prime): `fact (2.prime)` ([#10441](https://github.com/leanprover-community/mathlib/pull/#10441))



Co-authored-by: Eric <ericrboidi@gmail.com>

### [2021-11-28T19:36:10+00:00](https://github.com/leanprover-community/mathlib/commit/a2e6bf895acba7cd9d7cf72c5354a1f132214ce2)
chore(algebraic_topology/cech_nerve): An attempt to speed up the proofs... ([#10521](https://github.com/leanprover-community/mathlib/pull/#10521))

Let's hope this works!

See [zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.2310312.20timeouts.20in.20cech_nerve/near/262587999)

### [2021-11-28T07:21:28+00:00](https://github.com/leanprover-community/mathlib/commit/044f5320a5b3f01ba0e3693949ebf1ab62e39399)
chore(analysis/normed_space/hahn_banach): remove `norm'` ([#10527](https://github.com/leanprover-community/mathlib/pull/#10527))

For a normed space over `ℝ`-algebra `𝕜`, `norm'` is currently defined to be `algebra_map ℝ 𝕜 ∥x∥`.  I believe this was introduced before the `is_R_or_C` construct (including the coercion from `ℝ` to `𝕜` for `[is_R_or_C 𝕜]`) joined mathlib.  Now that we have these things, it's easy to just say `(∥x∥ : 𝕜)` instead of `norm' 𝕜 ∥x∥`, so I don't really think `norm'` needs to exist any more.

(In principle, `norm'` is more general, since it works for all `ℝ`-algebras `𝕜` rather than just `[is_R_or_C 𝕜]`.  But I can only really think of applications in the`is_R_or_C` case, and that's the only way it's used in the library.)

### [2021-11-28T07:21:27+00:00](https://github.com/leanprover-community/mathlib/commit/099fb0f6ecf434a7db0b869344ef72170bf70311)
feat(data/nat/prime): lemma eq_of_eq_count_factors ([#10493](https://github.com/leanprover-community/mathlib/pull/#10493))

### [2021-11-28T06:12:10+00:00](https://github.com/leanprover-community/mathlib/commit/45d45ef02bcaaba3d1493d45efcc0ba15da25bb0)
feat(data/nat/prime): lemma count_factors_mul_of_coprime ([#10492](https://github.com/leanprover-community/mathlib/pull/#10492))

Adding lemma `count_factors_mul_of_coprime` and using it to simplify the proof of `factors_count_eq_of_coprime_left`.

### [2021-11-28T03:39:40+00:00](https://github.com/leanprover-community/mathlib/commit/b1f9067803957e6d49613edf4bf7669b2bf2be3e)
feat(group_theory/group_action/units): add a `mul_distrib_mul_action` instance ([#10480](https://github.com/leanprover-community/mathlib/pull/#10480))

This doesn't add any new "data" instances, it just shows the existing instance satisfies stronger properties with stronger assumptions.

### [2021-11-27T09:46:17+00:00](https://github.com/leanprover-community/mathlib/commit/b8af491470dab07be7f09a3dfdb012d77b23a387)
feat(category_theory/sites/whiskering): Functors between sheaf categories induced by compositiion ([#10496](https://github.com/leanprover-community/mathlib/pull/#10496))

We construct the functor `Sheaf J A` to `Sheaf J B` induced by a functor `A` to `B` which preserves the appropriate limits.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-11-27T08:42:32+00:00](https://github.com/leanprover-community/mathlib/commit/fcb3790314fbce291e13c77f9d64b2377c04166d)
feat(topology/algebra/matrix): the determinant is a continuous map ([#10503](https://github.com/leanprover-community/mathlib/pull/#10503))

Formalized as part of the Sphere Eversion project.

### [2021-11-27T07:02:21+00:00](https://github.com/leanprover-community/mathlib/commit/d36a67c793d2b53b3ed0bdbc137ca1fa88dbcdc1)
feat(ring_theory/euclidean_domain): generalize lemmas to PIDs ([#10324](https://github.com/leanprover-community/mathlib/pull/#10324))

This moves the existing lemmas to the `euclidean_domain` namespace.

### [2021-11-27T02:49:59+00:00](https://github.com/leanprover-community/mathlib/commit/150b2179a614c17ccffe9a9cd79ea07699c7a75e)
chore(scripts): update nolints.txt ([#10513](https://github.com/leanprover-community/mathlib/pull/#10513))

I am happy to remove some nolints for you!

### [2021-11-26T23:08:10+00:00](https://github.com/leanprover-community/mathlib/commit/7a19aa1dd92d3b0785ddb58d8c838df7f149cb41)
feat(group_theory/order_of_element): linear ordered rings ([#10473](https://github.com/leanprover-community/mathlib/pull/#10473))

### [2021-11-26T21:40:36+00:00](https://github.com/leanprover-community/mathlib/commit/7348f1b7fa7a80ce55b3d4c2dad07da93d7cd353)
Adding a matching TODO back ([#10506](https://github.com/leanprover-community/mathlib/pull/#10506))

Because we were careless and removed it too early:

https://github.com/leanprover-community/mathlib/pull/10210#discussion_r757640946

### [2021-11-26T17:50:35+00:00](https://github.com/leanprover-community/mathlib/commit/deb5692156b8fa34b719ad2edae4c7fabf8e3ef5)
refactor(combinatorics/simple_graph): use subgraphs to represent matchings ([#10210](https://github.com/leanprover-community/mathlib/pull/#10210))

### [2021-11-26T16:20:00+00:00](https://github.com/leanprover-community/mathlib/commit/dabb58bb85614e1098ee95f1c8e234ed6a89c31b)
chore(algebra/module/pi): split out `group_theory/group_action/pi` to match `group_theory/group_action/prod` ([#10485](https://github.com/leanprover-community/mathlib/pull/#10485))

These declarations are copied without modification.

### [2021-11-26T16:19:59+00:00](https://github.com/leanprover-community/mathlib/commit/ea52ec1f4dc6e68d2bdec6ec9e732b0ad4b7fec9)
feat(ring_theory/ideal/operations): add lemmas about comap ([#10418](https://github.com/leanprover-community/mathlib/pull/#10418))

This also adds `ring_hom.to_semilinear_map` and `ring_equiv.to_semilinear_equiv`.

### [2021-11-26T15:44:03+00:00](https://github.com/leanprover-community/mathlib/commit/9cfa33a64bd5ac41b92b05419b89324925049c07)
feat(algebra/lie): implement `set_like` for `lie_submodule` ([#10488](https://github.com/leanprover-community/mathlib/pull/#10488))

This PR provides a `set_like` instance for `lie_submodule` and uses it to define `has_mem` and `has_le` for Lie submodules / ideals.

### [2021-11-26T12:59:28+00:00](https://github.com/leanprover-community/mathlib/commit/83bce9f109f72dc9189f418c5b97ee3c6ea0049f)
feat(category_theory/adjunction/whiskering): Whiskering adjunctions. ([#10495](https://github.com/leanprover-community/mathlib/pull/#10495))

Construct adjunctions between functor categories induced by whiskering (both left and right).

This will be used later to construct adjunctions between categories of sheaves.

### [2021-11-26T11:59:16+00:00](https://github.com/leanprover-community/mathlib/commit/61e8aa81c27849035aa313a28a010dad299ec45f)
feat(topology/algebra/[X]): sub[X] of a topological [X] is itself a topological [X] ([#10491](https://github.com/leanprover-community/mathlib/pull/#10491))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-11-26T11:04:50+00:00](https://github.com/leanprover-community/mathlib/commit/36f33d0da1562c65f9bd954052bf9b03f3955480)
chore(category_theory/limits): Generalize universes for limits ([#10243](https://github.com/leanprover-community/mathlib/pull/#10243))



Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-11-26T07:20:19+00:00](https://github.com/leanprover-community/mathlib/commit/0b9d33206cf83d5f0e84c0672396758d832f6a43)
feat(data/complex/basic): `of_real_injective` ([#10464](https://github.com/leanprover-community/mathlib/pull/#10464))

### [2021-11-26T07:20:18+00:00](https://github.com/leanprover-community/mathlib/commit/e742fce86a1bca7d29fa1b426b2061c79f5451f5)
feat(data/nat/prime): `nat.{eq/ne}_one_iff` ([#10463](https://github.com/leanprover-community/mathlib/pull/#10463))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-11-26T07:20:17+00:00](https://github.com/leanprover-community/mathlib/commit/71bc7f41245de62e5c73d48667c6a3c909995ef2)
feat(set_theory/ordinal_notation): nonote is well founded ([#10462](https://github.com/leanprover-community/mathlib/pull/#10462))

### [2021-11-26T07:20:16+00:00](https://github.com/leanprover-community/mathlib/commit/cdb38195bb9604da897e2c47a3be8f9820183a7d)
feat(algebraic_geometry): `of_restrict` is mono. ([#10460](https://github.com/leanprover-community/mathlib/pull/#10460))

### [2021-11-26T07:20:15+00:00](https://github.com/leanprover-community/mathlib/commit/757aa6f8b2552eab4f935316ef145541942453b7)
chore(data/stream): move most defs to a new file ([#10458](https://github.com/leanprover-community/mathlib/pull/#10458))

### [2021-11-26T07:20:14+00:00](https://github.com/leanprover-community/mathlib/commit/3dfa3496fba89b8518e1654fc5ba37d4419bbbc2)
feat(topology/uniform_space/completion) : add injective_coe ([#10454](https://github.com/leanprover-community/mathlib/pull/#10454))




Co-authored-by: María Inés de Frutos-Fernández <88536493+mariainesdff@users.noreply.github.com>

### [2021-11-26T07:20:13+00:00](https://github.com/leanprover-community/mathlib/commit/cbe1d37999971f56b3d76f1da787e96381f1191c)
feat(ring_theory/valuation/basic): add valuation.map_zpow ([#10453](https://github.com/leanprover-community/mathlib/pull/#10453))

### [2021-11-26T07:20:12+00:00](https://github.com/leanprover-community/mathlib/commit/9249e1e6e0ca60cb4295e517a7597eaed0c4eb3d)
chore(linear_algebra/affine_space/barycentric_coords): rename file `barycentric_coords` to `basis` ([#10449](https://github.com/leanprover-community/mathlib/pull/#10449))

Follow up from https://github.com/leanprover-community/mathlib/pull/10320#discussion_r748936743

### [2021-11-26T07:20:11+00:00](https://github.com/leanprover-community/mathlib/commit/28d9a5b1c7dad3390df7738f96035ba095470e93)
feat(data/equiv/basic): add lemmas characterising `equiv.Pi_congr` and `equiv.Pi_congr'` ([#10432](https://github.com/leanprover-community/mathlib/pull/#10432))

Formalized as part of the Sphere Eversion project.

### [2021-11-26T06:45:43+00:00](https://github.com/leanprover-community/mathlib/commit/be9b96e09d5d70674aa20a6f30f4e6dd0d0a6866)
feat(computablility/halting): halting problem is r.e. ([#10459](https://github.com/leanprover-community/mathlib/pull/#10459))

This is a minor oversight from the original formalization, pointed out by Keji Neri.

### [2021-11-26T02:32:10+00:00](https://github.com/leanprover-community/mathlib/commit/f55a284ea192f345ff39814a90d33e15acfbb861)
feat(topology): normal topological space with second countable topology is metrizable ([#10402](https://github.com/leanprover-community/mathlib/pull/#10402))

Also prove that a regular topological space with second countable topology is a normal space.

### [2021-11-25T18:25:14+00:00](https://github.com/leanprover-community/mathlib/commit/ee71ddfee28fa8c3a04eec59a9f12b1ccac1baf2)
feat(ring_theory/graded_algebra): definition of type class `graded_algebra` ([#10115](https://github.com/leanprover-community/mathlib/pull/#10115))

This is largely written by @eric-wieser. Thank you.



Co-authored-by: jjaassoonn <jujian.zhang1998@out.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-11-25T16:03:28+00:00](https://github.com/leanprover-community/mathlib/commit/644591fe5e4d67108b3d1256122a2ad7ec053c26)
chore(algebra/group/basic): + 2 simp lemmas about `a - b` ([#10478](https://github.com/leanprover-community/mathlib/pull/#10478))

### [2021-11-25T12:14:38+00:00](https://github.com/leanprover-community/mathlib/commit/7d8a1e07b10b632ea4dc2b57cbe721221d39c3c9)
feat(data/polynomial/eval): random `eval` lemmas ([#10470](https://github.com/leanprover-community/mathlib/pull/#10470))

note that the `geom_sum` import only adds the `geom_sum` file itself; all other files were imported already

### [2021-11-25T07:53:00+00:00](https://github.com/leanprover-community/mathlib/commit/5b767aac06c646ddee15c9f4c0cef359eaa5b533)
feat(measure_theory/integral/integral_eq_improper): weaken measurability assumptions  ([#10387](https://github.com/leanprover-community/mathlib/pull/#10387))

As suggested by @fpvandoorn, this removes a.e. measurability assumptions which could be deduced from integrability assumptions. More of them could be removed assuming the codomain is a `borel_space` and not only an `open_measurable_space`, but I’m not sure wether or not it would be a good idea.

### [2021-11-25T03:11:34+00:00](https://github.com/leanprover-community/mathlib/commit/7dfd7e8ccac75ddb66f4f60cd3dc3836408fdcd8)
chore(scripts): update nolints.txt ([#10484](https://github.com/leanprover-community/mathlib/pull/#10484))

I am happy to remove some nolints for you!

### [2021-11-25T01:40:31+00:00](https://github.com/leanprover-community/mathlib/commit/d04f5a55c48952d65d086eb7dea820cf4e0921f0)
feat(algebra/pointwise): lemmas about multiplication of finsets ([#10455](https://github.com/leanprover-community/mathlib/pull/#10455))

### [2021-11-24T18:18:56+00:00](https://github.com/leanprover-community/mathlib/commit/daf30fd7c0db120406b3357b5431137d6c847b76)
feat(analysis/asymptotics): Generalize superpolynomial decay using limits instead of big O ([#10296](https://github.com/leanprover-community/mathlib/pull/#10296))

This PR generalizes the definition of `superpolynomial_decay` in terms of `filter.tendsto` instead of `asymptotics.is_O`.

### [2021-11-24T14:56:57+00:00](https://github.com/leanprover-community/mathlib/commit/18e55105dca9c32f160d1955b0edcd100c0a1180)
fix(tactic/cancel_denoms): remove debug code ([#10434](https://github.com/leanprover-community/mathlib/pull/#10434))

This code must not be used -- worth keeping, as it's a potentially useful function, but it shouldn't trace anything.

### [2021-11-24T12:24:42+00:00](https://github.com/leanprover-community/mathlib/commit/b29b9528f9dac6b8040f9c3f5e27c8341b84e645)
feat(measure_theory/group/fundamental_domain): prove equality of integrals ([#10448](https://github.com/leanprover-community/mathlib/pull/#10448))

### [2021-11-24T12:24:41+00:00](https://github.com/leanprover-community/mathlib/commit/563f8c4f7b316c933be440c60eec4e8bd57e6a52)
feat(measure_theory/integral): dominated convergence for a series ([#10398](https://github.com/leanprover-community/mathlib/pull/#10398))

### [2021-11-24T10:42:43+00:00](https://github.com/leanprover-community/mathlib/commit/132833b7b5ea41cfa679b192028f5217cfe93b03)
refactor(algebra.abs): Introduce `has_pos_part` and `has_neg_part` classes ([#10420](https://github.com/leanprover-community/mathlib/pull/#10420))

refactor(algebra.abs): Introduce `has_pos_part` and `has_neg_part` classes

### [2021-11-24T09:23:46+00:00](https://github.com/leanprover-community/mathlib/commit/09b4bfc911440f781898f7029d40f7a453afecce)
feat(linear_algebra/multilinear/basic): multilinear maps with respect to an empty family are all constant ([#10433](https://github.com/leanprover-community/mathlib/pull/#10433))

This seemingly-innocuous statement is valuable as a base case for induction.

Formalized as part of the Sphere Eversion project.

### [2021-11-24T07:49:21+00:00](https://github.com/leanprover-community/mathlib/commit/d487d65094ecb2f155a18055d39998118900b9f4)
refactor(topology,algebraic_geometry): use bundled maps here and there ([#10447](https://github.com/leanprover-community/mathlib/pull/#10447))

* `opens.comap` now takes a `continuous_map` and returns a `preorder_hom`;
* `prime_spectrum.comap` is now a bundled `continuous_map`.

### [2021-11-24T07:49:20+00:00](https://github.com/leanprover-community/mathlib/commit/3590dc2952190c11f92c7bcc84cb3093af22a68d)
feat(topology/uniform_space/uniform_convergence): slightly generalize theorems ([#10444](https://github.com/leanprover-community/mathlib/pull/#10444))

* add `protected` to some theorems;
* assume `∀ᶠ n, continuous (F n)` instead of `∀ n, continuous (F n)`;
* get rid of `F n` in lemmas like `continuous_within_at_of_locally_uniform_approx_of_continuous_within_at`; instead, assume that there exists a continuous `F` that approximates `f`.

### [2021-11-24T07:49:19+00:00](https://github.com/leanprover-community/mathlib/commit/8d07dbf4c532ad8e5c011f35bc4d1848fe6afeaf)
feat(topology/sheaves): Generalized some lemmas. ([#10440](https://github.com/leanprover-community/mathlib/pull/#10440))

Generalizes some lemmas and explicitly stated that for `f` to be an iso on `U`, it suffices that the stalk map is an iso for all `x : U`.



Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-11-24T07:49:18+00:00](https://github.com/leanprover-community/mathlib/commit/a086daa5c491b9a9ed3675a781e5bcd35f223ce5)
chore(ring_theory/polynomial/cyclotomic): use `ratfunc` ([#10421](https://github.com/leanprover-community/mathlib/pull/#10421))

### [2021-11-24T07:49:17+00:00](https://github.com/leanprover-community/mathlib/commit/6cb52e675d81556c6883afe472dc05c6b5586b01)
feat(category_theory/limits): Results about (co)limits in Top ([#9985](https://github.com/leanprover-community/mathlib/pull/#9985))

- Provided the explicit topologies for limits and colimits, and specialized this result onto some shapes.
- Provided the isomorphism between the (co)limits and the constructions in `topology/constructions.lean`.
- Provided conditions about whether `prod.map` and `pullback_map` are inducing, embedding, etc.



Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-11-24T06:51:50+00:00](https://github.com/leanprover-community/mathlib/commit/d267b6cacc16c9a5b9c3d768d71bdb3ab6a7b052)
chore(topology): add 2 missing `inhabited` instances ([#10446](https://github.com/leanprover-community/mathlib/pull/#10446))

Also add an instance from `discrete_topology` to `topological_ring`.

### [2021-11-24T03:16:10+00:00](https://github.com/leanprover-community/mathlib/commit/1c0017946a29a5fe779a79d71bf7ee422852f202)
chore(scripts): update nolints.txt ([#10445](https://github.com/leanprover-community/mathlib/pull/#10445))

I am happy to remove some nolints for you!

### [2021-11-24T02:33:03+00:00](https://github.com/leanprover-community/mathlib/commit/f578d1d68c5a1086d774931b4423df7e0c30b460)
feat(measure_theory): TC for smul-invariant measures ([#10325](https://github.com/leanprover-community/mathlib/pull/#10325))

### [2021-11-23T22:42:46+00:00](https://github.com/leanprover-community/mathlib/commit/0cbba1a438afde3c86e9350399cc07af77d55aed)
feat(ring_theory/adjoin/basic): add adjoin_induction' and adjoin_adjoin_coe_preimage ([#10427](https://github.com/leanprover-community/mathlib/pull/#10427))

From FLT-regular.
Co-authored-by: Chris Birkbeck <cd.birkbeck@gmail.com>

### [2021-11-23T22:42:45+00:00](https://github.com/leanprover-community/mathlib/commit/c192937f1ca087604c87cbdbf60ef7ae9cb96233)
feat(analysis): derivative of a parametric interval integral ([#10404](https://github.com/leanprover-community/mathlib/pull/#10404))

### [2021-11-23T21:34:42+00:00](https://github.com/leanprover-community/mathlib/commit/ac283c22ef09055ee6930ff0bfb9f59fede19215)
feat(data/nat/prime): some lemmas about prime factors ([#10385](https://github.com/leanprover-community/mathlib/pull/#10385))

A few small lemmas about prime factors, for use in future PRs on prime factorisations and the Euler product formula for totient

### [2021-11-23T20:50:39+00:00](https://github.com/leanprover-community/mathlib/commit/eb8b1b82475be907ac6f0d171876d6ceb0c05226)
feat(linear_algebra/affine_space/barycentric_coords): characterise affine bases in terms of coordinate matrices ([#10370](https://github.com/leanprover-community/mathlib/pull/#10370))

Formalized as part of the Sphere Eversion project.

### [2021-11-23T19:47:54+00:00](https://github.com/leanprover-community/mathlib/commit/fb82d0a55f69467cb49b237023489e2440c5c299)
feat(data/mv_polynomial/basic): add a symmetric version of coeff_X_mul and generalize to monomials ([#10429](https://github.com/leanprover-community/mathlib/pull/#10429))

### [2021-11-23T19:47:53+00:00](https://github.com/leanprover-community/mathlib/commit/ba43124c37cfe0009bbfc57505f9503ae0e8c1af)
feat(category_theory/sites/*): Comparison lemma ([#9785](https://github.com/leanprover-community/mathlib/pull/#9785))



Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-11-23T18:21:04+00:00](https://github.com/leanprover-community/mathlib/commit/a779f6cfde79db610d8bfd92d163852c05985caa)
feat(topology/algebra/ordered): convergent sequence is bounded above/below ([#10424](https://github.com/leanprover-community/mathlib/pull/#10424))

Also move lemmas `Ixx_mem_nhds` up to generalize them from
`[linear_order α] [order_topology α]` to
`[linear_order α] [order_closed_topology α]`.

### [2021-11-23T18:21:02+00:00](https://github.com/leanprover-community/mathlib/commit/1dd3ae1c85ec9dcfae3cfe0a6c39b3e23b7957b6)
feat(algebra/big_operators/order): Bounding on a sum of cards by double counting ([#10389](https://github.com/leanprover-community/mathlib/pull/#10389))

If every element of `s` is in at least/most `n` finsets of `B : finset (finset α)`, then the sum of `(s ∩ t).card` over `t ∈ B` is at most/least `s.card * n`.

### [2021-11-23T16:49:25+00:00](https://github.com/leanprover-community/mathlib/commit/b14f22e9b3f5de3ee25b07e0f8631f4ca98af570)
chore(algebra/algebra and group_theory/group_action): move a lemma ([#10425](https://github.com/leanprover-community/mathlib/pull/#10425))

Move a lemma about the action of a group on the units of a monoid
to a more appropriate place. It accidentally ended up in
`algebra/algebra/spectrum` but a better place is
`group_theory/group_action/units`.





Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-11-23T16:49:24+00:00](https://github.com/leanprover-community/mathlib/commit/7c4f395a540b139a524c46f442a0426632acb2d1)
feat(measure_theory): add `is_R_or_C.measurable_space` ([#10417](https://github.com/leanprover-community/mathlib/pull/#10417))

Don't remove specific instances because otherwise Lean fails to generate `borel_space (ι → ℝ)`.

### [2021-11-23T16:49:23+00:00](https://github.com/leanprover-community/mathlib/commit/a1338d6293cabc1d66975a77fa5ea10e26fa592a)
feat(linear_algebra/affine_space/barycentric_coords): affine bases exist over fields ([#10333](https://github.com/leanprover-community/mathlib/pull/#10333))

Formalized as part of the Sphere Eversion project.

### [2021-11-23T16:49:22+00:00](https://github.com/leanprover-community/mathlib/commit/7a6e6d8ba873dc890dfbaf0f3d21d95e23cc820d)
feat(group_theory/schur_zassenhaus): Prove the full Schur-Zassenhaus theorem ([#10283](https://github.com/leanprover-community/mathlib/pull/#10283))

Previously, the Schur-Zassenhaus theorem was only proved for abelian normal subgroups. This PR removes the abelian assumption.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-11-23T16:49:21+00:00](https://github.com/leanprover-community/mathlib/commit/97186fe6eb4902254a7ff214804e761f1475867e)
feat(combinatorics): Hindman's theorem on finite sums ([#10029](https://github.com/leanprover-community/mathlib/pull/#10029))

A short proof of Hindman's theorem using idempotent ultrafilters.

### [2021-11-23T15:06:10+00:00](https://github.com/leanprover-community/mathlib/commit/050482cb874d46dcc7d311d85431091bfb5d020a)
doc(measure_theory/decomposition/jordan): typo ([#10430](https://github.com/leanprover-community/mathlib/pull/#10430))

### [2021-11-23T15:06:08+00:00](https://github.com/leanprover-community/mathlib/commit/53bd9d73b6edd4cdc873d969fd622be0e921fe1d)
feat(field_theory): generalize `ratfunc K` to `comm_ring K`/`is_domain K` ([#10428](https://github.com/leanprover-community/mathlib/pull/#10428))

Fixes one of the TODO's from the original ratfunc PR: apply all the easy generalizations where `K` doesn't need to be a field, only a `is_domain K` or even just `comm_ring K`.

This would allow us to use `ratfunc` in [#10421](https://github.com/leanprover-community/mathlib/pull/#10421).

### [2021-11-23T15:06:07+00:00](https://github.com/leanprover-community/mathlib/commit/7958251491b82cdff7b674a0c591a934fe95cd11)
doc(field_theory/abel_ruffini): update module doc ([#10426](https://github.com/leanprover-community/mathlib/pull/#10426))

### [2021-11-23T15:06:06+00:00](https://github.com/leanprover-community/mathlib/commit/2b754933fd4bdd8c5370396ddf199d11221f25a1)
refactor(algebra.group.basic): Convert sub_add_cancel and neg_sub to multaplicative form ([#10419](https://github.com/leanprover-community/mathlib/pull/#10419))

Currently mathlib has a rich set of lemmas connecting the addition, subtraction and negation additive group operations, but a far thinner collection of results for multiplication, division and inverse multiplicative group operations, despite the fact that the former can be generated easily from the latter via `to_additive`.

In  [#9548](https://github.com/leanprover-community/mathlib/pull/#9548) I require multiplicative forms of the existing `sub_add_cancel` and `neg_sub` lemmas. This PR refactors them as the equivalent multiplicative results and then recovers `sub_add_cancel` and `neg_sub` via `to_additive`. There is a complication in that unfortunately `group_with_zero` already has lemmas named `inv_div` and `div_mul_cancel`. I have worked around this by naming the lemmas in this PR `inv_div'` and `div_mul_cancel'` and then manually overriding the names generated by `to_additive`. Other suggestions as to how to approach this welcome.

### [2021-11-23T15:06:04+00:00](https://github.com/leanprover-community/mathlib/commit/d0e454acbad9a073a769e7febff1d11d28a0ed0a)
feat(logic/function/basic): add `function.{in,sur,bi}jective.comp_left` ([#10406](https://github.com/leanprover-community/mathlib/pull/#10406))

As far as I can tell we don't have these variations.

Note that the `surjective` and `bijective` versions do not appear next to the other composition statements, as they require `surj_inv` to concisely prove.

### [2021-11-23T13:11:55+00:00](https://github.com/leanprover-community/mathlib/commit/d9e40b4411a27d38e68a7f0ef0f7a217971e5e2f)
chore(measure_theory/integral): generalize `interval_integral.norm_integral_le_integral_norm` ([#10412](https://github.com/leanprover-community/mathlib/pull/#10412))

It was formulated only for functions `f : α → ℝ`; generalize to `f : α → E`.

### [2021-11-23T13:11:54+00:00](https://github.com/leanprover-community/mathlib/commit/28177886ee2d5f762a511c628d5090b03304c213)
chore(measure_theory/integral): add `integrable_const` for `interval_integral` ([#10410](https://github.com/leanprover-community/mathlib/pull/#10410))

### [2021-11-23T13:11:53+00:00](https://github.com/leanprover-community/mathlib/commit/3b1374472b4839c722567a13d541eb558a0ad81d)
chore(measure_theory/integral): more versions of `integral_finset_sum` ([#10394](https://github.com/leanprover-community/mathlib/pull/#10394))

* fix assumptions in existing lemmas (`∀ i ∈ s` instead of `∀ i`);
* add a version for interval integrals.

### [2021-11-23T13:11:52+00:00](https://github.com/leanprover-community/mathlib/commit/2ec6de7d244b49f525f901d6e69fc8d4182d390c)
feat(topology/connected): sufficient conditions for the preimage of a connected set to be connected ([#10289](https://github.com/leanprover-community/mathlib/pull/#10289))

and other simple connectedness results



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-11-23T13:11:50+00:00](https://github.com/leanprover-community/mathlib/commit/e8386bd4420b6b2edb31f5943177237fe7b743fb)
feat(group_theory/exponent): Define the exponent of a group ([#10249](https://github.com/leanprover-community/mathlib/pull/#10249))

This PR provides the definition and some very basic API for the exponent of a group/monoid.  




Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-11-23T13:11:48+00:00](https://github.com/leanprover-community/mathlib/commit/cf9177329ae645bed2f451d3c5aa26e3273b1e08)
refactor(*): split `order_{top,bot}` from `lattice` hierarchy ([#9891](https://github.com/leanprover-community/mathlib/pull/#9891))

Rename `bounded_lattice` to `bounded_order`.
Split out `order_{top,bot}` and `bounded_order` from the order hierarchy.
That means that we no longer have `semilattice_{sup,inf}_{top,bot}`, but use the `[order_top]` as a mixin to `semilattice_inf`, for example.
Similarly, `lattice` and `bounded_order` instead of what was before `bounded_lattice`.
Similarly, `distrib_lattice` and `bounded_order` instead of what was before `bounded_distrib_lattice`.

### [2021-11-23T11:49:18+00:00](https://github.com/leanprover-community/mathlib/commit/3fee4b9b3dbd58686a1b35e9580e1995b63206e7)
chore(control/random): Move from `system.random.basic` ([#10408](https://github.com/leanprover-community/mathlib/pull/#10408))

The top folder `system` contains a single file, apparently because it mimics Lean core's organisation. This moves it under `control.` and gets rid of one top folder.

### [2021-11-23T11:49:16+00:00](https://github.com/leanprover-community/mathlib/commit/b1a9c2e49eb18221fb4de65081e6b3a9695acfd8)
feat(analysis/normed_space/multilinear): add `norm_mk_pi_field` ([#10396](https://github.com/leanprover-community/mathlib/pull/#10396))

Also upgrade the corresponding equivalence to a `linear_isometry`.

### [2021-11-23T11:49:15+00:00](https://github.com/leanprover-community/mathlib/commit/87b0084be421bb4b07040b99ec0001caff469185)
chore(field_theory/separable): generalize theorems ([#10337](https://github.com/leanprover-community/mathlib/pull/#10337))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-11-23T11:49:14+00:00](https://github.com/leanprover-community/mathlib/commit/9cf6766f95bbaa1d81c4c535261adfc01a0414f0)
feat(order/filter/pi): define `filter.pi` and prove some properties ([#10323](https://github.com/leanprover-community/mathlib/pull/#10323))

### [2021-11-23T11:49:13+00:00](https://github.com/leanprover-community/mathlib/commit/33ea4012744998bffef6fcb0cc65da9aa601bc47)
feat(linear_algebra/affine_space/barycentric_coords): barycentric coordinates are ratio of determinants ([#10320](https://github.com/leanprover-community/mathlib/pull/#10320))

The main goal of this PR is the new lemma `affine_basis.det_smul_coords_eq_camer_coords`

A secondary goal is a minor refactor of barycentric coordinates so that they are associated to a new structure `affine_basis`. As well as making the API for affine spaces more similar to that of modules, this enables an extremely useful dot notation.

The work here could easily be split into two PRs and I will happily do so if requested.

Formalized as part of the Sphere Eversion project.

### [2021-11-23T11:49:12+00:00](https://github.com/leanprover-community/mathlib/commit/d94772bbcd04418a4ea426188f940401f1490ab0)
feat(algebra/big_operators/finprod): add finprod_div_distrib and finsum_sub_distrib ([#10044](https://github.com/leanprover-community/mathlib/pull/#10044))

### [2021-11-23T09:38:33+00:00](https://github.com/leanprover-community/mathlib/commit/ac71292958dc6f9c3e835a4474fa82593f22c293)
chore(measure_theory/integral): generalize `integral_smul_const` ([#10411](https://github.com/leanprover-community/mathlib/pull/#10411))

* generalize to `is_R_or_C`;
* add an `interval_integral` version.

### [2021-11-23T09:38:32+00:00](https://github.com/leanprover-community/mathlib/commit/8f681f12740e0af77291fa1ac5dea82be713262f)
chore(data/complex): add a few simp lemmas ([#10395](https://github.com/leanprover-community/mathlib/pull/#10395))

### [2021-11-23T09:38:31+00:00](https://github.com/leanprover-community/mathlib/commit/4d5d77088907e8780a9e4c0d1dd3add576403ede)
feat(data/complex/exponential): Add lemma add_one_le_exp ([#10358](https://github.com/leanprover-community/mathlib/pull/#10358))

This PR resolves https://github.com/leanprover-community/mathlib/blob/master/src/data/complex/exponential.lean#L1140



Co-authored-by: Iván Sadofschi Costa <isadofschi@users.noreply.github.com>

### [2021-11-23T07:23:05+00:00](https://github.com/leanprover-community/mathlib/commit/6050f9dfb8add5022a2012365ed988283cb37ce1)
feat(algebraic_geometry, category_theory): SheafedSpace has colimits ([#10401](https://github.com/leanprover-community/mathlib/pull/#10401))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-11-23T07:23:04+00:00](https://github.com/leanprover-community/mathlib/commit/ca7347c491cdf83b81bea372d0f922a2dc1618ad)
refactor(ring_theory/sub[semi]ring): move pointwise instances to their own file ([#10347](https://github.com/leanprover-community/mathlib/pull/#10347))

This matches how we have separate pointwise files for `submonoid` and `subgroup`.

All the new lemmas are direct copies of the subgroup lemmas.

### [2021-11-23T07:23:02+00:00](https://github.com/leanprover-community/mathlib/commit/a5866810e535cd2c3fe419ae2fac4a4df24c0868)
feat(category_theory/limits/shapes): Multiequalizer is the equalizer ([#10267](https://github.com/leanprover-community/mathlib/pull/#10267))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-11-23T05:35:13+00:00](https://github.com/leanprover-community/mathlib/commit/6dddef28283c07ddebf0889f229daf5b75a6c38a)
feat(topology/metric_space): range of a cauchy seq is bounded ([#10423](https://github.com/leanprover-community/mathlib/pull/#10423))

### [2021-11-23T01:33:14+00:00](https://github.com/leanprover-community/mathlib/commit/f684f61205b215a06975bf74671f1f1cd33ab483)
feat(algebra/algebra/spectrum): define spectrum and prove basic prope... ([#10390](https://github.com/leanprover-community/mathlib/pull/#10390))

…rties

Define the resolvent set and the spectrum of an element of an algebra as
a set of elements in the scalar ring. We prove a few basic facts
including that additive cosets of the spectrum commute with the
spectrum, that is, r + σ a = σ (r ⬝ 1 + a). Similarly, multiplicative
cosets of the spectrum also commute when the element r is a unit of
the scalar ring R. Finally, we also show that the units of R in
σ (a*b) coincide with those of σ (b*a).

### [2021-11-22T22:48:19+00:00](https://github.com/leanprover-community/mathlib/commit/e59e03f1d538e34001e841256780ea1a8a4669ac)
feat(measure_theory/integral/interval_integral): add an alternative definition ([#10380](https://github.com/leanprover-community/mathlib/pull/#10380))

Prove that `∫ x in a..b, f x ∂μ = sgn a b • ∫ x in Ι a b, f x ∂μ`,
where `sgn a b = if a ≤ b then 1 else -1`.

### [2021-11-22T19:46:14+00:00](https://github.com/leanprover-community/mathlib/commit/2f5af98b3982f8c35227db00929d8912a8c5db11)
feat(data/nat/prime): prime divisors ([#10318](https://github.com/leanprover-community/mathlib/pull/#10318))

Adding some basic lemmas about `factors` and `factors.to_finset`

### [2021-11-22T18:50:52+00:00](https://github.com/leanprover-community/mathlib/commit/317483a6551705f274460b7e1e116515e6b62242)
feat(analysis/calculus/parametric_integral): generalize, rename ([#10397](https://github.com/leanprover-community/mathlib/pull/#10397))

* add `integral` to lemma names;
* a bit more general
  `has_fderiv_at_integral_of_dominated_loc_of_lip'`: only require an
  estimate on `∥F x a - F x₀ a∥` instead of `∥F x a - F y a∥`;
* generalize the `deriv` lemmas to `F : 𝕜 → α → E`, `[is_R_or_C 𝕜]`.

### [2021-11-22T16:51:24+00:00](https://github.com/leanprover-community/mathlib/commit/d2ebcad18b9206724183eb688d65d8ddc367bb92)
fix(undergrad.yaml): reinstate deleted entry ([#10416](https://github.com/leanprover-community/mathlib/pull/#10416))

Revert an (I assume accidental?) deletion in [#10415](https://github.com/leanprover-community/mathlib/pull/#10415).

cc @PatrickMassot

### [2021-11-22T13:14:41+00:00](https://github.com/leanprover-community/mathlib/commit/c89616217fb41006b045ba3e31d19814e92e726a)
feat(data/finset/basic) eq_of_mem_singleton ([#10414](https://github.com/leanprover-community/mathlib/pull/#10414))

The `finset` equivalent of [set.eq_of_mem_singleton](https://leanprover-community.github.io/mathlib_docs/find/set.eq_of_mem_singleton/src)



Co-authored-by: Iván Sadofschi Costa <isadofschi@users.noreply.github.com>

### [2021-11-22T11:23:11+00:00](https://github.com/leanprover-community/mathlib/commit/d8d0c595eea142fdaf3a7190b84ed68c91193a8b)
chore(algebra/opposites): split group actions and division_ring into their own files ([#10383](https://github.com/leanprover-community/mathlib/pull/#10383))

This splits out `group_theory.group_action.opposite` and `algebra.field.opposite` from `algebra.opposites`.
The motivation is to make opposite actions available slightly earlier in the import graph.
We probably want to split out `ring` at some point too, but that's likely a more annoying change so I've left it for future work.

These lemmas are just moved, and some `_root_` prefixes eliminated by removing the surrounding `namespace`.

### [2021-11-22T11:23:10+00:00](https://github.com/leanprover-community/mathlib/commit/2aea996162e5589348b636f2acb15795879409bd)
feat(data): define a `fun_like` class of bundled homs (function + proofs) ([#10286](https://github.com/leanprover-community/mathlib/pull/#10286))

This PR introduces a class `fun_like` for types of bundled homomorphisms, like `set_like` is for bundled subobjects. This should be useful by itself, but an important use I see for it is the per-morphism class refactor, see [#9888](https://github.com/leanprover-community/mathlib/pull/#9888).

Also, `coe_fn_coe_base` now has an appropriately low priority, so it doesn't take precedence over `fun_like.has_coe_to_fun`.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-11-22T09:54:52+00:00](https://github.com/leanprover-community/mathlib/commit/7a5fac38b264fbc26927550185f57edaaf008e50)
feat(ring_theory/roots_of_unity): primitive root lemmas ([#10356](https://github.com/leanprover-community/mathlib/pull/#10356))

From the flt-regular project.

### [2021-11-22T08:59:57+00:00](https://github.com/leanprover-community/mathlib/commit/9f075796b37994a6ee8134b958dd1592d412e078)
docs(undergrad): add urls in linear algebra ([#10415](https://github.com/leanprover-community/mathlib/pull/#10415))

This uses the new possibility to put urls in `undergrad.yaml` hoping to help describing what is meant to be formalized. We should probably create wiki pages for some cases that are not so clear even with a url. There is one case where I could find only a French page and some cases where I couldn't find anything. Amazingly "endormorphism exponential" is such a case, but hopefully this example is already clear. Another kind of problematic item is the "example" item in the representation section. Presumably it should be removed and replaced with a couple of explicit examples such as "standard representation of a matrix group" or "permutation representation".

### [2021-11-22T00:26:55+00:00](https://github.com/leanprover-community/mathlib/commit/9277d4b466995dbc4bf67bab21852e8d525c3ef1)
chore(data/finset/basic): finset.prod -> finset.product in module docstring ([#10413](https://github.com/leanprover-community/mathlib/pull/#10413))

### [2021-11-21T22:33:27+00:00](https://github.com/leanprover-community/mathlib/commit/d17db717e2a0dcaa65db3a46a515c1c5975703a2)
chore(*): golf proofs about `filter.Coprod` ([#10400](https://github.com/leanprover-community/mathlib/pull/#10400))

Also add some supporting lemmas.

### [2021-11-21T22:33:26+00:00](https://github.com/leanprover-community/mathlib/commit/d98b8e0e5e5ab0c3acfe2b743cdf37b89d94c0b4)
feat(linear_algebra/bilinear_map): semilinearize bilinear maps ([#10373](https://github.com/leanprover-community/mathlib/pull/#10373))

This PR generalizes most of `linear_algebra/bilinear_map` to semilinear maps. Along the way, we introduce an instance for `module S (E →ₛₗ[σ] F)`, with `σ : R →+* S`. This allows us to define "semibilinear" maps of type `E →ₛₗ[σ] F →ₛₗ[ρ] G`, where `E`, `F` and `G` are modules over `R₁`, `R₂` and `R₃` respectively, and `σ : R₁ →+* R₃` and `ρ : R₂ →+* R₃`. See `mk₂'ₛₗ` to see how to construct such a map.



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2021-11-21T21:47:34+00:00](https://github.com/leanprover-community/mathlib/commit/8f07d75b970c96737a688d3d129a3542ef8ac62f)
feat(measure_theory/covering/differentiation): differentiation of measures ([#10101](https://github.com/leanprover-community/mathlib/pull/#10101))

If `ρ` and `μ` are two Radon measures on a finite-dimensional normed real vector space, then for `μ`-almost every `x`, the ratio `ρ (B (x, r)) / μ (B(x,r))` converges when `r` tends to `0`, towards the Radon-Nikodym derivative of `ρ` with respect to `μ`. This is the main theorem on differentiation of measures.

The convergence in fact holds for more general families of sets than balls, called Vitali families (the fact that balls form a Vitali family is a restatement of the Besicovitch covering theorem). The general version of the differentation of measures theorem is proved in this PR, following [Federer, geometric measure theory].

### [2021-11-21T20:56:17+00:00](https://github.com/leanprover-community/mathlib/commit/8ee634b0490a4b589a643c14c1f6bc28623ba10f)
feat(measure_theory): define volume on `complex` ([#10403](https://github.com/leanprover-community/mathlib/pull/#10403))

### [2021-11-21T18:40:48+00:00](https://github.com/leanprover-community/mathlib/commit/2168297eca15cec092d0589816a2f5548e3f6734)
feat(analysis/inner_product_space/projection): orthogonal group is generated by reflections ([#10381](https://github.com/leanprover-community/mathlib/pull/#10381))

Co-authored-by: Deniz Aydin



Co-authored-by: Deniz A <>

### [2021-11-21T16:46:44+00:00](https://github.com/leanprover-community/mathlib/commit/e0c0d84a763da20bea4fa6f90177e87e607cc633)
feat(topology/separation): removing a finite set from a dense set preserves density ([#10405](https://github.com/leanprover-community/mathlib/pull/#10405))

Also add the fact that one can find a dense set containing neither top nor bottom in a nontrivial dense linear order.

### [2021-11-21T11:11:05+00:00](https://github.com/leanprover-community/mathlib/commit/55b81f8b49e10d5f618be1263158999dfedccafa)
feat(measure_theory): measure preserving maps and integrals ([#10326](https://github.com/leanprover-community/mathlib/pull/#10326))

If `f` is a measure preserving map, then `∫ y, g y ∂ν = ∫ x, g (f x) ∂μ`. It was two rewrites with the old API (`hf.map_eq`, then a lemma about integral over map measure); it's one `rw` now.

Also add versions for special cases when `f` is a measurable embedding (in this case we don't need to assume measurability of `g`).

### [2021-11-20T23:37:29+00:00](https://github.com/leanprover-community/mathlib/commit/2a286527faec42b21d2ce78e85501552894eedbd)
feat(data/finset/basic): add filter_erase ([#10384](https://github.com/leanprover-community/mathlib/pull/#10384))


Like `filter_insert`, but for `erase`

### [2021-11-20T21:22:54+00:00](https://github.com/leanprover-community/mathlib/commit/32c05079fec7624107789348f890b0dd731870a2)
feat(data/nat/interval): add Ico_succ_left_eq_erase ([#10386](https://github.com/leanprover-community/mathlib/pull/#10386))

Adds `Ico_succ_left_eq_erase`. Also adds a few order lemmas needed for this.

See [this discussion](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Ico_succ_left_eq_erase_Ico/near/259180476)

### [2021-11-20T13:22:08+00:00](https://github.com/leanprover-community/mathlib/commit/b3538bfa228ce7182c78d4e6c2bf5585aad7d21d)
feat(topology/algebra/infinite_sum): add `has_sum.smul_const` etc ([#10393](https://github.com/leanprover-community/mathlib/pull/#10393))

Rename old `*.smul` to `*.const_smul`.

### [2021-11-20T11:30:32+00:00](https://github.com/leanprover-community/mathlib/commit/618447fad40e40b3aba7631c73d6cccc64aec172)
feat(analysis/special_functions/complex/arg): review, golf, lemmas ([#10365](https://github.com/leanprover-community/mathlib/pull/#10365))

* add `|z| * exp (arg z * I) = z`;
* reorder theorems to help golfing;
* prove formulas for `arg z` in terms of `arccos (re z / abs z)` in cases `0 < im z` and `im z < 0`;
* use them to golf continuity of `arg`.

### [2021-11-20T02:42:14+00:00](https://github.com/leanprover-community/mathlib/commit/bd6c6d5472aff2cf0945033010e0dd28537b6c02)
chore(scripts): update nolints.txt ([#10391](https://github.com/leanprover-community/mathlib/pull/#10391))

I am happy to remove some nolints for you!

### [2021-11-19T15:45:43+00:00](https://github.com/leanprover-community/mathlib/commit/db926f002c36955e1813c4550095528d60e318b1)
chore(category_theory/limits/shapes/pullbacks): fix diagrams in docs ([#10379](https://github.com/leanprover-community/mathlib/pull/#10379))

### [2021-11-19T14:34:11+00:00](https://github.com/leanprover-community/mathlib/commit/7638fe213346bde882d60f80975167f05c25bc4d)
doc(topology/separation): two typos ([#10382](https://github.com/leanprover-community/mathlib/pull/#10382))

### [2021-11-19T12:03:57+00:00](https://github.com/leanprover-community/mathlib/commit/e8858fdd87b340254c6cb39b5ab346a2df02b56c)
refactor(algebra/opposites): use mul_opposite for multiplicative opposite ([#10302](https://github.com/leanprover-community/mathlib/pull/#10302))

Split out `mul_opposite` from `opposite`, to leave room for an `add_opposite` in future.

Multiplicative opposites are now spelt `Aᵐᵒᵖ` instead of `Aᵒᵖ`. `Aᵒᵖ` now refers to the categorical opposite.

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-11-19T10:10:47+00:00](https://github.com/leanprover-community/mathlib/commit/d6814c584384ddf2825ff038e868451a7c956f31)
feat(*): Reduce imports to only those necessary in the entire library ([#10349](https://github.com/leanprover-community/mathlib/pull/#10349))

We reduce imports of many files in the library to only those actually needed by the content of the file, this is done by inspecting the declarations and attributes used by declarations in a file, and then computing a minimal set of imports that includes all of the necessary content. (A tool to do this was written by @jcommelin and I for this purpose).
The point of doing this is to reduce unnecessary recompilation when files that aren't needed for some file higher up the import graph are changed and everything in between gets recompiled. 
Another side benefit might be slightly faster simp / library_searches / tc lookups in some files as there may be less random declarations in the environment that aren't too relevant to the file.

The exception is that we do not remove any tactic file imports (in this run at least) as that requires more care to get right.
We also skip any `default.lean` files as the point of these is to provide a convenient way of importing a large chunk of the library (though arguably no mathlib file should import a default file that has no non-import content).

Some OLD statistics (not 100% accurate as several things changed since then):
The average number of imports of each file in the library reduces by around 2, (this equals the average number of dependencies of each file) raw numbers are `806748 / 2033` (total number of transitive links/total number files before) to `802710 / 2033` (after)
The length of the longest chain of imports in mathlib decreases from 139 to 130.
The imports (transitively) removed from the most from other files are as follows (file, decrease in number of files importing):
```
data.polynomial.degree.trailing_degree 13
linear_algebra.quotient 13
ring_theory.principal_ideal_domain 13
data.int.gcd 14
data.polynomial.div 14
data.list.rotate 15
data.nat.modeq 15
data.fin.interval 17
data.int.interval 17
data.pnat.interval 17
```

The original script generated by an import-reducing tool is at https://github.com/alexjbest/dag-tools though I did clean up the output and some weirdness after running this script
In touched files the imports are put into alphabetical order, we tried not to touch too many files that don't have their imports changed, but some were in the many merges and iterations on this.

There are a couple of changes to mathlib not to an import line (compared to master) that I couldn't resist doing that became apparent when the tool recommended deletions of imports containing named simp lemmas in the file, that weren't firing and so the tool was right to remove the import.
Another sort of issue  is discussed in https://github.com/leanprover-community/mathlib/blob/master/src/algebraic_geometry/presheafed_space/has_colimits.lean#L253, this is discussed at https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Reordering.20ext.20lemmas/near/261581547 and there seems to be currently no good way to avoid this so we just fix the proof. One can verify this with the command ` git diff origin/master -I import`

At a later point we hope to modify this tooling to suggest splits in long files by their prerequisites, but getting the library into a more minimal state w.r.t file imports seems to be important for such a tool to work well.

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Reid Barton <rwbarton@gmail.com>



Co-authored-by: Reid Barton <rwbarton@gmail.com>

### [2021-11-19T08:56:27+00:00](https://github.com/leanprover-community/mathlib/commit/5000fb0242909099b984e11951d93ca555a18687)
feat(data/polynomial/eval): is_root_(prod/map) ([#10360](https://github.com/leanprover-community/mathlib/pull/#10360))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-11-19T08:01:42+00:00](https://github.com/leanprover-community/mathlib/commit/784fe06d37c1d4548c24be5fe0e4dcd612e08acb)
feat(analysis/calculus/deriv): generalize lemmas about deriv and `smul` ([#10378](https://github.com/leanprover-community/mathlib/pull/#10378))

Allow scalar multiplication by numbers from a different field.

### [2021-11-18T21:48:21+00:00](https://github.com/leanprover-community/mathlib/commit/f3f4442562e00939880a56baa7b9ab0d5f19a570)
feat(logic/basic): define exists_unique_eq as a simp lemma ([#10364](https://github.com/leanprover-community/mathlib/pull/#10364))

### [2021-11-18T20:52:43+00:00](https://github.com/leanprover-community/mathlib/commit/d5d2c4f61873b1a906a88641bdc89b1745634ab1)
feat(field_theory/splitting_field): add a more general algebra instance as a def ([#10220](https://github.com/leanprover-community/mathlib/pull/#10220))

Unfortunately this def results in the following non-defeq diamonds in `splitting_field_aux.algebra` and `splitting_field.algebra`:
```lean
example
  (n : ℕ) {K : Type u} [field K] {f : polynomial K} (hfn : f.nat_degree = n) :
    (add_comm_monoid.nat_module : module ℕ (splitting_field_aux n f hfn)) =
  @algebra.to_module _ _ _ _ (splitting_field_aux.algebra n _ hfn) :=
rfl --fail

example : (add_comm_group.int_module _ : module ℤ (splitting_field_aux n f hfn)) =
  @algebra.to_module _ _ _ _ (splitting_field_aux.algebra f) :=
rfl --fail
```
For this reason, we do not make `splitting_field.algebra` an instance by default. The `splitting_field_aux.algebra` instance is less harmful as it is an implementation detail.

However, the new def is still perfectly good for recovering the old less-general instance, and avoids the need for `restrict_scalars.algebra`.

### [2021-11-18T17:07:15+00:00](https://github.com/leanprover-community/mathlib/commit/96540719c08ebb5f1e4f5be537812c21e445b250)
feat(topology/algebra/module): add `is_scalar_tower` and `smul_comm_class` instances for `continuous_linear_map` ([#10375](https://github.com/leanprover-community/mathlib/pull/#10375))

Also generalize some instances about `smul`.

### [2021-11-18T15:50:36+00:00](https://github.com/leanprover-community/mathlib/commit/0d09e993b65697b7b90cac9c7c5fd30002863041)
feat(measure_theory/integral/{set_to_l1,bochner}): generalize results about integrals to `set_to_fun` ([#10369](https://github.com/leanprover-community/mathlib/pull/#10369))

The Bochner integral is a particular case of the `set_to_fun` construction. We generalize some lemmas which were proved for integrals to `set_to_fun`, notably the Lebesgue dominated convergence theorem.

### [2021-11-18T14:41:58+00:00](https://github.com/leanprover-community/mathlib/commit/0ededd5dab93a6e110b616090c259f08d40e322a)
chore(analysis/calculus): use `is_R_or_C` in several lemmas ([#10376](https://github.com/leanprover-community/mathlib/pull/#10376))

### [2021-11-18T12:48:11+00:00](https://github.com/leanprover-community/mathlib/commit/198ed6bb101dee3c9af9a6b5bfb80fdd8f359978)
doc(order/monotone): fix 2 typos ([#10377](https://github.com/leanprover-community/mathlib/pull/#10377))

### [2021-11-18T02:36:10+00:00](https://github.com/leanprover-community/mathlib/commit/2f3b18529a81046a890dae6ef52dbad851e56707)
chore(scripts): update nolints.txt ([#10374](https://github.com/leanprover-community/mathlib/pull/#10374))

I am happy to remove some nolints for you!

### [2021-11-17T19:11:23+00:00](https://github.com/leanprover-community/mathlib/commit/f8cbb3e49a899226d9dc408c514c8a5940346327)
chore(.docker): don't install unnecessary toolchains ([#10363](https://github.com/leanprover-community/mathlib/pull/#10363))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-11-17T19:11:22+00:00](https://github.com/leanprover-community/mathlib/commit/5d1363ea196bdd394a8cbbf9c496ddc532f5c210)
feat(data/nat/parity): add lemmas ([#10352](https://github.com/leanprover-community/mathlib/pull/#10352))

From FLT-regular.

### [2021-11-17T18:15:31+00:00](https://github.com/leanprover-community/mathlib/commit/276ab17f0c8dd33c33236d75cdee7adfaedea8bc)
feat(linear_algebra/bilinear_form): add lemmas ([#10353](https://github.com/leanprover-community/mathlib/pull/#10353))

From FLT-regular.

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-11-17T15:37:37+00:00](https://github.com/leanprover-community/mathlib/commit/6f793bb08a94bd58d9d98ff560fdd093de5505f0)
chore(measure_theory/group/basic): drop measurability assumption ([#10367](https://github.com/leanprover-community/mathlib/pull/#10367))

### [2021-11-17T14:46:00+00:00](https://github.com/leanprover-community/mathlib/commit/e14e87ae9de00d25bad21ed258038020b4c297d8)
chore(category_theory/filtered): slightly golf two proofs ([#10368](https://github.com/leanprover-community/mathlib/pull/#10368))

### [2021-11-17T09:02:09+00:00](https://github.com/leanprover-community/mathlib/commit/c7441af1c38511c70c05fb82029af4e1cb3d6275)
feat(linear_algebra/bilinear_form): add lemmas about congr ([#10362](https://github.com/leanprover-community/mathlib/pull/#10362))

With these some of the `nondegenerate` proofs can be golfed to oblivion, rather than reproving variants of the same statement over and over again.

### [2021-11-17T09:02:08+00:00](https://github.com/leanprover-community/mathlib/commit/568435cbd1138737f02b79527c601ea72bfb361f)
chore(analysis/inner_product_space/projection): typeclass inference for completeness ([#10357](https://github.com/leanprover-community/mathlib/pull/#10357))

As of [#5408](https://github.com/leanprover-community/mathlib/pull/#5408), most lemmas about orthogonal projection onto a subspace `K` / reflection through a subspace `K` / orthogonal complement of `K` which require `K` to be complete phrase this in terms of `complete_space K` rather than `is_complete K`, so that it can be found by typeclass inference.  A few still used the old way; this PR completes the switch.

### [2021-11-17T09:02:07+00:00](https://github.com/leanprover-community/mathlib/commit/d5c2b34c0b657479d8ce43fbb567bd524659290f)
chore(analysis/mean_inequalities): split mean_inequalities into two files ([#10355](https://github.com/leanprover-community/mathlib/pull/#10355))

This PR puts all results related to power functions into a new file.

Currently, we prove convexity of `exp` and `pow`, then use those properties in `mean_inequalities`. I am refactoring some parts of the analysis library to reduce the use of derivatives. I want to prove convexity of exp without derivatives (in a future PR), prove Holder's inequality, then use it to prove the convexity of pow. This requires Holder's inequality to be in a file that does not use convexity of pow, hence the split.

I needed to change the proof of Holder's inequality since it used the generalized mean inequality (hence `pow`). I switched to the second possible proof mentioned in the file docstring.

I also moved some lemmas in `mean_inequalities` to have three main sections: AM-GM, then Young and a final section with Holder and Minkowski.

### [2021-11-17T09:02:05+00:00](https://github.com/leanprover-community/mathlib/commit/60363a4ebe38b09e2708531a7be68787f4bf7219)
feat(finset/basic): Adding `list.to_finset_union` and `list.to_finset_inter` ([#10351](https://github.com/leanprover-community/mathlib/pull/#10351))

Two tiny lemmas, matching their counterparts for `multiset`

### [2021-11-17T07:06:12+00:00](https://github.com/leanprover-community/mathlib/commit/8f6fd1b69096c6a587f745d354306c0d46396915)
lint(*): curly braces linter ([#10280](https://github.com/leanprover-community/mathlib/pull/#10280))

This PR:

1. Adds a style linter for curly braces: a line shall never end with `{` or start with `}` (modulo white space)
2. Adds `scripts/cleanup-braces.{sh,py}` to reflow lines that violate (1)
3. Runs the scripts from (2) to generate a boatload of changes in mathlib
4. Fixes one line that became to long due to (3)

### [2021-11-17T04:51:54+00:00](https://github.com/leanprover-community/mathlib/commit/2bdadb4f03accb47c06bf06f5c40a4f92efffe27)
feat(order/imp): define `lattice.imp` and `lattice.biimp` ([#10327](https://github.com/leanprover-community/mathlib/pull/#10327))

### [2021-11-16T23:48:06+00:00](https://github.com/leanprover-community/mathlib/commit/0a2a92294b5e58a433114c381dfa2b20b7da44f9)
feat(combinatorics/set_family/shadow): Shadow of a set family ([#10223](https://github.com/leanprover-community/mathlib/pull/#10223))

This defines `shadow 𝒜` where `𝒜 : finset (finset α))`.

### [2021-11-16T23:48:05+00:00](https://github.com/leanprover-community/mathlib/commit/7fec401482b190f5acce6a1b2b7693d262b4f11e)
feat(topology/metric_space/hausdorff_distance): add definition and lemmas about open thickenings of subsets ([#10188](https://github.com/leanprover-community/mathlib/pull/#10188))

Add definition and basic API about open thickenings of subsets in metric spaces, in preparation for the portmanteau theorem on characterizations of weak convergence of Borel probability measures.



Co-authored-by: kkytola <39528102+kkytola@users.noreply.github.com>

### [2021-11-16T21:57:02+00:00](https://github.com/leanprover-community/mathlib/commit/bce0ede7d4e3105008946d5b393748b93d228b49)
feat(number_theory/divisors): mem_divisors_self ([#10359](https://github.com/leanprover-community/mathlib/pull/#10359))

From flt-regular.



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-11-16T21:57:00+00:00](https://github.com/leanprover-community/mathlib/commit/8f7971aec2b8ded1e313d42af1c3001cb732bfd0)
refactor(linear_algebra/bilinear_form): Change namespace of is_refl, is_symm, and is_alt ([#10338](https://github.com/leanprover-community/mathlib/pull/#10338))

The propositions `is_refl`, `is_symm`, and `is_alt` are now in the
namespace `bilin_form`. Moreover, `is_sym` is now renamed to `is_symm`.

### [2021-11-16T21:56:59+00:00](https://github.com/leanprover-community/mathlib/commit/698eb1e3477f2aea54d35c0762d9be4b9ba2f87f)
feat(data/fin/basic): add lemmas about fin.cast ([#10329](https://github.com/leanprover-community/mathlib/pull/#10329))

### [2021-11-16T18:44:35+00:00](https://github.com/leanprover-community/mathlib/commit/9fa14a60c8cdd207b62d785d5c94497ab69364b7)
feat(topology/uniform_space): properties of uniform convergence ([#9958](https://github.com/leanprover-community/mathlib/pull/#9958))

* From the sphere eversion project
* multiple proofs were golfed by @PatrickMassot 
* Probably some proofs can be golfed quite heavily

Co-authored by: Patrick Massot <patrickmassot@free.fr>



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-11-16T18:44:34+00:00](https://github.com/leanprover-community/mathlib/commit/d6b83d87f29e6f3a1770219c7a89cf34f6682054)
feat(number_theory): define the class number ([#9071](https://github.com/leanprover-community/mathlib/pull/#9071))

We instantiate the finiteness proof of the class group for rings of integers, and define the class number of a number field, or of a separable function field, as the finite cardinality of the class group.

Co-Authored-By: Ashvni <ashvni.n@gmail.com>
Co-Authored-By: Filippo A. E. Nuccio <filippo.nuccio@univ-st-etienne.fr>



Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-11-16T15:57:33+00:00](https://github.com/leanprover-community/mathlib/commit/f780788112999bd3b5a246ff6e95e602ff979876)
feat(dynamics): define `{mul,add}_action.is_minimal` ([#10311](https://github.com/leanprover-community/mathlib/pull/#10311))

### [2021-11-16T12:48:56+00:00](https://github.com/leanprover-community/mathlib/commit/d36f17f83a0ca1b0a496805b7bb8585f58c98b0d)
feat(linear_algebra/sesquilinear_form): Add is_refl for sesq_form.is_alt ([#10341](https://github.com/leanprover-community/mathlib/pull/#10341))

Lemma `is_refl` shows that an alternating sesquilinear form is reflexive.
Refactored `sesquilinear_form` in a similar way as `bilinear_form` will be in [#10338](https://github.com/leanprover-community/mathlib/pull/#10338).

### [2021-11-16T12:48:55+00:00](https://github.com/leanprover-community/mathlib/commit/7f4b91b0793c664807ec771cfaca1dde4dd15c1e)
feat(linear_algebra/determinant): the determinant associated to the standard basis of the free module is the usual matrix determinant ([#10278](https://github.com/leanprover-community/mathlib/pull/#10278))

Formalized as part of the Sphere Eversion project.

### [2021-11-16T12:48:54+00:00](https://github.com/leanprover-community/mathlib/commit/e20af15914ad2912e42aa9ccdabed2c8ec79a439)
feat(field_theory): define the field of rational functions `ratfunc` ([#9563](https://github.com/leanprover-community/mathlib/pull/#9563))

This PR defines `ratfunc K` as the field of rational functions over a field `K`, in terms of `fraction_ring (polynomial K)`. I have been careful to use `structure`s and `@[irreducible] def`s. Not only does that make for a nicer API, it also helps quite a bit with unification since the check can stop at `ratfunc` and doesn't have to start unfolding along the lines of `fraction_field.field → localization.comm_ring → localization.comm_monoid → localization.has_mul` and/or `polynomial.integral_domain → polynomial.comm_ring → polynomial.ring → polynomial.semiring`.

Most of the API is automatically derived from the (components of the) `is_fraction_ring` instance: the map `polynomial K → ratpoly K` is `algebra_map`, the isomorphism to `fraction_ring (polynomial K)` is `is_localization.alg_equiv`, ...

As a first application to verify that the definitions work, I rewrote `function_field` in terms of `ratfunc`.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-11-16T08:37:36+00:00](https://github.com/leanprover-community/mathlib/commit/f01399c47d4c295e361e0126ee0297244796e806)
chore(order/filter/basic): add 2 trivial `simp` lemmas ([#10344](https://github.com/leanprover-community/mathlib/pull/#10344))

### [2021-11-16T08:37:35+00:00](https://github.com/leanprover-community/mathlib/commit/1181c990ec2636af4ab0f34272ce86915305ec64)
feat(algebra/order/archimedean): upgrade some `∃` to `∃!` ([#10343](https://github.com/leanprover-community/mathlib/pull/#10343))

### [2021-11-16T06:43:17+00:00](https://github.com/leanprover-community/mathlib/commit/30abde680b4585860610162bcf73136c3b0b2d8c)
chore(*): clean up some unused open statements and extra simps ([#10342](https://github.com/leanprover-community/mathlib/pull/#10342))

We clean up some specific statements that are essentially no-ops in the library, i.e. opening a namespace and then never using it and using a simp-set larger than actually needed.

This is a preparatory miscellany of small fixes for a larger PR upcoming from me and Johan to reduce imports in the library.
Hopefully merging this first will make the content of that PR clearer.

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-11-16T04:55:57+00:00](https://github.com/leanprover-community/mathlib/commit/979f0e83d764b09814936c218ea7f6248f9ad9a7)
feat(data/fin/basic): extract `div_nat`  and `mod_nat` from `fin_prod_fin_equiv` ([#10339](https://github.com/leanprover-community/mathlib/pull/#10339))

This makes it a little easier to tell which component is div and which is mod from the docs alone, and also makes these available earlier than `data/equiv/fin`.

### [2021-11-16T03:17:25+00:00](https://github.com/leanprover-community/mathlib/commit/bd80b339780fbbe7ac45debad494fa4ef47df302)
chore(ring_theory/subring): fix stale docstring ([#10340](https://github.com/leanprover-community/mathlib/pull/#10340))

Oversight from https://github.com/leanprover-community/mathlib/pull/10332

### [2021-11-16T02:30:50+00:00](https://github.com/leanprover-community/mathlib/commit/9264f30258e091cf84c1dacdc09437c724954eea)
feat(analysis/calculus/times_cont_diff): continuous affine maps are smooth ([#10335](https://github.com/leanprover-community/mathlib/pull/#10335))

Formalized as part of the Sphere Eversion project.

### [2021-11-16T00:29:07+00:00](https://github.com/leanprover-community/mathlib/commit/bff69c9f847e3930cbc9954e8e5eff837e394e02)
feat(data/nat/lattice): add ```Inf_add``` lemma  ([#10008](https://github.com/leanprover-community/mathlib/pull/#10008))

Adds a lemma about Inf on natural numbers. It will be needed for the count PR.



Co-authored-by: Vladimir Goryachev <64909175+SymmetryUnbroken@users.noreply.github.com>
Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2021-11-16T00:29:05+00:00](https://github.com/leanprover-community/mathlib/commit/ddb6c75f3badc31788607a4be7152f62eb3a0711)
feat(algebra/homology/exact): preadditive.exact_iff_exact_of_iso ([#9979](https://github.com/leanprover-community/mathlib/pull/#9979))

### [2021-11-15T22:46:44+00:00](https://github.com/leanprover-community/mathlib/commit/9074095662f8da265a0d4da89e9d3086a67a4133)
chore(linear_algebra/pi_tensor_product): add reindex_reindex ([#10336](https://github.com/leanprover-community/mathlib/pull/#10336))

### [2021-11-15T22:46:43+00:00](https://github.com/leanprover-community/mathlib/commit/a0f2c47f91f1bc811cdf965e9a25aea2f5c7e2b8)
feat(logic/relation): induction principles for `trans_gen` ([#10331](https://github.com/leanprover-community/mathlib/pull/#10331))

Corresponding induction principles already exist for `refl_trans_gen`.

### [2021-11-15T22:46:41+00:00](https://github.com/leanprover-community/mathlib/commit/65ff54c7ea01ba9d0995c60e93e8b04cfc2cea02)
feat(data/fintype/basic): add fin_injective ([#10330](https://github.com/leanprover-community/mathlib/pull/#10330))

### [2021-11-15T21:01:46+00:00](https://github.com/leanprover-community/mathlib/commit/93047c523782a1cf6d1e96dc55beeab88c63d0ab)
feat(linear_algebra/determinant): linear coordinates are ratio of determinants ([#10261](https://github.com/leanprover-community/mathlib/pull/#10261))

Formalized as part of the Sphere Eversion project.

### [2021-11-15T21:01:45+00:00](https://github.com/leanprover-community/mathlib/commit/7ccc7ae618ad2c191f0154e3b5100b484c223cc2)
feat(topology/homotopy/fundamental_groupoid): The functor from `Top` to `Groupoid` ([#10195](https://github.com/leanprover-community/mathlib/pull/#10195))

I have no idea if the ways I've done things is the right way, eg. I don't know if I need to be thinking about universes when defining the functor, so comments about that are definitely welcome.

### [2021-11-15T21:01:44+00:00](https://github.com/leanprover-community/mathlib/commit/9c03e9dc6d34a18428c76d0d64cb21a497a713cd)
feat(data/fintype): computable trunc bijection from fin ([#10141](https://github.com/leanprover-community/mathlib/pull/#10141))

When a type `X` lacks decidable equality, there is still computably a bijection `fin (card X) -> X` using `trunc`.

Also, move `fintype.equiv_fin_of_forall_mem_list` to `list.nodup.nth_le_equiv_of_forall_mem_list`.

### [2021-11-15T19:12:05+00:00](https://github.com/leanprover-community/mathlib/commit/7b607682f9c2c1386070cc4fb6c51f35948a73ce)
feat(ring_theory/subring): weaken typeclass assumption for `units.pos_subgroup` ([#10332](https://github.com/leanprover-community/mathlib/pull/#10332))





Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-11-15T19:12:03+00:00](https://github.com/leanprover-community/mathlib/commit/7803884e728bb4f0407f82f0696dda3329635588)
feat(data/pi): Composition of addition/subtraction/... of functions ([#10305](https://github.com/leanprover-community/mathlib/pull/#10305))

### [2021-11-15T19:12:01+00:00](https://github.com/leanprover-community/mathlib/commit/43ef57876ac91f904c3dff07a42bd1999cee0669)
feat(category_theory/limits): Random results about limits. ([#10285](https://github.com/leanprover-community/mathlib/pull/#10285))




Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-11-15T19:11:58+00:00](https://github.com/leanprover-community/mathlib/commit/1a47cfc7db844ee0578248899e6af1a985487905)
feat(data/finset/basic): A finset has card two iff it's `{x, y}` for some `x ≠ y` ([#10252](https://github.com/leanprover-community/mathlib/pull/#10252))

and the similar result for card three. Dumb but surprisingly annoying!

### [2021-11-15T19:11:56+00:00](https://github.com/leanprover-community/mathlib/commit/9fe0cbc8e8162311e0d8d7df6f545326b325742a)
feat(category_theory/preadditive/additive_functor): map_zero' is a redundant field, remove it ([#10229](https://github.com/leanprover-community/mathlib/pull/#10229))

The map_zero' field in the definition of an additive functor can be deduced from the map_add' field. So we remove it.

### [2021-11-15T17:27:15+00:00](https://github.com/leanprover-community/mathlib/commit/64418d7ec3a5416a91796e467c46df49a054b751)
fix(logic/basic): remove `noncomputable lemma` ([#10292](https://github.com/leanprover-community/mathlib/pull/#10292))

It's been three years since this was discussed according to the zulip archive link in the library note.

According to CI, the reason is no longer relevant. Leaving these as `noncomputable lemma` is harmful as it results in non-defeq instance diamonds sometimes as lean was not able to unfold the lemmas to get to the data underneath.

Since these are now `def`s, the linter requires them to have docstrings.

### [2021-11-15T17:27:13+00:00](https://github.com/leanprover-community/mathlib/commit/d5d60719802772d83b353660cbb4c881faaf12f4)
chore(analysis/special_functions/trigonometric/arctan): put lemmas about derivatives into a new file ([#10157](https://github.com/leanprover-community/mathlib/pull/#10157))




Co-authored-by: RemyDegenne <remydegenne@gmail.com>

### [2021-11-15T16:52:02+00:00](https://github.com/leanprover-community/mathlib/commit/02100d8125e408c69355f12631b60f7707b4c091)
feat(category_theory/sites/limits): `Sheaf J D` has colimits. ([#10334](https://github.com/leanprover-community/mathlib/pull/#10334))

We show that the category of sheaves has colimits obtained by sheafifying colimits on the level of presheaves.

### [2021-11-15T14:41:25+00:00](https://github.com/leanprover-community/mathlib/commit/bf068540a42553fbeaaaa28741c2cd068b4aa8ef)
feat(algebra/big_operators/basic): Sum over a product of finsets, right version ([#10124](https://github.com/leanprover-community/mathlib/pull/#10124))

This adds `finset.sum_prod_right` and renames `finset.sum_prod` to `finset.sum_prod_left`.

### [2021-11-15T12:56:47+00:00](https://github.com/leanprover-community/mathlib/commit/ca5c4b3744c9d665b7765dee225c82cab4bd60e3)
feat(group_theory/group_action): add a few instances ([#10310](https://github.com/leanprover-community/mathlib/pull/#10310))

* regular and opposite regular actions of a group on itself are transitive;
* the action of a group on an orbit is transitive.

### [2021-11-15T10:57:56+00:00](https://github.com/leanprover-community/mathlib/commit/ca61dbffa497f43e2bdf6c4c6f446c112043ecd1)
feat(order/sup_indep): Finite supremum independence ([#9867](https://github.com/leanprover-community/mathlib/pull/#9867))

This defines supremum independence of indexed finsets.

### [2021-11-15T08:05:28+00:00](https://github.com/leanprover-community/mathlib/commit/60bc370d72a1d04824b8333ef815221559092812)
feat(category_theory/sites/limits): `Sheaf_to_presheaf` creates limits ([#10328](https://github.com/leanprover-community/mathlib/pull/#10328))

As a consequence, we obtain that sheaves have limits (of a given shape) when the target category does, and that these limit sheaves are computed on each object of the site "pointwise".

### [2021-11-15T05:07:52+00:00](https://github.com/leanprover-community/mathlib/commit/189e0662dcb74dd2040450af8a35609b308162ea)
feat(category_theory/sites/sheafification): The sheafification of a presheaf. ([#10303](https://github.com/leanprover-community/mathlib/pull/#10303))

We construct the sheafification of a presheaf `P` taking values in a concrete category `D` with enough (co)limits, where the forgetful functor preserves the appropriate (co)limits and reflects isomorphisms.

We follow the construction on the stacks project https://stacks.math.columbia.edu/tag/00W1

**Note:** There are two very long proofs here, so I added several comments explaining what's going on.

### [2021-11-15T04:19:49+00:00](https://github.com/leanprover-community/mathlib/commit/62992fa9861c35c69f4d77962daa02a9dda67ed2)
feat(analysis/inner_product_space/spectrum): more concrete diagonalization theorem ([#10317](https://github.com/leanprover-community/mathlib/pull/#10317))

This is a second version of the diagonalization theorem for self-adjoint operators on finite-dimensional inner product spaces, stating that a self-adjoint operator admits an orthonormal basis of eigenvectors, and deducing the standard consequences (when expressed with respect to this basis the operator acts diagonally).

I have also updated `undergrad.yaml` and `overview.yaml` to cover the diagonalization theorem and other things proved in the library about Hilbert spaces.

### [2021-11-14T20:27:17+00:00](https://github.com/leanprover-community/mathlib/commit/0c8f53e529ae28343a04cf972f85a1bfbea05485)
feat(linear_algebra/trace): add lemmas about trace of linear maps ([#10279](https://github.com/leanprover-community/mathlib/pull/#10279))

Lemmas for the trace of the identity and the trace of a conjugation



Co-authored-by: antoinelab01 <66086247+antoinelab01@users.noreply.github.com>

### [2021-11-14T18:03:48+00:00](https://github.com/leanprover-community/mathlib/commit/1b51fe0f9634aca94aeef6c8f20c315ee8630b72)
feat(linear_algebra/alternating): add alternating_map.comp_linear_map ([#10314](https://github.com/leanprover-community/mathlib/pull/#10314))

### [2021-11-14T17:03:13+00:00](https://github.com/leanprover-community/mathlib/commit/8728e85b1039256e42f4e684a892e25ec213a8bb)
feat(measure_theory): drop some unneeded assumptions ([#10319](https://github.com/leanprover-community/mathlib/pull/#10319))

Prove that for a nontrivial countably generated filter there exists a sequence that converges to this filter. Use this lemma to drop some assumptions.

### [2021-11-14T15:22:16+00:00](https://github.com/leanprover-community/mathlib/commit/5307dc1ba4636485340a690ef723ad272e08212b)
feat(data/equiv/module): add module.to_module_End ([#10300](https://github.com/leanprover-community/mathlib/pull/#10300))

The new definitions are:
* `distrib_mul_action.to_module_End`
* `distrib_mul_action.to_module_aut`
* `module.to_module_End`

Everything else is a move.
This also moves the group structure on linear_equiv earlier in the import heirarchy.
This is more consistent with where it is for `linear_map`.

### [2021-11-14T15:22:15+00:00](https://github.com/leanprover-community/mathlib/commit/299af47c4218c105d65ae3f010f4a20630a1f7cf)
chore(data/fin/basic): move tuple stuff to a new file ([#10295](https://github.com/leanprover-community/mathlib/pull/#10295))

There are almost 600 lines of tuple stuff, which is definitely sufficient to justify a standalone file.

The author information has been guessed from the git history.
Floris is responsible for `cons` and `tail` which came first in [#1294](https://github.com/leanprover-community/mathlib/pull/#1294), Chris added find, and Yury and Sébastien were involved all over the place.

This is simply a cut-and-paste job, with the exception of the new module docstring which has been merged with the docstring for the tuple subheading.

### [2021-11-14T15:22:14+00:00](https://github.com/leanprover-community/mathlib/commit/7dc33bf753968cc49c343ab632d8b1e91aef6d87)
feat(data/nat/basic): Some `nat.find` lemmas ([#10263](https://github.com/leanprover-community/mathlib/pull/#10263))

This proves `nat.find_le` and `nat.find_add` and renames the current `nat.find_le` to `nat.find_mono`.

### [2021-11-14T13:46:33+00:00](https://github.com/leanprover-community/mathlib/commit/dd72ebc0bd4f4343780917ae0e6ad26eb34d2edf)
feat(data/list/big_operators): When `list.sum` is strictly positive ([#10282](https://github.com/leanprover-community/mathlib/pull/#10282))

### [2021-11-14T09:32:09+00:00](https://github.com/leanprover-community/mathlib/commit/bca827871cef9357ee3910128ab68ffbf6c948bd)
feat(algebra/lie/basic): add missing `@[ext]` and `@[simp]` lemmas ([#10316](https://github.com/leanprover-community/mathlib/pull/#10316))

### [2021-11-13T21:34:57+00:00](https://github.com/leanprover-community/mathlib/commit/3b5edd06a8315d5118a2889c441933f2424175eb)
refactor(set_theory/cardinal_ordinal): use TC assumptions instead of inequalities ([#10313](https://github.com/leanprover-community/mathlib/pull/#10313))

Assume `[fintype α]` or `[infinite α]` instead of `#α < ω` or `ω ≤ #α`.

### [2021-11-13T19:05:20+00:00](https://github.com/leanprover-community/mathlib/commit/d8c8725346a19a2f1f87e349db77dad42c506fbc)
feat(ring_theory,algebraic_geometry): Miscellaneous lemmas/def/typo corrections ([#10307](https://github.com/leanprover-community/mathlib/pull/#10307))

Split out from [#9802](https://github.com/leanprover-community/mathlib/pull/#9802) since I'm aiming at more general version.

### [2021-11-13T17:25:11+00:00](https://github.com/leanprover-community/mathlib/commit/ca56c5ad031a3a61abea88a1af1865f6a8f30d7a)
feat(measure_theory/group): define a few `measurable_equiv`s ([#10299](https://github.com/leanprover-community/mathlib/pull/#10299))

### [2021-11-13T16:06:16+00:00](https://github.com/leanprover-community/mathlib/commit/3578403f0c5cfbef907d1632ee91cee4b3cc6596)
feat(*/{group,mul}_action): more lemmas ([#10308](https://github.com/leanprover-community/mathlib/pull/#10308))

* add several lemmas about orbits and pointwise scalar multiplication;
* generalize `mul_action.orbit.mul_action` to a monoid action;
* more lemmas about pretransitive actions, use `to_additive` more;
* add dot notation lemmas `is_open.smul` and `is_closed.smul`.

### [2021-11-13T14:24:59+00:00](https://github.com/leanprover-community/mathlib/commit/b91d344929a035a15a80b84b6450239184cfd184)
chore(data/equiv/*): rename `trans_symm` and `symm_trans` to `self_trans_symm` and `symm_trans_self`. ([#10309](https://github.com/leanprover-community/mathlib/pull/#10309))

This frees up `symm_trans` to state `(a.trans b).symm = a.symm.trans b.symm`.

These names are consistent with `self_comp_symm` and `symm_comp_self`.

### [2021-11-13T10:27:54+00:00](https://github.com/leanprover-community/mathlib/commit/869cb328c99a2418c904fe11b35ab0133ff985c2)
chore(measure_theory/probability_mass_function): Refactor the `pmf` file into a definitions file and a constructions file ([#10298](https://github.com/leanprover-community/mathlib/pull/#10298))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-11-13T09:09:36+00:00](https://github.com/leanprover-community/mathlib/commit/a7e38a032ad25f89574493ee5f6a5834dc454d1d)
feat(linear_algebra/bilinear_form): add is_refl and ortho_sym for alt_bilin_form ([#10304](https://github.com/leanprover-community/mathlib/pull/#10304))

Lemma `is_refl` shows that every alternating bilinear form is reflexive.
Lemma `ortho_sym` shows that being orthogonal with respect to an alternating bilinear form is symmetric.

### [2021-11-13T02:46:06+00:00](https://github.com/leanprover-community/mathlib/commit/a2323660fb463fce6cfd1782d3cc4d027e22010e)
feat(analysis/inner_product_space/projection): orthonormal basis subordinate to an `orthogonal_family` ([#10208](https://github.com/leanprover-community/mathlib/pull/#10208))

In a finite-dimensional inner product space of `E`, there exists an orthonormal basis subordinate to a given direct sum decomposition into an `orthogonal_family` of subspaces `E`.

### [2021-11-12T23:21:30+00:00](https://github.com/leanprover-community/mathlib/commit/8bb0b6f7b4b5e36288faaf2291448348bf76c9f1)
feat(category_theory/sites/plus): If P is a sheaf, then the map from P to P^+ is an isomorphism. ([#10297](https://github.com/leanprover-community/mathlib/pull/#10297))

Also adds some simple results about (co)limits where the morphisms in the diagram are isomorphisms.



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2021-11-12T21:42:51+00:00](https://github.com/leanprover-community/mathlib/commit/55534c4f968685f85e2000161af407721fbdbb7b)
feat(data/nat/basic): recursion for set nat ([#10273](https://github.com/leanprover-community/mathlib/pull/#10273))

Adding a special case of `nat.le_rec_on` where the predicate is membership of a subset.

### [2021-11-12T20:02:20+00:00](https://github.com/leanprover-community/mathlib/commit/6afda884697a72e5f25da6a244ee70c4b553f76b)
feat(analysis/inner_product_space/spectrum): diagonalization of self-adjoint endomorphisms (finite dimension) ([#9995](https://github.com/leanprover-community/mathlib/pull/#9995))

Diagonalization of a self-adjoint endomorphism `T` of a finite-dimensional inner product space `E` over either `ℝ` or `ℂ`:  construct a linear isometry `T.diagonalization` from `E` to the direct sum of `T`'s eigenspaces, such that `T` conjugated by `T.diagonalization` is diagonal:
```lean
lemma diagonalization_apply_self_apply (v : E) (μ : eigenvalues T) :
  hT.diagonalization (T v) μ = (μ : 𝕜) • hT.diagonalization v μ
```



Co-authored-by: Frédéric Dupuis <dupuisf@iro.umontreal.ca>

### [2021-11-12T17:48:18+00:00](https://github.com/leanprover-community/mathlib/commit/f0a98494dba8a64812adbacf8b8b7f5655e180fa)
feat(category_theory/sites/sheaf): Add sheaf conditions in terms of multiforks/multiequalizers. ([#10294](https://github.com/leanprover-community/mathlib/pull/#10294))

Another PR toward sheafification.

### [2021-11-12T17:08:23+00:00](https://github.com/leanprover-community/mathlib/commit/adb5c2d69bb8bb4ae6caf7ffc755ab60943ecf0d)
chore(analysis/special_functions/trigonometric/complex): put results about derivatives into a new file ([#10156](https://github.com/leanprover-community/mathlib/pull/#10156))




Co-authored-by: RemyDegenne <remydegenne@gmail.com>

### [2021-11-12T16:30:34+00:00](https://github.com/leanprover-community/mathlib/commit/626216599c21b2ef0beabd5e76d2eeb284aecaf8)
feat(analysis/normed_space/continuous_affine_map): isometry from space of continuous affine maps to product of codomain with space of continuous linear maps ([#10201](https://github.com/leanprover-community/mathlib/pull/#10201))

Formalized as part of the Sphere Eversion project.

### [2021-11-12T15:38:34+00:00](https://github.com/leanprover-community/mathlib/commit/b9f7b4db372aa776eef36539240127fde5397250)
fix(algebra/graded_monoid): correct nonexistent names in tactic defaults ([#10293](https://github.com/leanprover-community/mathlib/pull/#10293))

These were left by a bad rename by me in the past, and resulted in the default values not actually working.

### [2021-11-12T15:38:33+00:00](https://github.com/leanprover-community/mathlib/commit/d7b5ffa00983f5d9c8fcb914d0d94019a51d6e6b)
chore(linear_algebra/multilinear): add const_of_is_empty ([#10291](https://github.com/leanprover-community/mathlib/pull/#10291))

This is extracted from `pi_tensor_product.is_empty_equiv`

### [2021-11-12T15:38:31+00:00](https://github.com/leanprover-community/mathlib/commit/c5027c915828663e6b16aae0259dcc1b4bfded38)
doc(field_theory/separable): typo ([#10290](https://github.com/leanprover-community/mathlib/pull/#10290))

### [2021-11-12T15:04:38+00:00](https://github.com/leanprover-community/mathlib/commit/6cd63207b0c59e4d78bd929d42ce1992a7f18939)
feat(group_theory/complement): `is_complement'.sup_eq_top` ([#10230](https://github.com/leanprover-community/mathlib/pull/#10230))

If `H` and `K` are complementary subgroups, then `H ⊔ K = ⊤`.

### [2021-11-12T12:24:46+00:00](https://github.com/leanprover-community/mathlib/commit/07be904260ab6e36a5769680b6012f03a4727134)
doc(README): add list of emeritus maintainers ([#10288](https://github.com/leanprover-community/mathlib/pull/#10288))

### [2021-11-12T11:49:22+00:00](https://github.com/leanprover-community/mathlib/commit/b51335c4ef58e2fb60489ac7eed83efd3479f696)
feat(category_theory/sites/plus): `P⁺` for a presheaf `P`. ([#10284](https://github.com/leanprover-community/mathlib/pull/#10284))

This file adds the construction of `P⁺`, for a presheaf `P : Cᵒᵖ ⥤ D`, whenever `C` has a Grothendieck topology `J` and `D` has the appropriate (co)limits.

Later, we will show that `P⁺⁺` is the sheafification of `P`, under certain additional hypotheses on `D`.

See https://stacks.math.columbia.edu/tag/00W1

### [2021-11-12T10:27:58+00:00](https://github.com/leanprover-community/mathlib/commit/e67909308550b519ce70e0d3f161d8fe0c9d1a48)
feat(measure_theory): define `measurable_space` instance on a quotient ([#10275](https://github.com/leanprover-community/mathlib/pull/#10275))

### [2021-11-12T09:37:57+00:00](https://github.com/leanprover-community/mathlib/commit/c45e70ac9ac6b454000e08b3e60c01d1327030c8)
chore(analysis/special_functions/pow): put lemmas about derivatives into a new file ([#10153](https://github.com/leanprover-community/mathlib/pull/#10153))

In order to keep results about continuity of the power function in the original file, we prove some continuity results directly (these were previously proved using derivatives).



Co-authored-by: RemyDegenne <remydegenne@gmail.com>

### [2021-11-12T07:59:47+00:00](https://github.com/leanprover-community/mathlib/commit/75207e917a636b2138556a2c978dded8f2ec2b05)
refactor(linear_algebra/eigenspace): refactor `eigenvectors_linearly_independent` ([#10198](https://github.com/leanprover-community/mathlib/pull/#10198))

This refactors the proof of the lemma
```lean
lemma eigenvectors_linear_independent (f : End K V) (μs : set K) (xs : μs → V)
  (h_eigenvec : ∀ μ : μs, f.has_eigenvector μ (xs μ)) :
  linear_independent K xs
```
to extract the formulation
```lean
lemma eigenspaces_independent (f : End K V) : complete_lattice.independent f.eigenspace
```
from which `eigenvectors_linear_independent` follows as a 1-liner.

I don't need this for anything (although it might have applications -- for example, cardinality lemmas) -- just think it's a possibly more elegant statement.

### [2021-11-12T07:59:46+00:00](https://github.com/leanprover-community/mathlib/commit/1019dd67a99b0b19d6117f3279656fdba0f116cc)
feat(measure_theory/probability_mass_function): Define a measure assosiated to a pmf ([#9966](https://github.com/leanprover-community/mathlib/pull/#9966))

This PR defines `pmf.to_outer_measure` and `pmf.to_measure`, where the measure of a set is given by the total probability of elements of the set, and shows that this is a probability measure.

### [2021-11-12T07:25:31+00:00](https://github.com/leanprover-community/mathlib/commit/9e1e4f01f9152bb35438b620ee5bc21d9b312f62)
feat(category_theory/sites/*): Dense subsite ([#9694](https://github.com/leanprover-community/mathlib/pull/#9694))

Defined `cover_dense` functors as functors into sites such that each object can be covered by images of the functor.
Proved that for a `cover_dense` functor `G`, any morphisms of presheaves `G ⋙ ℱ ⟶ G ⋙ ℱ'` can be glued into a 
morphism `ℱ ⟶ ℱ'`.



Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>
Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2021-11-12T04:52:56+00:00](https://github.com/leanprover-community/mathlib/commit/6fd688b595b6d62f729d6a27a608b35eb83c1d40)
chore(measure_theory): move `mutually_singular` to a new file ([#10281](https://github.com/leanprover-community/mathlib/pull/#10281))

### [2021-11-12T04:52:54+00:00](https://github.com/leanprover-community/mathlib/commit/d7e320e61332de00f1bba45df9c8a33118ea6aea)
feat(category_theory/limits): Cone limiting iff terminal. ([#10266](https://github.com/leanprover-community/mathlib/pull/#10266))

### [2021-11-12T03:51:22+00:00](https://github.com/leanprover-community/mathlib/commit/e5a79a7ac3e4a439842c01359f7be0e1f1d988e3)
feat(analysis/normed_space/star): introduce C*-algebras ([#10145](https://github.com/leanprover-community/mathlib/pull/#10145))

This PR introduces normed star rings/algebras and C*-rings/algebras, as well as a version of `star` bundled as a linear isometric equivalence.



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2021-11-12T00:55:58+00:00](https://github.com/leanprover-community/mathlib/commit/d6056eeea7e46b6f3e40411b5284360a4de4ec4c)
feat(field_theory/splitting_field): add eval_root_derivative_of_split ([#10224](https://github.com/leanprover-community/mathlib/pull/#10224))

From flt-regular.

### [2021-11-12T00:19:41+00:00](https://github.com/leanprover-community/mathlib/commit/73b2b65112189e9142652d8ca4b6011e1c5ee024)
feat(category_theory/limits/concrete_category): A lemma about concrete multiequalizers ([#10277](https://github.com/leanprover-community/mathlib/pull/#10277))

### [2021-11-11T23:18:38+00:00](https://github.com/leanprover-community/mathlib/commit/0b4c54091fe057752321bfd74df8460fcc21b375)
feat(field_theory/separable): X^n - 1 is separable iff ↑n ≠ 0. ([#9779](https://github.com/leanprover-community/mathlib/pull/#9779))

Most of the proof actually due to @Vierkantor!

Co-authored-by: Anne Baanen <t.baanen@vu.nl>



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-11-11T19:35:48+00:00](https://github.com/leanprover-community/mathlib/commit/8cd5f0eed7c551e3978f019f3898bdb89e3f5e25)
chore(category_theory/isomorphisms): Adjust priority for is_iso.comp_is_iso ([#10276](https://github.com/leanprover-community/mathlib/pull/#10276))

[See Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/iso.20to.20is_iso.20for.20types/near/261122457)

Given `f : X ≅ Y` with `X Y : Type u`, without this change, typeclass inference cannot deduce `is_iso f.hom` because `f.hom` is defeq to `(λ x, x) ≫ f.hom`, triggering a loop. 



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2021-11-11T19:35:47+00:00](https://github.com/leanprover-community/mathlib/commit/d68602581e39d6fd88c09dfedfab3d5b52f096d2)
feat(linear_algebra/pi_tensor_product): add subsingleton_equiv ([#10274](https://github.com/leanprover-community/mathlib/pull/#10274))

This is useful for constructing the tensor product of a single module, which we will ultimately need to show an isomorphism to `tensor_algebra`.

This also refactors `pempty_equiv` to use `is_empty`, which probably didn't exist at the time. This eliminates a surprising universe variable that was parameterizing `pempty`.

### [2021-11-11T19:35:45+00:00](https://github.com/leanprover-community/mathlib/commit/f99d63860af73808a89d6aada8f9cd9087d61e10)
feat(measure_theory): integral over a family of pairwise a.e. disjoint sets ([#10268](https://github.com/leanprover-community/mathlib/pull/#10268))

Also golf a few proofs

### [2021-11-11T19:35:44+00:00](https://github.com/leanprover-community/mathlib/commit/12c868a5c54b47fdaff627a3d20f5e0588c227e1)
refactor(group_theory/complement): Generalize `card_mul` to from subgroups to subsets ([#10264](https://github.com/leanprover-community/mathlib/pull/#10264))

Adds `is_complement.card_mul`, which generalizes `is_complement'.card_mul`.

### [2021-11-11T19:35:42+00:00](https://github.com/leanprover-community/mathlib/commit/72ca0d33b940852afe70f7d1ef872861b92ec1ca)
feat(linear_algebra/pi_tensor_prod): generalize actions and provide missing smul_comm_class and is_scalar_tower instance ([#10262](https://github.com/leanprover-community/mathlib/pull/#10262))

Also squeezes some `simp`s.

### [2021-11-11T19:35:41+00:00](https://github.com/leanprover-community/mathlib/commit/c7f3e5c6ac32698e53bee72144df3783cfabb5fa)
feat(group_theory/submonoid/membership): `exists_multiset_of_mem_closure` ([#10256](https://github.com/leanprover-community/mathlib/pull/#10256))

Version of `exists_list_of_mem_closure` for `comm_monoid`.

### [2021-11-11T19:35:40+00:00](https://github.com/leanprover-community/mathlib/commit/9a30dcfd9cc75b5e764f714e6f82d2c1e934cbeb)
feat(data/finset/pairwise): Interaction of `set.pairwise_disjoint` with `finset` ([#10244](https://github.com/leanprover-community/mathlib/pull/#10244))

This proves a few results about `set.pairwise_disjoint` and `finset` that couldn't go `data.set.pairwise` because of cyclic imports.

### [2021-11-11T19:35:38+00:00](https://github.com/leanprover-community/mathlib/commit/820f8d72a413c0b31b5bb44db060c15ffa1bb0a3)
feat(group_theory/index): Index of `subgroup.map` ([#10232](https://github.com/leanprover-community/mathlib/pull/#10232))

Proves `(H.map f).index = H.index`, assuming `function.surjective f` and `f.ker ≤ H`.

### [2021-11-11T19:35:37+00:00](https://github.com/leanprover-community/mathlib/commit/4b1a0577e391c0666e53a614dfc94c2f58e713e1)
feat(algebra/order/sub): An `add_group` has ordered subtraction ([#10225](https://github.com/leanprover-community/mathlib/pull/#10225))

This wraps up `sub_le_iff_le_add` in an `has_ordered_sub` instance.

### [2021-11-11T19:35:36+00:00](https://github.com/leanprover-community/mathlib/commit/a9c3ab5d24f34c24a66e2aa5579bf1361c39b78f)
feat(data/polynomial): assorted lemmas on division and gcd of polynomials ([#9600](https://github.com/leanprover-community/mathlib/pull/#9600))

This PR provides a couple of lemmas involving the division and gcd operators of polynomials that I needed for [#9563](https://github.com/leanprover-community/mathlib/pull/#9563). The ones that generalized to `euclidean_domain` and/or `gcd_monoid` are provided in the respective files.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-11-11T19:02:03+00:00](https://github.com/leanprover-community/mathlib/commit/01e7b20995f2e0e468e34a5c940eeabe369d27a8)
feat(analysis/subadditive): prove that, if u_n is subadditive, then u_n / n converges. ([#10258](https://github.com/leanprover-community/mathlib/pull/#10258))

### [2021-11-11T14:48:45+00:00](https://github.com/leanprover-community/mathlib/commit/4df3cd769798ee2aef0ff5f3b36c5fa92f776342)
chore(analysis/special_functions/complex/log): move results about derivatives to a new file ([#10117](https://github.com/leanprover-community/mathlib/pull/#10117))




Co-authored-by: RemyDegenne <remydegenne@gmail.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-11-11T14:04:29+00:00](https://github.com/leanprover-community/mathlib/commit/6e268cd87498c7a41e6da7b4793a3231b98fa7da)
chore(probability_theory/notation): change `volume` to `measure_theory.measure.volume` ([#10272](https://github.com/leanprover-community/mathlib/pull/#10272))

### [2021-11-11T13:22:36+00:00](https://github.com/leanprover-community/mathlib/commit/270c644c0b6bfb2ba5631663983e566f71433604)
feat(measure_theory): add `ae_measurable.sum_measure` ([#10271](https://github.com/leanprover-community/mathlib/pull/#10271))

Also add a few supporting lemmas.

### [2021-11-11T11:44:13+00:00](https://github.com/leanprover-community/mathlib/commit/c062d9ea4658ae1202d025b990b5de4ba5426700)
feat(*): more bundled versions of `(fin 2 → α) ≃ (α × α)` ([#10214](https://github.com/leanprover-community/mathlib/pull/#10214))

Also ensure that the inverse function uses vector notation when possible.

### [2021-11-11T10:26:15+00:00](https://github.com/leanprover-community/mathlib/commit/e4a882dd20a0a10d9c7f7214472969e7298620a1)
feat(measure_theory): a file about null measurable sets/functions ([#10231](https://github.com/leanprover-community/mathlib/pull/#10231))

* Move definitions and lemmas about `null_measurable` to a new file.
* Redefine, rename, review API.

### [2021-11-11T09:29:24+00:00](https://github.com/leanprover-community/mathlib/commit/d5964a9ac724f38d2f99d2c1e5950c0b2c3480f8)
feat(measure_theory): `int.floor` etc are measurable ([#10265](https://github.com/leanprover-community/mathlib/pull/#10265))

## API changes

### `algebra/order/archimedean`

* rename `rat.cast_floor` to `rat.floor_cast` to reflect the order of operations;
* same for `rat.cast_ceil` and `rat.cast_round`;
* add `rat.cast_fract`.

### `algebra/order/floor`

* add `@[simp]` to `nat.floor_eq_zero`;
* add `nat.floor_eq_iff'`, `nat.preimage_floor_zero`, and `nat.preimage_floor_of_ne_zero`;
* add `nat.ceil_eq_iff`, `nat.preimage_ceil_zero`, and `nat.preimage_ceil_of_ne_zero`;
* add `int.preimage_floor_singleton`;
* add `int.self_sub_floor`, `int.fract_int_add`, `int.preimage_fract`, `int.image_fract`;
* add `int.preimage_ceil_singleton`.

### `measure_theory/function/floor`

New file. Prove that the functions defined in `algebra.order.floor` are measurable.

### [2021-11-11T07:23:55+00:00](https://github.com/leanprover-community/mathlib/commit/8c1fa705d7b731a6d5f752a27943c34f8177d6f2)
feat(category_theory/limits/concrete_category): Some lemmas about filtered colimits ([#10270](https://github.com/leanprover-community/mathlib/pull/#10270))

This PR adds some lemmas about (filtered) colimits in concrete categories which are preserved under the forgetful functor.

This will be used later for the sheafification construction.

### [2021-11-10T21:52:09+00:00](https://github.com/leanprover-community/mathlib/commit/dfa736397a3e250cc3c02004487e0f47a0f57657)
feat(analysis/normed_space/finite_dimension): finite-dimensionality of spaces of continuous linear map ([#10259](https://github.com/leanprover-community/mathlib/pull/#10259))

### [2021-11-10T20:44:38+00:00](https://github.com/leanprover-community/mathlib/commit/3c2bc2e797d010b8c0b5ea13fb404b9c4213bf3b)
lint(scripts/lint-style.py): add indentation linter ([#10257](https://github.com/leanprover-community/mathlib/pull/#10257))

### [2021-11-10T17:25:44+00:00](https://github.com/leanprover-community/mathlib/commit/6f10557a512fac2e273b39403d56807f52423a39)
refactor(order): order_{top,bot} as mixin ([#10097](https://github.com/leanprover-community/mathlib/pull/#10097))

This changes `order_top α` / `order_bot α` to _require_ `has_le α` instead of _extending_ `partial_order α`.
As a result, `order_top` can be combined with other lattice typeclasses. This lends itself to more refactors downstream, such as phrasing lemmas that currently require orders/semilattices and top/bot to provide them as separate TC inference, instead of "bundled" classes like `semilattice_inf_top`.

This refactor also provides the basis for making more consistent the "extended" algebraic classes, like "e(nn)real", "enat", etc. Some proof terms for lemmas about `nnreal` and `ennreal` have been switched to rely on more direct coercions from the underlying non-extended type or other (semi)rings.

Modify `semilattice_{inf,sup}_{top,bot}` to not directly inherit from
`order_{top,bot}`. Instead, they are now extending from `has_{top,bot}`. Extending `order_{top,bot}` is now only possible is `has_le` is provided to the TC cache at `extends` declaration time, when using `old_structure_cmd true`. That is,
```
set_option old_structure_cmd true

class mnwe (α : Type u) extends semilattice_inf α, order_top α.
```
errors with
```
type mismatch at application
  @semilattice_inf.to_partial_order α top
term
  top
has type
  α
but is expected to have type
  semilattice_inf α
```
One can make this work through one of three ways:
No `old_structure_cmd`, which is unfriendly to the rest of the class hierarchy
Require `has_le` in `class mwe (α : Type u) [has_le α] extends semilattice_inf α, order_top α.`, which is unfriendly to the existing hierarchy and how lemmas are stated.
Provide an additional axiom on top of a "data-only" TC and have a low-priority instance:
```
class semilattice_inf_top (α : Type u) extends semilattice_inf α, has_top α :=
(le_top : ∀ a : α, a ≤ ⊤)

@[priority 100]
instance semilattice_inf_top.to_order_top : order_top α :=
{ top := ⊤,  le_top := semilattice_inf_top.le_top }
```
The third option is chosen in this refactor.

Pulled out from [#9891](https://github.com/leanprover-community/mathlib/pull/#9891), without the semilattice refactor.



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-11-10T16:26:10+00:00](https://github.com/leanprover-community/mathlib/commit/cd5cb44194c7eb90cb314425a757fd4f621ac342)
chore(set_theory/cardinal_ordinal): golf some proofs ([#10260](https://github.com/leanprover-community/mathlib/pull/#10260))

### [2021-11-10T14:52:29+00:00](https://github.com/leanprover-community/mathlib/commit/8aadbcb73f0ebd2d3b4db78ee01dbcfa1c438995)
feat(linear_algebra/*_algebra): add some simp lemmas about the algebra map and generators of free constructions ([#10247](https://github.com/leanprover-community/mathlib/pull/#10247))

These are quite repetitive, but I'm not sure how to generalize

### [2021-11-10T14:52:28+00:00](https://github.com/leanprover-community/mathlib/commit/543fcef17c83487b768063fac8220f4ef34a1505)
chore(algebra/group_power/lemmas): minimize imports ([#10246](https://github.com/leanprover-community/mathlib/pull/#10246))

Most of these were imported transitively anyway, but `data.list.basic` is unneeded.

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-11-10T14:52:26+00:00](https://github.com/leanprover-community/mathlib/commit/444b596430fc60189257e431403b75778b67bb9b)
doc(ring_theory/norm) `norm_eq_prod_embeddings` docstring ([#10242](https://github.com/leanprover-community/mathlib/pull/#10242))




Co-authored-by: Chris Birkbeck <56166236+CBirkbeck@users.noreply.github.com>

### [2021-11-10T14:52:24+00:00](https://github.com/leanprover-community/mathlib/commit/bbbefe4e950697359a6a0359349a241f35812e32)
feat(measure_theory/constructions/{pi,prod}): drop some measurability assumptions ([#10241](https://github.com/leanprover-community/mathlib/pull/#10241))

Some lemmas (most notably `prod_prod` and `pi_pi`) are true for non-measurable sets as well.

### [2021-11-10T14:52:23+00:00](https://github.com/leanprover-community/mathlib/commit/eadd4400e239f46733aa23ba66e92aa8cc483147)
feat(group_theory/index): `card_mul_index` ([#10228](https://github.com/leanprover-community/mathlib/pull/#10228))

Proves `nat.card H * H.index = nat.card G` as the special case of `K.relindex H * H.index = K.index` when `K = ⊥`.
 


Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-11-10T14:52:21+00:00](https://github.com/leanprover-community/mathlib/commit/2b57ee7f4b9204bc3df3e84c09880b3fd5989744)
fix(*): fix many indentation mistakes ([#10163](https://github.com/leanprover-community/mathlib/pull/#10163))

### [2021-11-10T14:52:20+00:00](https://github.com/leanprover-community/mathlib/commit/f41854e88b017f01279de9aec2c13923e916ba6d)
feat(ring_theory/ideal/over): algebra structure on R/p → S/P for `P` lying over `p` ([#9858](https://github.com/leanprover-community/mathlib/pull/#9858))

This PR shows `P` lies over `p` if there is an injective map completing the square `R/p ← R —f→ S → S/P`, and conversely that there is a (not necessarily injective, since `f` doesn't have to be) map completing the square if `P` lies over `p`. Then we specialize this to the case where `P = map f p` to provide an `algebra p.quotient (map f p).quotient` instance.

This algebra instance is useful if you want to study the extension `R → S` locally at `p`, e.g. to show `R/p : S/pS` has the same dimension as `Frac(R) : Frac(S)` if `p` is prime.

### [2021-11-10T14:52:18+00:00](https://github.com/leanprover-community/mathlib/commit/e1fea3a1b00f78ef53c7778adc3fe5ae1bd92378)
feat(ring_theory/ideal): the product and infimum of principal ideals ([#9852](https://github.com/leanprover-community/mathlib/pull/#9852))

Three useful lemmas for applying the Chinese remainder theorem when an ideal is generated by one, non-prime, element.

### [2021-11-10T13:12:51+00:00](https://github.com/leanprover-community/mathlib/commit/bfd3a89c6fcf5c23314599f549efa75b1d35acf7)
doc(algebra/ring/basic): fix typo ([#10250](https://github.com/leanprover-community/mathlib/pull/#10250))

### [2021-11-10T06:43:42+00:00](https://github.com/leanprover-community/mathlib/commit/18412ef1187bea376ea6b1ec9d5b738db812961f)
feat(data/nat/cast): Cast of natural division is less than division of casts ([#10251](https://github.com/leanprover-community/mathlib/pull/#10251))

### [2021-11-10T02:49:27+00:00](https://github.com/leanprover-community/mathlib/commit/3f173e11d34eee604c3251011d39255c42f71247)
feat(group_theory/complement): iff-lemmas for when bottom and top subgroups are complementary ([#10143](https://github.com/leanprover-community/mathlib/pull/#10143))

Adds iff lemmas for when bottom and top subgroups are complementary.

### [2021-11-09T23:52:35+00:00](https://github.com/leanprover-community/mathlib/commit/64289fe07bc5ac58c1f4f43d1eec6a6a5c8cb1c5)
chore(group_theory/order_of_element): fix weird lemma name ([#10245](https://github.com/leanprover-community/mathlib/pull/#10245))

### [2021-11-09T23:52:33+00:00](https://github.com/leanprover-community/mathlib/commit/10d3d256d8b3baa7875b3604ef0ba1f682a38089)
chore(set_theory/cardinal): fix name & reorder universes ([#10236](https://github.com/leanprover-community/mathlib/pull/#10236))

* add `cardinal.lift_injective`, `cardinal.lift_eq_zero`;
* reorder universe arguments in `cardinal.lift_nat_cast` to match
`cardinal.lift` and `ulift`;
* rename `cardinal.nat_eq_lift_eq_iff` to `cardinal.nat_eq_lift_iff`;
* add `@[simp]` to `cardinal.lift_eq_zero`,
`cardinal.lift_eq_nat_iff`, and `cardinal.nat_eq_lift_iff`.

### [2021-11-09T23:52:32+00:00](https://github.com/leanprover-community/mathlib/commit/7bdb6b3919e86b7ed0061c5174b53c6e541f7c86)
feat(algebra/module/linear_map,linear_algebra/alternating,linear_algebra/multilinear/basic): no_zero_smul_divisors instances ([#10234](https://github.com/leanprover-community/mathlib/pull/#10234))

Add `no_zero_smul_divisors` instances for linear, multilinear and alternating maps, given such instances for the codomain of the maps.

This also adds some missing `coe_smul` lemmas on these types.

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-11-09T17:02:26+00:00](https://github.com/leanprover-community/mathlib/commit/a2810d97e7cd08d40ee24f4103d0e688952b0bcf)
feat(data/int/basic): coercion subtraction inequality ([#10054](https://github.com/leanprover-community/mathlib/pull/#10054))

Adding to simp a subtraction inequality over coercion from int to nat



Co-authored-by: cocohearts <41932135+cocohearts@users.noreply.github.com>

### [2021-11-09T14:26:32+00:00](https://github.com/leanprover-community/mathlib/commit/35d574e30f611143bb0f996b6e5d7a5c7738a5b9)
feat(linear_algebra/determinant): alternating maps as multiples of determinant ([#10233](https://github.com/leanprover-community/mathlib/pull/#10233))

Add the lemma that any alternating map with the same type as the
determinant map with respect to a basis is a multiple of the
determinant map (given by the value of the alternating map applied to
the basis vectors).

### [2021-11-09T10:46:44+00:00](https://github.com/leanprover-community/mathlib/commit/00d9b9f58b768210992759751e71a53222d2d9a1)
feast(ring_theory/norm): add norm_eq_prod_embeddings ([#10226](https://github.com/leanprover-community/mathlib/pull/#10226))

We prove that the norm equals the product of the embeddings in an algebraically closed field.

Note that we follow a slightly different path than for the trace, since transitivity of the norm is more delicate, and we avoid it.

From flt-regular.

### [2021-11-09T09:20:22+00:00](https://github.com/leanprover-community/mathlib/commit/11ced180fa2466a6fd2ba125fb80b08d5c7be174)
feat(algebra/lie/classical): Use computable matrix inverses where possible ([#10218](https://github.com/leanprover-community/mathlib/pull/#10218))

### [2021-11-09T09:20:21+00:00](https://github.com/leanprover-community/mathlib/commit/8614615287863f8bb72d0f394ec9938fbacddadd)
refactor(data/nat/interval): simp for Ico_zero_eq_range ([#10211](https://github.com/leanprover-community/mathlib/pull/#10211))


This PR makes two changes: It refactors `nat.Ico_zero_eq_range` from `Ico 0 a = range a` to `Ico 0 = range`, and makes the lemma a simp lemma.

These changes feel good to me, but feel free to close this if this is not the direction we want to go with this lemma.

### [2021-11-09T07:29:49+00:00](https://github.com/leanprover-community/mathlib/commit/0b093e6a88b3a44026806caf95b49d7b2b398a7a)
feat(order/bounded_lattice): a couple of basic instances about with_bot still not having a top if the original preorder didn't and vice versa ([#10215](https://github.com/leanprover-community/mathlib/pull/#10215))

Used in the flt-regular project.

### [2021-11-09T03:25:48+00:00](https://github.com/leanprover-community/mathlib/commit/6af6f67052864e96ccab151b3e3895ba579e2e26)
chore(scripts): update nolints.txt ([#10240](https://github.com/leanprover-community/mathlib/pull/#10240))

I am happy to remove some nolints for you!

### [2021-11-09T03:25:47+00:00](https://github.com/leanprover-community/mathlib/commit/9d49c4adf4fe952c4ed017127e1af21e9e55cd32)
doc(data/finset/fold): fix typo ([#10239](https://github.com/leanprover-community/mathlib/pull/#10239))

### [2021-11-09T03:25:45+00:00](https://github.com/leanprover-community/mathlib/commit/223f6590603007d55b77713e9e1f7cfbb80e7cc5)
chore(linear_algebra/basic): remove a duplicate proof, generalize map_span_le ([#10219](https://github.com/leanprover-community/mathlib/pull/#10219))

### [2021-11-09T01:42:52+00:00](https://github.com/leanprover-community/mathlib/commit/424012aa4b485b86ae26e237e9b39c4ad5a1ac03)
chore(*): bump to Lean 3.35.1 ([#10237](https://github.com/leanprover-community/mathlib/pull/#10237))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-11-08T22:17:41+00:00](https://github.com/leanprover-community/mathlib/commit/440163b41bdae0a19a32cf0218ee186e139fb12d)
chore(topology/algebra/mul_action): define `has_continuous_vadd` using `to_additive` ([#10227](https://github.com/leanprover-community/mathlib/pull/#10227))

Make additive version of the theory of `has_continuous_smul`, i.e., `has_continuous_vadd`, using `to_additive`.  I've been fairly conservative in adding `to_additive` tags -- I left them off lemmas that didn't seem like they'd be relevant for typical additive actions, like those about `units` or `group_with_zero`.

Also make `normed_add_torsor` an instance of `has_continuous_vadd` and use this to establish some of its continuity API.

### [2021-11-08T16:03:11+00:00](https://github.com/leanprover-community/mathlib/commit/2e4813ddf1ddebcd2e89d59a3c878b6620d0bf47)
feat(linear_algebra/matrix/nonsingular_inverse): add invertible_equiv_det_invertible ([#10222](https://github.com/leanprover-community/mathlib/pull/#10222))

### [2021-11-08T16:03:10+00:00](https://github.com/leanprover-community/mathlib/commit/1519cd77036afaf7ca5a198e3dcb582efff32677)
chore(set_theory/cardinal): more simp, fix LHS/RHS ([#10212](https://github.com/leanprover-community/mathlib/pull/#10212))

While `coe (fintype.card α)` is a larger expression than `#α`, it allows us to compute the cardinality of a finite type provided that we have a `simp` lemma for `fintype.card α`. It also plays well with lemmas about coercions from `nat` and `cardinal.lift`.

* rename `cardinal.fintype_card` to `cardinal.mk_fintype`, make it a `@[simp]` lemma;
* deduce other cases (`bool`, `Prop`, `unique`, `is_empty`) from it;
* rename `cardinal.finset_card` to `cardinal.mk_finset`, swap LHS/RHS;
* rename `ordinal.fintype_card` to `ordinal.type_fintype`.

### [2021-11-08T16:03:09+00:00](https://github.com/leanprover-community/mathlib/commit/66dea297a41975c240be10f0f2bf9085b7c30570)
feat(analysis/convex/specific_functions): Strict convexity of `exp`, `log` and `pow` ([#10123](https://github.com/leanprover-community/mathlib/pull/#10123))

This strictifies the results of convexity/concavity of `exp`/`log` and add the strict versions for `pow`, `zpow`, `rpow`.

I'm also renaming `convex_on_pow_of_even` to `even.convex_on_pow` for dot notation.

### [2021-11-08T16:03:08+00:00](https://github.com/leanprover-community/mathlib/commit/ef68f55623bfe873ce53f56223941f7966ce0ef9)
feat(linear_algebra/multilinear/basis): multilinear maps on basis vectors ([#10090](https://github.com/leanprover-community/mathlib/pull/#10090))

Add two versions of the fact that a multilinear map on finitely many
arguments is determined by its values on basis vectors.  The precise
requirements for each version follow from the results used in the
proof: `basis.ext_multilinear_fin` uses the `curry` and `uncurry`
results to deduce it from `basis.ext` and thus works for multilinear
maps on a family of modules indexed by `fin n`, while
`basis.ext_multilinear` works for an arbitrary `fintype` index type
but is limited to the case where the modules for all the arguments
(and the bases used for those modules) are the same, since it's
derived from the previous result using `dom_dom_congr` which only
handles the case where all the modules are the same.

This is in preparation for proving a corresponding result for
alternating maps, for which the case of all argument modules the same
suffices.

There is probably room for making results more general.

### [2021-11-08T14:15:15+00:00](https://github.com/leanprover-community/mathlib/commit/eb678347382f97665a65445ac5dbd940655bcc7d)
chore(ring_theory/noetherian): golf and generalize map_fg_of_fg ([#10217](https://github.com/leanprover-community/mathlib/pull/#10217))

### [2021-11-08T14:15:14+00:00](https://github.com/leanprover-community/mathlib/commit/5ba41d8f36c41e24be7305abea321594bc9db2e2)
feat(algebra/direct_sum): specialize `submodule_is_internal.independent` to add_subgroup ([#10108](https://github.com/leanprover-community/mathlib/pull/#10108))

This adds the lemmas `disjoint.map_order_iso` and `complete_lattice.independent.map_order_iso` (and `iff` versions), and uses them to transfer some results on `submodule`s to `add_submonoid`s and `add_subgroup`s.

### [2021-11-08T13:14:28+00:00](https://github.com/leanprover-community/mathlib/commit/0dabcb8ee88e56fae6ee9f664e387910be10b4c9)
chore(ring_theory/ideal/operations): relax the base ring of algebras from comm_ring to comm_semiring ([#10024](https://github.com/leanprover-community/mathlib/pull/#10024))

This also tidies up some variables and consistently uses `B` instead of `S` for the second algebra.

One proof in `ring_theory/finiteness.lean` has to be redone because typeclass search times out where it previously did not.

Thankfully, the new proof is shorter anyway.

### [2021-11-08T11:43:24+00:00](https://github.com/leanprover-community/mathlib/commit/b4a5b013cd055c91c752c81dce2a1a1d9011f96c)
feat(data/finset/basic): add card_insert_eq_ite ([#10209](https://github.com/leanprover-community/mathlib/pull/#10209))


Adds the lemma `card_insert_eq_ite` combining the functionality of `card_insert_of_not_mem` and `card_insert_of_mem`, analogous to how `card_erase_eq_ite`.

### [2021-11-08T11:43:23+00:00](https://github.com/leanprover-community/mathlib/commit/2fd6a77ccf7b68facd5536b0219dd4614c140af3)
chore(algebra/algebra/basic): add `algebra.coe_linear_map` ([#10204](https://github.com/leanprover-community/mathlib/pull/#10204))

### [2021-11-08T11:43:20+00:00](https://github.com/leanprover-community/mathlib/commit/4dd7ecae1253535002593d9950d29a09b8213e0c)
feat(analysis/{seminorm, convex/specific_functions}): A seminorm is convex ([#10203](https://github.com/leanprover-community/mathlib/pull/#10203))

This proves `seminorm.convex_on`, `convex_on_norm` (which is morally a special case of the former) and leverages it to golf `seminorm.convex_ball`.

This also fixes the explicitness of arguments of `convex_on.translate_left` and friends.

### [2021-11-08T11:43:19+00:00](https://github.com/leanprover-community/mathlib/commit/e44aa6e7947e087fe328e949573b4cbefc23b4a6)
feat(linear_algebra/basic): some lemmas about span and restrict_scalars ([#10167](https://github.com/leanprover-community/mathlib/pull/#10167))

### [2021-11-08T11:43:18+00:00](https://github.com/leanprover-community/mathlib/commit/fb0cfbd4f8068550329cf7878ddf0e25cc7e7685)
feat(measure_theory/measure/complex): define complex measures ([#10166](https://github.com/leanprover-community/mathlib/pull/#10166))

Complex measures was defined to be a vector measure over ℂ without any API. This PR adds some basic definitions about complex measures and proves the complex version of the Lebesgue decomposition theorem.

### [2021-11-08T11:43:17+00:00](https://github.com/leanprover-community/mathlib/commit/e4a1e80fe5b5ecf29e0efcdb3cde5cba2ac87550)
feat(analysis/convex/combination): Convex hull of a `set.prod` and `set.pi` ([#10125](https://github.com/leanprover-community/mathlib/pull/#10125))

This proves
* `(∀ i, convex 𝕜 (t i)) → convex 𝕜 (s.pi t)`
* `convex_hull 𝕜 (s.prod t) = (convex_hull 𝕜 s).prod (convex_hull 𝕜 t)`
* `convex_hull 𝕜 (s.pi t) = s.pi (convex_hull 𝕜 ∘ t)`

### [2021-11-08T11:43:16+00:00](https://github.com/leanprover-community/mathlib/commit/1fac00e8ce39f1c0a69ea648c6be8f37080be064)
feat(analysis): lemmas about `arg` and `exp_map_circle` ([#10066](https://github.com/leanprover-community/mathlib/pull/#10066))

### [2021-11-08T11:43:15+00:00](https://github.com/leanprover-community/mathlib/commit/48abaedc8f0d2f42a9fb43f3a10ec1d168f3a7db)
feat(analysis/special_functions/complex/arg): continuity of arg outside of the negative real half-line ([#9500](https://github.com/leanprover-community/mathlib/pull/#9500))

### [2021-11-08T10:06:42+00:00](https://github.com/leanprover-community/mathlib/commit/32c8445a263167d46be37f1a26283a8ee9054a7a)
split(data/list/*): split off `data.list.basic` ([#10164](https://github.com/leanprover-community/mathlib/pull/#10164))

Killing the giants. This moves 700 lines off `data.list.basic` that were about
* `list.sum` and `list.product` into `data.list.big_operators`
* `list.countp` and `list.count` into `data.list.count`
* `list.sigma` and `list.prod` into `data.list.sigma_prod`

### [2021-11-08T08:27:27+00:00](https://github.com/leanprover-community/mathlib/commit/380d6cae8eb27507d2ea59e1b1bf8c59e616ce53)
chore(algebra/direct_sum/module): extract out common `variables` ([#10207](https://github.com/leanprover-community/mathlib/pull/#10207))

Slight reorganization to extract out repeatedly-used variable declarations, and update module docstring.  No changes to the content.

### [2021-11-08T08:27:25+00:00](https://github.com/leanprover-community/mathlib/commit/bf242b78633d682aac5f6e29b371a3f45b975b11)
feat(algebra/order/with_zero): add le lemmas ([#10183](https://github.com/leanprover-community/mathlib/pull/#10183))




Co-authored-by: María Inés de Frutos-Fernández <88536493+mariainesdff@users.noreply.github.com>

### [2021-11-08T08:27:23+00:00](https://github.com/leanprover-community/mathlib/commit/e0aa9f071a69db13cd024ca554d69334fc2fe5d4)
refactor(linear_algebra/matrix/nonsingular_inverse): clean up ([#10175](https://github.com/leanprover-community/mathlib/pull/#10175))

This file is a mess, and switches back and forth between three different inverses, proving the same things over and over again.

This pulls all the `invertible` versions of these statements to the top, and uses them here and there to golf proofs.

The lemmas `nonsing_inv_left_right` and `nonsing_inv_right_left` are merged into a single lemma `mul_eq_one_comm`.
The lemma `inv_eq_nonsing_inv_of_invertible` has been renamed to `inv_of_eq_nonsing_inv`

This also adds two new lemmas `inv_of_eq` and `det_inv_of`, both of which have trivial proofs.

### [2021-11-08T08:27:21+00:00](https://github.com/leanprover-community/mathlib/commit/bc55cd785d1c29fb1b276f5933dfc7f5b2ebf0eb)
feat(archive/imo) : Add solution to IMO 1994 Q1 ([#10171](https://github.com/leanprover-community/mathlib/pull/#10171))

IMO 1994 Q1


Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-11-08T08:27:20+00:00](https://github.com/leanprover-community/mathlib/commit/62f94ad626894f253235b1037df2bbc42bc1a6da)
feat(measure_theory/measurable_space): define `measurable_embedding` ([#10023](https://github.com/leanprover-community/mathlib/pull/#10023))

This way we can generalize our theorems about `measurable_equiv` and `closed_embedding`s.

### [2021-11-08T06:58:20+00:00](https://github.com/leanprover-community/mathlib/commit/c50c2c3247594b8ed14595bcae4609ccda78f89a)
docs(algebra/big_operators): correct documentation for prod ([#10206](https://github.com/leanprover-community/mathlib/pull/#10206))

### [2021-11-07T10:12:36+00:00](https://github.com/leanprover-community/mathlib/commit/ae98aad6ef2e141d89ca1540b270a4dd5b4ecea6)
chore(measure_theory/measure): review API of `mutually_singular` ([#10186](https://github.com/leanprover-community/mathlib/pull/#10186))

### [2021-11-07T09:34:49+00:00](https://github.com/leanprover-community/mathlib/commit/7a8a9146dc8c5e291e772a8fbc0ae96bfb256ac2)
refactor(measure_theory/function/l1_space): remove hypothesis ([#10185](https://github.com/leanprover-community/mathlib/pull/#10185))

* from `tendsto_lintegral_norm_of_dominated_convergence`
* Missed this in [#10181](https://github.com/leanprover-community/mathlib/pull/#10181)
* Add comment about the ability to weaker `bound_integrable`.

### [2021-11-07T05:17:04+00:00](https://github.com/leanprover-community/mathlib/commit/7d240ce120bfc5934b507747155b55bca59ab6cb)
chore(data/matrix/notation): split into 2 files ([#10199](https://github.com/leanprover-community/mathlib/pull/#10199))

I want to use `![a, b]` notation in some files that don't need to import `data.matrix.basic`.

### [2021-11-06T22:22:28+00:00](https://github.com/leanprover-community/mathlib/commit/daac85454acca104bef9bea38877c725d25090c6)
feat(analysis/special_functions/log): Relating `log`-inequalities and `exp`-inequalities ([#10191](https://github.com/leanprover-community/mathlib/pull/#10191))

This proves `log x ≤ y ↔ x ≤ exp y` and `x ≤ log y ↔ exp x ≤ y`.

### [2021-11-06T20:27:44+00:00](https://github.com/leanprover-community/mathlib/commit/169bb29d80616c2370e4e1ccec74791b578d5987)
feat(algebra/group/with_one): cleanup algebraic instances ([#10194](https://github.com/leanprover-community/mathlib/pull/#10194))

This:

* adds a `has_neg (with_zero α)` instance which sends `0` to `0` and otherwise uses the underlying negation (and the same for `has_inv (with_one α)`).
* replaces the `has_div (with_zero α)`,  `has_pow (with_zero α) ℕ`, and `has_pow (with_zero α) ℤ` instances in order to produce better definitional properties than the previous default ones.

### [2021-11-06T20:27:43+00:00](https://github.com/leanprover-community/mathlib/commit/56a9228f4484f5636f12bd1430b9050ac5027cf5)
feat(analysis/normed_space/continuous_affine_map): define bundled continuous affine maps ([#10161](https://github.com/leanprover-community/mathlib/pull/#10161))

I want to use the result the evaluation map `Hom(E, F) × E → F` is smooth in a category with continuous affine maps as morphisms. It is convenient to have a bundled type for this, despite the necessary boilerplate (proposed here).

Formalized as part of the Sphere Eversion project.

### [2021-11-06T20:27:42+00:00](https://github.com/leanprover-community/mathlib/commit/26c0c23e6db67b1856955c14f3ec986a4d3fc8fb)
feat(algebra/homology/image_to_kernel): homology.map_iso ([#9978](https://github.com/leanprover-community/mathlib/pull/#9978))

### [2021-11-06T18:49:17+00:00](https://github.com/leanprover-community/mathlib/commit/f18278de475fbbbb8750f839f1da245717ebed14)
chore(algebra/opposites): use `injective.*` constructors ([#10200](https://github.com/leanprover-community/mathlib/pull/#10200))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-11-06T18:49:16+00:00](https://github.com/leanprover-community/mathlib/commit/38caa5064d21cc33cdbd7f2b1f78db381695a72e)
feat(data/nat/basic): `a < a / b * b + b` ([#10193](https://github.com/leanprover-community/mathlib/pull/#10193))

### [2021-11-06T18:49:15+00:00](https://github.com/leanprover-community/mathlib/commit/ebe7951ded88abad35eccab7ea6f0466ed0ccbad)
feat(algebra/big_operators/order): Bound on a product from a pointwise bound ([#10190](https://github.com/leanprover-community/mathlib/pull/#10190))

This proves `finset.le_prod_of_forall_le` which is the dual of `finset.prod_le_of_forall_le`.

### [2021-11-06T18:49:14+00:00](https://github.com/leanprover-community/mathlib/commit/be412c3d4ef1613c98b06831157d79113751a23e)
fix(README): update specialties of maintainers ([#10086](https://github.com/leanprover-community/mathlib/pull/#10086))

### [2021-11-06T18:15:19+00:00](https://github.com/leanprover-community/mathlib/commit/0c54c57cbf3f0e5b4a16a6d50fe82d9bd00838da)
feat(data/set/equitable): A singleton is equitable ([#10192](https://github.com/leanprover-community/mathlib/pull/#10192))

Prove `set.subsingleton.equitable_on` and `set.equitable_on_singleton`.

### [2021-11-06T12:54:31+00:00](https://github.com/leanprover-community/mathlib/commit/af36f1a35f279f0e5b3c2a77647c6bf2cfd51a13)
chore(algebra/group/ulift): use injective.* to define instances ([#10172](https://github.com/leanprover-community/mathlib/pull/#10172))

Also rename `ulift.mul_equiv` to `mul_equiv.ulift` and add some
missing instances.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-11-06T11:24:11+00:00](https://github.com/leanprover-community/mathlib/commit/4b14ef48614ec11f1f76920e2c01ada2bd6554bb)
feat(data/fintype): instances for `infinite (α ⊕ β)` and `infinite (α × β)` ([#10196](https://github.com/leanprover-community/mathlib/pull/#10196))

### [2021-11-06T09:47:22+00:00](https://github.com/leanprover-community/mathlib/commit/239bf0556e317a685809b29a9efee2de96e5f7da)
feat(data/list/basic): list products ([#10184](https://github.com/leanprover-community/mathlib/pull/#10184))

Adding a couple of lemmas about list products. The first is a simpler variant of `head_mul_tail_prod'` in the case where the list is not empty.  The other is a variant of `list.prod_ne_zero` for `list ℕ`.



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-11-06T08:31:55+00:00](https://github.com/leanprover-community/mathlib/commit/051cb615c9bbb4b7f445ba1a8a1465cabd2f9acd)
feat(data/sym/sym2): Induction on `sym2` ([#10189](https://github.com/leanprover-community/mathlib/pull/#10189))

A few basics about `sym2` that were blatantly missing.

### [2021-11-06T02:12:53+00:00](https://github.com/leanprover-community/mathlib/commit/4341fff20a8dc91cd0e89253827654d0f62c21c8)
chore(set_theory/cardinal_ordinal): use notation ω ([#10197](https://github.com/leanprover-community/mathlib/pull/#10197))

### [2021-11-05T23:39:17+00:00](https://github.com/leanprover-community/mathlib/commit/8174bd071fddb63d1b31ea61094342a936fa106d)
feat(analysis/inner_product_space/rayleigh): Rayleigh quotient produces eigenvectors ([#9840](https://github.com/leanprover-community/mathlib/pull/#9840))

Define `self_adjoint` for an operator `T` to mean `∀ x y, ⟪T x, y⟫ = ⟪x, T y⟫`.  (This doesn't require a definition of `adjoint`, although that will come soon.). Prove that a local extremum of the Rayleigh quotient of a self-adjoint operator on the unit sphere is an eigenvector, and use this to prove that in finite dimension a self-adjoint operator has an eigenvector.

Co-authored-by: Frédéric Dupuis <dupuisf@iro.umontreal.ca>



Co-authored-by: Frédéric Dupuis <dupuisf@iro.umontreal.ca>

### [2021-11-05T19:40:53+00:00](https://github.com/leanprover-community/mathlib/commit/6cd6975d0ca3689093fa90e229f6bee42348011e)
feat(order/lattice): add `inf_lt_sup` ([#10178](https://github.com/leanprover-community/mathlib/pull/#10178))

Also add `inf_le_sup`, `lt_or_lt_iff_ne`, and `min_lt_max`.

### [2021-11-05T19:40:52+00:00](https://github.com/leanprover-community/mathlib/commit/85f64207a0065e254589d34e531fca54f43c9ad6)
feat(algebra/group/inj_surj): add `injective.monoid_pow` etc ([#10152](https://github.com/leanprover-community/mathlib/pull/#10152))

Add versions of some constructors that take `pow`/`zpow`/`nsmul`/`zsmul` as explicit arguments.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-11-05T19:07:04+00:00](https://github.com/leanprover-community/mathlib/commit/d69501f1ebb5c286ac2bca13406287a035233d85)
feat(category_theory/limits/shapes/multiequalizer): Multi(co)equalizers ([#10169](https://github.com/leanprover-community/mathlib/pull/#10169))

This PR adds another special shape to the limits library, which directly generalizes shapes for many other special limits (like pullbacks, equalizers, etc.).  A `multiequalizer` can be thought of an an equalizer of two maps between two products. This will be used later on in the context of sheafification.

I don't know if there is a standard name for the gadgets this PR introduces. I would be happy to change the names if needed.

### [2021-11-05T17:51:20+00:00](https://github.com/leanprover-community/mathlib/commit/cc59673bedcd3678654e8617c2f6eff85e8b5fde)
chore(*complex*): add a few simp lemmas ([#10187](https://github.com/leanprover-community/mathlib/pull/#10187))

### [2021-11-05T17:51:18+00:00](https://github.com/leanprover-community/mathlib/commit/a71bfdca40d5cd6d99f5974cd9ca7d0c61d1679b)
feat(analysis/calculus/times_cont_diff): `equiv.prod_assoc` is smooth. ([#10165](https://github.com/leanprover-community/mathlib/pull/#10165))

Formalized as part of the Sphere Eversion project.

### [2021-11-05T17:51:17+00:00](https://github.com/leanprover-community/mathlib/commit/d9a80ee9c79b71d8ad0e9dc9fd3140abf38b3358)
refactor(data/multiset/locally_finite): Generalize `multiset.Ico` to locally finite orders ([#10031](https://github.com/leanprover-community/mathlib/pull/#10031))

This deletes `data.multiset.intervals` entirely, redefines `multiset.Ico` using `locally_finite_order` and restores the lemmas in their correct generality:
* `multiset.Ico.map_add` → `multiset.map_add_left_Ico`, `multiset.map_add_right_Ico`
* `multiset.Ico.eq_zero_of_le` → `multiset.Ico_eq_zero_of_le `
* `multiset.Ico.self_eq_zero` → `multiset.Ico_self`
* `multiset.Ico.nodup` → `multiset.nodup_Ico`
* `multiset.Ico.mem` → `multiset.mem_Ico`
* `multiset.Ico.not_mem_top` → `multiset.right_not_mem_Ico`
* `multiset.Ico.inter_consecutive` → `multiset.Ico_inter_Ico_of_le`
* `multiset.Ico.filter_something` → `multiset.filter_Ico_something`
* `multiset.Ico.eq_cons` → `multiset.Ioo_cons_left`
* `multiset.Ico.succ_top` →`multiset.Ico_cons_right`

`open set multiset` now causes a (minor) clash. This explains the changes to `analysis.box_integral.divergence_theorem` and `measure_theory.integral.divergence_theorem`

### [2021-11-05T16:25:14+00:00](https://github.com/leanprover-community/mathlib/commit/5f5ce2b4fa28b5c1cbaa5da82e40f502c3374bf1)
feat(combinatorics/simple_graph): adding simple_graph.support and mem_support / support_mono lemmas ([#10176](https://github.com/leanprover-community/mathlib/pull/#10176))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-11-05T15:19:39+00:00](https://github.com/leanprover-community/mathlib/commit/8ac2fa06c7de88c7297f40c732d7cf656ca4d6a6)
chore(linear_algebra/affine_space/affine_map): make `affine_map.coe_sub` true by definition ([#10182](https://github.com/leanprover-community/mathlib/pull/#10182))

This makes life slightly easier in some work following on from https://github.com/leanprover-community/mathlib/pull/10161

Formalized as part of the Sphere Eversion project.

### [2021-11-05T15:19:38+00:00](https://github.com/leanprover-community/mathlib/commit/b22a7c7e68ba987264cd9e929083b8db6dd81be7)
refactor(measure_theory/integral/bochner): remove superfluous hypothesis ([#10181](https://github.com/leanprover-community/mathlib/pull/#10181))

* Remove hypothesis from `tendsto_integral_of_dominated_convergence` that was superfluous
* This results in simplifying some proofs, and removing some hypotheses from other lemmas
* Also remove some `ae_measurable` hypotheses for functions that were also assumed to be `integrable`.

### [2021-11-05T15:19:37+00:00](https://github.com/leanprover-community/mathlib/commit/88b4ce731aba275f1c8ae6e64a0ca832a386dc7a)
feat(algebra/order/with_zero): add with_zero.linear_ordered_comm_grou… ([#10180](https://github.com/leanprover-community/mathlib/pull/#10180))

…p_with_zero

### [2021-11-05T13:33:49+00:00](https://github.com/leanprover-community/mathlib/commit/b31af6d95e1ae1b3c2798ead55fc09d40ddbeec5)
refactor(algebra/group): move `monoid.has_pow` etc to `algebra.group.defs` ([#10147](https://github.com/leanprover-community/mathlib/pull/#10147))

This way we can state theorems about `pow`/`nsmul` using notation `^` and `•` right away.

Also move some `ext` lemmas to a new file and rewrite proofs using properties of `monoid_hom`s.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-11-05T10:08:26+00:00](https://github.com/leanprover-community/mathlib/commit/16af388f7ea22fcdf7260f6cb340562aae0654aa)
feat(data/quot): add `quotient.lift₂_mk` ([#10173](https://github.com/leanprover-community/mathlib/pull/#10173))

### [2021-11-05T08:27:18+00:00](https://github.com/leanprover-community/mathlib/commit/35d3628840b0cfe37deaba3514709c73b94a88ab)
chore(data/bool): add `bool.lt_iff` ([#10179](https://github.com/leanprover-community/mathlib/pull/#10179))

### [2021-11-05T06:48:59+00:00](https://github.com/leanprover-community/mathlib/commit/8991f28d0af9f9bde4d2335276d2fe9d16fa0987)
feat(measure_theory/covering/vitali_family): define Vitali families ([#10057](https://github.com/leanprover-community/mathlib/pull/#10057))

Vitali families are families of sets (for instance balls around each point in vector spaces) that satisfy covering theorems. Their main feature is that differentiation of measure theorems hold along Vitali families. This PR is a stub defining Vitali families, and giving examples of them thanks to the Besicovitch and Vitali covering theorems.

The differentiation theorem is left for another PR.

### [2021-11-05T06:00:09+00:00](https://github.com/leanprover-community/mathlib/commit/6f9ec1211fbb6c736fd00bb1758cb523096720dc)
doc(group_theory/sylow): Expand Frattini's argument docstring ([#10174](https://github.com/leanprover-community/mathlib/pull/#10174))

Expands the docstring for Frattini's argument.

### [2021-11-05T02:24:22+00:00](https://github.com/leanprover-community/mathlib/commit/8490f2aae6b54680e6011eacfb93570b5c64fcc7)
chore(scripts): update nolints.txt ([#10177](https://github.com/leanprover-community/mathlib/pull/#10177))

I am happy to remove some nolints for you!

### [2021-11-05T00:43:55+00:00](https://github.com/leanprover-community/mathlib/commit/41a820ddd1bd40dc1caaec73c80b23b22c7091ef)
feat(number_theory/lucas_primality): Add theorem for Lucas primality test ([#8820](https://github.com/leanprover-community/mathlib/pull/#8820))

This is a PR for adding the [Lucas primality test](https://en.wikipedia.org/wiki/Lucas_primality_test) to mathlib. This tells us that a number `p` is prime when an element `a : zmod p` has order `p-1` .



Co-authored-by: Ruben Van de Velde <65514131+Ruben-VandeVelde@users.noreply.github.com>

### [2021-11-04T22:36:42+00:00](https://github.com/leanprover-community/mathlib/commit/d6a57f89e921ef3ee5133951c1f37aa29d487552)
feat(data/finset/prod): When `finset.product` is nonempty ([#10170](https://github.com/leanprover-community/mathlib/pull/#10170))

and two lemmas about how it interacts with the union.

### [2021-11-04T22:36:40+00:00](https://github.com/leanprover-community/mathlib/commit/b064622fe2dda6d8df3386da02b0d04dc835680e)
feat(data/fin/interval): Cardinality of `finset.Ixi`/`finset.Iix` in `fin` ([#10168](https://github.com/leanprover-community/mathlib/pull/#10168))

This proves `(Ici a).card = n + 1 - a`, `(Ioi a).card = n - a`, `(Iic b).card = b + 1`, `(Iio b).card = b` where `a b : fin (n + 1)` (and also `a b : ℕ` for the last two).

### [2021-11-04T22:36:39+00:00](https://github.com/leanprover-community/mathlib/commit/fab61c9f5d613323729d389484e507f06229c6cd)
chore(topology/continuous_function/bounded): add simple lemmas ([#10149](https://github.com/leanprover-community/mathlib/pull/#10149))

### [2021-11-04T22:36:37+00:00](https://github.com/leanprover-community/mathlib/commit/466fd276c4a68d8f05ec9102e0535e225b9cf613)
feat(algebra/group_with_zero/basic): relax some commutativity assumptions ([#10075](https://github.com/leanprover-community/mathlib/pull/#10075))

Moving some lemmas so they require group_with_zero instead of comm_group_with_zero, using the generalization linter.

### [2021-11-04T22:36:36+00:00](https://github.com/leanprover-community/mathlib/commit/ce0e05835f3481d16db12fa38ebe65bc27e2aa59)
feat(data/equiv/mul_add): add lemmas about multiplication and addition on a group being bijective and finite cancel_monoid_with_zeros ([#10046](https://github.com/leanprover-community/mathlib/pull/#10046))

### [2021-11-04T21:07:34+00:00](https://github.com/leanprover-community/mathlib/commit/773a7a4253335e5fadda5c4761f5c9fc00175e75)
feat(analysis/ODE): prove Picard-Lindelöf/Cauchy-Lipschitz Theorem ([#9791](https://github.com/leanprover-community/mathlib/pull/#9791))

### [2021-11-04T20:30:13+00:00](https://github.com/leanprover-community/mathlib/commit/74c27b25bf23c8ab0d77d6a58cd9831cc6237ed4)
feat(topology/sheaves): Pullback of presheaf ([#9961](https://github.com/leanprover-community/mathlib/pull/#9961))

Defined the pullback of a presheaf along a continuous map, and proved that it is adjoint to pushforwards
and it preserves stalks.



Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-11-04T18:49:13+00:00](https://github.com/leanprover-community/mathlib/commit/79eb9344bb8676b3a54c30af55323c4376ec194b)
chore(data/mv_polynomial/basic): add `map_alg_hom_coe_ring_hom` ([#10158](https://github.com/leanprover-community/mathlib/pull/#10158))

### [2021-11-04T18:49:11+00:00](https://github.com/leanprover-community/mathlib/commit/11439d8ca1018f7b9242762c2c55aee379a16f84)
chore(algebra/direct_sum/internal): add missing simp lemmas ([#10154](https://github.com/leanprover-community/mathlib/pull/#10154))

These previously weren't needed when these were `@[reducible] def`s as `simp` saw right through them.

### [2021-11-04T18:49:10+00:00](https://github.com/leanprover-community/mathlib/commit/828e10046b71f6624e4e8a39ccc4046cc349aefd)
feat(data/finset/interval): `finset α` is a locally finite order ([#9963](https://github.com/leanprover-community/mathlib/pull/#9963))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-11-04T17:11:43+00:00](https://github.com/leanprover-community/mathlib/commit/cf2ff033af34b4c503134993aeab789f15b49701)
feat(group_theory/sylow): Sylow subgroups are nontrivial! ([#10144](https://github.com/leanprover-community/mathlib/pull/#10144))

These lemmas (finally!) connect the work of @ChrisHughes24 with the recent definition of Sylow subgroups, to show that Sylow subgroups are actually nontrivial!



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-11-04T17:11:42+00:00](https://github.com/leanprover-community/mathlib/commit/52cd4453661976fc78aeadd67cac8d1240dfe8b5)
refactor(data/set/pairwise): Indexed sets as arguments to `set.pairwise_disjoint` ([#9898](https://github.com/leanprover-community/mathlib/pull/#9898))

This will allow to express the bind operation: you can't currently express that the pairwise disjoint union of pairwise disjoint sets pairwise disjoint. Here's the corresponding statement with `finset.sup_indep` (defined in [#9867](https://github.com/leanprover-community/mathlib/pull/#9867)):
```lean
lemma sup_indep.sup {s : finset ι'} {g : ι' → finset ι} {f : ι → α}
  (hs : s.sup_indep (λ i, (g i).sup f)) (hg : ∀ i' ∈ s, (g i').sup_indep f) :
  (s.sup g).sup_indep f :=
```
You currently can't do `set.pairwise_disjoint s (λ i, ⋃ x ∈ g i, f x)`.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-11-04T15:29:36+00:00](https://github.com/leanprover-community/mathlib/commit/5187a427488fa358af23be8d85c4c6869931cc0c)
feat(linear_algebra/affine_space/affine_map): decomposition of an affine map between modules as an equiv ([#10162](https://github.com/leanprover-community/mathlib/pull/#10162))

Formalized as part of the Sphere Eversion project.

### [2021-11-04T15:29:34+00:00](https://github.com/leanprover-community/mathlib/commit/22ec295c3599c6d95d9fd36b744b7eaabf2aab82)
chore(data/set): lemmas about `disjoint` ([#10148](https://github.com/leanprover-community/mathlib/pull/#10148))

### [2021-11-04T15:29:33+00:00](https://github.com/leanprover-community/mathlib/commit/69189d44a7496d4078d5f514d9b3868bb89da7db)
split(data/finset/prod): split off `data.finset.basic` ([#10142](https://github.com/leanprover-community/mathlib/pull/#10142))

Killing the giants. This moves `finset.product`, `finset.diag`, `finset.off_diag` to their own file, the theme being "finsets on `α × β`".

The copyright header now credits:
* Johannes Hölzl for ba95269a65a77c8ab5eae075f842fdad0c0a7aaf
* Mario Carneiro
* Oliver Nash for [#4502](https://github.com/leanprover-community/mathlib/pull/#4502)

### [2021-11-04T13:04:54+00:00](https://github.com/leanprover-community/mathlib/commit/de79226c64ab6177029fdbd069fdfe40d252f7cd)
feat(ring_theory/polynomial/basic): `polynomial.ker_map_ring_hom` and `mv_polynomial.ker_map` ([#10160](https://github.com/leanprover-community/mathlib/pull/#10160))

### [2021-11-04T13:04:53+00:00](https://github.com/leanprover-community/mathlib/commit/2129d05369e8a75618b8c9fa0c1d90ed14c8a02d)
chore(measure_theory/function/special_functions): import inner_product_space.basic instead of inner_product_space.calculus ([#10159](https://github.com/leanprover-community/mathlib/pull/#10159))

Right now this changes almost nothing because other imports like `analysis.special_functions.pow` depend on calculus, but I am changing that in other PRs. `measure_theory/function/special_functions` will soon not depend on calculus at all.

### [2021-11-04T13:04:51+00:00](https://github.com/leanprover-community/mathlib/commit/b8908367c5f802ea1c21d1deb30e747449201f49)
chore(analysis/calculus/times_cont_diff): rename `linear_isometry_map.times_cont_diff`; drop `_map` ([#10155](https://github.com/leanprover-community/mathlib/pull/#10155))

I think the old name is a typo; the new name enables dot notation.

### [2021-11-04T13:04:50+00:00](https://github.com/leanprover-community/mathlib/commit/3cbe0feba3b02089e7f05b3ff1bea05e953deb6b)
feat(linear_algebra/matrix/nonsingular_inverse): determinant of inverse is inverse of determinant ([#10038](https://github.com/leanprover-community/mathlib/pull/#10038))

### [2021-11-04T13:04:48+00:00](https://github.com/leanprover-community/mathlib/commit/17afc5c03e77add27332fdbb2c7b17191ea24f34)
feat(topology/algebra/group_with_zero): continuity lemma for division ([#9959](https://github.com/leanprover-community/mathlib/pull/#9959))

* This even applies when dividing by `0`.
* From the sphere eversion project.
* This PR mentions `filter.tendsto_prod_top_iff` which is added by [#9958](https://github.com/leanprover-community/mathlib/pull/#9958)

### [2021-11-04T11:24:16+00:00](https://github.com/leanprover-community/mathlib/commit/211bdff0f018fe870efe817e13900cd2e481653b)
feat(data/nat/choose/basic): add some inequalities showing that choose is monotonic in the first argument ([#10102](https://github.com/leanprover-community/mathlib/pull/#10102))

From flt-regular

### [2021-11-04T11:24:14+00:00](https://github.com/leanprover-community/mathlib/commit/1f0d878c85f57e8384452424680e47b0ede381b9)
feat(data/list): standardize list prefixes and suffixes ([#10052](https://github.com/leanprover-community/mathlib/pull/#10052))

### [2021-11-04T11:24:13+00:00](https://github.com/leanprover-community/mathlib/commit/4c0b6adaa9c7dd780bc5a9bb926379adc0ed8dca)
feat(topology/homotopy/basic): add `homotopic` for `continuous_map`s. ([#9865](https://github.com/leanprover-community/mathlib/pull/#9865))

### [2021-11-04T09:43:52+00:00](https://github.com/leanprover-community/mathlib/commit/d219e6bb4426e1e8977af11a991f36a0bbd91c87)
chore(data/equiv/mul_add): DRY ([#10150](https://github.com/leanprover-community/mathlib/pull/#10150))

use `units.mul_left`/`units.mul_right` to define
`equiv.mul_left₀`/`equiv.mul_right₀`.

### [2021-11-04T09:43:51+00:00](https://github.com/leanprover-community/mathlib/commit/76ba1b646843d5ecb2e02b33155acefcd56ef8f2)
chore(ring_theory/finiteness): make `finite_presentation.{quotient,mv_polynomial}` protected ([#10091](https://github.com/leanprover-community/mathlib/pull/#10091))

This lets us clean up some `_root_`s

This also golfs a proof

### [2021-11-04T07:56:27+00:00](https://github.com/leanprover-community/mathlib/commit/8658f40c125950ffa3500c28cfffa7ad38d8937f)
feat(algebra/group_power/order): Sign of an odd/even power without linearity ([#10122](https://github.com/leanprover-community/mathlib/pull/#10122))

This proves that `a < 0 → 0 < a ^ bit0 n` and `a < 0 → a ^ bit1 n < 0` in an `ordered_semiring`.

### [2021-11-04T02:36:27+00:00](https://github.com/leanprover-community/mathlib/commit/4770a6a7a4e6356de80649e938d4e11360082b0c)
chore(scripts): update nolints.txt ([#10146](https://github.com/leanprover-community/mathlib/pull/#10146))

I am happy to remove some nolints for you!

### [2021-11-04T00:15:53+00:00](https://github.com/leanprover-community/mathlib/commit/0fac08078ba51e4487d959ad6a7f5486be9d549e)
refactor(analysis/calculus/mean_value): Remove useless hypotheses ([#10129](https://github.com/leanprover-community/mathlib/pull/#10129))

Because the junk value of `deriv` is `0`, assuming `∀ x, 0 < deriv f x` implies that `f` is derivable. We thus remove all those redundant derivability assumptions.

### [2021-11-03T22:10:14+00:00](https://github.com/leanprover-community/mathlib/commit/fed57b5462a7e24bcc577335cedd505ada5c8342)
refactor(algebra/direct_sum): rework internally-graded objects ([#10127](https://github.com/leanprover-community/mathlib/pull/#10127))

This is a replacement for the `graded_ring.core` typeclass in [#10115](https://github.com/leanprover-community/mathlib/pull/#10115), which is called `set_like.graded_monoid` here. The advantage of this approach is that we can use the same typeclass for graded semirings, graded rings, and graded algebras.

Largely, this change replaces a bunch of `def`s with `instances`, by bundling up the arguments to those defs to a new typeclass. This seems to make life easier for the few global `gmonoid` instance we already provide for direct sums of submodules, suggesting this API change is a useful one.

In principle the new `[set_like.graded_monoid A]` typeclass is useless, as the same effect can be achieved with `[set_like.has_graded_one A] [set_like.has_graded_mul A]`; pragmatically though this is painfully verbose, and probably results in larger term sizes. We can always remove it later if it causes problems.



Co-authored-by: Jujian Zhang <jujian.zhang1998@outlook.com>

### [2021-11-03T20:00:44+00:00](https://github.com/leanprover-community/mathlib/commit/6433c1c68101cc84e53797861c277838dd6ccce6)
feat(group_theory/sylow): Sylow subgroups are isomorphic ([#10059](https://github.com/leanprover-community/mathlib/pull/#10059))

Constructs `sylow.mul_equiv`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-11-03T20:00:42+00:00](https://github.com/leanprover-community/mathlib/commit/5541b2568a1f1fe057f5d8249a52ea2bbfbf7c62)
refactor(group_theory/complement): Introduce abbreviation for subgroups ([#10009](https://github.com/leanprover-community/mathlib/pull/#10009))

Introduces abbreviation for `is_complement (H : set G) (K : set G)`.

### [2021-11-03T17:56:43+00:00](https://github.com/leanprover-community/mathlib/commit/3a0b0d1d368953d7bb0176aee3718efdd3cfbc31)
chore(order/lattice): add `exists_lt_of_sup/inf` ([#10133](https://github.com/leanprover-community/mathlib/pull/#10133))

### [2021-11-03T17:56:42+00:00](https://github.com/leanprover-community/mathlib/commit/8f7ffec9637c48a89e706e5b033aeed14b2750ef)
chore(analysis/special_functions/trigonometric/inverse): move results about derivatives to a new file ([#10110](https://github.com/leanprover-community/mathlib/pull/#10110))

This is part of a refactor of the `analysis/special_functions` folder, in which I will isolate all lemmas about derivatives. The result will be a definition of Lp spaces that does not import derivatives.



Co-authored-by: RemyDegenne <remydegenne@gmail.com>

### [2021-11-03T17:56:41+00:00](https://github.com/leanprover-community/mathlib/commit/00a1022fe42d58147aa965894cb76c2778872cd4)
chore(logic/relation): rename to permit dot notation ([#10105](https://github.com/leanprover-community/mathlib/pull/#10105))

### [2021-11-03T17:56:40+00:00](https://github.com/leanprover-community/mathlib/commit/6993e6f88bed148235993333b334baf8ffc30bac)
feat(measure_theory/constructions/borel_space): decomposing the measure of a set into slices ([#10096](https://github.com/leanprover-community/mathlib/pull/#10096))

Also add the fact that `μ (to_measurable μ t ∩ s) = μ (t ∩ s)`, and useful variations around this fact.

### [2021-11-03T17:56:38+00:00](https://github.com/leanprover-community/mathlib/commit/b51f18f768bfb30bfaaacbc19b4554e52ac9dd63)
feat(topology): properties about intervals and paths ([#9914](https://github.com/leanprover-community/mathlib/pull/#9914))

* From the sphere eversion project
* Properties about paths, the interval, and `proj_Icc`

### [2021-11-03T16:54:02+00:00](https://github.com/leanprover-community/mathlib/commit/8d52be4a5a2d8b68ef1c28d9dadb5506bd399517)
feat(measure_theory/function/ae_measurable_order): an ae measurability criterion for ennreal-valued functions ([#10072](https://github.com/leanprover-community/mathlib/pull/#10072))

### [2021-11-03T16:10:04+00:00](https://github.com/leanprover-community/mathlib/commit/4f033b7dd6a0b860a09f00045482276cca95b286)
feat(analysis/seminorm): define the Minkowski functional ([#9097](https://github.com/leanprover-community/mathlib/pull/#9097))

This defines the gauge of a set, aka the Minkowski functional, in a vector space over a real normed field.

Co-authored-by: <bhavikmehta8@gmail.com>

### [2021-11-03T14:39:55+00:00](https://github.com/leanprover-community/mathlib/commit/95cdebac1111a9a53c5a0d8205d9e7fbbd227eff)
doc(linear_algebra): fix wrong docstring ([#10139](https://github.com/leanprover-community/mathlib/pull/#10139))

### [2021-11-03T14:39:53+00:00](https://github.com/leanprover-community/mathlib/commit/2b87435a977efeacc729bc63d3eeeb9d87a8df91)
feat(ring_theory/trace): remove a useless assumption ([#10138](https://github.com/leanprover-community/mathlib/pull/#10138))

We remove an assumption that is always true.

### [2021-11-03T14:39:52+00:00](https://github.com/leanprover-community/mathlib/commit/93cec25915bce6145e678892bae9c1aaa461c43c)
chore(*): replace `exact calc` by `calc` ([#10137](https://github.com/leanprover-community/mathlib/pull/#10137))

This PR is the result of a sed script that replaces

* `exact calc` by `calc`
* `refine calc` by `calc`

### [2021-11-03T13:35:53+00:00](https://github.com/leanprover-community/mathlib/commit/eaf2a16beb0499f2ceb0f433af55cdc2c5b81b0f)
fix(scripts/lint-style.py): typo in error reporting ([#10135](https://github.com/leanprover-community/mathlib/pull/#10135))

### [2021-11-03T13:35:52+00:00](https://github.com/leanprover-community/mathlib/commit/1e7f3ca6bc51b7d3e5f21e753baa9f1f1728e542)
feat(data/zmod/basic): add nat_coe_eq_nat_coe_iff' ([#10128](https://github.com/leanprover-community/mathlib/pull/#10128))

To match the int version, from flt-regular

### [2021-11-03T09:01:33+00:00](https://github.com/leanprover-community/mathlib/commit/e5c66a0950a2536eb1f64610b0dfb08c27ee3557)
chore(topology/continuous_function/bounded): add `comp_continuous` ([#10134](https://github.com/leanprover-community/mathlib/pull/#10134))

### [2021-11-03T07:31:37+00:00](https://github.com/leanprover-community/mathlib/commit/e5acda42fbbf17897fc736a916eb37913360d327)
chore(order/conditionally_complete_lattice): drop an unneeded `nonempty` assumption ([#10132](https://github.com/leanprover-community/mathlib/pull/#10132))

### [2021-11-03T02:56:05+00:00](https://github.com/leanprover-community/mathlib/commit/5f2e52704973a6006a9db399048d2aad587c6853)
chore(scripts): update nolints.txt ([#10130](https://github.com/leanprover-community/mathlib/pull/#10130))

I am happy to remove some nolints for you!

### [2021-11-02T23:57:01+00:00](https://github.com/leanprover-community/mathlib/commit/123db5e842b386f7d39d8cdf90382925ff646898)
feat(linear_algebra/determinant): basis.det_ne_zero ([#10126](https://github.com/leanprover-community/mathlib/pull/#10126))

Add the trivial lemma that the determinant with respect to a basis is
not the zero map (if the ring is nontrivial).

### [2021-11-02T23:57:00+00:00](https://github.com/leanprover-community/mathlib/commit/86ed02f9fcde0dbeab13f2166a12107b9ba4f7fd)
chore(algebra/order/floor): add a few trivial lemmas ([#10120](https://github.com/leanprover-community/mathlib/pull/#10120))

### [2021-11-02T23:56:58+00:00](https://github.com/leanprover-community/mathlib/commit/1dec85c5fb4f7008820b8ccaae76984752820b72)
doc(topology): three module docstrings ([#10107](https://github.com/leanprover-community/mathlib/pull/#10107))

### [2021-11-02T21:57:35+00:00](https://github.com/leanprover-community/mathlib/commit/d49636ec1e225d203ceec6c038807a3e70f0e26f)
doc(topology/open_subgroup): add module docstring ([#10111](https://github.com/leanprover-community/mathlib/pull/#10111))

Also add a lattice instance.

### [2021-11-02T21:57:34+00:00](https://github.com/leanprover-community/mathlib/commit/70ed9dcec10fcfa11ab9e234652c1788eeb0d195)
chore(analysis/special_functions/trigonometric/basic): move results about derivatives to a new file ([#10109](https://github.com/leanprover-community/mathlib/pull/#10109))

This is part of a refactor of the `analysis/special_functions` folder, in which I will isolate all lemmas about derivatives. The result will be a definition of Lp spaces that does not import derivatives.

### [2021-11-02T21:57:33+00:00](https://github.com/leanprover-community/mathlib/commit/d43daf0113d7c0184d5a95200acbf982d820c917)
feat(algebra/big_operators/order): add unbundled is_absolute_value.sum_le and map_prod ([#10104](https://github.com/leanprover-community/mathlib/pull/#10104))

Add unbundled versions of two existing lemmas.
Additionally generalize a few typeclass assumptions in an earlier file.

From the flt-regular project

### [2021-11-02T21:57:32+00:00](https://github.com/leanprover-community/mathlib/commit/3accc5ed19e45dd020ba2e5ec96499707e480422)
feat(data/bool): bnot_iff_not ([#10095](https://github.com/leanprover-community/mathlib/pull/#10095))

### [2021-11-02T19:48:57+00:00](https://github.com/leanprover-community/mathlib/commit/00064bd6dc8916de4ae9613d9d2aedb1b2907127)
feat(logic/relation): add equivalence.comap ([#10103](https://github.com/leanprover-community/mathlib/pull/#10103))

### [2021-11-02T19:05:42+00:00](https://github.com/leanprover-community/mathlib/commit/2d8be73eb041e041ec755f00e96f2da604b372a3)
chore(measure_theory/probability_mass_function): avoid non-terminal simp in coe_le_one ([#10112](https://github.com/leanprover-community/mathlib/pull/#10112))

### [2021-11-02T16:26:32+00:00](https://github.com/leanprover-community/mathlib/commit/6df3143adad4a35b3b2604818b6a1f439a5af11b)
chore(combinatorics/choose/bounds): move to nat namespace ([#10106](https://github.com/leanprover-community/mathlib/pull/#10106))

There are module docstrings elsewhere that expect this to be in the `nat` namespace with the other `choose` lemmas.

### [2021-11-02T15:51:48+00:00](https://github.com/leanprover-community/mathlib/commit/0dcb1849d456cf2dbf739dffcbfe5d0faf20bae3)
style(testing/slim_check): fix line length ([#10114](https://github.com/leanprover-community/mathlib/pull/#10114))

### [2021-11-02T14:14:07+00:00](https://github.com/leanprover-community/mathlib/commit/796a051a68483ecac337c9458722d092102d6e9c)
feat(measure_theory/decomposition/lebesgue): more on Radon-Nikodym derivatives ([#10070](https://github.com/leanprover-community/mathlib/pull/#10070))

We show that the density in the Lebesgue decomposition theorem (aka the Radon-Nikodym derivative) is unique. Previously, uniqueness of the absolutely continuous part was known, but not of its density. We also show that the Radon-Nikodym derivative is almost everywhere finite. Plus some cleanup of the whole file.

### [2021-11-02T12:07:49+00:00](https://github.com/leanprover-community/mathlib/commit/da6706d0a800207c8cb8521de177c92047167d55)
feat(data/mv_polynomial/basic): lemmas about map ([#10092](https://github.com/leanprover-community/mathlib/pull/#10092))

This adds `map_alg_hom`, which fills the gap between `map` and `map_alg_equiv`.

The only new proof here is `map_surjective`; everything else is just a reworked existing proof.

### [2021-11-02T10:26:34+00:00](https://github.com/leanprover-community/mathlib/commit/80dc445da59d5013fd52372df2611008b8ea7d80)
refactor(order/bounded_lattice): generalize le on with_{top,bot} ([#10085](https://github.com/leanprover-community/mathlib/pull/#10085))

Before, some lemmas assumed `preorder` even when they were true for
just the underlying `le`. In the case of `with_bot`, the missing
underlying `has_le` instance is defined.
For both `with_{top,bot}`, a few lemmas are generalized accordingly.

### [2021-11-02T10:26:33+00:00](https://github.com/leanprover-community/mathlib/commit/658a3d77a42f01939ba4173caf05fc95d8d47906)
refactor(algebra/algebra): remove subalgebra.under ([#10081](https://github.com/leanprover-community/mathlib/pull/#10081))

This removes `subalgebra.under`, and replaces `subalgebra.of_under` with `subalgebra.of_restrict_scalars`.

Lemmas associated with `under` have been renamed accordingly.

### [2021-11-02T10:26:32+00:00](https://github.com/leanprover-community/mathlib/commit/541df8a0a6d1e2810e4e932043e44fb6ea69d5a5)
feat(topology/algebra/ordered/liminf_limsup): convergence of a sequence which does not oscillate infinitely ([#10073](https://github.com/leanprover-community/mathlib/pull/#10073))

If, for all `a < b`, a sequence is not frequently below `a` and frequently above `b`, then it has to converge. This is a useful convergence criterion (called no upcrossings), used for instance in martingales.

Also generalize several statements on liminfs and limsups from complete linear orders to conditionally complete linear orders.

### [2021-11-02T10:26:31+00:00](https://github.com/leanprover-community/mathlib/commit/880182d684eb15d2a3a7e5685d626f82f47b199d)
chore(analysis/normed/group): add `cauchy_seq_finset_of_norm_bounded_eventually` ([#10060](https://github.com/leanprover-community/mathlib/pull/#10060))

Add `cauchy_seq_finset_of_norm_bounded_eventually`, use it to golf some proofs.

### [2021-11-02T10:26:30+00:00](https://github.com/leanprover-community/mathlib/commit/fc12ca8d4838b892513bd08d6817fe90d823544e)
feat(measure_theory/probability_mass_function): Define uniform pmf on an inhabited fintype ([#9920](https://github.com/leanprover-community/mathlib/pull/#9920))

This PR defines uniform probability mass functions on nonempty finsets and inhabited fintypes.

### [2021-11-02T09:31:35+00:00](https://github.com/leanprover-community/mathlib/commit/f6894c472f8fa14a917eaae16b9b1e58a6a8c866)
chore(ring_theory/adjoin/fg): generalize ring to semiring in a few places ([#10089](https://github.com/leanprover-community/mathlib/pull/#10089))

### [2021-11-02T08:23:22+00:00](https://github.com/leanprover-community/mathlib/commit/26bdcac02896c22b8bac99f939d3e6b8a7731422)
chore(coinductive_predicates): remove private and use of import_private ([#10084](https://github.com/leanprover-community/mathlib/pull/#10084))

Remove a `private` modifier (I think this had previously been ported from core by @bryangingechen).

Then remove the only use of `import_private` from the library. (Besides another use in `tests/`, which we're not porting.)

(In mathlib4 we have `OpenPrivate` as an alternative. Removing `import_private` is one less thing for mathport to care about.)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-11-02T08:23:21+00:00](https://github.com/leanprover-community/mathlib/commit/18528404e53f9e64db5d2d0f807ca41df504439c)
feat(analysis/calculus/mean_value): Strict convexity from derivatives ([#10034](https://github.com/leanprover-community/mathlib/pull/#10034))

This duplicates all the results relating convex/concave function and their derivatives to strictly convex/strictly concave functions.

### [2021-11-02T06:43:08+00:00](https://github.com/leanprover-community/mathlib/commit/6d2af9a1dbe15a3c671cc0603808881a3a3ef445)
chore(data/list/defs): remove unneeded open ([#10100](https://github.com/leanprover-community/mathlib/pull/#10100))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-11-02T02:55:19+00:00](https://github.com/leanprover-community/mathlib/commit/d926ac730f6d26c1e1eea10ffd200be6d53ef576)
chore(scripts): update nolints.txt ([#10098](https://github.com/leanprover-community/mathlib/pull/#10098))

I am happy to remove some nolints for you!

### [2021-11-01T21:07:30+00:00](https://github.com/leanprover-community/mathlib/commit/fd783e399ee3c4527a4c4f716e37878025185e78)
chore(algebra/free_algebra): remove a heavy and unecessary import ([#10093](https://github.com/leanprover-community/mathlib/pull/#10093))

`transfer_instance` pulls in category theory, which is overkill

### [2021-11-01T20:14:44+00:00](https://github.com/leanprover-community/mathlib/commit/b1d5446e873639aa9b1d89e02209905281ade9a8)
chore(analysis/normed_space/operator_norm): remove an import to data.equiv.transfer_instance ([#10094](https://github.com/leanprover-community/mathlib/pull/#10094))

This import isn't needed, and the spelling without it is shorter.

### [2021-11-01T12:55:31+00:00](https://github.com/leanprover-community/mathlib/commit/0144b6cab8cc233a63489d0b71761bd2b4b870ef)
chore({data/finset,data/multiset,order}/locally_finite): Better line wraps ([#10087](https://github.com/leanprover-community/mathlib/pull/#10087))

### [2021-11-01T12:22:20+00:00](https://github.com/leanprover-community/mathlib/commit/fef1535b2becc8a7bae464dbbf7874499bc7b2c5)
chore(category_theory/limits): reuse a previous result ([#10088](https://github.com/leanprover-community/mathlib/pull/#10088))

### [2021-11-01T11:06:34+00:00](https://github.com/leanprover-community/mathlib/commit/9ef310f243a564ce15e782c1c8b33794785b43c7)
chore(algebra/algebra): implement subalgebra.under in terms of restrict_scalars ([#10080](https://github.com/leanprover-community/mathlib/pull/#10080))

We should probably remove `subalgebra.under` entirely, but that's likely a lot more work.

### [2021-11-01T11:06:33+00:00](https://github.com/leanprover-community/mathlib/commit/17ebcf01105daa8a6a8b15cb960ecf8817092c57)
chore(ring_theory/algebra_tower): relax typeclasses ([#10078](https://github.com/leanprover-community/mathlib/pull/#10078))

This generalizes some `comm_ring`s to `comm_semiring`s.

Split from [#10024](https://github.com/leanprover-community/mathlib/pull/#10024)

### [2021-11-01T10:12:40+00:00](https://github.com/leanprover-community/mathlib/commit/23892a058e6cb94ba57a040c06aa496c1331c3b3)
chore(analysis/normed_space/operator_norm): semilinearize part of the file ([#10076](https://github.com/leanprover-community/mathlib/pull/#10076))

This PR generalizes part of the `operator_norm` file to semilinear maps. Only the first section (`semi_normed`) is done, which allows us to construct continuous semilinear maps using `linear_map.mk_continuous`.

The rest of the file is trickier, since we need specify how the ring hom interacts with the norm. I'd rather leave it to a future PR since I don't need the rest now.

### [2021-11-01T07:01:57+00:00](https://github.com/leanprover-community/mathlib/commit/85fe90e9cd37cfc9a9233753b55efd41313e02f7)
feat(algebra/direct_sum/module) : coe and internal ([#10004](https://github.com/leanprover-community/mathlib/pull/#10004))

This extracts the following `def`s from within the various `is_internal` properties:
* `direct_sum.add_submonoid_coe`
* `direct_sum.add_subgroup_coe`
* `direct_sum.submodule_coe`

Packing these into a def makes things more concise, and avoids some annoying elaboration issues.

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>



Co-authored-by: jjaassoonn <jujian.zhang1998@out.com>

### [2021-11-01T05:31:03+00:00](https://github.com/leanprover-community/mathlib/commit/acc504e1b0fdd6e59d27523521bc5430bbbd2cbd)
docs(category_theory/*): add missing module docs ([#9990](https://github.com/leanprover-community/mathlib/pull/#9990))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-11-01T02:38:33+00:00](https://github.com/leanprover-community/mathlib/commit/e8fa2328d832437bb9307b581f2d279ec8ca86fa)
chore(scripts): update nolints.txt ([#10083](https://github.com/leanprover-community/mathlib/pull/#10083))

I am happy to remove some nolints for you!

### [2021-11-01T00:38:30+00:00](https://github.com/leanprover-community/mathlib/commit/cd457a5d4381f0c6dcee1d56d5b0dce011400fab)
fix(data/{rbtree,rbmap}): fix some lint errors ([#10036](https://github.com/leanprover-community/mathlib/pull/#10036))

### [2021-11-01T00:38:28+00:00](https://github.com/leanprover-community/mathlib/commit/bf82122325d882f047ac40a88e8ec9b048c54541)
feat(algebra/direct_sum/basic): some lemmas about `direct_sum.of` ([#10003](https://github.com/leanprover-community/mathlib/pull/#10003))

Some small lemmas about `direct_sum.of` that are handy.



Co-authored-by: jjaassoonn <jujian.zhang1998@out.com>

### [2021-10-31T23:00:49+00:00](https://github.com/leanprover-community/mathlib/commit/932e9548cca8167df37529f6078f9826da209844)
feat(data/finset): some simple finset lemmas ([#10079](https://github.com/leanprover-community/mathlib/pull/#10079))

### [2021-10-31T23:00:48+00:00](https://github.com/leanprover-community/mathlib/commit/60cb2cfea55be8486cd8fef5f765432f355956b6)
feat(data/list): length_filter_lt_length_iff_exists ([#10074](https://github.com/leanprover-community/mathlib/pull/#10074))

Also moved a lemma about filter_map that was placed in the wrong file

### [2021-10-31T23:00:47+00:00](https://github.com/leanprover-community/mathlib/commit/af4f4df535213472618fd9f5856fe01fe59c9440)
feat(list/init): simplifier lemmas for list.init ([#10061](https://github.com/leanprover-community/mathlib/pull/#10061))

### [2021-10-31T23:00:45+00:00](https://github.com/leanprover-community/mathlib/commit/d6dd451623c12d453bd2b7a3cf34bdbf1365376d)
chore(data/list/basic): use dot notation here and there ([#10056](https://github.com/leanprover-community/mathlib/pull/#10056))

### Renamed lemmas

- `list.cons_sublist_cons` → `list.sublist.cons_cons`;
- `list.infix_of_prefix` → `list.is_prefix.is_infix`;
- `list.infix_of_suffix` → `list.is_suffix.is_infix`;
- `list.sublist_of_infix` → `list.is_infix.sublist`;
- `list.sublist_of_prefix` → `list.is_prefix.sublist`;
- `list.sublist_of_suffix` → `list.is_suffix.sublist`;
- `list.length_le_of_infix` → `list.is_infix.length_le`.

### New `simp` attrs

`list.singleton_sublist`, `list.repeat_sublist_repeat`, `list.reverse_suffix`, `list.reverse_prefix`.

### New lemmas

`list.infix_insert`, `list.sublist_insert`, `list.subset_insert`.

### [2021-10-31T23:00:44+00:00](https://github.com/leanprover-community/mathlib/commit/76f13b36e88f42f0f57fd55ab82bad15a25c0782)
feat(algebra/star/basic): `ring.inverse_star` ([#10039](https://github.com/leanprover-community/mathlib/pull/#10039))

Also adds `is_unit.star` and `is_unit_star`.

### [2021-10-31T21:28:18+00:00](https://github.com/leanprover-community/mathlib/commit/106dc57919bf7cdbb0addb6a010144d0024e321b)
chore(ring_theory/ideal/operations): generalize typeclass in map_map and comap_comap ([#10077](https://github.com/leanprover-community/mathlib/pull/#10077))

Split from [#10024](https://github.com/leanprover-community/mathlib/pull/#10024) which is hitting timeouts somewhere more irritating.

### [2021-10-31T21:28:17+00:00](https://github.com/leanprover-community/mathlib/commit/233eb66073d76953ef2455d9f7e4b6bb49c5ab0d)
feat(data/real/ennreal): more on integer powers on ennreal ([#10071](https://github.com/leanprover-community/mathlib/pull/#10071))

### [2021-10-31T18:58:21+00:00](https://github.com/leanprover-community/mathlib/commit/5ca3c5e9a27efd4b315783841252ac4e3c2f9100)
chore(data/set/intervals): add some lemmas ([#10062](https://github.com/leanprover-community/mathlib/pull/#10062))

Add several lemma lemmas about intersection/difference of intervals.

### [2021-10-31T18:58:20+00:00](https://github.com/leanprover-community/mathlib/commit/05bd61d0ff1f24d3c4a728f12a0ccc427bbf79cd)
chore(analysis): move more code out of `analysis.normed_space.basic` ([#10055](https://github.com/leanprover-community/mathlib/pull/#10055))

### [2021-10-31T18:58:19+00:00](https://github.com/leanprover-community/mathlib/commit/8390325ec9ad56d4f7925de8dcab07f92e82da19)
fix(data/pequiv): fix lint ([#10043](https://github.com/leanprover-community/mathlib/pull/#10043))

### [2021-10-31T18:58:18+00:00](https://github.com/leanprover-community/mathlib/commit/66f7114a1d5cba41c47d417a034bbb2e96cf564a)
feat(measure_theory/group): add `measurable_set.const_smul` ([#10025](https://github.com/leanprover-community/mathlib/pull/#10025))

Partially based on lemmas from [#2819](https://github.com/leanprover-community/mathlib/pull/#2819).

Co-authored-by: Alex J. Best <alex.j.best@gmail.com>

### [2021-10-31T17:26:29+00:00](https://github.com/leanprover-community/mathlib/commit/f2b77d7ded7a216eacfb24922fdcb20878049051)
refactor(set_theory/cardinal): swap sides of `simp` lemmas ([#10040](https://github.com/leanprover-community/mathlib/pull/#10040))

## API changes

### Swap sides of simp lemmas

- `cardinal.add_def` is no loner a `simp` lemma, `cardinal.mk_sum` (renamed from `cardinal.add`) simplifies `#(α ⊕ β)` to `lift.{v u} (#α) + lift.{u v} (#β)`;
- `cardinal.mul_def` is no loner a `simp` lemma, `cardinal.mk_prod` (merged with `cardinal.mul`) simplifies `#(α × β)` to `lift.{v u} (#α) * lift.{u v} (#β)`;
- `cardinal.power_def` is no longer a `simp` lemma. New lemma `cardinal.mk_arrow` computes `#(α → β)`. It is not a `simp` lemma because it follows from other `simp` lemmas.
- replace `cardinal.sum_mk` with `cardinal.mk_sigma` and `cardinal.prod_mk` with `cardinal.mk_pi`;

### Other changes

- new lemmas `@[simp] cardinal.lift_uzero` and `cardinal.lift_umax'`;
- split `cardinal.linear_order` into `cardinal.preorder` (doesn't rely on `classical.choice`), `cardinal.partial_order` (needs `classical.choice`, computable), and `cardinal.linear_order` (noncomputable);
- add `cardinal.lift_order_embedding`;
- add `cardinal.mk_psum`;
- rename `cardinal.prop_eq_two` to `cardinal.mk_Prop`, drop the old `mk_Prop`;
- use local notation for natural power;
- rename old `sum_const` to `sum_const'`, the new `@[simp] lemma sum_const` is what used to be `sum_const_eq_lift_mul`;
- rename old `prod_const` to `prod_const'`, the new `@[simp] lemma prod_const` deals with types in different universes;
- add `@[simp]` to `cardinal.prod_eq_zero` and `cardinal.omega_le_mk`;
- add `@[simp]` lemmas `cardinal.mk_eq_one`, `cardinal.mk_vector`, `cardinal.omega_mul_eq`, and `cardinal.mul_omega_eq`;
- replace `mk_plift_of_true` and `mk_plift_of_false` with `mk_plift_true` and `mk_plift_false`;
- `mk_list_eq_mk` and `mk_finset_eq_mk` now assume `[infinite α]` instead of `ω ≤ #α`.

### [2021-10-31T14:01:29+00:00](https://github.com/leanprover-community/mathlib/commit/4ef3fcd231c33a11b1011f63ce81ef8058aa3562)
chore(algebra/group/inj_surj): add 2 missing `def`s ([#10068](https://github.com/leanprover-community/mathlib/pull/#10068))

`function.injective.right_cancel_monoid` and `function.injective.cancel_monoid` were missing.

`function.injective.sub_neg_monoid` was also misnamed `function.injective.sub_neg_add_monoid`.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-10-31T14:01:28+00:00](https://github.com/leanprover-community/mathlib/commit/36de1ef6496ab28821a55840a5b6c0ab6a1cf00f)
chore(ring_theory/noetherian): generalize to semiring ([#10032](https://github.com/leanprover-community/mathlib/pull/#10032))

This weakens some typeclasses on some results about `is_noetherian` (which already permits modules over semirings), and relaxes `is_noetherian_ring` to permit semirings.

This does not actually try changing any of the proofs, it just relaxes assumptions that were stronger than what was actually used.

### [2021-10-31T13:18:04+00:00](https://github.com/leanprover-community/mathlib/commit/ca7fee844c581f178094d14038f8a5897b204127)
feat(category_theory/limits): Results about pullbacks ([#9984](https://github.com/leanprover-community/mathlib/pull/#9984))

- Provided the explicit isomorphism `X ×[Z] Y ≅ Y ×[Z] X`.
- Provided the pullback of f g when either one is iso or when both are mono.



Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-10-31T11:57:21+00:00](https://github.com/leanprover-community/mathlib/commit/be0a4af2269f6446719b32e2e24c6f9c0a7ff8b9)
chore(analysis): move `real.angle` to a dedicated file ([#10065](https://github.com/leanprover-community/mathlib/pull/#10065))

We don't use this type anywhere else.

### [2021-10-31T11:57:20+00:00](https://github.com/leanprover-community/mathlib/commit/0433eb621a16cd21ba4229a0275a8a54fdcd39fc)
doc(topology/uniform_space/uniform_embedding): add some docs ([#10045](https://github.com/leanprover-community/mathlib/pull/#10045))

### [2021-10-31T11:57:19+00:00](https://github.com/leanprover-community/mathlib/commit/e5f9becc5cf7dc6adf29f095015b2c63b0f34292)
chore(linear_algebra/basic): relax ring to semiring ([#10030](https://github.com/leanprover-community/mathlib/pull/#10030))

This relaxes a random selection of lemmas from `ring R` to `semiring R`, and cleans up some unused `variables` nearby.

Probably the most useful of these are `submodule.mem_map_equiv`, `map_subtype.rel_iso`, and `submodule.disjoint_iff_comap_eq_bot`

### [2021-10-31T11:57:18+00:00](https://github.com/leanprover-community/mathlib/commit/35cf154727cd969dcda952d7a66103d79ca10cd0)
feat(linear_algebra/eigenspace): define `eigenvalues` of an endomorphism ([#10027](https://github.com/leanprover-community/mathlib/pull/#10027))

Prerequisites in `linear_algebra/eigenspace` for [#9995](https://github.com/leanprover-community/mathlib/pull/#9995), including a definition `module.End.eigenvalues`, the eigenvalues of an endomorphism considered as a subtype of the scalar ring.

### [2021-10-31T10:19:07+00:00](https://github.com/leanprover-community/mathlib/commit/175ac2c818553dd317f97a6cd64dd08a50db63d3)
chore(algebra/group/defs): golf a proof ([#10067](https://github.com/leanprover-community/mathlib/pull/#10067))

Use `monoid.ext` to golf `div_inv_monoid.ext`.

### [2021-10-31T10:19:06+00:00](https://github.com/leanprover-community/mathlib/commit/31c8aa59e636c8260e0c84ceb6520e6813a755bc)
chore(algebra/group_with_zero/basic): zero, one, and pow lemmas for `ring.inverse` ([#10049](https://github.com/leanprover-community/mathlib/pull/#10049))

This adds:
* `ring.inverse_zero`
* `ring.inverse_one`
* `ring.inverse_pow` (to match `inv_pow`, `inv_pow₀`)
* `commute.ring_inverse_ring_inverse` (to match `commute.inv_inv`)

### [2021-10-31T09:46:36+00:00](https://github.com/leanprover-community/mathlib/commit/43e7d1b5c9b336ba4d376d1f8fd34596ded3af5a)
feat(order/antichain): Antichains ([#9926](https://github.com/leanprover-community/mathlib/pull/#9926))

This defines antichains mimicking the definition of chains.

### [2021-10-31T07:34:51+00:00](https://github.com/leanprover-community/mathlib/commit/b7f120f15c25480c5c879d36b63c90ff1f1dc5b7)
chore(*): clean up the library using to_additive ([#9790](https://github.com/leanprover-community/mathlib/pull/#9790))

Since [#9138](https://github.com/leanprover-community/mathlib/pull/#9138) and [#5487](https://github.com/leanprover-community/mathlib/pull/#5487) to_additive got a lot better, so a lot of duplication in the library becomes unnecessary and makes maintenence a burden. So we remove a large number of copy-pasted declarations that can now be generated automatically.

### [2021-10-31T03:19:22+00:00](https://github.com/leanprover-community/mathlib/commit/236f395a2f83a5e3712a53a14bd165098bd6ed93)
chore(topology/compacts): add a missing simp lemma ([#10063](https://github.com/leanprover-community/mathlib/pull/#10063))

### [2021-10-31T01:33:41+00:00](https://github.com/leanprover-community/mathlib/commit/c9520174d69fa12a336b5d14ede092863281afb2)
chore(logic/embedding): docs, fixes ([#10047](https://github.com/leanprover-community/mathlib/pull/#10047))

* generalize `function.extend` and some lemmas from `Type*` to `Sort*`.
* add missing docs in `logic.embedding`;
* swap `function.embedding.arrow_congr_left` and `function.embedding.arrow_congr_right`;
* use `function.extend` to define the new `function.embedding.arrow_congr_left`.

### [2021-10-31T00:02:40+00:00](https://github.com/leanprover-community/mathlib/commit/951c063df9f39d3dff288ea7476fa8a9c0370742)
chore(data/set/pairwise): rename `set.pairwise_on` to `set.pairwise` to match `list.pairwise` and `multiset.pairwise` ([#10035](https://github.com/leanprover-community/mathlib/pull/#10035))

### [2021-10-30T23:31:00+00:00](https://github.com/leanprover-community/mathlib/commit/7ef32622ef51b447a0fa30172074f3c9693dfc69)
ci(.github/workflows/bors.yml): "bors" label for staging builds ([#10064](https://github.com/leanprover-community/mathlib/pull/#10064))

### [2021-10-30T20:45:45+00:00](https://github.com/leanprover-community/mathlib/commit/bdf38cf590a509390fd94e7084a6cfa7338d0d84)
chore(*): rename int_pow to zpow ([#10058](https://github.com/leanprover-community/mathlib/pull/#10058))

Leftovers of [#9989](https://github.com/leanprover-community/mathlib/pull/#9989)

### [2021-10-30T09:45:40+00:00](https://github.com/leanprover-community/mathlib/commit/5ff850b97a98bcfbaacafc4b87254c191eb7fec2)
feat(algebra/module/submodule_lattice): add `add_subgroup.to_int_submodule` ([#10051](https://github.com/leanprover-community/mathlib/pull/#10051))

This converts an `add_subgroup M` to a `submodule ℤ M`. We already have the analogous construction for `add_submonoid M`.



Co-authored-by: jjaassoonn <jujian.zhang1998@out.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-10-30T08:28:49+00:00](https://github.com/leanprover-community/mathlib/commit/d06bd9a4dcb32240399fe84337c457547415bd10)
feat(algebra/big_operators/finprod): add finprod_eq_of_bijective ([#10048](https://github.com/leanprover-community/mathlib/pull/#10048))

### [2021-10-30T06:04:06+00:00](https://github.com/leanprover-community/mathlib/commit/06b1d8789fda8332a8eb3ff36fec77976faa59c7)
feat(algebra/group): add `commute.is_unit_mul_iff` ([#10042](https://github.com/leanprover-community/mathlib/pull/#10042))

### [2021-10-30T01:45:12+00:00](https://github.com/leanprover-community/mathlib/commit/fcc158e986d4896605e97fb3ad17d5cfed49a242)
chore(*): update to Lean-3.35.0c ([#9988](https://github.com/leanprover-community/mathlib/pull/#9988))

Move `stream`, `rbtree`, and `rbmap` from core to `mathlib` and reflows some long lines. Rename some files to avoid name clashes.

### [2021-10-29T19:43:29+00:00](https://github.com/leanprover-community/mathlib/commit/c722dae67797134e97da95bf4c17e704f013a437)
chore(data/fintype/basic): add a few `infinite` instances ([#10037](https://github.com/leanprover-community/mathlib/pull/#10037))

### [2021-10-29T19:43:27+00:00](https://github.com/leanprover-community/mathlib/commit/4f053a565ef36ef62b2a4211419571a5ab606b78)
feat(data/list): chain'_drop lemma ([#10028](https://github.com/leanprover-community/mathlib/pull/#10028))

### [2021-10-29T17:12:04+00:00](https://github.com/leanprover-community/mathlib/commit/c5456607cc0415230c4ad0585c4300ffe36739bd)
chore(algebra/group_with_zero/basic): move `ring.inverse`, generalize and rename `inverse_eq_has_inv` ([#10033](https://github.com/leanprover-community/mathlib/pull/#10033))

This moves `ring.inverse` earlier in the import graph, since it's not about rings at all.

### [2021-10-29T14:39:48+00:00](https://github.com/leanprover-community/mathlib/commit/e1bafaa4e4c38e2a38c1034d840bf50fdd00613b)
feat(category_theory/limits/shapes/images): some explicit instances of has_image_map ([#9977](https://github.com/leanprover-community/mathlib/pull/#9977))

### [2021-10-29T13:53:07+00:00](https://github.com/leanprover-community/mathlib/commit/4f3443a83e8098db5c7718fc6c286317c1256c0b)
feat(measure_theory/group/arithmetic): add a section about `opposite` ([#10026](https://github.com/leanprover-community/mathlib/pull/#10026))

### [2021-10-29T08:04:41+00:00](https://github.com/leanprover-community/mathlib/commit/3f6174ba9cd632365234cbbeaed0fe68eea9efc4)
fix(tactic/norm_cast): make push_cast discharger match the others ([#10021](https://github.com/leanprover-community/mathlib/pull/#10021))

closes [#9822](https://github.com/leanprover-community/mathlib/pull/#9822)



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2021-10-29T01:24:36+00:00](https://github.com/leanprover-community/mathlib/commit/4ce2a5f19bec8d9f3698223e8ccd75f57caadebc)
chore(algebra/module/submodule_lattice): lemmas about the trivial submodule ([#10022](https://github.com/leanprover-community/mathlib/pull/#10022))

Lemmas about the trivial submodule.  Also move an existing lemma `exists_mem_ne_zero_of_ne_bot` about the trivial submodule from `linear_algebra/dimension` to `algebra/module/submodule_lattice`, since it doesn't use any facts about dimension.

### [2021-10-29T01:24:35+00:00](https://github.com/leanprover-community/mathlib/commit/7538f9b44b2219703cb8bf7417d57173301e5187)
feat(data/list/defs): map_with_prefix_suffix and map_with_complement ([#10020](https://github.com/leanprover-community/mathlib/pull/#10020))

Adds two list definitions: one that will be useful to me, and a generalization which may be useful to @semorrison 



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2021-10-29T01:24:33+00:00](https://github.com/leanprover-community/mathlib/commit/c7f513951c5697e61cded272163246d9ad949715)
chore(measure_theory): drop a few `measurable_set` assumptions ([#9999](https://github.com/leanprover-community/mathlib/pull/#9999))

We had an extra `measurable_set` assumption in (one of the copies of) Caratheodory. Also remove `measurable f` assumption in `is_finite_measure (map f μ)` and make it an instance.

### [2021-10-29T00:33:15+00:00](https://github.com/leanprover-community/mathlib/commit/bdcb7310db0fbc0e55dc1897bea76448733b7810)
feat(linear_algebra/matrix/adjugate): det_adjugate and adjugate_adjugate ([#9991](https://github.com/leanprover-community/mathlib/pull/#9991))

This also adds `matrix.mv_polynomial_X`

### [2021-10-28T20:48:25+00:00](https://github.com/leanprover-community/mathlib/commit/415da222f1caafb5816f0afd124afd84ff50e214)
chore(topology,measure_theory): generalize a few instances ([#9967](https://github.com/leanprover-community/mathlib/pull/#9967))

* Prove that `Π i : ι, π i` has second countable topology if `ι` is encodable and each `π i` has second countable topology.
* Similarly for `borel_space`.
* Preserve old instances about `fintype` because we don't have (and can't have) an instance `fintype ι → encodable ι`.

### [2021-10-28T20:48:24+00:00](https://github.com/leanprover-community/mathlib/commit/0cfae438fdb524f4b2b18d5cb3a5db87e2ad84cb)
feat(archive/imo): IMO 2021 Q1 ([#8432](https://github.com/leanprover-community/mathlib/pull/#8432))

Formalised solution to IMO 2021 Q1



Co-authored-by: MantasBaksys <39908973+MantasBaksys@users.noreply.github.com>
Co-authored-by: MantasBaksys <baksys.mantas@gmail.com>
Co-authored-by: Mantas Bakšys <39908973+MantasBaksys@users.noreply.github.com>

### [2021-10-28T18:57:48+00:00](https://github.com/leanprover-community/mathlib/commit/99a2d5bfc9ac3d9dde6f0fc444207cb0df76c07c)
feat(ring_theory/adjoin_root): golf and generalize the algebra structure on `adjoin_root` ([#10019](https://github.com/leanprover-community/mathlib/pull/#10019))

We already have a more general version of this instance elsewhere, lets just reuse it.

### [2021-10-28T18:57:46+00:00](https://github.com/leanprover-community/mathlib/commit/18dce13469f01e0126abb2966ecfc310e7ff3bcc)
feat(data/finset/interval): Bounded intervals in locally finite orders are finite ([#9960](https://github.com/leanprover-community/mathlib/pull/#9960))

A set which is bounded above and below is finite. A set which is bounded below in an `order_top` is finite. A set which is bounded above in an `order_bot` is finite.

Also provide the `order_dual` constructions for `bdd_stuff` and `locally_finite_order`.

### [2021-10-28T18:57:45+00:00](https://github.com/leanprover-community/mathlib/commit/17339204ed4eb1edb0e9298ca9dc6e8d575cb6a7)
feat(list): add some lemmas ([#9873](https://github.com/leanprover-community/mathlib/pull/#9873))

Add a few lemmas about lists.
These are helpful when manipulating lists.





Co-authored-by: Ethan Pronovost <EPronovost@users.noreply.github.com>

### [2021-10-28T17:00:22+00:00](https://github.com/leanprover-community/mathlib/commit/e927aa4e5b12d98b54b76018dbbbfb0a06efc6e6)
feat(data/set/function): restrict `dite/ite/piecewise/extend` ([#10017](https://github.com/leanprover-community/mathlib/pull/#10017))

### [2021-10-28T17:00:20+00:00](https://github.com/leanprover-community/mathlib/commit/0d6548fc094229fa36f4ac157cf32dcf77a7c6b5)
chore(*): a few lemmas about `range_splitting ([#10016](https://github.com/leanprover-community/mathlib/pull/#10016))

### [2021-10-28T17:00:18+00:00](https://github.com/leanprover-community/mathlib/commit/b9ff26b58f71707e4b252f25b38943a7dd017cdd)
chore(measure_theory/measure/measure_space): reorder, golf ([#10015](https://github.com/leanprover-community/mathlib/pull/#10015))

Move `restrict_apply'` up and use it to golf some proofs. Drop an unneeded `measurable_set` assumption in 1 proof.

### [2021-10-28T17:00:16+00:00](https://github.com/leanprover-community/mathlib/commit/fd6f681681048d6ce42f8ba6a3f3f2d868ecec35)
feat(order/bounded_lattice): add `is_compl.le_sup_right_iff_inf_left_le` ([#10014](https://github.com/leanprover-community/mathlib/pull/#10014))

This lemma is a generalization of `is_compl.inf_left_eq_bot_iff`.
Also drop `inf_eq_bot_iff_le_compl` in favor of
`is_compl.inf_left_eq_bot_iff` and add
`set.subset_union_compl_iff_inter_subset`.

### [2021-10-28T17:00:14+00:00](https://github.com/leanprover-community/mathlib/commit/22d32dcd76d7908912fedc7147bb757143b79ad7)
fix(field_theory/intermediate_field): use a better `algebra.smul` definition, and generalize ([#10012](https://github.com/leanprover-community/mathlib/pull/#10012))

Previously coe_smul was not true by `rfl`

### [2021-10-28T17:00:12+00:00](https://github.com/leanprover-community/mathlib/commit/fe76b5c09143d9688ce1a2d66637b1d59a1cc554)
feat(group_theory/subgroup/basic): `mul_mem_sup` ([#10007](https://github.com/leanprover-community/mathlib/pull/#10007))

Adds `mul_mem_sup` and golfs a couple proofs that reprove this result.

### [2021-10-28T17:00:10+00:00](https://github.com/leanprover-community/mathlib/commit/c495ed61d7ede4cd088dffab108e71156d2ac8bb)
move(data/set/pairwise): Move `set.pairwise_on` ([#9986](https://github.com/leanprover-community/mathlib/pull/#9986))

This moves `set.pairwise_on` to `data.set.pairwise`, where `pairwise` and `set.pairwise_disjoint` already are.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-10-28T17:00:08+00:00](https://github.com/leanprover-community/mathlib/commit/628f418d3c3e2497a34b4ad95d95deaec3736d7c)
feat(computability/tm_to_partrec): prove finiteness ([#6955](https://github.com/leanprover-community/mathlib/pull/#6955))

The proof in this file was incomplete, and I finally found the time to
finish it. `tm_to_partrec.lean` constructs a turing machine that can
simulate a given partial recursive function. Previously, the functional
correctness of this machine was proven, but it uses an infinite state
space so it is not a priori obvious that it is in fact a true (finite)
turing machine, which is important for the Church-Turing theorem. This
PR adds a proof that the machine is in fact finite.

### [2021-10-28T15:13:55+00:00](https://github.com/leanprover-community/mathlib/commit/c8d14294d56e799f4b01279f475eb52b1aa26c4f)
feat(data/{finset,multiset}/locally_finite): Simple interval lemmas ([#9877](https://github.com/leanprover-community/mathlib/pull/#9877))

`(finset/multiset).image_add_(left/right)_Ixx` and `multiset.nodup_Ixx`



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-10-28T12:41:11+00:00](https://github.com/leanprover-community/mathlib/commit/acbb2a53648467b693e9f9486470b80f736d581e)
feat(analysis/normed_space/pi_Lp): use typeclass inference for `1 ≤ p` ([#9922](https://github.com/leanprover-community/mathlib/pull/#9922))

In `measure_theory.Lp`, the exponent `(p : ℝ≥0∞)` is an explicit hypothesis, and typeclass inference finds `[fact (1 ≤ p)]` silently (with the help of some pre-built `fact_one_le_two_ennreal` etc for specific use cases).

Currently, in `pi_Lp`, the fact that `(hp : 1 ≤ p)` must be provided explicitly.  I propose changing over to the `fact` system as used `measure_theory.Lp` -- I think it looks a bit prettier in typical use cases.

### [2021-10-28T09:24:44+00:00](https://github.com/leanprover-community/mathlib/commit/b0349aa962e9154d9bb6aa02937a6c66450ab5b0)
chore(measure_theory): a `continuous_map` is measurable ([#9998](https://github.com/leanprover-community/mathlib/pull/#9998))

Also move the proof of `homeomorph.measurable` up and use it in the
definition of `homeomorph.to_measurable_equiv`.

### [2021-10-28T09:24:43+00:00](https://github.com/leanprover-community/mathlib/commit/73423cf9a0a5fecdaea92178cb26268d55a3ea92)
feat(measure/measurable_space): add `measurable_equiv.of_unique_of_unique` ([#9968](https://github.com/leanprover-community/mathlib/pull/#9968))

Also fix a typo in a lemma name: `measurable_equiv.measurable_coe_iff` → `measurable_comp_iff`.

### [2021-10-28T09:24:41+00:00](https://github.com/leanprover-community/mathlib/commit/7f2b80646d264de4d3368f57531bef4587a97ed2)
feat(analysis/inner_product_space/dual): complex Riesz representation theorem ([#9924](https://github.com/leanprover-community/mathlib/pull/#9924))

Now that we have conjugate-linear maps, the Riesz representation theorem can be stated in a form that works over both `ℝ` and `ℂ`, as the construction of a conjugate-linear isometric equivalence from a complete inner product space `E` to its dual.

Co-authored-by: Frédéric Dupuis <dupuisf@iro.umontreal.ca>

### [2021-10-28T06:57:32+00:00](https://github.com/leanprover-community/mathlib/commit/f78b739842ffd5536eb2d5bba64223b3a328f053)
feat(category_theory/arrow): is_iso, mono, epi instances for maps between arrows ([#9976](https://github.com/leanprover-community/mathlib/pull/#9976))

### [2021-10-28T06:57:30+00:00](https://github.com/leanprover-community/mathlib/commit/8159af676b6b3a2a9175eeda60108cc77fc880d8)
feat(measure_theory/construction/borel_space): two measures are equal if they agree on closed-open intervals ([#9396](https://github.com/leanprover-community/mathlib/pull/#9396))



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-10-28T04:50:38+00:00](https://github.com/leanprover-community/mathlib/commit/468a9d565ba38847264b95f484e74ba76ba50e2a)
chore(scripts): update nolints.txt ([#10013](https://github.com/leanprover-community/mathlib/pull/#10013))

I am happy to remove some nolints for you!

### [2021-10-28T04:50:37+00:00](https://github.com/leanprover-community/mathlib/commit/bcaeb57a20248edffa90bca554d9e7e9439614df)
fix(data/equiv/encodable): turn `unique.encodable` into a `def` ([#10006](https://github.com/leanprover-community/mathlib/pull/#10006))

### [2021-10-28T02:37:00+00:00](https://github.com/leanprover-community/mathlib/commit/9db72700ff7ee2ba5b3a39586ba726ee01e7a421)
chore(*): rename gsmul to zsmul and gmultiples to zmultiples ([#10010](https://github.com/leanprover-community/mathlib/pull/#10010))

This is consistent with an earlier rename from `gpow` to `zpow`.

### [2021-10-27T20:21:14+00:00](https://github.com/leanprover-community/mathlib/commit/d360f3cb9b88e0897c693e13dbd651b08a8124fb)
feat(linear_algebra/free_module/finite/rank): add linear_algebra/free_module/finite/rank ([#9832](https://github.com/leanprover-community/mathlib/pull/#9832))

A basic API for rank of free modules.

- [x] depends on: [#9821](https://github.com/leanprover-community/mathlib/pull/#9821)

### [2021-10-27T17:47:32+00:00](https://github.com/leanprover-community/mathlib/commit/8ce5da4bbf6039e3cc1140022d14cab66536627a)
feat(algebra/order/archimedean): a few more lemmas ([#9997](https://github.com/leanprover-community/mathlib/pull/#9997))

Prove that `a + m • b ∈ Ioc c (c + b)` for some `m : ℤ`, and similarly for `Ico`.
Also move some lemmas out of a namespace.

### [2021-10-27T17:47:31+00:00](https://github.com/leanprover-community/mathlib/commit/ec51fb79672f00f43a1d7691aa0d8ad4522f91ea)
chore(algebra/order/floor): prove `subsingleton`s ([#9996](https://github.com/leanprover-community/mathlib/pull/#9996))

### [2021-10-27T17:47:29+00:00](https://github.com/leanprover-community/mathlib/commit/eaec1daee4c7ed8833908d66e5cd08ec23ef9e4a)
feat(group_theory/group_action/conj_act): A characteristic subgroup of a normal subgroup is normal ([#9992](https://github.com/leanprover-community/mathlib/pull/#9992))

Uses `mul_aut.conj_normal` to prove an instance stating that a characteristic subgroup of a normal subgroup is normal.

### [2021-10-27T17:47:27+00:00](https://github.com/leanprover-community/mathlib/commit/c529711fd42c23d223715b8150ac81936f834463)
refactor(*): rename fpow and gpow to zpow ([#9989](https://github.com/leanprover-community/mathlib/pull/#9989))

Historically, we had two notions of integer power, one on groups called `gpow` and the other one on fields called `fpow`. Since the introduction of `div_inv_monoid` and `group_with_zero`, these definitions have been merged into one, and the boundaries are not clear any more. We rename both of them to `zpow`, adding a subscript `0` to disambiguate lemma names when there is a collision, where the subscripted version is for groups with zeroes (as is already done for inv lemmas).

To limit the scope of the change. this PR does not rename `gsmul` to `zsmul` or `gmultiples` to `zmultiples`.

### [2021-10-27T17:47:26+00:00](https://github.com/leanprover-community/mathlib/commit/9e4609b081a53bbcf06e655a6a7577e7a4b46bd1)
chore(data/fintype/card): add `fin.prod_univ_{one,two}` ([#9987](https://github.com/leanprover-community/mathlib/pull/#9987))

Sometimes Lean fails to simplify `(default : fin 1)` to `0` and
`0.succ` to `1` in complex expressions. These lemmas explicitly use
`f 0` and `f 1` in the output.

### [2021-10-27T17:47:25+00:00](https://github.com/leanprover-community/mathlib/commit/29079ba8bc53a8465448a577eb2fc41932b02301)
feat(tactic/lint): linter improvements ([#9901](https://github.com/leanprover-community/mathlib/pull/#9901))

* Make the linter framework easier to use on projects outside mathlib with the new `lint_project` (replacing `lint_mathlib`). Also replace `lint_mathlib_decls` by `lint_project_decls`.
* Make most declarations in the frontend not-private (I want to use them in other projects)
* The unused argument linter does not report declarations that contain `sorry`. It will still report declarations that use other declarations that contain sorry. I did not add a test for this, since it's hard to do that while keeping the test suite silent (but I did test locally).
* Some minor changes in the test suite (not important, but they cannot hurt).

### [2021-10-27T15:13:53+00:00](https://github.com/leanprover-community/mathlib/commit/25718c2682813898af96fa3d5a7f68281dd93869)
feat(data/nat/basic): Add two lemmas two nat/basic which are necessary for the count PR ([#10001](https://github.com/leanprover-community/mathlib/pull/#10001))

Add two lemmas proved by refl to data/nat/basic. They are needed for the count PR, and are changing a file low enogh in the import hierarchy to be a separate PR.



Co-authored-by: SymmetryUnbroken <64909175+SymmetryUnbroken@users.noreply.github.com>

### [2021-10-27T15:13:51+00:00](https://github.com/leanprover-community/mathlib/commit/4e29dc7512c54a4a9495ef80e7ce871ca88582bf)
chore(topology/algebra/module): add `continuous_linear_equiv.arrow_congr_equiv` ([#9982](https://github.com/leanprover-community/mathlib/pull/#9982))

### [2021-10-27T15:13:50+00:00](https://github.com/leanprover-community/mathlib/commit/a3f4a025d4a736c57caa934467a5938beeda753a)
chore(analysis/normed_space/is_R_or_C + data/complex/is_R_or_C): make some proof steps standalone lemmas ([#9933](https://github.com/leanprover-community/mathlib/pull/#9933))

Separate some proof steps from `linear_map.bound_of_sphere_bound` as standalone lemmas to golf them a little bit.



Co-authored-by: kkytola <39528102+kkytola@users.noreply.github.com>

### [2021-10-27T15:13:49+00:00](https://github.com/leanprover-community/mathlib/commit/d7c689d247f6623595709af7d4e542e719aeebd7)
feat(algebraic_geometry/prime_spectrum): Closed points in prime spectrum ([#9861](https://github.com/leanprover-community/mathlib/pull/#9861))

This PR adds lemmas about the correspondence between closed points in `prime_spectrum R` and maximal ideals of `R`.

In order to import and talk about integral maps I had to move some lemmas from `noetherian.lean` to `prime_spectrum.lean` to prevent cyclic import dependencies.

### [2021-10-27T07:01:26+00:00](https://github.com/leanprover-community/mathlib/commit/d9cea393084fe7896ced66322883576043cdf3aa)
refactor(topology+algebraic_geometry): prove and make use of equalities to simplify definitions ([#9972](https://github.com/leanprover-community/mathlib/pull/#9972))

Prove and make use of equalities whenever possible, even between functors (which is discouraged according to certain philosophy), to replace isomorphisms by equalities, to remove the need of transporting across isomorphisms in various definitions (using `eq_to_hom` directly), most notably: [simplified definition of identity morphism for PresheafedSpace](https://github.com/leanprover-community/mathlib/compare/use_equality?expand=1#diff-252fb30c3a3221e6472db5ba794344dfb423898696e70299653d95f635de06adR89), [simplified extensionality lemma for morphisms](https://github.com/leanprover-community/mathlib/compare/use_equality?expand=1#diff-252fb30c3a3221e6472db5ba794344dfb423898696e70299653d95f635de06adR68), [simplified definition of composition](https://github.com/leanprover-community/mathlib/compare/use_equality?expand=1#diff-252fb30c3a3221e6472db5ba794344dfb423898696e70299653d95f635de06adR96) and [the global section functor](https://github.com/leanprover-community/mathlib/compare/use_equality?expand=1#diff-252fb30c3a3221e6472db5ba794344dfb423898696e70299653d95f635de06adR228) (takes advantage of defeq and doesn't require proving any new equality).

Other small changes to mathlib:
- Define pushforward functor of presheaves in topology/sheaves/presheaf.lean
- Add new file functor.lean in topology/sheaves, proves the pushforward of a sheaf is a sheaf, and defines the pushforward functor of sheaves, with the expectation that pullbacks will be added later.
- Make one of the arguments in various `restrict`s implicit.
- Change statement of [`to_open_comp_comap`](https://github.com/leanprover-community/mathlib/compare/use_equality?expand=1#diff-54364470f443f847742b1c105e853afebc25da68faad63cc5a73db167bc85d06R973) in structure_sheaf.lean to be more general (the same proof works!)

The new definitions result in simplified proofs, but apart from the main files opens.lean, presheaf.lean and presheafed_space.lean where proofs are optimized, I did only the minimum changes required to fix the broken proofs, and I expect there to be large room of improvement with the new definitions especially in the files changed in this PR. I also didn't remove the old lemmas and mostly just add new ones, so subsequent cleanup may be desired.

### [2021-10-27T04:25:01+00:00](https://github.com/leanprover-community/mathlib/commit/996ece59628ee292220849087d9ea0a8a884aaf6)
feat(tactic/suggest): add a flag to disable "Try this" lines ([#9820](https://github.com/leanprover-community/mathlib/pull/#9820))

### [2021-10-27T02:40:26+00:00](https://github.com/leanprover-community/mathlib/commit/62edbe57a3ff3da1eabf3b4084ed08ddd6f93fe1)
chore(scripts): update nolints.txt ([#9994](https://github.com/leanprover-community/mathlib/pull/#9994))

I am happy to remove some nolints for you!

### [2021-10-26T22:41:21+00:00](https://github.com/leanprover-community/mathlib/commit/b59258944be73ecbbb971bc161a4de0eb6eec5ec)
refactor(order/boolean_algebra): factor out pi.sdiff and pi.compl ([#9955](https://github.com/leanprover-community/mathlib/pull/#9955))

Provide definitional lemmas about sdiff and compl on pi types.
This allows usage later on even without a whole `boolean_algebra` instance.

### [2021-10-26T22:41:20+00:00](https://github.com/leanprover-community/mathlib/commit/120cf5bc36be79ff5b7671f53dca97c3f517836b)
doc(topology) add a library note about continuity lemmas ([#9954](https://github.com/leanprover-community/mathlib/pull/#9954))

* This is a note with some tips how to formulate a continuity (or measurability, differentiability, ...) lemma.
* I wanted to write this up after formulating `continuous.strans` in many "wrong" ways before discovering the "right" way.
* I think many lemmas are not following this principle, and could be improved in generality and/or convenience by following this advice.
* Based on experience from the sphere eversion project.
* The note mentions a lemma that will be added in [#9959](https://github.com/leanprover-community/mathlib/pull/#9959), but I don't think we necessarily have to wait for that PR.

### [2021-10-26T21:02:25+00:00](https://github.com/leanprover-community/mathlib/commit/36a2015278a65ba6b0f27e06a480b50cb8dd0919)
feat(topology/[separation, dense_embedding]): a function to a T1 space which has a limit at x is continuous at x ([#9934](https://github.com/leanprover-community/mathlib/pull/#9934))

We prove that, for a function `f` with values in a T1 space, knowing that `f` admits *any* limit at `x` suffices to prove that `f` is continuous at `x`.

We then use it to give a variant of `dense_inducing.extend_eq` with the same assumption required for continuity of the extension, which makes using both `extend_eq` and `continuous_extend` easier, and also brings us closer to Bourbaki who makes no explicit continuity assumption on the function to extend.

### [2021-10-26T20:05:59+00:00](https://github.com/leanprover-community/mathlib/commit/92e907864ad5d357c67ff35a1ace2c0d0a7ab195)
fix(linear_algebra/matrix/determinant): remove coercions ([#9975](https://github.com/leanprover-community/mathlib/pull/#9975))

### [2021-10-26T20:05:58+00:00](https://github.com/leanprover-community/mathlib/commit/2a32c70c78096758af93e997b978a5d461007b4f)
refactor(linear_algebra/matrix/nonsingular_inverse): split out files for adjugate and nondegenerate ([#9974](https://github.com/leanprover-community/mathlib/pull/#9974))

This breaks the file roughly in two, and rescues lost lemmas that ended up in the wrong sections of the file.

The module docstrings have been tweaked a little, but all the lemmas have just been moved around.

### [2021-10-26T17:54:26+00:00](https://github.com/leanprover-community/mathlib/commit/ce164e28f262acbb3de6281b3b03660a9f744e3c)
chore(data/{finset,multiset}/locally_finite): rename from `.interval` ([#9980](https://github.com/leanprover-community/mathlib/pull/#9980))

The pattern is `data.stuff.interval` for files about `locally_finite_order stuff` and... `finset α` and `multiset α` are locally finite orders. This thus makes space for this theory.

### [2021-10-26T17:54:24+00:00](https://github.com/leanprover-community/mathlib/commit/3aa5749243537266ebf9e7da7fdc39393fda2bb8)
feat(group_theory/subgroup/basic): Define characteristic subgroups ([#9921](https://github.com/leanprover-community/mathlib/pull/#9921))

This PR defines characteristic subgroups and builds the basic API.

Getting `@[to_additive]` to work correctly was a bit tricky, so I mostly just copied the setup for `subgroup.normal`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-10-26T16:22:50+00:00](https://github.com/leanprover-community/mathlib/commit/50c60943e1fa67f821348fe35ceb621f2dc9a5df)
feat(topology/uniform_space/basic): add lemma `comp_open_symm_mem_uniformity_sets` ([#9981](https://github.com/leanprover-community/mathlib/pull/#9981))

### [2021-10-26T12:23:43+00:00](https://github.com/leanprover-community/mathlib/commit/d2b1221746c7d68025a64e59f6642ab6813c2e62)
feat(algebra/order/group|order/filter): add two lemmas ([#9956](https://github.com/leanprover-community/mathlib/pull/#9956))

* Also open `function` namespace in `order.filter.basic`
* From the sphere eversion project

### [2021-10-26T09:49:59+00:00](https://github.com/leanprover-community/mathlib/commit/41df5b3550c41dfbe58e2a68195d9054f09297d2)
docs(data/sigma/basic): Add module docstring ([#9908](https://github.com/leanprover-community/mathlib/pull/#9908))

### [2021-10-26T09:09:15+00:00](https://github.com/leanprover-community/mathlib/commit/6b47ccb717d986cb9e2b0c1d547b78a1d0aa17f0)
feat(group_theory/p_group): Center of a p-group is nontrivial ([#9973](https://github.com/leanprover-community/mathlib/pull/#9973))

The center of a p-group is nontrivial, stated in two different ways.

### [2021-10-26T07:25:48+00:00](https://github.com/leanprover-community/mathlib/commit/f229c83cf8691826af66ef410f3b382fdce3a022)
chore(*): move 2 lemmas to reorder imports ([#9969](https://github.com/leanprover-community/mathlib/pull/#9969))

I want to use `measure_theory.measure_preserving` in various files, including `measure_theory.integral.lebesgue`. The file about measure preserving map had two lemmas about product measures. I move them to `measure_theory.constructions.prod`. I also golfed (and made it more readable at the same time!) the proof of `measure_theory.measure.prod_prod_le` using `to_measurable_set`.

### [2021-10-26T07:25:47+00:00](https://github.com/leanprover-community/mathlib/commit/367d71efb3d8a37fc6509923d56404412dcf1be3)
chore(order/iterate): review, add docs ([#9965](https://github.com/leanprover-community/mathlib/pull/#9965))

* reorder sections;
* add section docs;
* use inequalities between functions in a few statements;
* add a few lemmas about `strict_mono` functions.

### [2021-10-26T07:25:45+00:00](https://github.com/leanprover-community/mathlib/commit/717de02db7992f21c868bafbe4a98e4dfd8594fa)
refactor(linear_algebra/free_module/pid): move lemmas ([#9962](https://github.com/leanprover-community/mathlib/pull/#9962))

`linear_algebra/free_module/pid` contains several results not directly related to PID. We move them in more appropriate files.

Except for small golfing and easy generalization, the statements and the proofs are untouched.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-10-26T05:22:54+00:00](https://github.com/leanprover-community/mathlib/commit/5227f53986b7efb8855a85962a745bae264c7379)
chore(data/equiv/encodable): a `[unique]` type is encodable ([#9970](https://github.com/leanprover-community/mathlib/pull/#9970))

### [2021-10-26T02:28:08+00:00](https://github.com/leanprover-community/mathlib/commit/a8e6442f7e9e2c0f953c761b8be533628978f56d)
chore(scripts): update nolints.txt ([#9971](https://github.com/leanprover-community/mathlib/pull/#9971))

I am happy to remove some nolints for you!

### [2021-10-26T01:01:18+00:00](https://github.com/leanprover-community/mathlib/commit/e88b4edea4112209b4e814c1c950a30d633426a7)
chore(measure_theory/constructions/pi): add `pi_of_empty` ([#9937](https://github.com/leanprover-community/mathlib/pull/#9937))

### [2021-10-25T22:55:58+00:00](https://github.com/leanprover-community/mathlib/commit/56de12a75a6a71be29622f8aa2f2106926a1c6db)
refactor(data/mv_polynomial): upgrade `monomial` to a `linear_map` ([#9870](https://github.com/leanprover-community/mathlib/pull/#9870))

### [2021-10-25T22:55:56+00:00](https://github.com/leanprover-community/mathlib/commit/34b9933662cca68b0977dd8d8ca8d53d94a0abf8)
feat(number_theory/liouville): the set of Liouville numbers has measure zero ([#9702](https://github.com/leanprover-community/mathlib/pull/#9702))

As a corollary, the filters `residual ℝ` and `volume.ae` are disjoint.

### [2021-10-25T22:55:55+00:00](https://github.com/leanprover-community/mathlib/commit/c363ad635bb21ce03579a66f8885d1ee8af99f48)
feat(category_theory/sites/*): Cover preserving functors ([#9691](https://github.com/leanprover-community/mathlib/pull/#9691))

Split from [#9650](https://github.com/leanprover-community/mathlib/pull/#9650)

- Defined `cover_preserving` functors as functors that push covering sieves to covering sieves.
- Defined `compatible_preserving` functors as functors that push compatible families to compatible families.
- Proved that functors that are both `cover_preserving` and `compatible_preserving` pulls sheaves to sheaves.



Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-10-25T20:31:21+00:00](https://github.com/leanprover-community/mathlib/commit/54212007e3a2c907b439cff0b7e41cc83f0802f9)
feat(group_theory/index): Small values of `subgroup.index` ([#9893](https://github.com/leanprover-community/mathlib/pull/#9893))

`H.index = 1 ↔ H = ⊤` and related results.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-10-25T20:31:20+00:00](https://github.com/leanprover-community/mathlib/commit/880c7bd4cf8775bab7c3893c57bacec92e78ebff)
chore(linear_algebra/matrix): add fin expansions for trace and adjugate, and some trace lemmas ([#9884](https://github.com/leanprover-community/mathlib/pull/#9884))

We have these expansions for `det` already, I figured we may as well have them for these.

This adds some other trivial trace lemmas while I'm touching the same file.

### [2021-10-25T20:31:19+00:00](https://github.com/leanprover-community/mathlib/commit/e808b41944ad0bf2e5180861fc250933307cce8f)
feat(data/matrix/basic): lemmas about transpose and conj_transpose on sums and products ([#9880](https://github.com/leanprover-community/mathlib/pull/#9880))

This also generalizes some previous results from `star_ring` to `star_add_monoid` now that the latter exists.

To help prove the non-commutative statements, this adds `monoid_hom.unop_map_list_prod` and similar.
This could probably used for proving `star_list_prod` in future.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-10-25T17:43:11+00:00](https://github.com/leanprover-community/mathlib/commit/87fa12a767e018fc8218e0337d41b77889cfb2a2)
chore(linear_algebra/matrix/nonsingular_inverse): replace `1 < fintype.card n` with `nontrivial n` ([#9953](https://github.com/leanprover-community/mathlib/pull/#9953))

This likely makes this a better simp lemma

### [2021-10-25T17:43:10+00:00](https://github.com/leanprover-community/mathlib/commit/0d131fe56d0ca57581e9e791d62d7b4cc45de2a9)
chore(group_theory/submonoid): move a lemma to reduce imports ([#9951](https://github.com/leanprover-community/mathlib/pull/#9951))

Currently, `algebra.pointwise` is a relatively "heavy" import (e.g., it depends on `data.set.finite`) and I want to use submonoid closures a bit earlier than that.

### [2021-10-25T17:43:09+00:00](https://github.com/leanprover-community/mathlib/commit/374885af1f9aa5b1adb12a36733359453b35742e)
feat(linear_algebra/matrix/nonsingular_inverse): lemmas about adjugate ([#9947](https://github.com/leanprover-community/mathlib/pull/#9947))

### [2021-10-25T17:43:06+00:00](https://github.com/leanprover-community/mathlib/commit/c693682fd7cd205d0446896c72eeecf0d5fc0abd)
chore(analysis/normed/group/basic): make various norm instances computable ([#9946](https://github.com/leanprover-community/mathlib/pull/#9946))

Instead of defining the default `edist` as `ennreal.of_real` which introduces an `ite` on an undecidable equality, this constructs the `ennreal` directly using a proof of non-negativity.

This removes `noncomputable theory` from some files so as to make it obvious from the source alone which definitions are and are not computable.

### [2021-10-25T17:43:03+00:00](https://github.com/leanprover-community/mathlib/commit/5fcbd2b9d6c542cb3193c5ee51368bb740ff6a77)
chore(linear_algebra/matrix/nonsingular_inverse): use pi.single instead of ite ([#9944](https://github.com/leanprover-community/mathlib/pull/#9944))

### [2021-10-25T17:43:01+00:00](https://github.com/leanprover-community/mathlib/commit/5778df8700bb7cf68ba8d7b1b3248b5b7df42987)
chore(analysis/complex/circle): upgrade `exp_map_circle` to `continuous_map` ([#9942](https://github.com/leanprover-community/mathlib/pull/#9942))

### [2021-10-25T17:43:00+00:00](https://github.com/leanprover-community/mathlib/commit/2026a5f7b63f51fe50c032dbb2811fcb502c9503)
feat(measure_theory/measure): better `measure.restrict_singleton` ([#9936](https://github.com/leanprover-community/mathlib/pull/#9936))

With new `restrict_singleton`, `simp` can simplify `∫ x in {a}, f x ∂μ`
to `(μ {a}).to_real • f a`.

### [2021-10-25T17:42:59+00:00](https://github.com/leanprover-community/mathlib/commit/8eb1c029692a627833c9e4107447865a346c316e)
feat(analysis/special_functions/pow): Equivalent conditions for zero powers ([#9897](https://github.com/leanprover-community/mathlib/pull/#9897))

Lemmas for 0^x in the reals and complex numbers.

### [2021-10-25T17:42:58+00:00](https://github.com/leanprover-community/mathlib/commit/312db88b2d1e9f9cfc44004370be5d5f3f780cff)
feat(*): use `ordered_sub` instead of `nat.sub` lemmas  ([#9855](https://github.com/leanprover-community/mathlib/pull/#9855))

* For all `nat.sub` lemmas in core, prefer to use the `has_ordered_sub` version.
* Most lemmas have an identical version for `has_ordered_sub`. In some cases we only have the symmetric version.
* Make arguments to `tsub_add_eq_tsub_tsub` and `tsub_add_eq_tsub_tsub_swap` explicit
* Rename `add_tsub_add_right_eq_tsub -> add_tsub_add_eq_tsub_right` (for consistency with the `_left` version)
* Rename `sub_mul' -> tsub_mul` and `mul_sub' -> mul_tsub` (these were forgotten in [#9793](https://github.com/leanprover-community/mathlib/pull/#9793))
* Many of the fixes are to fix the identification of `n < m` and `n.succ \le m`.
* Add projection notation `h.nat_succ_le` for `nat.succ_le_of_lt h`.

### [2021-10-25T17:42:56+00:00](https://github.com/leanprover-community/mathlib/commit/f298c559ddbbee0aa3806511832a584aa1203563)
refactor(linear_algebra/finite_dimensional): define finite_dimensional using module.finite ([#9854](https://github.com/leanprover-community/mathlib/pull/#9854))

`finite_dimensional K V` is by definition `is_noetherian K V`. We refactor this to use everywhere `finite K V` instead.

To keep the PR reasonably small, we don't delete `finite_dimension`, but we define it as `module.finite`. In a future PR we will remove it.

- [x] depends on: [#9860](https://github.com/leanprover-community/mathlib/pull/#9860)

### [2021-10-25T13:43:52+00:00](https://github.com/leanprover-community/mathlib/commit/3d457a2482ffad757f4fa13dce2fb89cfc19e01c)
chore(topology/continuous_function): review API ([#9950](https://github.com/leanprover-community/mathlib/pull/#9950))

* add `simps` config for `α →ᵇ β`;
* use better variable names in `topology.continuous_function.compact`;
* weaken some TC assumptions in `topology.continuous_function.compact`;
* migrate more API from `α →ᵇ β` to `C(α, β)`.

### [2021-10-25T13:43:51+00:00](https://github.com/leanprover-community/mathlib/commit/f23354dcd8249ed6e4c5b0e522fcb6abf488ac7a)
feat(linear_algebra/basic, ring_theory/ideal/basic): add span_insert ([#9941](https://github.com/leanprover-community/mathlib/pull/#9941))

### [2021-10-25T10:59:45+00:00](https://github.com/leanprover-community/mathlib/commit/26c838fca0825ccd4582afa3f0aff1f5fd314ad3)
refactor(data/real/ennreal): remove ordered sub simp lemmas ([#9902](https://github.com/leanprover-community/mathlib/pull/#9902))

* They are now simp lemmas in `algebra/order/sub`
* Squeeze some simps

### [2021-10-25T08:37:22+00:00](https://github.com/leanprover-community/mathlib/commit/dc1484e45516bab207bd4fcf9ae969ddac97924d)
feat(ring_theory/polynomial/cyclotomic): add lemmas about evaluation of cyclotomic polynomials at one ([#9910](https://github.com/leanprover-community/mathlib/pull/#9910))

### [2021-10-25T06:51:07+00:00](https://github.com/leanprover-community/mathlib/commit/7e53203047b1132b6017fc01dc6f2ba1ebec5025)
chore(group_theory/submonoid/operations): golf a few proofs ([#9948](https://github.com/leanprover-community/mathlib/pull/#9948))

### [2021-10-25T06:51:05+00:00](https://github.com/leanprover-community/mathlib/commit/bfcbe68179039872e5d41ef7e703c67cccf80b3e)
feat(group_theory/subgroup/basic): `normalizer_eq_top` ([#9917](https://github.com/leanprover-community/mathlib/pull/#9917))

The normalizer is the whole group if and only if the subgroup is normal.

### [2021-10-25T06:51:03+00:00](https://github.com/leanprover-community/mathlib/commit/41b90d7add631224e62b3a382ccf0064964d6fc5)
feat(group_theory/index): Second isomorphism theorem in terms of `relindex` ([#9915](https://github.com/leanprover-community/mathlib/pull/#9915))

Restates the second isomorphism theorem in terms of `relindex`.

### [2021-10-25T05:13:27+00:00](https://github.com/leanprover-community/mathlib/commit/b9260f288bc80b276e10407a72eac4c04d1d97ed)
feat(group_theory/subgroup/basic): `map_subtype_le` ([#9916](https://github.com/leanprover-community/mathlib/pull/#9916))

A subgroup of a subgroup is `≤`.

### [2021-10-25T01:28:17+00:00](https://github.com/leanprover-community/mathlib/commit/951a60ead91d2855f0ea304f15ae8d629249bc31)
chore(data/list/basic): golf a proof ([#9949](https://github.com/leanprover-community/mathlib/pull/#9949))

Prove `list.mem_map` directly, get `list.exists_of_mem_map` and
`list.mem_map_of_mem` as corollaries.

### [2021-10-25T01:28:16+00:00](https://github.com/leanprover-community/mathlib/commit/264d33ecb5729a9164ec883515d2cdb4e3460296)
docs(control/traversable/lemmas): Add module docstring ([#9927](https://github.com/leanprover-community/mathlib/pull/#9927))

### [2021-10-24T22:52:58+00:00](https://github.com/leanprover-community/mathlib/commit/c4760b97734ab34ed4001b58ad51fe8e70d41d9c)
feat(algebra/big_operators/basic): prod/sum over an empty type ([#9939](https://github.com/leanprover-community/mathlib/pull/#9939))

### [2021-10-24T22:52:57+00:00](https://github.com/leanprover-community/mathlib/commit/f9da68ccf774b0cae6d2a5e5d8c5236401488a5b)
feat(*): a few more `fun_unique`s ([#9938](https://github.com/leanprover-community/mathlib/pull/#9938))

### [2021-10-24T22:52:56+00:00](https://github.com/leanprover-community/mathlib/commit/942e60f799d8f8b6ff001dac1e63ddc009b92d67)
chore(algebra/*/pi): add missing lemmas about function.update and set.piecewise ([#9935](https://github.com/leanprover-community/mathlib/pull/#9935))

This adds `function.update_{zero,one,add,mul,sub,div,neg,inv,smul,vadd}`, and moves `pi.piecewise_{sub,div,neg,inv}` into the `set` namespace to match `set.piecewise_{add,mul}`.

This also adds `finset.piecewise_erase_univ`, as this is tangentially related.

### [2021-10-24T22:52:55+00:00](https://github.com/leanprover-community/mathlib/commit/1e7f6b9a746d445350890f3ad5236f3fc686c103)
docs(control/bitraversable/instances): Add def docstrings ([#9931](https://github.com/leanprover-community/mathlib/pull/#9931))

### [2021-10-24T22:52:54+00:00](https://github.com/leanprover-community/mathlib/commit/5d1e8f79a3132c7c1bfd09b788019adfcaabb469)
docs(control/applicative): Add module docstring ([#9930](https://github.com/leanprover-community/mathlib/pull/#9930))

### [2021-10-24T22:52:53+00:00](https://github.com/leanprover-community/mathlib/commit/6f1d45dcccf674593073ee4e54da10ba35aedbc0)
docs(control/bitraversable/basic): Add defs docstrings ([#9929](https://github.com/leanprover-community/mathlib/pull/#9929))

### [2021-10-24T22:52:52+00:00](https://github.com/leanprover-community/mathlib/commit/5642c6282d1ea200f340fb092e89e040cdb03c28)
docs(control/traversable/equiv): Add module docstring ([#9928](https://github.com/leanprover-community/mathlib/pull/#9928))

### [2021-10-24T22:52:51+00:00](https://github.com/leanprover-community/mathlib/commit/8c0b8c7160acc5dc620c15eac3eebaa949a22df9)
feat(group_theory/subgroup/basic): Contrapositive of `card_le_one_iff_eq_bot` ([#9918](https://github.com/leanprover-community/mathlib/pull/#9918))

Adds contrapositive of `card_le_one_iff_eq_bot`.

### [2021-10-24T22:52:50+00:00](https://github.com/leanprover-community/mathlib/commit/44682319d007a3a2dc6c13db4c6a420ccdcd1bb5)
feat(data/nat/log): Equivalent conditions for logarithms to equal zero and one ([#9903](https://github.com/leanprover-community/mathlib/pull/#9903))

Add equivalent conditions for a `nat.log` to equal 0 or 1.

### [2021-10-24T22:52:49+00:00](https://github.com/leanprover-community/mathlib/commit/12515db655a0c4cc759ef5e368fc6d8e592ef983)
feat(data/list): product of list.update_nth in terms of inverses ([#9800](https://github.com/leanprover-community/mathlib/pull/#9800))

Expression for the product of `l.update_nth n x` in terms of inverses instead of `take` and `drop`, assuming a group instead of a monoid.

### [2021-10-24T22:06:49+00:00](https://github.com/leanprover-community/mathlib/commit/c20f08ed80d3bb7b7b55fc57e8a86378558d75b5)
feat(dynamics/ergodic/measure_preserving): add `measure_preserving.symm` ([#9940](https://github.com/leanprover-community/mathlib/pull/#9940))

Also make the proof of `measure_preserving.skew_product` a bit more readable.

### [2021-10-24T22:06:48+00:00](https://github.com/leanprover-community/mathlib/commit/4ea8de914b23d3b2b51edb12d7f2d22387834bbf)
feat(measure_theory/integral): Divergence theorem for Bochner integral ([#9811](https://github.com/leanprover-community/mathlib/pull/#9811))

### [2021-10-24T21:16:31+00:00](https://github.com/leanprover-community/mathlib/commit/a30e1900a9c7e45d90516b3340b611315baee9a7)
split(analysis/normed_space/exponential): split file to minimize dependencies ([#9932](https://github.com/leanprover-community/mathlib/pull/#9932))

As suggested by @urkud, this moves all the results depending on derivatives, `complex.exp` and `real.exp` to a new file `analysis/special_function/exponential`. That way the definitions of `exp` and `[complex, real].exp` are independent, which means we could eventually redefine the latter in terms of the former without breaking the import tree.

### [2021-10-24T16:04:22+00:00](https://github.com/leanprover-community/mathlib/commit/dc6b8e1c07027749a66ac6117fa8b23e177ecab3)
feat(topology): add some lemmas ([#9907](https://github.com/leanprover-community/mathlib/pull/#9907))

* From the sphere eversion project
* Add compositional version `continuous.fst` of `continuous_fst`, compare `measurable.fst`.
* Add `comp_continuous_at_iff` and `comp_continuous_at_iff'` for `homeomorph` (and for `inducing`).
* Add some variants of these (requested by review).

### [2021-10-24T13:34:54+00:00](https://github.com/leanprover-community/mathlib/commit/696f07f252ed66c829166346e88dc0a58cccd5f3)
split(data/list/lattice): split off `data.list.basic` ([#9906](https://github.com/leanprover-community/mathlib/pull/#9906))

### [2021-10-24T13:34:52+00:00](https://github.com/leanprover-community/mathlib/commit/9dc3b4d6559a99b869ccc35f528e22915585ca5a)
feat(topology/algebra/group): continuous div lemmas ([#9905](https://github.com/leanprover-community/mathlib/pull/#9905))

* From the sphere eversion project
* There were already some lemmas about `sub`, now they also have multiplicative versions
* Add more lemmas about `div` being continuous
* Add `continuous_at.inv`
* Rename `nhds_translation` -> `nhds_translation_sub`.

### [2021-10-24T10:50:08+00:00](https://github.com/leanprover-community/mathlib/commit/be948000a6cd3a2cb9af3c273611a6d7fb1312dc)
feat(data/real/nnreal): use the nonneg instance ([#9701](https://github.com/leanprover-community/mathlib/pull/#9701))

... to show that `nnreal` forms a conditionally complete linear order with bot.

This requires some fixes in the order hierarchy.
* orders on subtypes are now obtained by lifting `coe` instead of `subtype.val`. This has the nice side benefit that some proofs became simpler.
* `subset_conditionally_complete_linear_order` is now reducible



Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-10-24T08:26:39+00:00](https://github.com/leanprover-community/mathlib/commit/416edeed5fe6b24bbdaf40017cc6abfa4a97e40b)
feat(analysis/normed_space/is_R_or_C): add three lemmas on bounds of linear maps over is_R_or_C. ([#9827](https://github.com/leanprover-community/mathlib/pull/#9827))

Adding lemmas `linear_map.bound_of_sphere_bound`, `linear_map.bound_of_ball_bound`, `continuous_linear_map.op_norm_bound_of_ball_bound` as a preparation of a PR on Banach-Alaoglu theorem.

### [2021-10-24T03:33:39+00:00](https://github.com/leanprover-community/mathlib/commit/ecc544ea15c7eb61992ca35547a2e979836b4c5b)
chore(scripts): update nolints.txt ([#9923](https://github.com/leanprover-community/mathlib/pull/#9923))

I am happy to remove some nolints for you!

### [2021-10-24T03:33:38+00:00](https://github.com/leanprover-community/mathlib/commit/e836a7222f88cebeb87545ad39d377c0cff2ad51)
feat(order/galois_connection): add `exists_eq_{l,u}`, tidy up lemmas ([#9904](https://github.com/leanprover-community/mathlib/pull/#9904))

This makes some arguments implicit to `compose` as these are inferrable from the other arguments, and changes `u_l_u_eq_u` and `l_u_l_eq_l` to be applied rather than unapplied, which shortens both the proof and the places where the lemma is used.

### [2021-10-24T03:33:37+00:00](https://github.com/leanprover-community/mathlib/commit/49c684125cdf421b3cff0bb17dd59376a3cc613f)
chore(topology): generalize `real.image_Icc` etc ([#9784](https://github.com/leanprover-community/mathlib/pull/#9784))

* add lemmas about `Ici`/`Iic`/`Icc` in `α × β`;
* introduce a typeclass for `is_compact_Icc` so that the same lemma works for `ℝ` and `ℝⁿ`;
* generalize `real.image_Icc` etc to a conditionally complete linear order (e.g., now it works for `nnreal`, `ennreal`, `ereal`), move these lemmas to the `continuous_on` namespace.

### [2021-10-24T01:53:46+00:00](https://github.com/leanprover-community/mathlib/commit/55a1160424c6626496bda3a73ba49e835e93bb3f)
feat(linear_algebra): add notation for star-linear maps ([#9875](https://github.com/leanprover-community/mathlib/pull/#9875))

This PR adds the notation `M →ₗ⋆[R] N`, `M ≃ₗ⋆[R] N`, etc, to denote star-linear maps/equivalences, i.e. semilinear maps where the ring hom is `star`. A special case of this are conjugate-linear maps when `R = ℂ`.

Co-authored-by: Heather Macbeth <hmacbeth1@fordham.edu>



Co-authored-by: Frédéric Dupuis <dupuisf@iro.umontreal.ca>

### [2021-10-24T00:37:39+00:00](https://github.com/leanprover-community/mathlib/commit/5ec1572cc2ea945908d72d9b6e69fd3a2cfa9b99)
feat(nat/choose/central): definition of the central binomial coefficient, and bounds ([#9753](https://github.com/leanprover-community/mathlib/pull/#9753))

Two exponential lower bounds on the central binomial coefficient.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-10-24T00:37:37+00:00](https://github.com/leanprover-community/mathlib/commit/d788647f8de7374ffa3b529f59394a7b76685d79)
feat(ring_theory): generalize `adjoin_root.power_basis` ([#9536](https://github.com/leanprover-community/mathlib/pull/#9536))

Now we only need that `g` is monic to state that `adjoin_root g` has a power basis. Note that this does not quite imply the result of [#9529](https://github.com/leanprover-community/mathlib/pull/#9529): this is phrased in terms of `minpoly R (root g)` and the other PR in terms of `g` itself, so I don't have a direct use for the current PR. However, it seems useful enough to have this statement, so I PR'd it anyway.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-10-23T22:10:47+00:00](https://github.com/leanprover-community/mathlib/commit/928d0e03b726edd5a874e17f18c811464a146221)
docs(data/dlist/instances): Add module docstring ([#9912](https://github.com/leanprover-community/mathlib/pull/#9912))

### [2021-10-23T22:10:46+00:00](https://github.com/leanprover-community/mathlib/commit/15161e96bd0ea064d3a3a9d27387790c12b0d82f)
docs(data/list/sigma): Add missing def dosctrings, expand module docs ([#9909](https://github.com/leanprover-community/mathlib/pull/#9909))

### [2021-10-23T22:10:45+00:00](https://github.com/leanprover-community/mathlib/commit/75b1a94a791b1cc438420c3f4db5295e5fa6d83e)
refactor(analysis/special_functions/exp_log): split into 4 files ([#9882](https://github.com/leanprover-community/mathlib/pull/#9882))

### [2021-10-23T22:10:44+00:00](https://github.com/leanprover-community/mathlib/commit/59db9032d59907b92e8a7d8a2f602db1785253f7)
feat(topology/metric_space/lipschitz): continuity on product of continuity in 1 var and Lipschitz continuity in another ([#9758](https://github.com/leanprover-community/mathlib/pull/#9758))

Also apply the new lemma to `continuous_bounded_map`s and add a few lemmas there.

### [2021-10-23T20:04:35+00:00](https://github.com/leanprover-community/mathlib/commit/939e8b9a3d758db0a11861aafd9121248e4ba8ff)
docs(control/traversable/instances): Add module docstring ([#9913](https://github.com/leanprover-community/mathlib/pull/#9913))




Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-10-23T20:04:34+00:00](https://github.com/leanprover-community/mathlib/commit/14b998b287f41c69b5732bcc70bcb64809e9807e)
docs(control/bifunctor): Add module and defs docstrings ([#9911](https://github.com/leanprover-community/mathlib/pull/#9911))

### [2021-10-23T20:04:33+00:00](https://github.com/leanprover-community/mathlib/commit/78252a30f1f3474bee13cf27537bec35d235d333)
chore(data/real/sqrt): A couple of lemmas about sqrt ([#9892](https://github.com/leanprover-community/mathlib/pull/#9892))

Add a couple of lemmas about `sqrt x / x`.

### [2021-10-23T20:04:32+00:00](https://github.com/leanprover-community/mathlib/commit/3f58dc78ad7cfd9b112ed47be02fc20a03e7ec14)
feat(linear_algebra/free_module/pid): golf basis.card_le_card_of_linear_independent_aux ([#9813](https://github.com/leanprover-community/mathlib/pull/#9813))

We go from a 70 lines proof to a one line proof.

### [2021-10-23T20:04:31+00:00](https://github.com/leanprover-community/mathlib/commit/fc3c0560e29e0a19315a84beb2ffa3e0dd2f1115)
chore(data/real): make more instances on real, nnreal, and ennreal computable ([#9806](https://github.com/leanprover-community/mathlib/pull/#9806))

This makes it possible to talk about the add_monoid structure of nnreal and ennreal without worrying about computability.

To make it clear exactly which operations are computable, we remove `noncomputable theory`.

### [2021-10-23T17:11:13+00:00](https://github.com/leanprover-community/mathlib/commit/5c5d818dd8b76450bebff89bf1719be5259f9672)
chore(data/fintype/basic): make units.fintype computable ([#9846](https://github.com/leanprover-community/mathlib/pull/#9846))

This also:
* renames `equiv.units_equiv_ne_zero` to `units_equiv_ne_zero`, and resolves the TODO comment about generalization
* renames and generalizes `finite_field.card_units` to `fintype.card_units`, and proves it right next to the fintype instance
* generalizes some typeclass assumptions in `finite_field.basic` as the linter already required me to tweak them

### [2021-10-23T17:11:12+00:00](https://github.com/leanprover-community/mathlib/commit/36f8c1dbd07e79002747c2178e82f397a1a10c0c)
refactor(order/filter/bases): turn `is_countably_generated` into a class ([#9838](https://github.com/leanprover-community/mathlib/pull/#9838))

## API changes

### Filters

* turn `filter.is_countably_generated` into a class, turn some lemmas into instances;
* remove definition/lemmas (all were in the `filter.is_countably_generated` namespace): `generating_set`, `countable_generating_set`, `eq_generate`, `countable_filter_basis`, `filter_basis_filter`, `has_countable_basis`, `exists_countable_infi_principal`, `exists_seq`;
* rename `filter.is_countably_generated.exists_antitone_subbasis` to `filter.has_basis.exists_antitone_subbasis`;
* rename `filter.is_countably_generated.exists_antitone_basis` to `filter.exists_antitone_basis`;
* rename `filter.is_countably_generated.exists_antitone_seq'` to `filter.exists_antitone_seq`;
* rename `filter.is_countably_generated.exists_seq` to `filter.exists_antitone_eq_infi_principal`;
* rename `filter.is_countably_generated.tendsto_iff_seq_tendsto` to `filter.tendsto_iff_seq_tendsto`;
* rename `filter.is_countably_generated.tendsto_of_seq_tendsto` to `filter.tendsto_of_seq_tendsto`;
* slightly generalize `is_countably_generated_at_top` and `is_countably_generated_at_bot`;
* add `filter.generate_eq_binfi`;

### Topology

* merge `is_closed.is_Gδ` with `is_closed.is_Gδ'`;
* merge `is_Gδ_set_of_continuous_at_of_countably_generated_uniformity` with `is_Gδ_set_of_continuous_at`;
* merge `is_lub.exists_seq_strict_mono_tendsto_of_not_mem'` with `is_lub.exists_seq_strict_mono_tendsto_of_not_mem`;
* merge `is_lub.exists_seq_monotone_tendsto'` with `is_lub.exists_seq_monotone_tendsto`;
* merge `is_glb.exists_seq_strict_anti_tendsto_of_not_mem'` with `is_glb.exists_seq_strict_anti_tendsto_of_not_mem`;
* merge `is_glb.exists_seq_antitone_tendsto'` with `is_glb.exists_seq_antitone_tendsto`;
* drop `emetric.first_countable_topology`, turn `uniform_space.first_countable_topology` into an instance;
* drop `emetric.second_countable_of_separable`, use `uniform_space.second_countable_of_separable` instead;
* drop `metric.compact_iff_seq_compact`, use `uniform_space.compact_iff_seq_compact` instead;
* drop `metric.compact_space_iff_seq_compact_space`, use `uniform_space.compact_space_iff_seq_compact_space` instead;

## Measure theory and integrals

Various lemmas assume `[is_countably_generated l]` instead of `(h : is_countably_generated l)`.

### [2021-10-23T17:11:11+00:00](https://github.com/leanprover-community/mathlib/commit/d0d15202372d713b6f6b6df7ccb67a77072c4bac)
chore(ring_theory/derivation): add `leibniz_pow` and `leibniz_inv` ([#9837](https://github.com/leanprover-community/mathlib/pull/#9837))

### [2021-10-23T17:11:09+00:00](https://github.com/leanprover-community/mathlib/commit/1ebea893dd0202e495136fbfda4c8a3c5334a916)
feat(field_theory/finite/galois_field): finite fields with the same cardinality are isomorphic ([#9834](https://github.com/leanprover-community/mathlib/pull/#9834))

Added the isomorphism of finite fields of the same cardinality.



Co-authored-by: Anupam Nayak <88547452+AaronGreen001@users.noreply.github.com>

### [2021-10-23T17:11:08+00:00](https://github.com/leanprover-community/mathlib/commit/0411b1e31d5a5b55df62cc8fb6bd1a497539a5fc)
feat(ring_theory/ideal): `simp` lemmas for `ideal.quotient.mk` + `algebra_map` ([#9829](https://github.com/leanprover-community/mathlib/pull/#9829))

Some `simp` lemmas I needed for combining `algebra_map` with `ideal.quotient.mk`. This also allowed me to golf two existing proofs.

### [2021-10-23T17:11:07+00:00](https://github.com/leanprover-community/mathlib/commit/44ab28e30b7e434b02b4ea62f38d2e1b67a66208)
refactor(linear_algebra/free_module/finite): move to a new folder ([#9821](https://github.com/leanprover-community/mathlib/pull/#9821))

We move `linear_algebra/free_module/finite` to `linear_algebra/free_module/finite/basic`.
We also move two lemmas from `linear_algebra/free_module/finite/basic` to `linear_algebra/free_module/basic`, since they don't need any finiteness assumption on the modules.

### [2021-10-23T14:30:44+00:00](https://github.com/leanprover-community/mathlib/commit/a58ae545c2ae578d7ac17ada4b89d3bb5bf69646)
chore(algebra/big_operators/finprod): remove outdated todo ([#9900](https://github.com/leanprover-community/mathlib/pull/#9900))

### [2021-10-23T14:30:43+00:00](https://github.com/leanprover-community/mathlib/commit/bd81d555e0851147be0469ce75d3f82c372b95bd)
feat(data/finsupp): add lemmas about `single` ([#9894](https://github.com/leanprover-community/mathlib/pull/#9894))

These are subset versions of the four lemmas related to `support_eq_singleton`.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-10-23T14:30:42+00:00](https://github.com/leanprover-community/mathlib/commit/95535a3e0d8cfd95def4c543bfd223819f0a3715)
refactor(ring_theory/unique_factorization_domain): golf some factor_set lemmas ([#9889](https://github.com/leanprover-community/mathlib/pull/#9889))

### [2021-10-23T14:30:41+00:00](https://github.com/leanprover-community/mathlib/commit/e1c0dbc89dd3dddab1fac37ede684c4c0e47da2a)
feat(set_theory/cardinal): add `add_le_omega` ([#9887](https://github.com/leanprover-community/mathlib/pull/#9887))

* simplify `c₁ + c₂ ≤ ω` to `c₁ ≤ ω ∧ c₂ ≤ ω`;
* simplify `ω + ω` to `ω`;
* simplify `#s ≤ ω` to `s.countable`;
* simplify `(s ∪ t).countable` and `(insert a s).countable`.

Motivated by lemmas from flypitch.

### [2021-10-23T14:30:40+00:00](https://github.com/leanprover-community/mathlib/commit/82896b53f596aa158fe49695967c8dc9df231bac)
feat(topology): add a few lemmas ([#9885](https://github.com/leanprover-community/mathlib/pull/#9885))

Add `is_topological_basis.is_open_map_iff`,
`is_topological_basis.exists_nonempty_subset`, and
`interior_{s,b,}Inter_subset`.

Motivated by lemmas from `flypitch`.

### [2021-10-23T14:30:39+00:00](https://github.com/leanprover-community/mathlib/commit/1e0661cee54f3e7774baf133d0826bff79373577)
feat(ring_theory/noetherian): generalize to semiring ([#9881](https://github.com/leanprover-community/mathlib/pull/#9881))

We generalize some of the results in `ring_theory/noetherian` to `semiring`.

- [x] depends on: [#9860](https://github.com/leanprover-community/mathlib/pull/#9860)



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-10-23T14:30:38+00:00](https://github.com/leanprover-community/mathlib/commit/bb71667db9eeb9ac1305083c934c6cb47f8faf10)
feat(topology/instances/irrational): new file ([#9872](https://github.com/leanprover-community/mathlib/pull/#9872))

* move `is_Gδ_irrational` etc to a new file `topology.instances.irrational`;
* prove that a small ball around an irrational number is disjoint with the set of rational numbers with bounded denominators;
* prove `order_topology`, `no_top_order`, `no_bot_order`, and `densely_ordered` instances for `{x // irrational x}`.

### [2021-10-23T14:30:37+00:00](https://github.com/leanprover-community/mathlib/commit/b877f6b861a3959d0a07afab2759e224849ab62f)
chore(analysis/normed/group): generalize `cauchy_seq.add` ([#9868](https://github.com/leanprover-community/mathlib/pull/#9868))

Also golf a few proofs.

### [2021-10-23T14:30:36+00:00](https://github.com/leanprover-community/mathlib/commit/29c7266473126b8661a63ec4008ef05f7e43e12d)
refactor(linear_algebra/matrix/nonsingular_inverse): use ring.inverse in matrix.has_inv ([#9863](https://github.com/leanprover-community/mathlib/pull/#9863))

This makes some of the proofs a little shorter.
Independently, this removes an assumption from `matrix.transpose_nonsing_inv`.

This adds the missing `units.is_unit_units_mul` to complement the existing `units.is_unit_mul_units`, even though it ultimately was not used in this PR.

This removes the def `matrix.nonsing_inv` in favor of just using `has_inv.inv` directly. Having two ways to spell the same thing isn't helpful here.

### [2021-10-23T14:30:35+00:00](https://github.com/leanprover-community/mathlib/commit/2a1f4542626a0820eac709991e5635641176508c)
refactor(algebra/algebra): choose `coe` as the normal form for the map `alg_equiv → ring_equiv` ([#9848](https://github.com/leanprover-community/mathlib/pull/#9848))

We never chose a `simp`-normal form for this map, resulting in some duplicate work and annoying `show _ = _, from rfl` when rewriting. I picked this choice because it matches the convention for the map `alg_hom → ring_hom`.

Very surprisingly, there were absolutely no CI failures due to this choice.

### [2021-10-23T14:30:34+00:00](https://github.com/leanprover-community/mathlib/commit/5f11361a98ae4acd77f5c1837686f6f0102cdc25)
refactor(algebra/continued_fractions): remove use of open ... as ([#9847](https://github.com/leanprover-community/mathlib/pull/#9847))

Lean 4 doesn't support the use of `open ... as ...`, so let's get rid of the few uses from mathlib rather than automating it in mathport.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-23T13:13:59+00:00](https://github.com/leanprover-community/mathlib/commit/7b979aaf5a5f84f26e84527ebd338c1c9a6b7e09)
move(algebra/order/*): More algebraic order files in the correct place ([#9899](https://github.com/leanprover-community/mathlib/pull/#9899))

`algebra.module.ordered` and `algebra.algebra.ordered` were really continuations of `algebra.order.smul` (the first being quite literally the same with additive inverses), so it makes sense to bring them closer. `algebra.floor` and `algebra.archimedean` also perfectly qualify for the subfolder.

### [2021-10-23T08:22:49+00:00](https://github.com/leanprover-community/mathlib/commit/eb1e037ff5e681d547309dfa4337ed9575f5bf19)
doc(algebra/ring): correct docs for surjective pushforwards ([#9896](https://github.com/leanprover-community/mathlib/pull/#9896))

### [2021-10-23T08:22:48+00:00](https://github.com/leanprover-community/mathlib/commit/a75f7623aba6a7b9c3ef4aa664e4c1de8066a32b)
feat(ring_theory/localization): generalize `exist_integer_multiples` to finite families ([#9859](https://github.com/leanprover-community/mathlib/pull/#9859))

This PR shows we can clear denominators of finitely-indexed collections of fractions (i.e. elements of `S` where `is_localization M S`), with the existing result about finite sets of fractions as a special case.

### [2021-10-23T08:22:48+00:00](https://github.com/leanprover-community/mathlib/commit/294ce3532817bccd2a24883c3e2f2e8e18966ad1)
fix(algebra/module/submodule): fix incorrectly generalized arguments to `smul_mem_iff'` and `smul_of_tower_mem` ([#9851](https://github.com/leanprover-community/mathlib/pull/#9851))

These put unnecessary requirements on `S`.

### [2021-10-23T08:22:47+00:00](https://github.com/leanprover-community/mathlib/commit/2cbd4bade449fd7e9c9cb89d03c55cb1522c46ca)
feat(group_theory/index): `relindex_dvd_of_le_left` ([#9835](https://github.com/leanprover-community/mathlib/pull/#9835))

If `H ≤ K`, then `K.relindex L ∣ H.relindex L`.

Caution: `relindex_dvd_of_le_right` is not true. `relindex_le_of_le_right` is true, but it is harder to prove, and harder to state (because you have to be careful about `relindex = 0`).

### [2021-10-23T05:53:41+00:00](https://github.com/leanprover-community/mathlib/commit/183b8c8a7d3949e9f00cf744d4ed1624cb07f65b)
refactor(data/list/defs): move defs about rb_map ([#9844](https://github.com/leanprover-community/mathlib/pull/#9844))

There is nothing intrinsically `meta` about `rb_map`, but in practice in mathlib we prove nothing about it and only use it in tactic infrastructure. This PR moves a definition involving `rb_map` out of `data.list.defs` and into `meta.rb_map` (where many others already exist).

(motivated by mathport; rb_map is of course disappearing/changing, so better to quarantine this stuff off with other things that aren't being automatically ported)

`rbmap` is not related to `rb_map`. It can likely be moved from core to mathlib entirely.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-23T02:55:56+00:00](https://github.com/leanprover-community/mathlib/commit/45ba2ada0bd3165e60f6051d5e6259e3fb69b36b)
chore(scripts): update nolints.txt ([#9895](https://github.com/leanprover-community/mathlib/pull/#9895))

I am happy to remove some nolints for you!

### [2021-10-22T22:06:02+00:00](https://github.com/leanprover-community/mathlib/commit/7690e0a4c096e947d64dca38827ddadf75525935)
chore(order/complete_lattice): add `(supr|infi)_option_elim` ([#9886](https://github.com/leanprover-community/mathlib/pull/#9886))

Motivated by `supr_option'` and `infi_option'` from `flypitch`.

### [2021-10-22T20:15:57+00:00](https://github.com/leanprover-community/mathlib/commit/72c20fab52f173090892996be3e1cda336e2e4a1)
feat(analysis/special_functions/exp_log): Classify when log is zero ([#9815](https://github.com/leanprover-community/mathlib/pull/#9815))

Classify when the real `log` function is zero.

### [2021-10-22T15:58:28+00:00](https://github.com/leanprover-community/mathlib/commit/d23b8334f6d02a4cee96ca4d3d784fcd9153cb7b)
chore(data/set/lattice): add `@[simp]` to a few lemmas ([#9883](https://github.com/leanprover-community/mathlib/pull/#9883))

Add `@[simp]` to `Union_subset_iff`, `subset_Inter_iff`,
`sUnion_subset_iff`, and `subset_sInter_iff` (new lemma).

### [2021-10-22T15:58:26+00:00](https://github.com/leanprover-community/mathlib/commit/3d237db71d2e7b5153be4241c45b5dd5e76166b2)
feat(linear_algebra/matrix/determinant): det_conj_transpose ([#9879](https://github.com/leanprover-community/mathlib/pull/#9879))

Also:
* Makes the arguments of `ring_hom.map_det` and `alg_hom.map_det` explicit, and removes them from the `matrix` namespace to enable dot notation.
* Adds `ring_equiv.map_det` and `alg_equiv.map_det`

### [2021-10-22T15:58:25+00:00](https://github.com/leanprover-community/mathlib/commit/20bb02f68cf1e27279df2d7f847a8f52b0cd9fcd)
feat(data/fintype/basic): `fintype.card_pos` ([#9876](https://github.com/leanprover-community/mathlib/pull/#9876))

Two lemmas `fintype.card_pos` and `fintype.card_ne_zero` that are often easier to use than `fintype.card_pos_iff`.

### [2021-10-22T15:58:24+00:00](https://github.com/leanprover-community/mathlib/commit/22c7474e7558ebf99202957308cc920bf0d542b1)
feat(algebra/module/basic): a few more instances ([#9871](https://github.com/leanprover-community/mathlib/pull/#9871))

* generalize `is_scalar_tower.rat`;
* add `smul_comm_class.rat` and `smul_comm_class.rat'`;
* golf a few proofs.

### [2021-10-22T15:58:23+00:00](https://github.com/leanprover-community/mathlib/commit/87ea7806678aae17c72b6bfc7bb7081f93b03c69)
chore(set_theory/cardinal): use `protected` instead of `private` ([#9869](https://github.com/leanprover-community/mathlib/pull/#9869))

Also use `mk_congr`.

### [2021-10-22T15:58:21+00:00](https://github.com/leanprover-community/mathlib/commit/d8b9259978e1a3dea3a57e66a2ed0f1234e6d978)
feat(*): add various divisibility-related lemmas ([#9866](https://github.com/leanprover-community/mathlib/pull/#9866))

### [2021-10-22T15:58:20+00:00](https://github.com/leanprover-community/mathlib/commit/29553061ec13e2b0c0c8b2510bf6d1f2e646b3a7)
feat(ring_theory/finiteness): generalize module.finite to noncommutative setting ([#9860](https://github.com/leanprover-community/mathlib/pull/#9860))

An almost for free generalization of `module.finite` to `semiring`.

### [2021-10-22T15:58:19+00:00](https://github.com/leanprover-community/mathlib/commit/0a7f4482df26c85607536d3c05bee48363a6a2ed)
chore(group_theory/congruence): lower priority for `con.quotient.decidable_eq` ([#9826](https://github.com/leanprover-community/mathlib/pull/#9826))

I was debugging some slow typeclass searches, and it turns out (`add_`)`con.quotient.decidable_eq` wants to be applied to all quotient types, causing a search for a `has_mul` instance before the elaborator can try unifying the `con.to_setoid` relation with the quotient type's relation, so e.g. `decidable_eq (multiset α)` first tries going all the way up to searching for a `linear_ordered_normed_etc_field (list α)` before even trying `multiset.decidable_eq`.

Another approach would be to make `multiset` and/or `con.quotient` irreducible, but that would require a lot more work to ensure we don't break the irreducibility barrier.

### [2021-10-22T15:58:17+00:00](https://github.com/leanprover-community/mathlib/commit/03ba4ccffffdca15972854dd15c28f5818b6fb76)
feat(algebra/floor): Floor semirings ([#9592](https://github.com/leanprover-community/mathlib/pull/#9592))

A floor semiring is a semiring equipped with a `floor` and a `ceil` function.

### [2021-10-22T13:16:18+00:00](https://github.com/leanprover-community/mathlib/commit/bee8d4ac2d8bb8cb243addcf17cc10550865a6d2)
chore(order/filter/basic): golf a proof ([#9874](https://github.com/leanprover-community/mathlib/pull/#9874))

### [2021-10-22T13:16:16+00:00](https://github.com/leanprover-community/mathlib/commit/b812fb9cf433ac3dfa93bb467ead29e7112d50df)
refactor(ring_theory/ideal): split off `quotient.lean` ([#9850](https://github.com/leanprover-community/mathlib/pull/#9850))

Both `ring_theory/ideal/basic.lean` and `ring_theory/ideal/operations.lean` were starting to get a bit long, so I split off the definition of `ideal.quotient` and the results that had no further dependencies.

I also went through all the imports for files depending on either `ideal/basic.lean` or `ideal/operations.lean` to check whether they shouldn't depend on `ideal/quotient.lean` instead.





Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-10-22T13:16:15+00:00](https://github.com/leanprover-community/mathlib/commit/e6c516d5c39b1f539a5317f2900543b5a7af761e)
feat(topology/maps): Characterize open/closed maps in terms of images of interior/closure ([#9814](https://github.com/leanprover-community/mathlib/pull/#9814))

Also provide the docstring for `inducing`.



Co-authored-by: Jean Lo <19224446+jlpaca@users.noreply.github.com>

### [2021-10-22T10:49:49+00:00](https://github.com/leanprover-community/mathlib/commit/43cd79f987ffb3c1075296e36f3918d6721a84c1)
feat(data/finset/basic): Simple `finset.erase` lemmas ([#9878](https://github.com/leanprover-community/mathlib/pull/#9878))

`finset.erase.singleton` and `finset.(map/image)_erase`

### [2021-10-22T06:47:53+00:00](https://github.com/leanprover-community/mathlib/commit/76212e65a87daeed7bd17fa63cd35800ce6ba5f3)
feat(measure_theory/integral/set_integral): integral of a `is_R_or_C` function equals integral of real part + integral of imaginary part ([#9735](https://github.com/leanprover-community/mathlib/pull/#9735))




Co-authored-by: RemyDegenne <Remydegenne@gmail.com>

### [2021-10-22T01:15:49+00:00](https://github.com/leanprover-community/mathlib/commit/c4c71d2f2308f96f169b2aa96aab3a83ed917c5f)
feat(topology): define class `[noncompact_space]` ([#9839](https://github.com/leanprover-community/mathlib/pull/#9839))

### [2021-10-21T23:04:20+00:00](https://github.com/leanprover-community/mathlib/commit/6f837a6e711f08d470c42558b6f768387faf5f83)
feat(data/polynomial): generalize and rename `polynomial.normalize_monic` ([#9853](https://github.com/leanprover-community/mathlib/pull/#9853))

This PR renames `polynomial.normalize_monic` to `polynomial.monic.normalize_eq_self` (more dot notation!) and generalizes it from fields to `normalization_monoid`s.

### [2021-10-21T23:04:19+00:00](https://github.com/leanprover-community/mathlib/commit/16a9031a729729825364020d913daf26de0278e0)
refactor(data/complex/*): replace `complex.conj` and `is_R_or_C.conj` with star ([#9640](https://github.com/leanprover-community/mathlib/pull/#9640))

This PR replaces `complex.conj` and `is_R_or_C.conj` by the star operation defined in `algebra/star`. Both of these are replaced with `star_ring_aut`, which is also made available under the notation `conj` defined in the locale `complex_conjugate`. This effectively also upgrades conj from a `ring_hom` to a `ring_aut`.

Fixes [#9421](https://github.com/leanprover-community/mathlib/pull/#9421)

### [2021-10-21T20:06:24+00:00](https://github.com/leanprover-community/mathlib/commit/912039d715aefbf9111bb0638290737285d817ad)
feat(algebra/group_power/lemmas): Positivity of an odd/even power ([#9796](https://github.com/leanprover-community/mathlib/pull/#9796))

This adds `odd.pow_nonneg` and co and `pow_right_comm`.
This also deletes `pow_odd_nonneg` and `pow_odd_pos` as they are special cases of `pow_nonneg` and `pow_pos`.
To make dot notation work, this renames `(pow/fpow)_(odd/even)_(nonneg/nonpos/pos/neg/abs)` to `(odd/even).(pow/fpow)_(nonneg/nonpos/pos/neg/abs)`

### [2021-10-21T18:28:20+00:00](https://github.com/leanprover-community/mathlib/commit/15d4e5f12860f9579b4a2dc8c448ba78d62549de)
refactor(data/real/ennreal): remove sub lemmas ([#9857](https://github.com/leanprover-community/mathlib/pull/#9857))

* Remove all lemmas about subtraction on `ennreal` that are special cases of `has_ordered_sub` lemmas.
* [This](https://github.com/leanprover-community/mathlib/blob/fe5ddaf42c5d61ecc740e815d63ac38f5e94a2e8/src/data/real/ennreal.lean#L734-L795) gives a list of renamings.
* The lemmas that have a `@[simp]` attribute will be done in a separate PR

### [2021-10-21T18:28:19+00:00](https://github.com/leanprover-community/mathlib/commit/5b72c4eed51efcef3a994e59ca20c2675dfe88be)
feat(linear_algebra/quotient): `S.restrict_scalars.quotient` is `S.quotient` ([#9535](https://github.com/leanprover-community/mathlib/pull/#9535))

This PR adds a more general module instance on submodule quotients, in order to show that `(S.restrict_scalars R).quotient` is equivalent to `S.quotient`. If we decide this instance is not a good idea, I can write it instead as `S.quotient.restrict_scalars`, but that is a bit less convenient to work with.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-10-21T15:43:25+00:00](https://github.com/leanprover-community/mathlib/commit/9be824757e5894b0960535e4d0603385b75df0a0)
feat(logic/function/embedding): add `function.embedding.option_elim` ([#9841](https://github.com/leanprover-community/mathlib/pull/#9841))

* add `option.injective_iff`;
* add `function.embedding.option_elim`;
* use it in the proof of `cardinal.add_one_le_succ`;
* add `function.embedding.cardinal_le`, `cardinal.succ_pos`;
* add `@[simp]` to `cardinal.lt_succ`.

### [2021-10-21T15:43:23+00:00](https://github.com/leanprover-community/mathlib/commit/14ec1c8ee98667cf1b83c117d526a139ba4315ff)
feat(linear_algebra/matrix/nonsingular_inverse): adjugate of a 2x2 matrix ([#9830](https://github.com/leanprover-community/mathlib/pull/#9830))

Since we have `det_fin_two`, let's have `adjugate_fin_two` as well.

### [2021-10-21T15:43:20+00:00](https://github.com/leanprover-community/mathlib/commit/9c240b5879ba8255e76bd8c81b5ba61b78a5ed61)
feat(analysis/inner_product_space): define `orthogonal_family` of subspaces ([#9718](https://github.com/leanprover-community/mathlib/pull/#9718))

Define `orthogonal_family` on `V : ι → submodule 𝕜 E` to mean that any two vectors from distinct subspaces are orthogonal.  Prove that an orthogonal family of subspaces is `complete_lattice.independent`.

Also prove that in finite dimension an orthogonal family `V` satisifies `direct_sum.submodule_is_internal` (i.e., it provides an internal direct sum decomposition of `E`) if and only if their joint orthogonal complement is trivial, `(supr V)ᗮ = ⊥`, and that in this case, the identification of `E` with the direct sum of `V` is an isometry.

### [2021-10-21T13:16:18+00:00](https://github.com/leanprover-community/mathlib/commit/d8096aa6bbd0b5d292042ddfec21b61facb699ad)
fix(ring_theory/subring): `inclusion` is a ring_hom! ([#9849](https://github.com/leanprover-community/mathlib/pull/#9849))

### [2021-10-21T13:16:17+00:00](https://github.com/leanprover-community/mathlib/commit/d8b0d1a9d3b0f8f666543994ca918e06f7687a8f)
chore(algebra/big_operators): avoid 'abel' tactic ([#9833](https://github.com/leanprover-community/mathlib/pull/#9833))

I'd like to add an import ` algebra.euclidean_domain` → `algebra.associated` in [#9606](https://github.com/leanprover-community/mathlib/pull/#9606), so this removes the dependency in the other direction (`algebra.associated` → `algebra.big_operators.basic` → `tactic.abel` → `tactic.norm_num` → `data.rat.cast` → `data.rat.order` → `data.rat.basic` → ` algebra.euclidean_domain`). Fortunately, the dependency on `abel` was quite shallow here.

### [2021-10-21T13:16:16+00:00](https://github.com/leanprover-community/mathlib/commit/de13786a1540361fdd5187416de100f84d1c1437)
chore(topology/algebra/ordered): move IVT to a new file ([#9792](https://github.com/leanprover-community/mathlib/pull/#9792))

### [2021-10-21T13:16:14+00:00](https://github.com/leanprover-community/mathlib/commit/d9daf54186ecadf8a414fe1f1590e0a013ad9f90)
feat(topology/metric_space/isometry): add simps config ([#9757](https://github.com/leanprover-community/mathlib/pull/#9757))

Also make `isometric.complete_space` take `complete_space β` as an instance argument.

### [2021-10-21T11:25:37+00:00](https://github.com/leanprover-community/mathlib/commit/fe5ddaf42c5d61ecc740e815d63ac38f5e94a2e8)
feat(ring_theory/polynomial/cyclotomic): add cyclotomic_prime_pow_eq_geom_sum and supporting lemmas ([#9845](https://github.com/leanprover-community/mathlib/pull/#9845))

Clean up a little bit in src/number_theory/divisors.lean using to_additive too.

### [2021-10-21T11:25:35+00:00](https://github.com/leanprover-community/mathlib/commit/edd801f766b3e7653ef66ae3427e12853f721f04)
chore(set_theory/cardinal): ensure `c ^ ↑n = c ^ n` is definitional ([#9842](https://github.com/leanprover-community/mathlib/pull/#9842))

### [2021-10-21T11:25:33+00:00](https://github.com/leanprover-community/mathlib/commit/777f11c8376cecb8ae3e5bf842567952a569377e)
feat(group_theory/index): Special cases of relindex ([#9831](https://github.com/leanprover-community/mathlib/pull/#9831))

Adds special cases of relindex. Also refactors the file to use `nat.card`, rather than the equivalent `(# _).to_nat`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-10-21T11:25:32+00:00](https://github.com/leanprover-community/mathlib/commit/bfa401029539c940c69887cf4a9df7bb224d6aea)
feat(data/nat/modeq): `modeq.le_of_lt_add` ([#9816](https://github.com/leanprover-community/mathlib/pull/#9816))

If `a ≡ b [MOD m]` and `a < b + m`, then `a ≤ b`.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-10-21T08:38:42+00:00](https://github.com/leanprover-community/mathlib/commit/da01792ca4894d4f3a98d06b6c50455e5ed25da3)
refactor(*): remove integral_domain, rename domain to is_domain ([#9748](https://github.com/leanprover-community/mathlib/pull/#9748))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-21T02:55:10+00:00](https://github.com/leanprover-community/mathlib/commit/3c11bd771ef17197a9e9fcd4a3fabfa2804d950c)
chore(*): bump to lean 3.34.0 ([#9824](https://github.com/leanprover-community/mathlib/pull/#9824))

### Backport coercions from Lean 4

Now `has_coe_to_fun` and `has_coe_to_sort` take the output type as an `out_param` argument. This change comes with some changes in the elaboration order, so some proofs/definitions need more type annotations.

### Smarter `by_contra`

Now `by_contra h` does better job if the goal is a negation.

### `open` and current namespace

In
```lean
namespace A
open B _root_.C
end A
```
Lean will try to open `A.B`; if this fails, it will open `B`. It will also open `C`.
`setup_tactic_parser_cmd` command was updated to open appropriate `_root_.*` namespaces.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Bhavik Mehta <bhavikmehta8@gmail.com>

### [2021-10-20T19:43:22+00:00](https://github.com/leanprover-community/mathlib/commit/8366f9321566464a0c317d351e51d75c930417c4)
feat(ring_theory/integral_domain): finite domains are division rings ([#9823](https://github.com/leanprover-community/mathlib/pull/#9823))

TODO: Prove Wedderburn's little theorem
which shows a finite domain is in fact commutative, hence a field.

### [2021-10-20T18:03:33+00:00](https://github.com/leanprover-community/mathlib/commit/4ebeb0550ace9437a61ab34c5adb65c46ef2b9fb)
chore(group_theory/submonoid/center): add decidable_mem_center ([#9825](https://github.com/leanprover-community/mathlib/pull/#9825))

### [2021-10-20T18:03:31+00:00](https://github.com/leanprover-community/mathlib/commit/3d00081c1c4086416a9e70f31a330162e2e19733)
feat(group_theory/index): Index of top and bottom subgroups ([#9819](https://github.com/leanprover-community/mathlib/pull/#9819))

This PR computes the index of the top and bottom subgroups.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-10-20T15:39:06+00:00](https://github.com/leanprover-community/mathlib/commit/68a674ef5a6968d412a435195fb289b123887e3b)
refactor(algebra/order/sub): rename sub -> tsub ([#9793](https://github.com/leanprover-community/mathlib/pull/#9793))

* Renames lemmas in the file `algebra/order/sub` to use `tsub` instead of `sub` in the name
* Remove primes from lemma names where possible
* [Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mul_lt_mul'''')
* Remove `sub_mul_ge`, `mul_sub_ge` and `lt_sub_iff_lt_sub`. They were special cases of `le_sub_mul`, `le_mul_sub` and `lt_sub_comm`, respectively.

### [2021-10-20T13:23:09+00:00](https://github.com/leanprover-community/mathlib/commit/5223e262ba02ab65f4665e9f9f877266b30b44bf)
feat(field_theory/finite/galois_field): uniqueness of finite fields ([#9817](https://github.com/leanprover-community/mathlib/pull/#9817))

Every finite field is isomorphic to some Galois field. Closes [#9599](https://github.com/leanprover-community/mathlib/pull/#9599) 



Co-authored-by: Anupam Nayak <88547452+AaronGreen001@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-10-20T11:46:43+00:00](https://github.com/leanprover-community/mathlib/commit/49ab444f22f0b86d100dc4f817cbe41e14853804)
fix(algebra/module/submodule_lattice): correct bad lemma ([#9809](https://github.com/leanprover-community/mathlib/pull/#9809))

This lemma was accidentally stating that inf and inter are the same on sets, and wasn't about submodule at all.

The old statement was `↑p ⊓ ↑q = ↑p ∩ ↑q`, the new one is `↑(p ⊓ q) = ↑p ∩ ↑q`

### [2021-10-20T09:53:23+00:00](https://github.com/leanprover-community/mathlib/commit/24901dde0eada4b39ac8464d6c12f2359f795dda)
feat(linear_algebra/free_module/rank): rank of free modules  ([#9810](https://github.com/leanprover-community/mathlib/pull/#9810))

This file contains a basic API for the rank of free modules.

We will add the results for finite free modules in a future PR.

### [2021-10-20T09:53:22+00:00](https://github.com/leanprover-community/mathlib/commit/2f548407794b6d46ad52c8ec2b997394e3dea40f)
refactor(*): replace comm_ring/integral_domain with ring/domain where possible ([#9739](https://github.com/leanprover-community/mathlib/pull/#9739))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-20T08:19:58+00:00](https://github.com/leanprover-community/mathlib/commit/a6d5ba814fa6dad646580fa122bac88869fc5891)
chore(set_theory/cardinal): add `map`, `induction_on` etc ([#9812](https://github.com/leanprover-community/mathlib/pull/#9812))

### [2021-10-20T04:15:08+00:00](https://github.com/leanprover-community/mathlib/commit/9dafdf79070990033196a8d6fb4cc381ea85ef1b)
feat(group_theory/subgroup/basic): `subgroup_of_self` ([#9818](https://github.com/leanprover-community/mathlib/pull/#9818))

A subgroup is the top subgroup of itself.

### [2021-10-20T04:15:07+00:00](https://github.com/leanprover-community/mathlib/commit/689872807d278ad4e6d966e89384492c812412b8)
feat(analysis/complex/basic): a complex-valued function `has_sum` iff its real part and imaginary part `has_sum` ([#9648](https://github.com/leanprover-community/mathlib/pull/#9648))

### [2021-10-20T01:45:58+00:00](https://github.com/leanprover-community/mathlib/commit/cd3434749bf1f6a8155cb53b2705f08b74371f2a)
chore(*): remove uses of `universe variable` ([#9794](https://github.com/leanprover-community/mathlib/pull/#9794))

Most of these uses are relics of when the distinction between `universe` and `universe variable` was more significant. There is still a difference inside sections, but it's an edge case and I don't think any of these uses are consciously trying to handle the edge case.

### [2021-10-19T23:43:31+00:00](https://github.com/leanprover-community/mathlib/commit/2d17c5a277a3c0a14ae7e0d7572c77797b1ad6ec)
feat(group_theory/index): Relative index ([#9780](https://github.com/leanprover-community/mathlib/pull/#9780))

Defines relative index between subgroups, and proves that relative index is multiplicative in towers.

### [2021-10-19T20:59:45+00:00](https://github.com/leanprover-community/mathlib/commit/72cb2e8296eee9d0a211287c09692717b1504706)
refactor(*): rename some declarations ending with '' ([#9504](https://github.com/leanprover-community/mathlib/pull/#9504))






Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-19T16:49:58+00:00](https://github.com/leanprover-community/mathlib/commit/65eef746049ce0c1563d0058c28fdfe1fdbae2be)
fix(data/int/basic): ensure the additive group structure on integers is computable ([#9803](https://github.com/leanprover-community/mathlib/pull/#9803))

This prevents the following failure:
```lean
import analysis.normed_space.basic
instance whoops : add_comm_group ℤ := by apply_instance
-- definition 'whoops' is noncomputable, it depends on 'int.normed_comm_ring'
```

### [2021-10-19T15:18:56+00:00](https://github.com/leanprover-community/mathlib/commit/e61584d591105e1414466379ac4a7ce2d9782c40)
fix(topology/sheaves/*): Fix docstrings ([#9807](https://github.com/leanprover-community/mathlib/pull/#9807))

As noted by @alreadydone in [#9607](https://github.com/leanprover-community/mathlib/pull/#9607), I forgot propagate naming changes to docstrings. This PR fixes that.

### [2021-10-19T12:47:04+00:00](https://github.com/leanprover-community/mathlib/commit/34aa23af7d4719d3b267790c09f9c36ae0332c8a)
feat(ring_theory/dedekind_domain): connect (/) and (⁻¹) on fractional ideals ([#9808](https://github.com/leanprover-community/mathlib/pull/#9808))

Turns out we never actually proved the `div_eq_mul_inv` lemma on fractional ideals, which motivated the entire definition of `div_inv_monoid`. So here it is, along with some useful supporting lemmas.

### [2021-10-19T11:59:41+00:00](https://github.com/leanprover-community/mathlib/commit/065a70810b5480d584033f7bbf8e0409480c2118)
refactor(analysis/inner_product_space/projection): speedup proof ([#9804](https://github.com/leanprover-community/mathlib/pull/#9804))

Speed up slow proof that caused a timeout on another branch.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-19T09:31:15+00:00](https://github.com/leanprover-community/mathlib/commit/b961b6845b268ad2386071bc2cc238f761475503)
feat(topology/connected): product of connected spaces is a connected space ([#9789](https://github.com/leanprover-community/mathlib/pull/#9789))

* prove more in the RHS of `filter.mem_infi'`;
* prove that the product of (pre)connected sets is a (pre)connected set;
* prove a similar statement about indexed product `set.pi set.univ _`;
* add instances for `prod.preconnected_space`, `prod.connected_space`, `pi.preconnected_space`, and `pi.connected_space`.

### [2021-10-19T09:31:13+00:00](https://github.com/leanprover-community/mathlib/commit/ff3e868c5a417f32767a77dccbb2cda249af0bf0)
refactor(algebra/domain): make domain and integral_domain mixins ([#9719](https://github.com/leanprover-community/mathlib/pull/#9719))

This PR turns `domain` and `integral_domain` into mixins. There's quite a lot of work here, as the unused argument linter then forces us to do some generalizations! (i.e. getting rid of unnecessary `integral_domain` arguments).

This PR does the minimum possible generalization: [#9739](https://github.com/leanprover-community/mathlib/pull/#9739) does some more.

In a subsequent PR we can unify `domain` and `integral_domain`, which now only differ in their typeclass requirements.

This also remove use of `old_structure_cmd` in `euclidean_domain`.

- [x] depends on: [#9725](https://github.com/leanprover-community/mathlib/pull/#9725) [An RFC]
- [x] depends on: [#9736](https://github.com/leanprover-community/mathlib/pull/#9736)

[![Open in Gitpod](https://gitpod.io/button/open-in-gitpod.svg)](https://gitpod.io/from-referrer/)


Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-19T07:46:18+00:00](https://github.com/leanprover-community/mathlib/commit/a7bc7174c8554cce04ffd34e79b0aa9be6f3314b)
feat(algebra/big_operators/order): Upper bound on the cardinality of `finset.bUnion` ([#9797](https://github.com/leanprover-community/mathlib/pull/#9797))

Also fix notation in all the additivized statements docstrings.

### [2021-10-19T07:46:17+00:00](https://github.com/leanprover-community/mathlib/commit/4df649cbdebf4744fa1c40b14da2e16cf818d276)
feat(data/nat/modeq): Upper bound for `chinese_remainder` ([#9783](https://github.com/leanprover-community/mathlib/pull/#9783))

Proves that `chinese_remainder' < lcm n m` and `chinese_remainder < n * m`, as claimed by the doc-strings.

### [2021-10-19T07:05:07+00:00](https://github.com/leanprover-community/mathlib/commit/1f8c96ba9b88775fe76fa59e8d3a81542cd778b9)
feat(data/nat/succ_pred): `ℕ` is succ- and pred- archimedean ([#9730](https://github.com/leanprover-community/mathlib/pull/#9730))

This provides the instances `succ_order ℕ`, `pred_order ℕ`, `is_succ_archimedean ℕ`, `is_pred_archimedean ℕ`.

### [2021-10-19T04:41:01+00:00](https://github.com/leanprover-community/mathlib/commit/1ec385dfbb6a259cf4cd87e0072d0614bcb6531e)
chore(scripts): update nolints.txt ([#9799](https://github.com/leanprover-community/mathlib/pull/#9799))

I am happy to remove some nolints for you!

### [2021-10-19T02:24:00+00:00](https://github.com/leanprover-community/mathlib/commit/04094c4b0def91df0abc611ead04acca2f1ea025)
feat(analysis/box_integral): Divergence thm for a Henstock-style integral ([#9496](https://github.com/leanprover-community/mathlib/pull/#9496))

* Define integrals of Riemann, McShane, and Henstock (plus a few
  variations).
* Prove basic properties.
* Prove a version of the divergence theorem for one of these integrals.
* Prove that a Bochner integrable function is McShane integrable.

### [2021-10-18T23:50:42+00:00](https://github.com/leanprover-community/mathlib/commit/5eee6a274f62c4c2cabe993377834dfcac163b46)
refactor(ring_theory/adjoin/fg): replace a fragile convert with rewrites ([#9786](https://github.com/leanprover-community/mathlib/pull/#9786))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-18T23:50:41+00:00](https://github.com/leanprover-community/mathlib/commit/98d07d314aae5c8c745ae7582ac7863eb8eb23a6)
refactor(algebra/order): replace typeclasses with constructors ([#9725](https://github.com/leanprover-community/mathlib/pull/#9725))

This RFC suggests removing some unused classes for the ordered algebra hierarchy, replacing them with constructors

We have `nonneg_add_comm_group extends add_comm_group`, and an instance from this to `ordered_add_comm_group`. The intention is to be able to construct an `ordered_add_comm_group` by specifying its positive cone, rather than directly its order.

There are then `nonneg_ring` and `linear_nonneg_ring`, similarly.

(None of these are actually used later in mathlib at this point.)




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-18T23:50:40+00:00](https://github.com/leanprover-community/mathlib/commit/442382db1051a8f5feb9b9a8e33167b79f9e25cf)
feat(tactic/to_additive): Improvements to to_additive ([#5487](https://github.com/leanprover-community/mathlib/pull/#5487))

Change a couple of things in to_additive:
- First add a `tactic.copy_attribute'` intended for user attributes with parameters very similar to `tactic.copy_attribute` that just copies the parameter over when setting the attribute. This allows to_additive after many other attributes to transfer those attributes properly (e.g. norm_cast)
- Have to additive register generated equation lemmas as such, this necessitates a bit of restructuring, first all declarations must be generated (including equational lemmas), then the equational lemmas need their attributes, then they are registered as equation lemmas, finally the attributes are added to the main declaration.
- I also fixup the library in many places to account for these changes simplifying the source files, only one new lemma was added, in src/analysis/normed/group/quotient.lean `quotient_norm_mk_le'` to replace the unprimed version in the proof of `norm_normed_mk_le` as simp got better thanks to the new simp lemmas introduced by this PR. Probably many more handwritten additive versions can now be deleted in a future PR, especially defs and instances.
- All other library changes are just simplifications by using to additive for some hand generated declarations, and many more attributes on the generated lemmas.
- The attribute mono is trickier as it contains for its parameter not actual exprs containing names but exprs making names from strings, so I don't see how to handle it right now. We now warn the user about this, and fix the library in a couple of places.

### [2021-10-18T21:08:15+00:00](https://github.com/leanprover-community/mathlib/commit/8b7e16fe65c1158b43e40f6c2fbdeaac77e03f50)
feat(tactic/lint): improve check_univs linter ([#9698](https://github.com/leanprover-community/mathlib/pull/#9698))

* `check_univs` now only checks the type of `d` and ignores `d._proof_i` subterms
* move `expr.univ_params_grouped` to the linter file (it seems increasingly unlikely that this has a use in other applications)
* We now don't test automatically generated declarations anymore.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-10-18T17:55:59+00:00](https://github.com/leanprover-community/mathlib/commit/b112d4ddbb066d1295fb112d4c46b8757d48e650)
refactor(ring_theory/ideal/operations): generalize various definitions to remove negation and commutativity ([#9737](https://github.com/leanprover-community/mathlib/pull/#9737))

Mostly this just weakens assumptions in `variable`s lines, but occasionally this moves lemmas to a more appropriate section too.

### [2021-10-18T16:41:10+00:00](https://github.com/leanprover-community/mathlib/commit/71c203a997e9074038189ff5956cee06778c8104)
feat(analysis/normed/group/SemiNormedGroup/completion): add SemiNormedGroup.Completion ([#9788](https://github.com/leanprover-community/mathlib/pull/#9788))

From LTE.

### [2021-10-18T16:41:09+00:00](https://github.com/leanprover-community/mathlib/commit/80071d4573f736d7d44e8b0ad40f3750e91aef05)
refactor(algebra/floor): Add `ceil` as a field of `floor_ring` ([#9591](https://github.com/leanprover-community/mathlib/pull/#9591))

This allows more control on definitional equality.

### [2021-10-18T14:15:51+00:00](https://github.com/leanprover-community/mathlib/commit/5ea384e8d71bb728e47279cc96ee66b75ea19a41)
refactor(ring_theory/finiteness): replace fragile convert with rewrites ([#9787](https://github.com/leanprover-community/mathlib/pull/#9787))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-18T14:15:49+00:00](https://github.com/leanprover-community/mathlib/commit/6f4aea448cd5dad1dec7c84cd5062e73be44cfbb)
feat(data/set/pairwise): Simple `pairwise_disjoint` lemmas ([#9764](https://github.com/leanprover-community/mathlib/pull/#9764))

### [2021-10-18T12:53:50+00:00](https://github.com/leanprover-community/mathlib/commit/116e426741f6c99323027f0ef55312c284683b5f)
chore(group_theory/order_of_element): order_of_units ([#9777](https://github.com/leanprover-community/mathlib/pull/#9777))

### [2021-10-18T12:53:48+00:00](https://github.com/leanprover-community/mathlib/commit/a7ac699687722ba6fece06890042f4bfcf54ec0c)
feat(topology/metric_space): dimH is the supr of local dimH ([#9741](https://github.com/leanprover-community/mathlib/pull/#9741))

### [2021-10-18T12:53:47+00:00](https://github.com/leanprover-community/mathlib/commit/06179ca9de74cef561c83515ab69a71ecd53376a)
feat(data/real/pointwise): Inf and Sup of `a • s` for `s : set ℝ` ([#9707](https://github.com/leanprover-community/mathlib/pull/#9707))

This relates `Inf (a • s)`/`Sup (a • s)` with `a • Inf s`/`a • Sup s` for `s : set ℝ`.

### [2021-10-18T11:21:22+00:00](https://github.com/leanprover-community/mathlib/commit/e84132505932c74f49e964db4902d2bcf360247a)
feat(linear_algebra/dfinsupp): cardinality lemmas for `complete_lattice.independent` ([#9705](https://github.com/leanprover-community/mathlib/pull/#9705))

If `p` is a system of independent subspaces of a vector space `V`, and `v` is a system of nonzero vectors each contained in the corresponding subspace, then `v` is linearly independent.

Consequently, if `p` is a system of independent subspaces of `V`, then no more than `dim V` many can be nontrivial.

### [2021-10-18T09:32:36+00:00](https://github.com/leanprover-community/mathlib/commit/39db98c8d66743099e1d20e5090f8e86089364b5)
feat(analysis/normed_space/add_torsor_bases): the convex hull has non-empty interior iff the affine span is top ([#9727](https://github.com/leanprover-community/mathlib/pull/#9727))

Formalized as part of the Sphere Eversion project.



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-10-18T08:20:00+00:00](https://github.com/leanprover-community/mathlib/commit/2e62b33ce3c38203444ccdca7375609aed90c0af)
chore(field_theory/galois): speedup a slow convert ([#9782](https://github.com/leanprover-community/mathlib/pull/#9782))

This was broken by a deterministic timeout in another branch. This replaces a `convert` with an explicit `simp`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-18T08:19:59+00:00](https://github.com/leanprover-community/mathlib/commit/27d28a84a4ab445c5fdf6db0aec7761e30f78a99)
feat(linear_algebra/affine_space/independent): affine equivalences preserve affine independence of sets of points ([#9776](https://github.com/leanprover-community/mathlib/pull/#9776))

The key addition is `affine_equiv.affine_independent_set_of_eq_iff`.

Formalized as part of the Sphere Eversion project.

### [2021-10-18T08:19:58+00:00](https://github.com/leanprover-community/mathlib/commit/fb5c0bec19236b136c8f51fdd9fb807d7177d397)
feat(topology/metric_space): closed if spaced out ([#9754](https://github.com/leanprover-community/mathlib/pull/#9754))

If pairwise distances between the points of a set are bounded from below by a positive number, then the set is closed.
Also prove some theorems about `uniform_inducing` and `uniform_embedding` and show that `coe : int → real` is a closed embedding.

### [2021-10-18T05:53:11+00:00](https://github.com/leanprover-community/mathlib/commit/6cd6ff4473be489d44e60500aba561fdc54c8f28)
split(data/list/permutation): split off `data.list.basic` ([#9749](https://github.com/leanprover-community/mathlib/pull/#9749))

This moves all the `list.permutations` definitions and lemmas not involving `list.perm` to a new file.

### [2021-10-18T02:28:14+00:00](https://github.com/leanprover-community/mathlib/commit/5b527bd03471cb19ffe836506f20ac3ed3025156)
refactor(linear_algebra/quadratic_form): split file ([#9781](https://github.com/leanprover-community/mathlib/pull/#9781))

The section on quadratic forms over complex numbers required pulling in the developing of the complex power function, which significantly increases the import depth. Splitting this file allows `clifford_algebra` to be compiled much earlier.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-17T21:55:29+00:00](https://github.com/leanprover-community/mathlib/commit/27a777b10eb23013394c715d417fcf7b4f260136)
feat(data/nat/gcd): `coprime.lcm_eq_mul` ([#9761](https://github.com/leanprover-community/mathlib/pull/#9761))

Surprisingly, this result doesn't seem to be present yet.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-10-17T20:43:58+00:00](https://github.com/leanprover-community/mathlib/commit/5dbe8c48eb813c698de59cc17c198241882c5fd2)
feat(topology/metric_space): a map with a contracting iterate has a fixed pt ([#9760](https://github.com/leanprover-community/mathlib/pull/#9760))

### [2021-10-17T18:13:16+00:00](https://github.com/leanprover-community/mathlib/commit/084702d0edcc9a0405ccadf008660512c379fd0d)
chore(analysis/normed_algebra/exponential): golf, generalize ([#9740](https://github.com/leanprover-community/mathlib/pull/#9740))

* move `real.summable_pow_div_factorial` to
  `analysis.specific_limits`, golf the proof;

* use recently added lemma `inv_nat_cast_smul_eq` to golf the proof of
  equality of exponentials defined using different fields and
  generalize the statement: we no longer require one field to be a
  normed algebra over another.

* rename `exp_eq_exp_of_field_extension` → `exp_eq_exp` and
  `exp_series_eq_exp_series_of_field_extension` →
  `exp_series_eq_exp_series` because we no longer require
  `[normed_algebra 𝕂 𝕂']`.

### [2021-10-17T13:18:35+00:00](https://github.com/leanprover-community/mathlib/commit/376bba8ab3309652c2c2871b268d4a6432cf8438)
chore(data/finset/lattice): fix infi docstrings ([#9775](https://github.com/leanprover-community/mathlib/pull/#9775))

### [2021-10-17T13:18:34+00:00](https://github.com/leanprover-community/mathlib/commit/41b56455fcd9852b733c21d20aae34e9e5d7d96f)
chore(topology/algebra/ordered/basic): move code out of `basic` ([#9772](https://github.com/leanprover-community/mathlib/pull/#9772))

### [2021-10-17T13:18:32+00:00](https://github.com/leanprover-community/mathlib/commit/1432c308dc98e859b48199c717b418c43072e84c)
feat(topology/algebra/mul_action): `λ x, c • x` is a closed map for all `c` ([#9756](https://github.com/leanprover-community/mathlib/pull/#9756))

* rename old `is_closed_map_smul₀` to `is_closed_map_smul_of_ne_zero`;
* add a new `is_closed_map_smul₀` that assumes more about typeclasses
  but works for `c = 0`.

### [2021-10-17T13:18:31+00:00](https://github.com/leanprover-community/mathlib/commit/48dc249226aff1a10002e9899da0369d05839176)
feat(measure_theory/measure): +1 version of Borel-Cantelli, drop an assumption ([#9678](https://github.com/leanprover-community/mathlib/pull/#9678))

* In all versions of Borel-Cantelli lemma, do not require that the
  sets are measurable.
* Add +1 version.
* Golf proofs.

### [2021-10-17T11:01:38+00:00](https://github.com/leanprover-community/mathlib/commit/3f15148f6d0f9ea4184bd89bda8343cd1b853e60)
chore(analysis/p_series): use `lift` tactic ([#9773](https://github.com/leanprover-community/mathlib/pull/#9773))

### [2021-10-17T11:01:37+00:00](https://github.com/leanprover-community/mathlib/commit/9fec8f356be5f051850e4c1ee10f374cfbcc8ea0)
feat(group_theory/index): `index_comap_of_surjective` ([#9768](https://github.com/leanprover-community/mathlib/pull/#9768))

`subgroup.index` is preserved by `subgroup.comap`, provided that the homomorphism is surjective.

### [2021-10-17T11:01:36+00:00](https://github.com/leanprover-community/mathlib/commit/85f36400299f5f9ff0560ecf1d982ec01929ad2b)
feat(topology/instances/ennreal): `{f | lipschitz_with K f}` is a closed set ([#9766](https://github.com/leanprover-community/mathlib/pull/#9766))

### [2021-10-17T11:01:35+00:00](https://github.com/leanprover-community/mathlib/commit/678d7edf9f05e1c8b663e3682cd00e140715c4ae)
chore(data/equiv/mul_add): add missing `to_equiv_mk` ([#9765](https://github.com/leanprover-community/mathlib/pull/#9765))

### [2021-10-17T11:01:34+00:00](https://github.com/leanprover-community/mathlib/commit/24ebeecec6106c4e90ef6018fc704da9c23f304b)
feat(data/nat/gcd): Add `iff` version of `coprime.dvd_of_dvd_mul` ([#9759](https://github.com/leanprover-community/mathlib/pull/#9759))

Adds `iff` versions of `coprime.dvd_of_dvd_mul_right` and `coprime.dvd_of_dvd_mul_left`.

### [2021-10-17T11:01:33+00:00](https://github.com/leanprover-community/mathlib/commit/1558a767496ad47eba12e729f911e4a8637be5f6)
feat(group_theory/subgroup/basic): Special cases of `subgroup_of` ([#9755](https://github.com/leanprover-community/mathlib/pull/#9755))

Add four lemmas regarding special cases of `subgroup_of`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-10-17T11:01:31+00:00](https://github.com/leanprover-community/mathlib/commit/4b00aa2dd38154206ddf6906dd505b0d42535c70)
refactor(ring_theory/jacobson): avoid shadowing hypothesis ([#9736](https://github.com/leanprover-community/mathlib/pull/#9736))

This PR postpones a `rw` in a proof, which was creating a shadowed hypothesis. At present, this shadowing was not a big deal, but in another branch it caused a hard-to-diagnose error.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-17T11:01:30+00:00](https://github.com/leanprover-community/mathlib/commit/5eb47c00c73f833d582b4c45dc37022b2733b2c1)
feat(topology/homotopy): Define the fundamental groupoid of a topological space ([#9683](https://github.com/leanprover-community/mathlib/pull/#9683))

### [2021-10-17T08:53:58+00:00](https://github.com/leanprover-community/mathlib/commit/f171c61597ac54c3d651f8603cd1ab653a5975b7)
feat(linear_algebra/affine_space/independent): add `exists_affine_independent` ([#9747](https://github.com/leanprover-community/mathlib/pull/#9747))

Formalized as part of the Sphere Eversion project.

### [2021-10-17T06:23:24+00:00](https://github.com/leanprover-community/mathlib/commit/ff8a35d4a2662857030d87706c6e0189d64b877e)
feat(group_theory/subgroup/basic): Kernel of `subtype` and `inclusion` ([#9763](https://github.com/leanprover-community/mathlib/pull/#9763))

`subtype` and `inculusion` are injective, so they have trivial kernel.

### [2021-10-17T03:34:30+00:00](https://github.com/leanprover-community/mathlib/commit/7aa431c95730c8f90955d08b38ae2c548a12e0d1)
chore(group_theory/quotient_group): Tag lemmas with `@[to_additive]` ([#9771](https://github.com/leanprover-community/mathlib/pull/#9771))

Adds `@[to_additive]` to a couple lemmas.

### [2021-10-17T03:34:29+00:00](https://github.com/leanprover-community/mathlib/commit/a1a05ad8caa47b421096185a945dd1ee36c137cc)
chore(measure_theory/*): don't require the codomain to be a normed group ([#9769](https://github.com/leanprover-community/mathlib/pull/#9769))

Lemmas like `continuous_on.ae_measurable` are true for any codomain. Also add `continuous.integrable_on_Ioc` and `continuous.integrable_on_interval_oc`.

### [2021-10-17T03:34:28+00:00](https://github.com/leanprover-community/mathlib/commit/08a070b4331d8621fc0cea69a15dfa4efb506a8a)
chore(topology/instances/ennreal): golf a proof ([#9767](https://github.com/leanprover-community/mathlib/pull/#9767))

### [2021-10-17T02:23:49+00:00](https://github.com/leanprover-community/mathlib/commit/4a837fb973dc48e44a271ae293966d24f8b9e650)
chore(analysis/normed/group): add a few convenience lemmas ([#9770](https://github.com/leanprover-community/mathlib/pull/#9770))

Add `lipschitz_on_with.norm_sub_le_of_le`,
`lipschitz_with.norm_sub_le`, and `lipschitz_with.norm_sub_le_of_le`.

### [2021-10-16T23:11:25+00:00](https://github.com/leanprover-community/mathlib/commit/cf72eff0c8b58a59d2d17ef1844f58b1fe17cf25)
refactor(group_theory/quotient_group): Fix typo ([#9746](https://github.com/leanprover-community/mathlib/pull/#9746))

Fix typo in `quotient_bot`.

### [2021-10-16T21:46:54+00:00](https://github.com/leanprover-community/mathlib/commit/ad7000b9b0a36b21408b6d71762db89fd125340e)
feat(set_theory/cardinal): cardinal.to_nat_congr ([#9726](https://github.com/leanprover-community/mathlib/pull/#9726))

If `e : α ≃ β`, then `(cardinal.mk α).to_nat = (cardinal.mk β).to_nat`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-10-16T20:32:52+00:00](https://github.com/leanprover-community/mathlib/commit/b97bb92f1d286eb019ca6c6098a2306ade3c4c65)
feat(set_theory/cardinal): lemmas ([#9690](https://github.com/leanprover-community/mathlib/pull/#9690))

* swap sides of `cardinal.lift_mk`, rename it to `cardinal.mk_ulift`;
* add `cardinal.out_mk_equiv`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-16T18:01:16+00:00](https://github.com/leanprover-community/mathlib/commit/3fe67d65dd7bc54ead982c6bbde65359afc9b090)
feat(analysis/special_functions/integrals): integral of `|x - a| ^ n` over `Ι a b` ([#9752](https://github.com/leanprover-community/mathlib/pull/#9752))

Also use notation for `interval a b` and `interval_oc a b`.

### [2021-10-16T18:01:15+00:00](https://github.com/leanprover-community/mathlib/commit/54e9e120816b93abb9ebba420043bb1bd54ba293)
chore(topology/maps): add `is_closed_map.closed_range` ([#9751](https://github.com/leanprover-community/mathlib/pull/#9751))

### [2021-10-16T18:01:14+00:00](https://github.com/leanprover-community/mathlib/commit/998ab7888945d9a8671e4f0972fe640d01276c98)
chore(data/list/lex): make data.list.lex not depend on data.list.basic ([#9750](https://github.com/leanprover-community/mathlib/pull/#9750))

Another simplification in list related dependencies, if this commit breaks external code the fix is to add `import data.list.basic` to the broken file.

### [2021-10-16T18:01:13+00:00](https://github.com/leanprover-community/mathlib/commit/066a168d7970badc0720a21836e6e078a472f742)
feat(topology/G_delta): add lemmas, minor golf ([#9742](https://github.com/leanprover-community/mathlib/pull/#9742))

* the complement to a countable set is a Gδ set;
* a closed set is a Gδ set;
* finite union of Gδ sets is a Gδ set;
* generalize some universe levels in `topology.basic`;
* golf a few proofs in `topology.uniform_space.basic`;
* add `filter.has_basis.bInter_bUnion_ball`.

### [2021-10-16T18:01:11+00:00](https://github.com/leanprover-community/mathlib/commit/aa0d0d413f89aa16efc8fc8066804095a8d2a4d2)
feat(group_theory/subgroup/basic): Range of inclusion ([#9732](https://github.com/leanprover-community/mathlib/pull/#9732))

If `H ≤ K`, then the range of `inclusion : H → K` is `H` (viewed as a subgroup of `K`).

### [2021-10-16T18:01:10+00:00](https://github.com/leanprover-community/mathlib/commit/155f8e66c4e54f93693ad52d5c047cfe2ed031d0)
feat(data/int/succ_pred): `ℤ` is succ- and pred- archimedean ([#9731](https://github.com/leanprover-community/mathlib/pull/#9731))

This provides the instances `succ_order ℤ`, `pred_order ℤ`, `is_succ_archimedean ℤ`, `is_pred_archimedean ℤ`.

### [2021-10-16T18:01:09+00:00](https://github.com/leanprover-community/mathlib/commit/e744033068b1d0902fef553539df3e8ef4e60f9b)
feat(data/finset/basic, lattice): Simple lemmas ([#9723](https://github.com/leanprover-community/mathlib/pull/#9723))

This proves lemmas about `finset.sup`/`finset.inf` and `finset.singleton`.

### [2021-10-16T18:01:08+00:00](https://github.com/leanprover-community/mathlib/commit/bf34d9b8c8b8edfa95b2a8bfb2e6bad61e8f1fc5)
feat(analysis/normed/group/SemiNormedGroup/kernels): add explicit_cokernel.map ([#9712](https://github.com/leanprover-community/mathlib/pull/#9712))

From LTE.

### [2021-10-16T18:01:07+00:00](https://github.com/leanprover-community/mathlib/commit/686b3635c6c31450d4f19c5aabadcf5a820cb4d8)
feat(analysis/normed/group/SemiNormedGroup/kernels): add kernels ([#9711](https://github.com/leanprover-community/mathlib/pull/#9711))

From LTE.

### [2021-10-16T18:01:06+00:00](https://github.com/leanprover-community/mathlib/commit/3d9992651f11f67c4e48c0a0e7c4bacfa3328ca0)
feat(analysis/normed/group/SemiNormedGroup): add iso_isometry_of_norm_noninc ([#9710](https://github.com/leanprover-community/mathlib/pull/#9710))

From LTE.

### [2021-10-16T18:01:05+00:00](https://github.com/leanprover-community/mathlib/commit/5ac586a60a54e64b0e481b541d090da532beb410)
feat(algebra/group_power/order): When a power is less than one ([#9700](https://github.com/leanprover-community/mathlib/pull/#9700))

This proves a bunch of simple order lemmas relating `1`, `a` and `a ^ n`. I also move `pow_le_one` upstream as it could already be proved in `algebra.group_power.order` and remove `[nontrivial R]` from `one_lt_pow`.

### [2021-10-16T16:46:55+00:00](https://github.com/leanprover-community/mathlib/commit/99b2d40e23085024605f3743c8ac80a8915463af)
feat(algebra/floor): Floor and ceil of `-a` ([#9715](https://github.com/leanprover-community/mathlib/pull/#9715))

This proves `floor_neg : ⌊-a⌋ = -⌈a⌉` and `ceil_neg : ⌈-a⌉ = -⌊a⌋` and uses them to remove explicit dependency on the definition of `int.ceil` in prevision of [#9591](https://github.com/leanprover-community/mathlib/pull/#9591). This also proves `⌊a + 1⌋ = ⌊a⌋ + 1` and variants.

### [2021-10-16T09:26:55+00:00](https://github.com/leanprover-community/mathlib/commit/9ac2aa297e8b88ebc72714a41efa7c60086afebc)
feat(topology/metric_space/lipschitz): add `lipschitz_with.min` and `lipschitz_with.max` ([#9744](https://github.com/leanprover-community/mathlib/pull/#9744))

Also change assumptions in some lemmas in `algebra.order.group` from
 `[add_comm_group α] [linear_order α] [covariant_class α α (+) (≤)]`
to `[linear_ordered_add_comm_group α]`. These two sets of assumptions
are equivalent but the latter is more readable.

### [2021-10-16T09:26:54+00:00](https://github.com/leanprover-community/mathlib/commit/96ba8b6ae326a4992473cb362bfd97c460d06fd1)
chore(topology/uniform_space/pi): add `uniform_continuous_pi` ([#9743](https://github.com/leanprover-community/mathlib/pull/#9743))

### [2021-10-16T08:44:20+00:00](https://github.com/leanprover-community/mathlib/commit/e3622934fd930b311c21ddd9c5dd0c33be0be456)
refactor(ring_theory/fractional_ideal): speedup a proof ([#9738](https://github.com/leanprover-community/mathlib/pull/#9738))

This was timing out on another branch. Just replaces a `simp only []` with a `rw []`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-16T07:32:33+00:00](https://github.com/leanprover-community/mathlib/commit/f40cd88c78e2e03d954ccdfd92939e300f3eed22)
chore(topology/algebra/ordered): move some lemmas to a new file ([#9745](https://github.com/leanprover-community/mathlib/pull/#9745))

### [2021-10-16T04:16:34+00:00](https://github.com/leanprover-community/mathlib/commit/150bbeab00b754a3e42e936696673ace6360c231)
feat(group_theory/subgroup/basic): Bottom subgroup has unique element ([#9734](https://github.com/leanprover-community/mathlib/pull/#9734))

Adds instance for `unique (⊥ : subgroup G)`.

### [2021-10-16T01:17:29+00:00](https://github.com/leanprover-community/mathlib/commit/17665882502da988648c6096bc72d52451538d77)
feat(measure_theory/covering/vitali): Vitali covering theorems ([#9680](https://github.com/leanprover-community/mathlib/pull/#9680))

The topological and measurable Vitali covering theorems.
* topological version: if a space is covered by balls `(B (x_i, r_i))_{i \in I}`, one can extract a disjointed subfamily indexed by `J` such that the space is covered by the balls `B (x_j, 5 r_j)`.
* measurable version: if additionally the measure has a doubling-like property, and the covering contains balls of arbitrarily small radius at every point, then the disjointed subfamily one obtains above covers almost all the space.

These two statements are particular cases of more general statements that are proved in this PR.

### [2021-10-15T22:57:51+00:00](https://github.com/leanprover-community/mathlib/commit/ea22ce39fbdc245cd0d10be2a03e3a26d70262b6)
chore(data/list): move lemmas from data.list.basic that require algebra.group_power to a new file ([#9728](https://github.com/leanprover-community/mathlib/pull/#9728))

Hopefully ease the dependencies on anyone importing data.list.basic, if your code broke after this change adding `import data.list.prod_monoid` should fix it.

Lemmas moved:
- `list.prod_repeat`
- `list.sum_repeat`
- `list.prod_le_of_forall_le`
- `list.sum_le_of_forall_le`

### [2021-10-15T21:35:25+00:00](https://github.com/leanprover-community/mathlib/commit/711aa7559366deeda691ef91642b861f07d81e37)
refactor(algebra/gcd_monoid): remove superfluous old_structure_cmd ([#9720](https://github.com/leanprover-community/mathlib/pull/#9720))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-15T16:38:20+00:00](https://github.com/leanprover-community/mathlib/commit/b3f602b9270d89cd973f9032d2a222387cd1b8bb)
feat(linear_algebra/linear_independent): add variant of `exists_linear_independent` ([#9708](https://github.com/leanprover-community/mathlib/pull/#9708))


Formalized as part of the Sphere Eversion project.

### [2021-10-15T15:08:13+00:00](https://github.com/leanprover-community/mathlib/commit/d6fd5f5fc4d020d0cec5af2106c7bafee45108ab)
feat(linear_algebra/dimension): generalize dim_zero_iff_forall_zero ([#9713](https://github.com/leanprover-community/mathlib/pull/#9713))

We generalize `dim_zero_iff_forall_zero` to `[nontrivial R] [no_zero_smul_divisors R M]`.

If you see a more general class to consider let me know.

### [2021-10-15T12:10:59+00:00](https://github.com/leanprover-community/mathlib/commit/ad6d4764748fdb008a801b56ec1325c88df9435f)
refactor(ring_theory/derivation): remove old_structure_cmd ([#9724](https://github.com/leanprover-community/mathlib/pull/#9724))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-15T12:10:58+00:00](https://github.com/leanprover-community/mathlib/commit/a2737b4bf612f01e06f3376dd556c3d3698116f3)
chore(data/set_like/basic): remove superfluous old_structure_cmd ([#9722](https://github.com/leanprover-community/mathlib/pull/#9722))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-15T11:28:36+00:00](https://github.com/leanprover-community/mathlib/commit/6bc2a1a2806748536dc659d59ef4987abff52ace)
refactor(algebra/lie/basic): remove old_structure_cmd ([#9721](https://github.com/leanprover-community/mathlib/pull/#9721))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-15T06:28:08+00:00](https://github.com/leanprover-community/mathlib/commit/770703645cbd2f8d0e96743527f9ca57e7b9b63d)
feat(tactic/by_contra): add by_contra' tactic ([#9619](https://github.com/leanprover-community/mathlib/pull/#9619))

### [2021-10-15T01:06:58+00:00](https://github.com/leanprover-community/mathlib/commit/be91f696cb81262589b05938b8127e46138d41c3)
chore(algebra/floor): general golf ([#9716](https://github.com/leanprover-community/mathlib/pull/#9716))

This cleans the file in depth:
* kill some `simp`
* use available dot notation on `≤`
* remove the `by ... ; ...` (there's one left that [#9715](https://github.com/leanprover-community/mathlib/pull/#9715)) takes care of
* group definition and notation of `int.floor`,`int.ceil` and `int.fract`
* move `int.preimage_...` lemmas with the rest of the `ℤ` stuff
* homogeneize variable names

### [2021-10-14T23:10:05+00:00](https://github.com/leanprover-community/mathlib/commit/c37ea535e9b594d17565b6096eb7e8c169635031)
feat(order/succ_pred): `succ`-Archimedean orders ([#9714](https://github.com/leanprover-community/mathlib/pull/#9714))

This defines `succ`-Archimedean orders: orders in which `a ≤ b` means that `succ^[n] a = b` for some `n`.

### [2021-10-14T21:12:58+00:00](https://github.com/leanprover-community/mathlib/commit/c12acedd72927306ad7d20cdef9ec5c413574735)
feat(algebra/star): star_linear_equiv ([#9426](https://github.com/leanprover-community/mathlib/pull/#9426))



Co-authored-by: Frédéric Dupuis <dupuisf@iro.umontreal.ca>
Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2021-10-14T19:54:19+00:00](https://github.com/leanprover-community/mathlib/commit/158fbc5d9c53b8df93cf0371310aaa97c7454546)
refactor(algebra/module/order): Make space argument explicit in the `order_iso` ([#9706](https://github.com/leanprover-community/mathlib/pull/#9706))

Explicitly providing `M` in `order_iso.smul_left` and `order_iso.smul_left_dual` turns out to work much better with dot notation on `order_iso`. This allows golfing half the proofs introduced in [#9078](https://github.com/leanprover-community/mathlib/pull/#9078).

### [2021-10-14T18:49:52+00:00](https://github.com/leanprover-community/mathlib/commit/72789f5749ce1c3a76d6d94293fc5e568827e903)
feat(linear_algebra/affine_space/affine_subspace): add lemma `affine_equiv.span_eq_top_iff` ([#9695](https://github.com/leanprover-community/mathlib/pull/#9695))

Together with supporting lemmas.

Formalized as part of the Sphere Eversion project.

### [2021-10-14T18:06:10+00:00](https://github.com/leanprover-community/mathlib/commit/cef78dd49b7daf9cbe3b9392e47807a11bf3adc1)
feat(archive/abel_ruffini): speedup by squeezing  ([#9709](https://github.com/leanprover-community/mathlib/pull/#9709))

30s->9s elaboration for me, hopefully stop [#9705](https://github.com/leanprover-community/mathlib/pull/#9705) timing out

### [2021-10-14T16:25:51+00:00](https://github.com/leanprover-community/mathlib/commit/393fe7001baaacb98d625332a51e21a3dbed24e5)
chore(analysis/p_series): add 2 more versions ([#9703](https://github.com/leanprover-community/mathlib/pull/#9703))

### [2021-10-14T13:24:56+00:00](https://github.com/leanprover-community/mathlib/commit/aff49a63b6c05dbc55f81710962e607de6792aad)
feat(data/equiv/basic): prop_equiv_pempty ([#9689](https://github.com/leanprover-community/mathlib/pull/#9689))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-14T13:24:54+00:00](https://github.com/leanprover-community/mathlib/commit/dc23dfa19e3c5e76f5a2c6f9b56bcdb4ec4bc476)
feat(data/equiv/basic): subtype_equiv_psigma ([#9688](https://github.com/leanprover-community/mathlib/pull/#9688))



- [x] depends on: [#9687](https://github.com/leanprover-community/mathlib/pull/#9687)

[![Open in Gitpod](https://gitpod.io/button/open-in-gitpod.svg)](https://gitpod.io/from-referrer/)


Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-14T13:24:52+00:00](https://github.com/leanprover-community/mathlib/commit/9da33a89beae8d2cc4615abdef276983c9e552ae)
refactor(algebra/floor): Rename floor and ceil functions ([#9590](https://github.com/leanprover-community/mathlib/pull/#9590))

This renames
* `floor` -> `int.floor`
* `ceil` -> `int.ceil`
* `fract` -> `int.fract`
* `nat_floor` -> `nat.floor`
* `nat_ceil` -> `nat.ceil`

### [2021-10-14T07:51:21+00:00](https://github.com/leanprover-community/mathlib/commit/264ff9038c942e7945d221200d860238690198ae)
refactor(analysis/special_functions): generalise nth-root lemmas ([#9704](https://github.com/leanprover-community/mathlib/pull/#9704))

`exists_pow_nat_eq` and `exists_eq_mul_self` both hold for any algebraically closed field, so pull them out into `is_alg_closed/basic` and generalise appropriately

Closes [#4674](https://github.com/leanprover-community/mathlib/pull/#4674)

### [2021-10-14T07:51:19+00:00](https://github.com/leanprover-community/mathlib/commit/8d67d9ae45ae81bafa6e19bd393d308786e008e4)
chore(category_theory/sites/*): Generalize universes ([#9675](https://github.com/leanprover-community/mathlib/pull/#9675))

This generalizes the universe levels for sheaves to some extent.
This will allow us to now consider sheaves on `C : Type u` (satisfying `[category.{v} C]` and endowed with a Grothendieck topology) taking values in an arbitrary category with no additional universe restrictions.

The only part of the theory which has not been generalized is the equivalence of the sheaf condition with the condition involving Yoneda. To generalize this would require composing with `ulift_functors`'s, which we may or may not want to do.



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-10-14T05:36:14+00:00](https://github.com/leanprover-community/mathlib/commit/34f349422b19d40909d772194ddae57836855561)
chore(set_theory/cardinal): rename `is_empty`/`nonempty` lemmas ([#9668](https://github.com/leanprover-community/mathlib/pull/#9668))

* add `is_empty_pi`, `is_empty_prod`, `is_empty_pprod`, `is_empty_sum`;
* rename `cardinal.eq_zero_of_is_empty` to `cardinal.mk_eq_zero`, make
  the argument `α : Type u` explicit;
* rename `cardinal.eq_zero_iff_is_empty` to `cardinal.mk_eq_zero_iff`;
* rename `cardinal.ne_zero_iff_nonempty` to `cardinal.mk_ne_zero_iff`;
* add `@[simp]` lemma `cardinal.mk_ne_zero`;
* fix compile errors caused by these changes, golf a few proofs.

### [2021-10-14T04:04:03+00:00](https://github.com/leanprover-community/mathlib/commit/33406172eadd6088e87b9d6b56233bace981866d)
feat(algebra/bounds): `smul` of upper/lower bounds ([#9078](https://github.com/leanprover-community/mathlib/pull/#9078))

This relates `lower_bounds (a • s)`/`upper_bounds (a • s)` and `a • lower_bounds s`/`a • upper_bounds s`.

### [2021-10-13T21:29:32+00:00](https://github.com/leanprover-community/mathlib/commit/19da20b07a6cfb1dc9981aea98bb192e46000168)
feat(combinatorics/hall): generalized Hall's Marriage Theorem ([#7825](https://github.com/leanprover-community/mathlib/pull/#7825))

Used the generalized Kőnig's lemma to prove a version of Hall's Marriage Theorem with the `fintype` constraint on the index type removed.  The original `fintype` version is moved into `hall/finite.lean`, and the infinite version is put in `hall/basic.lean`.  They are in separate files because the infinite version pulls in `topology.category.Top.limits`, which is a rather large dependency.



Co-authored-by: Yaël Dillies <yael.dillies@gmail.com>

### [2021-10-13T17:58:00+00:00](https://github.com/leanprover-community/mathlib/commit/5db83f9c46b60260cf5c9322f809a8980c85b5e1)
feat(set_theory/cardinal): add lemmas ([#9697](https://github.com/leanprover-community/mathlib/pull/#9697))

We add three easy lemmas about cardinals living in different universes.

### [2021-10-13T17:57:59+00:00](https://github.com/leanprover-community/mathlib/commit/3faf0f5d55d43183c2dfb11e19c823cd760b1a6e)
chore(data/real/irrational): add more lemmas ([#9684](https://github.com/leanprover-community/mathlib/pull/#9684))

### [2021-10-13T17:57:58+00:00](https://github.com/leanprover-community/mathlib/commit/096923c0aa2a490484bbdd15969d0e18d2445286)
feat(topology/connected.lean): add theorems about connectedness o… ([#9633](https://github.com/leanprover-community/mathlib/pull/#9633))

feat(src/topology/connected.lean): add theorems about connectedness of closure

add two theorems is_preconnected.inclosure and is_connected.closure
	which formalize that if a set s is (pre)connected
	and a set t satisfies s ⊆ t ⊆ closure s,
	then t is (pre)connected as well
modify is_preconnected.closure and is_connected.closure
	to take these theorems into account
add a few comments for theorems in the code





Co-authored-by: Antoine Chambert-Loir <antoine.chambert-loir@math.univ-paris-diderot.fr>
Co-authored-by: Oliver Nash <github@olivernash.org>

### [2021-10-13T15:48:29+00:00](https://github.com/leanprover-community/mathlib/commit/32e1b6c16b0e0620ceb92f163bc40cab7f28b90d)
chore(ring_theory/ideal): improve 1st isomorphism theorem docstrings ([#9699](https://github.com/leanprover-community/mathlib/pull/#9699))

Fix a typo and add **bold** to the theorem names.

### [2021-10-13T15:48:28+00:00](https://github.com/leanprover-community/mathlib/commit/0ce44420cf8e4c26f0803421012a5424590167d0)
refactor(algebra/group_power/order): relax linearity condition on `one_lt_pow` ([#9696](https://github.com/leanprover-community/mathlib/pull/#9696))

`[linear_ordered_semiring R]` becomes `[ordered_semiring R] [nontrivial R]`. I also golf the proof and move ìt from `algebra.field_power` to `algebra.group_power.order`, where it belongs.

### [2021-10-13T15:48:27+00:00](https://github.com/leanprover-community/mathlib/commit/bc9e38f4f5de6dc746ae350f52eaca7af9415683)
refactor(linear_algebra/dimension): remove some nontrivial assumptions ([#9693](https://github.com/leanprover-community/mathlib/pull/#9693))

We remove some `nontrivial R` assumptions.

### [2021-10-13T15:48:25+00:00](https://github.com/leanprover-community/mathlib/commit/313db47a8b2138e67aed39f25a6002ad4b0bf44c)
feat(measure_theory/covering/besicovitch): remove measurability assumptions ([#9679](https://github.com/leanprover-community/mathlib/pull/#9679))

For applications, it is important to allow non-measurable sets in the Besicovitch covering theorem. We tweak the proof to allow this.

Also give an improved statement that is easier to use in applications.

### [2021-10-13T15:48:24+00:00](https://github.com/leanprover-community/mathlib/commit/f29755b9078a002f15fae2da1425e7798c95bdb7)
refactor(data/set/pairwise): generalize `pairwise_disjoint` to `semilattice_inf_bot` ([#9670](https://github.com/leanprover-community/mathlib/pull/#9670))

`set.pairwise_disjoint` was only defined for `set (set α)`. Now, it's defined for `set α` where `semilattice_inf_bot α`. I also
* move it to `data.set.pairwise` because it's really not about `set` anymore.
* drop the `set` namespace.
* add more general elimination rules and rename the current one to `elim_set`.

### [2021-10-13T15:48:22+00:00](https://github.com/leanprover-community/mathlib/commit/9ee2a50aa439d092c8dea16c1f82f7f8e1f1ea2c)
fix(group_theory/group_action): `has_scalar.comp.is_scalar_tower` is a dangerous instance ([#9656](https://github.com/leanprover-community/mathlib/pull/#9656))

This issue came up in the discussion of [#9535](https://github.com/leanprover-community/mathlib/pull/#9535): in certain cases, the instance `has_scalar.comp.is_scalar_tower` is fed too many metavariables and starts recursing infinitely. So I believe we should demote it from being an instance. Example trace:

```plain
[class_instances] (0) ?x_0 : has_scalar S P.quotient := @quotient.has_scalar ?x_1 ?x_2 ?x_3 ?x_4 ?x_5 ?x_6 ?x_7 ?x_8 ?x_9 ?x_10
[class_instances] (1) ?x_9 : @is_scalar_tower S R M ?x_7
  (@smul_with_zero.to_has_scalar R M
     (@mul_zero_class.to_has_zero R
        (@mul_zero_one_class.to_mul_zero_class R
           (@monoid_with_zero.to_mul_zero_one_class R (@semiring.to_monoid_with_zero R (@ring.to_semiring R _inst_1)))))
     (@add_zero_class.to_has_zero M
        (@add_monoid.to_add_zero_class M
           (@add_comm_monoid.to_add_monoid M (@add_comm_group.to_add_comm_monoid M _inst_2))))
     (@mul_action_with_zero.to_smul_with_zero R M (@semiring.to_monoid_with_zero R (@ring.to_semiring R _inst_1))
        (@add_zero_class.to_has_zero M
           (@add_monoid.to_add_zero_class M
              (@add_comm_monoid.to_add_monoid M (@add_comm_group.to_add_comm_monoid M _inst_2))))
        (@module.to_mul_action_with_zero R M (@ring.to_semiring R _inst_1)
           (@add_comm_group.to_add_comm_monoid M _inst_2)
           _inst_3)))
  ?x_8 := @has_scalar.comp.is_scalar_tower ?x_11 ?x_12 ?x_13 ?x_14 ?x_15 ?x_16 ?x_17 ?x_18 ?x_19
[class_instances] (2) ?x_18 : @is_scalar_tower ?x_11 R M ?x_15
  (@smul_with_zero.to_has_scalar R M
     (@mul_zero_class.to_has_zero R
        (@mul_zero_one_class.to_mul_zero_class R
           (@monoid_with_zero.to_mul_zero_one_class R (@semiring.to_monoid_with_zero R (@ring.to_semiring R _inst_1)))))
     (@add_zero_class.to_has_zero M
        (@add_monoid.to_add_zero_class M
           (@add_comm_monoid.to_add_monoid M (@add_comm_group.to_add_comm_monoid M _inst_2))))
     (@mul_action_with_zero.to_smul_with_zero R M (@semiring.to_monoid_with_zero R (@ring.to_semiring R _inst_1))
        (@add_zero_class.to_has_zero M
           (@add_monoid.to_add_zero_class M
              (@add_comm_monoid.to_add_monoid M (@add_comm_group.to_add_comm_monoid M _inst_2))))
        (@module.to_mul_action_with_zero R M (@ring.to_semiring R _inst_1)
           (@add_comm_group.to_add_comm_monoid M _inst_2)
           _inst_3)))
  ?x_16 := @has_scalar.comp.is_scalar_tower ?x_20 ?x_21 ?x_22 ?x_23 ?x_24 ?x_25 ?x_26 ?x_27 ?x_28
...
```
You'll see that the places where `has_scalar.comp.is_scalar_tower` expects a `has_scalar.comp` are in fact metavariables, so they always unify.

I have included a test case where the instance looks innocuous enough in its parameters: everything is phrased in terms of either irreducible defs, implicit variables or instance implicits, to argue that the issue really lies with `has_scalar.comp.is_scalar_tower`. Moreover, I don't think we lose a lot by demoting the latter from an instance since `has_scalar.comp` isn't an instance either.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-10-13T15:48:21+00:00](https://github.com/leanprover-community/mathlib/commit/e8427b032d06f40bb5532c1b60a24d13d3953519)
feat(ring_theory/ideal/operation): add some extra definitions in the `double_quot` section ([#9649](https://github.com/leanprover-community/mathlib/pull/#9649))

### [2021-10-13T15:48:20+00:00](https://github.com/leanprover-community/mathlib/commit/a7ec63366da9daa5a235da435e8211aa5fbfa956)
chore(algebra/*): add missing lemmas about `copy` on subobjects ([#9624](https://github.com/leanprover-community/mathlib/pull/#9624))

This adds `coe_copy` and `copy_eq` to `sub{mul_action,group,ring,semiring,field,module,algebra,lie_module}`, to match the lemmas already present on `submonoid`.

### [2021-10-13T15:48:18+00:00](https://github.com/leanprover-community/mathlib/commit/577cac150305e506320831675d0c2a22d64a07ff)
feat(algebra/order/nonneg): properties about the nonnegative cone ([#9598](https://github.com/leanprover-community/mathlib/pull/#9598))

* Provide various classes on the type `{x : α // 0 ≤ x}` where `α` has some order (and algebraic) structure.
* Use this to automatically derive the classes on `nnreal`.
* We currently do not yet define `conditionally_complete_linear_order_bot nnreal` using nonneg, since that causes some errors (I think Lean then thinks that there are two orders that are not definitionally equal (unfolding only instances)).
* We leave a bunch of `example` lines in `nnreal` to show that `nnreal` has all the old classes. These could also be removed, if desired.
* We currently only give some instances and simp/norm_cast lemmas. This could be expanded in the future.



Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-10-13T13:20:49+00:00](https://github.com/leanprover-community/mathlib/commit/aa67421772ad11c55fbdc51462c14d95572ef3a2)
lint(tactic/lint/misc): do not lint autogenerated proofs for bad universes ([#9676](https://github.com/leanprover-community/mathlib/pull/#9676))

### [2021-10-13T13:20:48+00:00](https://github.com/leanprover-community/mathlib/commit/ea360f2214c30d432280e753a0459f376115d526)
feat(group_theory/sylow): Frattini's Argument ([#9662](https://github.com/leanprover-community/mathlib/pull/#9662))

Frattini's argument: If `N` is a normal subgroup of `G`, and `P` is a Sylow `p`-subgroup of `N`, then `PN=G`.

The proof is an application of Sylow's second theorem (all Sylow `p`-subgroups of `N` are conjugate).

### [2021-10-13T13:20:46+00:00](https://github.com/leanprover-community/mathlib/commit/acc1d4bdb29b81e59f5fa5723cf59a226dae4fa7)
feat(analysis/normed_space/SemiNormedGroup/kernels) : add lemmas ([#9654](https://github.com/leanprover-community/mathlib/pull/#9654))

From LTE.

### [2021-10-13T13:20:45+00:00](https://github.com/leanprover-community/mathlib/commit/6ea59e36cba93af72884ed501c1519028a818ba9)
feat(category_theory/sites/sieves): Added functor pushforward ([#9647](https://github.com/leanprover-community/mathlib/pull/#9647))

Defined `sieve.functor_pushforward`.
Proved that `sieve.functor_pushforward` and `sieve.functor_pullback` forms a Galois connection.
Provided some lemmas about `sieve.functor_pushforward`, `sieve.functor_pullback` regarding the lattice structure.



Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-10-13T13:20:44+00:00](https://github.com/leanprover-community/mathlib/commit/17d8928bd5ed9f6f34e758c7ef5d1014ae91e240)
feat(algebra/graded_monoid,algebra/direct_sum/ring): provide lemmas about powers in graded monoids ([#9631](https://github.com/leanprover-community/mathlib/pull/#9631))

The key results are `direct_sum.of_pow` and `graded_monoid.mk_pow`.

### [2021-10-13T13:20:43+00:00](https://github.com/leanprover-community/mathlib/commit/edf07cfb3ffcdb7d465b8ce610632c39e29c3a79)
feat(topology/sheaves/sheaf_condition/sites): Connect sheaves on sites to sheaves on spaces ([#9609](https://github.com/leanprover-community/mathlib/pull/#9609))

Show that a sheaf on the site `opens X` is the same thing as a sheaf on the space `X`. This finally connects the theory of sheaves on sites to sheaves on spaces, which were previously independent of each other.

### [2021-10-13T13:20:41+00:00](https://github.com/leanprover-community/mathlib/commit/f238733a469cf547d54d5c403a92201ca5551b53)
feat(algebra/order/smul): Monotonicity of scalar multiplication ([#9558](https://github.com/leanprover-community/mathlib/pull/#9558))

Also prove `smul_nonneg`, `smul_pos` and variants.

### [2021-10-13T12:04:30+00:00](https://github.com/leanprover-community/mathlib/commit/04ed867abd53f437c50059839da63d73ae709b00)
chore(topology/uniform_space/cauchy): add a few simple lemmas ([#9685](https://github.com/leanprover-community/mathlib/pull/#9685))

* rename `cauchy_prod` to `cauchy.prod`;
* add `cauchy_seq.tendsto_uniformity`, `cauchy_seq.nonempty`,
  `cauchy_seq.comp_tendsto`, `cauchy_seq.prod`, `cauchy_seq.prod_map`,
  `uniform_continuous.comp_cauchy_seq`, and
  `filter.tendsto.subseq_mem_entourage`;
* drop `[nonempty _]` assumption in `cauchy_seq.mem_entourage`.

### [2021-10-13T09:37:08+00:00](https://github.com/leanprover-community/mathlib/commit/46a70143ef6ca4d976ef681c51d6350ba50412b0)
feat(data/equiv/basic): psigma_congr_right ([#9687](https://github.com/leanprover-community/mathlib/pull/#9687))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-13T09:37:07+00:00](https://github.com/leanprover-community/mathlib/commit/4c1a9c46ccbf90b0d04afc52f34a966501fc6b5e)
chore(order/filter): add 2 lemmas ([#9682](https://github.com/leanprover-community/mathlib/pull/#9682))

### [2021-10-13T09:37:00+00:00](https://github.com/leanprover-community/mathlib/commit/888638643d8d7daf1972809b2b0cc76f4e61888f)
feat(star/basic): add a `star_monoid (units R)` instance ([#9681](https://github.com/leanprover-community/mathlib/pull/#9681))

This also moves all the `opposite R` instances to be adjacent, and add some missing `star_module` definitions.

### [2021-10-13T09:36:59+00:00](https://github.com/leanprover-community/mathlib/commit/52d5fd47a1531fd52fe67b5f80d9af2c5cb9ebe9)
feat(linear_algebra/{dimension,affine_space/finite_dimensional}): independent subsets of finite-dimensional spaces are finite. ([#9674](https://github.com/leanprover-community/mathlib/pull/#9674))

Formalized as part of the Sphere Eversion project.



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-10-13T07:56:13+00:00](https://github.com/leanprover-community/mathlib/commit/2c8abe52797aeda758ab8a284bc4e92fd4744550)
feat(algebra/star): `star_gpow` and `star_fpow` ([#9661](https://github.com/leanprover-community/mathlib/pull/#9661))

One unrelated proof changes as the import additions pulls in a simp lemma that was previously missing, making the call to `ring` no longer necessary.

### [2021-10-13T02:43:35+00:00](https://github.com/leanprover-community/mathlib/commit/ea70e1c06e6ca0d14a91721ad5a9f96ac59d309c)
chore(scripts): update nolints.txt ([#9686](https://github.com/leanprover-community/mathlib/pull/#9686))

I am happy to remove some nolints for you!

### [2021-10-12T22:59:49+00:00](https://github.com/leanprover-community/mathlib/commit/c65de1e6c2623c664c4b6e5de81b09dd81c11dd3)
chore(data/sym/sym2): speed up some proofs ([#9677](https://github.com/leanprover-community/mathlib/pull/#9677))

In one test, elaboration of sym2_ext went from 46.9s to 734ms, and of elems_iff_eq from 54.3s to 514ms.

### [2021-10-12T17:00:40+00:00](https://github.com/leanprover-community/mathlib/commit/66285c9ff35728d685a999610ade0de473c7648a)
feat(topology/instances/ennreal): if a tsum is finite, then the tsum over the complement of a finset tends to 0 at top ([#9665](https://github.com/leanprover-community/mathlib/pull/#9665))

Together with minor tweaks of the library:
* rename `bounded.subset` to `bounded.mono`
* remove `bUnion_subset_bUnion_right`, which is exactly the same as `bUnion_mono`. Same for intersections.
* add `bUnion_congr` and `bInter_congr`
* introduce lemma `null_of_locally_null`: if a set has zero measure in a neighborhood of each of its points, then it has zero measure in a second-countable space.

### [2021-10-12T17:00:39+00:00](https://github.com/leanprover-community/mathlib/commit/817c70db1ea59a22ade3daa1ba3b5e561e95f149)
feat(category_theory/*): Functors about comma categories. ([#9627](https://github.com/leanprover-community/mathlib/pull/#9627))

Added `pre` and `post` for `comma`, `structured_arrow`, `costructured_arrow`.



Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-10-12T15:09:33+00:00](https://github.com/leanprover-community/mathlib/commit/f63b8f12440c88b5d476fcd9b85e007dfc11b391)
feat(algebra/star/basic): add some helper lemmas about star ([#9651](https://github.com/leanprover-community/mathlib/pull/#9651))

This adds the new lemmas:
* `star_pow`
* `star_nsmul`
* `star_gsmul`
* `star_prod`
* `star_div`
* `star_div'`
* `star_inv`
* `star_inv'`
* `star_mul'`

and generalizes the typeclass assumptions from `star_ring` to `star_add_monoid` on:
* `star_neg`
* `star_sub`
* `star_sum`

### [2021-10-12T11:41:14+00:00](https://github.com/leanprover-community/mathlib/commit/b486c88f2d3c264feb99348726ea9dcc16153384)
chore(analysis): fix file name ([#9673](https://github.com/leanprover-community/mathlib/pull/#9673))

This file was moved since the docstring was written

### [2021-10-12T11:41:13+00:00](https://github.com/leanprover-community/mathlib/commit/bcb29439853fe173f500726594493db306f94e99)
chore(set_theory/cardinal): move defs/lemmas about `lift` up ([#9669](https://github.com/leanprover-community/mathlib/pull/#9669))

### [2021-10-12T11:41:12+00:00](https://github.com/leanprover-community/mathlib/commit/a979d15c538f8a873acd073bc4716db3733cd248)
feat(order/filter): `∃ᶠ m in at_top, m ≡ d [MOD n]` ([#9666](https://github.com/leanprover-community/mathlib/pull/#9666))

### [2021-10-12T08:59:45+00:00](https://github.com/leanprover-community/mathlib/commit/fd7da4ef5490b21325459efc316e01279c7a5942)
refactor(combinatorics/partition): add `nat` namespace ([#9672](https://github.com/leanprover-community/mathlib/pull/#9672))

`partition` is now `nat.partition`

### [2021-10-12T08:59:43+00:00](https://github.com/leanprover-community/mathlib/commit/2e72f352afb54c21739531ba359e0d94ef527201)
refactor(data/opposite): Remove the `op_induction` tactic ([#9660](https://github.com/leanprover-community/mathlib/pull/#9660))

The `induction` tactic is already powerful enough for this; we don't have `order_dual_induction` or `nat_induction` as tactics.

The bulk of this change is replacing `op_induction x` with `induction x using opposite.rec`.

This leaves behind the non-interactive `op_induction'` which is still needed as a `tidy` hook.

This also renames the def `opposite.op_induction` to `opposite.rec` to match `order_dual.rec` etc.

### [2021-10-12T08:59:41+00:00](https://github.com/leanprover-community/mathlib/commit/ad4040dd140cd85d3eeb4ec62fd2fc0f85f39c8e)
feat(algebra/opposites): provide npow and gpow explicitly, prove `op_gpow` and `unop_gpow` ([#9659](https://github.com/leanprover-community/mathlib/pull/#9659))

By populating the `npow` and `gpow` fields in the obvious way, `op_pow` and `unop_pow` are true definitionally.
This adds the new lemmas `op_gpow` and `unop_gpow` which works for `group`s and `division_ring`s too.

Note that we do not provide an explicit `div` in `div_inv_monoid`, because there is no "reversed division" operator to define it via.

This also reorders the lemmas so that the definitional lemmas are available before any proof obligations might appear in stronger typeclasses.

### [2021-10-12T08:59:38+00:00](https://github.com/leanprover-community/mathlib/commit/34ffb15497bba4b89091a47b883aad18e09bcae0)
feat(linear_algebra/affine_space/finite_dimensional): upgrade `affine_independent.affine_span_eq_top_of_card_eq_finrank_add_one` to an iff ([#9657](https://github.com/leanprover-community/mathlib/pull/#9657))

Also including some related, but strictly speaking independent, lemmas such as `affine_subspace.affine_span_eq_top_iff_vector_span_eq_top_of_nontrivial`.

Formalized as part of the Sphere Eversion project.

### [2021-10-12T08:16:55+00:00](https://github.com/leanprover-community/mathlib/commit/1023d81280bec87da1657a848a26c4c5be8078f3)
chore(ring_theory/tensor_product): squeeze simps in a slow proof ([#9671](https://github.com/leanprover-community/mathlib/pull/#9671))

This proof just timed out in bors. Goes from 21s to 1s on my computer just by squeezing the simps.

### [2021-10-12T06:20:54+00:00](https://github.com/leanprover-community/mathlib/commit/a132d0abb2bf445fd92920c853c8634f5184a97b)
chore(analysis): move some files to `analysis/normed/group` ([#9667](https://github.com/leanprover-community/mathlib/pull/#9667))

### [2021-10-12T01:53:33+00:00](https://github.com/leanprover-community/mathlib/commit/638dd0f8ce72be5aba46b8aad5ed0de105567e1c)
feat(data/dfinsupp, algebra/direct_sum/module): direct sum on fintype ([#9664](https://github.com/leanprover-community/mathlib/pull/#9664))

Analogues for `dfinsupp`/`direct_sum` of definitions/lemmas such as `finsupp.equiv_fun_on_fintype`:  a `dfinsupp`/`direct_sum` over a finite index set is canonically equivalent to `pi` over the same index set.

### [2021-10-11T22:34:26+00:00](https://github.com/leanprover-community/mathlib/commit/c2a30bef8e6547cdb2cb3348d5e8fc5fffc6af19)
feat(analysis/normed_space/normed_group_hom): add norm_noninc.neg ([#9658](https://github.com/leanprover-community/mathlib/pull/#9658))

From LTE.

### [2021-10-11T21:39:10+00:00](https://github.com/leanprover-community/mathlib/commit/df132fe662d4ed9729ab2843ca06fda1c15f205e)
feat(topology/path_connected): add `path.reparam` for reparametrising a path. ([#9643](https://github.com/leanprover-community/mathlib/pull/#9643))

I've also added `simps` to some of the definitions in this file.

### [2021-10-11T20:04:44+00:00](https://github.com/leanprover-community/mathlib/commit/136d0ce97bafcf34872cc0a2d28383b567edc24a)
feat(topology/homotopy/path): Add homotopy between paths ([#9141](https://github.com/leanprover-community/mathlib/pull/#9141))

There is also a lemma about `path.to_continuous_map` which I needed in a prior iteration of this PR that I missed in [#9133](https://github.com/leanprover-community/mathlib/pull/#9133)

### [2021-10-11T18:55:35+00:00](https://github.com/leanprover-community/mathlib/commit/6872dfb5be2d227f92436f76cc3fd6f0001d8e74)
feat(analysis/normed/group/basic): add norm_le_add_norm_add ([#9655](https://github.com/leanprover-community/mathlib/pull/#9655))

From LTE.

### [2021-10-11T15:29:09+00:00](https://github.com/leanprover-community/mathlib/commit/fa5d9d61ef3b994af77ede7c518d900f92eb7804)
feat(tactic/lint/misc): unused haves and suffices linters ([#9310](https://github.com/leanprover-community/mathlib/pull/#9310))

A linter for unused term mode have and suffices statements.
Based on initial work by @robertylewis https://leanprover.zulipchat.com/#narrow/stream/187764-Lean-for.20teaching/topic/linter.20for.20helping.20grading/near/209243601 but hopefully with less false positives now.

### [2021-10-11T07:59:25+00:00](https://github.com/leanprover-community/mathlib/commit/c2fde7017938c7c31d01cf14083774def7e0e018)
feat(number_theory/liouville): Liouville numbers form a dense Gδ set ([#9646](https://github.com/leanprover-community/mathlib/pull/#9646))

### [2021-10-11T07:59:24+00:00](https://github.com/leanprover-community/mathlib/commit/082aa832e6341353ecd090fe36f0a581a9f037b9)
feat(data/finset): add `finset.erase_none` ([#9630](https://github.com/leanprover-community/mathlib/pull/#9630))

* move `option.to_finset` and `finset.insert_none` to a new file `data.finset.option`; redefine the latter in terms of `finset.cons`;
* define `finset.erase_none`, prove lemmas about it;
* add `finset.prod_cons`, `finset.sum_cons`, `finset.coe_cons`, `finset.cons_subset_cons`, `finset.card_cons`;
* add `finset.subtype_mono` and `finset.bUnion_congr`;
* add `set.insert_subset_insert_iff`;
* add `@[simp]` to `finset.map_subset_map`;
* upgrade `finset.map_embedding` to an `order_embedding`;
* add `@[simps]` to `equiv.option_is_some_equiv` and `function.embedding.some`;
* golf some proofs.

### [2021-10-11T07:59:23+00:00](https://github.com/leanprover-community/mathlib/commit/1539ee18f65738c604d526bcd5e0ed49558013d4)
refactor(topology/sheaves/*): Make sheaf condition a Prop ([#9607](https://github.com/leanprover-community/mathlib/pull/#9607))

Make `sheaf_condition` into a `Prop` and redefine the type of sheaves on a topological space `X` as a subtype of `(opens X)ᵒᵖ ⥤ C`.

### [2021-10-11T07:59:22+00:00](https://github.com/leanprover-community/mathlib/commit/4a191ad9971b024f9236040b6d4949b9e039edca)
feat(algebra.algebra.subalgebra): add `subalgebra.gc_map_comap` ([#9435](https://github.com/leanprover-community/mathlib/pull/#9435))

Other changes:

* add `linear_map.coe_inl`/`linear_map.coe_inr` and move `@[simp]` from `inl_apply`/`inr_apply` to these lemmas;
* fix a typo in the name (`adjoint` → `adjoin`);
* drop `algebra.adjoin_inl_union_inr_le_prod `: we prove an equality anyway;
* add `alg_hom.map_adjoin` (same as `(adjoin_image _ _ _).symm`) to match `monoid_hom.map_closure` etc.

### [2021-10-11T06:17:12+00:00](https://github.com/leanprover-community/mathlib/commit/30cf8b77714cb5bec0afdb32d16807dba120e455)
feat(group_theory/subgroup/basic): apply_mem_map_injective ([#9637](https://github.com/leanprover-community/mathlib/pull/#9637))

A translation of `function.injective.mem_set_image`.

### [2021-10-11T06:17:11+00:00](https://github.com/leanprover-community/mathlib/commit/957f64ee71e3e2d1cdf054ec0867efa2b4be000e)
feat(algebra/floor): When the floor is strictly positive ([#9625](https://github.com/leanprover-community/mathlib/pull/#9625))

`⌊a⌋₊` and `⌊a⌋` are strictly positive iff `1 ≤ a`. We use this to slightly golf IMO 2013 P5.

### [2021-10-11T04:03:52+00:00](https://github.com/leanprover-community/mathlib/commit/bcd79a1fc18e81acba6170b0648b64edc8640e1b)
chore(analysis/normed/group/basic): rename vars ([#9652](https://github.com/leanprover-community/mathlib/pull/#9652))

* use `E`, `F` for (semi)normed groups and greek letters for other
  types;
* golf some proofs (`bounded_iff_forall_norm_le`, `norm_pos_iff'`);
* use `namespace lipschitz_with` and `namespace antilipschitz_with`
  instead of manual prefixes for all lemmas;
* generalize `antilipschitz_with.add_lipschitz_with` to
  `pseudo_emetric_space`;
* add `antilipschitz_with.edist_lt_top` and
  `antilipschitz_with.edist_ne_top`;
* fix a typo in `pseudo_emetric_space.to_pseudo_metric_space`.

### [2021-10-11T04:03:51+00:00](https://github.com/leanprover-community/mathlib/commit/11117ec5553acfa01a7f6f5478be46ba5c8d1c36)
feat(topology/G_delta): a finite set is a Gδ-set ([#9644](https://github.com/leanprover-community/mathlib/pull/#9644))

### [2021-10-11T04:03:50+00:00](https://github.com/leanprover-community/mathlib/commit/c02a6559afa98902e5fe9f90da5410325da6cf25)
feat(linear_algebra/affine_space/barycentric_coords): we can recover a point from its barycentric coordinates ([#9629](https://github.com/leanprover-community/mathlib/pull/#9629))

Formalized as part of the Sphere Eversion project.

### [2021-10-11T04:03:49+00:00](https://github.com/leanprover-community/mathlib/commit/0bd14ba92c5e402ce593f4d8ab64a7c0b018a7da)
feat(category_theory/limits/lattice): Add explicit formulas for limits in lattices ([#9608](https://github.com/leanprover-community/mathlib/pull/#9608))

Add explicit descriptions of finite limits and colimits in complete lattices. In particular, the product and the pullback is equal to the infimum, while coproduct and pushout is the supremum. Furthermore, `limit_iso_infi` can be strengthened to an equality, as preorder categories are skeletal.

### [2021-10-11T04:03:48+00:00](https://github.com/leanprover-community/mathlib/commit/c803c8de51af0853ddb054877f12d8f2e72137e4)
feat(algebra/gcd_monoid): trivial `gcd` on `comm_group_with_zero`s ([#9602](https://github.com/leanprover-community/mathlib/pull/#9602))

This PR extends the `normalization_monoid` defined on `comm_group_with_zero`s (e.g. fields) to a `normalized_gcd_monoid`. This is useful if you need to take the gcd of two polynomials in a field.

### [2021-10-11T04:03:47+00:00](https://github.com/leanprover-community/mathlib/commit/ec5835d9077485c3c20ce0d86f9f06237cc31bac)
chore(order/*): use to_dual and of_dual in statements instead of implicit coercions between and `α` and  `order_dual α`  ([#9593](https://github.com/leanprover-community/mathlib/pull/#9593))

Previously the meaning of the statement was hidden away in an invisible surprising typeclass argument.

Before this change, the docs suggested the nonsensical statement that `monotone f` implies `antitone f`!

![image](https://user-images.githubusercontent.com/425260/136348562-d3ecbb85-2a54-4c13-adda-806eb150b00a.png)

Most of the proof changes in this PR are a consequence of changing the interval lemmas, not the monotonicity or convexity ones.

### [2021-10-11T04:03:45+00:00](https://github.com/leanprover-community/mathlib/commit/ef46da8135fd1372bd18feea90f4061e743cf55a)
feat(category_theory/*): Curried yoneda lemma ([#9579](https://github.com/leanprover-community/mathlib/pull/#9579))

Provided curried versions of the Yoneda lemma when the category is small.



Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-10-11T02:26:38+00:00](https://github.com/leanprover-community/mathlib/commit/e32154d10a94b69e1b766dd50540c1db402b6f5b)
feat(data/equiv/ring): add basic API lemmas for ring_equiv ([#9639](https://github.com/leanprover-community/mathlib/pull/#9639))

This PR adds the lemmas `map_inv`, `map_div`, `map_pow` and `map_fpow` for `ring_equiv`. These lemmas were already available for `ring_hom`s. I'm very open to suggestions about where they should go; `map_fpow` in particular requires a new import in `algebra/field_power.lean`.

### [2021-10-10T21:07:28+00:00](https://github.com/leanprover-community/mathlib/commit/64255e25c8bf7644dce7db5c48e8f3404e0c4b17)
chore(analysis): move some code to `analysis.normed.group.basic` ([#9642](https://github.com/leanprover-community/mathlib/pull/#9642))

### [2021-10-10T21:07:27+00:00](https://github.com/leanprover-community/mathlib/commit/fa41436491603abf380a1c7ebfe884f5beb2cbac)
feat(algebra/*,group_theory/*): instances/lemmas about `is_scalar_tower` and `smul_comm_class` ([#9533](https://github.com/leanprover-community/mathlib/pull/#9533))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-10-10T18:58:39+00:00](https://github.com/leanprover-community/mathlib/commit/0bba837ee537d527c3b15560c68f1cc87a61e63a)
chore(data/nat/factorial): use `n + 1` instead of `n.succ` in `nat.factorial_succ` ([#9645](https://github.com/leanprover-community/mathlib/pull/#9645))

### [2021-10-10T09:54:18+00:00](https://github.com/leanprover-community/mathlib/commit/3d438bafa4267b7281d7b7ed5c1fb6ca9b073820)
feat(probability_theory/density): add continuous uniform distribution ([#9385](https://github.com/leanprover-community/mathlib/pull/#9385))

### [2021-10-09T16:48:06+00:00](https://github.com/leanprover-community/mathlib/commit/54a4c17abf29c170307586802a2a57c7479f944a)
feat(group_theory/sylow): `set_like` instance for `sylow` ([#9641](https://github.com/leanprover-community/mathlib/pull/#9641))

Adds a `set_like` instance for `sylow p G`.

Coauthored by @jcommelin



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-10-09T14:56:51+00:00](https://github.com/leanprover-community/mathlib/commit/bb9844477e6232ee428f2d03642ee199254e342f)
refactor(group_theory/congruence): remove old_structure_cmd ([#9622](https://github.com/leanprover-community/mathlib/pull/#9622))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-09T09:53:15+00:00](https://github.com/leanprover-community/mathlib/commit/7ed091df64ed860ef66b1b07863d92c3c233766b)
feat(group_theory/perm/concrete_cycle): computable cyclic perm notation ([#9470](https://github.com/leanprover-community/mathlib/pull/#9470))

### [2021-10-09T07:26:30+00:00](https://github.com/leanprover-community/mathlib/commit/ce50450dc8958c8e31706358ac6d479e1af2c3ec)
chore(analysis/normed_space/linear_isometry): adjust `isometry` API ([#9635](https://github.com/leanprover-community/mathlib/pull/#9635))

Now that we have the `linear_isometry` definition, it is better to pass through this definition rather then using a `linear_map` satisfying the `isometry` hypothesis.  To this end, convert old lemma `linear_map.norm_apply_of_isometry` to a new definition `linear_map.to_linear_isometry`, and delete old definition `continuous_linear_equiv.of_isometry`, whose use should be replaced by the pair of definitions`linear_map.to_linear_isometry`, `linear_isometry_equiv.of_surjective`.

### [2021-10-09T07:26:28+00:00](https://github.com/leanprover-community/mathlib/commit/a9643aa8118798d5a31b3e80aefa9d7e2531eaf4)
feat(order/min_max): min_cases and max_cases lemmata ([#9632](https://github.com/leanprover-community/mathlib/pull/#9632))

These lemmata make the following type of argument work seamlessly:

```lean
example (h1 : 0 ≤ x) (h2 : x ≤ 1) : min 1 x ≤ max x 0 := by cases min_cases 1 x; cases max_cases x 0; linarith
```

See similar PR [#8124](https://github.com/leanprover-community/mathlib/pull/#8124)

### [2021-10-09T07:26:25+00:00](https://github.com/leanprover-community/mathlib/commit/e0f80e7876cddb4973e61c2f01fe097aa1e7552f)
feat(analysis/convex/quasiconvex): Quasiconvexity of functions ([#9561](https://github.com/leanprover-community/mathlib/pull/#9561))

A function is quasiconvex iff all its sublevels are convex. This generalizes unimodality to non-ordered spaces.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-10-09T04:58:07+00:00](https://github.com/leanprover-community/mathlib/commit/7a7fadafbcb9d03d3a6fa899e97769cbd5d6bb22)
refactor(data/nat/basic): finish removing sub lemmas ([#9601](https://github.com/leanprover-community/mathlib/pull/#9601))

* Follow-up of [#9544](https://github.com/leanprover-community/mathlib/pull/#9544) to remove the remaining sub lemmas on `nat` that can be generalized to `has_ordered_sub`.
* The renamings of the lemmas in mathlib that occurred at least once:
```
nat.sub_eq_of_eq_add -> sub_eq_of_eq_add_rev
nat.add_sub_sub_cancel -> add_sub_sub_cancel'
nat.sub_le_self -> sub_le_self'
```

### [2021-10-09T02:44:04+00:00](https://github.com/leanprover-community/mathlib/commit/7aaa1b4351133b8596b4aad752f5506b6a52ddba)
chore(scripts): update nolints.txt ([#9636](https://github.com/leanprover-community/mathlib/pull/#9636))

I am happy to remove some nolints for you!

### [2021-10-08T21:56:11+00:00](https://github.com/leanprover-community/mathlib/commit/7e3fa4c114f6f12380cf3b181fd4bd03a2f05b79)
chore(*): fix typos ([#9634](https://github.com/leanprover-community/mathlib/pull/#9634))

### [2021-10-08T21:06:41+00:00](https://github.com/leanprover-community/mathlib/commit/70a9540d4e0dc56a0d915276ebd5f378b755d64f)
refactor(group_theory/monoid_localization) remove old_structure_cmd ([#9621](https://github.com/leanprover-community/mathlib/pull/#9621))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-08T20:24:14+00:00](https://github.com/leanprover-community/mathlib/commit/c37e3e7943d4acfbee3cb0068f49a215a32e1bfd)
refactor(field_theory/intermediate_field): remove old_structure_cmd ([#9620](https://github.com/leanprover-community/mathlib/pull/#9620))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-08T20:24:12+00:00](https://github.com/leanprover-community/mathlib/commit/b39feab3cb3a1c82a11ed5f85d2e74172870f383)
refactor(algebra/lie): reduce use of old_structure_cmd ([#9616](https://github.com/leanprover-community/mathlib/pull/#9616))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-08T17:52:23+00:00](https://github.com/leanprover-community/mathlib/commit/91ee8f1d2c6737d9c0d72f32b30bdf64eee89606)
chore(data/equiv/ring): add big operator lemmas for ring equivs ([#9628](https://github.com/leanprover-community/mathlib/pull/#9628))

This PR adds lemmas involving big operators (such as `map_sum`, `map_prod`, etc) for `ring_equiv`s.

### [2021-10-08T16:13:52+00:00](https://github.com/leanprover-community/mathlib/commit/57cd1e9ef3753094b9c8a0b2a2ecaca23ed464dd)
feat(analysis/normed_space/exponential): remove char_p assumption ([#9618](https://github.com/leanprover-community/mathlib/pull/#9618))

Remove the `char_p` assumption from `exp_series_eq_exp_series_of_field_extension` as suggested by @urkud here : https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Undergraduate.20math.20list/near/256679511

### [2021-10-08T14:22:17+00:00](https://github.com/leanprover-community/mathlib/commit/5fd36643983269b926b5cb324bc72d8ee0eb35c5)
feat(algebra/graded_monoid): Split out graded monoids from graded rings ([#9586](https://github.com/leanprover-community/mathlib/pull/#9586))

This cleans up the `direct_sum.gmonoid` typeclass to not contain a bundled morphism, which allows it to be used to describe graded monoids too, via the alias for `sigma` `graded_monoid`. Essentially, this:

* Renames:
  * `direct_sum.ghas_one` to `graded_monoid.has_one`
  * `direct_sum.ghas_mul` to `direct_sum.gnon_unital_non_assoc_semiring`
  * `direct_sum.gmonoid` to `direct_sum.gsemiring`
  * `direct_sum.gcomm_monoid` to `direct_sum.gcomm_semiring`
* Introduces new typeclasses which represent what the previous names should have been:
  * `graded_monoid.ghas_mul`
  * `graded_monoid.gmonoid`
  * `graded_monoid.gcomm_monoid` 

This doesn't do as much deduplication as I'd like, but it at least manages some.
There's not much in the way of new definitions here either, and most of the names are just copied from the graded ring case.

### [2021-10-08T14:22:16+00:00](https://github.com/leanprover-community/mathlib/commit/745cbfc611cd1f21f2b12f4180e602faa1f08bf2)
feat(data/polynomial): %ₘ as a linear map  ([#9532](https://github.com/leanprover-community/mathlib/pull/#9532))

This PR bundles `(%ₘ) = polynomial.mod_by_monic` into a linear map. In a follow-up PR, I'll show this map descends to a linear map `adjoin_root q → polynomial R`, thereby (computably) assigning coefficients to each element in `adjoin_root q`.

### [2021-10-08T12:12:57+00:00](https://github.com/leanprover-community/mathlib/commit/99c3e22395ab67d23634b546548be35e5e1f3977)
refactor(geometry/manifold): remove old_structure_cmd ([#9617](https://github.com/leanprover-community/mathlib/pull/#9617))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-08T12:12:56+00:00](https://github.com/leanprover-community/mathlib/commit/c107549d9c86165ab67f134e09b5771a12859777)
refactor(ring_theory/valuation): remove unnecessary old_structure_cmd ([#9615](https://github.com/leanprover-community/mathlib/pull/#9615))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-08T12:12:55+00:00](https://github.com/leanprover-community/mathlib/commit/7bdd10e2eb04927c529fa20d0acff6d570c0e37b)
refactor(order/category): remove old_structure_cmd ([#9614](https://github.com/leanprover-community/mathlib/pull/#9614))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-08T12:12:54+00:00](https://github.com/leanprover-community/mathlib/commit/af09d3ffe85e02b2d60de599c6fbcf9602df9ca6)
refactor(algebra/absolute_value): remove unnecessary old_structure_cmd ([#9613](https://github.com/leanprover-community/mathlib/pull/#9613))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-08T12:12:52+00:00](https://github.com/leanprover-community/mathlib/commit/25a45ab758b47fcce20881434bd6d8f42d0b54ca)
refactor(order/omega_complete_partial_order): remove old_structure_cmd ([#9612](https://github.com/leanprover-community/mathlib/pull/#9612))

Removing a use of `old_structure_cmd`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-08T12:12:51+00:00](https://github.com/leanprover-community/mathlib/commit/cea97d9ad27979caf6f2f686ace1ae20667acc73)
feat(*): add not_mem_of_not_mem_closure for anything with subset_closure ([#9595](https://github.com/leanprover-community/mathlib/pull/#9595))

This is a goal I would expect library search to finish if I have something not in a closure and I want it not in the base set.

### [2021-10-08T10:04:44+00:00](https://github.com/leanprover-community/mathlib/commit/6c9eee4b290f7e7d9f1150490340544fa0a56582)
refactor(data/finsupp/basic): remove sub lemmas ([#9603](https://github.com/leanprover-community/mathlib/pull/#9603))

* Remove the finsupp sub lemmas that are special cases of lemmas in `algebra/order/sub`, namely:
  * `finsupp.nat_zero_sub`
  * `finsupp.nat_sub_self`
  * `finsupp.nat_add_sub_of_le`
  * `finsupp.nat_sub_add_cancel`
  * `finsupp.nat_add_sub_cancel`
  * `finsupp.nat_add_sub_cancel_left`
  * `finsupp.nat_add_sub_assoc`
* Rename the remaining lemmas to use `tsub`:
  * `finsupp.coe_nat_sub` → `finsupp.coe_tsub`
  * `finsupp.nat_sub_apply` → `finsupp.tsub_apply`

  Lemmas in `algebra/order/sub` will soon also use `tsub` (see [Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mul_lt_mul''''))

### [2021-10-08T10:04:43+00:00](https://github.com/leanprover-community/mathlib/commit/34145b7f1756dd1614600a55df310188f7518217)
feat(group_theory/subgroup/basic): a new to_additive lemma, and remove a by hand proof ([#9594](https://github.com/leanprover-community/mathlib/pull/#9594))

I needed `add_subgroup.smul_mem` which didn't seem to exist, and noticed that the `add_subgroup.gsmul_mem` version is proved by hand while to_additive generates it fine (now?)

### [2021-10-08T10:04:41+00:00](https://github.com/leanprover-community/mathlib/commit/d5146f4e97869b24216687f48259f1bc10d8033e)
feat(ring_theory): `adjoin_root g ≃ S` if `S` has a power basis with the right minpoly ([#9529](https://github.com/leanprover-community/mathlib/pull/#9529))

This is basically `power_basis.equiv'` with slightly different hypotheses, specialised to `adjoin_root`. It guarantees that even over non-fields, a monogenic extension of `R` can be given by the polynomials over `R` modulo the relevant minimal polynomial.

### [2021-10-08T10:04:40+00:00](https://github.com/leanprover-community/mathlib/commit/82e2b98ae54cf6189134ef8e99ab3389b42abdd8)
feat(ring_theory): generalize `power_basis.equiv` ([#9528](https://github.com/leanprover-community/mathlib/pull/#9528))

`power_basis.equiv'` is an alternate formulation of `power_basis.equiv` that is somewhat more general when not over a field: instead of requiring the minimal polynomials are equal, we only require the generators are the roots of each other's minimal polynomials.

This is not quite enough to show `adjoin_root (minpoly R (pb : power_basis R S).gen)` is isomorphic to `S`, since `minpoly R (adjoin_root.root g)` is not guaranteed to have the same exact roots as `g` itself. So in a follow-up PR I will strengthen `power_basis.equiv'` to `adjoin_root.equiv'` that requires the correct hypothesis.

### [2021-10-08T10:04:39+00:00](https://github.com/leanprover-community/mathlib/commit/179a495259ec2fe6c450b54602e82f012a830171)
feat(algebra/star/algebra): generalize to modules ([#9484](https://github.com/leanprover-community/mathlib/pull/#9484))

This means there is now a `star_module ℂ (ι → ℂ)` instance available.

This adds `star_add_monoid`, and renames `star_algebra` to `star_module` with significantly relaxed typeclass arguments.

This also uses `export` to cut away some unnecessary definitions, and adds the missing `pi.star_def` to match `pi.add_def` etc.

### [2021-10-08T07:33:10+00:00](https://github.com/leanprover-community/mathlib/commit/9ecdd3802ea1dc002e6a0e46b7dd2c12608c4c80)
chore(algebra/order/sub): generalize 2 lemmas ([#9611](https://github.com/leanprover-community/mathlib/pull/#9611))

* generalize `lt_sub_iff_left` and `lt_sub_iff_right`;
* use general lemmas in `data.real.ennreal`.

### [2021-10-08T07:33:09+00:00](https://github.com/leanprover-community/mathlib/commit/639a7ef4883a735ccf54b31c6a61143b9f60f71c)
feat(algebra/order/ring): variants of mul_sub' ([#9604](https://github.com/leanprover-community/mathlib/pull/#9604))

Add some variants of `mul_sub'` and `sub_mul'` and use them in `ennreal`. (Also sneaking in a tiny stylistic change in `topology/ennreal`.)

### [2021-10-08T07:33:08+00:00](https://github.com/leanprover-community/mathlib/commit/83a07ce09851abf256e121d530aaa73d371ece5d)
feat(data/nat/log): add antitonicity lemmas for first argument ([#9597](https://github.com/leanprover-community/mathlib/pull/#9597))

`log` and `clog` are only antitone on bases >1, so we include this as an
assumption in `log_le_log_of_left_ge` (resp. `clog_le_...`) and as a
domain restriction in `log_left_gt_one_anti` (resp. `clog_left_...`).

### [2021-10-08T07:33:06+00:00](https://github.com/leanprover-community/mathlib/commit/41dd4da38da03ada25e40312f4fd8dbaca0476fc)
feat(data/multiset/interval): Intervals as `multiset`s ([#9588](https://github.com/leanprover-community/mathlib/pull/#9588))

This provides API for `multiset.Ixx` (except `multiset.Ico`).

### [2021-10-08T07:33:05+00:00](https://github.com/leanprover-community/mathlib/commit/c3768cc8031b41283e180544e8cae2cceacd5430)
refactor(data/multiset/basic): remove sub lemmas ([#9578](https://github.com/leanprover-community/mathlib/pull/#9578))

* Remove the multiset sub lemmas that are special cases of lemmas in `algebra/order/sub`
* [This](https://github.com/leanprover-community/mathlib/blob/14c3324143beef6e538f63da9c48d45f4a949604/src/data/multiset/basic.lean#L1513-L1538) gives the list of renamings.
* Use `derive` in `pnat.factors`.



Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-10-08T07:33:03+00:00](https://github.com/leanprover-community/mathlib/commit/c4006779da259094401eecf50565cb38dd3a1e8b)
feat(algebra/module/basic): `module rat E` is a subsingleton ([#9570](https://github.com/leanprover-community/mathlib/pull/#9570))

* allow different (semi)rings in `add_monoid_hom.map_int_cast_smul` and `add_monoid_hom.map_nat_cast_smul`;
* add `add_monoid_hom.map_inv_int_cast_smul` and `add_monoid_hom.map_inv_nat_cast_smul`;
* allow different division rings in `add_monoid_hom.map_rat_cast_smul`, drop `char_zero` assumption;
* prove `subsingleton (module rat M)`;
* add a few convenience lemmas.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-10-08T07:33:02+00:00](https://github.com/leanprover-community/mathlib/commit/eb3595ed8610db8107b75b75ab64ab6390684155)
move(order/*): move from `algebra.order.` the files that aren't about algebra ([#9562](https://github.com/leanprover-community/mathlib/pull/#9562))

`algebra.order.basic` and `algebra.order.functions` never mention `+`, `-` or `*`. Thus they belong under `order`.

### [2021-10-08T07:33:00+00:00](https://github.com/leanprover-community/mathlib/commit/8aa1893849b999c8ac8c4a91c83c2e2760555abe)
feat(group_theory/subgroup/basic): Analog of `mul_aut.conj` for normal subgroups. ([#9552](https://github.com/leanprover-community/mathlib/pull/#9552))

Analog of `mul_aut.conj` for normal subgroups (pretty much just copying the code from `data/equiv/mul_add_aut.lean`).



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-10-08T07:32:59+00:00](https://github.com/leanprover-community/mathlib/commit/1390b44760f9944be28c274ce2af1f15daadd2d1)
feat(analysis/convex/function): API for strict convex functions ([#9437](https://github.com/leanprover-community/mathlib/pull/#9437))

This provides all the basic API for `strict_convex_on` and `strict_concave_on`.

### [2021-10-08T07:32:58+00:00](https://github.com/leanprover-community/mathlib/commit/a0504eb3fce81959883a9b8c545228a8633cd1cb)
refactor(data/*/interval): generalize `finset.Ico` to locally finite orders ([#7987](https://github.com/leanprover-community/mathlib/pull/#7987))

`finset.Ico` currently goes `ℕ → ℕ → finset ℕ`. This generalizes it to `α → α → finset α` where `locally_finite_order α`.
This also ports all the existing `finset.Ico` lemmas to the new API, which involves renaming and moving them to `data.finset.interval` or `data.nat.interval` depending on whether I could generalize them away from `ℕ` or not.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-10-08T06:08:46+00:00](https://github.com/leanprover-community/mathlib/commit/ba2454e6560bb9ac204e6e37b32dc5fb25988238)
feat(ring_theory/coprime): two lemmas prereq for [#8611](https://github.com/leanprover-community/mathlib/pull/#8611) ([#9456](https://github.com/leanprover-community/mathlib/pull/#9456))

Two variants of the fact that `¬ is_coprime 0 0`.

### [2021-10-08T02:40:18+00:00](https://github.com/leanprover-community/mathlib/commit/235bfd7ec08a53523ce3be9682499f45bf106c01)
chore(scripts): update nolints.txt ([#9610](https://github.com/leanprover-community/mathlib/pull/#9610))

I am happy to remove some nolints for you!

### [2021-10-08T01:32:09+00:00](https://github.com/leanprover-community/mathlib/commit/9ea4568bb06bf8529d887a3e1897ce5fd6b06cea)
fix(topology/path_connected): add `continuity` to `path.continuous_extend` ([#9605](https://github.com/leanprover-community/mathlib/pull/#9605))

### [2021-10-08T00:30:16+00:00](https://github.com/leanprover-community/mathlib/commit/fa3b6222c35ab080622f0ed6e55b0ab9eadeb01e)
refactor(analysis/normed_space/linear_isometry): semilinear isometries ([#9551](https://github.com/leanprover-community/mathlib/pull/#9551))

Generalize the theory of linear isometries to the semilinear setting.

Co-authored-by: Frédéric Dupuis <dupuisf@iro.umontreal.ca>



Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2021-10-07T21:23:16+00:00](https://github.com/leanprover-community/mathlib/commit/9518ce12faf7c1aa9dd04540f28c767d0680ab75)
feat(topology/algebra): valued fields ([#9589](https://github.com/leanprover-community/mathlib/pull/#9589))

This is a modernized version of code from the perfectoid spaces project.

### [2021-10-07T19:09:56+00:00](https://github.com/leanprover-community/mathlib/commit/ebccce9b5c8ecfd130dfce88457a3f25e137bf49)
feat(measure_theory/covering/besicovitch): the measurable Besicovitch covering theorem ([#9576](https://github.com/leanprover-community/mathlib/pull/#9576))

The measurable Besicovitch theorem ensures that, in nice metric spaces, if at every point one considers a class of balls of arbitrarily small radii, called admissible balls, then one can cover almost all the space by a family of disjoint admissible balls. It is deduced from the topological Besicovitch theorem.

### [2021-10-07T15:09:34+00:00](https://github.com/leanprover-community/mathlib/commit/8a60fd756e91b370d1538d3232e3208c1729a0c5)
refactor(data/ennreal/basic): prove has_ordered_sub instance ([#9582](https://github.com/leanprover-community/mathlib/pull/#9582))

* Give `has_sub` and `has_ordered_sub` instances on `with_top α`.
* This gives a new subtraction on `ennreal`. The lemma `ennreal.sub_eq_Inf` proves that it is equal to the old value.
* Simplify many proofs about `sub` on `ennreal` 
* Proofs that are instantiations of more general lemmas will be removed in a subsequent PR
* Many lemmas that require `add_le_cancellable` in general are reformulated using `≠ ∞`
* Lemmas are reordered, but no lemmas are renamed, removed, or have a different type. Some `@[simp]` tags are removed if a more general simp lemma applies.
* Minor: generalize `preorder` to `has_le` in `has_ordered_sub` (not necessary for this PR, but useful in another (abandoned) branch).

### [2021-10-07T13:09:23+00:00](https://github.com/leanprover-community/mathlib/commit/bf76a1f29219174812c38f4ffe482cd528c10285)
feat(algebra/order/with_zero): add lt_of_mul_lt_mul_of_le₀ and mul_lt_mul_of_lt_of_le₀ ([#9596](https://github.com/leanprover-community/mathlib/pull/#9596))

### [2021-10-07T11:57:08+00:00](https://github.com/leanprover-community/mathlib/commit/18a42f3ff9462ddcf52765ae2b12ec8a56ba9389)
feat(src/category_theory/*): Yoneda preserves limits. ([#9580](https://github.com/leanprover-community/mathlib/pull/#9580))

Shows that `yoneda` and `coyoneda` preserves and reflects limits.



Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-10-07T06:55:11+00:00](https://github.com/leanprover-community/mathlib/commit/f87478329d165cbd45631d806d5ae3ff061909a7)
feat(data/multiset/erase_dup): Alias for `multiset.erase_dup_eq_self` ([#9587](https://github.com/leanprover-community/mathlib/pull/#9587))

The new `multiset.nodup.erase_dup` allows dot notation.

### [2021-10-07T06:55:10+00:00](https://github.com/leanprover-community/mathlib/commit/cc46f314d01dca89fcb7d1c987f574fbb8283abe)
feat(analysis/normed_space/add_torsor_bases): the interior of the convex hull of a finite affine basis is the set of points with strictly positive barycentric coordinates ([#9583](https://github.com/leanprover-community/mathlib/pull/#9583))

Formalized as part of the Sphere Eversion project.

### [2021-10-07T06:14:33+00:00](https://github.com/leanprover-community/mathlib/commit/a7784aad277ee6963c7559d8c9972eb90efaf78c)
feat(category_theory/*): Yoneda extension is Kan ([#9574](https://github.com/leanprover-community/mathlib/pull/#9574))

- Proved that `(F.elements)ᵒᵖ ≌ costructured_arrow yoneda F`.
- Verified that the yoneda extension is indeed the left Kan extension along the yoneda embedding.

### [2021-10-07T06:14:32+00:00](https://github.com/leanprover-community/mathlib/commit/b9097f114a7d5ddfc7bd27f1ca7b03c8247169e9)
feat(analysis/asymptotics): Define superpolynomial decay of a function ([#9440](https://github.com/leanprover-community/mathlib/pull/#9440))

Define superpolynomial decay of functions in terms of asymptotics.is_O.

### [2021-10-07T04:15:17+00:00](https://github.com/leanprover-community/mathlib/commit/0bc7c2d56b73475624ea3e02c80def237ee83136)
fix(algebra/group/{prod,pi}): fix non-defeq `has_scalar` diamonds ([#9584](https://github.com/leanprover-community/mathlib/pull/#9584))

This fixes diamonds in the following instances for nat- and int- actions:

* `has_scalar ℕ (α × β)`
* `has_scalar ℤ (α × β)`
* `has_scalar ℤ (Π a, β a)`

The last one revealed a diamond caused by inconsistent use of `pi_instance_derive_field`:
```lean
-- fails before this change
example [Π a, group $ β a] : group.to_div_inv_monoid (Π a, β a) = pi.div_inv_monoid := rfl
```

### [2021-10-07T04:15:16+00:00](https://github.com/leanprover-community/mathlib/commit/cb3c8448bcb1c69280a0631b414709d74935c72a)
feat(category_theory/limits/*): Filtered colimits preserves finite limits ([#9522](https://github.com/leanprover-community/mathlib/pull/#9522))

Restated `category_theory.limits.colimit_limit_to_limit_colimit_is_iso` in terms of limit preserving.

### [2021-10-07T02:14:30+00:00](https://github.com/leanprover-community/mathlib/commit/7a2696d0c2ea5fa1d3d86bd43da86079512f3452)
feat(category_theory/limits/preserves/*): Show that whiskering left preserves limits. ([#9581](https://github.com/leanprover-community/mathlib/pull/#9581))

### [2021-10-07T02:14:29+00:00](https://github.com/leanprover-community/mathlib/commit/f37aeb0056b6b69e60b82d359f2a1e8aaa4e246e)
refactor(algebra/gcd_monoid): drop nontriviality assumptions  ([#9568](https://github.com/leanprover-community/mathlib/pull/#9568))

### [2021-10-06T21:14:59+00:00](https://github.com/leanprover-community/mathlib/commit/f63786b9daf8ecb2dbe5378e2d4ee4b1ea54d4db)
refactor(data/finsupp/basic): has_ordered_sub on finsupp ([#9577](https://github.com/leanprover-community/mathlib/pull/#9577))

* Generalize `has_sub` and `canonically_ordered_add_monoid` instances for any finsupp with codomain a `canonically_ordered_add_monoid` & `has_ordered_sub`.
* Provide `has_ordered_sub` instance in the same situation
* Generalize lemmas about `nat` to this situation.
* Prove some lemmas as special cases of `has_ordered_sub` lemmas. These will be removed in a subsequent PR.
* Simplify some lemmas about `α →₀ ℕ` using `has_ordered_sub` lemmas.
* Prove `nat.one_le_iff_ne_zero` (it's the second time I want to use it this week)



Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-10-06T21:14:58+00:00](https://github.com/leanprover-community/mathlib/commit/b4a976759b260928ffe30bc724dad3b37e60adc4)
feat(data/multiset/basic): has_ordered_sub multiset ([#9566](https://github.com/leanprover-community/mathlib/pull/#9566))

* Provide `instance : has_ordered_sub (multiset α)`
* Prove most multiset subtraction lemmas as special cases of `has_ordered_sub` lemmas
* In a subsequent PR I will remove the specialized multiset lemmas



Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-10-06T21:14:56+00:00](https://github.com/leanprover-community/mathlib/commit/845d064af2ac892883c7701da38eb774995348d2)
feat(algebra/big_operators/finprod): add finprod.mem_dvd ([#9549](https://github.com/leanprover-community/mathlib/pull/#9549))




Co-authored-by: María Inés de Frutos-Fernández <88536493+mariainesdff@users.noreply.github.com>

### [2021-10-06T19:23:08+00:00](https://github.com/leanprover-community/mathlib/commit/b2ae19565159d2bec53aef46070e9577d2255b2c)
move(data/fin/*): group `fin` files under a `fin` folder ([#9524](https://github.com/leanprover-community/mathlib/pull/#9524))




Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2021-10-06T18:27:53+00:00](https://github.com/leanprover-community/mathlib/commit/5c3cdd2188152a0860cacea6d3121b18093d3966)
feat(analysis/normed_space/add_torsor_bases): barycentric coordinates are open maps (in finite dimensions over a complete field) ([#9543](https://github.com/leanprover-community/mathlib/pull/#9543))

Using the open mapping theorem with a one-dimensional codomain feels a bit ridiculous but I see no reason not to do so.

Formalized as part of the Sphere Eversion project.

### [2021-10-06T17:48:50+00:00](https://github.com/leanprover-community/mathlib/commit/a7b4e7824b3a427e21c45fb367d91b7d5b6040dc)
fix(computability/DFA): tighten regular pumping lemma to match standard textbooks ([#9585](https://github.com/leanprover-community/mathlib/pull/#9585))

This PR slightly tightens the regular pumping lemma: the current version applies only to words that are of length at least the number of states in the DFA plus one. Here we remove the plus one.

### [2021-10-06T15:46:06+00:00](https://github.com/leanprover-community/mathlib/commit/bcd13a775503aa6f5b5235b8d247516bba317593)
refactor(data/equiv): split out `./set` from `./basic` ([#9560](https://github.com/leanprover-community/mathlib/pull/#9560))

This move all the equivalences between sets-coerced-to-types to a new file, which makes `equiv/basic` a slightly more manageable size.

The only non-move change in this PR is the rewriting of `equiv.of_bijective` to not go via `equiv.of_injective`, as we already have all the fields available directly and this allows the latter to move to a separate file.

This will allow us to import `order_dual.lean` earlier, as we no longer have to define boolean algebras before equivalences are available.

This relates to [#4758](https://github.com/leanprover-community/mathlib/pull/#4758).

### [2021-10-06T15:46:04+00:00](https://github.com/leanprover-community/mathlib/commit/0b356b00d3365e31feb44cfee083b80a50f659cb)
feat(analysis/normed_space/banach): open mapping theorem for maps between affine spaces ([#9540](https://github.com/leanprover-community/mathlib/pull/#9540))

Formalized as part of the Sphere Eversion project.

### [2021-10-06T15:46:03+00:00](https://github.com/leanprover-community/mathlib/commit/5773bc637bf8e8b30e2d7fd71ed2b1ef5dba9f1f)
feat(group_theory/group_action/conj_act): conjugation action of groups ([#8627](https://github.com/leanprover-community/mathlib/pull/#8627))




Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-10-06T14:53:28+00:00](https://github.com/leanprover-community/mathlib/commit/6abd6f2d7f9f7dd00ed31f6d7caf52cb4bb2a792)
chore(ring_theory/witt_vector): fix a docstring ([#9575](https://github.com/leanprover-community/mathlib/pull/#9575))

### [2021-10-06T13:44:03+00:00](https://github.com/leanprover-community/mathlib/commit/850d5d28f44f3aee52464c778264ad764e7c893b)
feat(analysis/convex/function): Dual lemmas ([#9571](https://github.com/leanprover-community/mathlib/pull/#9571))

### [2021-10-06T10:12:02+00:00](https://github.com/leanprover-community/mathlib/commit/8c6578187943746fb40950e08a8e9a3ed9a3b79e)
refactor(data/nat/basic): remove sub lemmas ([#9544](https://github.com/leanprover-community/mathlib/pull/#9544))

* Remove the nat sub lemmas that are special cases of lemmas in `algebra/order/sub`
* This PR does 90% of the work, some lemmas require a bit more work (which will be done in a future PR)
* Protect `ordinal.add_sub_cancel_of_le`
* Most fixes in other files were abuses of the definitional equality of `n < m` and `nat.succ n \le m`.
* [This](https://github.com/leanprover-community/mathlib/blob/7a5d15a955a92a90e1d398b2281916b9c41270b2/src/data/nat/basic.lean#L498-L611) gives the list of renamings.
* The regex to find 90+% of the occurrences of removed lemmas. Some lemmas were not protected, so might not be found this way.
```
nat.(le_sub_add|add_sub_cancel'|sub_add_sub_cancel|sub_cancel|sub_sub_sub_cancel_right|sub_add_eq_add_sub|sub_sub_assoc|lt_of_sub_pos|lt_of_sub_lt_sub_right|lt_of_sub_lt_sub_left|sub_lt_self|le_sub_right_of_add_le|le_sub_left_of_add_le|lt_sub_right_of_add_lt|lt_sub_left_of_add_lt|add_lt_of_lt_sub_right|add_lt_of_lt_sub_left|le_add_of_sub_le_right|le_add_of_sub_le_left|lt_add_of_sub_lt_right|lt_add_of_sub_lt_left|sub_le_left_of_le_add|sub_le_right_of_le_add|sub_lt_left_iff_lt_add|le_sub_left_iff_add_le|le_sub_right_iff_add_le|lt_sub_left_iff_add_lt|lt_sub_right_iff_add_lt|sub_lt_right_iff_lt_add|sub_le_sub_left_iff|sub_lt_sub_right_iff|sub_lt_sub_left_iff|sub_le_iff|sub_lt_iff)[^_]
```



Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-10-06T10:12:00+00:00](https://github.com/leanprover-community/mathlib/commit/facc1d2dd68ca20b35df2c3a3285bad5bbc50024)
feat(topology/algebra): topology on a linear_ordered_comm_group_with_zero ([#9537](https://github.com/leanprover-community/mathlib/pull/#9537))

This is a modernized version of code from the perfectoid spaces project.

### [2021-10-06T08:03:57+00:00](https://github.com/leanprover-community/mathlib/commit/b534feda641e3067f3c13c03cb41e43688d6aae8)
refactor(analysis/{normed_space, inner_product_space}/dual): redefine using `linear_isometry` ([#9569](https://github.com/leanprover-community/mathlib/pull/#9569))

Linear isometric embeddings appear naturally when studying the duals of normed spaces:  the map `λ y, ⟪x, y⟫` from an inner product space to its dual is a linear isometric embedding++, and so is the canonical map from a normed space to its double dual**.

When these natural maps were defined last year, we didn't have the definition `linear_isometry` (notation: `X →ₗᵢ[R] Y`), so they were defined as continuous linear maps which satisfied the predicate `isometry`, and several lemmas were proven ad-hoc which are now available as general lemmas about  `linear_isometry`.

This PR refactors to use the `linear_isometry` structure.  Lemmas deleted (I have been enthusiastic here, and can scale back if desired ...):
normed_space.inclusion_in_double_dual_isometry
inner_product_space.to_dual_map_isometry
inner_product_space.to_dual_map_injective
inner_product_space.ker_to_dual_map
inner_product_space.to_dual_map_eq_iff_eq 
inner_product_space.range_to_dual_map
inner_product_space.isometric.to_dual
inner_product_space.to_dual_eq_iff_eq
inner_product_space.to_dual_eq_iff_eq'
inner_product_space.norm_to_dual_apply
inner_product_space.norm_to_dual_symm_apply

++ (over `ℝ` -- over `ℂ` it's conjugate-linear, which will be dealt with in future PRs)
** over `ℝ` or `ℂ`

### [2021-10-06T08:03:56+00:00](https://github.com/leanprover-community/mathlib/commit/e52e533862990d5474fe21b6db4711f9443b02f5)
feat(order/bounds): Antitone lemmas ([#9556](https://github.com/leanprover-community/mathlib/pull/#9556))

### [2021-10-06T06:05:04+00:00](https://github.com/leanprover-community/mathlib/commit/f811910bf7f26d171186fbdb665408f8dfe12444)
feat(linear_algebra/affine_space/barycentric_coords): barycentric coordinates are 1 in zero dimensions ([#9564](https://github.com/leanprover-community/mathlib/pull/#9564))

### [2021-10-06T01:36:04+00:00](https://github.com/leanprover-community/mathlib/commit/db5ee76064e05013ff36ac4959aca26fd430546b)
chore(linear_algebra/quadratic_form): squeeze simps ([#9572](https://github.com/leanprover-community/mathlib/pull/#9572))

[#9567](https://github.com/leanprover-community/mathlib/pull/#9567) speeds up the slowest declaration in the file, but many other declarations are also slow.
This PR squeezes all simps.

### [2021-10-05T21:57:44+00:00](https://github.com/leanprover-community/mathlib/commit/fdf8a71ff0ce4d6270a9cf79f160f658ea4a3e23)
feat(topology/bases): a family of nonempty disjoint open sets is countable in a separable space ([#9557](https://github.com/leanprover-community/mathlib/pull/#9557))

Together with unrelated small lemmas on balls and on `pairwise_on`.

### [2021-10-05T21:57:43+00:00](https://github.com/leanprover-community/mathlib/commit/815eaca0d2681a2ee528fb7526b17d9830c553f0)
feat(analysis/normed_space/affine_isometry): affine maps are open iff their underlying linear maps are ([#9538](https://github.com/leanprover-community/mathlib/pull/#9538))

Formalized as part of the Sphere Eversion project.

### [2021-10-05T19:53:22+00:00](https://github.com/leanprover-community/mathlib/commit/63903f27123604c77b4ce1aa6b3dd10841f6237c)
doc(linear_algebra/free_module/strong_rank_condition): correct a typo ([#9565](https://github.com/leanprover-community/mathlib/pull/#9565))

### [2021-10-05T19:53:21+00:00](https://github.com/leanprover-community/mathlib/commit/0b575206a2dece6f9426962d86e2d4d693539451)
feat(order/bounds): Image under an `order_iso` and `upper_bounds` commute ([#9555](https://github.com/leanprover-community/mathlib/pull/#9555))

### [2021-10-05T19:53:20+00:00](https://github.com/leanprover-community/mathlib/commit/111d73bf6139e0de630790d34f45d5debd664845)
feat(data/int/interval): Finite intervals in ℤ ([#9526](https://github.com/leanprover-community/mathlib/pull/#9526))

This proves that `ℤ` is a locally finite order.

### [2021-10-05T17:44:36+00:00](https://github.com/leanprover-community/mathlib/commit/7455f47c7037681073655ff0716f7ce09b766c2a)
chore(linear_algebra/quadratic_form): speed up quadratic_form.lin_mul_lin ([#9567](https://github.com/leanprover-community/mathlib/pull/#9567))

In my single profiler run, this reduced elaboration time from 20s to 1.5s.

### [2021-10-05T11:41:22+00:00](https://github.com/leanprover-community/mathlib/commit/5926f103c66a17a60eafc1aaec387d9db85a21ad)
fix(data/equiv/basic): use `subtype p` not `coe_sort (set_of p)` ([#9559](https://github.com/leanprover-community/mathlib/pull/#9559))

`↥{x | p x}` is just a clumsy way to write `{x // p x}`.

### [2021-10-05T10:10:30+00:00](https://github.com/leanprover-community/mathlib/commit/da4d5501e3b163b9fa54f9e8563c6b30f37b6bfa)
chore(measure_theory/*): better names and notations, add easy lemmas ([#9554](https://github.com/leanprover-community/mathlib/pull/#9554))

* Localize notation for absolutely continuous in the `measure_theory` namespace, and add separate notations for the case of measures and of vector measures.
* Standardize some names, using `measure` instead of `meas`.
* Add two lemmas on measures with density.

### [2021-10-05T10:10:29+00:00](https://github.com/leanprover-community/mathlib/commit/e7ea02fd0f23b434824935267721a2833b293f13)
feat(analysis/convex/basic): Levels of a monotone/antitone function ([#9547](https://github.com/leanprover-community/mathlib/pull/#9547))

The set of points whose image under a monotone function is less than a fixed value is convex, when the space is linear.

### [2021-10-05T10:10:28+00:00](https://github.com/leanprover-community/mathlib/commit/5b793197b65271c3d833792441e2082434506f65)
feat(ring_theory/polynomial/basic): add a lemma `polynomial_quotient_equiv_quotient_polynomial_map_mk` ([#9542](https://github.com/leanprover-community/mathlib/pull/#9542))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-10-05T10:10:27+00:00](https://github.com/leanprover-community/mathlib/commit/266603318dc7830f9d15ce903520909ad58c30c8)
refactor(algebra/gcd_monoid): don't require normalization ([#9443](https://github.com/leanprover-community/mathlib/pull/#9443))

This will allow us to set up a gcd_monoid instance for all euclidean_domains and generalize the results in ring_theory/euclidean_domain.lean to PIDs.

### [2021-10-05T08:58:55+00:00](https://github.com/leanprover-community/mathlib/commit/def4814c223f4a3d90fc82a7db3257e525510168)
refactor(topology/algebra/module): continuous semilinear maps ([#9539](https://github.com/leanprover-community/mathlib/pull/#9539))

Generalize the theory of continuous linear maps to the semilinear setting.

We introduce a notation `∘L` for composition of continuous linear (i.e., not semilinear) maps, used sporadically to help with unification.  See [#8857](https://github.com/leanprover-community/mathlib/pull/#8857) for a discussion of a related problem and fix.

Co-authored-by: Frédéric Dupuis <dupuisf@iro.umontreal.ca>



Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2021-10-05T08:05:44+00:00](https://github.com/leanprover-community/mathlib/commit/fefd8a38be7811574cd2ec2f77d3a393a407f112)
refactor(analysis/convex/*): prove `convex_independent_iff_finset` without full Carathéodory ([#9550](https://github.com/leanprover-community/mathlib/pull/#9550))

Also relax one `add_comm_group` to `add_comm_monoid` and two `𝕜` to `β` + `module 𝕜 β`, and simplify imports.

### [2021-10-05T08:05:43+00:00](https://github.com/leanprover-community/mathlib/commit/c42786f55b84f22c5f68edc5ad529e6b8ec60538)
feat(topology/algebra): adic topology ([#9521](https://github.com/leanprover-community/mathlib/pull/#9521))

This is a modernized version of code from the perfectoid spaces project.

### [2021-10-05T08:05:41+00:00](https://github.com/leanprover-community/mathlib/commit/61cd266ad313b2d1bc93890e8fe361ec3ce5944a)
ci(.github/workflows): automatically remove awaiting-CI label ([#9491](https://github.com/leanprover-community/mathlib/pull/#9491))

This PR adds a job to our CI which removes the label "awaiting-CI" when the build finishes successfully.

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/awaiting-CI.2C.20.23bors.2C.20and.20the.20PR.20.23queue/near/255754196)

### [2021-10-05T03:31:26+00:00](https://github.com/leanprover-community/mathlib/commit/153641215ee738801319c9a5637da86df89ab325)
refactor(data/polynomial): use `monic.ne_zero` and `nontriviality` ([#9530](https://github.com/leanprover-community/mathlib/pull/#9530))

There is a pattern in `data/polynomial` to have both `(hq : q.monic) (hq0 : q ≠ 0)` as assumptions. I found this less convenient to work with than `[nontrivial R] (hq : q.monic)` and using `monic.ne_zero` to replace `hq0`.

The `nontriviality` tactic automates all the cases where previously `nontrivial R` (or similar) was manually derived from the hypotheses.

### [2021-10-05T02:21:57+00:00](https://github.com/leanprover-community/mathlib/commit/fd1895369d867c6295eaf2ef8e3020e0e9fa03af)
chore(scripts): update nolints.txt ([#9553](https://github.com/leanprover-community/mathlib/pull/#9553))

I am happy to remove some nolints for you!

### [2021-10-05T01:26:25+00:00](https://github.com/leanprover-community/mathlib/commit/04916217ef25bd3010fe459a7b8c52bce8b8f4c5)
docs(ring_theory/adjoin_root): fix docstring ([#9546](https://github.com/leanprover-community/mathlib/pull/#9546))

### [2021-10-05T01:26:24+00:00](https://github.com/leanprover-community/mathlib/commit/746642450b61c54aae4b4bcab4ae6ae169fbc7f8)
feat(number_theory/padics): add padic_norm lemmas ([#9527](https://github.com/leanprover-community/mathlib/pull/#9527))

### [2021-10-04T23:18:15+00:00](https://github.com/leanprover-community/mathlib/commit/3aac8e5f1e6f5dcbff6cc95e67783402509791df)
fix(order/sub): make arguments explicit ([#9541](https://github.com/leanprover-community/mathlib/pull/#9541))

* This makes some arguments of lemmas explicit.
* These lemmas were not used in places where the implicitness/explicitness of the arguments matters
* Providing the arguments is sometimes useful, especially in `rw ← ...`
* This follows the explicitness of similar lemmas (like the instantiations for `nat`).



Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-10-04T19:37:54+00:00](https://github.com/leanprover-community/mathlib/commit/10da8e675d393f8efe8952b65785d62177e205a2)
feat(set_theory/cardinal,*): assorted lemmas ([#9516](https://github.com/leanprover-community/mathlib/pull/#9516))

### New instances

* a denumerable type is infinite;
* `Prop` is (noncomputably) enumerable;
* `Prop` is nontrivial;
* `cardinal.can_lift_cardinal_Type`: lift `cardinal.{u}` to `Type u`.

### New lemmas / attrs

* `quotient.out_equiv_out` : `x.out ≈ y.out ↔ x = y`;
* `quotient.out_inj` : `x.out = y.out ↔ x = y`;
* `cardinal.lift_bit0`, `cardinal.lift_bit1`, `cardinal.lift_two`, `cardinal.lift_prod` :
  new lemmas about `cardinal.lift`;
* `cardinal.omega_le_lift` and `cardinal.lift_le_omega` : simplify `ω ≤ lift c` and `lift c ≤ ω`;
* `cardinal.omega_le_add_iff`, `cardinal.encodable_iff`, `cardinal.mk_le_omega`,
  `cardinal.mk_denumerable`: new lemmas about `cardinal.omega`;
* add `@[simp]` attribute to `cardinal.mk_univ`, add `cardinal.mk_insert`;
* generalize `cardinal.nat_power_eq` to `cardinal.power_eq_two_power` and `cardinal.prod_eq_two_power`.

### [2021-10-04T19:37:52+00:00](https://github.com/leanprover-community/mathlib/commit/50b51c5ed8fd65c70f90781a8564b94c86f8ddad)
refactor(group_theory/is_p_group): Generalize `is_p_group.comap_injective` ([#9509](https://github.com/leanprover-community/mathlib/pull/#9509))

`is_p_group.comap_injective` (comap along injective preserves p-groups) can be generalized to `is_p_group.comap_ker_is_p_group` (comap with p-group kernel preserves p-groups). This also simplifies the proof of `is_p_group.to_sup_of_normal_right`



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-10-04T15:09:53+00:00](https://github.com/leanprover-community/mathlib/commit/7a5d15a955a92a90e1d398b2281916b9c41270b2)
feat(data/pnat/interval): Finite intervals in ℕ+ ([#9534](https://github.com/leanprover-community/mathlib/pull/#9534))

This proves that `ℕ+` is a locally finite order.

### [2021-10-04T15:09:52+00:00](https://github.com/leanprover-community/mathlib/commit/e998e4c41ceb5bd5b1b3723b86a07de1f25837fd)
feat(order/conditionally_complete_lattice): image and cSup commute ([#9510](https://github.com/leanprover-community/mathlib/pull/#9510))

### [2021-10-04T15:09:51+00:00](https://github.com/leanprover-community/mathlib/commit/d8968ba7e2eff2812f9abf5dd1ee47355a4575f7)
feat(algebra/order/functions): recursors and images under monotone maps ([#9505](https://github.com/leanprover-community/mathlib/pull/#9505))

### [2021-10-04T15:09:50+00:00](https://github.com/leanprover-community/mathlib/commit/fa520678d0a374225915625dac12b86a56f13f10)
refactor(order/fixed_points): rewrite using bundled `preorder_hom`s ([#9497](https://github.com/leanprover-community/mathlib/pull/#9497))

This way `fixed_points.complete_lattice` can be an instance.

### [2021-10-04T15:09:49+00:00](https://github.com/leanprover-community/mathlib/commit/387ff6e38b6ffab2d74f926b6921b71c2915f459)
feat(topology/homotopy): add `homotopy_with` ([#9252](https://github.com/leanprover-community/mathlib/pull/#9252))

Added `homotopy_with` as in [`HOL-Analysis`](https://isabelle.in.tum.de/library/HOL/HOL-Analysis/Homotopy.html) extending `homotopy`. Furthermore, I've added `homotopy_rel`.

Also rename/moved the file. There is also some refactoring which is part of the suggestions from [#9141](https://github.com/leanprover-community/mathlib/pull/#9141) .

### [2021-10-04T14:16:41+00:00](https://github.com/leanprover-community/mathlib/commit/f6c77be69289b5969344fd0df6897fb1e342c2c3)
fix(ci): always use python3 executable ([#9531](https://github.com/leanprover-community/mathlib/pull/#9531))

On many (particularly older) systems, the `python` command can refer to `python2` instead of `python3`.  Therefore we change all `python` calls to `python3` to prevent failures on some self-hosted runners.

### [2021-10-04T14:16:40+00:00](https://github.com/leanprover-community/mathlib/commit/a07d1de4bf2a3adf57545c265eb4e45a19c446ce)
feat(data/fin/interval): Finite intervals in `fin n` ([#9523](https://github.com/leanprover-community/mathlib/pull/#9523))

### [2021-10-04T13:23:23+00:00](https://github.com/leanprover-community/mathlib/commit/15d987a3140d084dcd1a212d51fb9613bbdd2ec8)
feat(probability_theory/notation): add notations for expected value, conditional expectation ([#9469](https://github.com/leanprover-community/mathlib/pull/#9469))

When working in probability theory, the measure on the space is most often implicit. With our current notations for measure spaces, that means writing `volume` in a lot of places. To avoid that and introduce notations closer to the usual practice, this PR defines
- `𝔼[X]` for the expected value (integral) of a function `X` over the volume measure,
- `P[X]` for the expected value over the measure `P`,
- `𝔼[X | hm]` for the conditional expectation with respect to the volume,
- `X =ₐₛ Y` for `X =ᵐ[volume] Y` and similarly for `X ≤ᵐ[volume] Y`,
- `∂P/∂Q` for `P.rn_deriv Q`

All notations are localized to the `probability_theory` namespace.

### [2021-10-04T09:48:18+00:00](https://github.com/leanprover-community/mathlib/commit/ab7d25193590b63a2380632018cfb3c8616accdf)
feat(measure_theory/covering/besicovitch_vector_space): vector spaces satisfy the assumption of Besicovitch covering theorem ([#9461](https://github.com/leanprover-community/mathlib/pull/#9461))

The Besicovitch covering theorem works in any metric space subject to a technical condition: there should be no satellite configuration of `N+1` points, for some `N`. We prove that this condition is satisfied in finite-dimensional real vector spaces. Moreover, we get the optimal bound for `N`: it coincides with the maximal number of `1`-separated points that fit in a ball of radius `2`, by [Füredi and Loeb, On the best constant for the Besicovitch covering theorem][furedi-loeb1994]

### [2021-10-04T09:48:17+00:00](https://github.com/leanprover-community/mathlib/commit/b6f94a93518f465234dafe57d9b2a9899cd026ec)
feat(analysis/special_functions): real derivs of `complex.exp` and `complex.log` ([#9422](https://github.com/leanprover-community/mathlib/pull/#9422))

### [2021-10-04T09:48:16+00:00](https://github.com/leanprover-community/mathlib/commit/1faf964e1857bfb011eab68e5af4f61505d2f76f)
feat(ring_theory/algebraic_independent): Existence of transcendence bases and rings are algebraic over transcendence basis ([#9377](https://github.com/leanprover-community/mathlib/pull/#9377))



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-10-04T09:48:14+00:00](https://github.com/leanprover-community/mathlib/commit/8a05dca750971c55b32a59d6aa42ecdb8426785d)
feat(order/jordan_holder): Jordan Hölder theorem ([#8976](https://github.com/leanprover-community/mathlib/pull/#8976))

The Jordan Hoelder theorem proved for a Jordan Hölder lattice, instances of which include submodules of a module and subgroups of a group. 



Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2021-10-04T09:48:13+00:00](https://github.com/leanprover-community/mathlib/commit/abe81bcb4635095980e826f4d7f444e7b2827454)
feat(linear_algebra/matrix/general_linear_group): GL(n, R) ([#8466](https://github.com/leanprover-community/mathlib/pull/#8466))

added this file which contains definition of the general linear group as well as the subgroup of matrices with positive determinant.

### [2021-10-04T08:10:26+00:00](https://github.com/leanprover-community/mathlib/commit/edb22feffbf52b37955fcde9575d7e66a678e2f6)
feat(topology/algebra): nonarchimedean filter bases ([#9511](https://github.com/leanprover-community/mathlib/pull/#9511))

This is preparatory material for adic topology. It is a modernized version of code from the perfectoid spaces project.

### [2021-10-04T08:10:24+00:00](https://github.com/leanprover-community/mathlib/commit/6bd6afaf479cddca3117fbd525736319bb1a5537)
feat(data/nat/interval): finite intervals of naturals ([#9507](https://github.com/leanprover-community/mathlib/pull/#9507))

This proves that `ℕ` is a `locally_finite_order`.

### [2021-10-04T08:10:23+00:00](https://github.com/leanprover-community/mathlib/commit/dc1b045ac2837a1120be9a0513b68e79454700e3)
feat(linear_algebra/free_module/strong_rank_condition): add `comm_ring_strong_rank_condition` ([#9486](https://github.com/leanprover-community/mathlib/pull/#9486))

We add `comm_ring_strong_rank_condition`: any commutative ring satisfies the strong rank condition.

Because of a circular import, this can't be in `linear_algebra.invariant_basis_number`.

### [2021-10-04T08:10:22+00:00](https://github.com/leanprover-community/mathlib/commit/6a6b4d0544f06d7d8e01fca759c3c14856d77b89)
feat(category_theory/sites/*): Cover-lifting functors on sites ([#9431](https://github.com/leanprover-community/mathlib/pull/#9431))

This PR defines cover-liftings functors between sites, and proves that `Ran F.op` maps sheaves to sheaves for cover-lifting functors `F`. 
This will probably be needed when we want to glue B-sheaves into sheaves.



Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-10-04T05:54:42+00:00](https://github.com/leanprover-community/mathlib/commit/d677c298874108fa4287b38f534464948a16e365)
feat(field_theory/algebraic_closure): versions of exists_aeval_eq_zero for rings ([#9517](https://github.com/leanprover-community/mathlib/pull/#9517))

### [2021-10-03T20:33:50+00:00](https://github.com/leanprover-community/mathlib/commit/52495a0f8c0b80964e4610d2e166e1f3ae43d0ff)
chore(data/set/lattice): fix name ([#9520](https://github.com/leanprover-community/mathlib/pull/#9520))

`comp` is for composition, `compl` for complement. Fix names using `comp` instead of `compl`.

### [2021-10-03T20:33:49+00:00](https://github.com/leanprover-community/mathlib/commit/465508fca76c93b5ee886786156a390f3b60a8af)
split(order/monotone): split off `order.basic` ([#9518](https://github.com/leanprover-community/mathlib/pull/#9518))

### [2021-10-03T20:33:48+00:00](https://github.com/leanprover-community/mathlib/commit/c0f7c56e9f68f643deb270b3c8e2bce113c42139)
feat(algebra/order): exists_square_le ([#9513](https://github.com/leanprover-community/mathlib/pull/#9513))

This is a modernized version of code from the perfectoid project.

### [2021-10-03T20:33:47+00:00](https://github.com/leanprover-community/mathlib/commit/bc5a081fdea0e1dbb745ead434104948dcce39a5)
feat(topology/algebra): Cauchy filters on groups ([#9512](https://github.com/leanprover-community/mathlib/pull/#9512))

This adds a tiny file but putting this lemma in `topology/algebra/filter_basis.lean` would make that file import a lot of uniform spaces theory. This is a modernized version of code from the perfectoid spaces project.

### [2021-10-03T20:33:46+00:00](https://github.com/leanprover-community/mathlib/commit/44f4d7083a373f865e262edaefa0f84f3d6b844c)
chore(*): use dot-notation for is_conj.symm and is_conj.trans ([#9498](https://github.com/leanprover-community/mathlib/pull/#9498))

renames:
* is_conj_refl -> is_conj.refl
* is_conj_symm -> is_conj.symm
* is_conj_trans -> is_conj.trans

### [2021-10-03T20:33:45+00:00](https://github.com/leanprover-community/mathlib/commit/c1936c1f59d2f1aced73d9faec043d89a6bbdc19)
feat(order/basic): define `is_top` and `is_bot` ([#9493](https://github.com/leanprover-community/mathlib/pull/#9493))

These predicates allow us to formulate & prove some theorems
simultaneously for the cases `[order_top α]` and `[no_top_order α]`.

### [2021-10-03T18:50:48+00:00](https://github.com/leanprover-community/mathlib/commit/e789ad313315781fdd83aba9b3e724118f373b2a)
feat(group_theory/subgroup): mk lemmas ([#9514](https://github.com/leanprover-community/mathlib/pull/#9514))

See discussion at https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set_like.20idiom

### [2021-10-03T15:22:43+00:00](https://github.com/leanprover-community/mathlib/commit/d26089452093c0dc62faa466dc7fcfa4d68ed306)
feat(analysis/convex/combination): lemmas connecting convex hull with affine combinations and barycentric coordinates ([#9499](https://github.com/leanprover-community/mathlib/pull/#9499))

### [2021-10-03T11:42:58+00:00](https://github.com/leanprover-community/mathlib/commit/cff992777f3be4724a38ae250d267a43db4b3e94)
refactor(ring_theory/unique_factorization_domain): rename unique_factorization_monoid.factors ([#9503](https://github.com/leanprover-community/mathlib/pull/#9503))

This frees up the name for the non-normalizing version.

### [2021-10-03T11:42:57+00:00](https://github.com/leanprover-community/mathlib/commit/18e7f9145060f9bc80ec2d7ca172358a5e9aa87b)
feat(group_theory/quotient_group): if a quotient is trivial then the subgroup is the whole group ([#9092](https://github.com/leanprover-community/mathlib/pull/#9092))

### [2021-10-03T10:10:01+00:00](https://github.com/leanprover-community/mathlib/commit/55c30c692e809ca2b567b09b563502a235f564dd)
feat(topology/basic): interior of finite intersection is intersection of interiors ([#9508](https://github.com/leanprover-community/mathlib/pull/#9508))

And likewise for finite unions and closures.

### [2021-10-03T09:15:42+00:00](https://github.com/leanprover-community/mathlib/commit/2807d83e0fde21777b432bf3910f82ebea1fb0a2)
feat(analysis/normed_space/add_torsor_bases): barycentric coordinates are continuous ([#9515](https://github.com/leanprover-community/mathlib/pull/#9515))

### [2021-10-03T06:55:59+00:00](https://github.com/leanprover-community/mathlib/commit/7d83ff15903589811040894b90b28a46fe5e68c3)
feat(analysis/special_functions/exp_log): prove continuity of exp without derivatives ([#9501](https://github.com/leanprover-community/mathlib/pull/#9501))

This is a first step towards making the definition of log and rpow independent of derivatives. The final goal is to avoid importing all of calculus in measure_theory/function/lp_space.lean .

### [2021-10-03T01:38:49+00:00](https://github.com/leanprover-community/mathlib/commit/5f803fae771f9fb06dd773ce1df48d13b367e96f)
feat(analysis/convex/function): helper lemmas and general cleanup ([#9438](https://github.com/leanprover-community/mathlib/pull/#9438))

This adds
* `convex_iff_pairwise_on_pos`
* `convex_on_iff_forall_pos`, `concave_on_iff_forall_pos`,
* `convex_on_iff_forall_pos_ne`, `concave_on_iff_forall_pos_ne`
* `convex_on.convex_strict_epigraph`, `concave_on.convex_strict_hypograph`

generalizes some instance assumptions:
* `convex_on.translate_` didn't need `module 𝕜 β` but `has_scalar 𝕜 β`.
* some proofs in `analysis.convex.exposed` were vestigially using `ℝ`.
 
and golfs proofs.

### [2021-10-02T23:49:54+00:00](https://github.com/leanprover-community/mathlib/commit/7b022774bd4f2a3cdee73dfb302b4e068af11362)
chore(topology/*): more lemmas about `dense`/`dense_range` ([#9492](https://github.com/leanprover-community/mathlib/pull/#9492))

### [2021-10-02T17:58:29+00:00](https://github.com/leanprover-community/mathlib/commit/c46a04a331506b845f44719d465ec3d6208c2a00)
chore(measure_theory): move, deduplicate ([#9489](https://github.com/leanprover-community/mathlib/pull/#9489))

* move lemmas like `is_compact.measure_lt_top` from `measure_theory.constructions.borel` to `measure_theory.measure.measure_space`;
* drop `is_compact.is_finite_measure` etc;
* add `measure_Ixx_lt_top`.

### [2021-10-02T17:58:27+00:00](https://github.com/leanprover-community/mathlib/commit/a97e86a6546961b6e4bbab10ce442cc9fab3fbfa)
chore(ring_theory/ideal): some simp attributes ([#9487](https://github.com/leanprover-community/mathlib/pull/#9487))

### [2021-10-02T16:08:36+00:00](https://github.com/leanprover-community/mathlib/commit/e60dc2bb9596fc8a315625a170ddf92283c18c05)
docs(measure_theory/integral/lebesgue): Add "Markov's inequality" to the doc string of `mul_meas_ge_le_lintegral` ([#9506](https://github.com/leanprover-community/mathlib/pull/#9506))

### [2021-10-02T16:08:34+00:00](https://github.com/leanprover-community/mathlib/commit/110c740c2f432c9e1aba4ed27cbb49987661ff33)
refactor(linear_algebra/charpoly): split in two files ([#9485](https://github.com/leanprover-community/mathlib/pull/#9485))

We split `linear_algebra/charpoly` in `linear_algebra/charpoly/basic` and `linear_algebra/charpoly/to_matrix`.

Currently in `linear_algebra/charpoly/to_matrix` we only prove `linear_map.charpoly_to_matrix f` : `charpoly f` is the characteristic polynomial of the matrix of `f` in any basis. This needs to be in a separate file then the definition of `f.charpoly` since it needs the invariant basis number property for commutative rings and in a future PR I will prove this as a special case of the fact that any commutative ring satisfies the strong rank condition, but the proof of this uses the characteristic polynomial.

We plan to add ohter results regarding the characteristic polynomial in the future.

### [2021-10-02T16:08:33+00:00](https://github.com/leanprover-community/mathlib/commit/1ceebca64ca546bb9385bfe6640bebf71e14006f)
refactor(linear_algebra/free_module_pid): move linear_algebra/free_module_pid to linear_algebra/free_module/pid ([#9482](https://github.com/leanprover-community/mathlib/pull/#9482))

We move `linear_algebra/free_module_pid` to `linear_algebra/free_module/pid`.

### [2021-10-02T16:08:31+00:00](https://github.com/leanprover-community/mathlib/commit/fa7fdcae902f601e288ac9407171c58bc9f568e9)
feat(measure_theory/function/ae_eq_of_integral): two ennreal-valued function are a.e. equal if their integrals agree ([#9372](https://github.com/leanprover-community/mathlib/pull/#9372))

### [2021-10-02T13:51:01+00:00](https://github.com/leanprover-community/mathlib/commit/241aad7ba422812b8f5969a5092dbcbcb26463bf)
feat(data/finset/interval): API for `finset.Ixx` ([#9495](https://github.com/leanprover-community/mathlib/pull/#9495))

This proves basic results about `finset.Ixx` & co. Lemma names (should) match their `set` counterparts.

### [2021-10-02T12:12:09+00:00](https://github.com/leanprover-community/mathlib/commit/f3746ea61827fe1917c8bb40ace036a6a7fef5dd)
chore(src/analysis/special_functions/trigonometric/basic) : prove continuity of sin/cos/sinh/cosh without derivatives ([#9502](https://github.com/leanprover-community/mathlib/pull/#9502))

In a future PR, I want to split all files in the special_functions folder to avoid importing calculus when not needed (the goal is to avoid importing it in the definition of lp_space in measure_theory). This PR changes the proofs of continuity of trigonometric functions.

### [2021-10-02T09:30:39+00:00](https://github.com/leanprover-community/mathlib/commit/e26a9e5639f401e3a348b35537fc77b709e431e4)
feat(measure_theory/covering/besicovitch): the Besicovitch covering theorem ([#9462](https://github.com/leanprover-community/mathlib/pull/#9462))

The Besicovitch covering theorem: in a nice metric space (e.g. real vector spaces), from any family of balls one can extract `N` subfamilies made of disjoint balls, covering all the centers of the balls in the family. The number `N` only depends on the metric space.

### [2021-10-02T09:30:37+00:00](https://github.com/leanprover-community/mathlib/commit/9e54ad01c4b2fb28d85e22a3c2ad31147d2155cc)
feat(ring_theory/algebraic_independent): algebraic independence ([#9229](https://github.com/leanprover-community/mathlib/pull/#9229))




Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-10-02T07:33:19+00:00](https://github.com/leanprover-community/mathlib/commit/709b4498614bda13ce9abecf37c7e566e363a48a)
chore(algebra/star/basic): provide automorphisms in commutative rings ([#9483](https://github.com/leanprover-community/mathlib/pull/#9483))

This adds `star_mul_aut` and `star_ring_aut`, which are the versions of `star_mul_equiv` and `star_ring_equiv` which avoid needing `opposite` due to commutativity.

### [2021-10-02T07:33:18+00:00](https://github.com/leanprover-community/mathlib/commit/fc7f9f3a3746ae6e3b1b0e93badc8559637e38d7)
feat(algebra/algebra): the range of `algebra_map (S : subalgebra R A) A` ([#9450](https://github.com/leanprover-community/mathlib/pull/#9450))




Co-authored-by: Anne Baanen <t.baanen@vu.nl>

### [2021-10-02T07:33:17+00:00](https://github.com/leanprover-community/mathlib/commit/a59876f143304b3384d7b1992ad38f2314ca4b5a)
feat(ring_theory): quotients of a noetherian ring are noetherian ([#9449](https://github.com/leanprover-community/mathlib/pull/#9449))




Co-authored-by: Anne Baanen <t.baanen@vu.nl>

### [2021-10-02T04:58:50+00:00](https://github.com/leanprover-community/mathlib/commit/37f43bffe0539a47a2c746e46776b23129a67ade)
feat(linear_algebra/affine_space/barycentric_coords): define barycentric coordinates ([#9472](https://github.com/leanprover-community/mathlib/pull/#9472))

### [2021-10-01T23:08:54+00:00](https://github.com/leanprover-community/mathlib/commit/06b184f9f89a0fa0757e972fed18549c15ff7975)
refactor(analysis/convex/caratheodory): generalize ℝ to an arbitrary linearly ordered field ([#9479](https://github.com/leanprover-community/mathlib/pull/#9479))

As a result; `convex_independent_iff_finset` also gets generalized.

### [2021-10-01T20:36:04+00:00](https://github.com/leanprover-community/mathlib/commit/118d45ad77137fe7d6262864f602704aecad8311)
doc(ring_theory/subring): fix docstring of `subring.center` ([#9494](https://github.com/leanprover-community/mathlib/pull/#9494))

### [2021-10-01T20:36:02+00:00](https://github.com/leanprover-community/mathlib/commit/e6f8ad790c9cd87ce41ff1984b81143b67765262)
refactor(analysis/convex/cone): generalize ℝ to an ordered semiring ([#9481](https://github.com/leanprover-community/mathlib/pull/#9481))

Currently, `convex_cone` is only defined in ℝ-modules. This generalizes ℝ to an arbitray ordered semiring. `convex_cone E` is now spelt `convex_cone 𝕜 E`. Similarly, `positive_cone E` becomes `positive_cone 𝕜 E`.

### [2021-10-01T20:36:00+00:00](https://github.com/leanprover-community/mathlib/commit/05ee42cfb9a79811cd33e35b88cc9dc4d388867b)
feat(order/circular): define circular orders ([#9413](https://github.com/leanprover-community/mathlib/pull/#9413))

A circular order is the way to formalize positions on a circle. This is very foundational, as a good lot of the order-algebra-topology hierarchy has a circular analog.

### [2021-10-01T20:35:59+00:00](https://github.com/leanprover-community/mathlib/commit/5c92eb0b408dcd3c75eebca8f60f00ba03923347)
feat(measure_theory/function/conditional_expectation): conditional expectation on real functions equal Radon-Nikodym derivative ([#9378](https://github.com/leanprover-community/mathlib/pull/#9378))



Co-authored-by: RemyDegenne <Remydegenne@gmail.com>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-01T20:35:58+00:00](https://github.com/leanprover-community/mathlib/commit/75d022bb5d822dfa118a56cf82eafc75edd8555a)
feat(probability_theory/density): define probability density functions ([#9323](https://github.com/leanprover-community/mathlib/pull/#9323))

This PR also proves some elementary properties about probability density function such as the law of the unconscious statistician.

### [2021-10-01T18:34:46+00:00](https://github.com/leanprover-community/mathlib/commit/6354fe95e6a89aa1daa5c8ef4ee1acddb90d8f81)
feat(topology/algebra): discrete group criterion ([#9488](https://github.com/leanprover-community/mathlib/pull/#9488))



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-10-01T18:34:45+00:00](https://github.com/leanprover-community/mathlib/commit/a5fc0a332c6cae6a8bb28ffe686e2f3098e0a854)
feat(topology/algebra): filters bases for algebra ([#9480](https://github.com/leanprover-community/mathlib/pull/#9480))

This is modernized version of code from the perfectoid spaces project.

### [2021-10-01T17:21:37+00:00](https://github.com/leanprover-community/mathlib/commit/db6d86277a82f9c1c499cb1b6711c461e6378b88)
split(analysis/convex/basic): split off `analysis.convex.hull` ([#9477](https://github.com/leanprover-community/mathlib/pull/#9477))

### [2021-10-01T15:54:07+00:00](https://github.com/leanprover-community/mathlib/commit/249a015c95845b487cd989908a494f499cac5194)
chore(ring_theory/coprime): split out imports into a new file so that `is_coprime` can be used earlier. ([#9403](https://github.com/leanprover-community/mathlib/pull/#9403))

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Use.20of.20is_coprime.20in.20rat.2Ebasic/near/254942750)

### [2021-10-01T15:54:06+00:00](https://github.com/leanprover-community/mathlib/commit/102ce303fc385452c96d4f6e6f4aab557793db9b)
feat(linear_algebra/direct_sum): `submodule_is_internal_iff_independent_and_supr_eq_top` ([#9214](https://github.com/leanprover-community/mathlib/pull/#9214))

This shows that a grade decomposition into submodules is bijective iff and only iff the submodules are independent and span the whole module.

The key proofs are:
* `complete_lattice.independent_of_dfinsupp_lsum_injective`
* `complete_lattice.independent.dfinsupp_lsum_injective`

Everything else is just glue.

This replaces parts of [#8246](https://github.com/leanprover-community/mathlib/pull/#8246), and uses what is probably a similar proof strategy, but without unfolding down to finsets.

Unlike the proof there, this requires only `add_comm_monoid` for the `complete_lattice.independent_of_dfinsupp_lsum_injective` direction of the proof. I was not able to find a proof of `complete_lattice.independent.dfinsupp_lsum_injective` with the same weak assumptions, as it is not true! A counter-example is included,

Co-authored-by: Hanting Zhang <hantingzhang03@gmail.com>

### [2021-10-01T13:24:12+00:00](https://github.com/leanprover-community/mathlib/commit/9be12dd5a65e170a1375b247e1acc3793e9208b2)
feat(order/locally_finite): introduce locally finite orders ([#9464](https://github.com/leanprover-community/mathlib/pull/#9464))

The new typeclass `locally_finite_order` homogeneizes treatment of intervals as `finset`s and `multiset`s. `finset.Ico` is now available for all locally finite orders (instead of being ℕ-specialized), rendering `finset.Ico_ℤ` and `pnat.Ico` useless.

This PR also introduces the long-awaited `finset.Icc`, `finset.Ioc`, `finset.Ioo`, and `finset.Ici`, `finset.Ioi` (for `order_top`s) and `finset.Iic`, `finset.Iio` (for `order_bot`s), and the `multiset` variations thereof.

### [2021-10-01T13:24:10+00:00](https://github.com/leanprover-community/mathlib/commit/62b8c1fa3c5727ac2e652c7d9478d2e19503a847)
feat(order/basic): Antitone functions ([#9119](https://github.com/leanprover-community/mathlib/pull/#9119))

Define `antitone` and `strict_anti`. Use them where they already were used in expanded form. Rename lemmas accordingly.

Provide a few more `order_dual` results, and rename `monotone.order_dual` to `monotone.dual`.

Restructure `order.basic`. Now, monotone stuff can easily be singled out to go in a new file `order.monotone` if wanted. It represents 587 out of the 965 lines.

### [2021-10-01T13:24:08+00:00](https://github.com/leanprover-community/mathlib/commit/d6bf2dd016d84e16e39af287805aa4d4097103a1)
refactor(*): replace `abs` with vertical bar notation ([#8891](https://github.com/leanprover-community/mathlib/pull/#8891))

The notion of an "absolute value" occurs both in algebra (e.g. lattice ordered groups) and analysis (e.g. GM and GL-spaces). I introduced a `has_abs` notation class in [#9172](https://github.com/leanprover-community/mathlib/pull/#9172), along with the  conventional mathematical vertical bar notation `|.|` for `abs`.

The notation vertical bar notation was already in use in some files as a local notation. This PR replaces `abs` with the vertical bar notation throughout mathlib.

### [2021-10-01T12:27:23+00:00](https://github.com/leanprover-community/mathlib/commit/c33407ae71743ac5224d9a2092cdfc508e425f26)
feat(algebraic_geometry/*): Proved Spec ⋙ Γ ≅ 𝟭 ([#9416](https://github.com/leanprover-community/mathlib/pull/#9416))

- Specialied `algebraic_geometry.structure_sheaf.basic_open_iso` into global sections, proving that the map `structure_sheaf.to_open R ⊤` is an isomorphism in `algebraic_geometry.is_iso_to_global`.
- Proved that the map `R ⟶ Γ(Spec R)` is natural, and presents the fact above as an natural isomorphism `Spec.right_op ⋙ Γ ≅ 𝟭 _` in `algebraic_geometry.Spec_Γ_identity`.



Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-10-01T10:38:53+00:00](https://github.com/leanprover-community/mathlib/commit/38395ed94e3223e7181d5f57dee2473b9f7965aa)
chore(bors): bors should block on label awaiting-CI ([#9478](https://github.com/leanprover-community/mathlib/pull/#9478))

### [2021-10-01T10:38:52+00:00](https://github.com/leanprover-community/mathlib/commit/5936f5301858b09d3c49e467254d0efdc8253737)
feat(topology/maps): for a continuous open map, preimage and interior commute ([#9471](https://github.com/leanprover-community/mathlib/pull/#9471))

### [2021-10-01T10:38:51+00:00](https://github.com/leanprover-community/mathlib/commit/265345c2ca62f2c78873f6371ab4947e6f255f26)
feat(linear_algebra/{bilinear,quadratic}_form): remove non-degeneracy requirement from `exists_orthogonal_basis` and Sylvester's law of inertia ([#9465](https://github.com/leanprover-community/mathlib/pull/#9465))

This removes the `nondegenerate` hypothesis from `bilin_form.exists_orthogonal_basis`, and removes the `∀ i, B (v i) (v i) ≠ 0` statement from the goal. This property can be recovered in the case of a nondegenerate form with `is_Ortho.not_is_ortho_basis_self_of_nondegenerate`.

This also swaps the order of the binders in `is_Ortho` to make it expressible with `pairwise`.

### [2021-10-01T10:38:49+00:00](https://github.com/leanprover-community/mathlib/commit/74457cb06ba420b70a0d0fcb25f9a35c826fe715)
feat(data/polynomial,field_theory): `(minpoly A x).map f ≠ 1` ([#9451](https://github.com/leanprover-community/mathlib/pull/#9451))

We use this result to generalize `minpoly.not_is_unit` from integral domains to nontrivial `comm_ring`s.





Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-10-01T08:55:56+00:00](https://github.com/leanprover-community/mathlib/commit/f7d7a91cf7d34c4c0971a3ea2e025603fba71276)
feat(algebraic_geometry/ringed_space): Define basic opens for ringed spaces. ([#9358](https://github.com/leanprover-community/mathlib/pull/#9358))

Defines the category of ringed spaces, as an alias for `SheafedSpace CommRing`. We provide basic lemmas about sections being units in the stalk and define basic opens in this context.

### [2021-10-01T08:55:55+00:00](https://github.com/leanprover-community/mathlib/commit/9235c8a38edd2e8f372c5c32e092ec2eda430160)
feat(data/polynomial/basic): polynomial.update ([#9020](https://github.com/leanprover-community/mathlib/pull/#9020))

### [2021-10-01T06:05:13+00:00](https://github.com/leanprover-community/mathlib/commit/e0f7d0e87e8d9a81edd79fec5594aedecd037aaa)
feat(group_theory/complement): is_complement_iff_card_mul_and_disjoint ([#9476](https://github.com/leanprover-community/mathlib/pull/#9476))

Adds the converse to an existing lemma `is_complement_of_disjoint` (renamed `is_complement_of_card_mul_and_disjoint`).

### [2021-10-01T06:05:12+00:00](https://github.com/leanprover-community/mathlib/commit/57fa903f9ee29a9cf62920a5ac383b366c443f26)
refactor(group_theory/complement): Split `complement.lean` ([#9474](https://github.com/leanprover-community/mathlib/pull/#9474))

Splits off Schur-Zassenhaus from `complement.lean`. In the new file, we can replace `fintype.card (quotient_group.quotient H)` with `H.index`.

Advantages: We can avoid importing `cardinal.lean` in `complement.lean`. Later (once full SZ is proved), we can avoid importing `sylow.lean` in `complement.lean`.

### [2021-10-01T06:05:11+00:00](https://github.com/leanprover-community/mathlib/commit/76ddb2bbdc99c1c59f2de0923262b27ba1ee05af)
feat(analysis/normed_space/lattice_ordered_group): introduce normed lattice ordered groups ([#9274](https://github.com/leanprover-community/mathlib/pull/#9274))

Motivated by Banach Lattices, this PR introduces normed lattice ordered groups and proves that they are topological lattices. To support this `has_continuous_inf` and `has_continuous_sup` mixin classes are also defined.



Co-authored-by: Christopher Hoskin <mans0954@users.noreply.github.com>

### [2021-10-01T03:25:37+00:00](https://github.com/leanprover-community/mathlib/commit/812d6bbdd1b921a147c2b619d42b7703bae532db)
chore(scripts): update nolints.txt ([#9475](https://github.com/leanprover-community/mathlib/pull/#9475))

I am happy to remove some nolints for you!

### [2021-10-01T03:25:36+00:00](https://github.com/leanprover-community/mathlib/commit/125dac813ae6f5acaba6d6096c03df670f09cc36)
feat(group_theory/sylow): The number of Sylow subgroups equals the index of the normalizer ([#9455](https://github.com/leanprover-community/mathlib/pull/#9455))

This PR adds further consequences of Sylow's theorems (still for infinite groups, more will be PRed later).

### [2021-10-01T03:25:35+00:00](https://github.com/leanprover-community/mathlib/commit/b78644344a8c424aa2668b9e8bff7a2996ea2c8d)
chore(algebra/category/*): Added `of_hom` to all of the algebraic categories. ([#9454](https://github.com/leanprover-community/mathlib/pull/#9454))

As suggested in the comments of [#9416](https://github.com/leanprover-community/mathlib/pull/#9416).

### [2021-10-01T03:25:34+00:00](https://github.com/leanprover-community/mathlib/commit/babca8e30b7e9d5f8a4e90e60a56e3b98c232906)
refactor(algebra/group_with_zero): rename lemmas to use ₀ instead of ' ([#9424](https://github.com/leanprover-community/mathlib/pull/#9424))

We currently have lots of lemmas for `group_with_zero` that already have a corresponding lemma for `group`. We've dealt with name collisions so far just by adding a prime.

This PR renames these lemmas to use a `₀` suffix instead of a `'`.

In part this is out of desire to reduce our overuse of primes in mathlib names (putting the burden on users to know names, rather than relying on naming conventions).

But it may also help with a problem Daniel Selsam ran into at https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/mathport.20depending.20on.20mathlib. (Briefly, mathport is also adding primes to names when it encounters name collisions, and these particular primes were causing problems. There are are other potential fixes in the works, but everything helps.)




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-10-01T01:14:03+00:00](https://github.com/leanprover-community/mathlib/commit/540fb9434673e774031b108643d8f47dcb6438ab)
feat(data/fintype/basic): bijection preserves cardinality ([#9473](https://github.com/leanprover-community/mathlib/pull/#9473))

We don't seem to have this lemma yet, so I've added it.

### [2021-10-01T01:14:02+00:00](https://github.com/leanprover-community/mathlib/commit/456db24a14c69582548c3ceaaf0906779a0248ac)
feat(topology/algebra/module): has_continuous_smul ([#9468](https://github.com/leanprover-community/mathlib/pull/#9468))

in terms of nice neighborhoods of zero

### [2021-10-01T01:14:00+00:00](https://github.com/leanprover-community/mathlib/commit/2b23d2eb53047d63793b41e7f23c094f549aea6e)
chore(topology/algebra): remove dead code ([#9467](https://github.com/leanprover-community/mathlib/pull/#9467))

This code wasn't used and its historically intended use will soon be redone much better. The second file is only a dead import and a misleading comment (referring to the dead code of the *other* file).

### [2021-10-01T01:13:59+00:00](https://github.com/leanprover-community/mathlib/commit/5b025712351f6140f44fbde300f4c5026967cc31)
chore(measure_theory/decomposition/lebesgue): make measurable_space implicit ([#9463](https://github.com/leanprover-community/mathlib/pull/#9463))

Whenever the `measurable_space` can be inferred from a `measure` argument, it should be implicit. This PR applies that rule to the Lebesgue decomposition file.

### [2021-09-30T22:39:03+00:00](https://github.com/leanprover-community/mathlib/commit/a24b49651609f10c8f7da60bf328c540d85d9252)
feat(analysis/normed_space/add_torsor_bases): add lemma `exists_subset_affine_independent_span_eq_top_of_open` ([#9418](https://github.com/leanprover-community/mathlib/pull/#9418))

Also some supporting lemmas about affine span, affine independence.

### [2021-09-30T22:39:00+00:00](https://github.com/leanprover-community/mathlib/commit/931cd6d7c1b017933711ab7a3cec608ca1675649)
feat(data/set/equitable): Equitable functions ([#8509](https://github.com/leanprover-community/mathlib/pull/#8509))

Equitable functions are functions whose maximum is at most one more than their minimum. Equivalently, in an additive successor order (`a < b ↔ a +1 ≤ b`), this means that the function takes only values `a` and `a + 1` for some `a`.

From Szemerédi's regularity lemma. Co-authored by @b-mehta

### [2021-09-30T20:25:20+00:00](https://github.com/leanprover-community/mathlib/commit/a52a54b606ca886abeb62f21253b98378ef345dd)
chore(analysis/convex/basic): instance cleanup ([#9466](https://github.com/leanprover-community/mathlib/pull/#9466))

Some lemmas were about `f : whatever → 𝕜`. They are now about `f : whatever → β` + a scalar instance between `𝕜` and `β`.
Some `add_comm_monoid` assumptions are actually promotable to `add_comm_group` directly thanks to [`module.add_comm_monoid_to_add_comm_group`](https://leanprover-community.github.io/mathlib_docs/algebra/module/basic.html#module.add_comm_monoid_to_add_comm_group). [Related Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Convexity.20refactor/near/255268131).

### [2021-09-30T20:25:18+00:00](https://github.com/leanprover-community/mathlib/commit/97036e7c8efd550cb4e19122b13757de243e630b)
feat(measure_theory/constructions/pi): volume on `α × α` as a map of volume on `fin 2 → α` ([#9432](https://github.com/leanprover-community/mathlib/pull/#9432))

### [2021-09-30T20:25:17+00:00](https://github.com/leanprover-community/mathlib/commit/64bcb3897acfd5d7e9cab79d4dbbba6d9eb67634)
feat(order/succ_pred): define successor orders ([#9397](https://github.com/leanprover-community/mathlib/pull/#9397))

A successor order is an order in which every (non maximal) element has a least greater element. A predecessor order is an order in which every (non minimal) element has a greatest smaller element. Typical examples are `ℕ`, `ℕ+`, `ℤ`, `fin n`, `ordinal`. Anytime you want to turn `a < b + 1` into `a ≤ b` or `a < b` into `a + 1 ≤ b`, you want a `succ_order`.

### [2021-09-30T20:25:16+00:00](https://github.com/leanprover-community/mathlib/commit/f7795d1aec80fb29103f5ea9f41079206442865e)
feat(monoid_algebra/grading): `add_monoid_algebra`s permit an internal grading ([#8927](https://github.com/leanprover-community/mathlib/pull/#8927))

### [2021-09-30T18:34:36+00:00](https://github.com/leanprover-community/mathlib/commit/b18eedb0f11703a8b61497e314533ef5f71393b5)
feat(linear_algebra/affine_space/combination): add lemma `finset.map_affine_combination` ([#9453](https://github.com/leanprover-community/mathlib/pull/#9453))

The other included lemmas `affine_map.coe_sub`,  `affine_map.coe_neg` are unrelated but are included to reduce PR overhead.

### [2021-09-30T18:34:34+00:00](https://github.com/leanprover-community/mathlib/commit/6e6fe1f28b0fd37064d1771c957e7228f0d85d23)
move(category_theory/category/default): rename to `category_theory.basic` ([#9412](https://github.com/leanprover-community/mathlib/pull/#9412))

### [2021-09-30T18:34:33+00:00](https://github.com/leanprover-community/mathlib/commit/4091f72b63b3b5537cba91f410e4207438c15d44)
refactor(linear_algebra/free_module): split in two files ([#9407](https://github.com/leanprover-community/mathlib/pull/#9407))

We split `linear_algebra/free_module` in `linear_algebra/free_module/basic` and `linear_algebra/free_module/finite`, so one can work with free modules without having to import all the theory of dimension.

### [2021-09-30T18:34:32+00:00](https://github.com/leanprover-community/mathlib/commit/6210d98a65f1ea51fd563e766c5757f963f3935f)
feat(*): Clean up some misstated lemmas about analysis/manifolds ([#9395](https://github.com/leanprover-community/mathlib/pull/#9395))

A few lemmas whose statement doesn't match the name / docstring about analytical things, all of these are duplicates of other lemmas, so look like copy paste errors.

### [2021-09-30T16:11:19+00:00](https://github.com/leanprover-community/mathlib/commit/118e809b5f4ed450c6f9660b9778c548fb9be3f6)
refactor(algebra/module/linear_map): Move elementwise structure from linear_algebra/basic ([#9331](https://github.com/leanprover-community/mathlib/pull/#9331))

This helps reduce the size of linear_algebra/basic, and by virtue of being a smaller file makes it easier to spot typeclasses which can be relaxed.
As an example, `linear_map.endomorphism_ring` now requires only `semiring R` not `ring R`.

Having instances available as early as possible is generally good, as otherwise it is hard to even state things elsewhere.

### [2021-09-30T16:11:18+00:00](https://github.com/leanprover-community/mathlib/commit/0dca20a21cb8b94bb731c75c037f5e4bad0569b0)
feat(data/(d)finsupp): update_eq_sub_add_single ([#9184](https://github.com/leanprover-community/mathlib/pull/#9184))

Also with `erase_eq_sub_single`.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-09-30T16:11:16+00:00](https://github.com/leanprover-community/mathlib/commit/8ec7fcf80a247133cee7e68fefcc621b2d6e86bc)
feat(ring_theory/henselian): Henselian local rings ([#8986](https://github.com/leanprover-community/mathlib/pull/#8986))

### [2021-09-30T13:44:22+00:00](https://github.com/leanprover-community/mathlib/commit/f184dd7d27b4cf3cc868473a1a57da32aba5c14c)
feat(group_theory/perm/concrete_cycle): perm.to_list ([#9178](https://github.com/leanprover-community/mathlib/pull/#9178))

The conceptual inverse to `list.form_perm`.

### [2021-09-30T13:44:21+00:00](https://github.com/leanprover-community/mathlib/commit/3daae2cac6622ba0c2cff69db17a9924c2298894)
refactor(algebra/abs): add has_abs class ([#9172](https://github.com/leanprover-community/mathlib/pull/#9172))


The notion of an "absolute value" occurs both in algebra (e.g. lattice ordered groups) and analysis (e.g. GM and GL-spaces). I introduced a `has_abs` notation class in https://github.com/leanprover-community/mathlib/pull/8673 for lattice ordered groups, along with the notation `|.|` and was asked by @eric-wieser and @jcommelin to add it in a separate PR and retro fit `has_abs` and the notation to mathlib.

I tried to introduce both the `has_abs` class and the `|.|` notation in [#8891](https://github.com/leanprover-community/mathlib/pull/#8891) . However, I'm finding such a large and wide-ranging PR unwieldy to work with, so I'm now opening this PR which just replaces the previous definitions of `abs : α → α` in the following locations:

https://github.com/leanprover-community/mathlib/blob/f36c98e877dd86af12606abbba5275513baa8a26/src/algebra/ordered_group.lean#L984

https://github.com/leanprover-community/mathlib/blob/f36c98e877dd86af12606abbba5275513baa8a26/src/topology/continuous_function/basic.lean#L113

Out of scope are the following `abs : α → β`:

https://github.com/leanprover-community/mathlib/blob/f36c98e877dd86af12606abbba5275513baa8a26/src/data/complex/is_R_or_C.lean#L439

https://github.com/leanprover-community/mathlib/blob/f36c98e877dd86af12606abbba5275513baa8a26/src/data/complex/basic.lean#L406

https://github.com/leanprover-community/mathlib/blob/f36c98e877dd86af12606abbba5275513baa8a26/src/data/real/nnreal.lean#L762

https://github.com/leanprover-community/mathlib/blob/f36c98e877dd86af12606abbba5275513baa8a26/src/data/num/basic.lean#L315

Replacing the `abs` notation with `|.|` can be considered in a subsequent PR.



Co-authored-by: Christopher Hoskin <mans0954@users.noreply.github.com>

### [2021-09-30T11:12:34+00:00](https://github.com/leanprover-community/mathlib/commit/2fd713a76e15eebdcdfd2f94472584b3f5f2bfc7)
chore(order/basic): rename monotonicity concepts ([#9383](https://github.com/leanprover-community/mathlib/pull/#9383))

This:
* Renames various mono lemmas either to enable dot notation (in some cases for types that don't exist yet) or to reflect they indicate monotonicity within a particular domain.
* Renames `strict_mono.top_preimage_top'` to `strict_mono.maximal_preimage_top'`
* Sorts some imports
* Replaces some `rcases` with `obtain`



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-09-30T11:12:33+00:00](https://github.com/leanprover-community/mathlib/commit/09506e6c7c3952cecc4eb4745eb0a17ae9c4da28)
feat(ring_theory/finiteness): add finiteness of restrict_scalars ([#9363](https://github.com/leanprover-community/mathlib/pull/#9363))

We add `module.finitte.of_restrict_scalars_finite` and related lemmas: if `A` is an `R`-algebra and `M` is an `A`-module that is finite as `R`-module, then it is finite as `A`-module (similarly for `finite_type`).

### [2021-09-30T11:12:32+00:00](https://github.com/leanprover-community/mathlib/commit/3b48f7a5ba669c18386e66af10931d8d0bb8078b)
docs(category_theory): provide missing module docs ([#9352](https://github.com/leanprover-community/mathlib/pull/#9352))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Yaël Dillies <yael.dillies@gmail.com>

### [2021-09-30T08:02:28+00:00](https://github.com/leanprover-community/mathlib/commit/6d12b2e18a2736c7b348bc876ce73028b2660ff9)
feat(group_theory/complement): Top is complement to every singleton subset ([#9460](https://github.com/leanprover-community/mathlib/pull/#9460))

The top subset of G is complement to every singleton subset of G.

### [2021-09-30T08:02:27+00:00](https://github.com/leanprover-community/mathlib/commit/f31758a8e5efcde528b09db6d6b78c0e35dda973)
chore(linear_algebra/quadratic_form): add missing lemmas, lift instance, and tweak argument implicitness ([#9458](https://github.com/leanprover-community/mathlib/pull/#9458))

This adds `{quadratic,bilin}_form.{ext_iff,congr_fun}`, and a `can_lift` instance to promote `bilin_form`s to `quadratic_form`s.

The `associated_*` lemmas should have `Q` and `S` explicit as they are not inferable from the arguments. In particular, with `S` implicit, rewriting any of them backwards introduces a lot of noisy subgoals.

### [2021-09-30T08:02:25+00:00](https://github.com/leanprover-community/mathlib/commit/f6d2434f387593dc6554d3aa72c2e4f76f77c08d)
feat(set_theory/cardinal_ordinal): there is no injective function from ordinals to types in the same universe ([#9452](https://github.com/leanprover-community/mathlib/pull/#9452))

Contributed by @rwbarton at https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Transfinite.20recursion/near/253614140

### [2021-09-30T08:02:23+00:00](https://github.com/leanprover-community/mathlib/commit/089614b182e9c98175ba7f046acf0198bc772430)
feat(algebra/star): If `R` is a `star_monoid`/`star_ring` then so is `Rᵒᵖ` ([#9446](https://github.com/leanprover-community/mathlib/pull/#9446))

The definition is simply that `op (star r) = star (op r)`

### [2021-09-30T08:02:22+00:00](https://github.com/leanprover-community/mathlib/commit/d1f78e2e3541a382495f81a15b575ef9ad6864f7)
feat(order/filter/{basic, cofinite}, topology/subset_properties): filter lemmas, prereqs for [#8611](https://github.com/leanprover-community/mathlib/pull/#8611) ([#9419](https://github.com/leanprover-community/mathlib/pull/#9419))

### [2021-09-30T08:02:21+00:00](https://github.com/leanprover-community/mathlib/commit/f76d01983e64cf04970ab405e87a4fe5d754d2e0)
chore({field,ring}_theory): generalize `fraction_ring` and `is_separable` to rings ([#9415](https://github.com/leanprover-community/mathlib/pull/#9415))

These used to be defined only for `integral_domain`s resp. `field`s, however the construction makes sense even for `comm_ring`s. So we can just do the generalization for free, and moreover it makes certain proof terms in their definition a lot smaller. Together with [#9414](https://github.com/leanprover-community/mathlib/pull/#9414), this helps against [timeouts when combining `localization` and `polynomial`](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60variables.60.20doesn't.20time.20out.20but.20inline.20params.20do), although the full test case is still quite slow (going from >40sec to approx 11 sec).

### [2021-09-30T08:02:19+00:00](https://github.com/leanprover-community/mathlib/commit/92526c89e4279306afd291f36d413b8d537fe91d)
chore(ring_theory/localization): speed up `localization` a bit ([#9414](https://github.com/leanprover-community/mathlib/pull/#9414))

Now `nsmul` and `gsmul` are irreducible on `localization`. This helps against [timeouts when combining `localization` and `polynomial`](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60variables.60.20doesn't.20time.20out.20but.20inline.20params.20do), although the full test case is still quite slow (going from >40sec to approx 11 sec).

### [2021-09-30T06:24:50+00:00](https://github.com/leanprover-community/mathlib/commit/8b238eb47d2f00885a0a27fbf2658fcf8d8c7d3e)
refactor(data/mv_polynomial/equiv): simplify option_equiv_left ([#9427](https://github.com/leanprover-community/mathlib/pull/#9427))

### [2021-09-30T05:32:29+00:00](https://github.com/leanprover-community/mathlib/commit/c7dd27d7705f31c41e6a70d6a71e9634eda43dbd)
split(analysis/convex/jensen): split Jensen's inequalities off `analysis.convex.function` ([#9445](https://github.com/leanprover-community/mathlib/pull/#9445))

### [2021-09-30T02:54:54+00:00](https://github.com/leanprover-community/mathlib/commit/d9ed0732f75c6276ef9be836c6d4268d8e977d82)
chore(scripts): update nolints.txt ([#9459](https://github.com/leanprover-community/mathlib/pull/#9459))

I am happy to remove some nolints for you!

### [2021-09-30T02:06:41+00:00](https://github.com/leanprover-community/mathlib/commit/f254c2f80487370c368a6bd6785cd1001294c7d2)
refactor(analysis/normed_space/{dual, pi_Lp}): split out inner product space parts ([#9388](https://github.com/leanprover-community/mathlib/pull/#9388))

This is just moving code, no math changes.

https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/New.20folder.20analysis.2Finner_product_space

### [2021-09-29T21:38:23+00:00](https://github.com/leanprover-community/mathlib/commit/519ab3515c4dcc24563d51167ed638a52ce9ae4c)
feat(topology/metric_space/basic): nonempty intersections of balls ([#9448](https://github.com/leanprover-community/mathlib/pull/#9448))

### [2021-09-29T21:38:22+00:00](https://github.com/leanprover-community/mathlib/commit/acced829123f1eef1694cfa851e82db3f101f195)
chore(*): linting ([#9343](https://github.com/leanprover-community/mathlib/pull/#9343))

### [2021-09-29T20:27:33+00:00](https://github.com/leanprover-community/mathlib/commit/3681b5a47a57aad59879a49d8bf95c793df871a7)
split(analysis/convex/slope): split slope results off `analysis.convex.function` ([#9444](https://github.com/leanprover-community/mathlib/pull/#9444))

### [2021-09-29T18:44:41+00:00](https://github.com/leanprover-community/mathlib/commit/eca3fd9a94dbc46c21eb9aac69c81c36736eac61)
feat(data/real/ennreal): composition of coercion of natural numbers in ennreal ([#9447](https://github.com/leanprover-community/mathlib/pull/#9447))

### [2021-09-29T16:34:59+00:00](https://github.com/leanprover-community/mathlib/commit/88e613e7ffa1456e6ec3f05dcd6d1e5edca902cb)
feat(data/mv_polynomial/cardinal): cardinalities of polynomial rings ([#9384](https://github.com/leanprover-community/mathlib/pull/#9384))




Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-09-29T16:34:57+00:00](https://github.com/leanprover-community/mathlib/commit/2cd1d046517d5a8c0aa310550aa90fea719f0a20)
feat(group_theory/sylow): Sylow's theorems for infinite groups ([#9288](https://github.com/leanprover-community/mathlib/pull/#9288))

This PR contains all three of Sylow's theorems for infinite groups, building off the work of @ChrisHughes24 in the `ch_sylow2` branch of mathlib.

Later, I'll PR some consequences (e.g., index of normalizer stuff, maybe a golf of the original sylow stuff using the new results, Frattini's argument, ...).



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-09-29T14:22:40+00:00](https://github.com/leanprover-community/mathlib/commit/9535c087ec1293951903474520e56093638794c0)
feat(linear_algebra/affine_space/combination, analysis/convex/combination): basic lemmas about affine combinations, center of mass, centroid ([#9103](https://github.com/leanprover-community/mathlib/pull/#9103))




Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2021-09-29T13:14:50+00:00](https://github.com/leanprover-community/mathlib/commit/9e91b7068606f4b5c230148be2147de584bab452)
feat(analysis/convex/function): define strictly convex/concave functions ([#9439](https://github.com/leanprover-community/mathlib/pull/#9439))

### [2021-09-29T11:22:48+00:00](https://github.com/leanprover-community/mathlib/commit/6f609bafe2286ee295d9d04df0284fae5966dc4a)
feat(data/mv_polynomial/basic): aeval_tower ([#9429](https://github.com/leanprover-community/mathlib/pull/#9429))

### [2021-09-29T11:22:47+00:00](https://github.com/leanprover-community/mathlib/commit/43c1ab27f42d9f057664dbc04d77fbf28e3f7c3c)
fix(linear_algebra/basic): generalize `linear_map.add_comm_group` to semilinear maps ([#9402](https://github.com/leanprover-community/mathlib/pull/#9402))

Also generalizes `coe_mk` and golfs some proofs.

### [2021-09-29T10:20:15+00:00](https://github.com/leanprover-community/mathlib/commit/d2463aa3dda5014798cb7dba7f6893b38a6662f2)
feat(ring_theory/algebraic): is_algebraic_of_larger_base_of_injective ([#9433](https://github.com/leanprover-community/mathlib/pull/#9433))




Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2021-09-29T09:37:26+00:00](https://github.com/leanprover-community/mathlib/commit/e1506687785abf647fb2fff67ef019611de704ad)
chore(topology/sheaves): fix timeout by splitting proof ([#9436](https://github.com/leanprover-community/mathlib/pull/#9436))

In [#7033](https://github.com/leanprover-community/mathlib/pull/#7033) we were getting a timeout in `app_surjective_of_stalk_functor_map_bijective`. Since the proof looks like it has two rather natural components, I split out the first half into its own lemma. This is a separate PR since I don't really understand the topology/sheaf library, so I might be doing something very weird.

Timings:
 * original (master): 4.42s
 * original (master + [#7033](https://github.com/leanprover-community/mathlib/pull/#7033)): 5.93s
 * new (master + this PR): 4.24s + 316ms
 * new (master + [#7033](https://github.com/leanprover-community/mathlib/pull/#7033) + this PR): 5.48s + 212ms

### [2021-09-29T09:37:24+00:00](https://github.com/leanprover-community/mathlib/commit/0de54327c0980ae09746f716e581286135612045)
feat(data/W/cardinal): results about cardinality of W-types ([#9210](https://github.com/leanprover-community/mathlib/pull/#9210))



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-09-29T08:41:05+00:00](https://github.com/leanprover-community/mathlib/commit/c758cec755ab94194cd13f422bdb933c040cd379)
chore(analysis/convex/function): change `add_comm_monoid` to `add_comm_group` when carrier type is module of scalars containing -1 ([#9442](https://github.com/leanprover-community/mathlib/pull/#9442))

Related [Zulip conversation](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Convexity.20refactor/near/255268131)

### [2021-09-29T04:03:07+00:00](https://github.com/leanprover-community/mathlib/commit/d7abdff7d5abd82d0fbdf795e2a0766150e06c42)
chore(analysis/normed_space/*): prereqs for [#8611](https://github.com/leanprover-community/mathlib/pull/#8611) ([#9379](https://github.com/leanprover-community/mathlib/pull/#9379))

The functions `abs` and `norm_sq` on `ℂ` are proper.

A matrix with entries in a {seminormed group, normed group, normed space} is itself a {seminormed group, normed group, normed space}.

An injective linear map with finite-dimensional domain is a closed embedding.

### [2021-09-29T04:03:06+00:00](https://github.com/leanprover-community/mathlib/commit/8bd75b26d81f7917d90ad9ea2cdcae0590e78faf)
feat(measure_theory/measure/haar_lebesgue): properties of Haar measure on real vector spaces ([#9325](https://github.com/leanprover-community/mathlib/pull/#9325))

We show that any additive Haar measure on a finite-dimensional real vector space is rescaled by a linear map through its determinant, and we compute the measure of balls and spheres.

### [2021-09-29T04:03:04+00:00](https://github.com/leanprover-community/mathlib/commit/861d3bc4f6b8c5441be17e89d327d71850a686c9)
chore(order/preorder_hom): more homs, golf a few proofs ([#9256](https://github.com/leanprover-community/mathlib/pull/#9256))

### New `preorder_hom`s

* `preorder_hom.curry`: an order isomorphism between `α × β →ₘ γ` and `α →ₘ β →ₘ γ`;
* `preorder_hom.compₘ`: a fully bundled version of `preorder_hom.comp`;
* `preorder_hom.prodₘ`: a fully bundled version of `preorder_hom.prod`;
* `preorder_hom.prod_iso`: Order isomorphism between the space of
  monotone maps to `β × γ` and the product of the spaces +of monotone
  maps to `β` and `γ`;
* `preorder_hom.pi`: construct a bundled monotone map `α →ₘ Π i, π i`
  from a family of monotone maps +`f i : α →ₘ π i`;
* `preorder_hom.pi_iso`: same thing, as an `order_iso`;
* `preorder_hom.dual`: interpret `f : α →ₘ β` as `order_dual α →ₘ order_dual β`;
* `preorder_hom.dual_iso`: same as an `order_iso` (with one more
  `order_dual` to get a monotone map, not an antitone map);

### Renamed/moved `preorder_hom`s

The following `preorder_hom`s were renamed and/or moved from
`order.omega_complete_partial_order` to `order.preorder_hom`.

* `preorder_hom.const` : moved, bundle as `β →ₘ α →ₘ β`;
* `preorder_hom.prod.diag` : `preorder_hom.diag`;
* `preorder_hom.prod.map` : `preorder_hom.prod_map`;
* `preorder_hom.prod.fst` : `preorder_hom.fst`;
* `preorder_hom.prod.snd` : `preorder_hom.snd`;
* `preorder_hom.prod.zip` : `preorder_hom.prod`;
* `pi.monotone_apply` : `pi.eval_preorder_hom`;
* `preorder_hom.monotone_apply` : `preorder_hom.apply`;
* `preorder_hom.to_fun_hom` : moved.

### Other changes

* add an instance `can_lift (α → β) (α →ₘ β)`;
- rename `omega_complete_partial_order.continuous.to_monotone` to
  `omega_complete_partial_order.continuous'.to_monotone` to enable dot
  notation, same with
  `omega_complete_partial_order.continuous.to_bundled`;
* use `order_dual` to get some proofs;
* golf some proofs;
* redefine `has_Inf.Inf` and `has_Sup.Sup` using `infi`/`supr`;
* generalize some `mono` lemmas;
* use notation `→ₘ`.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-09-29T03:09:45+00:00](https://github.com/leanprover-community/mathlib/commit/49805e685eacdf2a61b71c6f04e57f4ba82428f0)
chore(scripts): update nolints.txt ([#9441](https://github.com/leanprover-community/mathlib/pull/#9441))

I am happy to remove some nolints for you!

### [2021-09-28T23:13:37+00:00](https://github.com/leanprover-community/mathlib/commit/73afb6c76a488f0a3a08882e744fad55292be77e)
chore(data/fintype/basic): add `fintype.card_set` ([#9434](https://github.com/leanprover-community/mathlib/pull/#9434))

### [2021-09-28T20:09:13+00:00](https://github.com/leanprover-community/mathlib/commit/e2cb9e19f1000786215594ac62287f77be8f48bf)
feat(data/mv_polynomial/supported): subalgebra of polynomials supported by a set of variables ([#9183](https://github.com/leanprover-community/mathlib/pull/#9183))




Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-09-28T16:57:32+00:00](https://github.com/leanprover-community/mathlib/commit/e18b9cac0a59e6649cd3cd96e75461d12401e074)
feat(set_theory/continuum): define `cardinal.continuum := 2 ^ ω` ([#9354](https://github.com/leanprover-community/mathlib/pull/#9354))

### [2021-09-28T14:01:07+00:00](https://github.com/leanprover-community/mathlib/commit/15f15a6e76f65b0b56938e3db831c2cde1431814)
chore(order/*): replace `mono_incr` and `mono_decr` in lemma names wih `monotone` and `antitone` ([#9428](https://github.com/leanprover-community/mathlib/pull/#9428))

This change was performed as a find-and-replace. No occurrences of `incr` or `decr` appear as tokens in lemma names after this change.

### [2021-09-28T14:01:05+00:00](https://github.com/leanprover-community/mathlib/commit/2d5fd65503a4cde92ba37207afdc6ebce525f3dc)
fix(algebra/opposites): add a missing `comm_semiring` instance ([#9425](https://github.com/leanprover-community/mathlib/pull/#9425))

### [2021-09-28T14:01:04+00:00](https://github.com/leanprover-community/mathlib/commit/84bbb00f413a22bd9b44c5911a03d580ed857fdb)
feat(data/set/intervals): add `order_iso.image_Ixx` lemmas ([#9404](https://github.com/leanprover-community/mathlib/pull/#9404))

### [2021-09-28T11:33:36+00:00](https://github.com/leanprover-community/mathlib/commit/4a02fd3bf80d43fd7965c1bfc3361765d828d0eb)
refactor(algebra/order/ring,data/complex): redefine `ordered_comm_ring` and complex order ([#9420](https://github.com/leanprover-community/mathlib/pull/#9420))

* `ordered_comm_ring` no longer extends `ordered_comm_semiring`.
  We add an instance `ordered_comm_ring.to_ordered_comm_semiring` instead.
* redefine complex order in terms of `re` and `im` instead of existence of a nonnegative real number.
* simplify `has_star.star` on `complex` to `conj`;
* rename `complex.complex_partial_order` etc to `complex.partial_order` etc, make them protected.

### [2021-09-28T11:33:35+00:00](https://github.com/leanprover-community/mathlib/commit/06610c7030f9e808ce4a9aa3216f736f421052d9)
feat(data/list/basic): lemmas about tail ([#9259](https://github.com/leanprover-community/mathlib/pull/#9259))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-28T11:33:33+00:00](https://github.com/leanprover-community/mathlib/commit/c0dbe14df242e4f39cf8326b4acee94226979364)
feat(linear_algebra/matrix/fpow): integer powers of matrices ([#8683](https://github.com/leanprover-community/mathlib/pull/#8683))

Since we have an inverse defined for matrices via `nonsing_inv`, we provide a `div_inv_monoid` instance for matrices.
The instance provides the ability to refer to integer power of matrices via the auto-generated `gpow`.
This is done in a new file to allow selective use.

Many API lemmas are provided to facilitate usage of the new `gpow`, many copied in form/content from
`algebra/group_with_zero/power.lean`, which provides a similar API.

### [2021-09-28T07:29:17+00:00](https://github.com/leanprover-community/mathlib/commit/01adfd65f18f164ef7865da563733ee7e436b73d)
chore(analysis/special_functions): add some `@[simp]` attrs ([#9423](https://github.com/leanprover-community/mathlib/pull/#9423))

Add `@[simp]` attrs to `real.sin_add_pi` and similar lemmas.

### [2021-09-28T07:29:16+00:00](https://github.com/leanprover-community/mathlib/commit/610861666826c95213acd9dac829a2321e141b64)
doc(*): remove docstrings from copyright headers ([#9411](https://github.com/leanprover-community/mathlib/pull/#9411))

This moves/removes the docs from the copyright header that are enough to make for the missing module docstring/redundant with the module docstring.

### [2021-09-28T07:29:14+00:00](https://github.com/leanprover-community/mathlib/commit/36c09f7bca463df3522d0ae22a5151e030e9cd85)
doc(order/*): use "monotone" / "antitone" in place of "monotonically increasing" / "monotonically decreasing" ([#9408](https://github.com/leanprover-community/mathlib/pull/#9408))

This PR cleans up the references to monotone and antitone function in lemmas and docstrings.

It doesn't touch anything beyond the docstrings.



Co-authored-by: Oliver Nash <github@olivernash.org>

### [2021-09-28T07:29:13+00:00](https://github.com/leanprover-community/mathlib/commit/22f24091ff57e1df978feab5319826aa01eaf3b2)
chore(measure_theory/integral/interval_integral): change of variables for normed-space target ([#9350](https://github.com/leanprover-community/mathlib/pull/#9350))

Re-state change of variables for `interval_integral` for a function with target a real normed space `E`, rather than just `ℝ`.  The proofs are exactly the same.

### [2021-09-28T06:33:23+00:00](https://github.com/leanprover-community/mathlib/commit/1db626eec5b646d4f627807feed65fd516ad3518)
feat(analysis/normed_space/is_bounded_bilinear_map): direct proof of continuity ([#9390](https://github.com/leanprover-community/mathlib/pull/#9390))

Previously `is_bounded_bilinear_map.continuous`, the continuity of a bounded bilinear map, was deduced from its differentiability and lived in `analysis.calculus.fderiv`.  This PR gives a direct proof so it can live in `analysis.normed_space.bounded_linear_maps`.

Two consequences of this lemma are also moved earlier in the hierarchy:
- `continuous_linear_equiv.is_open`, the openness of the set of continuous linear equivalences in the space of continuous linear maps, moves from `analysis.calculus.fderiv` to `analysis.normed_space.bounded_linear_maps`
- `continuous_inner`, the continuity of the inner product, moves from `analysis.inner_product_space.calculus` to `analysis.inner_product_space.basic`.

Previously discussed at
https://github.com/leanprover-community/mathlib/pull/4407#pullrequestreview-506198222



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-09-28T03:23:06+00:00](https://github.com/leanprover-community/mathlib/commit/4b5bf56bd3ca987620453f27491737c8eedc68a7)
feat(measure_theory/integral/interval_integral): one more FTC-2 ([#9409](https://github.com/leanprover-community/mathlib/pull/#9409))

### [2021-09-28T01:02:53+00:00](https://github.com/leanprover-community/mathlib/commit/8c5d93b0687da6048c1823ef6b87d00925095025)
feat(analysis/special_functions/complex/log): `exp ⁻¹' s` is countable ([#9410](https://github.com/leanprover-community/mathlib/pull/#9410))

Also prove that the preimage of a countable set under an injective map
is countable.

### [2021-09-28T01:02:52+00:00](https://github.com/leanprover-community/mathlib/commit/b21bc971b99aa41dbb99e45f0b47697142ef90d7)
feat(analysis/special_functions): limits of `arg` and `log` at a real negative ([#9406](https://github.com/leanprover-community/mathlib/pull/#9406))

Also add a `can_lift ℂ ℝ` instance.

### [2021-09-27T22:35:23+00:00](https://github.com/leanprover-community/mathlib/commit/827951056fdecf01bf739cf43177b7fca68d6d4f)
feat(*): Clean up some misstated lemmas about algebra ([#9417](https://github.com/leanprover-community/mathlib/pull/#9417))

Similar to [#9395](https://github.com/leanprover-community/mathlib/pull/#9395) clean up a few lemmas whose statement doesn't match the name / docstring about algebraic things, all of these are duplicates of other lemmas, so look like copy paste errors.

### [2021-09-27T20:53:13+00:00](https://github.com/leanprover-community/mathlib/commit/0d37fd674f62c48c2d1c1dc32c2f58ca2fb84412)
feat(data/polynomial/algebra_map): aeval_tower ([#9250](https://github.com/leanprover-community/mathlib/pull/#9250))



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-09-27T17:49:20+00:00](https://github.com/leanprover-community/mathlib/commit/f181d81facf856aed7f11600bfb85efd48996d24)
chore(analysis/special_functions/exp_log): add some missing dot notation lemmas ([#9405](https://github.com/leanprover-community/mathlib/pull/#9405))

### [2021-09-27T17:49:19+00:00](https://github.com/leanprover-community/mathlib/commit/9175158f6d6995aed4ded674c4d8ad79a462d12d)
refactor(analysis/convex/function): generalize lemmas about convexity/concavity of functions, prove concave Jensen ([#9356](https://github.com/leanprover-community/mathlib/pull/#9356))

`convex_on` and `concave_on` are currently only defined for real vector spaces. This generalizes ℝ to an arbitrary `ordered_semiring`. As a result, we now have the concave Jensen inequality for free.

### [2021-09-27T13:07:20+00:00](https://github.com/leanprover-community/mathlib/commit/5dfb76f501099e26d423048e9f81e5fbf01b5593)
feat(analysis/calculus/fderiv): generalize `const_smul` lemmas ([#9399](https://github.com/leanprover-community/mathlib/pull/#9399))

### [2021-09-27T13:07:18+00:00](https://github.com/leanprover-community/mathlib/commit/954896a1871dcdc5cf2b34ab8194306f36b5daca)
feat(data/nat/choose/cast): Cast of binomial coefficients equals a Pochhammer polynomial ([#9394](https://github.com/leanprover-community/mathlib/pull/#9394))

This adds some glue between `nat.factorial`/`nat.asc_factorial`/`nat.desc_factorial` and `pochhammer` to provide some API to calculate binomial coefficients in a semiring. For example, `n.choose 2` as a real is `n * (n - 1)/2`.

I also move files as such:
* create `data.nat.choose.cast`
* create `data.nat.factorial.cast`
* rename `data.nat.factorial` to `data.nat.factorial.basic`

### [2021-09-27T13:07:17+00:00](https://github.com/leanprover-community/mathlib/commit/9a30f8cfd231b42f3a5313bca49fa9d821b0993a)
refactor(data/fin): drop `fin.cast_add_right` ([#9371](https://github.com/leanprover-community/mathlib/pull/#9371))

This was a duplicate of `fin.nat_add`. Also simplify some definitions of equivalences.

### [2021-09-27T10:29:19+00:00](https://github.com/leanprover-community/mathlib/commit/850784cfda5abc355ddd7a9295467a2750c5434a)
chore(order/*): rename `strict_mono_{incr,decr}_on` to `strict_{mono,anti}_on` ([#9401](https://github.com/leanprover-community/mathlib/pull/#9401))

This was done as a direct find and replace

### [2021-09-27T10:29:16+00:00](https://github.com/leanprover-community/mathlib/commit/14727997f91abe819223bfe3d9268b83f7460a87)
chore(order): globally replace "antimono" with "antitone" ([#9400](https://github.com/leanprover-community/mathlib/pull/#9400))

This was done with the regex `(?<=\b|_)antimono(?=\b|_)`

### [2021-09-27T10:29:14+00:00](https://github.com/leanprover-community/mathlib/commit/d1c68ef7c38a2a24fef440e00528351c5de3da14)
docs(docker): adjust readme to reflect that the PR was merged ([#9303](https://github.com/leanprover-community/mathlib/pull/#9303))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-27T09:34:51+00:00](https://github.com/leanprover-community/mathlib/commit/cafd6fbc04d41a31e3fc11fbcadc890a1d8dd574)
chore(measure_theory/decomposition/lebesgue): rename `radon_nikodym_deriv` to `rn_deriv` ([#9386](https://github.com/leanprover-community/mathlib/pull/#9386))

### [2021-09-27T04:20:23+00:00](https://github.com/leanprover-community/mathlib/commit/a4b92a3ff4211ef100372c7109bf59114865c42b)
refactor(analysis/special_functions/trigonometric): split file ([#9340](https://github.com/leanprover-community/mathlib/pull/#9340))

Another mammoth file, cut into several pieces.

### [2021-09-26T22:22:00+00:00](https://github.com/leanprover-community/mathlib/commit/62abfe5262fcce175550d7c87b363b9ad95d7ca5)
refactor(measure_theory/measure/hausdorff): move `dimH` to a new file, redefine ([#9391](https://github.com/leanprover-community/mathlib/pull/#9391))

* move definition of the Hausdorff dimension to a new file
  `topology.metric_space.hausdorff_dimension`;
* move `dimH` and related lemmas to the root namespace;
* rewrite the definition so that it no longer requires
  `[measurable_space X] [borel_space X]`; use `rw dimH_def` to get a
  version using `[measurable_space X]` from the environment;
* add `dimH_le`, `set.finite.dimH_zero` and `finset.dimH_zero`;
* make `dimH` irreducible.

### [2021-09-26T22:21:59+00:00](https://github.com/leanprover-community/mathlib/commit/432271f9d0c910ee17c81f6c9c8719bec169b6da)
feat(algebra/pointwise): add smul_set_inter ([#9374](https://github.com/leanprover-community/mathlib/pull/#9374))

From [#2819](https://github.com/leanprover-community/mathlib/pull/#2819) .

### [2021-09-26T21:40:02+00:00](https://github.com/leanprover-community/mathlib/commit/996783ce56990a400fde57efa867759dec6fb15e)
feat(topology/sheaves/stalks): Generalize from Type to algebraic categories ([#9357](https://github.com/leanprover-community/mathlib/pull/#9357))

Previously, basic lemmas about stalks like `germ_exist` and `section_ext` were only available for `Type`-valued (pre)sheaves. This PR generalizes these to (pre)sheaves valued in any concrete category where the forgetful functor preserves filtered colimits, which includes most algebraic categories like `Group` and `CommRing`. For the statements about stalks maps, we additionally assume that the forgetful functor reflects isomorphisms and preserves limits.

### [2021-09-26T12:40:21+00:00](https://github.com/leanprover-community/mathlib/commit/865ad4787e1842cb58f8c8143d4a99c5d4e63586)
feat(algebra/module/pointwise_pi): add a file with lemmas on smul_pi ([#9369](https://github.com/leanprover-community/mathlib/pull/#9369))

Make a new file rather than add an import to either of `algebra.pointwise` or `algebra.module.pi`.

From [#2819](https://github.com/leanprover-community/mathlib/pull/#2819)

### [2021-09-26T10:39:54+00:00](https://github.com/leanprover-community/mathlib/commit/b3ca07f84b49b32ae7f60dc8817a429840462961)
docs(undergrad): Add trigonometric Weierstrass ([#9393](https://github.com/leanprover-community/mathlib/pull/#9393))

### [2021-09-26T10:39:53+00:00](https://github.com/leanprover-community/mathlib/commit/4ae46db437552790ff17a654a2c284ebac12977a)
feat(field_theory/is_alg_closed): more isomorphisms of algebraic closures ([#9376](https://github.com/leanprover-community/mathlib/pull/#9376))

### [2021-09-26T10:39:52+00:00](https://github.com/leanprover-community/mathlib/commit/453f2183f268b3c80786a02e2f646cf3c1ba1b4a)
refactor(linear_algebra/charpoly): move linear_algebra/charpoly to linear_algebra/matrix/charpoly ([#9368](https://github.com/leanprover-community/mathlib/pull/#9368))

We move `linear_algebra/charpoly`to `linear_algebra/matrix/charpoly`, since the results there are for matrices. We also rename some lemmas in `linear_algebra/matrix/charpoly/coeff` to have the namespace `matrix`.

### [2021-09-26T10:39:51+00:00](https://github.com/leanprover-community/mathlib/commit/a2517af6752c3c5ec676c12d84633c96d876d429)
refactor(data/fin,*): redefine `insert_nth`, add lemmas ([#9349](https://github.com/leanprover-community/mathlib/pull/#9349))

### `data/fin`

* add `fin.succ_above_cast_lt`, `fin.succ_above_pred`,
  `fin.cast_lt_succ_above`, `fin.pred_succ_above`;
* add `fin.exists_succ_above_eq` and `fin.exists_succ_above_eq_iff`,
  use the latter to prove `fin.range_succ_above`;
* add `@[simp]` to `fin.succ_above_left_inj`;
* add `fin.cases_succ_above` induction principle, redefine
  `fin.insert_nth` to be `fin.cases_succ_above`;
* add lemmas about `fin.insert_nth` and some algebraic operations.

### `data/fintype/basic`

* add `finset.insert_compl_self`;
* add `fin.image_succ_above_univ`, `fin.image_succ_univ`,
  `fin.image_cast_succ` and use them to prove `fin.univ_succ`,
  `fin.univ_cast_succ`, and `fin.univ_succ_above` using `by simp`;

### `data/fintype/card`

* slightly golf the proof of `fin.prod_univ_succ_above`;
* use `@[to_additive]` to generate some proofs.

### `topology/*`

* prove continuity of `fin.insert_nth` in both arguments and add all
  the standard dot-notation `*.fin_insert_nth` lemmas (`*` is one of
  `filter.tendsto`, `continuous_at`, `continuous_within_at`,
  `continuous_on`, `continuous`).

### [2021-09-26T08:35:17+00:00](https://github.com/leanprover-community/mathlib/commit/83470aff743bfa2f4d524a496842a14f14f38239)
feat(algebra/order/ring): add odd_neg, odd_abs, generalize dvd/abs lemmas ([#9362](https://github.com/leanprover-community/mathlib/pull/#9362))

### [2021-09-26T07:23:13+00:00](https://github.com/leanprover-community/mathlib/commit/def1c02a32842087b1d41e97dd806b11b74b7e23)
refactor(analysis/convex/function): generalize definition of `convex_on`/`concave_on` to allow any (ordered) scalars ([#9389](https://github.com/leanprover-community/mathlib/pull/#9389))

`convex_on` and `concave_on` are currently only defined for real vector spaces. This generalizes ℝ to an arbitrary `ordered_semiring` in the definition.

### [2021-09-26T02:41:05+00:00](https://github.com/leanprover-community/mathlib/commit/793a598beb601592cc04cfd4828013e105d3892e)
chore(scripts): update nolints.txt ([#9392](https://github.com/leanprover-community/mathlib/pull/#9392))

I am happy to remove some nolints for you!

### [2021-09-25T17:07:10+00:00](https://github.com/leanprover-community/mathlib/commit/98665267ecf115bbbee37ec22e6a4d23b183114c)
feat(data/multiset/basic): add lemma that `multiset.map f` preserves `count` under certain assumptions on `f` ([#9117](https://github.com/leanprover-community/mathlib/pull/#9117))

### [2021-09-25T16:04:00+00:00](https://github.com/leanprover-community/mathlib/commit/168806c0e3bfc274ff832c9b593e568303cd05c7)
feat(measure_theory/integral/lebesgue): lintegral is strictly monotone under some conditions ([#9373](https://github.com/leanprover-community/mathlib/pull/#9373))

### [2021-09-25T15:05:39+00:00](https://github.com/leanprover-community/mathlib/commit/eba2b2e67731b7bcd1599088997ae12d5179b266)
feat(measure_theory/function/l1_space): add integrability lemma for `measure.with_density` ([#9367](https://github.com/leanprover-community/mathlib/pull/#9367))

### [2021-09-25T09:01:16+00:00](https://github.com/leanprover-community/mathlib/commit/6ea816834c76943b6568af83682de8d54ef3d675)
refactor(topology/compact_open): use bundled continuous maps ([#9351](https://github.com/leanprover-community/mathlib/pull/#9351))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-25T06:48:09+00:00](https://github.com/leanprover-community/mathlib/commit/51ad06e5a86554fc42398b6f90b021685ce36665)
refactor(analysis/inner_product_space/*): split big file ([#9382](https://github.com/leanprover-community/mathlib/pull/#9382))

This PR makes a new folder `analysis/inner_product_space/*` comprising several files splitting the old `analysis/normed_space/inner_product` (which had reached 2900 lines!).

https://leanprover.zulipchat.com/#narrow/stream/116395-maths

### [2021-09-25T06:48:08+00:00](https://github.com/leanprover-community/mathlib/commit/55d8cd0ab7ebd37462e8f55e98ddc753f3782698)
chore(scripts): update nolints.txt ([#9381](https://github.com/leanprover-community/mathlib/pull/#9381))

I am happy to remove some nolints for you!

### [2021-09-25T06:48:07+00:00](https://github.com/leanprover-community/mathlib/commit/42d8243576378e1918f17ae3231450ed92585b3c)
feat(data/polynomial/eval): map_equiv ([#9375](https://github.com/leanprover-community/mathlib/pull/#9375))

### [2021-09-25T04:13:25+00:00](https://github.com/leanprover-community/mathlib/commit/59b9ebb1ba2ebd078e9d6d1080c820930a02fade)
feat(algebra/group/to_additive): customize the relevant argument ([#9138](https://github.com/leanprover-community/mathlib/pull/#9138))

`@[to_additive]` now automatically checks for each declaration what the first argument is with a multiplicative structure on it. 
This is now the argument that is tested when executing later occurrences of `@[to_additive]` for a fixed type to decide whether this declaration should be translated or not.

### [2021-09-25T01:43:26+00:00](https://github.com/leanprover-community/mathlib/commit/64b794a0aae303e3ef9b8c7b5003db6e33a4e05e)
chore(analysis/complex/basic): rename `complex/normed_space` ([#9366](https://github.com/leanprover-community/mathlib/pull/#9366))

This matches `module.complex_to_real`

### [2021-09-24T21:40:17+00:00](https://github.com/leanprover-community/mathlib/commit/b0cd1f9c6acde4f0017a0321792108e8c60cd066)
chore(algebra/group): move is_unit.inv lemmas ([#9364](https://github.com/leanprover-community/mathlib/pull/#9364))

### [2021-09-24T21:40:16+00:00](https://github.com/leanprover-community/mathlib/commit/c42aaa3d23084b293ae5f5e8656a24c2d6dd5e47)
chore(data/pi): add missing `pi.{inv,neg}_def` ([#9361](https://github.com/leanprover-community/mathlib/pull/#9361))

### [2021-09-24T21:40:15+00:00](https://github.com/leanprover-community/mathlib/commit/8ff756cb9b2f9b64a9cce17caf43bdb3c140171b)
feat(group_theory/*/pointwise): Copy set lemmas about pointwise actions to subgroups and submonoids ([#9359](https://github.com/leanprover-community/mathlib/pull/#9359))

This is pretty much just a copy-and-paste job. At least the proofs themselves don't need copying. The set lemmas being copied here are:

https://github.com/leanprover-community/mathlib/blob/a9cd8c259d59b0bdbe931a6f8e6084f800bd7162/src/algebra/pointwise.lean#L607-L680

I skipped the `preimage_smul` lemma for now because I couldn't think of a useful statement using `map`.

### [2021-09-24T19:49:10+00:00](https://github.com/leanprover-community/mathlib/commit/18f06ecf0dcc479872295d1546035e46692eb0e6)
chore(measure_theory/integral/interval_integral): generalize `integral_smul` ([#9355](https://github.com/leanprover-community/mathlib/pull/#9355))

Make sure that it works for scalar multiplication by a complex number.

### [2021-09-24T19:49:09+00:00](https://github.com/leanprover-community/mathlib/commit/7cb72461b2ffee31b357ede5d6fd0c370012962a)
chore(linear_algebra/basic): add `linear_map.neg_comp`, generalize `linear_map.{sub,smul}_comp` ([#9335](https://github.com/leanprover-community/mathlib/pull/#9335))

`sub_comp` had unnecessary requirements that the codomain of the right map be an additive group, while `smul_comp` did not support compatible actions.

This also golfs the proofs of all the `comp_*` lemmas to eliminate `simp`.

`smul_comp` and `comp_smul` are also both promoted to instances.

### [2021-09-24T19:49:07+00:00](https://github.com/leanprover-community/mathlib/commit/c794c5c84327f3880394019504e3e80efbaf92a8)
chore(linear_algebra/basic): split out quotients and isomorphism theorems ([#9332](https://github.com/leanprover-community/mathlib/pull/#9332))

`linear_algebra.basic` had become a very large file; I think too unwieldy to even be able to edit.

Fortunately there are some natural splits on content. I moved everything about quotients out to `linear_algebra.quotient`. Happily many files in `linear_algebra/` don't even need this, so we also get some significant import reductions.

I've also moved Noether's three isomorphism theorems for submodules to their own file.



Co-authored-by: Frédéric Dupuis <dupuisf@iro.umontreal.ca>
Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-24T19:49:06+00:00](https://github.com/leanprover-community/mathlib/commit/6f2d1ba2137994d1063e14f96b668cdee360a3dc)
feat(data/dfinsupp): add submodule.bsupr_eq_range_dfinsupp_lsum ([#9202](https://github.com/leanprover-community/mathlib/pull/#9202))

Also a version for `add_submonoid`. Unfortunately the proofs are almost identical, but that's consistent with the surrounding bits of the file anyway.

The key result is a dfinsupp version of the lemma in [#8246](https://github.com/leanprover-community/mathlib/pull/#8246),
```lean
x ∈ (⨆ i (H : p i), f i) ↔ ∃ v : ι →₀ M, (∀ i, v i ∈ f i) ∧ ∑ i in v.support, v i = x ∧ (∀ i, ¬ p i → v i = 0) :=
```
as
```lean
x ∈ (⨆ i (h : p i), S i) ↔ ∃ f : Π₀ i, S i, dfinsupp.lsum ℕ (λ i, (S i).subtype) (f.filter p) = x
```

### [2021-09-24T13:55:52+00:00](https://github.com/leanprover-community/mathlib/commit/981f8baa13e1edb0c6018c09838d9b6e449824aa)
chore(*): remove some `assume`s ([#9365](https://github.com/leanprover-community/mathlib/pull/#9365))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-09-24T12:53:07+00:00](https://github.com/leanprover-community/mathlib/commit/e14cf589accbd72d970ef8486ca2d9c39f58c346)
feat(measure_theory/function/conditional_expectation): define the conditional expectation of a function, prove the equality of integrals ([#9114](https://github.com/leanprover-community/mathlib/pull/#9114))

This PR puts together the generalized Bochner integral construction of [#8939](https://github.com/leanprover-community/mathlib/pull/#8939) and the set function `condexp_ind` of [#8920](https://github.com/leanprover-community/mathlib/pull/#8920) to define the conditional expectation of a function.

The equality of integrals that defines the conditional expectation is proven in `set_integral_condexp`.

### [2021-09-24T11:04:41+00:00](https://github.com/leanprover-community/mathlib/commit/0db6caf8219924baaa6ddbb847d43ec41bb1d3b2)
feat(linear_algebra/affine_space/affine_map): add missing simp lemma `affine_map.homothety_apply_same` ([#9360](https://github.com/leanprover-community/mathlib/pull/#9360))

### [2021-09-24T11:04:40+00:00](https://github.com/leanprover-community/mathlib/commit/48883dcd064d0e1800aec4b21633c3a361d516c0)
chore(algebra/basic): split out facts about lmul ([#9300](https://github.com/leanprover-community/mathlib/pull/#9300))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-24T11:04:39+00:00](https://github.com/leanprover-community/mathlib/commit/854e5c6b5aca01fc9af9068a34190d8f9675a9cf)
refactor(measure_theory/measure/regular): add `inner_regular`, `outer_regular`, generalize ([#9283](https://github.com/leanprover-community/mathlib/pull/#9283))

### Regular measures

* add a non-class predicate `inner_regular` to prove some lemmas once, not twice;
* add TC `outer_regular`, drop primed lemmas;
* consistently use `≠ ∞`, `≠ 0` in the assumptions;
* drop some typeclass requirements.

### Other changes

* add a few lemmas about subtraction to `data.real.ennreal`;
* add `ennreal.add_lt_add_left`, `ennreal.add_lt_add_right`, and use them;

### [2021-09-24T11:04:38+00:00](https://github.com/leanprover-community/mathlib/commit/a512db14992965eeda11c139d62a3e2e85bece17)
feat(linear_algebra/free_modules): add instances ([#9223](https://github.com/leanprover-community/mathlib/pull/#9223))

We add the instances `module.finite` and `module.free` on `(M →+ N)`, for `M` and `N` finite and free abelian groups.

We already have the more general version over any ring, for `(M →ₗ[R] N)`. (They are mathematically more general, but not for Lean.)

### [2021-09-24T08:36:36+00:00](https://github.com/leanprover-community/mathlib/commit/6a9ba186bb1cf1c77c202a8e60154043ae256ca2)
feat(measure_theory): `ι → α ≃ᵐ α` if `[unique ι]` ([#9353](https://github.com/leanprover-community/mathlib/pull/#9353))

* define versions of `equiv.fun_unique` for `order_iso` and
  `measurable_equiv`;
* use the latter to relate integrals over (sets in) `ι → α` and `α`,
  where `ι` is a type with an unique element.

### [2021-09-24T08:36:35+00:00](https://github.com/leanprover-community/mathlib/commit/9e59e29134450f719e24ac3606e43c2ec211e9ea)
feat(category_theory/opposites): Add is_iso_op ([#9319](https://github.com/leanprover-community/mathlib/pull/#9319))




Co-authored-by: erd1 <the.erd.one@gmail.com>
Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-09-24T08:36:34+00:00](https://github.com/leanprover-community/mathlib/commit/9618d73c8cd6eb2bb6d3a3a056ba50908bdd586b)
feat(algebra,group_theory): smul_(g)pow ([#9311](https://github.com/leanprover-community/mathlib/pull/#9311))

Rename `smul_pow` to `smul_pow'` to match `smul_mul'`. Instead provide the distributing lemma `smul_pow` where the power distributes onto the scalar as well. Provide the group action `smul_gpow` as well.




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-09-24T06:10:23+00:00](https://github.com/leanprover-community/mathlib/commit/a9cd8c259d59b0bdbe931a6f8e6084f800bd7162)
feat(linear_algebra): redefine `linear_map` and `linear_equiv` to be semilinear ([#9272](https://github.com/leanprover-community/mathlib/pull/#9272))

This PR redefines `linear_map` and `linear_equiv` to be semilinear maps/equivs.

A semilinear map `f` is a map from an `R`-module to an `S`-module with a ring homomorphism `σ` between `R` and `S`, such that `f (c • x) = (σ c) • (f x)`. If we plug in the identity into `σ`, we get regular linear maps, and if we plug in the complex conjugate, we get conjugate linear maps. There are also other examples (e.g. Frobenius-linear maps) where this is useful which are covered by this general formulation. This was discussed on Zulip [here](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Semilinear.20maps), and a few preliminaries for this have already been merged.

The main issue that we had to overcome involved composition of semilinear maps, and `symm` for linear equivalences: having things like `σ₂₃.comp σ₁₂` in the types of semilinear maps creates major problems. For example, we want the composition of two conjugate-linear maps to be a regular linear map, not a `conj.comp conj`-linear map. To solve this issue, following a discussion from back in January, we created two typeclasses to make Lean infer the right ring hom. The first one is `[ring_hom_comp_triple σ₁₂ σ₂₃ σ₁₃]` which expresses the fact that `σ₂₃.comp σ₁₂ = σ₁₃`, and the second one is `[ring_hom_inv_pair σ₁₂ σ₂₁]` which states that `σ₁₂` and `σ₂₁` are inverses of each other. There is also `[ring_hom_surjective σ]`, which is a necessary assumption to generalize some basic lemmas (such as `submodule.map`). Note that we have introduced notation to ensure that regular linear maps can still be used as before, i.e. `M →ₗ[R] N` still works as before to mean a regular linear map.

The main changes are in `algebra/module/linear_map.lean`, `data/equiv/module.lean` and `linear_algebra/basic.lean` (and `algebra/ring/basic.lean` for the `ring_hom` typeclasses). The changes in other files fall into the following categories:

1. When defining a regular linear map directly using the structure (i.e. when specifying `to_fun`, `map_smul'` and so on), there is a `ring_hom.id` that shows up in `map_smul'`. This mostly involves dsimping it away.
2. Elaboration seems slightly more brittle, and it fails a little bit more often than before. For example, when `f` is a linear map and `g` is something that can be coerced to a linear map (say a linear equiv), one has to write `↑g` to make `f.comp ↑g` work, or sometimes even to add a type annotation. This also occurs when using `trans` twice (i.e. `e₁.trans (e₂.trans e₃)`). In those places, we use the notation defined in [#8857](https://github.com/leanprover-community/mathlib/pull/#8857) `∘ₗ` and `≪≫ₗ`. 
3. It seems to exacerbate the bug discussed [here](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/odd.20repeated.20type.20class.20search) for reasons that we don't understand all that well right now. It manifests itself in very slow calls to the tactic `ext`, and the quick fix is to manually use the right ext lemma.
4. The PR triggered a few timeouts in proofs that were already close to the edge. Those were sped up.
5. A few random other issues that didn't arise often enough to see a pattern.

Co-authored-by: @hrmacbeth @robertylewis 



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>
Co-authored-by: Scott Morrison <scott@tqft.net>

### [2021-09-24T04:51:04+00:00](https://github.com/leanprover-community/mathlib/commit/a7a9c91eecfb9b9944bb0d92544522f1f71d5f93)
feat(ring_theory/localization): Localizing at units is isomorphic to the ring ([#9324](https://github.com/leanprover-community/mathlib/pull/#9324))




Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-09-24T02:10:32+00:00](https://github.com/leanprover-community/mathlib/commit/4a8fb6a3f0fa5bd3e66aad5f04c28fb63ebebf3f)
chore(linear_algebra): rename endomorphism multiplicative structures for consistency ([#9336](https://github.com/leanprover-community/mathlib/pull/#9336))

This renames:
* `module.endomorphism_semiring` → `module.End.semiring`
* `module.endomorphism_ring` → `module.End.ring`
* `module.endomorphism_algebra` → `module.End.algebra`
* `linear_map.module.End.division_ring` → `module.End.division_ring`

This brings the name in line with the names for `add_monoid.End`.

Since `module.End` is an abbreviation, it does not matter that the instances now use this instead of `M →ₗ[R] M`.

### [2021-09-24T01:29:26+00:00](https://github.com/leanprover-community/mathlib/commit/dd519dfa9a96b5d3cd600930c9dabb66da7e271e)
chore(*): linting ([#9342](https://github.com/leanprover-community/mathlib/pull/#9342))

### [2021-09-24T00:26:14+00:00](https://github.com/leanprover-community/mathlib/commit/1a341fd8340a280ded99480ab205670cec579e89)
feat(algebra/*): Tensor product is the fibered coproduct in CommRing ([#9338](https://github.com/leanprover-community/mathlib/pull/#9338))




Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-09-24T00:26:13+00:00](https://github.com/leanprover-community/mathlib/commit/2d17f521c43d5444cb3ce2406fd1e933a9f200e3)
feat(measure_theory/integral/*): integral over map (e : α ≃ᵐ β) μ  ([#9316](https://github.com/leanprover-community/mathlib/pull/#9316))

### [2021-09-24T00:26:12+00:00](https://github.com/leanprover-community/mathlib/commit/18f0093f5614e28e846ca330c7851a4a1a9ab5b5)
feat(measure_theory/measure/measure_space): add measure_Union_of_null_inter ([#9307](https://github.com/leanprover-community/mathlib/pull/#9307))

From [#2819](https://github.com/leanprover-community/mathlib/pull/#2819)

### [2021-09-24T00:26:11+00:00](https://github.com/leanprover-community/mathlib/commit/7e3256baa85e7f79c3ea87a2e09005ca0a7981a8)
feat(ring_theory/derivation): helper lemma for custom `derivation_ext` lemmas ([#9255](https://github.com/leanprover-community/mathlib/pull/#9255))

### [2021-09-24T00:26:10+00:00](https://github.com/leanprover-community/mathlib/commit/9b1f0bb6366ea1af16afd63eef39b382bc292e6b)
feat(topology/compact_open): convergence in the compact-open topology can be checked on compact sets ([#9240](https://github.com/leanprover-community/mathlib/pull/#9240))

### [2021-09-23T22:18:50+00:00](https://github.com/leanprover-community/mathlib/commit/d2f7b24d0bedd07d04a83b1a435e0c927e91bf02)
feat(algebra/pointwise): more to_additive attributes for new lemmas ([#9348](https://github.com/leanprover-community/mathlib/pull/#9348))

Some of these lemmas introduced in [#9226](https://github.com/leanprover-community/mathlib/pull/#9226) I believe.

Spun off from [#2819](https://github.com/leanprover-community/mathlib/pull/#2819).

### [2021-09-23T22:18:49+00:00](https://github.com/leanprover-community/mathlib/commit/88c79e573fcb799a82382faa59de2b438aa935de)
feat(data/fintype/basic): embeddings of fintypes based on cardinal inequalities ([#9346](https://github.com/leanprover-community/mathlib/pull/#9346))

From https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/mapping.20a.20fintype.20into.20a.20finset/near/254493754, based on suggestions by @kmill  and @eric-wieser and @riccardobrasca.

### [2021-09-23T22:18:48+00:00](https://github.com/leanprover-community/mathlib/commit/c950c45e395c8624aadfa6ebfe48cd1207c3cb91)
feat(analysis/calculus/[f]deriv): derivative of pointwise composition/application of continuous linear maps ([#9174](https://github.com/leanprover-community/mathlib/pull/#9174))

This introduces useful analogs to the product rule when working with derivatives in spaces of continuous linear maps.

### [2021-09-23T21:18:45+00:00](https://github.com/leanprover-community/mathlib/commit/54eb60372d891a20731d73f1ec9dd9e931f98202)
chore(analysis/normed_space/conformal_linear_map): delay dependence on inner products ([#9293](https://github.com/leanprover-community/mathlib/pull/#9293))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2021-09-23T19:20:02+00:00](https://github.com/leanprover-community/mathlib/commit/14bcb2e0bd21e2429a27bbd2307eff70766d336f)
feat(measure_theory/measure/measure_space_def): some simple lemmas about measures and intersection ([#9306](https://github.com/leanprover-community/mathlib/pull/#9306))

From [#2819](https://github.com/leanprover-community/mathlib/pull/#2819)

### [2021-09-23T19:20:01+00:00](https://github.com/leanprover-community/mathlib/commit/ea59c90ecba14c9c516213f49ce5d4a7a1a6ed3e)
feat(ring_theory/algebraic): is_algebraic_iff_not_injective ([#9254](https://github.com/leanprover-community/mathlib/pull/#9254))

### [2021-09-23T16:42:28+00:00](https://github.com/leanprover-community/mathlib/commit/9e367ffb451089531d816f85b0a67b758e0ac48e)
feat(linear_algebra/invariant_basis_number): strong_rank_condition_iff_succ ([#9128](https://github.com/leanprover-community/mathlib/pull/#9128))

We add `strong_rank_condition_iff_succ`: a ring satisfies the strong rank condition if and only if, for all `n : ℕ`, there are no
injective linear maps `(fin (n + 1) → R) →ₗ[R] (fin n → R)`. This will be used to prove that any commutative ring satisfies the strong rank condition.

The proof is simple and it uses the natural inclusion `R^n → R^m`, for `n ≤ m` (adding zeros at the end). We provide this in general as `extend_by_zero.linear_map : (ι → R) →ₗ[R] (η → R)` where `ι` and `η` are types endowed with a function `ι → η`.

### [2021-09-23T15:31:34+00:00](https://github.com/leanprover-community/mathlib/commit/b365367f56d01c5ab1173ff5995781cee0244d40)
feat(README.md): add Oliver Nash ([#9347](https://github.com/leanprover-community/mathlib/pull/#9347))

### [2021-09-23T15:31:33+00:00](https://github.com/leanprover-community/mathlib/commit/81f6e887f194fc0ea632912bf41d8dc7b62a2e86)
chore(analysis/calculus): add 2 simple lemmas ([#9334](https://github.com/leanprover-community/mathlib/pull/#9334))

Add `differentiable_on.has_fderiv_at` and `differentiable_on.has_deriv_at`.

### [2021-09-23T15:31:31+00:00](https://github.com/leanprover-community/mathlib/commit/0243da300ce036e1b7351bdeecc4aa153a60a2ba)
feat(ereal): added useful lemmas ([#9313](https://github.com/leanprover-community/mathlib/pull/#9313))

Some small addition to the api for ereals.





Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-09-23T14:08:43+00:00](https://github.com/leanprover-community/mathlib/commit/cc0d83912da5aef739597ea5784e60882d1b386b)
feat(measure_theory/measure/haar): cleanup, link with the is_haar_measure typeclass ([#9244](https://github.com/leanprover-community/mathlib/pull/#9244))

We show that the Haar measure constructed in `measure_theory/measure/haar` satisfies the `is_haar_measure` typeclass, and use the existence to show a few further properties of all Haar measures. Also weaken a little bit some assumptions in this file.

### [2021-09-23T08:15:13+00:00](https://github.com/leanprover-community/mathlib/commit/602ad5870598b4c276abea48b339cedf2c335b28)
feat(measure_theory/integral): add a few lemmas ([#9285](https://github.com/leanprover-community/mathlib/pull/#9285))

### [2021-09-23T08:15:12+00:00](https://github.com/leanprover-community/mathlib/commit/145c5ca4d0facbef4b714bfaa3b4395d7d8855f3)
refactor(topology/category/Top/open_nhds): remove open_nhds.is_filtered ([#9211](https://github.com/leanprover-community/mathlib/pull/#9211))

Remove instance that can be inferred automatically.

### [2021-09-23T06:57:23+00:00](https://github.com/leanprover-community/mathlib/commit/8a0d60ea67451fcddbc4e2578304e995ae667fe1)
chore(topology): rename compact_ball to is_compact_closed_ball ([#9337](https://github.com/leanprover-community/mathlib/pull/#9337))

The old name didn't follow the naming convention at all, which made it hard to discover.

### [2021-09-23T06:06:00+00:00](https://github.com/leanprover-community/mathlib/commit/7615f83814d9d2ab186cfcdad3a959ff042fb093)
chore(archive/100-theorems-list/42): typo ([#9341](https://github.com/leanprover-community/mathlib/pull/#9341))

### [2021-09-23T05:13:45+00:00](https://github.com/leanprover-community/mathlib/commit/d238087fb9025f3caf8551c579a9437c8a1cef61)
chore(data/real/pi/*): correct authorship data ([#9314](https://github.com/leanprover-community/mathlib/pull/#9314))

[#9295](https://github.com/leanprover-community/mathlib/pull/#9295) split `data.real.pi` into three files with the naive transferral of authorship and copyright data, this updates it to the actual authorship.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-23T04:17:39+00:00](https://github.com/leanprover-community/mathlib/commit/a15ae9c516aa342e860a51411b90866329150ef6)
chore(measure_theory/measurable_space): add simps config for `measurable_equiv` ([#9315](https://github.com/leanprover-community/mathlib/pull/#9315))

Also add `@[ext]` lemma and some standard `equiv` lemmas.

### [2021-09-23T02:22:43+00:00](https://github.com/leanprover-community/mathlib/commit/b563e5aa1329def5afc92826fd956e2fb4a967b2)
chore(scripts): update nolints.txt ([#9339](https://github.com/leanprover-community/mathlib/pull/#9339))

I am happy to remove some nolints for you!

### [2021-09-23T00:38:17+00:00](https://github.com/leanprover-community/mathlib/commit/671b1797171d2e9405377701a02775827d093a15)
refactor(group_theory/subgroup,linear_algebra/basic): put pointwise actions in their own files to match submonoid ([#9312](https://github.com/leanprover-community/mathlib/pull/#9312))

### [2021-09-23T00:38:16+00:00](https://github.com/leanprover-community/mathlib/commit/20981bee5dddb366f5bdf4221877eeb89794c85f)
feat(linear_algebra/charpoly): add linear_map.charpoly ([#9279](https://github.com/leanprover-community/mathlib/pull/#9279))

We add `linear_map.charpoly`, the characteristic polynomial of an endomorphism of a finite free module, and a basic API.

### [2021-09-22T20:20:50+00:00](https://github.com/leanprover-community/mathlib/commit/5b3b71a079e626dcdd3240aa7f88e10691403c00)
chore(data/equiv): rename `bool_to_equiv_prod` to `bool_arrow_equiv_prod` ([#9333](https://github.com/leanprover-community/mathlib/pull/#9333))

Other changes:

* use an explicit definition;
* use `@[simps]`.

### [2021-09-22T16:35:13+00:00](https://github.com/leanprover-community/mathlib/commit/6eb8d41447cca781119277d52c7d17cff70c7996)
chore(ring_theory/dedekind_domain): speed up `dedekind_domain.lean` ([#9232](https://github.com/leanprover-community/mathlib/pull/#9232))

@eric-wieser [noticed that `dedekind_domain.lean`](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeouts.20in.20ring_theory.2Fdedekind_domain.2Elean.3A664.3A9) was compiling slowly and on the verge of a timeout. @kbuzzard, @sgouezel and I reworked some definitions to make everything elaborate much faster: `is_dedekind_domain_inv_iff`, `mul_inv_cancel_of_le_one` and `ideal.unique_factorization_monoid` went from over 10 seconds on my machine to less than 3 seconds. No other declaration in that file now takes over 2 seconds on my machine.

Apart from the three declarations getting new proofs, I also made the following changes:
 * The operations on `localization` (`has_add`, `has_mul`, `has_one`, `has_zero`, `has_neg`, `npow` and `localization.inv`) are now `@[irreducible]`
 * `fraction_ring.field` copies its field from `localization.comm_ring` for faster unification (less relevant after the previous change)
 * Added `fractional_ideal.map_mem_map` and `fractional_ideal.map_injective` to simplify the proof of `is_dedekind_domain_inv_iff`.
 * Split the proof of `matrix.exists_mul_vec_eq_zero_iff` into two parts to speed it up



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-09-22T15:37:39+00:00](https://github.com/leanprover-community/mathlib/commit/dc5a3db917029c29a0c5002bfbb71de902da7058)
feat(algebra/category): Forgetful functors preserve filtered colimits ([#9101](https://github.com/leanprover-community/mathlib/pull/#9101))

Shows that forgetful functors of various algebraic categories preserve filtered colimits.

### [2021-09-22T14:37:26+00:00](https://github.com/leanprover-community/mathlib/commit/41414a3ae83ea3c0b01d6e027998cf30b18cb950)
chore(analysis/special_functions): typo in module doc ([#9330](https://github.com/leanprover-community/mathlib/pull/#9330))

### [2021-09-22T14:37:25+00:00](https://github.com/leanprover-community/mathlib/commit/2b84c4c64f9099eec6aebcc4727f56f9970a3e9e)
feat(linear_algebra/matrix/basis): add matrix basis change formula ([#9280](https://github.com/leanprover-community/mathlib/pull/#9280))

We add `basis_to_matrix_mul_linear_map_to_matrix_mul_basis_to_matrix`, the formula for the change of basis.

### [2021-09-22T14:37:23+00:00](https://github.com/leanprover-community/mathlib/commit/68dbf27c2d0c5c1942b65f1ed5f4f3cbcf16e50b)
feat(number_theory): the class group of an integral closure is finite ([#9059](https://github.com/leanprover-community/mathlib/pull/#9059))

This is essentially the proof that the ring of integers of a global field has a finite class group, apart from filling in each hypothesis.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-09-22T12:11:46+00:00](https://github.com/leanprover-community/mathlib/commit/a5d2dbc51bbf61b715b09552717001c6c5ae653b)
chore(measure_theory/integral/set_integral): generalize, golf ([#9328](https://github.com/leanprover-community/mathlib/pull/#9328))

* rename `integrable_on_finite_union` to `integrable_on_finite_Union`;
* rename `integrable_on_finset_union` to `integrable_on_finset_Union`;
* add `integrable_on_fintype_Union`;
* generalize `tendsto_measure_Union` and `tendsto_measure_Inter from
  `s : ℕ → set α` to
  `[semilattice_sup ι] [encodable ι] {s : ι → set α}`;
* add `integral_diff`;
* generalize `integral_finset_bUnion`, `integral_fintype_Union` and
  `has_sum_integral_Union` to require appropriate `integrable_on`
  instead of `integrable`;
* golf some proofs.

### [2021-09-22T12:11:44+00:00](https://github.com/leanprover-community/mathlib/commit/a994071f7925e53ebfbd3d717f69cb09e9e44100)
chore(data/complex/module): rename `complex.smul_coe` to `real_smul` ([#9326](https://github.com/leanprover-community/mathlib/pull/#9326))

* the name was misleading b/c there is no `coe` in the LHS;
* add `complex.coe_smul`: given `x : ℝ` and `y : E`, we have
  `(x : ℂ) • y = x • y`;
* add `normed_space.complex_to_real`.

### [2021-09-22T12:11:43+00:00](https://github.com/leanprover-community/mathlib/commit/7e350c24da8eb74022f7263015c7700a9c52329b)
feat(category_theory/*): Fully faithful functors induces equivalence ([#9322](https://github.com/leanprover-community/mathlib/pull/#9322))

Needed for AffineSchemes ≌ CommRingᵒᵖ.



Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2021-09-22T12:11:42+00:00](https://github.com/leanprover-community/mathlib/commit/15730e8d0af237a2ebafeb8cfbbcf71f6160c2e9)
chore(analysis/convex): trivial generalizations of ℝ ([#9298](https://github.com/leanprover-community/mathlib/pull/#9298))

### [2021-09-22T12:11:41+00:00](https://github.com/leanprover-community/mathlib/commit/eb3d6001fcb096e20f311c9507fd146b9179a9ea)
feat(data/{list,multiset}): add `can_lift` instances ([#9262](https://github.com/leanprover-community/mathlib/pull/#9262))

* add `can_lift` instances for `set`, `list`, `multiset`, and `finset`;
* use them in `submonoid.{list,multiset}_prod_mem`;
* more `to_additive` attrs in `group_theory.submonoid.membership`.

### [2021-09-22T10:01:07+00:00](https://github.com/leanprover-community/mathlib/commit/c9638b971772cf64ff052ccac795b071652f4429)
chore(measure_theory): add 2 lemmas ([#9329](https://github.com/leanprover-community/mathlib/pull/#9329))

### [2021-09-22T10:01:05+00:00](https://github.com/leanprover-community/mathlib/commit/6f2cbde0744801c802e51cf1bfdf25664b55c3b9)
chore(order/lattice): tidy up pi instances ([#9305](https://github.com/leanprover-community/mathlib/pull/#9305))

These were previously defined in the wrong file, and the lemmas were missing the `pi` prefix that is present on `pi.add_apply` etc.

This also removes the instance names as they are autogenerated correctly.

Finally, this adds new `top_def`, `bot_def`, `sup_def`, and `inf_def` lemmas, which are useful for when wanting to rewrite under the lambda. We already have `zero_def`, `add_def`, etc.

### [2021-09-22T10:01:04+00:00](https://github.com/leanprover-community/mathlib/commit/f95f216f656a7cfd4e9ff9ae3ceaf20a42a19466)
feat(linear_algebra/std_basis): add matrix.std_basis_eq_std_basis_matrix ([#9216](https://github.com/leanprover-community/mathlib/pull/#9216))

As suggested in [#9072](https://github.com/leanprover-community/mathlib/pull/#9072) by @eric-wieser, we modify `matrix.std_basis` to use the more familiar `n × m` as the index of the basis and we prove that the `(i,j)`-th element of this basis is `matrix.std_basis_matrix i j 1`.

### [2021-09-22T07:37:28+00:00](https://github.com/leanprover-community/mathlib/commit/5b55a869b9d21502c309843805cdf13698e9ffb0)
chore(analysis/calculate/fderiv): move results about analytic functions to a new file ([#9296](https://github.com/leanprover-community/mathlib/pull/#9296))

These are not necessary for many of the downstream files, so we can speed up compilation a bit by parallelising these.

### [2021-09-22T07:37:27+00:00](https://github.com/leanprover-community/mathlib/commit/6d866224c5a7a7a8fb71d62d6a12623345e8cf45)
chore(*): removing unneeded imports ([#9278](https://github.com/leanprover-community/mathlib/pull/#9278))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-22T07:37:21+00:00](https://github.com/leanprover-community/mathlib/commit/b77aa3aaa5900c267f7580a540b99e5896476fac)
feat(linear_algebra/affine_space/affine_subspace): prove that a set whose affine span is top cannot be empty. ([#9113](https://github.com/leanprover-community/mathlib/pull/#9113))



The lemma `finset.card_sdiff_add_card` is unrelated but I've been meaning to add it
and now seemed like a good time since I'm touching `data/finset/basic.lean` anyway.

### [2021-09-22T06:45:10+00:00](https://github.com/leanprover-community/mathlib/commit/f59dbf2cc07a7842591d6663320b74cec8563839)
chore(data/complex/exponential): add `abs_exp`, golf ([#9327](https://github.com/leanprover-community/mathlib/pull/#9327))

### [2021-09-22T02:48:40+00:00](https://github.com/leanprover-community/mathlib/commit/7112730d416c9afc844b7a9be32a53ee979ee5d1)
feat(set_theory/cardinal_ordinal): mul_le_max and others ([#9269](https://github.com/leanprover-community/mathlib/pull/#9269))

### [2021-09-22T02:48:39+00:00](https://github.com/leanprover-community/mathlib/commit/9c34e80c2e35783299f4c6e9dc7ee80d57efcd6a)
chore(linear_algebra/basic): generalize `add_monoid_hom_lequiv_{nat,int}` ([#9233](https://github.com/leanprover-community/mathlib/pull/#9233))

### [2021-09-22T01:01:52+00:00](https://github.com/leanprover-community/mathlib/commit/5625ec0265777745a99c9473f321d74dfec37a64)
refactor(algebra/module/linear_map): Put linear equivalences in their own file ([#9301](https://github.com/leanprover-community/mathlib/pull/#9301))

This is consistent with how we have ring homs and ring equivs in separate files.

By having each of these files smaller than the original, we can split `linear_algebra/basic` more effectively between them.

### [2021-09-21T17:41:00+00:00](https://github.com/leanprover-community/mathlib/commit/e0d568e53cb97e50ad71cfb947fd678dfdb1569e)
feat(analysis/normed_space/basic): the rescaling of a ball is a ball ([#9297](https://github.com/leanprover-community/mathlib/pull/#9297))

Also rename all statements with `ball_0` to `ball_zero` for coherence.

### [2021-09-21T15:54:06+00:00](https://github.com/leanprover-community/mathlib/commit/56a6ed6ebb368f412a891cc94c1189761df79777)
chore(algebra/algebra/basic): remove a duplicate instance ([#9320](https://github.com/leanprover-community/mathlib/pull/#9320))

`algebra.linear_map.module'` is just a special case of `linear_map.module'`.

`by apply_instance` finds this instance provided it's used after the definition of `is_scalar_tower.to_smul_comm_class`.

### [2021-09-21T15:54:04+00:00](https://github.com/leanprover-community/mathlib/commit/420f11ab1fe4ac5c07231a4e10673215962af7ed)
feat(measure_theory/decomposition/radon_nikodym): Radon-Nikodym and Lebesgue decomposition for signed measures ([#9065](https://github.com/leanprover-community/mathlib/pull/#9065))

This PR proves the Radon-Nikodym theorem for signed measures.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-09-21T14:54:34+00:00](https://github.com/leanprover-community/mathlib/commit/c4fbb6ff4bc18477a861697fa73ce6c7c4a23963)
refactor(data/real/ereal): replace `.cases` with `.rec` ([#9321](https://github.com/leanprover-community/mathlib/pull/#9321))

This provides a nicer spelling than the pile of `rfl`s we use with the old `ereal.cases`, as follows:
```diff
-rcases x.cases with rfl|⟨y, rfl⟩|rfl,
+induction x using ereal.rec with y,
```
As a bonus, the subgoals now end up with names matching the hypotheses.

### [2021-09-21T11:46:50+00:00](https://github.com/leanprover-community/mathlib/commit/30617c7b59c1d1dcaf14d3ec65395b1420abcbac)
chore(group_theory/order_of_element): bump up ([#9318](https://github.com/leanprover-community/mathlib/pull/#9318))

there may be other lemmas that can similarly be moved around here

### [2021-09-21T09:53:10+00:00](https://github.com/leanprover-community/mathlib/commit/b5a6422ff0626a63f60d5f9408280e8331c48eae)
feat(data/finset): add lemmas ([#9209](https://github.com/leanprover-community/mathlib/pull/#9209))

* add `finset.image_id'`, a version of `finset.image_id` using `λ x, x` instead of `id`;
* add some lemmas about `finset.bUnion`, `finset.sup`, and `finset.sup'`.

### [2021-09-21T08:03:51+00:00](https://github.com/leanprover-community/mathlib/commit/524ded6ca736af9d2f7f6a1743e48416bb63f277)
refactor(data/polynomial/{coeff,monomial}): move smul_eq_C_mul ([#9287](https://github.com/leanprover-community/mathlib/pull/#9287))

This moves `smul_eq_C_mul` from `monomial.lean` into `coeff.lean` so that the import on `monomial.lean` can be changed from `data.polynomial.coeff` to `data.polynomial.basic`. This should shave about 10 seconds off the [longest pole for parallelized mathlib compilation](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The.20long.20pole.20in.20mathlib/near/253932389).

### [2021-09-21T08:03:50+00:00](https://github.com/leanprover-community/mathlib/commit/4cee74387089a0c6054dac776acb9d8a5879bf5d)
feat(measure_theory/measure/vector_measure): add `mutually_singular.neg` ([#9282](https://github.com/leanprover-community/mathlib/pull/#9282))

### [2021-09-21T08:03:48+00:00](https://github.com/leanprover-community/mathlib/commit/78340e39063dc7bdcc37c5d6cfddbc77795aad6a)
feat(topology/continuous_function/basic): gluing lemmas ([#9239](https://github.com/leanprover-community/mathlib/pull/#9239))

### [2021-09-21T06:38:58+00:00](https://github.com/leanprover-community/mathlib/commit/49e0bcfee8da7dd25d1a4fdc488e737602fde2cf)
feat(topology/bases): continuous_of_basis_is_open_preimage ([#9281](https://github.com/leanprover-community/mathlib/pull/#9281))

Check continuity on a basis.



Co-authored-by: Justus Springer <50165510+justus-springer@users.noreply.github.com>

### [2021-09-21T02:39:51+00:00](https://github.com/leanprover-community/mathlib/commit/13780bcee51f870c02d3a5b248db218ac0ea5bd6)
chore(scripts): update nolints.txt ([#9317](https://github.com/leanprover-community/mathlib/pull/#9317))

I am happy to remove some nolints for you!

### [2021-09-20T20:43:00+00:00](https://github.com/leanprover-community/mathlib/commit/46ff4496283e60f5a505a1c596d9bc47184d4e4b)
feat(data/vector/basic): lemmas, and linting ([#9260](https://github.com/leanprover-community/mathlib/pull/#9260))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-20T18:11:00+00:00](https://github.com/leanprover-community/mathlib/commit/175afa8abe03fe8039670b7335c02a029e7742c7)
refactor(analysis/convex/{extreme, exposed}): generalize `is_extreme` and `is_exposed` to semimodules ([#9264](https://github.com/leanprover-community/mathlib/pull/#9264))

`is_extreme` and `is_exposed` are currently only defined in real vector spaces. This generalizes ℝ to arbitrary `ordered_semiring`s in definitions and abstracts it away to the correct generality in lemmas. It also generalizes the space from `add_comm_group` to `add_comm_monoid`.

### [2021-09-20T16:39:36+00:00](https://github.com/leanprover-community/mathlib/commit/ae726e100dc0daedebcb74e1039a6d89c3b518a9)
chore(ring_theory/polynomial/tower): remove a duplicate instance ([#9302](https://github.com/leanprover-community/mathlib/pull/#9302))

`apply_instance` already finds a much more general statement of this instance.

### [2021-09-20T16:39:35+00:00](https://github.com/leanprover-community/mathlib/commit/c2d8a58dcb95883b9cd31e9e9f0fef65e1997a21)
feat(algebra/algebra/basic): lemmas about alg_hom and scalar towers ([#9249](https://github.com/leanprover-community/mathlib/pull/#9249))



Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2021-09-20T14:51:32+00:00](https://github.com/leanprover-community/mathlib/commit/866294d35d219bff8688269dec4d0f5991a439e7)
fix(data/dfinsupp): fix nat- and int- module diamonds ([#9299](https://github.com/leanprover-community/mathlib/pull/#9299))

This also defines `has_sub` separately in case it turns out to help with unification

### [2021-09-20T13:42:14+00:00](https://github.com/leanprover-community/mathlib/commit/3703ab2ab93fcc488b41eca739956471862445b3)
chore(data/real/pi): split into three files ([#9295](https://github.com/leanprover-community/mathlib/pull/#9295))

This is the last file to finish compilation in mathlib, and it naturally splits into three chunks, two of which have simpler dependencies.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-20T13:42:12+00:00](https://github.com/leanprover-community/mathlib/commit/8c96c54944e72ccbf16c5645038bdc1b33140457)
feat(ci): Download all possible caches in gitpod ([#9286](https://github.com/leanprover-community/mathlib/pull/#9286))

This requests mathlibtools 1.1.0

### [2021-09-20T13:42:11+00:00](https://github.com/leanprover-community/mathlib/commit/72a8cd68a9bb480cc0750f474a5d22db6b803902)
feat(field_theory/algebraic_closure): any two algebraic closures are isomorphic ([#9231](https://github.com/leanprover-community/mathlib/pull/#9231))

### [2021-09-20T11:48:30+00:00](https://github.com/leanprover-community/mathlib/commit/cb33f68d33e3cf106238483d0880f8b991797aac)
feat(docker): pin version for better reproducibility ([#9304](https://github.com/leanprover-community/mathlib/pull/#9304))

Also hopefully force docker rebuild for gitpod

### [2021-09-20T11:48:29+00:00](https://github.com/leanprover-community/mathlib/commit/4df2a1bfdba2a33a061da256adb8f9777dfa9df9)
feat(topology/instances/ennreal): sum of nonzero constants is infinity ([#9294](https://github.com/leanprover-community/mathlib/pull/#9294))

### [2021-09-20T11:48:28+00:00](https://github.com/leanprover-community/mathlib/commit/e41e9bce2eaa5ad1b94da5d0861bbb5e22564d83)
chore(group_theory/submonoid/operations): split a file ([#9292](https://github.com/leanprover-community/mathlib/pull/#9292))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-20T11:48:27+00:00](https://github.com/leanprover-community/mathlib/commit/7389a6b1ef7090610a0909aac125fd2f1eacfbdb)
feat(linear_algebra/matrix/to_lin): simp lemmas for to_matrix and algebra ([#9267](https://github.com/leanprover-community/mathlib/pull/#9267))

### [2021-09-20T11:48:26+00:00](https://github.com/leanprover-community/mathlib/commit/ba2823498ee46308c2dd59f4199e4d144b926a1f)
feat(algebra/pointwise): more lemmas about pointwise actions ([#9226](https://github.com/leanprover-community/mathlib/pull/#9226))

This:
* Primes the existing lemmas about `group_with_zero` and adds their group counterparts
* Adds:
  * `smul_mem_smul_set_iff`
  * `set_smul_subset_set_smul_iff`
  * `set_smul_subset_iff`
  * `subset_set_smul_iff`
* Generalizes `zero_smul_set` to take weaker typeclasses

### [2021-09-20T10:37:41+00:00](https://github.com/leanprover-community/mathlib/commit/e29dfc19e39709224d61644ea7217ade31e7a6ed)
chore(analysis/normed_space/finite_dimensional): restructure imports ([#9289](https://github.com/leanprover-community/mathlib/pull/#9289))

Delays importing `linear_algebra.finite_dimensional` in the `analysis/normed_space/` directory until it is really needed.

This reduces the ["long pole"](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The.20long.20pole.20in.20mathlib) of mathlib compilation by 3 minutes (out of 55).




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-20T08:13:28+00:00](https://github.com/leanprover-community/mathlib/commit/d93c6a855ea845753aaf37c33408ce5b107c9b96)
feat(data/vector/basic): induction principles ([#9261](https://github.com/leanprover-community/mathlib/pull/#9261))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-20T04:23:41+00:00](https://github.com/leanprover-community/mathlib/commit/238d79271f6d7702957307780dabdc092065f90f)
chore(scripts): update nolints.txt ([#9290](https://github.com/leanprover-community/mathlib/pull/#9290))

I am happy to remove some nolints for you!

### [2021-09-20T04:23:40+00:00](https://github.com/leanprover-community/mathlib/commit/035bd24937e230783e93431543950bd101b13c8e)
refactor(field_theory/algebraic_closure): Move construction of algebraic closure and lemmas about alg closed fields into seperate files. ([#9265](https://github.com/leanprover-community/mathlib/pull/#9265))

### [2021-09-20T04:23:39+00:00](https://github.com/leanprover-community/mathlib/commit/acb10a5544d02d8aee1d5bcf58b13ed665db2e37)
feat(linear_algebra/{multilinear,alternating): add of_subsingleton ([#9196](https://github.com/leanprover-community/mathlib/pull/#9196))

This was refactored from the `koszul_cx` branch, something I mentioned doing in [this Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two.20decidable_eq.20instances.20on.20.28fin.201.29.20in.20mathlib.20.3A-.28/near/225596630).

The original version was:
```lean
def multilinear_map.of_subsingleton (ι : Type v) [subsingleton ι] [inhabited ι] {N : Type u}
  [add_comm_group N] [module R N] (f : M →ₗ[R] N) : multilinear_map R (λ (i : ι), M) N :=
{ to_fun := λ x, f (x $ default ι),
  map_add' := λ m i x y, by rw subsingleton.elim i (default ι); simp only
    [function.update_same, f.map_add],
  map_smul' := λ m i r x, by rw subsingleton.elim i (default ι); simp only
    [function.update_same, f.map_smul], }
```
but I decided to remove the `f : M →ₗ[R] N` argument as it can be added later with `(of_subsingleton R M i).comp_linear_map f`.

Co-authored-by: Amelia Livingston <al3717@ic.ac.uk>

### [2021-09-20T04:23:38+00:00](https://github.com/leanprover-community/mathlib/commit/976b261ab3da157d06a8c4e3cb39444528febb95)
feat(data/{multiset,finset}/basic): card_erase_eq_ite ([#9185](https://github.com/leanprover-community/mathlib/pull/#9185))

A generic theorem about the cardinality of a `finset` or `multiset` with an element erased.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-09-20T01:59:40+00:00](https://github.com/leanprover-community/mathlib/commit/f37f57dcb22123a2828a0688569c155c07a2021c)
feat(order/lattice): `sup`/`inf`/`max`/`min` of mono functions ([#9284](https://github.com/leanprover-community/mathlib/pull/#9284))

* add `monotone.sup`, `monotone.inf`, `monotone.min`, and
  `monotone.max`;
* add `prod.le_def` and `prod.mk_le_mk`.

### [2021-09-19T21:03:01+00:00](https://github.com/leanprover-community/mathlib/commit/4887f80cf811898cae10a0704b70e427fabfe093)
chore(measure_theory/function/simple_func_dense): distance to `approx_on` is antitone ([#9271](https://github.com/leanprover-community/mathlib/pull/#9271))

### [2021-09-19T20:10:14+00:00](https://github.com/leanprover-community/mathlib/commit/f7135f17f5eb15e71fe9b85fddd9a697a85a3707)
feat(group_theory/p_group): `is_p_group` is preserved by `subgroup.comap` ([#9277](https://github.com/leanprover-community/mathlib/pull/#9277))

If `H` is a p-subgroup, then `H.comap f` is a p-subgroup, assuming that `f` is injective.

### [2021-09-19T17:47:09+00:00](https://github.com/leanprover-community/mathlib/commit/965e457f677b4aec771c5461398616ced6faee17)
feat(measure_theory/measure/lebesgue): a linear map rescales Lebesgue by the inverse of its determinant ([#9195](https://github.com/leanprover-community/mathlib/pull/#9195))

Also supporting material to be able to apply Fubini in `ι → ℝ` by separating some coordinates.

### [2021-09-19T16:07:52+00:00](https://github.com/leanprover-community/mathlib/commit/180c7581f08e08be990e78f86584c455b359f1b8)
feat(group_theory/p_group): `is_p_group` is preserved by `subgroup.map` ([#9276](https://github.com/leanprover-community/mathlib/pull/#9276))

If `H` is a p-subgroup, then `H.map f` is a p-subgroup.

### [2021-09-19T13:44:55+00:00](https://github.com/leanprover-community/mathlib/commit/55a2c1a473055a47eb53953a54db146ea3431659)
refactor(set_theory/{cardinal,ordinal}): swap the order of universes in `lift` ([#9273](https://github.com/leanprover-community/mathlib/pull/#9273))

Swap the order of universe arguments in `cardinal.lift` and `ordinal.lift`. This way (a) they match the order of arguments in `ulift`; (b) usually Lean can deduce the second universe level from the argument.

### [2021-09-19T13:44:53+00:00](https://github.com/leanprover-community/mathlib/commit/8df86df88c04f9cc438fdf7d201bfa725c3401c7)
feat(order/ideal, data/set/lattice): when order ideals are a complete lattice ([#9084](https://github.com/leanprover-community/mathlib/pull/#9084))

- Added the `ideal_Inter_nonempty` property, which states that the intersection of all ideals in the lattice is nonempty.
- Proved that when a preorder has the above property and is a `semilattice_sup`, its ideals are a complete lattice
- Added some lemmas about empty intersections in set/lattice, akin to [#9033](https://github.com/leanprover-community/mathlib/pull/#9033)

### [2021-09-19T11:34:13+00:00](https://github.com/leanprover-community/mathlib/commit/075ff371481316d01bc4785d3f803af6f90a3171)
refactor(algebra/order*): move files about ordered algebraic structures into subfolder ([#9024](https://github.com/leanprover-community/mathlib/pull/#9024))

There were many files named `algebra/order_*.lean`. There are also `algebra.{module,algebra}.ordered`. The latter are Prop-valued mixins. This refactor moves the data typeclasses into their own subfolder. That should help facilitate organizing further refactoring to provide the full gamut of the order x algebra hierarchy.

### [2021-09-19T10:06:14+00:00](https://github.com/leanprover-community/mathlib/commit/383e05a20d9b780269dcf63d221ccf990d0f8f8e)
feat(measure_theory/integral/lebesgue): add set version of `lintegral_with_density_eq_lintegral_mul` ([#9270](https://github.com/leanprover-community/mathlib/pull/#9270))

I also made `measurable_space α` an implicit argument whenever `μ : measure α` is explicit.

### [2021-09-19T07:45:41+00:00](https://github.com/leanprover-community/mathlib/commit/25e67dd85be402387a5148f4937a8b29c64e5c24)
feat(measure_theory/function/lp_space): add mem_Lp_indicator_iff_restrict ([#9221](https://github.com/leanprover-community/mathlib/pull/#9221))

We have an equivalent lemma for `integrable`. Here it is generalized to `mem_ℒp`.

### [2021-09-19T06:12:34+00:00](https://github.com/leanprover-community/mathlib/commit/f2c162c123043494c769e2d87413e6244b1e3c67)
feat(data/dfinsupp): more lemmas about erase, filter, and negation ([#9248](https://github.com/leanprover-community/mathlib/pull/#9248))

### [2021-09-19T02:28:42+00:00](https://github.com/leanprover-community/mathlib/commit/cbf8788daa30d48960830bec699f45a3bb73700e)
chore(scripts): update nolints.txt ([#9275](https://github.com/leanprover-community/mathlib/pull/#9275))

I am happy to remove some nolints for you!

### [2021-09-18T23:07:48+00:00](https://github.com/leanprover-community/mathlib/commit/fbc9e5e306b8cd0a8ecccdb759ca09f16c44af86)
feat(measure_theory/function/conditional_expectation): condexp_ind is ae_measurable' ([#9263](https://github.com/leanprover-community/mathlib/pull/#9263))

### [2021-09-18T23:07:47+00:00](https://github.com/leanprover-community/mathlib/commit/6b96736f80a6550879063766d87e78287e89eff4)
feat(measure_theory/integral/set_to_L1): image of an indicator by set_to_fun (and related functions) ([#9205](https://github.com/leanprover-community/mathlib/pull/#9205))

We show the following equality, as well as versions of it for other intermediate `set_to_*` functions:
```
set_to_fun (hT : dominated_fin_meas_additive μ T C) (s.indicator (λ _, x)) = T s x
```

### [2021-09-18T23:07:46+00:00](https://github.com/leanprover-community/mathlib/commit/c1d7ee557c47379534d9e635e8d1464d9249f0e1)
feat(measure_theory/measure/finite_measure_weak_convergence): definitions of types of finite_measures and probability_measures, to be equipped with the topologies of weak convergence ([#8904](https://github.com/leanprover-community/mathlib/pull/#8904))

feat(measure_theory/measure/finite_measure_weak_convergence): definitions of types of finite_measures and probability_measures, to be equipped with the topologies of weak convergence

This PR defines the types `probability_measure` and `finite_measure`. The next step is to give a topology instance on these types.



Co-authored-by: kkytola <39528102+kkytola@users.noreply.github.com>

### [2021-09-18T20:45:54+00:00](https://github.com/leanprover-community/mathlib/commit/429aaa30d6b36199df52ee4bcf206d0ac46e443e)
feat(order/bounded_lattice): coe_unbot simp lemma ([#9258](https://github.com/leanprover-community/mathlib/pull/#9258))

### [2021-09-18T20:45:53+00:00](https://github.com/leanprover-community/mathlib/commit/811c87ae8fa1e7d96c3ebdce30ef82cc25dab2ff)
chore(order/galois_connection): golf ([#9236](https://github.com/leanprover-community/mathlib/pull/#9236))

* add `galois_insertion.is_lub_of_u_image`,
  `galois_insertion.is_glb_of_u_image`,
  `galois_coinsertion.is_glb_of_l_image`, and
  `galois_coinsertion.is_lub_of_l_image`;
* get some proofs in `lift_*` from `order_dual` instances;
* this changes definitional equalities for `Inf` and `Sup` so that we can reuse the same `Inf`/`Sup` for a `conditionally_complete_lattice` later.

### [2021-09-18T19:04:24+00:00](https://github.com/leanprover-community/mathlib/commit/e4bf49600bcac93abf043ec6939334e2c0f9ba1a)
feat(data/set/finite): simple infiniteness lemmas ([#9242](https://github.com/leanprover-community/mathlib/pull/#9242))

### [2021-09-18T19:04:23+00:00](https://github.com/leanprover-community/mathlib/commit/255862e22417d80c2f6cf80e468125797f16f9b8)
refactor(linear_algebra/char_poly/basic): rename char_poly to matrix.charpoly ([#9230](https://github.com/leanprover-community/mathlib/pull/#9230))

We rename `char_matrix` to `charmatrix` and `char_poly` to `matrix.charpoly`, so `M.charpoly` becomes available (and everything is coherent with `minpoly`).

### [2021-09-18T16:39:30+00:00](https://github.com/leanprover-community/mathlib/commit/e7579363a9bb96076c25a50aa79ec3ad7e04e21b)
chore(data/real/ennreal, measure_theory/): use `≠ ∞` and `≠ 0` in assumptions ([#9219](https://github.com/leanprover-community/mathlib/pull/#9219))

### [2021-09-18T15:14:00+00:00](https://github.com/leanprover-community/mathlib/commit/33db1c76b903655e7b138f3cd0f9c31ca6e1b3f2)
chore(data/mv_polynomial/basic): add ring_hom_ext' and move ext attribute to ring_hom_ext' ([#9235](https://github.com/leanprover-community/mathlib/pull/#9235))




Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-09-18T13:22:05+00:00](https://github.com/leanprover-community/mathlib/commit/10a620163757cd2cf745db99c686e9721a1d0d3b)
feat(set_theory/ordinal): add conditionally_complete_linear_order_bot instance ([#9266](https://github.com/leanprover-community/mathlib/pull/#9266))

Currently, it is not possible to talk about `Inf s` when `s` is a set of ordinals. This is fixed by this PR.

### [2021-09-18T12:00:20+00:00](https://github.com/leanprover-community/mathlib/commit/d6b4cd7bc8e78509fbe8695c08161528f2892836)
chore(ring_theory/adjoin/basic): split ([#9257](https://github.com/leanprover-community/mathlib/pull/#9257))

I want to use basic facts about `adjoin` in `polynomial.basic`.

### [2021-09-18T10:03:09+00:00](https://github.com/leanprover-community/mathlib/commit/0ee36a390c1a67974a3fdd97a36dda6e06e8c82e)
feat(order/conditionally_complete_lattice): add lemmas ([#9237](https://github.com/leanprover-community/mathlib/pull/#9237))

* add lemmas about `conditionally_complete_linear_order_bot`; in this
  case we can drop some `nonempty` assumptions;
* add lemmas for the case of `[is_well_order α (<)]`; in this case
  infimum of a nonempty set is the least element of this set.

### [2021-09-18T06:53:44+00:00](https://github.com/leanprover-community/mathlib/commit/36751e426df1220bd0c7f1c940900409d648681b)
chore(algebra/algebra/tower): golf `algebra.lsmul` ([#9253](https://github.com/leanprover-community/mathlib/pull/#9253))

### [2021-09-18T06:53:43+00:00](https://github.com/leanprover-community/mathlib/commit/41e152f3d527f96fabb2184f4648c00f7945daae)
fix(algebra/algebra/tower): remove `subalgebra.res` which duplicates `subalgebra.restrict_scalars` ([#9251](https://github.com/leanprover-community/mathlib/pull/#9251))

We use the name `restrict_scalars` everywhere else, so I kept that one instead of `res`.

`res` was here first, but the duplicate was added by [#7949](https://github.com/leanprover-community/mathlib/pull/#7949) presumably because the `res` name wasn't discoverable.

### [2021-09-18T06:53:42+00:00](https://github.com/leanprover-community/mathlib/commit/5e58247c19e5c26ca797355e55f7de5f80b80f1b)
feat(algebra/ordered_pi): ordered_comm_monoid and canonically_ordered_monoid instances ([#9194](https://github.com/leanprover-community/mathlib/pull/#9194))

Presumably these instances were missing because they were not actually constructible until we fixed the definition of `ordered_monoid` in [#8877](https://github.com/leanprover-community/mathlib/pull/#8877)!

### [2021-09-18T02:27:19+00:00](https://github.com/leanprover-community/mathlib/commit/0bdd47fac4b9b684a03366deccc6bf2469d30977)
feat(data/list/basic): add lemmas about list.take list.drop ([#9245](https://github.com/leanprover-community/mathlib/pull/#9245))

I added these lemmas about list.take and list.drop, which are present in Coq for example. Note that they are not entirely equivalent to list.take_append and list.drop_append because they also handle the case when `n ≤ l₁.length`

### [2021-09-18T02:27:17+00:00](https://github.com/leanprover-community/mathlib/commit/a8f2bab26e1da906580e8154b5d4ce0b392ffdc0)
chore(set_theory/cardinal): use notation `#`, add notation `ω` ([#9217](https://github.com/leanprover-community/mathlib/pull/#9217))

The only API change: rename `cardinal.eq_congr` to `cardinal.mk_congr`.

### [2021-09-18T00:17:26+00:00](https://github.com/leanprover-community/mathlib/commit/ec9d52042b6736f573ba84adcf2ab52d3a345b96)
feat(order/filter,*): lemmas about `filter.ne_bot` ([#9234](https://github.com/leanprover-community/mathlib/pull/#9234))

* add `prod.range_fst`, `prod.range_snd`, `set.range_eval`;
* add `function.surjective_eval`;
* add `filter.*_ne_bot` and/or `filter.*_ne_bot_iff` lemmas for `sup`, `supr`,
  `comap prod.fst _`, `comap prod.snd _`, `coprod`, `Coprod`.

### [2021-09-17T20:09:59+00:00](https://github.com/leanprover-community/mathlib/commit/a80e1d71480c7ad4af5f64e2758f7f844ca59d01)
chore(topology/metric_space): split `iff` into 2 lemmas ([#9238](https://github.com/leanprover-community/mathlib/pull/#9238))

One of the implications of `compact_iff_closed_bounded` doesn't need `t2_space`. Also add `compact_space_iff_bounded_univ`.

### [2021-09-17T20:09:58+00:00](https://github.com/leanprover-community/mathlib/commit/c42a9ad1126ac45ed556d38e63d2d724fcc659d3)
chore(data/finsupp/basic): lemmas about sub and neg on filter and erase ([#9228](https://github.com/leanprover-community/mathlib/pull/#9228))

### [2021-09-17T20:09:57+00:00](https://github.com/leanprover-community/mathlib/commit/54217b6a48e389c38587ebec7d929e48fc02ae11)
chore(data/list): make separate lexicographic file ([#9193](https://github.com/leanprover-community/mathlib/pull/#9193))

A minor effort to reduce the `data.list.basic` monolithic, today inspired by yet again being annoyed that I couldn't find something.

### [2021-09-17T20:09:56+00:00](https://github.com/leanprover-community/mathlib/commit/696db1ea78849c31447c0b5442847c09c9799715)
feat(analysis/convex/topology): add lemma `convex.subset_interior_image_homothety_of_one_lt` ([#9044](https://github.com/leanprover-community/mathlib/pull/#9044))





Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2021-09-17T16:23:57+00:00](https://github.com/leanprover-community/mathlib/commit/58f26a025fdde9d392c342dd768dd3613b58e313)
chore(order/bounded_lattice): trivial generalizations ([#9246](https://github.com/leanprover-community/mathlib/pull/#9246))

### [2021-09-17T14:39:08+00:00](https://github.com/leanprover-community/mathlib/commit/dfd4bf5d317523e2be3fbbd1abaaf784ef6c22cd)
split(analysis/convex/function): move `convex_on` and `concave_on` to their own file ([#9247](https://github.com/leanprover-community/mathlib/pull/#9247))

Convex/concave functions now earn their own file. This cuts down `analysis.convex.basic` by 500 lines.

### [2021-09-17T12:18:09+00:00](https://github.com/leanprover-community/mathlib/commit/5f140ab48f292d13b6355e5b10e38d7f51413cb6)
chore(*): rename `coe_fn_inj` to `coe_fn_injective` ([#9241](https://github.com/leanprover-community/mathlib/pull/#9241))

This also removes some comments about it not being possible to use `function.injective`, since now we use it without problem.

### [2021-09-17T09:52:16+00:00](https://github.com/leanprover-community/mathlib/commit/5b75f5ac2a1897f514941f95665f83480959026b)
chore(algebra/group/basic): add `ite_one_mul` and `ite_zero_add` ([#9227](https://github.com/leanprover-community/mathlib/pull/#9227))

We already had the versions with the arguments in the other order.

Follows on from [#3217](https://github.com/leanprover-community/mathlib/pull/#3217)

### [2021-09-17T09:00:53+00:00](https://github.com/leanprover-community/mathlib/commit/18d031d1e3797c1d1b35829a9556a6bb10dfd16c)
fix(ring_theory/dedekind_domain): Speed up ideal.unique_factorization_monoid ([#9243](https://github.com/leanprover-community/mathlib/pull/#9243))

The old proof was causing timeouts in CI.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeouts.20in.20ring_theory.2Fdedekind_domain.2Elean.3A664.3A9/near/253579691)

### [2021-09-17T06:22:56+00:00](https://github.com/leanprover-community/mathlib/commit/15bf06677a2d0dd6bd23719283d2c57e31c1dc48)
feat(measure_theory/function/l1_space): add integrability lemmas for composition with `to_real` ([#9199](https://github.com/leanprover-community/mathlib/pull/#9199))

### [2021-09-16T19:59:45+00:00](https://github.com/leanprover-community/mathlib/commit/59cda6d0777632f0f0f621d9ec4864f513ebe0cd)
feat(measure_theory/group/basic): introduce a class is_haar_measure, and its basic properties ([#9142](https://github.com/leanprover-community/mathlib/pull/#9142))

We have in mathlib a construction of Haar measures. But there are many measures which do not come from this construction, and are still Haar measures (Lebesgue measure on a vector space, Hausdorff measure of the right dimension, for instance). We introduce a new class `is_haar_measure` (and its additive analogue) to be able to express facts simultaneously for all these measures, and prove their basic properties.

### [2021-09-16T16:02:06+00:00](https://github.com/leanprover-community/mathlib/commit/76f87b7c6f0817d76c3567d76944ba291d3ec011)
feat(group_theory/group_action/basic): Action on an orbit ([#9220](https://github.com/leanprover-community/mathlib/pull/#9220))

A `mul_action` restricts to a `mul_action` on an orbit.

### [2021-09-16T13:26:32+00:00](https://github.com/leanprover-community/mathlib/commit/ca3835747cb7cbdfa745935c2023533fe76b76d3)
feat(group_theory/group_action): add `distrib_mul_action.to_add_aut` and `mul_distrib_mul_action.to_mul_aut` ([#9224](https://github.com/leanprover-community/mathlib/pull/#9224))

These can be used to golf the existing `mul_aut_arrow`.

This also moves some definitions out of `algebra/group_ring_action.lean` into a more appropriate file.

### [2021-09-16T13:26:31+00:00](https://github.com/leanprover-community/mathlib/commit/17a473e8a4450e27db328a703ba1f2f60f6051f0)
feat(group_theory/p_group): Sup of p-subgroups is a p-subgroup ([#9222](https://github.com/leanprover-community/mathlib/pull/#9222))

The sup of p-subgroups is a p-subgroup, assuming normality.

### [2021-09-16T13:26:30+00:00](https://github.com/leanprover-community/mathlib/commit/b0d961b4be888a02a10719b3dea914be2b08f3a0)
chore(algebra/indicator_function): add `finset.sum_indicator_eq_sum_filter` ([#9208](https://github.com/leanprover-community/mathlib/pull/#9208))

### [2021-09-16T13:26:29+00:00](https://github.com/leanprover-community/mathlib/commit/fdfe782ca4975e173cf1b8aaabedaae2ea9dd0f3)
feat(combinatorics/derangements/*): add lemmas about counting derangements ([#9089](https://github.com/leanprover-community/mathlib/pull/#9089))

This defines `card_derangements` as the cardinality of the set of derangements of a fintype, and `num_derangements` as a function from N to N, and proves their equality, along with some other lemmas.

Context: PR [#7526](https://github.com/leanprover-community/mathlib/pull/#7526) grew too large and had to be split in half. The first half retained the original PR ID, and this is the second half. This adds back the finite.lean and exponential.lean files. Also, added entries back to 100.yaml.





Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-09-16T13:26:27+00:00](https://github.com/leanprover-community/mathlib/commit/89b0cfbfc3241274a5a8d80622de039e8af54fb1)
refactor(analysis/convex/basic): generalize convexity to vector spaces ([#9058](https://github.com/leanprover-community/mathlib/pull/#9058))

`convex` and `convex_hull` are currently only defined in real vector spaces. This generalizes ℝ to arbitrary ordered_semirings in definitions and abstracts it away to the correct generality in lemmas. It also generalizes the space from `add_comm_group` to `add_comm_monoid` where possible.

### [2021-09-16T11:34:14+00:00](https://github.com/leanprover-community/mathlib/commit/f536b4f057a51e4e6248c35ffce093c0351e5efd)
fix(group_theory/submonoid/operations): add missing `to_additive` tags on galois lemmas ([#9225](https://github.com/leanprover-community/mathlib/pull/#9225))

### [2021-09-16T11:34:13+00:00](https://github.com/leanprover-community/mathlib/commit/8a1fc68e9e3540796bcf3c4f706153215094f51a)
feat(measure_theory/measure/with_density_vector_measure): `with_densityᵥ` of a real function equals the density of the pos part - density of the neg part ([#9215](https://github.com/leanprover-community/mathlib/pull/#9215))

### [2021-09-16T11:34:12+00:00](https://github.com/leanprover-community/mathlib/commit/232ff445c6e89ef9da307d28619995478c5b8733)
feat(measure_theory/measure/measure_space): add mutually singular lemmas ([#9213](https://github.com/leanprover-community/mathlib/pull/#9213))

### [2021-09-16T11:34:11+00:00](https://github.com/leanprover-community/mathlib/commit/bc7cde8efee9d5e797dae5b8483613211324b89e)
feat(data/dfinsupp): add `filter_ne_eq_erase` ([#9182](https://github.com/leanprover-community/mathlib/pull/#9182))

### [2021-09-16T11:34:09+00:00](https://github.com/leanprover-community/mathlib/commit/86d20e51b492c06541d31de9a6e519f6b57a25b7)
feat(data/dfinsupp): add arithmetic lemmas about filter ([#9175](https://github.com/leanprover-community/mathlib/pull/#9175))

This adds `dfinsupp.filter_{zero,add,neg,sub,smul}` and `dfinsupp.subtype_domain_smul`, along with some bundled maps.

This also cleans up some variable explicitness.

### [2021-09-16T10:37:03+00:00](https://github.com/leanprover-community/mathlib/commit/b7593841620449def9435f0b9f3a1002afecff53)
feat(field_theory/algebraic_closure): map from algebraic extensions into the algebraic closure ([#9110](https://github.com/leanprover-community/mathlib/pull/#9110))



Co-authored-by: Chris Hughes <chrishughes24@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: kckennylau <kc_kennylau@yahoo.com.hk>

### [2021-09-16T05:50:06+00:00](https://github.com/leanprover-community/mathlib/commit/18dc1a18613cf28876efdd115053587cb5328e5a)
feat(group_theory/p_group): p-groups are preserved by isomorphisms ([#9203](https://github.com/leanprover-community/mathlib/pull/#9203))

Adds three lemmas about transporting `is_p_group` across injective, surjective, and bijective homomorphisms.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-09-15T23:41:53+00:00](https://github.com/leanprover-community/mathlib/commit/519b4e90debe68668c0295c57ad79b71b28abb46)
chore(algebra/big_operators): move, golf ([#9218](https://github.com/leanprover-community/mathlib/pull/#9218))

move 2 lemmas up and golf the proof of `finset.prod_subset`.

### [2021-09-15T18:42:11+00:00](https://github.com/leanprover-community/mathlib/commit/2b589cadce15ded875af2d7c50bddb95fcbe9cc9)
feat(group_theory/subgroup): Generalize `comap_sup_eq` ([#9212](https://github.com/leanprover-community/mathlib/pull/#9212))

The lemma `comap_sup_eq` can be generalized from assuming `function.surjective f` to assuming `≤ f.range`.

### [2021-09-15T18:42:10+00:00](https://github.com/leanprover-community/mathlib/commit/8185637f733e50daae696895ae0b2abd890186b3)
refactor(data/real/nnreal): use `has_ordered_sub` ([#9167](https://github.com/leanprover-community/mathlib/pull/#9167))

* provide a `has_ordered_sub` instance for `nnreal`;
* drop most lemmas about subtraction in favor of lemmas from `algebra/ordered_sub`;
* add `mul_sub'` and `sub_mul'`;
* generalize some lemmas about `has_ordered_sub` to `has_add`;
* add `add_hom.mul_left` and `add_hom.mul_right`.

### [2021-09-15T18:42:09+00:00](https://github.com/leanprover-community/mathlib/commit/a4341f9126629682eb9d069cf592ee2bdc60f2b9)
refactor(data/set/finite): use a custom inductive type ([#9164](https://github.com/leanprover-community/mathlib/pull/#9164))

Currently Lean treats local assumptions `h : finite s` as local instances, so one needs to do something like
```lean
  unfreezingI { lift s to finset α using hs },
```

I change the definition of `set.finite` to an inductive predicate that replicates the definition of `nonempty` and remove `unfreezingI` here and there. Equivalence to the old definition is given by `set.finite_def`.

### [2021-09-15T18:42:07+00:00](https://github.com/leanprover-community/mathlib/commit/244285c99ff851a08e062e9c36da364e88b199df)
feat(linear_algebra/free_module): add instances ([#9087](https://github.com/leanprover-community/mathlib/pull/#9087))

We add some `module.finite` instances. These are in the `linear_algebra/free_module.lean` files since they concern free modules.

From LTE

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-09-15T18:42:06+00:00](https://github.com/leanprover-community/mathlib/commit/bab7e996e539121ffe34b7856f03d7168c99cb97)
docs(data/part): add module docstring ([#8966](https://github.com/leanprover-community/mathlib/pull/#8966))

### [2021-09-15T17:09:28+00:00](https://github.com/leanprover-community/mathlib/commit/b63c5601669ddb47eec1e268ff1541f9a3a25562)
feat(data/set/Union_lift): lift functions to Unions of sets ([#9019](https://github.com/leanprover-community/mathlib/pull/#9019))



Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2021-09-15T15:40:39+00:00](https://github.com/leanprover-community/mathlib/commit/2597264226752356046efb2d9caf2917248c6a7d)
chore(ring_theory/ideal/operations): golf a definition using new actions ([#9152](https://github.com/leanprover-community/mathlib/pull/#9152))

This action can be expressed more directly in terms of other actions, without the unfolded definition changing.

### [2021-09-15T13:22:40+00:00](https://github.com/leanprover-community/mathlib/commit/3a6340cce2548d3b828eb322cc07a7c1fd11190a)
chore(data/dfinsupp): golf using `quotient.map` instead of `quotient.lift_on` ([#9176](https://github.com/leanprover-community/mathlib/pull/#9176))

### [2021-09-15T13:22:39+00:00](https://github.com/leanprover-community/mathlib/commit/f8d8171d35e9873f36a6103364d197d40b2bfaf3)
refactor(logic/relator): turn *_unique and *_total into defs, not classes ([#9135](https://github.com/leanprover-community/mathlib/pull/#9135))

We had (almost) no instances for these classes and (almost) no lemmas taking these assumptions as TC arguments.

### [2021-09-15T12:38:53+00:00](https://github.com/leanprover-community/mathlib/commit/f1bf7b87d137316fe221b5d615d9d1018eda416f)
feat(category_theory/filtered): Special support for bowtie and tulip diagrams ([#9099](https://github.com/leanprover-community/mathlib/pull/#9099))

Add special support for two kinds of diagram categories: The "bowtie" and the "tulip". These are convenient when proving that forgetful functors of algebraic categories preserve filtered colimits.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-09-15T10:33:05+00:00](https://github.com/leanprover-community/mathlib/commit/bb38ce969bc5d721d0d20fcaf6eacc40432837ba)
feat(ring_theory/artinian): is_nilpotent_jacobson ([#9153](https://github.com/leanprover-community/mathlib/pull/#9153))




Co-authored-by: Chris Hughes <chrishughes24@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-09-15T07:15:07+00:00](https://github.com/leanprover-community/mathlib/commit/85dc9f34670ce875bdfd99f088a2f93979722c21)
refactor(measure_theory/measure): redefine `measure_theory.sigma_finite` ([#9207](https://github.com/leanprover-community/mathlib/pull/#9207))

* don't require in the definition that covering sets are measurable;
* use `to_measurable` in `sigma_finite.out` to get measurable sets.

### [2021-09-15T06:12:44+00:00](https://github.com/leanprover-community/mathlib/commit/7492aa6016fd157ad00fc5e083f71aa2e1dd543d)
refactor(measure_theory/integral/lebesgue): golf a proof ([#9206](https://github.com/leanprover-community/mathlib/pull/#9206))

* add `exists_pos_tsum_mul_lt_of_encodable`;
* add `measure.spanning_sets_index` and lemmas about this definition;
* replace the proof of `exists_integrable_pos_of_sigma_finite` with a simpler one.

### [2021-09-15T02:43:59+00:00](https://github.com/leanprover-community/mathlib/commit/591ff3a55099c20db0cd7052c4e22439c0b2fdd2)
feat(group_theory/subgroup): Subgroup of subgroup is isomorphic to itself ([#9204](https://github.com/leanprover-community/mathlib/pull/#9204))

If `H ≤ K`, then `H` as a subgroup of `K` is isomorphic to `H`.

### [2021-09-15T02:43:58+00:00](https://github.com/leanprover-community/mathlib/commit/463089da199be4107849a80137d83c01b6d10935)
feat(order/rel_classes): A total relation is trichotomous ([#9181](https://github.com/leanprover-community/mathlib/pull/#9181))

### [2021-09-15T02:43:57+00:00](https://github.com/leanprover-community/mathlib/commit/23eac53f77fb8931c911ac44fb72c0dd5df96da5)
chore(*): upgrade to Lean 3.33.0c ([#9165](https://github.com/leanprover-community/mathlib/pull/#9165))

My main goal is to fix various diamonds with `sup`/`inf`, see leanprover-community/lean[#609](https://github.com/leanprover-community/mathlib/pull/#609). I use lean-master + 1 fixup commit leanprover-community/lean[#615](https://github.com/leanprover-community/mathlib/pull/#615).



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2021-09-15T00:53:15+00:00](https://github.com/leanprover-community/mathlib/commit/82dced6010ba7d840c3445ea32fe6e3fc63332b2)
feat(analysis/normed_space/finite_dimension): Riesz theorem on compact unit ball and finite dimension ([#9147](https://github.com/leanprover-community/mathlib/pull/#9147))

### [2021-09-14T20:59:54+00:00](https://github.com/leanprover-community/mathlib/commit/27b0a763e9b97b3faa721f172dde7c9a043c1c63)
feat(ring_theory/adjoin): adjoin_range_eq_range_aeval ([#9179](https://github.com/leanprover-community/mathlib/pull/#9179))




Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2021-09-14T18:16:26+00:00](https://github.com/leanprover-community/mathlib/commit/bf0b5df370c0012b5ac936d659d707798d86eb01)
chore(combinatorics/simple_graph): fixup docs ([#9161](https://github.com/leanprover-community/mathlib/pull/#9161))

### [2021-09-14T17:25:52+00:00](https://github.com/leanprover-community/mathlib/commit/ec118ddc821d9c8c9e3c229ab22fa683442eeceb)
ci(.github/workflows/*): lint PR style on GitHub runners ([#9198](https://github.com/leanprover-community/mathlib/pull/#9198))

Since the style linter usually finishes in just a few seconds, we can move it off our self-hosted runners to give PR authors quicker feedback when the build queue is long.

We do this only for PR runs, so that `bors` won't be held up in case the GitHub runners are backed up for whatever reason.

### [2021-09-14T15:08:00+00:00](https://github.com/leanprover-community/mathlib/commit/6a6b0a565bc853c356f5947fd9ac49e167a67e2c)
chore(order/pilex): use `*_order_of_*TO` from `order.rel_classes` ([#9129](https://github.com/leanprover-community/mathlib/pull/#9129))

This changes definitional equality for `≤` on `pilex` from
`x < y ∨ x = y` to `x = y ∨ x < y`.

### [2021-09-14T13:37:53+00:00](https://github.com/leanprover-community/mathlib/commit/91f053e1de71fd3f060a149553eb22f7c9174c65)
chore(*): simplify `data.real.cau_seq` import ([#9197](https://github.com/leanprover-community/mathlib/pull/#9197))

Some files were still importing `data.real.cau_seq` when their dependency really was on `is_absolute_value`, which has been moved to `algebra.absolute_value`. Hopefully simplifying the dependency tree slightly reduces build complexity.

### [2021-09-14T12:09:47+00:00](https://github.com/leanprover-community/mathlib/commit/e489ca1d71ee2823cfa091a837dd14d543712582)
feat(group_theory/p_group): Intersection with p-subgroup is a p-subgroup ([#9189](https://github.com/leanprover-community/mathlib/pull/#9189))

Two lemmas stating that the intersection with a p-subgroup is a p-subgroup.

Not sure which one should be called left and which one should be called right though :)

### [2021-09-14T12:09:45+00:00](https://github.com/leanprover-community/mathlib/commit/eb203909f00aa32ec4ba161d53fa684c1ac93594)
refactor(group_theory/p_group): Move lemmas to is_p_group namespace ([#9188](https://github.com/leanprover-community/mathlib/pull/#9188))

Moves `card_modeq_card_fixed_points`, `nonempty_fixed_point_of_prime_not_dvd_card`, and `exists_fixed_point_of_prime_dvd_card_of_fixed_point` to the `is_p_group` namespace. I think this simplifies things, since they already had explicit `hG : is_p_group G` hypotheses anyway.

### [2021-09-14T12:09:44+00:00](https://github.com/leanprover-community/mathlib/commit/6309c816c994eddb73ace361c9acf9fcf8f9172c)
chore(ring_theory/adjoin) elab_as_eliminator attribute ([#9168](https://github.com/leanprover-community/mathlib/pull/#9168))

### [2021-09-14T12:09:43+00:00](https://github.com/leanprover-community/mathlib/commit/251e418af125431425dd4d7a02470834a10ce2b8)
feat(ring_theory/nakayama): Alternative Statements of Nakayama's Lemma ([#9150](https://github.com/leanprover-community/mathlib/pull/#9150))




Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2021-09-14T12:09:42+00:00](https://github.com/leanprover-community/mathlib/commit/19949a07b4b85be1366f334897edaa0870ed0f10)
feat(linear_algebra/free_module): add instances ([#9072](https://github.com/leanprover-community/mathlib/pull/#9072))

From LTE.

We prove that `M →ₗ[R] N` is free if both `M` and `N` are finite and free. This needs the quite long result that for a finite and free module any basis is finite.

Co-authored with @jcommelin

### [2021-09-14T12:09:41+00:00](https://github.com/leanprover-community/mathlib/commit/2a3cd41b00dc5084ef5c0ddb201a5cba5ecb2d6d)
feat(group_theory/free_product): equivalence with reduced words ([#7395](https://github.com/leanprover-community/mathlib/pull/#7395))

We show that each element of the free product is represented by a unique reduced word.

### [2021-09-14T10:41:25+00:00](https://github.com/leanprover-community/mathlib/commit/7deb32cba91e4a0d772e73400b0596430b8a2a99)
chore(data/fintype/intervals): finiteness of `Ioo`, `Ioc`, and `Icc` over `ℕ` ([#9096](https://github.com/leanprover-community/mathlib/pull/#9096))

We already have the analogous lemmas and instance for `ℤ`.

### [2021-09-14T08:41:19+00:00](https://github.com/leanprover-community/mathlib/commit/2d57545bd2c8d13d1b356c64d53aff64a7b65089)
feat(measure_theory/measure/integral): integral over an encodable type ([#9191](https://github.com/leanprover-community/mathlib/pull/#9191))

### [2021-09-14T08:41:17+00:00](https://github.com/leanprover-community/mathlib/commit/790e98fbb5ec433d89d833320954607e79ae9071)
feat(linear_algebra/matrix/is_diag): add a file ([#9010](https://github.com/leanprover-community/mathlib/pull/#9010))




Co-authored-by: l534zhan <84618936+l534zhan@users.noreply.github.com>

### [2021-09-14T06:36:12+00:00](https://github.com/leanprover-community/mathlib/commit/9af1db3c4623df3cfd8b57260edb906b5922d8bb)
feat(measure_theory/measure/measure_space): The pushfoward measure of a finite measure is a finite measure ([#9186](https://github.com/leanprover-community/mathlib/pull/#9186))

### [2021-09-14T06:36:11+00:00](https://github.com/leanprover-community/mathlib/commit/ceab0e7f3bf80b6c92cdf5b022ad10eab7a9e912)
chore(order/bounded_lattice): make `bot_lt_some` and `some_lt_none` consistent ([#9180](https://github.com/leanprover-community/mathlib/pull/#9180))

`with_bot.bot_lt_some` gets renamed to `with_bot.none_lt_some` and now syntactically applies to `none : with_bot α` (`with_bot.bot_le_coe` already applies to `⊥` and `↑a`).
`with_top.some_lt_none` now takes `a` explicit.

### [2021-09-14T06:36:10+00:00](https://github.com/leanprover-community/mathlib/commit/ef78b322ab6b6b1a1fc634161686c104c274f9ac)
feat(measure_theory/function/lp_space): add lemmas about snorm and mem_Lp ([#9146](https://github.com/leanprover-community/mathlib/pull/#9146))

Also move lemma `snorm_add_le` (and related others) out of the borel space section, since `opens_measurable_space` is a sufficient hypothesis.

### [2021-09-14T06:36:09+00:00](https://github.com/leanprover-community/mathlib/commit/5aaa5faa310793e7ddb2ca5ad22b810a9b30ec70)
chore(measure_theory/integral/set_integral): update old lemmas that were in comments at the end of the file ([#9111](https://github.com/leanprover-community/mathlib/pull/#9111))

The file `set_integral` had a list of lemmas in comments at the end of the file, which were written for an old implementation of the set integral. This PR deletes the comments, and adds the corresponding results when they don't already exist.

The lemmas `set_integral_congr_set_ae` and `set_integral_mono_set` are also moved to relevant sections.



Co-authored-by: RemyDegenne <Remydegenne@gmail.com>

### [2021-09-14T06:36:08+00:00](https://github.com/leanprover-community/mathlib/commit/4b7593fc9a0f972a18966af357d117f7e81c62fb)
feat(data/last/basic): a lemma specifying list.split_on ([#9104](https://github.com/leanprover-community/mathlib/pull/#9104))




Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: Simon Hudon <simon.hudon@gmail.com>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-14T04:32:20+00:00](https://github.com/leanprover-community/mathlib/commit/d3b345df091d97bc5ed4ac8379ecbfcce1cd581d)
feat(group_theory/p_group): Bottom subgroup is a p-group ([#9190](https://github.com/leanprover-community/mathlib/pull/#9190))

The bottom subgroup is a p-group.

Name is consistent with `is_p_group.of_card`

### [2021-09-14T04:32:19+00:00](https://github.com/leanprover-community/mathlib/commit/8dffafd2f93010bf9166a2dcf27c4fd79c667f21)
feat(topology): one-point compactification of a topological space ([#8579](https://github.com/leanprover-community/mathlib/pull/#8579))

Define `alexandroff X` to be the one-point compactification of a topological space `X` and prove some basic lemmas about this definition.

Co-authored by: Yury G. Kudryashov <urkud@urkud.name>



Co-authored-by: Yourong "DZR" Zang <yourongzang@outlook.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-09-14T03:42:22+00:00](https://github.com/leanprover-community/mathlib/commit/f88f3a76d98bae05c299e441b8d44e2553230389)
chore(scripts): update nolints.txt ([#9192](https://github.com/leanprover-community/mathlib/pull/#9192))

I am happy to remove some nolints for you!

### [2021-09-14T01:19:50+00:00](https://github.com/leanprover-community/mathlib/commit/f0a1356c271029f8a7ecb58e22ad96654cfe30ad)
feat(linear_algebra/matrix/circulant): add a file ([#9011](https://github.com/leanprover-community/mathlib/pull/#9011))




Co-authored-by: l534zhan <84618936+l534zhan@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-09-13T23:34:39+00:00](https://github.com/leanprover-community/mathlib/commit/103c1ffa9866314b8cab5dd1d16aa698578ba6e0)
feat(data/(d)finsupp): (d)finsupp.update ([#9015](https://github.com/leanprover-community/mathlib/pull/#9015))







Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-09-13T18:35:51+00:00](https://github.com/leanprover-community/mathlib/commit/d9476d44489d2cee75c2c019f7b8e5e4871a4608)
fix(tactic/rcases): Don't parameterize parsers ([#9159](https://github.com/leanprover-community/mathlib/pull/#9159))

The parser description generator only unfolds parser constants if they have no arguments, which means that parsers like `rcases_patt_parse tt` and `rcases_patt_parse ff` don't generate descriptions even though they have a `with_desc` clause. We fix this by naming the parsers separately.

Fixes [#9158](https://github.com/leanprover-community/mathlib/pull/#9158)

### [2021-09-13T17:45:52+00:00](https://github.com/leanprover-community/mathlib/commit/ec5f4961f882d511cc4e723f86645698262af993)
feat(README.md): add Rémy Degenne ([#9187](https://github.com/leanprover-community/mathlib/pull/#9187))




Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2021-09-13T16:19:14+00:00](https://github.com/leanprover-community/mathlib/commit/40247bd55bcd42091a9a6128cacf53d30aa37990)
feat(measure_theory/measure/vector_measure): add `vector_measure.trim` ([#9169](https://github.com/leanprover-community/mathlib/pull/#9169))

### [2021-09-13T16:19:13+00:00](https://github.com/leanprover-community/mathlib/commit/3b4f4daf08d0f83165c348fd3854a0e34448da84)
feat(linear_algebra/determinant): more on the determinant of linear maps ([#9139](https://github.com/leanprover-community/mathlib/pull/#9139))

### [2021-09-13T13:59:40+00:00](https://github.com/leanprover-community/mathlib/commit/a9e7d333b0cfd45f13a20f7b96b7d52e19fa2901)
chore(analysis/calculus/[f]deriv): generalize product formula to product in normed algebras ([#9163](https://github.com/leanprover-community/mathlib/pull/#9163))

### [2021-09-13T13:59:39+00:00](https://github.com/leanprover-community/mathlib/commit/ad625833f959814127c4641bd41061fd1249f11c)
chore(algebra/big_operators): add a lemma ([#9120](https://github.com/leanprover-community/mathlib/pull/#9120))

(product over `s.filter p`) * (product over `s.filter (λ x, ¬p x)) = product over s

### [2021-09-13T10:22:39+00:00](https://github.com/leanprover-community/mathlib/commit/b0e8ced14fa024c290d90843076956543a180fcd)
feat(group_theory/nilpotent): add intermediate lemmas ([#9016](https://github.com/leanprover-community/mathlib/pull/#9016))

Add two new lemmas on nilpotent groups.



Co-authored-by: ineswright <52750254+ineswright@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-09-13T09:34:19+00:00](https://github.com/leanprover-community/mathlib/commit/a8a8edcb3651c70350ad89e680fc88bb96169f1b)
feat(group_theory/p_group): Generalize to infinite p-groups ([#9082](https://github.com/leanprover-community/mathlib/pull/#9082))

Defines p-groups, and generalizes the results of `p_group.lean` to infinite p-groups. The eventual goal is to generalize Sylow's theorems to infinite groups.

### [2021-09-13T09:34:17+00:00](https://github.com/leanprover-community/mathlib/commit/d4f8b921d9630f9903a700d04807ca16b7688e62)
feat(measure_theory/measure/with_density_vector_measure): define vector measures by an integral over a function ([#9008](https://github.com/leanprover-community/mathlib/pull/#9008))

This PR defined the vector measure corresponding to mapping the set `s` to the integral `∫ x in s, f x ∂μ` given some measure `μ` and some integrable function `f`.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-09-13T09:34:16+00:00](https://github.com/leanprover-community/mathlib/commit/80085fc25122d0c7fa9bc66bd51dee8920bdb461)
feat(number_theory/padics/padic_integers): Z_p is adically complete ([#8995](https://github.com/leanprover-community/mathlib/pull/#8995))

### [2021-09-13T08:46:12+00:00](https://github.com/leanprover-community/mathlib/commit/d0820017c556fb8e53fca987a42ee02e6b01aaba)
feat(analysis/convex/independent): convex independence ([#9018](https://github.com/leanprover-community/mathlib/pull/#9018))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-13T06:36:44+00:00](https://github.com/leanprover-community/mathlib/commit/1cf17041ab4cd296e19fb61a102e8789e0ad2146)
chore(order/filter): more readable proof ([#9173](https://github.com/leanprover-community/mathlib/pull/#9173))

### [2021-09-13T06:36:43+00:00](https://github.com/leanprover-community/mathlib/commit/14790682264816ffcc5643a4c533f50a32385da3)
chore(ring_theory/polynomial/cyclotomic): fix namespacing ([#9116](https://github.com/leanprover-community/mathlib/pull/#9116))

@riccardobrasca told me I got it wrong, so I fixed it :)



Co-authored-by: Eric <ericrboidi@gmail.com>

### [2021-09-13T06:00:30+00:00](https://github.com/leanprover-community/mathlib/commit/5651157394e2b009f4ec974accbb133d19d137d1)
feat(linear_algebra/adic_completion): le_jacobson_bot ([#9125](https://github.com/leanprover-community/mathlib/pull/#9125))

This PR proves that in an `I`-adically complete commutative ring `R`, the ideal `I` is contained in the Jacobson radical of `R`.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-09-13T04:04:40+00:00](https://github.com/leanprover-community/mathlib/commit/ca23d52c5e78475ba14cb20ba24377e1ce8354f7)
feat(set_theory/surreal): add dyadic surreals ([#7843](https://github.com/leanprover-community/mathlib/pull/#7843))

We define `surreal.dyadic` using a map from \int localized away from 2 to surreals. As currently we do not have the ring structure on `surreal` we do this "by hand". 

Next steps: 
1. Prove that `dyadic_map` is injective
2. Prove that `dyadic_map` is a group hom
3. Show that \int localized away from 2 is a subgroup of \rat.

### [2021-09-13T02:40:27+00:00](https://github.com/leanprover-community/mathlib/commit/f0effbda056147f017bc4de9c3b4a9e955e82c51)
chore(scripts): update nolints.txt ([#9177](https://github.com/leanprover-community/mathlib/pull/#9177))

I am happy to remove some nolints for you!

### [2021-09-13T00:53:07+00:00](https://github.com/leanprover-community/mathlib/commit/87c1820c95f930491f8c97a56949d82e49695c7e)
feat(group_theory/perm/concrete_cycle): perms from cycle data structure ([#8866](https://github.com/leanprover-community/mathlib/pull/#8866))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-09-12T22:30:08+00:00](https://github.com/leanprover-community/mathlib/commit/f6c8affd55f4a9db5e2cdeb7e4ed7100066cbf3c)
feat(order/zorn) : `chain_univ` ([#9162](https://github.com/leanprover-community/mathlib/pull/#9162))

`univ` is a `r`-chain iff `r` is trichotomous

### [2021-09-12T20:47:08+00:00](https://github.com/leanprover-community/mathlib/commit/5b702ec346491acf7a614e4269a2eec266558b4c)
chore(linear_algebra/basic): move map_comap_eq into submodule namespace ([#9160](https://github.com/leanprover-community/mathlib/pull/#9160))

We change the following lemmas from the `linear_map` namespace into the `submodule` namespace
- map_comap_eq
- comap_map_eq
- map_comap_eq_self
- comap_map_eq_self

This is consistent with `subgroup.map_comap_eq`, and the lemmas are about `submodule.map` so it make sense to keep them in the submodule namespace.

### [2021-09-12T18:41:01+00:00](https://github.com/leanprover-community/mathlib/commit/00d570af46a6c414ee2813e65cd47b418b694360)
doc(algebra/covariant_and_contravariant): fix parameter documentation… ([#9171](https://github.com/leanprover-community/mathlib/pull/#9171))

… in covariant_class and contravariant_class

In the documentation of `algebra.covariant_and_contravariant.covariant_class` and `algebra.covariant_and_contravariant.contravariant_class`, the parameter `r` is described as having type `N → N`. It's actual type is `N → N → Prop`. We change the documentation to give the correct type of `r`.

### [2021-09-12T18:41:00+00:00](https://github.com/leanprover-community/mathlib/commit/65f8148b4509fd43d60bf34c323a828151c52c43)
chore(algebra/field_power): golf some proofs ([#9170](https://github.com/leanprover-community/mathlib/pull/#9170))

### [2021-09-12T18:40:59+00:00](https://github.com/leanprover-community/mathlib/commit/3366a6858a7c64799b4ff66debe89c2d795ec351)
feat(data/fin): eq_zero_or_eq_succ ([#9136](https://github.com/leanprover-community/mathlib/pull/#9136))

Particularly useful with `rcases i.eq_zero_or_eq_succ with rfl|⟨j,rfl⟩`.

Perhaps it not worth having as a separate lemma, but it seems to avoid breaking the flow of a proof I was writing.

### [2021-09-12T17:53:26+00:00](https://github.com/leanprover-community/mathlib/commit/a7d872fa0f435165e7e56a0395359c84679e54b5)
chore(category/abelian/pseudoelements): localize expensive typeclass ([#9156](https://github.com/leanprover-community/mathlib/pull/#9156))

Per @fpvandoorn's [new linter](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type-class.20loops.20in.20category.20theory).

### [2021-09-12T15:14:38+00:00](https://github.com/leanprover-community/mathlib/commit/995f48197fed10e3fd7f4f5af758ee54c1c9f88d)
feat(logic/basic): a few lemmas ([#9166](https://github.com/leanprover-community/mathlib/pull/#9166))

### [2021-09-12T09:48:17+00:00](https://github.com/leanprover-community/mathlib/commit/04d2b12ec53bdd67d097c270dab957e0e07d996c)
feat(ring_theory/ideal/operations): annihilator_smul ([#9151](https://github.com/leanprover-community/mathlib/pull/#9151))




Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2021-09-12T06:48:16+00:00](https://github.com/leanprover-community/mathlib/commit/f8637039c4de2a4b9f3c436ba5186b7b69000ad1)
fix(category_theory/concrete_category): remove bad instance ([#9154](https://github.com/leanprover-community/mathlib/pull/#9154))

Per @fpvandoorn's [new linter](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type-class.20loops.20in.20category.20theory).

### [2021-09-12T06:48:15+00:00](https://github.com/leanprover-community/mathlib/commit/858e7649b9ff1677872e8228ff19f21debc3529c)
fix(ring_theory/ideal/basic): ideal.module_pi speedup ([#9148](https://github.com/leanprover-community/mathlib/pull/#9148))

Eric and Yael were both complaining that `ideal.module_pi` would occasionally cause random timeouts on unrelated PRs. This PR (a) makes the `smul` proof obligation much tidier (factoring out a sublemma) and (b) replaces the `all_goals` trick by 6 slightly more refined proofs (making the new proof longer, but quicker). On my machine the profiler stats are:

```
ORIG

parsing took 74.1ms
elaboration of module_pi took 3.83s
type checking of module_pi took 424ms
decl post-processing of module_pi took 402ms

NEW

parsing took 136ms
elaboration of module_pi took 1.19s
type checking of module_pi took 82.8ms
decl post-processing of module_pi took 82.5ms
```

### [2021-09-12T06:48:14+00:00](https://github.com/leanprover-community/mathlib/commit/b55483ae6de2141f1db84fcf0419ea363c737d91)
feat(category_theory/monoidal): rigid (autonomous) monoidal categories ([#8946](https://github.com/leanprover-community/mathlib/pull/#8946))

Defines rigid monoidal categories and creates the instance of finite dimensional vector spaces.

### [2021-09-12T05:54:55+00:00](https://github.com/leanprover-community/mathlib/commit/e1bed5a054ee778275ae90c8ffb7620d18727e83)
fix(category_theory/adjunction/limits): remove bad instance ([#9157](https://github.com/leanprover-community/mathlib/pull/#9157))

Per @fpvandoorn's [new linter](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type-class.20loops.20in.20category.20theory).

### [2021-09-12T05:54:54+00:00](https://github.com/leanprover-community/mathlib/commit/059eba4679359672eb33d5498fb26638b6d9cd0a)
fix(category/preadditive/single_obj): remove superfluous instance ([#9155](https://github.com/leanprover-community/mathlib/pull/#9155))

Per @fpvandoorn's [new linter](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type-class.20loops.20in.20category.20theory).

### [2021-09-12T02:16:49+00:00](https://github.com/leanprover-community/mathlib/commit/96c1d69bb0ec3c7d9c00f1f366f9c7a71edaa985)
doc(data/list/*): Elaborate module docstrings ([#9076](https://github.com/leanprover-community/mathlib/pull/#9076))


Just adding some elaboration that @YaelDillies requested in [#8867](https://github.com/leanprover-community/mathlib/pull/#8867), but which didn't get included before it was merged.

### [2021-09-12T01:07:51+00:00](https://github.com/leanprover-community/mathlib/commit/f75bee3feafa295228b467c6ece3e0e2f099fafa)
chore(ring_theory/noetherian): fix URL ([#9149](https://github.com/leanprover-community/mathlib/pull/#9149))

### [2021-09-11T22:57:24+00:00](https://github.com/leanprover-community/mathlib/commit/55aaebe1f8f86bc8c8830935b1861818b097d123)
feat(data/real/ennreal): add `contravariant_class ennreal ennreal (+) (<)` ([#9143](https://github.com/leanprover-community/mathlib/pull/#9143))

## `algebra/ordered_monoid`

* use `≠ ⊤`/`≠ ⊥` instead of `< ⊤`/`⊥ <`  in the assumptions of `with_top.add_lt_add_iff_left`, `with_top.add_lt_add_iff_right`, `with_bot.add_lt_add_iff_left`, and `with_bot.add_lt_add_iff_right`;
* add instances for `contravariant_class (with_top α) (with_top α) (+) (<)` and `contravariant_class (with_bot α) (with_bot α) (+) (<)`.

## `data/real/ennreal`

* use `≠ ∞` instead of `< ∞`  in the assumptions of `ennreal.add_lt_add_iff_left`, `ennreal.add_lt_add_iff_right`, `ennreal.lt_add_right`,
* add an instance `contravariant_class ℝ≥0∞ ℝ≥0∞ (+) (<)`;
* rename `ennreal.sub_infty` to `ennreal.sub_top`.

## `measure_theory/measure/outer_measure`

* use `≠ ∞` instead of `< ∞`  in the assumptions of `induced_outer_measure_exists_set`;

## `topology/metric_space/emetric_space`

* use `≠ ∞` instead of `< ∞`  in the assumptions of `emetric.ball_subset`.

### [2021-09-11T21:56:23+00:00](https://github.com/leanprover-community/mathlib/commit/c0693ca02583a2f872b46b7a0b397199c49226c3)
chore(analysis/calculus/*): add `filter.eventually_eq.deriv` etc. ([#9131](https://github.com/leanprover-community/mathlib/pull/#9131))

* add `filter.eventually_eq.deriv` and `filter.eventually_eq.fderiv`;
* add `times_cont_diff_within_at.eventually` and `times_cont_diff_at.eventually`.

### [2021-09-11T20:56:00+00:00](https://github.com/leanprover-community/mathlib/commit/1605b859375ce3b62aed7ada89ab6991b46a90da)
feat(data/real/ennreal): add ennreal.to_(nn)real_inv and ennreal.to_(nn)real_div ([#9144](https://github.com/leanprover-community/mathlib/pull/#9144))

### [2021-09-11T17:31:41+00:00](https://github.com/leanprover-community/mathlib/commit/b9ad73330481f7133aca294b738d3888c6bcb5d4)
split(analysis/convex/combination): split off `analysis.convex.basic` ([#9115](https://github.com/leanprover-community/mathlib/pull/#9115))

This moves `finset.center_mass` into its own new file.

About the copyright header, `finset.center_mass` comes from [#1804](https://github.com/leanprover-community/mathlib/pull/#1804), which was written by Yury in December 2019.

### [2021-09-11T15:52:14+00:00](https://github.com/leanprover-community/mathlib/commit/62de5912a37603789cdcdcbef4488826ca416627)
feat(interval_integral): generalize change of variables ([#8869](https://github.com/leanprover-community/mathlib/pull/#8869))

* Generalizes `interval_integral.integral_comp_mul_deriv'`.
In this version:
(1) `f` need not be differentiable at the endpoints of `[a,b]`, only continuous,
(2) I removed the `measurable_at_filter` assumption
(3) I assumed that `g` was continuous on `f '' [a,b]`, instead of continuous at every point of `f '' [a,b]` (which differs in the endpoints).

This was possible after @sgouezel's PR [#7978](https://github.com/leanprover-community/mathlib/pull/#7978).

The proof was a lot longer/messier than expected. Under these assumptions we have to be careful to sometimes take one-sided derivatives. For example, we cannot take the 2-sided derivative of `λ u, ∫ x in f a..u, g x` when `u` is the maximum/minimum of `f` on `[a, b]`.

@urkud: I needed more `FTC_filter` classes, namely for closed intervals (to be precise: `FTC_filter x (𝓝[[a, b]] x) (𝓝[[a, b]] x)`). Was there a conscious reason to exclude these classes? (The documentation explicitly enumerates the existing instances.)

### [2021-09-11T14:06:54+00:00](https://github.com/leanprover-community/mathlib/commit/6823886c7e91bd92d90cd754ee82e45b7de90a4a)
feat(measure_theory/function/conditional_expectation): conditional expectation of an indicator ([#8920](https://github.com/leanprover-community/mathlib/pull/#8920))

This PR builds `condexp_ind  (s : set α) : E →L[ℝ] α →₁[μ] E`, which takes `x : E` to the conditional expectation of the indicator of the set `s` with value `x`, seen as an element of `α →₁[μ] E`.

This linear map will be used in a next PR to define the conditional expectation from L1 to L1, by using the same extension mechanism as in the Bochner integral construction.

### [2021-09-11T12:23:38+00:00](https://github.com/leanprover-community/mathlib/commit/241ee9eea6b10fe1335b9af3a38ebebb071466fb)
feat(data/finsupp): more lemmas about `α →₀ ℕ` ([#9137](https://github.com/leanprover-community/mathlib/pull/#9137))

### [2021-09-11T12:23:37+00:00](https://github.com/leanprover-community/mathlib/commit/e0093544cddc451ecead475a038fba5a7c754ecd)
chore(data/mv_polynomials): golf, add a lemma ([#9132](https://github.com/leanprover-community/mathlib/pull/#9132))

* add `monoid_algebra.support_mul_single`;
* transfer a few more lemmas from `monoid_algebra` to `add_monoid_algebra`
* add `mv_polynomial.support_mul_X`
* reuse a proof.

### [2021-09-11T12:23:36+00:00](https://github.com/leanprover-community/mathlib/commit/d72119cbd2c86f8d8efb0a8433543e6042f2aaa3)
feat(data/mv_polynomial/equiv): empty_equiv ([#9122](https://github.com/leanprover-community/mathlib/pull/#9122))




Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2021-09-11T11:48:10+00:00](https://github.com/leanprover-community/mathlib/commit/f318e5d60e425312d869faa076ac125af043b156)
chore(ring_theory/artinian): typo ([#9140](https://github.com/leanprover-community/mathlib/pull/#9140))

### [2021-09-11T04:25:26+00:00](https://github.com/leanprover-community/mathlib/commit/579ca5ed24bbdcede10396567927809902d523a1)
chore(combinatorics/simple_graph): rename sym to symm ([#9134](https://github.com/leanprover-community/mathlib/pull/#9134))

The naming convention for symmetry of a relation in mathlib seems to be symm, so this commit renames the axiom for the symmetry of the adjacency relation of a simple graph to this.

### [2021-09-11T04:25:25+00:00](https://github.com/leanprover-community/mathlib/commit/919aad215a615c5e93352c45331f30d17745b14c)
refactor(topology/path_connected): make `path` extend `C(I, X)` ([#9133](https://github.com/leanprover-community/mathlib/pull/#9133))

### [2021-09-11T04:25:24+00:00](https://github.com/leanprover-community/mathlib/commit/84136229e1dfc73174e6d7421dd6ae687fe1c2e3)
chore(algebra/ordered_smul): reduce instance assumptions & delete duplicated instances ([#9130](https://github.com/leanprover-community/mathlib/pull/#9130))

These instances all assumed `semiring R` superfluously:
* `order_dual.smul_with_zero`
* `order_dual.mul_action`
* `order_dual.mul_action_with_zero`
* `order_dual.distrib_mul_action`

and these instances were duplicates (with their `opposite.`-less counterparts):
* `opposite.mul_zero_class.to_opposite_smul_with_zero`
* `opposite.monoid_with_zero.to_opposite_mul_action_with_zero`
* `opposite.semiring.to_opposite_module`

### [2021-09-11T04:25:23+00:00](https://github.com/leanprover-community/mathlib/commit/2e9f708d98f7a85db404245468b9c430cbfc65af)
feat(algebra/ordered_monoid): order_embedding.mul_left ([#9127](https://github.com/leanprover-community/mathlib/pull/#9127))

### [2021-09-11T03:46:20+00:00](https://github.com/leanprover-community/mathlib/commit/4c96b8a51aa82ac4f3bae77794ea6116303c1c86)
feat(measure_theory/measure/set_integral): new lemma integral_Union ([#9093](https://github.com/leanprover-community/mathlib/pull/#9093))

### [2021-09-11T01:08:22+00:00](https://github.com/leanprover-community/mathlib/commit/426227d4843cc8c1b24526944079f330e0562580)
chore(algebra/group/basic): add 3 `simp` attrs ([#9050](https://github.com/leanprover-community/mathlib/pull/#9050))

### [2021-09-10T20:31:43+00:00](https://github.com/leanprover-community/mathlib/commit/e4ca1175fee6198d2338fc57acfc127cff43b608)
feat(ring_theory/algebraic): is_algebraic_of_larger_base ([#9109](https://github.com/leanprover-community/mathlib/pull/#9109))

### [2021-09-10T18:48:06+00:00](https://github.com/leanprover-community/mathlib/commit/7500529f9836964b28bd6c317b0c76f33692505f)
refactor(analysis/convex/basic): generalize segments to vector spaces ([#9094](https://github.com/leanprover-community/mathlib/pull/#9094))

`segment` and `open_segment` are currently only defined in real vector spaces. This generalizes ℝ to arbitrary ordered_semirings in definitions and abstracts it away to the correct generality in lemmas. It also generalizes the space from `add_comm_group` to `add_comm_monoid` where possible.

### [2021-09-10T18:48:05+00:00](https://github.com/leanprover-community/mathlib/commit/0e014ba5d88a0ee6bcfd65a85bda19ba3f02c5c5)
feat(combinatorics/simple_graph/adj_matrix): more lemmas ([#9021](https://github.com/leanprover-community/mathlib/pull/#9021))




Co-authored-by: l534zhan <84618936+l534zhan@users.noreply.github.com>
Co-authored-by: Kyle Miller <kmill31415@gmail.com>

### [2021-09-10T16:18:38+00:00](https://github.com/leanprover-community/mathlib/commit/a949b57ba58193cdb5bd356a3b3f27dc31240a33)
feat(data/mv_polynomial): mv_polynomial.subsingleton ([#9124](https://github.com/leanprover-community/mathlib/pull/#9124))

### [2021-09-10T16:18:37+00:00](https://github.com/leanprover-community/mathlib/commit/92e7bbe9dab20da3a53f841521563fd912338d91)
refactor(algebra/group/units): better defeq for is_unit.unit ([#9112](https://github.com/leanprover-community/mathlib/pull/#9112))

Make sure that, for `x : M` and `h : is_unit M`, then `is_unit.unit x h : M` is defeq to `x`.

### [2021-09-10T16:18:36+00:00](https://github.com/leanprover-community/mathlib/commit/574864d3247c76c36a3d48593171ffba0b00c557)
feat(topology/compact_open): express the compact-open topology as an Inf of topologies ([#9106](https://github.com/leanprover-community/mathlib/pull/#9106))

For `f : C(α, β)` and a set `s` in `α`, define `f.restrict s` to be the restriction of `f` as an element of `C(s, β)`.  This PR then proves that the compact-open topology on `C(α, β)` is equal to the infimum of the induced compact-open topologies from the restrictions to compact sets.

### [2021-09-10T16:18:35+00:00](https://github.com/leanprover-community/mathlib/commit/d2afdc59bb04cb0b0e4a95748e821436b830ff36)
feat(ring_theory/dedekind_domain): add proof that `I \sup J` is the product of `factors I \inf factors J` for `I, J` ideals in a Dedekind Domain  ([#9055](https://github.com/leanprover-community/mathlib/pull/#9055))

### [2021-09-10T15:18:22+00:00](https://github.com/leanprover-community/mathlib/commit/6d2cbf9df602a9bd62cf82e7d8ed76b34f4b1e6e)
feat(ring_theory/artinian): Artinian modules ([#9009](https://github.com/leanprover-community/mathlib/pull/#9009))



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-09-10T15:18:21+00:00](https://github.com/leanprover-community/mathlib/commit/2410c1ff70c6b6c8f430294e23d9248bfd759cc5)
feat(topology/homotopy): Define homotopy between functions ([#8947](https://github.com/leanprover-community/mathlib/pull/#8947))

More PRs are to come, with homotopy between paths etc. So this will probably become a folder at some point, but for now I've just put it in `topology/homotopy.lean`. There's also not that much API here at the moment, more will be added later on.

### [2021-09-10T13:08:34+00:00](https://github.com/leanprover-community/mathlib/commit/5ce9280f3a12f75e517ab23c97dad154ca7777b1)
feat(measure_theory/integral/bochner): generalize the Bochner integral construction ([#8939](https://github.com/leanprover-community/mathlib/pull/#8939))

The construction of the Bochner integral is generalized to a process extending a set function `T : set α → (E →L[ℝ] F)` from sets to functions in L1. The integral corresponds to `T s` equal to the linear map `E →L[ℝ] E` with value `λ x, (μ s).to_real • x`.

The conditional expectation from L1 to L1 will be defined by taking for `T` the function `condexp_ind : set α → (E →L[ℝ] α →₁[μ] E)` defined in [#8920](https://github.com/leanprover-community/mathlib/pull/#8920) .

### [2021-09-10T13:08:33+00:00](https://github.com/leanprover-community/mathlib/commit/56ff42bdd2932e38cb6d00516533f48c432a9fb1)
feat(linear_algebra/matrix/transvection): matrices are generated by transvections and diagonal matrices ([#8898](https://github.com/leanprover-community/mathlib/pull/#8898))

One version of Gauss' pivot: any matrix can be obtained starting from a diagonal matrix and doing elementary moves on rows and columns. Phrased in terms of multiplication by transvections.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-09-10T10:53:36+00:00](https://github.com/leanprover-community/mathlib/commit/a057a8e900be5aec9b3518aa4d6cbf8252ecf45b)
feat(ring_theory/norm): `norm R x = 0 ↔ x = 0` ([#9042](https://github.com/leanprover-community/mathlib/pull/#9042))

Nonzero values of `S / R` have nonzero norm over `R`.



Co-authored-by: Anne Baanen <t.baanen@vu.nl>

### [2021-09-10T07:18:23+00:00](https://github.com/leanprover-community/mathlib/commit/37e17c5dc9563094765689b36577168dbe886d22)
feat(measure_theory/integral/lebesgue): add some lintegral lemmas ([#9064](https://github.com/leanprover-community/mathlib/pull/#9064))

This PR contains some lemmas useful for [#9065](https://github.com/leanprover-community/mathlib/pull/#9065).

### [2021-09-10T07:18:22+00:00](https://github.com/leanprover-community/mathlib/commit/ae86776fc6590d289eaf14243e719a80fd2f0987)
feat(measure_theory/measure/vector_measure): define mutually singular for vector measures ([#8896](https://github.com/leanprover-community/mathlib/pull/#8896))

### [2021-09-10T02:16:47+00:00](https://github.com/leanprover-community/mathlib/commit/aec02d8812a47d2eb1594483c90f9159a270b8ba)
chore(scripts): update nolints.txt ([#9126](https://github.com/leanprover-community/mathlib/pull/#9126))

I am happy to remove some nolints for you!

### [2021-09-09T20:12:35+00:00](https://github.com/leanprover-community/mathlib/commit/4d88ae8eeec3100d79e1350a54c9a86863dfd6ec)
feat(tactic/lint): better fails_quickly linter ([#8932](https://github.com/leanprover-community/mathlib/pull/#8932))

This linter catches a lot more loops.



Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-09-09T17:58:39+00:00](https://github.com/leanprover-community/mathlib/commit/138d98b1b7cc5888dbff71d9291e6bbd93ab15db)
feat(ring_theory/mv_polynomial): linear_independent_X ([#9118](https://github.com/leanprover-community/mathlib/pull/#9118))

### [2021-09-09T16:13:53+00:00](https://github.com/leanprover-community/mathlib/commit/b9fcf9b1fe840a5382caca883102b699458d0c9e)
feat(linear_algebra/matrix/nonsingular_inverse): adjugate_mul_distrib ([#8682](https://github.com/leanprover-community/mathlib/pull/#8682))

We prove that the adjugate of a matrix distributes over the product. To do so, a separate file 
`linear_algebra.matrix.polynomial` states some general facts about the polynomial `det (t I + A)`.




Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2021-09-09T14:10:32+00:00](https://github.com/leanprover-community/mathlib/commit/2331607e9672a1edfd5aeb72d0b30f880579fa76)
feat(group_theory/sub{monoid,group}): pointwise actions on `add_sub{monoid,group}`s and `sub{monoid,group,module,semiring,ring,algebra}`s ([#8945](https://github.com/leanprover-community/mathlib/pull/#8945))

This adds the pointwise actions characterized by `↑(m • S) = (m • ↑S : set R)` on:
* `submonoid`
* `subgroup`
* `add_submonoid`
* `add_subgroup`
* `submodule` ([Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lost.20instance/near/249467913))
* `subsemiring`
* `subring`
* `subalgebra`

within the locale `pointwise` (which must be open to state the RHS of the characterization above anyway).

### [2021-09-09T12:54:22+00:00](https://github.com/leanprover-community/mathlib/commit/182567111fced5b4f3fb4ef669bd6424de1d498f)
feat(ring_theory/unique_factorization_domain): add lemma that a member of `factors a` divides `a` ([#9108](https://github.com/leanprover-community/mathlib/pull/#9108))

### [2021-09-09T09:36:30+00:00](https://github.com/leanprover-community/mathlib/commit/e597b75c5f90bb50678b2e7f95aa07af412a41f9)
feat(algebra/algebra/subalgebra): mem_under ([#9107](https://github.com/leanprover-community/mathlib/pull/#9107))

### [2021-09-09T09:36:29+00:00](https://github.com/leanprover-community/mathlib/commit/694da7e264955681b20c3a7c9979b08cc15082dc)
feat(ring_theory): the surjective image of a PID is a PID ([#9069](https://github.com/leanprover-community/mathlib/pull/#9069))

If the preimage of an ideal/submodule under a surjective map is principal, so is the original ideal. Therefore, the image of a principal ideal domain under a surjective ring hom is again a PID.

### [2021-09-09T09:36:28+00:00](https://github.com/leanprover-community/mathlib/commit/135639785a6b3955b60fe30c9ef6dd14a35d42ed)
refactor(linear_algebra/*): linear_equiv.of_bijective over semirings ([#9061](https://github.com/leanprover-community/mathlib/pull/#9061))

`linear_equiv.of_injective` and `linear_equiv.of_bijective`
took as assumption `f.ker = \bot`,
which is equivalent to injectivity of `f` over rings,
but not over semirings.

This PR changes the assumption to `injective f`.
For reasons of symmetry,
the surjectivity assumption is also switched to `surjective f`.

As a consequence, this PR also renames:

* `linear_equiv_of_ker_eq_bot` to `linear_equiv_of_injective`
* `linear_equiv_of_ker_eq_bot_apply` to `linear_equiv_of_injective_apply`

### [2021-09-09T07:32:09+00:00](https://github.com/leanprover-community/mathlib/commit/f6ccb6b8ce02c6890effba9e06c565652fc54a23)
chore(ring_theory/polynomial/cyclotomic): golf+remove `nontrivial` ([#9090](https://github.com/leanprover-community/mathlib/pull/#9090))

### [2021-09-09T07:32:08+00:00](https://github.com/leanprover-community/mathlib/commit/90475a9b99604f918292045f7ef7a2238db0f2cc)
refactor(data/matrix): put std_basis_matrix in its own file ([#9088](https://github.com/leanprover-community/mathlib/pull/#9088))

The authors here are recovered from the git history.

I've avoided the temptation to generalize typeclasses in this PR; the lemmas are copied to this file unmodified.

### [2021-09-09T07:32:07+00:00](https://github.com/leanprover-community/mathlib/commit/956897756c920a4bfb21d34f33dad0f639d3902e)
fix(group_theory/group_action): generalize assumptions on `ite_smul` and `smul_ite` ([#9085](https://github.com/leanprover-community/mathlib/pull/#9085))

### [2021-09-09T07:32:06+00:00](https://github.com/leanprover-community/mathlib/commit/3e10324f686c8d895f97e4160a8ff796adaabdd4)
feat(data/polynomial/taylor): Taylor expansion of polynomials ([#9000](https://github.com/leanprover-community/mathlib/pull/#9000))

### [2021-09-09T06:19:13+00:00](https://github.com/leanprover-community/mathlib/commit/e336caf0724ba77e0d7fe499f6993e7db6c12581)
chore(algebra/floor): add a trivial lemma ([#9098](https://github.com/leanprover-community/mathlib/pull/#9098))

* add `nat_ceil_eq_zero`;
* add `@[simp]` to `nat_ceil_le`.

### [2021-09-09T04:01:05+00:00](https://github.com/leanprover-community/mathlib/commit/796efae2663bce6096af1c5860b4662c410ea88e)
feat(data/real/sqrt): `nnreal.coe_sqrt` and `nnreal.sqrt_eq_rpow` ([#9025](https://github.com/leanprover-community/mathlib/pull/#9025))

Also rename a few lemmas:
* `nnreal.mul_sqrt_self` -> `nnreal.mul_self_sqrt` to follow `real.mul_self_sqrt`
* `real.sqrt_le` -> `real.sqrt_le_sqrt_iff`
* `real.sqrt_lt` -> `real.sqrt_lt_sqrt_iff`

and provide a few more for commodity:
* `nnreal.sqrt_sq`
* `nnreal.sq_sqrt`
* `real.sqrt_lt_sqrt`
* `real.sqrt_lt_sqrt_iff_of_pos`
* `nnreal.sqrt_le_sqrt_iff`
* `nnreal.sqrt_lt_sqrt_iff`

Closes [#8016](https://github.com/leanprover-community/mathlib/pull/#8016)

### [2021-09-09T02:59:19+00:00](https://github.com/leanprover-community/mathlib/commit/15b6c56a895a245a3f47e2ee5a34127775eb6c46)
refactor(category_theory/limits/types): Refactor filtered colimits. ([#9100](https://github.com/leanprover-community/mathlib/pull/#9100))

- Rename `filtered_colimit.r` into `filtered_colimit.rel`, to match up with `quot.rel`,
- Rename lemma `r_ge`,
- Abstract out lemma `eqv_gen_quot_rel_of_rel` from later proof.

### [2021-09-09T02:09:44+00:00](https://github.com/leanprover-community/mathlib/commit/cfc6b48a0d946f7a5c1d18d5a054b81d6fc1ca51)
chore(scripts): update nolints.txt ([#9105](https://github.com/leanprover-community/mathlib/pull/#9105))

I am happy to remove some nolints for you!

### [2021-09-09T00:00:26+00:00](https://github.com/leanprover-community/mathlib/commit/49cf38695efee79653917012f1a60119152231c9)
feat(measure_theory/measure/vector_measure): add `absolutely_continuous.add` and `absolutely_continuous.smul` ([#9086](https://github.com/leanprover-community/mathlib/pull/#9086))

### [2021-09-08T21:47:47+00:00](https://github.com/leanprover-community/mathlib/commit/87e7a0c702c6360375c56560f4597006c3bf3867)
feat(linear_algebra/matrix): `M` maps some `v ≠ 0` to zero iff `det M = 0` ([#9041](https://github.com/leanprover-community/mathlib/pull/#9041))

A result I have wanted for a long time: the two notions of a "singular" matrix are equivalent over an integral domain. Namely, a matrix `M` is singular iff it maps some nonzero vector to zero, which happens iff its determinant is zero.

Here, I find such a `v` by going through the field of fractions, where everything is a lot easier because all injective endomorphisms are automorphisms. Maybe a bit overkill (and unsatisfying constructively), but it works and is a lot nicer to write out than explicitly finding an element of the kernel.

### [2021-09-08T21:02:02+00:00](https://github.com/leanprover-community/mathlib/commit/ab0a2959c83b06280ef576bc830d4aa5fe8c8e61)
feat(linear_algebra/matrix): some bounds on the determinant of matrices ([#9029](https://github.com/leanprover-community/mathlib/pull/#9029))

This PR shows that matrices with bounded entries also have bounded determinants.

`matrix.det_le` is the most generic version of these results, which we specialise in two steps to `matrix.det_sum_smul_le`. In a follow-up PR we will connect this to `algebra.left_mul_matrix` to provide an upper bound on `algebra.norm`.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-09-08T17:50:43+00:00](https://github.com/leanprover-community/mathlib/commit/4222c3224a5b7b3f7a3bf9cb8ef0cf2cb408f907)
lint(testing/slim_check/*): break long lines ([#9091](https://github.com/leanprover-community/mathlib/pull/#9091))

### [2021-09-08T17:50:42+00:00](https://github.com/leanprover-community/mathlib/commit/56a59d3eaf3f1fad38fd3742831729bfd6d1a1dd)
feat(data/polynomial/hasse_deriv): Hasse derivatives ([#8998](https://github.com/leanprover-community/mathlib/pull/#8998))

### [2021-09-08T17:50:41+00:00](https://github.com/leanprover-community/mathlib/commit/42dda89e8f2517b854c85e22faad1e36a632bfb3)
feat(ring_theory/discrete_valuation_ring): is_Hausdorff ([#8994](https://github.com/leanprover-community/mathlib/pull/#8994))

Discrete valuation rings are Hausdorff in the algebraic sense
that the intersection of all powers of the maximal ideal is 0.

### [2021-09-08T16:06:33+00:00](https://github.com/leanprover-community/mathlib/commit/f4f1cd3f6a43f709613e22a9a733133fdd303137)
feat(algebra/module/ordered): simple `smul` lemmas ([#9077](https://github.com/leanprover-community/mathlib/pull/#9077))

These are the negative versions of the lemmas in `ordered_smul`, which suggests that both files should be merged.
Note however that, contrary to those, they need `module k M` instead of merely `smul_with_zero k M`.

### [2021-09-08T16:06:31+00:00](https://github.com/leanprover-community/mathlib/commit/76ab749e14492bb33eccaf50915253a40306f3de)
feat(analysis/normed_space/operator_norm): variants of continuous_linear_map.lsmul and their properties ([#8984](https://github.com/leanprover-community/mathlib/pull/#8984))




Co-authored-by: RemyDegenne <remydegenne@gmail.com>

### [2021-09-08T14:01:04+00:00](https://github.com/leanprover-community/mathlib/commit/146dddc39d0c953d5b80848e749dd841f39898f1)
feat(measure_theory/group/arithmetic): add more to_additive attributes for actions ([#9032](https://github.com/leanprover-community/mathlib/pull/#9032))

Introduce additivised versions of some more smul classes and corresponding instances and lemmas for different types of (measurable) additive actions.

### [2021-09-08T14:01:03+00:00](https://github.com/leanprover-community/mathlib/commit/99b70d9eb8cb3d88184f37754368833b128453de)
feat(data/(fin)set/basic): `image` and `mem` lemmas ([#9031](https://github.com/leanprover-community/mathlib/pull/#9031))

I rename `set.mem_image_of_injective` to `function.injective.mem_set_image_iff` to allow dot notation and fit the new  `function.injective.mem_finset_image_iff`.

### [2021-09-08T14:01:01+00:00](https://github.com/leanprover-community/mathlib/commit/3d31c2ddfdc8eea8ca70ea111bc214b9c7057d25)
chore(linear_algebra/affine_space/independent): allow dot notation on affine_independent ([#8974](https://github.com/leanprover-community/mathlib/pull/#8974))

This renames a few lemmas to make dot notation on `affine_independent` possible.

### [2021-09-08T14:00:59+00:00](https://github.com/leanprover-community/mathlib/commit/7a2ccb6a7ddaddffd432309f90446efd84357e41)
feat(group_theory/group_action): Extract a smaller typeclass out of `mul_semiring_action` ([#8918](https://github.com/leanprover-community/mathlib/pull/#8918))

This new typeclass, `mul_distrib_mul_action`, is satisfied by conjugation actions. This PR provides instances for:
* `mul_aut`
* `prod` of two types with a `mul_distrib_mul_action`
* `pi` of types with a `mul_distrib_mul_action`
* `units` of types with a `mul_distrib_mul_action`
* `ulift` of types with a `mul_distrib_mul_action`
* `opposite` of types with a `mul_distrib_mul_action`
* `sub(monoid|group|semiring|ring)`s of types with a `mul_distrib_mul_action`
* anything already satisfying a `mul_semiring_action`

### [2021-09-08T14:00:58+00:00](https://github.com/leanprover-community/mathlib/commit/4c7d95fb6fcb522219697819d3360ce9d912d1ae)
feat(analysis/normed_space/inner_product): reflections API ([#8884](https://github.com/leanprover-community/mathlib/pull/#8884))

Reflections, as isometries of an inner product space, were defined in [#8660](https://github.com/leanprover-community/mathlib/pull/#8660).  In this PR, various elementary lemmas filling out the API:

- Lemmas about reflection through a subspace K, of a point which is in (i) K itself; (ii) the orthogonal complement of K.

- Lemmas relating the orthogonal projection/reflection on the `submodule.map` of a subspace, with the orthogonal projection/reflection on the original subspace.

- Lemma characterizing the reflection in the trivial subspace.



Co-authored-by: Scott Morrison <scott@tqft.net>

### [2021-09-08T12:15:54+00:00](https://github.com/leanprover-community/mathlib/commit/71df310fc24d917ba04f35620c87bdcda7fa6266)
chore(*): remove instance binders in exists, for mathport ([#9083](https://github.com/leanprover-community/mathlib/pull/#9083))

Per @digama0's request at https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/Instance.20binders.20in.20exists.

Instance binders under an "Exists" aren't allowed in Lean4, so we're backport removing them. I've just turned relevant `[X]` binders into `(_ : X)` binders, and it seems to all still work. (i.e. the instance binders weren't actually doing anything).

It turns out two of the problem binders were in `infi` or `supr`, not `Exists`, but I treated them the same way.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-08T12:15:53+00:00](https://github.com/leanprover-community/mathlib/commit/31081533294c7d282ebc23771ac1f2b8c2c9d7ff)
feat(linear_algebra/affine_space/independent): homotheties preserve affine independence ([#9070](https://github.com/leanprover-community/mathlib/pull/#9070))

### [2021-09-08T12:15:52+00:00](https://github.com/leanprover-community/mathlib/commit/e4e07eab9fe7fb6d152185fc2c5c0c175ff6e2a4)
feat(ring_theory): `map f (span s) = span (f '' s)` ([#9068](https://github.com/leanprover-community/mathlib/pull/#9068))

We already had this for submodules and linear maps, here it is for ideals and ring homs.

### [2021-09-08T12:15:50+00:00](https://github.com/leanprover-community/mathlib/commit/aae2b371c40ba438c629e8fec31aa6e3654b875d)
feat(field_theory/separable): a finite field extension in char 0 is separable ([#9066](https://github.com/leanprover-community/mathlib/pull/#9066))

### [2021-09-08T12:15:49+00:00](https://github.com/leanprover-community/mathlib/commit/157e99d033edd4d2b7af3f29ae2448e3117e8992)
feat(ring_theory): PIDs are Dedekind domains ([#9063](https://github.com/leanprover-community/mathlib/pull/#9063))

We had all the ingredients ready for a while, apparently I just forgot to PR the instance itself.

Co-Authored-By: Ashvni <ashvni.n@gmail.com>
Co-Authored-By: Filippo A. E. Nuccio <filippo.nuccio@univ-st-etienne.fr>

### [2021-09-08T12:15:48+00:00](https://github.com/leanprover-community/mathlib/commit/c3f2c237859fcfab9c2c898426d9c6c19f4e4ec6)
feat(analysis/convex/basic): the affine image of the convex hull is the convex hull of the affine image ([#9057](https://github.com/leanprover-community/mathlib/pull/#9057))

### [2021-09-08T12:15:46+00:00](https://github.com/leanprover-community/mathlib/commit/57a0789bbf8e047065b23c1e7595a7e613e0d6f3)
chore(topology/order): relate Sup and Inf of topologies to `generate_from` ([#9045](https://github.com/leanprover-community/mathlib/pull/#9045))

Since there is a Galois insertion between `generate_from : set (set α) → topological_space α` and the "forgetful functor" `topological_space α → set (set α)`, all kinds of lemmas about the interaction of `generate_from` and the ordering on topologies automatically follow.  But it is hard to use the Galois insertion lemmas directly, because the Galois insertion is actually provided for the dual order on topologies, which confuses Lean.  Here we re-state most of the Galois insertion API in this special case.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-09-08T12:15:45+00:00](https://github.com/leanprover-community/mathlib/commit/a8c5c5a57181541de99d9028cf139c6b3fa3bb5c)
feat(algebra/module/basic): add `module.to_add_monoid_End` ([#8968](https://github.com/leanprover-community/mathlib/pull/#8968))

I also removed `smul_add_hom_one` since it's a special case of the ring_hom.

I figured I'd replace a `simp` with a `rw` when fixing `finsupp.to_free_abelian_group_comp_to_finsupp` for this removal.

### [2021-09-08T10:25:38+00:00](https://github.com/leanprover-community/mathlib/commit/4e8d9666bbe269c75b4924813bfda037aa0a7bbf)
feat(algebra/subalgebra): add missing actions by and on subalgebras ([#9081](https://github.com/leanprover-community/mathlib/pull/#9081))

For `S : subalgebra R A`, this adds the instances:

* for actions on subalgebras (generalizing the existing `algebra R S`):
  * `module R' S`
  * `algebra R' S`
  * `is_scalar_tower R' R S`
* for actions by subalgebras (generalizing the existing `algebra S α`):
  * `mul_action S α`
  * `smul_comm_class S α β`
  * `smul_comm_class α S β`
  * `is_scalar_tower S α β`
  * `has_faithful_scalar S α`
  * `distrib_mul_action S α`
  * `module S α`

This also removes the commutativity requirement on `A` for the `no_zero_smul_divisors S A` instance.

### [2021-09-08T10:25:37+00:00](https://github.com/leanprover-community/mathlib/commit/585c5addf287948645567166a8aeaf533fddb4c6)
feat(data/finset): monotone maps preserve the maximum of a finset ([#9035](https://github.com/leanprover-community/mathlib/pull/#9035))

### [2021-09-08T08:23:11+00:00](https://github.com/leanprover-community/mathlib/commit/fc75aea8d102a43aee84690005c9a87634554f13)
feat(topology/algebra/ordered): `{prod,pi}.order_closed_topology` ([#9073](https://github.com/leanprover-community/mathlib/pull/#9073))

### [2021-09-08T08:23:10+00:00](https://github.com/leanprover-community/mathlib/commit/8341d1654a14a7a4488a127ea055c15347893f25)
feat(linear_algebra/finite_dimensional): make finite_dimensional_bot an instance ([#9053](https://github.com/leanprover-community/mathlib/pull/#9053))

This was previously made into a local instance in several places, but there appears to be no reason it can't be a global instance.

cf discussion at [#8884](https://github.com/leanprover-community/mathlib/pull/#8884).

### [2021-09-08T08:23:08+00:00](https://github.com/leanprover-community/mathlib/commit/b4a88e2e73bea3ec737610d38d53987b76c75431)
feat(data/equiv/derangements/basic): define derangements ([#7526](https://github.com/leanprover-community/mathlib/pull/#7526))

This proves two formulas for the number of derangements on _n_ elements, and defines some combinatorial equivalences
involving derangements on α and derangements on certain subsets of α. This proves Theorem 88 on Freek's list.



Co-authored-by: Yaël Dillies <yael.dillies@gmail.com>

### [2021-09-08T06:17:22+00:00](https://github.com/leanprover-community/mathlib/commit/189fe5bd1b3228965c5c5f18cb240d99a4e33603)
feat(data/nat/enat): refactor coe from nat to enat ([#9023](https://github.com/leanprover-community/mathlib/pull/#9023))

The coercion from nat to enat was defined to be enat.some. But another
coercion could be inferred from the additive structure on enat, leading to
confusing goals of the form
`↑n = ↑n` where the two sides were not defeq.

We now make the coercion inferred from the additive structure the default, 
even though it is not computable.

A dedicated function `enat.some` is introduced, to be used whenever
computability is important.

### [2021-09-08T06:17:21+00:00](https://github.com/leanprover-community/mathlib/commit/cef862d774dfdbdd6cf797029d2df30555b5ad30)
feat(ring_theory/noetherian): is_noetherian_of_range_eq_ker ([#8988](https://github.com/leanprover-community/mathlib/pull/#8988))

### [2021-09-08T06:17:20+00:00](https://github.com/leanprover-community/mathlib/commit/4dc96e4ab5ee31c6ebc4c21d172cfe0b09383e0d)
feat(group_theory/index): define the index of a subgroup ([#8971](https://github.com/leanprover-community/mathlib/pull/#8971))

Defines `subgroup.index` and proves various divisibility properties.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-09-08T06:17:19+00:00](https://github.com/leanprover-community/mathlib/commit/ded0d64014df8eda758f604c0cdd79189ccf06c9)
feat(number_theory): define "admissible" absolute values ([#8964](https://github.com/leanprover-community/mathlib/pull/#8964))

We say an absolute value `abv : absolute_value R ℤ` is admissible if it agrees with the Euclidean domain structure on R (see also `is_euclidean` in [#8949](https://github.com/leanprover-community/mathlib/pull/#8949)), and large enough sets of elements in `R^n` contain two elements whose remainders are close together.

Examples include `abs : ℤ → ℤ` and `card_pow_degree := λ (p : polynomial Fq), (q ^ p.degree : ℤ)`, where `Fq` is a finite field with `q` elements. (These two correspond to the number field and function field case respectively, in our proof that the class number of a global field is finite.) Proving these two are indeed admissible involves a lot of pushing values between `ℤ` and `ℝ`, but is otherwise not so exciting.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-09-08T06:17:18+00:00](https://github.com/leanprover-community/mathlib/commit/ec514603d94ed17e1703eee8fa91499b9af04567)
feat(data/finset): define `finset.pimage` ([#8907](https://github.com/leanprover-community/mathlib/pull/#8907))

### [2021-09-08T04:46:13+00:00](https://github.com/leanprover-community/mathlib/commit/628969b1949860157202ca585afb8b719a993a06)
chore(linear_algebra/basic): speed up slow decl ([#9060](https://github.com/leanprover-community/mathlib/pull/#9060))

### [2021-09-08T02:22:54+00:00](https://github.com/leanprover-community/mathlib/commit/782a20a27ee83b523f801ff34efb1a9557085019)
chore(scripts): update nolints.txt ([#9079](https://github.com/leanprover-community/mathlib/pull/#9079))

I am happy to remove some nolints for you!

### [2021-09-07T23:04:14+00:00](https://github.com/leanprover-community/mathlib/commit/dcd878228c4f9a44c0f46c7228144185c1037083)
feat(algebra/algebra): lemmas connecting `basis ι R A`, `no_zero_smul_divisors R A` and `injective (algebra_map R A)` ([#9039](https://github.com/leanprover-community/mathlib/pull/#9039))

Additions:
 * `basis.algebra_map_injective`
 * `no_zero_smul_divisors.algebra_map_injective`
 * `no_zero_smul_divisors.iff_algebra_map_injective`

Renamed:
 * `algebra.no_zero_smul_divisors.of_algebra_map_injective` → `no_zero_smul_divisors.of_algebra_map_injective`

### [2021-09-07T21:34:33+00:00](https://github.com/leanprover-community/mathlib/commit/50f5d8beb40d758fc070e9a21d52d94851649de6)
docs(linear_algebra/bilinear_map): fix inconsistency in docstring ([#9075](https://github.com/leanprover-community/mathlib/pull/#9075))

### [2021-09-07T21:34:32+00:00](https://github.com/leanprover-community/mathlib/commit/b0b0a24ffe608ed3a0aa770e7d8e4ed8bb1dc688)
feat(data/int): absolute values and integers ([#9028](https://github.com/leanprover-community/mathlib/pull/#9028))

We prove that an absolute value maps all `units ℤ` to `1`.

I added a new file since there is no neat place in the import hierarchy where this fit (the meet of `algebra.algebra.basic` and `data.int.cast`).

### [2021-09-07T19:33:39+00:00](https://github.com/leanprover-community/mathlib/commit/fd453cf1569b8f9396476287b046d216e92224e4)
chore(data/set/basic): add some simp attrs ([#9074](https://github.com/leanprover-community/mathlib/pull/#9074))

Also add `set.pairwise_on_union`.

### [2021-09-07T16:31:29+00:00](https://github.com/leanprover-community/mathlib/commit/463e753442768c63d438d877dda229b7165361bf)
feat(linear_algebra/finite_dimensional): generalisations to division_ring ([#8822](https://github.com/leanprover-community/mathlib/pull/#8822))

I generalise a few results about finite dimensional modules from fields to division rings. Mostly this is me trying out @alexjbest's `generalisation_linter`. (review: it works really well, and is very helpful for finding the right home for lemmas, but it is slow).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-07T15:17:24+00:00](https://github.com/leanprover-community/mathlib/commit/9c886ffb1732d51f64e78cd30cda2b56700e1bbf)
chore(ring_theory): typo fix ([#9067](https://github.com/leanprover-community/mathlib/pull/#9067))

`principal_idea_ring` -> `principal_ideal_ring`

### [2021-09-07T15:17:23+00:00](https://github.com/leanprover-community/mathlib/commit/f8cfed4da9c34caa9783d71947d43f151cc3dac5)
feat(algebra/tropical/basic): define tropical semiring ([#8864](https://github.com/leanprover-community/mathlib/pull/#8864))

Just the initial algebraic structures. Follow up PRs will provide these with a topology, prove that tropical polynomials can be interpreted as sums of affine maps, and further towards tropical geometry.

### [2021-09-07T13:48:09+00:00](https://github.com/leanprover-community/mathlib/commit/eeb4bb66546ff8eca290bf28a9b829c1206e4fd3)
feat(algebra/big_operators): absolute values and big operators  ([#9027](https://github.com/leanprover-community/mathlib/pull/#9027))

This PR extends `absolute_value.add_le` and `absolute_value.map_mul` to `finset.sum` and `finset.prod` respectively.

### [2021-09-07T11:06:56+00:00](https://github.com/leanprover-community/mathlib/commit/6c8203f2f44d8ef8f74568efe5fe84a20bd74d69)
chore(linear_algebra/bilinear_map): split off new file from linear_algebra/tensor_product ([#9054](https://github.com/leanprover-community/mathlib/pull/#9054))

The first part of linear_algebra/tensor_product consisted of some basics on bilinear maps that are not directly related to the construction of the tensor product.
This PR moves them to a new file.

### [2021-09-07T11:06:55+00:00](https://github.com/leanprover-community/mathlib/commit/0508c7b1ae1264773191a062f820388f873c037a)
feat(analysis/specific_limits): add `set.countable.exists_pos_has_sum_le` ([#9052](https://github.com/leanprover-community/mathlib/pull/#9052))

Add versions of `pos_sum_of_encodable` for countable sets.

### [2021-09-07T11:06:54+00:00](https://github.com/leanprover-community/mathlib/commit/98942ab50209104fd4b4d7ef066e6998d8e68ccc)
feat(ring_theory): non-zero divisors are not zero ([#9043](https://github.com/leanprover-community/mathlib/pull/#9043))

I'm kind of suprised we didn't have this before!

### [2021-09-07T11:06:53+00:00](https://github.com/leanprover-community/mathlib/commit/812ff38be9da6fd56ac1112ad0014d2ed3498507)
docs(algebra/ordered_ring): add module docstring ([#9030](https://github.com/leanprover-community/mathlib/pull/#9030))

### [2021-09-07T11:06:52+00:00](https://github.com/leanprover-community/mathlib/commit/a84b538ca328297e726dafa9161deb3c28e22f91)
feat(algebra/algebra/subalgebra): inclusion map of subalgebras ([#9013](https://github.com/leanprover-community/mathlib/pull/#9013))




Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2021-09-07T11:06:51+00:00](https://github.com/leanprover-community/mathlib/commit/d69c12e9a1aec895527ebedcf672524475e1c9c4)
feat(ring_theory/ideal/local_ring): residue field is an algebra ([#8991](https://github.com/leanprover-community/mathlib/pull/#8991))

Also, the kernel of a surjective map to a field is equal to the unique maximal ideal.

### [2021-09-07T11:06:50+00:00](https://github.com/leanprover-community/mathlib/commit/58a885390176021b1ac564fde159024927b07c62)
doc(data/list/*): Add missing documentation ([#8867](https://github.com/leanprover-community/mathlib/pull/#8867))


Fixing the missing module docstrings in `data/list`, as well as documenting some `def`s and `theorem`s.

### [2021-09-07T11:06:49+00:00](https://github.com/leanprover-community/mathlib/commit/d366eb3d4855e71c3af56dace2f0dc364e4cd537)
feat(ring_theory/ideal/operations): add some theorems about taking the quotient of a ring by a sum of ideals  ([#8668](https://github.com/leanprover-community/mathlib/pull/#8668))

The aim of this section is to prove that if `I, J` are ideals of the ring `R`, then the quotients `R/(I+J)` and `(R/I)/J'`are isomorphic, where `J'` is the image of `J` in `R/I`. 


Co-authored-by: Alex J. Best <alex.j.best@gmail.com>
Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-09-07T08:01:11+00:00](https://github.com/leanprover-community/mathlib/commit/d0c02bc96f257ebb7aaa4f7fe64182af2d541671)
feat(order/filter/basic): add `supr_inf_principal` and `tendsto_supr` ([#9051](https://github.com/leanprover-community/mathlib/pull/#9051))

Also golf a few proofs

### [2021-09-07T08:01:09+00:00](https://github.com/leanprover-community/mathlib/commit/6b0c73a07cbf69afadf69470f249d26b80cd795c)
chore(analysis/normed_space): add `dist_sum_sum_le` ([#9049](https://github.com/leanprover-community/mathlib/pull/#9049))

### [2021-09-07T08:01:08+00:00](https://github.com/leanprover-community/mathlib/commit/3fdfc8e573260bc60ce304c00be567e2183222a8)
chore(data/bool): add a few lemmas about inequalities and `band`/`bor` ([#9048](https://github.com/leanprover-community/mathlib/pull/#9048))

### [2021-09-07T08:01:07+00:00](https://github.com/leanprover-community/mathlib/commit/c4f37076f18bbf367896e245c0bac361bd340e03)
chore(scripts): update nolints.txt ([#9047](https://github.com/leanprover-community/mathlib/pull/#9047))

I am happy to remove some nolints for you!

### [2021-09-07T05:56:36+00:00](https://github.com/leanprover-community/mathlib/commit/77f4ed467f7257975f52cf16b4fe24ec9d8dbec8)
docs(set_theory/lists): add module docstring and def docstrings ([#8967](https://github.com/leanprover-community/mathlib/pull/#8967))

### [2021-09-07T05:56:34+00:00](https://github.com/leanprover-community/mathlib/commit/0c19d5f5ecb29d40c91f391b6387a5237986332d)
feat(topology/uniform_space/basic): add corollary of Lebesgue number lemma `lebesgue_number_of_compact_open` ([#8963](https://github.com/leanprover-community/mathlib/pull/#8963))

### [2021-09-07T05:56:33+00:00](https://github.com/leanprover-community/mathlib/commit/a7be93b260bc67bdf13abcd65278e66c78092c81)
feat(data/matrix/hadamard): add the Hadamard product ([#8956](https://github.com/leanprover-community/mathlib/pull/#8956))




Co-authored-by: l534zhan <84618936+l534zhan@users.noreply.github.com>

### [2021-09-07T05:56:32+00:00](https://github.com/leanprover-community/mathlib/commit/91824e586d8ba54ada6f5a380a01e14599ebe531)
feat(group_theory/subgroup): Normal Core ([#8940](https://github.com/leanprover-community/mathlib/pull/#8940))

Defines normal core, and proves lemmas analogous to those for normal closure.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-09-07T05:56:31+00:00](https://github.com/leanprover-community/mathlib/commit/298f231e8f7f31120189c0a2cf241706c52bfdd6)
feat(*): trivial lemmas from [#8903](https://github.com/leanprover-community/mathlib/pull/#8903) ([#8909](https://github.com/leanprover-community/mathlib/pull/#8909))

### [2021-09-07T05:56:30+00:00](https://github.com/leanprover-community/mathlib/commit/5b29630d4ae17ff600c5c90857d606bea111a776)
chore(linear_algebra/tensor_product): remove `@[ext]` tag from `tensor_product.mk_compr₂_inj` ([#8868](https://github.com/leanprover-community/mathlib/pull/#8868))

This PR removes the `@[ext]` tag from `tensor_product.mk_compr₂_inj` and readds it locally only where it is needed. This is a workaround for the issue discussed [in this Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/odd.20repeated.20type.20class.20search): basically, when `ext` tries to apply this lemma to linear maps, it fails only after a very long typeclass search. While this problem is already present to some extent in current mathlib, it is exacerbated by the [upcoming generalization of linear maps to semilinear maps](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Semilinear.20maps).

In addition to this change, a few individual uses of `ext` have been replaced by a manual application of the relevant ext lemma(s) for performance reasons.

For discoverability, the lemma `tensor_product.mk_compr₂_inj` is renamed to `tensor_product.ext` and the former `tensor_product.ext` to `tensor_product.ext'`.

### [2021-09-07T03:50:01+00:00](https://github.com/leanprover-community/mathlib/commit/ceb9da60ec845c84e1789f1a541e2848b5f21549)
feat(analysis/convex/caratheodory): strengthen Caratheodory's lemma to provide affine independence ([#8892](https://github.com/leanprover-community/mathlib/pull/#8892))

The changes here are:

- Use hypothesis `¬ affine_independent ℝ (coe : t → E)` instead of `finrank ℝ E + 1 < t.card`
- Drop no-longer-necessary `[finite_dimensional ℝ E]` assumption
- Do not use a shrinking argument but start by choosing an appropriate subset of minimum cardinality via `min_card_finset_of_mem_convex_hull`
- Provide a single alternative form of Carathéodory's lemma `eq_pos_convex_span_of_mem_convex_hull`
- In the alternate form, define the explicit linear combination using elements parameterised by a new `fintype` rather than on the entire ambient space `E` (we thus avoid the issue of junk values outside of the relevant subset)

### [2021-09-07T03:49:59+00:00](https://github.com/leanprover-community/mathlib/commit/5eb19182917a7e76b7d5b15651cbce6679f7fae5)
feat(group_theory/perm/concrete_cycle): is_cycle_form_perm ([#8859](https://github.com/leanprover-community/mathlib/pull/#8859))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-09-07T03:49:58+00:00](https://github.com/leanprover-community/mathlib/commit/f157b6dfb3bbbdb9e562291a6c07c1ddd95b0be0)
feat(linear_algebra): introduce notation for `linear_map.comp` and `linear_equiv.trans` ([#8857](https://github.com/leanprover-community/mathlib/pull/#8857))

This PR introduces new notation for the composition of linear maps and linear equivalences: `∘ₗ` denotes `linear_map.comp` and `≫ₗ` denotes `linear_equiv.trans`. This will be needed by an upcoming PR generalizing linear maps to semilinear maps (see discussion [here](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Semilinear.20maps)): in some places, we need to help the elaborator a bit by telling it that we are composing plain linear maps/equivs as opposed to semilinear ones. We have not made the change systematically throughout the library, only in places where it is needed in our semilinear maps branch.

### [2021-09-07T03:49:57+00:00](https://github.com/leanprover-community/mathlib/commit/d26250069d87a144f6e9113b1f8c05efe54f21dc)
feat(group_theory/nilpotent): add antimono and functorial lemma for lower central series ([#8853](https://github.com/leanprover-community/mathlib/pull/#8853))




Co-authored-by: ineswright <52750254+ineswright@users.noreply.github.com>

### [2021-09-07T03:49:56+00:00](https://github.com/leanprover-community/mathlib/commit/f0f6c1cc0754b66c6d87b2eac7fb4f8fb37cedf6)
feat(tactic/lint): reducible non-instance linter ([#8540](https://github.com/leanprover-community/mathlib/pull/#8540))

* This linter checks that if an instances uses a non-instance with as type a class, the non-instances is reducible.
* There are many false positives to this rule, which we probably want to allow (that are unlikely to cause problems). To cut down on the many many false positives, the linter currently only consider classes that have either an `add` or a `mul` field. Maybe we want to also include order-structures, but there are (for example) a bunch of `complete_lattice` structures that are derived using Galois insertions that haven't ever caused problems (I think).

### [2021-09-07T01:49:05+00:00](https://github.com/leanprover-community/mathlib/commit/d6a1fc02e6e825735fc103da6a65ebd110893f86)
feat(algebra/ordered_monoid): correct definition ([#8877](https://github.com/leanprover-community/mathlib/pull/#8877))

Our definition of `ordered_monoid` is not the usual one, and this PR corrects that.

The standard definition just says
```
(mul_le_mul_left       : ∀ a b : α, a ≤ b → ∀ c : α, c * a ≤ c * b)
```
while we currently have an extra axiom
```
(lt_of_add_lt_add_left : ∀ a b c : α, a + b < a + c → b < c)
```
(This was introduced in ancient times, https://github.com/leanprover-community/mathlib/commit/7d8e3f3a6de70da504406727dbe7697b2f7a62ee, with no indication of where the definition came from. I couldn't find it in other sources.)

As @urkud pointed out a while ago [on Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ordered_comm_monoid), these really are different.

The second axiom *does* automatically hold for cancellative ordered monoids, however.

This PR simply drops the axiom. In practice this causes no harm, because all the interesting examples are cancellative. There's a little bit of cleanup to do. In `src/algebra/ordered_sub.lean` four lemmas break, so I just added the necessary `[contravariant_class _ _ (+) (<)]` hypothesis. These lemmas aren't currently used in mathlib, but presumably where they are needed this typeclass will be available.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-09-07T00:33:29+00:00](https://github.com/leanprover-community/mathlib/commit/ce31c1c6a68981c2e1a909f4777a1df23ef7bcf7)
feat(order/prime_ideal): prime ideals are maximal ([#9004](https://github.com/leanprover-community/mathlib/pull/#9004))

Proved that in boolean algebras:
1. An ideal is prime iff it always contains one of x, x^c
2. A prime ideal is maximal

### [2021-09-07T00:33:28+00:00](https://github.com/leanprover-community/mathlib/commit/54315218ee95e8906266c76af7d0562ed711cff6)
refactor(topology/sheaves/sheaf_condition): Generalize unique gluing API ([#9002](https://github.com/leanprover-community/mathlib/pull/#9002))

Previously, the sheaf condition in terms of unique gluings has been defined only for type-valued presheaves. This PR generalizes this to arbitrary concrete categories, whose forgetful functor preserves limits and reflects isomorphisms (e.g. algebraic categories like `CommRing`). As a side effect, this solves a TODO in `structure_sheaf.lean`.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-09-07T00:33:27+00:00](https://github.com/leanprover-community/mathlib/commit/d472c56ccce0986dc00afb00937b5180d06aada7)
feat(linear_algebra/affine_space/affine_equiv): affine homotheties as equivalences ([#8983](https://github.com/leanprover-community/mathlib/pull/#8983))

### [2021-09-06T21:09:20+00:00](https://github.com/leanprover-community/mathlib/commit/309674d97cd76e1b0f850e3f577c04c1f7764c16)
feat(linear_algebra/basis): a nontrivial module has nonempty bases ([#9040](https://github.com/leanprover-community/mathlib/pull/#9040))

A tiny little lemma that guarantees the dimension of a nontrivial module is nonzero. Noticeably simplifies the proof that the dimension of a power basis is positive in this case.

### [2021-09-06T21:09:19+00:00](https://github.com/leanprover-community/mathlib/commit/3218c373c9b6c4083028f1cc0f6ec0b2cb076b95)
feat(linear_algebra/smodeq): sub_mem, eval ([#8993](https://github.com/leanprover-community/mathlib/pull/#8993))

### [2021-09-06T21:09:18+00:00](https://github.com/leanprover-community/mathlib/commit/fde1fc28f55cf782e7c12d5dde84b40027371893)
feat(*): make more non-instances reducible ([#8941](https://github.com/leanprover-community/mathlib/pull/#8941))

* Also add some docstrings to `cau_seq_completion`.
* Related PR: [#7835](https://github.com/leanprover-community/mathlib/pull/#7835)

### [2021-09-06T17:52:24+00:00](https://github.com/leanprover-community/mathlib/commit/bfcf73fa271a48a75c67e31c6cf76fefaec763ec)
feat(data/multiset/basic): Add a result on intersection of multiset with `repeat a n` ([#9038](https://github.com/leanprover-community/mathlib/pull/#9038))

### [2021-09-06T17:52:23+00:00](https://github.com/leanprover-community/mathlib/commit/3148cfe11883624e8a35e0a4ff2e644c93774f7b)
feat(field_theory/algebraic_closure): polynomials in an algebraically closed fields have roots ([#9037](https://github.com/leanprover-community/mathlib/pull/#9037))

### [2021-09-06T17:52:21+00:00](https://github.com/leanprover-community/mathlib/commit/3a62419411467a26998a2eb6bfcaf406849266b4)
chore(data/nat/mul_ind): make docgen happy ([#9036](https://github.com/leanprover-community/mathlib/pull/#9036))

### [2021-09-06T17:52:20+00:00](https://github.com/leanprover-community/mathlib/commit/11284f2f7c1f9ac81377c048a34d112d66811e91)
feat(ring_theory): `y ≠ 0` in a UFD has finitely many divisors ([#9034](https://github.com/leanprover-community/mathlib/pull/#9034))

This implies ideals in a Dedekind domain are contained in only finitely many larger ideals.

### [2021-09-06T17:52:19+00:00](https://github.com/leanprover-community/mathlib/commit/86dd706cc75e994d5c0a1d8a3bd75b22b642dfbb)
feat(set/lattice): two lemmas about when sInter is empty ([#9033](https://github.com/leanprover-community/mathlib/pull/#9033))

- Added sInter_eq_empty_iff
- Added sInter_nonempty_iff

### [2021-09-06T17:52:18+00:00](https://github.com/leanprover-community/mathlib/commit/98cbad7b753b0e59dc7469bcf32e06dee28be231)
chore(set_theory/pgame): add protected ([#9022](https://github.com/leanprover-community/mathlib/pull/#9022))

Breaks [#7843](https://github.com/leanprover-community/mathlib/pull/#7843) into smaller PRs.

These lemmas about `pgame` conflict with the ones for `game` when used in `calc` mode proofs, which confuses Lean.
There is no way to use the lemmas for `game` (required for surreal numbers) without using `_root_` as `game` inherits these lemmas from its abelian group structure.

### [2021-09-06T17:52:17+00:00](https://github.com/leanprover-community/mathlib/commit/c83c22dc6e8f9496f3bdc5b655579d1f04f7e828)
feat(measure_theory/measure/vector_measure): zero is absolutely continuous wrt any vector measure ([#9007](https://github.com/leanprover-community/mathlib/pull/#9007))

### [2021-09-06T17:52:16+00:00](https://github.com/leanprover-community/mathlib/commit/339c2c357a80db4686fb5e5cbfcadd8c092b24e0)
feat(linear_algebra/affine_space/independent): affine independence is preserved by affine maps ([#9005](https://github.com/leanprover-community/mathlib/pull/#9005))

### [2021-09-06T12:26:04+00:00](https://github.com/leanprover-community/mathlib/commit/c2e6e62a673cbd6bf615389462b452f532c66e99)
feat(algebra/absolute_value): generalize a few results to `linear_ordered_ring`s ([#9026](https://github.com/leanprover-community/mathlib/pull/#9026))

The proofs were copied literally from `is_absolute_value`, which was defined on fields, but we can generalize them to rings with only a few tweaks.

### [2021-09-06T12:26:02+00:00](https://github.com/leanprover-community/mathlib/commit/448f821dfaf4e6a3c2b30d67805a364f1de82f76)
feat(algebra/pointwise): enable pointwise add_action ([#9017](https://github.com/leanprover-community/mathlib/pull/#9017))

Just a little to_additive declaration

### [2021-09-06T12:26:01+00:00](https://github.com/leanprover-community/mathlib/commit/f0c3f9e869e2ac689642da7876689fc5cd78c042)
feat(linear_algebra/basic): surjective_of_iterate_surjective ([#9006](https://github.com/leanprover-community/mathlib/pull/#9006))

### [2021-09-06T12:26:00+00:00](https://github.com/leanprover-community/mathlib/commit/d16cb001f99087ee57eba073fd6826442b219335)
feat(linear_algebra/basic): of_le_injective ([#8977](https://github.com/leanprover-community/mathlib/pull/#8977))

### [2021-09-06T12:25:59+00:00](https://github.com/leanprover-community/mathlib/commit/c0f01eedd3f37e802668ef840155db17b4fa4153)
feat(data/fin): pos_iff_nonempty ([#8975](https://github.com/leanprover-community/mathlib/pull/#8975))

### [2021-09-06T12:25:58+00:00](https://github.com/leanprover-community/mathlib/commit/de37a6aaa1ed683fcf1bdf6b62c4d2b43bf1ca47)
chore(field_theory/fixed): reuse existing `mul_semiring_action.to_alg_hom`  by providing `smul_comm_class` ([#8965](https://github.com/leanprover-community/mathlib/pull/#8965))

This removes `fixed_points.to_alg_hom` as this is really just a bundled form of `mul_semiring_action.to_alg_hom` + `mul_semiring_action.to_alg_hom_injective`, once we provide the missing `smul_comm_class`.

### [2021-09-06T12:25:57+00:00](https://github.com/leanprover-community/mathlib/commit/2aebabcadab0a336ccba967c7f292e77c3595c59)
feat(topology/continuous_function/basic): add `continuous_map.Icc_extend` ([#8952](https://github.com/leanprover-community/mathlib/pull/#8952))

### [2021-09-06T12:25:55+00:00](https://github.com/leanprover-community/mathlib/commit/773b45f7a4a79d17e3b0b7cd1202e55099cef323)
feat(algebra/module/ordered): redefine `ordered_module` as `ordered_smul` ([#8930](https://github.com/leanprover-community/mathlib/pull/#8930))

One would like to talk about `ordered_monoid R (with_top R)`, but the `module` constraint is too strict to allow this.

The definition of `ordered_monoid` works if it is loosened to `has_scalar R M`. Most of the proofs that are part of its API need at most `smul_with_zero`. So it has been loosened to `smul_with_zero`, since a lawless `ordered_monoid` wouldn't do much.

In the `ordered_field` portion, `module` has been loosened to `mul_action_with_zero`.

`order_dual` instances of `smul` instances have also been generalized to better transmit. There are more generalizations possible, but seem out of scope for a single PR.

Unfortunately, these generalizations exposed a gnarly misalignment between `prod.has_lt` and `prod.has_le`, which have incompatible definitions, when inferred through separate paths. In particular, the `lt` definition of generated by `prod.preorder` is different than the core `prod.has_lt`. Due to this, the `prod.ordered_monoid` instance has not been generalized.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-09-06T12:25:54+00:00](https://github.com/leanprover-community/mathlib/commit/e8fff2662a6f2817f51531789659801afd90b9f8)
refactor(group_theory/*): Move Cauchy's theorem ([#8916](https://github.com/leanprover-community/mathlib/pull/#8916))

Moves Cauchy's theorem from `sylow.lean` to `perm/cycle_type.lean`. Now `perm/cycle_type.lean` no longer depends on `sylow.lean`, and `p_group.lean` can use Cauchy's theorem (e.g. for equivalent characterizations of p-groups).

### [2021-09-06T12:25:53+00:00](https://github.com/leanprover-community/mathlib/commit/893c4746f6afaeed625648c51131188e881af4ff)
feat(group_theory/submonoid/membership): add log, exp lemmas ([#8870](https://github.com/leanprover-community/mathlib/pull/#8870))

Breaking up a previous PR ([#7843](https://github.com/leanprover-community/mathlib/pull/#7843)) into smaller ones.

This PR adds lemmas about injectivity of `pow` and `log` functions under appropriate conditions.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.238870)

### [2021-09-06T12:25:52+00:00](https://github.com/leanprover-community/mathlib/commit/74373b8132f58b7c9223e2e32d852629261c02dc)
feat(algebra/lattice_ordered_group): add basic theory of lattice ordered groups ([#8673](https://github.com/leanprover-community/mathlib/pull/#8673))




Co-authored-by: Christopher Hoskin <mans0954@users.noreply.github.com>

### [2021-09-06T11:10:12+00:00](https://github.com/leanprover-community/mathlib/commit/c5636921d69a04172a2cd9ee6e77ae870f27594a)
feat(data/polynomial/eval): leval, eval as linear map ([#8999](https://github.com/leanprover-community/mathlib/pull/#8999))

### [2021-09-06T05:31:16+00:00](https://github.com/leanprover-community/mathlib/commit/1f10390872a75359a9a42cd6d7644cc5e45660c2)
lint(tactic/*): break long lines ([#8973](https://github.com/leanprover-community/mathlib/pull/#8973))

For code lines, the fix was often simple, just break that damn line.
For strings, you shouldn't break a line inside one as this will be a visible change to the tactic's output. When nothing else can be done, I used the trick of breaking the string into two appended strings. "A B" becomes "A" ++ " B", and that's line-breakable.

### [2021-09-06T03:41:00+00:00](https://github.com/leanprover-community/mathlib/commit/1bc59c99033d6882650ea4e78fa5e49bb2b11447)
refactor(*): replace `function.swap` by `swap` ([#8612](https://github.com/leanprover-community/mathlib/pull/#8612))

This shortens some statements without decreasing legibility (IMO).

### [2021-09-05T23:31:30+00:00](https://github.com/leanprover-community/mathlib/commit/a3997288266fca38cc92af55bad2ead0c87e4142)
feat(group_theory/coset): Interaction between quotient_group.mk and right multiplication by elements of the subgroup ([#8970](https://github.com/leanprover-community/mathlib/pull/#8970))

Two helpful lemmas regarding the interaction between `quotient_group.mk` and right multiplication by elements of the subgroup.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-09-05T22:12:20+00:00](https://github.com/leanprover-community/mathlib/commit/0a94b29f2296d00526724640d204f9222ec265eb)
feat(data/nat/choose/vandermonde): Vandermonde's identity for binomial coefficients ([#8992](https://github.com/leanprover-community/mathlib/pull/#8992))

I place this identity in a new file because the current proof depends on `polynomial`.

### [2021-09-05T02:26:54+00:00](https://github.com/leanprover-community/mathlib/commit/9fc45d81e8d6eb7968e0c1c7aa3938044e4af61b)
chore(scripts): update nolints.txt ([#9014](https://github.com/leanprover-community/mathlib/pull/#9014))

I am happy to remove some nolints for you!

### [2021-09-04T20:06:15+00:00](https://github.com/leanprover-community/mathlib/commit/2ea1650d9491a5036c9911eb740e9333b1f0d71f)
fix(algebra/ordered_monoid): slay with_top monoid diamonds caused by irreducibility ([#8926](https://github.com/leanprover-community/mathlib/pull/#8926))

https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Diamond.20in.20instances.20on.20.60with_top.20R.60

Instead of copying over from `with_zero`, just work through the definitions directly.

### [2021-09-04T18:18:07+00:00](https://github.com/leanprover-community/mathlib/commit/fd0cdaee4f9d0d26c2cb97c60a6477edf4df6739)
feat(linear_algebra/pi): pi_option_equiv_prod ([#9003](https://github.com/leanprover-community/mathlib/pull/#9003))

### [2021-09-04T18:18:06+00:00](https://github.com/leanprover-community/mathlib/commit/8ff139a0f508718d27fd16e88253ce2e7320e88a)
feat(data/equiv/fin): fin_sum_fin_equiv simp lemmas ([#9001](https://github.com/leanprover-community/mathlib/pull/#9001))

### [2021-09-04T18:18:05+00:00](https://github.com/leanprover-community/mathlib/commit/7729bb6d151afb26a1ff8d25d2f167c9531c2efa)
feat(algebra): define "Euclidean" absolute values ([#8949](https://github.com/leanprover-community/mathlib/pull/#8949))

We say an absolute value `abv : absolute_value R S` is Euclidean if agrees with the Euclidean domain structure on `R`, namely `abv x < abv y ↔ euclidean_domain.r x y`.

Examples include `abs : ℤ → ℤ` and `λ (p : polynomial Fq), (q ^ p.degree : ℤ)`, where `Fq` is a finite field with `q` elements. (These two correspond to the number field and function field case respectively, in our proof that the class number of a global field is finite.)



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-09-04T18:18:04+00:00](https://github.com/leanprover-community/mathlib/commit/28592d9916869ab852baddd698dce13ece80f14b)
feat(set_theory/cardinal): cardinal.to_nat_mul ([#8943](https://github.com/leanprover-community/mathlib/pull/#8943))

`cardinal.to_nat` distributes over multiplication.

### [2021-09-04T17:05:08+00:00](https://github.com/leanprover-community/mathlib/commit/9df3f0d449bc7fff626c44ac7f56b5bcbcefff4a)
feat(data/nat/prime): nat.prime.eq_pow_iff ([#8917](https://github.com/leanprover-community/mathlib/pull/#8917))

If a^k=p then a=p and k=1.

### [2021-09-04T15:15:27+00:00](https://github.com/leanprover-community/mathlib/commit/a4df4609382654425f8a575880bc586842514315)
feat(linear_algebra/matrix/symmetric): add a file ([#8955](https://github.com/leanprover-community/mathlib/pull/#8955))




Co-authored-by: l534zhan <84618936+l534zhan@users.noreply.github.com>

### [2021-09-04T13:21:59+00:00](https://github.com/leanprover-community/mathlib/commit/18d7b743eda2af36256e5a54b5409cf2ca6b6304)
feat(data/nat/choose/dvd): generalize to division rings ([#8997](https://github.com/leanprover-community/mathlib/pull/#8997))

### [2021-09-04T11:21:20+00:00](https://github.com/leanprover-community/mathlib/commit/4435e909d7394707e958143ca914544c1cd9ee0c)
feat(ring_theory/ideal/operations): ideal.pow_mem_pow ([#8996](https://github.com/leanprover-community/mathlib/pull/#8996))

### [2021-09-04T11:21:19+00:00](https://github.com/leanprover-community/mathlib/commit/dcc45b428223186db7add715aeaacd328abbed1d)
feat(order/prime_ideal, order/boolean_algebra): small lemmas about prime ideals ([#8980](https://github.com/leanprover-community/mathlib/pull/#8980))

- Added is_prime.mem_or_compl_mem 
- Added is_prime.mem_compl_of_not_mem 
- Added sup_inf_inf_compl

### [2021-09-04T10:04:21+00:00](https://github.com/leanprover-community/mathlib/commit/7f7f3d90e32b8aceea2999b82e8bd3c84444b28d)
feat(ring_theory/ideal/operations): ring_hom.ker_is_maximal_of_surjective ([#8990](https://github.com/leanprover-community/mathlib/pull/#8990))

### [2021-09-04T08:16:53+00:00](https://github.com/leanprover-community/mathlib/commit/9d86dad0dc3d9f108a0cc7b40cf6d154888cd7d3)
feat(linear_algebra/prod): lemmas about ker and range ([#8989](https://github.com/leanprover-community/mathlib/pull/#8989))

### [2021-09-04T08:16:52+00:00](https://github.com/leanprover-community/mathlib/commit/855613ee5652ca5d1b8688280620bc96be199f63)
feat(linear_algebra/basic): galois insertion lemmas for map and comap ([#8978](https://github.com/leanprover-community/mathlib/pull/#8978))

### [2021-09-04T06:46:17+00:00](https://github.com/leanprover-community/mathlib/commit/b57af8a5e548a2e0f5c6b91e0cb96b3980e8e3bf)
feat(category_theory/basic/category): Combine and improve API on preorder categories. ([#8982](https://github.com/leanprover-community/mathlib/pull/#8982))

Material on preorders as categories was previously scattered throughout the library. This PR unites this material into a single file `category_theory/category/preorder` and also expands upon it, by relating adjoints to galois connections.



Co-authored-by: justus-springer <50165510+justus-springer@users.noreply.github.com>

### [2021-09-04T02:26:04+00:00](https://github.com/leanprover-community/mathlib/commit/b9d8081e0e17d3049d7e1d08cbb08a7780301b56)
chore(scripts): update nolints.txt ([#8987](https://github.com/leanprover-community/mathlib/pull/#8987))

I am happy to remove some nolints for you!

### [2021-09-04T00:27:12+00:00](https://github.com/leanprover-community/mathlib/commit/464c3d7301ec15605f94f9aca094c2011c7ea170)
chore(group_theory/group_action/defs): weaken assumptions of `mul_smul_comm` and `smul_mul_assoc` ([#8972](https://github.com/leanprover-community/mathlib/pull/#8972))

### [2021-09-04T00:27:11+00:00](https://github.com/leanprover-community/mathlib/commit/6ab66958fba832c26498337c64e4e204b7d39bad)
docs(topology/algebra/floor_ring): add module docstring ([#8969](https://github.com/leanprover-community/mathlib/pull/#8969))

### [2021-09-03T22:57:17+00:00](https://github.com/leanprover-community/mathlib/commit/66cb5e07d81fdceed7d23c0cf90251c78c05b798)
fix(data/setoid/partition): make def more readable ([#8951](https://github.com/leanprover-community/mathlib/pull/#8951))

If we change the statement of `partition.order_iso` from `setoid α ≃o subtype (@is_partition α)` to `setoid α ≃o {C : set (set α) // is_partition C}` then this doesn't change anything up to defeq and it's much easier for a beginner to read, as well as avoiding the `@`. I also change some variable names. Why? I want to show this part of this file to undergraduates and I want to make it look as easy and nice as possible.

### [2021-09-03T22:57:16+00:00](https://github.com/leanprover-community/mathlib/commit/93a15d6b53e58995332e4ad516dc7dfd7e77aa76)
feat(ring_theory/subring): field structure on centers of a division_ring ([#8472](https://github.com/leanprover-community/mathlib/pull/#8472))

I've also tidied up the subtitles. Previously there was a mix of h1 and h3s, I've made them all h2s.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-09-03T20:53:49+00:00](https://github.com/leanprover-community/mathlib/commit/3a0dddcce6d2cf948c3eb83cdba4ffd22b8dd85e)
feat(algebra/order_functions): (min|max)_eq_iff ([#8911](https://github.com/leanprover-community/mathlib/pull/#8911))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-09-03T20:53:48+00:00](https://github.com/leanprover-community/mathlib/commit/39cea43ad36aef38dee336ac2874777252b841df)
docs(data/subtype): add module docstring ([#8900](https://github.com/leanprover-community/mathlib/pull/#8900))

### [2021-09-03T18:48:25+00:00](https://github.com/leanprover-community/mathlib/commit/710a76e77d83cba7950b6b3d9e4c240724fb758d)
chore(algebra/divisibility): help dot notation on `dvd` ([#8766](https://github.com/leanprover-community/mathlib/pull/#8766))

Add aliases
* `dvd_mul_of_dvd_left` -> `has_dvd.dvd.mul_right`
* `dvd_mul_of_dvd_right` -> `has_dvd.dvd.mul_left`

Add, to help with a few proofs,
* `dvd_rfl`
* `dvd_pow_self`

Use `has_dvd.dvd.trans` more largely.

### [2021-09-03T09:56:24+00:00](https://github.com/leanprover-community/mathlib/commit/5e27f5096f3d16164c25bbb9c48e56ac5b92e3d3)
feat(analysis/complex/basic): convex_on.sup ([#8958](https://github.com/leanprover-community/mathlib/pull/#8958))

### [2021-09-02T21:50:49+00:00](https://github.com/leanprover-community/mathlib/commit/fdc24f532d1528696049bcb74d9d9ff809e7dfd7)
feat(algebra/ordered_ring): `linear_ordered_semiring` extends `linear_ordered_add_comm_monoid` ([#8961](https://github.com/leanprover-community/mathlib/pull/#8961))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-09-02T19:07:49+00:00](https://github.com/leanprover-community/mathlib/commit/d821860fb019619bbdf24e3dfeca27136ebaee3b)
feat(group_theory/group_action/basic): class formula, Burnside's lemma ([#8801](https://github.com/leanprover-community/mathlib/pull/#8801))

This adds class formula and Burnside's lemma for group action, both as an equiv and using cardinals.

I also added a cardinal version of the Orbit-stabilizer theorem.



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-09-02T15:21:36+00:00](https://github.com/leanprover-community/mathlib/commit/17747c0986892074498a8e19b1101aae19b15461)
feat(number_theory): define number fields, function fields and their rings of integers ([#8701](https://github.com/leanprover-community/mathlib/pull/#8701))

Co-Authored-By: Ashvni <ashvni.n@gmail.com>



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-09-02T14:35:26+00:00](https://github.com/leanprover-community/mathlib/commit/88525a98b72bbc970cd919fa18155f40bcac459b)
feat(ring_theory/ideal): generalize from `integral_closure` to `is_integral_closure` ([#8944](https://github.com/leanprover-community/mathlib/pull/#8944))

This PR restates a couple of lemmas about ideals the integral closure to use an instance of `is_integral_closure` instead. The originals are still available, but their proofs are now oneliners shelling out to `is_integral_closure`.

### [2021-09-02T12:25:11+00:00](https://github.com/leanprover-community/mathlib/commit/55a7d38562c31875fa55d2802b32ac5217d2b0b3)
feat(group_theory/coset): rw lemmas involving quotient_group.mk ([#8957](https://github.com/leanprover-community/mathlib/pull/#8957))

When doing computations with quotient groups, I found these lemmas to be helpful when rewriting.

### [2021-09-02T12:25:09+00:00](https://github.com/leanprover-community/mathlib/commit/baefdf347face99a860ce39e02229d2ec29c4cfc)
fix(group_theory/group_action/defs): deduplicate `const_smul_hom` and `distrib_mul_action.to_add_monoid_hom` ([#8953](https://github.com/leanprover-community/mathlib/pull/#8953))

This removes `const_smul_hom` as `distrib_mul_action.to_add_monoid_hom` fits a larger family of similarly-named definitions.

This also renames `distrib_mul_action.hom_add_monoid_hom` to `distrib_mul_action.to_add_monoid_End` to better match its statement.

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Definition.20elimination.20contest/near/237347199)

### [2021-09-02T10:34:12+00:00](https://github.com/leanprover-community/mathlib/commit/1dddd7f96cd2858fde582dc595d65264e1a74249)
feat(algebra/group/hom_instance): additive endomorphisms form a ring ([#8954](https://github.com/leanprover-community/mathlib/pull/#8954))

We already have all the data to state this, this just provides the extra proofs.

The multiplicative version is nasty because `monoid.End` has two different multiplicative structures depending on whether `End` is unfolded; so this PR leaves that until someone actually needs it.

With this in place we can provide `module.to_add_monoid_End : R →+* add_monoid.End M` in a future PR.

### [2021-09-02T09:31:58+00:00](https://github.com/leanprover-community/mathlib/commit/2fa82513ed5342894e48f97287e54bf6ac15888b)
refactor(*): rename {topological,smooth}_semiring to {topological,smooth}_ring ([#8902](https://github.com/leanprover-community/mathlib/pull/#8902))

A topological semiring that is a ring, is a topological ring.
A smooth semiring that is a ring, is a smooth ring.

This PR renames:

* `topological_semiring` -> `topological_ring`
* `smooth_semiring` -> `smooth_ring`

It drops the existing `topological_ring` and `smooth_ring`.

### [2021-09-02T08:19:17+00:00](https://github.com/leanprover-community/mathlib/commit/289e6dc63051d3069ca17bb378f47b6025595c15)
feat(category_theory/limits/kan_extension): Prove (co)reflectivity for Kan extensions ([#8962](https://github.com/leanprover-community/mathlib/pull/#8962))

### [2021-09-02T08:19:16+00:00](https://github.com/leanprover-community/mathlib/commit/8da6699f3be1d5655a9841cb72c5a58242c8cb8c)
chore(analysis/convex/basic): generalize `concave_on.le_on_segment` to monoids ([#8959](https://github.com/leanprover-community/mathlib/pull/#8959))

This matches the generalization already present on `convex_on.le_on_segment`.

### [2021-09-02T08:19:14+00:00](https://github.com/leanprover-community/mathlib/commit/9d3e3e8a7d9cd77d365f487f488a91c38e167c06)
feat(ring_theory/dedekind_domain): the integral closure of a DD is a DD ([#8847](https://github.com/leanprover-community/mathlib/pull/#8847))

Let `L` be a finite separable extension of `K = Frac(A)`, where `A` is a Dedekind domain. Then any `is_integral_closure C A L` is also a Dedekind domain, in particular for `C := integral_closure A L`.

In combination with the definitions of [#8701](https://github.com/leanprover-community/mathlib/pull/#8701), we can conclude that rings of integers are Dedekind domains.

### [2021-09-02T06:16:19+00:00](https://github.com/leanprover-community/mathlib/commit/6c247315ff5075e1968b3da15ee90903e27b021e)
feat(order/bounded_lattice): `ne_(bot|top)_iff_exists` ([#8960](https://github.com/leanprover-community/mathlib/pull/#8960))

Like `ne_zero_iff_exists`

### [2021-09-01T19:25:02+00:00](https://github.com/leanprover-community/mathlib/commit/07c57b56089c89d2c84685d4b02ea79c2692b09f)
feat(group_theory): Add `monoid_hom.mker` and generalise the codomain for `monoid_hom.ker` ([#8532](https://github.com/leanprover-community/mathlib/pull/#8532))

Add `monoid_hom.mker` for `f : M ->* N`, where `M` and `N` are `mul_one_class`es, and `monoid_hom.ker` is now defined for `f : G ->* H`, where `H` is a `mul_one_class`

### [2021-09-01T17:19:33+00:00](https://github.com/leanprover-community/mathlib/commit/0b8a858f92391d196faac613528aa8d19f382998)
feat(tactic/lint): minor linter improvements ([#8934](https://github.com/leanprover-community/mathlib/pull/#8934))

* Change `#print foo` with `#check @foo` in the output of the linter
* Include the number of linters in the output message
* add `attribute [nolint syn_taut] rfl`

### [2021-09-01T15:38:10+00:00](https://github.com/leanprover-community/mathlib/commit/9b0004664f0dcccc8e4bb518b224624d2fac16c0)
chore(algebra,group_theory,right_theory,linear_algebra): add missing lemmas ([#8948](https://github.com/leanprover-community/mathlib/pull/#8948))

This adds:

* `sub{group,ring,semiring}.map_id`
* `submodule.add_mem_sup`
* `submodule.map_add_le`

And moves `submodule.sum_mem_supr` and `submodule.sum_mem_bsupr` to an earlier file.

### [2021-09-01T14:07:44+00:00](https://github.com/leanprover-community/mathlib/commit/2beaa28ad7c4169696120500b905650a423bac8f)
fix(category_theory/adjunction/basic): Fix typo in docstring ([#8950](https://github.com/leanprover-community/mathlib/pull/#8950))

### [2021-09-01T14:07:42+00:00](https://github.com/leanprover-community/mathlib/commit/510e65d71cec6fe8aad83878f5eaa7f27ef8b882)
feat(topology/algebra/localization): add topological localization ([#8894](https://github.com/leanprover-community/mathlib/pull/#8894))

We show that ring topologies on a ring `R` form a complete lattice.
We use this to define the topological localization of a topological commutative ring `R` at a submonoid `M`.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-09-01T12:16:34+00:00](https://github.com/leanprover-community/mathlib/commit/d472e1bdcde5a44a876527b68b632cf33780ed5c)
feat(order/basic): recursor for order_dual ([#8938](https://github.com/leanprover-community/mathlib/pull/#8938))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-09-01T12:16:33+00:00](https://github.com/leanprover-community/mathlib/commit/0970d07d2d566ddf48dd5447fac3074fbb0b02ad)
feat(order/well_founded): define `function.argmin`, `function.argmin_on` ([#8895](https://github.com/leanprover-community/mathlib/pull/#8895))

Evidently, these are just thin wrappers around `well_founded.min` but I think
this use case is common enough to deserve this specialisation.

### [2021-09-01T12:16:32+00:00](https://github.com/leanprover-community/mathlib/commit/faf5e5c9bb50862a3184030ce1626789379cfe6a)
feat(order/bounded_lattice): unbot and untop ([#8885](https://github.com/leanprover-community/mathlib/pull/#8885))

`unbot` sends non-`⊥` elements of `with_bot α` to the corresponding element of `α`. `untop` does the analogous thing for `with_top`.

### [2021-09-01T10:35:59+00:00](https://github.com/leanprover-community/mathlib/commit/f3101e825416f7f99dfd9d7bbdb9a86158db5e50)
feat(group_theory/perm/basic): permutations of a subtype ([#8691](https://github.com/leanprover-community/mathlib/pull/#8691))

This is the same as `(equiv.refl _)^.set.compl .symm.trans (subtype_equiv_right $ by simp)` (up to a `compl`) but with better unfolding.

### [2021-09-01T07:45:41+00:00](https://github.com/leanprover-community/mathlib/commit/73f50ac6aafc74e46d0a81ae37d63e124d70b322)
feat(algebraic_geometry): Redefine Schemes in terms of isos of locally ringed spaces ([#8888](https://github.com/leanprover-community/mathlib/pull/#8888))

Addresses the project mentioned in `Scheme.lean` to redefine Schemes in terms of isomorphisms of locally ringed spaces, instead of presheafed spaces.

### [2021-09-01T07:45:39+00:00](https://github.com/leanprover-community/mathlib/commit/5b04a8969716f310a27f13e36b48dc8f4ac8b220)
feat(measure_theory/conditional_expectation): the integral of the norm of the conditional expectation is lower  ([#8318](https://github.com/leanprover-community/mathlib/pull/#8318))

Let `m` be a sub-σ-algebra of `m0`, `f` a `m0`-measurable function and `g` a `m`-measurable function, such that their integrals coincide on `m`-measurable sets with finite measure. Then `∫ x in s, ∥g x∥ ∂μ ≤ ∫ x in s, ∥f x∥ ∂μ` on all `m`-measurable sets with finite measure.

This PR also defines a notation `measurable[m] f`, to mean that `f : α → β` is measurable with respect to the `measurable_space` `m` on `α`.



Co-authored-by: RemyDegenne <remydegenne@gmail.com>

### [2021-09-01T05:57:01+00:00](https://github.com/leanprover-community/mathlib/commit/f0451d8009b2872a1d5edd2697575a3fde37ade7)
feat(algebra/group/defs): ext lemmas for (semi)groups and monoids ([#8391](https://github.com/leanprover-community/mathlib/pull/#8391))

[Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.236476.20boolean_algebra.2Eto_boolean_ring/near/242118386)

Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>

### [2021-08-31T23:00:50+00:00](https://github.com/leanprover-community/mathlib/commit/065a35dc791c5a33a995e19d05275806479842b3)
feat(algebra/{pointwise,algebra/operations}): add `supr_mul` and `mul_supr` ([#8923](https://github.com/leanprover-community/mathlib/pull/#8923))

Requested by @eric-wieser  on Zulip, https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/submodule.2Esupr_mul/near/250122435
and a couple of helper lemmas.

Co-authored-by: Eric Wieser wieser.eric@gmail.com





Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-08-31T21:31:09+00:00](https://github.com/leanprover-community/mathlib/commit/9339006918a29aeba52f4016dddcd8402fe9d313)
feat(algebra/{module/linear_map, algebra/basic}): Add `distrib_mul_action.to_linear_(map|equiv)` and `mul_semiring_action.to_alg_(hom|equiv)` ([#8936](https://github.com/leanprover-community/mathlib/pull/#8936))

This adds the following stronger versions of `distrib_mul_action.to_add_monoid_hom`:

* `distrib_mul_action.to_linear_map`
* `distrib_mul_action.to_linear_equiv`
* `mul_semiring_action.to_alg_hom`
* `mul_semiring_action.to_alg_equiv`

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/group.20acting.20on.20algebra/near/251372497)

### [2021-08-31T15:40:30+00:00](https://github.com/leanprover-community/mathlib/commit/3d6a828543baefa3adcbf339e29ace0d1aa2e086)
chore(order/bounded_lattice): dot-notation lemmas ne.bot_lt and ne.lt_top ([#8935](https://github.com/leanprover-community/mathlib/pull/#8935))

### [2021-08-31T15:40:29+00:00](https://github.com/leanprover-community/mathlib/commit/12bbd533ad24a926f785d92fc674bf8c4e368c22)
chore(topology/metric_space/basic): add `metric.uniform_continuous_on_iff_le` ([#8906](https://github.com/leanprover-community/mathlib/pull/#8906))

This is a version of `metric.uniform_continuous_on_iff` with `≤ δ` and
`≤ ε` instead of `< δ` and `< ε`. Also golf the proof of
`metric.uniform_continuous_on_iff`.

### [2021-08-31T15:40:28+00:00](https://github.com/leanprover-community/mathlib/commit/603a60667bd527d6f430bd150d7d759a2e9c8e14)
feat(measure_theory/hausdorff_measure): dimH and Hölder/Lipschitz maps ([#8361](https://github.com/leanprover-community/mathlib/pull/#8361))

* expand module docs;
* prove that a Lipschitz continuous map does not increase Hausdorff measure and Hausdorff dimension of sets;
* prove similar lemmas about Hölder continuous and antilipschitz maps;
* add convenience lemmas for some bundled types and for `Cⁿ` smooth maps;
* Hausdorff dimension of `ℝⁿ` equals `n`;
* prove a baby version of Sard's theorem: if `f : E → F` is a `C¹` smooth map between normed vector spaces such that `finrank ℝ E < finrank ℝ F`, then `(range f)ᶜ` is dense.

### [2021-08-31T13:58:34+00:00](https://github.com/leanprover-community/mathlib/commit/d9b2db991e8fb95657784fab30e27dbe25d3a0f0)
chore(group_theory/submonoid/center): fix typo and extend docstring ([#8937](https://github.com/leanprover-community/mathlib/pull/#8937))

### [2021-08-31T10:54:15+00:00](https://github.com/leanprover-community/mathlib/commit/ab967d23b10743a80a8d7130f10a81abafaa61cc)
feat(group_theory/submonoid): center of a submonoid ([#8921](https://github.com/leanprover-community/mathlib/pull/#8921))

This adds `set.center`, `submonoid.center`, `subsemiring.center`, and `subring.center`, to complement the existing `subgroup.center`.

This ran into a timeout, so had to squeeze some `simp`s in an unrelated file.

### [2021-08-31T09:04:38+00:00](https://github.com/leanprover-community/mathlib/commit/6b63c034356ac5db4b4f3cd14b97e880f827dc23)
fix(order/rel_classes): remove looping instance ([#8931](https://github.com/leanprover-community/mathlib/pull/#8931))

This instance causes loop with `is_total_preorder.to_is_total`, and was unused in the library.

Caught by the new linter ([#8932](https://github.com/leanprover-community/mathlib/pull/#8932)).

### [2021-08-31T09:04:37+00:00](https://github.com/leanprover-community/mathlib/commit/53f074ca42521acffe145f2bee8aff123697720c)
fix(data/complex/basic): better formulas for nsmul and gsmul on complex to fix a diamond ([#8928](https://github.com/leanprover-community/mathlib/pull/#8928))

As diagnosed by @eric-wieser in https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond.20in.20data.2Ecomplex.2Emodule/near/250318167

After the PR,
```lean
example :
  (sub_neg_monoid.has_scalar_int : has_scalar ℤ ℂ) = (complex.has_scalar : has_scalar ℤ ℂ) :=
rfl
```
works fine, while it fails on current master.

### [2021-08-31T09:04:36+00:00](https://github.com/leanprover-community/mathlib/commit/c04e8a48fb698e50076c283eabc985c42f01604c)
feat(logic/basic): equivalence of by_contra and choice ([#8912](https://github.com/leanprover-community/mathlib/pull/#8912))

Based on an email suggestion from Freek Wiedijk: `classical.choice` is equivalent to the following Type-valued variation on `by_contradiction`:

```lean
axiom classical.by_contradiction' {α : Sort*} : ¬ (α → false) → α
```

### [2021-08-31T09:04:35+00:00](https://github.com/leanprover-community/mathlib/commit/1c13454885992dbf13e1617d306882b9a437286c)
feat(algebraic_geometry): Restriction of locally ringed spaces ([#8809](https://github.com/leanprover-community/mathlib/pull/#8809))

Proves that restriction of presheafed spaces doesn't change the stalks and defines the restriction of a locally ringed space along an open embedding.

### [2021-08-31T07:22:54+00:00](https://github.com/leanprover-community/mathlib/commit/1dbd561f575a93aca22bdf18d9c230aa5ca1190d)
refactor(order/atoms): reorder arguments of `is_simple_lattice.fintype` ([#8933](https://github.com/leanprover-community/mathlib/pull/#8933))

Previously, this instance would first look for `decidable_eq` instances and after that for `is_simple_lattice` instances. The latter has only 4 instances, while the former takes hundreds of steps. Reordering the arguments makes a lot of type-class searches fail a lot quicker.

Caught by the new linter ([#8932](https://github.com/leanprover-community/mathlib/pull/#8932)).

### [2021-08-31T02:54:16+00:00](https://github.com/leanprover-community/mathlib/commit/22a297ca0f7b8d2a0be3cec12c3e73285ac78bc5)
feat(algebra/module/prod,pi): instances for actions with zero ([#8929](https://github.com/leanprover-community/mathlib/pull/#8929))

### [2021-08-31T01:35:58+00:00](https://github.com/leanprover-community/mathlib/commit/f4d72050b6dca11363d07fba2204b3ab309eb61c)
chore(measure_theory/*): rename `probability_measure` and `finite_measure` ([#8831](https://github.com/leanprover-community/mathlib/pull/#8831))

Renamed to `is_probability_measure` and `is_finite_measure`, respectively.  Also, `locally_finite_measure` becomes `is_locally_finite_measure`. See
https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.238337.20Weak.20convergence

### [2021-08-30T18:18:38+00:00](https://github.com/leanprover-community/mathlib/commit/6adb5e8b5548e14b71a443880e9c22173cfd9089)
feat(topology/algebra/ordered): monotone convergence in pi types ([#8841](https://github.com/leanprover-community/mathlib/pull/#8841))

* add typeclasses `Sup_convergence_class` and `Inf_convergence_class`
* reformulate theorems about monotone convergence in terms of these typeclasses;
* provide instances for a linear order with order topology, for products, and for pi types.

### [2021-08-30T16:14:57+00:00](https://github.com/leanprover-community/mathlib/commit/4a65197a05ffbecbaa79d4d978e06f82da023b38)
chore(algebra/direct_sum/algebra): add missing rfl lemmas ([#8924](https://github.com/leanprover-community/mathlib/pull/#8924))

I realized I was resorting to nasty unfolding to get these mid-proof

### [2021-08-30T16:14:56+00:00](https://github.com/leanprover-community/mathlib/commit/aa0694a135063d22a1ea3ceada3703bc761deb98)
fix(data/set/finite): drop {α : Type}, fixes universe issue ([#8922](https://github.com/leanprover-community/mathlib/pull/#8922))

### [2021-08-30T16:14:55+00:00](https://github.com/leanprover-community/mathlib/commit/ad7519a344e1671b9ccb397f572f63e5cf021e95)
doc(tactic/lint): instructions on fails_quickly failure ([#8910](https://github.com/leanprover-community/mathlib/pull/#8910))

* Also set `is_fast` to `tt`, since it takes ~10s on all of mathlib.

### [2021-08-30T16:14:54+00:00](https://github.com/leanprover-community/mathlib/commit/b3807ee31f2fc7703ea7f3bdc9f1515ffb2df180)
chore(data/finset/basic): lemmas about `(range n).nonempty` ([#8905](https://github.com/leanprover-community/mathlib/pull/#8905))

Add `finset.nonempty_range_iff`, `finset.range_eq_empty_iff`, and
`range.nonempty_range_succ`.

### [2021-08-30T14:54:37+00:00](https://github.com/leanprover-community/mathlib/commit/1e89df22bbce32e6f6fea2c95d6aa52dfadef012)
chore(algebra/monoid_algebra): convert a filename prefix into a folder ([#8925](https://github.com/leanprover-community/mathlib/pull/#8925))

This moves:
* `algebra.monoid_algebra` to `algebra.monoid_algebra.basic`
* `algebra.monoid_algebra_to_direct_sum` to `algebra.monoid_algebra.to_direct_sum`

### [2021-08-30T13:16:49+00:00](https://github.com/leanprover-community/mathlib/commit/98466d29fd9962db9262108e61df5844b0530247)
feat(algebra/direct_sum): graded algebras ([#8783](https://github.com/leanprover-community/mathlib/pull/#8783))

This provides a `direct_sum.galgebra` structure on top of the existing `direct_sum.gmonoid` structure.
This typeclass is used to provide an `algebra R (⨁ i, A i)` instance.

This also renames and improves the stateement of `direct_sum.module.ext` to `direct_sum.linear_map_ext` and adds `direect_sum.ring_hom_ext` and `direct_sum.alg_hom_ext` to match.

### [2021-08-29T18:50:41+00:00](https://github.com/leanprover-community/mathlib/commit/2bae06af885ff136576e84f1f03df9e296333e7e)
fix(ring_theory/polynomial/homogeneous): spelling mistake in `homogeneous` ([#8914](https://github.com/leanprover-community/mathlib/pull/#8914))

### [2021-08-29T14:08:26+00:00](https://github.com/leanprover-community/mathlib/commit/395bb6ca9a86dc644d4247e726300af3b6e859ab)
feat(algebraic_geometry): Lift isomorphism of sheafed spaces to locally ringed spaces ([#8887](https://github.com/leanprover-community/mathlib/pull/#8887))

Adds the fact that an isomorphism of sheafed spaces can be lifted to an isomorphism of locally ringed spaces. The main ingredient is the fact that stalk maps of isomorphisms are again isomorphisms.

In particular, this implies that the forgetful functor `LocallyRingedSpace ⥤ SheafedSpace CommRing` reflects isomorphisms.



Co-authored-by: justus-springer <50165510+justus-springer@users.noreply.github.com>

### [2021-08-28T19:59:37+00:00](https://github.com/leanprover-community/mathlib/commit/d75a2d96863fa514de1078064e0bcfab5d7be03c)
refactor(data/set/finite): use `[fintype (plift ι)]` in `finite_Union` ([#8872](https://github.com/leanprover-community/mathlib/pull/#8872))

This way we can use `finite_Union` instead of `finite_Union_Prop`.

### [2021-08-28T18:30:09+00:00](https://github.com/leanprover-community/mathlib/commit/db06b5a2fd7c5eaff3a74280818a13482f06bb24)
feat(group_theory/perm/cycle_type): Fixed points of permutations of prime order ([#8832](https://github.com/leanprover-community/mathlib/pull/#8832))

A few basic lemmas about fixed points of permutations of prime order.

### [2021-08-28T18:30:08+00:00](https://github.com/leanprover-community/mathlib/commit/e824b88dba98c8f53c52baafed83a6114a5b8b4d)
refactor(category_theory/limits/final): Symmetric API for final and initial functors ([#8808](https://github.com/leanprover-community/mathlib/pull/#8808))

Dualise the API for cofinal functors to symmetrically support final and initial functors.

This PR renames `cofinal` functors to `final` functors.

### [2021-08-28T18:30:07+00:00](https://github.com/leanprover-community/mathlib/commit/14a992b32ba8ab72cb0054b7d604a95708062f39)
chore(data/set_like): some additional documentation ([#8765](https://github.com/leanprover-community/mathlib/pull/#8765))

Gives some more explanation for `set_like` and what it does and is for.

### [2021-08-28T17:56:07+00:00](https://github.com/leanprover-community/mathlib/commit/0b48570313b9f65b71eae00f767821bf804e2502)
feat(group_theory/nilpotent): add subgroups of nilpotent group are nilpotent ([#8854](https://github.com/leanprover-community/mathlib/pull/#8854))




Co-authored-by: ineswright <52750254+ineswright@users.noreply.github.com>

### [2021-08-28T16:48:45+00:00](https://github.com/leanprover-community/mathlib/commit/1aaff8da2373097e637fd9243bc52cce7ce0bb7e)
feat(measure_theory/decomposition/lebesgue): Lebesgue decomposition for sigma-finite measures ([#8875](https://github.com/leanprover-community/mathlib/pull/#8875))

This PR shows sigma-finite measures `have_lebesgue_decomposition`. With this instance, `absolutely_continuous_iff_with_density_radon_nikodym_deriv_eq` will provide the Radon-Nikodym theorem for sigma-finite measures.

### [2021-08-28T09:42:18+00:00](https://github.com/leanprover-community/mathlib/commit/42b5e80109d78fe31b95afb87e19e2a544be1d16)
feat(data/polynomial/basic): monomial_eq_zero_iff ([#8897](https://github.com/leanprover-community/mathlib/pull/#8897))

Via a new `monomial_injective`.

### [2021-08-28T08:03:49+00:00](https://github.com/leanprover-community/mathlib/commit/8ee05e9a4d6ea16277461664392a76e78281b5bf)
feat(data/nat/log): Ceil log ([#8764](https://github.com/leanprover-community/mathlib/pull/#8764))

Defines the upper natural log, which is the least `k` such that `n ≤ b^k`.
Also expand greatly the docs of `data.nat.multiplicity`, in particular to underline that it proves Legendre's theorem.

### [2021-08-28T02:16:20+00:00](https://github.com/leanprover-community/mathlib/commit/d3c592f093a6435f5ade9812a4300a98edabac58)
chore(scripts): update nolints.txt ([#8899](https://github.com/leanprover-community/mathlib/pull/#8899))

I am happy to remove some nolints for you!

### [2021-08-28T01:06:00+00:00](https://github.com/leanprover-community/mathlib/commit/0fd51b1c070ac984e2d0a2a0637bc4ee0f18cbe8)
feat(data/real/irrational): exists irrational between any two distinct rationals and reals ([#8753](https://github.com/leanprover-community/mathlib/pull/#8753))

Did not find these proofs in `data/real/irrational`, seemed like they belong here.  Just proving the standard facts about irrationals between rats and reals.  I am using these lemmas in a repo about the Thomae's function.

### [2021-08-27T17:22:21+00:00](https://github.com/leanprover-community/mathlib/commit/2eaec057857bc3577abc6c99e2e180a7777496d4)
feat(ring_theory): define integrally closed domains ([#8893](https://github.com/leanprover-community/mathlib/pull/#8893))

In this follow-up to [#8882](https://github.com/leanprover-community/mathlib/pull/#8882), we define the notion of an integrally closed domain `R`, which contains all integral elements of `Frac(R)`.
We show the equivalence to `is_integral_closure R R K` for a field of fractions `K`.
We provide instances for `is_dedekind_domain`s, `unique_fractorization_monoid`s, and to the integers of a valuation. In particular, the rational root theorem provides a proof that `ℤ` is integrally closed.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>
Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2021-08-27T15:28:35+00:00](https://github.com/leanprover-community/mathlib/commit/c4cf4c256ee51eab245f9c3ba06633faabc34500)
feat(algebra/polynomial/big_operators): coeff of sums and prods of polynomials ([#8680](https://github.com/leanprover-community/mathlib/pull/#8680))

Additionally, provide results for degree and nat_degree over lists,
which generalize away from requiring commutativity.

### [2021-08-27T14:36:55+00:00](https://github.com/leanprover-community/mathlib/commit/dcd60e25e4913e1b1d8da247e043d9c536073d86)
feat(ring_theory/trace): the trace form is nondegenerate ([#8777](https://github.com/leanprover-community/mathlib/pull/#8777))

This PR shows the determinant of the trace form is nonzero over a finite separable field extension. This is an important ingredient in showing the integral closure of a Dedekind domain in a finite separable extension is again a Dedekind domain, i.e. that rings of integers are Dedekind domains. We extend the results of [#8762](https://github.com/leanprover-community/mathlib/pull/#8762) to write the trace form as a Vandermonde matrix to get a nice expression for the determinant, then use separability to show this value is nonzero.

### [2021-08-27T14:36:54+00:00](https://github.com/leanprover-community/mathlib/commit/7f256987ba0ad403f01c1e4a9f79c3e50ba0e219)
feat(analysis/complex/isometry): Show that certain complex isometries are not equal ([#8646](https://github.com/leanprover-community/mathlib/pull/#8646))

1. Lemma `reflection_rotation` proves that rotation by `(a : circle)` is not equal to reflection over the x-axis (i.e, `conj_lie`).  
2. Lemma `rotation_injective` proves that rotation by different `(a b: circle)` are not the same,(i.e, `rotation` is injective).
Co-authored by Kyle Miller

### [2021-08-27T14:02:35+00:00](https://github.com/leanprover-community/mathlib/commit/7cfc9872226b614a6b76b2e27b08157e75f406f0)
feat(measure_theory/decomposition/radon_nikodym): the Radon-Nikodym theorem ([#8763](https://github.com/leanprover-community/mathlib/pull/#8763))

The Radon-Nikodym theorem 🎉

### [2021-08-27T12:25:45+00:00](https://github.com/leanprover-community/mathlib/commit/023a816d102dbfc6b776c83f18cf804c1e105159)
feat(algebra): define a bundled type of absolute values ([#8881](https://github.com/leanprover-community/mathlib/pull/#8881))

The type `absolute_value R S` is a bundled version of the typeclass `is_absolute_value R S` defined in `data/real/cau_seq.lean` (why was it defined there?), putting both in one file `algebra/absolute_value.lean`. The lemmas from `is_abs_val` have been copied mostly literally, with weakened assumptions when possible. Maps between the bundled and unbundled versions are also available.
We also define `absolute_value.abs` that represents the "standard" absolute value `abs`.

The point of this PR is both to modernize absolute values into bundled structures, and to make it easier to extend absolute values to represent "absolute values respecting the Euclidean domain structure", and from there "absolute values that show the class group is finite".



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>
Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2021-08-27T11:47:58+00:00](https://github.com/leanprover-community/mathlib/commit/a32785195eae0a8abdc4f4692d6c1f3f504c40a1)
feat(ring_theory): a typeclass `is_integral_closure` ([#8882](https://github.com/leanprover-community/mathlib/pull/#8882))

The typeclass `is_integral_closure A R B` states `A` is the integral closure of `R` in `B`, i.e. that an element of `B` is integral over `R` iff it is an element of (the image of) `A`.
We also show that any integral extension of `R` contained in `B` is contained in `A`, and the integral closure is unique up to isomorphism.

This was suggested in the review of [#8701](https://github.com/leanprover-community/mathlib/pull/#8701), in order to define a characteristic predicate for rings of integers.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-08-27T10:03:00+00:00](https://github.com/leanprover-community/mathlib/commit/88e47d7c51570f2d4b2fd49e5f0b0fb548504cd1)
feat(linear_algebra/matrix/nonsingular_inverse): adjugate_mul_distrib_aux ([#8681](https://github.com/leanprover-community/mathlib/pull/#8681))

We prove towards the fact that the adjugate of a matrix distributes
over the product. The current proof assumes regularity of the matrices.
In the general case, this hypothesis is not required, but this lemma
will be crucial in a follow-up PR
which has to use polynomial matrices for the general case.

Additionally, we provide many API lemmas for det, cramer, 
nonsing_inv, and adjugate.



Co-authored-by: Vierkantor <vierkantor@vierkantor.com>
Co-authored-by: Ruben Van de Velde <65514131+Ruben-VandeVelde@users.noreply.github.com>

### [2021-08-27T08:03:55+00:00](https://github.com/leanprover-community/mathlib/commit/0c5032625323670663a8ba5ac8311e87c889d023)
refactor(*): use `is_empty` instead of `not (nonempty α)` ([#8858](https://github.com/leanprover-community/mathlib/pull/#8858))

`eq_empty_of_not_nonempty` gets dropped in favour of `eq_empty_of_is_empty`.

### [2021-08-27T07:04:59+00:00](https://github.com/leanprover-community/mathlib/commit/fe13f03056160c60192599b389c74ece057e0814)
feat(category_theory/structured_arrow): Duality between structured and costructured arrows ([#8807](https://github.com/leanprover-community/mathlib/pull/#8807))

This PR formally sets up the duality of structured and costructured arrows as equivalences of categories. Unfortunately, the code is a bit repetitive, as the four functors introduced all follow a similar pattern, which I wasn't able to abstract out. Suggestions are welcome!



Co-authored-by: Scott Morrison <scott@tqft.net>

### [2021-08-27T06:31:17+00:00](https://github.com/leanprover-community/mathlib/commit/4705a6b52172f7f96b2d6cde4f374f114eef488b)
doc(ring_theory/hahn_series): Update Hahn Series docstring ([#8883](https://github.com/leanprover-community/mathlib/pull/#8883))

Updates `ring_theory/hahn_series` docstring to remove outdated TODOs

### [2021-08-27T05:01:51+00:00](https://github.com/leanprover-community/mathlib/commit/a9de1979112c66cb022667dd166085f7fbf89b9a)
feat(algebra/big_operators/basic): add `prod_dite_of_false`, `prod_dite_of_true` ([#8865](https://github.com/leanprover-community/mathlib/pull/#8865))

The proofs are not mine cf [Zulip conversation](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/.60prod_dite_of_true.60)

Co-authored-by: Adam Topaz <github@adamtopaz.com>
Co-authored-by: Eric Rodriguez <ericrboidi@gmail.com>

### [2021-08-27T03:31:00+00:00](https://github.com/leanprover-community/mathlib/commit/bcd5cd3766ef795f6cc681348253e4eb8a12a365)
feat(algebra/pointwise): add to_additive attributes for pointwise smul ([#8878](https://github.com/leanprover-community/mathlib/pull/#8878))

I wanted this to generalize some definitions in [#2819](https://github.com/leanprover-community/mathlib/pull/#2819) but it should be independent.

### [2021-08-27T02:26:16+00:00](https://github.com/leanprover-community/mathlib/commit/bb4026f42b5b253bedf0cd68e612c35cc23fe636)
chore(scripts): update nolints.txt ([#8886](https://github.com/leanprover-community/mathlib/pull/#8886))

I am happy to remove some nolints for you!

### [2021-08-27T00:42:51+00:00](https://github.com/leanprover-community/mathlib/commit/11e304779b6b3501b60b760b14f1fd3418eb64c9)
feat(algebra/ordered_monoid): min_top_(left|right) ([#8880](https://github.com/leanprover-community/mathlib/pull/#8880))

### [2021-08-26T19:37:09+00:00](https://github.com/leanprover-community/mathlib/commit/e290569770e1bfea244e3b13fa717a11e72e5eda)
feat(data/nat/totient): add nat.totient_prime_iff ([#8833](https://github.com/leanprover-community/mathlib/pull/#8833))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-08-26T19:37:08+00:00](https://github.com/leanprover-community/mathlib/commit/080362d06d0a3330bba801d37acca110124f66c8)
feat(data/finset/pi_induction): induction on `Π i, finset (α i)` ([#8794](https://github.com/leanprover-community/mathlib/pull/#8794))

### [2021-08-26T19:37:07+00:00](https://github.com/leanprover-community/mathlib/commit/83490fcd8e47bf481ec8c6174494866a53c813da)
feat(data/multiset/basic): add some lemmas ([#8787](https://github.com/leanprover-community/mathlib/pull/#8787))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-08-26T18:49:05+00:00](https://github.com/leanprover-community/mathlib/commit/d9f471303f4949d7dd057672c1dee3d0bc1774f2)
feat(ring_theory/trace): Tr(x) is the sum of embeddings σ x into an algebraically closed field ([#8762](https://github.com/leanprover-community/mathlib/pull/#8762))

The point of this PR is to provide the other formulation of "the trace of `x` is the sum of its conjugates", alongside `trace_eq_sum_roots`, namely `trace_eq_sum_embeddings`. We do so by exploiting the bijection between conjugate roots to `x : L` over `K` and embeddings of `K(x)`, then counting the number of embeddings of `x` to go to the whole of `L`.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>
Co-authored-by: Anne Baanen <t.baanen@vu.nl>

### [2021-08-26T16:48:12+00:00](https://github.com/leanprover-community/mathlib/commit/5a2082d0898ca8b9b5d4c84da918db6d3c627303)
chore(category/grothendieck): split definition to avoid timeout ([#8871](https://github.com/leanprover-community/mathlib/pull/#8871))

Helpful for [#8807](https://github.com/leanprover-community/mathlib/pull/#8807).

### [2021-08-26T16:48:10+00:00](https://github.com/leanprover-community/mathlib/commit/9038709e1300bb6ce140124de25d525ddb2e4567)
feat(analysis/normed_space/inner_product): multiplication by I is real-orthogonal ([#8852](https://github.com/leanprover-community/mathlib/pull/#8852))

### [2021-08-26T16:48:09+00:00](https://github.com/leanprover-community/mathlib/commit/5bd69fdf9aec2a983117af1e512df587d5361a43)
feat(ring_theory/ideal/local_ring): Isomorphisms are local ([#8850](https://github.com/leanprover-community/mathlib/pull/#8850))

Adds the fact that isomorphisms (and ring equivs) are local ring homomorphisms.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-08-26T16:48:08+00:00](https://github.com/leanprover-community/mathlib/commit/5afdaea46b8507eb677cd264b38f32131fe1eae6)
feat(data/fin): reverse_induction ([#8845](https://github.com/leanprover-community/mathlib/pull/#8845))

### [2021-08-26T16:48:07+00:00](https://github.com/leanprover-community/mathlib/commit/678a2b5b77882a1fb16cc5bc47d3249f0659faad)
feat(data/list,multiset,finset): monotone_filter_(left|right) ([#8842](https://github.com/leanprover-community/mathlib/pull/#8842))

### [2021-08-26T16:48:06+00:00](https://github.com/leanprover-community/mathlib/commit/8e87f4266e0674734e1fb2a5c89164fe0c04980e)
feat(tactic/lint/misc): Add syntactic tautology linter ([#8821](https://github.com/leanprover-community/mathlib/pull/#8821))

Add a linter that checks whether a lemma is a declaration that `∀ a b ... z,e₁ = e₂` where `e₁` and `e₂` are equal
exprs, we call declarations of this form syntactic tautologies.
Such lemmas are (mostly) useless and sometimes introduced unintentionally when proving basic facts
with rfl when elaboration results in a different term than the user intended.
@PatrickMassot suggested this at https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntactic.20tautology.20linter/near/250267477.
The found problems are fixed in [#8811](https://github.com/leanprover-community/mathlib/pull/#8811).



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2021-08-26T13:06:18+00:00](https://github.com/leanprover-community/mathlib/commit/70e1f9a62a1f1bae7ac577d51bba3ac91698cd94)
feat(data/fin): add_cases ([#8876](https://github.com/leanprover-community/mathlib/pull/#8876))

### [2021-08-26T13:06:17+00:00](https://github.com/leanprover-community/mathlib/commit/976e9306aa56f799e98e33169bfe436ef9b2da79)
chore(archive/imo/README): whitespace breaks links ([#8874](https://github.com/leanprover-community/mathlib/pull/#8874))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-08-26T13:06:15+00:00](https://github.com/leanprover-community/mathlib/commit/0d07d04ebc3da53ae41397fd2ff011f46de48ec8)
chore(data/set): add a few lemmas and `@[simp]` attrs ([#8873](https://github.com/leanprover-community/mathlib/pull/#8873))

### [2021-08-26T13:06:14+00:00](https://github.com/leanprover-community/mathlib/commit/1f13610e3acf9459584870320d193feeee23c9e4)
feat(*): remove the `fintype` requirement from matrices. ([#8810](https://github.com/leanprover-community/mathlib/pull/#8810))

For historical reasons, `matrix` has always had `fintype` attached to it. I remove this artificial limitation, but with a big caveat; multiplication is currently defined in terms of the dot product, which requires finiteness; therefore, any multiplicative structure on matrices currently requires fintypes. This can be removed in future contributions, however.



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-08-26T11:17:26+00:00](https://github.com/leanprover-community/mathlib/commit/0861cc75aa0d995e3edeba0085a879edc782197b)
refactor(*): move code about `ulift`/`plift` ([#8863](https://github.com/leanprover-community/mathlib/pull/#8863))

* move old file about `ulift`/`plift` from `data.ulift` to `control.ulift`;
* redefine `ulift.map` etc without pattern matching;
* create new `data.ulift`, move `ulift.subsingleton` etc from `data.equiv.basic` to this file;
* add `ulift.is_empty` and `plift.is_empty`;
* add `ulift.exists`, `plift.exists`, `ulift.forall`, and `plift.forall`;
* rename `equiv.nonempty_iff_nonempty` to `equiv.nonempty_congr` to match `equiv.subsingleton_congr` etc;
* rename `plift.fintype` to `plift.fintype_Prop`, add a new `plift.fintype`.

### [2021-08-26T11:17:25+00:00](https://github.com/leanprover-community/mathlib/commit/2a6fef399dc4b2965c7aa710ce57f29e2b683b07)
refactor(order/filter/bases): allow `ι : Sort*` ([#8856](https://github.com/leanprover-community/mathlib/pull/#8856))

* `ι` in `filter.has_basis (l : filter α) (p : ι → Prop) (s : ι → set )` now can be a `Sort *`;
* some lemmas now have "primed" versions that use `pprod` instead of `prod`;
* new lemma: `filter.has_basis_supr`.

I also added a few missing lemmas to `data.pprod` and golfed a couple of proofs.

### [2021-08-26T11:17:24+00:00](https://github.com/leanprover-community/mathlib/commit/3287c9428bd488a5a9d9c95aed35f588c35ba9f9)
refactor(tactic/ext): simplify ext attribute ([#8785](https://github.com/leanprover-community/mathlib/pull/#8785))

This simplifies the `ext` attribute from taking a list with `*`, `(->)` and names to just `@[ext]` or `@[ext ident]`. The `(->)` option is only used once, in the file that declares the `ext` attribute itself, so it's not worth the parser complexity. The ability to remove attributes with `@[ext -foo]` is removed, but I don't think it was tested because it was never used and doesn't work anyway.

Also fixes an issue with ext attributes being quadratic (in the number of ext attributes applied), and also makes `ext` attributes remove themselves (the real work of ext attributes is done by two internal attributes `_ext_core` and `_ext_lemma_core`), so that they don't pollute `#print` output. Before:
```lean
#print funext

@[_ext_lemma_core, ext list.cons.{0} ext_param_type (sum.inr.{0 0} (option.{0} name) (option.{0} name) (option.some.{0} name (name.mk_numeral (unsigned.of_nat' (has_zero.zero.{0} nat nat.has_zero)) name.anonymous))) (list.cons.{0} ext_param_type (sum.inr.{0 0} (option.{0} name) (option.{0} name) (option.some.{0} name (name.mk_string "thunk" name.anonymous))) (list.nil.{0} ext_param_type)), intro!]
theorem funext : ∀ {α : Sort u} {β : α → Sort v} {f₁ f₂ : Π (x : α), β x}, (∀ (x : α), f₁ x = f₂ x) → f₁ = f₂ :=
```
After:
```lean
#print funext

@[_ext_lemma_core, intro!]
theorem funext : ∀ {α : Sort u} {β : α → Sort v} {f₁ f₂ : Π (x : α), β x}, (∀ (x : α), f₁ x = f₂ x) → f₁ = f₂ :=
```

### [2021-08-26T11:17:23+00:00](https://github.com/leanprover-community/mathlib/commit/a4b33d35572aa886665733ee1d95af34f4ba42f1)
feat(data/matrix/kronecker): add two reindex lemmas ([#8774](https://github.com/leanprover-community/mathlib/pull/#8774))

Added two lemmas `kronecker_map_reindex_right` and `kronecker_map_reindex_left` (used in LTE) and moved the two `assoc` lemmas some lines up, before the `linear` section, because they are unrelated to any linearity business.

### [2021-08-26T11:17:22+00:00](https://github.com/leanprover-community/mathlib/commit/3e5bbcaed97e9baafbb2a76b661fc042d4d06a5c)
feat(field_theory/intermediate_field): generalize `algebra` instances ([#8761](https://github.com/leanprover-community/mathlib/pull/#8761))

The `algebra` and `is_scalar_tower` instances for `intermediate_field` are (again) as general as those for `subalgebra`.

### [2021-08-26T11:17:21+00:00](https://github.com/leanprover-community/mathlib/commit/2c698bd17cd7e949dcad007206b9e654272c468a)
docs(set_theory/zfc): add module docstring and missing def docstrings ([#8744](https://github.com/leanprover-community/mathlib/pull/#8744))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-08-26T10:02:38+00:00](https://github.com/leanprover-community/mathlib/commit/2e1e98fac6fa181ce57f9ce04914bf4cbe3120bd)
feat(linear_algebra/bilinear_form): bilinear forms with `det ≠ 0` are nonsingular ([#8824](https://github.com/leanprover-community/mathlib/pull/#8824))

In particular, the trace form is such a bilinear form (see [#8777](https://github.com/leanprover-community/mathlib/pull/#8777)).

### [2021-08-26T10:02:37+00:00](https://github.com/leanprover-community/mathlib/commit/147af575341604cec1b2db4f71ace4687cfbf0a2)
feat(category_theory/is_connected): The opposite of a connected category is connected ([#8806](https://github.com/leanprover-community/mathlib/pull/#8806))




Co-authored-by: justus-springer <50165510+justus-springer@users.noreply.github.com>

### [2021-08-26T10:02:36+00:00](https://github.com/leanprover-community/mathlib/commit/058f639ea9a076bd20e8824ee4a5e8feb9135f4f)
feat(data/equiv/fin): fin_succ_equiv_last ([#8805](https://github.com/leanprover-community/mathlib/pull/#8805))

This commit changes the type of `fin_succ_equiv'`. `fin_succ_equiv' i` used to take an argument of type `fin n` which was 
strange and it now takes an argument of type `fin (n + 1)` meaning it is now possible to send `fin.last n` to `none` if desired. I also defined `fin.succ_equiv_last`, the canonical equiv `fin (n + 1)` to `option (fin n)` sending `fin.last` to `none`.

### [2021-08-26T09:18:22+00:00](https://github.com/leanprover-community/mathlib/commit/94d4a32c25787ac80c00cea745eba9b10f1b372c)
feat(linear_algebra/bilinear_form): the dual basis for a nondegenerate bilin form ([#8823](https://github.com/leanprover-community/mathlib/pull/#8823))

Let `B` be a nondegenerate (symmetric) bilinear form on a finite-dimensional vector space `V` and `b` a basis on `V`. Then there is a "dual basis" `d` such that `d.repr x i = B x (b i)` and `B (d i) (b j) = B (b i) (d j) = if i = j then 1 else 0`.

In a follow-up PR, we'll show that the trace form for `L / K` produces a dual basis consisting only of elements integral over the ring of integers of `K`.

### [2021-08-26T07:01:23+00:00](https://github.com/leanprover-community/mathlib/commit/acbe93590e777784b029299b816d163bbfb8ffec)
chore(topology/metric_space): add 2 lemmas, golf ([#8861](https://github.com/leanprover-community/mathlib/pull/#8861))

### [2021-08-26T07:01:22+00:00](https://github.com/leanprover-community/mathlib/commit/94385528c030c0187ecbcbacd2813a013500945a)
feat(data/fin): cast_add_lt ([#8830](https://github.com/leanprover-community/mathlib/pull/#8830))

### [2021-08-26T07:01:21+00:00](https://github.com/leanprover-community/mathlib/commit/6c6fc0216612216e72fa0b47e2adf6513bdc66a6)
feat(data/fin): cast_add_right ([#8829](https://github.com/leanprover-community/mathlib/pull/#8829))

### [2021-08-26T07:01:20+00:00](https://github.com/leanprover-community/mathlib/commit/bafeccf251b796fa845520aefe4c2a0718e9a5ec)
feat(data/fin): fin.succ_cast_succ ([#8828](https://github.com/leanprover-community/mathlib/pull/#8828))

### [2021-08-26T07:01:19+00:00](https://github.com/leanprover-community/mathlib/commit/cb1932d7e94afc21b9ce8f0a40865d4dfa06adba)
feat(data/complex/exponential): bound on exp for arbitrary arguments ([#8667](https://github.com/leanprover-community/mathlib/pull/#8667))

This PR is for a new lemma (currently called `exp_bound'`) which proves `exp x` is close to its `n`th degree taylor expansion for sufficiently large `n`. Unlike the previous bound, this lemma can be instantiated on any real `x` rather than just `x` with absolute value less than or equal to 1. I am separating this lemma out from [#8002](https://github.com/leanprover-community/mathlib/pull/#8002) because I think it stands on its own.

The last time I checked it was sorry free - but that was before I merged with master and moved it to a different branch. It may also benefit from a little golfing.

There are a few lemmas I proved as well to support this - one about the relative size of factorials and a few about sums of geometric sequences. The ~~geometric series ones should probably be generalized and moved to another file~~ this generalization sort of exists and is in the algebra.geom_sum file. I didn't find it initially since I was searching for "geometric" not "geom".

### [2021-08-26T05:17:35+00:00](https://github.com/leanprover-community/mathlib/commit/fe4777762f4cd6410ac1fa14ce0daa5981b799ad)
feat(analysis/complex/upper_half_plane): new file ([#8377](https://github.com/leanprover-community/mathlib/pull/#8377))

This file defines `upper_half_plane` to be the upper half plane in `ℂ`.

We furthermore equip it with the structure of an `SL(2,ℝ)` action by
fractional linear transformations.

Co-authored by Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored by Marc Masdeu <marc.masdeu@gmail.com>



Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2021-08-26T03:51:48+00:00](https://github.com/leanprover-community/mathlib/commit/7e781a8eff6f56c97d71d629901fa88e5174e346)
chore(*): Fix syntactic tautologies ([#8811](https://github.com/leanprover-community/mathlib/pull/#8811))

Fix a few lemmas that were accidentally tautological in the sense that they were equations with syntactically equal LHS and RHS.
A linter will be added in a second PR, for now we just fix the found issues.
It would be great if a category expert like @semorrison would check the category ones, as its unclear to me which direction they are meant to go.

As pointed out by @PatrickMassot on Zulip https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntactic.20tautology.20linter/near/250267477.

Thanks to @eric-wieser for helping figure out the corrected versions.

### [2021-08-26T02:42:53+00:00](https://github.com/leanprover-community/mathlib/commit/daf0d02f88f22d940ad2cc92887dc1f7334ea8a5)
feat(archive/imo): README.md ([#8799](https://github.com/leanprover-community/mathlib/pull/#8799))

Proposed text for a README file in the IMO directory. I don't think we have a particular problem with IMO submissions, but thought it could be useful to set the parameters around IMO problems, as it's never been completely clear they belong in mathlib.

If we merge this, or something like it, I'll link #imo on Zulip to it.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-08-25T21:27:03+00:00](https://github.com/leanprover-community/mathlib/commit/8befa828856e311a292c3d254f57457bce88882e)
feat(group_theory/perm/list): lemmas on form_perm ([#8848](https://github.com/leanprover-community/mathlib/pull/#8848))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-08-25T21:27:01+00:00](https://github.com/leanprover-community/mathlib/commit/49af34d9b9f6565be283a4ff22c07cdc4c82a498)
feat(group_theory/perm/cycles): same_cycle and cycle_of lemmas ([#8835](https://github.com/leanprover-community/mathlib/pull/#8835))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-08-25T18:32:55+00:00](https://github.com/leanprover-community/mathlib/commit/40bd7c696881ba9be3432edad60d32d0fc92426b)
feat(data/nat/modeq): Rotating list.repeat ([#8817](https://github.com/leanprover-community/mathlib/pull/#8817))

Some consequences of `list.rotate_eq_self_iff_eq_repeat`.

### [2021-08-25T18:32:54+00:00](https://github.com/leanprover-community/mathlib/commit/c544742c56f695e36d4789aada60fe08f1f830f3)
feat(linear_algebra/finite_dimensional): add finrank_map_le ([#8815](https://github.com/leanprover-community/mathlib/pull/#8815))



Co-authored-by: Scott Morrison <scott@tqft.net>

### [2021-08-25T18:32:53+00:00](https://github.com/leanprover-community/mathlib/commit/6a4180500e095beaa7473f5a90511c9a67f97521)
chore(group_theory/group_action/basic): `to_additive` attributes throughout ([#8814](https://github.com/leanprover-community/mathlib/pull/#8814))

### [2021-08-25T18:32:52+00:00](https://github.com/leanprover-community/mathlib/commit/b6e6c84fb5e995639290f464edb5d55d38c2b60d)
feat(data/finset/basic): to_list ([#8797](https://github.com/leanprover-community/mathlib/pull/#8797))

Produce a list of the elements of a finite set using choice.

### [2021-08-25T18:32:50+00:00](https://github.com/leanprover-community/mathlib/commit/aca0874a9ce95510752f4075f80f273172e9b177)
chore(algebra/direct_sum): Move all the algebraic structure on `direct_sum` into a single directory ([#8771](https://github.com/leanprover-community/mathlib/pull/#8771))

This ends up splitting one file in two, but all the contents are just moved.

### [2021-08-25T18:32:49+00:00](https://github.com/leanprover-community/mathlib/commit/df8818c792bff98165c2c532a3d3389524e36574)
feat(data/nat/multiplicity): bound on the factorial multiplicity ([#8767](https://github.com/leanprover-community/mathlib/pull/#8767))

This proves `multiplicity p n! ≤ n/(p - 1)`, for `p` prime and `n` natural.

### [2021-08-25T18:32:48+00:00](https://github.com/leanprover-community/mathlib/commit/301eb10ea08ee9c788b3a81c2e11164af2227272)
feat(data/polynomial/monic): monic.is_regular ([#8679](https://github.com/leanprover-community/mathlib/pull/#8679))

This golfs/generalizes some proofs.
Additionally, provide some helper API for `is_regular`,
for non-zeros in domains,
and for smul of units.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-08-25T17:03:35+00:00](https://github.com/leanprover-community/mathlib/commit/b364cfc3b1b24977badfdf8f0dcfd7abacd8875c)
feat(linear_algebra/basis): if `R ≃ R'`, map a basis for `R`-module `M` to `R'`-module `M` ([#8699](https://github.com/leanprover-community/mathlib/pull/#8699))

If `R` and `R'` are isomorphic rings that act identically on a module `M`, then a basis for `M` as `R`-module is also a basis for `M` as `R'`-module.

### [2021-08-25T15:26:51+00:00](https://github.com/leanprover-community/mathlib/commit/0ad5abc7e3ebe5af45bba74409ad1a8ba93f135e)
chore(data/set/finite): golf 2 proofs ([#8862](https://github.com/leanprover-community/mathlib/pull/#8862))

Also add `finset.coe_emb`.

### [2021-08-25T12:58:19+00:00](https://github.com/leanprover-community/mathlib/commit/97c327cc09104d164ff803a2c49d8400433897c1)
feat(tactic/suggest): suggest using X, to filter results ([#8819](https://github.com/leanprover-community/mathlib/pull/#8819))

You can now write `suggest using X`, to only give suggestions which make use of the local hypothesis `X`.

Similarly `suggest using X Y Z` for multiple hypotheses. `library_search using X` is also enabled.

This makes `suggest` much more useful. Previously
```
example (P Q : list ℕ) : list ℕ := by suggest
```
would have just said `exact P`.

Now you can write
```
example (P Q : list ℕ) : list ℕ := by suggest using P Q
```
and get:
```
Try this: exact list.diff P Q
Try this: exact list.union P Q
Try this: exact list.inter P Q
Try this: exact list.append P Q
Try this: exact list.bag_inter P Q
Try this: exact list.remove_all P Q
Try this: exact list.reverse_core P Q
```



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-08-25T06:39:27+00:00](https://github.com/leanprover-community/mathlib/commit/26a328633efb7bffcaf4cd118a0cd505390b4fbb)
fix(data/set/lattice): lemmas about `Union`/`Inter` over `p : Prop` ([#8860](https://github.com/leanprover-community/mathlib/pull/#8860))

With recently added `@[congr]` lemmas, it suffices to deal with unions/inters over `true` and `false`.

### [2021-08-25T06:39:26+00:00](https://github.com/leanprover-community/mathlib/commit/4a0c3d713144d2033d1577dec301cee60842c663)
feat(linear_algebra/finite_dimension): nontriviality lemmas ([#8851](https://github.com/leanprover-community/mathlib/pull/#8851))

A vector space of `finrank` greater than zero is `nontrivial`, likewise a vector space whose `finrank` is equal to the successor of a natural number.

Also write the non-`fact` version of `finite_dimensional_of_finrank_eq_succ`, a lemma which previously existed under a `fact` hypothesis, and rename the `fact` version to `fact_finite_dimensional_of_finrank_eq_succ`.

### [2021-08-25T06:39:25+00:00](https://github.com/leanprover-community/mathlib/commit/fd036259648c46907395c6fbf5d9b4825785523f)
chore(ring_theory/ideal): Move local rings into separate file ([#8849](https://github.com/leanprover-community/mathlib/pull/#8849))

Moves the material on local rings and local ring homomorphisms into a separate file and adds a module docstring.

### [2021-08-25T06:39:24+00:00](https://github.com/leanprover-community/mathlib/commit/88db4e2c93ea4235a8866d96af85fb9f1082758a)
feat(ring_theory): `M / S` is noetherian if `M / S / R` is ([#8846](https://github.com/leanprover-community/mathlib/pull/#8846))

Let `M` be an `S`-module and `S` an `R`-algebra. Then to show `M` is noetherian as an `S`-module, it suffices to show it is noetherian as an `R`-module.

### [2021-08-25T06:39:23+00:00](https://github.com/leanprover-community/mathlib/commit/00e57d32eca72b4741812105047e07f6f65a51f9)
chore(order/rel_iso): rename `order_embedding.of_map_rel_iff` to `of_map_le_iff` ([#8839](https://github.com/leanprover-community/mathlib/pull/#8839))

The old name comes from `rel_embedding`.

### [2021-08-25T06:39:21+00:00](https://github.com/leanprover-community/mathlib/commit/ef428c619b191e50aab640a06c3cf83bb2da739a)
feat(topology/metric_space): add `uniform_embedding.comap_metric_space` ([#8838](https://github.com/leanprover-community/mathlib/pull/#8838))

* add `uniform_embedding.comap_metric_space` and
  `uniform_inducing.comap_pseudo_metric_space`;
* use the former for `int.metric_space`;
* also add `emetric.closed_ball_mem_nhds`.

### [2021-08-25T05:54:13+00:00](https://github.com/leanprover-community/mathlib/commit/bd9622faa852427d94afc734a29218c32c015bd0)
chore(category_theory/Fintype): Fix universe restriction in skeleton ([#8855](https://github.com/leanprover-community/mathlib/pull/#8855))

This removes a universe restriction in the existence of a skeleton for the category `Fintype`.
Once merged, `Fintype.skeleton.{u}` will be a (small) skeleton for `Fintype.{u}`, with `u` any universe parameter.

### [2021-08-24T21:23:20+00:00](https://github.com/leanprover-community/mathlib/commit/6c3dda5cb6a18d2972f69ff51d2d6f7eaffc9fe1)
feat(measure_theory/measure/vector_measure): add absolute continuity for vector measures ([#8779](https://github.com/leanprover-community/mathlib/pull/#8779))

This PR defines absolute continuity for vector measures and shows that a signed measure is absolutely continuous wrt to a positive measure iff its total variation is absolutely continuous wrt to that measure.

### [2021-08-24T10:50:23+00:00](https://github.com/leanprover-community/mathlib/commit/1dda1cd66dfdf5be30f6a233d0b8026a053acb67)
feat(algebra/big_operators/finprod): a few more lemmas ([#8843](https://github.com/leanprover-community/mathlib/pull/#8843))

* versions of `monoid_hom.map_finprod` that assume properties of
  `f : M →* N` instead of finiteness of the support;
* `finsum_smul`, `smul_finsum`, `finprod_inv_distrib`: missing
  analogues of lemmas from `finset.prod`/`finset.sum` API.

### [2021-08-24T09:54:38+00:00](https://github.com/leanprover-community/mathlib/commit/a21fcfad9c81accd53551830bd930f8d357359b5)
feat(data/real/nnreal): upgrade `nnabs` to a `monoid_with_zero_hom` ([#8844](https://github.com/leanprover-community/mathlib/pull/#8844))

Other changes:

* add `nnreal.finset_sup_div`;
* rename `nnreal.coe_nnabs` to `real.coe_nnabs`;
* add `real.nndist_eq` and `real.nndist_eq'`.

### [2021-08-24T08:27:38+00:00](https://github.com/leanprover-community/mathlib/commit/19ae3179bcde1790bd25f294822e3b6b18602754)
feat(measure_theory/interval_integral): strong version of FTC-2 ([#7978](https://github.com/leanprover-community/mathlib/pull/#7978))

The equality `∫ y in a..b, f' y = f b - f a` is currently proved in mathlib assuming that `f'` is continuous. We weaken the assumption, assuming only that `f'` is integrable.

### [2021-08-24T04:00:04+00:00](https://github.com/leanprover-community/mathlib/commit/737b208add4002eb768742958baa9fd9037bce76)
feat(linear_algebra/dimension): generalize dim_map_le to heterogeneous universes ([#8800](https://github.com/leanprover-community/mathlib/pull/#8800))

Per @hrmacbeth's [request on zulip](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Behaviour.20of.20finrank.20under.20morphisms).

### [2021-08-24T02:16:33+00:00](https://github.com/leanprover-community/mathlib/commit/4aa87050d0f0a1dad876ae68ed0ce5d7ff3d1590)
chore(scripts): update nolints.txt ([#8840](https://github.com/leanprover-community/mathlib/pull/#8840))

I am happy to remove some nolints for you!

### [2021-08-23T20:37:30+00:00](https://github.com/leanprover-community/mathlib/commit/26448a262f1f37c6beeb9c4ff07053516eb82292)
feat(analysis/normed_space/exponential): define exponential in a Banach algebra and prove basic results ([#8576](https://github.com/leanprover-community/mathlib/pull/#8576))

### [2021-08-23T17:56:01+00:00](https://github.com/leanprover-community/mathlib/commit/2f4dc3abba04f794da5cbff8125762ff3a018a42)
feat(ring_theory): generalize `exists_integral_multiple` ([#8827](https://github.com/leanprover-community/mathlib/pull/#8827))

Not only is `z * (y : integral_closure R A)` integral, so is `z * (y : R)`!

### [2021-08-23T17:55:59+00:00](https://github.com/leanprover-community/mathlib/commit/700effae76a959145f48ff830462e703542cb5f2)
feat(ring_theory/localization): the algebraic elements over `Frac(R)` are those over `R` ([#8826](https://github.com/leanprover-community/mathlib/pull/#8826))

We had this lemma for `L / K` is algebraic iff `L / A` is, but now we also have it elementwise!

### [2021-08-23T17:55:58+00:00](https://github.com/leanprover-community/mathlib/commit/2a69dc244d8d9efa2e6a223acfb8e1c01cb53b57)
feat(ring_theory): two little lemmas on Noetherianness ([#8825](https://github.com/leanprover-community/mathlib/pull/#8825))

No real deep thoughts behind these lemmas, just that they are needed to show the integral closure of a Dedekind domain is Noetherian.

### [2021-08-23T17:55:57+00:00](https://github.com/leanprover-community/mathlib/commit/8a7e4f745ca6b0c02b93d10487b36a2280f97a26)
feat(measure_theory): volume of a (closed) L∞-ball ([#8791](https://github.com/leanprover-community/mathlib/pull/#8791))

* pi measure of a (closed or open) ball;
* volume of a (closed or open) ball in
  - `Π i, α i`;
  - `ℝ`;
  - `ι → ℝ`;
* volumes of `univ`, `emetric.ball`, and `emetric.closed_ball` in `ℝ`.

### [2021-08-23T17:55:56+00:00](https://github.com/leanprover-community/mathlib/commit/ff85e9c6494b0f2edc69e0d867018ff999616615)
feat(measure_theory/measure/measure_space): obtain pairwise disjoint spanning sets wrt. two measures ([#8750](https://github.com/leanprover-community/mathlib/pull/#8750))

Given two sigma finite measures, there exists a sequence of pairwise disjoint spanning sets that are finite wrt. both measures

### [2021-08-23T17:55:55+00:00](https://github.com/leanprover-community/mathlib/commit/98a6329403bbf57f163169e9ae35e4b5c0579d3e)
refactor(algebra/group_power): use `covariant_class` ([#8713](https://github.com/leanprover-community/mathlib/pull/#8713))

## Main changes

* use `covariant_class` instead of `canonically_ordered_*` or `ordered_add_*` as an assumption in many lemmas;
* move some lemmas to the root namespace;
* use `to_additive` for more lemmas;

## Detailed list of API changes

* `canonically_ordered_comm_semiring.pow_le_pow_of_le_left`:
  - rename to `pow_le_pow_of_le_left'`;
  - assume `[covariant_class M M (*) (≤)]`;
  - use `to_additive` to generate `nsmul_le_nsmul_of_le_right`;
* `canonically_ordered_comm_semiring.one_le_pow_of_one_le`:
  - rename to `one_le_pow_of_one_le`';
  - assume `[covariant_class M M (*) (≤)]`;
  - use `to_additive` to generate `nsmul_nonneg`;
* `canonically_ordered_comm_semiring.pow_le_one`:
  - rename to `pow_le_one'`;
  - assume `[covariant_class M M (*) (≤)]`;
  - use `to_additive` to generate `nsmul_nonpos`;
* add `pow_le_pow'`, generate `nsmul_le_nsmul`;
* add `pow_le_pow_of_le_one'` and `nsmul_le_nsmul_of_nonpos`;
* add `one_lt_pow'`, generate `nsmul_pos`;
  - as a side effect, `nsmul_pos` now assumes `n ≠ 0` instead of `0 < n`.
* add `pow_lt_one'`, generate `nsmul_neg`;
* add `pow_lt_pow'`, generate `nsmul_lt_nsmul`;
* generalize `one_le_pow_iff` and `pow_le_one_iff`, generate `nsmul_nonneg_iff` and `nsmul_nonpos_iff`;
* generalize `one_lt_pow_iff`, `pow_lt_one_iff`, and `pow_eq_one_iff`, generate `nsmul_pos_iff`, `nsmul_neg_iff`, and `nsmul_eq_zero_iff`;
* add `one_le_gpow`, generate `gsmul_nonneg`;
* rename `eq_of_sq_eq_sq` to `sq_eq_sq`, golf;
* drop `eq_one_of_pow_eq_one` in favor of the `iff` version `pow_eq_one_iff`;
* add missing instance `nat.ordered_comm_semiring`;

## Misc changes

* replace some proofs about `nat.pow` with references to generic lemmas;
* add `nnreal.coe_eq_one`;

### [2021-08-23T17:55:54+00:00](https://github.com/leanprover-community/mathlib/commit/b7f03239444590d2aa64951f49df61e149abf3b4)
feat(topology): interior of a finite product of sets ([#8695](https://github.com/leanprover-community/mathlib/pull/#8695))

Also finishes the filter inf work from [#8657](https://github.com/leanprover-community/mathlib/pull/#8657) proving stronger lemmas for
filter.infi



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-08-23T16:45:34+00:00](https://github.com/leanprover-community/mathlib/commit/608faf0ae4c6798b1f27fa32596e0b4fd88dc7f3)
feat(measure_theory/function/conditional_expectation): uniqueness of the conditional expectation ([#8802](https://github.com/leanprover-community/mathlib/pull/#8802))

The main part of the PR is the new file `ae_eq_of_integral`, in which many different lemmas prove variants of the statement "if two functions have same integral on all sets, then they are equal almost everywhere".

In the file `conditional_expectation`, a similar lemma is written for functions which have same integral on all sets in a sub-sigma-algebra and are measurable with respect to that sigma-algebra. This proves the uniqueness of the conditional expectation.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-08-23T16:02:50+00:00](https://github.com/leanprover-community/mathlib/commit/9a7d9a8e9bd819dd5603d25ffecc34495aceb6ff)
feat(group_theory/nilpotent): add def lemmas, basic lemmas on central series ([#8730](https://github.com/leanprover-community/mathlib/pull/#8730))


Add to API for nilpotent groups with simp def lemmas and other basic properties of central series.



Co-authored-by: ineswright <52750254+ineswright@users.noreply.github.com>

### [2021-08-23T14:22:14+00:00](https://github.com/leanprover-community/mathlib/commit/df3e8862bbb982fddaaa3dbf2d425ce655368b06)
feat(group_theory/group_action): generalize mul_action.function_End to other endomorphisms ([#8724](https://github.com/leanprover-community/mathlib/pull/#8724))

The main aim of this PR is to remove [`intermediate_field.subgroup_action`](https://leanprover-community.github.io/mathlib_docs/field_theory/galois.html#intermediate_field.subgroup_action) which is a weird special case of the much more general instance `f • a = f a`, added in this PR as `alg_equiv.apply_mul_semiring_action`. We add the same actions for all the other hom types for consistency.

These generalizations are in line with the `mul_action.function_End` (renamed to `function.End.apply_mul_action`) and `mul_action.perm` (renamed to `equiv.perm.apply_mul_action`) instances introduced by @dwarn, providing any endomorphism that has a monoid structure with a faithful `mul_action` corresponding to function application.
Note that there is no monoid structure on `ring_equiv`, or `alg_hom`, so this PR does not bother with the corresponding action.

### [2021-08-23T12:46:47+00:00](https://github.com/leanprover-community/mathlib/commit/3c490447cc027730cf411e77d3df2a572cad2a4b)
feat(data/list/nodup): nodup.nth_le_inj_iff ([#8813](https://github.com/leanprover-community/mathlib/pull/#8813))

This allows rewriting as an `inj_iff` lemma directly via proj notation.

### [2021-08-23T12:46:47+00:00](https://github.com/leanprover-community/mathlib/commit/f8f551af86030d86f16a4651089bf708cf9ddb42)
feat(data/fintype/basic): choose_subtype_eq ([#8812](https://github.com/leanprover-community/mathlib/pull/#8812))

Choosing out of a finite subtype such that the underlying value is precisely some value of the parent type works as intended.

### [2021-08-23T12:00:47+00:00](https://github.com/leanprover-community/mathlib/commit/a85c9f63bb82e9edb3320368cf5f580e9678e2a9)
chore(field_theory): make `is_separable` an instance parameter ([#8741](https://github.com/leanprover-community/mathlib/pull/#8741))

There were a few places that had an explicit `is_separable` parameter. For simplicity and consistency, let's make them all instance params.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-08-23T10:17:14+00:00](https://github.com/leanprover-community/mathlib/commit/8b9a47b64aae806bb32af017111fcceefd59f694)
feat(data/finset/basic): finset.exists_ne_of_one_lt_card ([#8816](https://github.com/leanprover-community/mathlib/pull/#8816))

Analog of `fintype.exists_ne_of_one_lt_card`.

### [2021-08-23T10:17:13+00:00](https://github.com/leanprover-community/mathlib/commit/a52a9fe38a61797cf2ff70df2e2b1bcb37cb9c52)
chore(data/multiset/basic): move abs_sum_le_sum_abs from algebra/big_operators/basic.lean. ([#8804](https://github.com/leanprover-community/mathlib/pull/#8804))

There doesn't seem to be a reason for the place it has now.

### [2021-08-23T10:17:12+00:00](https://github.com/leanprover-community/mathlib/commit/f98fc005337b617bc4ac6c3826805c1cba7a9691)
docs(logic/relation): add module docstring ([#8773](https://github.com/leanprover-community/mathlib/pull/#8773))

Also fix whitespaces



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-08-23T10:17:11+00:00](https://github.com/leanprover-community/mathlib/commit/c811dd774f9590e9106c0780ea0983c60b659c78)
feat(data/nat/mul_ind): multiplicative induction principles ([#8514](https://github.com/leanprover-community/mathlib/pull/#8514))

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-08-23T09:16:14+00:00](https://github.com/leanprover-community/mathlib/commit/f949172af2e19e6f2bbf4a4b4b36b88729175789)
feat(data/polynomial/basic): polynomial.op_ring_equiv ([#8537](https://github.com/leanprover-community/mathlib/pull/#8537))

### [2021-08-22T20:10:11+00:00](https://github.com/leanprover-community/mathlib/commit/9945a1624fed215f7d254f060d13a74fec6a102b)
refactor(analysis/normed_space/{add_torsor, mazur_ulam}): adjust Mazur-Ulam file to use affine isometries ([#8661](https://github.com/leanprover-community/mathlib/pull/#8661))

### [2021-08-22T19:02:17+00:00](https://github.com/leanprover-community/mathlib/commit/d9113ece73d5f71e1271f4eca48ba8c8344b4ce1)
doc(linear_algebra/trace): fix error in title ([#8803](https://github.com/leanprover-community/mathlib/pull/#8803))

the first two lines of this were super contradictory

### [2021-08-22T16:54:23+00:00](https://github.com/leanprover-community/mathlib/commit/87f14e30d07d497a40d188ad0a949bdaaa09a0df)
feat(topology/basic): interior of a singleton ([#8784](https://github.com/leanprover-community/mathlib/pull/#8784))

* add generic lemmas `interior_singleton`, `closure_compl_singleton`;
* add more lemmas and instances about `ne_bot (𝓝[{x}ᶜ] x)`;
* rename `dense_compl_singleton` to `dense_compl_singleton_iff_not_open`,
  add new `dense_compl_singleton` that assumes `[ne_bot (𝓝[{x}ᶜ] x)]`.

### [2021-08-22T16:54:22+00:00](https://github.com/leanprover-community/mathlib/commit/db9d4a3a09950cc08679f565b889db73cf4ea8ef)
feat(data/finset,order/conditionally_complete_lattice): lemmas about `min'/max'` ([#8782](https://github.com/leanprover-community/mathlib/pull/#8782))

## `data/finset/*`

* add `finset.nonempty.to_set`;
* add lemmas `finset.max'_lt_iff`, `finset.lt_min'_iff`,
  `finset.max'_eq_sup'`, `finset.min'_eq_inf'`;
* rewrite `finset.induction_on_max` without using `finset.card`,
  move one step to `finset.lt_max'_of_mem_erase_max'`;

## `order/conditionally_complete_lattice`

* add lemmas relating `Sup`/`Inf` of a nonempty finite set in a
  conditionally complete lattice to
 `finset.sup'`/`finset.inf'`/`finset.max'`/`finset.min'`;
* a few more lemmas about `Sup`/`Inf` of a nonempty finite set
  in a conditionally complete lattice / linear order;

## `order/filter/at_top_bot`

* golf the proof of `filter.high_scores`.

### [2021-08-22T16:54:21+00:00](https://github.com/leanprover-community/mathlib/commit/ea9cd0298bc6fd6aa104f7033b51a7bba4606b5a)
refactor(geometry/euclidean/basic): adjust Euclidean geometry to use affine isometries for reflections ([#8662](https://github.com/leanprover-community/mathlib/pull/#8662))

### [2021-08-22T15:49:31+00:00](https://github.com/leanprover-community/mathlib/commit/a9c13002b348823f44c6f152930258c4a3ea337c)
refactor(topology/metric_space/basic): rename `closed_ball_Icc` ([#8790](https://github.com/leanprover-community/mathlib/pull/#8790))

* rename `closed_ball_Icc` to `real.closed_ball_eq`;
* add `real.ball_eq`, `int.ball_eq`, `int.closed_ball_eq`,
  `int.preimage_ball`, `int.preimage_closed_ball`.

### [2021-08-22T13:58:19+00:00](https://github.com/leanprover-community/mathlib/commit/373911d5366aec8fd4679576f5a8a2fe5e7d1aa8)
chore(measure_theory): make `μ` an explicit argument in `subsingleton.measure_zero` etc ([#8793](https://github.com/leanprover-community/mathlib/pull/#8793))

### [2021-08-22T03:08:52+00:00](https://github.com/leanprover-community/mathlib/commit/8a96d00c8bc5032b13fd1fbe2d4b35015ba13be5)
chore(scripts): update nolints.txt ([#8798](https://github.com/leanprover-community/mathlib/pull/#8798))

I am happy to remove some nolints for you!

### [2021-08-22T01:10:57+00:00](https://github.com/leanprover-community/mathlib/commit/f915106675b79411fdf6dda70ed524da97a63a6d)
chore(data/set/lattice): a few lemmas, golf ([#8795](https://github.com/leanprover-community/mathlib/pull/#8795))

### [2021-08-21T21:43:39+00:00](https://github.com/leanprover-community/mathlib/commit/d3e20b4a9175fb5e26c0c8a401b4f9cfafb9320c)
chore(data/multiset/basic): consistently use singleton notation ([#8786](https://github.com/leanprover-community/mathlib/pull/#8786))

### [2021-08-21T21:43:38+00:00](https://github.com/leanprover-community/mathlib/commit/252cb0248db0b398418c0ab8bda592fd9336af32)
feat(linear_algebra/vandermonde): `vandermonde v` multiplied by its transpose ([#8776](https://github.com/leanprover-community/mathlib/pull/#8776))

Two not very exciting lemmas about multiplying a Vandermonde matrix by its transpose (one for each side). I don't know if they are really useful, so I could also just inline them in [#8777](https://github.com/leanprover-community/mathlib/pull/#8777).

### [2021-08-21T21:43:37+00:00](https://github.com/leanprover-community/mathlib/commit/5f517714fb79f9766ec65a888df67de21d39f31f)
feat(linear_algebra/bilinear_form): basis changing `bilin_form.to_matrix` ([#8775](https://github.com/leanprover-community/mathlib/pull/#8775))

A few `simp` lemmas on bilinear forms.

### [2021-08-21T21:43:36+00:00](https://github.com/leanprover-community/mathlib/commit/c44f19fe1d8e597bb976e36daa6ac87ab3c3e4a7)
feat(algebra/associated): simple lemmas and dot notation ([#8770](https://github.com/leanprover-community/mathlib/pull/#8770))

Introduce
* `prime.exists_mem_finset_dvd`
* `prime.not_dvd_one`

Rename
* `exists_mem_multiset_dvd_of_prime` -> `prime.exists_mem_multiset_dvd`
* `left_dvd_or_dvd_right_of_dvd_prime_mul ` ->`prime.left_dvd_or_dvd_right_of_dvd_mul`

### [2021-08-21T19:52:15+00:00](https://github.com/leanprover-community/mathlib/commit/57e127a5016e908cd336509e91508055ae096645)
refactor(order/complete_lattice): use `is_empty` ([#8796](https://github.com/leanprover-community/mathlib/pull/#8796))

* change `set.univ_eq_empty_iff` to use `is_empty`;
* rename `set.range_eq_empty` to `set.range_eq_empty_iff`;
* add new `set.range_eq_empty`, it assumes `[is_empty α]`;
* combine `supr_of_empty`, `supr_of_empty'`, and `supr_empty` into `supr_of_empty`, same for `infi`;
* replace `csupr_neg` with `csupr_of_empty` and `csupr_false`;
* adjust some proofs to use `casesI is_empty_of_nonempty α` instead of `by_cases h : nonempty α`.

### [2021-08-21T19:52:14+00:00](https://github.com/leanprover-community/mathlib/commit/8eba262bc957790fe12a56bb0ce649cfaa60593d)
feat(topology/metric_space/basic): union of balls `ball x n`, `n : ℕ` ([#8792](https://github.com/leanprover-community/mathlib/pull/#8792))

### [2021-08-21T19:52:13+00:00](https://github.com/leanprover-community/mathlib/commit/9b60e0f7e3242133f811d1cf49d9d3fb88515219)
feat(data/set/basic): add `pairwise_on_pair` ([#8789](https://github.com/leanprover-community/mathlib/pull/#8789))

Add `set.pairwise_on_insert`, `set.pairwise_on_pair`, and `set.pairwise_on_pair_of_symmetric`.

### [2021-08-21T19:52:12+00:00](https://github.com/leanprover-community/mathlib/commit/44b813882cddfda0729a78368a34190ecc1f24e5)
chore(topology/instances/ennreal): use `tactic.lift` ([#8788](https://github.com/leanprover-community/mathlib/pull/#8788))

* use `tactic.lift` in two proofs;
* use the `order_dual` trick in one proof.

### [2021-08-21T19:52:11+00:00](https://github.com/leanprover-community/mathlib/commit/e00afed4d1ee026deae0f1d7bb13caf843b5e8a4)
feat(topology/metric_space): turn `nonempty_ball` into an `iff` ([#8747](https://github.com/leanprover-community/mathlib/pull/#8747))

* add `set.univ_pi_empty`;
* turn `metric.nonempty_ball` into an `iff`, mark it with `@[simp]`; add `metric.ball_eq_empty`
* do the same thing to `closed_ball`s;
* add primed versions of `metric.ball_pi` and `metric.closed_ball_pi`.

### [2021-08-21T18:46:32+00:00](https://github.com/leanprover-community/mathlib/commit/d31b85f89068ec9fd17a875a18396d57554a5b2f)
feat(data/list/rotate): is_rotated_append ([#8780](https://github.com/leanprover-community/mathlib/pull/#8780))

`list.append` is commutative with respect to `~r`.

### [2021-08-21T18:46:31+00:00](https://github.com/leanprover-community/mathlib/commit/0760b2018dfd2c9d33f7d820f0eafdbb6b30eef3)
feat(topology/metric_space): metrizable spaces ([#8759](https://github.com/leanprover-community/mathlib/pull/#8759))

Define (pseudo)-metric space constructors for metrizable topological spaces.

### [2021-08-21T17:31:49+00:00](https://github.com/leanprover-community/mathlib/commit/bafe207dc23540c2e84bd391777cd2d15ba92920)
chore(linear_algebra): remove `→ₗ` notation where the ring is not specified ([#8778](https://github.com/leanprover-community/mathlib/pull/#8778))

This PR removes the notation `M →ₗ N` for linear maps, where the ring is not specified. This is not used much in the library, and is needed for an upcoming refactor that will generalize linear maps to semilinear maps. See the discussion [here](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Semilinear.20maps).

### [2021-08-21T15:59:17+00:00](https://github.com/leanprover-community/mathlib/commit/897e4ed61211a59a355205f0c002544d5cacad87)
feat(field_theory): finite fields exist ([#8692](https://github.com/leanprover-community/mathlib/pull/#8692))



Co-authored-by: Alex J. Best <alex.j.best@gmail.com>
Co-authored-by: Aaron Anderson <awainverse@gmail.com>
Co-authored-by: Ruben Van de Velde <65514131+Ruben-VandeVelde@users.noreply.github.com>

### [2021-08-21T12:26:51+00:00](https://github.com/leanprover-community/mathlib/commit/f72126b4ec25dc1bfab95c5dcf7f2f37543bf397)
chore(algebra/gcd_monoid): move `algebra.gcd_monoid` to `algebra.gcd_monoid.basic` ([#8772](https://github.com/leanprover-community/mathlib/pull/#8772))

### [2021-08-21T05:42:59+00:00](https://github.com/leanprover-community/mathlib/commit/f36c98e877dd86af12606abbba5275513baa8a26)
chore(*): remove spurious whitespace ([#8769](https://github.com/leanprover-community/mathlib/pull/#8769))

### [2021-08-20T21:38:03+00:00](https://github.com/leanprover-community/mathlib/commit/d869256e099ff9cf60dd1907814183ed822106b8)
refactor(data/nat/lattice): move code, add lemmas ([#8708](https://github.com/leanprover-community/mathlib/pull/#8708))

* move `nat.conditionally_complete_linear_order_with_bot` and `enat.complete_linear_order` to a new file `data.nat.lattice`;
* add a few lemmas (`nat.supr_lt_succ` etc), move `set.bUnion_lt_succ` to the same file;
* use `galois_insertion.lift_complete_lattice` to define `enat.complete_linear_order`.

### [2021-08-20T14:42:08+00:00](https://github.com/leanprover-community/mathlib/commit/45e7eb8447555247246e3fe91c87066506c14875)
feat(dynamics/fixed_points): simple lemmas ([#8768](https://github.com/leanprover-community/mathlib/pull/#8768))

### [2021-08-20T14:42:07+00:00](https://github.com/leanprover-community/mathlib/commit/6ae37476eec2d8e61e8d41d5b5f58a44901968b4)
feat(algebra/big_operators): the product over `{x // x ∈ m}` is the product over `m.to_finset` ([#8742](https://github.com/leanprover-community/mathlib/pull/#8742))

### [2021-08-20T14:42:06+00:00](https://github.com/leanprover-community/mathlib/commit/d62a461408b8e7104c8e477a9f90fd35eeb3ce47)
feat(linear_algebra/determinant): `det (M ⬝ N) = det (N ⬝ M)` if `M` is invertible ([#8720](https://github.com/leanprover-community/mathlib/pull/#8720))

If `M` is a square or invertible matrix, then `det (M ⬝ N) = det (N ⬝ M)`. This is basically just using `mul_comm` on `det M * det N`, except for some tricky rewriting to handle the invertible case.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-08-20T14:42:05+00:00](https://github.com/leanprover-community/mathlib/commit/7ccf46358934619aa210e8a7a9f6c8198de3666a)
feat(algebra): is_smul_regular for `pi`, `finsupp`, `matrix`, `polynomial` ([#8716](https://github.com/leanprover-community/mathlib/pull/#8716))

Also provide same lemma for finsupp, and specialize it for matrices and polynomials

Inspired by 
https://github.com/leanprover-community/mathlib/pull/8681#discussion_r689320217
https://github.com/leanprover-community/mathlib/pull/8679#discussion_r689545373

### [2021-08-20T14:42:03+00:00](https://github.com/leanprover-community/mathlib/commit/aee7bade82106114f4e0e1079932f03aa2fcd1ff)
feat(data/list/rotate): cyclic_permutations ([#8678](https://github.com/leanprover-community/mathlib/pull/#8678))

For `l ~ l'` we have `list.permutations`. We provide the list of cyclic permutations of `l` such that all members are `l ~r l'`. This relationship is proven, as well as the induced `nodup` of the list of cyclic permutants.

This also simplifies the `cycle.list` definition, and removed the requirement for decidable equality in it.

### [2021-08-20T14:42:02+00:00](https://github.com/leanprover-community/mathlib/commit/7e8432d4073244e2f1a85be097626d9e15b9c5ec)
chore(algebra/group_power/lemmas): Lemmas about gsmul ([#8618](https://github.com/leanprover-community/mathlib/pull/#8618))

This restates some existing lemmas as `monotone` and `strict_monotone`, and provides new lemmas about the right argument of gsmul:

* `gsmul_le_gsmul'`
* `gsmul_lt_gsmul'`
* `gsmul_le_gsmul_iff'`
* `gsmul_lt_gsmul_iff'`

This also removes an unnecessary `linear_order` assumption from `gsmul_le_gsmul_iff` and `gsmul_lt_gsmul_iff`.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-08-20T14:42:00+00:00](https://github.com/leanprover-community/mathlib/commit/7265a4eef286dfa5d4d2b247c2380180442f7328)
feat(linear_algebra/dimension): generalize inequalities and invariance of dimension to arbitrary rings ([#8343](https://github.com/leanprover-community/mathlib/pull/#8343))

We implement some of the results of [_Les familles libres maximales d'un module ont-elles le meme cardinal?_](http://www.numdam.org/article/PSMIR_1973___4_A4_0.pdf).

We also generalize many theorems which were previously proved only for vector spaces, but are true for modules over arbitrary rings or rings satisfying the (strong) rank condition or have invariant basis number. (These typically need entire new proofs, as the original proofs e.g. used rank-nullity.)

The main new results are:
* `basis_fintype_of_finite_spans`: 
  Over any nontrivial ring, the existence of a finite spanning set implies that any basis is finite.
* `union_support_maximal_linear_independent_eq_range_basis`: 
  Over any ring `R`, if `b` is a basis for a module `M`,
  and `s` is a maximal linearly independent set,
  then the union of the supports of `x ∈ s` (when written out in the basis `b`) is all of `b`.
* `infinite_basis_le_maximal_linear_independent`:
  Over any ring `R`, if `b` is an infinite basis for a module `M`,
  and `s` is a maximal linearly independent set,
  then the cardinality of `b` is bounded by the cardinality of `s`.
* `mk_eq_mk_of_basis`:
  We generalize the invariance of dimension theorem to any ring with the invariant basis number property.
* `basis.le_span`:
  We generalize this statement (the size of a basis is bounded by the size of any spanning set)
  to any ring satisfying the rank condition.
* `linear_independent_le_span`:
  If `R` satisfies the strong rank condition,
  then for any linearly independent family `v : ι → M`
  and any finite spanning set `w : set M`,
  the cardinality of `ι` is bounded by the cardinality of `w`.
* `linear_independent_le_basis`:
  Over any ring `R` satisfying the strong rank condition,
  if `b` is a basis for a module `M`,
  and `s` is a linearly independent set,
  then the cardinality of `s` is bounded by the cardinality of `b`.
  
There is a naming discrepancy: most of the theorem names refer to `dim`,
even though the definition is of `module.rank`.
This reflects that `module.rank` was originally called `dim`, and only defined for vector spaces.

I would prefer to address this in a separate PR (note this discrepancy wasn't introduced in this PR).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-08-20T14:41:58+00:00](https://github.com/leanprover-community/mathlib/commit/15b1461951d8821c1354dcf01a89ce09e798965b)
feat(archive/imo): IMO 2006 Q3 ([#8052](https://github.com/leanprover-community/mathlib/pull/#8052))

Formalization of IMO 2006/3

### [2021-08-19T16:19:58+00:00](https://github.com/leanprover-community/mathlib/commit/5dc8bc169bd8773735520e6b9680ce3b65b80bd7)
feat(linear_algebra/clifford_algebra/equivs): the equivalences preserve conjugation ([#8739](https://github.com/leanprover-community/mathlib/pull/#8739))

### [2021-08-19T14:31:16+00:00](https://github.com/leanprover-community/mathlib/commit/dd5e779e725361a799f1421689a2e05b7eba9657)
fix(linear_algebra/basic): fix incorrect namespaces ([#8757](https://github.com/leanprover-community/mathlib/pull/#8757))

Previously there were names in the `linear_map` namespace which were about `linear_equiv`s.

This moves:
* `linear_map.fun_congr_left` to `linear_equiv.fun_congr_left`
* `linear_map.automorphism_group` to `linear_equiv.automorphism_group`
* `linear_map.automorphism_group.to_linear_map_monoid_hom` to `linear_equiv.automorphism_group.to_linear_map_monoid_hom`

### [2021-08-19T14:31:14+00:00](https://github.com/leanprover-community/mathlib/commit/d17208567eba48192e7b1353dcee0e7f2669c570)
docs(overview): add weak-* topology ([#8755](https://github.com/leanprover-community/mathlib/pull/#8755))

### [2021-08-19T14:31:13+00:00](https://github.com/leanprover-community/mathlib/commit/86fccaab2bfb821449b2edc90c60411cde713cde)
feat(measure_theory/strongly_measurable): define strongly measurable functions ([#8623](https://github.com/leanprover-community/mathlib/pull/#8623))

A function `f` is said to be strongly measurable with respect to a measure `μ` if `f` is the sequential limit of simple functions whose support has finite measure.

Functions in `Lp` for `0 < p < ∞` are strongly measurable. If the measure is sigma-finite, measurable and strongly measurable are equivalent.

The main property of strongly measurable functions is `strongly_measurable.exists_set_sigma_finite`: there exists a measurable set `t` such that `f` is supported on `t` and `μ.restrict t` is sigma-finite. As a consequence, we can prove some results for those functions as if the measure was sigma-finite.

I will use this to prove properties of the form `f =ᵐ[μ] g` for `Lp` functions.



Co-authored-by: RemyDegenne <remydegenne@gmail.com>

### [2021-08-19T12:44:51+00:00](https://github.com/leanprover-community/mathlib/commit/802859f2564d80cd225cb549f354942e93394be8)
chore(algebra/big_operators): weaken assumption for multiset.exists_smul_of_dvd_count ([#8758](https://github.com/leanprover-community/mathlib/pull/#8758))

This is slightly more convenient than doing a case split on `a ∈ s` in the caller.

### [2021-08-19T12:44:50+00:00](https://github.com/leanprover-community/mathlib/commit/1efa3673a197b293350b9406a01bd9d17a05123a)
feat(group_action/defs): add missing comp_hom smul instances ([#8707](https://github.com/leanprover-community/mathlib/pull/#8707))

This adds missing `smul_comm_class` and `is_scalar_tower` instances about the `comp_hom` definitions.

To resolve unification issues in finding these instances caused by the reducibility of the `comp_hom` defs, this introduces a semireducible def `has_scalar.comp.smul`.

### [2021-08-19T12:44:49+00:00](https://github.com/leanprover-community/mathlib/commit/4113db58a4ee39786f7fbb24c789e09f34bfe014)
feat(ring_theory): the trace of an integral element is integral ([#8702](https://github.com/leanprover-community/mathlib/pull/#8702))

This PR uses `trace_gen_eq_sum_roots` and `trace_trace` to show the trace of an integral element `x : L` over `K` is a multiple of the sum of all conjugates of `x`, and concludes that the trace of `x` is integral.

### [2021-08-19T11:02:14+00:00](https://github.com/leanprover-community/mathlib/commit/159e34ee48089f2092a9bdbdb1905d04976b05fe)
Revert "feat(field_theory/intermediate_field): generalize `algebra` instances"

OOPS!

This reverts commit 4b525bf25aa33201bd26942a938b84b2df71f175.

### [2021-08-19T11:01:55+00:00](https://github.com/leanprover-community/mathlib/commit/4b525bf25aa33201bd26942a938b84b2df71f175)
feat(field_theory/intermediate_field): generalize `algebra` instances

The `algebra` and `is_scalar_tower` instances for `intermediate_field` are (again) as general as those for `subalgebra`.

### [2021-08-19T09:57:42+00:00](https://github.com/leanprover-community/mathlib/commit/902d3ac935620e997d8e8f3eb897a9b04b9a24c3)
chore(tactic/rewrite_search): reuse rw_rules_p parser ([#8752](https://github.com/leanprover-community/mathlib/pull/#8752))

The parser defined here is the same as `rw_rules_p`, so use it.

### [2021-08-19T08:28:44+00:00](https://github.com/leanprover-community/mathlib/commit/28a360a69cec218e8730049090b2320ce8a097e9)
feat(analysis/calculus/deriv): prove `deriv_inv` at `x = 0` as well ([#8748](https://github.com/leanprover-community/mathlib/pull/#8748))

* turn `differentiable_at_inv` and `differentiable_at_fpow` into `iff` lemmas;
* slightly weaker assumptions for `differentiable_within_at_fpow` etc;
* prove `deriv_inv` and `fderiv_inv` for all `x`;
* prove formulas for iterated derivs of `x⁻¹` and `x ^ m`, `m : int`;
* push `coe` in these formulas;

### [2021-08-19T06:51:43+00:00](https://github.com/leanprover-community/mathlib/commit/1c60e618db32a172c88487f57a7ac642ed3109a5)
feat(topology/metric_space/basic): `emetric.ball x ∞ = univ` ([#8745](https://github.com/leanprover-community/mathlib/pull/#8745))

* add `@[simp]` to `metric.emetric_ball`,
  `metric.emetric_ball_nnreal`, and
  `metric.emetric_closed_ball_nnreal`;
* add `@[simp]` lemmas `metric.emetric_ball_top` and
  `emetric.closed_ball_top`.

### [2021-08-19T03:46:27+00:00](https://github.com/leanprover-community/mathlib/commit/0e0a24048960b0b19144e33d6a98a71b10997ab4)
chore(scripts): update nolints.txt ([#8754](https://github.com/leanprover-community/mathlib/pull/#8754))

I am happy to remove some nolints for you!

### [2021-08-19T01:51:34+00:00](https://github.com/leanprover-community/mathlib/commit/ee3f8b8db498e26767e13bcc48493b706516921e)
chore(order/complete_lattice): golf some proofs ([#8746](https://github.com/leanprover-community/mathlib/pull/#8746))

### [2021-08-18T23:53:44+00:00](https://github.com/leanprover-community/mathlib/commit/84554339b237a969f0874e9481cc908eab04454d)
doc(tactic/simps): typo ([#8751](https://github.com/leanprover-community/mathlib/pull/#8751))

Missed this review comment in [#8729](https://github.com/leanprover-community/mathlib/pull/#8729)

### [2021-08-18T23:53:43+00:00](https://github.com/leanprover-community/mathlib/commit/6fe5b5529878908b8e810083bd5f1dd64af6a9f1)
feat(algebra/algebra): `alg_{hom,equiv}.restrict_scalars` is injective ([#8743](https://github.com/leanprover-community/mathlib/pull/#8743))




Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-08-18T21:30:49+00:00](https://github.com/leanprover-community/mathlib/commit/e0bf9a167917a5cecfa08efc9d215371e9df69bd)
doc({topology.algebra.weak_dual_topology, analysis.normed_space.weak_dual}): fix docstrings ([#8710](https://github.com/leanprover-community/mathlib/pull/#8710))

Fixing docstrings from the recently merged PR [#8598](https://github.com/leanprover-community/mathlib/pull/#8598) on weak-* topology.

### [2021-08-18T21:30:47+00:00](https://github.com/leanprover-community/mathlib/commit/23cf025cc5f4dd6996e20d1516d9465e7fb298d7)
feat(algebra/ordered_sub): define truncated subtraction in general ([#8503](https://github.com/leanprover-community/mathlib/pull/#8503))

* Define and prove properties of truncated subtraction in general
* We currently only instantiate it for `nat`. The other types (`multiset`, `finsupp`, `nnreal`, `ennreal`, ...) will be in future PRs.

Todo in future PRs:
* Provide `has_ordered_sub` instances for all specific cases
* Remove the lemmas specific to each individual type



Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-08-18T18:52:52+00:00](https://github.com/leanprover-community/mathlib/commit/0860c41552f6a1d776e4503d9727166b681b0a63)
feat(data/nat/pairing): add some `nat.pair` lemmas ([#8740](https://github.com/leanprover-community/mathlib/pull/#8740))

### [2021-08-18T18:52:51+00:00](https://github.com/leanprover-community/mathlib/commit/e6fda2acf7be3cd7f3541b74eba58a1b751ebb1b)
fix(transform_decl): fix namespace bug ([#8733](https://github.com/leanprover-community/mathlib/pull/#8733))

* The problem was that when writing `@[to_additive] def foo ...` every declaration used in `foo` in namespace `foo` would be additivized without changing the last part of the name. This behavior was intended to translate automatically generated declarations like `foo._proof_1`. However, if `foo` contains a non-internal declaration `foo.bar` and `add_foo.bar` didn't exist yet, it would also create a declaration `add_foo.bar` additivizing `foo.bar`.
* This PR changes the behavior: if `foo.bar` has the `@[to_additive]` attribute (potentially with a custom additive name), then we won't create a second additive version of `foo.bar`, and succeed normally. However, if `foo.bar` doesn't have the `@[to_additive]` attribute, then we fail with a nice error message. We could potentially support this behavior, but it doesn't seem that worthwhile and it would require changing a couple low-level definitions that `@[to_additive]` uses (e.g. by replacing `name.map_prefix` so that it only maps prefixes if the name is `internal`).
* So far this didn't happen in the library yet. There are currently 5 non-internal declarations `foo.bar` that are used in `foo` where `foo` has the `@[to_additive]` attribute, but all of these declarations were already had an additive version `add_foo.bar`.
* These 5 declarations are `[Mon.has_limits.limit_cone, Mon.has_limits.limit_cone_is_limit, con_gen.rel, magma.free_semigroup.r, localization.r]`
* This fixes the error in [#8707](https://github.com/leanprover-community/mathlib/pull/#8707) and resolves the Zulip thread https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.238707.20linter.20weirdness
* I also added some documentation / comments to the function `transform_decl_with_prefix_fun_aux`, made it non-private, and rewrote some steps.

### [2021-08-18T18:52:50+00:00](https://github.com/leanprover-community/mathlib/commit/9a249eefa3bfc7ab55d05f65adc6d29cafe9f999)
doc(tactic/simps): expand ([#8729](https://github.com/leanprover-community/mathlib/pull/#8729))

* Better document custom projections that are composites of multiple projections
* Give examples of `initialize_simps_projections`
* Add `initialize_simps_projections` entry to commands.

### [2021-08-18T18:52:49+00:00](https://github.com/leanprover-community/mathlib/commit/6a83c7da969aa2a99d73184d15b6942d13f06d6e)
feat(topology/compact_open): the family of constant maps collectively form a continuous map ([#8721](https://github.com/leanprover-community/mathlib/pull/#8721))

### [2021-08-18T18:52:48+00:00](https://github.com/leanprover-community/mathlib/commit/3ac609b9fa783b6a263c80e983ec8d411aac86d2)
chore(topology/continuous_function/compact): relax typeclass assumptions for metric space structure on C(X, Y) ([#8717](https://github.com/leanprover-community/mathlib/pull/#8717))

### [2021-08-18T18:52:47+00:00](https://github.com/leanprover-community/mathlib/commit/0d59511abf1d8515c69f426e2397062e54cce3ed)
feat(topology/{continuous_function/bounded, metric_space/algebra}): new mixin classes ([#8580](https://github.com/leanprover-community/mathlib/pull/#8580))

This PR defines mixin classes `has_lipschitz_add` and `has_bounded_smul` which are designed to abstract algebraic properties of metric spaces shared by normed groups/fields/modules and by `ℝ≥0`.

This permits the bounded continuous functions `α →ᵇ ℝ≥0` to be naturally a topological (ℝ≥0)-module, by a generalization of the proof previously written for normed groups/fields/modules.

Frankly, these typeclasses are a bit ad hoc -- but it all seems to work!

### [2021-08-18T18:52:46+00:00](https://github.com/leanprover-community/mathlib/commit/26590e97adf86f75a17393a6e7f6a7ce0bcee0cb)
feat(data/list/min_max): maximum is a fold, bounded prod ([#8543](https://github.com/leanprover-community/mathlib/pull/#8543))

Also provide the same lemmas for multiset.

### [2021-08-18T18:52:45+00:00](https://github.com/leanprover-community/mathlib/commit/4e7e7df8a897a64d37570840ba668adc343f42e8)
feat(algebra/monoid_algebra): add_monoid_algebra.op_{add,ring}_equiv ([#8536](https://github.com/leanprover-community/mathlib/pull/#8536))

Transport an opposite `add_monoid_algebra` to the algebra over the opposite ring.

On the way, 
- provide API lemma `mul_equiv.inv_fun_eq_symm {f : M ≃* N} : f.inv_fun = f.symm` and the additive version
- generalize simp lemmas `equiv_to_opposite_(symm_)apply` to `equiv_to_opposite_(symm_)coe`
- tag `map_range.(add_)equiv_symm` with `[simp]

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-08-18T18:52:43+00:00](https://github.com/leanprover-community/mathlib/commit/15444e1f08bdc4f1a9d12e29f5f2a207081e5740)
feat(model_theory/basic): more substructure API, including subtype, map, and comap ([#7937](https://github.com/leanprover-community/mathlib/pull/#7937))

Defines `first_order.language.embedding.of_injective`, which bundles an injective hom in an algebraic language as an embedding
Defines the induced `L.Structure` on an `L.substructure`
Defines the embedding `S.subtype` from `S : L.substructure M` into `M`
Defines `substructure.map` and `substructure.comap` and associated API including Galois insertions

### [2021-08-18T16:14:18+00:00](https://github.com/leanprover-community/mathlib/commit/a47d49db0cc64c83f5157985f45372009b2771cc)
chore(set/function): remove reducible on eq_on ([#8738](https://github.com/leanprover-community/mathlib/pull/#8738))

This backs out [#8736](https://github.com/leanprover-community/mathlib/pull/#8736), and instead removes the unnecessary `@[reducible]`. 

This leaves the `simp` lemma available if anyone wants it (although it is not currently used in mathlib3), but should still resolve the problem that @dselsam's experimental `simp` in the binport of mathlib3 was excessively enthusiastic about using this lemma.

### [2021-08-18T16:14:17+00:00](https://github.com/leanprover-community/mathlib/commit/02b90ab420b5ec2ec9ada2fc5357fa4644292c7b)
doc(tactic/monotonicity): bad ac_mono syntax doc ([#8734](https://github.com/leanprover-community/mathlib/pull/#8734))

The syntax `ac_mono h` was at some point changed to `ac_mono := h` but the documentation did not reflect the change.

### [2021-08-18T12:08:53+00:00](https://github.com/leanprover-community/mathlib/commit/83c782172b368b26d777e528a25cc6f7b356bcb8)
fix(algebra/algebra/restrict_scalars): Remove a bad instance ([#8732](https://github.com/leanprover-community/mathlib/pull/#8732))

This instance forms a non-defeq diamond with the following one
```lean
instance submodule.restricted_module' [module R M] [is_scalar_tower R S M] (V : submodule S M) :
  module R V :=
by apply_instance
```

The `submodule.restricted_module_is_scalar_tower` instance is harmless, but it can't exist without the first one so we remove it too.

Based on the CI result, this instance wasn't used anyway.

### [2021-08-18T12:08:52+00:00](https://github.com/leanprover-community/mathlib/commit/c0f16d2672416e92f1b9d99515a61b676dca94b7)
feat(analysis/normed_space/affine_isometry): new file, bundled affine isometries ([#8660](https://github.com/leanprover-community/mathlib/pull/#8660))

This PR defines bundled affine isometries and affine isometry equivs, adapting the theory more or less wholesale from the linear isometry and affine map theories.

In follow-up PRs I re-work the Mazur-Ulam and Euclidean geometry libraries to use these objects where appropriate.

### [2021-08-18T12:08:51+00:00](https://github.com/leanprover-community/mathlib/commit/d1b34f7b2ef805e2f0d35d196294bb2a8c6a7285)
feat(ring_theory): define the ideal class group ([#8626](https://github.com/leanprover-community/mathlib/pull/#8626))

This PR defines the ideal class group of an integral domain, as the quotient of the invertible fractional ideals by the principal fractional ideals. It also shows that this corresponds to the more traditional definition in a Dedekind domain, namely the quotient of the nonzero ideals by `I ~ J ↔ ∃ xy, xI = yJ`.

Co-Authored-By: Ashvni ashvni.n@gmail.com
Co-Authored-By: Filippo A. E. Nuccio filippo.nuccio@univ-st-etienne.fr



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-08-18T10:32:47+00:00](https://github.com/leanprover-community/mathlib/commit/a0aee51a59a5f03a420cd119c0f96eb7432e562e)
chore({group,ring}_theory/sub{group,monoid,ring,semiring}): Add missing scalar action typeclasses ([#8731](https://github.com/leanprover-community/mathlib/pull/#8731))

This adds `has_faithful_scalar` and `mul_semiring_action` instances for simple subtypes. 
Neither typeclass associates any new actions with these types; they just provide additionally properties of the existing actions.

### [2021-08-18T10:32:46+00:00](https://github.com/leanprover-community/mathlib/commit/6bd6c11b17565b540c251d2b6a54a0f3a2442056)
refactor(field_theory,ring_theory): generalize adjoin_root.equiv to `power_basis` ([#8726](https://github.com/leanprover-community/mathlib/pull/#8726))

We had two proofs that `A`-preserving maps from `A[x]` or `A(x)` to `B` are in bijection with the set of conjugate roots to `x` in `B`, so by stating the result for `power_basis` we can avoid reproving it twice, and get some generalizations (to a `comm_ring` instead of an `integral_domain`) for free.

There's probably a bit more to generalize in `adjoin_root` or `intermediate_field.adjoin`, which I will do in follow-up PRs.

### [2021-08-18T10:32:45+00:00](https://github.com/leanprover-community/mathlib/commit/3de385a284fdabf52cde2fc26543ce8723c56840)
feat(ring_theory/dedekind_domain): prime elements of `ideal A` are the prime ideals ([#8718](https://github.com/leanprover-community/mathlib/pull/#8718))

This shows that Dedekind domains have unique factorization into prime *ideals*, not just prime *elements* of the monoid `ideal A`.

After some thinking, I believe Dedekind domains are the most common setting in which this equality hold. If anyone has a reference showing how to generalize this, that would be much appreciated.

### [2021-08-18T10:32:44+00:00](https://github.com/leanprover-community/mathlib/commit/f1b6c8fdacf185bd1d4d06e3e857b94f6d30ba96)
feat(data/matrix/kronecker): add two lemmas ([#8700](https://github.com/leanprover-community/mathlib/pull/#8700))

Added two lemmas `kronecker_map_assoc` and `kronecker_assoc` showing associativity of the Kronecker product



Co-authored-by: Filippo A. E. Nuccio <65080144+faenuccio@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-08-18T08:28:19+00:00](https://github.com/leanprover-community/mathlib/commit/5335c67159ea784ed517545082482ef188282822)
refactor(topology/algebra/ring): `topological_ring` extends `topological_add_group` ([#8709](https://github.com/leanprover-community/mathlib/pull/#8709))

### [2021-08-18T08:28:18+00:00](https://github.com/leanprover-community/mathlib/commit/115161199d47324d1fb201ea108c725b6300f84e)
feat(algebra/pointwise): instances in locale pointwise ([#8689](https://github.com/leanprover-community/mathlib/pull/#8689))

@rwbarton and @bryangingechen mentioned in https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F that we should put pointwise instances on sets in a locale.
This PR does that. You now have to write `open_locale pointwise` to get algebraic operations on sets and finsets.



Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-08-18T08:28:17+00:00](https://github.com/leanprover-community/mathlib/commit/efa34dc6c3ad858016f682f847d176668f9f9d70)
feat(data/list/perm): nodup_permutations ([#8616](https://github.com/leanprover-community/mathlib/pull/#8616))

A simpler version of [#8494](https://github.com/leanprover-community/mathlib/pull/#8494)

TODO: `nodup s.permutations ↔ nodup s`
TODO: `count s s.permutations = (zip_with count s s.tails).prod`



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-08-18T07:53:20+00:00](https://github.com/leanprover-community/mathlib/commit/41f7b5ba3d89c618f82a0b697fb753c865ff5956)
feat(linear_algebra/clifford_algebra/equivs): there is a clifford algebra isomorphic to every quaternion algebra ([#8670](https://github.com/leanprover-community/mathlib/pull/#8670))

The proofs are not particularly fast here unfortunately.

### [2021-08-18T05:11:57+00:00](https://github.com/leanprover-community/mathlib/commit/40b7dc75e394b1aefd4355025e4e7550ddeb9f73)
chore(data/set/function): remove useless @[simp] ([#8736](https://github.com/leanprover-community/mathlib/pull/#8736))

This lemma
```
lemma eq_on_empty (f₁ f₂ : α → β) : eq_on f₁ f₂ ∅ := λ x, false.elim
```
is currently marked `@[simp]`, but can never fire, because after noting `eq_on` is `@[reducible]`, the pattern we would be replacing looks like `?f ?x`, which Lean3's simp doesn't like.

On the other hand, @dselsam's experiments with discrimination trees in simp in the binport of mathlib are spending most of their time on this lemma!

Let's get rid of it.

### [2021-08-18T03:17:06+00:00](https://github.com/leanprover-community/mathlib/commit/cb3d5db3bd6c3bafbce6ab09ec35604a4114b70a)
feat(algebra/ordered_monoid): generalize {min,max}_mul_mul_{left,right} ([#8725](https://github.com/leanprover-community/mathlib/pull/#8725))

Before, it has assumptions about `cancel_comm_monoid` for all the lemmas.
In fact, they hold under much weaker `has_mul`.

### [2021-08-18T02:21:49+00:00](https://github.com/leanprover-community/mathlib/commit/e23e6ebd2baa2b44b10cd330d63e720ab74e5665)
chore(scripts): update nolints.txt ([#8735](https://github.com/leanprover-community/mathlib/pull/#8735))

I am happy to remove some nolints for you!

### [2021-08-18T00:41:07+00:00](https://github.com/leanprover-community/mathlib/commit/ce965a55b2a70fd8ec5e8ef4ac97e421d2f873c1)
feat(measure_theory/decomposition/lebesgue): the Lebesgue decomposition theorem ([#8687](https://github.com/leanprover-community/mathlib/pull/#8687))

This PR proves the existence and uniqueness of the Lebesgue decompositions theorem which is the last step before proving the Radon-Nikodym theorem 🎉

### [2021-08-17T22:18:00+00:00](https://github.com/leanprover-community/mathlib/commit/67501f68a87be03970c50e29ee04b25de3564442)
feat(algebra): generalize `ring_hom.map_dvd` ([#8722](https://github.com/leanprover-community/mathlib/pull/#8722))

Now it is available for `mul_hom` and `monoid_hom`, and in a `monoid` (or `semiring` in the `ring_hom` case), not just `comm_semiring`

### [2021-08-17T21:07:52+00:00](https://github.com/leanprover-community/mathlib/commit/e6e5718a33996b1125682fb97aff645822276af3)
chore(lie/semisimple): tweak `lie_algebra.subsingleton_of_semisimple_lie_abelian` ([#8728](https://github.com/leanprover-community/mathlib/pull/#8728))

### [2021-08-17T21:07:51+00:00](https://github.com/leanprover-community/mathlib/commit/31d55491ae4a9a3dcd81856a9ec789eeb5ca2b33)
docs(overview): nilpotent and presented groups ([#8711](https://github.com/leanprover-community/mathlib/pull/#8711))

### [2021-08-17T18:30:13+00:00](https://github.com/leanprover-community/mathlib/commit/5b5b432e8f2ea27a14ae6d207f3aebcf3ac9c305)
fix(tactic/tfae): remove unused arg in tfae_have ([#8727](https://github.com/leanprover-community/mathlib/pull/#8727))

Since this "discharger" argument is not using the interactive tactic parser, you can only give names of tactics here, and in any case it's unused by the body, so there is no point in specifying the discharger in the first place.

### [2021-08-17T18:30:12+00:00](https://github.com/leanprover-community/mathlib/commit/e0656d12b89ee94cf1db56b22b4c08e7d875544a)
chore(algebra/module/basic): golf a proof ([#8723](https://github.com/leanprover-community/mathlib/pull/#8723))

### [2021-08-17T18:30:11+00:00](https://github.com/leanprover-community/mathlib/commit/579ec7d3b69b56a1f2522a7b8addc71f733dd130)
feat(ring_theory/power_basis): `pb.minpoly_gen = minpoly pb.gen` ([#8719](https://github.com/leanprover-community/mathlib/pull/#8719))

It actually kind of surprised me that this lemma was never added!

### [2021-08-17T18:30:10+00:00](https://github.com/leanprover-community/mathlib/commit/fefdcf52b878f9eaba730e1d6b5ac861974a0b78)
feat(tactic/lint): add universe linter ([#8685](https://github.com/leanprover-community/mathlib/pull/#8685))

* The linter checks that there are no bad `max u v` occurrences in declarations (bad means that neither `u` nor `v` occur by themselves). See documentation for more details.
* `meta/expr` now imports `meta/rb_map` (but this doesn't give any new transitive imports, so it barely matters). I also removed a transitive import from `meta/rb_map`.



Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-08-17T18:30:09+00:00](https://github.com/leanprover-community/mathlib/commit/3453f7a86832936515438d4ef6cb3973b2e4ca37)
docs(order/filter/partial): add module docstring ([#8620](https://github.com/leanprover-community/mathlib/pull/#8620))

Fix up some names:
* `core_preimage_gc ` -> `image_core_gc`
* `rtendsto_iff_le_comap` -> `rtendsto_iff_le_rcomap`

Add whitespaces around tokens



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2021-08-17T18:30:08+00:00](https://github.com/leanprover-community/mathlib/commit/90fc0641263b77389c0d69ead46b576592e2cc88)
chore(algebra/associated): use more dot notation ([#8556](https://github.com/leanprover-community/mathlib/pull/#8556))

I was getting annoyed that working with definitions such as `irreducible`, `prime` and `associated`, I had to write quite verbose terms like `dvd_symm_of_irreducible (irreducible_of_prime (prime_of_factor _ hp)) (irreducible_of_prime (prime_of_factor _ hq)) hdvd`, where a lot of redundancy can be eliminated with dot notation: `(prime_of_factor _ hp).irreducible.dvd_symm (prime_of_factor _ hq).irreducible hdvd`. This PR changes the spelling of many of the lemmas in `algebra/associated.lean` to make usage of dot notation easier. It also adds a few shortcut lemmas that address common patterns.

Since this change touches a lot of files, I'll add a RFC label / [open a thread on Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556) to see what everyone thinks.

Renamings:
 * `irreducible_of_prime` → `prime.irreducible`
 * `dvd_symm_of_irreducible` → `irreducible.dvd_symm`
 * `dvd_symm_iff_of_irreducible` → `irreducible.dvd_comm` (cf. `eq.symm` versus `eq_comm`)
 * `associated_mul_mul` → `associated.mul_mul`
 * `associated_pow_pow` → `associated.pow_pow`
 * `dvd_of_associated` → `associated.dvd`
 * `dvd_dvd_of_associated` → `associated.dvd_dvd`
 * `dvd_iff_dvd_of_rel_{left,right}` → `associated.dvd_iff_dvd_{left,right}`
 * `{eq,ne}_zero_iff_of_associated` → `associated.{eq,ne}_zero_iff`
 * `{irreducible,prime}_of_associated` → `associated.{irreducible,prime}`
 * `{irreducible,is_unit,prime}_iff_of_associated` → `associated.{irreducible,is_unit,prime}_iff`
  * `associated_of_{irreducible,prime}_of_dvd` → `{irreducible,prime}.associated_of_dvd`
 * `gcd_eq_of_associated_{left,right}` → `associated.gcd_eq_{left,right}`
 * `{irreducible,prime}_of_degree_eq_one_of_monic` → `monic.{irreducible,prime}_of_degree_eq_one`
  * `gcd_monoid.prime_of_irreducible` → `irreducible.prime` (since the GCD case is probably the only case we care about for this implication. And we could generalize to Schreier domains if not)

Additions:
 * `associated.is_unit := (associated.is_unit_iff _).mp` (to match `associated.prime` and `associated.irreducible`)
 * `associated.mul_left := associated.mul_mul (associated.refl _) _`
 * `associated.mul_right := associated.mul_mul _  (associated.refl _)`

Other changes:
 * `associated_normalize`, `normalize_associated`, `associates.mk_normalize`, `normalize_apply`, `prime_X_sub_C`: make their final parameter explicit, since it is only inferrable when trying to apply these lemmas. This change helped to golf a few proofs from tactic mode to term mode.
 * slight golfing and style fixes



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>
Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2021-08-17T16:30:01+00:00](https://github.com/leanprover-community/mathlib/commit/508b13ee45e81dfd6299b82fc960de00ad7e5dee)
chore(*): flip various `subsingleton_iff`, `nontrivial_iff` lemmas and add `simp` ([#8703](https://github.com/leanprover-community/mathlib/pull/#8703))

### [2021-08-17T13:05:54+00:00](https://github.com/leanprover-community/mathlib/commit/450c2d08171c1b811a2940267c43ffb26b5608c1)
refactor(algebra/algebra/basic): move restrict_scalars into more appropriate files ([#8712](https://github.com/leanprover-community/mathlib/pull/#8712))

This puts:
* `submodule.restrict_scalars` in `submodule.lean` since the proofs are all available there, and this is consistent with how `linear_map.restrict_scalars` is placed.
  This is almost a copy-paste, but all the `R` and `S` variables are swapped to match the existing convention in that file.
* The type alias `restrict_scalars` is now in its own file.
  The docstring at the top of the file is entirely new, but the rest is a direct copy and paste.

The motivation is primarily to reduce the size of `algebra/algebra/basic` a little.

### [2021-08-17T12:21:22+00:00](https://github.com/leanprover-community/mathlib/commit/0c145d82fc407e3ce9ad92884d8ec1422b1cb3cd)
feat(measure_theory/measure/measure_space): add formula for `(map f μ).to_outer_measure` ([#8714](https://github.com/leanprover-community/mathlib/pull/#8714))

### [2021-08-17T10:49:29+00:00](https://github.com/leanprover-community/mathlib/commit/4df3fb9e4ce955c3248f0c904f5275b24840bb1c)
chore(topology/maps): add tendsto_nhds_iff lemmas ([#8693](https://github.com/leanprover-community/mathlib/pull/#8693))

This adds lemmas of the form `something.tendsto_nhds_iff` to ease use.

I also had to get lemmas out of a section because `α` was duplicated and that caused typechecking problems.

### [2021-08-17T09:42:21+00:00](https://github.com/leanprover-community/mathlib/commit/edb0ba4299d63066f234a3b90d9b0bf3a41bf130)
chore(measure_theory/measure/hausdorff): golf ([#8706](https://github.com/leanprover-community/mathlib/pull/#8706))

* add a `mk_metric` version of `hausdorff_measure_le`, add `finset.sum` versions for both `mk_metric` and `hausdorff_measure`;
* slightly golf the proof.

### [2021-08-17T08:38:06+00:00](https://github.com/leanprover-community/mathlib/commit/0591c276d560de91873adabc939a656bf9d0b827)
feat(ring_theory/fractional_ideal): lemmas on `span_singleton _ x * I` ([#8624](https://github.com/leanprover-community/mathlib/pull/#8624))

Useful in proving the basic properties of the ideal class group. See also [#8622](https://github.com/leanprover-community/mathlib/pull/#8622) which proves similar things for integral ideals.

### [2021-08-17T01:58:23+00:00](https://github.com/leanprover-community/mathlib/commit/b6f1214fb14d3d6533378753b6dca75cda1c5a3a)
chore(scripts): update nolints.txt ([#8715](https://github.com/leanprover-community/mathlib/pull/#8715))

I am happy to remove some nolints for you!

### [2021-08-16T18:56:34+00:00](https://github.com/leanprover-community/mathlib/commit/1263906f61027d7066ceba1edcde523dcc7f9fae)
chore(data/nat/pairing): add `pp_nodot`, fix some non-finalizing `simp`s ([#8705](https://github.com/leanprover-community/mathlib/pull/#8705))

### [2021-08-16T18:56:33+00:00](https://github.com/leanprover-community/mathlib/commit/40d2602e932fd2e2bbf0d5505592ebe186ed3e21)
chore(analysis/calculus/deriv): weaker assumptions for `deriv_mul_const` ([#8704](https://github.com/leanprover-community/mathlib/pull/#8704))

### [2021-08-16T18:56:32+00:00](https://github.com/leanprover-community/mathlib/commit/d5ce7e56c6a150a50fb89f4e44149919152983b3)
chore(data/vector): rename vector2 ([#8697](https://github.com/leanprover-community/mathlib/pull/#8697))

This file was named this way to avoid clashing with `data/vector.lean` in core.
This renames it to `data/vector/basic.lean` which avoids the problem.

There was never a `vector2` definition, this was only ever a filename.

### [2021-08-16T16:19:26+00:00](https://github.com/leanprover-community/mathlib/commit/253712e1dfcb1fe58dfb0a7ed1098039db372374)
feat(ring_theory/ideal): lemmas on `ideal.span {x} * I` ([#8622](https://github.com/leanprover-community/mathlib/pull/#8622))

Originally created for being used in the context of the ideal class group, but didn't end up being used. Hopefully they are still useful for others.

### [2021-08-16T16:19:25+00:00](https://github.com/leanprover-community/mathlib/commit/65b0c5827aec40af01a4e300ccce835b374703c2)
feat(ring_theory/localization): some lemmas on `coe_submodule` ([#8621](https://github.com/leanprover-community/mathlib/pull/#8621))

A small assortment of results on `is_localization.coe_submodule`, needed for elementary facts about the ideal class group.

### [2021-08-16T16:19:24+00:00](https://github.com/leanprover-community/mathlib/commit/80b699bcf7917ae3a88c3311e72c679483e642b1)
chore(ring_theory): generalize `non_zero_divisors` lemmas to `monoid_with_zero` ([#8607](https://github.com/leanprover-community/mathlib/pull/#8607))

None of the results about `non_zero_divisors` needed a ring structure, just a `monoid_with_zero`. So the generalization is obvious.

Shall we move this file to the `algebra` namespace sometime soon?

### [2021-08-16T16:19:23+00:00](https://github.com/leanprover-community/mathlib/commit/106bd3be22071461d63deb2ddd9a002b74b251a1)
feat(group_theory/nilpotent): add nilpotent groups ([#8538](https://github.com/leanprover-community/mathlib/pull/#8538))

We make basic definitions of nilpotent groups and prove the standard theorem that a group is nilpotent iff the upper resp. lower central series reaches top resp. bot.

### [2021-08-16T16:19:22+00:00](https://github.com/leanprover-community/mathlib/commit/a55084f5998b6a04d1913922b1e1586af15add55)
feat(data/fintype/basic): card_sum, card_subtype_or ([#8490](https://github.com/leanprover-community/mathlib/pull/#8490))

### [2021-08-16T16:19:21+00:00](https://github.com/leanprover-community/mathlib/commit/f8241b7462caec4a99a53b0a0a2e66a4a186b996)
feat(algebra/big_operators/basic): prod_subsingleton ([#8423](https://github.com/leanprover-community/mathlib/pull/#8423))

### [2021-08-16T16:19:20+00:00](https://github.com/leanprover-community/mathlib/commit/e19534715c419e919217c855198aa50597306976)
feat(finsupp/basic): lemmas about emb_domain ([#7883](https://github.com/leanprover-community/mathlib/pull/#7883))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2021-08-16T15:18:10+00:00](https://github.com/leanprover-community/mathlib/commit/53d97e1ad2b5e30eff5f9246a689ec37361f63d0)
puzzle(archive/oxford_invariants): Oxford Invariants Puzzle Challenges, Summer 2021, Week 3, Problem 1 ([#8656](https://github.com/leanprover-community/mathlib/pull/#8656))

This is a formalisation of a problem posed by the Oxford Invariants.

Co-authored by @b-mehta



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-08-16T15:18:08+00:00](https://github.com/leanprover-community/mathlib/commit/55b2e8647cd3dfbafdb1271cccfbd7f2d49d3ca2)
feat(analysis/normed_space): normed group hom completion ([#8499](https://github.com/leanprover-community/mathlib/pull/#8499))

From LTE

### [2021-08-16T15:18:07+00:00](https://github.com/leanprover-community/mathlib/commit/217308c9c084e6365d790a781780ca80ca42f6d6)
feat(analysis): `x^y` is smooth as a function of `(x, y)` ([#8262](https://github.com/leanprover-community/mathlib/pull/#8262))

### [2021-08-16T13:12:47+00:00](https://github.com/leanprover-community/mathlib/commit/d6aae6c681ddeb6e696c77d2fb346ad087615f45)
feat(tactic/abel): check for defeq of atoms instead of syntactic eq ([#8628](https://github.com/leanprover-community/mathlib/pull/#8628))

I had a call to `abel` break after adding a new typeclass instance, and it turns out this was because two terms became defeq-but-not-syntactically-eq. This PR modifies the equality check in `abel` to follow the implementation in e.g. `ring`.

By default, `abel` now unifies atoms up to `reducible`, which should not have a huge impact on build times. Use `abel!` for trying to unify up to `semireducible`.

I also renamed the `tactic.abel.cache` to `tactic.abel.context`, since we store more things in there than a few elaborated terms. To appease the docstring linter, I added docs for all of the renamed `def`s.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-08-16T11:55:51+00:00](https://github.com/leanprover-community/mathlib/commit/deedf25050f2e3e1f9a1f4e818e7137f5fe79792)
feat(algebra/lie/semisimple): adjoint action is injective for semisimple Lie algebras ([#8698](https://github.com/leanprover-community/mathlib/pull/#8698))

### [2021-08-16T08:39:16+00:00](https://github.com/leanprover-community/mathlib/commit/c416a486b9d1514b302b27e170f88cea3f3200c1)
feat(algebra/gcd_monoid): move the `gcd_monoid nat` instance ([#7180](https://github.com/leanprover-community/mathlib/pull/#7180))

moves `gcd_monoid nat` instance, removes corresponding todos.

removes:
* `nat.normalize_eq` -- use `normalize_eq` instead

renames:
* `nat.gcd_eq_gcd` to `gcd_eq_nat_gcd`
* `nat.lcm_eq_lcm` to `lcm_eq_nat_lcm`



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>
Co-authored-by: Ruben Van de Velde <65514131+Ruben-VandeVelde@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-08-16T08:06:39+00:00](https://github.com/leanprover-community/mathlib/commit/2b435875d5ae6675b4ddc9d86cc4f6f1221245c0)
feat(measure_theory/hausdorff_measure): Hausdorff measure and volume coincide in pi types ([#8554](https://github.com/leanprover-community/mathlib/pull/#8554))

co-authored by Yury Kudryashov

### [2021-08-16T06:19:36+00:00](https://github.com/leanprover-community/mathlib/commit/a983f2411b886c3f1b011738c16777f49003e508)
fix(*): fix universe levels ([#8677](https://github.com/leanprover-community/mathlib/pull/#8677))

The universe levels in the following declarations have been fixed . 
This means that there was an argument of the form `Type (max u v)` or `Sort (max u v)`, which could be generalized to `Type u` or `Sort u`. In a few cases, I made explicit that there is a universe restriction (sometimes `max u v` is legitimately used as an arbitrary universe level higher than `u`)

In some files I also cleaned up some declarations around these.
```
algebraic_geometry.Spec.SheafedSpace_map
algebraic_geometry.Spec.to_SheafedSpace
algebraic_geometry.Spec.to_PresheafedSpace
category_theory.discrete_is_connected_equiv_punit
writer_t.uliftable'
writer_t.uliftable
equiv.prod_equiv_of_equiv_nat
free_algebra.dim_eq
linear_equiv.alg_conj
module.flat
cardinal.add_def
slim_check.injective_function.mk
topological_add_group.of_nhds_zero'
topological_group.of_nhds_one'
topological_group.of_comm_of_nhds_one
topological_add_group.of_comm_of_nhds_zero
has_continuous_mul.of_nhds_one
has_continuous_add.of_nhds_zero
has_continuous_add_of_comm_of_nhds_zero
has_continuous_mul_of_comm_of_nhds_one
uniform_space_of_compact_t2
AddCommGroup.cokernel_iso_quotient
algebraic_geometry.Scheme
algebraic_geometry.Scheme.Spec_obj
simplex_category.skeletal_functor
category_theory.Type_to_Cat.full
CommMon_.equiv_lax_braided_functor_punit.lax_braided_to_CommMon
CommMon_.equiv_lax_braided_functor_punit.unit_iso
Mon_.equiv_lax_monoidal_functor_punit.lax_monoidal_to_Mon
Mon_.equiv_lax_monoidal_functor_punit.unit_iso
uliftable.down_map
weak_dual.has_continuous_smul
stone_cech_equivalence
Compactum_to_CompHaus.full
TopCommRing.category_theory.forget₂.category_theory.reflects_isomorphisms
```



Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-08-16T05:42:56+00:00](https://github.com/leanprover-community/mathlib/commit/69785fe0c0dc536438577bbb2f8bc520543d83e0)
chore(scripts): update nolints.txt ([#8696](https://github.com/leanprover-community/mathlib/pull/#8696))

I am happy to remove some nolints for you!

### [2021-08-16T03:52:43+00:00](https://github.com/leanprover-community/mathlib/commit/b97344c09647495db6420fa408c591ec52d8dfc0)
chore(algebra/module): Swap the naming of `smul_(left|right)_injective` to match the naming guide ([#8659](https://github.com/leanprover-community/mathlib/pull/#8659))

The naming conventions say:

> An injectivity lemma that uses "left" or "right" should refer to the argument that "changes". For example, a lemma with the statement `a - b = a - c ↔ b = c` could be called `sub_right_inj`.

This corrects the name of `function.injective (λ c : R, c • x)` to be `smul_left_injective` instead of the previous `smul_right_injective`, and vice versa for `function.injective (λ x : M, r • x)`.

This also brings it in line with `mul_left_injective` and `mul_right_injective`.

### [2021-08-16T03:52:42+00:00](https://github.com/leanprover-community/mathlib/commit/2e9029fe55274a629c4277a0406a27576f167ca9)
feat(tactic/ext): add tracing option ([#8633](https://github.com/leanprover-community/mathlib/pull/#8633))

Adds an option to trace all lemmas that `ext` tries to apply, along with the time each attempted application takes. This was useful in debugging a slow `ext` call. 



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2021-08-16T02:20:04+00:00](https://github.com/leanprover-community/mathlib/commit/59954c195b3d4da27eba6a35eea70f5e1ac9f203)
docs(data/pfun): add module docstring and def docstrings ([#8629](https://github.com/leanprover-community/mathlib/pull/#8629))

### [2021-08-16T02:20:03+00:00](https://github.com/leanprover-community/mathlib/commit/46b3fae0f8a173773ecc46191ddcf7d69ccae198)
feat(topology/category/*/projective): CompHaus and Profinite have enough projectives ([#8613](https://github.com/leanprover-community/mathlib/pull/#8613))

Co-authored-by: Adam Topaz <github@adamtopaz.com>



Co-authored-by: Adam Topaz <github@adamtopaz.com>

### [2021-08-16T02:20:02+00:00](https://github.com/leanprover-community/mathlib/commit/4bf51778998fcebebe15a5d3b1e498bb299ef6e1)
feat(algebraic_geometry/EllipticCurve): add working definition of elliptic curve ([#8558](https://github.com/leanprover-community/mathlib/pull/#8558))

The word "elliptic curve" is used in the literature in many different ways. Differential geometers use it to mean a 1-dimensional complex torus. Algebraic geometers nowadays use it to mean some morphism of schemes with a section and some axioms. However classically number theorists used to use a low-brow definition of the form y^2=cubic in x; this works great when the base scheme is, for example, Spec of the rationals. 

It occurred to me recently that the standard minor modification of the low-brow definition works for all commutative rings with trivial Picard group, and because this covers a lot of commutative rings (e.g. all fields, all PIDs, all integral domains with trivial class group) it would not be unreasonable to have it as a working definition in mathlib. The advantage of this definition is that people will be able to begin writing algorithms which compute various invariants of the curve, for example we can begin to formally verify the database of elliptic curves at LMFDB.org .

### [2021-08-16T01:12:19+00:00](https://github.com/leanprover-community/mathlib/commit/ec68c7e48d077d408d1fb8c0a1f1c7873b4617c5)
feat(set_theory/cardinal): lift_sup ([#8675](https://github.com/leanprover-community/mathlib/pull/#8675))


Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>
Co-authored-by: Reid Barton <rwbarton@gmail.com>

### [2021-08-16T00:24:41+00:00](https://github.com/leanprover-community/mathlib/commit/462359db3d65edb288b3731ed890a676897e1736)
feat(measure): prove Haar measure = Lebesgue measure on R ([#8639](https://github.com/leanprover-community/mathlib/pull/#8639))

### [2021-08-15T23:17:23+00:00](https://github.com/leanprover-community/mathlib/commit/8e50863356c3919eb0bc55c1ceb5e001a4aab2f9)
chore(analysis/normed_space/dual): golf some proofs ([#8694](https://github.com/leanprover-community/mathlib/pull/#8694))

### [2021-08-15T21:24:22+00:00](https://github.com/leanprover-community/mathlib/commit/8ac0242f44b307fb922537fdef5686fe083b51e8)
feat(topology/algebra/ring): pi instances ([#8686](https://github.com/leanprover-community/mathlib/pull/#8686))

Add instances `pi.topological_ring` and `pi.topological_semiring`.

### [2021-08-15T21:24:21+00:00](https://github.com/leanprover-community/mathlib/commit/9af80f36e0f719208b015773a7de15812a7c5468)
feat(algebra/opposites): more scalar action instances ([#8672](https://github.com/leanprover-community/mathlib/pull/#8672))

This adds weaker and stronger versions of `monoid.to_opposite_mul_action` for `has_mul`, `monoid_with_zero`, and `semiring`. It also adds an `smul_comm_class` instance.

### [2021-08-15T21:24:20+00:00](https://github.com/leanprover-community/mathlib/commit/fc7da8d9b1e0456b433e3990c3810cdad3556d85)
chore(data/vector3): extract to a new file ([#8669](https://github.com/leanprover-community/mathlib/pull/#8669))

This is simply a file move, with no other changes other than a minimal docstring.

In it's old location this was very hard to find.

### [2021-08-15T21:24:18+00:00](https://github.com/leanprover-community/mathlib/commit/6aefa38dee63391eaf6099d1ed431c1e56fee611)
chore(topology/algebra/*,analysis/specific_limits): continuity of `fpow` ([#8665](https://github.com/leanprover-community/mathlib/pull/#8665))

* add more API lemmas about continuity of `x ^ n` for natural and integer `n`;
* prove that `x⁻¹` and `x ^ n`, `n < 0`, are discontinuous at zero.

### [2021-08-15T21:24:18+00:00](https://github.com/leanprover-community/mathlib/commit/fddc1f43dcaef70f8a8ade7b0d751cab235f01a3)
doc(tactic/congr): improve convert_to docs ([#8664](https://github.com/leanprover-community/mathlib/pull/#8664))

The docs should explain how `convert` and `convert_to` differ.

### [2021-08-15T19:29:26+00:00](https://github.com/leanprover-community/mathlib/commit/ca5987fa8b58c8860990f8a95acd88fb958ca3c2)
chore(data/set/basic): add `image_image` and `preimage_preimage` to `function.left_inverse` ([#8688](https://github.com/leanprover-community/mathlib/pull/#8688))

### [2021-08-15T13:05:32+00:00](https://github.com/leanprover-community/mathlib/commit/bf6eeb2453daf28054686b71922e2a51948461fc)
feat(data/list/cycle): cycle.map and has_repr ([#8170](https://github.com/leanprover-community/mathlib/pull/#8170))

### [2021-08-15T07:43:38+00:00](https://github.com/leanprover-community/mathlib/commit/0bb283b87f25b6927a103a35cca26d0aa62ab77c)
feat(algebra/bounds): add `csupr_mul` etc ([#8584](https://github.com/leanprover-community/mathlib/pull/#8584))

* add `csupr_mul`, `mul_csupr`, `csupr_div`, `csupr_add`,
  `mul_csupr`, `add_csupr`, `csupr_sub`;
* add `is_lub_csupr`, `is_lub_csupr_set`, `is_glb_cinfi`,
  `is_glb_cinfi_set`;
* add `is_lub.csupr_eq`, `is_lub.csupr_set_eq`, `is_glb.cinfi_eq`,
  `is_glb.cinfi_set_eq`;
* add `is_greatest.Sup_mem`, `is_least.Inf_mem`;
* add lemmas about `galois_connection` and `Sup`/`Inf` in
  conditionally complete lattices;
* add lemmas about `order_iso` and `Sup`/`Inf` in conditionally
  complete lattices.

### [2021-08-15T02:59:48+00:00](https://github.com/leanprover-community/mathlib/commit/b7d980c51d1b1b0d7b92d0afa80e42bd2d353f53)
feat(topology/algebra/weak_dual_topology + analysis/normed_space/weak_dual_of_normed_space): add definition and first lemmas about weak-star topology ([#8598](https://github.com/leanprover-community/mathlib/pull/#8598))

Add definition and first lemmas about weak-star topology.



Co-authored-by: kkytola <39528102+kkytola@users.noreply.github.com>

### [2021-08-15T02:18:05+00:00](https://github.com/leanprover-community/mathlib/commit/ff721ad04513918eb47f55d53aeeaa80d1e22a6f)
chore(scripts): update nolints.txt ([#8676](https://github.com/leanprover-community/mathlib/pull/#8676))

I am happy to remove some nolints for you!

### [2021-08-15T00:01:46+00:00](https://github.com/leanprover-community/mathlib/commit/708d99aaa4698395afe9a71651c8c5193a859126)
feat(data/real/ennreal): add `to_real_sub_of_le` ([#8674](https://github.com/leanprover-community/mathlib/pull/#8674))

### [2021-08-15T00:01:45+00:00](https://github.com/leanprover-community/mathlib/commit/4644447853eff855a09b7b9794f99454aa3d3678)
fix(tactic/norm_cast): assumption_mod_cast should only work on one goal ([#8649](https://github.com/leanprover-community/mathlib/pull/#8649))

fixes [#8438](https://github.com/leanprover-community/mathlib/pull/#8438) 



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2021-08-14T23:29:05+00:00](https://github.com/leanprover-community/mathlib/commit/c4208d2214178df57410351a0fc78656320af66d)
chore(measure_theory): fix namespace in docstrings for docgen ([#8671](https://github.com/leanprover-community/mathlib/pull/#8671))

### [2021-08-14T13:38:26+00:00](https://github.com/leanprover-community/mathlib/commit/8f863f6b32bb80706cd7c6c0c0f0182f13d00e7a)
feat(measure_theory/decomposition/jordan): the Jordan decomposition theorem for signed measures ([#8645](https://github.com/leanprover-community/mathlib/pull/#8645))

This PR proves the Jordan decomposition theorem for signed measures, that is, given a signed measure `s`, there exists a unique pair of mutually singular measures `μ` and `ν`, such that `s = μ - ν`.

### [2021-08-14T11:55:36+00:00](https://github.com/leanprover-community/mathlib/commit/ba76bf75d9571db3040c6314aa7d179b45305cc9)
chore(data/option,data/set): a few lemmas, golf ([#8636](https://github.com/leanprover-community/mathlib/pull/#8636))

* add `option.subsingleton_iff_is_empty` and an instance
  `option.unique`;
* add `set.is_compl_range_some_none`, `set.compl_range_some`,
  `set.range_some_inter_none`, `set.range_some_union_none`;
* split the proof of `set.pairwise_on_eq_iff_exists_eq` into
  `set.nonempty.pairwise_on_eq_iff_exists_eq` and
  `set.pairwise_on_eq_iff_exists_eq`.

Inspired by [#8579](https://github.com/leanprover-community/mathlib/pull/#8579)

### [2021-08-14T10:40:01+00:00](https://github.com/leanprover-community/mathlib/commit/721f571a4b85e5f1e0aeee7b8fa9e31c798fc074)
feat(linear_algebra/basic) : add a small lemma for simplifying a map between equivalent quotient spaces ([#8640](https://github.com/leanprover-community/mathlib/pull/#8640))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-08-14T06:36:18+00:00](https://github.com/leanprover-community/mathlib/commit/c765b044f7a5fb84114f71e1727b43f9cee00eae)
chore(data/(int, nat)/modeq): rationalize lemma names ([#8644](https://github.com/leanprover-community/mathlib/pull/#8644))

Many `modeq` lemmas were called `nat.modeq.modeq_something` or `int.modeq.modeq_something`. I'm deleting the duplicated `modeq`, so that lemmas (usually) become `nat.modeq.something` and `int.modeq.something`. Most of them must be `protected`.
This facilitates greatly the use of dot notation on `nat.modeq` and `int.modeq` while shortening lemma names.

I'm adding a few lemmas:
* `nat.modeq.rfl`, `int.modeq.rfl`
* `nat.modeq.dvd`, `int.modeq.dvd`
* `nat.modeq_of_dvd`, `int.modeq_of_dvd`
* `has_dvd.dvd.modeq_zero_nat`, `has_dvd.dvd.zero_modeq_nat`, `has_dvd.dvd.modeq_zero_int`, `has_dvd.dvd.zero_modeq_int`
* `nat.modeq.add_left`, `nat.modeq.add_right`, `int.modeq.add_left`, `int.modeq.add_right`
* `nat.modeq.add_left_cancel'`, `nat.modeq.add_right_cancel'`, `int.modeq.add_left_cancel'`, `int.modeq.add_right_cancel'`
* `int.modeq.sub_left`, `int.modeq.sub_right`
* `nat.modeq_sub`, `int.modeq_sub`
* `int.modeq_one`
* `int.modeq_pow`

I'm also renaming some lemmas (on top of the general renaming):
* `add_cancel_left` -> `add_left_cancel`, `add_cancel_right` -> `add_right_cancel`
* `modeq_zero_iff` -> `modeq_zero_iff_dvd` in prevision of an upcoming PR

### [2021-08-14T04:51:40+00:00](https://github.com/leanprover-community/mathlib/commit/679a8a7c2af11e8c8eeea66dccd33ac7d945336e)
docs(data/int/basic): add module docstring ([#8655](https://github.com/leanprover-community/mathlib/pull/#8655))

### [2021-08-14T02:16:22+00:00](https://github.com/leanprover-community/mathlib/commit/36826cbe95b9d91cf1383d1b1415dee9c8cafe89)
chore(scripts): update nolints.txt ([#8666](https://github.com/leanprover-community/mathlib/pull/#8666))

I am happy to remove some nolints for you!

### [2021-08-14T02:16:21+00:00](https://github.com/leanprover-community/mathlib/commit/1b1088c22d00d91c3d5187649d14fd3c602ccb88)
feat(linear_algeba/linear_independent): coe_range ([#8341](https://github.com/leanprover-community/mathlib/pull/#8341))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-08-14T00:25:39+00:00](https://github.com/leanprover-community/mathlib/commit/50d3de92a6e672cb47401e32dd2befabe8fd2aa0)
feat(logic/basic): a few lemmas about `xor` ([#8650](https://github.com/leanprover-community/mathlib/pull/#8650))

Inspired by [#8579](https://github.com/leanprover-community/mathlib/pull/#8579)

### [2021-08-13T21:43:57+00:00](https://github.com/leanprover-community/mathlib/commit/94e4667b04bbcb56587d4dc765fb8e179bb79178)
feat(order/filter): change definition of inf ([#8657](https://github.com/leanprover-community/mathlib/pull/#8657))

The current definition of `filter.inf` came directly from the Galois insertion: `u ∈ f ⊓ g` if it contains `s ∩ t` for some `s ∈ f` and `t ∈ g`, but the new one is tidier: `u ∈ f ⊓ g` if `u = s ∩ t` for some `s ∈ f` and `t ∈ g`. This gives a stronger assertion to work with when assuming a set belongs to a filter inf. On the other hand it makes it harder to prove such a statement so we keep the old version as a lemma `filter.mem_inf_of_inter :  ∀ {f g : filter α} {s t u : set α}, s ∈ f → t ∈ g → s ∩ t ⊆ u → u ∈ f ⊓ g`.

Also renames lots of lemmas to remove the word "sets" that was a remnant of the very early days.

In passing I also changed the simp lemma `filter.mem_map` from  `t ∈ map m f ↔ {x | m x ∈ t} ∈ f` to 
`t ∈ map m f ↔ m ⁻¹' t ∈ f` which seemed more normal form to me. But this led to a lot of breakage, so I also kept the old version as `mem_map'`.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-08-13T20:14:43+00:00](https://github.com/leanprover-community/mathlib/commit/fdeb0646f567cbc8e0c56cf74069a60f1126be10)
feat(topology/*): lemmas about `dense`/`dense_range` and `is_(pre)connected` ([#8651](https://github.com/leanprover-community/mathlib/pull/#8651))

* add `dense_compl_singleton`;
* extract new lemma `is_preconnected_range` from the proof of
  `is_connected_range`;
* add `dense_range.preconnected_space` and
  `dense_inducing.preconnected_space`;
* rename `self_sub_closure_image_preimage_of_open` to
  `self_subset_closure_image_preimage_of_open`.

Inspired by [#8579](https://github.com/leanprover-community/mathlib/pull/#8579)

### [2021-08-13T18:20:13+00:00](https://github.com/leanprover-community/mathlib/commit/8b9c4cfc9148897bffaecb2e29a57f936cb38952)
fix(tactic/core): fix incorrect uses of with_ident_list ([#8653](https://github.com/leanprover-community/mathlib/pull/#8653))

`with_ident_list` uses `tk "with" >> ident_*`, which is incorrect for some tactics, where `_` doesn't mean anything. (It is good for tactics that name hypotheses like `cases`, but not tactics that use the list to reference hypotheses like `revert_deps`.)

### [2021-08-13T18:20:12+00:00](https://github.com/leanprover-community/mathlib/commit/7f5d5b9aac538c5602b226f6fd18a1fb7923dbfd)
feat(ring_theory): ideals in a Dedekind domain have unique factorization ([#8530](https://github.com/leanprover-community/mathlib/pull/#8530))



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-08-13T17:03:29+00:00](https://github.com/leanprover-community/mathlib/commit/8eca29340484c84f8fca07ea8ef6178b68b8126a)
feat(field_theory): more general `algebra _ (algebraic_closure k)` instance ([#8658](https://github.com/leanprover-community/mathlib/pull/#8658))

For example, now we can take a field extension `L / K` and map `x : K` into the algebraic closure of `L`.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-08-13T17:03:28+00:00](https://github.com/leanprover-community/mathlib/commit/c711909cafad9d6946760d56b52214c160f4dff7)
feat(linear_algebra/basic, group_theory/quotient_group, algebra/lie/quotient): ext lemmas for morphisms out of quotients ([#8641](https://github.com/leanprover-community/mathlib/pull/#8641))

This allows `ext` to see through quotients by subobjects of a type `A`, and apply ext lemmas specific to `A`.

### [2021-08-13T15:23:28+00:00](https://github.com/leanprover-community/mathlib/commit/9e83de2233f35696a725ea1beb5b9f659b1ffa8c)
feat(data/list/perm): subperm_ext_iff ([#8504](https://github.com/leanprover-community/mathlib/pull/#8504))

A helper lemma to construct proofs of `l <+~ l'`. On the way to proving
`l ~ l' -> l.permutations ~ l'.permutations`.

### [2021-08-13T08:01:49+00:00](https://github.com/leanprover-community/mathlib/commit/733e6e34957bbf280e876a82d4fdbb0fe1d4424c)
chore(*): update lean to 3.32.1 ([#8652](https://github.com/leanprover-community/mathlib/pull/#8652))

### [2021-08-13T06:38:14+00:00](https://github.com/leanprover-community/mathlib/commit/03ddb8dd343a0dca6cd66470eaf3f40ce933876b)
feat(finsupp/basic): restrict a finitely supported function on option A to A ([#8342](https://github.com/leanprover-community/mathlib/pull/#8342))






Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-08-13T05:15:52+00:00](https://github.com/leanprover-community/mathlib/commit/d0804baee7dda5344f459efcef9a953a2309f46e)
feat(linear_algebra/invariant_basis_number): basic API lemmas ([#7882](https://github.com/leanprover-community/mathlib/pull/#7882))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-08-13T02:17:49+00:00](https://github.com/leanprover-community/mathlib/commit/3b37614c6a7baf0dc82bba15216f101789774db5)
chore(scripts): update nolints.txt ([#8654](https://github.com/leanprover-community/mathlib/pull/#8654))

I am happy to remove some nolints for you!

### [2021-08-12T19:28:31+00:00](https://github.com/leanprover-community/mathlib/commit/4a864ed00b8eb07d2a66d914a27f7aebceb93c23)
fix(tactic/core): mk_simp_attribute: remove superfluous disjunct ([#8648](https://github.com/leanprover-community/mathlib/pull/#8648))

`with_ident_list` already returns `[]` if `with` is not present.

### [2021-08-12T19:28:30+00:00](https://github.com/leanprover-community/mathlib/commit/ce26133ba6400615531d4f1e9aee402a1fe1e3ee)
feat(data/nat/(basic, modeq)): simple lemmas ([#8647](https://github.com/leanprover-community/mathlib/pull/#8647))

### [2021-08-12T19:28:29+00:00](https://github.com/leanprover-community/mathlib/commit/c2580ebc7c624f2e9e6efcfe5674896b9a30ffd9)
refactor(tactic/*): mark internal attrs as `parser := failed` ([#8635](https://github.com/leanprover-community/mathlib/pull/#8635))

I saw this trick in some of the other user attributes, and it seems like a good idea to apply generally. Any attribute that is "internal use only" should have its `parser` field set to `failed`, so that it is impossible for the user to write the attribute. It is still possible for meta code to set the attributes programmatically, which is generally what's happening anyway.

### [2021-08-12T19:28:28+00:00](https://github.com/leanprover-community/mathlib/commit/8a2a6304fc238f28ae275ad6041a969cb24f6b6c)
feat(analysis/convex/basic): add lemma add_smul regarding linear combinations of convex sets ([#8608](https://github.com/leanprover-community/mathlib/pull/#8608))

From [#2819](https://github.com/leanprover-community/mathlib/pull/#2819)

### [2021-08-12T19:28:27+00:00](https://github.com/leanprover-community/mathlib/commit/2412b97f59cf3e1cb3de99c2655c0df93d009e21)
feat(algebra/quaternion_basis): add a quaternion version of complex.lift ([#8551](https://github.com/leanprover-community/mathlib/pull/#8551))

This is some prework to show `clifford_algebra (Q c₁ c₂) ≃ₐ[R] ℍ[R,c₁,c₂]` for an appropriate `Q`.

For `complex.lift : {I' // I' * I' = -1} ≃ (ℂ →ₐ[ℝ] A)`, we could just use a subtype. For quaternions, we now have two generators and three relations, so a subtype isn't particularly viable any more; so instead this commit creates a new `quaternion_algebra.basis` structure.

### [2021-08-12T19:28:26+00:00](https://github.com/leanprover-community/mathlib/commit/8914b68ac03ce6f4a3d7dcea833755533b38e8e1)
feat(ring_theory/dedekind_domain): ideals in a DD are cancellative  ([#8513](https://github.com/leanprover-community/mathlib/pull/#8513))

This PR provides a `comm_cancel_monoid_with_zero` instance on integral ideals in a Dedekind domain.

As a bonus, it deletes an out of date TODO comment.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-08-12T17:46:21+00:00](https://github.com/leanprover-community/mathlib/commit/0f59141522c32e8235b43c2b2b4ce67582b4ebea)
docs(data/fintype/sort): add module docstring ([#8643](https://github.com/leanprover-community/mathlib/pull/#8643))

And correct typo in the docstrings

### [2021-08-12T17:46:20+00:00](https://github.com/leanprover-community/mathlib/commit/3689655d0245f16b0a47cf3ed84a0e2fc10ca898)
feat(measure_theory/stieltjes_measure): Stieltjes measures associated to monotone functions ([#8266](https://github.com/leanprover-community/mathlib/pull/#8266))

Given a monotone right-continuous real function `f`, there exists a measure giving mass `f b - f a` to the interval `(a, b]`. These measures are called Stieltjes measures, and are especially important in probability theory. The real Lebesgue measure is a particular case of this construction, for `f x = x`. This PR extends the already existing construction of the Lebesgue measure to cover all Stieltjes measures.

### [2021-08-12T16:55:31+00:00](https://github.com/leanprover-community/mathlib/commit/7b27f461166b82a4d73ae70b9b9750cd0f16a204)
feat(measure_theory/vector_measure): a signed measure restricted on a positive set is a unsigned measure ([#8597](https://github.com/leanprover-community/mathlib/pull/#8597))

This PR defines `signed_measure.to_measure` which is the measure corresponding to a signed measure restricted on some positive set. This definition is useful for the Jordan decomposition theorem.

### [2021-08-12T15:02:55+00:00](https://github.com/leanprover-community/mathlib/commit/ee189957af6fa8bdefd4f70f652f0750b242f18a)
feat(algebra/group_with_zero): `units.mk0` is a "monoid hom" ([#8625](https://github.com/leanprover-community/mathlib/pull/#8625))

This PR shows that `units.mk0` sends `1` to `1` and `x * y` to `mk0 x * mk0 y`. So it is a monoid hom, if we ignore the proof fields.

### [2021-08-12T15:02:54+00:00](https://github.com/leanprover-community/mathlib/commit/e17e9eaca0d36de0f1219ddcfe24f2a6bb2b7093)
feat(measure_theory/lp_space): add mem_Lp and integrable lemmas for is_R_or_C.re/im and inner product with a constant ([#8615](https://github.com/leanprover-community/mathlib/pull/#8615))

### [2021-08-12T13:21:49+00:00](https://github.com/leanprover-community/mathlib/commit/f63c27b01869ee657be523944899c2d78948e859)
feat(linear_algebra): Smith normal form for submodules over a PID ([#8588](https://github.com/leanprover-community/mathlib/pull/#8588))

This PR expands on `submodule.basis_of_pid` by showing that this basis can be chosen in "Smith normal form". That is: if `M` is a free module over a PID `R` and `N ≤ M`, then we can choose a basis `bN` for `N` and `bM` for `M`, such that the inclusion map from `N` to `M` expressed in these bases is a diagonal matrix in Smith normal form.

The rather gnarly induction in the original `submodule.basis_of_pid` has been turned into an even gnarlier auxiliary lemma that does the inductive step (with the induction hypothesis broken into pieces so we can apply it part by part), followed by a re-proven `submodule.basis_of_pid` that picks out part of this inductive step. Then we feed the full induction hypothesis, along with `submodule.basis_of_pid` into the same induction again, to get `submodule.exists_smith_normal_form_of_le`, and from that we conclude our new results `submodule.exists_smith_normal_form` and `ideal.exists_smith_normal_form`.

### [2021-08-12T09:52:50+00:00](https://github.com/leanprover-community/mathlib/commit/e245b24b8a46f1496cdc588a10e42042371a7cb9)
feat(data/nat/prime, number_theory/padics/padic_norm): list of prime_pow_factors, valuation of prime power ([#8473](https://github.com/leanprover-community/mathlib/pull/#8473))




Co-authored-by: ineswright <52750254+ineswright@users.noreply.github.com>

### [2021-08-12T08:32:26+00:00](https://github.com/leanprover-community/mathlib/commit/1b96e97780148ff867197d92ef99d3e2868a4d9c)
feat(data/sym2): card of `sym2 α` ([#8426](https://github.com/leanprover-community/mathlib/pull/#8426))

Case `n = 2` of stars and bars



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-08-12T07:04:01+00:00](https://github.com/leanprover-community/mathlib/commit/c550e3a34350c6c8e6235a8d599b9d8c819c3169)
refactor(group_theory/sylow): make new file about actions of p groups and move lemmas there ([#8595](https://github.com/leanprover-community/mathlib/pull/#8595))

### [2021-08-12T07:04:00+00:00](https://github.com/leanprover-community/mathlib/commit/0cbab3780a649140f73d0edc55ab81269a69d05b)
feat(group_theory/subgroup): there are finitely many subgroups of a finite group ([#8593](https://github.com/leanprover-community/mathlib/pull/#8593))




Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2021-08-12T07:03:59+00:00](https://github.com/leanprover-community/mathlib/commit/cd2b5495b88d5d119669e282bfb81c71e4e7c949)
chore(measure_theory/*): make measurable_space arguments implicit, determined by the measure argument ([#8571](https://github.com/leanprover-community/mathlib/pull/#8571))

In the measure theory library, most of the definitions that depend on a measure have that form:
```
def example_def {α} [measurable_space α] (μ : measure α) : some_type := sorry
```
Suppose now that we have two `measurable_space` structures on `α` : `{m m0 : measurable_space α}` and we have the measures `μ : measure α` (which is a measure on `m0`) and `μm : @measure α m`. This will be common for probability theory applications. See for example the `conditional_expectation` file.
Then we can write `example_def μ` but we cannot write `example_def μm` because the `measurable_space` inferred is `m0`, which does not match the measurable space on which `μm` is defined. We have to use `@example_def _ m μm` instead.

This PR implements a simple fix: change `[measurable_space α] (μ : measure α)` into `{m : measurable_space α} (μ : measure α)`.

Advantage: we can now use `example_def μm` since the `measurable_space` argument is deduced from the `measure` argument. This removes many `@` in all places where `measure.trim` is used.

Downsides:
- I have to write `(0 : measure α)` instead of `0` in some lemmas.
- I had to add two `apply_instance` to find `borel_space` instances.
- Whenever a lemma takes an explicit measure argument, we have to write `{m : measurable_space α} (μ : measure α)` instead of simply `(μ : measure α)`.

### [2021-08-12T05:23:15+00:00](https://github.com/leanprover-community/mathlib/commit/9ab4d281d6640fda1e6dc5c03db172ac97c528e2)
doc(tactic/cache): fix haveI docs ([#8637](https://github.com/leanprover-community/mathlib/pull/#8637))

Applies [Bhavik's suggestion](https://github.com/leanprover-community/mathlib/pull/8631#discussion_r687260852) which missed the train for [#8631](https://github.com/leanprover-community/mathlib/pull/#8631).

### [2021-08-12T03:29:23+00:00](https://github.com/leanprover-community/mathlib/commit/036c96bf379521ed63bb38d46986ff8d0bc3bc4a)
fix(tactic/lint): _ is not a linter ([#8634](https://github.com/leanprover-community/mathlib/pull/#8634))

The `#lint` parser accepts `ident_`, but as far as I can tell, `_` doesn't mean anything in particular, it just tries and fails to resolve the `linter._` linter. This simplifies the parser to only accept `ident`.

### [2021-08-12T02:18:22+00:00](https://github.com/leanprover-community/mathlib/commit/89687399bbfb9bb40c8d97f02ce8c1e16cf3dd68)
chore(scripts): update nolints.txt ([#8638](https://github.com/leanprover-community/mathlib/pull/#8638))

I am happy to remove some nolints for you!

### [2021-08-11T23:46:50+00:00](https://github.com/leanprover-community/mathlib/commit/f0ae67d0748a1591e4fad6e2cd7c101f141ccd36)
feat(analysis/normed_space/finite_dimension): asymptotic equivalence preserves summability ([#8596](https://github.com/leanprover-community/mathlib/pull/#8596))

### [2021-08-11T21:52:56+00:00](https://github.com/leanprover-community/mathlib/commit/ea7e3ff78f29b4b0de8a061ebbb8048bd4067a0f)
feat(tactic/cache): allow optional := in haveI ([#8631](https://github.com/leanprover-community/mathlib/pull/#8631))

This syntactic restriction was originally added because it was not possible to reset the instance cache only for a given goal. This limitation has since been lifted (a while ago, I think), and so the syntax can be made more like `have` now.

### [2021-08-11T19:55:20+00:00](https://github.com/leanprover-community/mathlib/commit/565fef651e43c5966abd1c64113ca3800d293b73)
refactor(tactic/tidy): use @[user_attribute] ([#8630](https://github.com/leanprover-community/mathlib/pull/#8630))

This is just a minor change to use the `@[user_attribute]` attribute like all other user attrs instead of calling `attribute.register`. (This came up during the census of mathlib user attrs.)

### [2021-08-11T15:48:56+00:00](https://github.com/leanprover-community/mathlib/commit/7b5c60db3324a7bbb708482743db8efa36ba52ef)
feat(data/equiv/basic): add a small lemma for simplifying map between equivalent quotient spaces induced by equivalent relations ([#8617](https://github.com/leanprover-community/mathlib/pull/#8617))

Just adding a small lemma that allows us to compute the composition of the map given by `quot.congr` with `quot.mk`

### [2021-08-11T15:48:55+00:00](https://github.com/leanprover-community/mathlib/commit/3ebf9f08adadf7b6fea98cdb56bee180de7d269b)
chore(group_theory/group_action/defs): add a missing is_scalar_tower instance ([#8604](https://github.com/leanprover-community/mathlib/pull/#8604))

### [2021-08-11T15:48:53+00:00](https://github.com/leanprover-community/mathlib/commit/2489931ec23fecf61ee121e95463d35c49172bc7)
feat(group_theory/perm/cycle_type): purge trunc references ([#8176](https://github.com/leanprover-community/mathlib/pull/#8176))

### [2021-08-11T14:09:54+00:00](https://github.com/leanprover-community/mathlib/commit/2db8c799d875f6fb8bde1a8a6b823211d0c8e712)
chore(group_theory/submonoid/membership): missing rfl lemmas ([#8619](https://github.com/leanprover-community/mathlib/pull/#8619))

### [2021-08-11T11:38:30+00:00](https://github.com/leanprover-community/mathlib/commit/8d0ed030182a0bd96fe70257d11bb0cda5685597)
feat(data/rat/basic): Add nat num and denom inv lemmas ([#8581](https://github.com/leanprover-community/mathlib/pull/#8581))

Add `inv_coe_nat_num`  and `inv_coe_nat_denom` lemmas.

These lemmas show that the denominator and numerator of `1/ n` given `0 < n`, are equal to `n` and `1` respectively.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-08-11T07:34:47+00:00](https://github.com/leanprover-community/mathlib/commit/1d4400c195ea85de195c2de158c9f251be24581b)
feat(analysis/normed_space): controlled surjectivity ([#8498](https://github.com/leanprover-community/mathlib/pull/#8498))

From LTE.

### [2021-08-11T06:39:10+00:00](https://github.com/leanprover-community/mathlib/commit/9c8602b04715b959a7eae703d8506acd5281c44d)
refactor(measure_theory): add subfolder ([#8594](https://github.com/leanprover-community/mathlib/pull/#8594))

* This PR adds the subfolders `constructions` `function` `group` `integral` and `measure` to `measure_theory`
* File renamings:
```
group -> group.basic
prod_group -> group.prod
bochner_integration -> integral.bochner
integration -> integral.lebesgue
haar_measure -> measure.haar
lebesgue_measure -> measure.lebesgue
hausdorff_measure -> measure.hausdorff
```

### [2021-08-11T02:38:04+00:00](https://github.com/leanprover-community/mathlib/commit/6305769a5f463d5f44670d390b744f98d6c20edd)
chore(scripts): update nolints.txt ([#8614](https://github.com/leanprover-community/mathlib/pull/#8614))

I am happy to remove some nolints for you!

### [2021-08-11T02:38:03+00:00](https://github.com/leanprover-community/mathlib/commit/3c09987c11add055469578d7d49bc0ca0c74b10e)
docs(data/set/lattice): add module docstring ([#8250](https://github.com/leanprover-community/mathlib/pull/#8250))

This also cleans up some whitespace and replaces some `assume`s with `λ`s

### [2021-08-11T00:53:34+00:00](https://github.com/leanprover-community/mathlib/commit/694dd117aa30542d35578fdcfa014b8b4688b3b3)
feat(archive/imo): IMO 2001 Q6 ([#8327](https://github.com/leanprover-community/mathlib/pull/#8327))

Formalization of the problem Q6 of 2001.

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-08-10T18:08:28+00:00](https://github.com/leanprover-community/mathlib/commit/32735ca2053bf7e5b9d6c164414b291ae0978de1)
feat(measure_theory/measure_space): add mutually singular measures ([#8605](https://github.com/leanprover-community/mathlib/pull/#8605))


This PR defines `mutually_singular` for measures. This is useful for Jordan and Lebesgue decomposition.

### [2021-08-10T18:08:27+00:00](https://github.com/leanprover-community/mathlib/commit/3b279c1730e3d40fc4e355c000ca5589aa8a22ae)
feat(measure_theory/l2_space): generalize inner_indicator_const_Lp_one from R to is_R_or_C ([#8602](https://github.com/leanprover-community/mathlib/pull/#8602))




Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2021-08-10T18:08:26+00:00](https://github.com/leanprover-community/mathlib/commit/d1b2a548c739b46fc261a6383428868cce91f130)
feat(analysis/normed_space/inner_product): add norm_inner_le_norm ([#8601](https://github.com/leanprover-community/mathlib/pull/#8601))

add this:
```
lemma norm_inner_le_norm (x y : E) : ∥⟪x, y⟫∥ ≤ ∥x∥ * ∥y∥ :=
(is_R_or_C.norm_eq_abs _).le.trans (abs_inner_le_norm x y)
```

### [2021-08-10T18:08:24+00:00](https://github.com/leanprover-community/mathlib/commit/acab4f941f7037ea746f8edb05674e1296f1b202)
feat(algebra/pointwise): add preimage_smul and generalize a couple of assumptions ([#8600](https://github.com/leanprover-community/mathlib/pull/#8600))

Some lemmas about smul spun off from [#2819](https://github.com/leanprover-community/mathlib/pull/#2819)

### [2021-08-10T17:22:47+00:00](https://github.com/leanprover-community/mathlib/commit/9fb53f986bf8021296559f316e4de7cd28bddc2f)
chore(analysis/calculus/fderiv_symmetric): Squeeze some simps in a very slow proof ([#8609](https://github.com/leanprover-community/mathlib/pull/#8609))

This doesn't seem to help much, but is low-hanging speedup fruit that the next person stuck on a timeout here will inevitably want solved first.





Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-08-10T17:22:46+00:00](https://github.com/leanprover-community/mathlib/commit/ebe017642284c4d629f08f7d5c7c9d95afe9b508)
feat(measure_theory/special_functions): add measurability of is_R_or_C.re and is_R_or_C.im ([#8603](https://github.com/leanprover-community/mathlib/pull/#8603))

### [2021-08-10T16:39:18+00:00](https://github.com/leanprover-community/mathlib/commit/57391993800c8861dca0a371493e75a07ddd3b42)
chore(linear_algebra/quadratic_form): make Sylvester's law of inertia bold in the doc string ([#8610](https://github.com/leanprover-community/mathlib/pull/#8610))

### [2021-08-10T14:03:54+00:00](https://github.com/leanprover-community/mathlib/commit/e2b7f70676f113292ce45bb8459543a001c975bb)
fix(docs/references.bib): add missing comma ([#8585](https://github.com/leanprover-community/mathlib/pull/#8585))

* Adds a missing comma to docs/references.bib. Without this the file cannot be parsed by bibtool.
* Normalises docs/references.bib as described in [Citing other works](https://leanprover-community.github.io/contribute/doc.html#citing-other-works).

### [2021-08-10T13:22:22+00:00](https://github.com/leanprover-community/mathlib/commit/81a47a71b7e2049d2bda5f8593cdceef06088a5a)
docs(topology/category/Profinite/as_limit): fix typo ([#8606](https://github.com/leanprover-community/mathlib/pull/#8606))

### [2021-08-10T10:54:11+00:00](https://github.com/leanprover-community/mathlib/commit/5890afb139fa7a036a1569a864d3c18dd09d6033)
feat(data/list/perm): perm.permutations ([#8587](https://github.com/leanprover-community/mathlib/pull/#8587))

This proves the theorem from [Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/perm.20of.20permutations):

```lean
theorem perm.permutations {s t : list α} (h : s ~ t) : permutations s ~ permutations t := ...
```
It also introduces a `permutations'` function which has simpler equations (and indeed, this function is used to prove the theorem, because it is relatively easier to prove `perm.permutations'` first).

### [2021-08-10T10:54:10+00:00](https://github.com/leanprover-community/mathlib/commit/f967cd03df3fc5362e78df710e2c1b0e43ee0173)
refactor(group_theory/sylow): extract a lemma from Sylow proof ([#8459](https://github.com/leanprover-community/mathlib/pull/#8459))



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-08-10T09:12:41+00:00](https://github.com/leanprover-community/mathlib/commit/e8fc4663df27c8306b8bcb392d0c7329b790a3fe)
feat(algebra/group/pi): Add `pi.const_(monoid|add_monoid|ring|alg)_hom` ([#8518](https://github.com/leanprover-community/mathlib/pull/#8518))

### [2021-08-10T07:07:58+00:00](https://github.com/leanprover-community/mathlib/commit/e729ab4a38978e5e874207ed129900e4afc3dfc0)
feat(analysis/specific_limits): limit of nat_floor (a * x) / x ([#8549](https://github.com/leanprover-community/mathlib/pull/#8549))

### [2021-08-10T02:16:24+00:00](https://github.com/leanprover-community/mathlib/commit/e4cdecdc0f2ffa2d14c2a640b1a742300491ff8f)
chore(scripts): update nolints.txt ([#8599](https://github.com/leanprover-community/mathlib/pull/#8599))

I am happy to remove some nolints for you!

### [2021-08-09T21:34:22+00:00](https://github.com/leanprover-community/mathlib/commit/2ab63a02901f865d52e363383c4bef3dc68b2d18)
feat(topology/algebra/infinite_sum, analysis/normed_space/basic): product of two tsums, cauchy product ([#8445](https://github.com/leanprover-community/mathlib/pull/#8445))

### [2021-08-09T15:47:29+00:00](https://github.com/leanprover-community/mathlib/commit/5e59fb48ebefe6e24d2d49d142443c4fc483feb5)
feat(algebra/ordered_pointwise): lemmas on smul of intervals ([#8591](https://github.com/leanprover-community/mathlib/pull/#8591))

Some lemmas about smul on different types of intervals, spun off from [#2819](https://github.com/leanprover-community/mathlib/pull/#2819)

### [2021-08-09T15:47:27+00:00](https://github.com/leanprover-community/mathlib/commit/847fc12db1f10a002d7a5f3608053e18b7744824)
feat(algebra): `submodule.restrict_scalars p R` is `S`-isomorphic to `p` ([#8567](https://github.com/leanprover-community/mathlib/pull/#8567))

To be more precise, turning `p : submodule S M` into an `R`-submodule gives the same module structure as turning it into a type and adding a module structure.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-08-09T15:47:26+00:00](https://github.com/leanprover-community/mathlib/commit/3ec899aaec4b021200afc485a6f1ade5d764131f)
chore(topology/algebra): bundled homs in group and ring completion ([#8497](https://github.com/leanprover-community/mathlib/pull/#8497))

Also take the opportunity to remove is_Z_bilin (who was scheduled for
removal from the beginning).

### [2021-08-09T15:47:25+00:00](https://github.com/leanprover-community/mathlib/commit/189e90ea48d6aa8a478099e9203b0332b49c4f8c)
feat(group_theory/subgroup): lemmas relating normalizer and map and comap ([#8458](https://github.com/leanprover-community/mathlib/pull/#8458))




Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-08-09T15:47:24+00:00](https://github.com/leanprover-community/mathlib/commit/3dd831663731c945e73d258568bf8920751fa998)
feat(algebra/ring/basic): mul_{left,right}_cancel_of_non_zero_divisor ([#8425](https://github.com/leanprover-community/mathlib/pull/#8425))

We also golf the proof that a domain is a cancel_monoid_with_zero.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-08-09T15:47:22+00:00](https://github.com/leanprover-community/mathlib/commit/4a15eddddd6bdcd60dafb7cdf0cb00ef70cf4318)
feat(data/polynomial/monic): monic.not_zero_divisor_iff ([#8417](https://github.com/leanprover-community/mathlib/pull/#8417))

We prove that a monic polynomial is not a zero divisor. A helper lemma is proven that the product of a monic polynomial is of lesser degree iff it is nontrivial and the multiplicand is zero.

### [2021-08-09T15:47:21+00:00](https://github.com/leanprover-community/mathlib/commit/5e368484394f19b129a6ad6113c3f1cd79c6ad02)
feat(measure_theory/decomposition/signed_hahn): signed version of the Hahn decomposition theorem ([#8388](https://github.com/leanprover-community/mathlib/pull/#8388))


This PR defined positive and negative sets with respect to a vector measure and prove the signed version of the Hahn decomposition theorem.

### [2021-08-09T15:47:20+00:00](https://github.com/leanprover-community/mathlib/commit/f3b70e4a57f854e4c1d024f9637474ffc0fa5190)
feat(group_theory/subgroup): saturated subgroups ([#8137](https://github.com/leanprover-community/mathlib/pull/#8137))

From LTE

### [2021-08-09T13:47:38+00:00](https://github.com/leanprover-community/mathlib/commit/77033a00f608888fc656c20ffe6e016b6017511e)
chore(algebra/associated): rename div_or_div to dvd_or_dvd ([#8589](https://github.com/leanprover-community/mathlib/pull/#8589))

### [2021-08-09T13:47:37+00:00](https://github.com/leanprover-community/mathlib/commit/65e2411a83a525ba9e327be7a2997236f28705fc)
feat(order/bounds): `is_lub`/`is_glb` in Pi types and product types ([#8583](https://github.com/leanprover-community/mathlib/pull/#8583))

* Add `monotone_fst` and `monotone_snd`.
* Add some trivial lemmas about `upper_bounds` and `lower_bounds`.
* Turn `is_lub_pi` and `is_glb_pi` into `iff` lemmas.
* Add `is_lub_prod` and `is_glb_prod`.
* Fix some header levels in module docs of `order/bounds`.

### [2021-08-09T13:47:36+00:00](https://github.com/leanprover-community/mathlib/commit/9ce6b9a63a03500aa152a77708985e11acdff3d5)
feat(order/complete_lattice): add `sup_eq_supr` and `inf_eq_infi` ([#8573](https://github.com/leanprover-community/mathlib/pull/#8573))

* add `bool.injective_iff`, `bool.univ_eq`, and `bool.range_eq`;
* add `sup_eq_supr` and `inf_eq_infi`;
* golf `filter.comap_sup`.

### [2021-08-09T13:47:35+00:00](https://github.com/leanprover-community/mathlib/commit/45aed67729039ca4fac0e0c8348a1e9ff07b2a54)
chore(order/filter/basic): add `filter.sup_prod` and `filter.prod_sup` ([#8572](https://github.com/leanprover-community/mathlib/pull/#8572))

### [2021-08-09T13:47:34+00:00](https://github.com/leanprover-community/mathlib/commit/fc694c5bc9b0c2ea1a34e3a4ef4b1b35f62730eb)
chore(linear_algebra/special_linear_group): Cleanup and golf ([#8569](https://github.com/leanprover-community/mathlib/pull/#8569))

This cleans up a number things in this file:

* Many lemmas were duplicated between `↑A` and `⇑A`. This eliminates the latter spelling from all lemmas, and makes it simplify to the former. Unfortunately the elaborator fights us at every step of the way with `↑A`, so we introduce local notation to take the pain away.
* Some lemma names did not match the convention established elsewhere
* Some definitions can be bundled more heavily than they currently are. In particular, this merges together `to_lin'` and `to_linear_equiv`, as well as `to_GL` and `embedding_GL`.

### [2021-08-09T13:47:33+00:00](https://github.com/leanprover-community/mathlib/commit/8196d4a2a4fd0cd2383aacbf4a0e920d5303f459)
chore(algebra/group/units): Make coercion the simp-normal form of units ([#8568](https://github.com/leanprover-community/mathlib/pull/#8568))

It's already used as the output for `@[simps]`; this makes `↑u` the simp-normal form of `u.val` and `↑(u⁻¹)` the simp-normal form of `u.inv`.

### [2021-08-09T13:47:32+00:00](https://github.com/leanprover-community/mathlib/commit/8edcf90628c8b39e78648b93ed4c9355bdaebe3e)
feat(ring_theory/noetherian): add noeth ring lemma ([#8566](https://github.com/leanprover-community/mathlib/pull/#8566))

I couldn't find this explicit statement in the library -- I feel like it's the way a mathematician would define a Noetherian ring though.

### [2021-08-09T13:47:31+00:00](https://github.com/leanprover-community/mathlib/commit/5f2d954861adc3443d1f160cda94b4f79486e0cb)
feat(algebra/ordered_field): add `inv_le_of_inv_le` and `inv_lt_of_inv_lt` ([#8565](https://github.com/leanprover-community/mathlib/pull/#8565))

These lemmas need positivity of only one of two variables. Mathlib already had lemmas about ordered multiplicative groups with these names, I appended prime to their names.

### [2021-08-09T13:47:29+00:00](https://github.com/leanprover-community/mathlib/commit/f29cc59f526654ab5b03b86e4d1d5c4b64ab0ebd)
feat(matrix/kronecker): Add the Kronecker product ([#8560](https://github.com/leanprover-community/mathlib/pull/#8560))

Largely derived from [#8152](https://github.com/leanprover-community/mathlib/pull/#8152), avoiding the complexity of introducing `algebra_map`s.

This introduces an abstraction `kronecker_map`, which is used to support both `mul` and `tmul` without having to redo any proofs.



Co-authored-by: faenuccio <filippo.nuccio@univ-st-etienne.fr>

### [2021-08-09T13:47:28+00:00](https://github.com/leanprover-community/mathlib/commit/7b1ce10b2eb4caab0631899f4ecba869ae0e2ceb)
fix(analysis/normed_space/basic): add an alias instance to fix an inference issue ([#8547](https://github.com/leanprover-community/mathlib/pull/#8547))

This adds an instance from [this Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Typeclass.20resolution.20under.20binders/near/245176934).

### [2021-08-09T11:59:28+00:00](https://github.com/leanprover-community/mathlib/commit/fb63cf3efded425060af6d77a86e9a33ca70aa06)
chore(data/pfun): rename `roption` to `part`, split `data.part` off `data.pfun`  ([#8544](https://github.com/leanprover-community/mathlib/pull/#8544))

### [2021-08-09T10:27:32+00:00](https://github.com/leanprover-community/mathlib/commit/67282017c0e994984546e69ea230cad29fd3fe96)
chore(data/finsupp): add missing lemmas ([#8553](https://github.com/leanprover-community/mathlib/pull/#8553))

These lemmas are needed by `[simps {simp_rhs := tt}]` when composing equivs, otherwise simp doesn't make progress on `(map_range.add_equiv f).to_equiv.symm x` which should simplify to `map_range f.to_equiv.symm x`.

### [2021-08-09T08:17:21+00:00](https://github.com/leanprover-community/mathlib/commit/3f5a348f63e53a710e35b646295f7c139b760765)
chore(galois_connection): golf some proofs ([#8582](https://github.com/leanprover-community/mathlib/pull/#8582))

* golf some proofs
* add `galois_insertion.left_inverse_l_u` and `galois_coinsertion.left_inverse_u_l`;
* drop `galois_insertion.l_supr_of_ul_eq_self` and `galois_coinsertion.u_infi_of_lu_eq_self`: these lemmas are less general than `galois_connection.l_supr` and `galois_connection.u_infi`.

### [2021-08-09T08:17:20+00:00](https://github.com/leanprover-community/mathlib/commit/24bbbdce58e393d51c5c4df6e0909b3af2f89ca2)
feat(group_theory/sylow): Generalize proof of first Sylow theorem ([#8383](https://github.com/leanprover-community/mathlib/pull/#8383))

Generalize the first proof. There is now a proof that every p-subgroup is contained in a Sylow subgroup.



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-08-09T08:17:19+00:00](https://github.com/leanprover-community/mathlib/commit/4813b73a14df8506e2b4305575e01d99cb6a2298)
feat(category_theory/adjunction): general adjoint functor theorem ([#4885](https://github.com/leanprover-community/mathlib/pull/#4885))

A proof of the general adjoint functor theorem. This PR also adds an API for wide equalizers (essentially copied from the equalizer API), as well as results relating adjunctions to (co)structured arrow categories and weakly initial objects. I can split this into smaller PRs if necessary?

### [2021-08-09T06:49:46+00:00](https://github.com/leanprover-community/mathlib/commit/7bb4b273c8d354279998e3bf9a878a2d236eb5db)
feat(group_theory/group_action): Cayley's theorem ([#8552](https://github.com/leanprover-community/mathlib/pull/#8552))

### [2021-08-09T01:12:40+00:00](https://github.com/leanprover-community/mathlib/commit/9e320a22f6540a7d8a2f7b0583d2bace15e31027)
chore(measure_theory/special_functions): add measurability attributes ([#8570](https://github.com/leanprover-community/mathlib/pull/#8570))

That attribute makes the `measurability` tactic aware of those lemmas.

### [2021-08-08T19:18:31+00:00](https://github.com/leanprover-community/mathlib/commit/ea77271098b58aa12587c1542cc987e50a12b0ca)
chore(analysis/calculus/{f,}deriv): fix, add missing lemmas ([#8574](https://github.com/leanprover-community/mathlib/pull/#8574))

* use `prod.fst` and `prod.snd` in lemmas like `has_fderiv_at_fst`;
* add `has_strict_deriv_at.prod`,
  `has_strict_fderiv_at.comp_has_strict_deriv_at`;
* use `set.maps_to` in some lemmas;
* golf some proofs.

### [2021-08-08T17:26:57+00:00](https://github.com/leanprover-community/mathlib/commit/3788cbfa88f78b4de44d536f096a7e82f5570763)
chore(algebra/*, data/polynomial/*): remove unnecessary imports ([#8578](https://github.com/leanprover-community/mathlib/pull/#8578))

I cleaned up all of `data.polynomial`, and the files in `algebra` it imports.

### [2021-08-08T11:51:48+00:00](https://github.com/leanprover-community/mathlib/commit/87e9beccd1504d5c00df0e1cd7bcff295ef5f056)
chore(linear_algebra/matrix/trace): relax `comm_ring` to `comm_semiring` in `matrix.trace_mul_comm` ([#8577](https://github.com/leanprover-community/mathlib/pull/#8577))

### [2021-08-07T22:04:03+00:00](https://github.com/leanprover-community/mathlib/commit/0a79eec3299819dac1fe1398f7f66feed8dc813a)
fix(order/bounds): remove double space ([#8575](https://github.com/leanprover-community/mathlib/pull/#8575))

### [2021-08-07T20:32:48+00:00](https://github.com/leanprover-community/mathlib/commit/575fcc65827797d021609309bbfdc57da2f30b00)
refactor(data/nat/choose): reduce assumptions on lemmas ([#8508](https://github.com/leanprover-community/mathlib/pull/#8508))

- rename `nat.choose_eq_factorial_div_factorial'` to `nat.cast_choose`
- change the cast from `ℚ` to any `char_zero` field
- get rid of the cast in `nat.choose_mul`. Generalization ensues.

### [2021-08-07T19:53:42+00:00](https://github.com/leanprover-community/mathlib/commit/d75799616a53189961c08bade219d2dcc72297ec)
feat(analysis/complex): prove that complex functions are conformal if and only if the functions are holomorphic/antiholomorphic with nonvanishing differential ([#8424](https://github.com/leanprover-community/mathlib/pull/#8424))

Complex functions are conformal if and only if the functions are holomorphic/antiholomorphic with nonvanishing differential.


Co-authored-by: justadzr <66561890+justadzr@users.noreply.github.com>

### [2021-08-07T00:16:50+00:00](https://github.com/leanprover-community/mathlib/commit/b3c1de6a2dc0cdd9935770bb836c34ec01e71d76)
feat(analysis/complex/basic): add several trivial lemmas for differentiable functions. ([#8418](https://github.com/leanprover-community/mathlib/pull/#8418))

This file relates the differentiability of a function to the linearity of its `fderiv`.



Co-authored-by: justadzr <66561890+justadzr@users.noreply.github.com>

### [2021-08-06T21:15:20+00:00](https://github.com/leanprover-community/mathlib/commit/2f29e090f1dddb1a1c7a0f21b88d5e07d4bf8082)
feat(group_action/defs): generalize faithful actions ([#8555](https://github.com/leanprover-community/mathlib/pull/#8555))

This generalizes the `faithful_mul_semiring_action` typeclass to a mixin typeclass `has_faithful_scalar`, and provides instances for some simple actions:

* `has_faithful_scalar α α` (on cancellative monoids and monoids with zero)
* `has_faithful_scalar (opposite α) α`
* `has_faithful_scalar α (Π i, f i)`
* `has_faithful_scalar (units A) B`
* `has_faithful_scalar (equiv.perm α) α`
* `has_faithful_scalar M (α × β)`
* `has_faithful_scalar R (α →₀ M)`
* `has_faithful_scalar S (polynomial R)` (generalized from an existing instance)
* `has_faithful_scalar R (mv_polynomial σ S₁)`
* `has_faithful_scalar R (monoid_algebra k G)`
* `has_faithful_scalar R (add_monoid_algebra k G)`

As well as retaining the one other existing instance

* `faithful_mul_semiring_action ↥H E` where `H : subgroup (E ≃ₐ[F] E)`

The lemmas taking `faithful_mul_semiring_action` as a typeclass argument have been converted to use the new typeclass, but no attempt has been made to weaken their other hypotheses.

### [2021-08-06T17:42:38+00:00](https://github.com/leanprover-community/mathlib/commit/1b876c7d0acc5984bc7ad313233a3cdc4b6f0ee9)
chore(algebra/ordered_group): fix/add `order_dual` instances, add lemmas ([#8564](https://github.com/leanprover-community/mathlib/pull/#8564))

* add `order_dual.has_inv`, `order_dual.group`, `order_dual.comm_group`;
* use new instances in `order_dual.ordered_comm_group` and
  `order_dual.linear_ordered_comm_group` (earlier we had only additive
  versions);
* add `le_of_forall_neg_add_le`, `le_of_forall_pos_sub_le`,
  `le_iff_forall_neg_add_le` and their multiplicative versions.

### [2021-08-06T15:53:55+00:00](https://github.com/leanprover-community/mathlib/commit/88f9480d6089ca72cf2a86f7d6412d4b34877368)
feat(logic/embedding): subtype_or_{embedding,equiv} ([#8489](https://github.com/leanprover-community/mathlib/pull/#8489))

Provide explicit embedding from a subtype of a disjuction into a sum type.
If the disjunction is disjoint, upgrade to an equiv.
Additionally, provide `subtype.imp_embedding`, lowering a subtype
along an implication.

### [2021-08-06T10:42:04+00:00](https://github.com/leanprover-community/mathlib/commit/a23c47ca8fcb7e155502d6a8c860299fdf755b28)
feat(topology/instances/ennreal): ediam of intervals ([#8546](https://github.com/leanprover-community/mathlib/pull/#8546))



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-08-06T09:28:32+00:00](https://github.com/leanprover-community/mathlib/commit/da32780c8e19b10901a1361894ac0fdddf8e14b3)
chore(data/polynomial/*): create file `data/polynomial/inductions` and move around lemmas ([#8563](https://github.com/leanprover-community/mathlib/pull/#8563))

This PR is a precursor to [#8463](https://github.com/leanprover-community/mathlib/pull/#8463): it performs the move, without introducing lemmas and squeezes some `simp`s to make some proofs faster.

I added add a doc-string to `lemma degree_pos_induction_on` with a reference to a lemma that will appear in [#8463](https://github.com/leanprover-community/mathlib/pull/#8463).

The main reason why there are more added lines than removed ones is that the creation of a new file has a copyright statement, a module documentation and a few variable declarations.

### [2021-08-06T09:28:31+00:00](https://github.com/leanprover-community/mathlib/commit/b9e4c0847caf16752deef32874ab2010b3b9fbb0)
refactor(algebra/regular): split out `is_regular` ([#8561](https://github.com/leanprover-community/mathlib/pull/#8561))

One would like to import `is_regular` for rings. However, group powers
are too late in the algebra hierarchy,
so the proofs of powers of regular elements are factored
out to a separate file.

### [2021-08-06T09:28:30+00:00](https://github.com/leanprover-community/mathlib/commit/59c8befcac887025769b002a7e893adb5909dcac)
feat (order/liminf_limsup): frequently_lt_of_lt_limsup ([#8548](https://github.com/leanprover-community/mathlib/pull/#8548))

### [2021-08-06T09:28:29+00:00](https://github.com/leanprover-community/mathlib/commit/f471b899c4b7324c3eb5cd588235f9d8f47fc670)
feat(topology,geometry/manifold): continuous and smooth partition of unity ([#8281](https://github.com/leanprover-community/mathlib/pull/#8281))

Fixes [#6392](https://github.com/leanprover-community/mathlib/pull/#6392)

### [2021-08-06T06:59:28+00:00](https://github.com/leanprover-community/mathlib/commit/dc6adcc85e0197075ea3a2e55c03e854008f5916)
feat(order/bounded_lattice): define the `distrib_lattice_bot` typeclass ([#8507](https://github.com/leanprover-community/mathlib/pull/#8507))

Typeclass for a distributive lattice with a least element.

This typeclass is used to generalize `disjoint_sup_left` and similar.

It inserts itself in the hierarchy between `semilattice_sup_bot, semilattice_inf_bot` and `generalized_boolean_algebra`, `bounded_distrib_lattice`. I am doing it through `extends`.

### [2021-08-06T02:17:48+00:00](https://github.com/leanprover-community/mathlib/commit/e28d9451e0ea305c64b6f44fe193f9ab01f207e2)
chore(scripts): update nolints.txt ([#8562](https://github.com/leanprover-community/mathlib/pull/#8562))

I am happy to remove some nolints for you!

### [2021-08-06T00:12:02+00:00](https://github.com/leanprover-community/mathlib/commit/c2a0532f608ff1ed6170b70abd23ffae0681ca00)
feat(logic/unique,data/fintype/basic): unique and fintype of subtype of one element ([#8491](https://github.com/leanprover-community/mathlib/pull/#8491))

Additionally, a lemma proving that the cardinality of such a subtype is 1.

### [2021-08-05T20:49:21+00:00](https://github.com/leanprover-community/mathlib/commit/eb73c357b0ba1b22bc012dd95c7d0a8fa699c090)
docs(order/complete_boolean_algebra): add module docstring, add whitespaces ([#8525](https://github.com/leanprover-community/mathlib/pull/#8525))

### [2021-08-05T19:03:04+00:00](https://github.com/leanprover-community/mathlib/commit/c2ed7dcc5b91111b635cfb4668c2094486b759b9)
feat(logic/basic): `ite p a b` is equal to `a` or `b` ([#8557](https://github.com/leanprover-community/mathlib/pull/#8557))

### [2021-08-05T19:03:03+00:00](https://github.com/leanprover-community/mathlib/commit/52b6516b50e733d24c629527638d6dead4fd8c39)
refactor(order/disjointed): generalize `disjointed` to generalized boolean algebras ([#8409](https://github.com/leanprover-community/mathlib/pull/#8409))

- Split `data.set.disjointed` into `data.set.pairwise` and `order.disjointed`. Change imports accordingly.
- In `order.disjointed`, change `set α` to `generalized_boolean_algebra α`. Redefine `disjointed` in terms of `partial_sups` to avoid needing completeness. Keep set notation variants of lemmas for easier unification.
- Rename some lemmas and reorder their arguments to make dot notation functional.
- Generalize some (where some = 2) `pairwise` lemmas.
- Delete lemmas which are unused and are a straightforward `rw` away from a simpler one (`Union_disjointed_of_mono`).

### [2021-08-05T16:28:09+00:00](https://github.com/leanprover-community/mathlib/commit/8e79ea53d3d55714e6096395ec632298315e2602)
feat(data/matrix/basic): add `alg_(hom|equiv).map_matrix` ([#8527](https://github.com/leanprover-community/mathlib/pull/#8527))

This also adds a few standalone lemmas about `algebra_map`.

### [2021-08-05T12:24:03+00:00](https://github.com/leanprover-community/mathlib/commit/a0cb45fe4e565d19b4068c9acd921528b1df5bf1)
feat(linear_algebra/clifford_algebra): the reals and complex numbers have isomorphic real clifford algebras ([#8165](https://github.com/leanprover-community/mathlib/pull/#8165))

### [2021-08-04T21:40:15+00:00](https://github.com/leanprover-community/mathlib/commit/ee8e447e3c6a02035b7dac764ef5e02c092d7edd)
chore(category_theory/whiskering): Fix docstring ([#8533](https://github.com/leanprover-community/mathlib/pull/#8533))

### [2021-08-04T19:46:09+00:00](https://github.com/leanprover-community/mathlib/commit/d24faea6a2c29f0e90ad71dcae6b71cdf6171589)
chore(data/real/basic): drop some lemmas ([#8523](https://github.com/leanprover-community/mathlib/pull/#8523))

Drop `real.Sup_le`, `real.lt_Sup`, `real.le_Sup`, `real.Sup_le_ub`, `real.le_Inf`, `real.Inf_lt`, `real.Inf_le`, `real.lb_le_Inf`. Use lemmas about `conditionally_complete_lattice`s instead.

Also drop unneeded assumptions in `real.lt_Inf_add_pos` and `real.add_neg_lt_Sup`.

### [2021-08-04T16:20:15+00:00](https://github.com/leanprover-community/mathlib/commit/4e9b18b65f807db0a2c912a9778964d140579261)
chore(order/basic): rename monotone_of_monotone_nat and strict_mono.nat ([#8550](https://github.com/leanprover-community/mathlib/pull/#8550))

For more coherence (and easier discoverability), rename `monotone_of_monotone_nat` to `monotone_nat_of_le_succ`, and `strict_mono.nat` to `strict_mono_nat_of_lt_succ`.

### [2021-08-04T08:58:37+00:00](https://github.com/leanprover-community/mathlib/commit/3a9b25ddfa8baa510e822102cb9207af64a6c889)
fix(order/lattice): make non-instances reducible ([#8541](https://github.com/leanprover-community/mathlib/pull/#8541))

Some early fixes for the new linter in [#8540](https://github.com/leanprover-community/mathlib/pull/#8540).

### [2021-08-04T08:58:36+00:00](https://github.com/leanprover-community/mathlib/commit/1691c6c2fb610e14037b96085d3fdfca8366f4e0)
feat(algebra/opposites): {add,mul,ring}_equiv.op ([#8535](https://github.com/leanprover-community/mathlib/pull/#8535))

We had the equivalences of homs. Now we have equivalences of isos.

### [2021-08-04T08:58:35+00:00](https://github.com/leanprover-community/mathlib/commit/096bdb7a9f97104349f722626eaa44e67eda77ce)
refactor(group_theory/solvable): move subgroup commutators into new file ([#8534](https://github.com/leanprover-community/mathlib/pull/#8534))

The theory of nilpotent subgroups also needs a theory of general commutators (if H,K : subgroup G then so is [H,K]), but I don't really want to import solvable groups to get nilpotent groups, so I am breaking the solvable group file into two, splitting off the API for these commutators.

### [2021-08-04T07:05:50+00:00](https://github.com/leanprover-community/mathlib/commit/292e3fa1108a64589fbd3c88a84fce15808cd357)
refactor(nat/basic): Move lemma about nat ([#8539](https://github.com/leanprover-community/mathlib/pull/#8539))

### [2021-08-03T20:19:03+00:00](https://github.com/leanprover-community/mathlib/commit/85025718208922ba937e5ec6352f04c7c90ae931)
feat(topology/discrete_quotient): add two lemmas ([#8464](https://github.com/leanprover-community/mathlib/pull/#8464))

Add lemmas `proj_bot_injective` and `proj_bot_bijective`, the former needed for the latter, and the latter needed in LTE.



Co-authored-by: Filippo A. E. Nuccio <65080144+faenuccio@users.noreply.github.com>

### [2021-08-03T19:43:28+00:00](https://github.com/leanprover-community/mathlib/commit/d366672e3555b389880a2020cdeb94a7fbe38a4a)
feat(measure_theory/integration): add some `with_density` lemmas ([#8517](https://github.com/leanprover-community/mathlib/pull/#8517))

### [2021-08-03T17:55:51+00:00](https://github.com/leanprover-community/mathlib/commit/9d129dc25f67446c2ba72c6b5dd897a5a4ddbaa7)
feat(algebra/bounds): a few lemmas like `bdd_above (-s) ↔ bdd_below s` ([#8522](https://github.com/leanprover-community/mathlib/pull/#8522))

### [2021-08-03T16:52:11+00:00](https://github.com/leanprover-community/mathlib/commit/c543ec9af812744f063bbbdc3dcd3f7fb7cbf613)
feat(topology/algebra/ordered/basic): sequences tending to Inf/Sup ([#8524](https://github.com/leanprover-community/mathlib/pull/#8524))

We show that there exist monotone sequences tending to the Inf/Sup of a set in a conditionally complete linear order, as well as several related lemmas expressed in terms of `is_lub` and `is_glb`.

### [2021-08-03T15:41:09+00:00](https://github.com/leanprover-community/mathlib/commit/2b3cffd3d164dcda75b120d1b886aa2e9ba5b8e7)
feat(algebra/floor): notation for nat_floor and nat_ceil ([#8526](https://github.com/leanprover-community/mathlib/pull/#8526))

We introduce the notations ` ⌊a⌋₊` for `nat_floor a` and `⌈a⌉₊` for `nat_ceil a`, mimicking the existing notations for `floor` and `ceil` (with the `+` corresponding to the recent notation for `nnnorm`).

### [2021-08-03T11:13:43+00:00](https://github.com/leanprover-community/mathlib/commit/1700b3c6e40453dead047812f3e11c732daa6b78)
chore(ring_theory/fractional_ideal): make `coe : ideal → fractional_ideal` a `coe_t` ([#8529](https://github.com/leanprover-community/mathlib/pull/#8529))

This noticeably speeds up elaboration of `dedekind_domain.lean`, since it discourages the elaborator from going down a (nearly?)-looping path.

See also this Zulip thread: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priority.20of.20.60coe_sort_trans.60

### [2021-08-03T11:13:41+00:00](https://github.com/leanprover-community/mathlib/commit/5afd09aace106e3160dacca2484e15e74f35ab7c)
chore(data/matrix/basic): move bundled versions of `matrix.map` beneath the algebra structure ([#8528](https://github.com/leanprover-community/mathlib/pull/#8528))

This will give us an obvious place to add the bundled alg_hom version in a follow-up PR.

None of the moved lines have been modified.

Note that the git diff shows that instead of `matrix.map` moving down, the `algebra` structure has moved up.

### [2021-08-03T11:13:40+00:00](https://github.com/leanprover-community/mathlib/commit/3f4b83689aa7c670d4647e3844af47fff143f2fd)
feat(order/bounds): add `is_lub_pi` and `is_glb_pi` ([#8521](https://github.com/leanprover-community/mathlib/pull/#8521))

### [2021-08-03T11:13:39+00:00](https://github.com/leanprover-community/mathlib/commit/ad83714b2aa809ef257892b6c522419f403ba9f5)
feat(fractional_ideal): `coe : ideal → fractional_ideal` as ring hom ([#8511](https://github.com/leanprover-community/mathlib/pull/#8511))

This PR bundles the coercion from integral ideals to fractional ideals as a ring hom, and proves the missing `simp` lemmas that show the map indeed preserves the ring structure.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-08-03T09:27:49+00:00](https://github.com/leanprover-community/mathlib/commit/b681b6b9d71bb23a94a16361c79af79ba9648a1c)
chore(order/bounds): add `@[simp]` attrs, add `not_bdd_*_univ` ([#8520](https://github.com/leanprover-community/mathlib/pull/#8520))

### [2021-08-03T07:45:29+00:00](https://github.com/leanprover-community/mathlib/commit/10216790bc1a74f4abe44140a4bf6eb8dd0ba362)
feat(algebra/ordered_monoid): a few more `order_dual` instances ([#8519](https://github.com/leanprover-community/mathlib/pull/#8519))

* add `covariant.flip` and `contravariant.flip`;
* add `[to_additive]` to `group.covariant_iff_contravariant` and
  `covconv` (renamed to `group.covconv`);
* use `group.covconv` in
  `group.covariant_class_le.to_contravariant_class_le`;
* add some `order_dual` instances for `covariant_class` and
  `contravariant_class`;
* golf `order_dual.ordered_comm_monoid`.

### [2021-08-02T23:06:35+00:00](https://github.com/leanprover-community/mathlib/commit/0bef4a0b10dcb23c2de487257c625e608c742ed8)
feat(algebra/group_with_zero): pullback a `comm_cancel_monoid_with_zero` instance across an injective hom ([#8515](https://github.com/leanprover-community/mathlib/pull/#8515))

This generalizes `function.injective.cancel_monoid_with_zero` to the commutative case.

See also: https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/A.20submonoid.20of.20a.20.60cancel_monoid_with_zero.60.20also.20cancels

### [2021-08-02T21:14:46+00:00](https://github.com/leanprover-community/mathlib/commit/2568d41bca08f5d6bf39d915434c8447e21f42ee)
feat(data/matrix/basic): Add bundled versions of matrix.diagonal ([#8510](https://github.com/leanprover-community/mathlib/pull/#8510))

Also shows injectivity of `diagonal`.

### [2021-08-02T21:14:45+00:00](https://github.com/leanprover-community/mathlib/commit/77d6c8e893b87ab0d7404b988d1328d0c1363674)
feat(simps): better name for additivized simps-lemmas ([#8457](https://github.com/leanprover-community/mathlib/pull/#8457))

* When using `@[to_additive foo, simps]`, the additivized simp-lemmas will have name `foo` + projection suffix (or prefix)
* Also add an option for `@[to_additive]` to accept the attribute with the correct given name. This is only useful when adding the `@[to_additive]` attribute via metaprogramming, so this option cannot be set by the `to_additive` argument parser.

### [2021-08-02T20:14:32+00:00](https://github.com/leanprover-community/mathlib/commit/17f1d28cc8b21163cf1b904de206ea6d76729116)
chore(data/matrix): delete each of the `matrix.foo_hom_map_zero` ([#8512](https://github.com/leanprover-community/mathlib/pull/#8512))

These can already be found by `simp` since `matrix.map_zero` is a `simp` lemma, and we can manually use `foo_hom.map_matrix.map_zero` introduced by [#8468](https://github.com/leanprover-community/mathlib/pull/#8468) instead. They also don't seem to be used anywhere in mathlib, given that deleting them with no replacement causes no build errors.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-08-02T17:05:53+00:00](https://github.com/leanprover-community/mathlib/commit/17b1e7ceda747793213ea1629f564cabdf350e64)
feat(data/equiv/mul_add): add `equiv.(div,sub)_(left,right)` ([#8385](https://github.com/leanprover-community/mathlib/pull/#8385))

### [2021-08-02T14:22:13+00:00](https://github.com/leanprover-community/mathlib/commit/9a251f1e8cb758888774d45308d31e1803eb5489)
refactor(data/matrix/basic): merge duplicate algebra structures ([#8486](https://github.com/leanprover-community/mathlib/pull/#8486))

By putting the algebra instance in the same file as `scalar`, a future patch can probably remove `matrix.scalar` entirely (it's just another spelling of `algebra_map`).

Note that we actually had two instances of `algebra R (matrix n n R)` in different files, and the second one was strictly more general than the first. This removes the less general one.

Moving the imports around like this changes the number of simp lemmas available in downstream files, which can make `simp` slow enough to push a proof into a timeout.

A lot of files were expecting a transitive import of `algebra.algebra.basic` to import `data.fintype.card`, which it no longer does; hence the need to add this import explicitly.

There are no new lemmas or generalizations in this change; the old `matrix_algebra` has been deleted, and everything else has been moved with some variables renamed.

### [2021-08-02T12:31:20+00:00](https://github.com/leanprover-community/mathlib/commit/c8b7816d5a09e327bdb6421fa80d7595227e4ced)
feat(algebra/ordered_monoid): add_eq_bot_iff ([#8474](https://github.com/leanprover-community/mathlib/pull/#8474))

bot addition is saturating on the bottom. On the way, typeclass arguments
were relaxed to just `[add_semigroup α]`, and helper simp lemmas
added for `bot`.

The iff lemma added (`add_eq_bot`) is not exactly according to the naming convention, but matches the top lemma and related ones in the naming style, so the style is kept consistent.

There is an API proof available, but the defeq proof (using the top equivalent) was used based on suggestions.

### [2021-08-02T12:31:19+00:00](https://github.com/leanprover-community/mathlib/commit/f354c1b1a2c3dfb62b3a8bbb461c8bd3928b6ef5)
feat(order/bounded_lattice): add some disjoint lemmas ([#8407](https://github.com/leanprover-community/mathlib/pull/#8407))

This adds `disjoint.inf_left` and `disjoint.inf_right` (and primed variants) to match the existing `disjoint.sup_left` and `disjoint.sup_right`.

This also duplicates these lemmas to use set notation with `inter` instead of `inf`, matching the existing `disjoint.union_left` and `disjoint.union_right`.

### [2021-08-02T11:38:23+00:00](https://github.com/leanprover-community/mathlib/commit/af8e56af1525055973b799156c2f11aa789c2fa2)
docs(overview): add holder continuity ([#8506](https://github.com/leanprover-community/mathlib/pull/#8506))

### [2021-08-02T11:38:22+00:00](https://github.com/leanprover-community/mathlib/commit/25a42309785ee98dc8b07d2648252471eaca22ee)
chore(data/real/basic): cleanup ([#8501](https://github.com/leanprover-community/mathlib/pull/#8501))

* use `is_lub` etc in the statement of `real.exists_sup`, rename it to `real.exists_is_lub`;
* move parts of the proof of `real.exists_is_lub` around;

### [2021-08-02T10:07:38+00:00](https://github.com/leanprover-community/mathlib/commit/69c6adb5b3ef741ba7bb06c4f8ecb94bb5c3d5f9)
chore(data/int): move some lemmas from `basic` to a new file ([#8495](https://github.com/leanprover-community/mathlib/pull/#8495))

Move `least_of_bdd`, `exists_least_of_bdd`, `coe_least_of_bdd_eq`,
`greatest_of_bdd`, `exists_greatest_of_bdd`, and
`coe_greatest_of_bdd_eq` from `data.int.basic` to `data.int.least_greatest`.

### [2021-08-02T10:07:37+00:00](https://github.com/leanprover-community/mathlib/commit/4a9cbdb14a1097b4c8f088127eadc4a4ca344aa0)
feat(data/matrix/basic): provide equiv versions of `matrix.map`, `linear_map.map_matrix`, and `ring_hom.map_matrix`. ([#8468](https://github.com/leanprover-community/mathlib/pull/#8468))

This moves all of these definitions to be adjacent, adds the standard family of functorial simp lemmas, and relaxes some typeclass requirements.

This also renames `matrix.one_map` to `matrix.map_one` to match `matrix.map_zero`.

### [2021-08-02T08:51:21+00:00](https://github.com/leanprover-community/mathlib/commit/1b771af7cb2cac078411bfc8b32422d5aa5ddaeb)
feat(group_theory/coset): card_dvd_of_injective ([#8485](https://github.com/leanprover-community/mathlib/pull/#8485))

### [2021-08-02T02:56:39+00:00](https://github.com/leanprover-community/mathlib/commit/0f168d3eca68aaa78740775d5519c9e27870782d)
refactor(data/real/nnreal): use `ord_connected_subset_conditionally_complete_linear_order` ([#8502](https://github.com/leanprover-community/mathlib/pull/#8502))

### [2021-08-02T02:56:38+00:00](https://github.com/leanprover-community/mathlib/commit/5994df14df01f06b7fb9ebe0e24bdeb176cc79cd)
feat(algebra/group_power/lemmas): is_unit_pos_pow_iff ([#8420](https://github.com/leanprover-community/mathlib/pull/#8420))

### [2021-08-02T02:15:39+00:00](https://github.com/leanprover-community/mathlib/commit/db0cd4db3c6cfa758fedf3290f636e0b5ce79fe7)
chore(scripts): update nolints.txt ([#8505](https://github.com/leanprover-community/mathlib/pull/#8505))

I am happy to remove some nolints for you!

### [2021-08-01T22:56:38+00:00](https://github.com/leanprover-community/mathlib/commit/bfa6bbbce69149792cc009ab7f9bc146181dc051)
doc(algebra/algebra/basic): add a comment to make the similar definition discoverable ([#8500](https://github.com/leanprover-community/mathlib/pull/#8500))

I couldn't find this def, but was able to find lmul.

### [2021-08-01T21:03:45+00:00](https://github.com/leanprover-community/mathlib/commit/fdb0369fb00e7aa029d4a698492e4699ea37548c)
feat(algebra/group/semiconj): add `semiconj_by.reflexive` and `semiconj_by.transitive` ([#8493](https://github.com/leanprover-community/mathlib/pull/#8493))

### [2021-08-01T21:03:44+00:00](https://github.com/leanprover-community/mathlib/commit/60c378d07cff6546f4544fd09df02432f58253bf)
feat(algebra/ordered_group): add `order_iso.inv` ([#8492](https://github.com/leanprover-community/mathlib/pull/#8492))

* add `order_iso.inv` and `order_iso.neg`;
* use it to golf a few proofs;
* use `alias` to generate some `imp` lemmas from `iff` lemmas;
* generalize some lemmas about `order_iso` from `preorder` to `has_le`.

### [2021-08-01T21:03:43+00:00](https://github.com/leanprover-community/mathlib/commit/1530d7672314ccb428983320550e78b0ed2bda89)
feat(group_theory/congruence): add `con.lift_on_units` etc ([#8488](https://github.com/leanprover-community/mathlib/pull/#8488))

Add a helper function that makes it easier to define a function on
`units (con.quotient c)`.

### [2021-08-01T21:03:42+00:00](https://github.com/leanprover-community/mathlib/commit/9c4dd02d76004b86c48d70effcabf07cdbe986b0)
feat(group_theory/order_of_element): order_of_dvd_iff_gpow_eq_one ([#8487](https://github.com/leanprover-community/mathlib/pull/#8487))

Version of `order_of_dvd_iff_pow_eq_one` for integer powers

### [2021-08-01T21:03:41+00:00](https://github.com/leanprover-community/mathlib/commit/9194f20cf0a8ff57d3777fb81eb30a9a30fc470a)
feat(data/nat/prime): pow_dvd_of_dvd_mul_right ([#8483](https://github.com/leanprover-community/mathlib/pull/#8483))




Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-08-01T21:03:40+00:00](https://github.com/leanprover-community/mathlib/commit/b0991037241ae62bdb30adfeff6f0ee15cb2a9dd)
feat(group_theory/subgroup): add `subgroup.forall_gpowers` etc ([#8470](https://github.com/leanprover-community/mathlib/pull/#8470))

* add `subgroup.forall_gpowers`, `subgroup.exists_gpowers`,
  `subgroup.forall_mem_gpowers`, and `subgroup.exists_mem_gpowers`;
* add their additive counterparts;
* drop some explicit lemmas about `add_subgroup.gmultiples`:
  `to_additive` can generate them now.

### [2021-08-01T21:03:39+00:00](https://github.com/leanprover-community/mathlib/commit/52a2e8b919ebaf6a7cc3f092ee25073f07a27b13)
chore(algebra/group/hom_instances): add monoid_hom versions of linear_map lemmas ([#8461](https://github.com/leanprover-community/mathlib/pull/#8461))

I mainly want the additive versions, but we may as well get the multiplicative ones too.

This also adds the missing `monoid_hom.map_div` and some other division versions of subtraction lemmas.

### [2021-08-01T21:03:36+00:00](https://github.com/leanprover-community/mathlib/commit/894fb0c55fed3971805cf3efcde15d7df36ba649)
feat(data/nat/totient): totient_prime_pow ([#8353](https://github.com/leanprover-community/mathlib/pull/#8353))




Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-08-01T19:11:26+00:00](https://github.com/leanprover-community/mathlib/commit/7249afb24c3933c204dd7aa49c4a1e3a96a47825)
feat(measure_theory/[integrable_on, set_integral]): integrals on two ae-eq sets are equal ([#8440](https://github.com/leanprover-community/mathlib/pull/#8440))

### [2021-08-01T19:11:25+00:00](https://github.com/leanprover-community/mathlib/commit/d3c943b777265e02946e183d063009c3565c54c4)
refactor(data/set/lattice): add congr lemmas for `Prop`-indexed `Union` and `Inter` ([#8260](https://github.com/leanprover-community/mathlib/pull/#8260))

Thanks to new `@[congr]` lemmas `Union_congr_Prop` and `Inter_congr_Prop`, `simp` can simplify `p y` in `⋃ y (h : p y), f y`. As a result, LHS of many lemmas (e.g., `Union_image`) is no longer in `simp` normal form. E.g.,
```lean
lemma bUnion_range {f : ι → α} {g : α → set β} : (⋃x ∈ range f, g x) = (⋃y, g (f y)) :=
```
can no longer be a `@[simp]` lemma because `simp` simplifies `⋃x ∈ range f, g x` to `⋃ (x : α) (h : ∃ i, f i = x), g x`, then to `⋃ (x : α) (i : α) (h : f i = x), g x`. So, we add
```lean
@[simp] lemma Union_Union_eq' {f : ι → α} {g : α → set β} :
  (⋃ x y (h : f y = x), g x) = ⋃ y, g (f y) :=
```

Also, `Union` and `Inter` are semireducible, so one has to explicitly convert between these operations and `supr`/`infi`.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-08-01T17:17:28+00:00](https://github.com/leanprover-community/mathlib/commit/f961b28041ad901e12ff55653c93a640000da4d5)
chore(deprecated/*): Make deprecated classes into structures ([#8178](https://github.com/leanprover-community/mathlib/pull/#8178))

I make the deprecated classes `is_group_hom`, `is_subgroup`, ... into structures, and delete some deprecated constructions which become inconvenient or essentially unusable after these changes. I do not completely remove all deprecated imports in undeprecated files, however I push these imports much further towards the edges of the hierarchy. 

More detailed comments about what is going on here:

In the `src/deprecated/` directory, classes such as `is_ring_hom` and `is_subring` are defined (and the same for groups, fields, monoids...). These are predicate classes on functions and sets respectively, formerly used to handle ring morphisms and subrings before both were bundled. Amongst other things, this PR changes all the relevant definitions from classes to structures and then picks up the pieces (I will say more about what this means later). Before I started on this refactor, my opinion was that these classes should be turned into structures, but should be left in mathlib. After this refactor, I am now moving towards the opinion that it would be no great loss if these structures were removed completely -- I do not see any time when we really need them.

The situation I previously had in mind where the substructures could be useful is if one is (in the middle of a long tactic proof) defining an explicit subring of a ring by first defining it as a subset, or `add_subgroup` or whatever, and then doing some mathematics to prove that this subset is closed under multiplication, and hence proving that it was a subring after all. With the old approach this just involves some `S : set R` with more and more properties being proved of it and added to the type class search as the proof progresses. With the bundled set-up, we might have `S : set R` and then later on we get `S_subring : subring R` whose underlying subset equals S, and then all our hypotheses about `S` built up during the proof can no longer be used as rewrites, we need to keep rewriting or `change`ing `x \in S_subring` to `x \in S` and back again. This issue showed up only once in the refactor, in `src/ring_theory/integral_closure.lean`, around line 230, where I refactored a proof to avoid the deprecated structures and it seemed to get a bit longer. I can definitely live with this.

One could imagine a similar situation with morphisms (define f as a map between rings, and only later on prove that it's a ring homomorphism) but actually I did not see this situation arise at all. In fact the main issue I ran into with morphism classes was the following (which showed up 10 or so times): there are many constructions in mathlib which actually turn out to be, or (even worse) turn out under some extra assumptions to be, maps which preserve some structure. For example `multiset.map (f : X -> Y) : multiset X -> multiset Y` (which was in mathlib since it was born IIRC) turns out to be an add_group_hom, once the add_group structure is defined on multisets. So here I had a big choice to make: should I actually rename `multiset.map` to be `private multiset.map_aux` and then redefine `multiset.map` to be the `add_monoid_hom`? In retrospect I think that there's a case for this. In fact `data.multiset.basic` is the biggest source of these issues -- `map` and `sum` and `countp` and `count` are all `add_monoid_hom`s. I did not feel confident about ripping out these fundamental definitions so I made four new ones, `map_add_monoid_hom`, `sum_add_monoid_hom` etc. The disadvantage with this approach is that again rewrites get a bit more painful: some lemma which involves `map` may need to be rewritten so that it involves `map_add_monoid_hom` so that one can apply `add_monoid_hom.map_add`, and then perhaps rewritten back so that one can apply other rewrites. Random example: line 43 of `linear_algebra.lagrange`, where I have to rewrite `coe_eval_ring_hom` in both directions. Let me say that I am most definitely open to the idea of renaming `multiset.map_add_monoid_hom` to `multiset.map` and just nuking our current `multiset.map` or making it private or `map_aux` or whatever but we're already at 92 files changed so it might be best to get this over with and come up with a TODO list for future tidy-ups. Another example: should the fields of `complex` be `re'` and `im'`, and `complex.re` be redefined as the R-linear map? Right now in mathlib we only use the fact that it's an `add_group_hom`, and I define `re_add_group_hom` for this. Note however one can not always get away with this renaming trick, for example there are instances when a certain fundamental construction only preserves some structure under additional conditions -- for example `has_inv.inv` on groups is only a group homomorphism when the underlying group is abelian (and the same for `pow` and `gpow`). In the past this was dealt with by a typeclass `is_group_hom` on `inv` which fired in the presence of a `comm_group` but not otherwise; now this has to be dealt with by a second definition `inv_monoid_hom` whose underlying function is `inv`. You can't just get away with applying the proof of `inv (a * b) = inv a * inv b` when you need it, because sometimes you want to apply things like `monoid_hom.map_prod` which needs a `monoid_hom` as input, so won't work with `inv`: you need to rewrite one way, apply `monoid_hom.map_prod` and then rewrite back the other way now :-/ I would say that this was ultimately the main disadvantage of this approach, but it seems minor really and only shows up a few times, and if we go ahead with the renaming plan it will happen even fewer times.

I had initially played with the idea of just completely removing all deprecated imports in non-deprecated files, but there were times near the end when I just didn't feel like it (I just wanted it to be over, I was scared to mess around in `control` or `test`), so I removed most of them but added some deprecated imports higher up the tree (or lower down the tree, I never understand which way up this tree is, I mean nearer the leaves -- am I right in that computer scientists for some reason think the root of a tree is at the top?). It will not be too hard for an expert to remove those last few deprecated imports in src outside the `deprecated` directory in subsequent PR's, indeed I could do it myself but I might I might need some Zulip help. Note: it used to be the case that `subring` imported `deprecated.subring`; this is now the other way around, which is much more sensible (and matches with submonoid). Outside the deprecated directory, there are only a few deprecated imports: `control.fold` (which I don't really want to mess with),`group_theory.free_abelian_group` (there is a bunch of `seq` stuff which I am not sure is ever used but I just couldn't be bothered, it might be the sort of refactor which someone finds interesting or fun though), `ring_theory.free_comm_ring` (this file involves some definitional abuse which either needs to be redone "mathematically" or rewritten to work with bundled morphisms) and `topology.algebra.uniform_group` (which I think Patrick is refactoring?) and a test file.

If you look at the diffs you see that various things are deleted (lots of `is_add_monoid_hom foo` proofs), but many of these deletions come with corresponding additions (e.g. a new `foo_group_hom` definition if it was not there already, plus corresponding `simp` lemma, which is randomly either a `coe` or an `apply` depending on what mood I was in; this could all be done with `@[simps]` trickery apparently but I didn't read the thread carefully yet). Once nice achievement was that I refactored a bunch of basic ring and field theory to avoid the `is_` classes completely, which I think is a step in the right direction (people were occasionally being forced to use deprecated stuff when doing stuff like Galois theory because some fundamental things used to use them; this is no longer the case -- in particular I think Abel-Ruffini might now be deprecated-free, or very nearly so). 

`finset.sum_hom` and `finset.prod_hom` are gone. It is very funny to do a search for these files in mathlib current master as I write -- 98% of the time they're used, they're used backwards (with `.symm` or `\l` with a rewrite). The bundled versions (`monoid_hom.map_prod` etc) are written the other way around. I could have just left them and not bothered, but it seemed easier just to get rid of them if we're moving to bundled morphisms. One funny observation was that unary `-` seemed to be a special case: we
seem to prefer `-\sum i, f i` to `\sum i, -(f i)` . For almost every other function, we want it to go the other way.

### [2021-08-01T11:40:51+00:00](https://github.com/leanprover-community/mathlib/commit/9ed4380115b8140ce09eb66d7f27312875535ec5)
feat(measure_theory/vector_measure): define the pullback and restriction of a vector measure ([#8408](https://github.com/leanprover-community/mathlib/pull/#8408))

### [2021-08-01T09:36:34+00:00](https://github.com/leanprover-community/mathlib/commit/5b9b4557f7cf365cbe3ffd001168c43c6d3b1937)
chore(order/complete_lattice): generalize `Sup_eq_supr'`, add lemmas ([#8484](https://github.com/leanprover-community/mathlib/pull/#8484))

* `Sup_eq_supr'` only needs `[has_Sup α]`, add `Inf_eq_infi'`;
* add `supr_range'`, `infi_range'`, `Sup_image'`, `Inf_image'`
  lemmas that use supremum/infimum over subtypes and only require
  `[has_Sup]`/`[has_Inf]`.

### [2021-08-01T09:36:33+00:00](https://github.com/leanprover-community/mathlib/commit/de78d4245cbb8dd6d7c3faed688a4b1e0747ca0c)
feat(order/rel_iso): add `equiv.to_order_iso` ([#8482](https://github.com/leanprover-community/mathlib/pull/#8482))

Sometimes it's easier to show `monotone e` and `monotone e.symm` than
`e x ≤ e y ↔ x ≤ y`.

### [2021-08-01T09:36:33+00:00](https://github.com/leanprover-community/mathlib/commit/4f2006ed8d42531ea0d3a268a816b439fd1df3ca)
chore(order/iterate): slightly generalize 2 lemmas ([#8481](https://github.com/leanprover-community/mathlib/pull/#8481))

### [2021-08-01T08:34:12+00:00](https://github.com/leanprover-community/mathlib/commit/2063a528c5bd2545dd250111956691821f76d58e)
feat(order/partial_sups): complete lattice lemmas ([#8480](https://github.com/leanprover-community/mathlib/pull/#8480))

### [2021-08-01T03:28:41+00:00](https://github.com/leanprover-community/mathlib/commit/79bc7323b164aebd000524ebafd198eb0e17f956)
feat(order/galois_connection): formula for `upper_bounds (l '' s)` ([#8478](https://github.com/leanprover-community/mathlib/pull/#8478))

* upgrade `galois_connection.upper_bounds_l_image_subset` and
  `galois_connection.lower_bounds_u_image` to equalities;
* prove `bdd_above (l '' s) ↔ bdd_above s` and
  `bdd_below (u '' s) ↔ bdd_below s`;
* move `galois_connection.dual` to the top and use it in some proofs;
* use `order_iso.to_galois_connection` to transfer some of these
  results to `order_iso`s;
* rename `rel_iso.to_galois_insertion` to `order_iso.to_galois_insertion`.

### [2021-07-31T21:11:47+00:00](https://github.com/leanprover-community/mathlib/commit/4c2edb00489415421b09d08f2bcce631f6d29d83)
feat(data/equiv/mul_add): add `units.coe_inv` ([#8477](https://github.com/leanprover-community/mathlib/pull/#8477))

* rename old `units.coe_inv` to `units.coe_inv''`;
* add new `@[simp, norm_cast, to_additive] lemma units.coe_inv` about
  coercion of units of a group;
* add missing `coe_to_units`.

### [2021-07-31T21:11:46+00:00](https://github.com/leanprover-community/mathlib/commit/6c6dd04a824337bb11ef36c948b7bbf78c3f1f77)
feat(logic/relation): add `*.comap` for `reflexive`, `symmetric`, and `transitive` ([#8469](https://github.com/leanprover-community/mathlib/pull/#8469))

### [2021-07-31T20:17:15+00:00](https://github.com/leanprover-community/mathlib/commit/0827f3a6297727b5942e4c3e920a4f2e479b64fb)
feat(topology/metric_space/holder): add `holder_on_with` ([#8454](https://github.com/leanprover-community/mathlib/pull/#8454))




Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-07-31T18:55:07+00:00](https://github.com/leanprover-community/mathlib/commit/b3943dc00deeb86fb03201472046b80b294f0e0d)
feat(algebra/archimedean): `order_dual α` is archimedean ([#8476](https://github.com/leanprover-community/mathlib/pull/#8476))

### [2021-07-31T16:29:04+00:00](https://github.com/leanprover-community/mathlib/commit/339a122ac0bd7f50c375aee9cd50af1f846ed2aa)
chore(data/sym): move `data.sym` and `data.sym2` to `data.sym.basic` and `data.sym.sym2` ([#8471](https://github.com/leanprover-community/mathlib/pull/#8471))

### [2021-07-31T13:15:04+00:00](https://github.com/leanprover-community/mathlib/commit/0a480168c05b91d66ea929de6dbfa83c626a36f6)
doc(analysis/calculus/conformal): fix a docstring ([#8479](https://github.com/leanprover-community/mathlib/pull/#8479))

Fix a grammar mistake

### [2021-07-30T16:11:00+00:00](https://github.com/leanprover-community/mathlib/commit/6e400b90ae0c2bbbddb67f78f0dc4d63a1d4a12f)
feat(data/matrix/basic): update_{column,row}_subsingleton ([#8422](https://github.com/leanprover-community/mathlib/pull/#8422))

### [2021-07-30T12:33:57+00:00](https://github.com/leanprover-community/mathlib/commit/977063f6c2ff2a9e9063856e627904af75a2ad90)
chore(group_theory/congruence): a few `simp` lemmas ([#8452](https://github.com/leanprover-community/mathlib/pull/#8452))

* add `con.comap_rel`;
* add `@[simp]` to `con.ker_rel`;
* replace `con.comp_mk'_apply` with `con.coe_mk'`;
* [unrelated] add `commute.semiconj_by`.

### [2021-07-30T07:20:29+00:00](https://github.com/leanprover-community/mathlib/commit/98b0d18a430d08380319f4241b16caceed02c08e)
feat(analysis/normed_space/SemiNormedGroup/kernel): Fix universes + add explicit ([#8467](https://github.com/leanprover-community/mathlib/pull/#8467))


See associated discussion from [zulip](https://leanprover.zulipchat.com/#narrow/stream/267928-condensed-mathematics/topic/for_mathlib/near/247575730)

### [2021-07-30T02:40:20+00:00](https://github.com/leanprover-community/mathlib/commit/8c89a525d8a09b853054abececefee547a1d41d5)
feat(algebra/ordered_monoid_lemmas): add one `strict_mono` lemma and a few doc-strings ([#8465](https://github.com/leanprover-community/mathlib/pull/#8465))

The product of strictly monotone functions is strictly monotone (and some doc-strings).

[Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/monotonicity.20for.20sums.20and.20products.20of.20monotone.20functions)

### [2021-07-29T15:02:31+00:00](https://github.com/leanprover-community/mathlib/commit/a4f16538994e6478ea2d2a443ca752e51a00f607)
feat(ring_theory): Dedekind domains have invertible fractional ideals  ([#8396](https://github.com/leanprover-community/mathlib/pull/#8396))

This PR proves the other side of the equivalence `is_dedekind_domain → is_dedekind_domain_inv`, and uses this to provide a `comm_group_with_zero (fractional_ideal A⁰ K)` instance.

Co-Authored-By: Ashvni ashvni.n@gmail.com
Co-Authored-By: Filippo A. E. Nuccio filippo.nuccio@univ-st-etienne.fr



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-07-29T13:21:06+00:00](https://github.com/leanprover-community/mathlib/commit/69e3c79c3db1193908b372b143aaef4c3e15932a)
feat(logic/unique): unique_of_subsingleton ([#8415](https://github.com/leanprover-community/mathlib/pull/#8415))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-07-29T11:52:13+00:00](https://github.com/leanprover-community/mathlib/commit/7a8915084e4ea2d89c44128c67993f8db3179d07)
doc(data/nat/pairing): fix ascii table markdown ([#8460](https://github.com/leanprover-community/mathlib/pull/#8460))

### [2021-07-29T06:51:42+00:00](https://github.com/leanprover-community/mathlib/commit/cd6f2720b829061d9f01a2ee7bf4bc6ef53fedde)
feat(order/*): a bunch of lemmas about `order_iso` ([#8451](https://github.com/leanprover-community/mathlib/pull/#8451))

### [2021-07-28T22:58:41+00:00](https://github.com/leanprover-community/mathlib/commit/6d3e93626dc338de8d107e2a45106460036c1efd)
feat(measure_theory): add @[to_additive] ([#8142](https://github.com/leanprover-community/mathlib/pull/#8142))

This PR adds `@[to_additive]` to `haar_measure` and everything that depends on. This will allow us to define the Lebesgue measure on `ℝ` and `ℝ ^ n` as the Haar measure (or just show that it is equal to it).



Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-07-28T21:04:18+00:00](https://github.com/leanprover-community/mathlib/commit/870b9d83cf2a7300a15e5228aa00ec2571514337)
ci(bors.toml): add merge-conflict to block_labels ([#8455](https://github.com/leanprover-community/mathlib/pull/#8455))

### [2021-07-28T21:04:17+00:00](https://github.com/leanprover-community/mathlib/commit/92a5be8d1e656af39e1f73d66b73f6a0155a326e)
feat(ring,group,monoid): map_equiv lemmas for different structures ([#8453](https://github.com/leanprover-community/mathlib/pull/#8453))

There is some inconsistency in the statements of these lemmas because there is a coercion from `ring_equiv` to `ring_hom`, but not `mul_equiv` to `monoid_hom`.



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-07-28T19:44:39+00:00](https://github.com/leanprover-community/mathlib/commit/7180d2f78f8430b40b4f50ba06d163f11fd5e233)
feat(group_theory/coset): Show that `quotient_group.left_rel` and `left_coset_equivalence` are the same thing ([#8382](https://github.com/leanprover-community/mathlib/pull/#8382))





Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-07-28T17:10:49+00:00](https://github.com/leanprover-community/mathlib/commit/32c82274f372309038f0e9c537904619581d670e)
feat(analysis/normed_space/basic): define inclusion `locally_constant X G → C(X, G)` as various types of bundled morphism ([#8448](https://github.com/leanprover-community/mathlib/pull/#8448))

### [2021-07-28T14:08:17+00:00](https://github.com/leanprover-community/mathlib/commit/b71d38ce41dac00fc6d45e77d1d30e1d38a666b7)
feat(algebra/big_operators/basic): add lemmas about prod and sum of finset.erase ([#8449](https://github.com/leanprover-community/mathlib/pull/#8449))

This adds:
* `finset.prod_erase_mul`
* `finset.mul_prod_erase`
* `finset.sum_erase_add`
* `finset.add_sum_erase`

Co-authored-by: Hanting Zhang <hantingzhang03@gmail.com>

### [2021-07-28T14:08:16+00:00](https://github.com/leanprover-community/mathlib/commit/0ccd2f669f0a6564f823680b648a8d41c313daae)
feat(data/dfinsupp): add simp lemma `single_eq_zero` ([#8447](https://github.com/leanprover-community/mathlib/pull/#8447))

This matches `finsupp.single_eq_zero`.

Also adds `dfinsupp.ext_iff`, and changes some lemma arguments to be explicit.

### [2021-07-28T11:16:48+00:00](https://github.com/leanprover-community/mathlib/commit/4acfa92481620ac8c2213841993f89c8485dc95f)
chore(algebra/floor): add a few trivial `simp` lemmas about `floor` ([#8450](https://github.com/leanprover-community/mathlib/pull/#8450))

### [2021-07-28T09:02:05+00:00](https://github.com/leanprover-community/mathlib/commit/30ff935005c2d771039236b5dc535fb243f60855)
feat(topology/algebra): topological fields ([#8316](https://github.com/leanprover-community/mathlib/pull/#8316))

Including the completion of completeable topological fields.
From the perfectoid spaces project.

### [2021-07-28T02:23:58+00:00](https://github.com/leanprover-community/mathlib/commit/52e6e4cfd8778c6d783c297b361a44e2d9ceca72)
chore(scripts): update nolints.txt ([#8446](https://github.com/leanprover-community/mathlib/pull/#8446))

I am happy to remove some nolints for you!

### [2021-07-28T00:40:18+00:00](https://github.com/leanprover-community/mathlib/commit/7c5fa72938e385e5f0868a71bacab1956c532b2c)
refactor(group_theory/sylow): Extract a lemma from the proof of Cauchy's theorem ([#8376](https://github.com/leanprover-community/mathlib/pull/#8376))

Also added one other consequence of card_modeq_card_fixed_points.





Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-07-28T00:40:17+00:00](https://github.com/leanprover-community/mathlib/commit/37fc4cf40c7e9cc3b2bf6b88036b7a64c0bd9a6c)
feat(group_theory/subgroup): equiv_map_of_injective ([#8371](https://github.com/leanprover-community/mathlib/pull/#8371))

Also for rings and submonoids. The version for modules, `submodule.equiv_map_of_injective`, was already there.



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-07-27T23:02:33+00:00](https://github.com/leanprover-community/mathlib/commit/cc7627a6dfd7a568e50775d25d8ba258a640e7b7)
feat(analysis/normed_space/basic): define `normed_group` structure induced by injective group homomorphism ([#8443](https://github.com/leanprover-community/mathlib/pull/#8443))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-07-27T23:02:32+00:00](https://github.com/leanprover-community/mathlib/commit/1b0391a2976d24149a26d5e4bc5b3fc2f9fe1ce7)
feat(data/nat/totient): totient_mul ([#8441](https://github.com/leanprover-community/mathlib/pull/#8441))

Also made `data/nat/totient` import `data/zmod/basic` instead of the other way round because I think people are more likely to want `zmod` but not `totient` than `totient` but not `zmod`.

Also deleted the deprecated `gpowers` because it caused a name clash in `group_theory/subgroup` when the imports were changed.

### [2021-07-27T23:02:31+00:00](https://github.com/leanprover-community/mathlib/commit/a445c45c414e4e4e25167ccf05579fa80b0e9774)
feat(measure_theory/interval_integrable): a monotone function is interval integrable ([#8398](https://github.com/leanprover-community/mathlib/pull/#8398))

### [2021-07-27T19:34:42+00:00](https://github.com/leanprover-community/mathlib/commit/9f75dc84b719c709455525ffa9c729b5d9b1c3e6)
feat(measure_theory/lebesgue_measure): volume s ≤ diam s ([#8437](https://github.com/leanprover-community/mathlib/pull/#8437))

* for `s : set real`, `volume s ≤ diam s`;
* for `s : set (ι → real)`, `volume s ≤ ∏ i, diam (eval i '' s) ≤ diam s ^ fintype.card ι`.

### [2021-07-27T19:34:41+00:00](https://github.com/leanprover-community/mathlib/commit/5375918f5ca1d24a80aec6b6a324c573a37f9b4f)
feat(topology/metric_space/antilipschitz): ediam of image/preimage ([#8435](https://github.com/leanprover-community/mathlib/pull/#8435))

Also review API

### [2021-07-27T19:34:40+00:00](https://github.com/leanprover-community/mathlib/commit/d57b6f9bc054331901d8feaefb72f711b8d86876)
chore(data/dfinsupp): add yet more map_dfinsupp_sum lemmas ([#8400](https://github.com/leanprover-community/mathlib/pull/#8400))

As always, the one of quadratically many combinations of `FOO_hom.map_BAR_sum` is never there when you need it.

### [2021-07-27T19:34:39+00:00](https://github.com/leanprover-community/mathlib/commit/aea21af19b227a3352dcba4933299ad9565ac9f5)
feat(ring_theory): `is_dedekind_domain_inv` implies `is_dedekind_domain` ([#8315](https://github.com/leanprover-community/mathlib/pull/#8315))

Co-Authored-By: Ashvni ashvni.n@gmail.com
Co-Authored-By: Filippo A. E. Nuccio filippo.nuccio@univ-st-etienne.fr

### [2021-07-27T19:34:38+00:00](https://github.com/leanprover-community/mathlib/commit/a052dd6c9cdae8052bf533689cd0ed253e427be9)
doc(algebra/invertible): implementation notes about `invertible` instances ([#8197](https://github.com/leanprover-community/mathlib/pull/#8197))

In the discussion on [#8195](https://github.com/leanprover-community/mathlib/pull/#8195), I suggested to add these implementation notes. Creating a new PR should allow for a bit more direct discussion on the use of and plans for `invertible`.

### [2021-07-27T19:34:37+00:00](https://github.com/leanprover-community/mathlib/commit/2ea73d1c6a42e433caac2fb443a0fc77005bc600)
feat(analysis/normed_space/SemiNormedGroup): has_cokernels ([#7628](https://github.com/leanprover-community/mathlib/pull/#7628))

# Cokernels in SemiNormedGroup₁ and SemiNormedGroup

We show that `SemiNormedGroup₁` has cokernels
(for which of course the `cokernel.π f` maps are norm non-increasing),
as well as the easier result that `SemiNormedGroup` has cokernels.

So far, I don't see a way to state nicely what we really want:
`SemiNormedGroup` has cokernels, and `cokernel.π f` is norm non-increasing.
The problem is that the limits API doesn't promise you any particular model of the cokernel,
and in `SemiNormedGroup` one can always take a cokernel and rescale its norm
(and hence making `cokernel.π f` arbitrarily large in norm), obtaining another categorical cokernel.



Co-authored-by: Patrick Massot <patrickmassot@free.fr>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-07-27T16:37:38+00:00](https://github.com/leanprover-community/mathlib/commit/768980a90c2bdf2b4ad957efcd2f4c86c60be262)
feat(topology/locally_constant/basic): coercion of locally-constant function to continuous map ([#8444](https://github.com/leanprover-community/mathlib/pull/#8444))

### [2021-07-27T16:37:36+00:00](https://github.com/leanprover-community/mathlib/commit/3faee064238c1407c4a1ee2bcbe07a4f3fe97cda)
feat(algebra/order_functions): max/min commutative and other props ([#8416](https://github.com/leanprover-community/mathlib/pull/#8416))

The statements of the commutivity, associativity, and left commutativity of min and max are stated only in the rewrite lemmas, and not in their "commutative" synonyms.
This prevents them from being discoverable by suggest and related tactics. We now provide the synonyms explicitly.

### [2021-07-27T16:37:35+00:00](https://github.com/leanprover-community/mathlib/commit/6c2f80c917ffa2424c094cc1399a67efc02882ef)
feat(category_theory/limits): disjoint coproducts ([#8380](https://github.com/leanprover-community/mathlib/pull/#8380))

Towards a more detailed hierarchy of categorical properties.

### [2021-07-27T16:37:34+00:00](https://github.com/leanprover-community/mathlib/commit/bb44e1a0f9822d11a2d3553c8aee8df44c73c7ec)
feat(category_theory/subobject): generalise bot of subobject lattice ([#8232](https://github.com/leanprover-community/mathlib/pull/#8232))

### [2021-07-27T13:18:35+00:00](https://github.com/leanprover-community/mathlib/commit/b61ce0274061af67267cb99a154c52897e9129d7)
feat(number_theory/padics/padic_norm): add p^v(n) | n ([#8442](https://github.com/leanprover-community/mathlib/pull/#8442))

Add some API for `padic_val_nat` (a convenient function for e.g. Sylow theory).



Co-authored-by: Ines W <ineswright7@gmail.com>

### [2021-07-27T10:18:45+00:00](https://github.com/leanprover-community/mathlib/commit/7ae8da452d45a90e8a7ee6f0aa2df86a8583e75d)
fix(algebra/big_operators/ring): `finset.sum_mul_sum` is true in a non-assoc non-unital semiring ([#8436](https://github.com/leanprover-community/mathlib/pull/#8436))

### [2021-07-27T10:18:44+00:00](https://github.com/leanprover-community/mathlib/commit/3b590f31ab9ebf3c8ca11aa8142791f3ea19311d)
feat(logic/embedding): add a coe instance from equiv to embeddings ([#8323](https://github.com/leanprover-community/mathlib/pull/#8323))

### [2021-07-27T08:42:12+00:00](https://github.com/leanprover-community/mathlib/commit/23e7c841f30d2e3e481abd3393e8d6e13957a615)
fix(algebra/ordered_group): add missing `to_additive`, fix `simps` ([#8429](https://github.com/leanprover-community/mathlib/pull/#8429))

* Add `order_iso.add_left` and `order_iso.add_right`.
* Use `to_equiv :=` instead of `..` to ensure
  `rfl : (order_iso.mul_right a).to_equiv = equiv.mul_right a`.
* Simplify unapplied `(order_iso.mul_left a).symm` etc.

### [2021-07-27T08:42:11+00:00](https://github.com/leanprover-community/mathlib/commit/391746b1c7c5b3459a5f987d7d1d76093a669015)
feat(data/zmod/basic): chinese remainder theorem ([#8356](https://github.com/leanprover-community/mathlib/pull/#8356))




Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-07-27T08:42:10+00:00](https://github.com/leanprover-community/mathlib/commit/65006d276396b4c44fcaffeed1165daac99cf780)
feat(linear_algebra/linear_independent): finsupp.total is not equal to a vector outside the support of the coefficients ([#8338](https://github.com/leanprover-community/mathlib/pull/#8338))

…

### [2021-07-27T08:42:09+00:00](https://github.com/leanprover-community/mathlib/commit/7e37f2088db52dcbcefdd0aa82e06ac448a57fe3)
feat(group_theory/perm/cycles): more lemmas ([#8175](https://github.com/leanprover-community/mathlib/pull/#8175))

### [2021-07-27T07:49:28+00:00](https://github.com/leanprover-community/mathlib/commit/d99788a6afce9bdad123076e28bc8ce9dd2fbf3e)
feat(measure_theory/borel_space): lemmas about `is_pi_system_Ioo` and `finite_spanning_sets_in` ([#8434](https://github.com/leanprover-community/mathlib/pull/#8434))

### [2021-07-27T07:49:27+00:00](https://github.com/leanprover-community/mathlib/commit/eae3eadfa1eba1598c1255bc85182a5ad98d7625)
feat(topology/instances/ennreal): diameter of `s : set real` ([#8433](https://github.com/leanprover-community/mathlib/pull/#8433))

### [2021-07-27T06:14:26+00:00](https://github.com/leanprover-community/mathlib/commit/fb815d7bdfa895e40fec46b4cbbc6241378a1c9a)
feat(algebra/ring/basic): coercions of ring_hom.id ([#8439](https://github.com/leanprover-community/mathlib/pull/#8439))

Two basic lemmas about the identity map as a ring hom, split off from [#3292](https://github.com/leanprover-community/mathlib/pull/#3292) at @eric-wieser's suggestion.

### [2021-07-26T23:52:54+00:00](https://github.com/leanprover-community/mathlib/commit/e9309e376cf041a005a4ad18248d2a4d1b3b556e)
chore(data/equiv/list): rename `encodable.fintype.encodable` to `fintype.encodable` ([#8428](https://github.com/leanprover-community/mathlib/pull/#8428))

### [2021-07-26T22:05:39+00:00](https://github.com/leanprover-community/mathlib/commit/26528b752e4e85ed00b3d2a8e2bbf5e6763f3ae1)
chore(data/set): add a couple of lemmas ([#8430](https://github.com/leanprover-community/mathlib/pull/#8430))

### [2021-07-26T15:58:30+00:00](https://github.com/leanprover-community/mathlib/commit/0190177e70290e2d791595986e0204ad70f5b0a9)
feat(group_theory/subgroup): eq_top_of_le_card and eq_bot_of_card_le ([#8414](https://github.com/leanprover-community/mathlib/pull/#8414))

Slight strengthenings of the lemmas `eq_top_of_card_eq` and `eq_bot_of_card_eq`.

### [2021-07-26T15:58:29+00:00](https://github.com/leanprover-community/mathlib/commit/d8fc081702ac8745def25f83f4ecc07dd945e0db)
chore(data/pnat/basic): rename `bot_eq_zero` to `bot_eq_one`, generalize from `Prop` to `Sort*` ([#8412](https://github.com/leanprover-community/mathlib/pull/#8412))

### [2021-07-26T15:58:28+00:00](https://github.com/leanprover-community/mathlib/commit/1dc4bef92bf79ae616ed3c8ba45ca8d5f8410c2b)
feat(ring_theory): shortcut lemmas for `coe : ideal R → fractional_ideal R⁰ K` ([#8395](https://github.com/leanprover-community/mathlib/pull/#8395))

These results were already available, but in a less convenient form that e.g. asked you to prove an inclusion of submonoids `S ≤ R⁰`. Specializing them to the common case where the fractional ideal is in the field of fractions should save a bit of headache in the common cases.

### [2021-07-26T15:58:27+00:00](https://github.com/leanprover-community/mathlib/commit/708b25d20e98e7d277f8723c9f135195a2e9ec3d)
feat(ring_theory): (fractional) ideals are finitely generated if they are invertible ([#8294](https://github.com/leanprover-community/mathlib/pull/#8294))

This is one of the three steps in showing `is_dedekind_domain_inv` implies `is_dedekind_domain`.

Co-Authored-By: Ashvni ashvni.n@gmail.com
Co-Authored-By: Filippo A. E. Nuccio filippo.nuccio@univ-st-etienne.fr





Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-07-26T14:30:57+00:00](https://github.com/leanprover-community/mathlib/commit/4ca0a8b37249fbba14bbf164381ebce6d6fbc4d4)
feat(data/fintype/basic): provide a `fintype` instance for `sym α n` ([#8427](https://github.com/leanprover-community/mathlib/pull/#8427))

This also provides `fintype (sym.sym' α n)` as an intermediate step.

Note we make `vector.perm.is_setoid` reducible as `quotient.fintype _` requires either this or `local attribute [instance] vector.perm.is_setoid` to be accepted by the elaborator.
The referenced library note suggests making it reducible is fine.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-07-26T07:37:51+00:00](https://github.com/leanprover-community/mathlib/commit/740b41bd42fed8e540432071937e0d3f7eaa9958)
feat(data/fintype/basic): add `finset.(sup|inf)_univ_eq_(supr|infi)` ([#8397](https://github.com/leanprover-community/mathlib/pull/#8397))

### [2021-07-25T15:51:33+00:00](https://github.com/leanprover-community/mathlib/commit/0c024a6270e43657c28aaf9664565a85593b3865)
chore(*): standardize Prop/Type instance names ([#8360](https://github.com/leanprover-community/mathlib/pull/#8360))

autogenerated names for these instances mention `sort.` instead of `Prop.`



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-07-25T15:12:53+00:00](https://github.com/leanprover-community/mathlib/commit/244033032277106bbc7c79afc8d096b1b1f20854)
feat(linear_algebra/matrix/determinant): det_pow ([#8421](https://github.com/leanprover-community/mathlib/pull/#8421))

### [2021-07-25T07:06:29+00:00](https://github.com/leanprover-community/mathlib/commit/fff96e53a96b1a5b82c691e3feaa98784d0dc118)
feat(measure_theory/vector_measure): add partial order instance to vector measures ([#8410](https://github.com/leanprover-community/mathlib/pull/#8410))

### [2021-07-24T22:55:28+00:00](https://github.com/leanprover-community/mathlib/commit/02b37b5ac0610d7ec405b5d86c8d0247b3db703e)
feat(group_theory/subgroup): eq_bot_of_card_eq ([#8413](https://github.com/leanprover-community/mathlib/pull/#8413))

Companion lemma to `eq_top_of_card_eq`.

### [2021-07-24T15:30:35+00:00](https://github.com/leanprover-community/mathlib/commit/8a0d5e07c88b8b6a36f183e4b1b8d8a4d81f9df8)
feat(group_theory/complement): define subgroup complement, prove Schur-Zassenhaus ([#8008](https://github.com/leanprover-community/mathlib/pull/#8008))

Defines complements, and proves Schur-Zassenhaus for abelian normal subgroups.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-07-24T14:21:11+00:00](https://github.com/leanprover-community/mathlib/commit/3d11f2dae4c435fbe8207f2295b41ab00b486b88)
refactor(data/set/disjointed): split into `data.set.pairwise` and `order.disjointed` ([#8411](https://github.com/leanprover-community/mathlib/pull/#8411))

### [2021-07-23T17:15:08+00:00](https://github.com/leanprover-community/mathlib/commit/dfa95abf08f00789d6026acb93c00ee9598f45be)
feat(analysis/normed_space/linear_isometry): add an upgrade from linear isometries between finite dimensional spaces of eq finrank to linear isometry equivs ([#8406](https://github.com/leanprover-community/mathlib/pull/#8406))

### [2021-07-23T11:58:54+00:00](https://github.com/leanprover-community/mathlib/commit/8062521eae443a0896b164f9f3679f28c065bf15)
feat(topology/locally_constant): Adding a module structure to locally constant functions ([#8384](https://github.com/leanprover-community/mathlib/pull/#8384))

We add an A-module structure to locally constant functions from a topological space to a semiring A.

This also adds the lemmas `coe_zero`, `coe_add`, `coe_neg`, `coe_sub`, `coe_one`, `coe_mul`, `coe_div`, `coe_inv` to match the new `coe_smul` lemma.



Co-authored-by: laughinggas <58670661+laughinggas@users.noreply.github.com>
Co-authored-by: Oliver Nash <github@olivernash.org>

### [2021-07-23T10:09:40+00:00](https://github.com/leanprover-community/mathlib/commit/f2f62286a9a336b5f8c186039e7757e7aa532d9b)
feat(set/basic): range_splitting f : range f → α ([#8340](https://github.com/leanprover-community/mathlib/pull/#8340))

We use choice to provide an arbitrary injective splitting `range f → α` for any `f : α → β`.

### [2021-07-23T09:02:53+00:00](https://github.com/leanprover-community/mathlib/commit/6efc3e918835e0d0e224afff1355a814f90f19d6)
fix(data/polynomial): Resolve a has_scalar instance diamond ([#8392](https://github.com/leanprover-community/mathlib/pull/#8392))

Without this change, the following fails to close the diamond between `units.distrib_mul_action` and`polynomial.distrib_mul_action`:
```lean
example (R α : Type*) (β : α → Type*) [monoid R] [semiring α] [distrib_mul_action R α] :
  (units.distrib_mul_action : distrib_mul_action (units R) (polynomial α)) =
    polynomial.distrib_mul_action :=
rfl
```
This was because both used `polynomial.smul`, which was:
* `@[irreducible]`, which means that typeclass search is unable to unfold it to see there is no diamond
* Defined using a pattern match, which means that even if it were not reducible, it does not unfold as needed.

This adds a new test file with this diamond and some other diamonds to verify they are defeq.

Unfortunately this means `simps` now aggressively unfolds `•` on polynomials into `finsupp`s, so we need to tell `simps` precisely what lemma we actually want. This only happens in one place though.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/units.2Ehas_scalar.20and.20polynomial.2Ehas_scalar.20diamond/near/246800881)



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-07-23T09:02:52+00:00](https://github.com/leanprover-community/mathlib/commit/ced1f12007b6c02e459ff4477312f2d6831f3057)
feat(analysis/calculus): strictly differentiable (or C^1) map is locally Lipschitz ([#8362](https://github.com/leanprover-community/mathlib/pull/#8362))

### [2021-07-23T09:02:51+00:00](https://github.com/leanprover-community/mathlib/commit/1dafd0f7f411802fa1c105d92b0f95649ccf0d36)
feat(measure_theory/integrable_on): a monotone function is integrable on any compact subset ([#8336](https://github.com/leanprover-community/mathlib/pull/#8336))

### [2021-07-23T08:09:01+00:00](https://github.com/leanprover-community/mathlib/commit/970b17bfc5573a9be305ae0c93a658727118096c)
refactor(topology/metric_space): move lemmas about `paracompact_space` and the shrinking lemma to separate files ([#8404](https://github.com/leanprover-community/mathlib/pull/#8404))

Only a few files in `mathlib` actually depend on results about `paracompact_space`. With this refactor, only a few files depend on `topology/paracompact_space` and `topology/shrinking_lemma`. The main side effects are that `paracompact_of_emetric` and `normal_of_emetric` instances are not available without importing `topology.metric_space.emetric_paracompact` and the shrinking lemma for balls in a proper metric space is not available without `import topology.metric_space.shrinking_lemma`.

### [2021-07-23T04:48:50+00:00](https://github.com/leanprover-community/mathlib/commit/0dd81c1e30cb3746a9472938e6f258591a7f52ff)
chore(topology/urysohns_lemma): use bundled `C(X, ℝ)` ([#8402](https://github.com/leanprover-community/mathlib/pull/#8402))

### [2021-07-23T02:11:57+00:00](https://github.com/leanprover-community/mathlib/commit/88de9b513680235d4c42ffe0584280a545290495)
chore(scripts): update nolints.txt ([#8403](https://github.com/leanprover-community/mathlib/pull/#8403))

I am happy to remove some nolints for you!

### [2021-07-23T00:02:46+00:00](https://github.com/leanprover-community/mathlib/commit/316d69fec0f6d31222fc4e67fbf09684d99e91e1)
feat(measure_theory/measure_space): add measurable set lemma for symmetric differences ([#8401](https://github.com/leanprover-community/mathlib/pull/#8401))

### [2021-07-22T21:19:37+00:00](https://github.com/leanprover-community/mathlib/commit/0cbc6f39c9ba52187ed07f2b06734434db6cd332)
feat(linear_algebra/matrix/determinant): generalize det_fin_zero to det_eq_one_of_is_empty ([#8387](https://github.com/leanprover-community/mathlib/pull/#8387))

Also golfs a nearby proof

### [2021-07-22T17:40:08+00:00](https://github.com/leanprover-community/mathlib/commit/468328daee53ea78e8522daa20893a434ce30b57)
chore(group_theory/subgroup): the range of a monoid/group/ring/module hom from a finite type is finite ([#8293](https://github.com/leanprover-community/mathlib/pull/#8293))

We have this fact for maps of types, but when changing `is_group_hom` etc from classes to structures one needs it for other bundled maps. The proofs use the power of the `copy` trick.

### [2021-07-22T16:15:21+00:00](https://github.com/leanprover-community/mathlib/commit/0bc800c24298ab7be425258aba7ec65c11c1a447)
feat(algebra/algebra/basic) new bit0/1_smul_one lemmas ([#8394](https://github.com/leanprover-community/mathlib/pull/#8394))

See https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Import.20impacts.20simp.3F/near/246713984, these lemmas should result in better behaviour with numerals

### [2021-07-22T16:15:20+00:00](https://github.com/leanprover-community/mathlib/commit/7cdd7020ea5ed0fc22215e4a7953b2f43157f0ca)
chore(ring_theory): `set_like` instance for fractional ideals ([#8275](https://github.com/leanprover-community/mathlib/pull/#8275))

This PR does a bit of cleanup in `fractional_ideal.lean` by using `set_like` to define `has_mem` and the coe to set.

As a bonus, it removes the `namespace ring` at the top of the file, that has been bugging me ever after I added it in the original fractional ideal PR.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-07-22T14:12:58+00:00](https://github.com/leanprover-community/mathlib/commit/38ac9ba7c46a9abbdef80e0d9a5b148b681e301d)
chore(algebra/module/submodule): add submodule.coe_sum ([#8393](https://github.com/leanprover-community/mathlib/pull/#8393))

### [2021-07-22T14:12:57+00:00](https://github.com/leanprover-community/mathlib/commit/e2cda0bf9b2c63c097934721f19b8209031442ef)
chore(*): Prevent lemmas about the injectivity of `coe_fn` introducing un-reduced lambda terms ([#8386](https://github.com/leanprover-community/mathlib/pull/#8386))

This follows on from [#6344](https://github.com/leanprover-community/mathlib/pull/#6344), and fixes every result for `function.injective (λ` that is about coe_fn.

### [2021-07-22T14:12:56+00:00](https://github.com/leanprover-community/mathlib/commit/54adb196d29adf4f8362982008a4290cb418f2bc)
doc(algebra/to_additive): Add troubleshooting section ([#8143](https://github.com/leanprover-community/mathlib/pull/#8143))




Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-07-22T12:14:07+00:00](https://github.com/leanprover-community/mathlib/commit/791d51c625e18d696443d595d76b96cdd9a13065)
feat(group_theory/group_action): a monoid action determines a monoid hom ([#8253](https://github.com/leanprover-community/mathlib/pull/#8253))

Defines the monoid hom `M -> category_theory.End X` (the latter is the monoid `X -> X`) corresponding to an action `mul_action M X` and vice versa.

Split off from [#7395](https://github.com/leanprover-community/mathlib/pull/#7395)

### [2021-07-22T11:40:10+00:00](https://github.com/leanprover-community/mathlib/commit/6f88eecaf787d46fa4c37dc660d32b1b2c87414c)
feat(algebra/lie/{submodule,subalgebra}): `lie_span`, `coe` form a Galois insertion ([#8213](https://github.com/leanprover-community/mathlib/pull/#8213))

### [2021-07-22T07:37:52+00:00](https://github.com/leanprover-community/mathlib/commit/c9593dcc5333e7184216f2082401434745b77170)
feat(algebra/lie/direct_sum): define `direct_sum.lie_of`, `direct_sum.to_lie_algebra`, `direct_sum.lie_algebra_is_internal` ([#8369](https://github.com/leanprover-community/mathlib/pull/#8369))

Various other minor improvements.

### [2021-07-22T06:50:48+00:00](https://github.com/leanprover-community/mathlib/commit/df50b6c2933b8a9ea0c314e26badd7f154923ea0)
feat(category_theory/limits): strict initial objects are initial mono ([#8267](https://github.com/leanprover-community/mathlib/pull/#8267))

- [x] depends on: [#8094](https://github.com/leanprover-community/mathlib/pull/#8094) 
- [x] depends on: [#8099](https://github.com/leanprover-community/mathlib/pull/#8099)

### [2021-07-22T02:19:36+00:00](https://github.com/leanprover-community/mathlib/commit/bc6581885486329188e370b511f6466dffabcb9d)
chore(scripts): update nolints.txt ([#8390](https://github.com/leanprover-community/mathlib/pull/#8390))

I am happy to remove some nolints for you!

### [2021-07-21T22:22:58+00:00](https://github.com/leanprover-community/mathlib/commit/9e355305ad52c4c7b990c090a2f81f5afc5de5ef)
fix(order/lattice, tactic.simps): add missing `notation_class` attributes to `has_(bot,top,inf,sup,compl)` ([#8381](https://github.com/leanprover-community/mathlib/pull/#8381))


From the docs for `simps`:

> `@[notation_class]` should be added to all classes that define notation, like `has_mul` and
> `has_zero`. This specifies that the projections that `@[simps]` used are the projections from
> these notation classes instead of the projections of the superclasses.
> Example: if `has_mul` is tagged with `@[notation_class]` then the projection used for `semigroup`
> will be `λ α hα, @has_mul.mul α (@semigroup.to_has_mul α hα)` instead of `@semigroup.mul`.

### [2021-07-21T22:22:56+00:00](https://github.com/leanprover-community/mathlib/commit/f118c146e103bab8a69eac9dc2204163da6a6fa0)
feat(order): if `f x ≤ f y → x ≤ y`, then `f` is injective ([#8373](https://github.com/leanprover-community/mathlib/pull/#8373))

I couldn't find this specific result, not assuming linear orders, anywhere and [the Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/If.20.60f.20x.20.E2.89.A4.20f.20y.20.E2.86.92.20x.20.E2.89.A4.20y.60.2C.20then.20.60f.60.20is.20injective) didn't get any responses, so I decided to PR the result.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-07-21T21:31:53+00:00](https://github.com/leanprover-community/mathlib/commit/3e6c3675b0306bfa8a01729d7bc477e457ba2261)
chore(topology/algebra/module): harmless generalization ([#8389](https://github.com/leanprover-community/mathlib/pull/#8389))

### [2021-07-21T17:32:53+00:00](https://github.com/leanprover-community/mathlib/commit/ae1c7eef93851db0e786e5079b61545afc414ba1)
docs(analysis/normed_space/bounded_linear_map): add module docstring ([#8263](https://github.com/leanprover-community/mathlib/pull/#8263))

### [2021-07-21T15:58:51+00:00](https://github.com/leanprover-community/mathlib/commit/9fa82b050147e4acbab131f8c15c5be6f236ce1c)
feat(combinatorics/colex): order is decidable ([#8378](https://github.com/leanprover-community/mathlib/pull/#8378))

Show that the colex ordering is decidable.

### [2021-07-21T12:21:17+00:00](https://github.com/leanprover-community/mathlib/commit/28b85931f8f161e6f5aec25649a5f89d4f74ddc9)
feat(combinatorics/simple_graph): `boolean_algebra` for `simple_graph`s. ([#8330](https://github.com/leanprover-community/mathlib/pull/#8330))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-07-21T10:58:03+00:00](https://github.com/leanprover-community/mathlib/commit/fb58e059eebe9c064cac778df9887bd284fae00f)
refactor(measure_theory/decomposition): move `decomposition` into a folder  ([#8374](https://github.com/leanprover-community/mathlib/pull/#8374))

### [2021-07-21T07:30:27+00:00](https://github.com/leanprover-community/mathlib/commit/b45acc9c1c863033e3b5b3044ce0eda13e45ad73)
feat(combinatorics/colex): top of the colex ordering on finite types ([#8379](https://github.com/leanprover-community/mathlib/pull/#8379))

### [2021-07-21T04:59:20+00:00](https://github.com/leanprover-community/mathlib/commit/02a56964153dba9e2bc52caf83f9d1e5529b17a9)
feat(analysis/normed_space): Define conformal maps on inner product spaces; define the groupoid of conformal maps ([#8367](https://github.com/leanprover-community/mathlib/pull/#8367))




Co-authored-by: justadzr <66561890+justadzr@users.noreply.github.com>

### [2021-07-20T20:10:32+00:00](https://github.com/leanprover-community/mathlib/commit/899bb5f9fec48eb50580f8385d09fbecc9e8a18a)
feat(data/multiset): `(s.erase x).map f = (s.map f).erase (f x)` ([#8375](https://github.com/leanprover-community/mathlib/pull/#8375))

A little lemma that I needed for Dedekind domains.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-07-20T18:13:44+00:00](https://github.com/leanprover-community/mathlib/commit/4676b31ffa3553deef02935fe46b607f061df5c9)
feat(data/sym2): add the universal property, and make `sym2.is_diag ⟦(x, y)⟧ ↔ x = y` true definitionally ([#8358](https://github.com/leanprover-community/mathlib/pull/#8358))

### [2021-07-20T16:22:25+00:00](https://github.com/leanprover-community/mathlib/commit/6ac3059b98bac191473d786804bcb80819cee0a6)
feat(combinatorics/colex): golf and generalise ([#8301](https://github.com/leanprover-community/mathlib/pull/#8301))

Miscellaneous fixes about colex: Gives `le` versions of some `lt` lemmas, fixes a TODO, restores some names etc.

### [2021-07-20T11:23:09+00:00](https://github.com/leanprover-community/mathlib/commit/ed8d597ad236be5d5c3f7e58e905e1209c774307)
fix(data/matrix/basic): remove an accidental requirement for a matrix to be square ([#8372](https://github.com/leanprover-community/mathlib/pull/#8372))

### [2021-07-20T10:51:34+00:00](https://github.com/leanprover-community/mathlib/commit/fce38f1a3e8c3994718c85583033885c4d74a520)
feat(ring_theory): define `fractional_ideal.adjoin_integral` ([#8296](https://github.com/leanprover-community/mathlib/pull/#8296))

This PR shows if `x` is integral over `R`, then `R[x]` is a fractional ideal, and proves some of the essential properties of this fractional ideal.

This is an important step towards showing `is_dedekind_domain_inv` implies that the ring is integrally closed.

Co-Authored-By: Ashvni ashvni.n@gmail.com
Co-Authored-By: Filippo A. E. Nuccio filippo.nuccio@univ-st-etienne.fr

### [2021-07-20T09:52:16+00:00](https://github.com/leanprover-community/mathlib/commit/c05c15fe75e3db3303acbcc1582f47ca7e129ad1)
feat(group_theory/order_of_element): pow_eq_mod_card ([#8354](https://github.com/leanprover-community/mathlib/pull/#8354))




Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2021-07-20T08:59:36+00:00](https://github.com/leanprover-community/mathlib/commit/0f9b754fb39083d0fe613c1ddf2a798f6029c499)
feat(measure_theory/borel_space): generalize `monotone.measurable` to monotone on set ([#8365](https://github.com/leanprover-community/mathlib/pull/#8365))

### [2021-07-20T08:59:35+00:00](https://github.com/leanprover-community/mathlib/commit/1589318430738e4afdecc5ccb15692a1bab59077)
feat(topology/continuous_function/bounded): prove `norm_eq_supr_norm` ([#8288](https://github.com/leanprover-community/mathlib/pull/#8288))

More precisely we prove both:
 * `bounded_continuous_function.norm_eq_supr_norm`
 * `continuous_map.norm_eq_supr_norm`

We also introduce one new definition: `bounded_continuous_function.norm_comp`.

### [2021-07-20T08:59:34+00:00](https://github.com/leanprover-community/mathlib/commit/f5d25b481bb16728be7bf7559668acb7913309ec)
feat(measure_theory/vector_measure): introduce vector-valued measures ([#8247](https://github.com/leanprover-community/mathlib/pull/#8247))

This PR introduces vector-valued measures and provides a method of creating signed measures without the summability requirement.

### [2021-07-20T07:56:49+00:00](https://github.com/leanprover-community/mathlib/commit/0f58e131aa75a4447c1b040275900657e5042894)
chore(topology/continuous_function, analysis/normed_space): use `is_empty α` instead of `¬nonempty α` ([#8352](https://github.com/leanprover-community/mathlib/pull/#8352))

Two lemmas with their assumptions changed, and some proofs golfed using the new forms of these and other lemmas.

### [2021-07-20T04:14:22+00:00](https://github.com/leanprover-community/mathlib/commit/b3fbcec604acf350323b30a28d14ada1b0792d57)
chore(.docker): add missing library ([#8370](https://github.com/leanprover-community/mathlib/pull/#8370))

Something must have changed that now needs this library. It's only installed in an intemediate build, anyway.

### [2021-07-20T03:37:36+00:00](https://github.com/leanprover-community/mathlib/commit/e0467bd03893b4cb11725233a3e68ff2fd482a60)
feat(algebra.homology): homology f g w ≅ cokernel (kernel.lift g f w) ([#8355](https://github.com/leanprover-community/mathlib/pull/#8355))

Per [zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Challenge.20with.20homology).

I'm not certain this completely resolves the issue: perhaps we should really change the definition of `homology`. But at least this bridges the gap.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-07-19T22:25:50+00:00](https://github.com/leanprover-community/mathlib/commit/11af02c3cb5fa3a9326678b67001c1f605fd7f02)
feat(analysis/convex): convex sets with zero ([#8234](https://github.com/leanprover-community/mathlib/pull/#8234))

Split off from [#7288](https://github.com/leanprover-community/mathlib/pull/#7288)

### [2021-07-19T22:25:49+00:00](https://github.com/leanprover-community/mathlib/commit/0821e6eda3e7546f842a31e0c5781166995681ae)
feat(category_theory/limits): strict initial objects ([#8094](https://github.com/leanprover-community/mathlib/pull/#8094))

- [x] depends on: [#8084](https://github.com/leanprover-community/mathlib/pull/#8084)

[![Open in Gitpod](https://gitpod.io/button/open-in-gitpod.svg)](https://gitpod.io/from-referrer/)

### [2021-07-19T19:25:13+00:00](https://github.com/leanprover-community/mathlib/commit/afd0f92ba54458a038f80330a83aff4b94111f75)
feat(category_theory/limits/pullbacks): generalise pullback mono lemmas ([#8302](https://github.com/leanprover-community/mathlib/pull/#8302))

Generalises results to use `is_limit` rather than the canonical limit.

### [2021-07-19T15:59:39+00:00](https://github.com/leanprover-community/mathlib/commit/739b353dcbb9bfb460aaaa684bebc5079cf8d43e)
chore(.gitignore): ignore lock files ([#8368](https://github.com/leanprover-community/mathlib/pull/#8368))

Two reasons:
1. Sometimes these accidentally make it into PRs  (e.g. [#8344](https://github.com/leanprover-community/mathlib/pull/#8344))
2. Some editor plugins (like the git in vscode) update very frequently causing these files to appear and disappear quickly in the sidebar whenever lean compiles which is annoying

### [2021-07-19T14:20:44+00:00](https://github.com/leanprover-community/mathlib/commit/ad7ab8d80ed6992c146d1ee20de5bcd0d7499d5e)
feat(linear_algebra/finsupp): `span.repr` gives an arbitrarily representation of `x : span R w` as a linear combination over `w` ([#8339](https://github.com/leanprover-community/mathlib/pull/#8339))

It's convenient to be able to get hold of such a representation, even when it is not unique. We prove the only lemma about this, then mark the definition is irreducible.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-07-19T13:17:09+00:00](https://github.com/leanprover-community/mathlib/commit/02ecb62adb2d2a59e80ae36e2b2d8d439d75c91c)
feat(analysis/fourier): span of monomials is dense in L^p ([#8328](https://github.com/leanprover-community/mathlib/pull/#8328))

### [2021-07-19T12:28:13+00:00](https://github.com/leanprover-community/mathlib/commit/5ccf2bf23f6e74c043d31b3929c8be92850c7f13)
feat(topology/metric_space/basic): an order-bounded set is metric-bounded ([#8335](https://github.com/leanprover-community/mathlib/pull/#8335))

### [2021-07-19T10:21:46+00:00](https://github.com/leanprover-community/mathlib/commit/3e679326cb4bfb8f0e714f7b52b0da883be339b5)
feat(topology/algebra/ordered): an `order_closed_topology` restricted to a subset is an `order_closed_topology` ([#8364](https://github.com/leanprover-community/mathlib/pull/#8364))

### [2021-07-19T07:28:12+00:00](https://github.com/leanprover-community/mathlib/commit/dd9f1c3bfb45ef9f1dd3e5bb36f057abf22bcfb1)
chore(order/basic): whitespaces and caps ([#8359](https://github.com/leanprover-community/mathlib/pull/#8359))

### [2021-07-19T02:21:30+00:00](https://github.com/leanprover-community/mathlib/commit/6a20dd63f5a72f105caecb78a685d2d13cfe4371)
chore(scripts): update nolints.txt ([#8366](https://github.com/leanprover-community/mathlib/pull/#8366))

I am happy to remove some nolints for you!

### [2021-07-18T22:22:27+00:00](https://github.com/leanprover-community/mathlib/commit/ee607111f7a5474ed630a9d364046d8515440243)
feat(data/finset/basic): product, bUnion, sdiff lemmas ([#8321](https://github.com/leanprover-community/mathlib/pull/#8321))

### [2021-07-18T17:02:30+00:00](https://github.com/leanprover-community/mathlib/commit/c2d042c6c21576685486c09827f6a7a66bd59a83)
chore(analysis/*): remove unnecessary imports ([#8344](https://github.com/leanprover-community/mathlib/pull/#8344))

### [2021-07-18T17:02:29+00:00](https://github.com/leanprover-community/mathlib/commit/b02b919731813fd813d5e560f85161e406601a26)
feat(measure_theory): add lemmas of equality of measures under assumptions of null difference, in particular null frontier ([#8332](https://github.com/leanprover-community/mathlib/pull/#8332))

Adding lemmas in `measure_theory/measure_space` and `measure_theory/borel_space` about equality of measures of sets under the assumption that the difference of the largest to the smallest has null measure.



Co-authored-by: kkytola <39528102+kkytola@users.noreply.github.com>

### [2021-07-18T17:02:28+00:00](https://github.com/leanprover-community/mathlib/commit/048263d9611fd848e69d515097ac09ddb209c9e0)
feat(topology/basic): add two lemmas about frontier and two lemmas about preimages under continuous maps ([#8329](https://github.com/leanprover-community/mathlib/pull/#8329))

Adding four lemmas: `frontier_eq_inter_compl_interior`, `compl_frontier_eq_union_interior`, `continuous.closure_preimage_subset`, `continuous.frontier_preimage_subset` to `topology/basic`.

These were discussed on Zulip <https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Portmanteau.20theorem/near/246037950>. The formulations closely follow Patrick's suggestions.



Co-authored-by: kkytola <39528102+kkytola@users.noreply.github.com>

### [2021-07-18T15:12:25+00:00](https://github.com/leanprover-community/mathlib/commit/865e36bd919253936a710235c9e7f94cbcabb4b8)
chore(order/boolean_algebra) : `compl_involutive` ([#8357](https://github.com/leanprover-community/mathlib/pull/#8357))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-07-17T21:38:09+00:00](https://github.com/leanprover-community/mathlib/commit/f45df472bd7316f4bce78d76727f8cb092e783f1)
feat(measure_theory/hausdorff_measure): `dimH_{s,b,}Union`, `dimH_union` ([#8351](https://github.com/leanprover-community/mathlib/pull/#8351))

### [2021-07-17T19:58:11+00:00](https://github.com/leanprover-community/mathlib/commit/ad5afc217009d2a23d6d0eca55419c8c6ba13d2f)
feat(combinatorics/hales_jewett): Hales-Jewett and Van der Waerden ([#8019](https://github.com/leanprover-community/mathlib/pull/#8019))

Proves the Hales-Jewett theorem (a fundamental result in Ramsey theory on combinatorial lines) and deduces (a generalised version of) Van der Waerden's theorem on arithmetic progressions.



Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2021-07-17T17:47:12+00:00](https://github.com/leanprover-community/mathlib/commit/398027d57e033c5d4d55a6b390dd5548df428cb4)
feat(topology/subset_properties): add `countable_cover_nhds_within_of_sigma_compact` ([#8350](https://github.com/leanprover-community/mathlib/pull/#8350))

This is a version of `countable_cover_nhds_of_sigma_compact` for a
covering of a closed set instead of the whole space.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-07-17T17:47:11+00:00](https://github.com/leanprover-community/mathlib/commit/7d754e06c7ca0db6765f6ca5a1f142476fa84ef6)
chore(analysis/calculus/mean_value): use `nnnorm` in a few lemmas ([#8348](https://github.com/leanprover-community/mathlib/pull/#8348))

Use `nnnorm` instead of `norm` and `C : nnreal` in lemmas about `lipschitz_on_with`. This way we can use them to prove any statement of the form `lipschitz_on_with C f s`, not only something of the form `lipschitz_on_with (real.to_nnreal C) f s`.

### [2021-07-17T16:55:13+00:00](https://github.com/leanprover-community/mathlib/commit/3782c19313c634e0b57ed119543ec031f979bced)
feat(topology/algebra/ordered): add `nhds_top_basis_Ici` and `nhds_bot_basis_Iic` ([#8349](https://github.com/leanprover-community/mathlib/pull/#8349))

Also add `ennreal.nhds_zero_basis_Iic` and `ennreal.supr_div`.

### [2021-07-17T16:20:16+00:00](https://github.com/leanprover-community/mathlib/commit/8139d7eb7d5e6f734c8a46db61a0e6892aaed1f0)
feat(measure_theory/hausdorff_measure): μH and dimH of a `subsingleton` ([#8347](https://github.com/leanprover-community/mathlib/pull/#8347))

### [2021-07-17T14:00:00+00:00](https://github.com/leanprover-community/mathlib/commit/fcde3f0e40f1cb9eac44627478b03644343c72c8)
chore(data/real/ennreal): move `x ≠ 0` case of `mul_infi` to `mul_infi_of_ne` ([#8345](https://github.com/leanprover-community/mathlib/pull/#8345))

### [2021-07-17T13:14:10+00:00](https://github.com/leanprover-community/mathlib/commit/bd56531b3f34a9a1e97bfada5e0b9825a2879706)
chore(analysis/normed_space/operator_norm): use `norm_one_class` ([#8346](https://github.com/leanprover-community/mathlib/pull/#8346))

* turn `continuous_linear_map.norm_id` into a `simp` lemma;
* drop its particular case `continuous_linear_map.norm_id_field`;
* replace `continuous_linear_map.norm_id_field'` with a
  `norm_one_class` instance.

### [2021-07-17T11:26:47+00:00](https://github.com/leanprover-community/mathlib/commit/93a37647e9596744e08cf99f93ae5e6be84f0d85)
chore(algebra/ring/basic): drop commutativity assumptions from some division lemmas ([#8334](https://github.com/leanprover-community/mathlib/pull/#8334))

* Removes `dvd_neg_iff_dvd`, `neg_dvd_iff_dvd` which duplicated `dvd_neg`, `neg_dvd`.
* Generalizes `two_dvd_bit0` to non-commutative semirings.
* Generalizes a bunch of lemmas from `comm_ring` to `ring`.
* Adds `even_neg` for `ring` to replace `int.even_neg`.

### [2021-07-17T09:38:56+00:00](https://github.com/leanprover-community/mathlib/commit/d4c0a118267d9b4eb592b63ddb809f2a8f060f8f)
refactor(analysis/analytic/basic): refactor `change_origin` ([#8282](https://github.com/leanprover-community/mathlib/pull/#8282))

Now each term of `change_origin` is defined as a sum of a formal power series, so it is clear that each term is an analytic function.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-07-17T04:19:35+00:00](https://github.com/leanprover-community/mathlib/commit/0cb634fb7e0c324f15c98c7809717fd990fa3fee)
feat(category_theory/subobject): subobject category equivalent to mono over category ([#8304](https://github.com/leanprover-community/mathlib/pull/#8304))

### [2021-07-17T02:01:37+00:00](https://github.com/leanprover-community/mathlib/commit/e67e50f58346362a2856d85b13d924dff43fb6aa)
feat(algebra/group_theory/lemmas): add int.pow_right_injective ([#8278](https://github.com/leanprover-community/mathlib/pull/#8278))

Suggested here: https://github.com/leanprover-community/mathlib/pull/7843#discussion_r668167163

### [2021-07-16T22:47:45+00:00](https://github.com/leanprover-community/mathlib/commit/10975e6da7e228574082639ab36585faeda319d6)
docs(measure_theory/integral_eq_improper): fix lemma names in docs ([#8333](https://github.com/leanprover-community/mathlib/pull/#8333))

### [2021-07-16T17:58:03+00:00](https://github.com/leanprover-community/mathlib/commit/8e3d9ceec9c055771ccd84861d011d4790a08ddc)
feat(measure_theory/continuous_map_dense): continuous functions are dense in Lp ([#8306](https://github.com/leanprover-community/mathlib/pull/#8306))

### [2021-07-16T17:58:00+00:00](https://github.com/leanprover-community/mathlib/commit/a895300a7f1e685696f8653217930d42c98bdf6f)
chore(ring_theory/fractional_ideal): prefer `(⊤ : ideal R)` over `1` ([#8298](https://github.com/leanprover-community/mathlib/pull/#8298))

`fractional_ideal.lean` sometimes used `1` to denote the ideal of `R` containing each element of `R`. This PR should replace all remaining usages with `⊤ : ideal R`, following the convention in the rest of mathlib.

Also a little `simp` lemma `coe_ideal_top` which was the motivation, since the proof should have been, and is now `by refl`.

### [2021-07-16T17:03:24+00:00](https://github.com/leanprover-community/mathlib/commit/42f7ca0fa8985b9b7d094b0740100e35508c52db)
chore(linear_algebra/linear_independent): use `is_empty ι` instead of `¬nonempty ι` ([#8331](https://github.com/leanprover-community/mathlib/pull/#8331))

### [2021-07-16T16:03:11+00:00](https://github.com/leanprover-community/mathlib/commit/9061ecc1a457dd0dcad0fb4fe58124aa5facfeb4)
feat(topology/metric_space/holder): define Hölder continuity ([#8309](https://github.com/leanprover-community/mathlib/pull/#8309))

Add definitions and some basic facts about Hölder continuous functions.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-07-16T15:14:22+00:00](https://github.com/leanprover-community/mathlib/commit/35a8d935f3906818c670549eaff2066a8ccaf4ad)
chore(topology/algebra/infinite_sum): relax the requirements on `has_sum.smul` ([#8312](https://github.com/leanprover-community/mathlib/pull/#8312))

### [2021-07-16T13:09:51+00:00](https://github.com/leanprover-community/mathlib/commit/162221fd843a4018d3380a3a31d6261d630f289a)
chore(set_theory/*): use `is_empty α` instead of `¬nonempty α` ([#8276](https://github.com/leanprover-community/mathlib/pull/#8276))

Split from [#7826](https://github.com/leanprover-community/mathlib/pull/#7826)

### [2021-07-16T11:35:29+00:00](https://github.com/leanprover-community/mathlib/commit/9a801ef6712b0a9484f66d9ea6e1a5668ccef8f7)
docs(order/rel_iso): add module docstring ([#8249](https://github.com/leanprover-community/mathlib/pull/#8249))

### [2021-07-16T09:16:30+00:00](https://github.com/leanprover-community/mathlib/commit/e35d97605c15e4253b07d4591ea578dd2420a190)
chore(algebra/quaternion): add `smul_mk` ([#8126](https://github.com/leanprover-community/mathlib/pull/#8126))

This follows the pattern set by `mk_mul_mk` and `mk_add_mk`.

### [2021-07-16T09:16:29+00:00](https://github.com/leanprover-community/mathlib/commit/610fab7a17b7ef9ec7ff004707e39dd5ff2b34bd)
feat(set_theory/cofinality): more infinite pigeonhole principles ([#7879](https://github.com/leanprover-community/mathlib/pull/#7879))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-07-16T07:34:18+00:00](https://github.com/leanprover-community/mathlib/commit/e6ff367d7b3033e64e143c35d3458e70e9e550cd)
feat(logic/embedding): simp lemma for injectivity for embeddings ([#7881](https://github.com/leanprover-community/mathlib/pull/#7881))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2021-07-16T05:22:17+00:00](https://github.com/leanprover-community/mathlib/commit/728eefecc3d71890a0e7a29ce86a29140d24bc4a)
docs(data/fintype/basic): add module docstring ([#8081](https://github.com/leanprover-community/mathlib/pull/#8081))

### [2021-07-16T00:27:05+00:00](https://github.com/leanprover-community/mathlib/commit/4ae97924c086f26060ed4780cfdad363b7809592)
chore(data/matrix/basic): add lemmas about dot_product and mul_vec ([#8325](https://github.com/leanprover-community/mathlib/pull/#8325))

This renames:
* `mul_vec_one` to `one_mul_vec`
* `mul_vec_zero` to `zero_mul_vec`

and adds the new lemmas:
* `sub_mul_vec`
* `mul_vec_sub`
* `zero_mul_vec`
* `mul_vec_zero`
* `sub_dot_product`
* `dot_product_sub`

Some existing lemmas have had their variables extracted to sections.

Co-authored-by: l534zhan <luming.zhang@merton.ox.ac.uk>

### [2021-07-15T21:23:27+00:00](https://github.com/leanprover-community/mathlib/commit/b577bb2cd1f96eb47031878256856020b76f73cd)
feat(measure_theory/conditional_expectation): define condexp_L2, conditional expectation of L2 functions ([#8324](https://github.com/leanprover-community/mathlib/pull/#8324))

### [2021-07-15T17:38:21+00:00](https://github.com/leanprover-community/mathlib/commit/79fbd465c22f505d1e5ab2f4e85acae3aaedc6cf)
feat(ring_theory/ideal): generalize two results from finset to multiset ([#8320](https://github.com/leanprover-community/mathlib/pull/#8320))

Nothing exciting going on here, just copied two proofs, replaced all `finset.insert` with `multiset.cons` and `finset.prod` with `(multiset.map _).prod`, and used those to show the original results.

### [2021-07-15T16:32:09+00:00](https://github.com/leanprover-community/mathlib/commit/a783a47c327046081937803568e91bbbc753ccfd)
feat(data/matrix/{basic, block}): missing lemmas on conj_transpose ([#8303](https://github.com/leanprover-community/mathlib/pull/#8303))

This also moves some imports around to make the star operator on vectors available in matrix/basic.lean

This is a follow up to [#8291](https://github.com/leanprover-community/mathlib/pull/#8291)

### [2021-07-15T16:32:08+00:00](https://github.com/leanprover-community/mathlib/commit/66055ddf735466a5378435d7cf3bc85e4bffc710)
feat(algebra/lie/cartan_matrix): define the exceptional Lie algebras ([#8299](https://github.com/leanprover-community/mathlib/pull/#8299))

### [2021-07-15T15:05:29+00:00](https://github.com/leanprover-community/mathlib/commit/bc1f1459f77078344d97dbdcff13a908c9dc84c0)
feat(data/multiset): `<` on multisets is well-founded ([#8319](https://github.com/leanprover-community/mathlib/pull/#8319))

This is vaguely related to [#5783](https://github.com/leanprover-community/mathlib/pull/#5783), in that it tries to solve a similar goal of finding a minimal multiset with some property.

### [2021-07-15T13:15:59+00:00](https://github.com/leanprover-community/mathlib/commit/0597b1dd3cf9b0d2e8d9e95aec1e25324d2c590a)
feat(analysis/normed_space/normed_group_hom): add equalizer ([#8228](https://github.com/leanprover-community/mathlib/pull/#8228))

From LTE.

We add equalizer of `normed_group_homs`.

### [2021-07-15T09:20:51+00:00](https://github.com/leanprover-community/mathlib/commit/7e5be024971c83b9289cddfb76b690f149a7351f)
chore(algebra/*): make non-instance typeclasses reducible. ([#8322](https://github.com/leanprover-community/mathlib/pull/#8322))

A follow up to [#7835](https://github.com/leanprover-community/mathlib/pull/#7835)

### [2021-07-15T05:43:19+00:00](https://github.com/leanprover-community/mathlib/commit/e42af8dae8959e89ed4c53b7b97be816d9460b19)
refactor(topology/category/Profinite): define Profinite as a subcategory of CompHaus ([#8314](https://github.com/leanprover-community/mathlib/pull/#8314))

This adjusts the definition of Profinite to explicitly be a subcategory of CompHaus rather than a subcategory of Top which embeds into CompHaus. Essentially this means it's easier to construct an element of Profinite from an element of CompHaus.

### [2021-07-14T22:10:52+00:00](https://github.com/leanprover-community/mathlib/commit/e343609b512a44dd78762ccbdc4d5ff388fbb351)
feat(measure_theory/simple_func_dense): induction lemmas for Lp.simple_func and Lp ([#8300](https://github.com/leanprover-community/mathlib/pull/#8300))

The new lemmas, `Lp.simple_func.induction`, `Lp.induction`, allow one to prove a predicate for all elements of `Lp.simple_func` / `Lp` (here p < ∞), by proving it for characteristic functions and then checking it behaves appropriately under addition, and, in the second case, taking limits.  They are modelled on existing lemmas such as `simple_func.induction`, `mem_ℒp.induction`, `integrable.induction`.

### [2021-07-14T18:22:17+00:00](https://github.com/leanprover-community/mathlib/commit/19a156ae78e0dd1c038af68c694e6beb9feac336)
refactor(algebra/ordered_ring): use `mul_le_mul'` for `canonically_ordered_comm_semiring` ([#8284](https://github.com/leanprover-community/mathlib/pull/#8284))

* use `canonically_ordered_comm_semiring`, not `canonically_ordered_semiring` as a namespace;
* add an instance `canonically_ordered_comm_semiring.to_covariant_mul_le`;
* drop `canonically_ordered_semiring.mul_le_mul` etc in favor of `mul_le_mul'` etc.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-07-14T17:41:56+00:00](https://github.com/leanprover-community/mathlib/commit/e9b1fbd0716e8c9947189366d81a361bd6c7b189)
feat(combinatorics/simple_graph): add maps and subgraphs ([#8223](https://github.com/leanprover-community/mathlib/pull/#8223))

Add graph homomorphisms, isomorphisms, and embeddings.  Define subgraphs and supporting lemmas and definitions.  Also renamed `edge_symm` to `adj_comm`.



Co-authored-by: Kyle Miller <kmill31415@gmail.com>

### [2021-07-14T15:21:29+00:00](https://github.com/leanprover-community/mathlib/commit/bcc35c75e99e689e45144beaedcbd69399c721e6)
feat(group_theory/submonoid/operations): `add_equiv.of_left_inverse` to match `linear_equiv.of_left_inverse` ([#8279](https://github.com/leanprover-community/mathlib/pull/#8279))

### [2021-07-14T13:57:59+00:00](https://github.com/leanprover-community/mathlib/commit/375dd53e801cfc550c04b266ca988d04f3e3383f)
refactor(geometry/manifold): split `bump_function` into 3 files ([#8313](https://github.com/leanprover-community/mathlib/pull/#8313))

This is the a part of [#8309](https://github.com/leanprover-community/mathlib/pull/#8309). Both code and comments were moved with
almost no modifications: added/removed `variables`/`section`s,
slightly adjusted comments to glue them together.

### [2021-07-14T13:57:58+00:00](https://github.com/leanprover-community/mathlib/commit/5bac21a1f71b514ecedfdd194b488a6ae1e14bd0)
chore(algebra/module/pi): add `pi.smul_def` ([#8311](https://github.com/leanprover-community/mathlib/pull/#8311))

Sometimes it is useful to rewrite unapplied `s • x` (I need it in a branch that is not yet ready for review).

We already have `pi.zero_def`, `pi.add_def`, etc.

### [2021-07-14T13:57:57+00:00](https://github.com/leanprover-community/mathlib/commit/7fccf40a8fe5f5ece3007c27efa0b12145c52074)
feat(algebraic_topology/topological_simplex): This defines the natural functor from Top to sSet. ([#8305](https://github.com/leanprover-community/mathlib/pull/#8305))

This PR also provides the geometric realization functor and the associated adjunction.

### [2021-07-14T13:57:56+00:00](https://github.com/leanprover-community/mathlib/commit/7d53431e2b4164d6274e77672d8cba820f083a9b)
feat(measure_theory/integration): if a function has bounded integral on all sets of finite measure, then it is integrable ([#8297](https://github.com/leanprover-community/mathlib/pull/#8297))

If the measure is sigma-finite and a function has integral bounded by some C for all measurable sets with finite measure, then its integral over the whole space is bounded by that same C. This can be used to show that a function is integrable.

### [2021-07-14T12:56:52+00:00](https://github.com/leanprover-community/mathlib/commit/3b7e7bd699ae2723ec5ff8e63d9a702ce7ce486d)
feat(normed_space): controlled_sum_of_mem_closure ([#8310](https://github.com/leanprover-community/mathlib/pull/#8310))

From LTE

### [2021-07-14T11:55:45+00:00](https://github.com/leanprover-community/mathlib/commit/2e9aa8390f7bce4f1ad1f284212543db10a9961b)
chore(analysis/special_functions/pow): golf a few proofs ([#8308](https://github.com/leanprover-community/mathlib/pull/#8308))

* add `ennreal.zero_rpow_mul_self` and `ennreal.mul_rpow_eq_ite`;
* use the latter lemma to golf other proofs about `(x * y) ^ z`;
* drop unneeded argument in `ennreal.inv_rpow_of_pos`, rename it to
  `ennreal.inv_rpow`;
* add `ennreal.strict_mono_rpow_of_pos` and
  `ennreal.monotone_rpow_of_nonneg`, use themm to golf some proofs.

### [2021-07-14T10:14:23+00:00](https://github.com/leanprover-community/mathlib/commit/743209ca48322c27ea27197d2f1ad7669bbbba08)
chore(algebra/big_operators/basic): spaces around binders ([#8307](https://github.com/leanprover-community/mathlib/pull/#8307))

### [2021-07-14T10:14:22+00:00](https://github.com/leanprover-community/mathlib/commit/e6731de1e84f4af7cb187089f261b1c8886a79ef)
feat(algebra/pointwise): `smul_comm_class` instances for `set` ([#8292](https://github.com/leanprover-community/mathlib/pull/#8292))

I'm not very familiar with `smul_comm_class`, so these instances might need to be tweaked slightly.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-07-14T10:14:21+00:00](https://github.com/leanprover-community/mathlib/commit/656722c55e158ab973f21534d110b0574548e607)
refactor(measure_theory/measure_space): use `covariant_class` instead of `add_le_add` ([#8285](https://github.com/leanprover-community/mathlib/pull/#8285))

### [2021-07-14T10:14:18+00:00](https://github.com/leanprover-community/mathlib/commit/51cc43efb292c84b0642c6fce2b578489fc1f4be)
feat(measure_theory/borel_space): a monotone function is measurable ([#8045](https://github.com/leanprover-community/mathlib/pull/#8045))

### [2021-07-14T08:37:24+00:00](https://github.com/leanprover-community/mathlib/commit/8e5af430a7863dc4a5c42e358ce044368c4739da)
chore(algebra/big_operators/basic): rename sum_(nat/int)_cast and (nat/int).coe_prod ([#8264](https://github.com/leanprover-community/mathlib/pull/#8264))

The current names aren't great because
1. For `sum_nat_cast` and `sum_int_cast`, the LHS isn't a sum of casts but a cast of sums, and it doesn't follow any other naming convention (`nat.cast_...` or `....coe_sum`).
2. For `.coe_prod`, the coercion from `ℕ` or `ℤ` should be called `cast`.

### [2021-07-14T06:54:06+00:00](https://github.com/leanprover-community/mathlib/commit/4709e61525a60189733e72a50e564c58d534bed8)
doc(*): bold a few more named theorems ([#8252](https://github.com/leanprover-community/mathlib/pull/#8252))

### [2021-07-13T21:48:55+00:00](https://github.com/leanprover-community/mathlib/commit/5021c1f98e24c5b666f511cb777be176c74f052d)
feat(data/int): conditionally complete linear order ([#8149](https://github.com/leanprover-community/mathlib/pull/#8149))

Prove that the integers form a conditionally complete linear order.

I do not have a specific goal in mind for this, but it would have been helpful to formulate one of the Proof Ground problems using this.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-07-13T20:14:44+00:00](https://github.com/leanprover-community/mathlib/commit/29b63a7e91d079b159dfc2cf0fb4d2a1ce1c409b)
feat(data/matrix/basic): add conj_transpose ([#8291](https://github.com/leanprover-community/mathlib/pull/#8291))

As requested by Eric Wieser, I pulled one single change of [#8289](https://github.com/leanprover-community/mathlib/pull/#8289) out into a new PR. As such, this PR will not block anything in [#8289](https://github.com/leanprover-community/mathlib/pull/#8289).



Co-authored-by: l534zhan <84618936+l534zhan@users.noreply.github.com>

### [2021-07-13T20:14:43+00:00](https://github.com/leanprover-community/mathlib/commit/63266ff49699d909073aafaf30aecb25ff7c6041)
feat(group_theory/free_product): the free product of an indexed family of monoids ([#8256](https://github.com/leanprover-community/mathlib/pull/#8256))

Defines the free product (categorical coproduct) of an indexed family of monoids. Proves its universal property. The free product of groups is a group.

Split off from [#7395](https://github.com/leanprover-community/mathlib/pull/#7395)

### [2021-07-13T18:51:54+00:00](https://github.com/leanprover-community/mathlib/commit/905b875ecb2e46a777f8f2251591c778db0f88a8)
chore(data/matrix/block): move block matrices into their own file ([#8290](https://github.com/leanprover-community/mathlib/pull/#8290))

This is a straight cut-and-paste, with no reordering or renaming.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/import.20fails/near/245802618)

### [2021-07-13T18:51:53+00:00](https://github.com/leanprover-community/mathlib/commit/461130bc3874a3fef5c10018bff4802599886582)
feat(category_theory/monoidal): the definition of Tor ([#7512](https://github.com/leanprover-community/mathlib/pull/#7512))

# Tor, the left-derived functor of tensor product

We define `tor C n : C ⥤ C ⥤ C`, by left-deriving in the second factor of `(X, Y) ↦ X ⊗ Y`.

For now we have almost nothing to say about it!
It would be good to show that this is naturally isomorphic to the functor obtained
by left-deriving in the first factor, instead.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-07-13T17:32:47+00:00](https://github.com/leanprover-community/mathlib/commit/b091c3fb2865d3df62e28790fb80fcaf823063a8)
feat(algebra/direct_sum): the submodules of an internal direct sum satisfy `supr A = ⊤` ([#8274](https://github.com/leanprover-community/mathlib/pull/#8274))

The main results here are:

* `direct_sum.add_submonoid_is_internal.supr_eq_top`
* `direct_sum.submodule_is_internal.supr_eq_top`

Which we prove using the new lemmas

* `add_submonoid.supr_eq_mrange_dfinsupp_sum_add_hom`
* `submodule.supr_eq_range_dfinsupp_lsum`

There's no obvious way to reuse the proofs between the two, but thankfully all four proofs are quite short anyway.

These should aid in shortening [#8246](https://github.com/leanprover-community/mathlib/pull/#8246).

### [2021-07-13T16:48:04+00:00](https://github.com/leanprover-community/mathlib/commit/3a0ef3c2ae77ecdd74e288bb0a00ec140b02f4ea)
feat(ring_theory): (strict) monotonicity of `coe_submodule` ([#8273](https://github.com/leanprover-community/mathlib/pull/#8273))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-07-13T16:48:02+00:00](https://github.com/leanprover-community/mathlib/commit/8be0eda2831418bc831ba772aba9e637c3595506)
chore(ring_theory): allow Dedekind domains to be fields ([#8271](https://github.com/leanprover-community/mathlib/pull/#8271))

During the Dedekind domain project, we found that the `¬ is_field R` condition is almost never needed, and it gets in the way when proving rings of integers are Dedekind domains. This PR removes this assumption from the three definitions.

Co-Authored-By: Ashvni <ashvni.n@gmail.com>
Co-Authored-By: Filippo A. E. Nuccio <filippo.nuccio@univ-st-etienne.fr>



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-07-13T15:34:19+00:00](https://github.com/leanprover-community/mathlib/commit/815e91f372e0d92bac51dc2b64ced4b86de99837)
chore(data/nat/prime): fix + add missing lemmas ([#8066](https://github.com/leanprover-community/mathlib/pull/#8066))

I fixed up some indents as well, as they were bothering me quite a bit. The only "new" content is 597 - 617.

### [2021-07-13T12:28:43+00:00](https://github.com/leanprover-community/mathlib/commit/bf868344656b1a2ed6c163ea7653620240bd4efd)
chore(probability_theory/integration): style changes. Make arguments implicit, remove spaces, etc. ([#8286](https://github.com/leanprover-community/mathlib/pull/#8286))

- make the measurable_space arguments of indep_fun implicit again. They were made explicit to accommodate the way `lintegral_mul_eq_lintegral_mul_lintegral_of_indep_fun` was written, with explicit `(borel ennreal)` arguments. Those arguments are not needed and are removed.
- use `measurable_set T` instead of `M.measurable_set' T`.
- write the type of several `have` explicitly.
- remove some spaces
- ensure there is only one tactic per line
- use `exact` instead of `apply` when the tactic is finishing



Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2021-07-13T12:28:42+00:00](https://github.com/leanprover-community/mathlib/commit/f1e27d2966b5a2b9236537a26296221e92699df8)
feat(linear_algebra/finsupp): mem_supr_iff_exists_finset ([#8268](https://github.com/leanprover-community/mathlib/pull/#8268))

This is an `iff` version of `exists_finset_of_mem_supr`

### [2021-07-13T12:28:40+00:00](https://github.com/leanprover-community/mathlib/commit/3e56439df51a712e945f73df5150dc66bb2396ca)
chore(data/set/intervals): relax linear_order to preorder in the proofs of `Ixx_eq_empty_iff` ([#8071](https://github.com/leanprover-community/mathlib/pull/#8071))

The previous formulations of `Ixx_eq_empty(_iff)` are basically a chaining of this formulation plus `not_lt` or `not_le`. But `not_lt` and `not_le` require `linear_order`. Removing them allows relaxing the typeclasses assumptions on `Ixx_eq_empty_iff` and slightly generalising `Ixx_eq_empty`.

### [2021-07-13T11:23:36+00:00](https://github.com/leanprover-community/mathlib/commit/bb53a922d4a2ea159e7edf0ef4026ac2fa1da295)
chore(data/mv_polynomial/basic): use `is_empty σ` instead of `¬nonempty σ` ([#8277](https://github.com/leanprover-community/mathlib/pull/#8277))

Split from [#7826](https://github.com/leanprover-community/mathlib/pull/#7826)

### [2021-07-13T10:08:14+00:00](https://github.com/leanprover-community/mathlib/commit/dd9a0ea256241e25b3f3aeeb3060d18949df652e)
feat(geometry/manifold): add `charted_space` and `model_with_corners` for pi types ([#6578](https://github.com/leanprover-community/mathlib/pull/#6578))

Also use `set.image2` in the `charted_space` instance for `model_prod`.

### [2021-07-13T09:28:15+00:00](https://github.com/leanprover-community/mathlib/commit/7bed785be20b0e6d2e3adefd3ee2cd2ad5862690)
refactor(topology/metric/gromov_hausdorff_realized): speed up a proof ([#8287](https://github.com/leanprover-community/mathlib/pull/#8287))

### [2021-07-13T07:40:48+00:00](https://github.com/leanprover-community/mathlib/commit/f1f4084046d9346c62ce22f9f1922a01b817c33f)
feat(topology/algebra/ordered/basic): basis for the neighbourhoods of `top`/`bot` ([#8283](https://github.com/leanprover-community/mathlib/pull/#8283))

### [2021-07-13T07:09:10+00:00](https://github.com/leanprover-community/mathlib/commit/f302c979512cbceca287296035019909a53260b7)
feat(measure_theory/l2_space): the inner product of indicator_const_Lp and a function is the set_integral ([#8229](https://github.com/leanprover-community/mathlib/pull/#8229))




Co-authored-by: Rémy Degenne <remydegenne@gmail.com>
Co-authored-by: RemyDegenne <remydegenne@gmail.com>

### [2021-07-12T22:46:15+00:00](https://github.com/leanprover-community/mathlib/commit/9dfb9a6ee755bb7118ec45555f77521ee689b3b4)
chore(topology/topological_fiber_bundle): renaming ([#8270](https://github.com/leanprover-community/mathlib/pull/#8270))

In this PR I changed
- `prebundle_trivialization` to `topological_fiber_bundle.pretrivialization`
- `bundle_trivialization` to `topological_fiber_bundle.trivialization`

so to make names consistent with `vector_bundle`. I also changed the name of the file for consistency.

### [2021-07-12T22:46:14+00:00](https://github.com/leanprover-community/mathlib/commit/cde57482758e623284218c5a722f23c8f97e08b3)
feat(measure_theory/measure_space): add `finite_measure_sub` instance ([#8239](https://github.com/leanprover-community/mathlib/pull/#8239))

### [2021-07-12T21:10:34+00:00](https://github.com/leanprover-community/mathlib/commit/5ea9a073f7ea47a19becc71242385a1353906faa)
feat(measure_theory/integration): add `lintegral_union` ([#8238](https://github.com/leanprover-community/mathlib/pull/#8238))

### [2021-07-12T21:10:33+00:00](https://github.com/leanprover-community/mathlib/commit/4cd6179c4388decab693875cde00aefeaa66f721)
refactor(measure_theory/simple_func_dense): generalize L1.simple_func.dense_embedding to Lp ([#8209](https://github.com/leanprover-community/mathlib/pull/#8209))

This PR generalizes all the more abstract results about approximation by simple functions, from L1 to Lp (`p ≠ ∞`).  Notably, this includes 
* the definition `Lp.simple_func`, the `add_subgroup` of `Lp` of classes containing a simple representative
* the coercion `Lp.simple_func.coe_to_Lp` from this subgroup to `Lp`, as a continuous linear map
* `Lp.simple_func.dense_embedding`, this subgroup is dense in `Lp`
* `mem_ℒp.induction`, to prove a predicate holds for `mem_ℒp` functions it suffices to prove that it behaves appropriately on `mem_ℒp` simple functions

Many lemmas get renamed from `L1.simple_func.*` to `Lp.simple_func.*`, and have hypotheses or conclusions changed from `integrable` to `mem_ℒp`.

I take the opportunity to streamline the construction by deleting some instances which typeclass inference can find, and some lemmas which are re-statements of more general results about `add_subgroup`s in normed groups.  In my opinion, this extra material obscures the structure of the construction.  Here is a list of the definitions deleted:
- `instance : has_coe (α →₁ₛ[μ] E) (α →₁[μ] E)`
- `instance : has_coe_to_fun (α →₁ₛ[μ] E)`
- `instance : inhabited (α →₁ₛ[μ] E)`
- `protected def normed_group : normed_group (α →₁ₛ[μ] E)`

and lemmas deleted (in the `L1.simple_func` namespace unless specified):
- `simple_func.tendsto_approx_on_univ_L1`
- `eq`
- `eq_iff`
- `eq_iff'`
- `coe_zero`
- `coe_add`
- `coe_neg`
- `coe_sub`
- `edist_eq`
- `dist_eq`
- `norm_eq`
- `lintegral_edist_to_simple_func_lt_top`
- `dist_to_simple_func`

### [2021-07-12T18:54:39+00:00](https://github.com/leanprover-community/mathlib/commit/a9cb722ce675578c376c1a0e56c0353c02ae9c82)
docs(data/rel): add module docstring ([#8248](https://github.com/leanprover-community/mathlib/pull/#8248))

### [2021-07-12T17:16:06+00:00](https://github.com/leanprover-community/mathlib/commit/a2b00f3c58f0c1a1dc4478c8047f784e32f8a05a)
feat(algebra/opposites): functoriality of the opposite monoid ([#8254](https://github.com/leanprover-community/mathlib/pull/#8254))

A hom `α →* β` can equivalently be viewed as a hom `αᵒᵖ →* βᵒᵖ`.

Split off from [#7395](https://github.com/leanprover-community/mathlib/pull/#7395)

### [2021-07-12T16:03:49+00:00](https://github.com/leanprover-community/mathlib/commit/6fa678fb54adcb2f85b3dea1c50c4df26361330a)
feat(ring_theory): `coe_submodule S (⊤ : ideal R) = 1` ([#8272](https://github.com/leanprover-community/mathlib/pull/#8272))

A little `simp` lemma and its dependencies. As I was implementing it, I saw the definition of `has_one (submodule R A)` can be cleaned up a bit.

### [2021-07-12T14:22:14+00:00](https://github.com/leanprover-community/mathlib/commit/0a8e3edacc46f2f20666b24e54f28804477b508b)
feat(data/equiv/fin): fin_order_iso_subtype ([#8258](https://github.com/leanprover-community/mathlib/pull/#8258))

Promote a `fin n` into a larger `fin m`, as a subtype where the underlying
values are retained. This is the `order_iso` version of `fin.cast_le`.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-07-12T14:22:13+00:00](https://github.com/leanprover-community/mathlib/commit/66cc624c0feffad08bf7bfc11b188ddd70cb8d28)
feat(data/list/basic): more lemmas about permutations_aux2 ([#8198](https://github.com/leanprover-community/mathlib/pull/#8198))

### [2021-07-12T12:59:26+00:00](https://github.com/leanprover-community/mathlib/commit/695cb07b98545da3b51e0d3141ce539ed279fe7a)
feat({data,linear_algebra}/{finsupp,dfinsupp}): add `{add_submonoid,submodule}.[d]finsupp_sum_mem` ([#8269](https://github.com/leanprover-community/mathlib/pull/#8269))

These lemmas are trivial consequences of the finset lemmas, but having them avoids having to unfold `[d]finsupp.sum`.

`dfinsupp_sum_add_hom_mem` is particularly useful because this one has some messy decidability arguments to eliminate.

### [2021-07-12T10:54:32+00:00](https://github.com/leanprover-community/mathlib/commit/40ffaa5ad54275124c00b4b24e38743cb6ad87bf)
feat(linear_algebra/free_module): add module.free.resolution ([#8231](https://github.com/leanprover-community/mathlib/pull/#8231))

Any module is a quotient of a free module. This is stated as surjectivity of `finsupp.total M M R id : (M →₀ R) →ₗ[R] M`.

### [2021-07-12T07:00:28+00:00](https://github.com/leanprover-community/mathlib/commit/e1c649d5b9a722243796ab4286a427808e5d59ce)
feat(category_theory/abelian): the five lemma ([#8265](https://github.com/leanprover-community/mathlib/pull/#8265))

### [2021-07-12T06:15:32+00:00](https://github.com/leanprover-community/mathlib/commit/92d0dd898fdca8dca50bd7f86b2b89f8f81a2d20)
feat(category_theory/limits): monomorphisms from initial ([#8099](https://github.com/leanprover-community/mathlib/pull/#8099))

Defines a class for categories where every morphism from initial is a monomorphism. If the category has a terminal object, this is equivalent to saying the unique morphism from initial to terminal is a monomorphism, so this is essentially a "zero_le_one" for categories. I'm happy to change the name of this class!

This axiom does not appear to have a common name, though it is (equivalent to) the second of Freyd's AT axioms: specifically it is a property shared by abelian categories and pretoposes. The main advantage to this class is that it is the precise condition required for the subobject lattice to have a bottom element, resolving the discussion here: https://github.com/leanprover-community/mathlib/pull/6278#discussion_r577702542

I've also made some minor changes to later parts of this file, essentially de-duplicating arguments, and moving the `comparison` section up so that all the results about terminal objects in index categories of limits are together rather than split in two.

### [2021-07-12T04:01:46+00:00](https://github.com/leanprover-community/mathlib/commit/e22789ef038dddcd5dac1c0266be003c69d09135)
feat(algebra/big_operators/finprod): add a few lemmas ([#8261](https://github.com/leanprover-community/mathlib/pull/#8261))

* add `finprod_eq_single` and `finsum_eq_single`;
* add `finprod_induction` and `finsum_induction`;
* add `single_le_finprod` and `single_le_finsum`;
* add `one_le_finprod'` and `finsum_nonneg`.

### [2021-07-12T01:47:08+00:00](https://github.com/leanprover-community/mathlib/commit/d5c6f614d85418c88fc809109ac950472ae3f8d7)
feat(algebra/group/hom): monoid_hom.injective_iff in iff form ([#8259](https://github.com/leanprover-community/mathlib/pull/#8259))

Interpret the injectivity of a group hom as triviality of the kernel,
in iff form. This helps make explicit simp lemmas about
the application of such homs,
as in the added `extend_domain_eq_one_iff` lemma.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-07-11T20:46:12+00:00](https://github.com/leanprover-community/mathlib/commit/24d7a8c378d9902bf19af57eb52e88d1c5e0bd32)
feat(group_theory/quotient_group): lemmas for quotients involving `subgroup_of` ([#8111](https://github.com/leanprover-community/mathlib/pull/#8111))




Co-authored-by: Hanting Zhang <76727734+acxxa@users.noreply.github.com>

### [2021-07-11T20:13:23+00:00](https://github.com/leanprover-community/mathlib/commit/19beb1274431d951ebc385fc72ebe9e78611c4bf)
feat(measure_theory/{lp_space,set_integral}): extend linear map lemmas from R to is_R_or_C ([#8210](https://github.com/leanprover-community/mathlib/pull/#8210))





Co-authored-by: Rémy Degenne <remydegenne@gmail.com>
Co-authored-by: RemyDegenne <remydegenne@gmail.com>

### [2021-07-11T19:28:27+00:00](https://github.com/leanprover-community/mathlib/commit/6d200cb1c25f97287d67a0f20c5ca5b24420c486)
feat(analysis/normed_space/inner_product): Bessel's inequality ([#8251](https://github.com/leanprover-community/mathlib/pull/#8251))

A proof both of Bessel's inequality and that the infinite sum defined by Bessel's inequality converges.

### [2021-07-11T14:37:02+00:00](https://github.com/leanprover-community/mathlib/commit/bee165ab6cf39e1c3eadcd6b3e50fbcf710878e4)
feat(category_theory/abelian/opposite): Adds some op-related isomorphism for (co)kernels. ([#8255](https://github.com/leanprover-community/mathlib/pull/#8255))

### [2021-07-11T13:10:23+00:00](https://github.com/leanprover-community/mathlib/commit/1e62218fdeeaadc0297fdd14b06d48a0104fae5a)
feat(data/int/gcd): norm_num extension for gcd ([#8053](https://github.com/leanprover-community/mathlib/pull/#8053))

Implements a `norm_num` plugin to evaluate terms like `nat.gcd 6 8 = 2`, `nat.coprime 127 128`, and so on for `{nat, int}.{gcd, lcm, coprime}`.

### [2021-07-11T10:44:09+00:00](https://github.com/leanprover-community/mathlib/commit/14f324be2e200719645e288130498bd496da21d7)
chore(data/set/basic): remove set.decidable_mem ([#8240](https://github.com/leanprover-community/mathlib/pull/#8240))

The only purpose of this instance was to enable the spelling `[decidable_pred s]` when what is actually needed is `decidable_pred (∈ s)`, which is a bad idea.

This is a follow-up to [#8211](https://github.com/leanprover-community/mathlib/pull/#8211).
Only two proofs needed this instance, and both were using completely the wrong lemmas anyway.

### [2021-07-11T02:16:20+00:00](https://github.com/leanprover-community/mathlib/commit/850928d49f5fdd351435647d7a533f97f4827502)
chore(scripts): update nolints.txt ([#8257](https://github.com/leanprover-community/mathlib/pull/#8257))

I am happy to remove some nolints for you!

### [2021-07-11T01:40:33+00:00](https://github.com/leanprover-community/mathlib/commit/e627394deeda89cbe5a23818a7e0da468c29af89)
feat(analysis/special_functions): limit of (1+1/x)^x ([#8243](https://github.com/leanprover-community/mathlib/pull/#8243))

Resolves https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/e.20as.20limit.20of.20.281.2B1.2Fn.29.5En.

### [2021-07-10T20:40:14+00:00](https://github.com/leanprover-community/mathlib/commit/90d8d46849cf701d5bdfa785108a614dba4674a3)
feat(category_theory/monad): monad forget is monadic ([#8161](https://github.com/leanprover-community/mathlib/pull/#8161))

cc @adamtopaz 
wip since I need to dualise

### [2021-07-10T18:38:10+00:00](https://github.com/leanprover-community/mathlib/commit/8b4628e48f5818adc4acc103ffa3b3ee2eaf0b1d)
feat(data/fintype/basic): induction principle for finite types ([#8158](https://github.com/leanprover-community/mathlib/pull/#8158))

This lets us prove things about finite types by induction, analogously to proving things about natural numbers by induction. Here `pempty` plays the role of `0` and `option` plays the role of `nat.succ`. We need an extra hypothesis that our statement is invariant under equivalence of types. Used in [#8019](https://github.com/leanprover-community/mathlib/pull/#8019).

### [2021-07-10T08:01:40+00:00](https://github.com/leanprover-community/mathlib/commit/aa78feba8b700290f6d44189850cd7bcb21c3443)
feat(category_theory/is_connected): constant functor is full ([#8233](https://github.com/leanprover-community/mathlib/pull/#8233))

Shows the constant functor on a connected category is full.

Also golfs a later proof slightly.

### [2021-07-10T08:01:39+00:00](https://github.com/leanprover-community/mathlib/commit/b1806d1987bc11edde9117d301d244e9856ba778)
chore(analysis/normed_space/banach): speed up the proof ([#8230](https://github.com/leanprover-community/mathlib/pull/#8230))

This proof has timed out in multiple refactor PRs I've made. This splits out an auxiliary definition.

The new definition takes about 3.5s to elaborate, and the two lemmas are <500ms each.
The old lemma took 45s.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-07-10T07:14:29+00:00](https://github.com/leanprover-community/mathlib/commit/9e0462c02dc08a3cc6e0d2652dfab99bfb9ec470)
feat(topology/algebra/infinite_sum): summable_empty ([#8241](https://github.com/leanprover-community/mathlib/pull/#8241))

Every function over an empty type is summable.

### [2021-07-10T04:07:29+00:00](https://github.com/leanprover-community/mathlib/commit/e18b3a892d33417795a8144902e5d7619ab2cac1)
feat(category_theory/limits): transfer limit creation along diagram iso ([#8237](https://github.com/leanprover-community/mathlib/pull/#8237))

### [2021-07-10T03:32:13+00:00](https://github.com/leanprover-community/mathlib/commit/d0e09dde55e4f03616f0da759b8bf19179f9c2f3)
feat(linear_algebra/matrix/nonsingular_inverse): more lemmas ([#8216](https://github.com/leanprover-community/mathlib/pull/#8216))

add more defs and lemmas



Co-authored-by: l534zhan <84618936+l534zhan@users.noreply.github.com>

### [2021-07-10T02:13:42+00:00](https://github.com/leanprover-community/mathlib/commit/b52c1f0c8363ff339aaf290a8e599241d54d837a)
chore(scripts): update nolints.txt ([#8245](https://github.com/leanprover-community/mathlib/pull/#8245))

I am happy to remove some nolints for you!

### [2021-07-09T22:11:36+00:00](https://github.com/leanprover-community/mathlib/commit/70320f743c9ac48bcc71be3e0e5100e2e206f913)
feat(category_theory/category/Kleisli): Fix lint errors ([#8244](https://github.com/leanprover-community/mathlib/pull/#8244))

Fixes some lint errors for this file: unused arguments, module doc, inhabited instances

### [2021-07-09T19:00:53+00:00](https://github.com/leanprover-community/mathlib/commit/a444e81fa5c316f26b648850f0afd4dbe01f55d9)
feat(measure_theory/borel_space): a preconnected set is measurable ([#8044](https://github.com/leanprover-community/mathlib/pull/#8044))

In a conditionally complete linear order equipped with the order topology and the corresponding borel σ-algebra, any preconnected set is measurable.

### [2021-07-09T15:19:06+00:00](https://github.com/leanprover-community/mathlib/commit/bcd61b1d8cf2a26ba8e22f9c3dd8bc1a6135aa96)
feat(algebra/category): provide right adjoint instances for forget ([#8235](https://github.com/leanprover-community/mathlib/pull/#8235))

Also adds some universe variables since they weren't inferred sensibly.

### [2021-07-09T13:36:51+00:00](https://github.com/leanprover-community/mathlib/commit/ee0181755adc4327e37edbf610f306db6e1a8213)
chore(data/set/basic): use `decidable_pred (∈ s)` instead of `decidable_pred s`. ([#8211](https://github.com/leanprover-community/mathlib/pull/#8211))

The latter exploits the fact that sets are functions to Prop, and is an annoying form as lemmas are never stated about it.

In future we should consider removing the `set.decidable_mem` instance which encourages this misuse.

Making this change reveals a collection of pointless decidable arguments requiring that finset membership be decidable; something which is always true anyway.

Two proofs in `data/pequiv` caused a crash inside the C++ portion of the `finish` tactic; it was easier to just write the simple proofs manually than to debug the C++ code.

### [2021-07-09T13:36:49+00:00](https://github.com/leanprover-community/mathlib/commit/a312e7e28e05af77ab8b7d495fadc1c8b6305d52)
chore(topology/topological_fiber_bundle): reorganizing the code ([#7938](https://github.com/leanprover-community/mathlib/pull/#7938))

What I do here:
 - Get rid of `local_triv`: it is not needed.
 - Change `local_triv_ext` to `local_triv`
 - Rename `local_triv'` as `local_triv_as_local_equiv` (name suggested by @sgouezel)
 - Improve type class inference by getting rid of `dsimp` in instances
 - Move results about `bundle` that do not need the topology in an appropriate file
 - Update docs accordingly.

Nothing else.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-07-09T12:52:46+00:00](https://github.com/leanprover-community/mathlib/commit/abde2102446e818729021a16171b5045172b1dee)
feat(analysis/complex/isometry): restate result more abstractly ([#7908](https://github.com/leanprover-community/mathlib/pull/#7908))

Define `rotation` as a group homomorphism from the circle to the isometry group of `ℂ`.  State the classification of isometries of `ℂ` more abstractly, using this construction.  Also golf some proofs.

### [2021-07-09T09:42:47+00:00](https://github.com/leanprover-community/mathlib/commit/11348653c2a5d522408f3f118658434f705411d6)
feat(category_theory/limits): finite products from finite limits ([#8236](https://github.com/leanprover-community/mathlib/pull/#8236))

Adds instances for finite products from finite limits.

### [2021-07-08T23:05:26+00:00](https://github.com/leanprover-community/mathlib/commit/e46447bea641670c28641f33a125ea9ceb68049c)
feat(measure_theory/measure_space): prob_le_one ([#7913](https://github.com/leanprover-community/mathlib/pull/#7913))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-07-08T18:57:18+00:00](https://github.com/leanprover-community/mathlib/commit/9d40a598300c17c3a83b1bf4f19ae6578899ed4e)
feat(group_theory,linear_algebra): third isomorphism theorem for groups and modules ([#8203](https://github.com/leanprover-community/mathlib/pull/#8203))

This PR proves the third isomorphism theorem for (additive) groups and modules, and also adds a few `simp` lemmas that I needed.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-07-08T17:14:02+00:00](https://github.com/leanprover-community/mathlib/commit/a7b660e441c2ba079c6a06bf98fda5a3fa64944a)
feat(linear_algebra/prod): add coprod_map_prod ([#8220](https://github.com/leanprover-community/mathlib/pull/#8220))

This also adds `submodule.coe_sup` and `set.mem_finset_prod`. The latter was intended to be used to show `submodule.coe_supr`, but I didn't really need that and it was hard to prove.

### [2021-07-08T16:41:12+00:00](https://github.com/leanprover-community/mathlib/commit/13486fe55e22cfa8904b3f943072f4d36580831b)
chore(measure_theory/measure_space): untangle `probability_measure`, `finite_measure`, and `has_no_atoms` ([#8222](https://github.com/leanprover-community/mathlib/pull/#8222))

This only moves existing lemmas around. Putting all the instance together up front seems to result in lemmas being added in adhoc places - by adding `section`s, this should guide future contributions.

### [2021-07-08T14:46:44+00:00](https://github.com/leanprover-community/mathlib/commit/b10062e77db6dd7503f08adafcaa511b804f5d08)
feat(data/finset/noncomm_prod): noncomm_prod_union_of_disjoint ([#8169](https://github.com/leanprover-community/mathlib/pull/#8169))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-07-08T13:06:54+00:00](https://github.com/leanprover-community/mathlib/commit/a4b0b48b43e9565171691f43f709f28639a0c494)
feat(data/nat/basic): lt_one_iff ([#8224](https://github.com/leanprover-community/mathlib/pull/#8224))





Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-07-08T11:22:43+00:00](https://github.com/leanprover-community/mathlib/commit/fb22ae330262601523cfcc1542559026a7cb7b6d)
refactor(order/rel_iso): move statements about intervals to data/set/intervals ([#8150](https://github.com/leanprover-community/mathlib/pull/#8150))

This means that we can talk about `rel_iso` without needing to transitively import `ordered_group`s

This PR takes advantage of this to define `order_iso.mul_(left|right)[']` to mirror `equiv.mul_(left|right)[']`.

### [2021-07-08T09:27:54+00:00](https://github.com/leanprover-community/mathlib/commit/03e2cbd0969c81244a020ae727ddcbe8da794575)
chore(group_theory/perm/support): support_pow_le over nat ([#8225](https://github.com/leanprover-community/mathlib/pull/#8225))

Previously, both `support_pow_le` and `support_gpow_le` had the
power as an `int`. Now we properly differentiate the two and avoid
slow defeq checks.

### [2021-07-08T02:02:10+00:00](https://github.com/leanprover-community/mathlib/commit/0ee238cffe3dc9ebfb5fe4cc126fc05fc851d612)
chore(scripts): update nolints.txt ([#8227](https://github.com/leanprover-community/mathlib/pull/#8227))

I am happy to remove some nolints for you!

### [2021-07-07T20:50:25+00:00](https://github.com/leanprover-community/mathlib/commit/70aef28e7965fc621ea60ee44495372577075717)
feat(group_theory/perm/list): concrete permutations from a list ([#7451](https://github.com/leanprover-community/mathlib/pull/#7451))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-07-07T17:46:10+00:00](https://github.com/leanprover-community/mathlib/commit/5f2358c43b769b334f3986a96565e606fe5bccec)
fix(data/complex/basic): ensure `algebra ℝ ℂ` is computable ([#8166](https://github.com/leanprover-community/mathlib/pull/#8166))

Without this `complex.ring` instance, `ring ℂ` is found via `division_ring.to_ring` and `field.to_division_ring`, and `complex.field` is non-computable.

The non-computable-ness previously contaminated `distrib_mul_action R ℂ` and even some properties of `finset.sum` on complex numbers! To avoid this type of mistake again, we remove `noncomputable theory` and manually flag the parts we actually expect to be computable.

### [2021-07-07T15:54:45+00:00](https://github.com/leanprover-community/mathlib/commit/e0ca85340229476d092548a2969c62b999201a95)
feat(algebra/group/units): teach `simps` about `units` ([#8204](https://github.com/leanprover-community/mathlib/pull/#8204))

This also introduces `units.copy` to match `invertible.copy`, and uses it to make some lemmas in normed_space/units true by `rfl` (and generated by `simps`).

### [2021-07-07T15:54:44+00:00](https://github.com/leanprover-community/mathlib/commit/ce3d53b040a3a6bed56d053f0d97a94d4e936af8)
fix(data/real/basic): provide a computable `module` instance ([#8164](https://github.com/leanprover-community/mathlib/pull/#8164))

Without this instance, `normed_field.to_normed_space` and `normed_space.to_module` is tried first, but this results in a noncomputable instance.





Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-07-07T15:11:09+00:00](https://github.com/leanprover-community/mathlib/commit/05e8ed24ba20e57ac2e2e45cb7fae8b4a4e86a0b)
chore(feat/algebra/lie/from_cartan_matrix): rename file ([#8219](https://github.com/leanprover-community/mathlib/pull/#8219))

### [2021-07-07T15:11:08+00:00](https://github.com/leanprover-community/mathlib/commit/836c54918f2721b27e8edde20c59aa72a34917ed)
docs(category_theory/limits/shapes/products): add module docstring ([#8212](https://github.com/leanprover-community/mathlib/pull/#8212))

Also resolves some TODOs.

### [2021-07-07T14:30:42+00:00](https://github.com/leanprover-community/mathlib/commit/51452619fcf3db23545428e2a0462fa170a5b707)
feat(data/fintype/list): induced fintype on nodup lists ([#8171](https://github.com/leanprover-community/mathlib/pull/#8171))

### [2021-07-07T13:35:19+00:00](https://github.com/leanprover-community/mathlib/commit/5796783b68a566d9afbe8de9ab89501378220a05)
chore(category_theory): homogenise usage of notation for terminal objects ([#8106](https://github.com/leanprover-community/mathlib/pull/#8106))

I went with the option that is used more frequently, but I'm also happy to switch to the space-less option if people prefer it.

### [2021-07-07T12:02:07+00:00](https://github.com/leanprover-community/mathlib/commit/bb5ab1e79e4faed350860f71d4a903c2470a1000)
chore(measure_theory/measure_space): add missing `finite_measure` instances ([#8214](https://github.com/leanprover-community/mathlib/pull/#8214))

### [2021-07-07T12:02:05+00:00](https://github.com/leanprover-community/mathlib/commit/41ec92ea5ea2b33121a934bb5018683759369b69)
feat(algebra/lie/from_cartan_matrix): construction of a Lie algebra from a Cartan matrix ([#8206](https://github.com/leanprover-community/mathlib/pull/#8206))

### [2021-07-07T12:02:02+00:00](https://github.com/leanprover-community/mathlib/commit/126a7b6e51af3f1895b2a607c0dbcaaf74ff7fe5)
feat(data/multiset/basic): add_eq_union_iff_disjoint ([#8173](https://github.com/leanprover-community/mathlib/pull/#8173))

### [2021-07-07T10:24:57+00:00](https://github.com/leanprover-community/mathlib/commit/29beb1f362462f1d219d85151cda43e990eaea92)
feat(analysis/normed_space/int): norms of (units of) integers ([#8136](https://github.com/leanprover-community/mathlib/pull/#8136))

From LTE

### [2021-07-07T10:24:56+00:00](https://github.com/leanprover-community/mathlib/commit/89e183761d40bebc6814b2d14194669ec0531e31)
fix(tactic/core): add subst' ([#8129](https://github.com/leanprover-community/mathlib/pull/#8129))

`tactic.subst'` gives a better error message when the substituted variable is a local definition.
It is hard to fix this in core (without touching C++ code), since `tactic.is_local_def` is in mathlib

### [2021-07-07T10:24:54+00:00](https://github.com/leanprover-community/mathlib/commit/47c7c016efaa6d260b8bcb6a22391d9bb5fd6ad9)
feat(measure_theory/measure_space): if `f` restricted to `s` is measurable, then `f` is `ae_measurable` wrt `μ.restrict s` ([#8098](https://github.com/leanprover-community/mathlib/pull/#8098))

### [2021-07-07T08:47:55+00:00](https://github.com/leanprover-community/mathlib/commit/06f0d5176c869baf0a4c4cf1e3c9a6b375cdbddd)
refactor(algebra/ordered_group): another step in the `order` refactor -- ordered groups ([#8060](https://github.com/leanprover-community/mathlib/pull/#8060))

This PR represents another wave of generalization of proofs, following from the `order` refactor.  It is another step towards [#7645](https://github.com/leanprover-community/mathlib/pull/#7645).

### [2021-07-07T02:20:39+00:00](https://github.com/leanprover-community/mathlib/commit/20d8e837c265fa51508b8b8867d1b4b281f6157b)
chore(scripts): update nolints.txt ([#8217](https://github.com/leanprover-community/mathlib/pull/#8217))

I am happy to remove some nolints for you!

### [2021-07-06T18:26:45+00:00](https://github.com/leanprover-community/mathlib/commit/d7653b8dff5cae5d672f7fe77302da9ab9e0f051)
chore(category_theory/monad/algebra): lint and golf ([#8160](https://github.com/leanprover-community/mathlib/pull/#8160))

Adds a module docstring and golfs some proofs, including removing `erw`.

### [2021-07-06T16:15:28+00:00](https://github.com/leanprover-community/mathlib/commit/03c8904ae07ca1efbd624739c836a58c92b57851)
doc(data/set/function): add set. prefixes for doc-gen ([#8215](https://github.com/leanprover-community/mathlib/pull/#8215))

This means these names will be linked.

### [2021-07-06T14:26:27+00:00](https://github.com/leanprover-community/mathlib/commit/ec07293a75a503a0535a2d61f68421156d5a6f58)
doc(*): add bold in doc strings for named theorems i.e. **mean value theorem** ([#8182](https://github.com/leanprover-community/mathlib/pull/#8182))

### [2021-07-06T13:47:12+00:00](https://github.com/leanprover-community/mathlib/commit/139999703e05165e26899003655820b4b308e933)
feat(category_theory/closed): Exponential ideals ([#4930](https://github.com/leanprover-community/mathlib/pull/#4930))

Define exponential ideals.

### [2021-07-06T11:32:50+00:00](https://github.com/leanprover-community/mathlib/commit/98e8408ac78f3dedc6a2f3d2fec89a39b5ce20f0)
feat(geometry/manifold/algebra): `left_invariant_derivation` ([#8108](https://github.com/leanprover-community/mathlib/pull/#8108))

In this PR we prove that left-invariant derivations are a Lie algebra.

### [2021-07-06T10:58:03+00:00](https://github.com/leanprover-community/mathlib/commit/23d22e4a7a299f137632fd19f15f8e4ae379f265)
feat(category_theory/abelian/ext): Defines Ext functors. ([#8186](https://github.com/leanprover-community/mathlib/pull/#8186))

See my comment from [#7525](https://github.com/leanprover-community/mathlib/pull/#7525) 



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-07-06T08:21:53+00:00](https://github.com/leanprover-community/mathlib/commit/2f72023263e58f39b2e5b0616f0c9cf784a993f8)
chore(measure_theory/decomposition): change statement to use the `finite_measure` instance ([#8207](https://github.com/leanprover-community/mathlib/pull/#8207))

### [2021-07-06T05:05:33+00:00](https://github.com/leanprover-community/mathlib/commit/6365c6c1ac9ffe3be0f4c2dbf3644c9b5b0c1b3a)
feat(algebra/invertible): construction from is_unit ([#8205](https://github.com/leanprover-community/mathlib/pull/#8205))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-07-06T02:10:44+00:00](https://github.com/leanprover-community/mathlib/commit/27841bbb7b34fc532dfcebfcf0f803e1a248a3b3)
chore(scripts): update nolints.txt ([#8208](https://github.com/leanprover-community/mathlib/pull/#8208))

I am happy to remove some nolints for you!

### [2021-07-05T17:24:46+00:00](https://github.com/leanprover-community/mathlib/commit/77e1e3b20716d2e8a33fb0672e558c5a05d3361b)
feat(linear_algebra/nonsingular_inverse): add lemmas about `invertible` ([#8201](https://github.com/leanprover-community/mathlib/pull/#8201))

### [2021-07-05T17:24:45+00:00](https://github.com/leanprover-community/mathlib/commit/9d998338bf15620246436a22b55a617cf324573d)
feat(category_theory/linear/yoneda): A linear version of Yoneda. ([#8199](https://github.com/leanprover-community/mathlib/pull/#8199))

### [2021-07-05T17:24:44+00:00](https://github.com/leanprover-community/mathlib/commit/b6bf7a301df103259fcaf97b7591d4b92ac6b250)
feat(measure_theory/lp_space): define the Lp function corresponding to the indicator of a set ([#8193](https://github.com/leanprover-community/mathlib/pull/#8193))

I also moved some measurability lemmas from the integrable_on file to measure_space. I needed them and lp_space is before integrable_on in the import graph.

### [2021-07-05T17:24:43+00:00](https://github.com/leanprover-community/mathlib/commit/7eab080bcda8e01526f299e3b21929933780266b)
feat(topology/instances/ennreal): add tsum lemmas for ennreal.to_real ([#8184](https://github.com/leanprover-community/mathlib/pull/#8184))

### [2021-07-05T15:47:16+00:00](https://github.com/leanprover-community/mathlib/commit/38a6f265eb95ecaaec03ead591c0011ac0101012)
feat(algebra/to_additive): map pow to smul ([#7888](https://github.com/leanprover-community/mathlib/pull/#7888))

* Allows `@[to_additive]` to reorder consecutive arguments of specified identifiers.
* This can be specified with the attribute `@[to_additive_reorder n m ...]` to swap arguments `n` and `n+1`, arguments `m` and `m+1` etc. (start counting from 1).
* The only two attributes currently in use are:
```lean
attribute [to_additive_reorder 1] has_pow
attribute [to_additive_reorder 1 4] has_pow.pow
```
* It will  eta-expand all expressions that have as head a declaration with attribute `to_additive_reorder` until they have the required number of arguments. This is required to correctly deal with partially applied terms.
* Hack: if the first two arguments are reordered, then the first two universe variables are also reordered (this happens to be the correct behavior for `has_pow` and `has_pow.pow`). It might be cleaner to have a separate attribute for that, but that given the low amount of times that I expect that we use `to_additive_reorder`, this seems unnecessary.
* This PR also allows the user to write `@[to_additive?]` to trace the generated declaration.



Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-07-05T14:57:50+00:00](https://github.com/leanprover-community/mathlib/commit/f2edc5a3529d95699b43514d6feb7eb11608723f)
feat(category_theory/preadditive/opposite): Adds some instances and lemmas ([#8202](https://github.com/leanprover-community/mathlib/pull/#8202))

This PR adds some instances and lemmas related to opposites and additivity of functors.

### [2021-07-05T14:14:01+00:00](https://github.com/leanprover-community/mathlib/commit/0b0d8e7e46ddc0127fdb972b870e1fd9184e2a95)
refactor(ring_theory): turn `localization_map` into a typeclass ([#8119](https://github.com/leanprover-community/mathlib/pull/#8119))

This PR replaces the previous `localization_map (M : submodule R) Rₘ` definition (a ring hom `R →+* Rₘ` that presents `Rₘ` as the localization of `R` at `M`) with a new `is_localization M Rₘ` typeclass that puts these requirements on `algebra_map R Rₘ` instead. An important benefit is that we no longer need to mess with `localization_map.codomain` to put an `R`-algebra structure on `Rₘ`, we can just work with `Rₘ` directly.

The important API changes are in commit 0de78dc, all other commits are simply fixes to the dependent files.

Main changes:
 * `localization_map` has been replaced with `is_localization`, similarly `away_map` -> `is_localization.away`, `localization_map.at_prime` -> `is_localization.at_prime` and `fraction_map` -> `is_fraction_ring`
 * many declarations taking the `localization_map` as a parameter now take `R` and/or `M` and/or `Rₘ`, depending on what can be inferred easily
 * `localization_map.to_map` has been replaced with `algebra_map R Rₘ`
 * `localization_map.codomain` and its instances have been removed (you can now directly use `Rₘ`)
 * `is_localization.alg_equiv` generalizes `fraction_map.alg_equiv_of_quotient` (which has been renamed to `is_fraction_ring.alg_equiv`)
 * `is_localization.sec` has been introduced to replace `(to_localization_map _ _).sec`
 * `localization.of` have been replaced with `algebra` and `is_localization` instances on `localization`, similarly for `localization.away.of`, `localization.at_prime.of` and `fraction_ring.of`.
 * `int.fraction_map` is now an instance `rat.is_fraction_ring`
 * All files depending on the above definitions have had fixes. These were mostly straightforward, except:
 * [Some category-theory arrows in `algebraic_geometry/structure.sheaf` are now plain `ring_hom`s. This change was suggested by @justus-springer in order to help the elaborator figure out the arguments to  `is_localization`.](https://github.com/leanprover-community/mathlib/commit/cf3acc925467cc06237a13dbe4264529f9a58850)
 * Deleted `minpoly.over_int_eq_over_rat` and `minpoly.integer_dvd`, now you can just use `gcd_domain_eq_field_fractions` or `gcd_domain_dvd` respectively. [This removes code duplication in `minpoly.lean`](https://github.com/leanprover-community/mathlib/commit/5695924d85710f98ac60a7df91d7dbf27408ca26)
 * `fractional_ideal` does not need to assume `is_localization` everywhere, only for certain specific definitions

Things that stay the same:
 * `localization`, `localization.away`, `localization.at_prime` and `fraction_ring` are still a construction of localizations (although see above for `{localization,localization.away,localization.at_prime,fraction_ring}.of`)

Zulip thread: https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Refactoring.20.60localization_map.60

### [2021-07-05T13:27:54+00:00](https://github.com/leanprover-community/mathlib/commit/6bad4c610179632d7f287bd012634642d6c0656d)
feat(ring_theory/trace): the composition of `trace`s is `trace` ([#8078](https://github.com/leanprover-community/mathlib/pull/#8078))

A little group of lemmas from the Dedekind domain project.

### [2021-07-05T11:54:51+00:00](https://github.com/leanprover-community/mathlib/commit/8ba94ab79b5d75bbb562665326666ea675c8ff88)
chore(algebra/invertible): units coerced to their monoid are invertible ([#8195](https://github.com/leanprover-community/mathlib/pull/#8195))

### [2021-07-05T10:29:14+00:00](https://github.com/leanprover-community/mathlib/commit/63c8d333cfe70b5fcd29535eac7f54a456df94aa)
feat(linear_algebra/matrix/reindex): generalize reindex_linear_equiv to operate on an arbitrary ring ([#8159](https://github.com/leanprover-community/mathlib/pull/#8159))

This changes `reindex_linear_equiv eₘ eₙ : matrix m m R ≃ₗ[R] matrix n n R` to `reindex_linear_equiv R A eₘ eₙ : matrix m m A ≃ₗ[R] matrix n n A`, which both works for a larger range of types, and eliminates the need for type ascriptions that was previously caused by the implicitness of `R`.

We cannot yet make the same generalization for `reindex_alg_equiv` as the `algebra R (matrix m m A)` structure implied by `algebra R A` is not in mathlib yet.

### [2021-07-05T09:56:32+00:00](https://github.com/leanprover-community/mathlib/commit/a8f60ebc2ec11c018740fa204d2516681377d416)
feat(algebra/lie/free): the universal enveloping algebra of the free Lie algebra is the free associative algebra ([#8183](https://github.com/leanprover-community/mathlib/pull/#8183))

### [2021-07-04T16:29:14+00:00](https://github.com/leanprover-community/mathlib/commit/4ace3b73b4a3cdafe51f3c1a01fe2b583ae0c499)
feat(measure_theory/conditional_expectation): define the Lp subspace of functions measurable wrt a sigma-algebra, prove completeness ([#7945](https://github.com/leanprover-community/mathlib/pull/#7945))

This is the first step towards defining the conditional expectation:
- in this PR a subspace of L^p is shown to be complete, which is necessary to define an orthogonal projection on that subspace;
- the conditional expectation of functions in L^2 will be the orthogonal projection;
- the definition will be extended to L^1 through simple functions (as is done for the integral definition).

### [2021-07-04T15:19:05+00:00](https://github.com/leanprover-community/mathlib/commit/01b062a17899f99bc9d2793672186d9e8b3aaa37)
chore(category_theory/abelian/diagram_lemmas/four): Make the diagram into a code block ([#8192](https://github.com/leanprover-community/mathlib/pull/#8192))

Currently on mathlib docs, it looks like this

![image](https://user-images.githubusercontent.com/15098580/124386872-4c869d00-dcd4-11eb-9c5c-ce6a29e4e607.png)

Making it into a code block should mean that it will render correctly on mathlib docs

### [2021-07-04T13:54:21+00:00](https://github.com/leanprover-community/mathlib/commit/d819e364acf8e8620b04bcb8c9f17fa657dc3236)
feat(data/finset/basic): sdiff_val, disjoint_to_finset_iff_disjoint ([#8168](https://github.com/leanprover-community/mathlib/pull/#8168))





Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-07-04T13:20:09+00:00](https://github.com/leanprover-community/mathlib/commit/2ebd96c29ac26ec63a6f1952b48d681c3f162ad5)
doc(measure_theory/measurable_space): correct tiny misprints in two doc-strings ([#8187](https://github.com/leanprover-community/mathlib/pull/#8187))

Modifying doc-strings of `measurable_space.comap` and `measurable_space.map`: changing "measure space" to "measurable space" in both.

### [2021-07-04T11:49:30+00:00](https://github.com/leanprover-community/mathlib/commit/7135c96f1cb240929e4f65ce2c4c86a7eff55c9e)
chore(data/list/perm): make `perm_nil` a simp lemma ([#8191](https://github.com/leanprover-community/mathlib/pull/#8191))

### [2021-07-04T09:30:33+00:00](https://github.com/leanprover-community/mathlib/commit/a9db7cede21e174031c4affa878dd6582ca2948e)
chore(measure_theory/{bochner_integration, simple_func_dense}): Move construction of embedding of L1 simple funcs ([#8185](https://github.com/leanprover-community/mathlib/pull/#8185))

At the moment, there is a low-level construction in `measure_theory/simple_func_dense` for the approximation of an element of L1 by simple functions, and this is generalized to a more abstract version (with a normed space `L1.simple_func` and a dense linear embedding of this into `L1`) in `measure_theory/bochner_integration`.  [#8114](https://github.com/leanprover-community/mathlib/pull/#8114) generalized the low-level construction, and I am thinking of rewriting the more abstract version to apply to `Lp`, too.

But since this will all be more generally useful than in the construction of the Bochner integral, and since the Bochner integral file is very long, I propose moving all this material into `measure_theory/simple_func_dense`.  This PR shows what it would look like.  There are no mathematical changes.

### [2021-07-04T09:30:32+00:00](https://github.com/leanprover-community/mathlib/commit/180d004c949980014c53149a54fe91f38573b77e)
ci(.github/workflows/*): switch to self-hosted runners ([#8177](https://github.com/leanprover-community/mathlib/pull/#8177))

With this PR, mathlib builds on all branches will use the self-hosted runners that have the "pr" tag. One self-hosted runner is reserved for bors staging branch builds and does not have that tag.

The `build_fork` workflow has been added for use by external forks (and other Lean projects which might want to copy mathlib's CI).



Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2021-07-04T07:58:33+00:00](https://github.com/leanprover-community/mathlib/commit/863f0075169415512cb0f0cadc48a2ed6ad2ded7)
feat(data/list/basic): map_permutations ([#8188](https://github.com/leanprover-community/mathlib/pull/#8188))

As [requested on Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/perm.20of.20permutations/near/244821779).

### [2021-07-04T02:26:45+00:00](https://github.com/leanprover-community/mathlib/commit/cdb44dfa8179ddda7aae1571435eb81e516e95a5)
chore(scripts): update nolints.txt ([#8189](https://github.com/leanprover-community/mathlib/pull/#8189))

I am happy to remove some nolints for you!

### [2021-07-03T16:33:31+00:00](https://github.com/leanprover-community/mathlib/commit/531d85042ff2e66f08e08ca0c35dcdccd83a58f8)
feat(category_theory): left-derived functors ([#7487](https://github.com/leanprover-community/mathlib/pull/#7487))

# Left-derived functors

We define the left-derived functors `F.left_derived n : C ⥤ D` for any additive functor `F`
out of a category with projective resolutions.

The definition is
```
projective_resolutions C ⋙ F.map_homotopy_category _ ⋙ homotopy_category.homology_functor D _ n
```
that is, we pick a projective resolution (thought of as an object of the homotopy category),
we apply `F` objectwise, and compute `n`-th homology.

We show that these left-derived functors can be calculated
on objects using any choice of projective resolution,
and on morphisms by any choice of lift to a chain map between chosen projective resolutions.

Similarly we define natural transformations between left-derived functors coming from
natural transformations between the original additive functors,
and show how to compute the components.

## Implementation

We don't assume the categories involved are abelian
(just preadditive, and have equalizers, cokernels, and image maps),
or that the functors are right exact.
None of these assumptions are needed yet.

It is often convenient, of course, to work with `[abelian C] [enough_projectives C] [abelian D]`
which (assuming the results from `category_theory.abelian.projective`) are enough to
provide all the typeclass hypotheses assumed here.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-07-03T13:08:36+00:00](https://github.com/leanprover-community/mathlib/commit/74a0f67bede17a27d42f67f04ceab1adf3d2a6a6)
refactor(measure_theory/simple_func_dense): generalize approximation results from L^1 to L^p ([#8114](https://github.com/leanprover-community/mathlib/pull/#8114))

Simple functions are dense in L^p.  The argument for `1 ≤ p < ∞` is exactly the same as for `p = 1`, which was already in mathlib:  construct a suitable sequence of pointwise approximations and apply the Dominated Convergence Theorem.  This PR refactors to provide the general-`p` result.

The argument for `p = ∞` requires finite-dimensionality of `E` and a different approximating sequence, so is left for another PR.

### [2021-07-03T10:46:49+00:00](https://github.com/leanprover-community/mathlib/commit/a022bb75e1c90250b63f5b8e8df366c5110daaa9)
feat(algebra/invertible): add a missing lemma `inv_of_eq_left_inv` ([#8179](https://github.com/leanprover-community/mathlib/pull/#8179))

add "inv_of_eq_left_inv"

### [2021-07-03T10:46:48+00:00](https://github.com/leanprover-community/mathlib/commit/111ac5ca9ad6900cde7cf5fcdb9350c1c9611f26)
feat(group_theory/perm/basic): of_subtype_apply_of_mem ([#8174](https://github.com/leanprover-community/mathlib/pull/#8174))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-07-03T10:46:47+00:00](https://github.com/leanprover-community/mathlib/commit/25d042c155b235ca4bd2c621725f06337950f3bc)
feat(algebra/periodic): a few more periodicity lemmas ([#8062](https://github.com/leanprover-community/mathlib/pull/#8062))

A few more lemmas about periodic functions that I realized are useful.

### [2021-07-03T09:58:05+00:00](https://github.com/leanprover-community/mathlib/commit/915902e6a24722ba20cf3e97adb733bc2909e596)
feat(topology/algebra/multilinear): add a linear_equiv version of pi ([#8064](https://github.com/leanprover-community/mathlib/pull/#8064))

This is a weaker version of `continuous_multilinear_map.piₗᵢ` that requires weaker typeclasses.

Unfortunately I don't understand why the typeclass system continues not to cooperate here, but I suspect it's the same class of problem that plagues `dfinsupp`.

### [2021-07-03T03:02:44+00:00](https://github.com/leanprover-community/mathlib/commit/edb72b447b251b80edff62de17d16fdb06b64c4c)
docs(data/real/*): add module docstrings ([#8145](https://github.com/leanprover-community/mathlib/pull/#8145))

### [2021-07-02T22:04:07+00:00](https://github.com/leanprover-community/mathlib/commit/10f6c2c40f0a8e5b2f6f8ec1d746211f3fa644e9)
feat(data/real/nnreal): cast_nat_abs_eq_nnabs_cast ([#8121](https://github.com/leanprover-community/mathlib/pull/#8121))

### [2021-07-02T20:58:33+00:00](https://github.com/leanprover-community/mathlib/commit/f8ca79020dcc864cfe13073fab6c91ced34d291f)
chore(group_theory/congruence): fix docstring ([#8162](https://github.com/leanprover-community/mathlib/pull/#8162))

This fixes a docstring which didn't match the code.

### [2021-07-02T20:21:24+00:00](https://github.com/leanprover-community/mathlib/commit/f5a8b8a6e731bfefa6371383fb74c26c19f0681d)
fix(topology/continuous_function/basic): fix `continuous_map.id_coe` ([#8180](https://github.com/leanprover-community/mathlib/pull/#8180))

### [2021-07-02T19:46:00+00:00](https://github.com/leanprover-community/mathlib/commit/9e9dfc26f18855424e84b50e73076ac030245b66)
feat(category_theory/adjunction/fully_faithful): Converses to `unit_is_iso_of_L_fully_faithful` and `counit_is_iso_of_R_fully_faithful` ([#8181](https://github.com/leanprover-community/mathlib/pull/#8181))

Add a converse to `unit_is_iso_of_L_fully_faithful` and to `counit_is_iso_of_R_fully_faithful`



Co-authored-by: Robin Carlier <57142648+robin-carlier@users.noreply.github.com>

### [2021-07-02T18:29:36+00:00](https://github.com/leanprover-community/mathlib/commit/ea924e57af7865c1615adad9670af5d1d671cbac)
feat(data/nat/choose/bounds): exponential bounds on binomial coefficients ([#8095](https://github.com/leanprover-community/mathlib/pull/#8095))




Co-authored-by: Eric <ericrboidi@gmail.com>
Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-07-02T16:37:34+00:00](https://github.com/leanprover-community/mathlib/commit/67c72b42b53dfb58b0536d720a85119f8fa037f7)
feat(data/list/cycle): lift next_prev to cycle ([#8172](https://github.com/leanprover-community/mathlib/pull/#8172))

### [2021-07-02T10:55:24+00:00](https://github.com/leanprover-community/mathlib/commit/d6a7c3bc895f1c2269bbd8fa63929f3272bc5301)
chore(algebra/algebra/basic): add `alg_hom.of_linear_map` and lemmas ([#8151](https://github.com/leanprover-community/mathlib/pull/#8151))

This lets me golf `complex.lift` a little

### [2021-07-02T08:19:35+00:00](https://github.com/leanprover-community/mathlib/commit/dfc42f9631fb39fdab635c8279bf323e2642affc)
feat(data/equiv/basic): swap_apply_ne_self_iff ([#8167](https://github.com/leanprover-community/mathlib/pull/#8167))

### [2021-07-02T05:56:27+00:00](https://github.com/leanprover-community/mathlib/commit/f5f8a20f2144cd97ab49db283c1f5cb3d76d74ae)
feat(analysis/calculus/fderiv_symmetric): prove that the second derivative is symmetric ([#8104](https://github.com/leanprover-community/mathlib/pull/#8104))

We show that, if a function is differentiable over the reals around a point `x`, and is second-differentiable at `x`, then the second derivative is symmetric. In fact, we even prove a stronger statement for functions differentiable within a convex set, to be able to apply it for functions on the half-plane or the quadrant.

### [2021-07-01T21:10:28+00:00](https://github.com/leanprover-community/mathlib/commit/92b64a0db8555855d1f807512cec2c323715406d)
feat(data/list/duplicate): prop that element is a duplicate ([#7824](https://github.com/leanprover-community/mathlib/pull/#7824))

As discussed in https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nodup.20and.20decidability and [#7587](https://github.com/leanprover-community/mathlib/pull/#7587) 



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-07-01T19:34:23+00:00](https://github.com/leanprover-community/mathlib/commit/5945ca39c1d84e09fc428475a0787a408102a0f6)
chore(*): update to lean 3.31.0c ([#8122](https://github.com/leanprover-community/mathlib/pull/#8122))

### [2021-07-01T18:15:23+00:00](https://github.com/leanprover-community/mathlib/commit/395d8716c3ad03747059d482090e2bb97db612c8)
chore(algebra/lie/free): tidy up after [#8153](https://github.com/leanprover-community/mathlib/pull/#8153) ([#8163](https://github.com/leanprover-community/mathlib/pull/#8163))

@eric-wieser had some further comments and suggestions which didn't make it into [#8153](https://github.com/leanprover-community/mathlib/pull/#8153)

### [2021-07-01T16:37:06+00:00](https://github.com/leanprover-community/mathlib/commit/1571290260afc8018695f921551941ef7c7a97e9)
feat(logic/is_empty): add some simp lemmas and unique instances ([#7832](https://github.com/leanprover-community/mathlib/pull/#7832))

There are a handful of lemmas about `(h : ¬nonempty a)` that if restated in terms of `[is_empty a]` become suitable for `simp` or as `instance`s. This adjusts some of those lemmas.

### [2021-07-01T14:19:24+00:00](https://github.com/leanprover-community/mathlib/commit/3d2e5ac2c7d73c6faf2156ca9ea4117859359e39)
chore(linear_algebra/matrix/determinant): golf a proof ([#8157](https://github.com/leanprover-community/mathlib/pull/#8157))

### [2021-07-01T14:19:23+00:00](https://github.com/leanprover-community/mathlib/commit/ca30bd221fce98e40390a6a2618f91490515c89e)
feat(analysis/fourier): span of monomials is dense in C^0 ([#8035](https://github.com/leanprover-community/mathlib/pull/#8035))

Prove that the span of the monomials `λ z, z ^ n` is dense in `C(circle, ℂ)`, i.e. that its `submodule.topological_closure` is `⊤`.  This follows from the Stone-Weierstrass theorem after checking that it is a subalgebra, closed under conjugation, and
separates points.

### [2021-07-01T12:58:30+00:00](https://github.com/leanprover-community/mathlib/commit/3fa61ea4dcf17077366369e24a369c953324464e)
feat(algebra/lie/free): construction of free Lie algebras ([#8153](https://github.com/leanprover-community/mathlib/pull/#8153))

### [2021-07-01T12:58:29+00:00](https://github.com/leanprover-community/mathlib/commit/4d24172474f809cde4390cabaf14c865cc5e67a4)
docs(order/zorn): explain how to use Zorn's lemma ([#8125](https://github.com/leanprover-community/mathlib/pull/#8125))

### [2021-07-01T12:58:27+00:00](https://github.com/leanprover-community/mathlib/commit/7cbca35ff8ca70b580ef074edeecac2791fe26ad)
feat(data/fintype/intervals): fintype instances for set.{Icc,Ioc,Ioo} ([#8123](https://github.com/leanprover-community/mathlib/pull/#8123))

### [2021-07-01T11:10:36+00:00](https://github.com/leanprover-community/mathlib/commit/6e0d2d3bbe21e2632eee2768665c618b054b9d46)
feat(logic/basic): add two simp lemmas ([#8148](https://github.com/leanprover-community/mathlib/pull/#8148))

### [2021-07-01T07:48:35+00:00](https://github.com/leanprover-community/mathlib/commit/8986c4fd3b989f1435c0b9d20b18aa5564836c5d)
chore(linear_algebra/matrix/determinant): squeeze some simps for speed up ([#8156](https://github.com/leanprover-community/mathlib/pull/#8156))

I simply squeezed some simps in `linear_algebra/matrix/determinant` to obtain two much faster proofs.

[Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews)

### [2021-07-01T07:48:34+00:00](https://github.com/leanprover-community/mathlib/commit/582ee9ee0f2a63f5fdfa62bc076bbb402b20e9d9)
feat(logic/basic): subtype.subsingleton ([#8138](https://github.com/leanprover-community/mathlib/pull/#8138))

### [2021-07-01T07:48:33+00:00](https://github.com/leanprover-community/mathlib/commit/aabb900b56fe69256a9d7ebc590093d57eb22ae0)
feat(order/preorder_hom): preorder_hom_eq_id ([#8135](https://github.com/leanprover-community/mathlib/pull/#8135))

From LTE

### [2021-07-01T07:48:32+00:00](https://github.com/leanprover-community/mathlib/commit/4a7587650974967d672053bf2807227ae9dc6e40)
feat(category_theory/limits/concrete_category): Some lemmas about limits in concrete categories ([#8130](https://github.com/leanprover-community/mathlib/pull/#8130))

Generalizes some lemmas from LTE. 

See zulip discussion [here](https://leanprover.zulipchat.com/#narrow/stream/267928-condensed-mathematics/topic/for_mathlib.2Fwide_pullback/near/244298079).

### [2021-07-01T06:12:12+00:00](https://github.com/leanprover-community/mathlib/commit/2df573a507e1f458f03bbbcf3330b071de2d3478)
feat(data/int/basic): int.eq_zero_of_div_eq_zero ([#8134](https://github.com/leanprover-community/mathlib/pull/#8134))

### [2021-07-01T02:20:40+00:00](https://github.com/leanprover-community/mathlib/commit/b972280786fdbf54582a375ff94511d365ef17bb)
chore(scripts): update nolints.txt ([#8155](https://github.com/leanprover-community/mathlib/pull/#8155))

I am happy to remove some nolints for you!

### [2021-06-30T21:21:07+00:00](https://github.com/leanprover-community/mathlib/commit/0faf086475589a6ad62045254711cd654b363c14)
feat(data/int/cast): cast_nat_abs ([#8120](https://github.com/leanprover-community/mathlib/pull/#8120))

### [2021-06-30T21:21:06+00:00](https://github.com/leanprover-community/mathlib/commit/ad00a0212b2b95c5890ded0a5b383eb2fcd8386d)
feat(topology/vector_bundle): `topological_vector_bundle_core` ([#8089](https://github.com/leanprover-community/mathlib/pull/#8089))

Analogous construction to `topological_fiber_bundle_core`. This construction gives a way to construct vector bundles from a structure registering how trivialization changes act on fibers.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-06-30T20:39:41+00:00](https://github.com/leanprover-community/mathlib/commit/e70093ffea81db2c01cf6dbe91b2270b7a200167)
feat(algebra/free_non_unital_non_assoc_algebra): construction of the free non-unital, non-associative algebra on a type `X` with coefficients in a semiring `R` ([#8141](https://github.com/leanprover-community/mathlib/pull/#8141))

### [2021-06-30T18:53:30+00:00](https://github.com/leanprover-community/mathlib/commit/e7131068d9696deec51e6cd7668b6d9ac69af6a4)
docs(data/string/*): add module docstrings ([#8144](https://github.com/leanprover-community/mathlib/pull/#8144))

### [2021-06-30T18:53:29+00:00](https://github.com/leanprover-community/mathlib/commit/8ee29671b3aaaf7f583eddda306f0bdd06fc8fd0)
feat(algebra/big_operators/basic): nat_abs_sum_le ([#8132](https://github.com/leanprover-community/mathlib/pull/#8132))

### [2021-06-30T18:03:21+00:00](https://github.com/leanprover-community/mathlib/commit/3a5851f025697694fef4e02da443f40694c82048)
feat(data/complex/module): add complex.lift to match zsqrtd.lift ([#8107](https://github.com/leanprover-community/mathlib/pull/#8107))

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/The.20unique.20.60.E2.84.82.20.E2.86.92.E2.82.90.5B.E2.84.9D.5D.20A.60.20given.20a.20square.20root.20of.20-1/near/244135262)

### [2021-06-30T16:49:13+00:00](https://github.com/leanprover-community/mathlib/commit/36c90d5e2ea60a148e98509382e5258d0f7aee96)
fix(algebra/algebra/subalgebra): fix incorrect namespaces and remove duplicate instance ([#8140](https://github.com/leanprover-community/mathlib/pull/#8140))

We already had a `subsingleton` instance on `alg_hom`s added in [#5672](https://github.com/leanprover-community/mathlib/pull/#5672), but we didn't find it [#8110](https://github.com/leanprover-community/mathlib/pull/#8110) because

* gh-6025 means we can't ask `apply_instance` to find it
* it had an incorrect name in the wrong namespace

Code opting into this instance will need to change from
```lean
local attribute [instance] alg_hom.subsingleton
```
to
```lean
local attribute [instance] alg_hom.subsingleton subalgebra.subsingleton_of_subsingleton
```

### [2021-06-30T16:49:12+00:00](https://github.com/leanprover-community/mathlib/commit/d420db5433d8e69e6a48fb7a795df09508c03902)
chore(algebra/algebra): trivial lemmas for alg_equiv ([#8139](https://github.com/leanprover-community/mathlib/pull/#8139))

### [2021-06-30T13:51:06+00:00](https://github.com/leanprover-community/mathlib/commit/9c03c0359eb1c4cd1eecab3fcd501c513864ba19)
feat(data/set/basic): range_pair_subset ([#8133](https://github.com/leanprover-community/mathlib/pull/#8133))

From LTE.

Co-authored-by: <patrickmassot@free.fr>

### [2021-06-30T12:06:40+00:00](https://github.com/leanprover-community/mathlib/commit/1de192f4adb3c9d7496da0d6e0d19c26db9a8fb2)
feat(algebra/ordered_ring): abs_cases lemma ([#8124](https://github.com/leanprover-community/mathlib/pull/#8124))

This lemma makes the following type of argument work seamlessly:

```lean
example (h : x<-1/2) : |x + 1| < |x| := by cases abs_cases (x + 1); cases abs_cases x; linarith
```

### [2021-06-30T11:26:31+00:00](https://github.com/leanprover-community/mathlib/commit/db0590047c9053a5114026a4e4ba528c8e23f116)
feat(linear_algebra/clifford_algebra): two algebras are isomorphic if their quadratic forms are equivalent ([#8128](https://github.com/leanprover-community/mathlib/pull/#8128))

### [2021-06-30T08:51:20+00:00](https://github.com/leanprover-community/mathlib/commit/9a8dcb9be408e7ae8af9f6832c08c021007f40ec)
docs(data/dlist/basic): add module docstring ([#8079](https://github.com/leanprover-community/mathlib/pull/#8079))

### [2021-06-30T04:28:24+00:00](https://github.com/leanprover-community/mathlib/commit/eeeb22383c5bb7c79f98e68bb5c726199d73f3bc)
feat(data/int/basic): int.nat_abs_sub_le ([#8118](https://github.com/leanprover-community/mathlib/pull/#8118))

### [2021-06-30T04:28:23+00:00](https://github.com/leanprover-community/mathlib/commit/af8a38fdb579e44c1f3fe6bfa24bf22b745a3716)
feat(algebra/{covariant_and_contravariant + ordered_monoid): add instance, golf, docs ([#8067](https://github.com/leanprover-community/mathlib/pull/#8067))

Introduce a missing instance for `comm_semigroup`s.

Also, golf a couple of proofs and add a relevant, explicit PR to a comment.

### [2021-06-30T03:13:34+00:00](https://github.com/leanprover-community/mathlib/commit/3ee436d2dee6751f7c587fb23ba4cdcf45f6cc95)
docs(data/char): add module docstring ([#8043](https://github.com/leanprover-community/mathlib/pull/#8043))

### [2021-06-30T02:07:35+00:00](https://github.com/leanprover-community/mathlib/commit/8cacd99e04e65978041d3fab42091f5f7d5b1ba0)
chore(scripts): update nolints.txt ([#8131](https://github.com/leanprover-community/mathlib/pull/#8131))

I am happy to remove some nolints for you!

### [2021-06-29T23:21:40+00:00](https://github.com/leanprover-community/mathlib/commit/917bcd44f4bcb6f1ba0e5bebe9274a5254f552e6)
doc(topology/separation): module + lemma docs ([#8091](https://github.com/leanprover-community/mathlib/pull/#8091))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-06-29T23:21:39+00:00](https://github.com/leanprover-community/mathlib/commit/2600baf0265145ddd2d1b2af17cecf7da71f2722)
docs(data/list/sections): add module docstring ([#8033](https://github.com/leanprover-community/mathlib/pull/#8033))




Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-06-29T21:36:27+00:00](https://github.com/leanprover-community/mathlib/commit/2c749b1220919645886936d7fb0c3d27fea263c3)
feat(algebra/to_additive): do not additivize operations on constant types ([#7792](https://github.com/leanprover-community/mathlib/pull/#7792))

* Fixes [#4210](https://github.com/leanprover-community/mathlib/pull/#4210)
* Adds a heuristic to `@[to_additive]` that decides which multiplicative identifiers to replace with their additive counterparts. 
* See [Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive.20and.20fixed.20types) thread or documentation for the precise heuristic.
* We tag some types with `@[to_additive]`, so that they are handled correctly by the heurstic. These types `pempty`, `empty`, `unit` and `punit`.
* We make the following change to enable to above bullet point: you are allowed to translate a declaration to itself, only if you write its name again as argument of the attribute (if you don't specify an argument we want to raise an error, since that likely is a mistake).
* Because of this heuristic, all declarations with the `@[to_additive]` attribute should have a type with a multiplicative structure on it as its first argument. The first argument should not be an arbitrary indexing type. This means that in `finset.prod` and `finprod` we reorder the first two (implicit) arguments, so that the first argument is the codomain of the function.
* This will eliminate many (but not all) type mismatches generated by `@[to_additive]`.
* This heuristic doesn't catch all cases: for example, the declaration could have two type arguments with multiplicative structure, and the second one is `ℕ`, but the first one is a variable.



Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-06-29T20:21:49+00:00](https://github.com/leanprover-community/mathlib/commit/e6ec901669e1fe1efd341fe80a661ee673014f3b)
feat(ring_theory/power_basis): extensionality for algebra homs ([#8110](https://github.com/leanprover-community/mathlib/pull/#8110))

This PR shows two `alg_hom`s out of an algebra with a power basis are equal if the generator has the same image for both maps. It uses this result to bundle `power_basis.lift` into an equiv.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-06-29T19:37:54+00:00](https://github.com/leanprover-community/mathlib/commit/505c32f5935f347dfd7e017fba9d9f4aa56fd5f3)
feat(analysis/normed_space/inner_product): the orthogonal projection is self adjoint ([#8116](https://github.com/leanprover-community/mathlib/pull/#8116))

### [2021-06-29T17:54:59+00:00](https://github.com/leanprover-community/mathlib/commit/5ecd078d8c8c567a5bb1b87dc5287dd3d7c8f193)
feat(data/ordmap/ordset): Implement some more `ordset` functions ([#8127](https://github.com/leanprover-community/mathlib/pull/#8127))

Implement (with proofs) `erase`, `map`, and `mem` for `ordset` in `src/data/ordmap` along with a few useful related proofs.

### [2021-06-29T17:54:58+00:00](https://github.com/leanprover-community/mathlib/commit/d558350f5390f4bc1104e32e9686eefe4f8cd4d5)
feat(algebra/ordered_group): add a few instances, prune unneeded code ([#8075](https://github.com/leanprover-community/mathlib/pull/#8075))

This PR aims at shortening the subsequent `order` refactor.

The removed lemmas can now by proven as follows:

```lean
@[to_additive ordered_add_comm_group.add_lt_add_left]
lemma ordered_comm_group.mul_lt_mul_left' (a b : α) (h : a < b) (c : α) : c * a < c * b :=
mul_lt_mul_left' h c

@[to_additive ordered_add_comm_group.le_of_add_le_add_left]
lemma ordered_comm_group.le_of_mul_le_mul_left (h : a * b ≤ a * c) : b ≤ c :=
le_of_mul_le_mul_left' h

@[to_additive]
lemma ordered_comm_group.lt_of_mul_lt_mul_left (h : a * b < a * c) : b < c :=
lt_of_mul_lt_mul_left' h
```

They were only used in this file and I replaced their appearances by the available proofs.

### [2021-06-29T17:54:57+00:00](https://github.com/leanprover-community/mathlib/commit/bdf2d81ea2f6333fdb5164023d64d770598a467e)
feat(topology/continuous_function/stone_weierstrass): complex Stone-Weierstrass ([#8012](https://github.com/leanprover-community/mathlib/pull/#8012))

### [2021-06-29T16:11:34+00:00](https://github.com/leanprover-community/mathlib/commit/4cdfbd2539c819c5aba8555675a5258887e6b045)
feat(data/setoid/partition): indexed partition ([#7910](https://github.com/leanprover-community/mathlib/pull/#7910))

from LTE
Note that data/setoid/partition.lean, which already existed before this
PR, is currently not imported anywhere in mathlib. But it is used in LTE
and will be used in the next PR, in relation to locally constant
functions.





Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-06-29T14:28:25+00:00](https://github.com/leanprover-community/mathlib/commit/23ee7ea7aef22ba9e8fd93bca3acc85f36e8a982)
feat(analysis/normed_space/basic): int.norm_eq_abs ([#8117](https://github.com/leanprover-community/mathlib/pull/#8117))

### [2021-06-29T14:28:24+00:00](https://github.com/leanprover-community/mathlib/commit/d249e5337369195903fdba5461358d19cbca9a83)
feat(algebra/ordered_group): add instances mixing `group` and `co(ntra)variant` ([#8072](https://github.com/leanprover-community/mathlib/pull/#8072))

In an attempt to break off small parts of PR [#8060](https://github.com/leanprover-community/mathlib/pull/#8060), I extracted some of the instances proven there to this PR.

This is part of the `order` refactor.

~~I tried to get rid of the `@`, but failed.  If you have a trick to avoid them, I would be very happy to learn it!~~  `@`s removed!

### [2021-06-29T14:28:23+00:00](https://github.com/leanprover-community/mathlib/commit/70fcf999e68a66013e165ff30cb570f427026258)
feat(group_theory/free_abelian_group_finsupp): isomorphism between `free_abelian_group` and `finsupp` ([#8046](https://github.com/leanprover-community/mathlib/pull/#8046))

From LTE






Co-authored-by: Filippo A. E. Nuccio <65080144+faenuccio@users.noreply.github.com>

### [2021-06-29T13:33:01+00:00](https://github.com/leanprover-community/mathlib/commit/68d7d001186d7a4b2a8f6de0ca49a6f43e15ea95)
chore(analysis/special_functions/pow): versions of tendsto/continuous_at lemmas for (e)nnreal ([#8113](https://github.com/leanprover-community/mathlib/pull/#8113))

We have the full suite of lemmas about `tendsto` and `continuous` for real powers of `real`, but apparently not for `nnreal` or `ennreal`.  I have provided a few, rather painfully -- if there is a better way, golfing is welcome!




Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-06-29T12:50:05+00:00](https://github.com/leanprover-community/mathlib/commit/54eccb0e2c18a0c12317781ad5e72dcf45dd7f08)
feat(measure_theory/lp_space): add snorm_eq_lintegral_rpow_nnnorm ([#8115](https://github.com/leanprover-community/mathlib/pull/#8115))

Add two lemmas to go from `snorm` to integrals (through `snorm'`). The idea is that `snorm'` should then generally not be used, except in the construction of `snorm`.

### [2021-06-29T11:29:09+00:00](https://github.com/leanprover-community/mathlib/commit/90d2046b6e9ff08b1eb98c21f3102713b5a5747d)
feat(algebra/monoid_algebra): adjointness for the functor `G ↦ monoid_algebra k G` when `G` carries only `has_mul` ([#7932](https://github.com/leanprover-community/mathlib/pull/#7932))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-06-29T10:46:12+00:00](https://github.com/leanprover-community/mathlib/commit/d521b2bc7401d907baf28ece17f959a890cd7c30)
feat(algebraic_topology/simplex_category): epi and monos in the simplex category ([#8101](https://github.com/leanprover-community/mathlib/pull/#8101))

Characterize epimorphisms and monomorphisms in `simplex_category` in terms of the function they represent. Add lemmas about their behavior on length of objects. 



Co-authored-by: Robin Carlier <57142648+robin-carlier@users.noreply.github.com>

### [2021-06-29T06:55:39+00:00](https://github.com/leanprover-community/mathlib/commit/07f1235dbf45b6c74fa8f0695213a2bf2b7130a0)
chore(category_theory/opposites): make hom explicit in lemmas ([#8088](https://github.com/leanprover-community/mathlib/pull/#8088))

### [2021-06-28T20:13:06+00:00](https://github.com/leanprover-community/mathlib/commit/ac156c155041663de61c6c8b46a59868a473cc30)
chore(algebra/algebra/basic): add algebra.right_comm to match left_comm ([#8109](https://github.com/leanprover-community/mathlib/pull/#8109))

This also reorders the arguments to `right_comm` to match the order they appear in the LHS of the lemma.

### [2021-06-28T16:40:09+00:00](https://github.com/leanprover-community/mathlib/commit/a79df550ac95d019154a65512f85c84bf5a55b63)
chore(algebra/ordered_group): remove linear_ordered_comm_group.to_comm_group ([#7861](https://github.com/leanprover-community/mathlib/pull/#7861))

This instance shortcut bypassed `ordered_comm_group`, and could easily result in computability problems since many `linear_order` instances are noncomputable due to their embedded decidable instances. This would happen when:

* Lean needs an `add_comm_group A`
* We have:
  * `noncomputable instance : linear_ordered_comm_group A`
  * `instance : ordered_comm_group A`
* Lean tries `linear_ordered_comm_group.to_comm_group` before `ordered_comm_group.to_comm_group`, and hands us back a noncomputable one, even though there is a computable one available.

There're no comments explaining why things were done this way, suggesting it was accidental, or perhaps that `ordered_comm_group` came later.

This broke one proof which somehow `simponly`ed associativity the wrong way, so I just golfed that proof and the one next to it for good measure.

### [2021-06-28T15:38:22+00:00](https://github.com/leanprover-community/mathlib/commit/1ffb5be5e1df05b9d571cc00b6a40b7d2f96c34e)
feat(data/complex/module): add complex.alg_hom_ext ([#8105](https://github.com/leanprover-community/mathlib/pull/#8105))

### [2021-06-28T13:54:02+00:00](https://github.com/leanprover-community/mathlib/commit/b160ac8d23eaaaa63f5fedb90ad3c445d8cba3a5)
chore(topology/topological_fiber_bundle): reorganizing the code ([#7989](https://github.com/leanprover-community/mathlib/pull/#7989))

Mainly redesigning the `simp` strategy.

### [2021-06-28T12:36:08+00:00](https://github.com/leanprover-community/mathlib/commit/f7c1e5f2dd5ab1cc3c24ec0ba9c9a9f3c634c7b0)
feat(algebra/lie/nilpotent): basic lemmas about nilpotency for Lie subalgebras of associative algebras ([#8090](https://github.com/leanprover-community/mathlib/pull/#8090))

The main lemma is: `lie_algebra.is_nilpotent_ad_of_is_nilpotent` which is the first step in proving Engel's theorem.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-06-28T11:54:29+00:00](https://github.com/leanprover-community/mathlib/commit/81183ea40d7313064e175a4e051ad2e9d09d997a)
feat(geometry/manifold): `derivation_bundle` ([#7708](https://github.com/leanprover-community/mathlib/pull/#7708))

In this PR we define the `derivation_bundle`. Note that this definition is purely algebraic and that the whole geometry/analysis is contained in the algebra structure of smooth global functions on the manifold.

I believe everything runs smoothly and elegantly and that most proofs can be naturally done by `rfl`. To anticipate some discussions that already arose on Zulip about 9 months ago, note that the content of these files is purely algebraic and that there is no intention whatsoever to replace the current tangent bundle. I prefer this definition to the one given through the adjoint representation, because algebra is more easily formalized and simp can solve most proofs with this definition. However, in the future, there will be also the adjoint representation for sure.

### [2021-06-28T10:36:19+00:00](https://github.com/leanprover-community/mathlib/commit/bfd06851d9ad7bee7a295fdb39f136d2b14c5a5e)
fix(algebra/module/linear_map): do not introduce `show` ([#8102](https://github.com/leanprover-community/mathlib/pull/#8102))

Without this change, `apply linear_map.coe_injective` on a goal of `f = g` introduces some unpleasant `show` terms, giving a goal of
```lean
(λ (f : M →ₗ[R] M₂), show M → M₂, from ⇑f) f = (λ (f : M →ₗ[R] M₂), show M → M₂, from ⇑f) g
```
which is then frustrating to `rw` at, instead of
```lean
⇑f = ⇑g
```

### [2021-06-28T08:51:27+00:00](https://github.com/leanprover-community/mathlib/commit/3cb247c33aa9c9f5a881620850f46e22cf7b0ac2)
chore(algebra/ordered_monoid_lemmas): change additive name `left.add_nonneg` to `right.add_nonneg` ([#8065](https://github.com/leanprover-community/mathlib/pull/#8065))

A copy-paste error in the name of a lemma that has not been used yet.

Change `pos_add` to `add_pos`.

I also added some paragraph breaks in the documentation.

Co-authored by Eric Wieser.

### [2021-06-28T06:13:33+00:00](https://github.com/leanprover-community/mathlib/commit/80d02347a7866c7ea0f9c6c67d14655b830de594)
fix(algebra/group_power): put opposite lemmas in the right namespace ([#8100](https://github.com/leanprover-community/mathlib/pull/#8100))

### [2021-06-28T04:53:22+00:00](https://github.com/leanprover-community/mathlib/commit/7b253dd5364b68dfea90b7f77717d0518dcbe64a)
feat(group_theory/subgroup): lemmas for normal subgroups of subgroups ([#7271](https://github.com/leanprover-community/mathlib/pull/#7271))



Co-authored-by: Hanting Zhang <76727734+acxxa@users.noreply.github.com>

### [2021-06-27T15:45:05+00:00](https://github.com/leanprover-community/mathlib/commit/f8e9c1791dd5728d808cd9bfbe9c34e88a66f1ba)
feat(data/nat/factorial): descending factorial ([#7759](https://github.com/leanprover-community/mathlib/pull/#7759))

- rename `desc_fac` to `asc_factorial`
- define `desc_factorial`
- update `data.fintype.card_embedding` to use `desc_factorial`


Co-authored-by: Eric <ericrboidi@gmail.com>
Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-06-27T13:01:13+00:00](https://github.com/leanprover-community/mathlib/commit/2dcc307eb2f3a68ff28ee54931ac10f035b3fa67)
feat(category_theory/limits): morphism to terminal is split mono ([#8084](https://github.com/leanprover-community/mathlib/pull/#8084))

A generalisation of existing results: we already have an instance `split_mono` to `mono` so this is strictly more general.

### [2021-06-27T02:15:39+00:00](https://github.com/leanprover-community/mathlib/commit/c5d17ae168841baa6250521f608b2a7f2613f25f)
chore(scripts): update nolints.txt ([#8093](https://github.com/leanprover-community/mathlib/pull/#8093))

I am happy to remove some nolints for you!

### [2021-06-26T22:33:31+00:00](https://github.com/leanprover-community/mathlib/commit/c7a35b411ed2ceccc3a6acc3611b195313cf4a7f)
doc(topology/homeomorph): fixup glaring error ([#8092](https://github.com/leanprover-community/mathlib/pull/#8092))

thanks to @kbuzzard for spotting this error in [#8086](https://github.com/leanprover-community/mathlib/pull/#8086)

### [2021-06-26T20:35:05+00:00](https://github.com/leanprover-community/mathlib/commit/0817020b2cc3cfa8b7fddb0c9a3ca9f4a9d95cfc)
doc(topology/homeomorph): module docs ([#8086](https://github.com/leanprover-community/mathlib/pull/#8086))

I really wanted to write more, but there's really not much to say about something that is a stronger bijection :b



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-06-26T18:57:08+00:00](https://github.com/leanprover-community/mathlib/commit/b874abc7127848fafb6395d180af8b6e3127d5f1)
feat(field_theory): state primitive element theorem using `power_basis` ([#8073](https://github.com/leanprover-community/mathlib/pull/#8073))

This PR adds an alternative formulation to the primitive element theorem: the original formulation was `∃ α : E, F⟮α⟯ = (⊤ : intermediate_field F E)`, which means a lot of pushing things across the equality/equiv from `F⟮α⟯` to `E` itself. I claim that working with a field `E` that has a power basis over `F` is nicer since you don't need to do a lot of transporting.

### [2021-06-26T18:15:06+00:00](https://github.com/leanprover-community/mathlib/commit/598722a212a2704e08980188f32927921de4442b)
feat(algebraic_topology/simplicial_object): Add augment construction ([#8085](https://github.com/leanprover-community/mathlib/pull/#8085))

Adds the augmentation construction for (co)simplicial objects.

From LTE.

### [2021-06-26T09:25:11+00:00](https://github.com/leanprover-community/mathlib/commit/4630067cc64c8c48f53b02913f835ae59c0eb01f)
chore(data/set/intervals): syntax clean up ([#8087](https://github.com/leanprover-community/mathlib/pull/#8087))

### [2021-06-25T21:10:33+00:00](https://github.com/leanprover-community/mathlib/commit/68ec06cf3d0a9803cde78e8c0cdc249d9f6d788c)
chore(analysis/analytic/composition): remove one `have` ([#8083](https://github.com/leanprover-community/mathlib/pull/#8083))

A `have` in a proof is not necessary.

### [2021-06-25T20:31:41+00:00](https://github.com/leanprover-community/mathlib/commit/92a717127d7084a4530f701b4f65879db669b35a)
feat(measure_theory/interval_integral): generalize `add_adjacent_intervals` to n-ary sum ([#8050](https://github.com/leanprover-community/mathlib/pull/#8050))

### [2021-06-25T18:48:54+00:00](https://github.com/leanprover-community/mathlib/commit/6666ba2f89214b227f4e4733597eb3cbf505700a)
fix(real/sign): make `real.sign 0 = 0` to match `int.sign 0` ([#8080](https://github.com/leanprover-community/mathlib/pull/#8080))

Previously `sign 0 = 1` which is quite an unusual definition. This definition brings things in line with `int.sign`, and include a proof of this fact.

A future refactor could probably introduce a sign for all rings with a partial order

### [2021-06-25T18:48:53+00:00](https://github.com/leanprover-community/mathlib/commit/a7faaf53e05ca2a80a2afc3888d7d823fd1440c0)
docs(data/list/chain): add module docstring ([#8041](https://github.com/leanprover-community/mathlib/pull/#8041))

### [2021-06-25T18:48:52+00:00](https://github.com/leanprover-community/mathlib/commit/cf4a2df23f1a6b26fb9ce573f50b3852047a8a56)
docs(data/list/range): add module docstring ([#8026](https://github.com/leanprover-community/mathlib/pull/#8026))

### [2021-06-25T17:09:01+00:00](https://github.com/leanprover-community/mathlib/commit/9cc44ba272fee80a6752b7489c629f8258d5c8ad)
feat(ring_theory/nilpotent): basic results about nilpotency in associative rings ([#8055](https://github.com/leanprover-community/mathlib/pull/#8055))

### [2021-06-25T10:35:36+00:00](https://github.com/leanprover-community/mathlib/commit/1774cf95b16305774cceec783884665a4345515a)
chore(data/complex/{module, is_R_or_C}, analysis/complex/basic): rationalize the structure provided for `conj` and `of_real` ([#8014](https://github.com/leanprover-community/mathlib/pull/#8014))

We have many bundled versions of the four operations associated with the complex-real interaction (real & imaginary parts, real-to-complex coercion `of_real`, complex conjugation `conj`).

This PR adjusts the versions provided, according to the following principles:
- `conj` is always an equivalence, there is never a need for the map version
- Both `of_real` and `conj` are `ℝ`-algebra homomorphisms, and since this in typical applications requires no more imports than `ℝ`-linear maps, they can entirely supersede the `ℝ`-linear map versions.
- Name according to the base map name together with an acronym for the bundled map type, for example `conj_ae` for `conj` as an algebra-equivalence (this principle had been largely, but not entirely, followed previously).

The following specific changes result:
- `quaternion.conj_alg_equiv` renamed to `quaternion.conj_ae`, likewise for `quaternion_algebra.conj_alg_equiv`
- `complex.conj_li` upgraded from a map to an equivalence
- `complex.conj_clm` (continuous linear map) upgraded to `complex.conj_cle` (continuous linear equivalence)
- `complex.conj_alg_equiv` renamed to `complex.conj_ae`
- `complex.conj_lm` gone, use `complex.conj_ae` instead
- `complex.of_real_lm` (linear map) upgraded to `complex.of_real_am` (algebra homomorphism)
- all the same changes for `is_R_or_C.*` as for `complex.*`

Associated lemmas are also renamed.

### [2021-06-25T09:21:01+00:00](https://github.com/leanprover-community/mathlib/commit/c51534666bcb58d51481008dd7e92c95d964e0bd)
feat(ring_theory/power_basis): map a power basis through an alg_equiv ([#8039](https://github.com/leanprover-community/mathlib/pull/#8039))

If `A` is equivalent to `A'` as an `R`-algebra and `A` has a power basis, then `A'` also has a power basis. Included are the relevant `simp` lemmas.

This needs a bit of tweaking to `basis.map` and `alg_equiv.to_linear_equiv` for getting more useful `simp` lemmas.

### [2021-06-25T07:18:41+00:00](https://github.com/leanprover-community/mathlib/commit/10cd252f703c0cb7422cb14daf5fd775dbb78743)
docs(overview, undergrad): add Liouville's Theorem on existence of transcendental numbers ([#8068](https://github.com/leanprover-community/mathlib/pull/#8068))


Co-authored-by: Jujian Zhang <jujian.zhang1998@outlook.com>

### [2021-06-24T21:57:47+00:00](https://github.com/leanprover-community/mathlib/commit/260824458cbaf750284b744abaf97c385b22114f)
feat(data/matrix/basic): add lemma minor_map  ([#8074](https://github.com/leanprover-community/mathlib/pull/#8074))

Add lemma `minor_map` proving that the operations of taking a minor and applying a map to the coefficients of a matrix commute.

### [2021-06-24T21:15:20+00:00](https://github.com/leanprover-community/mathlib/commit/e137523ae4842ff835a4b231fc4d6ccdf44891dc)
chore(algebraic_topology/simplex_category): golf proof ([#8076](https://github.com/leanprover-community/mathlib/pull/#8076))

The "special case of the first simplicial identity" is a trivial consequence of the "generic case". This makes me wonder whether the special case should be there at all but I do not know the standard references for this stuff.

### [2021-06-24T19:39:06+00:00](https://github.com/leanprover-community/mathlib/commit/e605b21f37a358af771ee2622c5ad0b4327974d8)
feat(linear_algebra/pi): add linear_equiv.Pi_congr_left ([#8070](https://github.com/leanprover-community/mathlib/pull/#8070))

This definition was hiding inside the proof for `is_noetherian_pi`

### [2021-06-24T16:50:00+00:00](https://github.com/leanprover-community/mathlib/commit/25d8aac60bfc01abc2cc040d008b02d8bef13044)
chore(field_theory): turn `intermediate_field.subalgebra.equiv_of_eq`  into `intermediate_field.equiv_of_eq` ([#8069](https://github.com/leanprover-community/mathlib/pull/#8069))

I was looking for `intermediate_field.equiv_of_eq`. There was a definition of `subalgebra.equiv_of_eq` in the `intermediate_field` namespace which is equal to the original `subalgebra.equiv_of_eq` definition. Meanwhile, there was no `intermediate_field.equiv_of_eq`. So I decided to turn the duplicate into what I think was intended. (As a bonus, I added the `simp` lemmas from `subalgebra.equiv_of_eq`.)




Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-06-24T15:14:30+00:00](https://github.com/leanprover-community/mathlib/commit/db84f2b6c15b8186dadface08ef9360491a7c8ed)
feat(data/polynomial): `aeval_alg_equiv`, like `aeval_alg_hom` ([#8038](https://github.com/leanprover-community/mathlib/pull/#8038))

This PR copies `polynomial.aeval_alg_hom` and `aeval_alg_hom_apply` to `aeval_alg_equiv(_apply)`.

### [2021-06-24T15:14:29+00:00](https://github.com/leanprover-community/mathlib/commit/2a155208855cf709fee0148e03624ba432f38e4c)
chore(data/polynomial): generalize `aeval_eq_sum_range` to `comm_semiring` ([#8037](https://github.com/leanprover-community/mathlib/pull/#8037))

This pair of lemmas did not need any `comm_ring` assumptions, so I put them in a new section with weaker typeclass assumptions.

### [2021-06-24T15:14:28+00:00](https://github.com/leanprover-community/mathlib/commit/3937c1b2a7bb3397ea52dbdbd5d13fd34b1c6498)
docs(data/list/pairwise): add module docstring ([#8025](https://github.com/leanprover-community/mathlib/pull/#8025))

### [2021-06-24T15:14:27+00:00](https://github.com/leanprover-community/mathlib/commit/520e79d9a1d79a68045dac56aa7d59e5b4c16d1a)
feat(analysis/convex/exposed): introduce exposed sets ([#7928](https://github.com/leanprover-community/mathlib/pull/#7928))

introduce exposed sets


Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-06-24T15:14:26+00:00](https://github.com/leanprover-community/mathlib/commit/4801fa663060fb7399408acdab5545447bcb6984)
feat(measure_theory): the Vitali-Caratheodory theorem ([#7766](https://github.com/leanprover-community/mathlib/pull/#7766))

This PR proves the Vitali-Carathéodory theorem, asserting that a measurable function can be closely approximated from above by a lower semicontinuous function, and from below by an upper semicontinuous function. 

This is the main ingredient in the proof of the general version of the fundamental theorem of calculus (when `f'` is just integrable, but not continuous).

### [2021-06-24T13:55:29+00:00](https://github.com/leanprover-community/mathlib/commit/b9bf921c4c99099c3ef90554cafd128c64a26694)
chore(linear_algebra): switch to named constructors for linear_map ([#8059](https://github.com/leanprover-community/mathlib/pull/#8059))

This makes some ideas I have for future refactors easier, and generally makes things less fragile to changes such as additional fields or reordering of fields.
The extra verbosity is not really significant.

This conversion is not exhaustive, there may be anonymous constructors elsewhere that I've missed.

### [2021-06-24T12:48:16+00:00](https://github.com/leanprover-community/mathlib/commit/2a1cabeab64ee48794eaf0c407eb08d1073c8d96)
chore(data/polynomial/eval, ring_theory/polynomial_algebra): golfs ([#8058](https://github.com/leanprover-community/mathlib/pull/#8058))

This golfs:

* `polynomial.map_nat_cast` to use `ring_hom.map_nat_cast`
* `polynomial.map.is_semiring_hom` to use `ring_hom.is_semiring_hom`
* `poly_equiv_tensor.to_fun` and `poly_equiv_tensor.to_fun_linear_right` out of existence

And adds a new (unused) lemma `polynomial.map_smul`.
All the other changes in `polynomial/eval` are just reorderings of lemmas to allow the golfing.

### [2021-06-24T11:32:46+00:00](https://github.com/leanprover-community/mathlib/commit/5352639d1532d2b93603e4aa1e12a5be3a5f0238)
feat(data/matrix/basic.lean) : added map_scalar and linear_map.map_matrix ([#8061](https://github.com/leanprover-community/mathlib/pull/#8061))

Added two lemmas (`map_scalar` and `linear_map.map_matrix_apply`) and a definition (`linear_map.map_matrix`) showing that a map between coefficients induces the same type of map between matrices with those coefficients.



Co-authored-by: Filippo A. E. Nuccio <65080144+faenuccio@users.noreply.github.com>

### [2021-06-24T09:57:32+00:00](https://github.com/leanprover-community/mathlib/commit/5bd649fb32f9af954ac712e570093cef9b4d1bd0)
feat(analysis/liouville/liouville_constant): transcendental Liouville numbers exist! ([#8020](https://github.com/leanprover-community/mathlib/pull/#8020))

The final (hopefully!) PR in the Liouville series: there are a couple of results and the proof that Liouville numbers are transcendental.

### [2021-06-24T09:57:31+00:00](https://github.com/leanprover-community/mathlib/commit/f7f12bc64060a035b6cbe01c94fbce0caddc618c)
feat(data/nat/prime): norm_num plugin for factors ([#8009](https://github.com/leanprover-community/mathlib/pull/#8009))

Implements a `norm_num` plugin to evaluate terms like `nat.factors 231 = [3, 7, 11]`.

### [2021-06-24T09:57:30+00:00](https://github.com/leanprover-community/mathlib/commit/d9dcf6993f8cb979aefdf9e9159098a1599e1eac)
feat(topology/topological_fiber_bundle): a new standard construction for topological fiber bundles ([#7935](https://github.com/leanprover-community/mathlib/pull/#7935))

In this PR we implement a new standard construction for topological fiber bundles: namely a structure that permits to define a fiber bundle when trivializations are given as local equivalences but there is not yet a topology on the total space. The total space is hence given a topology in such a way that there is a fiber bundle structure for which the local equivalences
are also local homeomorphism and hence local trivializations.

### [2021-06-24T08:13:45+00:00](https://github.com/leanprover-community/mathlib/commit/2f27046f56b1e1aee33939f89246fadd9163d39e)
refactor(algebra/ordered_monoid): use `covariant + contravariant` typeclasses in `algebra/ordered_monoid` ([#7999](https://github.com/leanprover-community/mathlib/pull/#7999))

Another stepping stone toward [#7645](https://github.com/leanprover-community/mathlib/pull/#7645).

### [2021-06-24T05:12:32+00:00](https://github.com/leanprover-community/mathlib/commit/56535164af19c6b4e6896939d956aa53bfee95e2)
feat(data/fin): some lemmas about casts ([#8049](https://github.com/leanprover-community/mathlib/pull/#8049))

From [LTE](https://github.com/leanprover-community/lean-liquid/blob/master/src/for_mathlib/fin.lean).



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-06-24T04:33:52+00:00](https://github.com/leanprover-community/mathlib/commit/e07a24a141af1d4a6430be3d59a6cd361e3a9e2d)
chore(data/real/hyperreal): remove @ in a proof ([#8063](https://github.com/leanprover-community/mathlib/pull/#8063))

Remove @ in a proof.  Besides its clear aesthetic value, this prevents having to touch this file when the number typeclass arguments in the intervening lemmas changes.

See PR [#7645](https://github.com/leanprover-community/mathlib/pull/#7645) and [#8060](https://github.com/leanprover-community/mathlib/pull/#8060).

### [2021-06-23T23:28:11+00:00](https://github.com/leanprover-community/mathlib/commit/b9ef710e0325c7f6538fc254728a184b08f2b552)
chore(linear_algebra): deduplicate `linear_equiv.{Pi_congr_right,pi}` ([#8056](https://github.com/leanprover-community/mathlib/pull/#8056))

PRs [#6415](https://github.com/leanprover-community/mathlib/pull/#6415) and [#7489](https://github.com/leanprover-community/mathlib/pull/#7489) both added the same linear equiv between Pi types. I propose to unify them, using the name of `Pi_congr_right` (more specific, matches `equiv.Pi_congr_right`), the location of `pi` (more specific) and the implementation of `Pi_congr_right` (shorter).

### [2021-06-23T21:01:23+00:00](https://github.com/leanprover-community/mathlib/commit/3cf803957ea95aed9266f696752d2e052972caab)
feat(measure_theory/set_integral): the set integral is continuous ([#7931](https://github.com/leanprover-community/mathlib/pull/#7931))

Most of the code is dedicated to building a continuous linear map from Lp to the Lp space corresponding to the restriction of the measure to a set. The set integral is then continuous as composition of the integral and that map.

### [2021-06-23T19:27:20+00:00](https://github.com/leanprover-community/mathlib/commit/a31e3c3c465012833e4c5bb53f8d05ec810c9606)
feat(category_theory/arrow/limit): limit cones in arrow categories ([#7457](https://github.com/leanprover-community/mathlib/pull/#7457))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-06-23T17:29:28+00:00](https://github.com/leanprover-community/mathlib/commit/204ca5f9353b641753745fc6c7eeb6c3ccc4d0d8)
docs(data/fin2): add module docstring ([#8047](https://github.com/leanprover-community/mathlib/pull/#8047))

### [2021-06-23T17:29:27+00:00](https://github.com/leanprover-community/mathlib/commit/89b8e0b25b60fdcb0276f5c9b6a2807e297176a0)
docs(data/option/defs): add module and def docstrings ([#8042](https://github.com/leanprover-community/mathlib/pull/#8042))

### [2021-06-23T17:29:26+00:00](https://github.com/leanprover-community/mathlib/commit/431207ae10790f58f7c71c0ca693c829fbc5662b)
docs(data/list/bag_inter): add module docstring ([#8034](https://github.com/leanprover-community/mathlib/pull/#8034))

### [2021-06-23T17:29:25+00:00](https://github.com/leanprover-community/mathlib/commit/dd5074c4f365fbf1b18f06163452eff85637c374)
feat(analysis/normed_space/basic): add has_nnnorm ([#7986](https://github.com/leanprover-community/mathlib/pull/#7986))

We create here classes `has_nndist` and `has_nnnorm` that are variants of `has_dist` and `has_norm` taking values in `ℝ≥0`.  Obvious instances are `pseudo_metric_space` and `semi_normed_group`.


These are not used that much in mathlib, but for example `has_nnnorm` is quite convenient for LTE.

### [2021-06-23T15:53:39+00:00](https://github.com/leanprover-community/mathlib/commit/a7b5237d586801f1285d0455a8f9e073d95172ee)
feat(category_theory/arrow): arrow.iso_mk ([#8057](https://github.com/leanprover-community/mathlib/pull/#8057))

### [2021-06-23T15:53:38+00:00](https://github.com/leanprover-community/mathlib/commit/c841b09a2cd5830625a9638f47c9cd6e54abab63)
docs(data/list/tfae): add module docstring ([#8040](https://github.com/leanprover-community/mathlib/pull/#8040))

### [2021-06-23T15:53:37+00:00](https://github.com/leanprover-community/mathlib/commit/5787d64be020a8cc314c88d5df0dc94ea4814aeb)
docs(data/list/zip): add module docstring ([#8036](https://github.com/leanprover-community/mathlib/pull/#8036))

### [2021-06-23T14:11:52+00:00](https://github.com/leanprover-community/mathlib/commit/97529b4c5f609c79720ec96c0437e24a9866c41d)
docs(data/list/forall2): add module docstring ([#8029](https://github.com/leanprover-community/mathlib/pull/#8029))

### [2021-06-23T11:50:23+00:00](https://github.com/leanprover-community/mathlib/commit/d9eed422ed59bb723352f208c8694749fae5c847)
feat(analysis/liouville/inequalities_and_series): two useful inequalities for Liouville ([#8001](https://github.com/leanprover-community/mathlib/pull/#8001))

This PR ~~creates a file with~~ proves two very specific inequalities.  They will be useful for the Liouville PR, showing that transcendental Liouville numbers exist.

After the initial code review, I scattered an initial segment of this PR into mathlib.  What is left might only be useful in the context of proving the transcendence of Liouville's constants.

~~Given the shortness of this file, I may move it into the main `liouville_constant`, after PR [#8020](https://github.com/leanprover-community/mathlib/pull/#8020)  is merged.~~

### [2021-06-23T09:25:09+00:00](https://github.com/leanprover-community/mathlib/commit/47ed97f385206908e377c79e8b3cbcb66a5eb353)
feat(algebra/ordered_monoid_lemmas + fixes): consistent use of `covariant` and `contravariant` in `ordered_monoid_lemmas` ([#7876](https://github.com/leanprover-community/mathlib/pull/#7876))

This PR breaks off a part of PR [#7645](https://github.com/leanprover-community/mathlib/pull/#7645).  Here, I start using more consistently `covariant_class` and `contravariant_class` in the file `algebra/ordered_monoid_lemmas`.

This PR is simply intended as a stepping stone to merging the bigger one ([#7645](https://github.com/leanprover-community/mathlib/pull/#7645)) and receiving "personalized comments on it!

Summary of changes:
--
New lemmas
* `@[to_additive add_nonneg] lemma one_le_mul_right`
* `@[to_additive] lemma le_mul_of_le_of_le_one`
* `@[to_additive] lemma mul_lt_mul_of_lt_of_lt`
* `@[to_additive] lemma left.mul_lt_one_of_lt_of_lt_one`
* `@[to_additive] lemma right.mul_lt_one_of_lt_of_lt_one`
* `@[to_additive] lemma left.mul_lt_one_of_lt_of_lt_one`
* `@[to_additive] lemma right.mul_lt_one_of_lt_of_lt_one`
* `@[to_additive right.add_nonneg] lemma right.one_le_mul`
* `@[to_additive right.pos_add] lemma right.one_lt_mul`

--
Lemmas that have merged with their unprimed versions due to diminished typeclass assumptions
* `@[to_additive] lemma lt_mul_of_one_le_of_lt'`
* `@[to_additive] lemma lt_mul_of_one_lt_of_lt'`
* `@[to_additive] lemma mul_le_of_le_of_le_one'`
* `@[to_additive] lemma mul_le_of_le_one_of_le'`
* `@[to_additive] lemma mul_lt_of_lt_of_le_one'`
* `@[to_additive] lemma mul_lt_of_lt_of_lt_one'`
* `@[to_additive] lemma mul_lt_of_lt_one_of_lt'`
* the three lemmas
* * `@[to_additive] lemma mul_lt_of_le_one_of_lt'`,
* * `mul_lt_one_of_le_one_of_lt_one`,
* * `mul_lt_one_of_le_one_of_lt_one'`
all merged into `mul_lt_of_le_one_of_lt`

--
Lemma `@[to_additive] lemma mul_lt_one` broke into
* `@[to_additive] lemma left.mul_lt_one`
* `@[to_additive] lemma right.mul_lt_one`

depending on typeclass assumptions

--
Lemmas that became a direct application of another lemma
* `@[to_additive] lemma mul_lt_one_of_lt_one_of_le_one` and `mul_lt_one_of_lt_one_of_le_one'` are applications of `mul_lt_of_lt_of_le_one`
* `@[to_additive] lemma mul_lt_one'` is an application of `mul_lt_of_lt_of_lt_one`

--
Lemma `@[to_additive] lemma mul_eq_one_iff_eq_one_of_one_le` changed name to `mul_eq_one_iff_eq_one_of_one_le`.
The multiplicative version is never used.
The additive version, `add_eq_zero_iff_eq_zero_of_nonneg` is used: I changed the occurrences in favour of the shorter name.

--
Lemma `@[to_additive add_nonpos] lemma mul_le_one'` continues as
```lean
alias mul_le_of_le_of_le_one ← mul_le_one'
attribute [to_additive add_nonpos] mul_le_one'
```

<!--
Name changes:

* lemma `mul_le_of_le_one_of_le'` became `mul_le_of_le_one_of_le`;
* lemma `lt_mul_of_one_le_of_lt'` became `lt_mul_of_one_le_of_lt`;
* lemma `add_eq_zero_iff_eq_zero_of_nonneg` became `add_eq_zero_iff'`.

(Really, the lemmas above are the ones that were used outside of the PR: the two `mul` ones have a corresponding `to_additive` version and the `add` one is the `to_additive` version of `mul_eq_one_iff_eq_one_of_one_le`.)
-->

### [2021-06-23T04:58:30+00:00](https://github.com/leanprover-community/mathlib/commit/168678ede42496433deb95a6b2685e34d9b9c2da)
feat(analysis/liouville/liouville_constant): develop some API for Liouville ([#8005](https://github.com/leanprover-community/mathlib/pull/#8005))

Proof of some inequalities for Liouville numbers.

### [2021-06-23T02:56:34+00:00](https://github.com/leanprover-community/mathlib/commit/ac2142c0398bcb138a7e62c2127f79a80679b900)
chore(scripts): update nolints.txt ([#8051](https://github.com/leanprover-community/mathlib/pull/#8051))

I am happy to remove some nolints for you!

### [2021-06-23T01:21:37+00:00](https://github.com/leanprover-community/mathlib/commit/0bc09d9a31b6db63fe8cb45ec786c119ab1b70c8)
feat(algebra/ordered_field): a few monotonicity results for powers ([#8022](https://github.com/leanprover-community/mathlib/pull/#8022))

This PR proves the monotonicity (strict and non-strict) of `n → 1 / a ^ n`, for a fixed `a < 1` in a linearly ordered field.  These are lemmas extracted from PR [#8001](https://github.com/leanprover-community/mathlib/pull/#8001): I moved them to a separate PR after the discussion there.

### [2021-06-22T22:06:38+00:00](https://github.com/leanprover-community/mathlib/commit/949e98e6a27742476676cf11c676a99ee5dacb98)
chore(topology/basic): add missing lemma ([#8048](https://github.com/leanprover-community/mathlib/pull/#8048))

Adds `is_closed.sdiff`. From LTE.

### [2021-06-22T20:35:50+00:00](https://github.com/leanprover-community/mathlib/commit/de4a4ce1c1e70e62dc11ca7e2db22a751e8c4384)
feat(ring_theory/adjoin/basic): lemmas relating adjoin and submodule.span ([#8031](https://github.com/leanprover-community/mathlib/pull/#8031))

### [2021-06-22T19:52:44+00:00](https://github.com/leanprover-community/mathlib/commit/c594196f11ff10667f680bb7ef070925b4ce376d)
chore(topology/continuous_function/algebra): delete old instances, use bundled sub[monoid, group, ring]s ([#8004](https://github.com/leanprover-community/mathlib/pull/#8004))

We remove the `monoid`, `group`, ... instances on `{ f : α → β | continuous f }` since `C(α, β)` should be used instead, and we replacce the `sub[monoid, group, ...]` instances on `{ f : α → β | continuous f }` by definitions of bundled subobjects with carrier `{ f : α → β | continuous f }`. We keep the `set_of` for subobjects since we need a subset to be the carrier.

Zulip : https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/instances.20on.20continuous.20subtype

### [2021-06-22T16:26:58+00:00](https://github.com/leanprover-community/mathlib/commit/83bd2e68bd75aca6ee72d0b75cfcf49882026bdb)
feat(analysis/normed_space/multilinear): add a few inequalities ([#8018](https://github.com/leanprover-community/mathlib/pull/#8018))

Also add a few lemmas about `tsum` and `nnnorm`.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-06-22T16:26:57+00:00](https://github.com/leanprover-community/mathlib/commit/9c4afb11e2b522c5f939dd20c0916d15674a8373)
feat(data/zmod): equivalence between the quotient type ℤ / aℤ and `zmod a` ([#7976](https://github.com/leanprover-community/mathlib/pull/#7976))

This PR defines the equivalence between `zmod a` and ℤ / aℤ, where `a : ℕ` or `a : ℤ`, and the quotient is a quotient group or quotient ring.

It also defines `zmod.lift n f hf : zmod n →+ A` induced by an additive hom `f : ℤ →+ A` such that `f n = 0`. (The latter map could be, but is no longer, defined as the composition of the equivalence with `quotient.lift f`.)

Zulip threads:
 - [`(ideal.span {d}).quotient` is `zmod d`](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/.60.28ideal.2Espan.20.7Bd.7D.29.2Equotient.60.20is.20.60zmod.20d.60)
 - [Homomorphism from the integers descends to $$\mathbb{Z}/n$$](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Homomorphism.20from.20the.20integers.20descends.20to.20.24.24.5Cmathbb.7BZ.7D.2Fn.24.24)
 - [ `∈ gmultiples` iff divides](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/.60.E2.88.88.20gmultiples.60.20iff.20divides)



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-06-22T14:51:33+00:00](https://github.com/leanprover-community/mathlib/commit/f477e03a661006b850801bea5265eea3749685ee)
docs(data/list/erasedup): add module docstring ([#8030](https://github.com/leanprover-community/mathlib/pull/#8030))

### [2021-06-22T14:51:32+00:00](https://github.com/leanprover-community/mathlib/commit/7e20058e11d0f0cc3ced43e8b72dc1feba31d27c)
feat(topology/Profinite/cofiltered_limit): Locally constant functions from cofiltered limits ([#7992](https://github.com/leanprover-community/mathlib/pull/#7992))


This generalizes one of the main technical theorems from LTE about cofiltered limits of profinite sets.
This theorem should be useful for a future proof of Stone duality.



Co-authored-by: Kyle Miller <kmill31415@gmail.com>

### [2021-06-22T13:52:01+00:00](https://github.com/leanprover-community/mathlib/commit/6e5de190e8d146eeed4676abc25dcd869e31f705)
feat(linear_algebra/free_module): add lemmas ([#7950](https://github.com/leanprover-community/mathlib/pull/#7950))

Easy results about free modules.

### [2021-06-22T12:45:40+00:00](https://github.com/leanprover-community/mathlib/commit/cb7b6cb39f3f5f55294611c57d82c24d9f2af2f2)
docs(data/list/rotate): add module docstring ([#8027](https://github.com/leanprover-community/mathlib/pull/#8027))

### [2021-06-22T12:45:39+00:00](https://github.com/leanprover-community/mathlib/commit/94a80738d9e91e2559f055873155df278a8898ea)
feat(analysis/specific_limits): summability of `(λ i, 1 / m ^ f i)` ([#8023](https://github.com/leanprover-community/mathlib/pull/#8023))

This PR shows the summability of the series whose `i`th term is `1 / m ^ f i`, where `1 < m` is a fixed real number and `f : ℕ → ℕ` is a function bounded below by the identity function.  While a function eventually bounded below by a constant at least equal to 2 would have been enough, this specific shape is convenient for the Liouville application.

I extracted this lemma, following the discussion in PR [#8001](https://github.com/leanprover-community/mathlib/pull/#8001).

### [2021-06-22T12:45:38+00:00](https://github.com/leanprover-community/mathlib/commit/a3699b98e02d9a1a1c8fe20ac78ccd70d6318206)
refactor(topology/sheaves/stalks): Refactor proofs about stalk map ([#8000](https://github.com/leanprover-community/mathlib/pull/#8000))

Refactoring and speeding up some of my code on stalk maps from [#7092](https://github.com/leanprover-community/mathlib/pull/#7092).

### [2021-06-22T12:45:37+00:00](https://github.com/leanprover-community/mathlib/commit/208d4fed25b98881ffb252d10e603468756553c0)
docs(data/pnat): add module docstrings ([#7960](https://github.com/leanprover-community/mathlib/pull/#7960))

### [2021-06-22T11:36:42+00:00](https://github.com/leanprover-community/mathlib/commit/4cbe7d622ad4d5c374f2e6368075ffe9ae3e5484)
feat(group_theory/specific_groups/cyclic): A group is commutative if the quotient by the center is cyclic ([#7952](https://github.com/leanprover-community/mathlib/pull/#7952))

### [2021-06-22T11:36:40+00:00](https://github.com/leanprover-community/mathlib/commit/a1a0940c9c8dd4515e890d9ae7818d5a69b5f774)
chore(ring_theory/ideal): mark `ideal.quotient` as reducible ([#7892](https://github.com/leanprover-community/mathlib/pull/#7892))

I had an ideal and wanted to apply a theorem about submodule quotients to the ideal quotient. The API around ideals is designed to have most things defeq to the corresponding submodule definition. Marking this definition as reducible informs the typeclass system that it can use this defeq.

Test case:

````lean
import ring_theory.ideal.basic

/-- Typeclass instances on ideal quotients transfer to submodule quotients.

This is useful if you want to apply results that hold for general submodules
to ideals specifically.

The instance will not be found if `ideal.quotient` is not reducible,
e.g. after you uncomment the following line:
```
local attribute [semireducible] ideal.quotient
```
-/
example {R : Type*} [comm_ring R] (I : ideal R)
  [fintype (ideal.quotient I)] : fintype (submodule.quotient I) :=
infer_instance
````

Zulip thread: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Making.20.60ideal.2Equotient.60.20reducible.20.28or.20deleted.20altogether.3F.29

### [2021-06-22T11:36:40+00:00](https://github.com/leanprover-community/mathlib/commit/96f09a673d0022aa819b39a7e1d423d53e93e738)
feat(group_theory/perm/cycles): cycle_factors_finset ([#7540](https://github.com/leanprover-community/mathlib/pull/#7540))

### [2021-06-22T10:22:32+00:00](https://github.com/leanprover-community/mathlib/commit/9ca859778056934c93efe522b5fac0625abf8820)
feat(linear_algebra/matrix/reindex): add some lemmas ([#7963](https://github.com/leanprover-community/mathlib/pull/#7963))

From LTE
Added lemmas `reindex_linear_equiv_trans`, `reindex_linear_equiv_comp`, `reindex_linear_equiv_comp_apply`, `reindex_linear_equiv_one` and `mul_reindex_linear_equiv_mul_one` needed in LTE.



Co-authored-by: Filippo Nuccio <nuccio@cluster18-math.univ-lyon1.fr>
Co-authored-by: Filippo A. E. Nuccio <65080144+faenuccio@users.noreply.github.com>
Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-06-22T08:42:23+00:00](https://github.com/leanprover-community/mathlib/commit/faaa0bcb3a9104cc4bfa5bfbb6c2ae4d55b1946b)
feat(algebra/ordered_field): `(1 - 1 / a)⁻¹ ≤ 2` ([#8021](https://github.com/leanprover-community/mathlib/pull/#8021))

A lemma from the Liouville PR [#8001](https://github.com/leanprover-community/mathlib/pull/#8001).  I extracted this lemma, after the discussion there.

### [2021-06-22T03:06:41+00:00](https://github.com/leanprover-community/mathlib/commit/3b4d1d8fd9be55616cb7abc2fa86d28a97c5bf19)
chore(scripts): update nolints.txt ([#8032](https://github.com/leanprover-community/mathlib/pull/#8032))

I am happy to remove some nolints for you!

### [2021-06-22T03:06:40+00:00](https://github.com/leanprover-community/mathlib/commit/6796beeb9682b3cd3000ab0c3dc2874492efd296)
chore(algebra/char_p/basic): generalize to non_assoc_semiring ([#7985](https://github.com/leanprover-community/mathlib/pull/#7985))

### [2021-06-22T03:06:39+00:00](https://github.com/leanprover-community/mathlib/commit/4416eacb4935c9f350a9e84c252511c0eae7ab46)
feat(topology/instances/real): a continuous periodic function has compact range (and is hence bounded) ([#7968](https://github.com/leanprover-community/mathlib/pull/#7968))

A few more facts about periodic functions, namely:
- If a function `f` is `periodic` with positive period `p`,
  then for all `x` there exists `y` such that `y` is an element of `[0, p)` and `f x = f y`
- A continuous, periodic function has compact range
- A continuous, periodic function is bounded

### [2021-06-22T01:52:04+00:00](https://github.com/leanprover-community/mathlib/commit/e4b9561e27160f5c714b90197144a2919293c8dd)
feat(linear_algebra/basic): weaken typeclasses ([#8028](https://github.com/leanprover-community/mathlib/pull/#8028))

### [2021-06-21T20:24:31+00:00](https://github.com/leanprover-community/mathlib/commit/80daef4824d78a6609bab363601a5d8b770039c7)
chore(category_theory/limits): shorten some long lines ([#8007](https://github.com/leanprover-community/mathlib/pull/#8007))

### [2021-06-21T19:43:14+00:00](https://github.com/leanprover-community/mathlib/commit/520bbe69cdcbd7ea0ced70fda085865483743806)
feat(algebra/non_unital_alg_hom): define non_unital_alg_hom ([#7863](https://github.com/leanprover-community/mathlib/pull/#7863))

The motivation is to be able to state the universal property for a magma algebra using bundled morphisms.

### [2021-06-21T19:43:13+00:00](https://github.com/leanprover-community/mathlib/commit/2b80d2f6ae8800e30395f1e82d1f04c4eaa6aedb)
feat(geometry/euclidean/sphere): proof of Freek thm 95 - Ptolemy’s Theorem ([#7329](https://github.com/leanprover-community/mathlib/pull/#7329))




Co-authored-by: Benjamin Davidson <68528197+benjamindavidson@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-06-21T19:03:52+00:00](https://github.com/leanprover-community/mathlib/commit/2fb084286c65726fdf8a2f5de4b76c9f1297f7e2)
perf(ci): use self-hosted runner for bors ([#8024](https://github.com/leanprover-community/mathlib/pull/#8024))

Run CI builds for the `staging` branch used by bors on a self-hosted github actions runner.  This runner has been graciously provided by Johan Commelin's DFG grant and is hosted at the Albert-Ludwigs-Universität Freiburg.

We need to use two github actions workflow files to use a separate runner for the `staging` branch: `build.yml` and `bors.yml`.  These are almost identical, except for the `runs-on:` property indicating which runner should be used.  The shell script `mk_build_yml.sh` is therefore used to generate both files from the common template `build.yml.in`.

### [2021-06-21T14:25:31+00:00](https://github.com/leanprover-community/mathlib/commit/eb13f6b7691afe9efe517216d6830436c711829a)
feat(ring_theory/derivation): add missing dsimp lemmas, use old_structure_command, golf structure proofs ([#8013](https://github.com/leanprover-community/mathlib/pull/#8013))

This adds a pile of missing coercion lemmas proved by refl, and uses them to construct the `add_comm_monoid`, `add_comm_group`, and `module` instances.

This also changes `derivation` to be an old-style structure, which is more in line with the other bundled homomorphisms.

This also removes `derivation.commutator` to avoid having two ways to spell the same thing, as this leads to lemmas being harder to apply

### [2021-06-21T14:25:28+00:00](https://github.com/leanprover-community/mathlib/commit/92263c0b7af80036cd0f14f104d861f93fe053b5)
refactor(algebraic_geometry/structure_sheaf): Enclose definitions in structure_sheaf namespace ([#8010](https://github.com/leanprover-community/mathlib/pull/#8010))

Moves some pretty generic names like `const` and `to_open` to the `structure_sheaf` namespace.

### [2021-06-21T14:25:27+00:00](https://github.com/leanprover-community/mathlib/commit/5bc18a9e4628a959a6bebbc23855858ee118a7d3)
feat(topology/category/limits): Generalize Topological Kőnig's lemma  ([#7982](https://github.com/leanprover-community/mathlib/pull/#7982))

This PR generalizes the Topological Kőnig's lemma to work with limits over cofiltered categories (as opposed to just directed orders). Along the way, we also prove some more API for the category instance on `ulift C`, and provide an  `as_small C` construction for a category `C`. 

Coauthored with @kmill 



Co-authored-by: Kyle Miller <kmill31415@gmail.com>

### [2021-06-21T14:25:26+00:00](https://github.com/leanprover-community/mathlib/commit/9ce032c30bde4f446ba47defd3490085ce1325b5)
feat(data/matrix/basic): generalize to non_assoc_semiring ([#7974](https://github.com/leanprover-community/mathlib/pull/#7974))

Matrices with whose coefficients form a non-unital and/or non-associative ring themselves form a non-unital and non-associative ring.

This isn't a full generalization of the file, the main aim was to generalize the typeclass instances available.

### [2021-06-21T08:39:18+00:00](https://github.com/leanprover-community/mathlib/commit/3ef52f37eff58b0dbe8a61ba559c37033312f9fd)
chore(logic/basic): actually fixup `eq_or_ne` ([#8015](https://github.com/leanprover-community/mathlib/pull/#8015))

this lemma loves being broken...

### [2021-06-21T08:39:17+00:00](https://github.com/leanprover-community/mathlib/commit/abdc3164a8ccc4d4261ecdb260bcbbe7b0a2d725)
feat(analysis/normed_space/normed_group_hom): add lemmas ([#7875](https://github.com/leanprover-community/mathlib/pull/#7875))

From LTE.

### [2021-06-21T03:37:41+00:00](https://github.com/leanprover-community/mathlib/commit/c7d094da6d3ced93ab034ba9d77519b4f9147124)
chore(scripts): update nolints.txt ([#8017](https://github.com/leanprover-community/mathlib/pull/#8017))

I am happy to remove some nolints for you!

### [2021-06-21T03:37:40+00:00](https://github.com/leanprover-community/mathlib/commit/3925fc0f6ea18ab7964d3cfe6bf0d0c97bc83044)
feat(analysis/liouville/liouville_constant.lean): create a file and introduce Liouville's constant ([#7996](https://github.com/leanprover-community/mathlib/pull/#7996))

Introduce a new file and the definition of Liouville's number.  This is on the way to PR [#4301](https://github.com/leanprover-community/mathlib/pull/#4301).

### [2021-06-21T03:37:39+00:00](https://github.com/leanprover-community/mathlib/commit/4d69b0f4550eb6d86e6c61621edb3f67b426fa16)
chore(topology/algebra/infinite_sum): small todo ([#7994](https://github.com/leanprover-community/mathlib/pull/#7994))

Generalize a lemma from `f : ℕ → ℝ` to `f : β → α`, with 
```lean
[add_comm_group α] [topological_space α] [topological_add_group α] [t2_space α] [decidable_eq β] 
```
This was marked as TODO after [#6017](https://github.com/leanprover-community/mathlib/pull/#6017)/[#6096](https://github.com/leanprover-community/mathlib/pull/#6096).

### [2021-06-21T03:37:38+00:00](https://github.com/leanprover-community/mathlib/commit/5cdbb4c057cf656b7406eae4163faa9115b91f0e)
feat(algebra/*/pi, topology/continuous_function/algebra): homomorphism induced by left-composition ([#7984](https://github.com/leanprover-community/mathlib/pull/#7984))

Given a monoid homomorphism from `α` to `β`, there is an induced monoid homomorphism from `I → α` to `I → β`, by left-composition.

Same result for semirings, modules, algebras.

Same result for topological monoids, topological semirings, etc, and the function spaces `C(I, α)`, `C(I, β)`, if the homomorphism is continuous.

Of these eight constructions, the only one I particularly want is the last one (topological algebras).  If reviewers feel it is better not to clog mathlib up with unused constructions, I am happy to cut the other seven from this PR.

### [2021-06-21T03:37:37+00:00](https://github.com/leanprover-community/mathlib/commit/18c1c4a87af57967cc0c9997e3edf44292dba407)
fix(tactic/linarith/preprocessing): capture result of zify_proof ([#7901](https://github.com/leanprover-community/mathlib/pull/#7901))

this fixes the error encountered in the MWE in this Zulip thread: https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming-.2F.20tactics/topic/delayed_abstraction.20meta-variables/near/242376874

the `simplify` call inside of `zify_proof` does something bad to the tactic state when called in the scope of an `io.run_tactic`, not entirely sure why ¯\_(ツ)_/¯

### [2021-06-20T21:36:12+00:00](https://github.com/leanprover-community/mathlib/commit/767901ab594375a1335bb324f88d5be01af1367b)
feat(algebra/ordered_ring): `a + 1 ≤ 2 * a` ([#7995](https://github.com/leanprover-community/mathlib/pull/#7995))

Prove one lemma, useful for the Liouville PR [#4301](https://github.com/leanprover-community/mathlib/pull/#4301).  The placement of the lemma will change, once the `ordered` refactor will get to  `ordered_ring`.

### [2021-06-20T17:21:15+00:00](https://github.com/leanprover-community/mathlib/commit/fae00c7c500e757595058f009806e65df3f3d6ec)
chore(analysis/special_functions): move measurability statements to measure_theory folder ([#8006](https://github.com/leanprover-community/mathlib/pull/#8006))

Make sure that measure theory is not imported in basic files defining trigonometric functions and real powers. The measurability of these functions is postponed to a new file `measure_theory.special_functions`.

### [2021-06-20T13:40:08+00:00](https://github.com/leanprover-community/mathlib/commit/547df12b35b2a79fcbc9a5222f79fdd74b7b7a22)
chore(analysis/liouville/liouville + data/real/liouville): create folder `analysis/liouville/`, move `data/real/liouville` into new folder ([#7998](https://github.com/leanprover-community/mathlib/pull/#7998))

This PR simply creates a new folder `analysis/liouville` and moves `data/real/liouville` into the new folder.  In PR [#7996](https://github.com/leanprover-community/mathlib/pull/#7996) I create a new Liouville-related file in the same folder.

### [2021-06-20T12:05:49+00:00](https://github.com/leanprover-community/mathlib/commit/3a0f28226d4e2e0f0d9f0e1086c42c8f48e25989)
feat(measure_theory/interval_integral): integral of a non-integrable function ([#8011](https://github.com/leanprover-community/mathlib/pull/#8011))

The `interval_integral` of a non-`interval_integrable` function is `0`.

### [2021-06-19T23:38:51+00:00](https://github.com/leanprover-community/mathlib/commit/7d155d9556b87018bb02c740966eb980bc6a927f)
refactor(topology/metric_space/isometry): move material about isometries of normed spaces ([#8003](https://github.com/leanprover-community/mathlib/pull/#8003))

See https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/topology.20and.20analysis

### [2021-06-19T23:38:51+00:00](https://github.com/leanprover-community/mathlib/commit/7d5b50a759a002d2e9f30125db86f6f01789429b)
feat(algebra/homology/homotopy): flesh out the api a bit, add some simps ([#7941](https://github.com/leanprover-community/mathlib/pull/#7941))

### [2021-06-19T18:19:08+00:00](https://github.com/leanprover-community/mathlib/commit/63c3ab56cda6fd85ea8782eb82dce4c3bbd8ce08)
chore(data/int/basic): rationalize the arguments implicitness (mostly to_nat_sub_of_le) ([#7997](https://github.com/leanprover-community/mathlib/pull/#7997))

### [2021-06-19T15:31:15+00:00](https://github.com/leanprover-community/mathlib/commit/cd8f7b5cecbfabe2c6af99d12d17290dcc2143d9)
chore(topology/metric_space/pi_Lp): move to analysis folder, import inner_product_space ([#7991](https://github.com/leanprover-community/mathlib/pull/#7991))

Currently, the file `pi_Lp` (on finite products of metric spaces, with the `L^p` norm) is in the topology folder, but it imports a lot of analysis (to have real powers) and it defines a normed space structure, so it makes more sense to have it in analysis. Also, it is currently imported by `inner_product_space`, to give an explicit construction of an inner product space on `pi_Lp 2`, which means that all files importing general purposes lemmas on inner product spaces also import real powers, trigonometry, and so on. We swap the imports, letting `pi_Lp` import `inner_product_space` and moving the relevant bits from the latter file to the former. This gives a more reasonable import graph.

### [2021-06-19T15:31:14+00:00](https://github.com/leanprover-community/mathlib/commit/497b84d2c117d8a48bb4e69bd5cde751c9fe1bfc)
chore(analysis/mean_inequalities): split integral mean inequalities to a new file ([#7990](https://github.com/leanprover-community/mathlib/pull/#7990))

Currently, `normed_space.dual` imports a bunch of integration theory for no reason other than the file `mean_inequalities` contains both inequalities for finite sums and integrals. Splitting the file into two (and moving the integral versions to `measure_theory`) gives a more reasonable import graph.

### [2021-06-19T15:31:13+00:00](https://github.com/leanprover-community/mathlib/commit/1846a1f331604292021be934f20eada2b9a2b82a)
feat(measure_theory/interval_integral): `abs_integral_le_integral_abs` ([#7959](https://github.com/leanprover-community/mathlib/pull/#7959))

The absolute value of the integral of an integrable function is less than or equal to the integral of the absolute value that function.

### [2021-06-19T08:22:50+00:00](https://github.com/leanprover-community/mathlib/commit/2ca04524c68c0b189701a827c79c8b88237fa242)
feat(data/{fin,nat,zmod}): prove `zmod.coe_add_eq_ite` ([#7975](https://github.com/leanprover-community/mathlib/pull/#7975))

This PR adds a couple of lemmas relating addition modulo `n` (in `ℕ`, `fin n` or `zmod n`) and addition in `ℕ` or `ℤ`.

[Based on this Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Homomorphism.20from.20the.20integers.20descends.20to.20.24.24.5Cmathbb.7BZ.7D.2Fn.24.24)

### [2021-06-19T03:04:16+00:00](https://github.com/leanprover-community/mathlib/commit/28aee9512e32b393f1d28bd6a08eb5ccd6e055ed)
chore(scripts): update nolints.txt ([#7993](https://github.com/leanprover-community/mathlib/pull/#7993))

I am happy to remove some nolints for you!

### [2021-06-19T03:04:15+00:00](https://github.com/leanprover-community/mathlib/commit/2a48c690d6fe297ae29c35fd221b3b09b8143bef)
feat(category_theory/yoneda): develop API for representable functors ([#7962](https://github.com/leanprover-community/mathlib/pull/#7962))

Dualises and extends API for representable functors which was previously pretty minimal

### [2021-06-18T23:32:28+00:00](https://github.com/leanprover-community/mathlib/commit/42ab44c2ac833d000304f0d8a935e412b27f093d)
feat(group_theory): computable 1st isomorphism theorem ([#7988](https://github.com/leanprover-community/mathlib/pull/#7988))

This PR defines a computable version of the first isomorphism theorem for groups and monoids that takes a right inverse of the map, `quotient_ker_equiv_of_right_inverse`.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-06-18T23:32:27+00:00](https://github.com/leanprover-community/mathlib/commit/3ee6248c65b19fe13ebdf49e5a94bbcf1e564b99)
feat(measure_theory): links between an integral and its improper version ([#7164](https://github.com/leanprover-community/mathlib/pull/#7164))

This PR introduces ways of studying and computing `∫ x, f x ∂μ` by studying the limit of the sequence `∫ x in φ n, f x ∂μ` for an appropriate sequence `φ` of subsets of the domain of `f`.

### [2021-06-18T20:48:47+00:00](https://github.com/leanprover-community/mathlib/commit/f2f10cce8adbf24c9355c25bf0b4eda7c211bc01)
docs(data/set/enumerate): add module and definition docstrings ([#7967](https://github.com/leanprover-community/mathlib/pull/#7967))

### [2021-06-18T20:48:46+00:00](https://github.com/leanprover-community/mathlib/commit/3a0653c73de5671034cb9c43cf7272b2e818b5fd)
feat(data/real/ennreal): add a `algebra ℝ≥0 ℝ≥0∞` instance ([#7846](https://github.com/leanprover-community/mathlib/pull/#7846))

### [2021-06-18T18:18:49+00:00](https://github.com/leanprover-community/mathlib/commit/52dbff0f42d795a8de3af8974dad21a60624e134)
chore(topology/basic): rename compact_Icc to is_compact_Icc ([#7979](https://github.com/leanprover-community/mathlib/pull/#7979))

Also rename `compact_interval` to `is_compact_interval`. And a bunch of random additions, all minor, as prerequisistes to [#7978](https://github.com/leanprover-community/mathlib/pull/#7978)

### [2021-06-18T15:33:01+00:00](https://github.com/leanprover-community/mathlib/commit/29e7a8d5e5750cd462cbcd15126e5322f7bc6f6d)
feat(topology/algebra/ordered, topology/algebra/infinite_sum): bounded monotone sequences converge (variant versions) ([#7983](https://github.com/leanprover-community/mathlib/pull/#7983))

A bounded monotone sequence converges to a value `a`, if and only if `a` is a least upper bound for its range.

Mathlib had several variants of this fact previously (phrased in terms of, eg, `csupr`), but not quite this version (phrased in terms of `has_lub`).  This version has a couple of advantages:
- it applies to more general typeclasses (eg, `linear_order`) where the existence of suprema is not in general known
- it applies to algebraic typeclasses (`linear_ordered_add_comm_monoid`, etc) where, since completeness of orders is not a mix-in, it is not possible to simultaneously assume `(conditionally_)complete_linear_order`

The latter point makes these lemmas useful when dealing with `tsum`.  We get: a nonnegative function `f` satisfies `has_sum f a`, if and only if `a` is a least upper bound for its partial sums.

### [2021-06-18T13:40:11+00:00](https://github.com/leanprover-community/mathlib/commit/7c9a8113e6f851ac58c77168986a0dfd9223c1f4)
feat(analysis/convex/basic): missing lemmas ([#7946](https://github.com/leanprover-community/mathlib/pull/#7946))

- the union of a set/indexed family of convex sets is convex
- `open_segment a b` is convex
- a set is nonempty iff its convex hull is

### [2021-06-18T01:58:07+00:00](https://github.com/leanprover-community/mathlib/commit/e168bf7a9b64d696b723d60c6dab1122a102d1f4)
chore(scripts): update nolints.txt ([#7981](https://github.com/leanprover-community/mathlib/pull/#7981))

I am happy to remove some nolints for you!

### [2021-06-17T17:11:00+00:00](https://github.com/leanprover-community/mathlib/commit/49bf1fdecf56ce9ae3e6d15953896996af596c07)
chore(order/iterate): fix up the namespace ([#7977](https://github.com/leanprover-community/mathlib/pull/#7977))

### [2021-06-17T17:10:59+00:00](https://github.com/leanprover-community/mathlib/commit/dc73d1bd56162cd2a0eb62b6753273106fcbadce)
docs(data/*/sqrt): add one module docstring and expand the other ([#7973](https://github.com/leanprover-community/mathlib/pull/#7973))

### [2021-06-17T17:10:58+00:00](https://github.com/leanprover-community/mathlib/commit/3824a43eed7c97d981e0226edb56fcf5e5dd4b36)
docs(data/list/intervals): add module docstring ([#7972](https://github.com/leanprover-community/mathlib/pull/#7972))

### [2021-06-17T17:10:57+00:00](https://github.com/leanprover-community/mathlib/commit/93d7812a6942c4ca9bc5dae474bc2ae85d5407e1)
docs(data/int/range): add module docstring ([#7971](https://github.com/leanprover-community/mathlib/pull/#7971))

### [2021-06-17T17:10:56+00:00](https://github.com/leanprover-community/mathlib/commit/da1a32c287fe859bbd283da3bcf57505e5e12eb8)
docs(data/int/cast): add module docstring ([#7969](https://github.com/leanprover-community/mathlib/pull/#7969))

### [2021-06-17T17:10:50+00:00](https://github.com/leanprover-community/mathlib/commit/de6d739d054f5d1701c6bde8319c83234e116251)
docs(data/nat/dist): add module docstring ([#7966](https://github.com/leanprover-community/mathlib/pull/#7966))

### [2021-06-17T17:10:49+00:00](https://github.com/leanprover-community/mathlib/commit/ce23f37397e844b8a95148674bd15569b9f9745b)
feat(topology/locally_constant): Adds a few useful constructions ([#7954](https://github.com/leanprover-community/mathlib/pull/#7954))

This PR adds a few useful constructions around locallly constant functions:
1. A locally constant function to `fin 2` associated to a clopen set.
2. Flipping a locally constant function taking values in a function type.
3. Unflipping a finite family of locally constant function.
4. Descending locally constant functions along an injective map.



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2021-06-17T17:10:48+00:00](https://github.com/leanprover-community/mathlib/commit/e9f9f3f3e2c0ed7b1f081dc67376a600f9b8bf10)
docs(data/nat/cast): add module docstring ([#7947](https://github.com/leanprover-community/mathlib/pull/#7947))

### [2021-06-17T17:10:47+00:00](https://github.com/leanprover-community/mathlib/commit/97843966efee69fa76da2c4ebaa90f143f3254f2)
refactor(order/preorder_hom): golf and simp lemmas ([#7429](https://github.com/leanprover-community/mathlib/pull/#7429))

The main change here is to adjust `simps` to generate coercion lemmas rather than `.to_fun` for `preorder_hom`, which allows us to auto-generate some simp lemmas. 



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-17T11:31:07+00:00](https://github.com/leanprover-community/mathlib/commit/cbb8f0192510d0b7f47e4fe8ecf31837b7906117)
feat(algebra/group/basic): prove `a / 1 = a` and remove `sub_zero` ([#7956](https://github.com/leanprover-community/mathlib/pull/#7956))

Add a proof that, in a group, `a / 1 = a`.  As a consequence, `sub_zero` is the `to_additive version of this lemma and I removed it.

The name of the lemma is `div_one'`, since the unprimed version is taken by `group_with_zero`.

Zulip:
https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60div_one'.60

### [2021-06-17T11:31:06+00:00](https://github.com/leanprover-community/mathlib/commit/6578f1ce0ff14fb8a81200d652641e43495d78f2)
feat(data/setoid/basic): add a computable version of quotient_ker_equiv_of_surjective ([#7930](https://github.com/leanprover-community/mathlib/pull/#7930))

Perhaps more usefully, this also allows definitional control of the inverse mapping

### [2021-06-17T08:31:45+00:00](https://github.com/leanprover-community/mathlib/commit/1e43208ed4bf7887eec843509aa99ed418f40cfe)
refactor(ring_theory): use `x ∈ non_zero_divisors` over `x : non_zero_divisors` ([#7961](https://github.com/leanprover-community/mathlib/pull/#7961))

`map_ne_zero_of_mem_non_zero_divisors` and `map_mem_non_zero_divisors` used to take `x : non_zero_divisors A` as an (implicit) argument. This is awkward if you only have `hx : x ∈ non_zero_divisors A`, requiring you to write out `@map_ne_zero_of_mem_non_zero_divisors _ _ _ _ _ _ hf ⟨x, hx⟩`. By making `x ∈ non_zero_divisors A` the explicit argument, we can avoid this annoyance.

See e.g. `ring_theory/polynomial/scale_roots.lean` for the improvement.

### [2021-06-17T02:48:11+00:00](https://github.com/leanprover-community/mathlib/commit/1a6c871a9151444b7fd17dee134d0baffe0d5e6d)
chore(scripts): update nolints.txt ([#7965](https://github.com/leanprover-community/mathlib/pull/#7965))

I am happy to remove some nolints for you!

### [2021-06-17T00:23:25+00:00](https://github.com/leanprover-community/mathlib/commit/dc5d0c10f57bcd66d302cd8cf5535df9de8ed127)
feat(data/matrix): `has_repr` instances for `fin` vectors and matrices ([#7953](https://github.com/leanprover-community/mathlib/pull/#7953))

This PR provides `has_repr` instances for the types `fin n → α` and `matrix (fin m) (fin n) α`, displaying in the `![...]` matrix notation. This is especially useful if you want to `#eval` a calculation involving matrices.

[Based on this Zulip post.](https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Matrix.20operations/near/242766110)



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-06-17T00:23:24+00:00](https://github.com/leanprover-community/mathlib/commit/641a9d30d9e1345e1508c90c1bcec997df39824e)
feat(model_theory/basic): Substructures ([#7762](https://github.com/leanprover-community/mathlib/pull/#7762))

Defines substructures of first-order structures

### [2021-06-16T18:44:26+00:00](https://github.com/leanprover-community/mathlib/commit/456a6d5107044b980435db0a6e3b9bba76a74e1f)
docs(data/option/basic): add module docstring ([#7958](https://github.com/leanprover-community/mathlib/pull/#7958))

### [2021-06-16T18:44:25+00:00](https://github.com/leanprover-community/mathlib/commit/08dfaab8970a54ddd89c5d0129f5efc1bcc4b4ae)
docs(data/set/disjointed): add module docstring and some whitespaces ([#7957](https://github.com/leanprover-community/mathlib/pull/#7957))

### [2021-06-16T18:44:24+00:00](https://github.com/leanprover-community/mathlib/commit/49aa10644072853e8dbe250786b64f31eabe6a39)
docs(data/*/nat_antidiagonal): add one module docstring and harmonise others ([#7919](https://github.com/leanprover-community/mathlib/pull/#7919))

### [2021-06-16T18:44:23+00:00](https://github.com/leanprover-community/mathlib/commit/366a4496a06e33e78401a129fca3ebd9d8313e67)
doc(topology/algebra/ring): add module docs + tidy ([#7893](https://github.com/leanprover-community/mathlib/pull/#7893))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-06-16T15:31:34+00:00](https://github.com/leanprover-community/mathlib/commit/a564bf1e318a409011213b13552b1ab9b0f30c86)
feat(data/list/cycle): cycles as quotients of lists ([#7504](https://github.com/leanprover-community/mathlib/pull/#7504))

Cycles are common structures, and we define them as a quotient of lists. This is on the route to defining concrete cyclic permutations, and could also be used for encoding properties of cycles in graphs.

### [2021-06-16T12:25:45+00:00](https://github.com/leanprover-community/mathlib/commit/0490b432b571187b539e087cc933920396218a43)
refactor(geometry/manifold/instances/circle): split out (topological) group facts ([#7951](https://github.com/leanprover-community/mathlib/pull/#7951))

Move the group and topological group facts about the unit circle in `ℂ` from `geometry.manifold.instances.circle` to a new file `analysis.complex.circle`.  Delete `geometry.manifold.instances.circle`, moving the remaining material to a section in `geometry.manifold.instances.sphere`.

### [2021-06-16T09:58:27+00:00](https://github.com/leanprover-community/mathlib/commit/95a116a10f6eef9fc1e7abfeb8c1a4fe34d0b691)
chore(measure_theory/lp_space): simplify tendsto_Lp_iff_tendsto_\McLp by using tendsto_iff_dist_tendsto_zero ([#7942](https://github.com/leanprover-community/mathlib/pull/#7942))

### [2021-06-16T06:02:08+00:00](https://github.com/leanprover-community/mathlib/commit/690ab1739da1b095a09d7b37e620a3b7034d8971)
refactor(algebra/algebra/basic): replace `algebra.comap` with `restrict_scalars` ([#7949](https://github.com/leanprover-community/mathlib/pull/#7949))

The constructions `algebra.comap` and `restrict_scalars` are essentially the same thing -- a type synonym to allow one to switch to a smaller scalar field.  Previously `restrict_scalars` was for modules and `algebra.comap` for algebras; I am unifying them so that `restrict_scalars` works for both.

Declaration changes:

- `algebra.comap`, `algebra.comap.inhabited`, `is_scalar_tower.comap`
Use the pre-existing (for modules) `restrict_scalars`, `restrict_scalars.inhabited`, `restrict_scalars.is_scalar_tower`

- `algebra.comap.X` for `X` in `semiring`, `ring`, `comm_semiring`, `comm_ring`, `algebra`
Replaced with `restrict_scalars.X`

- `algebra.comap.algebra'`
Replaced with `restrict_scalars.algebra_orig` (to be consistent with `restrict_scalars.module_orig`)

- `algebra.comap.to_comap` and `algebra.comap.of_comap`
Combined into an `alg_equiv` and renamed `restrict_scalars.alg_equiv` (to be consistent with `restrict_scalars.linear_equiv`)

- `subalgebra.comap`
Replaced with a generalized version, `subalgebra.restrict_scalars`, which (to be consistent with `submodule.restrict_scalars`) applies to an `is_scalar_tower`, not just to the type synonym

Deleted altogether:

- `algebra.to_comap`, `algebra.to_comap_apply`
This construction is now 
`(algebra.of_id S (restrict_scalars R S A)).restrict_scalars R`
It was only used once in mathlib, where I have replaced it by its definition

- `alg_hom.comap`, `alg_equiv.comap`
These are not currently used in mathlib but if needed one can instead use `alg_hom.restrict_scalars` and `alg_equiv.restrict_scalars`

- `is_scalar_tower.algebra_comap_eq`
The proof is now `rfl` and it was never used in mathlib.

It would then be possible, in a follow-up PR, to rename `subalgebra.comap'` to `subalgebra.comap`, although I have no immediate plans to do this.

### [2021-06-16T04:52:02+00:00](https://github.com/leanprover-community/mathlib/commit/b8658928237d27d40942168671c9f947602bf0e3)
feat(algebraic_geometry/Spec): Make Spec a functor. ([#7790](https://github.com/leanprover-community/mathlib/pull/#7790))

### [2021-06-16T02:11:41+00:00](https://github.com/leanprover-community/mathlib/commit/ba3a4b7ab395e79ed6aade515d19f602f23d1ff6)
chore(scripts): update nolints.txt ([#7955](https://github.com/leanprover-community/mathlib/pull/#7955))

I am happy to remove some nolints for you!

### [2021-06-15T23:35:55+00:00](https://github.com/leanprover-community/mathlib/commit/30314c22493d94d1d79591a90d049e3933ea5235)
fix(measure_theory/interval_integral): generalize some lemmas ([#7944](https://github.com/leanprover-community/mathlib/pull/#7944))

The proofs of some lemmas about the integral of a function `f : ℝ → ℝ` also hold for `f : α → ℝ` (with `α` under the usual conditions).

### [2021-06-15T23:35:54+00:00](https://github.com/leanprover-community/mathlib/commit/45619c73e3814eb810b74a07070fbaea207c4cc3)
feat(order/iterate): id_le lemmas ([#7943](https://github.com/leanprover-community/mathlib/pull/#7943))

### [2021-06-15T23:35:52+00:00](https://github.com/leanprover-community/mathlib/commit/e5c97e104ff5763a627fa6d92062937f73bf1672)
feat(analysis/convex/basic): a linear map is convex and concave ([#7934](https://github.com/leanprover-community/mathlib/pull/#7934))

### [2021-06-15T19:56:41+00:00](https://github.com/leanprover-community/mathlib/commit/f1f4c23f652c01e9143c4e8c629f151756fd5a3d)
feat(analysis/convex/basic): convex_on lemmas ([#7933](https://github.com/leanprover-community/mathlib/pull/#7933))

### [2021-06-15T19:56:40+00:00](https://github.com/leanprover-community/mathlib/commit/5d03dcd492af8528cb61a95cd72e995cdc9d16c5)
feat(analysis/normed_space/dual): add eq_zero_of_forall_dual_eq_zero ([#7929](https://github.com/leanprover-community/mathlib/pull/#7929))

The variable `𝕜` is made explicit in `norm_le_dual_bound` because lean can otherwise not guess it in the proof of `eq_zero_of_forall_dual_eq_zero`.

### [2021-06-15T19:56:39+00:00](https://github.com/leanprover-community/mathlib/commit/e5ff5fb4ca1d96790d9b378a02e950f17b69dd99)
feat(data/finsupp/basic): equiv_congr_left ([#7755](https://github.com/leanprover-community/mathlib/pull/#7755))

As [requested on Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Group.20cohomology/near/240737546).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-06-15T14:54:47+00:00](https://github.com/leanprover-community/mathlib/commit/2f1f34a938fe9a1db5f73c33c6c61ff5ccc925bf)
feat(measure_theory/lp_space): add `mem_Lp.mono_measure` ([#7927](https://github.com/leanprover-community/mathlib/pull/#7927))

also add monotonicity lemmas wrt the measure for `snorm'`, `snorm_ess_sup` and `snorm`.

### [2021-06-15T14:54:46+00:00](https://github.com/leanprover-community/mathlib/commit/5f8cc8ebad26ae1ce22c9beb6cb3741e2dc9160f)
docs(undergrad): mark convex, convex hull, and extreme points as done ([#7924](https://github.com/leanprover-community/mathlib/pull/#7924))

### [2021-06-15T14:54:44+00:00](https://github.com/leanprover-community/mathlib/commit/e4ceee660f5f636189711ebdea8341674427cd09)
feat(group_theory/order_of_element): Raising to a coprime power is a bijection ([#7923](https://github.com/leanprover-community/mathlib/pull/#7923))

If `gcd(|G|,k)=1` then the `k`th power map is a bijection



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-06-15T14:54:41+00:00](https://github.com/leanprover-community/mathlib/commit/f4991b97fbb149207fec763844582e32b28c1a35)
feat(measure_theory/bochner_integration): properties of simple functions (mem_Lp, integrable, fin_meas_supp) ([#7918](https://github.com/leanprover-community/mathlib/pull/#7918))




Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2021-06-15T14:54:40+00:00](https://github.com/leanprover-community/mathlib/commit/b19c491a24b902c9828640fd2831badcd98a0fd3)
chore(order/lattice): rename le_sup_left_of_le ([#7856](https://github.com/leanprover-community/mathlib/pull/#7856))

rename `le_sup_left_of_le` to `le_sup_of_le_left`, and variants

### [2021-06-15T14:54:39+00:00](https://github.com/leanprover-community/mathlib/commit/8e2810440e500dbf1cf952527a9ea8c0a370fa7e)
feat(algebra/algebra/basic): define `restrict_scalars.linear_equiv` ([#7807](https://github.com/leanprover-community/mathlib/pull/#7807))

Also updating some doc-strings.

### [2021-06-15T14:54:38+00:00](https://github.com/leanprover-community/mathlib/commit/a16650c48912cf203ce9cf7b831b0f611ddf98a9)
feat(geometry/manifold/algebra/smooth_functions): add `coe_fn_(linear_map|ring_hom|alg_hom)` ([#7749](https://github.com/leanprover-community/mathlib/pull/#7749))

Changed names to be consistent with the topology library and proven that some coercions are morphisms.

### [2021-06-15T06:03:53+00:00](https://github.com/leanprover-community/mathlib/commit/bf83c301a5d4f1b987593c76256e0323ed56ff4b)
chore(algebra/{ordered_monoid_lemmas, ordered_monoid}): move two sections close together ([#7921](https://github.com/leanprover-community/mathlib/pull/#7921))

This PR aims at shortening the diff between `master` and PR [#7645](https://github.com/leanprover-community/mathlib/pull/#7645) of the order refactor.

I moved the `mono` section of `algebra/ordered_monoid_lemmas` to the end of the file and appended the `strict_mono` section of `algebra/ordered_monoid` after that.

Note: the hypotheses are not optimal, but, with the current `instances` in this version, I did not know how to improve this.  It will get better by the time PR [#7645](https://github.com/leanprover-community/mathlib/pull/#7645) is merged.  In fact, the next PR in the sequence, [#7876](https://github.com/leanprover-community/mathlib/pull/#7876), already removes the unnecessary assumptions.

### [2021-06-15T06:03:52+00:00](https://github.com/leanprover-community/mathlib/commit/d74a8989bfa4f77886f942f5e55acbd917e80705)
fix(meta/expr): fix mreplace ([#7912](https://github.com/leanprover-community/mathlib/pull/#7912))

Previously the function would not recurse into macros (like `have`).
Also add warning to docstring.

### [2021-06-15T03:22:09+00:00](https://github.com/leanprover-community/mathlib/commit/d960b2d84270b74c74f7aaf793e15638e2acab2e)
chore(scripts): update nolints.txt ([#7939](https://github.com/leanprover-community/mathlib/pull/#7939))

I am happy to remove some nolints for you!

### [2021-06-15T03:22:08+00:00](https://github.com/leanprover-community/mathlib/commit/81f29f909cdb827db91e614a943bfa749d6e3567)
chore(topology/metric_space): cleanup Gromov-Hausdorff files ([#7936](https://github.com/leanprover-community/mathlib/pull/#7936))

Rename greek type variables to meaningful uppercase letters. Lint the files. Add a header where needed. Add spaces after forall or exist to conform to current style guide. Absolutely no new mathematical content.

### [2021-06-15T03:22:07+00:00](https://github.com/leanprover-community/mathlib/commit/a83f2c26f41bd81bdffd9914a6f32a1fa4463696)
feat(group_theory/order_of_element): Power of subset is subgroup ([#7915](https://github.com/leanprover-community/mathlib/pull/#7915))

If `S` is a nonempty subset of `G`, then `S ^ |G|` is a subgroup of `G`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-06-15T03:22:06+00:00](https://github.com/leanprover-community/mathlib/commit/ba25bb8abe3679019b3334db6e71b3f92e5fc55a)
feat(measure_theory): define `measure.trim`, restriction of a measure to a sub-sigma algebra ([#7906](https://github.com/leanprover-community/mathlib/pull/#7906))

It is common to see a measure `μ` on a measurable space structure `m0` as being also a measure on any `m ≤ m0`. Since measures in mathlib have to be trimmed to the measurable space, `μ` itself is not a measure on `m`. For `hm : m ≤ m0`, we define the measure `μ.trim hm` on `m`.

We add lemmas relating a measure and its trimmed version, mostly about integrals of `m`-measurable functions.



Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2021-06-14T21:50:17+00:00](https://github.com/leanprover-community/mathlib/commit/8377a1fc26a6739c7dfe4655032d7496c05fc6c1)
feat(measure_theory/lp_space): add snorm_le_snorm_mul_rpow_measure_univ ([#7926](https://github.com/leanprover-community/mathlib/pull/#7926))

There were already versions of this lemma for `snorm'` and `snorm_ess_sup`. The new lemma collates these into a statement about `snorm`.

### [2021-06-14T21:50:16+00:00](https://github.com/leanprover-community/mathlib/commit/e041dbe34a2e1c9d72e7e88b4aa34e642293c674)
chore(algebra/covariant_and_contravariant): fix typos in module doc-strings ([#7925](https://github.com/leanprover-community/mathlib/pull/#7925))

This PR changes slightly the doc-strings to make the autogenerated documentation more consistent.  I also removed some unstylish double spaces.

### [2021-06-14T21:50:15+00:00](https://github.com/leanprover-community/mathlib/commit/4a8ce41ee9914e504969cc6e8d35134cbcf5d770)
feat(analysis/special_functions/trigonometric): facts about periodic trigonometric functions  ([#7841](https://github.com/leanprover-community/mathlib/pull/#7841))

I use the periodicity API that I added in [#7572](https://github.com/leanprover-community/mathlib/pull/#7572) to write lemmas about sine (real and complex), cosine (real and complex), tangent (real and complex), and the  exponential function (complex only).

### [2021-06-14T21:50:14+00:00](https://github.com/leanprover-community/mathlib/commit/fed7cf0714c091d40a182f814a6fa17074d3434e)
fix(tactic/induction): fix multiple cases'/induction' bugs ([#7717](https://github.com/leanprover-community/mathlib/pull/#7717))

* Fix generalisation in the presence of frozen local instances.

  Any time we revert a potentially frozen hypothesis, we now unfreeze local
  hypotheses during the operation. This makes sure that generalisation works
  uniformly whether or not any local instances are frozen.

* Treat local defs as fixed during auto-generalisation

  induction' gets confused if we generalise over local definitions since they
  turn into lets when reverted. Ideally, we would handle local defs
  transparently, but that would require a lot of new code. So instead, we at
  least stop auto-generalisation from generalising them (and their
  dependencies).

* Handle infinitely branching types

  induction' and cases' previously did not acknowledge the existence of
  infinitely branching types at all, leading to various internal errors.

New test cases for all these bugs, due to Patrick Massot, were added to the test
suite.

### [2021-06-14T21:50:13+00:00](https://github.com/leanprover-community/mathlib/commit/f781c47e47c5f383150c3d8af01fb144106ed865)
feat(linear_algebra/determinant): specialize `linear_equiv.is_unit_det` to automorphisms ([#7667](https://github.com/leanprover-community/mathlib/pull/#7667))

`linear_equiv.is_unit_det` is defined for all equivs between equal-dimensional spaces, using `det (linear_map.to_matrix _ _ _)`, but I needed this result for `linear_map.det _` (which only exists between the exact same space). So I added the specialization `linear_equiv.is_unit_det'`.

### [2021-06-14T21:50:12+00:00](https://github.com/leanprover-community/mathlib/commit/615af7559189f7ad13848fd76838094391aa4376)
feat(measure_theory/interval_integral): `integral_deriv_comp_mul_deriv` ([#7141](https://github.com/leanprover-community/mathlib/pull/#7141))

`∫ x in a..b, (g ∘ f) x * f' x`, where `f'` is derivative of `f` and `g` is the derivative of some function (the latter qualification allowing us to compute the integral directly by FTC-2)

### [2021-06-14T12:40:22+00:00](https://github.com/leanprover-community/mathlib/commit/386962c2ace6566075f25609cf04c3fd7045e89f)
feat(algebra/char_zero): `neg_eq_self_iff` ([#7916](https://github.com/leanprover-community/mathlib/pull/#7916))

`-a = a ↔ a = 0` and `a = -a ↔ a = 0`.

### [2021-06-14T07:23:15+00:00](https://github.com/leanprover-community/mathlib/commit/461b444d065e1747f1bda60070b4b5d6a3026fb2)
docs(data/rat/denumerable): add module docstring ([#7920](https://github.com/leanprover-community/mathlib/pull/#7920))

### [2021-06-14T07:23:14+00:00](https://github.com/leanprover-community/mathlib/commit/a853a6ae52b2d749b7b9b66bb58fe46df5e4cdf2)
feat(analysis/normed_space): nnreal.coe_nat_abs ([#7911](https://github.com/leanprover-community/mathlib/pull/#7911))

from LTE

### [2021-06-14T06:07:37+00:00](https://github.com/leanprover-community/mathlib/commit/6aed9a7720592ca03e36c4a5a9bacec09dfe277b)
feat(analysis/convex): add dual cone ([#7738](https://github.com/leanprover-community/mathlib/pull/#7738))

Add definition of the dual cone of a set in a real inner product space

### [2021-06-14T03:56:10+00:00](https://github.com/leanprover-community/mathlib/commit/fec6c8a4fdf630d30cc103095a69a2fc4bc6091e)
chore(scripts): update nolints.txt ([#7922](https://github.com/leanprover-community/mathlib/pull/#7922))

I am happy to remove some nolints for you!

### [2021-06-13T22:32:12+00:00](https://github.com/leanprover-community/mathlib/commit/300451336dc75ef64934b14050c93c3f1084797e)
feat(measure_theory/ess_sup): monotonicity of ess_sup/ess_inf w.r.t. the measure ([#7917](https://github.com/leanprover-community/mathlib/pull/#7917))

### [2021-06-13T22:32:11+00:00](https://github.com/leanprover-community/mathlib/commit/4fe77812bd05841b05b7dd5ac43cb5faf4917255)
chore(algebra/lie/basic + classical): golf some proofs ([#7903](https://github.com/leanprover-community/mathlib/pull/#7903))

Another PR with some golfing, to get acquainted with the files!  Oliver, I really like how you set this up!

Also, feel free to say that you do not like the golfing: there is a subtle tension between proving stuff fast and making it accessible!

### [2021-06-13T22:32:10+00:00](https://github.com/leanprover-community/mathlib/commit/b3244884a52c0dfa2ca48825fb45bcf85f9551e3)
docs(set_theory/schroeder_bernstein): add module docstring ([#7900](https://github.com/leanprover-community/mathlib/pull/#7900))

### [2021-06-13T22:32:09+00:00](https://github.com/leanprover-community/mathlib/commit/e971eae617baf2c358b32fe3dff33798e00e446f)
docs(data/nat/totient): add module docstring ([#7899](https://github.com/leanprover-community/mathlib/pull/#7899))

### [2021-06-13T22:32:08+00:00](https://github.com/leanprover-community/mathlib/commit/a359bd989d3bc0917c282b59ba86dfafd5f26c4a)
chore(measure_theory): measurability statements for coercions, coherent naming ([#7854](https://github.com/leanprover-community/mathlib/pull/#7854))

Also add a few lemmas on measure theory

### [2021-06-13T17:23:56+00:00](https://github.com/leanprover-community/mathlib/commit/5c114586544998ea34d18cfe63700b5fe7507eb4)
chore(analysis/normed_space/normed_group_hom): golf proof of normed_group_hom.bounded ([#7896](https://github.com/leanprover-community/mathlib/pull/#7896))

### [2021-06-13T17:23:55+00:00](https://github.com/leanprover-community/mathlib/commit/2f40f35175f0ef51decea65c50d5cd2611694234)
feat(measure_theory): continuity of primitives ([#7864](https://github.com/leanprover-community/mathlib/pull/#7864))

From the sphere eversion project

This proves some continuity of interval integrals with respect to parameters and continuity of primitives of measurable functions. The statements are a bit abstract, but they allow to have:
```lean
example {f : ℝ → E} (h_int : integrable f) (a : ℝ) :  
  continuous (λ b, ∫ x in a .. b, f x ∂ volume) :=
h_int.continuous_primitive a
```
under the usual assumptions on `E`: `normed_group E`, `second_countable_topology E`,  `normed_space ℝ E`
`complete_space E`, `measurable_space E`, `borel_space E`, say `E = ℝ` for instance. Of course global integrability is not needed, assuming integrability on all finite length intervals is enough:
```lean
example {f : ℝ → E} (h_int : ∀ a b : ℝ, interval_integrable f volume a b) (a : ℝ) :  
  continuous (λ b, ∫ x in a .. b, f x ∂ volume) :=
continuous_primitive h_int a
```

### [2021-06-13T11:45:04+00:00](https://github.com/leanprover-community/mathlib/commit/6d2a0512c4bcd898cc179c1b4603c5a00fa3e285)
feat(algebra/covariant_and_contravariant): API for covariant_and_contravariant ([#7889](https://github.com/leanprover-community/mathlib/pull/#7889))

This PR introduces more API for `covariant` and `contravariant` stuff .

Besides the API, I have not actually made further use of the typeclasses or of the API.  This happens in subsequent PRs.

This is a step towards PR [#7645](https://github.com/leanprover-community/mathlib/pull/#7645).

### [2021-06-13T06:04:53+00:00](https://github.com/leanprover-community/mathlib/commit/7c9643def9729216fd46352606e1584c2d991aca)
chore(scripts): update nolints.txt ([#7914](https://github.com/leanprover-community/mathlib/pull/#7914))

I am happy to remove some nolints for you!

### [2021-06-13T06:04:52+00:00](https://github.com/leanprover-community/mathlib/commit/e13fd486195fbc7a949161c20c2449a3216d1e1e)
docs(data/nat/pairing): add module docstring ([#7897](https://github.com/leanprover-community/mathlib/pull/#7897))

### [2021-06-13T06:04:51+00:00](https://github.com/leanprover-community/mathlib/commit/2c919b0874453791978075e76dbdee23a56f0201)
chore(algebra/{ordered_group, linear_ordered_comm_group_with_zero.lean}): rename one lemma, remove more @s ([#7895](https://github.com/leanprover-community/mathlib/pull/#7895))

The more substantial part of this PR is changing the name of a lemma from `div_lt_div_iff'` to `mul_inv_lt_mul_inv_iff'`: the lemma proves `a * b⁻¹ ≤ c * d⁻¹ ↔ a * d ≤ c * b`.

Furthermore, in the same spirit as a couple of my recent short PRs, I am removing a few more `@`, in order to sweep under the rug, later on, a change in typeclass assumptions.  This PR only changes a name, which was used only once, and a few proofs, but no statement.

On the path towards PR [#7645](https://github.com/leanprover-community/mathlib/pull/#7645).

### [2021-06-13T06:04:50+00:00](https://github.com/leanprover-community/mathlib/commit/add577d77d36a132e10f4b0903bddd8db0e07ac6)
feat(group_theory/group_action/defs): add `has_mul.to_has_scalar` and relax typeclass in `smul_mul_smul` ([#7885](https://github.com/leanprover-community/mathlib/pull/#7885))

### [2021-06-12T23:46:04+00:00](https://github.com/leanprover-community/mathlib/commit/e0a3303f6c7530dcebf38577085b02e9c490bbd4)
chore(category_theory/filtered): Adds missing instances ([#7909](https://github.com/leanprover-community/mathlib/pull/#7909))




Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-06-12T23:46:03+00:00](https://github.com/leanprover-community/mathlib/commit/9ad8ea3b6275535ded9b7bfd315300a031ed326a)
chore(linear_algebra/quadratic_form): fix typo ([#7907](https://github.com/leanprover-community/mathlib/pull/#7907))

### [2021-06-12T23:46:02+00:00](https://github.com/leanprover-community/mathlib/commit/7b7cd0a140c51844aa4d5a7d6ea15cb5f6e1afd7)
fix(tactic/lint): punctuation of messages ([#7869](https://github.com/leanprover-community/mathlib/pull/#7869))

Previously, the linter framework would append punctuation (`.` or `:`) to the message provided by the linter, but this was confusing and lead to some double punctuation. Now all linters specify their own punctuation.



Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-06-12T23:46:01+00:00](https://github.com/leanprover-community/mathlib/commit/39073fa25e35ba2edade7b5f2aca6ffce944ae89)
feat(algebra/pointwise): Dynamics of powers of a subset ([#7836](https://github.com/leanprover-community/mathlib/pull/#7836))

If `S` is a subset of a group `G`, then the powers of `S` eventually stabilize in size.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-06-12T15:55:02+00:00](https://github.com/leanprover-community/mathlib/commit/ee4fe7432b1f88e857e4b568f01a6435276a1b96)
feat(topology/category/Profinite/cofiltered_clopen): Theorem about clopen sets in cofiltered limits of profinite sets ([#7837](https://github.com/leanprover-community/mathlib/pull/#7837))

This PR proves the theorem that any clopen set in a cofiltered limit of profinite sets arises from a clopen set in one of the factors of the limit.

This generalizes a theorem used in LTE.

### [2021-06-12T15:55:00+00:00](https://github.com/leanprover-community/mathlib/commit/06094d564b0a6c9158ccfac534418ce298fb0ca8)
feat(linear_algebra/free_module): add class module.free ([#7801](https://github.com/leanprover-community/mathlib/pull/#7801))

We introduce here a new class `module.free`.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-06-12T15:54:59+00:00](https://github.com/leanprover-community/mathlib/commit/f9935ede761503e56d25d41bc6c225bd89649793)
feat(geometry/manifold): Some lemmas for smooth functions ([#7752](https://github.com/leanprover-community/mathlib/pull/#7752))

### [2021-06-12T11:10:11+00:00](https://github.com/leanprover-community/mathlib/commit/b7d4996e334f7855f5c22ffda45f53166d90bddd)
chore(ring_theory/adjoin_root): speedup ([#7905](https://github.com/leanprover-community/mathlib/pull/#7905))

Speedup a lemma that has just timed out in bors, by removing a heavy `change`.

### [2021-06-12T11:10:10+00:00](https://github.com/leanprover-community/mathlib/commit/15b24348503364177f7e20916d44ab59a5fb174a)
chore(data/nat/sqrt): Alternative phrasings of data.nat.sqrt lemmas ([#7748](https://github.com/leanprover-community/mathlib/pull/#7748))

Add versions of the `data.nat.sqrt` lemmas to talk about `n^2` where the current versions talk about `n * n`.

### [2021-06-12T11:10:09+00:00](https://github.com/leanprover-community/mathlib/commit/841dce13e62e913a2d447503d193dabd46075050)
feat(data/polynomial): generalize `polynomial.has_scalar` to require only `distrib_mul_action` instead of `semimodule` ([#7664](https://github.com/leanprover-community/mathlib/pull/#7664))

Note that by generalizing this instance, we introduce a diamond with `polynomial.mul_semiring_action`, which has a definitionally different `smul`. To resolve this, we add a proof that the definitions are equivalent, and switch `polynomial.mul_semiring_action` to use the same implementation as `polynomial.has_scalar`. This allows us to generalize `smul_C` to apply to all types of action, and remove `coeff_smul'` which then duplicates the statement of `coeff_smul`.

### [2021-06-12T08:06:06+00:00](https://github.com/leanprover-community/mathlib/commit/2016a93ab330b4d154b2930e8b53480e89df9ff3)
feat(linear_algebra): use `finset`s to define `det` and `trace` ([#7778](https://github.com/leanprover-community/mathlib/pull/#7778))

This PR replaces `∃ (s : set M) (b : basis s R M), s.finite` with `∃ (s : finset M), nonempty (basis s R M)` in the definitions in `linear_map.det` and `linear_map.trace`. This should make it much easier to unfold those definitions without having to modify the instance cache or supply implicit params.

In particular, it should help a lot with [#7667](https://github.com/leanprover-community/mathlib/pull/#7667).

### [2021-06-12T08:06:04+00:00](https://github.com/leanprover-community/mathlib/commit/dabb41f2df133cb2f326950807692aa3c46768cc)
feat(tactic/{induction,fresh_names}): improve `induction' with` ([#7726](https://github.com/leanprover-community/mathlib/pull/#7726))

This commit introduces two improvements to the `with` clauses of the `cases'`
and `induction'` tactics:

- Users can now write a hyphen instead of a name in the `with` clause. This
  clears the corresponding hypothesis (and any hypotheses depending on it).

- When users give an explicit name in the `with` clause, that name is now used
  verbatim, even if it shadows an existing hypothesis.

### [2021-06-12T02:38:03+00:00](https://github.com/leanprover-community/mathlib/commit/55c96623798269d587f89f54288be45f7b3d2426)
chore(scripts): update nolints.txt ([#7902](https://github.com/leanprover-community/mathlib/pull/#7902))

I am happy to remove some nolints for you!

### [2021-06-12T02:38:02+00:00](https://github.com/leanprover-community/mathlib/commit/2974a9f9c6cce2abd81ef55409871f19105a08c7)
feat(ring_theory): every division_ring is_noetherian ([#7661](https://github.com/leanprover-community/mathlib/pull/#7661))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-06-12T02:38:01+00:00](https://github.com/leanprover-community/mathlib/commit/5948cde713b4cadb99394cc130be7a5377c65507)
feat(ring_theory): the field trace resp. norm is the sum resp. product of the conjugates ([#7640](https://github.com/leanprover-community/mathlib/pull/#7640))

More precise statement of the main result: the field trace (resp. norm) of `x` in `K(x) / K`, mapped to a field `F` that contains all the conjugate roots over `K` of `x`, is equal to the sum (resp. product) of all of these conjugate roots.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-06-12T02:38:00+00:00](https://github.com/leanprover-community/mathlib/commit/433791843019affe77d878b79ffc53fd58419312)
feat(analysis/special_functions/integrals): integral of `sin x ^ m * cos x ^ n` ([#7418](https://github.com/leanprover-community/mathlib/pull/#7418))

The simplification of integrals of the form `∫ x in a..b, sin x ^ m * cos x ^ n` where (i) `n` is odd, (ii) `m` is odd, and (iii) `m` and `n` are both even.

The computation of the integrals of the following functions are then provided outright:
- `sin x * cos x`, given both in terms of sine and cosine
- `sin x ^ 2 * cos x ^ 2`
- `sin x ^ 2 * cos x` and `sin x * cos x ^ 2`
- `sin x ^ 3` and `cos x ^ 3`

### [2021-06-12T02:37:59+00:00](https://github.com/leanprover-community/mathlib/commit/2d175ae60486e74dc4ea59101ae9a717aac782fe)
feat(topology/category/Top/limits): Kőnig's lemma for fintypes ([#6288](https://github.com/leanprover-community/mathlib/pull/#6288))

Specializes `Top.nonempty_limit_cone_of_compact_t2_inverse_system` to an inverse system of nonempty fintypes.

### [2021-06-11T21:18:49+00:00](https://github.com/leanprover-community/mathlib/commit/b3606111df5172b1c73adfc4b4e7ed7d2876e98b)
chore(src/algebra/lie/abelian): golf ([#7898](https://github.com/leanprover-community/mathlib/pull/#7898))

I golfed some of the proofs of the file `algebra/lie/abelian`.  My main motivation was to get familiar with the file.

### [2021-06-11T21:18:48+00:00](https://github.com/leanprover-community/mathlib/commit/dd6003547b6bef19098f9b0242018e3e27ede705)
chore(algebra/{covariant_and_contravariant + ordered_monoid_lemmas}): new file covariant_and_contravariant ([#7890](https://github.com/leanprover-community/mathlib/pull/#7890))

This PR creates a new file `algebra/covariant_and_contravariant` and moves the part of `algebra/ordered_monoid_lemmas` dealing exclusively with `covariant` and `contravariant` into it.
It also rearranges the documentation, with a view to the later PRs, building up to [#7645](https://github.com/leanprover-community/mathlib/pull/#7645).

The discrepancy between the added and removed lines is entirely due to longer documentation: no actual Lean code has changed, except, of course, for the `import` in `algebra/ordered_monoid_lemmas` that now uses `covariant_and_contravariant`.

### [2021-06-11T21:18:47+00:00](https://github.com/leanprover-community/mathlib/commit/538f015cad717ca3771331a5e5f230d0d42b583c)
feat(data/finset/basic): `empty_product` and `product_empty` ([#7886](https://github.com/leanprover-community/mathlib/pull/#7886))

add `product_empty_<left/right>`

### [2021-06-11T21:18:46+00:00](https://github.com/leanprover-community/mathlib/commit/97a7a246bff92805e02f4e2803f258e842fe8deb)
doc(data/pequiv): add module docs ([#7877](https://github.com/leanprover-community/mathlib/pull/#7877))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-06-11T21:18:45+00:00](https://github.com/leanprover-community/mathlib/commit/ff44ed50037063894c3f1e3c523e30f969c8e91e)
feat({algebra/group_action_hom, data/equiv/mul_add}): add missing `inverse` defs ([#7847](https://github.com/leanprover-community/mathlib/pull/#7847))

### [2021-06-11T21:18:44+00:00](https://github.com/leanprover-community/mathlib/commit/a008b33f3e2730eaf50401af9d6cc7abfa29f9ae)
feat(data/finsupp/to_dfinsupp): add sigma_finsupp_lequiv_dfinsupp ([#7818](https://github.com/leanprover-community/mathlib/pull/#7818))

Equivalences between `(Σ i, η i) →₀ N` and `Π₀ i, (η i →₀ N)`.

- [x] depends on: [#7819](https://github.com/leanprover-community/mathlib/pull/#7819) 



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-06-11T21:18:43+00:00](https://github.com/leanprover-community/mathlib/commit/64d453eed7ec267a56b7ba026fe0a55df1514855)
feat(ring_theory/adjoin/basic): add subalgebra.fg_prod ([#7811](https://github.com/leanprover-community/mathlib/pull/#7811))

We add `subalgebra.fg_prod`: the product of two finitely generated subalgebras is finitely generated.

A mathematical remark: the result is not difficult, but one needs to be careful. For example, `algebra.adjoin_eq_prod` is false without adding `(1,0)` and `(0,1)` by hand to the set of generators. Moreover, `linear_map.inl` and `linear_map.inr` are not ring homomorphisms, so it seems difficult to mimic the proof for modules. A better mathematical proof is to take surjections from two polynomial rings (in finitely many variables) and considering the tensor product of these polynomial rings, that is again a polynomial ring in finitely many variables, and build a surjection to the product of the subalgebras (using the universal property of the tensor product). The problem with this approach is that one needs to know that the tensor product of polynomial rings is again a polynomial ring, and I don't know well enough the API fort the tensor product to prove this.

### [2021-06-11T21:18:42+00:00](https://github.com/leanprover-community/mathlib/commit/61a04c5168dafe10e10c9a776d41980cc8172020)
feat(algebraic_geometry/structure_sheaf): Define comap on structure sheaf ([#7788](https://github.com/leanprover-community/mathlib/pull/#7788))

Defines the comap of a ring homomorphism on the structure sheaves of the prime spectra.



Co-authored-by: justus-springer <50165510+justus-springer@users.noreply.github.com>

### [2021-06-11T21:18:40+00:00](https://github.com/leanprover-community/mathlib/commit/eb9bd55fe0137843bcac7ec4f199f339f9dcb223)
feat(linear_algebra/quadratic_form): Real version of Sylvester's law of inertia ([#7427](https://github.com/leanprover-community/mathlib/pull/#7427))

We prove that every nondegenerate real quadratic form is equivalent to a weighted sum of squares with the weights being ±1.

### [2021-06-11T13:26:19+00:00](https://github.com/leanprover-community/mathlib/commit/e8add823aff3bbd5025670973767539936f98e6a)
chore(algebra/{ordered_monoid,linear_ordered_comm_group_with_zero}): remove some uses of @ ([#7884](https://github.com/leanprover-community/mathlib/pull/#7884))

This PR replaces a couple of uses of `@` with slightly more verbose proofs that only use the given explicit arguments.

The `by apply mul_lt_mul''' hab0 hcd0` line also works with `mul_lt_mul''' hab0 hcd0` alone (at least on my machine).  The reason for the slightly more elaborate proof is that once the typeclass assumptions will change, the direct term-mode proof will break, while the `by apply` version is more stable.

Besides its aesthetic value, this is useful in PR [#7645](https://github.com/leanprover-community/mathlib/pull/#7645), as the typeclass arguments of the involved lemmas will change and this will keep the diff (slightly) shorter.

### [2021-06-11T13:26:18+00:00](https://github.com/leanprover-community/mathlib/commit/9500d9510ba62a37d8b84903ece3edc5ab63a17c)
feat(number_theory/l_series): The L-series of an arithmetic function ([#7862](https://github.com/leanprover-community/mathlib/pull/#7862))

Defines the L-series of an arithmetic function
Proves a few basic facts about convergence of L-series

### [2021-06-11T13:26:17+00:00](https://github.com/leanprover-community/mathlib/commit/e35438bbf595ba1d2acf1ef70255169aa08f0958)
feat(analysis): Cauchy sequence and series lemmas ([#7858](https://github.com/leanprover-community/mathlib/pull/#7858))

from LTE. Mostly relaxing assumptions from metric to
pseudo-metric and proving some obvious lemmas.

eventually_constant_prod and eventually_constant_sum are duplicated by hand because `to_additive` gets confused by the appearance of `1`.

In `norm_le_zero_iff' {G : Type*} [semi_normed_group G] [separated_space G]` and the following two lemmas the type classes assumptions look silly, but those lemmas are indeed useful in some specific situation in LTE.

### [2021-06-11T13:26:16+00:00](https://github.com/leanprover-community/mathlib/commit/a4211857b643c15634291111a6e1a5939054b2dc)
feat(algebra/periodic): more periodicity lemmas ([#7853](https://github.com/leanprover-community/mathlib/pull/#7853))

### [2021-06-11T13:26:15+00:00](https://github.com/leanprover-community/mathlib/commit/9228ff9c482d07b74c1bf197040eee7e7ba70ef6)
feat(algebra/ordered_group): abs_sub ([#7850](https://github.com/leanprover-community/mathlib/pull/#7850))

- rename `abs_sub` to `abs_sub_comm`
- prove `abs_sub`

### [2021-06-11T13:26:14+00:00](https://github.com/leanprover-community/mathlib/commit/4bfe8e8a7271fb01a68f84376728818fa9bf0a50)
feat(algebra/order_functions): lt_max_of_lt_<left/right> ([#7849](https://github.com/leanprover-community/mathlib/pull/#7849))

### [2021-06-11T13:26:12+00:00](https://github.com/leanprover-community/mathlib/commit/915a0a21fefc36c926a3913982b44c17af639dc2)
feat(topology/algebra/ordered/basic): add a few subseq-related lemmas ([#7828](https://github.com/leanprover-community/mathlib/pull/#7828))

These are lemmas I proved while working on [#7164](https://github.com/leanprover-community/mathlib/pull/#7164). Some of them are actually not used anymore in that PR because I'm refactoring it, but I thought they would be useful anyway, so here there are.

### [2021-06-11T12:07:55+00:00](https://github.com/leanprover-community/mathlib/commit/51cd821b44e41243987495437607f40783a1a482)
chore(algebra/lie/classical): speed up slow proof ([#7894](https://github.com/leanprover-community/mathlib/pull/#7894))

Squeeze a simp in a proof that has just timed out on bors

### [2021-06-11T02:16:14+00:00](https://github.com/leanprover-community/mathlib/commit/6eb3d971c831b0a9a7fa8062221ba5bc10163665)
chore(scripts): update nolints.txt ([#7887](https://github.com/leanprover-community/mathlib/pull/#7887))

I am happy to remove some nolints for you!

### [2021-06-11T02:16:13+00:00](https://github.com/leanprover-community/mathlib/commit/6f6dbad62a35c398125748095f5206bf82a3a2c6)
feat(set_theory/cardinal): missing lemma ([#7880](https://github.com/leanprover-community/mathlib/pull/#7880))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-11T02:16:12+00:00](https://github.com/leanprover-community/mathlib/commit/e8aa98490ab0dfb31694896ddbd5c1e9f7b1a2ee)
doc(int/modeq): add module doc and tidy ([#7878](https://github.com/leanprover-community/mathlib/pull/#7878))

### [2021-06-11T02:16:11+00:00](https://github.com/leanprover-community/mathlib/commit/1b0e5ee50e1a8ae8f8cbeed0495acdf656d0a34e)
chore(data/real/nnreal): avoid abusing inequalities in nnreals ([#7872](https://github.com/leanprover-community/mathlib/pull/#7872))

I removed the use of `@`, so that all implicit arguments stay implicit.

The main motivation is to reduce the diff in the bigger PR [#7645](https://github.com/leanprover-community/mathlib/pull/#7645): by only having the explicit arguments, the same proof works, without having to fiddle around with underscores.

### [2021-06-11T02:16:10+00:00](https://github.com/leanprover-community/mathlib/commit/d570596075dd17d75f27040321cf9cf367d2ad66)
feat(logic/function/basic): a lemma on symmetric operations and flip ([#7871](https://github.com/leanprover-community/mathlib/pull/#7871))

This lemma is used to show that if multiplication is commutative, then `flip`ping the arguments returns the same function.

This is used in PR [#7645](https://github.com/leanprover-community/mathlib/pull/#7645) .

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-06-11T02:16:09+00:00](https://github.com/leanprover-community/mathlib/commit/9a4881d47715282a2083c80d57bbb3f4f0e3cbdc)
chore(data/real/pi, analysis/special_functions/trigonometric.lean): speed up/simplify proofs ([#7868](https://github.com/leanprover-community/mathlib/pull/#7868))

These are mostly cosmetic changes, simplifying a couple of proofs.  I tried to remove the calls to `linarith` or `norm_num`, when the alternatives were either single lemmas or faster than automation.

The main motivation is to reduce the diff in the bigger PR [#7645](https://github.com/leanprover-community/mathlib/pull/#7645).

### [2021-06-11T02:16:08+00:00](https://github.com/leanprover-community/mathlib/commit/f157a372aa8f6eb819529d23b9734f5abe357fed)
chore(logic/basic): fixup `eq_or_ne` ([#7865](https://github.com/leanprover-community/mathlib/pull/#7865))

### [2021-06-11T02:16:07+00:00](https://github.com/leanprover-community/mathlib/commit/0a80efb31603e122507aad4f64e65aa5d72eb27f)
chore(analysis/normed_space/normed_group_hom): remove bound_by ([#7860](https://github.com/leanprover-community/mathlib/pull/#7860))

`bound_by f C` is the same as `∥f∥ ≤ C` and it is therefore useless now that we have `∥f∥`.

### [2021-06-10T16:03:39+00:00](https://github.com/leanprover-community/mathlib/commit/0f8e79ea037a9193b9fa246c8601a580ffdb70a3)
feat(algebra/big_operators/finsupp): relax assumptions `semiring` to `non_unital_non_assoc_semiring` ([#7874](https://github.com/leanprover-community/mathlib/pull/#7874))

### [2021-06-10T16:03:38+00:00](https://github.com/leanprover-community/mathlib/commit/3b5a44b812e0998578dfe67c27b8478b73e07fe1)
chore(src/testing/slim_check/sampleable): simply add explicit namespace `nat.` ([#7873](https://github.com/leanprover-community/mathlib/pull/#7873))

This PR only introduces the explicit namespace `nat.` when calling `le_div_iff_mul_le`.  The reason for doing this is that PR [#7645](https://github.com/leanprover-community/mathlib/pull/#7645) introduces a lemma `le_div_iff_mul_le` in the root namespace and this one then becomes ambiguous.  Note that CI *does build* on this branch even without the explicit namespace.  The change would only become necessary once/if PR [#7645](https://github.com/leanprover-community/mathlib/pull/#7645) gets merged.

I isolated this change to a separate PR to reduce the diff of [#7645](https://github.com/leanprover-community/mathlib/pull/#7645) and also to bring attention to this issue, in case someone has some comment about it.

### [2021-06-10T16:03:37+00:00](https://github.com/leanprover-community/mathlib/commit/2e8ef55f28b192c9e85493b3ec7d9fbf7b7c0a80)
feat(algebra/floor): nat_floor ([#7855](https://github.com/leanprover-community/mathlib/pull/#7855))

introduce `nat_floor`

Related Zulip discussion: https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/nat_floor

### [2021-06-10T16:03:36+00:00](https://github.com/leanprover-community/mathlib/commit/021c8590664311ce980317559bfc152627d0b25d)
feat(analysis/special_functions/pow): rpow-log inequalities ([#7848](https://github.com/leanprover-community/mathlib/pull/#7848))

Inequalities relating rpow and log

### [2021-06-10T16:03:35+00:00](https://github.com/leanprover-community/mathlib/commit/49f5a1596bf25e56af7fc54d42305fdbb834dd67)
feat(algebra/ordered_ring): more granular typeclasses for `with_top α` and `with_bot α` ([#7845](https://github.com/leanprover-community/mathlib/pull/#7845))

`with_top α` and `with_bot α` now inherit the following typeclasses from `α` with suitable assumptions:

* `mul_zero_one_class`
* `semigroup_with_zero`
* `monoid_with_zero`
* `comm_monoid_with_zero`

These were all split out of the existing `canonically_ordered_comm_semiring`, with their proofs unchanged.
The same instances are added for `with_bot`.

It is not possible to split further, as `distrib'` requires `add_eq_zero_iff`, and `canonically_ordered_comm_semiring` is the smallest typeclass that provides both this lemma and `mul_zero_class`.

With these instances in place, we can now show `comm_monoid_with_zero ereal`.

### [2021-06-10T23:57:20+10:00](https://github.com/leanprover-community/mathlib/commit/079b8a11a19c2fb3080cecede2b979062f1fb3a3)
Revert "feat(set_theory/cofinality): more infinite pigeonhole principles"

This reverts commit c7ba50f41813718472478983370db66b06c2d33e.

### [2021-06-10T23:56:13+10:00](https://github.com/leanprover-community/mathlib/commit/c7ba50f41813718472478983370db66b06c2d33e)
feat(set_theory/cofinality): more infinite pigeonhole principles

### [2021-06-10T06:56:02+00:00](https://github.com/leanprover-community/mathlib/commit/f7e93d9ed5a6e5bcbdca00fd45a17359906add86)
chore(algebra/linear_ordered_comm_group_with_zero.lean): extend calc proofs ([#7870](https://github.com/leanprover-community/mathlib/pull/#7870))

These are mostly cosmetic changes, simplifying a couple of calc proofs.

The main motivation is to reduce the diff in the bigger PR [#7645](https://github.com/leanprover-community/mathlib/pull/#7645).

### [2021-06-10T06:56:01+00:00](https://github.com/leanprover-community/mathlib/commit/05b7b0b03f85c127c1d55e333c5257d2bc73cc97)
chore(scripts): update nolints.txt ([#7867](https://github.com/leanprover-community/mathlib/pull/#7867))

I am happy to remove some nolints for you!

### [2021-06-10T06:56:00+00:00](https://github.com/leanprover-community/mathlib/commit/4da899c08159b6df2e520865073c20e313ed3bf9)
chore(number_theory/{fermat4, sum_four_squares, zsqrtd/basic}): simplify/rearrange proofs ([#7866](https://github.com/leanprover-community/mathlib/pull/#7866))

These are mostly cosmetic changes, simplifying a couple of proofs.  I would have tagged it `easy`, but since there are three files changed, it may take just over 20'' to review!

The main motivation is to reduce the diff in the bigger PR [#7645](https://github.com/leanprover-community/mathlib/pull/#7645).

### [2021-06-10T01:51:29+00:00](https://github.com/leanprover-community/mathlib/commit/2fc66c928464716cce5d72c8a5008f3bdfc33d48)
feat(algebra/group_with_zero): add units.can_lift ([#7857](https://github.com/leanprover-community/mathlib/pull/#7857))

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/projective.20space/near/242041169)

### [2021-06-10T01:51:28+00:00](https://github.com/leanprover-community/mathlib/commit/0a348784247af08420a7549bd6a3dbd8259e9081)
chore(topology/algebra/continuous_functions): making names consistent with the smooth library ([#7844](https://github.com/leanprover-community/mathlib/pull/#7844))

### [2021-06-10T01:51:26+00:00](https://github.com/leanprover-community/mathlib/commit/06200c842ed505555a4fa51f635c356deb5d55a2)
feat(ring_theory/ideal): generalize to noncommutative rings ([#7654](https://github.com/leanprover-community/mathlib/pull/#7654))

This is a minimalist generalization of existing material on ideals to the setting of noncommutative rings.

I have not attempted to decide how things should be named in the long run. For now `ideal` specifically means a left-ideal (i.e. I didn't change the definition). We can either in future add `two_sided_ideal` (or `biideal` or `ideal₂` or ...), or potentially rename `ideal` to `left_ideal` or `lideal`, etc. Future bikeshedding opportunities!

In this PR I've just left definitions alone, and relaxed `comm_ring` hypotheses to `ring` as far as I could see possible. No new theorems or mathematics, just rearranging to get things in the right order.

(As a side note, both `ring_theory.ideal.basic` and `ring_theory.ideal.operations` should be split into smaller files; I can try this after this PR.)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-06-09T20:42:50+00:00](https://github.com/leanprover-community/mathlib/commit/3870896acc8abddf1712ab190007beede569e049)
doc(data/semiquot): reformat module doc properly, and add missing doc strings ([#7773](https://github.com/leanprover-community/mathlib/pull/#7773))






Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-09T20:42:48+00:00](https://github.com/leanprover-community/mathlib/commit/abe25e96ab92fec589e4b75c7d24df7d94aed1dd)
docs(data/mllist): fix module doc, and add all doc strings ([#7772](https://github.com/leanprover-community/mathlib/pull/#7772))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-09T20:42:47+00:00](https://github.com/leanprover-community/mathlib/commit/d9b91f3bba1e75a2d3ee9ed3224c9ee13a926b4a)
feat(measure_theory/tactic): add measurability tactic ([#7756](https://github.com/leanprover-community/mathlib/pull/#7756))

Add a measurability tactic defined in the file `measure_theory/tactic.lean`, which is heavily inspired from the continuity tactic. It proves goals of the form `measurable f`, `ae_measurable f µ` and `measurable_set s`. Some tests are provided in `tests/measurability.lean` and the tactic was used to replace a few lines in `integration.lean` and `mean_inequalities.lean`.

### [2021-06-09T15:40:05+00:00](https://github.com/leanprover-community/mathlib/commit/8e25717fa04b4310787bbc054d7fa47bd8af1843)
chore(geometry/euclidean/circumcenter): remove two `have`s in a proof ([#7852](https://github.com/leanprover-community/mathlib/pull/#7852))

Zulip:
https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/circumcenter

### [2021-06-09T15:40:04+00:00](https://github.com/leanprover-community/mathlib/commit/d0ed2a42cd0d22b17ce1624861d507ddb90c56b7)
chore(measure_theory/set_integral): put the definition of integrable_on into a new file ([#7842](https://github.com/leanprover-community/mathlib/pull/#7842))

The file `measure_theory.set_integral` is split into two: the `integrable_on` predicate is put into its own file, which does not import  `measure_theory.bochner_integration` (this puts the definition of that integrability property before the definition of the actual integral). The file `measure_theory.set_integral` retains all facts about `set_integral`.

### [2021-06-09T15:40:02+00:00](https://github.com/leanprover-community/mathlib/commit/764e878e7a20db7dc4a5986b12dafbb30b532df0)
feat(algebra/ordered_group): `-abs a ≤ a` ([#7839](https://github.com/leanprover-community/mathlib/pull/#7839))

### [2021-06-09T15:40:01+00:00](https://github.com/leanprover-community/mathlib/commit/a9d4f3d4246d7ce93a7e1e9a96a069d03890b5e9)
fix(*): make some non-instances reducible ([#7835](https://github.com/leanprover-community/mathlib/pull/#7835))

* Definitions that involve in instances might need to be reducible, see added library note. 
* This involves the definitions `*order.lift` / `function.injective.*` and `function.surjective.*` 
* This came up in [#7645](https://github.com/leanprover-community/mathlib/pull/#7645).



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-06-09T15:40:00+00:00](https://github.com/leanprover-community/mathlib/commit/20efef7828fadf698ff0cf79cbb2582e3b145ad5)
chore(algebra/field_power, data/set/intervals/basic): simpler proofs in the first file, fewer parentheses in the second one ([#7831](https://github.com/leanprover-community/mathlib/pull/#7831))

This is mostly a cosmetic PR: I removed two calls to `linarith`, where a term-mode proof was very simple.

I also removed some unnecessary parentheses in a different file.

### [2021-06-09T15:39:59+00:00](https://github.com/leanprover-community/mathlib/commit/02d5370a94f59f7c0b0f922fe645b422c6c98ee5)
chore(measure_theory/outer_measure): add extend_eq_top ([#7827](https://github.com/leanprover-community/mathlib/pull/#7827))

### [2021-06-09T15:39:58+00:00](https://github.com/leanprover-community/mathlib/commit/fa7c6da2b56ed715dd40de4c45db718b3512327f)
docs(order/bounded_lattice): add module docstring ([#7799](https://github.com/leanprover-community/mathlib/pull/#7799))

add module docstring and some sectioning

### [2021-06-09T10:12:47+00:00](https://github.com/leanprover-community/mathlib/commit/55abf1a489c2b553c2a02beb77cac1721af7e054)
chore(scripts): update nolints.txt ([#7851](https://github.com/leanprover-community/mathlib/pull/#7851))

I am happy to remove some nolints for you!

### [2021-06-09T10:12:46+00:00](https://github.com/leanprover-community/mathlib/commit/867668510eafbeb66bbb7d4364771f13b7f656b4)
feat(ring_theory): every left-noetherian ring satisfies the strong rank condition ([#7711](https://github.com/leanprover-community/mathlib/pull/#7711))

This PR also discards the proof that every left-noetherian ring satisfies the rank condition, because we already have in [#7683](https://github.com/leanprover-community/mathlib/pull/#7683) that this implies that.




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-06-09T10:12:45+00:00](https://github.com/leanprover-community/mathlib/commit/47ad6800745bbd70d39cf2397909174bae7904f0)
feat(measure_theory/interval_integral): integration by substitution / change of variables ([#7273](https://github.com/leanprover-community/mathlib/pull/#7273))

Given that `f` has a derivative at `f'` everywhere on `interval a b`,
`∫ x in a..b, (g ∘ f) x * f' x = ∫ x in f a..f b, g x`.

Co-authored by @ADedecker

### [2021-06-09T06:11:41+00:00](https://github.com/leanprover-community/mathlib/commit/faa58e51b75077e63df9310fc6848dce09b23c34)
refactor(algebra/module/projective) make is_projective a class ([#7830](https://github.com/leanprover-community/mathlib/pull/#7830))

Make `is_projective` a class.

### [2021-06-09T06:11:39+00:00](https://github.com/leanprover-community/mathlib/commit/c210d0fd8fe658f6e78c3624d581795fcae6ac09)
feat(topology/category/limits): Topological bases in cofiltered limits ([#7820](https://github.com/leanprover-community/mathlib/pull/#7820))

This PR proves a theorem which provides a simple characterization of certain topological bases in a cofiltered limit of topological spaces.

Eventually I will specialize this assertion to the case where the topological spaces are profinite, and the `T i` are the topological bases given by clopen sets.

This generalizes a lemma from LTE.



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2021-06-09T06:11:38+00:00](https://github.com/leanprover-community/mathlib/commit/34c433d92bd7f29ab9d080d9276316605172890c)
feat(data/finsupp): generalize finsupp.has_scalar to require only distrib_mul_action instead of semimodule ([#7819](https://github.com/leanprover-community/mathlib/pull/#7819))

This propagates the generalization to (add_)monoid_algebra and mv_polynomial.

### [2021-06-09T06:11:37+00:00](https://github.com/leanprover-community/mathlib/commit/393f63897a7702aae7889f76613b3b2c588686d3)
feat(ring_theory/localization): Make local_ring_hom more flexible ([#7787](https://github.com/leanprover-community/mathlib/pull/#7787))

Make `localization.local_ring_hom` more flexible, by allowing two ideals `I` and `J` as arguments, with the assumption that `I` equals `ideal.comap f J`. Also add lemmas about identity and composition.

### [2021-06-08T19:13:24+00:00](https://github.com/leanprover-community/mathlib/commit/5c6d3bce456ab11b512861445069ea305a44eeb1)
feat(topology/instances/ereal): more on ereal, notably its topology ([#7765](https://github.com/leanprover-community/mathlib/pull/#7765))

### [2021-06-08T19:13:23+00:00](https://github.com/leanprover-community/mathlib/commit/75c81deef8e52305f7c92726dfcc97a1fd32bb23)
feat(measure_theory/integration): a measurable function is a series of simple functions ([#7764](https://github.com/leanprover-community/mathlib/pull/#7764))

### [2021-06-08T19:13:22+00:00](https://github.com/leanprover-community/mathlib/commit/39406bb948d59f49b5a9c77e20c329d960337bf8)
feat(model_theory/basic): First-order languages, structures, homomorphisms, embeddings, and equivs ([#7754](https://github.com/leanprover-community/mathlib/pull/#7754))

Defines the following notions from first-order logic:
- languages
- structures
- homomorphisms
- embeddings
- equivalences (isomorphisms)
The definitions of languages and structures take inspiration from the Flypitch project.

### [2021-06-08T06:35:33+00:00](https://github.com/leanprover-community/mathlib/commit/42c42370913fb4d64d4f16540efceba37bc70360)
chore(mv_polynomial/equiv): speed up elaboration by adjusting priorities ([#7840](https://github.com/leanprover-community/mathlib/pull/#7840))

`option_equiv_left` timed out several times in bors, since the introduction of non-unital rings. We fix this by adjusting the priority to make sure that the problematic instance is found right away.

Also speed up circumcenter file (which also just timed out in bors) by squeezing simps.

### [2021-06-07T15:40:25+00:00](https://github.com/leanprover-community/mathlib/commit/320da57a5bcae41bf3767055ccbbf70e7118cc1e)
chore(data/fintype/basic): add fintype instance for `is_empty` ([#7692](https://github.com/leanprover-community/mathlib/pull/#7692))



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-06-07T15:40:24+00:00](https://github.com/leanprover-community/mathlib/commit/6e6753663c978f48637a8db5d06f491cd441b9b6)
feat(category/limits): kernel.map ([#7623](https://github.com/leanprover-community/mathlib/pull/#7623))

A generalization of a lemma from LTE, stated for a category with (co)kernels.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-07T15:40:23+00:00](https://github.com/leanprover-community/mathlib/commit/fb72599bd126bd47a70c14c5df09ba76b1de997d)
feat(algebra/periodic): define periodicity ([#7572](https://github.com/leanprover-community/mathlib/pull/#7572))

This PR introduces a general notion of periodicity. It also includes proofs of the "usual" properties of periodic (and antiperiodic) functions.

### [2021-06-07T15:40:22+00:00](https://github.com/leanprover-community/mathlib/commit/e55d470c6bca7c1755d332cd3dbe5b8228f5baa2)
feat(specific_groups/alternating_group): The alternating group on 5 elements is simple ([#7502](https://github.com/leanprover-community/mathlib/pull/#7502))

Shows that `is_simple_group (alternating_group (fin 5))`



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-06-07T15:40:20+00:00](https://github.com/leanprover-community/mathlib/commit/fa7b5f201f72dd12759491931d404cbdfe5f0dce)
feat(linear_algebra/quadratic_form): Complex version of Sylvester's law of inertia ([#7416](https://github.com/leanprover-community/mathlib/pull/#7416))

Every nondegenerate complex quadratic form is equivalent to a quadratic form corresponding to the sum of squares.

### [2021-06-07T15:40:19+00:00](https://github.com/leanprover-community/mathlib/commit/ef7aa94eca031575331120980cdd4b5be7bbedb3)
feat(algebra/ring/basic): define non-unital, non-associative rings ([#6786](https://github.com/leanprover-community/mathlib/pull/#6786))

This introduces the following typeclasses beneath `semiring`:
  * `non_unital_non_assoc_semiring`
  * `non_unital_semiring`
  * `non_assoc_semiring`

The goal is to use these to support a non-unital, non-associative
algebras.

The typeclass requirements of `subring`, `subsemiring`, and `ring_hom` are relaxed from `semiring` to `non_assoc_semiring`.

Instances of these new typeclasses are added for:
* alias types:
  * `opposite`
  * `ulift`
* convolutive types:
  * `(add_)monoid_algebra`
  * `direct_sum`
  * `set_semiring`
  * `hahn_series`
* elementwise types: 
  * `locally_constant`
  * `pi`
  * `prod`
  * `finsupp`



Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-06-07T15:40:18+00:00](https://github.com/leanprover-community/mathlib/commit/1eb3ae425e1d06ece964e936b8273175f44188c3)
feat(order/symm_diff): symmetric difference operator ([#6469](https://github.com/leanprover-community/mathlib/pull/#6469))

### [2021-06-07T07:44:02+00:00](https://github.com/leanprover-community/mathlib/commit/136e0d6869fa8efe5874c4c2a8521e1f5c2ddb2d)
feat(data/fintype/basic): The cardinality of a set is at most the cardinality of the universe ([#7823](https://github.com/leanprover-community/mathlib/pull/#7823))

I think that the hypothesis `[fintype ↥s]` can be avoided with the use of classical logic. E.g.,
`noncomputable instance set_fintype' {α : Type*} [fintype α] (s : set α) : fintype s :=by { classical, exact set_fintype s }`
Would it make sense to add this?



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-06-07T07:44:01+00:00](https://github.com/leanprover-community/mathlib/commit/4f38062c276e0c9e80fcdc65d2e0d6337506d655)
feat(algebra/lie/base_change): define extension and restriction of scalars for Lie algebras ([#7808](https://github.com/leanprover-community/mathlib/pull/#7808))



Co-authored-by: kckennylau <kc_kennylau@yahoo.com.hk>
Co-authored-by: Kenny Lau <kc_kennylau@yahoo.com.hk>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: Oliver Nash <github@olivernash.org>

### [2021-06-07T07:44:00+00:00](https://github.com/leanprover-community/mathlib/commit/f57f9c8b99728cdfa95a0faab97916c5eed83264)
feat(ring_theory): define the field/algebra norm ([#7636](https://github.com/leanprover-community/mathlib/pull/#7636))

This PR defines the field norm `algebra.norm K L : L →* K`, where `L` is a finite field extension of `K`. In fact, it defines this for any `algebra R S` instance, where `R` and `S` are integral domains. (With a default value of `1` if `S` does not have a finite `R`-basis.)

The approach is to basically copy `ring_theory/trace.lean` and replace `trace` with `det` or `norm` as appropriate.

### [2021-06-07T04:52:49+00:00](https://github.com/leanprover-community/mathlib/commit/61ca31a95bdc0890e99c35bf92cfec66c5583822)
chore(scripts): update nolints.txt ([#7829](https://github.com/leanprover-community/mathlib/pull/#7829))

I am happy to remove some nolints for you!

### [2021-06-07T04:52:49+00:00](https://github.com/leanprover-community/mathlib/commit/7a21ae174a69071aed2a7f70c54e9c6dae1c8c58)
chore(algebra/algebra/subalgebra): make inf and top definitionally convenient ([#7812](https://github.com/leanprover-community/mathlib/pull/#7812))

This adjusts the galois insertion such that `lemma coe_inf (S T : subalgebra R A) : (↑(S ⊓ T) : set A) = S ∩ T := rfl`.

It also adds lots of trivial `simp` lemmas that were missing about the interactions of various coercions and lattice operations.

### [2021-06-07T01:12:38+00:00](https://github.com/leanprover-community/mathlib/commit/685289c68487db2a7bfeaf92caf7813e8e336cbd)
feat(algebra/pointwise): pow_mem_pow ([#7822](https://github.com/leanprover-community/mathlib/pull/#7822))

If `a ∈ s` then `a ^ n ∈ s ^ n`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-06-07T01:12:37+00:00](https://github.com/leanprover-community/mathlib/commit/29d0c63db6ecaaf32dc3374dd80431b476265df0)
feat(measure_theory): add a few integration-related lemmas ([#7821](https://github.com/leanprover-community/mathlib/pull/#7821))

These are lemmas I proved while working on [#7164](https://github.com/leanprover-community/mathlib/pull/#7164). Some of them are actually not used anymore in that PR because I'm refactoring it, but I thought they would be useful anyway, so here there are.

### [2021-06-07T01:12:36+00:00](https://github.com/leanprover-community/mathlib/commit/ef7c3350d54482de7373f6acdee096ec5938508b)
fix(data/mv_polynomial): add missing decidable arguments ([#7817](https://github.com/leanprover-community/mathlib/pull/#7817))

This:

* fixes a doubled instance name, `finsupp.finsupp.decidable_eq`. Note the linter deliberate ignores instances, as they are often autogenerated
* generalizes `finsupp.decidable_le` to all canonically_ordered_monoids
* adds missing `decidable_eq` arguments to `mv_polynomial` and `mv_power_series` lemmas whose statement contains an `if`. These might in future be lintable.
* adds some missing lemmas about `mv_polynomial` to clean up a few proofs.

### [2021-06-07T01:12:35+00:00](https://github.com/leanprover-community/mathlib/commit/90ae36ea9bc4ed3f7522b1bf60a3403d968128e5)
docs(order/order_iso_nat): add module docstring ([#7804](https://github.com/leanprover-community/mathlib/pull/#7804))

add module docstring

### [2021-06-06T19:30:18+00:00](https://github.com/leanprover-community/mathlib/commit/4c8a627ba0a2325bfffa62e80ccddfc854bcdd8e)
docs(order/directed): add module docstring ([#7779](https://github.com/leanprover-community/mathlib/pull/#7779))

add module docstring

### [2021-06-06T03:28:07+00:00](https://github.com/leanprover-community/mathlib/commit/e3f897c2d6e7caac3195f56171855b52ca722d8b)
feat(algebra/char_p): characteristic of fraction_ring ([#7703](https://github.com/leanprover-community/mathlib/pull/#7703))

Adding the characteristics of a `fraction_ring` for an integral domain.



Co-authored-by: Jon Eugster <eugster.jon@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-06-06T03:28:06+00:00](https://github.com/leanprover-community/mathlib/commit/ba2c0563da31dae1a6467876a8672bda921e56bf)
feat(data/list/nodup): nodup.pairwise_of_forall_ne ([#7587](https://github.com/leanprover-community/mathlib/pull/#7587))

### [2021-06-05T09:09:15+00:00](https://github.com/leanprover-community/mathlib/commit/7021ff9bd65b3cb29987d31e0ab76273135435ad)
feat(linear_algebra/basis): use is_empty instead of ¬nonempty ([#7815](https://github.com/leanprover-community/mathlib/pull/#7815))

This removes the need for `basis.of_dim_eq_zero'` and `basis_of_finrank_zero'`, as these special cases are now covered by the unprimed versions and typeclass search.

### [2021-06-04T19:29:36+00:00](https://github.com/leanprover-community/mathlib/commit/a4ae4adbd4c3e50bf711d3d1f1c151adbdac1788)
chore(order/(bounded,modular)_lattice): avoid classical.some in `is_complemented` instances ([#7814](https://github.com/leanprover-community/mathlib/pull/#7814))

There's no reason to use it here.

### [2021-06-04T19:29:35+00:00](https://github.com/leanprover-community/mathlib/commit/8b5ff9ce8e9700475f3013fd56985a49b68ec3e2)
feat(analysis/special_functions/integrals): `integral_log` ([#7732](https://github.com/leanprover-community/mathlib/pull/#7732))

The integral of the (real) logarithmic function over the interval `[a, b]`, provided that `0 ∉ interval a b`.

### [2021-06-04T16:08:36+00:00](https://github.com/leanprover-community/mathlib/commit/0b098585c018e5a5fd9af83e26f085ec92bf121d)
feat(linear_algebra/basic): add a unique instance for linear_equiv ([#7816](https://github.com/leanprover-community/mathlib/pull/#7816))

### [2021-06-04T13:25:42+00:00](https://github.com/leanprover-community/mathlib/commit/65e3b0490224ad34a3c1c82edfa6db0be608fcb2)
feat(linear_algebra/determinant): various `basis.det` lemmas ([#7669](https://github.com/leanprover-community/mathlib/pull/#7669))

A selection of results that I needed for computing the value of `basis.det`.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-06-04T09:53:02+00:00](https://github.com/leanprover-community/mathlib/commit/1a62bb4c4ab8058b54834b736bbe530e3cf630c6)
feat(linear_algebra): strong rank condition implies rank condition ([#7683](https://github.com/leanprover-community/mathlib/pull/#7683))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-06-04T03:56:15+00:00](https://github.com/leanprover-community/mathlib/commit/be183e26fdcb2bc3315cd7e1429421dc441c6d8d)
chore(data/finset|multiset|finsupp): reduce algebra/ imports ([#7797](https://github.com/leanprover-community/mathlib/pull/#7797))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-06-03T23:23:09+00:00](https://github.com/leanprover-community/mathlib/commit/89928bc0d44f82f3b5546632c46ee495ee3389b1)
feat(topology): A locally compact Hausdorff space is totally disconnected if and only if it is totally separated ([#7649](https://github.com/leanprover-community/mathlib/pull/#7649))

We prove that a locally compact Hausdorff space is totally disconnected if and only if it is totally separated.

### [2021-06-03T16:15:32+00:00](https://github.com/leanprover-community/mathlib/commit/685adb01d7a06c7b591c90d09995077ba3d90760)
fix(tactic/lint): allow pattern def ([#7785](https://github.com/leanprover-community/mathlib/pull/#7785))


`Prop` sorted declarations are allowed to be `def` if they have the `@[pattern]` attribute

### [2021-06-03T16:15:31+00:00](https://github.com/leanprover-community/mathlib/commit/fa51468709c7629099c30169cbc33fbf83173546)
feat(tactic/lift): elaborate proof with the expected type ([#7739](https://github.com/leanprover-community/mathlib/pull/#7739))

* also slightly refactor the corresponding function a bit
* add some tests
* move all tests to `tests/lift.lean`

### [2021-06-03T16:15:30+00:00](https://github.com/leanprover-community/mathlib/commit/05f7e8dc33bd84c3bd245781140257399beed161)
feat(linear_algebra/tensor_product): define `tensor_tensor_tensor_comm` ([#7724](https://github.com/leanprover-community/mathlib/pull/#7724))

The intended application is defining the bracket structure when extending the scalars of a Lie algebra.

### [2021-06-03T11:07:26+00:00](https://github.com/leanprover-community/mathlib/commit/62655a235665645cd299e2f6ec3ebb1cb5e4b5df)
chore(data/dfinsupp): add the simp lemma coe_pre_mk ([#7806](https://github.com/leanprover-community/mathlib/pull/#7806))

### [2021-06-03T11:07:25+00:00](https://github.com/leanprover-community/mathlib/commit/2a93644a2df19713a56db7abf39410bc9eacb781)
chore(src/linear_algebra/free_module): rename file to free_module_pid ([#7805](https://github.com/leanprover-community/mathlib/pull/#7805))

In preparation for [#7801](https://github.com/leanprover-community/mathlib/pull/#7801)

### [2021-06-03T11:07:24+00:00](https://github.com/leanprover-community/mathlib/commit/fc6f96735da1e0daae92b1d076c4e965f4b4ca2a)
chore(ring_theory/hahn_series): emb_domain_add needs only add_monoid, not semiring ([#7802](https://github.com/leanprover-community/mathlib/pull/#7802))

This is my fault, the lemma ended up in the wrong place in [#7737](https://github.com/leanprover-community/mathlib/pull/#7737)

### [2021-06-03T11:07:23+00:00](https://github.com/leanprover-community/mathlib/commit/54d8b94e1b19c1ca217d4d1342516cee6f9f5114)
chore(logic/basic): add simp lemmas about exist_unique to match those about exists ([#7784](https://github.com/leanprover-community/mathlib/pull/#7784))

Adds:

* `exists_unique_const` to match `exists_const` (provable by simp)
* `exists_unique_prop` to match `exists_prop` (provable by simp)
* `exists_unique_prop_of_true` to match `exists_prop_of_true`

### [2021-06-03T11:07:21+00:00](https://github.com/leanprover-community/mathlib/commit/ef1393836f6ce62015eda56a720e4823acbb361b)
feat(ring_theory/tensor_product): the base change of a linear map along an algebra ([#4773](https://github.com/leanprover-community/mathlib/pull/#4773))



Co-authored-by: kckennylau <kc_kennylau@yahoo.com.hk>
Co-authored-by: Kenny Lau <kc_kennylau@yahoo.com.hk>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: Oliver Nash <github@olivernash.org>

### [2021-06-03T07:38:39+00:00](https://github.com/leanprover-community/mathlib/commit/b806fd438d1e4dd924d845930e2cc97b803989b4)
chore(scripts): update nolints.txt ([#7810](https://github.com/leanprover-community/mathlib/pull/#7810))

I am happy to remove some nolints for you!

### [2021-06-03T07:38:38+00:00](https://github.com/leanprover-community/mathlib/commit/36decf5a6668480930217ed5e70d70ce0e8f47d4)
chore(topology/bases): Rename + unprotect some lemmas ([#7809](https://github.com/leanprover-community/mathlib/pull/#7809))

@PatrickMassot Unfortunately I saw your comments after [#7753](https://github.com/leanprover-community/mathlib/pull/#7753) was already merged, so here is a followup PR with the changes you requested. I also unprotected and renamed `is_topological_basis_pi` and `is_topological_basis_infi` since dot notation will also not work for those.

### [2021-06-03T07:38:37+00:00](https://github.com/leanprover-community/mathlib/commit/8422d8c7ca667c309b43ee601acb8c5878aceaba)
chore(data/padics): move padics to number_theory/ ([#7771](https://github.com/leanprover-community/mathlib/pull/#7771))

Per [zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/move.20p-adics).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-03T07:38:36+00:00](https://github.com/leanprover-community/mathlib/commit/adae1adf0ddb90d4340cb4ddb558885b86f018f9)
feat(order/filter/archimedean): in an archimedean linear ordered ring, `at_top` and `at_bot` are countably generated ([#7751](https://github.com/leanprover-community/mathlib/pull/#7751))

### [2021-06-03T07:38:35+00:00](https://github.com/leanprover-community/mathlib/commit/6d85ff2350165a498a11ef9180dcb080a35850d9)
refactor(linear_algebra/finsupp): replace mem_span_iff_total ([#7735](https://github.com/leanprover-community/mathlib/pull/#7735))

This PR renames the existing `mem_span_iff_total` to `mem_span_image_iff_total` and the existing `span_eq_map_total` to `span_image_eq_map_total`, and replaces them with slightly simpler lemmas about sets in the module, rather than indexed families.

As usual in the linear algebra library, there is tension between using sets and using indexed families, but as `span` is defined in terms of sets I think the new lemmas merit taking the simpler names.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-03T07:38:33+00:00](https://github.com/leanprover-community/mathlib/commit/6d90d35f7d6ace5aa3d10b43644a64b94865e3fe)
feat(analysis/fourier): monomials on the circle are orthonormal ([#6952](https://github.com/leanprover-community/mathlib/pull/#6952))

Make the circle into a measure space, using Haar measure, and prove that the monomials `z ^ n` are orthonormal when considered as elements of L^2 on the circle.

### [2021-06-03T04:58:21+00:00](https://github.com/leanprover-community/mathlib/commit/4b312472f34c5a8c9e3f31536948c4ecbcf0e209)
chore(data/*/gcd): move data/*set/gcd to algebra/gcd_monoid/ ([#7800](https://github.com/leanprover-community/mathlib/pull/#7800))

See discussion of migrating content from `data/` to `algebra/` at [https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/move.20p-adics](zulip).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-03T04:58:20+00:00](https://github.com/leanprover-community/mathlib/commit/e59154361202a34b26176e0de9267ef8e2dcd446)
chore(data/zsqrtd): move to number_theory/ ([#7796](https://github.com/leanprover-community/mathlib/pull/#7796))

See discussion of migrating content from `data/` to `algebra/` at [https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/move.20p-adics](zulip).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-03T04:58:19+00:00](https://github.com/leanprover-community/mathlib/commit/ce3ca59681f3728a3b2ef33ef74975b192ebf158)
chore(data/fincard): move to set_theory/ ([#7795](https://github.com/leanprover-community/mathlib/pull/#7795))

This is about cardinals, so probably belongs in `set_theory/` not `data/`. (It's also a leaf node for now, so easy to move.)

### [2021-06-02T23:53:40+00:00](https://github.com/leanprover-community/mathlib/commit/d5a635bed76a4ed11c5caa53cb87d951f815dfb8)
chore(data/hash_map): remove duplicate imports ([#7794](https://github.com/leanprover-community/mathlib/pull/#7794))

### [2021-06-02T23:53:39+00:00](https://github.com/leanprover-community/mathlib/commit/a36560c2bf6871cf4040c5bb06214b9a986a049b)
chore(data/quaternion): move to algebra/ ([#7793](https://github.com/leanprover-community/mathlib/pull/#7793))

See discussion of migrating content from `data/` to `algebra/` at [https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/move.20p-adics](zulip).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-02T23:53:38+00:00](https://github.com/leanprover-community/mathlib/commit/7e3e883473527f7ffb393f20cf66c470b5941711)
chore(data/equiv): add docstrings ([#7704](https://github.com/leanprover-community/mathlib/pull/#7704))

- add module docstrings
- add def docstrings
- rename `decode2` to `decode₂`
- squash some simps

### [2021-06-02T23:53:37+00:00](https://github.com/leanprover-community/mathlib/commit/29d0a4e63db6550eb6782f08c474a3296a3ecace)
feat(tactic/lint): add linter that type-checks statements  ([#7694](https://github.com/leanprover-community/mathlib/pull/#7694))

* Add linter that type-checks the statements of all declarations with the default reducibility settings. A statement might not type-check if locally a declaration was made not `@[irreducible]` while globally it is.
* Fix an issue where  `with_one.monoid.to_mul_one_class` did not unify with `with_one.mul_one_class`.
* Fix some proofs in `category_theory.opposites` so that they work while keeping `quiver.opposite` irreducible.

### [2021-06-02T18:23:20+00:00](https://github.com/leanprover-community/mathlib/commit/6e5899ddad9855e54f9d340493b31b92ae5b0084)
feat(measure_theory/integration): add a version of the monotone convergence theorem using `tendsto` ([#7791](https://github.com/leanprover-community/mathlib/pull/#7791))

### [2021-06-02T18:23:19+00:00](https://github.com/leanprover-community/mathlib/commit/82bc3ca6c18cc8246b125283c64c4817c94b12be)
chore(logic/small): reduce imports ([#7777](https://github.com/leanprover-community/mathlib/pull/#7777))

By delaying the `fintype` and `encodable` instances for `small`, I think we can now avoid importing `algebra` at all into `logic`.

~~Since some of the `is_empty` lemmas haven't been used yet,~~ I took the liberty of making some arguments explicit, as one was painful to use as is. 



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-02T18:23:18+00:00](https://github.com/leanprover-community/mathlib/commit/47dbdaca8e9a6c2bd38b41e6e54018822b92f07a)
chore(data/support): move data/(support|indicator_function) to algebra/ ([#7774](https://github.com/leanprover-community/mathlib/pull/#7774))

These don't define any new structures, have not much to do with programming, and are just about basic features of algebraic gadgets, so belong better in `algebra/` than `data/`. 

See discussion of migrating content from `data/` to `algebra/` at [https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/move.20p-adics](zulip).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-02T13:27:48+00:00](https://github.com/leanprover-community/mathlib/commit/173bc4c2cc8e945cb9187b37d7863fc4588af784)
feat(algebra/algebra/subalgebra): add subalgebra.prod ([#7782](https://github.com/leanprover-community/mathlib/pull/#7782))

We add a basic API for product of subalgebras.

### [2021-06-02T10:33:05+00:00](https://github.com/leanprover-community/mathlib/commit/b231c92364b172067b00157c5f54ab3a860d6f49)
doc(data/finsupp/pointwise): update old module doc ([#7770](https://github.com/leanprover-community/mathlib/pull/#7770))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-02T10:33:04+00:00](https://github.com/leanprover-community/mathlib/commit/b91cdb919f73e2415af37c2086814aaa9dfdb5cf)
refactor(data/nnreal): rename nnreal.of_real to real.to_nnreal ([#7750](https://github.com/leanprover-community/mathlib/pull/#7750))

I am in the middle of a project involving reals, nnreals, ennreals and ereals. There is a maze of coercions and maps between the 4 of them, with completely incoherent naming scheme (do you think that `measurable.nnreal_coe` is speaking of the coercion from `nnreal` to `real` or to `ennreal`, or of a coercion into `nnreal`? currently, it's for the coercion from `nnreal` to `real`, and the analogous lemma for the coercion from `nnreal` to `ennreal` is called `measurable.ennreal_coe`!). I'd like to normalize all this to have something coherent:

* maps are defined from a type to another one, to be able to use dot notation.
* when there are coercions, all lemmas should be formulated in terms of the coercion, and not of the explicit map
* when there is an ambiguity, lemmas on coercions should mention both the source and the target (like in `measurable.coe_nnreal_real`, say). 

The PR is one first step in this direction, renaming `nnreal.of_real` to `real.to_nnreal` (which makes it possible to use dot notation).

### [2021-06-02T04:57:08+00:00](https://github.com/leanprover-community/mathlib/commit/832aff84d067ca6dafc1ad302cf05aa73eaf0fd5)
chore(scripts): update nolints.txt ([#7798](https://github.com/leanprover-community/mathlib/pull/#7798))

I am happy to remove some nolints for you!

### [2021-06-02T04:57:06+00:00](https://github.com/leanprover-community/mathlib/commit/cdf6cf0f7e8a315cef6cb4a65fe65f5b392a0e58)
feat(topology/sheaves/stalks): Small lemmas about stalk pushforward and stalk map ([#7789](https://github.com/leanprover-community/mathlib/pull/#7789))

`Top.presheaf.stalk_pushforward` and `PresheafedSpace.stalk_map` commute with `Top.presheaf.germ`.

### [2021-06-02T04:57:05+00:00](https://github.com/leanprover-community/mathlib/commit/216410756a183ba38eecc0dbe3fa596b60cfdf98)
refactor(algebraic_geometry/structure_sheaf): Rename Spec.Top to prime_spectrum.Top ([#7786](https://github.com/leanprover-community/mathlib/pull/#7786))

Renames `Spec.Top` to `prime_specturm.Top` to free up the namespace for the Spec functor.

### [2021-06-02T04:57:04+00:00](https://github.com/leanprover-community/mathlib/commit/2fd0ff48f149b2e21d4fcbc956c64a28f3d1595e)
chore(order/omega_complete_partial_order): clean up references ([#7781](https://github.com/leanprover-community/mathlib/pull/#7781))

fix the references rendering by adding them to the .bib

### [2021-06-02T04:57:03+00:00](https://github.com/leanprover-community/mathlib/commit/5a42f8082af4720aa7bf8990a3ddd97f7d517b76)
chore(logic/embedding): move some algebra content ([#7776](https://github.com/leanprover-community/mathlib/pull/#7776))

This moves a lemma about multiplication by an element in a left/right cancellative semigroup being an embedding out of `logic.embedding`. I didn't find a great home for it, but put it with some content about regular elements, which is at least talking about similar mathematics.

This removes the only direct import from the `logic/` directory to the `algebra/` directory. There are still indirect imports from `logic.small`, which currently brings in `fintype` and hence the whole algebra hierarchy. I'll look at that separately.

### [2021-06-02T04:57:02+00:00](https://github.com/leanprover-community/mathlib/commit/6c912dec5d5f5afe6f48b2fafd82785a462f8934)
feat(topology/bases): Topological basis of a product. ([#7753](https://github.com/leanprover-community/mathlib/pull/#7753))

Given a family of topological spaces `X_i` with topological bases `T_i`, this constructs the associated basis of the product topology. 

This also includes a construction of the tautological topological basis consisting of all open sets.

This generalizes a lemma from LTE.

### [2021-06-02T04:57:00+00:00](https://github.com/leanprover-community/mathlib/commit/4884ea53c51696610e4824ea8f5614f4892930af)
feat(order/[conditionally_]complete_lattice): add more intro lemmas for [c][Sup, Inf] and [c][supr, infi] ([#7730](https://github.com/leanprover-community/mathlib/pull/#7730))

### [2021-06-02T04:56:59+00:00](https://github.com/leanprover-community/mathlib/commit/6b2c7a75c46b9048a07f9ac3dbe73ddfe0cc60db)
feat(data/finset/noncomm_prod): finset products over monoid ([#7567](https://github.com/leanprover-community/mathlib/pull/#7567))

The regular `finset.prod` and `multiset.prod` require `[comm_monoid α]`.
Often, there are collections `s : finset α` where `[monoid α]` and we know,
in a dependent fashion, that for all the terms `∀ (x ∈ s) (y ∈ s), commute x y`.
This allows to still have a well-defined product over `s`.

### [2021-06-01T23:18:36+00:00](https://github.com/leanprover-community/mathlib/commit/681b9c29bed9357ce54132ce06609f00ac0716e4)
feat(ring_theory/adjoin/basic): add missing lemmas ([#7780](https://github.com/leanprover-community/mathlib/pull/#7780))

Two missing lemmas about `adjoin`.

These are the `subalgebra` versions of `submodule.span_eq_of_le` and `submodule.span_eq`.

### [2021-06-01T23:18:35+00:00](https://github.com/leanprover-community/mathlib/commit/76f41e7e6a6f815eed6993d9f48d8d58c83d98f0)
chore(data/nat): split out data/nat/pow ([#7758](https://github.com/leanprover-community/mathlib/pull/#7758))

Split lemmas about the power operation on natural numbers into its own file; slightly reduces imports.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-01T23:18:35+00:00](https://github.com/leanprover-community/mathlib/commit/2689c51700cd9191c72fdc4eeaf54776f67f355d)
feat(category_theory/abelian): abelian categories with enough projectives have projective resolutions ([#7488](https://github.com/leanprover-community/mathlib/pull/#7488))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-06-01T20:17:20+00:00](https://github.com/leanprover-community/mathlib/commit/4e7c6b2787ec32c6f533460f30586df9851e6758)
chore(algebra/associated): weaken some typeclass assumptions ([#7760](https://github.com/leanprover-community/mathlib/pull/#7760))

Also golf ne_zero_iff_of_associated a little.

### [2021-06-01T15:40:08+00:00](https://github.com/leanprover-community/mathlib/commit/8527efd1d6c5c2223baf22799f0752396bccc483)
feat(topology/connected): prod.totally_disconnected_space ([#7747](https://github.com/leanprover-community/mathlib/pull/#7747))

From LTE.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-01T15:40:07+00:00](https://github.com/leanprover-community/mathlib/commit/abe146f7fc5a09093c6ec1c8920dcbf0c8a946da)
feat(linear_map): to_*_linear_map_injective ([#7746](https://github.com/leanprover-community/mathlib/pull/#7746))

From LTE.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-01T12:28:58+00:00](https://github.com/leanprover-community/mathlib/commit/88685b0335adea957e4893434d8e6c136f78ea6f)
feat(linear_algebra/tensor_product): Add is_scalar_tower instances ([#6741](https://github.com/leanprover-community/mathlib/pull/#6741))

If either the left- or right-hand type of a tensor product forms a scalar tower, then the tensor product forms the same tower.

### [2021-06-01T05:20:12+00:00](https://github.com/leanprover-community/mathlib/commit/31ba155fbe0f78c7091df64fe087418203f964a0)
feat(algebraic_topology/cech_nerve): The Cech nerve is a right adjoint. ([#7716](https://github.com/leanprover-community/mathlib/pull/#7716))

Also fixes the namespace in the file `algebraic_topology/cech_nerve.lean`.

This is needed for LTE



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-06-01T03:25:51+00:00](https://github.com/leanprover-community/mathlib/commit/272a930a1d70d76436c193638b5959af6fc0510b)
chore(scripts): update nolints.txt ([#7775](https://github.com/leanprover-community/mathlib/pull/#7775))

I am happy to remove some nolints for you!

### [2021-06-01T01:52:24+00:00](https://github.com/leanprover-community/mathlib/commit/4c2bfdebf9bf7e154fdce614dc03b88f8661c48d)
chore(order/pilex): add docstring ([#7769](https://github.com/leanprover-community/mathlib/pull/#7769))

- add module docstring
- extend `ordered_add_comm_group (pilex ι β)` using `to_additive`

### [2021-06-01T01:52:23+00:00](https://github.com/leanprover-community/mathlib/commit/a8f5cc1978e0e20c5016410b89a487a985bb2a6e)
feat(algebra/homology): i-th component of a chain map as a →+ ([#7743](https://github.com/leanprover-community/mathlib/pull/#7743))

From LTE.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-31T21:08:06+00:00](https://github.com/leanprover-community/mathlib/commit/bec3e5958582486699c8e61000cde5fff4807183)
feat(data/finset): provide the coercion `finset α → Type*` ([#7575](https://github.com/leanprover-community/mathlib/pull/#7575))

There doesn't seem to be a good reason that `finset` doesn't have a `coe_to_sort` like `set` does. Before the change in this PR, we had to suffer the inconvenience of writing `(↑s : set _)` whenever we want the subtype of all elements of `s`. Now you can just write `s`.

I removed the obvious instances of the `((↑s : set _) : Type*)` pattern, although it definitely remains in some places. I'd rather do those in separate PRs since it does not really do any harm except for being annoying to type. There are also some parts of the API (`polynomial.root_set` stands out to me) that could be designed around the use of `finset`s rather than `set`s that are later proved to be finite, which I again would like to declare out of scope.

### [2021-05-31T21:08:05+00:00](https://github.com/leanprover-community/mathlib/commit/ca740b64f937614ba8ae52ff63187c019950e345)
feat(data/finset/powerset): ssubsets and decidability ([#7543](https://github.com/leanprover-community/mathlib/pull/#7543))

A few more little additions to finset-world that I found useful.



Co-authored-by: Scott Morrison <scott@tqft.net>

### [2021-05-31T17:20:15+00:00](https://github.com/leanprover-community/mathlib/commit/d27234326a3d63b43e097ac5b7e74839585217c3)
chore(order/lexicographic): add module docstring ([#7768](https://github.com/leanprover-community/mathlib/pull/#7768))

add module docstring

### [2021-05-31T17:20:14+00:00](https://github.com/leanprover-community/mathlib/commit/033a131a8d90e4389d47955719ed995bb2931e88)
chore(order/zorn): add module docstring ([#7767](https://github.com/leanprover-community/mathlib/pull/#7767))

add module docstring, tidy up notation a bit

### [2021-05-31T15:49:23+00:00](https://github.com/leanprover-community/mathlib/commit/d0ebc8ef8d338925b96a016181027f31eea7da85)
feat(ring_theory/laurent_series): Defines Laurent series and their localization map ([#7604](https://github.com/leanprover-community/mathlib/pull/#7604))

Defines `laurent_series` as an abbreviation of `hahn_series Z`
Defines `laurent_series.power_series_part`
Shows that the map from power series to Laurent series is a `localization_map`.

### [2021-05-31T14:35:07+00:00](https://github.com/leanprover-community/mathlib/commit/4555798cd1c5b5da6d0029991a96b87f44799177)
feat(topology/semicontinuous): semicontinuity of compositions ([#7763](https://github.com/leanprover-community/mathlib/pull/#7763))

### [2021-05-31T13:18:14+00:00](https://github.com/leanprover-community/mathlib/commit/2af6912728971cbde73ec67866688a38cbd3ce59)
feat(linear_algebra): the determinant of an endomorphism ([#7635](https://github.com/leanprover-community/mathlib/pull/#7635))

 `linear_map.det` is the determinant of an endomorphism, which is defined independent of a basis. If there is no finite basis, the determinant is defined to be equal to `1`.

This approach is inspired by `linear_map.trace`.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-05-31T13:18:13+00:00](https://github.com/leanprover-community/mathlib/commit/7fe456d88c66c46528365407c4501f7186b55fba)
feat(algebra/homology): projective resolutions ([#7486](https://github.com/leanprover-community/mathlib/pull/#7486))

# Projective resolutions

A projective resolution `P : ProjectiveResolution Z` of an object `Z : C` consists of
a `ℕ`-indexed chain complex `P.complex` of projective objects,
along with a chain map `P.π` from `C` to the chain complex consisting just of `Z` in degree zero,
so that the augmented chain complex is exact.

When `C` is abelian, this exactness condition is equivalent to `π` being a quasi-isomorphism.
It turns out that this formulation allows us to set up the basic theory derived functors
without even assuming `C` is abelian.

(Typically, however, to show `has_projective_resolutions C`
one will assume `enough_projectives C` and `abelian C`.
This construction appears in `category_theory.abelian.projectives`.)

We show that give `P : ProjectiveResolution X` and `Q : ProjectiveResolution Y`,
any morphism `X ⟶ Y` admits a lift to a chain map `P.complex ⟶ Q.complex`.
(It is a lift in the sense that
the projection maps `P.π` and `Q.π` intertwine the lift and the original morphism.)

Moreover, we show that any two such lifts are homotopic.

As a consequence, if every object admits a projective resolution,
we can construct a functor `projective_resolutions C : C ⥤ homotopy_category C`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-05-31T06:45:22+00:00](https://github.com/leanprover-community/mathlib/commit/1a92c0dea9368c951b61f113210d271b14011a84)
feat(order/basic): add simp attribute on le_refl, zero_le_one and zero_lt_one ([#7733](https://github.com/leanprover-community/mathlib/pull/#7733))

These ones show up so often that they would have deserved a simp attribute long ago.

### [2021-05-30T21:09:58+00:00](https://github.com/leanprover-community/mathlib/commit/fd48ac55697cadbf777009e95b963aa142310a84)
chore(data/list): extract sublists to a separate file ([#7757](https://github.com/leanprover-community/mathlib/pull/#7757))

Minor splitting in `data/list/basic`, splitting out `sublists` to its own file, thereby delaying importing `data.nat.choose` in the `list` development.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-30T21:09:57+00:00](https://github.com/leanprover-community/mathlib/commit/14b597c307bcf6d1878c3bdbe4c56be81b239e23)
feat(analysis/normed_space): ∥n • a∥ ≤ n * ∥a∥ ([#7745](https://github.com/leanprover-community/mathlib/pull/#7745))

From LTE.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-30T19:15:46+00:00](https://github.com/leanprover-community/mathlib/commit/0d842f08274db1728cea2ef2761cfe92c8249ff3)
fix(order/closure): unincorporated reviewer comments from [#7446](https://github.com/leanprover-community/mathlib/pull/#7446) ([#7761](https://github.com/leanprover-community/mathlib/pull/#7761))

### [2021-05-30T15:26:33+00:00](https://github.com/leanprover-community/mathlib/commit/33d803aa2f5a1023012f6b7db76d3a871eb8c0f8)
refactor(convex/basic): make convex_hull into a closure operator ([#7446](https://github.com/leanprover-community/mathlib/pull/#7446))

Bundle convex_hull as a closure operator, simplify duplicate proofs

### [2021-05-30T09:54:50+00:00](https://github.com/leanprover-community/mathlib/commit/25e36bea96fcbc0464a0bd00cdfc9d253ead0140)
chore(data/fintype/basic): `fintype α/β` from `fintype α ⊕ β` ([#7736](https://github.com/leanprover-community/mathlib/pull/#7736))

Also renaming the equivalent `α × β` versions, for consistency.



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-05-30T09:54:50+00:00](https://github.com/leanprover-community/mathlib/commit/4ea253b725f8817dcbce34ffb77c49855dc168c5)
feat(measure_theory/integration): in a sigma finite space, there exists an integrable positive function ([#7721](https://github.com/leanprover-community/mathlib/pull/#7721))

### [2021-05-30T08:29:40+00:00](https://github.com/leanprover-community/mathlib/commit/8e25bb6c1645bb80670e13848b79a54aa45cb84f)
feat(algebra/homology): complexes in functor categories ([#7744](https://github.com/leanprover-community/mathlib/pull/#7744))

From LTE.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-30T08:29:39+00:00](https://github.com/leanprover-community/mathlib/commit/f4d145ee7265eca225f71732196d8dad4493361b)
feat(algebra/homology): construct isomorphisms of complexes ([#7741](https://github.com/leanprover-community/mathlib/pull/#7741))

From LTE. 



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-30T08:29:38+00:00](https://github.com/leanprover-community/mathlib/commit/08bb11258da2cc0284e917bdf3040bd4de355714)
chore(ring_theory/hahn_series): extract lemmas from slow definitions ([#7737](https://github.com/leanprover-community/mathlib/pull/#7737))

This doesn't make them much faster, but it makes it easier to tell which bits are slow

### [2021-05-30T04:33:33+00:00](https://github.com/leanprover-community/mathlib/commit/e2168e5504194299ae8b46635e9645995983f3b8)
feat(src/ring_theory/derivation): merge duplicates `derivation.comp` and `linear_map.comp_der` ([#7727](https://github.com/leanprover-community/mathlib/pull/#7727))

I propose keeping the version introduced in [#7715](https://github.com/leanprover-community/mathlib/pull/#7715) since it also contains
the statement that the push forward is linear, but moving it to the `linear_map`
namespace to enable dot notation.

Thanks to @Nicknamen for alerting me to the duplication: https://github.com/leanprover-community/mathlib/pull/7715#issuecomment-849192370

### [2021-05-30T04:33:32+00:00](https://github.com/leanprover-community/mathlib/commit/9d63c388d16f5ee0241005747cbe52d2b31bf487)
feat(topology/continuous_function/algebra): add `coe_fn_(linear_map|ring_hom|alg_hom)` ([#7720](https://github.com/leanprover-community/mathlib/pull/#7720))

### [2021-05-30T01:16:52+00:00](https://github.com/leanprover-community/mathlib/commit/a3ba4d47da0dbb933d519d21a45cd68bc821c8dc)
feat(algebra/homology): eval and forget functors ([#7742](https://github.com/leanprover-community/mathlib/pull/#7742))

From LTE.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-29T18:15:17+00:00](https://github.com/leanprover-community/mathlib/commit/035aa60b807d9c37b8067205174824dbb52fef78)
feat(analysis/normed_space): SemiNormedGroup.has_zero_object ([#7740](https://github.com/leanprover-community/mathlib/pull/#7740))

From LTE.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-29T02:32:43+00:00](https://github.com/leanprover-community/mathlib/commit/1ac49b0ed3076a3a2343bbcb87d4e239b15c26c8)
chore(category_theory): dualize filtered categories to cofiltered categories ([#7731](https://github.com/leanprover-community/mathlib/pull/#7731))

Per request on [zulip](https://leanprover.zulipchat.com/#narrow/stream/267928-condensed-mathematics/topic/status.20update/near/240548989).

I have not attempted to dualize "filtered colimits commute with finite limits", as I've never heard of that being used.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-28T19:12:47+00:00](https://github.com/leanprover-community/mathlib/commit/f74a3753f470fc290f87400a78b494044fd2300b)
chore(linear_algebra/finsupp): remove useless lemma ([#7734](https://github.com/leanprover-community/mathlib/pull/#7734))

The lemma is not used in mathlib, it's mathematically useless (you'd never have a surjective function from an indexing set to a module), and it's badly named, so I propose removing it entirely.




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-28T15:21:27+00:00](https://github.com/leanprover-community/mathlib/commit/13746fe06a0b995e548e98636d8983759a9b13e5)
feat(group_theory/subgroup linear_algebra/prod): add ker_prod_map ([#7729](https://github.com/leanprover-community/mathlib/pull/#7729))

The kernel of the product of two `group_hom` is the product of the kernels (and similarly for monoids).

### [2021-05-28T11:55:01+00:00](https://github.com/leanprover-community/mathlib/commit/5fff3b19568dd6d76a398f5e8c66e24ba3152e10)
feat(ring_theory/mv_polynomial/basic): add polynomial.basis_monomials ([#7728](https://github.com/leanprover-community/mathlib/pull/#7728))

We add `polynomial.basis_monomials` : the monomials form a basis on `polynomial R`.

Because of the structure of the import, it seems to me a little complicated to do it directly, so I use `mv_polynomial.punit_alg_equiv`

### [2021-05-27T09:01:17+00:00](https://github.com/leanprover-community/mathlib/commit/5360e476391508e092b5a1e5210bd0ed22dc0755)
feat(algebra/module/linear_map): `linear_(map|equiv).restrict_scalars` is injective ([#7725](https://github.com/leanprover-community/mathlib/pull/#7725))

So as not to repeat them for the lemmas, I moved the typeclasses into a `variables` statement.

### [2021-05-27T05:47:47+00:00](https://github.com/leanprover-community/mathlib/commit/610955826b3be3caaab5170fef04ecd5458521bf)
chore(category_theory/*): provide aliases quiver.hom.le and has_le.le.hom ([#7677](https://github.com/leanprover-community/mathlib/pull/#7677))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-27T00:46:29+00:00](https://github.com/leanprover-community/mathlib/commit/a85fbdaed80c3d086acf3a0c6276e12829d977d2)
feat(algebra/opposites): add units.op_equiv ([#7723](https://github.com/leanprover-community/mathlib/pull/#7723))

### [2021-05-27T00:46:28+00:00](https://github.com/leanprover-community/mathlib/commit/20291d00a3e9566f4679b2778032370cbbe854dd)
feat(topology/semicontinuous): basics on lower and upper semicontinuous functions ([#7693](https://github.com/leanprover-community/mathlib/pull/#7693))

We mimick the interface for continuity, by introducing predicates `lower_semicontinuous_within_at`, `lower_semicontinuous_at`, `lower_semicontinuous_on` and `lower_semicontinuous` (and similarly for upper semicontinuity).

### [2021-05-26T21:50:17+00:00](https://github.com/leanprover-community/mathlib/commit/0970fda695b19e9647d6430330c6ad34f18d68c0)
feat(measure_theory/regular): more material on regular measures ([#7680](https://github.com/leanprover-community/mathlib/pull/#7680))

This PR:
* defines weakly regular measures
* shows that for weakly regular measures any finite measure set can be approximated from inside by closed sets
* shows that for regular measures any finite measure set can be approximated from inside by compact sets
* shows that any finite measure on a metric space is weakly regular
* shows that any locally finite measure on a sigma compact locally compact metric space is regular

### [2021-05-26T21:50:16+00:00](https://github.com/leanprover-community/mathlib/commit/a2e8b3c52fafe20b62e457fc29ffbc046935faea)
feat(special_functions/polynomials): Generalize some polynomial asymptotics to iff statements. ([#7545](https://github.com/leanprover-community/mathlib/pull/#7545))

### [2021-05-26T19:17:45+00:00](https://github.com/leanprover-community/mathlib/commit/fd43ce0b6b7c3c2a4073554c328e7a7d5adf25d1)
feat(linear_algebra/matrix): generalize `basis.to_matrix_mul_to_matrix` ([#7670](https://github.com/leanprover-community/mathlib/pull/#7670))

Now the second family of vectors does not have to form a basis.

### [2021-05-26T13:34:28+00:00](https://github.com/leanprover-community/mathlib/commit/fa27c0c00aeb19ff6f3df515377b170fddd7d428)
feat(ring_theory/derivation): define push forward of derivations ([#7715](https://github.com/leanprover-community/mathlib/pull/#7715))

### [2021-05-26T13:34:27+00:00](https://github.com/leanprover-community/mathlib/commit/b059708f737a46b42cbaa23d10508de1ea0a0769)
feat(data/nnreal): filling out some lemmas ([#7710](https://github.com/leanprover-community/mathlib/pull/#7710))

From LTE.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-26T13:34:26+00:00](https://github.com/leanprover-community/mathlib/commit/273546ec28ab9c01917c18b2d91fec3c85ba6722)
feat(group_theory/sub{group,monoid,semiring,ring}): subobjects inherit the actions of their carrier type ([#7665](https://github.com/leanprover-community/mathlib/pull/#7665))

This acts as a generalization of `algebra.of_subsemiring` and `algebra.of_subring`, and transfers the weaker action structures too.

### [2021-05-26T13:34:25+00:00](https://github.com/leanprover-community/mathlib/commit/66ec15ccd109e82ef80c4340ab86cef6b26c7ebd)
feat(analysis/complex/isometry): add linear_isometry_complex ([#6923](https://github.com/leanprover-community/mathlib/pull/#6923))

add proof about the isometries in the complex plane

Co-authored-by: frankymacster <frankymacster@users.noreply.github.com>
Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-05-26T08:25:18+00:00](https://github.com/leanprover-community/mathlib/commit/a741f646f0e3aac173f0ef6348f2cd1a2bf0a12e)
docs(*): spelling ([#7719](https://github.com/leanprover-community/mathlib/pull/#7719))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-26T08:25:17+00:00](https://github.com/leanprover-community/mathlib/commit/58c57ca215b88e8adfb2f73769d981115cfbcc26)
fix(linear_algebra/tensor_product): relax from module to distrib_mul_action ([#7709](https://github.com/leanprover-community/mathlib/pull/#7709))

This was an accident in [#7516](https://github.com/leanprover-community/mathlib/pull/#7516) where the wrong variable was used. `R'` is the base of a distrib_mul_action, `R''`, is the base of a module.

### [2021-05-26T08:25:16+00:00](https://github.com/leanprover-community/mathlib/commit/71dcb642c9f06cd2fbe542e96094ed4f99f1f764)
feat(order/conditionally_complete_lattice): add lemmas ([#7689](https://github.com/leanprover-community/mathlib/pull/#7689))

These lemmas names match the version that already exist without the `c` prefix.

This also renames `finset.sup_eq_Sup` to `finset.sup_id_eq_Sup`, and introduces a new `finset.sup_eq_Sup_image`.

### [2021-05-26T08:25:15+00:00](https://github.com/leanprover-community/mathlib/commit/00394b758e6bda34f4b4c87deb400fb106890f6e)
feat(tactic/simps): implement prefix names ([#7596](https://github.com/leanprover-community/mathlib/pull/#7596))

* You can now write `initialize_simps_projections equiv (to_fun → coe as_prefix)` to add the projection name as a prefix to the simp lemmas: if you then write `@[simps coe] def foo ...` you get a lemma named `coe_foo`.
* Remove the `short_name` option from `simps_cfg`. This was unused and not that useful. 
* Refactor some tuples used in the functions into structures.
* Implements one item of [#5489](https://github.com/leanprover-community/mathlib/pull/#5489).

### [2021-05-26T06:48:35+00:00](https://github.com/leanprover-community/mathlib/commit/1f566bcf7999356255f0e423253d5b5c7159a89a)
chore(scripts): update nolints.txt ([#7718](https://github.com/leanprover-community/mathlib/pull/#7718))

I am happy to remove some nolints for you!

### [2021-05-26T06:48:34+00:00](https://github.com/leanprover-community/mathlib/commit/f7f0a3028ca7baaa1bada3e53ef2b6cc5853cf21)
feat(scripts/lint-style.py): add linter that disables importing omega ([#7646](https://github.com/leanprover-community/mathlib/pull/#7646))

* Files in mathlib are not allowed to `import tactic` or `import tactic.omega`. This adds a style linter to enforce this.
* `tactic.default` is allowed to import `tactic.omega` (other files that only import other files are excluded from these checks, so a malicious user still could get around this linter, but it's hard to imagine this happening accidentally)
* Remove `import tactic` from 3 files (in `archive/` and `test/`)

### [2021-05-26T00:55:46+00:00](https://github.com/leanprover-community/mathlib/commit/fd1c8e7f4eedcf0059198347e6ac36931ef3fddb)
feat(data/list/forall2): add two lemmas about forall₂ and reverse ([#7714](https://github.com/leanprover-community/mathlib/pull/#7714))

rel_reverse shows that forall₂ is preserved across reversed lists,
forall₂_iff_reverse uses rel_reverse to show that it is preserved in
both directions.

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>





Co-authored-by: Luke Nelson <lukenels@cs.washington.edu>

### [2021-05-25T23:21:27+00:00](https://github.com/leanprover-community/mathlib/commit/360ca9cc797360b70079c373c3d02506cd6647b7)
feat(analysis/special_functions/integrals): `interval_integrable_log` ([#7713](https://github.com/leanprover-community/mathlib/pull/#7713))

### [2021-05-25T23:21:26+00:00](https://github.com/leanprover-community/mathlib/commit/f1425b69ea6fd2315163b4bd3ef894442583494c)
feat(measure_theory/interval_integral): `integral_comp_add_left` ([#7712](https://github.com/leanprover-community/mathlib/pull/#7712))

### [2021-05-25T19:48:36+00:00](https://github.com/leanprover-community/mathlib/commit/82e78ce867a44f9e3fcc021434dfbe7eace7f5e1)
feat(algebra/big_operators/finprod): add lemma `finprod_mem_finset_of_product` ([#7439](https://github.com/leanprover-community/mathlib/pull/#7439))

### [2021-05-25T17:19:09+00:00](https://github.com/leanprover-community/mathlib/commit/8078ecad87dfd3b6848983bbe9250689d17d39b5)
feat(linear_algebra): `det (M ⬝ N ⬝ M') = det N`, where `M'` is an inverse of `M` ([#7633](https://github.com/leanprover-community/mathlib/pull/#7633))

This is an important step towards showing the determinant of `linear_map.to_matrix` does not depend on the choice of basis.
    
The main difficulty is allowing the two indexing types of `M` to be (a priori) different. They are in bijection though (using `basis.index_equiv` from [#7631](https://github.com/leanprover-community/mathlib/pull/#7631)), so using `reindex_linear_equiv` we can turn everything into square matrices and apply the "usual" proof.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-05-25T15:58:58+00:00](https://github.com/leanprover-community/mathlib/commit/c17c738ecc1a4d8864916dbb903355cbf3174792)
feat(logic/girard): move file to counterexamples ([#7706](https://github.com/leanprover-community/mathlib/pull/#7706))

Since the file feels like a counterexample, I suggest putting it in that folder.

### [2021-05-25T15:58:57+00:00](https://github.com/leanprover-community/mathlib/commit/a617d0a61d6517258d88045c087f2f8c680c753a)
feat(algebra/category/Module): R-mod has enough projectives ([#7113](https://github.com/leanprover-community/mathlib/pull/#7113))

Another piece of @TwoFX's `projective` branch, lightly edited.

Co-authored-by: Markus Himmel <markus@himmel-villmar.de>



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-25T11:18:58+00:00](https://github.com/leanprover-community/mathlib/commit/bbf6150056ec9321d70bf8c32eace3d3fd9a0a34)
feat(measure_theory/measurable_space): add instances for subtypes ([#7702](https://github.com/leanprover-community/mathlib/pull/#7702))

### [2021-05-25T11:18:57+00:00](https://github.com/leanprover-community/mathlib/commit/75e07d1c8440f8bc26e1558446b556d12cd001c7)
feat(linear_algebra/matrix/determinant): lemmas about commutativity under det ([#7685](https://github.com/leanprover-community/mathlib/pull/#7685))

### [2021-05-25T11:18:56+00:00](https://github.com/leanprover-community/mathlib/commit/4abbe10d1fcc85b47a0cae974dfb85e207ef826d)
feat(group_theory/group_action/units): group actions on and by units ([#7438](https://github.com/leanprover-community/mathlib/pull/#7438))

This removes all the lemmas about `(u : α) • x` and `(↑u⁻¹ : α) • x` in favor of granting `units α` its very own `has_scalar` structure, along with providing the stronger variants to make it usable elsewhere.

This means that downstream code need only reason about `[group G] [mul_action G M]` instead of needing to handle groups and `units` separately.

The (multiplicative versions of the) removed and moved lemmas are:
* `units.inv_smul_smul` &rarr; `inv_smul_smul`
* `units.smul_inv_smul` &rarr; `smul_inv_smul`
* `units.smul_perm_hom`, `mul_action.to_perm` &rarr; `mul_action.to_perm_hom`
* `units.smul_perm` &rarr; `mul_action.to_perm`
* `units.smul_left_cancel` &rarr; `smul_left_cancel`
* `units.smul_eq_iff_eq_inv_smul` &rarr; `smul_eq_iff_eq_inv_smul`
* `units.smul_eq_zero` &rarr; `smul_eq_zero_iff_eq` (to avoid clashing with `smul_eq_zero`)
* `units.smul_ne_zero` &rarr; `smul_ne_zero_iff_ne`
* `homeomorph.smul_of_unit` &rarr; `homeomorph.smul` (the latter already existed, and the former was a special case)
* `units.measurable_const_smul_iff` &rarr; `measurable_const_smul_iff`
* `units.ae_measurable_const_smul_iff` &rarr; `ae_measurable_const_smul_iff`

The new lemmas are:

* `smul_eq_zero_iff_eq'`, a `group_with_zero` version of `smul_eq_zero_iff_eq`
* `smul_ne_zero_iff_ne'`, a `group_with_zero` version of `smul_ne_zero_iff_ne`
* `units.neg_smul`, a version of `neg_smul` for units. We don't currently have typeclasses about `neg` on objects without `+`.

We also end up needing some new typeclass instances downstream

* `units.measurable_space`
* `units.has_measurable_smul`
* `units.has_continuous_smul`

This goes on to remove lots of coercions from `alternating_map`, `matrix.det`, and some lie algebra stuff.
This makes the theorem statement cleaner, but occasionally requires rewriting through `units.smul_def` to add or remove the coercion.



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>
Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-05-25T05:41:54+00:00](https://github.com/leanprover-community/mathlib/commit/d81fcdac290b2632e6f7c07689868efdb67e9535)
feat(algebra/group_with_zero): add some equational lemmas ([#7705](https://github.com/leanprover-community/mathlib/pull/#7705))

Add some equations for `group_with_zero` that are direct analogues of lemmas for `group`.

Useful for [#6923](https://github.com/leanprover-community/mathlib/pull/#6923).

### [2021-05-25T00:46:31+00:00](https://github.com/leanprover-community/mathlib/commit/a880ea4ab625d427dc73776d4ea05902d2921f17)
feat(ring_theory/coprime): add some lemmas ([#7650](https://github.com/leanprover-community/mathlib/pull/#7650))

### [2021-05-25T00:46:30+00:00](https://github.com/leanprover-community/mathlib/commit/c3dcb7d4b54efda0c700bfdff6ea75235a1ef8ed)
feat(category_theory/limits): comma category colimit construction ([#7535](https://github.com/leanprover-community/mathlib/pull/#7535))

As well as the duals. Also adds some autoparams for consistency with `has_limit` and some missing instances which are basically just versions of existing things

### [2021-05-24T19:29:16+00:00](https://github.com/leanprover-community/mathlib/commit/17f3b801f8981c499b0c13c7e05e4588a9570b31)
feat(100-theorems-list/16_abel_ruffini): some simplifications ([#7699](https://github.com/leanprover-community/mathlib/pull/#7699))

### [2021-05-24T19:29:15+00:00](https://github.com/leanprover-community/mathlib/commit/51526aefea2e31e393f27c178f57e03cd6cb57a9)
chore(topology): rename mem_nhds_sets and mem_of_nhds and mem_nhds_sets_iff ([#7690](https://github.com/leanprover-community/mathlib/pull/#7690))

Rename `mem_nhds_sets` to `is_open.mem_nhds`, and `mem_nhds_sets_iff` to `mem_nhds_iff`, and `mem_of_nhds` to `mem_of_mem_nhds`.

### [2021-05-24T14:07:33+00:00](https://github.com/leanprover-community/mathlib/commit/91a547ee1140a7a9a9e0f13fead27a44a644a551)
feat(algebra/opposites): `(un)op_ne_zero_iff` ([#7698](https://github.com/leanprover-community/mathlib/pull/#7698))

### [2021-05-24T14:07:32+00:00](https://github.com/leanprover-community/mathlib/commit/a09ddc7fb547f852df5fbe31413fac834bce7f23)
feat(measure_theory/interval_integral): `interval_integrable.mono` ([#7679](https://github.com/leanprover-community/mathlib/pull/#7679))

`interval_integrable f ν a b → interval c d ⊆ interval a b → μ ≤ ν → interval_integrable f μ c d`

### [2021-05-24T11:01:13+00:00](https://github.com/leanprover-community/mathlib/commit/0b51a72c0c8942d6b4be744110a50ced53e22331)
feat(linear_algebra/determinant): specialize `is_basis.iff_det` ([#7668](https://github.com/leanprover-community/mathlib/pull/#7668))

After the bundled basis refactor, applying `is_basis.iff_det` in the forward direction is slightly more involved (since defining the `iff` requires an unbundled basis), so I added a lemma that does the necessary translation between "unbundled basis" and "bundled basis" for you.

### [2021-05-24T11:01:12+00:00](https://github.com/leanprover-community/mathlib/commit/8ff2783fd4c65729af1370e74a74c4610f8466ba)
feat(counterexamples/cyclotomic_105): add coeff_cyclotomic_105 ([#7648](https://github.com/leanprover-community/mathlib/pull/#7648))

We show that `coeff (cyclotomic 105 ℤ) 7 = -2`, proving that not all coefficients of cyclotomic polynomials are `0`, `-1` or `1`.

### [2021-05-24T05:13:08+00:00](https://github.com/leanprover-community/mathlib/commit/16733c8fa2ce931c9b915e40dbc9a4b323a75429)
chore(data/nat/basic): move unique {units/add_units} instances ([#7701](https://github.com/leanprover-community/mathlib/pull/#7701))

Co-authored-by: Julian <julian.kuelshammer@math.uu.se>

### [2021-05-23T23:25:01+00:00](https://github.com/leanprover-community/mathlib/commit/2734d91230d5939d1e452d6505fc8298b2f779a8)
fix(data/nat/factorial): fix factorial_zero ([#7697](https://github.com/leanprover-community/mathlib/pull/#7697))

### [2021-05-23T16:33:37+00:00](https://github.com/leanprover-community/mathlib/commit/6cffc9fe3fd4035a6364d99b15b8efd1fb902ceb)
chore(logic/unique): a true prop is unique ([#7688](https://github.com/leanprover-community/mathlib/pull/#7688))

I found myself needing to construct this instance by hand somewhere; since we already need it to construct `unique true`, we may as well make a def.

### [2021-05-23T13:50:13+00:00](https://github.com/leanprover-community/mathlib/commit/57cd5ef135acc1a1e7013f0c8eeb5dae24a6b6d7)
refactor(*): remove some uses of omega in the library ([#7700](https://github.com/leanprover-community/mathlib/pull/#7700))

### [2021-05-22T21:53:35+00:00](https://github.com/leanprover-community/mathlib/commit/97a5276c83aa311ae27a313c506ec29bdae82d08)
doc(number_theory/bernoulli): write statements in math mode ([#7696](https://github.com/leanprover-community/mathlib/pull/#7696))

* It took me some work to see the difference between the two statements, so I added the statements in math mode.
* Change name `sum_range_pow'` -> `sum_Ico_pow`

### [2021-05-22T16:17:14+00:00](https://github.com/leanprover-community/mathlib/commit/fb95362dc0b4d36e345aa3c23b4f9070f495604f)
fix(algebra/homology): imports ([#7655](https://github.com/leanprover-community/mathlib/pull/#7655))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-22T12:15:37+00:00](https://github.com/leanprover-community/mathlib/commit/0e216ce00902306d71c46067bdea90fff56de902)
feat(order): if s is finite then Sup s ∈ s ([#7682](https://github.com/leanprover-community/mathlib/pull/#7682))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-05-22T12:15:36+00:00](https://github.com/leanprover-community/mathlib/commit/418dc044d07a8d4d2f70a74fc0c1e6ed5e2456a5)
feat(100-theorems-list/16_abel_ruffini): The Abel-Ruffini Theorem ([#7562](https://github.com/leanprover-community/mathlib/pull/#7562))

It's done!



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-05-22T06:50:13+00:00](https://github.com/leanprover-community/mathlib/commit/b29d40c602194105a72f3e289d2f1ae65aba7a9e)
fix(algebra): change local transparency to semireducible ([#7687](https://github.com/leanprover-community/mathlib/pull/#7687))

* When a type is `[irreducible]` it should locally be made `[semireducible]` and (almost) never `[reducible]`. 
* If it is made `[reducible]`, type-class inference will unfold this definition, and will apply instances that would not type-check when the definition is `[irreducible]`

### [2021-05-21T21:35:13+00:00](https://github.com/leanprover-community/mathlib/commit/f8530d53a5074ee58cce6f1a99d7a05557be1046)
feat(ring_theory/ideal/operations): `ideal.span_singleton_pow` ([#7660](https://github.com/leanprover-community/mathlib/pull/#7660))

### [2021-05-21T16:38:59+00:00](https://github.com/leanprover-community/mathlib/commit/f70e16066f97faa97dc409957f93685d3141ac99)
chore(order/conditionally_complete_lattice): golf proofs with `order_dual` ([#7684](https://github.com/leanprover-community/mathlib/pull/#7684))

Even in the places where this doesn't result in a shorter proof, it makes it obvious that the `inf` lemmas have a matching `sup` lemma.

### [2021-05-21T11:28:01+00:00](https://github.com/leanprover-community/mathlib/commit/233eff0dd21032280e4d5aa4eb881bb7daff14c2)
feat(data/fintype/card_embedding): the birthday problem ([#7363](https://github.com/leanprover-community/mathlib/pull/#7363))



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-05-21T00:33:53+00:00](https://github.com/leanprover-community/mathlib/commit/19247422f6ad7a650e912a50f2cd97e5a0f0feea)
feat(data/set/basic): allow dot notation for trans and antisymm ([#7681](https://github.com/leanprover-community/mathlib/pull/#7681))

Allow to write
```lean
example {α : Type*} {a b c : set α} (h : a ⊆ b)  (h': b ⊆ c) : a ⊆ c :=
h.trans h'

example {α : Type*} {a b : set α} (h : a ⊆ b)  (h': b ⊆ a) : 
  a = b := h.antisymm h'

example {α : Type*} {a b c : finset α} (h : a ⊆ b)  (h': b ⊆ c) : a ⊆ c :=
h.trans h'

example {α : Type*} {a b : finset α} (h : a ⊆ b)  (h': b ⊆ a) : a = b :=
h.antisymm h'
```

### [2021-05-21T00:33:52+00:00](https://github.com/leanprover-community/mathlib/commit/53e2307ac571f7ffb8dda7f89eea20da4f99b2c0)
feat(ring_theory): every left-noetherian ring has invariant basis number ([#7678](https://github.com/leanprover-community/mathlib/pull/#7678))

This is a lovely case where we get more for less.

By directly proving that every left-noetherian ring has invariant basis number, we don't need to import `linear_algebra.finite_dimensional` in order to do the `field` case. This means that in a future PR we can instead import `ring_theory.invariant_basis_number` in `linear_algebra.finite_dimensional`, and set up the theory of bases in greater generality.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-05-21T00:33:51+00:00](https://github.com/leanprover-community/mathlib/commit/c63c6d108a560ba3c694b13c73c9a69f34aeec63)
feat(order/closure): make closure operators implementable ([#7608](https://github.com/leanprover-community/mathlib/pull/#7608))

introduce `lower_adjoint` as a way to talk about closure operators whose input and output types do not match

### [2021-05-20T19:10:37+00:00](https://github.com/leanprover-community/mathlib/commit/32b433dfa97afd3b1bade3c6e203c4235e3685c5)
refactor(*): remove some uses of omega in the library ([#7620](https://github.com/leanprover-community/mathlib/pull/#7620))

In [#6129](https://github.com/leanprover-community/mathlib/pull/#6129), we stopped using `omega` to avoid porting it to lean4.
Some new uses were added since then.





Co-authored-by: Eric <ericrboidi@gmail.com>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>
Co-authored-by: Benjamin Davidson <68528197+benjamindavidson@users.noreply.github.com>

### [2021-05-20T15:24:52+00:00](https://github.com/leanprover-community/mathlib/commit/d47a6e33d9945ed0fafa600acad70a4b174fbdb6)
feat(topology): clopens form a topology basis for profinite sets ([#7671](https://github.com/leanprover-community/mathlib/pull/#7671))

from LTE

### [2021-05-20T13:34:18+00:00](https://github.com/leanprover-community/mathlib/commit/d3ec77c2108c51ab6693146e63817a055e418c36)
feat(category_theory/limits): reflecting limits of isomorphic diagram ([#7674](https://github.com/leanprover-community/mathlib/pull/#7674))

### [2021-05-20T08:06:42+00:00](https://github.com/leanprover-community/mathlib/commit/c5951f32a6708133d54d907e24bfefe2672f42a2)
feat(ring_theory/noetherian): a surjective endomorphism of a noetherian module is injective ([#7676](https://github.com/leanprover-community/mathlib/pull/#7676))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-20T08:06:41+00:00](https://github.com/leanprover-community/mathlib/commit/ff511590476ef357b6132a45816adc120d5d7b1d)
feat(algebra/homology/*): add hypotheses to the d_comp_d' axiom ([#7673](https://github.com/leanprover-community/mathlib/pull/#7673))

### [2021-05-20T08:06:40+00:00](https://github.com/leanprover-community/mathlib/commit/2d414d0014dd975a30deea5e3b9f4061c86195f4)
feat(algebra/homology/homological_complex): add condition to hom.comm' ([#7666](https://github.com/leanprover-community/mathlib/pull/#7666))

### [2021-05-20T08:06:39+00:00](https://github.com/leanprover-community/mathlib/commit/0cb7ecc505dd34c65888003fb83096f7a405b57f)
fix(category_theory/limits/shapes/zero): use fully qualified names in locale ([#7619](https://github.com/leanprover-community/mathlib/pull/#7619))

### [2021-05-20T02:00:39+00:00](https://github.com/leanprover-community/mathlib/commit/5a67f2c6c3b5a80736e63938d4ce3b6bbb03903f)
chore(topology): rename compact to is_compact in theorem names ([#7672](https://github.com/leanprover-community/mathlib/pull/#7672))

Some time ago, we switched from `compact` to `is_compact`, for coherence with `is_open`, `is_closed` and so on. However, several lemma names were not changed at the time. This PR fixes some of them. Plus a few minor stuff (notably, introduce `le_self_add` to replace the dozen of uses of `le_add_right (le_refl _)` in the library -- and weaken some `metric` assumptions to `pseudo_metric`, without touching the proofs).

### [2021-05-20T02:00:37+00:00](https://github.com/leanprover-community/mathlib/commit/1016a14013172752d6f3c35b1004f071563bb1be)
refactor(linear_algebra/finite_dimensional): generalize finite_dimensional.iff_fg to division rings ([#7644](https://github.com/leanprover-community/mathlib/pull/#7644))

Replace `finite_dimensional.iff_fg` (working over a field) with `is_noetherian.iff_fg` (working over a division ring). Also, use the `module.finite` predicate.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-20T02:00:36+00:00](https://github.com/leanprover-community/mathlib/commit/641cece538b7d8eab52bceecd58be4cfe26d5ccc)
feat(algebra/homology): the homotopy category ([#7484](https://github.com/leanprover-community/mathlib/pull/#7484))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-05-19T19:28:27+00:00](https://github.com/leanprover-community/mathlib/commit/116c162fc2c7ca486c2dcdc22ce7a2bed5f6b367)
feat(algebra/opposites): `opposite` of a `group_with_zero` ([#7662](https://github.com/leanprover-community/mathlib/pull/#7662))

Co-authored by @eric-wieser

### [2021-05-19T15:49:00+00:00](https://github.com/leanprover-community/mathlib/commit/ed4161c5eb5d838aa3757cf70fae2958030c1278)
feat(data/polynomial/coeff): generalize polynomial.coeff_smul to match mv_polynomial.coeff_smul ([#7663](https://github.com/leanprover-community/mathlib/pull/#7663))

Notably this means these lemmas cover `nat` and `int` actions.

### [2021-05-19T15:48:58+00:00](https://github.com/leanprover-community/mathlib/commit/599712ffc382980287accce14f2618ea48fc3119)
feat(data/int/parity, data/nat/parity): add some lemmas ([#7624](https://github.com/leanprover-community/mathlib/pull/#7624))

### [2021-05-19T12:41:13+00:00](https://github.com/leanprover-community/mathlib/commit/697c8dd9b355d0cf4a0bbcc008711b95c3d76224)
refactor(topology/basic): use dot notation in `is_open.union` and friends ([#7647](https://github.com/leanprover-community/mathlib/pull/#7647))

The fact that the union of two open sets is open is called `is_open_union`. We rename it to `is_open.union` to enable dot notation. Same with `is_open_inter`, `is_closed_union` and `is_closed_inter` and `is_clopen_union` and `is_clopen_inter` and `is_clopen_diff`.

### [2021-05-19T09:57:34+00:00](https://github.com/leanprover-community/mathlib/commit/c7a51977ffe52202a0eb1cbff47e6682215f1cb8)
feat(data/polynomial/degree/definitions): `polynomial.degree_C_mul_X_le` ([#7659](https://github.com/leanprover-community/mathlib/pull/#7659))

### [2021-05-19T09:57:33+00:00](https://github.com/leanprover-community/mathlib/commit/040ebea03fc6cfc4236b65c9841d334f97b3d6f8)
fix(analysis/normed_space/normed_group_quotient): put lemmas inside namespace  ([#7653](https://github.com/leanprover-community/mathlib/pull/#7653))

### [2021-05-19T08:44:51+00:00](https://github.com/leanprover-community/mathlib/commit/c1e9f942d48267ea0d4a43a24f008b4e472308ab)
docs(field_theory/polynomial_galois_group): improve existing docs ([#7586](https://github.com/leanprover-community/mathlib/pull/#7586))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-05-19T02:36:44+00:00](https://github.com/leanprover-community/mathlib/commit/1d4990e262a82ed7d30a1c5b63e428df71839718)
chore(scripts): update nolints.txt ([#7658](https://github.com/leanprover-community/mathlib/pull/#7658))

I am happy to remove some nolints for you!

### [2021-05-19T02:36:43+00:00](https://github.com/leanprover-community/mathlib/commit/918dcc0a91bc40dd8484486460f309bdec2575a0)
chore(algebra/homology): further dualization ([#7657](https://github.com/leanprover-community/mathlib/pull/#7657))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-19T02:36:42+00:00](https://github.com/leanprover-community/mathlib/commit/aee918b816c5a38376ecf170f6435c641d284ac1)
feat(algebraic_topology/simplicial_object): Some API for converting between simplicial and cosimplicial ([#7656](https://github.com/leanprover-community/mathlib/pull/#7656))

This adds some code which is helpful to convert back and forth between simplicial and cosimplicial object.
For augmented objects, this doesn't follow directly from the existing API in `category_theory/opposite`.



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2021-05-19T01:16:47+00:00](https://github.com/leanprover-community/mathlib/commit/24d2713d9086cb07f9b7e572b7a2de3f1d50b1ce)
feat(algebraic_topology/simplicial_object): Whiskering of simplicial objects. ([#7651](https://github.com/leanprover-community/mathlib/pull/#7651))

This adds whiskering constructions for (truncated, augmented) (co)simplicial objects.

### [2021-05-18T22:27:07+00:00](https://github.com/leanprover-community/mathlib/commit/0bcfff99351f8facd7c2699b2fe8641ce948dcf3)
feat(linear_algebra/basis) remove several [nontrivial R] ([#7642](https://github.com/leanprover-community/mathlib/pull/#7642))

We remove some unnecessary `nontrivial R`.

### [2021-05-18T16:02:45+00:00](https://github.com/leanprover-community/mathlib/commit/a51d1e0e7be7650679e2bfb5ca5ca4d663aab914)
feat(algebra/homology/homological_complex): Dualizes some constructions ([#7643](https://github.com/leanprover-community/mathlib/pull/#7643))

This PR adds `cochain_complex.of` and `cochain_complex.of_hom`. 

Still not done: `cochain_complex.mk`.

### [2021-05-18T16:02:44+00:00](https://github.com/leanprover-community/mathlib/commit/e275604139065bd89acd7a67e734d4f8ee9cdcb4)
chore(data/set/basic): add `set.compl_eq_compl` ([#7641](https://github.com/leanprover-community/mathlib/pull/#7641))

### [2021-05-18T10:47:24+00:00](https://github.com/leanprover-community/mathlib/commit/c2114d458c9591cca68af51c306f072403613264)
refactor(linear_algebra/dimension): generalize definition of `module.rank` ([#7634](https://github.com/leanprover-community/mathlib/pull/#7634))

The main change is to generalize the definition of `module.rank`. It used to be the infimum over cardinalities of bases, and is now the supremum over cardinalities of linearly independent sets.

I have not attempted to systematically generalize  theorems about the rank; there is lots more work to be done. For now I've just made a few easy generalizations (either replacing `field` with `division_ring`, or `division_ring` with `ring`+`nontrivial`).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-18T10:47:23+00:00](https://github.com/leanprover-community/mathlib/commit/e6c787fed1ca3568a18cbe045b8db0dab0413c86)
feat(algebra/opposites): add `has_scalar (opposite α) α` instances ([#7630](https://github.com/leanprover-community/mathlib/pull/#7630))

The action is defined as:
```lean
lemma op_smul_eq_mul [monoid α] {a a' : α} : op a • a' = a' * a := rfl
```
We have a few of places in the library where we prove things about `r • b`, and then extract a proof of `a * b = a • b` for free. However, we have no way to do this for `b * a` right now unless multiplication is commutative.
By adding this action, we have `b * a = op a • b` so in many cases could reuse the smul lemma.

This instance does not create a diamond:
```lean
-- the two paths to `mul_action (opposite α) (opposite α)` are defeq
example [monoid α] : monoid.to_mul_action (opposite α) = opposite.mul_action α (opposite α) := rfl
```

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Right.20multiplication.20as.20a.20mul_action/near/239012917)

### [2021-05-18T04:50:02+00:00](https://github.com/leanprover-community/mathlib/commit/1a2781a7666efca11f0ec01ce4c4214576198d21)
feat(analysis/normed_space): the category of seminormed groups ([#7617](https://github.com/leanprover-community/mathlib/pull/#7617))

From LTE, along with adding `SemiNormedGroup₁`, the subcategory of norm non-increasing maps.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-18T04:50:01+00:00](https://github.com/leanprover-community/mathlib/commit/3694945d316f02e0e1c2d4e43f398b7efcad34b6)
feat(logic/is_empty): Add is_empty typeclass ([#7606](https://github.com/leanprover-community/mathlib/pull/#7606))

* Refactor some equivalences that use `empty` or `pempty`.
* Replace `α → false` with `is_empty α` in various places (but not everywhere, we can do that in follow-up PRs).
* `infinite` is proven equivalent to `is_empty (fintype α)`. The old `not_fintype` is renamed to `fintype.false` (to allow projection notation), and there are two useful variants `infinite.false` and `not_fintype` added with different arguments explicit.
* add instance `unique true`.
* Changed the type of `fin_one_equiv` from `fin 1 ≃ punit` to `fin 1 ≃ unit` (it was used only once, where the former formulation required giving an explicit universe level).
* renamings:
`equiv.subsingleton_iff` -> `equiv.subsingleton_congr`
`finprod_of_empty` -> `finprod_of_is_empty`

### [2021-05-18T04:49:59+00:00](https://github.com/leanprover-community/mathlib/commit/1b864c0d500240253596e16dc7fae9cc3be6edb5)
feat(analysis/normed_group): quotients ([#7603](https://github.com/leanprover-community/mathlib/pull/#7603))

From LTE.

Co-authored-by: Riccardo Brasca <riccardo.brasca@gmail.com>





Co-authored-by: Riccardo Brasca <riccardo.brasca@gmail.com>

### [2021-05-18T02:58:27+00:00](https://github.com/leanprover-community/mathlib/commit/f900513a787b37ae139d8658665a6596539aba29)
feat(linear_algebra/matrix): slightly generalize `smul_left_mul_matrix` ([#7632](https://github.com/leanprover-community/mathlib/pull/#7632))

Two minor changes that make `smul_left_mul_matrix` slightly easier to apply:
 * the bases `b` and `c` can now be indexed by different types
 * replace `(i, k)` on the LHS with `ik.1 ik.2` on the RHS (so you don't have to introduce the constructor with `rw ← prod.mk.eta` somewhere deep in your expression)

### [2021-05-17T23:05:07+00:00](https://github.com/leanprover-community/mathlib/commit/b8a6995194e05246503f7e16fe7bf93aa206caa4)
feat(data/polynomial): the `d-1`th coefficient of `polynomial.map` ([#7639](https://github.com/leanprover-community/mathlib/pull/#7639))

We prove `polynomial.next_coeff_map` just like `polynomial.leading_coeff_map'`.

### [2021-05-17T23:05:06+00:00](https://github.com/leanprover-community/mathlib/commit/ccf5188fdb3503c76ec90d846fce2f19b586717a)
feat(ring_theory/power_basis): the dimension of a power basis is positive ([#7638](https://github.com/leanprover-community/mathlib/pull/#7638))

We already have `pb.dim_ne_zero : pb.dim ≠ 0` (assuming nontriviality), but it's also useful to also have it in the form `0 < pb.dim`.

### [2021-05-17T18:10:36+00:00](https://github.com/leanprover-community/mathlib/commit/4ab0e3503215d5ebf97245a0443939199459fba2)
feat(data/multiset): the product of inverses is the inverse of the product ([#7637](https://github.com/leanprover-community/mathlib/pull/#7637))

Entirely analogous to `prod_map_mul` defined above.

### [2021-05-17T12:38:51+00:00](https://github.com/leanprover-community/mathlib/commit/818dffa0f0257218246eec0d786e095536f83e94)
feat(linear_algebra): a finite free module has a unique findim ([#7631](https://github.com/leanprover-community/mathlib/pull/#7631))

I needed this easy corollary, so I PR'd it, even though it should be generalizable once we have a better theory of e.g. Gaussian elimination. (I also tried to generalize `mk_eq_mk_of_basis`, but the current proof really requires the existence of multiplicative inverses for the coefficients.)



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-05-17T12:38:50+00:00](https://github.com/leanprover-community/mathlib/commit/36e0127485d989706e6d0e71ea8b5815b33616bc)
feat(linear_algebra/basic): add_monoid_hom_lequiv_int ([#7629](https://github.com/leanprover-community/mathlib/pull/#7629))

From LTE.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-17T12:38:49+00:00](https://github.com/leanprover-community/mathlib/commit/d201a18262a9726abcb7b2d29580ecfd5cc40ba4)
refactor(algebra/homology/homotopy): avoid needing has_zero_object ([#7621](https://github.com/leanprover-community/mathlib/pull/#7621))

A refactor of the definition of `homotopy`, so we don't need `has_zero_object`.

Co-authored-by: Adam Topaz github@adamtopaz.com



Co-authored-by: Adam Topaz <github@adamtopaz.com>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-05-17T12:38:49+00:00](https://github.com/leanprover-community/mathlib/commit/07fb3d7ede23599104c443668c193d105f815f38)
refactor(data/finsupp/antidiagonal): Make antidiagonal a finset ([#7595](https://github.com/leanprover-community/mathlib/pull/#7595))

Pursuant to discussion [here](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/antidiagonals.20having.20multiplicity) 

Refactoring so that `finsupp.antidiagonal` and `multiset.antidiagonal` are finsets.

~~Still TO DO: `multiset.antidiagonal`~~

### [2021-05-17T08:05:30+00:00](https://github.com/leanprover-community/mathlib/commit/8394e5944d715ea39373ef106b22b50c5f59dedf)
feat(data/finset/basic): perm_of_nodup_nodup_to_finset_eq ([#7588](https://github.com/leanprover-community/mathlib/pull/#7588))

Also `finset.exists_list_nodup_eq`.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-05-17T06:01:44+00:00](https://github.com/leanprover-community/mathlib/commit/739d93c61668bbacb2217e46786877831ba2b31f)
feat(algebra/lie/weights): the zero root subalgebra is self-normalizing ([#7622](https://github.com/leanprover-community/mathlib/pull/#7622))

### [2021-05-17T03:57:28+00:00](https://github.com/leanprover-community/mathlib/commit/2077c90cb30845321bfbbd77709e882f39d0b48f)
doc(counterexamples/canonically_ordered_comm_semiring_two_mul): fix url ([#7625](https://github.com/leanprover-community/mathlib/pull/#7625))




Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-05-17T02:40:40+00:00](https://github.com/leanprover-community/mathlib/commit/d40e40c2ffbeadc5ead14b69212d91cdd43285b4)
chore(scripts): update nolints.txt ([#7627](https://github.com/leanprover-community/mathlib/pull/#7627))

I am happy to remove some nolints for you!

### [2021-05-17T01:22:19+00:00](https://github.com/leanprover-community/mathlib/commit/72e4cca4d0def059540d8f3cf7951d1b01fafa23)
ci(.github/workflows/build.yml): check counterexamples ([#7618](https://github.com/leanprover-community/mathlib/pull/#7618))

I meant to add this to [#7553](https://github.com/leanprover-community/mathlib/pull/#7553) but I forgot before it got merged.

This also moves the contents of `src/counterexamples` to `counterexamples/`.

### [2021-05-17T00:02:12+00:00](https://github.com/leanprover-community/mathlib/commit/84a27d60c14eac846093eccc22b2064e8d39ee98)
feat(set_theory/game): add mul_one and mul_assoc for pgames ([#7610](https://github.com/leanprover-community/mathlib/pull/#7610))

and several `simp` lemmas. I also simplified some of the existing proofs using `rw` and `simp` and made them easier to read.

This is the final PR for multiplication of pgames (hopefully)!

Next step:  prove `numeric_mul` and define multiplication for `surreal`.

### [2021-05-16T18:58:53+00:00](https://github.com/leanprover-community/mathlib/commit/aedd12dac5eeb96d41c6a02d425669c48790f66a)
refactor(measure_theory/haar_measure): move general material to content.lean, make content a structure  ([#7615](https://github.com/leanprover-community/mathlib/pull/#7615))

Several facts that are proved only for the Haar measure (including for instance regularity) are true for any measure constructed from a content. We move these facts to the `content.lean` file (and make `content` a structure for easier management). Also, move the notion of regular measure to its own file, and make it a class.

### [2021-05-16T18:58:52+00:00](https://github.com/leanprover-community/mathlib/commit/1b098c06d2ef24c5b8fe9317a39781a210c73777)
feat(algebra/ordered_group, algebra/ordered_ring): add some lemmas about abs ([#7612](https://github.com/leanprover-community/mathlib/pull/#7612))

### [2021-05-16T18:58:51+00:00](https://github.com/leanprover-community/mathlib/commit/b98d84083e7c66ace27a573134c3fefa4d2c0407)
feat(category_theory/category): initialize simps ([#7605](https://github.com/leanprover-community/mathlib/pull/#7605))

Initialize `@[simps]` so that it works better for `category`. It just makes the names of the generated lemmas shorter.
Add `@[simps]` to product categories.

### [2021-05-16T18:58:50+00:00](https://github.com/leanprover-community/mathlib/commit/9084a3c765f7177d6466c72563998b9f48cf8e81)
chore(order/fixed_point): add docstring for Knaster-Tarski theorem ([#7589](https://github.com/leanprover-community/mathlib/pull/#7589))

clarify that the def provided constitutes the Knaster-Tarski theorem

### [2021-05-16T13:18:13+00:00](https://github.com/leanprover-community/mathlib/commit/c8a2fd7fe95d80b16575517ca902da54fbb4521a)
feat(analysis/normed_space): normed_group punit ([#7616](https://github.com/leanprover-community/mathlib/pull/#7616))

Minor content from LTE.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-16T13:18:12+00:00](https://github.com/leanprover-community/mathlib/commit/2bd4bb69646786ed5c1216659d9705f3cf27aa1f)
fix(tactic/lift): elaborate the type better ([#7598](https://github.com/leanprover-community/mathlib/pull/#7598))

* When writing `lift x to t` it will now elaborating `t` using that `t` must be a sort (inserting a coercion if needed).
* Generalize `Type*` to `Sort*` in the tactic

### [2021-05-16T13:18:11+00:00](https://github.com/leanprover-community/mathlib/commit/632783dfb0a3062b5a4da3ce1ade3650910a2a32)
feat(algebra/subalgebra): two equal subalgebras are equivalent ([#7590](https://github.com/leanprover-community/mathlib/pull/#7590))

This extends `linear_equiv.of_eq` to an `alg_equiv` between two `subalgebra`s.

[Zulip discussion starts around here](https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/towers.20of.20algebras/near/238452076)



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-05-16T13:18:10+00:00](https://github.com/leanprover-community/mathlib/commit/4d909f412f85118e4e2993f4284d8d3ff7b3315d)
feat(analysis/calculus/local_extr): A polynomial's roots are bounded by its derivative ([#7571](https://github.com/leanprover-community/mathlib/pull/#7571))

An application of Rolle's theorem to polynomials.



Co-authored-by: Thomas Browning <tb65536@uw.edu>

### [2021-05-16T13:18:09+00:00](https://github.com/leanprover-community/mathlib/commit/ee6a9fa7e5f47b0401c330346f539c150a326f31)
fix(tactic/simps): fix bug ([#7433](https://github.com/leanprover-community/mathlib/pull/#7433))

* Custom projections that were compositions of multiple projections failed when the projection has additional arguments.
* Also adds an error when two projections are given the same simps-name

### [2021-05-16T13:18:08+00:00](https://github.com/leanprover-community/mathlib/commit/f1bcb90322512a032b596fe179c878fb845943aa)
fix(tactic/simps): remove occurrence of mk_mapp ([#7432](https://github.com/leanprover-community/mathlib/pull/#7432))

Fixes the slowdown reported on Zulip: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/simps.20is.20very.20slow
On my laptop, the minimized example in that topic now takes 33ms instead of ~5000ms

### [2021-05-15T21:20:58+00:00](https://github.com/leanprover-community/mathlib/commit/65e76465fb6142cb3f5c0aa7993273f1b7f834eb)
feat(algebraic_topology): cosimplicial objects ([#7614](https://github.com/leanprover-community/mathlib/pull/#7614))

Dualize the existing API for `simplicial_object` to provide `cosimplicial_object`, and move the contents of LTE's `for_mathlib/simplicial/augmented.lean` to mathlib.

Co-authored-by: Adam Topaz <github@adamtopaz.com>



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-15T21:20:57+00:00](https://github.com/leanprover-community/mathlib/commit/14802d6c8523802a4b0881edd565896f2d5027ce)
chore(ring_theory/int/basic): remove duplicate lemma nat.prime_iff_prime ([#7611](https://github.com/leanprover-community/mathlib/pull/#7611))

### [2021-05-15T21:20:56+00:00](https://github.com/leanprover-community/mathlib/commit/07dcff7d7e32cbf3614c5fa7cdfdb9b708a108f4)
feat(logic/relation): reflexive.ne_iff_imp ([#7579](https://github.com/leanprover-community/mathlib/pull/#7579))

As suggested in [#7567](https://github.com/leanprover-community/mathlib/pull/#7567)



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-05-15T21:20:55+00:00](https://github.com/leanprover-community/mathlib/commit/82ac80f1b857307aab9ad530842c44e6293b1d29)
feat(data/set/basic): pairwise_on.imp_on ([#7578](https://github.com/leanprover-community/mathlib/pull/#7578))

Provide more helper lemmas for transferring `pairwise_on` between different relations. Provide a rephrase of `pairwise_on.mono'` as `pairwise_on.imp`.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-05-15T21:20:54+00:00](https://github.com/leanprover-community/mathlib/commit/4c2567ff328903eeb7c6199ff5a297ca8bb93a73)
chore(group_theory/group_action/group): add `smul_inv` ([#7568](https://github.com/leanprover-community/mathlib/pull/#7568))

This renames the existing `smul_inv` to `smul_inv'`, which is consistent with the name of the other lemma about `mul_semiring_action`, `smul_mul'`.

### [2021-05-15T21:20:53+00:00](https://github.com/leanprover-community/mathlib/commit/467d2b276e3e4c37d478ed9c638f5f8966e72cda)
feat(data/logic/basic): `em.swap` and `eq_or_ne` ([#7561](https://github.com/leanprover-community/mathlib/pull/#7561))

### [2021-05-15T21:20:52+00:00](https://github.com/leanprover-community/mathlib/commit/d338ebd4bb406be700dd603151979177b760ff1a)
feat(counterexamples/*): add counterexamples folder ([#7558](https://github.com/leanprover-community/mathlib/pull/#7558))

Several times, there has been a discussion on Zulip about the appropriateness of having counterexamples in mathlib.  This PR introduces a `counterexamples` folder, together with the first couple of counterexamples.

For the most recent discussion, see
https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.237553

### [2021-05-15T21:20:51+00:00](https://github.com/leanprover-community/mathlib/commit/56442cf2739d3443de0800991e3e08fc1269f716)
feat(data/nnreal): div and pow lemmas ([#7471](https://github.com/leanprover-community/mathlib/pull/#7471))

from the liquid tensor experiment

### [2021-05-15T21:20:50+00:00](https://github.com/leanprover-community/mathlib/commit/57b0e68f4e056185851ef9d980f2283538c3a561)
chore(*/pi): rename *_hom.apply to pi.eval_*_hom ([#5851](https://github.com/leanprover-community/mathlib/pull/#5851))

These definitions state the fact that fixing an `i` and applying a function `(Π i, f i)` maintains the algebraic structure of the function. We already have a name for this operation, `function.eval`.

These isn't a statement about `monoid_hom` or `ring_hom` at all - that just happens to be their type.
For this reason, this commit moves all the definitions of this type into the `pi` namespace:

* `add_monoid_hom.apply` &rarr; `pi.eval_add_monoid_hom`
* `monoid_hom.apply` &rarr; `pi.eval_monoid_hom`
* `ring_hom.apply` &rarr; `pi.eval_ring_hom`
* `pi.alg_hom.apply` [sic] &rarr; `pi.eval_alg_hom`

This scales better, because we might want to say that applying a `linear_map` over a non-commutative ring is an `add_monoid_hom`. Using the naming convention established by this commit, that's easy; it's `linear_map.eval_add_monoid_hom` to mirror `pi.apply_add_monoid_hom`.

This partially addresses [this zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Naming.3A.20eval.20vs.20apply/near/223813950)

### [2021-05-15T16:28:06+00:00](https://github.com/leanprover-community/mathlib/commit/172195bb4717bf37dfc12669ec544fd351c82413)
feat(algebra/{ordered_monoid, ordered_monoid_lemmas}): split the `ordered_[...]` typeclasses ([#7371](https://github.com/leanprover-community/mathlib/pull/#7371))

This PR tries to split the ordering assumptions from the algebraic assumptions on the operations in the `ordered_[...]` hierarchy.

The strategy is to introduce two more flexible typeclasses, `covariant_class` and `contravariant_class`.

* `covariant_class` models the implication `a ≤ b → c * a ≤ c * b` (multiplication is monotone),
* `contravariant_class` models the implication `a * b < a * c → b < c`.

Since `co(ntra)variant_class` takes as input the operation (typically `(+)` or `(*)`) and the order relation (typically `(≤)` or `(<)`), these are the only two typeclasses that I have used.

The general approach is to formulate the lemma that you are interested in and prove it, with the `ordered_[...]` typeclass of your liking.  After that, you convert the single typeclass, say `[ordered_cancel_monoid M]`, to three typeclasses, e.g. `[partial_order M] [left_cancel_semigroup M] [covariant_class M M (function.swap (*)) (≤)]` and have a go at seeing if the proof still works!

Note that it is possible (or even expected) to combine several `co(ntra)variant_class` assumptions together.  Indeed, the usual `ordered` typeclasses arise from assuming the pair `[covariant_class M M (*) (≤)] [contravariant_class M M (*) (<)]` on top of order/algebraic assumptions.

A formal remark is that *normally* `covariant_class` uses the `(≤)`-relation, while `contravariant_class` uses the `(<)`-relation.  This need not be the case in general, but seems to be the most common usage.  In the opposite direction, the implication

`[semigroup α] [partial_order α] [contravariant_class α α (*) (≤)]  => left_cancel_semigroup α`

holds (note the `co*ntra*` assumption and the `(≤)`-relation).


Zulip:
https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ordered.20stuff

### [2021-05-15T14:21:15+00:00](https://github.com/leanprover-community/mathlib/commit/738c19f572805cff525a93aa4ffbdf232df05aa8)
refactor(linear_algebra/matrix): split matrix.lean into multiple files ([#7593](https://github.com/leanprover-community/mathlib/pull/#7593))

The file `linear_algebra/matrix.lean` used to be very big and contain a lot of parts that did not depend on each other, so I split each of those parts into its own little file. Most of the new files ended up in `linear_algebra/matrix/`, except for `linear_algebra/trace.lean` and `linear_algebra/determinant.lean` which did not contain anything matrix-specific.

Apart from the local improvement in `matrix.lean` itself, the import graph is now also a bit cleaner.

Renames:
 * `linear_algebra/determinant.lean` -> `linear_algebra/matrix/determinant.lean`
 * `linear_algebra/nonsingular_inverse.lean` -> `linear_algebra/matrix/nonsingular_inverse.lean`

Split off from `linear_algebra/matrix.lean`:
 * `linear_algebra/matrix/basis.lean`
 * `linear_algebra/matrix/block.lean`
 * `linear_algebra/matrix/diagonal.lean`
 * `linear_algebra/matrix/dot_product.lean`
 * `linear_algebra/matrix/dual.lean`
 * `linear_algebra/matrix/finite_dimensional.lean`
 * `linear_algebra/matrix/reindex.lean`
 * `linear_algebra/matrix/to_lin.lean`
 * `linear_algebra/matrix/to_linear_equiv.lean`
 * `linear_algebra/matrix/trace.lean`
 * `linear_algebra/determinant.lean` (Unfortunately, I could not persuade `git` to remember that I moved the original `determinant.lean` to `matrix/determinant.lean`)
  * `linear_algebra/trace.lean`

### [2021-05-15T14:21:14+00:00](https://github.com/leanprover-community/mathlib/commit/3c27e2ef5907dedcdaea8d4caf10fe65ff761613)
feat(algebra/lie/weights): define product of root vectors and weight vectors ([#7591](https://github.com/leanprover-community/mathlib/pull/#7591))

Also some related results, most notably that the zero root space is a subalgebra.

### [2021-05-15T14:21:13+00:00](https://github.com/leanprover-community/mathlib/commit/515762aaa63937d7bb8d94a362f5d477cecbd0a5)
feat(category_theory/quotient): congruence relations ([#7501](https://github.com/leanprover-community/mathlib/pull/#7501))

Define congruence relations and show that when you quotient a category by a congruence relation, two morphism become equal iff they are related.



Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: David Wärn <codwarn@gmail.com>

### [2021-05-15T08:16:35+00:00](https://github.com/leanprover-community/mathlib/commit/fc94b47f2eb3a02155902dc08327dce74b51ec44)
feat(counterexamples): a counterexample on the Pettis integral ([#7553](https://github.com/leanprover-community/mathlib/pull/#7553))

Phillips (1940) has exhibited under the continuum hypothesis a bounded weakly measurable function which is not Pettis-integrable. We formalize this counterexample.


Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-05-15T08:16:34+00:00](https://github.com/leanprover-community/mathlib/commit/b4b38da8662974dfda42b299e77cd08f5f9fed8e)
feat(category_theory/*/projective): refactor treatment of projective objects ([#7485](https://github.com/leanprover-community/mathlib/pull/#7485))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-05-15T08:16:32+00:00](https://github.com/leanprover-community/mathlib/commit/c63caebbfe10c90083ff8f6b4423515e100a277d)
feat(algebra/homology): homotopies between chain maps ([#7483](https://github.com/leanprover-community/mathlib/pull/#7483))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-15T08:16:31+00:00](https://github.com/leanprover-community/mathlib/commit/cc47aff475ae9585d4a310b3312f8840dabce20c)
feat(algebra/homology): truncation and augmentation of chain complexes ([#7480](https://github.com/leanprover-community/mathlib/pull/#7480))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-15T08:16:30+00:00](https://github.com/leanprover-community/mathlib/commit/5da114c4d3ea5446e628c4bbe954a00c27c4b6c7)
feat(algebraic_topology): the Moore complex of a simplicial object ([#6308](https://github.com/leanprover-community/mathlib/pull/#6308))

## Moore complex

We construct the normalized Moore complex, as a functor
`simplicial_object C ⥤ chain_complex C ℕ`,
for any abelian category `C`.

The `n`-th object is intersection of
the kernels of `X.δ i : X.obj n ⟶ X.obj (n-1)`, for `i = 1, ..., n`.

The differentials are induced from `X.δ 0`,
which maps each of these intersections of kernels to the next.

This functor is one direction of the Dold-Kan equivalence, which we're still working towards.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-05-15T03:59:57+00:00](https://github.com/leanprover-community/mathlib/commit/94aae73d14d420d24981977aea29c23aa9431498)
feat(data/nat/factorial) : descending factorial ([#7527](https://github.com/leanprover-community/mathlib/pull/#7527))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-05-15T02:43:25+00:00](https://github.com/leanprover-community/mathlib/commit/a648af4c660268c40c5fca731553c54d5c9c2eff)
chore(scripts): update nolints.txt ([#7613](https://github.com/leanprover-community/mathlib/pull/#7613))

I am happy to remove some nolints for you!

### [2021-05-14T22:42:57+00:00](https://github.com/leanprover-community/mathlib/commit/bd923f7bef3e6b730a649459739a17607d62b6bf)
chore(geometry/euclidean/triangle): minor style fixes ([#7585](https://github.com/leanprover-community/mathlib/pull/#7585))

### [2021-05-14T19:19:41+00:00](https://github.com/leanprover-community/mathlib/commit/fd3d1178e296772e9304aae2d1fe1aff5db06858)
feat(data/mv_polynomial/basic): Add ring section ([#7507](https://github.com/leanprover-community/mathlib/pull/#7507))

A few lemmas about `monomial` analogous to those for the single-variate polynomials over rings.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-05-14T17:28:32+00:00](https://github.com/leanprover-community/mathlib/commit/a52f471f288e57e642315da928c02812ec05e047)
feat(algebra/homology): chain complexes are an additive category ([#7478](https://github.com/leanprover-community/mathlib/pull/#7478))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-14T14:25:23+00:00](https://github.com/leanprover-community/mathlib/commit/f8dc7224a6e439eee2bd8935d57471c85de6485a)
refactor(topology/algebra/ordered): reduce imports ([#7601](https://github.com/leanprover-community/mathlib/pull/#7601))

Renames `topology.algebra.ordered` to `topology.algebra.order`, and moves the material about `liminf/limsup` and about `extend_from` to separate files, in order to delay imports.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-14T14:25:22+00:00](https://github.com/leanprover-community/mathlib/commit/2373ee624a3240b5c91baa8189a064ffda1884cf)
refactor(set_theory/{surreal, game}): move `mul` from surreal to game ([#7580](https://github.com/leanprover-community/mathlib/pull/#7580))

The next step is to provide several `simp` lemmas for multiplication of pgames in terms of games.
None of these statements involve surreal numbers.

### [2021-05-14T12:02:31+00:00](https://github.com/leanprover-community/mathlib/commit/87adde497c62a4e4e8fdd0fd5cfc46a2d1bd5371)
feat(category_theory/monoidal): the monoidal opposite ([#7602](https://github.com/leanprover-community/mathlib/pull/#7602))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-14T12:02:30+00:00](https://github.com/leanprover-community/mathlib/commit/cc1690e30005fac32cac7654f00d8d75be509588)
feat(analysis/calculus/parametric_integral): derivative of parametric integrals ([#7437](https://github.com/leanprover-community/mathlib/pull/#7437))

from the sphere eversion project

### [2021-05-14T09:48:30+00:00](https://github.com/leanprover-community/mathlib/commit/1199a3de2d414386c712c7b93989e4ee66a96f1b)
feat(analysis/special_functions/exp_log): strengthen statement of `continuous_log'` ([#7607](https://github.com/leanprover-community/mathlib/pull/#7607))

The proof of `continuous (λ x : {x : ℝ // 0 < x}, log x)` also works for `continuous (λ x : {x : ℝ // x ≠ 0}, log x)`.

I keep the preexisting lemma as well since it is used in a number of places and seems generally useful.

### [2021-05-14T09:48:29+00:00](https://github.com/leanprover-community/mathlib/commit/3c7716746588aa899f251437dd2331d1905e182d)
feat(linear_algebra/dual): generalize from field to ring ([#7599](https://github.com/leanprover-community/mathlib/pull/#7599))

### [2021-05-14T04:49:59+00:00](https://github.com/leanprover-community/mathlib/commit/840db09be89fd72203ac994aa17876086283e6ad)
chore(category_theory/groupoid): remove unnecessary imports ([#7600](https://github.com/leanprover-community/mathlib/pull/#7600))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-14T04:49:58+00:00](https://github.com/leanprover-community/mathlib/commit/3124e1d120b521ec5c86890c91acc04568127f97)
feat(data/finset/lattice): choice-free le_sup_iff and lt_sup_iff ([#7584](https://github.com/leanprover-community/mathlib/pull/#7584))

Propagate to `finset` the change to `le_sup_iff [is_total α (≤)]` and `lt_sup_iff [is_total α (≤)]` made in [#7455](https://github.com/leanprover-community/mathlib/pull/#7455).

### [2021-05-14T04:49:57+00:00](https://github.com/leanprover-community/mathlib/commit/bf2750e52ef716079c5ecd0f1fbe0d525b0f86cb)
chore(order/atoms): ask for the correct instances ([#7582](https://github.com/leanprover-community/mathlib/pull/#7582))

replace bounded_lattice by order_bot/order_top where it can

### [2021-05-14T04:49:56+00:00](https://github.com/leanprover-community/mathlib/commit/8829c0d34aadfd30fb012b3ffcc02beec4437a84)
feat(algebra/homology): flipping double complexes ([#7482](https://github.com/leanprover-community/mathlib/pull/#7482))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-05-14T04:49:55+00:00](https://github.com/leanprover-community/mathlib/commit/722b5fc17b06c91208a695f06495973396ae59a9)
feat(algebra/homology): homological complexes are the same as differential objects ([#7481](https://github.com/leanprover-community/mathlib/pull/#7481))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-05-14T04:49:54+00:00](https://github.com/leanprover-community/mathlib/commit/f5327c9052c29128f86c2aad038e433f68509742)
feat(algebra/homology): definition of quasi_iso ([#7479](https://github.com/leanprover-community/mathlib/pull/#7479))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-05-14T01:13:30+00:00](https://github.com/leanprover-community/mathlib/commit/239908eec61d791eb22d86389c4828552adc78f7)
feat(ring_theory/ideal/operations): add apply_coe_mem_map ([#7566](https://github.com/leanprover-community/mathlib/pull/#7566))

This is a continuation of [#7459](https://github.com/leanprover-community/mathlib/pull/#7459). In this PR:

- We modify `ideal.mem_map_of_mem` in order to be consistent with `submonoid.mem_map_of_mem`.
- We modify `submonoid.apply_coe_mem_map` (and friends) to have the submonoid as an explicit variable. This was the case before [#7459](https://github.com/leanprover-community/mathlib/pull/#7459) (but with a different, and not consistent, name). It seems to me that this version makes the code more readable.
- We add `ideal.apply_coe_mem_map` (similar to `submonoid.apply_coe_mem_map`).

Note that `mem_map_of_mem` is used in other places, for example we have `multiset.mem_map_of_mem`, but since a multiset is not a type there is no `apply_coe_mem_map` to add there.

### [2021-05-13T15:18:24+00:00](https://github.com/leanprover-community/mathlib/commit/090c9acc2c646088c43681b8e5c26f35fa005184)
chore(scripts): update nolints.txt ([#7597](https://github.com/leanprover-community/mathlib/pull/#7597))

I am happy to remove some nolints for you!

### [2021-05-13T15:18:24+00:00](https://github.com/leanprover-community/mathlib/commit/f792356479e9d65e89b8e1790166c52a3f7d2885)
chore(order/galois_connection): ask for the correct instances ([#7594](https://github.com/leanprover-community/mathlib/pull/#7594))

replace partial_order by preorder where it can and general tidy up of this old style file

### [2021-05-13T15:18:23+00:00](https://github.com/leanprover-community/mathlib/commit/ce455949dfec1d914d08e1e00dd281c397636dd2)
feat(algebra/homology/single): chain complexes supported in a single degree ([#7477](https://github.com/leanprover-community/mathlib/pull/#7477))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-05-13T13:44:39+00:00](https://github.com/leanprover-community/mathlib/commit/c5faeade6bc667a77c0c91961da3dbefb96671d6)
feat(category_theory/preadditive/functor_category): preadditive instance for C \func D ([#7533](https://github.com/leanprover-community/mathlib/pull/#7533))

### [2021-05-12T16:37:46+00:00](https://github.com/leanprover-community/mathlib/commit/43bd924d5ac3c713ec721ccf9065167b87d288c8)
feat(topology/category/Profinite): iso_equiv_homeo ([#7529](https://github.com/leanprover-community/mathlib/pull/#7529))

From LTE

### [2021-05-12T15:10:58+00:00](https://github.com/leanprover-community/mathlib/commit/08f44043509bf01c82d19840c4c648822526d4d8)
refactor(ring_theory/perfection): remove coercion in the definition of the type ([#7583](https://github.com/leanprover-community/mathlib/pull/#7583))

Defining the type `ring.perfection R p` as a plain subtype (but inheriting the semiring or ring instances from a `subsemiring` structure) removes several coercions and helps Lean a lot when elaborating or unifying.

### [2021-05-12T10:02:56+00:00](https://github.com/leanprover-community/mathlib/commit/6b62b9f7b2fdd402f975bc7517bb786f28e565a8)
refactor(algebra/module): rename `smul_injective hx` to `smul_left_injective M hx` ([#7577](https://github.com/leanprover-community/mathlib/pull/#7577))

This is a follow-up PR to [#7548](https://github.com/leanprover-community/mathlib/pull/#7548).

 * Now that there is also a `smul_right_injective`, we should disambiguate the previous `smul_injective` to `smul_left_injective`.
 * The `M` parameter can't be inferred from arguments before the colon, so we make it explicit in `smul_left_injective` and `smul_right_injective`.

### [2021-05-12T02:19:18+00:00](https://github.com/leanprover-community/mathlib/commit/6ee8f0e27f9bf253cd16235367eaecaae86dc5ab)
doc(tactic/interactive): link swap and rotate to each other ([#7550](https://github.com/leanprover-community/mathlib/pull/#7550))

They both do 'make a different goal the current one'.

### [2021-05-11T22:59:11+00:00](https://github.com/leanprover-community/mathlib/commit/a7e1696f5b1bd29f1575d99162e9f80141b28e4c)
fix(tactic/derive_fintype): use correct universes ([#7581](https://github.com/leanprover-community/mathlib/pull/#7581))

Reported on [Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type.20class.20error.20with.20mk_fintype_instance/near/238209823).

### [2021-05-11T22:59:10+00:00](https://github.com/leanprover-community/mathlib/commit/0538d2cc54dd969ff703889736ffa84ab97906c4)
chore(*): reducing imports ([#7573](https://github.com/leanprover-community/mathlib/pull/#7573))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-11T18:00:40+00:00](https://github.com/leanprover-community/mathlib/commit/9cf732c2159789d54a1a7126007320d86d3598d5)
chore(logic/nontrivial): adjust priority of `nonempty` instances ([#7563](https://github.com/leanprover-community/mathlib/pull/#7563))

This makes `nontrivial.to_nonempty` and `nonempty_of_inhabited` higher priority so they are tried before things like `add_torsor.nonempty` which starts traversing the algebra heirarchy.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/char_zero/near/238103102)

### [2021-05-11T18:00:39+00:00](https://github.com/leanprover-community/mathlib/commit/3048d6bc58a21c382d7a8dc5671a9f9a2601e026)
feat(ring_theory/localization): Define local ring hom on localization at prime ideal ([#7522](https://github.com/leanprover-community/mathlib/pull/#7522))

Defines the induced ring homomorphism on the localizations at a prime ideal and proves that it is local and uniquely determined.

### [2021-05-11T14:57:06+00:00](https://github.com/leanprover-community/mathlib/commit/b746e82c8fdf0c3923b2281bb3597490eee6f76f)
feat(linear_algebra/finsupp): adjust apply lemma for `finsupp.dom_lcongr` ([#7549](https://github.com/leanprover-community/mathlib/pull/#7549))

This is a split-off dependency from [#7496](https://github.com/leanprover-community/mathlib/pull/#7496).





Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2021-05-11T10:56:56+00:00](https://github.com/leanprover-community/mathlib/commit/9191a67049073bb244ada5a9f04b6f1df8bc48e5)
perf(ci): skip linting and tests on master branch ([#7576](https://github.com/leanprover-community/mathlib/pull/#7576))

Do not run lints and tests on the master branch.  These checks have already passed on the staging branch, so there should be no need to repeat them on master.

### [2021-05-11T07:41:53+00:00](https://github.com/leanprover-community/mathlib/commit/b4c7654b2d97962f666c0539e57bda55e8b8bdc7)
feat(algebra/homology): redesign of homological complexes ([#7473](https://github.com/leanprover-community/mathlib/pull/#7473))

This is a complete redesign of our library on homological complexes and homology.

This PR replaces the current definition of `chain_complex` which had proved cumbersome to work with.

The fundamental change is that chain complexes are now indexed by a type equipped with a `complex_shape`, rather than by a monoid. A `complex_shape ι` contains a relation `r`, with the intent that we will only allow a differential `X i ⟶ X j` when `r i j`. This allows, for example, complexes indexed either by `nat` or `int`, with differentials going either up or down.

We set up the initial theory without referring to "successors" and "predecessors" in the type `ι`, to ensure we can avoid dependent type theory hell issues involving arithmetic in the index of a chain group. We achieve this by having a chain complex consist of morphisms `d i j : X i ⟶ X j` for all `i j`, but with an additional axiom saying this map is zero unless `r i j`. This means we can easily talk about, e.g., morphisms from `X (i - 1 + 1)` to `X (i + 1)` when we need to.

However after not too long we also set up `option` valued `next` and `prev` functions which make an arbitrary choice of such successors and predecessors if they exist. Using these, we define morphisms `d_to j`, which lands in `X j`, and has source either `X i` for some `r i j`, or the zero object if these isn't such an `i`. These morphisms are very convenient when working "at the edge of a complex", e.g. when indexing by `nat`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-05-11T07:41:52+00:00](https://github.com/leanprover-community/mathlib/commit/12c9ddf1aebe57fbf7a3cadb464a7c0816e0def1)
feat(set_theory/{pgame, surreal}): add `left_distrib_equiv` and `right_distrib_equiv` for pgames ([#7440](https://github.com/leanprover-community/mathlib/pull/#7440))

and several other auxiliary lemmas.

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal.20numbers)

### [2021-05-11T05:55:39+00:00](https://github.com/leanprover-community/mathlib/commit/ca4024b3741214b491710187709892e240e1401c)
feat(algebraic_topology/cech_nerve): Adds a definition of the Cech nerve associated to an arrow. ([#7547](https://github.com/leanprover-community/mathlib/pull/#7547))

Also adds a definition of augmented simplicial objects as a comma category.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-05-11T04:39:37+00:00](https://github.com/leanprover-community/mathlib/commit/8dc848c5a5f3062bbfa92d5eb3e3c12756389ff4)
feat(ring_theory/finiteness): add finite_type_iff_group_fg ([#7569](https://github.com/leanprover-community/mathlib/pull/#7569))

We add here a simple modification of `monoid_algebra.fg_of_finite_type`: a group algebra is of finite type if and only if the group is finitely generated (as group opposed to as monoid).

### [2021-05-11T01:49:43+00:00](https://github.com/leanprover-community/mathlib/commit/fab419784fb801a4a0fc505f2ddb25682bc95418)
chore(scripts): update nolints.txt ([#7570](https://github.com/leanprover-community/mathlib/pull/#7570))

I am happy to remove some nolints for you!

### [2021-05-10T22:45:44+00:00](https://github.com/leanprover-community/mathlib/commit/3fd7cc3674eccd2f4f7367a986945e2c48a5806e)
feat(ring_theory/hahn_series): extend the domain of a Hahn series by an `order_embedding` ([#7551](https://github.com/leanprover-community/mathlib/pull/#7551))

Defines `hahn_series.emb_domain`, which extends the domain of a Hahn series by embedding it into a larger domain in an order-preserving way.
Bundles `hahn_series.emb_domain` with additional properties as `emb_domain_linear_map`, `emb_domain_ring_hom`, and `emb_domain_alg_hom` under additional conditions.
Defines the ring homomorphism `hahn_series.of_power_series` and the algebra homomorphism `hahn_series.of_power_series_alg`, which map power series to Hahn series over an ordered semiring using `hahn_series.emb_domain` with `nat.cast` as the embedding.

### [2021-05-10T22:45:43+00:00](https://github.com/leanprover-community/mathlib/commit/81c98d5b500534b861f97e7626c4b5c6967923f7)
feat(ring_theory/hahn_series): Hahn series form a field ([#7495](https://github.com/leanprover-community/mathlib/pull/#7495))

Uses Higman's Lemma to define `summable_family.powers`, a summable family consisting of the powers of a Hahn series of positive valuation
Uses `summable_family.powers` to define inversion on Hahn series over a field and linear-ordered value group, making the type of Hahn series a field.
Shows that a Hahn series over an integral domain and linear-ordered value group  `is_unit` if and only if its lowest coefficient is.

### [2021-05-10T22:45:42+00:00](https://github.com/leanprover-community/mathlib/commit/1cbb31de1fbd7aa36c1f1d541545933c018586cc)
feat(analysis/normed_space/normed_group_hom): add lemmas ([#7474](https://github.com/leanprover-community/mathlib/pull/#7474))

From LTE.

Written by @PatrickMassot 

- [x] depends on: [#7459](https://github.com/leanprover-community/mathlib/pull/#7459) 



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-05-10T16:44:24+00:00](https://github.com/leanprover-community/mathlib/commit/b7ab74ab16d3e840c0da1597d54fef0ce6d0bc56)
feat(algebra/lie/weights): add lemma `root_space_comap_eq_weight_space` ([#7565](https://github.com/leanprover-community/mathlib/pull/#7565))

### [2021-05-10T16:44:23+00:00](https://github.com/leanprover-community/mathlib/commit/ac1f3df46a7c3553940a20f484b4b75e5f9371a4)
chore(*): remove unnecessary `import tactic` ([#7560](https://github.com/leanprover-community/mathlib/pull/#7560))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-10T16:44:22+00:00](https://github.com/leanprover-community/mathlib/commit/17cba543c25b004ea5bb1061641819bcaa3492c4)
feat(data/int/basic): sign raised to an odd power ([#7559](https://github.com/leanprover-community/mathlib/pull/#7559))

Since sign is either -1, 0, or 1, it is unchanged when raised to an odd power.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-05-10T16:44:21+00:00](https://github.com/leanprover-community/mathlib/commit/3417ee07f732a4ac364554ef0570fe4269b6e2de)
chore(deprecated/group): relax monoid to mul_one_class ([#7556](https://github.com/leanprover-community/mathlib/pull/#7556))

This fixes an annoyance where `monoid_hom.is_monoid_hom` didn't work on non-associative monoids.

### [2021-05-10T16:44:20+00:00](https://github.com/leanprover-community/mathlib/commit/477af65c4e426e1bba638bdff8ebe973487bfeb4)
feat(category_theory/limits/shapes/wide_pullbacks): Adds some wrappers around the (co)limit api for wide pullbacks/pushouts ([#7546](https://github.com/leanprover-community/mathlib/pull/#7546))

This PR adds some wrappers (mostly abbreviations) around the (co)limit api specifically for wide pullbacks and wide pushouts.

### [2021-05-10T16:44:19+00:00](https://github.com/leanprover-community/mathlib/commit/92395fdf63abb96e2e49ecc5ab4fb9c5a562bad8)
feat(data/list/rotate): is_rotated ([#7299](https://github.com/leanprover-community/mathlib/pull/#7299))

`is_rotated l₁ l₂` or `l₁ ~r l₂` asserts that `l₁` and `l₂` are cyclic permutations
  of each other. This is defined by claiming that `∃ n, l.rotate n = l'`.

### [2021-05-10T13:15:31+00:00](https://github.com/leanprover-community/mathlib/commit/41c7b1e3c45cb8c1fa391e89cac74766b7869c36)
chore(category_theory/Fintype): remove redundant lemmas ([#7531](https://github.com/leanprover-community/mathlib/pull/#7531))

These lemmas exist for arbitrary concrete categories.


- [x] depends on: [#7530](https://github.com/leanprover-community/mathlib/pull/#7530)

### [2021-05-10T13:15:30+00:00](https://github.com/leanprover-community/mathlib/commit/b9f4420c74311a42b6870f9bf88fa42e871b595b)
feat(geometry/euclidean/triangle): add Stewart's Theorem + one similarity lemma ([#7327](https://github.com/leanprover-community/mathlib/pull/#7327))

### [2021-05-10T13:15:28+00:00](https://github.com/leanprover-community/mathlib/commit/03b88c1405fa7419a19b9764a531923b75a7581e)
feat(algebra/category/Module): Free R C, the free R-linear completion of a category ([#7177](https://github.com/leanprover-community/mathlib/pull/#7177))

The free R-linear completion of a category.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2021-05-10T07:36:17+00:00](https://github.com/leanprover-community/mathlib/commit/48104c3a22ae4b35d92b8ad30831eb1591049958)
feat(data/set/lattice): (b)Union and (b)Inter lemmas ([#7557](https://github.com/leanprover-community/mathlib/pull/#7557))

from LTE

### [2021-05-10T07:36:16+00:00](https://github.com/leanprover-community/mathlib/commit/b57769711a59cc6e10ae8a8680f727075f73f123)
feat(data/matrix/basic): add missing smul instances, generalize lemmas to work on scalar towers ([#7544](https://github.com/leanprover-community/mathlib/pull/#7544))

This also fixes the `add_monoid_hom.map_zero` etc lemmas to not require overly strong typeclasses on `α`

This removes the `matrix.smul_apply` lemma since `pi.smul_apply` and `smul_eq_mul` together replace it.

### [2021-05-10T07:36:15+00:00](https://github.com/leanprover-community/mathlib/commit/38bf2abd5815b5704f1aed6bcc0f693be2aab46d)
feat(field_theory/abel_ruffini): Version of solvable_by_rad.is_solvable ([#7509](https://github.com/leanprover-community/mathlib/pull/#7509))

This is a version of `solvable_by_rad.is_solvable`, which will be the final step of the abel-ruffini theorem.

### [2021-05-10T07:36:14+00:00](https://github.com/leanprover-community/mathlib/commit/ef90a7ab6c0edc96f34ddcd7b0721a82113061d1)
refactor(*): bundle `is_basis` ([#7496](https://github.com/leanprover-community/mathlib/pull/#7496))

This PR replaces the definition of a basis used in mathlib and fixes the usages throughout.

Rationale: Previously, `is_basis` was a predicate on a family of vectors, saying this family is linear independent and spans the whole space. We encountered many small annoyances when working with these unbundled definitions, for example complicated `is_basis` arguments being hidden in the goal view or slow elaboration when mapping a basis to a slightly different set of basis vectors. The idea to turn `basis` into a bundled structure originated in the discussion on [#4949](https://github.com/leanprover-community/mathlib/pull/#4949). @digama0 suggested on Zulip to identify these "bundled bases" with their map `repr : M ≃ₗ[R] (ι →₀ R)` that sends a vector to its coordinates. (In fact, that specific map used to be only a `linear_map` rather than an equiv.)

Overview of the changes:
 - The `is_basis` predicate has been replaced with the `basis` structure. 
 - Parameters of the form `{b : ι → M} (hb : is_basis R b)` become a single parameter `(b : basis ι R M)`.
 - Constructing a basis from a linear independent family spanning the whole space is now spelled `basis.mk hli hspan`, instead of `and.intro hli hspan`.
 -  You can also use `basis.of_repr` to construct a basis from an equivalence `e : M ≃ₗ[R] (ι →₀ R)`. If `ι` is a `fintype`, you can use `basis.of_equiv_fun (e : M ≃ₗ[R] (ι → R))` instead, saving you from having to work with `finsupp`s.
 - Most declaration names that used to contain `is_basis` are now spelled with `basis`, e.g. `pi.is_basis_fun` is now `pi.basis_fun`.
 - Theorems of the form `exists_is_basis K V : ∃ (s : set V) (b : s -> V), is_basis K b` and `finite_dimensional.exists_is_basis_finset K V : [finite_dimensional K V] -> ∃ (s : finset V) (b : s -> V), is_basis K b` have been replaced with (noncomputable) defs such as `basis.of_vector_space K V : basis (basis.of_vector_space_index K V) K V` and `finite_dimensional.finset_basis : basis (finite_dimensional.finset_basis_index K V) K V`; the indexing sets being a separate definition means we can declare a `fintype (basis.of_vector_space_index K V)` instance on finite dimensional spaces, rather than having to use `cases exists_is_basis_fintype K V with ...` each time.
 - Definitions of a `basis` are now, wherever practical, accompanied by `simp` lemmas giving the values of `coe_fn` and `repr` for that basis.
 - Some auxiliary results like `pi.is_basis_fun₀` have been removed since they are no longer needed.

Basic API overview:
* `basis ι R M` is the type of `ι`-indexed `R`-bases for a module `M`, represented by a linear equiv `M ≃ₗ[R] ι →₀ R`.
* the basis vectors of a basis `b` are given by `b i` for `i : ι`
* `basis.repr` is the isomorphism sending `x : M` to its coordinates `basis.repr b x : ι →₀ R`. The inverse of `b.repr` is `finsupp.total _ _ _ b`. The converse, turning this isomorphism into a basis, is called `basis.of_repr`.
* If `ι` is finite, there is a variant of `repr` called `basis.equiv_fun b : M ≃ₗ[R] ι → R`. The converse, turning this isomorphism into a basis, is called `basis.of_equiv_fun`.
* `basis.constr hv f` constructs a linear map `M₁ →ₗ[R] M₂` given the values `f : ι → M₂` at the
  basis elements `⇑b : ι → M₁`.
* `basis.mk`: a linear independent set of vectors spanning the whole module determines a basis (the converse consists of `basis.linear_independent` and `basis.span_eq`
* `basis.ext` states that two linear maps are equal if they coincide on a basis; similar results are available for linear equivs (if they coincide on the basis vectors), elements (if their coordinates coincide) and the functions `b.repr` and `⇑b`.
* `basis.of_vector_space` states that every vector space has a basis.
* `basis.reindex` uses an equiv to map a basis to a different indexing set, `basis.map` uses a linear equiv to map a basis to a different module

Zulip discussions:
 * https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Bundled.20basis
 * https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.234949

### [2021-05-10T07:36:13+00:00](https://github.com/leanprover-community/mathlib/commit/f985e364816c3f17b6c85d11997524c651054085)
feat(group_theory/subgroup): add mem_map_of_mem ([#7459](https://github.com/leanprover-community/mathlib/pull/#7459))

From LTE.

Written by @PatrickMassot 



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-05-10T07:36:12+00:00](https://github.com/leanprover-community/mathlib/commit/4a8467a45cdcd508c8ad4d97a47e3a2ed5e22c8a)
feat(data/equiv/basic): equiv.curry ([#7458](https://github.com/leanprover-community/mathlib/pull/#7458))

This renames `equiv.arrow_arrow_equiv_prod_arrow` to `(equiv.curry _ _ _).symm` to make it easier to find and match `function.curry`.

* `cardinal.power_mul` is swapped, so that its name makes sense.
* renames `linear_equiv.uncurry` to `linear_equiv.curry` and swaps sides

Also add `@[simps]` to two equivs.

### [2021-05-10T06:01:59+00:00](https://github.com/leanprover-community/mathlib/commit/7150c90f4db4b908c3977c6bdcd1ba974cd53ecb)
refactor(ring_theory/localization): Golf two proofs ([#7520](https://github.com/leanprover-community/mathlib/pull/#7520))

Golfing two proofs and changing their order.

### [2021-05-09T22:18:48+00:00](https://github.com/leanprover-community/mathlib/commit/ea0043ca0f7c83de3103c0a5b87b7b39717cb837)
feat(topology): tiny new lemmas ([#7554](https://github.com/leanprover-community/mathlib/pull/#7554))

from LTE





Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-05-09T12:20:12+00:00](https://github.com/leanprover-community/mathlib/commit/735a26e5e026d6a2b564a0baf27a9fa12cb48866)
chore(group_theory): some new convenience lemmas ([#7555](https://github.com/leanprover-community/mathlib/pull/#7555))

from LTE

### [2021-05-09T12:20:10+00:00](https://github.com/leanprover-community/mathlib/commit/581064fdd618bf9945d24bbfd3ebc3f58d7f5d14)
feat(uniform_space/cauchy): cauchy_seq lemmas ([#7528](https://github.com/leanprover-community/mathlib/pull/#7528))

from the Liquid Tensor Experiment





Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-05-09T10:00:57+00:00](https://github.com/leanprover-community/mathlib/commit/bf229dd503a27f5a0b35df06c132840ddb1b2bdc)
feat(topology/metric_space/basic): dist_ne_zero ([#7552](https://github.com/leanprover-community/mathlib/pull/#7552))

### [2021-05-08T13:26:29+00:00](https://github.com/leanprover-community/mathlib/commit/132328c4dd48da87adca5d408ca54f315282b719)
feat(algebra/lie/weights): define weight spaces of Lie modules ([#7537](https://github.com/leanprover-community/mathlib/pull/#7537))

### [2021-05-08T08:13:59+00:00](https://github.com/leanprover-community/mathlib/commit/4a8a59506baca2da059071a7ed462ba0c5f110aa)
feat(topology/subset_properties, homeomorph): lemmata about embeddings ([#7431](https://github.com/leanprover-community/mathlib/pull/#7431))

Two lemmata: (i) embedding to homeomorphism (ii) a closed embedding is proper

Coauthored with @hrmacbeth

### [2021-05-08T05:52:42+00:00](https://github.com/leanprover-community/mathlib/commit/583ad823a08bd3cbc3a741173569300fb14f9813)
feat(algebraic_geometry/structure_sheaf): Structure sheaf on basic opens ([#7405](https://github.com/leanprover-community/mathlib/pull/#7405))

Proves that `to_basic_open` is an isomorphism of commutative rings. Also adds Hartshorne as a reference.



Co-authored-by: Justus Springer <justusspringer@gmx.de>

### [2021-05-07T22:54:26+00:00](https://github.com/leanprover-community/mathlib/commit/dbcd45460d776dd598e4185652b1f4af0da4753f)
feat(topology/category/*): Add alternative explicit limit cones for `Top`, etc. and shows `X : Profinite` is a limit of finite sets. ([#7448](https://github.com/leanprover-community/mathlib/pull/#7448))

This PR redefines `Top.limit_cone`, and defines similar explicit limit cones for `CompHaus` and `Profinite`.
Using the definition with the subspace topology makes the proofs that the limit is compact, t2 and/or totally disconnected much easier.

This also expresses any `X : Profinite` as a limit of its discrete quotients, which are all finite.



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2021-05-07T22:54:25+00:00](https://github.com/leanprover-community/mathlib/commit/515fb2f01c2abdcff77ae61b919c5e3a706b69f0)
feat(group_theory/perm/*): lemmas about `extend_domain`, `fin_rotate`, and `fin.cycle_type` ([#7447](https://github.com/leanprover-community/mathlib/pull/#7447))

Shows how `disjoint`, `support`, `is_cycle`, and `cycle_type` behave under `extend_domain`
Calculates `support` and `cycle_type` for `fin_rotate` and `fin.cycle_type`
Shows that the normal closure of `fin_rotate 5` in `alternating_group (fin 5)` is the whole alternating group.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-05-07T20:26:33+00:00](https://github.com/leanprover-community/mathlib/commit/5cfcb6a0d598b25b1d8441bbd82ade52a64e9865)
feat(ring_theory/hahn_series): order of a nonzero Hahn series, reindexing summable families ([#7444](https://github.com/leanprover-community/mathlib/pull/#7444))

Defines `hahn_series.order`, the order of a nonzero Hahn series
Restates `add_val` in terms of `hahn_series.order`
Defines `hahn_series.summable_family.emb_domain`, reindexing a summable family using an embedding

### [2021-05-07T09:30:47+00:00](https://github.com/leanprover-community/mathlib/commit/72e151d8962ff8139d7a91b76ae43521873af505)
feat(topology/uniform_space): is_closed_of_spread_out ([#7538](https://github.com/leanprover-community/mathlib/pull/#7538))

See [Zulip](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/integers.20are.20closed.20in.20reals)

### [2021-05-07T09:30:46+00:00](https://github.com/leanprover-community/mathlib/commit/301542a463df5d9ab52db580598cf37629c873ac)
feat(group_theory.quotient_group): add eq_iff_div_mem ([#7523](https://github.com/leanprover-community/mathlib/pull/#7523))

From LTE.

Written by @PatrickMassot 



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-05-07T09:30:45+00:00](https://github.com/leanprover-community/mathlib/commit/63a178230f10028303c234e5b44c73c45534ad1e)
feat(field_theory/polynomial_galois_group): More flexible version of gal_action_hom_bijective_of_prime_degree ([#7508](https://github.com/leanprover-community/mathlib/pull/#7508))

Since the number of non-real roots is even, we can make a more flexible version of `gal_action_hom_bijective_of_prime_degree`. This flexibility will be helpful when working with a specific polynomial.

### [2021-05-07T09:30:44+00:00](https://github.com/leanprover-community/mathlib/commit/565310f13564079f01446afb627bfe658e6dbbed)
feat(data/nat/cast): pi.coe_nat and pi.nat_apply ([#7492](https://github.com/leanprover-community/mathlib/pull/#7492))

### [2021-05-07T09:30:43+00:00](https://github.com/leanprover-community/mathlib/commit/190d4e28ef0492ec2decb3aacf256774c631ec99)
feat(algebra/module/basic): smul_add_hom_one ([#7461](https://github.com/leanprover-community/mathlib/pull/#7461))

### [2021-05-07T09:30:42+00:00](https://github.com/leanprover-community/mathlib/commit/91d5aa6b70534c87b2fb1f9597bb506620e5eb58)
feat(category_theory/arrow): arrow.mk_inj ([#7456](https://github.com/leanprover-community/mathlib/pull/#7456))

From LTE






Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-05-07T09:30:40+00:00](https://github.com/leanprover-community/mathlib/commit/6fc8b2a95ea12b769bc916a4e679991be6afb9d9)
refactor(*): more choice-free proofs ([#7455](https://github.com/leanprover-community/mathlib/pull/#7455))

Now that lean v3.30 has landed (and specifically leanprover-community/lean[#560](https://github.com/leanprover-community/mathlib/pull/#560)), we can finally make some progress on making a significant fraction of mathlib foundations choice-free. This PR does the following:

* No existing theorem statements have changed (except `linear_nonneg_ring` as noted below).
* A number of new theorems have been added to the `decidable` namespace, proving choice-free versions of lemmas under the assumption that something is decidable. These are primarily concentrated in partial orders and ordered rings, because total orders are already decidable, but there are some interesting lemmas about partial orders that require decidability of `le`.
* `linear_nonneg_ring` was changed to include decidability of `nonneg`, for consistency with linear ordered rings. No one is using this anyway so there shouldn't be any fallout.
* A lot of the `ordered_semiring` lemmas need `decidable` versions now because one of the core axioms, `mul_le_mul_of_nonneg_left`, is derived by LEM from an equivalent statement about lt instead of being an actual axiom. If this is refactored, these theorems can be removed again.
* The main files which were scoured of choicy proofs are: `algebra.ordered_group`,  `algebra.ordered_ring`, `data.nat.basic`, `data.int.basic`, `data.list.basic`, and `computability.halting`.
* The end goal of this was to prove `computable_pred.halting_problem` without assuming choice, finally validating a claim I made more than two years ago in my [paper](https://arxiv.org/abs/1810.08380) on the formalization.

I have not yet investigated a linter for making sure that these proofs stay choice-free; this can be done in a follow-up PR.

### [2021-05-07T09:30:39+00:00](https://github.com/leanprover-community/mathlib/commit/dec29aa3b2e58e4d2416246e4adde1d8750c4cbb)
feat(group_theory/solvable): S_5 is not solvable ([#7453](https://github.com/leanprover-community/mathlib/pull/#7453))

This is a rather hacky proof that S_5 is not solvable. The proper proof via the simplicity of A_5 will eventually replace this. But until then, this result is needed for abel-ruffini.

Most of the work done by Jordan Brown



Co-authored-by: Thomas Browning <tb65536@uw.edu>
Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-05-07T09:30:38+00:00](https://github.com/leanprover-community/mathlib/commit/95b91b38e2b20cac55bf04c6a039e43dff9bc62e)
refactor(group_theory/perm/*): disjoint and support in own file ([#7450](https://github.com/leanprover-community/mathlib/pull/#7450))

The group_theory/perm/sign file was getting large and too broad in scope. This refactor pulls out `perm.support`, `perm.is_swap`, and `perm.disjoint` into a separate file.

A simpler version of [#7118](https://github.com/leanprover-community/mathlib/pull/#7118).

### [2021-05-07T09:30:37+00:00](https://github.com/leanprover-community/mathlib/commit/251a42b5622cb382d24c83ef18b836696f2b3dac)
feat(ring_theory/finiteness): add monoid_algebra.ft_iff_fg ([#7445](https://github.com/leanprover-community/mathlib/pull/#7445))

We prove here `add monoid_algebra.ft_iff_fg`: the monoid algebra is of finite type if and only if the monoid is finitely generated.

- [x] depends on: [#7409](https://github.com/leanprover-community/mathlib/pull/#7409)

### [2021-05-07T09:30:36+00:00](https://github.com/leanprover-community/mathlib/commit/be1af7ced62b4889808958aea377fbbc7097d964)
feat(linear_algebra/quadratic_form): provide `distrib_mul_action S (quadratic_form M R)` when `S` has no addition. ([#7443](https://github.com/leanprover-community/mathlib/pull/#7443))

The end goal here is to provide `has_scalar (units R) (quadratic_form M R)` for possible use in [#7427](https://github.com/leanprover-community/mathlib/pull/#7427)

### [2021-05-07T09:30:35+00:00](https://github.com/leanprover-community/mathlib/commit/5d873a65b2bf45435b79e6e6606f3a95518b6ad4)
feat(algebra/monoid_algebra): add add_monoid_algebra_ring_equiv_direct_sum ([#7422](https://github.com/leanprover-community/mathlib/pull/#7422))

The only interesting result here is:

    add_monoid_algebra_ring_equiv_direct_sum : add_monoid_algebra M ι ≃+* ⨁ i : ι, M

The rest of the new file is just boilerplate to translate `dfinsupp.single` into `direct_sum.of`.

### [2021-05-07T09:30:34+00:00](https://github.com/leanprover-community/mathlib/commit/3a5c8711beeadc4ec0bb90838c7854c68b2accc1)
refactor(polynomial/*): make polynomials irreducible ([#7421](https://github.com/leanprover-community/mathlib/pull/#7421))

Polynomials are the most basic objects in field theory. Making them irreducible helps Lean, because it can not try to unfold things too far, and it helps the user because it forces him to use a sane API instead of mixing randomly stuff from finsupp and from polynomials, as used to be the case in mathlib before this PR.

### [2021-05-07T09:30:33+00:00](https://github.com/leanprover-community/mathlib/commit/322ccc54f3fcee9b7011ef2ea5b5aebaee9536c8)
feat(finset/basic): downward induction for finsets ([#7379](https://github.com/leanprover-community/mathlib/pull/#7379))

### [2021-05-07T09:30:31+00:00](https://github.com/leanprover-community/mathlib/commit/11a06de10064af153d404a045c13a444d33ca3e7)
feat(order/closure): closure of unions and bUnions ([#7361](https://github.com/leanprover-community/mathlib/pull/#7361))

prove closure_closure_union and similar

### [2021-05-07T09:30:30+00:00](https://github.com/leanprover-community/mathlib/commit/b20e66477aa2b1ec4389e263caec3e129eb9f879)
feat(order/well_founded_set): Higman's Lemma ([#7212](https://github.com/leanprover-community/mathlib/pull/#7212))

Proves Higman's Lemma: if `r` is partially well-ordered on `s`, then `list.sublist_forall2` is partially well-ordered on the set of lists whose elements are in `s`.

### [2021-05-07T05:00:03+00:00](https://github.com/leanprover-community/mathlib/commit/cd5864f3c136b95e1fef8c8fc06d7447d016f77f)
chore(scripts): update nolints.txt ([#7541](https://github.com/leanprover-community/mathlib/pull/#7541))

I am happy to remove some nolints for you!

### [2021-05-07T05:00:02+00:00](https://github.com/leanprover-community/mathlib/commit/6a7ddcc22adbfa8e79b5070bd41be7859b79d368)
ci(.github/workflows/{build,dependent-issues}.yml): auto-cancel workflows on previous commits ([#7536](https://github.com/leanprover-community/mathlib/pull/#7536))

After this is merged, pushing a new commit to a branch in this repo should cancel the "continuous integration" and "dependent issues" workflows running on any older commits on that branch.

### [2021-05-07T05:00:01+00:00](https://github.com/leanprover-community/mathlib/commit/93f9b3defa06c442497fbc88795d3ff2f201379c)
ci(.github/workflows/build.yml): switch to trepplein ([#7532](https://github.com/leanprover-community/mathlib/pull/#7532))

Reduces the leanchecker time from 6+57 minutes to 6+16 minutes.

### [2021-05-07T04:59:59+00:00](https://github.com/leanprover-community/mathlib/commit/f44a5eb15e4499ed6d45d5b79154b3d74d8266fe)
feat(category_theory/concrete_category): id_apply, comp_apply ([#7530](https://github.com/leanprover-community/mathlib/pull/#7530))

This PR renames

* `category_theory.coe_id` to `category_theory.id_apply`
* `category_theory.coe_comp` to `category_theory.comp_apply`

The names that are hence free up
are then redefined for "unapplied" versions of the same lemmas.

The `elementwise` tactic uses the old lemmas (with their new names).

We need minor fixes in the rest of the library because of the name changes.

### [2021-05-07T04:59:59+00:00](https://github.com/leanprover-community/mathlib/commit/0ead8ee9f6247cc9c6943f08de157e5166a03312)
feat(ring_theory/localization): Characterize units in localization at prime ideal ([#7519](https://github.com/leanprover-community/mathlib/pull/#7519))

Adds a few lemmas characterizing units and nonunits (elements of the maximal ideal) in the localization at a prime ideal.

### [2021-05-07T04:59:57+00:00](https://github.com/leanprover-community/mathlib/commit/755cb75f0228ca336be1933f0d47caf2b121ce28)
feat(data/list/basic): non-meta to_chunks ([#7517](https://github.com/leanprover-community/mathlib/pull/#7517))

A non-meta definition of the `list.to_chunks` method, plus some basic theorems about it.

### [2021-05-07T04:59:56+00:00](https://github.com/leanprover-community/mathlib/commit/930485c1d0c95f31d2f1b2fdd8a11551f7eb87d1)
feat(linear_algebra/tensor_product): distrib_mul_actions are inherited ([#7516](https://github.com/leanprover-community/mathlib/pull/#7516))

It turns out that `tensor_product.has_scalar` requires only `distrib_mul_action` and not `semimodule` on its components.
As a result, a tensor product can inherit the `distrib_mul_action` structure of its components too.
Notably, this would enable `has_scalar (units R) (M ⊗[R] N)` in future.

### [2021-05-07T04:59:55+00:00](https://github.com/leanprover-community/mathlib/commit/b903ea2841ad8922bdd1ea24e520d5856ed5b7e2)
chore(algebra/module/linear_map): add missing rfl lemmas ([#7515](https://github.com/leanprover-community/mathlib/pull/#7515))

I've found these most useful for writing along in reverse so that I can use `linear_map.map_smul_of_tower`.

### [2021-05-07T04:59:54+00:00](https://github.com/leanprover-community/mathlib/commit/6d25f3ae569550cffaad53af8b098e8f75830dcb)
feat(category_theory/opposites): Adds equivalences for functor categories. ([#7505](https://github.com/leanprover-community/mathlib/pull/#7505))

This PR adds the following equivalences for categories `C` and `D`:
1. `(C ⥤ D)ᵒᵖ ≌ Cᵒᵖ ⥤ Dᵒᵖ` induced by `op` and `unop`.
2.  `(Cᵒᵖ ⥤ D)ᵒᵖ ≌ (C ⥤ Dᵒᵖ)` induced by `left_op` and `right_op`.

### [2021-05-07T04:59:53+00:00](https://github.com/leanprover-community/mathlib/commit/efb283ca9719a84079eb809cc070893e0ca66ea0)
feat(data/dfinsupp): add `finset_sum_apply` and `coe_finset_sum` ([#7499](https://github.com/leanprover-community/mathlib/pull/#7499))

The names of the new`add_monoid_hom`s parallel the names in my recent `quadratic_form` PR, [#7417](https://github.com/leanprover-community/mathlib/pull/#7417).

### [2021-05-07T04:59:51+00:00](https://github.com/leanprover-community/mathlib/commit/9acbe5883f8d726a3eccc361dfa7401a881bae78)
feat(normed_space/normed_group_hom): add lemmas ([#7468](https://github.com/leanprover-community/mathlib/pull/#7468))

From LTE.

Written by @PatrickMassot 



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-05-07T04:59:50+00:00](https://github.com/leanprover-community/mathlib/commit/154fda296b7d6bc3f6dfc79c9119c5fb72541be5)
feat(category_theory/subobjects): more about kernel and image subobjects ([#7467](https://github.com/leanprover-community/mathlib/pull/#7467))

Lemmas about factoring through kernel subobjects, and functoriality of kernel subobjects.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-06T22:46:23+00:00](https://github.com/leanprover-community/mathlib/commit/bb1fb8975b4baeb48e938521ad1a96a649516b9c)
feat(data/real/basic): add real.Inf_le_iff ([#7524](https://github.com/leanprover-community/mathlib/pull/#7524))

From LTE.

Co-authored-by: @PatrickMassot

### [2021-05-06T22:46:22+00:00](https://github.com/leanprover-community/mathlib/commit/e00d6e08a436e26dafafd3ceb34a6c49ab9333d7)
feat(data/polynomial/*): Specific root sets ([#7510](https://github.com/leanprover-community/mathlib/pull/#7510))

Adds lemmas for the root sets of a couple specific polynomials.

### [2021-05-06T22:46:21+00:00](https://github.com/leanprover-community/mathlib/commit/6f27ef7ca8079bbd7ab05215be2b22c073b7daf5)
chore(data/equiv/basic): Show that `Pi_curry` is really just `sigma.curry` ([#7497](https://github.com/leanprover-community/mathlib/pull/#7497))

Extracts some proofs to their own lemmas, and replaces definitions with existing ones.

### [2021-05-06T22:46:20+00:00](https://github.com/leanprover-community/mathlib/commit/9aed6c947afa810b2fa0cdcc50ba04a2b60b8e94)
feat(data/finsupp,linear_algebra): `finsupp.split` is an equivalence ([#7490](https://github.com/leanprover-community/mathlib/pull/#7490))

This PR shows that for finite types `η`, `finsupp.split` is an equivalence between `(Σ (j : η), ιs j) →₀ α` and `Π j, (ιs j →₀ α)`.

To be used in the `bundled-basis` refactor





Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-05-06T22:46:19+00:00](https://github.com/leanprover-community/mathlib/commit/48bdd1e3d95d60e667f83061df351dce72999761)
feat(data/equiv,linear_algebra): `Pi_congr_right` for `mul_equiv` and `linear_equiv` ([#7489](https://github.com/leanprover-community/mathlib/pull/#7489))

This PR generalizes `equiv.Pi_congr_right` to linear equivs, adding the `mul_equiv`/`add_equiv` version as well.

To be used in the `bundled-basis` refactor





Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-05-06T22:46:18+00:00](https://github.com/leanprover-community/mathlib/commit/652357ac4d4333560ea5c3f9a63607e536d7a438)
feat(data/nat/choose/sum): alternate forms of the binomial theorem ([#7415](https://github.com/leanprover-community/mathlib/pull/#7415))

### [2021-05-06T10:56:24+00:00](https://github.com/leanprover-community/mathlib/commit/9c86e38141b94bcd23665717f26c1da1622c59a7)
refactor(ring_theory/ideal/operations.lean): make is_prime.comap an instance ([#7518](https://github.com/leanprover-community/mathlib/pull/#7518))

### [2021-05-06T10:56:23+00:00](https://github.com/leanprover-community/mathlib/commit/13c41e1fdca16f85c5e5a82565654d9ca0f24252)
feat(category_theory/linear): linear functors ([#7369](https://github.com/leanprover-community/mathlib/pull/#7369))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-06T06:18:21+00:00](https://github.com/leanprover-community/mathlib/commit/7040c50c900b32bfe0370e931dcd8e5fefcba23f)
feat(category_theory): the opposite of an abelian category is abelian ([#7514](https://github.com/leanprover-community/mathlib/pull/#7514))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-06T06:18:20+00:00](https://github.com/leanprover-community/mathlib/commit/c4c6cd81f1cc9ac948311f1dd5d44219eedcfa08)
feat(linear_algebra/finsupp): linear equivalence between `α × β →₀ M` and `α →₀ β →₀ M` ([#7472](https://github.com/leanprover-community/mathlib/pull/#7472))

This PR extends the equivalence `finsupp.finsupp_prod_equiv` to a linear equivalence (to be used in the `bundled-basis` refactor).

### [2021-05-06T06:18:19+00:00](https://github.com/leanprover-community/mathlib/commit/9154a83060ec03149d6197b08dcf6efc080627ce)
feat(algebra/*, ring_theory/valuation/basic): `linear_ordered_add_comm_group_with_top`, `add_valuation.map_sub` ([#7452](https://github.com/leanprover-community/mathlib/pull/#7452))

Defines `linear_ordered_add_comm_group_with_top`
Uses that to port a few more facts about `valuation`s to `add_valuation`s.

### [2021-05-06T04:31:52+00:00](https://github.com/leanprover-community/mathlib/commit/6af5fbd22fb7c02a8c165d90e257d860c1b42715)
feat(category_theory/.../zero): if a zero morphism is a mono, the source is zero ([#7462](https://github.com/leanprover-community/mathlib/pull/#7462))

Some simple lemmas about zero morphisms.





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-05T23:47:55+00:00](https://github.com/leanprover-community/mathlib/commit/009be8611e7ebb85e2696340a323e710f28e0510)
feat(measure_theory/set_integral): continuous_on.measurable_at_filter ([#7511](https://github.com/leanprover-community/mathlib/pull/#7511))

### [2021-05-05T23:47:54+00:00](https://github.com/leanprover-community/mathlib/commit/709c73b2925da4c3e891f5fcecc346b7d68c54f1)
feat(category_theory/Fintype): some lemmas and `Fintype_to_Profinite`.  ([#7491](https://github.com/leanprover-community/mathlib/pull/#7491))

Adding some lemmas for morphisms on `Fintype` as functions, as well as `Fintype_to_Profinite`.
Part of the LTE.



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2021-05-05T23:47:53+00:00](https://github.com/leanprover-community/mathlib/commit/1ef04bde095dd370850fe84580f653afc4e8427a)
feat(data/finsupp): prove `f.curry x y = f (x, y)` ([#7475](https://github.com/leanprover-community/mathlib/pull/#7475))

This was surprisingly hard to prove actually!

To be used in the `bundled-basis` refactor

### [2021-05-05T23:47:52+00:00](https://github.com/leanprover-community/mathlib/commit/d3a46a7f40cb62b120df3fd987344d7472539744)
feat(algebra/big_operators): telescopic sums ([#7470](https://github.com/leanprover-community/mathlib/pull/#7470))

This is restating things we already have in a form which is
slightly more convenient for the liquid tensor experiment

### [2021-05-05T23:47:51+00:00](https://github.com/leanprover-community/mathlib/commit/18ada66c24ba9fe34e0782743b28056e294e6523)
feat(order/filter_at_top_bot): extraction lemmas ([#7469](https://github.com/leanprover-community/mathlib/pull/#7469))

from the liquid tensor experiment

### [2021-05-05T23:47:50+00:00](https://github.com/leanprover-community/mathlib/commit/7cc367b77b2be1648702b858cd62bb289eed4082)
feat(category_theory/subobject): minor tweaks ([#7466](https://github.com/leanprover-community/mathlib/pull/#7466))

A few minor tweaks to the `subobject` API that I wanted while working on homology.




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-05T23:47:49+00:00](https://github.com/leanprover-community/mathlib/commit/e25cbe0daee0582ac814480bec663f666275135d)
feat(category_theory/quotient): the quotient functor is full and essentially surjective ([#7465](https://github.com/leanprover-community/mathlib/pull/#7465))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-05-05T23:47:48+00:00](https://github.com/leanprover-community/mathlib/commit/19b752c468fad3be71f97da55ab6e1da03e4cddb)
feat(category_theory/preadditive): reformulation of mono_of_kernel_zero ([#7464](https://github.com/leanprover-community/mathlib/pull/#7464))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-05T23:47:47+00:00](https://github.com/leanprover-community/mathlib/commit/77949694af665e6009a787d8805dc0700568092a)
feat(category_theory/.../additive_functor): additive functors preserve zero objects ([#7463](https://github.com/leanprover-community/mathlib/pull/#7463))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-05T23:47:46+00:00](https://github.com/leanprover-community/mathlib/commit/25387b69a37e2133b202c4e890100529e6088bb5)
docs(overview): Add Stone-Weierstrass ([#7449](https://github.com/leanprover-community/mathlib/pull/#7449))

### [2021-05-05T23:47:45+00:00](https://github.com/leanprover-community/mathlib/commit/f6f810cf2c141a20c5923b89c5a62ecb41607c5a)
doc(algebraic_hierarchy): advice for adding new typeclasses ([#6854](https://github.com/leanprover-community/mathlib/pull/#6854))

This is not intended as document describing all the design decisions behind our algebraic hierarchy, but rather some advice for contributors adding new typeclasses.

It can hopefully serve as a checklist for instances and definitions that should be made for any new algebraic structure being added to mathlib.

Please edit as you see fit, contribute new sections, etc. I haven't written anything yet about interactions with topology or order structures. Please consider this an invitation, or otherwise we can delete those headings later.

Thanks to @eric-wieser for providing the list of instances needed for each typeclass!



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-05-05T18:50:21+00:00](https://github.com/leanprover-community/mathlib/commit/6d2869ce80ee86f4cc3772552a5aca1d0dc73223)
feat(category_theory/.../images): image.pre_comp_epi_of_epi ([#7460](https://github.com/leanprover-community/mathlib/pull/#7460))

The induced map from `image (f ≫ g)` to `image g` is an epimorphism when `f` is an epimorphism.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-05T18:50:20+00:00](https://github.com/leanprover-community/mathlib/commit/79edde24327e3ef6da71bdd585cd9d59a2be6696)
feat(topology/discrete_quotient): Add a few lemmas about discrete quotients ([#7454](https://github.com/leanprover-community/mathlib/pull/#7454))

This PR adds the `discrete_quotient.map` construction and generally improves on the `discrete_quotient` API.

### [2021-05-05T18:50:19+00:00](https://github.com/leanprover-community/mathlib/commit/84d27b45306430178553c46ceb136a7620c3d811)
refactor(group_theory/group_action/defs): generalize smul_mul_assoc and mul_smul_comm ([#7441](https://github.com/leanprover-community/mathlib/pull/#7441))

These lemmas did not need a full algebra structure; written this way, it permits usage on `has_scalar (units R) A` given `algebra R A` (in some future PR).

For now, the old algebra lemmas are left behind, to minimize the scope of this patch.

### [2021-05-05T18:50:18+00:00](https://github.com/leanprover-community/mathlib/commit/140e17b8333619d13541f7e4ca3f4dc79a9becad)
feat(algebra/direct_sum_graded): a direct_sum of copies of a ring is itself a ring ([#7420](https://github.com/leanprover-community/mathlib/pull/#7420))

Once this is in, it's straightforward to show `add_monoid_algebra R ι ≃+* ⨁ i : ι, R`



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-05-05T18:50:17+00:00](https://github.com/leanprover-community/mathlib/commit/51bc1ca4996b9620ef71e9a0d55d03e0d7f17cd6)
feat(algebra/direct_sum_graded): add direct_sum.to_semiring ([#7380](https://github.com/leanprover-community/mathlib/pull/#7380))

This provides a convenient way to construct ring_homs out of `direct_sum`, and is a stronger version of `direct_sum.to_add_monoid` which applies in the presence of a `direct_sum.gmonoid` typeclass.

The new `direct_sum.lift_ring_hom` can be thought of as a universal property akin to `finsupp.lift_add_hom`.

### [2021-05-05T18:50:16+00:00](https://github.com/leanprover-community/mathlib/commit/93bc7e0529c61ebc01d90ca47ebfba93d90caddd)
feat(order): add some missing `pi` and `Prop` instances ([#7268](https://github.com/leanprover-community/mathlib/pull/#7268))

### [2021-05-05T18:50:15+00:00](https://github.com/leanprover-community/mathlib/commit/52268b89efd801d55dd993b48772cde3eb83ca5f)
feat(linear_algebra): Vandermonde matrices and their determinant ([#7116](https://github.com/leanprover-community/mathlib/pull/#7116))

This PR defines the `vandermonde` matrix and gives a formula for its determinant.

@paulvanwamelen: if you would like to have `det_vandermonde` in a different form (e.g. swap the order of the variables that are being summed), please let me know!

### [2021-05-05T13:56:53+00:00](https://github.com/leanprover-community/mathlib/commit/a4d5ccb6f6ce5bee59532d5ff70b812660307968)
chore(order/complete_boolean_algebra): speed up Inf_sup_Inf ([#7506](https://github.com/leanprover-community/mathlib/pull/#7506))

On my machine, avoiding `finish` takes the proof from 13s to 0.3s.

### [2021-05-05T13:56:52+00:00](https://github.com/leanprover-community/mathlib/commit/94150f3a8d7de2e16022569b7d84380a705a716b)
chore(group_theory/nielsen_schreier): typos in module doc-string ([#7500](https://github.com/leanprover-community/mathlib/pull/#7500))

This fixes a discrepancy between the doc-string and the rest of the file.

### [2021-05-05T13:56:51+00:00](https://github.com/leanprover-community/mathlib/commit/3a8796dd744556bf19c9648aa4803bfaeff52b39)
feat(category_theory/path_category): extensionality for functors out of path category ([#7494](https://github.com/leanprover-community/mathlib/pull/#7494))

This adds an extensionality lemma for functors out of a path category, which simplifies some proofs in the free-forgetful adjunction.

### [2021-05-05T13:56:50+00:00](https://github.com/leanprover-community/mathlib/commit/18af6b57528dd32413b0b6289acb55e3ab057ba7)
feat(algebra/module): `linear_equiv.refl.symm = refl` ([#7493](https://github.com/leanprover-community/mathlib/pull/#7493))

To be part of the `bundled_basis` refactor



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-05-05T13:56:49+00:00](https://github.com/leanprover-community/mathlib/commit/1823aeefc95a651241f8eb4cac865e27ccaa5a9a)
feat(algebra/module): `S`-linear equivs are also `R`-linear equivs ([#7476](https://github.com/leanprover-community/mathlib/pull/#7476))

This PR extends `linear_map.restrict_scalars` to `linear_equiv`s.

To be used in the `bundled-basis` refactor.

### [2021-05-05T13:56:48+00:00](https://github.com/leanprover-community/mathlib/commit/9b1b8543086caf8f966a2731419c9e3f861d7e0c)
feat(data/fintype/basic): add set.to_finset_range ([#7426](https://github.com/leanprover-community/mathlib/pull/#7426))

### [2021-05-05T13:56:47+00:00](https://github.com/leanprover-community/mathlib/commit/bb9216c0975290e3a38f1ff6fd41b80972905222)
feat(category_theory/opposites): iso.unop ([#7400](https://github.com/leanprover-community/mathlib/pull/#7400))

### [2021-05-05T13:56:45+00:00](https://github.com/leanprover-community/mathlib/commit/78e36a71e5be82e219609fd8eb2181bd3f400129)
feat(analysis/convex/extreme): extreme sets ([#7357](https://github.com/leanprover-community/mathlib/pull/#7357))

define extreme sets

### [2021-05-05T12:20:10+00:00](https://github.com/leanprover-community/mathlib/commit/b765d4e7ef1890066ff547fe3b9a2754a19fa537)
Change the bors timeout to 8 hours ([#7513](https://github.com/leanprover-community/mathlib/pull/#7513))

We've hit a 6 hour timeout repeatedly in the last few days, resulting in nothing getting built.

### [2021-05-04T02:29:18+00:00](https://github.com/leanprover-community/mathlib/commit/5a91d05e3b457aac6f656f8b02acb893f96341fa)
feat(data/finset/lattice): add sup_image ([#7428](https://github.com/leanprover-community/mathlib/pull/#7428))

This also renames `finset.map_sup` to `finset.sup_map` to match `finset.sup_insert` and `finset.sup_singleton`.

The `inf` versions are added too.

### [2021-05-03T21:31:42+00:00](https://github.com/leanprover-community/mathlib/commit/377352504d266574ae4d4a9e1a5c3e117d9858f8)
feat(ring_theory/finiteness): add lemmas ([#7409](https://github.com/leanprover-community/mathlib/pull/#7409))

I add here some preliminary lemmas to prove that a monoid is finitely generated iff the monoid algebra is.

### [2021-05-03T21:31:41+00:00](https://github.com/leanprover-community/mathlib/commit/67dad9767277a72d8d57e834956edc4d0c78c0dc)
chore(data/fintype): rework `fintype.equiv_fin` and dependencies ([#7136](https://github.com/leanprover-community/mathlib/pull/#7136))

These changes should make the declarations `fintype.equiv_fin`, `fintype.card_eq`
and `fintype.equiv_of_card_eq` more convenient to use.

Renamed:
 * `fintype.equiv_fin` -> `fintype.trunc_equiv_fin`

Deleted:
 * `fintype.nonempty_equiv_of_card_eq` (use `fintype.equiv_of_card_eq` instead)
 * `fintype.exists_equiv_fin` (use `fintype.card` and `fintype.(trunc_)equiv_fin` instead)

Added:
 * `fintype.equiv_fin`: noncomputable, non-`trunc` version of `fintype.equiv_fin`
 * `fintype.equiv_of_card_eq`: noncomputable, non-`trunc` version of `fintype.trunc_equiv_of_card_eq`
 * `fintype.(trunc_)equiv_fin_of_card_eq` (intermediate result/specialization of `fintype.(trunc_)equiv_of_card_eq`

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/.60fintype.2Eequiv_fin.60.20.2B.20.60fin.2Ecast.60)



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-05-03T17:06:15+00:00](https://github.com/leanprover-community/mathlib/commit/048240e809f04e2bde02482ab44bc230744cc6c9)
chore(*): update to lean 3.30.0c ([#7264](https://github.com/leanprover-community/mathlib/pull/#7264))

There's quite a bit of breakage from no longer reducing `acc.rec` so aggressively.  That is, a well-founded definition like `nat.factors` will no longer reduce definitionally.  Where you could write `rfl` before, you might now need to write `by rw nat.factors` or `by simp [nat.factors]`.

A more inconvenient side-effect of this change is that `dec_trivial` becomes less powerful, since it also relies on the definitional reduction.  For example `nat.factors 1 = []` is no longer true by `dec_trivial` (or `rfl`).  Often you can replace `dec_trivial` by `simp` or `norm_num`.

For extremely simple definitions that only use well-founded relations of rank ω, you could consider rewriting them to use structural recursion on a fuel parameter instead.  The functions `nat.mod` and `nat.div` in core have been rewritten in this way, please consult the [corresponding Lean PR](https://github.com/leanprover-community/lean/pull/570/files) for details on the implementation.

### [2021-05-03T14:11:12+00:00](https://github.com/leanprover-community/mathlib/commit/7da83031115ee14e9079895ed17903f7c934e022)
feat(category_theory/preadditive): Schur's lemma ([#7366](https://github.com/leanprover-community/mathlib/pull/#7366))

We prove Schur's lemma for `𝕜`-linear categories with finite dimensional hom spaces,
over an algebraically closed field `𝕜`:
the hom space `X ⟶ Y` between simple objects `X` and `Y` is at most one dimensional,
and is 1-dimensional iff `X` and `Y` are isomorphic.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-03T07:41:58+00:00](https://github.com/leanprover-community/mathlib/commit/62c06a557ad0a3496d31c9462e60763b9e7bf4ec)
feat(data/finset/basic): a finset has card at most one iff it is contained in a singleton ([#7404](https://github.com/leanprover-community/mathlib/pull/#7404))

### [2021-05-02T18:59:48+00:00](https://github.com/leanprover-community/mathlib/commit/0cc3cd54efb97332e973e0ff1ca94dbd486899eb)
feat(topology/category): Profinite has colimits ([#7434](https://github.com/leanprover-community/mathlib/pull/#7434))

Show that a reflective subcategory of a cocomplete category is cocomplete, and derive that `CompHaus` and `Profinite` have colimits.

### [2021-05-02T14:19:06+00:00](https://github.com/leanprover-community/mathlib/commit/c7ba3dd0487ba0450e7bfe6b33259b5af0af523d)
refactor(linear_algebra/eigenspace): refactor exists_eigenvalue ([#7345](https://github.com/leanprover-community/mathlib/pull/#7345))

We replace the proof of `exists_eigenvalue` with the more general fact:
```
/--
Every element `f` in a nontrivial finite-dimensional algebra `A`
over an algebraically closed field `K`
has non-empty spectrum:
that is, there is some `c : K` so `f - c • 1` is not invertible.
-/
lemma exists_spectrum_of_is_alg_closed_of_finite_dimensional (𝕜 : Type*) [field 𝕜] [is_alg_closed 𝕜]
  {A : Type*} [nontrivial A] [ring A] [algebra 𝕜 A] [I : finite_dimensional 𝕜 A] (f : A) :
  ∃ c : 𝕜, ¬ is_unit (f - algebra_map 𝕜 A c) := ...
```

We can then use this fact to prove Schur's lemma.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-02T10:42:35+00:00](https://github.com/leanprover-community/mathlib/commit/58e990d93aad9617b09bff5ca692b133e176e635)
chore(dynamics/periodic_pts): remove duplicate of nat.dvd_right_iff_eq ([#7435](https://github.com/leanprover-community/mathlib/pull/#7435))

### [2021-05-02T09:28:57+00:00](https://github.com/leanprover-community/mathlib/commit/4bd1c836e41fa49b9911de00ced6b97a0c29d5a0)
feat(topology/category/Profinite): Any continuous bijection of profinite spaces is an isomorphism. ([#7430](https://github.com/leanprover-community/mathlib/pull/#7430))




Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2021-05-02T04:27:19+00:00](https://github.com/leanprover-community/mathlib/commit/30f3788cba2cacd15d1d470fe63836ce3a61def2)
feat(topology/discrete_quotient): Discrete quotients of topological spaces ([#7425](https://github.com/leanprover-community/mathlib/pull/#7425))

This PR defines the type of discrete quotients of a topological space and provides a basic API.
In a subsequent PR, this will be used to show that a profinite space is the limit of its finite quotients, which will be needed for the liquid tensor experiment.



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2021-05-02T04:27:18+00:00](https://github.com/leanprover-community/mathlib/commit/6d7e75630a84c30c3d3682ae35c793d5ebadf494)
feat(linear_algebra/char_poly): charpoly of `left_mul_matrix`  ([#7397](https://github.com/leanprover-community/mathlib/pull/#7397))

This is an important ingredient for showing the field norm resp. trace of `x` is the product resp. sum of `x`'s conjugates.

### [2021-05-02T04:27:17+00:00](https://github.com/leanprover-community/mathlib/commit/cfc74155d7100c94623e5eebe74f270ab317c376)
feat(field_theory/polynomial_galois_group): Galois group is S_p ([#7352](https://github.com/leanprover-community/mathlib/pull/#7352))

Proves that a Galois group is isomorphic to S_p, under certain conditions.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-05-02T00:17:41+00:00](https://github.com/leanprover-community/mathlib/commit/6624bbe7563de6a3e906891a1305e682b6559e35)
feat(category_theory/limits): dualizing some results ([#7391](https://github.com/leanprover-community/mathlib/pull/#7391))

Requested on [zulip](https://leanprover.zulipchat.com/#narrow/stream/267928-condensed-mathematics/topic/LocallyConstant.20preserves.20colimits/near/236442281).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-02T00:17:39+00:00](https://github.com/leanprover-community/mathlib/commit/6e836c433a51095f3b861e3fb474fcffc869573f)
feat(group_theory/perm/{cycles, cycle_type}): permutations are conjugate iff they have the same cycle type ([#7335](https://github.com/leanprover-community/mathlib/pull/#7335))

Slightly strengthens the induction principle `equiv.perm.cycle_induction_on`
Proves that two permutations are conjugate iff they have the same cycle type: `equiv.perm.is_conj_iff_cycle_type_eq`



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>
Co-authored-by: Thomas Browning <tb65536@uw.edu>

### [2021-05-02T00:17:38+00:00](https://github.com/leanprover-community/mathlib/commit/106ac8e04f33094d44fcb06a7de5ed3d8ca05d4c)
feat(category_theory): definition of R-linear category ([#7321](https://github.com/leanprover-community/mathlib/pull/#7321))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-05-02T00:17:37+00:00](https://github.com/leanprover-community/mathlib/commit/decb556eb66364a7361b8dafa1aa61ee31f8ad32)
feat(geometry/euclidean/basic): lemmas about angles and distances ([#7140](https://github.com/leanprover-community/mathlib/pull/#7140))





Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-05-01T20:07:58+00:00](https://github.com/leanprover-community/mathlib/commit/ea379b092c2f552be5a9e0a0aefd3f98ebe2d637)
feat(topology/continuous_function): the Stone-Weierstrass theorem ([#7305](https://github.com/leanprover-community/mathlib/pull/#7305))

# The Stone-Weierstrass theorem

If a subalgebra `A` of `C(X, ℝ)`, where `X` is a compact Hausdorff space,
separates points, then it is dense.

We argue as follows.

* In any subalgebra `A` of `C(X, ℝ)`, if `f ∈ A`, then `abs f ∈ A.topological_closure`.
  This follows from the Weierstrass approximation theorem on `[-∥f∥, ∥f∥]` by
  approximating `abs` uniformly thereon by polynomials.
* This ensures that `A.topological_closure` is actually a sublattice:
  if it contains `f` and `g`, then it contains the pointwise supremum `f ⊔ g`
  and the pointwise infimum `f ⊓ g`.
* Any nonempty sublattice `L` of `C(X, ℝ)` which separates points is dense,
  by a nice argument approximating a given `f` above and below using separating functions.
  For each `x y : X`, we pick a function `g x y ∈ L` so `g x y x = f x` and `g x y y = f y`.
  By continuity these functions remain close to `f` on small patches around `x` and `y`.
  We use compactness to identify a certain finitely indexed infimum of finitely indexed supremums
  which is then close to `f` everywhere, obtaining the desired approximation.
* Finally we put these pieces together. `L = A.topological_closure` is a nonempty sublattice
  which separates points since `A` does, and so is dense (in fact equal to `⊤`).

## Future work

Prove the complex version for self-adjoint subalgebras `A`, by separately approximating
the real and imaginary parts using the real subalgebra of real-valued functions in `A`
(which still separates points, by taking the norm-square of a separating function).

Extend to cover the case of subalgebras of the continuous functions vanishing at infinity,
on non-compact Hausdorff spaces.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-01T18:03:22+00:00](https://github.com/leanprover-community/mathlib/commit/d3c565d48cea0d98b5a6c2b98e98eb55e9e14cc5)
feat(category_theory/monoidal): the monoidal coherence theorem ([#7324](https://github.com/leanprover-community/mathlib/pull/#7324))

This PR contains a proof of the monoidal coherence theorem, stated in the following way: if `C` is any type, then the free monoidal category over `C` is a preorder.

This should immediately imply the statement needed in the `coherence` branch.

### [2021-05-01T15:16:03+00:00](https://github.com/leanprover-community/mathlib/commit/790ec6b1be60ef9ed9c9d1bc8f86d8f80cd4e473)
feat(algebra/archimedean): rat.cast_round for non-archimedean fields ([#7424](https://github.com/leanprover-community/mathlib/pull/#7424))

The theorem still applies to the non-canonical archimedean instance (at least if you use simp).  I've also added `rat.cast_ceil` because it seems to fit here.

### [2021-05-01T15:16:02+00:00](https://github.com/leanprover-community/mathlib/commit/92b90480bc427ee2db2f161463464ecba767ead8)
chore(topology/continuous_function/algebra): put `coe_fn_monoid_hom `into the `continuous_map` namespace ([#7423](https://github.com/leanprover-community/mathlib/pull/#7423))

Rather than adding `continuous_map.` to the definition, this wraps everything in a namespace to make this type of mistake unlikely to happen again.

This also adds `comp_monoid_hom'` to golf a proof.

### [2021-05-01T09:09:54+00:00](https://github.com/leanprover-community/mathlib/commit/5511275718b4aa55fc66f969cbdf2065160b00bb)
chore(measure_theory/ae_eq_fun_metric): remove useless file ([#7419](https://github.com/leanprover-community/mathlib/pull/#7419))

The file `measure_theory/ae_eq_fun_metric.lean` used to contain an edistance on the space of equivalence classes of functions. It has been replaced by the use of the `L^1` space in [#5510](https://github.com/leanprover-community/mathlib/pull/#5510), so this file is now useless and should be removed.

### [2021-05-01T09:09:53+00:00](https://github.com/leanprover-community/mathlib/commit/d04af204e7661ca2d78097a7c34f3061b1573b17)
feat(linear_algebra/quadratic_form): add lemmas about sums of quadratic forms ([#7417](https://github.com/leanprover-community/mathlib/pull/#7417))

### [2021-05-01T09:09:52+00:00](https://github.com/leanprover-community/mathlib/commit/bf0f15abe3834475a663fee358c072e0ec49d400)
chore(algebra/algebra/basic): add missing lemmas ([#7412](https://github.com/leanprover-community/mathlib/pull/#7412))

### [2021-05-01T06:41:10+00:00](https://github.com/leanprover-community/mathlib/commit/e3de4e30598c7b4a458f37d4c1b82aa808edae2d)
fix(algebra/direct_sum_graded): replace badly-stated and slow `simps` lemmas with manual ones  ([#7403](https://github.com/leanprover-community/mathlib/pull/#7403))

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/simps.20is.20very.20slow/near/236636962). The `simps mul` attribute on `direct_sum.ghas_mul.of_add_subgroups` was taking 44s, only to produce a lemma that wasn't very useful anyway.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-05-01T06:41:09+00:00](https://github.com/leanprover-community/mathlib/commit/aa37eeeab204b0eb1b1881cb2ab0024b33a4947d)
feat(analysis/special_functions/integrals): integral of `cos x ^ n` ([#7402](https://github.com/leanprover-community/mathlib/pull/#7402))

The reduction of `∫ x in a..b, cos x ^ n`, ∀ n ∈ ℕ, 2 ≤ n, as well as the integral of `cos x ^ 2` as a special case.

### [2021-05-01T06:41:08+00:00](https://github.com/leanprover-community/mathlib/commit/2cc8128f1b39050f3ccb06ffcf4ac476a4231a40)
feat(algebra/polynomial): generalize to `multiset` products ([#7399](https://github.com/leanprover-community/mathlib/pull/#7399))

This PR generalizes the results in `algebra.polynomial.big_operators` to sums and products of multisets.

The new multiset results are stated for `multiset.prod t`, not `(multiset.map t f).prod`. To get the latter, you can simply rewrite with `multiset.map_map`.

### [2021-05-01T00:19:22+00:00](https://github.com/leanprover-community/mathlib/commit/d5d22c5d099244dca0f7c67d5bb2fc3f9b580a45)
feat(algebra/squarefree): add sq_mul_squarefree lemmas ([#7282](https://github.com/leanprover-community/mathlib/pull/#7282))

Every positive natural number can be expressed as m^2 * n where n is square free. Used in [#7274](https://github.com/leanprover-community/mathlib/pull/#7274)

### [2021-05-01T00:19:21+00:00](https://github.com/leanprover-community/mathlib/commit/b51cee2b6a976ea57f2dc70b02040609b713d7f9)
feat(data/polynomial/coeff): Add smul_eq_C_mul ([#7240](https://github.com/leanprover-community/mathlib/pull/#7240))


Adding a lemma `polynomial.smul_eq_C_mul` for single variate polynomials analogous to `mv_polynomial.smul_eq_C_mul` for multivariate.

### [2021-05-01T00:19:20+00:00](https://github.com/leanprover-community/mathlib/commit/b88a9d1429b06fe5eda6917147e0ba80065b3641)
feat(category_theory/enriched): abstract enriched categories ([#7175](https://github.com/leanprover-community/mathlib/pull/#7175))

# Enriched categories

We set up the basic theory of `V`-enriched categories,
for `V` an arbitrary monoidal category.

We do not assume here that `V` is a concrete category,
so there does not need to be a "honest" underlying category!

Use `X ⟶[V] Y` to obtain the `V` object of morphisms from `X` to `Y`.

This file contains the definitions of `V`-enriched categories and
`V`-functors.

We don't yet define the `V`-object of natural transformations
between a pair of `V`-functors (this requires limits in `V`),
but we do provide a presheaf isomorphic to the Yoneda embedding of this object.

We verify that when `V = Type v`, all these notion reduce to the usual ones.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-05-01T00:19:19+00:00](https://github.com/leanprover-community/mathlib/commit/802c5b5a52e9d4e8ada2ea733f37d085936e1299)
feat(linear_algebra/determinant): various operations preserve the determinant ([#7115](https://github.com/leanprover-community/mathlib/pull/#7115))

These are a couple of helper lemmas for computing the determinant of a Vandermonde matrix.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-05-01T00:19:18+00:00](https://github.com/leanprover-community/mathlib/commit/6c617793542e9c182f20479d3cfe22d6ee7fdffc)
refactor(group_theory/order_of_element): use minimal_period for the definition ([#7082](https://github.com/leanprover-community/mathlib/pull/#7082))

This PR redefines `order_of_element` in terms of `function.minimal_period`. It furthermore introduces a predicate on elements of a finite group to be of finite order.

Co-authored by: Damiano Testa adomani@gmail.com



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>
Co-authored-by: adomani <adomani@gmail.com>

### [2021-04-30T20:11:22+00:00](https://github.com/leanprover-community/mathlib/commit/16c8f7f39b6f4376b047e96638f49b2180d1f796)
feat(algebraic_geometry/prime_spectrum): Basic opens are compact ([#7411](https://github.com/leanprover-community/mathlib/pull/#7411))

This proves that basic opens are compact in the zariski topology. Compactness of the whole space is then realized as a special case. Also adds a few lemmas about zero loci.

### [2021-04-30T20:11:21+00:00](https://github.com/leanprover-community/mathlib/commit/aebe75526b50bae42b9b6214215fe729f6f3896b)
refactor(algebra/group_power): put lemmas about order and power in their own file ([#7398](https://github.com/leanprover-community/mathlib/pull/#7398))

This means `group_power/basic` has fewer dependencies, making it accessible earlier in the import graph.

The first two lemmas in this `basic` were moved to the end of `order`, but otherwise lemmas have been moved without modification and kept in the same order.

The new imports added in other files are the ones needed to make this build.

### [2021-04-30T20:11:19+00:00](https://github.com/leanprover-community/mathlib/commit/6d5a120f333f39c5b0eadbc8daa35327b19e3ee8)
refactor(linear_algebra/eigenspace): cleanup proof ([#7337](https://github.com/leanprover-community/mathlib/pull/#7337))

At some point we changed the proof of `exists_eigenvalue` so that it used the fact that any endomorphism of a vector space is integral. This means we don't actually need to pick a nonzero vector at any point, but the proof had been left in a hybrid state, which I've now cleaned up.

In a later PR I'll generalise this proof so it proves Schur's lemma.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-30T20:11:18+00:00](https://github.com/leanprover-community/mathlib/commit/5800f69a30ff978e206b4e4ca8dc0a6202c512ac)
feat(category_theory/Quiv): the free/forgetful adjunction between Cat and Quiv ([#7158](https://github.com/leanprover-community/mathlib/pull/#7158))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-30T14:55:00+00:00](https://github.com/leanprover-community/mathlib/commit/64fdfc742fa84cbc2f9f2218872a89383b4f92b1)
feat(category_theory/sites): construct a presieve from an indexed family of arrows ([#7413](https://github.com/leanprover-community/mathlib/pull/#7413))

For the LTE: alternate constructors for presieves which can be more convenient.

### [2021-04-30T10:14:07+00:00](https://github.com/leanprover-community/mathlib/commit/4722dd469a6dcb70af68a242aea4d3248d8fee4f)
feat(ring_theory/finiteness): add add_monoid_algebra.ft_of_fg ([#7265](https://github.com/leanprover-community/mathlib/pull/#7265))

This is from `lean_liquid`. We prove `add_monoid_algebra.ft_of_fg`: if `M` is a finitely generated monoid then `add_monoid_algebra R M` if finitely generated as `R-alg`.

The converse is also true, but the proof is longer and I wanted to keep the PR small.

- [x] depends on: [#7279](https://github.com/leanprover-community/mathlib/pull/#7279)

### [2021-04-30T10:14:06+00:00](https://github.com/leanprover-community/mathlib/commit/4a94b28f7a47f7e45865a96945b4297110730889)
feat(category_theory/sites): Sheaves of structures ([#5927](https://github.com/leanprover-community/mathlib/pull/#5927))

Define sheaves on a site taking values in an arbitrary category.

Joint with @kbuzzard. cc: @jcommelin, this is a step towards condensed abelian groups.

I don't love the names here, design advice (particularly from those who'll use this) more than appreciated.

The main points are:

- An `A`-valued presheaf `P : C^op => A` is defined to be a sheaf (for the topology J) iff for every `X : A`, the type-valued presheaves of sets given by sending `U : C^op` to `Hom_{A}(X, P U)` are all sheaves of sets.
- When `A = Type`, this recovers the basic definition of sheaves of sets.
- An alternate definition when `C` is small, has pullbacks and `A` has products is given by an equalizer condition `is_sheaf'`.
- This is equivalent to the earlier definition.
- When `A = Type`, this is definitionally equal to the equalizer condition for presieves in sheaf_of_types.lean
- When `A` has limits and there is a functor `s : A => Type` which is faithful, reflects isomorphisms and preserves limits, then `P : C^op => A` is a sheaf iff the underlying presheaf of types `P >>> s : C^op => Type` is a sheaf. (cf https://stacks.math.columbia.edu/tag/0073, which is a weaker version of this statement (it's only over spaces, not sites) and https://stacks.math.columbia.edu/tag/00YR (a), which additionally assumes filtered colimits).

A couple of questions for reviewers:
- We've now got a ton of equivalent ways of showing something's a sheaf, and it's not the easiest to navigate between them. Is there a nice way around this? I think it's still valuable to have all the ways, since each can be helpful in different contexts but it makes the API a bit opaque. There's also a bit of inconsistency - there's a definition `yoneda_sheaf_condition` which is the same as `is_sheaf_for` but the equalizer conditions at the bottom of sheaf_of_types aren't named, they're just some `nonempty (is_limit (fork.of_ι _ (w P R)))` even though they're also equivalent.
- The name `presieve.is_sheaf` is stupid, I think I was just lazy with namespaces. I think `presieve.family_of_elements` and `presieve.is_sheaf_for` are still sensible, since they are relative to a presieve, but `is_sheaf` doesn't have any reference to presieves in its type. 
- The equalizer condition of sheaves of types is definitionally the same as the equalizer condition for sheaves of structures, so is there any point in having the former version in the library - the latter is just more general (the same doesn't apply to the actual def of sheaves of structures since that's defined in terms of sheaves of types). The main downside I can see is that it might make the proofs of `equalizer_sheaf_condition` a bit trickier, but that's about it

Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>

### [2021-04-30T05:44:03+00:00](https://github.com/leanprover-community/mathlib/commit/f36cc1642167f1cc723523f80ed597fa5b9ae547)
chore(topology/category): some lemmas for Profinite functions ([#7414](https://github.com/leanprover-community/mathlib/pull/#7414))

Adds `concrete_category`  and `has_forget₂` instances for Profinite, and `id_app` and `comp_app` lemmas.

### [2021-04-30T05:44:02+00:00](https://github.com/leanprover-community/mathlib/commit/c914e8f5a8e4295ed9b44872975541d284c0480a)
refactor(data/fin): define neg like sub ([#7408](https://github.com/leanprover-community/mathlib/pull/#7408))

Define negation on fin in the same way as subtraction, i.e., using nat.mod (instead of computing it in the integers).

### [2021-04-30T05:44:01+00:00](https://github.com/leanprover-community/mathlib/commit/39a1cf0b5a8b95f83e0d0dd98b468741f1f017b9)
feat(group/hom_instances): add composition operators ([#7407](https://github.com/leanprover-community/mathlib/pull/#7407))

This adds the analogous definitions to those we have for `linear_map`, namely:

* `monoid_hom.comp_hom'` (c.f. `linear_map.lcomp`, `l` = `linear`)
* `monoid_hom.compl₂` (c.f. `linear_map.compl₂`, `l` = `left`)
* `monoid_hom.compr₂` (c.f. `linear_map.compr₂`, `r` = `right`)

We already have `monoid_hom.comp_hom` (c.f. `linear_map.llcomp`, `ll` = `linear linear`)

It also adds an `ext_iff₂` lemma, which is occasionally useful (but not present for any other time at the moment).

The order of definitions in the file has been shuffled slightly to permit addition of a subheading to group things in doc-gen

### [2021-04-30T00:14:20+00:00](https://github.com/leanprover-community/mathlib/commit/413b4263de879bf4f58476aebec8b28d6cdfa2c5)
feat(finset/basic): fill in holes in the finset API ([#7386](https://github.com/leanprover-community/mathlib/pull/#7386))

add basic lemmas about finsets

### [2021-04-29T23:00:13+00:00](https://github.com/leanprover-community/mathlib/commit/6a796d08caf19fb22e7e22c604e0a9b1353b322a)
refactor(algebraic_geometry/structure_sheaf): Remove redundant isomorphism ([#7410](https://github.com/leanprover-community/mathlib/pull/#7410))

Removes `stalk_iso_Type`, which is redundant since we also have `structure_sheaf.stalk_iso`, which is the same isomorphism in `CommRing`

### [2021-04-29T14:43:39+00:00](https://github.com/leanprover-community/mathlib/commit/ca5176c3f72eade29bfd316fadfddb916728cf83)
feat(linear_algebra/tensor_product): add definition `tensor_product.map_incl` and `simp` lemmas related to powers of `tensor_product.map` ([#7406](https://github.com/leanprover-community/mathlib/pull/#7406))

### [2021-04-29T14:43:38+00:00](https://github.com/leanprover-community/mathlib/commit/966b3b1899ae56ef9804b7ec4375c360fbf0250c)
feat(set_theory/{surreal, pgame}): `mul_comm` for surreal numbers  ([#7376](https://github.com/leanprover-community/mathlib/pull/#7376))

This PR adds a proof of commutativity of multiplication for surreal numbers. 
We also add `mul_zero` and `zero_mul` along with several useful lemmas.

Finally, this renames a handful of lemmas about `relabelling` in order to enable dot notation.

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal.20numbers)

### [2021-04-29T12:50:46+00:00](https://github.com/leanprover-community/mathlib/commit/c9563537dcc8bcc111bb922f1f048337fec54afb)
chore(.docker): remove alpine build, too fragile ([#7401](https://github.com/leanprover-community/mathlib/pull/#7401))

If this is approved I'll remove the automatic builds of the `alpine` based images over on `hub.docker.com`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-29T12:50:45+00:00](https://github.com/leanprover-community/mathlib/commit/91604cbef056d3bdd8d7b570bf808a6135051267)
feat(data/finsupp/to_dfinsupp): add equivalences between finsupp and dfinsupp ([#7311](https://github.com/leanprover-community/mathlib/pull/#7311))

A rework of [#7217](https://github.com/leanprover-community/mathlib/pull/#7217), that adds a more elementary equivalence.

### [2021-04-29T08:23:27+00:00](https://github.com/leanprover-community/mathlib/commit/fda4d3d5b1166086d7d1b21ef0554622ed0fdfc3)
feat(data/rat): add `@[simp]` to `rat.num_div_denom` ([#7393](https://github.com/leanprover-community/mathlib/pull/#7393))

I have an equation in rational numbers that I want to turn into an equation in integers, and everything `simp`s away nicely except the equation `x.num / x.denom = x`. Marking `rat.num_div_denom` as `simp` should fix that, and I don't expect it will break anything. (`rat.num_denom : rat.mk x.num x.denom = x` is already a `simp` lemma.)

Zulip discussion: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60x.2Enum.20.2F.20x.2Edenom.20.3D.20x.60

### [2021-04-28T19:37:48+00:00](https://github.com/leanprover-community/mathlib/commit/c50cb7a755a2756912fdabb6a7b1a423fc424b50)
feat(data/fintype/basic): add decidable_eq_(bundled-hom)_fintype ([#7394](https://github.com/leanprover-community/mathlib/pull/#7394))

Using the proof of `decidable_eq_equiv_fintype` for guidance, this adds equivalent statements about:

* `function.embedding`
* `zero_hom`
* `one_hom`
* `add_hom`
* `mul_hom`
* `add_monoid_hom`
* `monoid_hom`
* `monoid_with_zero_hom`
* `ring_hom`

It also fixes a typo that swaps `left` and `right` between two definition names.

### [2021-04-28T19:37:47+00:00](https://github.com/leanprover-community/mathlib/commit/abf1c205a60c28163e3049e7c90e2251eeb7a01c)
feat(linear_algebra/free_module): free of finite torsion free ([#7381](https://github.com/leanprover-community/mathlib/pull/#7381))

This is a reformulation of module.free_of_finite_type_torsion_free in terms of `ring_theory.finiteness` (combining my recent algebra PRs). Note this adds an import but it seems ok to me.

### [2021-04-28T19:37:46+00:00](https://github.com/leanprover-community/mathlib/commit/b9c80c922a4be7460c79d28028b92c307d9b1d28)
chore(*): use `sq` as convention for "squared" ([#7368](https://github.com/leanprover-community/mathlib/pull/#7368))

This PR establishes `sq x` as the notation for `x ^ 2`. See [this Zulip conversation](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/sqr.20vs.20sq.20vs.20pow_two/near/224972795).

A breakdown of the refactor:
- All instances of `square` and `sqr` are changed to `sq` (except where `square` means something other than "to the second power")
- All instances of `pow_two` are changed to `sq`, though many are kept are aliases
- All instances of `sum_of_two_squares` are changed to `sq_add_sq`

n.b. I did NOT alter any instances of:
- `squarefree`
- `sum_of_four_squares`
- `fpow_two` or `rpow_two`


<!-- The text above the `

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-04-28T19:37:44+00:00](https://github.com/leanprover-community/mathlib/commit/2401d996ed1866bffb990243f0bbc671b18316c7)
feat(group_theory/finiteness): add group.fg ([#7338](https://github.com/leanprover-community/mathlib/pull/#7338))

Basic facts about finitely generated groups.

- [x] depends on: [#7279](https://github.com/leanprover-community/mathlib/pull/#7279)

### [2021-04-28T19:37:43+00:00](https://github.com/leanprover-community/mathlib/commit/4328cc3cd9430f526f399190aed90220c4281eb4)
feat(topology/continuous_function): abstract statement of Weierstrass approximation ([#7303](https://github.com/leanprover-community/mathlib/pull/#7303))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-04-28T14:47:13+00:00](https://github.com/leanprover-community/mathlib/commit/e6a4c818ad48fde0dd9a9857824f72c15005b7c4)
chore(algebra/module/submodule): mem_to_add_subgroup ([#7392](https://github.com/leanprover-community/mathlib/pull/#7392))

### [2021-04-28T14:47:12+00:00](https://github.com/leanprover-community/mathlib/commit/052447d36923af548e80e0cac31a9cc38054c3ae)
feat(algebra/group/hom_instance): add add_monoid_hom.mul ([#7382](https://github.com/leanprover-community/mathlib/pull/#7382))

### [2021-04-28T13:06:40+00:00](https://github.com/leanprover-community/mathlib/commit/a1b695afb0ccc6099fc7f793369863c7f9cc29bf)
feat(algbera/lie/submodule): add `simp` lemmas `lie_submodule.map_sup`, `lie_ideal.map_sup` ([#7384](https://github.com/leanprover-community/mathlib/pull/#7384))

### [2021-04-28T09:40:47+00:00](https://github.com/leanprover-community/mathlib/commit/105935c0c3c9b2b842fed9795f7aa498d3562454)
feat(linear_algebra/finite_dimensional): characterizations of finrank = 1 and ≤ 1 ([#7354](https://github.com/leanprover-community/mathlib/pull/#7354))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-28T06:27:58+00:00](https://github.com/leanprover-community/mathlib/commit/f952dd115c01bb6e68c83cd4d955bbedfda65861)
refactor(algebra/big_operators/finprod, ring_theory/hahn_series): summable families now use `finsum` ([#7388](https://github.com/leanprover-community/mathlib/pull/#7388))

Adds a few `finprod/finsum` lemmas
Uses them to refactor `hahn_series.summable_family` to use `finsum`

### [2021-04-28T01:28:28+00:00](https://github.com/leanprover-community/mathlib/commit/db8908293e933e270a44cf3955859d8429cc4c82)
chore(.): remove stray file ([#7390](https://github.com/leanprover-community/mathlib/pull/#7390))

I accidentally committed a stray pdf file generated by `leanproject import-graph` during [#7250](https://github.com/leanprover-community/mathlib/pull/#7250), and it accidentally got merged into master!



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-28T01:28:27+00:00](https://github.com/leanprover-community/mathlib/commit/97118b459fd883cecd118ee336551d32130c6bf0)
fix(algebra/group/commute): use the right typeclass ([#7389](https://github.com/leanprover-community/mathlib/pull/#7389))

This section is called `mul_one_class`, but I forgot to actually make it use `mul_one_class` instead of `monoid` in a previous PR...

### [2021-04-28T01:28:26+00:00](https://github.com/leanprover-community/mathlib/commit/d40a60c847a20b25cb25ffa62d1c0b4f67970ee1)
feat(logic/embedding): add function.embedding.coe_injective ([#7383](https://github.com/leanprover-community/mathlib/pull/#7383))

Prior art for this lemma name: `linear_map.coe_injective`

### [2021-04-27T20:07:51+00:00](https://github.com/leanprover-community/mathlib/commit/c562cafab23da1778c3791afd36eda1d186419ab)
fix(tactic/itauto): reset after or split ([#7387](https://github.com/leanprover-community/mathlib/pull/#7387))

Fixes a bug [reported on zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/.60ring.60.20tactic.20for.20types/near/236368947)

### [2021-04-27T20:07:50+00:00](https://github.com/leanprover-community/mathlib/commit/a24d4809e07ff2c26b09f5a7750bd143471d826f)
chore(.docker): fix alpine docker build ([#7374](https://github.com/leanprover-community/mathlib/pull/#7374))

A dependency for building mathlibtools had gained a requirement of having `make` available, so we install that.

This doesn't affect the produced image, and we only install `make` in an intermediate image.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-27T20:07:49+00:00](https://github.com/leanprover-community/mathlib/commit/1ff56a0300c7afbb1dab55776a76d57f022b7992)
feat(analysis/analytic): a few lemmas about summability and radius ([#7365](https://github.com/leanprover-community/mathlib/pull/#7365))

This PR adds a few lemmas relating the radius of a formal multilinear series `p` to the summability of `Σ ∥pₙ∥ ∥y∥ⁿ` (in both ways). There isn't anything incredibly new as these are mostly special cases of existing lemmas, but I think they could be simpler to find and use. I also modified the docstring of `formal_multilinear_series.radius` to emphasize the difference between "`Σ pₙ yⁿ`converges" and "`Σ ∥pₙ∥ ∥y∥ⁿ` converges".

### [2021-04-27T15:04:08+00:00](https://github.com/leanprover-community/mathlib/commit/5247d00f26699e2fea812a5141a6446e32ed67fd)
feat(algebra/group_with_zero): add semigroup_with_zero ([#7346](https://github.com/leanprover-community/mathlib/pull/#7346))

Split from [#6786](https://github.com/leanprover-community/mathlib/pull/#6786). By putting the new typeclass _before_ `mul_zero_one_class`, it doesn't need any annotations on `zero_ne_one` as the original PR did.

### [2021-04-27T15:04:06+00:00](https://github.com/leanprover-community/mathlib/commit/78a20ffc57d82f5eb8684682449e372586fdd76d)
feat(data/buffer/parser/basic): nat_eq_done ([#6340](https://github.com/leanprover-community/mathlib/pull/#6340))

The `nat` parser gives the maximal possible numeral.

### [2021-04-27T11:31:38+00:00](https://github.com/leanprover-community/mathlib/commit/5263ea32697b3c0d0f11f565101a2ad548185eeb)
chore(algebra/lie/{abelian,tensor_product}): rename `maximal_trivial_submodule` → `max_triv_submodule` ([#7385](https://github.com/leanprover-community/mathlib/pull/#7385))

cf https://github.com/leanprover-community/mathlib/pull/7313#discussion_r619995552

### [2021-04-27T11:31:37+00:00](https://github.com/leanprover-community/mathlib/commit/e7bd3caabad6072dae7602164efd2eff97f3a7f3)
docs(overview): Add some recent work by Yury ([#7378](https://github.com/leanprover-community/mathlib/pull/#7378))

Hausdorff measure and Urysohn's lemma

### [2021-04-27T11:31:36+00:00](https://github.com/leanprover-community/mathlib/commit/efeeacaf705dcd9d3d78f3bec3ef7fd1e5bfcc70)
feat(analysis/special_functions/integrals): integral of `sin x ^ n` ([#7372](https://github.com/leanprover-community/mathlib/pull/#7372))

The reduction of `∫ x in a..b, sin x ^ n`, ∀ n ∈ ℕ, 2 ≤ n.

We had this for the integral over [0, π] but I don't see any reason not to generalize it to any [a, b].

This also allows for the derivation of the integral of `sin x ^ 2` as a special case.

### [2021-04-27T11:31:35+00:00](https://github.com/leanprover-community/mathlib/commit/18403ac83686455bdc1de6c87169e9de8ded1f5b)
feat(topology/separation): change regular_space definition, added t1_characterisation and definition of Urysohn space ([#7367](https://github.com/leanprover-community/mathlib/pull/#7367))

This PR changes the definition of regular_space becouse the previous definition requests t1_space and it's posible to only require t0_space as a condition. Due to that change, we had to reformulate the prove of the lemma separed_regular in src/topology/uniform_space/separation.lean adding the t0 condition.
We've also define the Uryson space , with his respectives lemmas about the relation with `T_2` and `T_3`, and prove the relation between the definition of t1_space from mathlib and the common definition with open sets.



Co-authored-by: carloscaralps <78864605+carloscaralps@users.noreply.github.com>
Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-04-27T07:21:32+00:00](https://github.com/leanprover-community/mathlib/commit/287492c6c87bc5ed558aa2a1df639cbe65961698)
refactor(ring_theory/hahn_series): non-linearly-ordered Hahn series ([#7377](https://github.com/leanprover-community/mathlib/pull/#7377))

Refactors Hahn series to use `set.is_pwo` instead of `set.is_wf`, allowing them to be defined on non-linearly-ordered monomial types

### [2021-04-27T07:21:31+00:00](https://github.com/leanprover-community/mathlib/commit/57cc384311f34e5043d9bc90da8e1087e991da31)
chore(integration): missing lemmas ([#7364](https://github.com/leanprover-community/mathlib/pull/#7364))

These are still preliminaries for derivation of parametric integrals.

From the sphere eversion project

### [2021-04-27T07:21:30+00:00](https://github.com/leanprover-community/mathlib/commit/241400f866ac81fd928b61866380baceca453d97)
feat(analysis/seminorm): lemmas on balanced sets ([#7358](https://github.com/leanprover-community/mathlib/pull/#7358))

Adds lemmas about operations on balanced sets and golfs a proof.

### [2021-04-27T07:21:29+00:00](https://github.com/leanprover-community/mathlib/commit/20c520a683e8f80dc64f934cf873c8d3f37a9cca)
feat(algebra/opposite): inversion is a mul_equiv to the opposite group ([#7330](https://github.com/leanprover-community/mathlib/pull/#7330))

This also splits out `monoid_hom.to_opposite` from `ring_hom.to_opposite`, and adds `add_equiv.neg` and `mul_equiv.inv` for the case when the `(add_)group` is commutative.

### [2021-04-27T07:21:28+00:00](https://github.com/leanprover-community/mathlib/commit/465cf5ad150589bf6e5e69e3f51158bc72018e93)
feat(category_theory/abelian): biproducts of projective objects are projective ([#7319](https://github.com/leanprover-community/mathlib/pull/#7319))

Also all objects of `Type` are projective.





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-27T07:21:26+00:00](https://github.com/leanprover-community/mathlib/commit/874780fcb5f24a76b3959aa3cd016b491be5b99d)
feat(data/quot): rec_on_subsingleton2' ([#7294](https://github.com/leanprover-community/mathlib/pull/#7294))

### [2021-04-27T07:21:25+00:00](https://github.com/leanprover-community/mathlib/commit/a3f589c0a380a5948700b6214ae042cf380fa01e)
feat(analysis/calculus/deriv): `has_deriv_at.continuous_on` ([#7260](https://github.com/leanprover-community/mathlib/pull/#7260))

See [Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/has_deriv_at.2Econtinuous_on/near/235034547).

### [2021-04-27T07:21:24+00:00](https://github.com/leanprover-community/mathlib/commit/4f9543bb4bb7bfd36cadce507b9e47b690f93cb5)
feat(data/polynomial): lemma about aeval on functions, and on subalgebras ([#7252](https://github.com/leanprover-community/mathlib/pull/#7252))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-04-27T07:21:23+00:00](https://github.com/leanprover-community/mathlib/commit/89c27ccdfe58a256871aaa6cc26d5b1bad4c4c1d)
feat(category/subobjects): more API on limit subobjects ([#7203](https://github.com/leanprover-community/mathlib/pull/#7203))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Markus Himmel <markus@himmel-villmar.de>

### [2021-04-27T07:21:22+00:00](https://github.com/leanprover-community/mathlib/commit/40b15f254641c4db8dbc531fc97d12d721fad757)
feat(algebra/direct_sum): state what it means for a direct sum to be internal ([#7190](https://github.com/leanprover-community/mathlib/pull/#7190))

The goal here is primarily to tick off the item in undergrad.yml.

We'll want some theorems relating this statement to independence / spanning of the submodules, but I'll leave those for someone else to follow-up with.

We end up needing three variants of this - one for each of add_submonoids, add_subgroups, and submodules.

### [2021-04-27T05:47:11+00:00](https://github.com/leanprover-community/mathlib/commit/2d8ed1f5565373307616a52ce2d793107ad4f8d0)
chore(group_theory/eckmann_hilton): use `mul_one_class` and `is_(left|right)_id` ([#7370](https://github.com/leanprover-community/mathlib/pull/#7370))

This ties these theorems slightly more to the rest of mathlib.

The changes are:

* `eckmann_hilton.comm_monoid` now promotes a `mul_one_class` to a `comm_monoid` rather than taking two `is_unital` objects. This makes it consistent with `eckmann_hilton.comm_group`.
* `is_unital` is no longer a `class`, since it never had any instances and was never used as a typeclass argument.
* `is_unital` is now defined in terms of `is_left_id` and `is_right_id`.
* `add_group.is_unital` has been renamed to `eckmann_hilton.add_zero_class.is_unital` - the missing namespace was an accident, and the definition works much more generally than it was originally stated for.

### [2021-04-27T04:33:28+00:00](https://github.com/leanprover-community/mathlib/commit/174244317655f687c20be0aa27d5ce32508f9f32)
refactor(archive/imo) shorten imo1013_q5 using pow_unbounded_of_one_lt ([#7373](https://github.com/leanprover-community/mathlib/pull/#7373))

Replaces a usage of `one_add_mul_sub_le_pow` with the more direct `pow_unbounded_of_one_lt`.

### [2021-04-26T22:18:45+00:00](https://github.com/leanprover-community/mathlib/commit/3093fd8176e67eb5021799cb911760094d984074)
chore(algebra/category/*): use by apply to speed up elaboration ([#7360](https://github.com/leanprover-community/mathlib/pull/#7360))

A few more speed ups.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-26T18:22:46+00:00](https://github.com/leanprover-community/mathlib/commit/a5cb13a6fc07c4a51eb10740d8e19e14f2dc1244)
feat(order/zorn): upward inclusion variant of Zorn's lemma ([#7362](https://github.com/leanprover-community/mathlib/pull/#7362))

add zorn_superset

This also add various missing bits of whitespace throughout the file.

### [2021-04-26T13:34:11+00:00](https://github.com/leanprover-community/mathlib/commit/5ac79a631c4af861858db2a65f8810c283d354a2)
feat(algebra/lie/tensor_product): prove `lie_submodule.lie_ideal_oper_eq_tensor_map_range` ([#7313](https://github.com/leanprover-community/mathlib/pull/#7313))

The lemma `coe_lift_lie_eq_lift_coe` also introduced here is an unrelated change but is a stronger form of `lift_lie_apply` that is worth having.

See also this [Zulip remark](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60/near/235845192) concerning the proposed library note.

### [2021-04-26T13:34:10+00:00](https://github.com/leanprover-community/mathlib/commit/35b9d9c40812b1397f53ba110ada014846f670f7)
feat(group_theory/finiteness): add submonoid.fg ([#7279](https://github.com/leanprover-community/mathlib/pull/#7279))

I introduce here the notion of a finitely generated monoid (not necessarily commutative) and I prove that the notion is preserved by `additive`/`multiplicative`.

A natural continuation is of course to introduce the same notion for groups.

### [2021-04-26T09:22:21+00:00](https://github.com/leanprover-community/mathlib/commit/5258669e19c3a0321c4909366909ad2c735518e5)
feat(topology/unit_interval): affine homeomorphisms of intervals ([#7250](https://github.com/leanprover-community/mathlib/pull/#7250))




Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-26T06:03:18+00:00](https://github.com/leanprover-community/mathlib/commit/c22de3f5afeff8c7e99f23df49f3cf0f970877e7)
chore(algebra/lie/nilpotent): make proof of `module.derived_series_le_lower_central_series` less refl-heavy ([#7359](https://github.com/leanprover-community/mathlib/pull/#7359))

According to the list in [this Zulip remark](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20repo.20GitHub.20actions.20queue/near/235996204)
this lemma was the slowest task for Leanchecker.

The changes here should help. Using `set_option profiler true`, I see
about a ten-fold speedup in elaboration time for Lean, from approximately
2.4s to 0.24s

### [2021-04-25T19:05:15+00:00](https://github.com/leanprover-community/mathlib/commit/95260613e481c2571df45c3961d491821f147dd8)
feat(data/nat/fib): add a strict monotonicity lemma. ([#7317](https://github.com/leanprover-community/mathlib/pull/#7317))

Prove strict monotonicity of `fib (n + 2)`.

With thanks to @b-mehta and @dwarn.

### [2021-04-25T15:13:07+00:00](https://github.com/leanprover-community/mathlib/commit/4e0c460a0e7eba4fc991343141aa883b714d9494)
chore(analysis/special_functions/integrals): reorganize file ([#7351](https://github.com/leanprover-community/mathlib/pull/#7351))

### [2021-04-25T15:13:06+00:00](https://github.com/leanprover-community/mathlib/commit/dbc9cf9f169f85d8359ff81a60d7463fa95bfe5e)
feat(data/matrix/basic): transform vec_mul to mul_vec ([#7348](https://github.com/leanprover-community/mathlib/pull/#7348))

### [2021-04-25T15:13:05+00:00](https://github.com/leanprover-community/mathlib/commit/d5cb4033fde010326072db9747a9a3d4697d2974)
chore(ring_theory/ideal/operations): golf and remove @ ([#7347](https://github.com/leanprover-community/mathlib/pull/#7347))

Instead of passing all these arguments explicitly, it's sufficient to just use `(... : _)` to get the elaborator to do the right thing.
This makes this proof less fragile to argument changes to `pi.ring_hom`, such as the planned generalization to non-associative rings

### [2021-04-25T15:13:04+00:00](https://github.com/leanprover-community/mathlib/commit/3821d318911e676ae3a5a20f030564a0b6e6faf7)
feat(ring_theory): fg_iff_exists_fin_generating_fam ([#7343](https://github.com/leanprover-community/mathlib/pull/#7343))

### [2021-04-25T15:13:03+00:00](https://github.com/leanprover-community/mathlib/commit/9cc3d80ed0854b447558c7695402d9976afb9391)
feat(linear_algebra): free_of_finite_type_torsion_free ([#7341](https://github.com/leanprover-community/mathlib/pull/#7341))

A finite type torsion free module over a PID is free.

There are also some tiny preliminaries, and I moved `submodule.map_span` to `linear_map.map_span` to allow using the dot notation more often.

### [2021-04-25T10:09:22+00:00](https://github.com/leanprover-community/mathlib/commit/8e4ef23af5593cd79050348037ebbd0b877ac692)
refactor(*): kill int multiplication diamonds ([#7255](https://github.com/leanprover-community/mathlib/pull/#7255))

Insert a data field `gsmul` in `add_comm_group` containing a Z-action, and use it to make sure that all diamonds related to `Z` -actions disappear.

Followup to [#7084](https://github.com/leanprover-community/mathlib/pull/#7084)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2021-04-25T05:29:14+00:00](https://github.com/leanprover-community/mathlib/commit/d052c5270f47dc9e20fcc3eda97b2f165533f509)
feat(order/extension): extend partial order to linear order ([#7142](https://github.com/leanprover-community/mathlib/pull/#7142))

Adds a construction to extend a partial order to a linear order. Also fills in a missing Zorn variant.

### [2021-04-25T03:55:19+00:00](https://github.com/leanprover-community/mathlib/commit/d5330fe871397f2d142bc0c2e326f5853e415058)
chore(algebra/category): remove duplicated proofs ([#7349](https://github.com/leanprover-community/mathlib/pull/#7349))

The results added in [#7100](https://github.com/leanprover-community/mathlib/pull/#7100) already exist. I moved them to the place where Scott added the duplicates. Hopefully that will make them more discoverable.

### [2021-04-24T22:17:12+00:00](https://github.com/leanprover-community/mathlib/commit/6b2bb8a1ee8a17b77f974a6af3a017ead91350a4)
feat(data/finsupp): to_multiset symm apply ([#7356](https://github.com/leanprover-community/mathlib/pull/#7356))

Adds a lemma and golfs a proof.

### [2021-04-24T22:17:11+00:00](https://github.com/leanprover-community/mathlib/commit/beb694b9f384bfb078e5344f1d0f6bdd8d015418)
feat(data/list/basic): assorted list lemmas ([#7296](https://github.com/leanprover-community/mathlib/pull/#7296))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-04-24T22:17:10+00:00](https://github.com/leanprover-community/mathlib/commit/77168704b47ed232c95dd2307c690a8b43679066)
feat(data/list/forall2): defines sublist_forall2 relation ([#7165](https://github.com/leanprover-community/mathlib/pull/#7165))

Defines the `sublist_forall₂` relation, indicating that one list is related by `forall₂` to a sublist of another.
Provides two lemmas, `head_mem_self` and `mem_of_mem_tail`, which will be useful when proving Higman's Lemma about the `sublist_forall₂` relation.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-04-24T19:36:55+00:00](https://github.com/leanprover-community/mathlib/commit/2ecd65e6de2939f09df9d964782f8ec7ba4aeb5c)
feat(archive/imo): IMO 2001 Q2 ([#7238](https://github.com/leanprover-community/mathlib/pull/#7238))

Formalization of IMO 2001/2

### [2021-04-24T19:36:54+00:00](https://github.com/leanprover-community/mathlib/commit/8f8b194a1c61b519ed9626fc31477014e01aa165)
feat(linear_algebra): Lagrange formulas for expanding `det` along a row or column ([#6897](https://github.com/leanprover-community/mathlib/pull/#6897))

This PR proves the full Lagrange formulas for writing the determinant of a `n+1 × n+1` matrix as an alternating sum of minors. @pechersky and @eric-wieser already put together enough of the pieces so that `simp` could apply this formula to matrices of a known size. In the end I still had to apply a couple of permutations (`fin.cycle_range` defined in [#6815](https://github.com/leanprover-community/mathlib/pull/#6815)) to the entries to get to the "official" formula.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-04-24T19:36:54+00:00](https://github.com/leanprover-community/mathlib/commit/f83ae595042b620c7ae2237c4de9c581ebedc454)
feat(group_theory/nielsen_schreier): subgroup of free group is free ([#6840](https://github.com/leanprover-community/mathlib/pull/#6840))

Prove that a subgroup of a free group is itself free

### [2021-04-24T15:20:39+00:00](https://github.com/leanprover-community/mathlib/commit/46ceb36ee52a2545c4e0b0f86de15344ae66ebd2)
refactor(*): rename `semimodule` to `module`, delete typeclasses `module` and `vector_space` ([#7322](https://github.com/leanprover-community/mathlib/pull/#7322))

Splitting typeclasses between `semimodule`, `module` and `vector_space` was causing many (small) issues, so why don't we just get rid of this duplication?

This PR contains the following changes:
 * delete the old `module` and `vector_space` synonyms for `semimodule`
 * find and replace all instances of `semimodule` and `vector_space` to `module`
 * (thereby renaming the previous `semimodule` typeclass to `module`)
 * rename `vector_space.dim` to `module.rank` (in preparation for generalizing this definition to all modules)
 * delete a couple `module` instances that have now become redundant

This find-and-replace has been done extremely naïvely, but it seems there were almost no name clashes and no "clbuttic mistakes". I have gone through the full set of changes, finding nothing weird, and I'm fixing any build issues as they come up (I expect less than 10 declarations will cause conflicts).

Zulip discussion: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/module.20from.20semimodule.20over.20a.20ring

A good example of a workaround required by the `module` abbreviation is the [`triv_sq_zero_ext.module` instance](https://github.com/leanprover-community/mathlib/blob/3b8cfdc905c663f3d99acac325c7dff1a0ce744c/src/algebra/triv_sq_zero_ext.lean#L164).



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-04-24T10:16:02+00:00](https://github.com/leanprover-community/mathlib/commit/f15887a18a25164de77ba1d80fdd8df2596272e3)
chore(docs/100.yaml): mention "Erdős–Szekeres" by name ([#7353](https://github.com/leanprover-community/mathlib/pull/#7353))

### [2021-04-24T10:16:00+00:00](https://github.com/leanprover-community/mathlib/commit/767c8c59dea4b4e0dfbd97c66da57938bb01501e)
feat(data/int/basic): add nat_abs_ne_zero ([#7350](https://github.com/leanprover-community/mathlib/pull/#7350))

### [2021-04-24T02:33:48+00:00](https://github.com/leanprover-community/mathlib/commit/27cd5c114e6c5b4c338ef8d244bc22dd16d4fe07)
feat(group_theory/{perm/cycle_type, specific_groups/alternating_group}): the alternating group is generated by 3-cycles ([#6949](https://github.com/leanprover-community/mathlib/pull/#6949))

Moves the alternating group to a new file, renames `alternating_subgroup` to `alternating_group`
Proves that any permutation whose support has cardinality 3 is a cycle
Defines `equiv.perm.is_three_cycle`
Shows that the alternating group is generated by 3-cycles



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>
Co-authored-by: Thomas Browning <tb65536@uw.edu>

### [2021-04-23T20:45:18+00:00](https://github.com/leanprover-community/mathlib/commit/bbd9362d4e490430ede2919e433933f36c46d5b0)
feat(topology/algebra): uniform continuity from 0 ([#7318](https://github.com/leanprover-community/mathlib/pull/#7318))

From https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Linear.20map.20is.20continuous.20if.20it's.20continuous.20at.20zero/near/234714207, thanks to @PatrickMassot.

### [2021-04-23T15:54:59+00:00](https://github.com/leanprover-community/mathlib/commit/d89f93a968c3c2e00ca5a1eefa858667a516cece)
refactor(field_theory/algebraic_closure): move complex.is_alg_closed ([#7344](https://github.com/leanprover-community/mathlib/pull/#7344))

This avoids having to import half of analysis in order to talk about eigenspaces.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-23T15:54:58+00:00](https://github.com/leanprover-community/mathlib/commit/bb2e7f9e0f8f539061a97fb4c0a7cd8641187da1)
feat(algebra/star/pi): star operates elementwise on pi types ([#7342](https://github.com/leanprover-community/mathlib/pull/#7342))

### [2021-04-23T15:54:57+00:00](https://github.com/leanprover-community/mathlib/commit/a5b5f6c3f493f47de8b6a5bdd517ddd718779acf)
chore(algebra/opposite): add missing `monoid_with_zero` instance ([#7339](https://github.com/leanprover-community/mathlib/pull/#7339))

Along with the `mul_zero_one_class` and `mul_zero_class` instances needed to build it

### [2021-04-23T15:54:56+00:00](https://github.com/leanprover-community/mathlib/commit/6c092955ccca581d9b873e04469879a5e05a9499)
feat(analysis/specific_limits): basic ratio test for summability of a nat-indexed family ([#7277](https://github.com/leanprover-community/mathlib/pull/#7277))

### [2021-04-23T11:02:02+00:00](https://github.com/leanprover-community/mathlib/commit/33ea698047c048854b782ac73154db015e60cd24)
feat(linear_algebra/tensor_product): characterise range of tensor product of two linear maps ([#7340](https://github.com/leanprover-community/mathlib/pull/#7340))

### [2021-04-23T11:02:00+00:00](https://github.com/leanprover-community/mathlib/commit/227c42d1577fa71e6acc864a1fe97db50fdf3090)
doc(field_theory/minpoly): improve some doc-strings ([#7336](https://github.com/leanprover-community/mathlib/pull/#7336))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-23T11:01:59+00:00](https://github.com/leanprover-community/mathlib/commit/3a8f9db97b4e63efebebcd084ba40b6dee6a4359)
feat(logic/function/basic): function.involutive.eq_iff ([#7332](https://github.com/leanprover-community/mathlib/pull/#7332))

The lemma name matches the brevity of `function.injective.eq_iff`.
The fact the definitions differ isn't important, as both are accessible from `hf : involutive f` as `hf.eq_iff` and `hf.injective.eq_iff`.

### [2021-04-23T11:01:58+00:00](https://github.com/leanprover-community/mathlib/commit/15b4fe618d41abfd614139a192a119c55f8be39b)
chore(algebra/iterate_hom): generalize `iterate_map_one` and `iterate_map_mul` to mul_one_class ([#7331](https://github.com/leanprover-community/mathlib/pull/#7331))

### [2021-04-23T11:01:57+00:00](https://github.com/leanprover-community/mathlib/commit/4b065bfc1de3f6d133d29c6d4c2753176bf9ad75)
feat(data/matrix/basic): add lemma for assoc of mul_vec w.r.t. smul ([#7310](https://github.com/leanprover-community/mathlib/pull/#7310))


Add a new lemma for the other direction of smul_mul_vec_assoc, which works on commutative rings.

### [2021-04-23T07:17:04+00:00](https://github.com/leanprover-community/mathlib/commit/6f3d9053bc15ebd8387a698ac0b1e66770e16b90)
refactor(ring_theory/polynomial/content): Define is_primitive more generally ([#7316](https://github.com/leanprover-community/mathlib/pull/#7316))

The lemma `is_primitive_iff_is_unit_of_C_dvd` shows that `polynomial.is_primitive` can be defined without the `gcd_monoid` assumption.

### [2021-04-23T07:17:03+00:00](https://github.com/leanprover-community/mathlib/commit/5bd96ce7f163fa7c18a6769b6010c58f4d62f909)
feat(algebra/group/pi): pow_apply ([#7302](https://github.com/leanprover-community/mathlib/pull/#7302))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-23T07:17:02+00:00](https://github.com/leanprover-community/mathlib/commit/85df3a36b60abc499befa5c768ce8dcf6e78487e)
refactor(group_theory/submonoid/basic): merge together similar lemmas and definitions ([#7280](https://github.com/leanprover-community/mathlib/pull/#7280))

This uses `simps` to generate lots of uninteresting coe lemmas, and removes the less-bundled versions of definitions.

The main changes are:

* `add_submonoid.to_submonoid_equiv` is now just called `add_submonoid.to_submonoid`. This means we can remove the `add_submonoid.to_submonoid_mono` lemma, as that's available as `add_submonoid.to_submonoid.monotone`. Ditto for the multiplicative version.
* `simps` now knows how to handled `(add_)submonoid` objects. Unfortunately it uses `coe` as a suffix rather than a prefix, so we can't use it everywhere yet. For now we restrict its use to just these additive / multiplicative lemmas which already had `coe` as a suffix.
* `submonoid.of_add_submonoid` has been renamed to `add_submonoid.to_submonoid'` to enable dot notation.
* `add_submonoid.of_submonoid` has been renamed to `submonoid.to_add_submonoid'` to enable dot notation.
* The above points, but applied to `(add_)subgroup`
* Two new variants of the closure lemmas about `add_submonoid` (`add_submonoid.to_submonoid'_closure` and `submonoid.to_add_submonoid'_closure`), taken from [#7279](https://github.com/leanprover-community/mathlib/pull/#7279)

### [2021-04-23T07:17:01+00:00](https://github.com/leanprover-community/mathlib/commit/0070d22ab3b79b645fb36c9208667d8e201dfc57)
feat(algebra/category/Module): mono_iff_injective ([#7100](https://github.com/leanprover-community/mathlib/pull/#7100))

We should also prove `epi_iff_surjective` at some point. In the `Module` case this doesn't fall out of an adjunction, but it's still true.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-23T06:00:43+00:00](https://github.com/leanprover-community/mathlib/commit/b77916dbb7bf5ad0c769b642a4dfde0f2531e49c)
feat(algebraic_geometry/Scheme): improve cosmetics of definition ([#7325](https://github.com/leanprover-community/mathlib/pull/#7325))

Purely cosmetic, but the definition is going on a poster, so ...



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-23T04:34:57+00:00](https://github.com/leanprover-community/mathlib/commit/40bb51e7d436d56fbe335406fae46628453c40ff)
chore(scripts): update nolints.txt ([#7334](https://github.com/leanprover-community/mathlib/pull/#7334))

I am happy to remove some nolints for you!

### [2021-04-23T00:41:31+00:00](https://github.com/leanprover-community/mathlib/commit/2bd09f0f8e121cd0ea76ea29b23082e6fcb40eac)
chore(geometry/manifold/instances/circle): provide instance ([#7333](https://github.com/leanprover-community/mathlib/pull/#7333))

Assist typeclass inference when proving the circle is a Lie group, by providing an instance.

(Mostly cosmetic, but as this proof is going on a poster I wanted to streamline.)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-23T00:41:30+00:00](https://github.com/leanprover-community/mathlib/commit/1e1e93a2fd2c334a4630d1d1ac937515226c229a)
feat(data/list/zip): distributive lemmas ([#7312](https://github.com/leanprover-community/mathlib/pull/#7312))





Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-04-22T20:22:25+00:00](https://github.com/leanprover-community/mathlib/commit/b401f074d14a59c595b3e9f2a995fd305ff20c85)
feat(src/group_theory/subgroup): add closure.submonoid.closure ([#7328](https://github.com/leanprover-community/mathlib/pull/#7328))

`subgroup.closure S` equals `submonoid.closure (S ∪ S⁻¹)`.

### [2021-04-22T20:22:24+00:00](https://github.com/leanprover-community/mathlib/commit/aff758eeb28803c0debadf080370ff3225c150be)
feat(data/nat/gcd, ring_theory/int/basic): add some basic lemmas ([#7314](https://github.com/leanprover-community/mathlib/pull/#7314))

This also reduces the dependency on definitional equalities a but

### [2021-04-22T20:22:23+00:00](https://github.com/leanprover-community/mathlib/commit/f8464e353a20e4cfb9ef6ddf629e821aa551aa1b)
chore(computability/language): golf some proofs ([#7301](https://github.com/leanprover-community/mathlib/pull/#7301))

### [2021-04-22T20:22:22+00:00](https://github.com/leanprover-community/mathlib/commit/0521e2bad88ef8b5fb07a7af37799c9d8dabe935)
feat(data/list/nodup): nodup.ne_singleton_iff ([#7298](https://github.com/leanprover-community/mathlib/pull/#7298))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-04-22T20:22:21+00:00](https://github.com/leanprover-community/mathlib/commit/1c07dc0e452d6f57915d616880b87a4ccee7478e)
feat(algebra/big_operators): `prod_ite_of_{true, false}`. ([#7291](https://github.com/leanprover-community/mathlib/pull/#7291))



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-04-22T20:22:20+00:00](https://github.com/leanprover-community/mathlib/commit/a104211d1e38ddd4e3d5b379962fb1962f8956cd)
feat(data/list): suffix_cons_iff ([#7287](https://github.com/leanprover-community/mathlib/pull/#7287))

### [2021-04-22T20:22:19+00:00](https://github.com/leanprover-community/mathlib/commit/98ccc666ccd088a06021008eb537eb104253ff8f)
feat(algebra/lie/tensor_product): define (binary) tensor product of Lie modules ([#7266](https://github.com/leanprover-community/mathlib/pull/#7266))

### [2021-04-22T20:22:18+00:00](https://github.com/leanprover-community/mathlib/commit/fa49a635699a610b6de20b60d540e794eae4910e)
feat(set/lattice): nonempty_of_union_eq_top_of_nonempty ([#7254](https://github.com/leanprover-community/mathlib/pull/#7254))

I have no idea where these lemmas belong. This is the earliest possible point. But perhaps they are too specific, and only belong at the point of use? I'm not certain here.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-22T20:22:16+00:00](https://github.com/leanprover-community/mathlib/commit/1585b14ae382eda7d3ccfeccb543aa51de16f316)
feat(group_theory/perm/*): Generating S_n ([#7211](https://github.com/leanprover-community/mathlib/pull/#7211))

This PR proves several lemmas about generating S_n, culminating in the following result:
If H is a subgroup of S_p, and if H has cardinality divisible by p, and if H contains a transposition, then H is all of S_p.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-04-22T20:22:15+00:00](https://github.com/leanprover-community/mathlib/commit/692974017e3c5276ca0501a577569f067f719645)
refactor(algebra/big_operators/finprod) move finiteness assumptions to be final parameters ([#7196](https://github.com/leanprover-community/mathlib/pull/#7196))

This PR takes all the finiteness hypotheses in `finprod.lean` and moves them back to be the last parameters of their lemmas. this only affects a handful of them because the API is small, and nothing else relies on it yet. This change is to allow for easier rewriting in cases where finiteness goals can be easily discharged, such as where a `fintype` instance is present. 

I also added `t` as an explicit parameter in `finprod_mem_inter_mul_diff` and the primed version, since it may be useful to invoke the lemma in cases where it can't be inferred, such as when rewriting in reverse.

### [2021-04-22T20:22:14+00:00](https://github.com/leanprover-community/mathlib/commit/a1f3ff85924453143c70a497bc41c36f8becf0e8)
feat(algebra/lie/nilpotent): basic lemmas about nilpotency ([#7181](https://github.com/leanprover-community/mathlib/pull/#7181))

### [2021-04-22T14:56:29+00:00](https://github.com/leanprover-community/mathlib/commit/a28012c8427642abd900b51c1e6a17c888463064)
feat(algebra/monoid_algebra): add mem.span_support ([#7323](https://github.com/leanprover-community/mathlib/pull/#7323))

A (very) easy lemma about `monoid_algebra`.

### [2021-04-22T14:56:28+00:00](https://github.com/leanprover-community/mathlib/commit/3d2fec5f669ba6a21b9f8d6fd4647045e2b1483b)
feat(algebra/group_power/basic): `pow_ne_zero_iff` and `pow_pos_iff` ([#7307](https://github.com/leanprover-community/mathlib/pull/#7307))

For natural `n > 0`, 
- `a ^ n ≠ 0 ↔ a ≠ 0`
- `0 < a ^ n ↔ 0 < a` where `a` is a member of a `linear_ordered_comm_monoid_with_zero`

### [2021-04-22T14:56:27+00:00](https://github.com/leanprover-community/mathlib/commit/1f65e42e46eb8d60f0e856c2d1bf78ae6e6b6391)
feat(category_theory/adjunction): reflective adjunction induces partial bijection ([#7286](https://github.com/leanprover-community/mathlib/pull/#7286))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-22T14:56:26+00:00](https://github.com/leanprover-community/mathlib/commit/e5e0ae74f0e174984256ac5e61fd108eb5fb9a55)
chore(data/set/intervals/image_preimage): remove unnecessary add_comm in lemmas ([#7276](https://github.com/leanprover-community/mathlib/pull/#7276))

These lemmas introduce an unexpected flip of the addition, whereas without these lemmas the simplification occurs as you might expect. Since these lemmas aren't otherwise used in mathlib, it seems simplest to just remove them.

Let me know if I'm missing something, or some reason to prefer flipping the addition.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-22T14:56:25+00:00](https://github.com/leanprover-community/mathlib/commit/56bedb400b37797e5f701726a38ec060aa65465f)
feat(analysis/special_functions/exp_log): `continuous_on_exp`/`pow` ([#7243](https://github.com/leanprover-community/mathlib/pull/#7243))

### [2021-04-22T14:56:24+00:00](https://github.com/leanprover-community/mathlib/commit/918aea72152c49c23fbce4bc814c344751f64958)
refactor(algebra/ring_quot.lean): make ring_quot irreducible ([#7120](https://github.com/leanprover-community/mathlib/pull/#7120))

The quotient of a ring by an equivalence relation which is compatible with the operations is still a ring. This is used to define several objects such as tensor algebras, exterior algebras, and so on, but the details of the construction are irrelevant. This PR makes `ring_quot` irreducible to keep the complexity down.

### [2021-04-22T10:34:46+00:00](https://github.com/leanprover-community/mathlib/commit/5ac093c9dd7f95fb4886a7604e6c6039f3f19042)
fix(.github/workflows): missing closing parentheses in add_label_from_*.yml ([#7320](https://github.com/leanprover-community/mathlib/pull/#7320))

### [2021-04-22T10:34:45+00:00](https://github.com/leanprover-community/mathlib/commit/2deda90e5df1fecb51d4e2ba92443ff636dc62c8)
feat(data/fin): help `simp` reduce expressions containing `fin.succ_above` ([#7308](https://github.com/leanprover-community/mathlib/pull/#7308))

With these `simp` lemmas, in combination with [#6897](https://github.com/leanprover-community/mathlib/pull/#6897), `simp; ring` can almost automatically compute the determinant of matrices like `![![a, b], ![c, d]]`.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-04-22T10:34:43+00:00](https://github.com/leanprover-community/mathlib/commit/8b7014b981c9f7879f96ec2d65cc1cfc028e442a)
fix(data/finset/lattice): sup'/inf' docstring ([#7281](https://github.com/leanprover-community/mathlib/pull/#7281))

Made proper reference to `f` in the doc string.

### [2021-04-22T10:34:41+00:00](https://github.com/leanprover-community/mathlib/commit/8c05ff87169e6e18ddec48ac67a920db74de40cf)
feat(set_theory/surreal): add ordered_add_comm_group instance for surreal numbers ([#7270](https://github.com/leanprover-community/mathlib/pull/#7270))

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal.20numbers/near/235213851)

Add ordered_add_comm_group instance for surreal numbers.

### [2021-04-22T10:34:39+00:00](https://github.com/leanprover-community/mathlib/commit/96d5730674a0ef313b7aa03994a16e330e7f6d1a)
feat(topology/continuous_function): lemmas about pointwise sup/inf ([#7249](https://github.com/leanprover-community/mathlib/pull/#7249))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-22T10:34:37+00:00](https://github.com/leanprover-community/mathlib/commit/4591eb5c517fba107513b6eed033c7321540868f)
chore(category_theory): replace has_hom with quiver ([#7151](https://github.com/leanprover-community/mathlib/pull/#7151))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-22T10:34:36+00:00](https://github.com/leanprover-community/mathlib/commit/8830a20fbd76a01040ae33897eab75b84176998a)
refactor(geometry/manifold): redefine some instances ([#7124](https://github.com/leanprover-community/mathlib/pull/#7124))

* Turn `unique_diff_within_at` into a `structure`.
* Generalize `tangent_cone_at`, `unique_diff_within_at`, and `unique_diff_on` to a `semimodule` that is a `topological_space`.
* Redefine `model_with_corners_euclidean_half_space` and `model_with_corners_euclidean_quadrant` to reuse more generic lemmas, including `unique_diff_on.pi` and `unique_diff_on.univ_pi`.
* Make `model_with_corners.unique_diff'` use `target` instead of `range I`; usually it has better defeq.

Co-authored-by: @gebner 



Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2021-04-22T06:38:11+00:00](https://github.com/leanprover-community/mathlib/commit/767d248b9bf7c7c984a563634ba87e0e754a9747)
doc(data/finset/basic): fix confusing typo ([#7315](https://github.com/leanprover-community/mathlib/pull/#7315))

### [2021-04-22T06:38:10+00:00](https://github.com/leanprover-community/mathlib/commit/3fb9823d67945434cbdab6fc700931fd1b4f1f6c)
feat(topology/subset_properties): variant of elim_nhds_subcover for compact_space ([#7304](https://github.com/leanprover-community/mathlib/pull/#7304))

I put this in the `compact_space` namespace, although dot notation won't work so if preferred I can move it back to `_root_`.




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-22T06:38:09+00:00](https://github.com/leanprover-community/mathlib/commit/b3b74f89b23643e7b11b5ff17e4f5278252405c9)
feat(data/finset/basic): list.to_finset on list ops ([#7297](https://github.com/leanprover-community/mathlib/pull/#7297))

### [2021-04-22T06:38:08+00:00](https://github.com/leanprover-community/mathlib/commit/55a1e65b2e118137d424cff3b7ae49d1c9bca76e)
feat(category_theory/adjunction): construct an adjunction on the over category ([#7290](https://github.com/leanprover-community/mathlib/pull/#7290))

Pretty small PR in preparation for later things.

### [2021-04-22T06:38:07+00:00](https://github.com/leanprover-community/mathlib/commit/d9df8fb573ee8753b5defc855d2ba79c409898e3)
chore(category_theory/subterminal): update docstring ([#7289](https://github.com/leanprover-community/mathlib/pull/#7289))

### [2021-04-22T06:38:05+00:00](https://github.com/leanprover-community/mathlib/commit/07e9dd4c5743d47141ef98b2dbd2e6e468cce4b6)
feat(data/nat/prime): nat.factors_eq_nil and other trivial simp lemmas ([#7284](https://github.com/leanprover-community/mathlib/pull/#7284))

### [2021-04-22T01:02:34+00:00](https://github.com/leanprover-community/mathlib/commit/6deafc205de3db86d84120d5b28a138821f8f610)
chore(.github/workflows): add delegated tag on comment ([#7251](https://github.com/leanprover-community/mathlib/pull/#7251))

This automation should hopefully add the "delegated" tag if a maintainer types `bors d+` or `bors d=`. (In fact, it will apply the label if it sees any line starting with `bors d`, since `bors delegate+`, etc. are also allowed).

### [2021-04-22T01:02:33+00:00](https://github.com/leanprover-community/mathlib/commit/f68645f1bcc7a381e6d424721674f5cd88c6e462)
feat(topology/continuous_function): change formulation of separates points strongly ([#7248](https://github.com/leanprover-community/mathlib/pull/#7248))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-22T01:02:32+00:00](https://github.com/leanprover-community/mathlib/commit/22f96fc07de80f43a3b2409144bda827367883ea)
chore(topology/algebra/affine): add @continuity to line_map_continuous ([#7246](https://github.com/leanprover-community/mathlib/pull/#7246))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-22T01:02:31+00:00](https://github.com/leanprover-community/mathlib/commit/afa6b72e20728cf46912ef9333d0f08ccebf7a6f)
feat(geometry/euclidean): proof of Freek thm 55 - product of chords ([#7139](https://github.com/leanprover-community/mathlib/pull/#7139))

proof of thm 55



Co-authored-by: Benjamin Davidson <68528197+benjamindavidson@users.noreply.github.com>

### [2021-04-22T01:02:29+00:00](https://github.com/leanprover-community/mathlib/commit/dac1da3a1bd28b869b248dc82e0e53747174b5c7)
feat(analysis/special_functions/bernstein): Weierstrass' theorem: polynomials are dense in C([0,1]) ([#6497](https://github.com/leanprover-community/mathlib/pull/#6497))

# Bernstein approximations and Weierstrass' theorem

We prove that the Bernstein approximations
```
∑ k : fin (n+1), f (k/n : ℝ) * n.choose k * x^k * (1-x)^(n-k)
```
for a continuous function `f : C([0,1], ℝ)` converge uniformly to `f` as `n` tends to infinity.

Our proof follows Richard Beals' *Analysis, an introduction*, §7D.
The original proof, due to Bernstein in 1912, is probabilistic,
and relies on Bernoulli's theorem,
which gives bounds for how quickly the observed frequencies in a
Bernoulli trial approach the underlying probability.

The proof here does not directly rely on Bernoulli's theorem,
but can also be given a probabilistic account.
* Consider a weighted coin which with probability `x` produces heads,
  and with probability `1-x` produces tails.
* The value of `bernstein n k x` is the probability that
  such a coin gives exactly `k` heads in a sequence of `n` tosses.
* If such an appearance of `k` heads results in a payoff of `f(k / n)`,
  the `n`-th Bernstein approximation for `f` evaluated at `x` is the expected payoff.
* The main estimate in the proof bounds the probability that
  the observed frequency of heads differs from `x` by more than some `δ`,
  obtaining a bound of `(4 * n * δ^2)⁻¹`, irrespective of `x`.
* This ensures that for `n` large, the Bernstein approximation is (uniformly) close to the
  payoff function `f`.

(You don't need to think in these terms to follow the proof below: it's a giant `calc` block!)

This result proves Weierstrass' theorem that polynomials are dense in `C([0,1], ℝ)`,
although we defer an abstract statement of this until later.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-21T19:58:09+00:00](https://github.com/leanprover-community/mathlib/commit/f2984d51615166e96632e8efdfe7875575ad76ec)
fix(data/{finsupp,polynomial,mv_polynomial}/basic): add missing decidable arguments ([#7309](https://github.com/leanprover-community/mathlib/pull/#7309))

Lemmas with an `ite` in their conclusion should not use `classical.dec` or similar, instead inferring an appropriate decidability instance from their context. This eliminates a handful of converts elsewhere.

The linter in [#6485](https://github.com/leanprover-community/mathlib/pull/#6485) should eventually find these automatically.

### [2021-04-21T19:58:08+00:00](https://github.com/leanprover-community/mathlib/commit/120be3d924847722fd57fbe66cfea347b177005a)
feat(data/list/zip): map_zip_with ([#7295](https://github.com/leanprover-community/mathlib/pull/#7295))

### [2021-04-21T19:58:07+00:00](https://github.com/leanprover-community/mathlib/commit/253d4f5b6ee0e27901cfca95ade77d20c323b004)
feat(analysis/normed_space/dual): generalize to seminormed space ([#7262](https://github.com/leanprover-community/mathlib/pull/#7262))

We generalize here the Hahn-Banach theorem and the notion of dual space to `semi_normed_space`.

### [2021-04-21T19:58:06+00:00](https://github.com/leanprover-community/mathlib/commit/700d4773703695c4cc9d96516cb2f61065fe6574)
feat(analysis/special_functions/integrals): integral_comp for `f : ℝ → ℝ` ([#7216](https://github.com/leanprover-community/mathlib/pull/#7216))

In [#7103](https://github.com/leanprover-community/mathlib/pull/#7103) I added lemmas to deal with integrals of the form `c • ∫ x in a..b, f (c * x + d)`. However, it came to my attention that, with those lemmas, `simp` can only handle such integrals if they use `•`, not `*`. To solve this problem and enable computation of these integrals by `simp`, I add versions of the aforementioned `integral_comp` lemmas specialized with `f : ℝ → ℝ` and label them with `simp`.

### [2021-04-21T19:58:05+00:00](https://github.com/leanprover-community/mathlib/commit/721e0b9e758aa528d45f6f1ed24568e34f5f52db)
feat(order/complete_lattice): independence of an indexed family ([#7199](https://github.com/leanprover-community/mathlib/pull/#7199))

This PR reclaims the concept of `independent` for elements of a complete lattice. 
Right now it's defined on subsets -- a subset of a complete lattice L is independent if every
element of it is disjoint from (i.e. bot is the meet of it with) the Sup of all the other elements. 
The problem with this is that if you have an indexed family f:I->L of elements of L then
duplications get lost if you ask for the image of f to be independent (rather like the issue
with a basis of a vector space being a subset rather than an indexed family). This is
an issue when defining gradings on rings, for example: if M is a monoid and R is
a ring, then I don't want the map which sends every m to (top : subgroup R) to
be independent. 

I have renamed the set-theoretic version of `independent` to `set_independent`

### [2021-04-21T19:58:03+00:00](https://github.com/leanprover-community/mathlib/commit/66220ac04f1443edda0dcbcbc2929840c2e64cff)
chore(tactic/elementwise): fixes ([#7188](https://github.com/leanprover-community/mathlib/pull/#7188))

These fixes, while an improvement, still don't fix the problem @justus-springer observed in [#7092](https://github.com/leanprover-community/mathlib/pull/#7092).

Really we should generate a second copy of the `_apply` lemma, with the category specialized to `Type u`, and in that one remove all the coercions. Maybe later.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-21T09:38:17+00:00](https://github.com/leanprover-community/mathlib/commit/f08fe5fd60ee286dd0d69bd5db658da3949952a2)
doc(data/quot): promote a comment to a docstring ([#7306](https://github.com/leanprover-community/mathlib/pull/#7306))

### [2021-04-21T09:38:16+00:00](https://github.com/leanprover-community/mathlib/commit/7db1181e0eb78557cdfc245a123a728a441a6866)
feat(data/dfinsupp): copy map_range defs from finsupp ([#7293](https://github.com/leanprover-community/mathlib/pull/#7293))

This adds the bundled homs:

* `dfinsupp.map_range.add_monoid_hom`
* `dfinsupp.map_range.add_equiv`
* `dfinsupp.map_range.linear_map`
* `dfinsupp.map_range.linear_equiv`

and lemmas

* `dfinsupp.map_range_zero`
* `dfinsupp.map_range_add`
* `dfinsupp.map_range_smul`

For which we already have identical lemmas for `finsupp`.

Split from [#7217](https://github.com/leanprover-community/mathlib/pull/#7217), since `map_range.add_equiv` can be used in conjunction with `submonoid.mrange_restrict`

### [2021-04-21T09:38:15+00:00](https://github.com/leanprover-community/mathlib/commit/80028f3aee649afcc9306c7b7be3ba2ce40e49ed)
feat(data/finset/lattice): add `comp_sup'_eq_sup'_comp`, golf some proofs ([#7275](https://github.com/leanprover-community/mathlib/pull/#7275))

The proof is just a very marginally generalized version of the previous proof for `sup'_apply`.

### [2021-04-21T04:20:35+00:00](https://github.com/leanprover-community/mathlib/commit/9b8d6e498c3206ad8bfe4b8858ac138d18c18e30)
feat(category_theory/monoidal): Drinfeld center ([#7186](https://github.com/leanprover-community/mathlib/pull/#7186))

# Half braidings and the Drinfeld center of a monoidal category

We define `center C` to be pairs `⟨X, b⟩`, where `X : C` and `b` is a half-braiding on `X`.

We show that `center C` is braided monoidal,
and provide the monoidal functor `center.forget` from `center C` back to `C`.

## Future work

Verifying the various axioms here is done by tedious rewriting.
Using the `slice` tactic may make the proofs marginally more readable.

More exciting, however, would be to make possible one of the following options:
1. Integration with homotopy.io / globular to give "picture proofs".
2. The monoidal coherence theorem, so we can ignore associators
   (after which most of these proofs are trivial;
   I'm unsure if the monoidal coherence theorem is even usable in dependent type theory).
3. Automating these proofs using `rewrite_search` or some relative.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Bhavik Mehta <bhavikmehta8@gmail.com>

### [2021-04-21T04:20:34+00:00](https://github.com/leanprover-community/mathlib/commit/923314f29811848695e84012628d0ef4854f0ae1)
refactor(order/well_founded_set): partially well ordered sets using relations other than `has_le.le` ([#7131](https://github.com/leanprover-community/mathlib/pull/#7131))

Introduces `set.partially_well_ordered_on` to generalize `set.is_partially_well_ordered` to relations that do not necessarily come from a `has_le` instance
Renames `set.is_partially_well_ordered` to `set.is_pwo` in analogy with `set.is_wf`
Prepares to refactor Hahn series to use `set.is_pwo` and avoid the assumption of a linear order

### [2021-04-21T04:20:32+00:00](https://github.com/leanprover-community/mathlib/commit/02a31338019c339f9b8743c67b2e3aa9948069c4)
feat(group_theory/{order_of_element, perm/cycles}): two cycles are conjugate iff their supports have the same size ([#7024](https://github.com/leanprover-community/mathlib/pull/#7024))

Separates out the `equiv`s from several proofs in `group_theory/order_of_element`.
The equivs defined: `fin_equiv_powers`, `fin_equiv_gpowers`, `powers_equiv_powers`, `gpowers_equiv_gpowers`.
Shows that two cyclic permutations are conjugate if and only if their supports have the same `finset.card`.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-04-21T00:48:48+00:00](https://github.com/leanprover-community/mathlib/commit/8481bf46ebeee670a674512b6318a08729a1021e)
feat(algebra/algebra/basic): add alg_hom.apply ([#7278](https://github.com/leanprover-community/mathlib/pull/#7278))

This also renames some variables from α to R for readability

### [2021-04-21T00:48:47+00:00](https://github.com/leanprover-community/mathlib/commit/4abf96188a4e9e076e180aa308e3cd3a543fd84a)
feat(algebra/big_operators): product over coerced fintype ([#7236](https://github.com/leanprover-community/mathlib/pull/#7236))

### [2021-04-21T00:48:46+00:00](https://github.com/leanprover-community/mathlib/commit/ad588611ac446ff7954044c9e1fc0ab0dcd9a9cf)
refactor(group_theory/submonoid): adjust definitional unfolding of add_monoid_hom.mrange to match set.range ([#7227](https://github.com/leanprover-community/mathlib/pull/#7227))

This changes the following to unfold to `set.range`:

* `monoid_hom.mrange`
* `add_monoid_hom.mrange`
* `linear_map.range`
* `lie_hom.range`
* `ring_hom.range`
* `ring_hom.srange`
* `ring_hom.field_range`
* `alg_hom.range`

For example:
```lean
import ring_theory.subring

variables (R : Type*) [ring R] (f : R →+* R)

-- before this PR, these required `f '' univ` on the RHS
example : (f.range : set R) = set.range f := rfl
example : (f.srange : set R) = set.range f := rfl
example : (f.to_monoid_hom.mrange : set R) = set.range f := rfl

-- this one is unchanged by this PR
example : (f.to_add_monoid_hom.range : set R) = set.range f := rfl
```

The motivations behind this change are that
* It eliminates a lot of `∈ set.univ` hypotheses and goals that are just annoying
* it means that an equivalence like `A ≃ set.range f` is defeq to `A ≃ f.range`, with no need to insert awkward `equiv.cast`-like terms to translate between different approaches
* `monoid_hom.range` (as opposed to `mrange`) already used this pattern.

The number of lines has gone up a bit, but most of those are comments explaining the design choice.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60set.2Erange.20f.60.20vs.20.60f.20''.20univ.60/near/234893679)

### [2021-04-20T11:17:03+00:00](https://github.com/leanprover-community/mathlib/commit/9bdc5551c32259753b81d96d35763a9b29b65120)
feat(algebraic_geometry/prime_spectrum): More lemmas ([#7244](https://github.com/leanprover-community/mathlib/pull/#7244))

Adding and refactoring some lemmas about zero loci and basic opens. Also adds three lemmas in `ideal/basic.lean`.

### [2021-04-20T11:17:02+00:00](https://github.com/leanprover-community/mathlib/commit/39d23b8eceefbb5e91b7b530f331f445c58c7163)
feat(logic/basic): exists_or_eq_{left,right} ([#7224](https://github.com/leanprover-community/mathlib/pull/#7224))

### [2021-04-20T09:55:49+00:00](https://github.com/leanprover-community/mathlib/commit/bf22ab3f0890812f8f94709479d839e1d28291ce)
feat(linear_algebra/bilinear_form): Unique adjoints with respect to a nondegenerate bilinear form ([#7071](https://github.com/leanprover-community/mathlib/pull/#7071))

### [2021-04-20T07:56:28+00:00](https://github.com/leanprover-community/mathlib/commit/a4f59bde47b21d7f33f8b4ba9aa179ed300cf671)
feat(category_theory/subobject): easy facts about the top subobject ([#7267](https://github.com/leanprover-community/mathlib/pull/#7267))

### [2021-04-20T07:56:27+00:00](https://github.com/leanprover-community/mathlib/commit/0c721d5d86f39c99ee2d98e412ddae587e87a89c)
feat(algebra/lie/abelian): expand API for `lie_module.maximal_trivial_submodule` ([#7235](https://github.com/leanprover-community/mathlib/pull/#7235))

### [2021-04-20T07:56:26+00:00](https://github.com/leanprover-community/mathlib/commit/944ffff97bda5f2a0f0abea7b9d38154928167cf)
chore(combinatorics/quiver): make quiver a class ([#7150](https://github.com/leanprover-community/mathlib/pull/#7150))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-20T07:56:25+00:00](https://github.com/leanprover-community/mathlib/commit/5e188d2ff5db9cb06b3e234e136aaa1f62d84faf)
feat(category_theory/abelian): definition of projective object ([#7108](https://github.com/leanprover-community/mathlib/pull/#7108))

This is extracted from @TwoFX's `projective` branch, with some slight tweaks (make things `Prop` valued classes), and documentation.

This is just the definition of `projective` and `enough_projectives`, with no attempt to construct projective resolutions. I want this in place because constructing projective resolutions will hopefully be a good test of experiments with chain complexes.

Co-authored-by: Markus Himmel <markus@himmel-villmar.de>



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-20T03:28:21+00:00](https://github.com/leanprover-community/mathlib/commit/013a84eb8d07a2e0813d1b4958e18167a7000f87)
chore(scripts): update nolints.txt ([#7272](https://github.com/leanprover-community/mathlib/pull/#7272))

I am happy to remove some nolints for you!

### [2021-04-20T03:28:20+00:00](https://github.com/leanprover-community/mathlib/commit/8bf9fd58c6b06908b8508fe038c5585087752422)
chore(data/list): drop `list.is_nil` ([#7269](https://github.com/leanprover-community/mathlib/pull/#7269))

We have `list.empty` in Lean core.

### [2021-04-20T00:10:36+00:00](https://github.com/leanprover-community/mathlib/commit/3ad4dabfcf2a88dc77b5c0ce84acc9c81bb6e3bd)
chore(algebra/*): add back nat_algebra_subsingleton and add_comm_monoid.nat_semimodule.subsingleton ([#7263](https://github.com/leanprover-community/mathlib/pull/#7263))

As suggested in https://github.com/leanprover-community/mathlib/pull/7084#discussion_r613195167.

Even if we now have a design solution that makes this unnecessary, it still feels like a result worth stating.

### [2021-04-19T14:03:21+00:00](https://github.com/leanprover-community/mathlib/commit/0dfac6ebc9cbb286afb013ccfd7c7478a11ba1e5)
chore(*): speed up slow proofs ([#7253](https://github.com/leanprover-community/mathlib/pull/#7253))

Proofs that are too slow for the forthcoming `gsmul` refactor. I learnt that `by convert ...` is extremely useful even to close a goal, when elaboration using the expected type is a bad idea.

### [2021-04-19T14:03:20+00:00](https://github.com/leanprover-community/mathlib/commit/829d773300c6b3a6b458d2f5e64f1ba1ae3c697e)
feat(algebra/module/submodule_lattice): add lemmas for nat submodules ([#7221](https://github.com/leanprover-community/mathlib/pull/#7221))

This has been suggested by @eric-wieser (who also wrote everything) in [#7200](https://github.com/leanprover-community/mathlib/pull/#7200).

This also:
* Merges `span_nat_eq_add_group_closure` and `submodule.span_eq_add_submonoid.closure` which are the same statement into `submodule.span_nat_eq_add_submonoid_closure`, which generalizes the former from `semiring` to `add_comm_monoid`.
* Renames `span_int_eq_add_group_closure` to `submodule.span_nat_eq_add_subgroup_closure`, and generalizes it from `ring` to `add_comm_group`.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-04-19T09:07:23+00:00](https://github.com/leanprover-community/mathlib/commit/6f0c4fb3364a69a1a29800c7d92f1901551f37f0)
feat(data/{int, nat}/parity): rename `ne_of_odd_sum` ([#7261](https://github.com/leanprover-community/mathlib/pull/#7261))

`ne_of_odd_sum` becomes `ne_of_odd_add`.

### [2021-04-19T09:07:22+00:00](https://github.com/leanprover-community/mathlib/commit/fc5e8cb01e5feaa0bc9d9531ea5d9798281cfc93)
chore(algebra/group): missed generalizations to mul_one_class ([#7259](https://github.com/leanprover-community/mathlib/pull/#7259))

This adds a missing `ulift` instance, relaxes some lemmas about `semiconj` and `commute` to apply more generally, and broadens the scope of the definitions `monoid_hom.apply` and `ulift.mul_equiv`.

### [2021-04-19T09:07:20+00:00](https://github.com/leanprover-community/mathlib/commit/184e0fe488ef70d6f334259e0ce553f86698a0ec)
fix(equiv/ring): fix bad typeclasses on ring_equiv.trans_apply ([#7258](https://github.com/leanprover-community/mathlib/pull/#7258))

`ring_equiv.trans` had weaker typeclasses than the lemma which unfolds it.

### [2021-04-19T09:07:19+00:00](https://github.com/leanprover-community/mathlib/commit/77f5fb3388a233570db7555c4c3fe9bbda6872f3)
feat(linear_algebra/eigenspace): `mem_maximal_generalized_eigenspace` ([#7162](https://github.com/leanprover-community/mathlib/pull/#7162))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-19T09:07:16+00:00](https://github.com/leanprover-community/mathlib/commit/15a64f5368660023572bf246a52ab5c3588da529)
feat(algebra/module/projective): add projective module ([#6813](https://github.com/leanprover-community/mathlib/pull/#6813))

Definition and universal property of projective modules; free modules are projective. 



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-04-19T09:07:14+00:00](https://github.com/leanprover-community/mathlib/commit/272e2d220eca29af9b44e59572a2b6bd28a3ad67)
feat(data/{int, nat, rat}/cast): extensionality lemmas ([#6788](https://github.com/leanprover-community/mathlib/pull/#6788))

Extensionality lemmas



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: Benjamin Davidson <68528197+benjamindavidson@users.noreply.github.com>

### [2021-04-19T06:54:49+00:00](https://github.com/leanprover-community/mathlib/commit/43f63d99fd861122a2daf5886e8033fe360695da)
feat(topology/algebra/ordered): IVT for the unordered interval ([#7237](https://github.com/leanprover-community/mathlib/pull/#7237))

A version of the Intermediate Value Theorem for `interval`.

Co-authored by @ADedecker

### [2021-04-19T02:29:20+00:00](https://github.com/leanprover-community/mathlib/commit/5993b90e4b3acc615a08f969c670b43275c1f7de)
feat(tactic/simps): use new options in library ([#7095](https://github.com/leanprover-community/mathlib/pull/#7095))




Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-18T22:03:44+00:00](https://github.com/leanprover-community/mathlib/commit/dbc6574cb88592ecd873a86b0fbe66db66a6c3ae)
chore(data/set/basic): add `set.subsingleton.pairwise_on` ([#7257](https://github.com/leanprover-community/mathlib/pull/#7257))

Also add `set.pairwise_on_singleton`.

### [2021-04-18T22:03:43+00:00](https://github.com/leanprover-community/mathlib/commit/f6132e4d9c0f9a6f5151b0c43f87a559a122e60d)
feat(data/nat/parity): update to match int/parity ([#7156](https://github.com/leanprover-community/mathlib/pull/#7156))

A couple of lemmas existed for `int` but not for `nat`, so I add them. I also tidy some lemmas I added in prior PRs and add a file-level docstring.

### [2021-04-18T22:03:41+00:00](https://github.com/leanprover-community/mathlib/commit/969c6a3e17822cbe7b2eca9347f707f0ca71179e)
feat(data/int/parity): update to match nat/parity (where applicable) ([#7155](https://github.com/leanprover-community/mathlib/pull/#7155))

We had a number of lemmas for `nat` but not for `int`, so I add them. I also globalize variables in the file and add a module docstring.

### [2021-04-18T18:41:38+00:00](https://github.com/leanprover-community/mathlib/commit/30ee691e3e222a4f04b73fb8a9db34c9aeee9a97)
feat(group_theory/submonoid/operations): add lemmas ([#7219](https://github.com/leanprover-community/mathlib/pull/#7219))

Some lemmas about the interaction between additive and multiplicative submonoids.

I provided the two version (from additive to multiplicative and the other way), I am not sure if `@[to_additive]` can automatize this.

### [2021-04-18T18:41:37+00:00](https://github.com/leanprover-community/mathlib/commit/d107d825ce2b3de18e014e841a69df16f003a614)
feat(data/complex): numerical bounds on log 2 ([#7146](https://github.com/leanprover-community/mathlib/pull/#7146))

Upper and lower bounds on log 2. Presumably these could be made faster but I don't know the tricks - the proof of `log_two_near_10` (for me) doesn't take longer than `exp_one_near_20` to compile.

I also strengthened the existing bounds slightly.

### [2021-04-18T14:42:50+00:00](https://github.com/leanprover-community/mathlib/commit/7f541b4ecd248202a433b6b240d14ce832865f6d)
feat(topology/continuous_function): on a subsingleton X, there is only one subalgebra R C(X,R) ([#7247](https://github.com/leanprover-community/mathlib/pull/#7247))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-18T14:42:49+00:00](https://github.com/leanprover-community/mathlib/commit/cab0481e9f0cf5a89bfab3d0b0ea46315c658158)
feat(data/finset/lattice): mem_sup, mem_sup' ([#7245](https://github.com/leanprover-community/mathlib/pull/#7245))

Sets with `bot` and closed under `sup` are closed under `finset.sup`, and variations for `inf`, `sup'`, and `inf'`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-18T14:42:48+00:00](https://github.com/leanprover-community/mathlib/commit/3953378b97735788c0df773447b6b8ec85560914)
feat(set_theory/surreal): add add_monoid instance ([#7228](https://github.com/leanprover-community/mathlib/pull/#7228))

This PR is a part of a project for putting ordered abelian group structure on surreal numbers.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal.20numbers/near/234694758)

We construct add_monoid instance for surreal numbers.

The "term_type" proofs suggested on the above Zulip thread are not working nicely as Lean is unable to infer the type of the setoid.

### [2021-04-18T10:59:52+00:00](https://github.com/leanprover-community/mathlib/commit/a6f62a74b1dd69c23041f81df464d807df498ac7)
feat(topology/algebra/mul_action.lean): add smul_const ([#7242](https://github.com/leanprover-community/mathlib/pull/#7242))

add filter.tendsto.smul_const

### [2021-04-18T10:59:52+00:00](https://github.com/leanprover-community/mathlib/commit/4d4b501e161b2bfc86b387300b5906b6d14e0e40)
chore(data/set/finite): rename some lemmas ([#7241](https://github.com/leanprover-community/mathlib/pull/#7241))

### Revert some name changes from [#5813](https://github.com/leanprover-community/mathlib/pull/#5813)

* `set.fintype_set_bUnion` → `set.fintype_bUnion`;
* `set.fintype_set_bUnion'` → `set.fintype_bUnion'`;
* `set.fintype_bUnion` → `set.fintype_bind`;
* `set.fintype_bUnion'` → `set.fintype_bind'`;
* `set.finite_bUnion` → `set.finite.bind`;

### Add a few lemmas
* `set.finite_Union_Prop`;
* add `set.seq` versions of lemmas/defs about `<*>` (they work for `α`, `β` in different universes).

### [2021-04-17T23:26:52+00:00](https://github.com/leanprover-community/mathlib/commit/043d046ac545f01f2afa80e25ffd4d6badfab412)
feat(algebra/lie/basic): define the `module` and `lie_module` structures on morphisms of Lie modules ([#7225](https://github.com/leanprover-community/mathlib/pull/#7225))

Also sundry `simp` lemmas

### [2021-04-17T23:26:51+00:00](https://github.com/leanprover-community/mathlib/commit/aa44de5b0015be4e0e400cfff27c05812b501f9e)
feat(data/real): Inf is nonneg ([#7223](https://github.com/leanprover-community/mathlib/pull/#7223))

### [2021-04-17T23:26:50+00:00](https://github.com/leanprover-community/mathlib/commit/c68e718af61c5fa2aa50a9fcd7ce684d8fda2bff)
feat(linear_algebra): maximal linear independent ([#7160](https://github.com/leanprover-community/mathlib/pull/#7160))

Co-authored by Anne Baanen and Kevin Buzzard



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-04-17T20:12:47+00:00](https://github.com/leanprover-community/mathlib/commit/ce667c41f6e201d153b500907552f789591d9754)
chore(.github/workflows/build.yml): update elan script URL ([#7234](https://github.com/leanprover-community/mathlib/pull/#7234))

`elan` moved to the `leanprover` organization: http://github.com/leanprover/elan

### [2021-04-17T20:12:46+00:00](https://github.com/leanprover-community/mathlib/commit/20db2fb2290b368d4e2287ba401b1ceab97f0b6e)
refactor(topology/algebra/module): `map_smul` argument swap ([#7233](https://github.com/leanprover-community/mathlib/pull/#7233))

swap the arguments of map_smul to make dot notation work

### [2021-04-17T20:12:45+00:00](https://github.com/leanprover-community/mathlib/commit/b2e7f40f63f0222186c5676fd1814c1503dbcf09)
feat(analysis/convex/basic): convex hull and empty set ([#7232](https://github.com/leanprover-community/mathlib/pull/#7232))

added convex_hull_empty



Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2021-04-17T20:12:44+00:00](https://github.com/leanprover-community/mathlib/commit/22924634414eff4076588bd211d26a047d380d74)
doc(group_theory): fix `normalizer` docstring ([#7231](https://github.com/leanprover-community/mathlib/pull/#7231))

The _smallest_ subgroup of `G` inside which `H` is normal is `H` itself.
The _largest_ subgroup of `G` inside which `H` is normal is the normalizer.

Also confirmed by Wikipedia (see the 5th bullet point under "Groups" at [the list of properties of the centralizer and normalizer](https://en.wikipedia.org/wiki/Centralizer_and_normalizer#Properties)), because it's good to have independent confirmation for something so easy to confuse.

### [2021-04-17T14:18:38+00:00](https://github.com/leanprover-community/mathlib/commit/21d74c7a94b4533a93e92ef3f3d4923ef656f497)
feat(data/equiv/mul_add): use `@[simps]` ([#7213](https://github.com/leanprover-community/mathlib/pull/#7213))

Add some `@[simps]` for some algebra maps. This came up in [#6795](https://github.com/leanprover-community/mathlib/pull/#6795).

### [2021-04-17T09:45:21+00:00](https://github.com/leanprover-community/mathlib/commit/9363a649f5dc25e02775d277a13b0c4582a470fc)
feat(data/nat/choose/sum): Add lower bound lemma for central binomial coefficient ([#7214](https://github.com/leanprover-community/mathlib/pull/#7214))

This lemma complements the one above it, and will be useful in proving Bertrand's postulate from the 100 theorems list.

### [2021-04-17T09:45:20+00:00](https://github.com/leanprover-community/mathlib/commit/e9a11f6e2f54c129439ef8492edfeadb68c683da)
feat(analysis/normed_space/operator_norm): generalize to seminormed space ([#7202](https://github.com/leanprover-community/mathlib/pull/#7202))

This PR is part of a series of PRs to have seminormed stuff in mathlib.

We generalize here `operator_norm` to `semi_normed_space`. I didn't do anything complicated, essentially I only generalized what works out of the box, without trying to modify the proofs that don't work.

### [2021-04-17T05:06:55+00:00](https://github.com/leanprover-community/mathlib/commit/206ecce7d6fa3f78756508a6294deda4c375805d)
chore(category_theory/subobject): different proof of le_of_comm ([#7229](https://github.com/leanprover-community/mathlib/pull/#7229))

This is certainly a shorter proof of `le_of_comm`; whether it is "cleaner" like the comment asked for is perhaps a matter of taste.

### [2021-04-17T05:06:54+00:00](https://github.com/leanprover-community/mathlib/commit/0f6c1f193062ed45ed1ceeed6bbff8bc4ece3ef2)
feat(order/conditionally_complete_lattice): conditional Inf of intervals ([#7226](https://github.com/leanprover-community/mathlib/pull/#7226))

Some new simp lemmas for cInf/cSup of intervals. I tried to use the minimal possible assumptions that I could - some lemmas are therefore in the linear order section and others are just for lattices.

### [2021-04-17T05:06:53+00:00](https://github.com/leanprover-community/mathlib/commit/560a0092dbd628a63a66cdf15f79dbc0cafb2724)
feat(category_theory): formally adjoined initial objects are strict ([#7222](https://github.com/leanprover-community/mathlib/pull/#7222))

### [2021-04-17T02:40:11+00:00](https://github.com/leanprover-community/mathlib/commit/89c16a792218b1ad508ec5a343d14b2520384772)
chore(ring_theory/adjoin.basic): use submodule.closure in algebra.adjoin_eq_span ([#7194](https://github.com/leanprover-community/mathlib/pull/#7194))

`algebra.adjoin_eq_span` uses `monoid.closure` that is deprecated. We modify it to use `submonoid.closure`.

### [2021-04-17T02:40:10+00:00](https://github.com/leanprover-community/mathlib/commit/b7a3d4e1c6edd23ae0cd3f7f7e8ce3c0e8157624)
feat(test/integration): improve an example ([#7169](https://github.com/leanprover-community/mathlib/pull/#7169))

With [#7103](https://github.com/leanprover-community/mathlib/pull/#7103), I am able to improve one of my examples.

### [2021-04-16T22:20:07+00:00](https://github.com/leanprover-community/mathlib/commit/6b182fcd8c03d181db02ab137de0d80ef74066f9)
feat(category_theory/triangulated/pretriangulated): add definition of pretriangulated categories and triangulated functors between them  ([#7153](https://github.com/leanprover-community/mathlib/pull/#7153))

Adds a definition of pretriangulated categories and triangulated functors between them.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-16T22:20:06+00:00](https://github.com/leanprover-community/mathlib/commit/110541dd403ceb67978db91d5dccd91ff31b83ff)
feat(data/list/basic): fold[rl] recursion principles ([#7079](https://github.com/leanprover-community/mathlib/pull/#7079))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-04-16T17:35:16+00:00](https://github.com/leanprover-community/mathlib/commit/49040e5093e397ad3205308e4eb0834eb39c4a47)
feat(data/set): sep true/false simp lemmas ([#7215](https://github.com/leanprover-community/mathlib/pull/#7215))

### [2021-04-16T17:35:15+00:00](https://github.com/leanprover-community/mathlib/commit/24013e2bb1bef5ee11a0e7a05bde7c3b9b9583e2)
feat(data/finsupp/basic): add finsupp.single_left_injective and docstrings ([#7207](https://github.com/leanprover-community/mathlib/pull/#7207))

### [2021-04-16T17:35:14+00:00](https://github.com/leanprover-community/mathlib/commit/06886125844c7a3775891afb886308a06b00eedc)
feat(order/rel_iso): constructors for rel embeddings ([#7046](https://github.com/leanprover-community/mathlib/pull/#7046))

Alternate constructors for relation and order embeddings which require slightly less to prove.

### [2021-04-16T17:35:13+00:00](https://github.com/leanprover-community/mathlib/commit/ea4dce03becce9d9bda52b996c12fff704629ee9)
feat(category_theory): the additive envelope, Mat_ C ([#6845](https://github.com/leanprover-community/mathlib/pull/#6845))

# Matrices over a category.

When `C` is a preadditive category, `Mat_ C` is the preadditive categoriy
whose objects are finite tuples of objects in `C`, and
whose morphisms are matrices of morphisms from `C`.

There is a functor `Mat_.embedding : C ⥤ Mat_ C` sending morphisms to one-by-one matrices.

`Mat_ C` has finite biproducts.

## The additive envelope

We show that this construction is the "additive envelope" of `C`,
in the sense that any additive functor `F : C ⥤ D` to a category `D` with biproducts
lifts to a functor `Mat_.lift F : Mat_ C ⥤ D`,
Moreover, this functor is unique (up to natural isomorphisms) amongst functors `L : Mat_ C ⥤ D`
such that `embedding C ⋙ L ≅ F`.
(As we don't have 2-category theory, we can't explicitly state that `Mat_ C` is
the initial object in the 2-category of categories under `C` which have biproducts.)

As a consequence, when `C` already has finite biproducts we have `Mat_ C ≌ C`.




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-16T14:09:23+00:00](https://github.com/leanprover-community/mathlib/commit/108b9235c04304a689b1da8e498f808fcc925478)
chore(algebra): add `sub{_mul_action,module,semiring,ring,field,algebra}.copy` ([#7220](https://github.com/leanprover-community/mathlib/pull/#7220))


We already have this for sub{monoid,group}. With this in place, we can make `coe subalgebra.range` defeq to `set.range` and similar (left for a follow-up).

### [2021-04-16T14:09:22+00:00](https://github.com/leanprover-community/mathlib/commit/e00d688ff2405d84b0c9a0c2444ce5f991c16741)
chore(group_theory/subgroup): rename `monoid_hom.to_range` to `monoid_hom.range_restrict` ([#7218](https://github.com/leanprover-community/mathlib/pull/#7218))

This makes it match:
* `monoid_hom.mrange_restrict`
* `linear_map.range_restrict`
* `ring_hom.range_restrict`
* `ring_hom.srange_restrict`
* `alg_hom.range_restrict`

This also adds a missing simp lemma.

### [2021-04-16T11:48:29+00:00](https://github.com/leanprover-community/mathlib/commit/b1acb58ac96bcdedbf7d12bd49a6d3613fa5b455)
chore(data/mv_polynomial/basic): golf some proofs ([#7209](https://github.com/leanprover-community/mathlib/pull/#7209))

### [2021-04-16T05:10:03+00:00](https://github.com/leanprover-community/mathlib/commit/bb9b850e3228fb986f9a89d9650bf610fa5fb36a)
feat(data/multiset/basic): some multiset lemmas, featuring sum inequalities ([#7090](https://github.com/leanprover-community/mathlib/pull/#7090))

Proves some lemmas about `rel` and about inequalities between sums of multisets.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-04-16T03:40:55+00:00](https://github.com/leanprover-community/mathlib/commit/148760e3fb47cd808b1e7a37db8d923cfc6bf7c3)
feat(category_theory/kernels): missing instances ([#7204](https://github.com/leanprover-community/mathlib/pull/#7204))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-16T03:40:54+00:00](https://github.com/leanprover-community/mathlib/commit/9d1ab69f2ea8ece211ba9af3248459c5206914f8)
refactor(category_theory/images): improvements ([#7198](https://github.com/leanprover-community/mathlib/pull/#7198))

Some improvements to the images API, from `homology2`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-16T01:12:09+00:00](https://github.com/leanprover-community/mathlib/commit/81b8873eb3e55dd3a5b15ae5c1e8f5619f066206)
doc(topology/bases): add module + theorem docstrings ([#7193](https://github.com/leanprover-community/mathlib/pull/#7193))




Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2021-04-15T20:50:28+00:00](https://github.com/leanprover-community/mathlib/commit/8742be7c775081a28b063a20c85c5da4ae57df12)
fix(.github/PULL_REQUEST_TEMPLATE.md): revert gitpod button URL ([#7210](https://github.com/leanprover-community/mathlib/pull/#7210))

Reverts [#7096](https://github.com/leanprover-community/mathlib/pull/#7096) since the URL was changed back.

### [2021-04-15T20:50:27+00:00](https://github.com/leanprover-community/mathlib/commit/37ab34eaf43ef7e9cf1aad2b4addda9f02d603cd)
doc(tactic/congr): example where congr fails, but exact works ([#7208](https://github.com/leanprover-community/mathlib/pull/#7208))

As requested on zulip:
https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.237084/near/234652967

### [2021-04-15T20:50:26+00:00](https://github.com/leanprover-community/mathlib/commit/b4201e7b029765184b41d48512efc1c563a79e7c)
chore(group/ring_hom): fix a nat nsmul diamond ([#7201](https://github.com/leanprover-community/mathlib/pull/#7201))

The space of additive monoid should be given a proper `nat`-action, by the pointwise action, to avoid diamonds.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-04-15T15:46:19+00:00](https://github.com/leanprover-community/mathlib/commit/50a843e07f41b9c784e1dc1ec0e69b9994e4b7f3)
chore(algebra/module/submodule): add missing coe lemmas ([#7205](https://github.com/leanprover-community/mathlib/pull/#7205))

### [2021-04-15T15:46:18+00:00](https://github.com/leanprover-community/mathlib/commit/14c625e110161e442296f5319babc1182253d178)
feat(linear_algebra/basic): add span_eq_add_submonoid.closure ([#7200](https://github.com/leanprover-community/mathlib/pull/#7200))

The `ℕ` span equals `add_submonoid.closure`.

### [2021-04-15T15:46:16+00:00](https://github.com/leanprover-community/mathlib/commit/0f3ca6726f930ab3fb4c4849bdce663f3393d2a6)
feat(number_theory/bernoulli): golf ([#7197](https://github.com/leanprover-community/mathlib/pull/#7197))

I golf the file to improve scannability and stylistic uniformity.

### [2021-04-15T15:46:15+00:00](https://github.com/leanprover-community/mathlib/commit/6a4d298ce1a8b5154287baa34c54219dab74950c)
chore(topology/vector_bundle): generalize to topological semimodules ([#7183](https://github.com/leanprover-community/mathlib/pull/#7183))

### [2021-04-15T15:46:13+00:00](https://github.com/leanprover-community/mathlib/commit/f92dc6c0e4c4335e39ae35ca236e25798239a72a)
feat(algebra/group_with_zero): non-associative monoid_with_zero ([#7176](https://github.com/leanprover-community/mathlib/pull/#7176))

This introduces a new `mul_zero_one_class` which is `monoid_with_zero` without associativity, just as `mul_one_class` is `monoid` without associativity.

This would help expand the scope of [#6786](https://github.com/leanprover-community/mathlib/pull/#6786) to include ring_homs, something that was previously blocked by `monoid_with_zero` and the `non_assoc_semiring` having no common ancestor with `0`, `1`, and `*`.

Using [#6865](https://github.com/leanprover-community/mathlib/pull/#6865) as a template for what to cover, this PR includes;

* Generalizing `monoid_with_zero_hom` to require the weaker `mul_zero_one_class`. This has a slight downside, in that `some_mwzh.to_monoid_hom` now holds as its typeclass argument `mul_zero_one_class.to_mul_one_class` instead of `monoid_with_zero.to_monoid`. This means that lemmas about `monoid_hom`s with associate multiplication no longer always elaborate correctly without type annotations, as the `monoid` instance has to be found by typeclass search instead of unification.
* `function.(in|sur)jective.mul_zero_one_class`
* `equiv.mul_zero_one_class`
* Adding instances for:
  * `prod`
  * `pi`
  * `set_semiring`
  * `with_zero`
  * `locally_constant`
  * `monoid_algebra`
  * `add_monoid_algebra`

### [2021-04-15T15:46:12+00:00](https://github.com/leanprover-community/mathlib/commit/adfeb24966b720cebdd51d61cd339f219fb8e00d)
refactor(algebra/big_operators/order): use `to_additive` ([#7173](https://github.com/leanprover-community/mathlib/pull/#7173))

* Replace many lemmas about `finset.sum` with lemmas about `finset.prod` + `@[to_additive]`;
* Avoid `s \ t` in `finset.sum_lt_sum_of_subset`.
* Use `M`, `N` instead of `α`, `β` for types with algebraic structures.

### [2021-04-15T15:46:11+00:00](https://github.com/leanprover-community/mathlib/commit/5806a9462d1d7a07fa45e85ed24b7e795585a97d)
feat(data/nat/basic, data/nat/prime): add various lemmas ([#7171](https://github.com/leanprover-community/mathlib/pull/#7171))

### [2021-04-15T08:26:50+00:00](https://github.com/leanprover-community/mathlib/commit/4b835cc1bcdee18dc983a9499073b1b7e37410a1)
feat(category_theory/subobject): proof golf and some API ([#7170](https://github.com/leanprover-community/mathlib/pull/#7170))

### [2021-04-15T08:26:48+00:00](https://github.com/leanprover-community/mathlib/commit/dbd468d9a268ec52f1966363c46d8b1213662a22)
feat(analysis/special_functions/trigonometric): periodicity of sine, cosine ([#7107](https://github.com/leanprover-community/mathlib/pull/#7107))

Previously we only had `sin (x + 2 * π) = sin x` and `cos (x + 2 * π) = cos x`. I extend those results to cover shifts by any integer multiple of `2 * π`, not just `2 * π`. I also provide corresponding `sub` lemmas.

### [2021-04-15T04:42:22+00:00](https://github.com/leanprover-community/mathlib/commit/3a64d1169c355547567341deaaba545ec56ca9b3)
chore(scripts): update nolints.txt ([#7195](https://github.com/leanprover-community/mathlib/pull/#7195))

I am happy to remove some nolints for you!

### [2021-04-15T04:42:20+00:00](https://github.com/leanprover-community/mathlib/commit/c73b1653fbe3163b404bfb036fbef5b80f4689cc)
chore(data/fin,data/finset): a few lemmas ([#7168](https://github.com/leanprover-community/mathlib/pull/#7168))

* `fin.heq_fun_iff`: use `Sort*` instead of `Type*`;
* `fin.cast_refl`: take `h : n = n := rfl` as an argument;
* `fin.cast_to_equiv`, `fin.cast_eq_cast`: relate `fin.cast` to `_root_.cast`;
* `finset.map_cast_heq`: new lemma;
* `finset.subset_univ`: add `@[simp]`;
* `card_finset_fin_le`, `fintype.card_finset_len`, `fin.prod_const` : new lemmas;
* `order_iso.refl`: new definition.

### [2021-04-14T23:14:49+00:00](https://github.com/leanprover-community/mathlib/commit/f74213bf9051b7a9328e91501061057107a5bf96)
feat(algebra/ordered_group): proof of le without density ([#7191](https://github.com/leanprover-community/mathlib/pull/#7191))

### [2021-04-14T23:14:48+00:00](https://github.com/leanprover-community/mathlib/commit/60060c3c88f75a197accd58443bf580bc4c1fca0)
feat(field_theory/algebraic_closure): define `is_alg_closed.splits_codomain` ([#7187](https://github.com/leanprover-community/mathlib/pull/#7187))

Let `p : polynomial K` and `k` be an algebraically closed extension of `K`. Showing that `p` splits in `k` used to be a bit awkward because `is_alg_closed.splits` only gives `splits (p.map (f : k →+* K)) id`, which you still have to `simp` to `splits p f`.

This PR defines `is_alg_closed.splits_codomain`, showing `splits p f` directly by doing the `simp`ing for you. It also renames `polynomial.splits'` to `is_alg_closed.splits_domain`, for symmetry.

Zulip discussion starts [here](https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Complex.20numbers.20sums/near/234481576)

### [2021-04-14T23:14:47+00:00](https://github.com/leanprover-community/mathlib/commit/3d67b6967f0492fa03c95f305367e86b69fecc12)
chore(algebra/group_power/basic): `pow_abs` does not need commutativity ([#7178](https://github.com/leanprover-community/mathlib/pull/#7178))

### [2021-04-14T23:14:46+00:00](https://github.com/leanprover-community/mathlib/commit/e4843ea02d5de92e8bb21d8c74146970cc077c8d)
chore(category_theory/subobject): split off specific subobjects ([#7167](https://github.com/leanprover-community/mathlib/pull/#7167))

### [2021-04-14T23:14:44+00:00](https://github.com/leanprover-community/mathlib/commit/74e1e83e8af292b53ee605624c01cd62477226e4)
feat(topological/homeomorph): the image of a set ([#7147](https://github.com/leanprover-community/mathlib/pull/#7147))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-04-14T23:14:43+00:00](https://github.com/leanprover-community/mathlib/commit/5052ad9566a3530a8774ecb9884bf301250bf11d)
feat(data/nat/basic): (∀ a : ℕ, m ∣ a ↔ n ∣ a) ↔ m = n ([#7132](https://github.com/leanprover-community/mathlib/pull/#7132))

... and the dual statement
`(∀ a : ℕ, a ∣ m ↔ a ∣ n) ↔ m = n`

Zulip discussion:
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/semilattice.2C.20dvd.2C.20associated

Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-04-14T23:14:42+00:00](https://github.com/leanprover-community/mathlib/commit/4605b55d25bcc5735e622eca54b2ce1c40dc7b68)
feat(algebra/big_operators/finprod): add a few lemmas ([#7130](https://github.com/leanprover-community/mathlib/pull/#7130))

* add `finprod_nonneg`, `finprod_cond_nonneg`, and `finprod_eq_zero`;
* use `α → Prop` instead of `set α` in
`finprod_mem_eq_prod_of_mem_iff`, rename to `finprod_cond_eq_prod_of_cond_iff`.

### [2021-04-14T23:14:41+00:00](https://github.com/leanprover-community/mathlib/commit/49fd7195995685628425b888647c4ba3c82bd3b9)
feat(topology/algebra,geometry/manifold): continuity and smoothness of locally finite products of functions ([#7128](https://github.com/leanprover-community/mathlib/pull/#7128))

### [2021-04-14T23:14:40+00:00](https://github.com/leanprover-community/mathlib/commit/d820a9d7d3b66f990943ee9fb3f587027f928f30)
feat(algebra/big_operators): some lemmas on big operators and `fin` ([#7119](https://github.com/leanprover-community/mathlib/pull/#7119))

A couple of lemmas that I needed for `det_vandermonde` ([#7116](https://github.com/leanprover-community/mathlib/pull/#7116)).

I put them in a new file because I didn't see any obvious point that they fit in the import hierarchy. `big_operators/basic.lean` would be the alternative, but that file is big enough as it is.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-04-14T23:14:39+00:00](https://github.com/leanprover-community/mathlib/commit/8d3e8b5b2635fc20a27922893cdf852bd0bd5706)
feat(archive/imo): IMO 1977 Q6 ([#7097](https://github.com/leanprover-community/mathlib/pull/#7097))

Formalization of IMO 1977/6

### [2021-04-14T23:14:38+00:00](https://github.com/leanprover-community/mathlib/commit/456e5af87562fa95090593d0ede623234f0e9c4a)
feat(order/filter/*, topology/subset_properties): Filter Coprod ([#7073](https://github.com/leanprover-community/mathlib/pull/#7073))

Define the "coproduct" of many filters (not just two) as

`protected def Coprod (f : Π d, filter (κ d)) : filter (Π d, κ d) :=
⨆ d : δ, (f d).comap (λ k, k d)`

and prove the three lemmas which motivated this construction: (finite!) coproduct of cofinite filters is the cofinite filter, coproduct of cocompact filters is the cocompact filter, and monotonicity; see also [#6372](https://github.com/leanprover-community/mathlib/pull/#6372)

Co-authored by: Heather Macbeth @hrmacbeth 




Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2021-04-14T23:14:37+00:00](https://github.com/leanprover-community/mathlib/commit/89196b20aa4ca6304af6464cd31ade2aaef90d61)
feat(group_theory/perm/cycle_type): Cycle type of a permutation ([#6999](https://github.com/leanprover-community/mathlib/pull/#6999))

This PR defines the cycle type of a permutation.

At some point we should prove the bijection between partitions and conjugacy classes.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>
Co-authored-by: Thomas Browning <tb65536@uw.edu>

### [2021-04-14T23:14:36+00:00](https://github.com/leanprover-community/mathlib/commit/5775ef757218259a9c3e83d0ae0e2c6c704eea7f)
feat(order/ideal, order/pfilter, order/prime_ideal): added `ideal_inter_nonempty`, proved that a maximal ideal is prime ([#6924](https://github.com/leanprover-community/mathlib/pull/#6924))

- `ideal_inter_nonempty`: the intersection of any two ideals is nonempty. A preorder with joins and this property satisfies that its ideal poset is a lattice.
- An ideal is prime iff `x \inf y \in I` implies `x \in I` or `y \in I`.
- A maximal ideal in a distributive lattice is prime.

### [2021-04-14T18:40:20+00:00](https://github.com/leanprover-community/mathlib/commit/3df0f773fac3e5c9fbe418eee9f2b4adaa9497b6)
feat(topology/sheaves): Induced map on stalks ([#7092](https://github.com/leanprover-community/mathlib/pull/#7092))

This PR defines stalk maps for morphisms of presheaves. We prove that a morphism of type-valued sheaves is an isomorphism if and only if all the stalk maps are isomorphisms.

A few more lemmas about unique gluing are also added, as well as docstrings.

### [2021-04-14T18:40:15+00:00](https://github.com/leanprover-community/mathlib/commit/98c483b9969c0e665951e3f0d65a8ffe072518f1)
feat(ring_theory/hahn_series): a `finsupp` of Hahn series is a `summable_family` ([#7091](https://github.com/leanprover-community/mathlib/pull/#7091))

Defines `summable_family.of_finsupp`

### [2021-04-14T18:40:13+00:00](https://github.com/leanprover-community/mathlib/commit/f444128f1227aaccbb90d92712e7f01efcaefeed)
chore(algebra/direct_sum_graded): golf proofs ([#7029](https://github.com/leanprover-community/mathlib/pull/#7029))

Simplify the proofs of mul_assoc and mul_comm, and speed up all the
proofs that were slow.

Total elaboration time for this file is reduced from 12.9s to 1.7s
(on my machine), and total CPU time is reduced from 19.8s to 6.8s.
All the remaining elaboration times are under 200ms.

The main idea is to explicitly construct bundled homomorphisms
corresponding to `λ a b c, a * b * c` and `λ a b c, a * (b * c)`
respectively.  Then in proving the equality between those, we can
unpack all the arguments immediately, and the remaining rewrites
needed become simpler.





Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-04-14T18:40:11+00:00](https://github.com/leanprover-community/mathlib/commit/3379f3ed992a6bce819a030178082efb6f6a92b4)
feat(archive/100-theorems-list): add proof of Heron's formula ([#6989](https://github.com/leanprover-community/mathlib/pull/#6989))

This proves Heron's Formula for triangles, which happens to be Theorem 57 on Freek's 100 Theorems.

### [2021-04-14T18:40:10+00:00](https://github.com/leanprover-community/mathlib/commit/271576992d1c25a47a2fdb87d333a6cac0549911)
feat(geometry/manifold/instances/units_of_normed_algebra): the units of a normed algebra are a topological group and a smooth manifold ([#6981](https://github.com/leanprover-community/mathlib/pull/#6981))

I decided to make a small PR now with only a partial result because Heather suggested proving GL^n is a Lie group on Zulip, and I wanted to share the work I did so that whoever wants to take over the task does not have to start from scratch.

Most of the ideas in this PR are by @hrmacbeth, as I was planning on doing a different proof, but I agreed Heather's one was better.

What remains to do in a future PR to prove GLn is a Lie group is to add and prove the following instance to the file `geometry/manifold/instances/units_of_normed_algebra.lean`:

```
instance units_of_normed_algebra.lie_group
  {𝕜 : Type*} [nondiscrete_normed_field 𝕜]
  {R : Type*} [normed_ring R] [normed_algebra 𝕜 R] [complete_space R] :
  lie_group (model_with_corners_self 𝕜 R) (units R) :=
{
  smooth_mul := begin
    sorry,
  end,
  smooth_inv := begin
    sorry,
  end,
  ..units_of_normed_algebra.smooth_manifold_with_corners, /- Why does it not find the instance alone? -/
}
```


Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored-by: hrmacbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2021-04-14T18:40:08+00:00](https://github.com/leanprover-community/mathlib/commit/e4edf46d39d489a46880f195821d77ed70a7ca86)
feat(algebra/direct_sum_graded): `A 0` is a ring, `A i` is an `A 0`-module, and `direct_sum.of A 0` is a ring_hom ([#6851](https://github.com/leanprover-community/mathlib/pull/#6851))

In a graded ring, grade 0 is itself a ring, and grade `i` (and therefore, the overall direct_sum) is a module over elements of grade 0.
This stops just short of the structure necessary to make a graded ring a graded algebra over elements of grade 0; this requires some extra assumptions and probably a new typeclass, so is best left to its own PR.

The main results here are `direct_sum.grade_zero.comm_ring`, `direct_sum.grade_zero.semimodule`, and `direct_sum.of_zero_ring_hom`.

Note that we have no way to let the user provide their own ring structure on `A 0`, as `[Π i, add_comm_monoid (A i)] [semiring (A 0)]` provides `add_comm_monoid (A 0)` twice.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-04-14T18:40:07+00:00](https://github.com/leanprover-community/mathlib/commit/24dc4100b3efd02ae7ae42e94e4c4a6e50ac447d)
feat(field_theory/separable_degree): introduce the separable degree ([#6743](https://github.com/leanprover-community/mathlib/pull/#6743))

We introduce the definition of the separable degree of a polynomial. We prove that every irreducible polynomial can be contracted to a separable polynomial. We show that the separable degree divides the degree of the polynomial.
This formalizes a lemma in the Stacks Project, cf. https://stacks.math.columbia.edu/tag/09H0 
We also show that the separable degree is unique.

### [2021-04-14T18:40:05+00:00](https://github.com/leanprover-community/mathlib/commit/f12575e8be50a4b12535a2661ae1821945382fbc)
feat(topology/topological_fiber_bundle): topological fiber bundle over `[a, b]` is trivial ([#6555](https://github.com/leanprover-community/mathlib/pull/#6555))

### [2021-04-14T16:58:05+00:00](https://github.com/leanprover-community/mathlib/commit/b3eabc160055681c22f9f7427b713d6aabd5d149)
hack(ci): run lean make twice ([#7192](https://github.com/leanprover-community/mathlib/pull/#7192))

At the moment running `lean --make src` after `leanproject up` will recompile some files.  Merging this PR should have the effect of uploading these newly compiled olean files.

This also makes github actions call `lean --make src` twice to prevent this problem from happening in the first place.

### [2021-04-14T08:29:46+00:00](https://github.com/leanprover-community/mathlib/commit/63801552184f2a519c95a45561300547837915cc)
refactor(*): kill nat multiplication diamonds ([#7084](https://github.com/leanprover-community/mathlib/pull/#7084))

An `add_monoid` has a natural `ℕ`-action, defined by `n • a = a + ... + a`, that we want to declare
as an instance as it makes it possible to use the language of linear algebra. However, there are
often other natural `ℕ`-actions. For instance, for any semiring `R`, the space of polynomials
`polynomial R` has a natural `R`-action defined by multiplication on the coefficients. This means
that `polynomial ℕ` has two natural `ℕ`-actions, which are equal but not defeq. The same
goes for linear maps, tensor products, and so on (and even for `ℕ` itself). This is the case on current
mathlib, with such non-defeq diamonds all over the place.

To solve this issue, we embed an `ℕ`-action in the definition of an `add_monoid` (which is by
default the naive action `a + ... + a`, but can be adjusted when needed -- it should always be equal 
to this one, but not necessarily definitionally), and declare
a `has_scalar ℕ α` instance using this action. This is yet another example of the forgetful inheritance
pattern that we use in metric spaces, embedding a topology and a uniform structure in it (except that
here the functor from additive monoids to nat-modules is faithful instead of forgetful, but it doesn't 
make a difference).

More precisely, we define
```lean
def nsmul_rec [has_add M] [has_zero M] : ℕ → M → M
| 0     a := 0
| (n+1) a := nsmul_rec n a + a

class add_monoid (M : Type u) extends add_semigroup M, add_zero_class M :=
(nsmul : ℕ → M → M := nsmul_rec)
(nsmul_zero' : ∀ x, nsmul 0 x = 0 . try_refl_tac)
(nsmul_succ' : ∀ (n : ℕ) x, nsmul n.succ x = nsmul n x + x . try_refl_tac)
```

For example, when we define `polynomial R`, then we declare the `ℕ`-action to be by multiplication
on each coefficient (using the `ℕ`-action on `R` that comes from the fact that `R` is
an `add_monoid`). In this way, the two natural `has_scalar ℕ (polynomial ℕ)` instances are defeq.

The tactic `to_additive` transfers definitions and results from multiplicative monoids to additive
monoids. To work, it has to map fields to fields. This means that we should also add corresponding
fields to the multiplicative structure `monoid`, which could solve defeq problems for powers if
needed. These problems do not come up in practice, so most of the time we will not need to adjust
the `npow` field when defining multiplicative objects.

With this refactor, all the diamonds are gone. Or rather, all the diamonds I noticed are gone, but if
there are still some diamonds then they can be fixed, contrary to before.

Also, the notation `•ℕ` is gone, just use `•`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-14T03:47:14+00:00](https://github.com/leanprover-community/mathlib/commit/3ec54df501359e925d42f84aaf703e853fe6ba1c)
feat(data/finset/lattice): le_sup_iff and lt_sup_iff ([#7182](https://github.com/leanprover-community/mathlib/pull/#7182))

A few changes and additions to finset/lattice in response to this Zulip thread https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/finset.2Esup'

### [2021-04-14T03:47:13+00:00](https://github.com/leanprover-community/mathlib/commit/500301e72ea99b5405184b6b29eaad803a78bf2c)
feat(algebra/group/hom): `monoid_with_zero_hom.to_monoid_hom_injective` and co. ([#7174](https://github.com/leanprover-community/mathlib/pull/#7174))

This came up in [#6788](https://github.com/leanprover-community/mathlib/pull/#6788).

### [2021-04-14T03:47:12+00:00](https://github.com/leanprover-community/mathlib/commit/4d19f5fab7799ab7b0a5ee97d9907dcc1be23382)
feat(algebraic_geometry): Basic opens form basis of zariski topology ([#7152](https://github.com/leanprover-community/mathlib/pull/#7152))

Fills in a few lemmas in `prime_spectrum.lean`, in particular that basic opens form a basis

### [2021-04-13T23:14:15+00:00](https://github.com/leanprover-community/mathlib/commit/724f804b51b8adee61497dee458a73ac0ca33ba2)
refactor(src/analysis/normed_space/linear_isometry): generalize to semi_normed_group ([#7122](https://github.com/leanprover-community/mathlib/pull/#7122))

This is part of a series of PR to include the theory of seminormed things in mathlib.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-04-13T19:58:08+00:00](https://github.com/leanprover-community/mathlib/commit/06f7d3f0961d89a638002f51ef1c41bdf8903bed)
feat(src/set_theory/surreal): add numeric_add and numeric_omega lemmas ([#7179](https://github.com/leanprover-community/mathlib/pull/#7179))

Adds a couple of lemmas about surreal numbers: proving that natural numbers and omega are numeric.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal.20numbers/near/234243582)

### [2021-04-12T23:25:53+00:00](https://github.com/leanprover-community/mathlib/commit/46302c7055a8bde73cb104f92027b66f3372705f)
refactor(algebra/group/defs): remove left-right_cancel_comm_monoids ([#7134](https://github.com/leanprover-community/mathlib/pull/#7134))

There were 6 distinct classes
* `(add_)left_cancel_comm_monoid`,
* `(add_)right_cancel_comm_monoid`,
* `(add_)cancel_comm_monoid`.

I removed them all, except for the last 2:
* `(add_)cancel_comm_monoid`.

The new typeclass `cancel_comm_monoid` requires only `a * b = a * c → b = c`, and deduces the other version from commutativity.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-04-12T19:13:54+00:00](https://github.com/leanprover-community/mathlib/commit/92d5cab0f4fb2a5189cf676bafb3bb2a8c54fa08)
feat(logic/function/iterate): `f^[n]^[m] = f^[m]^[n]` ([#7121](https://github.com/leanprover-community/mathlib/pull/#7121))

Prove `f^[n]^[m]=f^[m]^[n]` and improve some docs.

Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>
Co-authored-by: Yury Kudryashov <urkud@urkud.name>



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-04-12T15:23:30+00:00](https://github.com/leanprover-community/mathlib/commit/2af01474e4b46fb62bcefa0701b1fb96a4c57841)
chore(data/equiv/basic): add simps attribute to some defs ([#7137](https://github.com/leanprover-community/mathlib/pull/#7137))

### [2021-04-12T12:44:29+00:00](https://github.com/leanprover-community/mathlib/commit/a1c2bb7de65cfebf28976afe58d4101bcb32840f)
feat(data/zsqrtd/basic): add coe_int_dvd_iff lemma ([#7161](https://github.com/leanprover-community/mathlib/pull/#7161))

### [2021-04-12T12:44:28+00:00](https://github.com/leanprover-community/mathlib/commit/16e2c6cafd2c0069cbc558c12a7abbbb16f74de2)
chore(data/matrix/basic): lemmas for `minor` about `diagonal`, `one`, and `mul` ([#7133](https://github.com/leanprover-community/mathlib/pull/#7133))

The `minor_mul` lemma here has weaker hypotheses than the previous `reindex_mul`, as it only requires one mapping to be bijective.

### [2021-04-12T08:44:54+00:00](https://github.com/leanprover-community/mathlib/commit/f9c787da6272df78cc901f40cdd2f8ae7f265d51)
refactor(algebra/big_operators, *): specialize `finset.prod_bij` to `fintype.prod_equiv` ([#7109](https://github.com/leanprover-community/mathlib/pull/#7109))

Often we want to apply `finset.prod_bij` to the case where the product is taken over `finset.univ` and the bijection is already a bundled `equiv`. This PR adds `fintype.prod_equiv` as a specialization for exactly these cases, filling in most of the arguments already.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-04-12T08:44:53+00:00](https://github.com/leanprover-community/mathlib/commit/001628b8adf91b23281104759a7f1407ddded67a)
feat(category_theory/subobject/factor_thru): lemmas in a preadditive category ([#7104](https://github.com/leanprover-community/mathlib/pull/#7104))

More side effects of recent reworking of homology.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-12T08:44:51+00:00](https://github.com/leanprover-community/mathlib/commit/68e894dca00096915b710a34037903ffc44161ae)
feat(finset/lattice): sup' is to sup as max' is to max ([#7087](https://github.com/leanprover-community/mathlib/pull/#7087))

Introducing `finset.sup'`, modelled on `finset.max'` but having no need for a `linear_order`. I wanted this for functions so also provide `sup_apply` and `sup'_apply`. By using `cons` instead of `insert` the axiom of choice is avoided throughout and I have replaced the proofs of three existing lemmas (`sup_lt_iff`, `comp_sup_eq_sup_comp`, `sup_closed_of_sup_closed`) that didn't need it. I have removed `sup_subset` entirely as it was surely introduced in ignorance of `sup_mono`.

### [2021-04-12T05:36:40+00:00](https://github.com/leanprover-community/mathlib/commit/193dd5bb8161ff66e4a954e74b066904fe356ccd)
feat(algebra/{algebra, module}/basic): make 3 smultiplication by 1 `simp` lemmas ([#7166](https://github.com/leanprover-community/mathlib/pull/#7166))

The three lemmas in the merged PR [#7094](https://github.com/leanprover-community/mathlib/pull/#7094) could be simp lemmas.  This PR makes this suggestion.

While I was at it,
* I moved one of the lemmas outside of the `alg_hom` namespace,
* I fixed a typo in a doc string of a tutorial.

Zulip:
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/trying.20out.20a.20.60simp.60.20lemma

### [2021-04-11T12:32:54+00:00](https://github.com/leanprover-community/mathlib/commit/5694309ff4314b2fb8962920e6c34bc50ba426a5)
feat(algebra/algebra/basic algebra/module/basic): add 3 lemmas m • (1 : R) = ↑m ([#7094](https://github.com/leanprover-community/mathlib/pull/#7094))

Three lemmas asserting `m • (1 : R) = ↑m`, where `m` is a natural number, an integer or a rational number.

Zulip:
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/.60smul_one_eq_coe.60

  Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-04-11T11:08:53+00:00](https://github.com/leanprover-community/mathlib/commit/fbf621998b47b5c5dbfd18a7713b024e577d63bd)
feat(analysis/special_functions/exp_log): add `continuity` attribute to `continuous_exp` ([#7157](https://github.com/leanprover-community/mathlib/pull/#7157))

### [2021-04-11T10:03:43+00:00](https://github.com/leanprover-community/mathlib/commit/1442f70a4b51f1fc9949251592f79010b861658c)
feat(measure_theory/interval_integral): variants of integral_comp lemmas ([#7103](https://github.com/leanprover-community/mathlib/pull/#7103))

Alternate versions of some of our `integral_comp` lemmas which work even when `c = 0`.

### [2021-04-11T05:39:27+00:00](https://github.com/leanprover-community/mathlib/commit/fc8e18c1f8f38f039647c153c22d11195d124892)
feat(topology/continuous_function): comp_right_* ([#7145](https://github.com/leanprover-community/mathlib/pull/#7145))

We setup variations on `comp_right_* f`, where `f : C(X, Y)`
(that is, precomposition by a continuous map),
as a morphism `C(Y, T) → C(X, T)`, respecting various types of structure.

In particular:
* `comp_right_continuous_map`, the bundled continuous map (for this we need `X Y` compact).
* `comp_right_homeomorph`, when we precompose by a homeomorphism.
* `comp_right_alg_hom`, when `T = R` is a topological ring.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-11T04:38:14+00:00](https://github.com/leanprover-community/mathlib/commit/383f591e0f0761f69a41615bf7bc025fbd6aa531)
chore(scripts): update nolints.txt ([#7154](https://github.com/leanprover-community/mathlib/pull/#7154))

I am happy to remove some nolints for you!

### [2021-04-11T01:51:24+00:00](https://github.com/leanprover-community/mathlib/commit/c6e62cfed3fbac221befbd6e788de7be4c398ecc)
feat(analysis/normed_space/finite_dimension): set of `f : E →L[𝕜] F` of rank `≥n` is open ([#7022](https://github.com/leanprover-community/mathlib/pull/#7022))

### [2021-04-10T14:43:35+00:00](https://github.com/leanprover-community/mathlib/commit/a83230e04a22899a814632d34ccbc6ffe11705e6)
feat(linear_algebra/eigenspace): define the maximal generalized eigenspace ([#7125](https://github.com/leanprover-community/mathlib/pull/#7125))

And prove that it is of the form kernel of `(f - μ • id) ^ k` for some finite `k` for endomorphisms of Noetherian modules.

### [2021-04-10T14:43:34+00:00](https://github.com/leanprover-community/mathlib/commit/026150f337b4c35f30669e1bf242fff3df2ba583)
feat(geometry/manifold): a manifold with σ-countable topology has second countable topology ([#6948](https://github.com/leanprover-community/mathlib/pull/#6948))

### [2021-04-10T12:50:55+00:00](https://github.com/leanprover-community/mathlib/commit/6b3803d6bb640c4a820b8ffce48fcecc719c9ad0)
chore(analysis/normed_space/inner_product): simplify two proofs ([#7149](https://github.com/leanprover-community/mathlib/pull/#7149))




Co-authored-by: Ben Toner <bqp@bentoner.com>

### [2021-04-10T12:50:54+00:00](https://github.com/leanprover-community/mathlib/commit/363a286be6a1263274d64e05de1cbf462a2246c4)
chore(*): speedup slow proofs ([#7148](https://github.com/leanprover-community/mathlib/pull/#7148))

Some proofs using heavy `rfl` or heavy `obviously` can be sped up considerably. Done in this PR for some outstanding examples.

### [2021-04-10T08:01:57+00:00](https://github.com/leanprover-community/mathlib/commit/7e93367838226aa447aabd4941c6dcf30bbaf963)
feat(analysis/normed_space/banach): a range with closed complement is itself closed ([#6972](https://github.com/leanprover-community/mathlib/pull/#6972))

If the range of a continuous linear map has a closed complement, then it is itself closed. For instance, the range can not be a dense hyperplane. We prove it when, additionally, the map has trivial kernel. The general case will follow from this particular case once we have quotients of normed spaces, which are currently only in Lean Liquid.

Along the way, we fill several small gaps in the API of continuous linear maps.

### [2021-04-10T06:53:21+00:00](https://github.com/leanprover-community/mathlib/commit/d39c3a265b1bbb501b360e294c1c502ad8e7c4f0)
feat(data/zsqrtd/basic): add some lemmas about norm ([#7114](https://github.com/leanprover-community/mathlib/pull/#7114))

### [2021-04-10T06:53:20+00:00](https://github.com/leanprover-community/mathlib/commit/7ae2af6348f859f2f57740b6819850dbe24581c5)
feat(group_theory/is_free_group): promote `is_free_group.lift'` to an equiv ([#7110](https://github.com/leanprover-community/mathlib/pull/#7110))

While non-computable, this makes the API of `is_free_group` align more closely with `free_group`.

Based on discussion in the original PR, this doesn't go as far as changing the definition of `is_free_group` to take the equiv directly.

This additionally:
* adds the definition `lift`, a universe polymorphic version of `lift'`
* adds the lemmas:
  * `lift'_eq_free_group_lift`
  * `lift_eq_free_group_lift`
  * `of_eq_free_group_of`
  * `ext_hom'`
  * `ext_hom`
* renames `is_free_group.iso_free_group_of_is_free_group` to the shorter `is_free_group.to_free_group`
* removes lemmas absent from the `free_group` API that are no longer needed for the proofs here:
  * `end_is_id`
  * `eq_lift`

### [2021-04-10T03:46:26+00:00](https://github.com/leanprover-community/mathlib/commit/575b791ee521c552751ee2d2d8f52c2dfe0b6c25)
chore(scripts): update nolints.txt ([#7144](https://github.com/leanprover-community/mathlib/pull/#7144))

I am happy to remove some nolints for you!

### [2021-04-10T03:46:25+00:00](https://github.com/leanprover-community/mathlib/commit/7138d35411bac10fdd236bba8a2189989353ce45)
feat(category_theory/action): currying ([#7085](https://github.com/leanprover-community/mathlib/pull/#7085))

A functor from an action category can be 'curried' to an ordinary group homomorphism. Also defines transitive group actions.

### [2021-04-10T00:01:44+00:00](https://github.com/leanprover-community/mathlib/commit/e269dbc17a978dfabe57975b84d0b0250b78a2db)
feat(tactic/itauto): Complete intuitionistic prover ([#7057](https://github.com/leanprover-community/mathlib/pull/#7057))

[As requested on Zulip.](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tauto.20is.20a.20decision.20procedure.3F/near/233222469)

### [2021-04-10T00:01:43+00:00](https://github.com/leanprover-community/mathlib/commit/8efb93b149b80cba8b66649757adb161bc58246c)
feat(combinatorics/simple_graph/strongly_regular): add definition of strongly regular graph and proof that complete graph is SRG ([#7044](https://github.com/leanprover-community/mathlib/pull/#7044))

Add definition of strongly regular graph and proof that complete graphs are strongly regular. Part of [#5698](https://github.com/leanprover-community/mathlib/pull/#5698) to prove facts about strongly regular graphs.



Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>

### [2021-04-09T22:57:37+00:00](https://github.com/leanprover-community/mathlib/commit/309e3b0887a40ae73b66ada7083aacdb408f90cc)
feat(category_theory/subobjects): improvements to API ([#6932](https://github.com/leanprover-community/mathlib/pull/#6932))

These additions have been useful while setting up homology.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Markus Himmel <markus@himmel-villmar.de>

### [2021-04-09T18:56:37+00:00](https://github.com/leanprover-community/mathlib/commit/763c5c3a2c3400e2356bdffd7d3eb989a7b51a2f)
chore(data/list/basic): avoid the axiom of choice ([#7135](https://github.com/leanprover-community/mathlib/pull/#7135))

### [2021-04-09T12:24:51+00:00](https://github.com/leanprover-community/mathlib/commit/fe5d66049dbed73e414e4c66f1dcbefb9af2f77c)
feat(algebra/category/Module): arbitrary colimits ([#7099](https://github.com/leanprover-community/mathlib/pull/#7099))

This is just the "semi-automated" construction of arbitrary colimits in the category or `R`-modules, following the same model as for `Mon`, `AddCommGroup`, etc.

We already have finite colimits from the `abelian` instance. One could also give definitionally nicer colimits as quotients of finitely supported functions. But this is better than nothing!



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-09T12:24:50+00:00](https://github.com/leanprover-community/mathlib/commit/0ec9cd8d684c55e8c582dec87b8b51e1c0283f43)
chore(data/fin): add simp lemmas about 1 and cast_{pred, succ} ([#7067](https://github.com/leanprover-community/mathlib/pull/#7067))

### [2021-04-09T12:24:49+00:00](https://github.com/leanprover-community/mathlib/commit/dd2466ce39269ecd9ea74f4039bd6837bda83354)
chore(data/set_like): Add coe_strict_mono and coe_mono ([#7004](https://github.com/leanprover-community/mathlib/pull/#7004))

This adds the following monotonicity lemmas:
* `set_like.coe_mono`, `set_like.coe_strict_mono`
* `submodule.to_add_submonoid_mono`, `submodule.to_add_submonoid_strict_mono`
* `submodule.to_add_subgroup_mono`, `submodule.to_add_subgroup_strict_mono`
* `subsemiring.to_submonoid_mono`, `submodule.to_submonoid_strict_mono`
* `subsemiring.to_add_submonoid_mono`, `submodule.to_add_submonoid_strict_mono`
* `subring.to_subsemiring_mono`, `subring.to_subsemiring_strict_mono`
* `subring.to_add_subgroup_mono`, `subring.to_add_subgroup_strict_mono`
* `subring.to_submonoid_mono`, `subring.to_submonoid_strict_mono`

This also makes `tactic.monotonicity.basic` a lighter-weight import, so that the `@[mono]` attribute is accessible in more places.

### [2021-04-09T12:24:48+00:00](https://github.com/leanprover-community/mathlib/commit/362844dc010d1de5fc90b4609122cebd1f7766bc)
feat(category_theory/preadditive): a category induced from a preadditive category is preadditive ([#6883](https://github.com/leanprover-community/mathlib/pull/#6883))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-09T08:28:56+00:00](https://github.com/leanprover-community/mathlib/commit/aa1fa0b2ba0739deaec3fe65f42640998120bc80)
feat(data/option/basic): option valued choice operator ([#7101](https://github.com/leanprover-community/mathlib/pull/#7101))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-09T04:34:52+00:00](https://github.com/leanprover-community/mathlib/commit/6610e8f5383a617fd74d176d9b2194e6f3ee46a9)
feat(data/fintype): golf, move and dualise proof ([#7126](https://github.com/leanprover-community/mathlib/pull/#7126))

This PR moves `fintype.exists_max` higher up in the import tree, and golfs it, and adds the dual version, `fintype.exists_min`. The name and statement are unchanged.

### [2021-04-09T04:34:51+00:00](https://github.com/leanprover-community/mathlib/commit/991dc2602032f2a2d2830cb2a93b117ad8bf0bcb)
chore(linear_algebra/multilinear): relax requirements on `multilinear_map.pi_ring_equiv` ([#7117](https://github.com/leanprover-community/mathlib/pull/#7117))

### [2021-04-09T04:34:50+00:00](https://github.com/leanprover-community/mathlib/commit/0b52522e65c3cdec52017a80f2fbd060a0b03d15)
feat(test/integration): update with new examples ([#7105](https://github.com/leanprover-community/mathlib/pull/#7105))

Add examples made possible by [#6787](https://github.com/leanprover-community/mathlib/pull/#6787), [#6795](https://github.com/leanprover-community/mathlib/pull/#6795), [#7010](https://github.com/leanprover-community/mathlib/pull/#7010).

### [2021-04-09T04:34:49+00:00](https://github.com/leanprover-community/mathlib/commit/6dd9a54c99ca07eaeb5a152fa677906addd44176)
feat(tactic/simps): allow composite projections  ([#7074](https://github.com/leanprover-community/mathlib/pull/#7074))

* Allows custom simps-projections that are compositions of multiple projections. This is useful when extending structures without the `old_structure_cmd`.
* Coercions that are compositions of multiple projections are *not* automatically recognized, and should be declared manually (coercions that are definitionally equal to a single projection are still automatically recognized).
* Custom simps projections should now be declared using the name used by `simps`. E.g. `equiv.simps.symm_apply` instead of `equiv.simps.inv_fun`.
* You can disable a projection `proj` being generated by default by `simps` using `initialize_simps_projections (-proj)`

### [2021-04-09T03:28:24+00:00](https://github.com/leanprover-community/mathlib/commit/29b834dfbba4ed1b7950628bbf5e69ab98c15b4c)
feat(category_theory, algebra/category): AddCommGroup is well-powered ([#7006](https://github.com/leanprover-community/mathlib/pull/#7006))

### [2021-04-09T02:29:48+00:00](https://github.com/leanprover-community/mathlib/commit/4e607eb0f6679ea9bf3c2de25a91aac022c38f9d)
chore(scripts): update nolints.txt ([#7129](https://github.com/leanprover-community/mathlib/pull/#7129))

I am happy to remove some nolints for you!

### [2021-04-09T02:29:47+00:00](https://github.com/leanprover-community/mathlib/commit/505ffa9c00ac61544ddb110b9f57ad01834f088b)
feat(analysis/special_functions/integrals): integral of `cos x ^ 2 - sin x ^ 2` ([#7012](https://github.com/leanprover-community/mathlib/pull/#7012))

An example of a direct application of integration by parts.

### [2021-04-08T22:31:17+00:00](https://github.com/leanprover-community/mathlib/commit/92ec949315f2459ec03d11a775027dcff3f2e3ab)
feat(data/equiv/basic): swap_apply_eq_iff ([#7102](https://github.com/leanprover-community/mathlib/pull/#7102))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-04-08T15:56:48+00:00](https://github.com/leanprover-community/mathlib/commit/379dd7d51e54dca544804d7f4532a5fb50f28810)
chore(algebra/ring_quot): Provide `sub` explicitly to `ring_quot` ([#7112](https://github.com/leanprover-community/mathlib/pull/#7112))

This means that using `ring_quot.mk (A - B) = ring_quot.mk A - ring_quot.mk B` is true by definition, even if `A - B = A + -B` is not true by definition.

### [2021-04-08T15:56:47+00:00](https://github.com/leanprover-community/mathlib/commit/54ac48add1be089edaf5c9806873420db8fb610c)
chore(data/matrix/basic): add simp lemmas about `minor`, move `reindex` to `matrix.basic` since it knows nothing about linear algebra ([#7083](https://github.com/leanprover-community/mathlib/pull/#7083))

### [2021-04-08T15:56:46+00:00](https://github.com/leanprover-community/mathlib/commit/fb74f98431bdc50818c66fe2d773ca34312969d4)
chore(data/set/finite): set.finite.sup ([#7080](https://github.com/leanprover-community/mathlib/pull/#7080))

### [2021-04-08T15:56:45+00:00](https://github.com/leanprover-community/mathlib/commit/bcf5b1a6d513333b42c6c5ee94edece0afe96923)
feat(data/fintype/basic): to_finset lattice lemmas ([#7077](https://github.com/leanprover-community/mathlib/pull/#7077))

While we do not have lattice homomorphisms, we can still provide some similar API.





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-04-08T15:56:44+00:00](https://github.com/leanprover-community/mathlib/commit/56e52487382d9652359fed189f8344a252e58a08)
feat(order/order_iso_nat): add another flavour of well-foundedness for partial orders ([#5434](https://github.com/leanprover-community/mathlib/pull/#5434))

### [2021-04-08T14:49:49+00:00](https://github.com/leanprover-community/mathlib/commit/f474756ba146143a81b10b6280ac44b7cff8c887)
chore(category_theory/abelian): enable instances ([#7106](https://github.com/leanprover-community/mathlib/pull/#7106))

This PR is extracted from Markus' `projective` branch. It just turns on, as global instances, various instances provided by an `abelian` category. In the past these weren't instances, because `has_limit` carried data which could conflict.

Co-authored-by: Markus Himmel <markus@himmel-villmar.de>



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-08T06:49:07+00:00](https://github.com/leanprover-community/mathlib/commit/8e7028cdc174d5e8083368b86e688bdabbdf3fef)
feat(topology/unit_interval): abstract out material about [0,1] ([#7056](https://github.com/leanprover-community/mathlib/pull/#7056))

Separates out some material about `[0,1]` from `topology/path_connected.lean`, and adds a very simple tactic.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-08T06:49:06+00:00](https://github.com/leanprover-community/mathlib/commit/c6b06369392473fe9ebc480fbcfed1695db3e554)
feat(archive/imo): formalize IMO 2008 Q3 ([#7025](https://github.com/leanprover-community/mathlib/pull/#7025))

### [2021-04-08T06:49:05+00:00](https://github.com/leanprover-community/mathlib/commit/9c2a3e7e05b6e836393eb29a747efb91316085c3)
refactor(analysis/normed_space/add_torsor): generalize to semi_normed_space ([#7016](https://github.com/leanprover-community/mathlib/pull/#7016))

This part of a series of PR to include the theory of `semi_normed_space` in mathlib.

### [2021-04-08T06:49:04+00:00](https://github.com/leanprover-community/mathlib/commit/c5ea4cdd708075d3638466332f2d0924befaf5e8)
feat(group_theory/perm): define the permutation `(0 1 ... (i : fin n))` ([#6815](https://github.com/leanprover-community/mathlib/pull/#6815))

I tried a number of definitions and it looks like this is the least awkward one to prove with. In any case, using the API should allow you to avoid unfolding the definition.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>
Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>

### [2021-04-08T05:45:01+00:00](https://github.com/leanprover-community/mathlib/commit/def9671135090a63b320c5a87f20331d657f9650)
feat(group_theory/is_free_group): the property of being a free group ([#7086](https://github.com/leanprover-community/mathlib/pull/#7086))

### [2021-04-08T03:58:52+00:00](https://github.com/leanprover-community/mathlib/commit/e8b217bfae1a4510df2c8d3eb560b23b8958ee9f)
chore(scripts): update nolints.txt ([#7098](https://github.com/leanprover-community/mathlib/pull/#7098))

I am happy to remove some nolints for you!

### [2021-04-08T03:58:51+00:00](https://github.com/leanprover-community/mathlib/commit/b9d9bf0e82facdce465afca65e3955eb788835a3)
fix(.github/PULL_REQUEST_TEMPLATE.md): Fix the gitpod button link, looks like it moved with an update ([#7096](https://github.com/leanprover-community/mathlib/pull/#7096))

I'll hold off for a couple of days on this as I'm not sure if the breakage was intentional or temporary on the gitpod side.

### [2021-04-08T00:15:24+00:00](https://github.com/leanprover-community/mathlib/commit/99c7d22e355580d74f2cb36bb1295fd3a5a108cf)
chore(*): fixup docs that don't parse/cause linting errors ([#7088](https://github.com/leanprover-community/mathlib/pull/#7088))

A couple docs had errors in the way that they were written, leading to them not displaying properly, or causing linting errors. This aims to make the [style_exceptions.txt](https://github.com/leanprover-community/mathlib/blob/master/scripts/style-exceptions.txt) file smaller, and also make the webdocs display them properly, c.f. [here](https://leanprover-community.github.io/mathlib_docs/topology/metric_space/basic.html).

### [2021-04-07T22:32:23+00:00](https://github.com/leanprover-community/mathlib/commit/c356c1f20686e1ef0b8a411a94e2a9d79e0046a0)
chore(ring_theory/tensor_product): golf proofs ([#7089](https://github.com/leanprover-community/mathlib/pull/#7089))

Cherry-picked from [#4773](https://github.com/leanprover-community/mathlib/pull/#4773), entirely written by @jcommelin

### [2021-04-07T22:32:22+00:00](https://github.com/leanprover-community/mathlib/commit/f4214def6c7b48536bd23efccc82ac46b7f2b066)
feat(measure_theory/group, measure_theory/bochner_integration): left translate of an integral ([#6936](https://github.com/leanprover-community/mathlib/pull/#6936))

Translating a function on a topological group by left- (right-) multiplication by a constant does not change its integral with respect to a left- (right-) invariant measure.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2021-04-07T19:05:13+00:00](https://github.com/leanprover-community/mathlib/commit/68bd32535ae83e20b0398560abb8c8d1dd551c20)
feat(topology/category/Profinite): Profinite_to_Top creates limits. ([#7070](https://github.com/leanprover-community/mathlib/pull/#7070))

This PR adds a proof that `Profinite` has limits by showing that the forgetful functor to `Top` creates limits.

### [2021-04-07T19:05:12+00:00](https://github.com/leanprover-community/mathlib/commit/08aff2ca8e2be5fa8c9fce339cfb6f08a891a22a)
feat(algebra/big_operators/basic): edit `finset.sum/prod_range_succ` ([#6676](https://github.com/leanprover-community/mathlib/pull/#6676))

- Change the RHS of the statement of `sum_range_succ` from `f n + ∑ x in range n, f x` to `∑ x in range n, f x + f n`
-  Change the RHS of the statement of `prod_range_succ` from `f n * ∑ x in range n, f x` to `∑ x in range n, f x * f n`

The old versions of those lemmas are now called `sum_range_succ_comm` and `prod_range_succ_comm`, respectively.


See [this conversation](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/break.20off.20last.20term.20of.20summation/near/229634503) on Zulip.


Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-04-07T15:23:49+00:00](https://github.com/leanprover-community/mathlib/commit/d76b6493176ef79c616d8ee8d4e08b4941c52c43)
feat(dynamics/fixed_points/basic): fixed_points_id simp lemma ([#7078](https://github.com/leanprover-community/mathlib/pull/#7078))

### [2021-04-07T15:23:48+00:00](https://github.com/leanprover-community/mathlib/commit/4a37c284a01b04e21ef4a888e714e9f55472084f)
feat(data/fintype/basic): set.to_finset_eq_empty_iff ([#7075](https://github.com/leanprover-community/mathlib/pull/#7075))

### [2021-04-07T15:23:46+00:00](https://github.com/leanprover-community/mathlib/commit/c3c7c3495ce4fc62748d860cc7619c3cac38822b)
feat(data/matrix/basic): dependently-typed block diagonal ([#7068](https://github.com/leanprover-community/mathlib/pull/#7068))

This allows constructing block diagonal matrices whose blocks are different sizes. A notable example of such a matrix is the one from the Jordan Normal Form.

This duplicates all of the API for `block_diagonal` from this file. Most of the proofs copy across cleanly, but the proof for `block_diagonal_mul'` required lots of hand-holding that `simp` could solve by itself for the non-dependent case.

### [2021-04-07T15:23:45+00:00](https://github.com/leanprover-community/mathlib/commit/8459d0a6f9c10386fcc9e940e1cb55ac010a188e)
feat(continuous_function/compact): lemmas characterising norm and dist ([#7054](https://github.com/leanprover-community/mathlib/pull/#7054))

Transport lemmas charactering the norm and distance on bounded continuous functions, to continuous maps with compact domain.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-07T15:23:44+00:00](https://github.com/leanprover-community/mathlib/commit/919b4e388ed0f33c8771b2c607760c7e31de276d)
feat(algebra/category/Module): free module functor is lax monoidal ([#6906](https://github.com/leanprover-community/mathlib/pull/#6906))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-07T15:23:43+00:00](https://github.com/leanprover-community/mathlib/commit/893173d6da25632611eaa82fb438b7c281a846a7)
feat(category/subobject): complete_lattice instance ([#6809](https://github.com/leanprover-community/mathlib/pull/#6809))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-07T10:30:59+00:00](https://github.com/leanprover-community/mathlib/commit/9157b5771144e0f3a190c19fb2fee58fdd8ed1c0)
refactor(topology/algebra/normed_group): generalize to semi_normed_group ([#7066](https://github.com/leanprover-community/mathlib/pull/#7066))

The completion of a `semi_normed_group` is a `normed_group` (and similarly for `pseudo_metric_space`).

### [2021-04-07T10:30:58+00:00](https://github.com/leanprover-community/mathlib/commit/d89bfc41b917753850b37fce4265742b4de771a4)
feat(field_theory/minpoly): remove `is_integral` requirement from `unique'` ([#7064](https://github.com/leanprover-community/mathlib/pull/#7064))

`unique'` had an extraneous requirement on `is_integral`, which could be inferred from the other arguments.

This is a small step towards [#5258](https://github.com/leanprover-community/mathlib/pull/#5258), but is a breaking change; `unique'` now needs one less argument, which will break all current code using `unique'`.

### [2021-04-07T10:30:56+00:00](https://github.com/leanprover-community/mathlib/commit/36649f8b75dbcad1992546ddbce41987aacfdc1a)
chore(linear_algebra/basic): add linear_map.one_eq_id ([#7063](https://github.com/leanprover-community/mathlib/pull/#7063))

Cherry-picked from [#4773](https://github.com/leanprover-community/mathlib/pull/#4773)

### [2021-04-07T10:30:55+00:00](https://github.com/leanprover-community/mathlib/commit/104fb22cabedf78259963dce59517811150f12be)
chore(logic/basic): generalize eq_iff_true_of_subsingleton to Sort ([#7061](https://github.com/leanprover-community/mathlib/pull/#7061))

### [2021-04-07T10:30:54+00:00](https://github.com/leanprover-community/mathlib/commit/b8414e78c2426be0e2ba191cd3dca42d89ed48c1)
feat(logic/function/basic): add injectivity/surjectivity of functions from/to subsingletons ([#7060](https://github.com/leanprover-community/mathlib/pull/#7060))

In the surjective lemma (`function.surjective.to_subsingleton`), ~~I had to assume `Type*`, instead of `Sort*`, since I was not able to make the proof work in the more general case.~~ [Edit: Eric fixed the proof so that now they work in full generality.] 🎉

Zulip:
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/lemmas.20on.20int.20and.20subsingleton

### [2021-04-07T10:30:53+00:00](https://github.com/leanprover-community/mathlib/commit/df8ef379287ccee2db971900334e7e14559e84f0)
feat(data/int/basic algebra/associated): is_unit (a : ℤ) iff a = ±1 ([#7058](https://github.com/leanprover-community/mathlib/pull/#7058))

Besides the title lemma, this PR also moves lemma `is_unit_int` from `algebra/associated` to `data/int/basic`.

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: Ruben Van de Velde <65514131+Ruben-VandeVelde@users.noreply.github.com>



Co-authored-by: Ruben-VandeVelde <65514131+Ruben-VandeVelde@users.noreply.github.com>

### [2021-04-07T10:30:52+00:00](https://github.com/leanprover-community/mathlib/commit/a6024f10dde5322da06d1158221e1827d3ba4cfe)
feat(archive/imo): formalize IMO 2008 Q4 ([#7039](https://github.com/leanprover-community/mathlib/pull/#7039))

feat(archive/imo): formalize IMO 2008 Q4

### [2021-04-07T10:30:50+00:00](https://github.com/leanprover-community/mathlib/commit/7e71849cd67dc1022e9160e93b94af969be8e031)
feat(to_additive): copy _refl_lemma attribute ([#7011](https://github.com/leanprover-community/mathlib/pull/#7011))

also warn user if if `simps` and `to_additive` are provided out of order.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-04-07T10:30:49+00:00](https://github.com/leanprover-community/mathlib/commit/c488997d5897db8629fff56b01e9a748359ca3e7)
feat(analysis/special_functions/polynomial): polynomials are big O of polynomials of higher degree ([#6714](https://github.com/leanprover-community/mathlib/pull/#6714))

### [2021-04-07T06:34:06+00:00](https://github.com/leanprover-community/mathlib/commit/05c491cdf4c3a5dda884130d05ef199823f81903)
feat(big_operators): single out one term from prod ([#7040](https://github.com/leanprover-community/mathlib/pull/#7040))

### [2021-04-07T06:34:05+00:00](https://github.com/leanprover-community/mathlib/commit/ec6f5d16027ab65fadca245b9ff8157de5852579)
feat(data/*set): some finite sets lemmas ([#7037](https://github.com/leanprover-community/mathlib/pull/#7037))

Co-authored-by: Bhavik Mehta, Kevin Buzzard, Anne Baanen, Eric Rodriguez

### [2021-04-07T06:34:04+00:00](https://github.com/leanprover-community/mathlib/commit/6048b6f3448ccf8341350b4f6c6f7a974410e9b8)
feat(tactic/monotonicity): Allow `@[mono]` on `strict_mono` lemmas ([#7017](https://github.com/leanprover-community/mathlib/pull/#7017))

A follow-up to [#3310](https://github.com/leanprover-community/mathlib/pull/#3310)

### [2021-04-07T06:34:02+00:00](https://github.com/leanprover-community/mathlib/commit/21a96ef03de3a35ccf183b178baaa17ec444c6d7)
feat(ring_theory/hahn_series): summable families of Hahn series ([#6997](https://github.com/leanprover-community/mathlib/pull/#6997))

Defines `hahn_series.summable_family`
Defines the formal sum `hahn_series.summable_family.hsum` and its linear map version, `hahn_series.summable_family.lsum`




Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-04-07T06:34:01+00:00](https://github.com/leanprover-community/mathlib/commit/6161a1fbd726827c3a5afc66afec9a2669260efd)
feat(category_theory/types): add explicit pullbacks in `Type u` ([#6973](https://github.com/leanprover-community/mathlib/pull/#6973))

Add an explicit construction of binary pullbacks in the
category of types.

Zulip discussion:
https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/pullbacks.20in.20Type.20u

### [2021-04-07T02:18:23+00:00](https://github.com/leanprover-community/mathlib/commit/77e90da3142dee1142fe570c10c7e11819ef8372)
chore(scripts): update nolints.txt ([#7072](https://github.com/leanprover-community/mathlib/pull/#7072))

I am happy to remove some nolints for you!

### [2021-04-07T02:18:22+00:00](https://github.com/leanprover-community/mathlib/commit/d904c8d2f3d18a439dd112c5a5f3d99fe086c33f)
chore(algebra/ring/prod): add missing `prod.distrib` instance ([#7069](https://github.com/leanprover-community/mathlib/pull/#7069))

### [2021-04-07T02:18:21+00:00](https://github.com/leanprover-community/mathlib/commit/8b33d740cf06c2b68900e8adff5aa56189dea710)
chore(group_theory/specific_groups/*): new folder specific_groups ([#7018](https://github.com/leanprover-community/mathlib/pull/#7018))

This creates a new folder `specific_groups` analogous to `analysis.special_functions`. So far, I have put `cyclic` (split from `order_of_element`), `dihedral`, and `quaternion` there.

Related Zulip discussion: 
https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group_theory.2Especific_groups

### [2021-04-07T02:18:20+00:00](https://github.com/leanprover-community/mathlib/commit/758d322870f6b78d0ed7d4a7c1074b626dcf3832)
feat(measure_theory/interval_integral): make integral_comp lemmas computable by simp ([#7010](https://github.com/leanprover-community/mathlib/pull/#7010))

A follow-up to [#6795](https://github.com/leanprover-community/mathlib/pull/#6795),  enabling the computation of integrals of the form `∫ x in a..b, f (c * x + d)` by `simp`, where `f` is a function whose integral is already in mathlib and `c` and `d` are any real constants such that `c ≠ 0`.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-04-07T02:18:19+00:00](https://github.com/leanprover-community/mathlib/commit/97832daf014111640d128bcbe1bb22854a4ce141)
chore(logic/function/basic): remove classical decidable instance from a lemma statement ([#6488](https://github.com/leanprover-community/mathlib/pull/#6488))

Found using [#6485](https://github.com/leanprover-community/mathlib/pull/#6485)

This means that this lemma can be use in reverse against any `ite`, not just one that uses `classical.decidable`.

### [2021-04-07T02:18:17+00:00](https://github.com/leanprover-community/mathlib/commit/a1057a3ba975dc54d005afa28489626e466790e0)
feat(data/finsum): sums over sets and types with no finiteness hypotheses ([#6355](https://github.com/leanprover-community/mathlib/pull/#6355))

This rather large PR is mostly work of Jason KY. It is all an API for `finsum` and `finsum_in`, sums over sets with no finiteness assumption, and which return zero if the sum is infinite.



Co-authored-by: Kexing <kexing.ying19@imperial.ac.uk>

### [2021-04-06T18:32:51+00:00](https://github.com/leanprover-community/mathlib/commit/6ea4e9b1edfac1c67204341d11cdea87bba6b5ce)
feat(linear_algebra/eigenspace): generalized eigenvalues are just eigenvalues ([#7059](https://github.com/leanprover-community/mathlib/pull/#7059))

### [2021-04-06T18:32:50+00:00](https://github.com/leanprover-community/mathlib/commit/9b4f0cf8a5e2bd3403e9c46e17056b83a3559335)
feat(data/basic/lean): add lemmas finset.subset_iff_inter_eq_{left, right} ([#7053](https://github.com/leanprover-community/mathlib/pull/#7053))

These lemmas are the analogues of `set.subset_iff_inter_eq_{left, right}`, except stated for `finset`s.

Zulip:
https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/finset.2Esubset_iff_inter_eq_left.20.2F.20right





Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-04-06T18:32:49+00:00](https://github.com/leanprover-community/mathlib/commit/6a9bf98ba9907d45e1973350bc2cee6a33bccc71)
doc(undergrad.yaml): add equiv.perm.trunc_swap_factors ([#7021](https://github.com/leanprover-community/mathlib/pull/#7021))

This looks to me like the definition being asked for
```lean
def equiv.perm.trunc_swap_factors {α : Type u} [decidable_eq α] [fintype α] (f : equiv.perm α) :
trunc {l // l.prod = f ∧ ∀ (g : equiv.perm α), g ∈ l → g.is_swap}
```
I suppose the trunc could be considered a problem, but sorting the list is an easy way out, as is `trunc.out` for undergrads who don't care about computability.




Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-04-06T18:32:48+00:00](https://github.com/leanprover-community/mathlib/commit/aa5ec52842f9e54dac9f6c1c39f7b66a028624d7)
feat(group_theory/perm/cycles): Applying cycle_of to an is_cycle ([#7000](https://github.com/leanprover-community/mathlib/pull/#7000))

Applying cycle_of to an is_cycle gives you either the original cycle or 1.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-04-06T18:32:47+00:00](https://github.com/leanprover-community/mathlib/commit/ae6d77ba95f0e086989d1ad2e07467a52327c3e1)
feat(linear_algebra/free_module): a set of linearly independent vectors over a ring S is also linearly independent over a subring R of S ([#6993](https://github.com/leanprover-community/mathlib/pull/#6993))



Zulip:
https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/.60algebra_map.2Einjective.2Elinear_independent.60

### [2021-04-06T18:32:46+00:00](https://github.com/leanprover-community/mathlib/commit/5f0dbf65221bed346b8e51aeaef8ae809fcb8fa8)
feat(algebra/group/conj): `is_conj` for `monoid`s, `is_conj.setoid`, and `conj_classes` ([#6896](https://github.com/leanprover-community/mathlib/pull/#6896))

Refactors `is_conj` to work in a `monoid`
Defines `is_conj.setoid` and its quotient type, `conj_classes`



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-04-06T18:32:45+00:00](https://github.com/leanprover-community/mathlib/commit/41137fe0a4c19fab35b6c8e81d7344dd968e2013)
feat(algebra/add_submonoid_closure): the additive closure of a multiplicative submonoid is a subsemiring ([#6860](https://github.com/leanprover-community/mathlib/pull/#6860))

This file is extracted from PR [#6705](https://github.com/leanprover-community/mathlib/pull/#6705)

### [2021-04-06T13:27:27+00:00](https://github.com/leanprover-community/mathlib/commit/5254ef14e3465f6504306132fe3ba9cec9ffff16)
feat(topology/continuous_function): lemmas about coe ([#7055](https://github.com/leanprover-community/mathlib/pull/#7055))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-06T13:27:25+00:00](https://github.com/leanprover-community/mathlib/commit/43aee0917d17e8129a5533fbf4c2861121f25208)
feat(algebra/pointwise): improve instances on `set_semiring` ([#7050](https://github.com/leanprover-community/mathlib/pull/#7050))

If `α` is weaker than a semiring, then `set_semiring α` inherits an appropriate weaker typeclass.

Co-authored-by: Oliver Nash <github@olivernash.org>

### [2021-04-06T13:27:23+00:00](https://github.com/leanprover-community/mathlib/commit/7928ca0736015e5e8b6fc24b5028423f2d1b4391)
feat(algebra/lie/subalgebra): define the restriction of a Lie module to a Lie subalgebra ([#7036](https://github.com/leanprover-community/mathlib/pull/#7036))

### [2021-04-06T13:27:20+00:00](https://github.com/leanprover-community/mathlib/commit/2b7b1e721576f7b47aacd4af3c714da4aa8e2933)
refactor(algebra/group/inj_surj): eliminate the versions of the definitions without `has_div` / `has_sub`. ([#7035](https://github.com/leanprover-community/mathlib/pull/#7035))

The variables without the `_sub` / `_div` suffix were vestigial definitions that existed in order to prevent the already-large `div_inv_monoid` refactor becoming larger. This change removes all their remaining usages, allowing the `_sub` / `_div` versions to lose their suffix.

This changes the division operation on `α →ₘ[μ] γ` and the subtraction operator on `truncated_witt_vector p n R` to definitionally match the division operation on their components. In practice, this just shuffles some uses of `sub_eq_add_neg` around.

### [2021-04-06T13:27:19+00:00](https://github.com/leanprover-community/mathlib/commit/0007c4a2bda10b55522810c33168c84a43f1998d)
feat(topology/constructions): `function.update` is continuous in both arguments ([#7023](https://github.com/leanprover-community/mathlib/pull/#7023))

### [2021-04-06T09:41:40+00:00](https://github.com/leanprover-community/mathlib/commit/d7f6bd6188fc10f085bbcfcf513942467a071dc3)
feat(data/finsupp,linear_algebra/finsupp): `finsupp`s and sum types ([#6992](https://github.com/leanprover-community/mathlib/pull/#6992))

This PR contains a few definitions relating sum types and `finsupp`. The main result is `finsupp.sum_arrow_equiv_prod_arrow`, a `finsupp` version of `equiv.sum_arrow_equiv_prod_arrow`. This is turned into a `linear_equiv` by `finsupp.sum_arrow_lequiv_prod_arrow`.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-04-06T09:41:39+00:00](https://github.com/leanprover-community/mathlib/commit/82b0b30eacc5f1cc8bfb9e10467ecafb256459ea)
refactor(analysis/normed_space/normed_group_hom): generalize to semi_normed_group ([#6977](https://github.com/leanprover-community/mathlib/pull/#6977))

This is part of a series of PR to have the theory of `semi_normed_group` (and related concepts) in mathlib.

We generalize here `normed_group_hom` to `semi_normed_group` (keeping the old name to avoid too long names).

- [x] depends on: [#6910](https://github.com/leanprover-community/mathlib/pull/#6910)

### [2021-04-06T09:41:37+00:00](https://github.com/leanprover-community/mathlib/commit/02058ed7e7328620f35ce249715fe28b7f3b3d8d)
feat(group_theory/perm/*): facts about the cardinality of the support of a permutation ([#6951](https://github.com/leanprover-community/mathlib/pull/#6951))

Proves lemmas about the cardinality of the support of a permutation



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-04-06T09:41:36+00:00](https://github.com/leanprover-community/mathlib/commit/07aa34e7af02e879d038e4da56a1c70514daf739)
feat(algebra/category/Module): compare concrete and abstract kernels ([#6938](https://github.com/leanprover-community/mathlib/pull/#6938))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-06T09:41:35+00:00](https://github.com/leanprover-community/mathlib/commit/3a99001a6169bf75918b068d143b09e4362997cd)
feat(category_theory): Type u is well-powered ([#6812](https://github.com/leanprover-community/mathlib/pull/#6812))

A minor test of the `well_powered` API: we can verify that `Type u` is well-powered, and show `subobject α ≃o set α`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-06T05:50:28+00:00](https://github.com/leanprover-community/mathlib/commit/2daf2ff5550d6a26bb264104eb57d9130be52d21)
chore(scripts): update nolints.txt ([#7052](https://github.com/leanprover-community/mathlib/pull/#7052))

I am happy to remove some nolints for you!

### [2021-04-06T05:50:27+00:00](https://github.com/leanprover-community/mathlib/commit/6f38c145024e7c64a3d5b469881ea4a0f900b81c)
chore(data/finsupp/pointwise): add missing `finsupp.mul_zero_class` ([#7049](https://github.com/leanprover-community/mathlib/pull/#7049))

### [2021-04-06T05:50:26+00:00](https://github.com/leanprover-community/mathlib/commit/aa665b128caf695c779822b0f195144334c09d71)
feat(linear_algebra/finsupp): add refl/trans/symm lemmas for dom_lcongr ([#7048](https://github.com/leanprover-community/mathlib/pull/#7048))

These are just copies of the lemmas for `dom_congr`

### [2021-04-06T05:50:24+00:00](https://github.com/leanprover-community/mathlib/commit/8b34e00dec4945f05cfc3272acecea762f6f3157)
feat(order/complete_lattice): le_Sup and Inf_le iff lemmas ([#7047](https://github.com/leanprover-community/mathlib/pull/#7047))

### [2021-04-06T05:50:21+00:00](https://github.com/leanprover-community/mathlib/commit/ba264c4f2268f276ac457ab2c47c0853ec904808)
chore(group_theory/group_action):  cleanup ([#7045](https://github.com/leanprover-community/mathlib/pull/#7045))

Clean up stabilizers and add a missing simp lemma.

### [2021-04-06T05:50:21+00:00](https://github.com/leanprover-community/mathlib/commit/53128954592b6b42ae60103d379b8b57b86cee69)
chore(group_theory/order_of_element): move some lemmas ([#7031](https://github.com/leanprover-community/mathlib/pull/#7031))

I moved a few lemmas to `group_theory.subgroup` and to `group_theory.coset` and to `data.finset.basic`. Feel free to suggest different locations if they don't quite fit. This resolves [#1563](https://github.com/leanprover-community/mathlib/pull/#1563).

Renamed `card_trivial` to `subgroup.card_bot`



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-04-06T05:50:20+00:00](https://github.com/leanprover-community/mathlib/commit/dbb2b558df99b7deb4cdce634ea0e0634a6a6b74)
feat(measure_theory/interval_integral): more on integral_comp ([#7030](https://github.com/leanprover-community/mathlib/pull/#7030))

I replace `integral_comp_mul_right_of_pos`, `integral_comp_mul_right_of_neg`, and `integral_comp_mul_right` with a single lemma.

### [2021-04-06T05:50:19+00:00](https://github.com/leanprover-community/mathlib/commit/82fd6e1e1b9b35249e25d1e19af1df0eb7cf2a15)
feat(logic/girard): Girard's paradox  ([#7026](https://github.com/leanprover-community/mathlib/pull/#7026))

A proof of Girard's paradox in lean, based on the LF proof: http://www.cs.cmu.edu/~kw/research/hurkens95tlca.elf 

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-06T05:50:18+00:00](https://github.com/leanprover-community/mathlib/commit/415b369ddba9d5b0412678f4db521186c102e517)
feat(linear_algebra): `c ≤ dim K E` iff there exists a linear independent `s : set E`, `card s = c` ([#7014](https://github.com/leanprover-community/mathlib/pull/#7014))

### [2021-04-06T05:50:17+00:00](https://github.com/leanprover-community/mathlib/commit/4192612bc13010bc1f9e8e9153108b980186eff0)
chore(data/fintype/basic): add `card_unique` and a warning note to `card_of_subsingleton` ([#7008](https://github.com/leanprover-community/mathlib/pull/#7008))

### [2021-04-06T05:50:16+00:00](https://github.com/leanprover-community/mathlib/commit/975f53339a6a0cda638bc9b5142f8c2232cc4060)
chore(topology/continuous_function/algebra): add simp lemmas for smul coercion, move names out of global namespace ([#7007](https://github.com/leanprover-community/mathlib/pull/#7007))

The two new lemmas proposed are:

- `continuous_map.smul_coe`
- `continuous_functions.smul_coe`

### [2021-04-06T05:50:15+00:00](https://github.com/leanprover-community/mathlib/commit/90e265ea82d275416a8a8803c3660d9f3d703f16)
feat(algebra/category): the category of R-modules is well-powered ([#7002](https://github.com/leanprover-community/mathlib/pull/#7002))

### [2021-04-06T05:50:13+00:00](https://github.com/leanprover-community/mathlib/commit/030a70472b88e47218ba7cd39370b33a6b87f3ad)
feat(group_theory/perm/sign): Order of product of disjoint permutations ([#6998](https://github.com/leanprover-community/mathlib/pull/#6998))

The order of the product of disjoint permutations is the lcm of the orders.

### [2021-04-06T05:50:12+00:00](https://github.com/leanprover-community/mathlib/commit/fe16235fe87d04d9d2f5e5d8cd388abdd56bb174)
feat(category_theory): equivalences preserve epis and monos ([#6994](https://github.com/leanprover-community/mathlib/pull/#6994))

Note that these don't follow from the results in `limits/constructions/epi_mono.lean`, since the results in that file are less universe polymorphic.

### [2021-04-06T05:50:11+00:00](https://github.com/leanprover-community/mathlib/commit/89ea423d261b46c4e90e49362a6471a5ceb1d6d5)
feat(archive/imo): formalize IMO 2005 Q3 ([#6984](https://github.com/leanprover-community/mathlib/pull/#6984))

feat(archive/imo): formalize IMO 2005 Q3


Co-authored-by: Manuel Candales <manuelcandales@gmail.com>

### [2021-04-06T05:50:10+00:00](https://github.com/leanprover-community/mathlib/commit/b05affbdd49f16b887e18d8116875f0e3ee061b5)
chore(group_theory/subgroup): translate map comap lemmas from linear_map ([#6979](https://github.com/leanprover-community/mathlib/pull/#6979))

Introduce the analogues of `linear_map.map_comap_eq` and `linear_map.comap_map_eq` to subgroups.
Also add `subgroup.map_eq_comap_of_inverse` which is a translation of `set.image_eq_preimage_of_inverse`.



Co-authored-by: Adrián Doña Mateo <43966663+AdrianDoM@users.noreply.github.com>

### [2021-04-06T05:50:09+00:00](https://github.com/leanprover-community/mathlib/commit/6aa0e30e2ccf12497c989e1a1be1b6c93034ff8d)
feat(category_theory/preadditive): additive functors preserve biproducts ([#6882](https://github.com/leanprover-community/mathlib/pull/#6882))

An additive functor between preadditive categories creates and preserves biproducts.

Also, renames `src/category_theory/abelian/additive_functor.lean` to `src/category_theory/preadditive/additive_functor.lean` as it so far doesn't actually rely on anything being abelian. 

Also, moves the `.map_X` lemmas about additive functors into the `functor` namespace, so we can use dot notation `F.map_add` etc, when `[functor.additive F]` is available.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-06T01:49:51+00:00](https://github.com/leanprover-community/mathlib/commit/4ddbdc1b476032fb56a9b8ccc4a55c81f6523ec8)
refactor(topology/sheaves): Refactor sheaf condition proofs ([#6962](https://github.com/leanprover-community/mathlib/pull/#6962))

This PR adds two convenience Lemmas for working with the sheaf condition in terms of unique gluing and then uses them to greatly simplify the proofs of the sheaf condition for sheaves of functions (with and without a local predicate). Basically, all the categorical jargon gets outsourced and the actual proofs of the sheaf condition can now work in a very concrete setting. This drastically reduced the size of the proofs and eliminated any uses of `simp`.

Note that I'm effectively translating the sheaf condition from `Type` into a `Prop`, i.e. using `∃!` instead of using an instance of `unique`. I guess this diverts slightly from the original design in which the sheaf condition was always a `Type`. I found this to work quite well but maybe there is a way to phrase it differently.

### [2021-04-06T01:49:50+00:00](https://github.com/leanprover-community/mathlib/commit/1e1eaae6ad91319c1f3cc2f414a0f763b8f15641)
feat(archive/imo): formalize IMO 2008 Q2 ([#6958](https://github.com/leanprover-community/mathlib/pull/#6958))




Co-authored-by: Manuel Candales <manuelcandales@gmail.com>

### [2021-04-06T01:49:48+00:00](https://github.com/leanprover-community/mathlib/commit/0cc1fee5a7bd564f0b29b5001d9563635e8e5646)
feat(linear_algebra/finsupp): lemmas for finsupp_tensor_finsupp ([#6905](https://github.com/leanprover-community/mathlib/pull/#6905))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-04-06T01:49:47+00:00](https://github.com/leanprover-community/mathlib/commit/108fa6f305a5280f1ea67012a4c4094759c9b587)
feat(order/bounded_lattice): min/max commute with coe ([#6900](https://github.com/leanprover-community/mathlib/pull/#6900))

to with_bot and with_top





Co-authored-by: Floris van Doorn <fpv@andrew.cmu.edu>

### [2021-04-06T01:49:46+00:00](https://github.com/leanprover-community/mathlib/commit/13f7910b4a7d27e0b30763ae38f73eac1b5c87b7)
feat(category_theory/limits/kan_extension): Right and Left Kan extensions of a functor ([#6820](https://github.com/leanprover-community/mathlib/pull/#6820))

This PR adds the left and right Kan extensions of a functor, and constructs the associated adjunction.

coauthored by @b-mehta 

A followup PR should prove that the adjunctions in this file are (co)reflective when \iota is fully faithful.
The current PR proves certain objects are initial/terminal, which will be useful for this.



Co-authored-by: Adam Topaz <github@adamtopaz.com>

### [2021-04-06T01:49:45+00:00](https://github.com/leanprover-community/mathlib/commit/8e2db7fea254046e9ee54163a49bb1ac9c849ad7)
refactor(order/boolean_algebra): generalized Boolean algebras ([#6775](https://github.com/leanprover-community/mathlib/pull/#6775))

We add ["generalized Boolean algebras"](https://en.wikipedia.org/wiki/Boolean_algebra_(structure)#Generalizations), following a [suggestion](https://github.com/leanprover-community/mathlib/pull/6469#issuecomment-787521935) of @jsm28. Now `boolean_algebra` extends `generalized_boolean_algebra` and `boolean_algebra.core`:

```lean
class generalized_boolean_algebra (α : Type u) extends semilattice_sup_bot α, semilattice_inf_bot α,
  distrib_lattice α, has_sdiff α :=
(sup_inf_sdiff : ∀a b:α, (a ⊓ b) ⊔ (a \ b) = a)
(inf_inf_sdiff : ∀a b:α, (a ⊓ b) ⊓ (a \ b) = ⊥)

class boolean_algebra.core (α : Type u) extends bounded_distrib_lattice α, has_compl α :=
(inf_compl_le_bot : ∀x:α, x ⊓ xᶜ ≤ ⊥)
(top_le_sup_compl : ∀x:α, ⊤ ≤ x ⊔ xᶜ)

class boolean_algebra (α : Type u) extends generalized_boolean_algebra α, boolean_algebra.core α :=
(sdiff_eq : ∀x y:α, x \ y = x ⊓ yᶜ)
```

I also added a module doc for `order/boolean_algebra`.

Many lemmas about set difference both for `finset`s and `set`s now follow from their `generalized_boolean_algebra` counterparts and I've removed the (fin)set-specific proofs.

`finset.sdiff_subset_self` was removed in favor of the near-duplicate `finset.sdiff_subset` (the latter has more explicit arguments).

### [2021-04-06T01:49:44+00:00](https://github.com/leanprover-community/mathlib/commit/61d2ad05414ff7e8fb38fd093bd140d8dd6249b3)
chore(algebra/char_p/basic): uniformise notation and weaken some assumptions ([#6765](https://github.com/leanprover-community/mathlib/pull/#6765))

I had looked at this file in an earlier PR and decided to come back to uniformise the notation, using always `R` and never `α` for the generic type of the file.

While I was at it, I started also changing
* some `semiring` assumptions to `add_monoid + has_one`,
* some `ring` assumptions to `add_group + has_one`.

In the long run, I think that the characteristic of a ring should be defined as the order of `1` in the additive submonoid, but this is not what I am doing at the moment!

Here is a related Zulip discussion:
https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/char_zero




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-04-05T20:54:32+00:00](https://github.com/leanprover-community/mathlib/commit/1a45a56b62c84f3d8adc70059ac4cc03c9294a78)
feat(logic/basic): subsingleton_of_not_nonempty ([#7043](https://github.com/leanprover-community/mathlib/pull/#7043))

Also generalize `not_nonempty_iff_imp_false` to `Sort *`.

### [2021-04-05T15:31:11+00:00](https://github.com/leanprover-community/mathlib/commit/04af8bae52aa294ae248fcbb9a02a5086041df8b)
feat(logic/small): instances for Pi and sigma types ([#7042](https://github.com/leanprover-community/mathlib/pull/#7042))

Add some instances to prove basic type formers preserve smallness.

### [2021-04-05T15:31:10+00:00](https://github.com/leanprover-community/mathlib/commit/e0e56ee632dac7a2e1dc7412215db6dbcae87b8b)
feat(tactic/simps): trace with @[simps?] ([#6995](https://github.com/leanprover-community/mathlib/pull/#6995))

also trace with initialize_simps_projections?
trace when to_additive is applied to generated lemmas
with @[simps?] projection information is not printed (since that is often not as useful)

### [2021-04-05T12:18:25+00:00](https://github.com/leanprover-community/mathlib/commit/5be4463ee9f4f8d22a6201f32a036f9c2ef5c39b)
fix(fintype/basic): typo in docstring ([#7041](https://github.com/leanprover-community/mathlib/pull/#7041))

### [2021-04-05T05:18:28+00:00](https://github.com/leanprover-community/mathlib/commit/d36d7667cd0a24048d27d90a049bf69e6ad26529)
chore(scripts): update nolints.txt ([#7038](https://github.com/leanprover-community/mathlib/pull/#7038))

I am happy to remove some nolints for you!

### [2021-04-05T01:27:16+00:00](https://github.com/leanprover-community/mathlib/commit/530e7e320b3703447d7702f320ec4bd71fd26e0c)
chore(data/quot): rename `nonempty_of_trunc` to enable dot notation ([#7034](https://github.com/leanprover-community/mathlib/pull/#7034))

### [2021-04-04T21:07:11+00:00](https://github.com/leanprover-community/mathlib/commit/c7d7d833b5b163c358bb08f64b7c0090eee28332)
chore(data/nat): use notation `n!`, minor golf ([#7032](https://github.com/leanprover-community/mathlib/pull/#7032))

### [2021-04-04T21:07:10+00:00](https://github.com/leanprover-community/mathlib/commit/92869e2a34c942710e4cc44bbf0c4cd377f7396b)
chore(data/real/nnreal): use `function.injective.*` constructors ([#7028](https://github.com/leanprover-community/mathlib/pull/#7028))

### [2021-04-04T14:00:36+00:00](https://github.com/leanprover-community/mathlib/commit/338331e20552661b534f38a02b13a915b43b6577)
feat(topology/urysohns_lemma): Urysohn's lemma ([#6967](https://github.com/leanprover-community/mathlib/pull/#6967))

### [2021-04-04T11:19:18+00:00](https://github.com/leanprover-community/mathlib/commit/ee58d669459112739b9829628bdc43c9e1da85cc)
feat(topology): variations on the intermediate value theorem ([#6789](https://github.com/leanprover-community/mathlib/pull/#6789))

### [2021-04-04T06:41:15+00:00](https://github.com/leanprover-community/mathlib/commit/155b31512b6466fc50c9b6bcce8caecedc218443)
chore(data/set/function): minor style fixes ([#7027](https://github.com/leanprover-community/mathlib/pull/#7027))

### [2021-04-03T22:50:59+00:00](https://github.com/leanprover-community/mathlib/commit/44f34ee9bb809c45da3ab467b5836cbb10653b5d)
feat(group_theory/perm/sign): the alternating group ([#6913](https://github.com/leanprover-community/mathlib/pull/#6913))

Defines `alternating_subgroup` to be `sign.ker`
Proves a few basic lemmas about its cardinality



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-04-03T16:38:16+00:00](https://github.com/leanprover-community/mathlib/commit/a5b7de0a178fc31eb6a12b2e62c68a0ea8e63a89)
chore(linear_algebra): fix/add `coe_fn` simp lemmas ([#7015](https://github.com/leanprover-community/mathlib/pull/#7015))

* move `@[simp]` from `linear_map.comp_apply` to new
  `linear_map.coe_comp`;
* rename `linear_map.comp_coe` to `linear_map.coe_comp`, swap LHS&RHS;
* add `linear_map.coe_proj`, move `@[simp]` from `linear_map.proj_apply`.

### [2021-04-03T14:32:04+00:00](https://github.com/leanprover-community/mathlib/commit/fc87598514c3ebcbc83118dfcdb436a92099daa7)
chore(data/polynomial/eval): add `map_ring_hom_{id,comp}` lemmas ([#7019](https://github.com/leanprover-community/mathlib/pull/#7019))

### [2021-04-03T11:15:54+00:00](https://github.com/leanprover-community/mathlib/commit/76a3b82dc0ae6c9a60a8714d74c6cf2b854cf17b)
feat(topology/sheaves/sheaf_condition): Sheaf condition in terms of unique gluing ([#6940](https://github.com/leanprover-community/mathlib/pull/#6940))

As in
https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf

This PR adds an equivalent sheaf condition for type-valued presheaves, which is hopefully more "hands-on" and easier to work
with for concrete type-valued presheaves. I tried to roughly follow the design of the other sheaf conditions.

### [2021-04-03T11:15:53+00:00](https://github.com/leanprover-community/mathlib/commit/00418988c06833c41da40151c8f619d8ef91137b)
feat(category_theory/preadditive): single_obj α is preadditive when α is a ring ([#6884](https://github.com/leanprover-community/mathlib/pull/#6884))






Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Markus Himmel <markus@himmel-villmar.de>

### [2021-04-03T07:42:13+00:00](https://github.com/leanprover-community/mathlib/commit/51c9b60df3de35c63d9222ac378ce71501a4b440)
feat(category_theory/biproducts): additional lemmas ([#6881](https://github.com/leanprover-community/mathlib/pull/#6881))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-03T03:51:07+00:00](https://github.com/leanprover-community/mathlib/commit/6c598456d48188ed31fa4fe775a2cedd19490283)
doc(algebra/module/basic): update module doc ([#7009](https://github.com/leanprover-community/mathlib/pull/#7009))

### [2021-04-03T03:51:06+00:00](https://github.com/leanprover-community/mathlib/commit/eedc9da85516101fec183f74d9330fec1bf7fc4c)
chore(linear_algebra/basic, algebra/lie/basic): fix erroneous doc string, add notation comment ([#7005](https://github.com/leanprover-community/mathlib/pull/#7005))

### [2021-04-03T03:51:05+00:00](https://github.com/leanprover-community/mathlib/commit/b00d9becb5e128d2ef9f257e3dfa1037aea963fd)
chore(data/finset/basic, ring_theory/hahn_series): mostly namespace changes ([#6996](https://github.com/leanprover-community/mathlib/pull/#6996))

Added the line `open finset` and removed unneccesary `finset.`s from `ring_theory/hahn_series`
Added a small lemma to `data.finset.basic` that will be useful for an upcoming Hahn series PR



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-04-03T03:51:03+00:00](https://github.com/leanprover-community/mathlib/commit/b630c5135d1899fa237fd9bd42ee88e516bab10d)
feat(category_theory/kernels): mild generalization of lemma ([#6930](https://github.com/leanprover-community/mathlib/pull/#6930))

Relaxes some `is_iso` assumptions to `mono` or `epi`.

I've also added some TODOs about related generalizations and instances which could be provided. I don't intend to get to them immediately.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-04-03T03:51:02+00:00](https://github.com/leanprover-community/mathlib/commit/9c6fe3cc9d1560385bee1923e0254b53baedbc88)
feat(linear_algebra/bilinear_form): Bilinear form restricted on a subspace is nondegenerate under some condition ([#6855](https://github.com/leanprover-community/mathlib/pull/#6855))

The main result is `restrict_nondegenerate_iff_is_compl_orthogonal` which states that: a subspace is complement to its orthogonal complement with respect to some bilinear form if and only if that bilinear form restricted on to the subspace is nondegenerate.

To prove this, I also introduced `dual_annihilator_comap`. This is a definition that allows us to treat the dual annihilator of a dual annihilator as a subspace in the original space.

### [2021-04-03T03:51:01+00:00](https://github.com/leanprover-community/mathlib/commit/2a9c21cc97025100f1faa1b3ff94197f108cb693)
feat(measure_theory/interval_integral): improve integral_comp lemmas ([#6795](https://github.com/leanprover-community/mathlib/pull/#6795))

I expand our collection of `integral_comp` lemmas so that they can handle all interval integrals of the form
`∫ x in a..b, f (c * x + d)`, for any function `f : ℝ → E`  and any real constants `c` and `d` such that `c ≠ 0`.


This PR now also removes the `ae_measurable` assumptions from the preexisting `interval_comp` lemmas (thank you @sgouezel!).



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-04-02T21:56:53+00:00](https://github.com/leanprover-community/mathlib/commit/36e5ff4cb3608dd0bca8e722b2a39a558838b961)
feat(category_theory/with_term): formally adjoin terminal / initial objects. ([#6966](https://github.com/leanprover-community/mathlib/pull/#6966))


Adds the construction which formally adjoins a terminal resp. initial object to a category.



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2021-04-02T21:56:51+00:00](https://github.com/leanprover-community/mathlib/commit/267e6608c2073f59d40a13aa5664c7d7a812230f)
refactor(algebra/add_torsor): use `to_additive` for `add_action` ([#6914](https://github.com/leanprover-community/mathlib/pull/#6914))

### [2021-04-02T21:56:50+00:00](https://github.com/leanprover-community/mathlib/commit/278ad3385b180f9db1992da9ba41475c9a1efbb7)
refactor(topology/metric_space/isometry): generalize to pseudo_metric ([#6910](https://github.com/leanprover-community/mathlib/pull/#6910))

This is part of a series of PR to have the theory of `semi_normed_group` (and related concepts) in mathlib.

We generalize here `isometry` to `pseudo_emetric_space` and `pseudo_metric_space`.

### [2021-04-02T21:56:49+00:00](https://github.com/leanprover-community/mathlib/commit/cb1e888e2d22d507381f30c380bad73569fce140)
feat(category_theory/limits): is_iso_π_of_is_initial ([#6908](https://github.com/leanprover-community/mathlib/pull/#6908))

From [zulip](https://leanprover.zulipchat.com/#narrow/stream/267928-condensed-mathematics/topic/Simplicial.20stuff/near/231346653)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-02T21:56:48+00:00](https://github.com/leanprover-community/mathlib/commit/fe4ea3db6e910c3c4f06c19fb281227a04564b95)
chore(docs/undergrad.yaml): a few updates to the undergrad list ([#6904](https://github.com/leanprover-community/mathlib/pull/#6904))

Adds entries for Schur's Lemma and several infinite series concepts



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-04-02T21:56:47+00:00](https://github.com/leanprover-community/mathlib/commit/7b52617427af3e5307321cecfb6c39f47c00bba9)
feat(data/nat/multiplicity): weaken hypothesis on set bounds ([#6903](https://github.com/leanprover-community/mathlib/pull/#6903))

### [2021-04-02T16:17:31+00:00](https://github.com/leanprover-community/mathlib/commit/fead60fef19a1e9c21d18b4026d2673ddb3799f9)
chore(data/finsupp/basic): add a lemma for `map_domain` applied to equivs ([#7001](https://github.com/leanprover-community/mathlib/pull/#7001))

### [2021-04-02T09:16:15+00:00](https://github.com/leanprover-community/mathlib/commit/394719f58c3bdb39ef811d8ec76fc120a631975d)
chore(data/finsupp): lemmas about map_range and map_domain ([#6976](https://github.com/leanprover-community/mathlib/pull/#6976))

This proves some functorial properties:
* `finsupp.map_range_id`
* `finsupp.map_range_comp`

Adds the new definitions to match `finsupp.map_range.add_monoid_hom`, and uses them to golf some proofs:
* `finsupp.map_range.zero_hom`, which is `map_domain` as a `zero_hom`
* `finsupp.map_range.add_equiv`, which is `map_range` as an `add_equiv`
* `finsupp.map_range.linear_map`, which is `map_range` as a `linear_map`
* `finsupp.map_range.linear_equiv`, which is `map_range` as a `linear_equiv`
* `finsupp.map_domain.add_monoid_hom`, which is `map_domain` as an `add_monoid_hom`

Shows the functorial properties of these bundled definitions:
* `finsupp.map_range.zero_hom_id`, `finsupp.map_range.zero_hom_comp`
* `finsupp.map_range.add_monoid_hom_id`, `finsupp.map_range.add_monoid_hom_comp`
* `finsupp.map_range.add_equiv_refl`, `finsupp.map_range.add_equiv_trans`
* `finsupp.map_range.linear_map_id`, `finsupp.map_range.linear_map_comp`
* `finsupp.map_range.linear_equiv_refl`, `finsupp.map_range.linear_equiv_trans`
* `finsupp.map_domain.add_monoid_hom_id`, `finsupp.map_domain.add_monoid_hom_comp`

And shows that `map_range` and `map_domain` commute when the range-map preserves addition:
* `finsupp.map_domain_map_range`

### [2021-04-02T08:15:10+00:00](https://github.com/leanprover-community/mathlib/commit/6e5c07bfeb3a67b4501c57757ace645b7c004107)
feat(category_theory/subobject): well-powered categories ([#6802](https://github.com/leanprover-community/mathlib/pull/#6802))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-04-02T04:59:38+00:00](https://github.com/leanprover-community/mathlib/commit/19483ae34e2107b36a866b52675fd90c0230c2ad)
feat(data/finset): inj on of image card eq ([#6785](https://github.com/leanprover-community/mathlib/pull/#6785))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-04-02T01:20:16+00:00](https://github.com/leanprover-community/mathlib/commit/733770217646c02775ede725eb227e99c40f1db6)
feat(data/equiv/fintype): computable bijections and perms from/to fintype ([#6959](https://github.com/leanprover-community/mathlib/pull/#6959))

Using exhaustive search, we can upgrade embeddings from fintypes into
equivs, and transport perms across embeddings. The computational
performance is poor, so the docstring suggests alternatives when an
explicit inverse is known.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-04-01T18:49:17+00:00](https://github.com/leanprover-community/mathlib/commit/d8de56723399d84cb649cac2e3e4e163af7e7ff6)
feat(group_theory/order_of_element): generalised to add_order_of ([#6770](https://github.com/leanprover-community/mathlib/pull/#6770))

This PR defines `add_order_of` for an additive monoid. If someone sees how to do this with more automation, let me know. 

This gets one step towards closing issue [#1563](https://github.com/leanprover-community/mathlib/pull/#1563).

Coauthored by: Yakov Pechersky @pechersky 



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-04-01T17:47:25+00:00](https://github.com/leanprover-community/mathlib/commit/1e27fba88e0cc9d35a9aee090a2ad4768c766940)
admin(README.md): add @adamtopaz to the maintainers list ([#6987](https://github.com/leanprover-community/mathlib/pull/#6987))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2021-04-01T17:47:24+00:00](https://github.com/leanprover-community/mathlib/commit/c35e9f635f7f8a5fbe1d09df9aebd53c0ebcf95f)
admin(README.md): add @b-mehta to the maintainers list ([#6986](https://github.com/leanprover-community/mathlib/pull/#6986))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Bhavik Mehta <bhavikmehta8@gmail.com>

### [2021-04-01T17:47:23+00:00](https://github.com/leanprover-community/mathlib/commit/cea8c65a764305fc5e9c546834e7a55c4185d3c9)
feat(algebra/char_p/exp_char): basics about the exponential characteristic ([#6671](https://github.com/leanprover-community/mathlib/pull/#6671))

This file contains the definition and a few basic facts pertaining to the exponential characteristic of an integral domain.

### [2021-04-01T15:06:29+00:00](https://github.com/leanprover-community/mathlib/commit/396602bf7872f90b48f6180ab43a39c62633b3a6)
feat(algebra/module/hom): Add missing smul instances on add_monoid_hom ([#6891](https://github.com/leanprover-community/mathlib/pull/#6891))

These are defeq to the smul instances on `linear_map`, in `linear_algebra/basic.lean`.

### [2021-04-01T13:55:22+00:00](https://github.com/leanprover-community/mathlib/commit/a690ce775b1e95630ab7c73f09cc2c4fa5a9b559)
admin(README.md): add @TwoFX to the maintainers list ([#6985](https://github.com/leanprover-community/mathlib/pull/#6985))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Markus Himmel <markus@himmel-villmar.de>

### [2021-04-01T12:44:31+00:00](https://github.com/leanprover-community/mathlib/commit/132ae2b2daebfa3a252154d79bd4db773a7f908d)
fix(algebraic_topology): fix a typo ([#6991](https://github.com/leanprover-community/mathlib/pull/#6991))

### [2021-04-01T09:03:10+00:00](https://github.com/leanprover-community/mathlib/commit/a9b6230a24f0ac8ab9cc21f1c4b758c8364cccc1)
feat(combinatorics/quiver): weakly connected components ([#6847](https://github.com/leanprover-community/mathlib/pull/#6847))

Define composition of paths and the weakly connected components of a directed graph. Two vertices are in the same weakly connected component if there is a zigzag of arrows from one to the other.

### [2021-04-01T05:03:20+00:00](https://github.com/leanprover-community/mathlib/commit/21cc80669e53eeb0f5e8f53df47719278cacded1)
feat(data/equiv/basic): `perm_congr` group lemmas ([#6982](https://github.com/leanprover-community/mathlib/pull/#6982))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-04-01T01:24:57+00:00](https://github.com/leanprover-community/mathlib/commit/3365c443ad8520476e9d508765e407f230ec1ef7)
feat(data/equiv/basic): `equiv.swap_eq_refl_iff` ([#6983](https://github.com/leanprover-community/mathlib/pull/#6983))

### [2021-04-01T01:24:56+00:00](https://github.com/leanprover-community/mathlib/commit/64abe48e48a804245e8caba067bf3dad475904f2)
refactor(topology/metric_space/pi_Lp): generalize to pseudo_metric ([#6978](https://github.com/leanprover-community/mathlib/pull/#6978))

We generalize here the Lp distance to `pseudo_emetric` and similar concepts.

### [2021-04-01T01:24:55+00:00](https://github.com/leanprover-community/mathlib/commit/b7fbc17ae3d1ae04a9be73c44433be22c1758938)
chore(data/equiv/add_equiv): missing simp lemmas ([#6975](https://github.com/leanprover-community/mathlib/pull/#6975))

These lemmas already exist for `equiv`, this just copies them to `add_equiv`.

### [2021-04-01T01:24:54+00:00](https://github.com/leanprover-community/mathlib/commit/e540c2fe212443f7d277ba9185c47d1872be0a9f)
feat(data/set/basic): default_coe_singleton ([#6971](https://github.com/leanprover-community/mathlib/pull/#6971))



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-04-01T01:24:53+00:00](https://github.com/leanprover-community/mathlib/commit/ec9476fdd4c3f64d04a70e3f0f359c26e0b1251c)
chore(data/fintype/basic): add card_le_of_surjective and card_quotient_le ([#6964](https://github.com/leanprover-community/mathlib/pull/#6964))

Add two natural lemmas that were missing from `fintype.basic`. 



Co-authored-by: Adrián Doña Mateo <43966663+AdrianDoM@users.noreply.github.com>

### [2021-04-01T01:24:52+00:00](https://github.com/leanprover-community/mathlib/commit/71c3e714aac3f11329336adfa68365d16cf4eb7a)
refactor(topology/bases): use `structure` for `is_topological_basis ([#6947](https://github.com/leanprover-community/mathlib/pull/#6947))

* turn `topological_space.is_topological_basis` into a `structure`;
* rename `mem_nhds_of_is_topological_basis` to `is_topological_basis.mem_nhds_iff`;
* rename `is_open_of_is_topological_basis` to `is_topological_basis.is_open`;
* rename `mem_basis_subset_of_mem_open` to `is_topological_basis.exists_subset_of_mem_open`;
* rename `sUnion_basis_of_is_open` to `is_topological_basis.open_eq_sUnion`, add prime version;
* add `is_topological_basis.prod`;
* add convenience lemma `is_topological_basis.second_countable_topology`;
* rename `is_open_generated_countable_inter` to `exists_countable_basis`;
* add `topological_space.countable_basis` and API around it;
* add `@[simp]` to `opens.mem_supr`, add `opens.mem_Sup`;
* golf

### [2021-03-31T21:24:16+00:00](https://github.com/leanprover-community/mathlib/commit/5f1b4500f21b62968aad9bd939625cdf2b2372a6)
refactor(algebra/*): add new `mul_one_class` and `add_zero_class` for non-associative monoids ([#6865](https://github.com/leanprover-community/mathlib/pull/#6865))

This extracts a base class from `monoid M`, `mul_one_class M`, that drops the associativity assumption.

It goes on to weaken `monoid_hom` and `submonoid` to require `mul_one_class M` instead of `monoid M`, along with weakening the typeclass requirements for other primitive constructions like `monoid_hom.fst`.

Instances of the new classes are provided on `pi`, `prod`, `finsupp`, `(add_)submonoid`, and `(add_)monoid_algebra`.

This is by no means an exhaustive relaxation across mathlib, but it aims to broadly cover the foundations.

### [2021-03-31T17:53:07+00:00](https://github.com/leanprover-community/mathlib/commit/cc9915282edc5c432650e4838535cdef9f65c086)
feat(data/list/zip): `nth_zip_with` univ polymorphic, `zip_with_eq_nil_iff` ([#6974](https://github.com/leanprover-community/mathlib/pull/#6974))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-03-31T14:28:55+00:00](https://github.com/leanprover-community/mathlib/commit/23dbb4cf51a587ec8ca1602f3fe420997de7b2a1)
feat(tactic/elementwise): autogenerate lemmas in concrete categories ([#6941](https://github.com/leanprover-community/mathlib/pull/#6941))

# The `elementwise` attribute
The `elementwise` attribute can be applied to a lemma
```lean
@[elementwise]
lemma some_lemma {C : Type*} [category C] {X Y : C} (f g : X ⟶ Y) : f = g := ...
```
and produce
```lean
lemma some_lemma_apply {C : Type*} [category C] [concrete_category C]
  {X Y : C} (f g : X ⟶ Y) (x : X) : f x = g x := ...
```
(Here `X` is being coerced to a type via `concrete_category.has_coe_to_sort` and
`f` and `g` are being coerced to functions via `concrete_category.has_coe_to_fun`.)
The name of the produced lemma can be specified with `@[elementwise other_lemma_name]`.
If `simp` is added first, the generated lemma will also have the `simp` attribute.




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-31T13:16:42+00:00](https://github.com/leanprover-community/mathlib/commit/f29b0b49badab1bcbe338cb79d102e36e79dce09)
feat(category_theory/lifting_properties): create a new file about lifting properties ([#6852](https://github.com/leanprover-community/mathlib/pull/#6852))

This file introduces lifting properties, establishes a few basic properties, and constructs a subcategory spanned by morphisms having a right lifting property.

### [2021-03-31T11:08:19+00:00](https://github.com/leanprover-community/mathlib/commit/09110f10cc3958742436f43cc1efdea698b917f4)
feat(geometry/manifold/bump_function): define smooth bump functions, baby version of the Whitney embedding thm ([#6839](https://github.com/leanprover-community/mathlib/pull/#6839))

* refactor some functions in `analysis/calculus/specific_functions` to use bundled structures;
* define `to_euclidean`, `euclidean.dist`, `euclidean.ball`, and `euclidean.closed_ball`;
* define smooth bump functions on manifolds;
* prove a baby version of the Whitney embedding theorem.

### [2021-03-31T09:30:06+00:00](https://github.com/leanprover-community/mathlib/commit/1fdce2f8774ca129326ae6ec737005dbfa94bf3c)
refactor(analysis/normed_space/basic): add semi_normed_ring ([#6889](https://github.com/leanprover-community/mathlib/pull/#6889))

This is the natural continuation of [#6888](https://github.com/leanprover-community/mathlib/pull/#6888) . We add here semi_normed_ring, semi_normed_comm_ring, semi_normed_space and semi_normed_algebra.

I didn't add `semi_normed_field`: the most important result for normed_field is `∥1∥ = 1`, that is false for `semi_normed_field`, making it a more or less useless notion. In particular a `semi_normed_space` is by definition a vector space over a `normed_field`.

### [2021-03-31T03:01:59+00:00](https://github.com/leanprover-community/mathlib/commit/85c896154f652a713965d9770dde9e18ca2b8fcd)
chore(scripts): update nolints.txt ([#6970](https://github.com/leanprover-community/mathlib/pull/#6970))

I am happy to remove some nolints for you!

### [2021-03-31T00:41:44+00:00](https://github.com/leanprover-community/mathlib/commit/8ed5c3c782f7c59c07f5419102c12712dc6a9db3)
chore(topology/algebra/group_with_zero): continuity attributes ([#6965](https://github.com/leanprover-community/mathlib/pull/#6965))

Some `@[continuity]` tags, requested at https://github.com/leanprover-community/mathlib/pull/6937#discussion_r604139611

### [2021-03-31T00:41:43+00:00](https://github.com/leanprover-community/mathlib/commit/6f6ee00378092e84be4cbdfad70c7f064d0596bf)
chore(data/finsupp): add simp lemmas about dom_congr ([#6963](https://github.com/leanprover-community/mathlib/pull/#6963))

Inspired by [#6905](https://github.com/leanprover-community/mathlib/pull/#6905)

### [2021-03-30T20:36:57+00:00](https://github.com/leanprover-community/mathlib/commit/f2b433fa4b60c5f807d61d5f3d5754765638a1e5)
refactor(data/equiv/basic): remove `equiv.set.range` ([#6960](https://github.com/leanprover-community/mathlib/pull/#6960))

We already had `equiv.of_injective`, which duplicated the API. `of_injective` is the preferred naming, so we change all occurrences accordingly.
This also renames `equiv.set.range_of_left_inverse` to `equiv.of_left_inverse`, to match names like `linear_equiv.of_left_inverse`.

Note that the `congr` and `powerset` definitions which appear in the diff have just been reordered, and are otherwise unchanged.

### [2021-03-30T20:36:56+00:00](https://github.com/leanprover-community/mathlib/commit/cf377e2cb0fb416f2a708d6655b981a03bbfb27a)
chore(algebra/category/*): fix some names ([#6846](https://github.com/leanprover-community/mathlib/pull/#6846))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-30T17:12:57+00:00](https://github.com/leanprover-community/mathlib/commit/33f443fc234bb591f7dd83b4322607ea4ad54209)
feat(archive/imo): add 2011 Q5 ([#6927](https://github.com/leanprover-community/mathlib/pull/#6927))

proof of IMO 2011 Q5



Co-authored-by: verberkm <80709181+verberkm@users.noreply.github.com>

### [2021-03-30T17:12:56+00:00](https://github.com/leanprover-community/mathlib/commit/0c0fb53cb9e37694abf7e9d16215d6e261c459d9)
feat(group_theory/perm/cycles): Order of is_cycle ([#6873](https://github.com/leanprover-community/mathlib/pull/#6873))

The order of a cycle equals the cardinality of its support.

### [2021-03-30T14:01:24+00:00](https://github.com/leanprover-community/mathlib/commit/a192783016b448b6b32cfb466ca4cfd71836328a)
chore(algebra/direct_sum_graded): relax typeclass assumptions ([#6961](https://github.com/leanprover-community/mathlib/pull/#6961))

### [2021-03-30T14:01:23+00:00](https://github.com/leanprover-community/mathlib/commit/ed6d94a805b2ca246885ae867b1e3ef9ddb5a257)
chore(group_theory/group_action/defs): combine duplicated `comp_hom` and rename derivative definitions ([#6942](https://github.com/leanprover-community/mathlib/pull/#6942))

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Duplicate.20mul_action.20defs/near/232246589)

### [2021-03-30T14:01:22+00:00](https://github.com/leanprover-community/mathlib/commit/e1f66f1adf63393b06a6ce8a3671ecc968872863)
feat(topology/algebra/group_with_zero): continuity of exponentiation to an integer power (`fpow`) ([#6937](https://github.com/leanprover-community/mathlib/pull/#6937))

In a topological group-with-zero (more precisely, in a space with `has_continuous_inv'` and `has_continuous_mul`), the `k`-th power function is continuous for integer `k`, with the possible exception of at 0.

### [2021-03-30T14:01:21+00:00](https://github.com/leanprover-community/mathlib/commit/bcfaabfc80545288e0dd3ff790986f7127d87797)
feat(data/set_like): remove repeated boilerplate from subobjects ([#6768](https://github.com/leanprover-community/mathlib/pull/#6768))

This just scratches the surface, and removes all of the boilerplate that is just a consequence of the injective map to a `set`.
Already this trims more than 150 lines.

For every lemma of the form `set_like.*` added in this PR, the corresponding `submonoid.*`, `add_submonoid.*`, `sub_mul_action.*`, `submodule.*`, `subsemiring.*`, `subring.*`, `subfield.*`, `subalgebra.*`, and `intermediate_field.*` lemmas have been removed.
Often these lemmas only existed for one or two of these subtypes, so this means that we have lemmas for more things not fewer.

Note that while the `ext_iff`, `ext'`, and `ext'_iff` lemmas have been removed, we still need the `ext` lemma as `set_like.ext` cannot directly be tagged `@[ext]`.

### [2021-03-30T10:02:55+00:00](https://github.com/leanprover-community/mathlib/commit/b0ece6fe05a95bbeb02f21363b25bfa94c6a4287)
chore(data/set/{basic,countable}): add, rename, golf ([#6935](https://github.com/leanprover-community/mathlib/pull/#6935))

* add `set.range_prod_map` and `set.countable.image2`;
* rename `set.countable_prod` to `set.countable.prod`.

### [2021-03-30T10:02:54+00:00](https://github.com/leanprover-community/mathlib/commit/7e109c4b68a3c9c1387b416ccd7840cd25dbc90c)
feat(measure_theory/lp_space): continuous functions on compact space are in Lp ([#6919](https://github.com/leanprover-community/mathlib/pull/#6919))

Continuous functions on a compact space equipped with a finite Borel measure are in Lp, and the inclusion is a bounded linear map.  This follows directly by transferring the construction in [#6878](https://github.com/leanprover-community/mathlib/pull/#6878) for bounded continuous functions, using the fact that continuous function on a compact space are bounded.

### [2021-03-30T10:02:53+00:00](https://github.com/leanprover-community/mathlib/commit/3e67f50c0c9afb016f9fd7bf5f1d8933720a0ff8)
feat(analysis/normed_space/inner_product): isometry of ℂ with Euclidean space ([#6877](https://github.com/leanprover-community/mathlib/pull/#6877))

`ℂ` is isometric to `fin 2 → ℝ` with the Euclidean inner product.  The isometry given here is that defined by the ordered basis {1, i} for `ℂ`.

### [2021-03-30T07:31:27+00:00](https://github.com/leanprover-community/mathlib/commit/877af1065ac94bd93cd8ba382ce3a0bca2bd56b6)
chore(algebra/big_operators/order): generalize some lemmas to `ordered_comm_semiring` ([#6950](https://github.com/leanprover-community/mathlib/pull/#6950))

### [2021-03-30T07:31:27+00:00](https://github.com/leanprover-community/mathlib/commit/fe00980af4c267ce2cf5f86e903b45f8cf11bae5)
feat(topology/compact_open): β ≃ₜ C(α, β) if α has a single element ([#6946](https://github.com/leanprover-community/mathlib/pull/#6946))

### [2021-03-30T03:44:59+00:00](https://github.com/leanprover-community/mathlib/commit/8d398a8f2b3cc244f4f847f3328d29045a606320)
chore(scripts): update nolints.txt ([#6957](https://github.com/leanprover-community/mathlib/pull/#6957))

I am happy to remove some nolints for you!

### [2021-03-30T03:44:58+00:00](https://github.com/leanprover-community/mathlib/commit/b4ce9b7f47736afb25d40634a3153fdfad36425f)
feat(group_theory/order_of_element): exists_pow_eq_self_of_coprime ([#6875](https://github.com/leanprover-community/mathlib/pull/#6875))

If `n` is coprime to the order of `g`, then there exists an `m` such that `(g ^ n) ^ m = g`.

### [2021-03-30T03:44:57+00:00](https://github.com/leanprover-community/mathlib/commit/b449a3cd5198c2a7cd6eda2236892f1aba561d52)
feat(order/ideal, order/pfilter, order/prime_ideal): added `is_ideal`, `is_pfilter`, `is_prime`, `is_maximal`, `prime_pair` ([#6656](https://github.com/leanprover-community/mathlib/pull/#6656))

Proved basic lemmas about them. Also extended the is_proper API.

Made the `pfilter`arguments of some lemmas explicit:
- `pfilter.nonempty`
- `pfilter.directed`

### [2021-03-29T23:43:35+00:00](https://github.com/leanprover-community/mathlib/commit/e5c112d6d70f18efbbbda43535d0d86db12c03f6)
feat(category_theory/arrow): simp lemmas for lifts involving arrow.mk ([#6953](https://github.com/leanprover-community/mathlib/pull/#6953))

These came up during review of [#6852](https://github.com/leanprover-community/mathlib/pull/#6852).

### [2021-03-29T23:43:35+00:00](https://github.com/leanprover-community/mathlib/commit/87bc893a5ea586bcee7731c445a8beaad5a7bbe2)
feat(group_theory/{subgroup, order_of_element}): refactors simple groups, classifies finite simple abelian/solvable groups ([#6926](https://github.com/leanprover-community/mathlib/pull/#6926))

Refactors the deprecated `simple_group` to a new `is_simple_group`
Shows that all cyclic groups of prime order are simple
Shows that all simple `comm_group`s are cyclic
Shows that all simple finite `comm_group`s have prime order
Shows that a simple group is solvable iff it is commutative

### [2021-03-29T23:43:33+00:00](https://github.com/leanprover-community/mathlib/commit/ad4aca0c6de247514782cd618f838d5244d84934)
feat(topology/local_homeomorph): add `is_image`, `piecewise`, and `disjoint_union` ([#6804](https://github.com/leanprover-community/mathlib/pull/#6804))

Also add `local_equiv.copy` and `local_homeomorph.replace_equiv` and use them for `local_equiv.disjoint_union` and `local_homeomorph.disjoint_union.

### [2021-03-29T20:11:52+00:00](https://github.com/leanprover-community/mathlib/commit/50225daddc473dd9905434fd7f183787304138f3)
feat(data/fin): fin n.succ is an add_comm_group ([#6898](https://github.com/leanprover-community/mathlib/pull/#6898))

This just moves the proof out of `data.zmod` basic.

Moving the full ring instance is left for future work, as `modeq`, used to prove left_distrib, is not available to import in `data/fin/basic`.

Note this adds an import of `data.int.basic` to `data.fin.basic`. I think this is probably acceptable?

### [2021-03-29T18:22:24+00:00](https://github.com/leanprover-community/mathlib/commit/8b7c8a4cfd610578d01ddadfc819a7e084fb00a8)
chore(topology/instances/real): golf ([#6945](https://github.com/leanprover-community/mathlib/pull/#6945))

### [2021-03-29T18:22:23+00:00](https://github.com/leanprover-community/mathlib/commit/3fdf5295010265dd10c146e3617c31c56f20cd74)
chore(topology/instances/ennreal): golf ([#6944](https://github.com/leanprover-community/mathlib/pull/#6944))

### [2021-03-29T13:12:21+00:00](https://github.com/leanprover-community/mathlib/commit/16776539db4b393656ac0d80499e4bd52133dd80)
chore(*): long lines ([#6939](https://github.com/leanprover-community/mathlib/pull/#6939))

Except for URLs, references to books, and `src/tactic/*`, this should be very close to the last of our long lines.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-29T13:12:19+00:00](https://github.com/leanprover-community/mathlib/commit/f1fe129e6d486c2a653c4fa8ec3987d6fd7e070d)
feat(category_theory/images): instance for precomposition by iso ([#6931](https://github.com/leanprover-community/mathlib/pull/#6931))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-29T13:12:17+00:00](https://github.com/leanprover-community/mathlib/commit/d2e5976456ebd692e5f0cbf448946421044f870d)
feat(category_theory/limits/terminal): constructor for is_terminal ([#6929](https://github.com/leanprover-community/mathlib/pull/#6929))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-29T13:12:15+00:00](https://github.com/leanprover-community/mathlib/commit/cf56f8846149a5c9ab2734b75c9e1bb1e648fe7f)
feat(category_theory/limits/zero): functor categories have zero morphisms ([#6928](https://github.com/leanprover-community/mathlib/pull/#6928))






Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-29T13:12:14+00:00](https://github.com/leanprover-community/mathlib/commit/407ad21437c1b7096241169e9ee3771a87e52543)
feat(algebra.smul_with_zero): add mul_zero_class.to_smul_with_zero ([#6911](https://github.com/leanprover-community/mathlib/pull/#6911))

### [2021-03-29T13:12:12+00:00](https://github.com/leanprover-community/mathlib/commit/fe29f883f14cdd72dc2bf68abbff358f102cb2c6)
feat(data/nat/basic):  (n+1) / 2 ≤ n ([#6863](https://github.com/leanprover-community/mathlib/pull/#6863))

Zulip:
https://leanprover.zulipchat.com/#narrow/stream/116395-maths

### [2021-03-29T13:12:11+00:00](https://github.com/leanprover-community/mathlib/commit/66ee65cadf53c0b9cacabd925e1c7cbfde9a11d5)
feat(category): structured arrows ([#6830](https://github.com/leanprover-community/mathlib/pull/#6830))

Factored out from [#6820](https://github.com/leanprover-community/mathlib/pull/#6820).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-29T13:12:10+00:00](https://github.com/leanprover-community/mathlib/commit/318cb4bcc4e7d38b0adb634520e295992a3f61e3)
feat(category_theory): essentially_small categories ([#6801](https://github.com/leanprover-community/mathlib/pull/#6801))

Preparation for `well_powered`, then for `complete_semilattice_Inf|Sup` on `subobject X`, then for work on chain complexes.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-29T13:12:08+00:00](https://github.com/leanprover-community/mathlib/commit/8d8b64e53b4b78bff76795f8193b97a0addd4aba)
feat(data/equiv/mul_add_aut): adding conjugation in an additive group ([#6774](https://github.com/leanprover-community/mathlib/pull/#6774))

assuming `[add_group G]` this defines `G ->+ additive (add_aut G)`



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-29T08:42:19+00:00](https://github.com/leanprover-community/mathlib/commit/2ad4a4ce6afc3008272627320370f74cd2020c7f)
chore(group_theory/subgroup,logic/nontrivial): golf ([#6934](https://github.com/leanprover-community/mathlib/pull/#6934))

### [2021-03-29T05:18:50+00:00](https://github.com/leanprover-community/mathlib/commit/5ab177a854e60498339aa23e6d165a36c1aed159)
chore(topology/instances/real): remove instance `real_maps_algebra` ([#6920](https://github.com/leanprover-community/mathlib/pull/#6920))

Remove 
```lean
instance reals_semimodule : has_continuous_smul ℝ ℝ
instance real_maps_algebra {α : Type*} [topological_space α] : algebra ℝ C(α, ℝ)
```
These are not used explicitly anywhere in the library, I suspect because if needed they can be found by typeclass inference.  Deleting them cleans up the import hierarchy by requiring many fewer files to import `topology.continuous_function.algebra`.

### [2021-03-29T03:17:36+00:00](https://github.com/leanprover-community/mathlib/commit/cb1d1c6d580e81f3bc76ce8e76b3eb235fd830ff)
chore(scripts): update nolints.txt ([#6933](https://github.com/leanprover-community/mathlib/pull/#6933))

I am happy to remove some nolints for you!

### [2021-03-29T03:17:36+00:00](https://github.com/leanprover-community/mathlib/commit/f2900006379b38e406a4c4cae789cc522e8763b0)
feat(data/equiv/fin): rename sum_fin_sum_equiv to fin_sum_fin_equiv ([#6857](https://github.com/leanprover-community/mathlib/pull/#6857))

Renames `sum_fin_sum_equiv` to `fin_sum_fin_equiv` (as discussed 
[on Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/sum_fin_add_comm_equiv))
Introduces a version with `fin(n + m)` instead of `fin(m + n)` 
Adds a bunch of simp lemmas for applying these (and their inverses)

### [2021-03-28T19:54:49+00:00](https://github.com/leanprover-community/mathlib/commit/8e275a30511b92037c577c0ab20b2602d73abcca)
fix(order/complete_lattice): fix typo in docstring ([#6925](https://github.com/leanprover-community/mathlib/pull/#6925))

### [2021-03-28T19:54:48+00:00](https://github.com/leanprover-community/mathlib/commit/a17f38f2672a8c3d6fe0fef595ffd28175319b8f)
feat(measure_theory/lp_space): bounded continuous functions are in Lp ([#6878](https://github.com/leanprover-community/mathlib/pull/#6878))

Under appropriate conditions (finite Borel measure, second-countable), a bounded continuous function is in L^p.  The main result of this PR is `bounded_continuous_function.to_Lp`, which provides this operation as a bounded linear map.  There are also several variations.

### [2021-03-28T16:13:09+00:00](https://github.com/leanprover-community/mathlib/commit/4487e73950b76716e953bedea3e2b8f1b5d1c80b)
feat(order/bounded_lattice): is_total, coe_sup and unique_maximal lemmas ([#6922](https://github.com/leanprover-community/mathlib/pull/#6922))

A few little additions for with_top and with_bot.



Co-authored-by: agjftucker <33552683+agjftucker@users.noreply.github.com>

### [2021-03-28T16:13:08+00:00](https://github.com/leanprover-community/mathlib/commit/7285fb65afaa4c1893774bd67b54daff206601f2)
feat(data/complex/circle): circle is a Lie group ([#6907](https://github.com/leanprover-community/mathlib/pull/#6907))

Define `circle` to be the unit circle in `ℂ` and give it the structure of a Lie group.  Also define `exp_map_circle` to be the natural map `λ t, exp (t * I)` from `ℝ` to `circle`, and give it (separately) the structures of a group homomorphism and a smooth map (we seem not to have the definition of a Lie group homomorphism).

### [2021-03-28T14:22:34+00:00](https://github.com/leanprover-community/mathlib/commit/accb9d2ddab889da58302a695dc5b93934dac419)
fix(topology/algebra/mul_action): fix typo in instance name ([#6921](https://github.com/leanprover-community/mathlib/pull/#6921))

### [2021-03-28T12:00:37+00:00](https://github.com/leanprover-community/mathlib/commit/0e4760b35bdfdfde126f7761f21009637ff08a33)
refactor(measure_theory): add typeclasses for measurability of operations ([#6832](https://github.com/leanprover-community/mathlib/pull/#6832))

With these typeclasses and lemmas we can use, e.g., `measurable.mul` for any type with measurable `uncurry (*)`, not only those with `has_continuous_mul`.

New typeclasses:

* `has_measurable_add`, `has_measurable_add₂`: measurable left/right addition and measurable `uncurry (+)`;
* `has_measurable_mul`, `has_measurable_mul₂`: measurable left/right multiplication and measurable `uncurry (*)`;
* `has_measurable_pow`: measurable `uncurry (^)`
* `has_measurable_sub`, `has_measurable_sub₂`: measurable left/right subtraction and measurable `λ (a, b), a - b`
* `has_measurable_div`, `has_measurable_div₂` : measurability of division as a function of numerator/denominator and measurability of `λ (a, b), a / b`;
* `has_measurable_neg`, `has_measurable_inv`: measurable negation/inverse;
* `has_measurable_const_smul`, `has_measurable_smul`: measurable `λ x, c • x` and measurable `λ (c, x), c • x`

### [2021-03-28T04:55:34+00:00](https://github.com/leanprover-community/mathlib/commit/dc34b216eb1a1548161e35d328ea1ab798017033)
lint(*): split long lines ([#6918](https://github.com/leanprover-community/mathlib/pull/#6918))

### [2021-03-28T01:36:58+00:00](https://github.com/leanprover-community/mathlib/commit/e129117c305879c76a05e01f039144ec92ad02a3)
chore(scripts): update nolints.txt ([#6917](https://github.com/leanprover-community/mathlib/pull/#6917))

I am happy to remove some nolints for you!

### [2021-03-27T23:51:09+00:00](https://github.com/leanprover-community/mathlib/commit/879cb4746341f58d3f60abbfc9f30aa68e3c88fd)
feat(test/integration): add examples of computing integrals by simp ([#6859](https://github.com/leanprover-community/mathlib/pull/#6859))

As suggested in [[#6216](https://github.com/leanprover-community/mathlib/pull/#6216) (comment)](https://github.com/leanprover-community/mathlib/pull/6216#discussion_r580389848).

The examples added here were made possible by [#6216](https://github.com/leanprover-community/mathlib/pull/#6216), [#6334](https://github.com/leanprover-community/mathlib/pull/#6334), [#6357](https://github.com/leanprover-community/mathlib/pull/#6357), [#6597](https://github.com/leanprover-community/mathlib/pull/#6597).

### [2021-03-27T21:49:34+00:00](https://github.com/leanprover-community/mathlib/commit/06b21d0f61424b25daac74c62e1c516d11f932a5)
chore(category_theory/monads): remove empty file ([#6915](https://github.com/leanprover-community/mathlib/pull/#6915))

In [#5889](https://github.com/leanprover-community/mathlib/pull/#5889) I moved the contents of this file into monad/basic but I forgot to delete this file.

### [2021-03-27T18:47:28+00:00](https://github.com/leanprover-community/mathlib/commit/27c867642a443ef084cb0f7f53ba69727f66683a)
refactor(geometry/manifold/algebra/smooth_functions): make `smooth_map_group` division defeq to `pi.has_div` ([#6912](https://github.com/leanprover-community/mathlib/pull/#6912))

The motivation was the fact that this allows `smooth_map.coe_div` to be `rfl` but this should be more generally useful.

### [2021-03-27T15:21:25+00:00](https://github.com/leanprover-community/mathlib/commit/d1044139f710ec07f2e4c8d627d26f9e1e827fd1)
chore(topology/metric_space): golf, generalize, rename ([#6849](https://github.com/leanprover-community/mathlib/pull/#6849))

### Second countable topology
* generalize `metric.second_countable_of_almost_dense_set` to a pseudo
  emetric space, see
  `emetric.subset_countable_closure_of_almost_dense_set` (for sets)
  and `emetric.second_countable_of_almost_dense_set` (for the whole space);
* use it to generalize `emetric.countable_closure_of_compact` to a
  pseudo emetric space (replacing `closure t = s` with
  `s ⊆ closure t`) and prove that a sigma compact pseudo emetric space has
  second countable topology;
* generalize `second_countable_of_proper` to a pseudo metric space;

### `emetric.diam`

* rename `emetric.diam_le_iff_forall_edist_le` to `emetric.diam_le_iff`;
* rename `emetric.diam_le_of_forall_edist_le` to `emetric.diam_le`.

### [2021-03-27T06:35:11+00:00](https://github.com/leanprover-community/mathlib/commit/cc7e722a84da606db4bdc877b29a8c940c683a0a)
refactor(representation_theory/maschke): replaces `¬(ring_char k ∣ fintype.card G)` with `invertible (fintype.card G : k)` instance ([#6901](https://github.com/leanprover-community/mathlib/pull/#6901))

Refactors Maschke's theorem to take an instance of `invertible (fintype.card G : k)` instead of an explicit `not_dvd : ¬(ring_char k ∣ fintype.card G)`.
Provides that instance in the context `char_zero k`.
Allows `monoid_algebra.submodule.is_complemented` to be an instance.

### [2021-03-27T06:35:10+00:00](https://github.com/leanprover-community/mathlib/commit/d32f9c72e73c7e98d7cb474020b77ae711ab88a7)
feat(data/nat/log): add some lemmas and monotonicity ([#6899](https://github.com/leanprover-community/mathlib/pull/#6899))

### [2021-03-27T06:35:09+00:00](https://github.com/leanprover-community/mathlib/commit/5ecb1f735cdb38d141fc02e71b3026bf5793df6a)
feat(group_theory/order_of_element): order_of is the same in a submonoid ([#6876](https://github.com/leanprover-community/mathlib/pull/#6876))

The first lemma shows that `order_of` is the same in a submonoid, but it seems like you also need a lemma for subgroups.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-03-27T03:05:14+00:00](https://github.com/leanprover-community/mathlib/commit/5c95d480a6765e0cfb936a3417475465f4e0452e)
chore(scripts): update nolints.txt ([#6902](https://github.com/leanprover-community/mathlib/pull/#6902))

I am happy to remove some nolints for you!

### [2021-03-27T03:05:12+00:00](https://github.com/leanprover-community/mathlib/commit/3fe67c86a56f1f59e09243e9022712cb9d2c9465)
feat(algebra/module): pull-back module structures along homomorphisms ([#6895](https://github.com/leanprover-community/mathlib/pull/#6895))

### [2021-03-27T03:05:11+00:00](https://github.com/leanprover-community/mathlib/commit/4b261a86b3c097955d15b1a65575bcabf78de9c8)
chore(algebra/smul_with_zero): add missing injective / surjective transferring functions ([#6892](https://github.com/leanprover-community/mathlib/pull/#6892))

### [2021-03-27T03:05:10+00:00](https://github.com/leanprover-community/mathlib/commit/832a2eb9b9ba78d3bab330313050c94f56e53984)
refactor(topology/continuous_functions): change file layout ([#6890](https://github.com/leanprover-community/mathlib/pull/#6890))

Moves `topology/bounded_continuous_function.lean` to `topology/continuous_functions/bounded.lean`, splitting out the content about continuous functions on a compact space to `topology/continuous_functions/compact.lean`.

Renames `topology/continuous_map.lean` to `topology/continuous_functions/basic.lean`.

Renames `topology/algebra/continuous_functions.lean` to `topology/continuous_functions/algebra.lean`.

Also changes the direction of the equivalences, replacing `bounded_continuous_function.equiv_continuous_map_of_compact` with `continuous_map.equiv_bounded_of_compact` (and also the more structured version).

There's definitely more work to be done here, particularly giving at least some lemmas characterising the norm on `C(α, β)`, but I wanted to do a minimal PR changing the layout first.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-27T03:05:09+00:00](https://github.com/leanprover-community/mathlib/commit/99c23eaf00d62f81850aedf7ae9c672361eaa75e)
refactor(analysis/normed_space/basic): add semi_normed_group ([#6888](https://github.com/leanprover-community/mathlib/pull/#6888))

This is part of a series of PR to have semi_normed_group (and related concepts) in mathlib.
 
To keep the PR as small as possibile I just added the new class `semi_normed_group`. I didn't introduce anything like `semi_normed_ring` and I didn't do anything about morphisms.

### [2021-03-27T03:05:08+00:00](https://github.com/leanprover-community/mathlib/commit/bc33f1a9aca67d58e0572caf624de5d0745c71ab)
feat(group_theory/perm/cycles): is_cycle_of_is_cycle_pow ([#6871](https://github.com/leanprover-community/mathlib/pull/#6871))

If `g ^ n` is a cycle, and if `g ^ n` doesn't have smaller support, then `g` is a cycle.

### [2021-03-27T03:05:07+00:00](https://github.com/leanprover-community/mathlib/commit/5eead090774b68f3993c0a51aeedb288b0efd1c1)
feat(algebra/big_operators/basic): add lemmas for a product with two non one factors ([#6826](https://github.com/leanprover-community/mathlib/pull/#6826))

Add another version of `prod_eq_one` and 3 versions of `prod_eq_double`, a lemma that says a product with only 2 non one factors is equal to the product of the 2 factors.

Co-authored-by: paulvanwamelen <30371019+paulvanwamelen@users.noreply.github.com>

### [2021-03-27T03:05:06+00:00](https://github.com/leanprover-community/mathlib/commit/cfd1a4cbf1d18b54b10301dc90bddb022e2e8e2f)
feat(linear_algebra/bilinear_form): generalize some constructions to the noncomm case ([#6824](https://github.com/leanprover-community/mathlib/pull/#6824))

Introduce an operation `flip` on a bilinear form, which swaps the arguments.  Generalize the construction `bilin_form.to_lin` (which currently exists for commutative rings) to a weaker construction `bilin_form.to_lin'` for arbitrary rings.

Rename lemmas
`sesq_form.map_sum_right` -> `sesq_form.sum_right`
`sesq_form.map_sum_left` -> `sesq_form.sum_left`
`bilin_form.map_sum_right` -> `bilin_form.sum_right`
`bilin_form.map_sum_left` -> `bilin_form.sum_left`
`to_linear_map_apply` (sic, no namespace) -> `bilin_form.to_lin_apply`

### [2021-03-27T03:05:05+00:00](https://github.com/leanprover-community/mathlib/commit/ec26d96a5628b1082b4598c8b56952a599015e12)
feat(order/lattice): add complete_semilattice_Sup/Inf ([#6797](https://github.com/leanprover-community/mathlib/pull/#6797))

This adds `complete_semilattice_Sup` and `complete_semilattice_Inf` above `complete_lattice`.

This has not much effect, as in fact either implies `complete_lattice`. However it's useful at times to have these, when you can naturally define just one half of the structure at a time (e.g. the subobject lattice in a general category, where for `Sup` we need coproducts and images, while for the `Inf` we need wide pullbacks).

There are many places in mathlib that currently use `complete_lattice_of_Inf`. It might be slightly nicer to instead construct a `complete_semilattice_Inf`, and then use the new `complete_lattice_of_complete_semilattice_Inf`, but I haven't done that here.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-26T23:52:29+00:00](https://github.com/leanprover-community/mathlib/commit/e36656eea89990dd4942dea27395977e02920c01)
chore(category_theory/monoidal): golf some proofs ([#6894](https://github.com/leanprover-community/mathlib/pull/#6894))

Golfs proofs of `tensor_left_iff`, `tensor_right_iff`, `left_unitor_tensor'`, `right_unitor_tensor` and `unitors_equal` - in particular removes the file `monoidal/unitors` as all it contained was a proof of `unitors_equal` which is a two line proof.

### [2021-03-26T23:52:28+00:00](https://github.com/leanprover-community/mathlib/commit/e21b4bcb93b8b1b477440cfdc044865bc85d0090)
chore(data/equiv/transfer_instance): reuse existing proofs ([#6868](https://github.com/leanprover-community/mathlib/pull/#6868))

This makes all the proofs in this file identical. It's unfortunate that the `letI`s have to be written out in each case,

### [2021-03-26T23:52:27+00:00](https://github.com/leanprover-community/mathlib/commit/9e00c2bcf9af49a250dbf73fa57ed72dca758c81)
feat(ring_theory/int/basic): Induction, nat_abs and units ([#6733](https://github.com/leanprover-community/mathlib/pull/#6733))

Proves : 
 * Induction on primes (special case for nat)
 * In `int`, a number and its `nat_abs` are associated
 * An integer is prime iff its `nat_abs` is prime
 * Two integers are associated iff they are equal or opposites
 * Classification of the units in `int` (trivial but handy lemma)



Co-authored-by: Ruben-VandeVelde <65514131+Ruben-VandeVelde@users.noreply.github.com>

### [2021-03-26T22:21:04+00:00](https://github.com/leanprover-community/mathlib/commit/ca7dca39925c85175802b652a0bbe8e0a6408bea)
feat(geometry/manifold/algebra/smooth_functions): simp lemmas for coercions to functions ([#6893](https://github.com/leanprover-community/mathlib/pull/#6893))

These came up while working on the branch `replace_algebra_def` but seem worth adding
in their own right.

### [2021-03-26T18:26:23+00:00](https://github.com/leanprover-community/mathlib/commit/902b01d8aacfadbec5e2e5edd278c5aa90672e1e)
chore(algebra/group): rename `is_unit_unit` to `units.is_unit` ([#6886](https://github.com/leanprover-community/mathlib/pull/#6886))

### [2021-03-26T18:26:22+00:00](https://github.com/leanprover-community/mathlib/commit/e43d964980766fd5fbd3d2d24d9151f04eba77a4)
chore(data/pi,algebra/group/pi): reorganize proofs ([#6869](https://github.com/leanprover-community/mathlib/pull/#6869))

Add `pi.single_op` and `pi.single_binop` and use them in the proofs.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-26T18:26:20+00:00](https://github.com/leanprover-community/mathlib/commit/3566cbba8425ceb02340049f0d6d473eb5352dc2)
feat(*): add more lemmas about `set.piecewise` ([#6862](https://github.com/leanprover-community/mathlib/pull/#6862))

### [2021-03-26T18:26:19+00:00](https://github.com/leanprover-community/mathlib/commit/ef7fe6f9776df87172faddb834279eca48f230d6)
feat(dynamics/ergodic/conservative): define conservative systems, formalize Poincaré recurrence thm ([#2311](https://github.com/leanprover-community/mathlib/pull/#2311))

### [2021-03-26T14:24:21+00:00](https://github.com/leanprover-community/mathlib/commit/f0bfb25c41259bb5d2c947d1a866091bdf86b43e)
feat(geometry/manifold/mfderiv): differentiability of `f : E ≃L[𝕜] E'` ([#6850](https://github.com/leanprover-community/mathlib/pull/#6850))

### [2021-03-26T14:24:20+00:00](https://github.com/leanprover-community/mathlib/commit/2b71c803e22e66ad5495516581b38ad925090cb2)
feat(linear_algebra/dual): add the dual map ([#6807](https://github.com/leanprover-community/mathlib/pull/#6807))

### [2021-03-26T14:24:19+00:00](https://github.com/leanprover-community/mathlib/commit/8addf9a7962694d5587b7d409a6be5d9a7d31c9b)
feat(topology/bcf): better dist_lt_of_* lemmas ([#6781](https://github.com/leanprover-community/mathlib/pull/#6781))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-26T14:24:17+00:00](https://github.com/leanprover-community/mathlib/commit/6ae9f0000ea2ef11ec3f329f8304bf9dc8885944)
feat(ring_theory/polynomial/symmetric): degrees_esymm ([#6718](https://github.com/leanprover-community/mathlib/pull/#6718))

A lot of API also added for finset, finsupp, multiset, powerset_len
    
Co-authored-by: Hanting Zhang <hantingzhang03@gmail.com>

### [2021-03-26T11:55:37+00:00](https://github.com/leanprover-community/mathlib/commit/34a33172cf617103bf573991e699a9725b98774b)
feat(group_theory/perm/sign): power has smaller support ([#6872](https://github.com/leanprover-community/mathlib/pull/#6872))

The support of `g ^ n` is contained in the support of `g`.

### [2021-03-26T11:55:36+00:00](https://github.com/leanprover-community/mathlib/commit/adc5f9d6f2aae3035c17a3ab74298103b752691a)
feat(ring_theory/ideal/operations): add an instance ([#6717](https://github.com/leanprover-community/mathlib/pull/#6717))

This instance has been suggested by @eric-wieser in [#6640](https://github.com/leanprover-community/mathlib/pull/#6640).

On my machine I get a deterministic timeout in `ring_theory/finiteness` at line 325, but in principle it seems a useful instance to have. 

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-26T08:06:47+00:00](https://github.com/leanprover-community/mathlib/commit/fb49529900fb38d7b5a589740f316c6c555e7fe4)
chore(topology/sheaves): speed up a slow proof ([#6879](https://github.com/leanprover-community/mathlib/pull/#6879))

In another branch this proof mysteriously becomes slightly too slow, so I'm offering a pre-emptive speed up, just replacing `simp` with `rw`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-26T08:06:45+00:00](https://github.com/leanprover-community/mathlib/commit/c658f5cc22e2c1d2f08bab89415e75c888eed4ac)
refactor(algebra/field): allow custom `div` ([#6874](https://github.com/leanprover-community/mathlib/pull/#6874))

### [2021-03-26T08:06:44+00:00](https://github.com/leanprover-community/mathlib/commit/c07c31072c13558924b975d09ac2c627db40a027)
feat(group_theory/perm_basic): Lemma swap_apply_apply ([#6870](https://github.com/leanprover-community/mathlib/pull/#6870))

A useful rw lemma.

### [2021-03-26T08:06:42+00:00](https://github.com/leanprover-community/mathlib/commit/0977b203a5c1bcd7aa58d7e88b065ef986d76482)
feat(measure_theory/interval_integral): weaken assumption in `integral_non_ae_measurable` ([#6858](https://github.com/leanprover-community/mathlib/pull/#6858))

I don't see any reason for having a strict inequality here.

### [2021-03-26T08:06:41+00:00](https://github.com/leanprover-community/mathlib/commit/03f0bb1f4f92c8e35768ccd9aaadfefc2a3497d2)
refactor(topology/algebra): define `has_continuous_smul`, use for topological semirings and algebras ([#6823](https://github.com/leanprover-community/mathlib/pull/#6823))

### [2021-03-26T08:06:39+00:00](https://github.com/leanprover-community/mathlib/commit/5c93c2d09d801bc1e117cc11f5b6858cf06186d8)
feat(category_theory/triangulated/rotate): add definition of rotation and inverse rotation of triangles and their morphisms ([#6803](https://github.com/leanprover-community/mathlib/pull/#6803))

This PR adds the definition of rotation and inverse rotation of triangles and triangle morphisms.
It also shows that rotation is an equivalence on the category of triangles in an additive category.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-26T08:06:38+00:00](https://github.com/leanprover-community/mathlib/commit/5c856c390f6948ffbc5242c3f13e6c4f8439e3a9)
feat(topology/vector_bundle): definition of topological vector bundle ([#4658](https://github.com/leanprover-community/mathlib/pull/#4658))

# Topological vector bundles

In this file we define topological vector bundles.

Let `B` be the base space. In our formalism, a topological vector bundle is by definition the type
`bundle.total_space E` where `E : B → Type*` is a function associating to
`x : B` the fiber over `x`. This type `bundle.total_space E` is just a type synonym for
`Σ (x : B), E x`, with the interest that one can put another topology than on `Σ (x : B), E x`
which has the disjoint union topology.

To have a topological vector bundle structure on `bundle.total_space E`,
one should addtionally have the following data:

* `F` should be a topological vector space over a field `𝕜`;
* There should be a topology on `bundle.total_space E`, for which the projection to `E` is
a topological fiber bundle with fiber `F` (in particular, each fiber `E x` is homeomorphic to `F`);
* For each `x`, the fiber `E x` should be a topological vector space over `𝕜`, and the injection
from `E x` to `bundle.total_space F E` should be an embedding;
* The most important condition: around each point, there should be a bundle trivialization which
is a continuous linear equiv in the fibers.

If all these conditions are satisfied, we register the typeclass
`topological_vector_bundle 𝕜 F E`. We emphasize that the data is provided by other classes, and
that the `topological_vector_bundle` class is `Prop`-valued.

The point of this formalism is that it is unbundled in the sense that the total space of the bundle
is a type with a topology, with which one can work or put further structure, and still one can
perform operations on topological vector bundles (which are yet to be formalized). For instance,
assume that `E₁ : B → Type*` and `E₂ : B → Type*` define two topological vector bundles over `𝕜`
with fiber models `F₁` and `F₂` which are normed spaces. Then one can construct the vector bundle of
continuous linear maps from `E₁ x` to `E₂ x` with fiber `E x := (E₁ x →L[𝕜] E₂ x)` (and with the
topology inherited from the norm-topology on `F₁ →L[𝕜] F₂`, without the need to define the strong
topology on continuous linear maps between general topological vector spaces). Let
`vector_bundle_continuous_linear_map 𝕜 F₁ E₁ F₂ E₂ (x : B)` be a type synonym for `E₁ x →L[𝕜] E₂ x`.
Then one can endow
`bundle.total_space (vector_bundle_continuous_linear_map 𝕜 F₁ E₁ F₂ E₂)`
with a topology and a topological vector bundle structure.

Similar constructions can be done for tensor products of topological vector bundles, exterior
algebras, and so on, where the topology can be defined using a norm on the fiber model if this
helps.

Coauthored-by: Sebastien Gouezel  <sebastien.gouezel@univ-rennes1.fr>

### [2021-03-26T03:02:05+00:00](https://github.com/leanprover-community/mathlib/commit/b797d519145d0f0aa648e284f76edcc9727f6b63)
chore(scripts): update nolints.txt ([#6885](https://github.com/leanprover-community/mathlib/pull/#6885))

I am happy to remove some nolints for you!

### [2021-03-25T21:40:33+00:00](https://github.com/leanprover-community/mathlib/commit/e6d01b8ede321c0246360b5270a8c50c3358ec2d)
feat(topology/bounded_continuous_function): add `coe_mul`, `mul_apply` ([#6867](https://github.com/leanprover-community/mathlib/pull/#6867))

Partners of the extant `coe_smul`, `smul_apply` lemmas (see line 630).

These came up while working on the `replace_algebra_def` branch but
seem worth adding independently.

### [2021-03-25T21:40:32+00:00](https://github.com/leanprover-community/mathlib/commit/b6703916ae42af994fbd1c8a1701fa812a1784fe)
chore(algebra/group/{pi,prod}): add missing instances ([#6866](https://github.com/leanprover-community/mathlib/pull/#6866))

### [2021-03-25T21:40:31+00:00](https://github.com/leanprover-community/mathlib/commit/6e14e8f915a85cd5e8447c02383f5b58544ff9fa)
feat(data/equiv/mul_add): define `mul_hom.inverse` ([#6864](https://github.com/leanprover-community/mathlib/pull/#6864))



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-03-25T19:35:08+00:00](https://github.com/leanprover-community/mathlib/commit/e0547059e9335599a1cfd7dc35927dc7c6ff603e)
refactor(topology/metric_space/antilipschitz): generalize to pseudo_metric_space ([#6841](https://github.com/leanprover-community/mathlib/pull/#6841))

This is part of a series of PR to introduce semi_normed_group in mathlib.

We introduce here anti Lipschitz maps for `pseudo_emetric_space`.

### [2021-03-25T19:35:07+00:00](https://github.com/leanprover-community/mathlib/commit/b299d14431c71db372dad7ae50a98702d68bd5b6)
feat(algebra/geom_sum): rename geom_series to geom_sum, adds a lemma for the geometric sum ([#6828](https://github.com/leanprover-community/mathlib/pull/#6828))

Declarations with names including `geom_series` have been renamed to use `geom_sum`, instead.

Also adds the lemma `geom_sum₂_succ_eq`: `geom_sum₂ x y (n + 1) = x ^ n + y * (geom_sum₂ x y n)`

Co-authored-by: paulvanwamelen <30371019+paulvanwamelen@users.noreply.github.com>

### [2021-03-25T15:21:05+00:00](https://github.com/leanprover-community/mathlib/commit/1be91a1b2a48afd52f4f36b54ac8702db2ad1f10)
chore(order/filter/lift,topology/algebra/ordered): drop `[nonempty ι]` ([#6861](https://github.com/leanprover-community/mathlib/pull/#6861))

* add `set.powerset_univ`, `filter.lift_top`, `filter.lift'_top`;
* remove `[nonempty ι]` from `filter.lift'_infi_powerset` and `tendsto_Icc_class_nhds_pi`.

### [2021-03-25T10:59:25+00:00](https://github.com/leanprover-community/mathlib/commit/879273e8c9ed822dae650595e3022abbcbe044c9)
feat(logic/basic, logic/function/basic): make `cast` the simp-normal form of `eq.mp` and `eq.mpr`, add lemmas ([#6834](https://github.com/leanprover-community/mathlib/pull/#6834))

This adds the fact that `eq.rec`, `eq.mp`, `eq.mpr`, and `cast` are bijective, as well as some simp lemmas that follow from their injectivity.

### [2021-03-25T03:23:45+00:00](https://github.com/leanprover-community/mathlib/commit/81e8a131f64396245c82a007716d15b27eabaedc)
chore(scripts): update nolints.txt ([#6856](https://github.com/leanprover-community/mathlib/pull/#6856))

I am happy to remove some nolints for you!

### [2021-03-25T03:23:44+00:00](https://github.com/leanprover-community/mathlib/commit/ec77f2268b8f32dd7acd11fd47771ec7d14da494)
chore(measure_theory/measure): add `exists_measurable_superset_forall_eq` ([#6853](https://github.com/leanprover-community/mathlib/pull/#6853))

### [2021-03-25T03:23:43+00:00](https://github.com/leanprover-community/mathlib/commit/5a72dafdd760301ed8c96a569e94f917744a79f8)
feat(data/equiv/basic): add a computable version of equiv.set.range ([#6821](https://github.com/leanprover-community/mathlib/pull/#6821))

If a left-inverse of `f` is known, it can be used to construct the equiv both computably and with control over definitional reduction.

This adds the definition `equiv.set.range_of_left_inverse` to mirror `linear_equiv.of_left_inverse` and `ring_equiv.of_left_inverse`.

### [2021-03-25T03:23:42+00:00](https://github.com/leanprover-community/mathlib/commit/c3034c27cc6e2883a6bd49acb54c53b3f7830237)
feat(data/indicator_function): add multiplicative version ([#6794](https://github.com/leanprover-community/mathlib/pull/#6794))

We need it for `finprod`

### [2021-03-24T23:20:35+00:00](https://github.com/leanprover-community/mathlib/commit/19e214e2073d75eca34dd1340b8e161e4fb30de8)
feat(algebra/normed_space/basic,algebra/group_with_zero/power): real.(f)?pow_{even,bit0}_norm and field fpow lemmas ([#6757](https://github.com/leanprover-community/mathlib/pull/#6757))

Simplifcation of `norm` when to an even numeral power.

Additionally, add `fpow` lemmas to match `pow` lemmas, and change `fpow_nonneg_to_nonneg` to `fpow_nonneg` to match `pow` naming.

### [2021-03-24T23:20:34+00:00](https://github.com/leanprover-community/mathlib/commit/039dfd2ec518e0dc132db5500a66012721ae3a5d)
refactor(data/finsupp): add decidable_eq ([#6333](https://github.com/leanprover-community/mathlib/pull/#6333))

... when the statement (not the proof) of the theorem depends on a
decidability assumption. This prevents instance mismatch issues in
downstream theorems.


Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-03-24T19:57:27+00:00](https://github.com/leanprover-community/mathlib/commit/77c3bfed5901b2d6cdca0205a8f0edc4ee945b1b)
chore(data/zmod/basic): make `fin.comm_ring.sub` defeq to `fin.sub` ([#6848](https://github.com/leanprover-community/mathlib/pull/#6848))

This is only possible now that `fin.sub` is not saturating, and we allow `sub` and `neg` to be defined separately.

### [2021-03-24T19:57:24+00:00](https://github.com/leanprover-community/mathlib/commit/ab2c44c4ee27b6a4426e8e0545a7f720f4041977)
feat(algebra/big_operators/ring): add finset.prod_[one_]sub_ordered ([#6811](https://github.com/leanprover-community/mathlib/pull/#6811))

Add 2 lemmas useful for partition of unity, `finset.prod_sub_ordered` and `finset.prod_one_sub_ordered`.

Also add an explicit `[decidable_eq]` assumption to `finset.induction_on_max` (without it some `rw`s failed).

### [2021-03-24T16:04:14+00:00](https://github.com/leanprover-community/mathlib/commit/b4373e5ad392202a341bebed26d836ac23ee2b03)
feat(tactic/lint): linter for @[class] def ([#6061](https://github.com/leanprover-community/mathlib/pull/#6061))

Also cleaning up some uses of `@[class] def` that were missed in [#6028](https://github.com/leanprover-community/mathlib/pull/#6028).


Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-24T13:49:38+00:00](https://github.com/leanprover-community/mathlib/commit/a75633335b6048ac981b2cdae53314b2f88c590c)
chore(algebra/algebra/subalgebra): Add missing coe_sort for subalgebra ([#6800](https://github.com/leanprover-community/mathlib/pull/#6800))

Unlike all the other subobject types, `subalgebra` does not implement `has_coe_to_sort` directly, instead going via a coercion to one of `submodule` and `subsemiring`.

This removes the `has_coe (subalgebra R A) (subsemiring A)` and `has_coe (subalgebra R A) (submodule R A)` instances; we don't have these for any other subobjects, and they cause the elaborator more difficulty than the corresponding `to_subsemiring` and `to_submodule` projections.

This changes the definition of `le` to not involve coercions, which matches `submodule` but requires a few proofs to change.

This speeds up the `lift_of_splits` proof by adding `finite_dimensional.of_subalgebra_to_submodule`.

### [2021-03-24T09:40:12+00:00](https://github.com/leanprover-community/mathlib/commit/144e9c4b6badb7ea853c7bc1843b85d973e7bfb9)
chore(*): removing some completed TODOs ([#6844](https://github.com/leanprover-community/mathlib/pull/#6844))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-24T09:40:11+00:00](https://github.com/leanprover-community/mathlib/commit/6773016652c703d6f2404f81d5a98e003eba9c44)
chore(category_theory/triangulated): cleanup ([#6827](https://github.com/leanprover-community/mathlib/pull/#6827))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Luke Kershaw <35707277+l-kershaw@users.noreply.github.com>

### [2021-03-24T05:49:35+00:00](https://github.com/leanprover-community/mathlib/commit/beb2cc980ba237860ec964eff0b09101a5719abb)
feat(algebra/category): subobjects in the category of R-modules ([#6842](https://github.com/leanprover-community/mathlib/pull/#6842))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-24T05:49:34+00:00](https://github.com/leanprover-community/mathlib/commit/935003ebc25e8db380a823add84618947055d275)
chore(data/nat/basic): add @[simp] to some lemmas about numerals ([#6652](https://github.com/leanprover-community/mathlib/pull/#6652))

Allows the simplifier to make more progress in equalities of numerals (both in nat, and in `[(semi)ring R] [no_zero_divisors R] [char_zero R]`). Also adds `@[simp]` to `nat.succ_ne_zero` and `nat.succ_ne_self`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2021-03-24T02:11:42+00:00](https://github.com/leanprover-community/mathlib/commit/e0a79186cf1b839484d01bea9892763f02cb70b7)
chore(scripts): update nolints.txt ([#6843](https://github.com/leanprover-community/mathlib/pull/#6843))

I am happy to remove some nolints for you!

### [2021-03-24T02:11:41+00:00](https://github.com/leanprover-community/mathlib/commit/94a4a9582003a3acb240140155b21cc8791d8817)
feat(logic/basic): `is_trans Prop iff` instance ([#6836](https://github.com/leanprover-community/mathlib/pull/#6836))

If you've ever wondered why `trans h1 h2` works for `≤` but not for `↔`, this is the reason.

### [2021-03-24T02:11:40+00:00](https://github.com/leanprover-community/mathlib/commit/a008609de050f009d01892759b6af4279e55888a)
doc(topology/sheaves/presheaf_of_functions): fix some documentation t… ([#6835](https://github.com/leanprover-community/mathlib/pull/#6835))

makes variable names in the documentation match up with the names in the code

### [2021-03-24T02:11:39+00:00](https://github.com/leanprover-community/mathlib/commit/36fc1cab0e49a80445ea141606b04c93975bfd8a)
feat(algebraic_geometry/prime_spectrum): prime spectrum analogue of Hilberts Nullstellensatz ([#6805](https://github.com/leanprover-community/mathlib/pull/#6805))

Referring to a TODO comment in `algebraic_geometry/prime_spectrum.lean`, which I presume is outdated.

### [2021-03-24T02:11:38+00:00](https://github.com/leanprover-community/mathlib/commit/12170e2aba1ced9e0d52352eb18a359431e9ab33)
feat(topology/algebra/continuous_functions): separates points ([#6783](https://github.com/leanprover-community/mathlib/pull/#6783))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-23T23:08:24+00:00](https://github.com/leanprover-community/mathlib/commit/fd5f4333d48a1c576307108ef346da58cfab930a)
fix(algebraic_topology): added FQNs to simplicial locale ([#6838](https://github.com/leanprover-community/mathlib/pull/#6838))

This fix, which fully qualifies some notation, makes it so that
```
import algebraic_topology.simplicial_set
open_locale simplicial
```
works without errors.

### [2021-03-23T23:08:23+00:00](https://github.com/leanprover-community/mathlib/commit/ee5e9fb15118caa51c9ac78a45840a7f8e23b34b)
feat(data/indicator_function): eq_self_of_superset ([#6829](https://github.com/leanprover-community/mathlib/pull/#6829))

### [2021-03-23T23:08:21+00:00](https://github.com/leanprover-community/mathlib/commit/aadd853d01040cfbb9a6103c87ba948c59f91778)
feat(algebra/category): add more variants of Module.as_hom ([#6822](https://github.com/leanprover-community/mathlib/pull/#6822))

### [2021-03-23T23:08:19+00:00](https://github.com/leanprover-community/mathlib/commit/b6e4d0b95ea8522aeb2f1f158b99c75bbc848e46)
feat(combinatorics/quiver): every connected graph has a spanning tree ([#6806](https://github.com/leanprover-community/mathlib/pull/#6806))

Prove a directed version of the fact that a connected graph has a
spanning tree. The subtree we use is what you would get from 'running a
DFS from the root'. This proof avoids any use of Zorn's lemma. Currently
we have no notion of undirected tree, but once that is in place, this
proof should also give undirected spanning trees.

### [2021-03-23T19:49:37+00:00](https://github.com/leanprover-community/mathlib/commit/315faac5344678338f6ae32c659235146c7b85cd)
feat(data/multiset/basic): generalize rel.mono, rel_map ([#6771](https://github.com/leanprover-community/mathlib/pull/#6771))

### [2021-03-23T19:49:36+00:00](https://github.com/leanprover-community/mathlib/commit/9cda1ff6360a50a772a8d1f34b5d4cd3068f5456)
fix(data/complex/module): kill a non-defeq diamond  ([#6760](https://github.com/leanprover-community/mathlib/pull/#6760))

`restrict_scalars.semimodule ℝ ℂ ℂ  = complex.semimodule` is currently not definitionally true. The PR tweaks the smul definition to make sure that this becomes true. This solves a diamond that appears naturally in https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20%28euclidean_space.20.F0.9D.95.9C.20n%29.60.3F/near/230780186

### [2021-03-23T19:49:35+00:00](https://github.com/leanprover-community/mathlib/commit/9893a26006b5347cee519c1e9e8460e0b01bc41c)
chore(field_theory/splitting_field): module doc and generalise one lemma ([#6739](https://github.com/leanprover-community/mathlib/pull/#6739))

This PR provides a module doc for `field_theory.splitting_field`, which is the last file without module doc in `field_theory`. Furthermore, I took the opportunity of renaming the fields in that file from `\alpha`, `\beta`, `\gamma` to `K`, `L`, `F` to make it more readable for newcomers.

Moved `nat_degree_multiset_prod`, to `algebra.polynomial.big_operators`). In order to get the `no_zero_divisors` instance on `polynomial R`, I had to include `data.polynomial.ring_division` in that file. Furthermore, with the help of Damiano, generalised this lemma to `no_zero_divisors R`.

Coauthored by: Damiano Testa adomani@gmail.com



Co-authored-by: Thomas Browning <tb65536@uw.edu>
Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-03-23T19:49:34+00:00](https://github.com/leanprover-community/mathlib/commit/c521336dfb09896b52bc1bf6b613e978b9a3754c)
feat(data/polynomial/bernstein): identities ([#6470](https://github.com/leanprover-community/mathlib/pull/#6470))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-23T19:49:32+00:00](https://github.com/leanprover-community/mathlib/commit/edfe7e1e7e03e03e7c8c746b53c0fdf2e1b425b9)
feat(combinatorics/simple_graph): degree lemmas ([#5966](https://github.com/leanprover-community/mathlib/pull/#5966))

Proves some lemmas about the minimum/maximum degree of vertices in a graph - also weakens the assumptions for the definitions, following the usual mathlib pattern of defining total functions.

### [2021-03-23T15:29:30+00:00](https://github.com/leanprover-community/mathlib/commit/61ed14e2df76fc2caf88aba43ffa0bea01352654)
lint(*): split long lines ([#6833](https://github.com/leanprover-community/mathlib/pull/#6833))

### [2021-03-23T15:29:29+00:00](https://github.com/leanprover-community/mathlib/commit/78034350c04de48211588e30313165349980283c)
refactor(topology/metric_space/lipschitz): generalize to pseudo_emetric_space ([#6831](https://github.com/leanprover-community/mathlib/pull/#6831))

This is part of a series of PR to introduce `semi_normed_group` in mathlib.

We introduce here Lipschitz maps for `pseudo_emetric_space` (I also improve some theorem name in `topology/metric_space/emetric_space`).

### [2021-03-23T15:29:28+00:00](https://github.com/leanprover-community/mathlib/commit/489f5225e22549ef922f892730c865c3c1e5b9d4)
feat(category_theory/subobject): API for working with inequalities ([#6818](https://github.com/leanprover-community/mathlib/pull/#6818))

This PR adds two types of declarations:
* Helper functions for showing that two subobjects are equal by giving a compatible isomorphism, and
* functions `of_le`/`of_le_mk`/`of_mk_le`/`of_mk_le_mk` that produce a morphism between the underlying objects from a proof of `X ≤ Y`. These are in essence just thin wrappers around `underlying.map`.

### [2021-03-23T15:29:25+00:00](https://github.com/leanprover-community/mathlib/commit/736b1e81782026c41e119e309bd1504f8572c65c)
feat(data/fintype/basic): add decidable_mem_range_fintype ([#6817](https://github.com/leanprover-community/mathlib/pull/#6817))

### [2021-03-23T15:29:24+00:00](https://github.com/leanprover-community/mathlib/commit/c2e9ec02f8299dc0d8ca962dc58fbb1b4b2a38b1)
feat(group_theory/subgroup): add {monoid,add_monoid,ring}_hom.lift_of_right_inverse ([#6814](https://github.com/leanprover-community/mathlib/pull/#6814))

This provides a computable alternative to `lift_of_surjective`.

### [2021-03-23T15:29:23+00:00](https://github.com/leanprover-community/mathlib/commit/5cafdfff422149bbf477865c50e52ca758701b57)
chore(algebra/group/basic): dedup, add a lemma ([#6810](https://github.com/leanprover-community/mathlib/pull/#6810))

* drop `sub_eq_zero_iff_eq`, was a duplicate of `sub_eq_zero`;
* add a `simp` lemma `sub_eq_self : a - b = a ↔ b = 0`.

### [2021-03-23T06:50:41+00:00](https://github.com/leanprover-community/mathlib/commit/94f59d8b3617b67f519bea591b225703b3539966)
feat(ring_theory/polynomial/homogenous): add a `direct_sum.gcomm_monoid` instance ([#6825](https://github.com/leanprover-community/mathlib/pull/#6825))

This also corrects a stupid typo I made in `direct_sum.comm_ring` which was previously declared a `ring`!

### [2021-03-22T23:38:18+00:00](https://github.com/leanprover-community/mathlib/commit/9f56a0bf9c8a50ff12701922a97e238cc668413c)
refactor(tactic/ring): split off `ring_nf` tactic ([#6792](https://github.com/leanprover-community/mathlib/pull/#6792))

[As requested on Zulip.](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ring.20not.20idempotent/near/231178246) This splits the current behavior of `ring` into two tactics:

* `ring1`: closing tactic which solves equations in the goal only
* `ring_nf mode? (at h)?`: simplification tactic which puts ring expressions into normal form

The `ring` tactic will still call `ring1` with `ring_nf` as fallback, as it does currently, but in the latter case it will print a message telling the user to use `ring_nf` instead. The form `ring at h` is removed, because this never uses `ring1` so you should just call `ring_nf` directly.

### [2021-03-22T19:59:29+00:00](https://github.com/leanprover-community/mathlib/commit/a0a21774a8eeead93f2b9bc5368d922ff03c29b3)
feat(data/support): add `function.mul_support` ([#6791](https://github.com/leanprover-community/mathlib/pull/#6791))

This will help us add `finprod` in [#6355](https://github.com/leanprover-community/mathlib/pull/#6355)

### [2021-03-22T16:18:52+00:00](https://github.com/leanprover-community/mathlib/commit/ffca31af5969ff6cd2e2a96c03e1b4f833c6c91d)
feat(linear_algebra): composing with a linear equivalence does not change the image ([#6816](https://github.com/leanprover-community/mathlib/pull/#6816))

I also did some minor reorganisation in order to relax some typeclass arguments.

### [2021-03-22T16:18:51+00:00](https://github.com/leanprover-community/mathlib/commit/e54f63392898bdcc2cba753b76779787b551b09a)
feat(data/finsupp/basic): add `can_lift (α → M₀) (α →₀ M₀)` ([#6777](https://github.com/leanprover-community/mathlib/pull/#6777))

Also add a few missing `simp`/`norm_cast` lemmas.

### [2021-03-22T16:18:49+00:00](https://github.com/leanprover-community/mathlib/commit/480b00c8444d443efd63b35876623405967d9a0d)
feat(algebra/group/type_tags): adding function coercion for `additive` and `multiplicative` ([#6657](https://github.com/leanprover-community/mathlib/pull/#6657))

[As on zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/to_additive.20mismatch/near/230042978)




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-22T10:12:29+00:00](https://github.com/leanprover-community/mathlib/commit/0b543c346948fb2be91c43064f88d2a5c7973dab)
feat(linear_algebra/dual): add dual_annihilator_sup_eq_inf_dual_annihilator ([#6808](https://github.com/leanprover-community/mathlib/pull/#6808))

### [2021-03-22T10:12:28+00:00](https://github.com/leanprover-community/mathlib/commit/f3a4c480cafd6ec2cf58b62dc187ec96d3c21e73)
feat(algebra/subalgebra): missing norm_cast lemmas about operations ([#6790](https://github.com/leanprover-community/mathlib/pull/#6790))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-22T07:20:26+00:00](https://github.com/leanprover-community/mathlib/commit/e7d74ba3e7a7cd267c48754952a1044c5188dda9)
feat(algebra/smul_regular): add `M`-regular elements ([#6659](https://github.com/leanprover-community/mathlib/pull/#6659))

This PR extends PR [#6590](https://github.com/leanprover-community/mathlib/pull/#6590), that is now merged.  The current PR contains the actual API to work with `M`-regular elements `r : R`, called `is_smul_regular M r`.

Zulip:
https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews

From the doc-string:

### Action of regular elements on a module

We introduce `M`-regular elements, in the context of an `R`-module `M`.  The corresponding
predicate is called `is_smul_regular`.

There are very limited typeclass assumptions on `R` and `M`, but the "mathematical" case of interest
is a commutative ring `R` acting an a module `M`. Since the properties are "multiplicative", there
is no actual requirement of having an addition, but there is a zero in both `R` and `M`.
Smultiplications involving `0` are, of course, all trivial.

The defining property is that an element `a ∈ R` is `M`-regular if the smultiplication map
`M → M`, defined by `m ↦ a • m`, is injective.

This property is the direct generalization to modules of the property `is_left_regular` defined in
`algebra/regular`.  Lemma `is_smul_regular.is_left_regular_iff` shows that indeed the two notions
coincide.




Co-authored-by: Vierkantor <vierkantor@vierkantor.com>
Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-03-22T01:19:20+00:00](https://github.com/leanprover-community/mathlib/commit/5be0b0c524095d38509ea9387139629241844b76)
feat(data/finset/basic): add strong_induction and strong_induction_eq ([#6682](https://github.com/leanprover-community/mathlib/pull/#6682))

An alternative to `finset.strong_induction_on` that has an associated equation lemma.

### [2021-03-21T20:45:07+00:00](https://github.com/leanprover-community/mathlib/commit/3f74b10e955fc0a6a5343a1ce6a9661f4aa51bfb)
chore(order/filter/bases): a few more constructors ([#6798](https://github.com/leanprover-community/mathlib/pull/#6798))

### [2021-03-21T15:58:36+00:00](https://github.com/leanprover-community/mathlib/commit/852064aa5a4eba2530e34cf2ef87b674f4f612e4)
refactor(category_theory/subobject): split into smaller files ([#6796](https://github.com/leanprover-community/mathlib/pull/#6796))

No change in content, just splitting into four files.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-21T11:05:45+00:00](https://github.com/leanprover-community/mathlib/commit/5d67033c27f4d77976745395b92000ae3940dc49)
feat(topology/algebra/continuous_functions): missing lemmas ([#6782](https://github.com/leanprover-community/mathlib/pull/#6782))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-21T03:36:01+00:00](https://github.com/leanprover-community/mathlib/commit/a22df9986b1c50e050c7f3eca8aa79fbb2145829)
chore(scripts): update nolints.txt ([#6793](https://github.com/leanprover-community/mathlib/pull/#6793))

I am happy to remove some nolints for you!

### [2021-03-21T03:36:00+00:00](https://github.com/leanprover-community/mathlib/commit/f331648cb4da2b30d339ac19aa946260bfe12c13)
feat(analysis/normed_space): normed_algebra.to_topological_algebra ([#6779](https://github.com/leanprover-community/mathlib/pull/#6779))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-21T03:35:59+00:00](https://github.com/leanprover-community/mathlib/commit/abfddbf87386adccb7a7804e89485538ab8d87c9)
feat(ring_theory): define `left_mul_matrix` and `algebra.trace` ([#6653](https://github.com/leanprover-community/mathlib/pull/#6653))

This PR defines the algebra trace, and the bilinear trace form, for an algebra `S` over a ring `R`, for example a field extension `L / K`.

Follow-up PRs will prove that `algebra.trace K L x` is the sum of the conjugate roots of `x` in `L`, that `trace_form` is nondegenerate and that `trace K L x` is integral over `K`. Then we'll use this to find an integral basis for field extensions, and then we can prove that the integral closure of a Dedekind domain is again a Dedekind domain.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-03-21T03:35:58+00:00](https://github.com/leanprover-community/mathlib/commit/b75ec5cfbe5577595c90d00ff3347ffed6e11795)
feat(data/polynomial): Bernstein polynomials ([#6465](https://github.com/leanprover-community/mathlib/pull/#6465))

The definition of the Bernstein polynomials
`bernstein_polynomial (R : Type*) [ring R] (n ν : ℕ) : polynomial R := (choose n ν) * X^ν * (1 - X)^(n - ν)`
and the fact that for `ν : fin (n+1)` these are linearly independent over `ℚ`.

(Future work: use these to prove Weierstrass' theorem that polynomials are dense in `C([0,1], ℝ)`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-21T03:35:57+00:00](https://github.com/leanprover-community/mathlib/commit/4cc420773ffb5669b7c57ed7c222cac92802fd4d)
feat(algebra/module/linear_map): Add linear_map.iterate ([#6377](https://github.com/leanprover-community/mathlib/pull/#6377))

Co-authored-by: Alex J. Best <alex.j.best@gmail.com>





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-20T23:19:57+00:00](https://github.com/leanprover-community/mathlib/commit/e20c7304ee6febd3078cae55baadfcd9cf771c11)
feat(topology/continuous_map): formulas for sup and inf in terms of abs ([#6720](https://github.com/leanprover-community/mathlib/pull/#6720))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-20T21:36:26+00:00](https://github.com/leanprover-community/mathlib/commit/31531531d8cc82166f488718714c77947c3c9bb4)
feat(measure_theory/interval_integral): add `integral_comp_mul_left` ([#6787](https://github.com/leanprover-community/mathlib/pull/#6787))

I need this lemma for my work toward making integrals computable by `norm_num`.

### [2021-03-20T19:58:20+00:00](https://github.com/leanprover-community/mathlib/commit/240836ae477745eb9940b78bb8c77e9f7ac62390)
feat(analysis/normed_space/basic): generalize submodule.normed_space ([#6766](https://github.com/leanprover-community/mathlib/pull/#6766))

This means that a ℂ-submodule of an ℝ-normed space is still an ℝ-normed space.

There's too much randomness in the profiling for me to tell if this speeds up or slows down `exists_extension_norm_eq`; but it does at least save a line there.

### [2021-03-20T17:42:10+00:00](https://github.com/leanprover-community/mathlib/commit/d6506747229e0a60fdaa1821a6a494f4a40e28f7)
feat(category_theory/subterminal): subterminal category equiv subobjects of terminal ([#6755](https://github.com/leanprover-community/mathlib/pull/#6755))

### [2021-03-20T16:28:06+00:00](https://github.com/leanprover-community/mathlib/commit/86b8f39faefc20432a9a3390bef54dc777c693fd)
doc(docs/overview): Update overview ([#6772](https://github.com/leanprover-community/mathlib/pull/#6772))

Update the overview to mention Abel-Ruffini.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-03-20T16:28:05+00:00](https://github.com/leanprover-community/mathlib/commit/5d7efa03408ea4ee9266888e9ed4e7d73f00e0bf)
feat(combinatorics/quiver): define quivers ([#6680](https://github.com/leanprover-community/mathlib/pull/#6680))

Define quivers (a very permissive notion of graph), subquivers, paths
and arborescences, which are like rooted trees.

This PR comes from https://github.com/dwarn/nielsen-schreier-2 .

### [2021-03-20T15:04:09+00:00](https://github.com/leanprover-community/mathlib/commit/df4c9c95a3a65be89f6d3d98dd009dcdacb60175)
chore(ring_theory/adjoin/basic): golf some proofs about algebra.adjoin ([#6784](https://github.com/leanprover-community/mathlib/pull/#6784))

### [2021-03-20T13:24:55+00:00](https://github.com/leanprover-community/mathlib/commit/9f77db21d953865662595a054766855abb62c923)
chore(topology/metric_space): add '@[continuity]' attributes ([#6780](https://github.com/leanprover-community/mathlib/pull/#6780))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-20T10:08:03+00:00](https://github.com/leanprover-community/mathlib/commit/695d7f4f058b8b10ed89ba5b049723132c8467d6)
refactor(algebraic_topology/simplex_category): Make simplex_category universe polymorphic. ([#6761](https://github.com/leanprover-community/mathlib/pull/#6761))

This PR changes the definition of `simplex_category` so that it becomes universe polymorphic.
This is useful when we want to take (co)limits of simplicial objects indexed by categories constructed out of `simplex_category`.
This PR also makes a small wrapper around morphisms in `simplex_category` for hygiene purposes, and introduces a notation `X _[n]` for the n-th term of a simplicial object X.

Note: this PR makes `simplex_category` and `simplex_category.hom` irreducible.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-20T10:08:02+00:00](https://github.com/leanprover-community/mathlib/commit/4db82a406fbb2d8324933d232f4ddbf417f6240b)
refactor(category_theory/cones): golf and cleanup cones ([#6756](https://github.com/leanprover-community/mathlib/pull/#6756))

No mathematical content here, basically just golfing and tidying in preparation for future PRs.

### [2021-03-20T10:08:00+00:00](https://github.com/leanprover-community/mathlib/commit/56e5aa749640f438c9b87b6d6766d99da6fe9fc7)
feat(category_theory/closed): currying rfl lemmas ([#6754](https://github.com/leanprover-community/mathlib/pull/#6754))

Add `rfl` lemmas for currying

### [2021-03-20T09:08:36+00:00](https://github.com/leanprover-community/mathlib/commit/b0150a5d9eff2f2c39f5a4b699fdf0ecad3ee852)
fix(analysis/special_functions/integrals): move lemmas out of namespace ([#6778](https://github.com/leanprover-community/mathlib/pull/#6778))

Some lemmas should not have been moved into a namespace, so I fix that here.

### [2021-03-20T03:08:13+00:00](https://github.com/leanprover-community/mathlib/commit/26fcfbc9cf56b9cdb11c179c7ff9c8ca0a4674e2)
feat(topology): continuous_pi_iff pi.has_continuous_mul pi.topological_group ([#6689](https://github.com/leanprover-community/mathlib/pull/#6689))

### [2021-03-20T01:57:36+00:00](https://github.com/leanprover-community/mathlib/commit/07282da62b6f175c38aa2ad12ac267d70c0fed70)
chore(scripts): update nolints.txt ([#6776](https://github.com/leanprover-community/mathlib/pull/#6776))

I am happy to remove some nolints for you!

### [2021-03-19T22:17:14+00:00](https://github.com/leanprover-community/mathlib/commit/b4a2991c44c94d02df37c785b46262102353914e)
feat(dynamics/ergodic): define measure preserving maps ([#6764](https://github.com/leanprover-community/mathlib/pull/#6764))

Also prove some missing lemmas about measures.

### [2021-03-19T22:17:13+00:00](https://github.com/leanprover-community/mathlib/commit/eba4829bca56e0bb465ec893415847b049d4fe26)
feat(data/real/pi): Wallis product for pi ([#6568](https://github.com/leanprover-community/mathlib/pull/#6568))



Co-authored-by: hrmacbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2021-03-19T19:07:52+00:00](https://github.com/leanprover-community/mathlib/commit/c65146d6508bc4b7b7f796c7c789cd05f06c20ec)
chore(data/finset/basic): erase_inj_on ([#6769](https://github.com/leanprover-community/mathlib/pull/#6769))

Quick follow-up to [#6737](https://github.com/leanprover-community/mathlib/pull/#6737)

### [2021-03-19T19:07:51+00:00](https://github.com/leanprover-community/mathlib/commit/2d2929f8cf49c3263e2e538d2e48df1387829808)
feat(measure_theory): define Hausdorff measure and Hausdorff dimension ([#6710](https://github.com/leanprover-community/mathlib/pull/#6710))

### [2021-03-19T17:15:52+00:00](https://github.com/leanprover-community/mathlib/commit/152412fff345af4301fd73e2f4f4cb4fc863abe5)
feat(analysis/special_functions/exp_log): log_nonzero_of_ne_one and log_inj_pos ([#6734](https://github.com/leanprover-community/mathlib/pull/#6734))

log_nonzero_of_ne_one and log_inj_pos

Proves : 
 * When `x > 0`, `log(x)` is `0` iff `x = 1`
 * The real logarithm is injective (when restraining the domain to the positive reals)



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-19T17:15:51+00:00](https://github.com/leanprover-community/mathlib/commit/6f3e0ad17f50d125136580eb3c4b5f116bd9ad91)
feat(ring_theory/multiplicity): Multiplicity with units ([#6729](https://github.com/leanprover-community/mathlib/pull/#6729))

Renames `multiplicity.multiplicity_unit` into `multiplicity.is_unit_left`.

Adds : 
 * `multiplicity.is_unit_right`
 * `multiplicity.unit_left`
 * `multiplicity.unit_right`



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-19T14:35:20+00:00](https://github.com/leanprover-community/mathlib/commit/591c34b6f59f9bf4629a3edd0568744d0ae5b04a)
refactor(linear_algebra/basic): move the lattice structure to its own file ([#6767](https://github.com/leanprover-community/mathlib/pull/#6767))

The entire lattice structure is thoroughly uninteresting.
By moving it to its own shorter file, it should be easier to unify with the lattice of `submonoid`

I'd hope in future we can generate this automatically for any `subobject A` with an injection into `set A`.

### [2021-03-19T12:51:59+00:00](https://github.com/leanprover-community/mathlib/commit/ce107da58aac87efb99e729044e6b420aa1a9a0c)
feat(analysis/special_functions/integrals): integrating linear combinations of functions ([#6597](https://github.com/leanprover-community/mathlib/pull/#6597))

Together with [#6357](https://github.com/leanprover-community/mathlib/pull/#6357), this PR makes it possible to compute integrals of the form `∫ x in a..b, c * f x + d * g x` by `simp` (where `c` and `d` are constants and `f` and `g` are functions that are `interval_integrable` on `interval a b`.

Notably, this allows us to compute the integrals of polynomials by `norm_num`. Here's an example, followed by an example of a more random linear combination of `interval_integrable` functions:
```
import analysis.special_functions.integrals
open interval_integral real
open_locale real

example : ∫ x:ℝ in 0..2, 6*x^5 + 3*x^4 + x^3 - 2*x^2 + x - 7 = 1048 / 15 := by norm_num

example : ∫ x:ℝ in 0..1, exp x + 9 * x^8 + x^3 - x/2 + (1 + x^2)⁻¹ = exp 1 + π/4 := by norm_num
```

### [2021-03-19T09:01:18+00:00](https://github.com/leanprover-community/mathlib/commit/590f43db91071eb3134fef935ec9d7cd2a3bd4ce)
docs(category_theory): missing module docs ([#6752](https://github.com/leanprover-community/mathlib/pull/#6752))

Module docs for a number of files under `category_theory/`.

This is largely a "low hanging fruit" selection; none of the files are particularly complicated.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-19T09:01:17+00:00](https://github.com/leanprover-community/mathlib/commit/c1701287cc604efc28c045937833c2c66a91c3d7)
feat(number_theory/bernoulli): faulhaber' ([#6684](https://github.com/leanprover-community/mathlib/pull/#6684))

This deduces an alternative form `faulhaber'` of Faulhaber's theorem from `faulhaber`. In this version, we 

1. sum over `1` to `n` instead of `0` to `n - 1` and
2. use `bernoulli'` instead of `bernoulli`.
Arguably, this is the more common form one finds Faulhaber's theorem in the literature. 



Co-authored-by: Moritz Firsching <firsching@google.com>
Co-authored-by: Benjamin Davidson <68528197+benjamindavidson@users.noreply.github.com>

### [2021-03-19T09:01:16+00:00](https://github.com/leanprover-community/mathlib/commit/86e1b1750461f5dff99468c59b60cf1bf383e40b)
feat(field_theory/abel_ruffini): solvable by radicals implies solvable Galois group ([#6631](https://github.com/leanprover-community/mathlib/pull/#6631))

Proves the theoretical part of insolvability of the quintic. We still need to exhibit a specific polynomial with non-solvable Galois group



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-03-19T06:00:11+00:00](https://github.com/leanprover-community/mathlib/commit/62d532a7a997f5dcbc9575816679b3a7dc72f406)
feat(data/finset): erase is partially injective ([#6737](https://github.com/leanprover-community/mathlib/pull/#6737))

Show that erase is partially injective, ie that if `s.erase x = s.erase y` and `x` is in `s`, then `x = y`.

### [2021-03-19T03:43:24+00:00](https://github.com/leanprover-community/mathlib/commit/a1305bea38c6c114807bac61f35b06b17655fb59)
chore(scripts): update nolints.txt ([#6763](https://github.com/leanprover-community/mathlib/pull/#6763))

I am happy to remove some nolints for you!

### [2021-03-18T23:42:19+00:00](https://github.com/leanprover-community/mathlib/commit/cc11e44c1560da70a54a0ad8df654375004be3ad)
ci(*): lint 'Authors: ' line ([#6750](https://github.com/leanprover-community/mathlib/pull/#6750))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-18T23:42:17+00:00](https://github.com/leanprover-community/mathlib/commit/c3e40bef9f11498519106fa1c10c43dace941023)
feat(data/equiv/local_equiv): define `piecewise` and `disjoint_union` ([#6700](https://github.com/leanprover-community/mathlib/pull/#6700))

Also change some lemmas to use `set.ite`.

### [2021-03-18T19:27:39+00:00](https://github.com/leanprover-community/mathlib/commit/02f77ab9a1c763af82026fe1328bae1aed3ed13d)
doc(field_theory/normal): Add authors ([#6759](https://github.com/leanprover-community/mathlib/pull/#6759))

Adds Patrick Lutz and I as authors to normal.lean. The last three-quarters of the file are from our work on Abel-Ruffini.

https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Author.20on.20normal.2Elean.3F

### [2021-03-18T19:27:37+00:00](https://github.com/leanprover-community/mathlib/commit/aea7dfbce0c73b74073495ab34bbe0b93ea2c839)
chore(algebra/char_p/basic): weaken assumptions integral_domain --> semiring+ ([#6753](https://github.com/leanprover-community/mathlib/pull/#6753))

Taking advantage of the `no_zero_divisors` typeclass, the assumptions on some of the results can be weakened.

### [2021-03-18T19:27:36+00:00](https://github.com/leanprover-community/mathlib/commit/a10bc3d345ee7b37bad22d759029cf5a251f3fed)
feat(normed_space/inner_product): euclidean_space.norm_eq ([#6744](https://github.com/leanprover-community/mathlib/pull/#6744))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-03-18T19:27:35+00:00](https://github.com/leanprover-community/mathlib/commit/e1ff2dffa8d0879638c401b41837653493541768)
chore(*): update `injective` lemma names to match the naming guide ([#6740](https://github.com/leanprover-community/mathlib/pull/#6740))

In `src/algebra/group_ring_action.lean`:
- `injective_to_semiring_hom` -> `to_semiring_hom_injective`

In `src/algebra/module/linear_map.lean`:
- `linear_equiv.injective_to_equiv` -> `linear_equiv.to_equiv_injective`
- `linear_equiv.injective_to_linear_map` -> `linear_equiv.to_linear_map_injective`

In `src/analysis/normed_space/enorm.lean`:
- `enorm.injective_coe_fn` -> `enorm.coe_fn_injective`

In `src/data/equiv/basic.lean`:
- `equiv.injective_coe_fn` -> `equiv.coe_fn_injective`

In `src/data/real/nnreal.lean`:
- `nnreal.injective_coe` -> `nnreal.coe_injective`

In `src/data/sum.lean`:
- `sum.injective_inl` -> `sum.inl_injective`
- `sum.injective_inr` -> `sum.inr_injective`

In `src/linear_algebra/affine_space/affine_equiv.lean`:
- `affine_equiv.injective_to_affine_map` -> `affine_equiv.to_affine_map_injective`
- `affine_equiv.injective_coe_fn` -> `affine_equiv.coe_fn_injective`
- `affine_equiv.injective_to_equiv` -> `affine_equiv.to_equiv_injective`

In `src/linear_algebra/affine_space/affine_map.lean`:
- `affine_map.injective_coe_fn` -> `affine_map.coe_fn_injective`

In `src/measure_theory/outer_measure.lean`:
- `measure_theory.outer_measure.injective_coe_fn` -> `measure_theory.outer_measure.coe_fn_injective`

In `src/order/rel_iso.lean`:
- `rel_iso.injective_to_equiv` -> `rel_iso.to_equiv_injective`
- `rel_iso.injective_coe_fn` -> `rel_iso.coe_fn_injective`

In `src/topology/algebra/module.lean`:
- `continuous_linear_map.injective_coe_fn` -> `continuous_linear_map.coe_fn_injective`

### [2021-03-18T19:27:33+00:00](https://github.com/leanprover-community/mathlib/commit/83b0981bc7dbf8c8811c47cd9a678a232b1ee70b)
feat(ring_theory/polynomial): the symmetric and homogenous polynomials form a subalgebra and submodules, respectively ([#6666](https://github.com/leanprover-community/mathlib/pull/#6666))

This adds:

* the new definitions:
  * `mv_polynomial.homogeneous_submodule σ R n`, defined as the `{ x | x.is_homogeneous n }`
  * `mv_polynomial.symmetric_subalgebra σ R`, defined as the `{ x | x.is_symmetric }`
* simp lemmas to reduce membership of the above to the `.is_*` form
* `mv_polynomial.homogenous_submodule_mul` a statement about the product of homogenous submodules
* `mv_polynomial.homogenous_submodule_eq_finsupp_supported` a statement that we already have a different definition of homogenous submodules elsewhere

All the other proofs have just been moved around the files.

### [2021-03-18T13:48:35+00:00](https://github.com/leanprover-community/mathlib/commit/744d59af0b28d0c42f631038627df9b85ae1d1ce)
refactor(category_theory/limits): split file ([#6751](https://github.com/leanprover-community/mathlib/pull/#6751))

This splits `category_theory.limits.limits` into
`category_theory.limits.is_limit` and `category_theory.limits.has_limits`.

It doesn't meaningfully reduce imports, as everything imports `has_limits`, but in principle it could, and hopefully it makes the content slightly easier to understand when separated.

In any case, the file was certainly too large.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-18T13:48:34+00:00](https://github.com/leanprover-community/mathlib/commit/58581d0fe523063f5651df0619be2bf65012a94a)
chore(*): normalize Authors: line ([#6749](https://github.com/leanprover-community/mathlib/pull/#6749))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-18T13:48:33+00:00](https://github.com/leanprover-community/mathlib/commit/542ff6af862e486824147b69da4c6c0d5200f99b)
refactor(algebra/algebra/basic): change submodule.restrict_scalars to use is_scalar_tower ([#6745](https://github.com/leanprover-community/mathlib/pull/#6745))

### [2021-03-18T13:48:32+00:00](https://github.com/leanprover-community/mathlib/commit/59cda3bbdada64223b5f758b96a75e3c3863df09)
feat(algebra/associated): Primes that divide each other are associated ([#6732](https://github.com/leanprover-community/mathlib/pull/#6732))

Primes that divide each other are associated

### [2021-03-18T13:48:31+00:00](https://github.com/leanprover-community/mathlib/commit/db2a972df9c450f6bfe252cbae3a5f8af4946ed3)
feat(ring_theory/principal_ideal_domain): The generator of a principal prime ideal is a prime ([#6731](https://github.com/leanprover-community/mathlib/pull/#6731))

The generator of a principal prime ideal is a prime

### [2021-03-18T13:48:30+00:00](https://github.com/leanprover-community/mathlib/commit/b4afd642aae635e87bd204b9bab89ef54e46bdc7)
feat(data/padics/padic_norm): p-adic norm of primes other than p ([#6730](https://github.com/leanprover-community/mathlib/pull/#6730))

The p-adic norm of `q` is `1` if `q` is another prime than `p`.

### [2021-03-18T09:41:26+00:00](https://github.com/leanprover-community/mathlib/commit/216aecd75a04760cc5204acba3bd3f567590fecf)
feat(group_theory/quaternion_group): define the (generalised) quaternion groups ([#6683](https://github.com/leanprover-community/mathlib/pull/#6683))

This PR introduces the generalised quaternion groups and determines the orders of its elements.



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-03-18T06:07:05+00:00](https://github.com/leanprover-community/mathlib/commit/8116851f8f5c6017bedc8e356f74b42cf4f25adf)
doc(category_theory): convert comments about universes to library note ([#6748](https://github.com/leanprover-community/mathlib/pull/#6748))

### [2021-03-18T04:45:13+00:00](https://github.com/leanprover-community/mathlib/commit/e955a6bdb61c43975b79a3e484001c0ac572553c)
chore(scripts): update nolints.txt ([#6747](https://github.com/leanprover-community/mathlib/pull/#6747))

I am happy to remove some nolints for you!

### [2021-03-18T03:01:54+00:00](https://github.com/leanprover-community/mathlib/commit/9b8d41a30cf0e9f58582b33d996ba6a18f099e30)
feat(ring_theory/finiteness): add transitivity of finite presentation ([#6640](https://github.com/leanprover-community/mathlib/pull/#6640))

This adds transitivity of finite presentation (for rings). I think we now have a basic API for finitely presented algebras.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-17T23:52:47+00:00](https://github.com/leanprover-community/mathlib/commit/804b0edeba7eb99f81a44bb9a38614ed3ce448c0)
chore(data/mv_polynomial/basic): add coeff_smul to match coeff_add etc ([#6742](https://github.com/leanprover-community/mathlib/pull/#6742))

### [2021-03-17T22:49:08+00:00](https://github.com/leanprover-community/mathlib/commit/30b34552cb2b25b935c25e1ba33b7d3b7e0c87c8)
feat(ring_theory/roots_of_unity): Restrict ring homomorphism to roots of unity ([#6646](https://github.com/leanprover-community/mathlib/pull/#6646))

Restrict a ring homomorphism to roots of unity.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-03-17T19:18:34+00:00](https://github.com/leanprover-community/mathlib/commit/9507a34f13545e81292d4de9ca8019eebed88698)
chore(category_theory/limits/creates): fix typo in docstring ([#6738](https://github.com/leanprover-community/mathlib/pull/#6738))

### [2021-03-17T19:18:33+00:00](https://github.com/leanprover-community/mathlib/commit/6e1143ab250c07a903a886b6bd4b1015272c7709)
chore(combinatorics/simple_graph): remove bad simp attribute ([#6736](https://github.com/leanprover-community/mathlib/pull/#6736))

As in https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/symmetry.20fails.20if.20simple.20graph.20is.20imported.

### [2021-03-17T19:18:32+00:00](https://github.com/leanprover-community/mathlib/commit/ce8a6ca05cd0dca2403b45d1b2ac831d8f516540)
refactor(data/multiset/basic): consistently use 'nsmul' in names ([#6735](https://github.com/leanprover-community/mathlib/pull/#6735))

### [2021-03-17T19:18:31+00:00](https://github.com/leanprover-community/mathlib/commit/7e82bba0410c48550b2f4a4efc1cdcc9a996c3b4)
feat(algebra/module/submodule): add `smul_of_tower_mem` ([#6712](https://github.com/leanprover-community/mathlib/pull/#6712))

This adds the lemmas:

* `sub_mul_action.smul_of_tower_mem`
* `submodule.smul_of_tower_mem`

And uses them to construct the new scalar actions:

* `sub_mul_action.mul_action'`
* `sub_mul_action.is_scalar_tower`
* `submodule.semimodule'`
* `submodule.is_scalar_tower`

With associated lemmas

* `sub_mul_action.coe_smul_of_tower`
* `submodule.coe_smul_of_tower`

The unprimed instance continue to hold their old values, and exist to speed up typeclass search; the same pattern we use for `tensor_product.semimodule` vs `tensor_product.semimodule`.



Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2021-03-17T19:18:29+00:00](https://github.com/leanprover-community/mathlib/commit/4ae81c2ff3cba3acd7e4483c31ede2abced9ab67)
feat(bounded_continuous_function): transport structure to C(α, β) when α compact ([#6701](https://github.com/leanprover-community/mathlib/pull/#6701))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-17T19:18:25+00:00](https://github.com/leanprover-community/mathlib/commit/0b0fd52852a9bbfc7552933fcd7f1b7a92808335)
chore(analysis/normed_space/extend): provide a version without restrict_scalars ([#6693](https://github.com/leanprover-community/mathlib/pull/#6693))

This is some pre-work to try and speed up the proof in `hahn_banach`, which as I understand it is super slow because it has to work very hard to unify typeclass which keep switching back and forth between `F` and `restrict_scalars ℝ 𝕜 F`. 

This PR is unlikely to have changed the speed of that proof, but I suspect these definitions might help in a future PR - and it pushes `restrict_scalars` out of the interesting bit of the proof.

### [2021-03-17T19:18:22+00:00](https://github.com/leanprover-community/mathlib/commit/6db70c982f461eb4c25a42af67bf058775cc94fb)
refactor(linear_algebra/determinant): refactor proof of upper_two_block_triangular_det ([#6690](https://github.com/leanprover-community/mathlib/pull/#6690))

Refactored the proof of upper_two_block_triangular_det (to use sum_congr_hom.range) following a suggestion from Eric Wieser (during PR review of [#6050](https://github.com/leanprover-community/mathlib/pull/#6050)).

Co-authored-by: paulvanwamelen <30371019+paulvanwamelen@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-17T19:18:19+00:00](https://github.com/leanprover-community/mathlib/commit/41191815a6b4aecf8156cf1ea7168256f9a51e34)
feat(measure_theory/l2_space): L2 is an inner product space ([#6596](https://github.com/leanprover-community/mathlib/pull/#6596))

If `E` is an inner product space, then so is `Lp E 2 µ`, with inner product being the integral of the inner products between function values.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-03-17T19:18:17+00:00](https://github.com/leanprover-community/mathlib/commit/fb28eac0a02f4bbd335e8009e7380c2f2cc80223)
feat(number_theory/bernoulli): Faulhaber's theorem ([#6409](https://github.com/leanprover-community/mathlib/pull/#6409))

Co-authored-by Fabian Kruse




Co-authored-by: Moritz Firsching <firsching@google.com>
Co-authored-by: Benjamin Davidson <68528197+benjamindavidson@users.noreply.github.com>

### [2021-03-17T16:20:31+00:00](https://github.com/leanprover-community/mathlib/commit/83a4b8b990907291421de54a78988c024dc8a552)
chore(group_theory/subgroup): fix typo in docstring ([#6722](https://github.com/leanprover-community/mathlib/pull/#6722))

### [2021-03-17T16:20:30+00:00](https://github.com/leanprover-community/mathlib/commit/73922b54f46f4e76fd09d1353a273c84bc87526b)
feat(data/zsqrtd/basic): add some lemmas about conj, norm ([#6715](https://github.com/leanprover-community/mathlib/pull/#6715))

### [2021-03-17T12:41:30+00:00](https://github.com/leanprover-community/mathlib/commit/1f50530ae3e2f601ba6858ab42baf34ce1d5e5a1)
feat(data/set/intervals/image_preimage, algebra/ordered_monoid): new typeclass for interval bijection lemmas ([#6629](https://github.com/leanprover-community/mathlib/pull/#6629))

This commit introduces a ``has_exists_add_of_le`` typeclass extending ``ordered_add_comm_monoid``; is the assumption needed so that additively translating an interval gives a bijection. We then prove this fact for all flavours of interval. 

https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Correct.20setting.20for.20positive.20shifts.20of.20intervals

Co-authored-by: Peter Nelson <71660771+apnelson1@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-17T10:17:23+00:00](https://github.com/leanprover-community/mathlib/commit/134531919073f222674d273a91389a559aad0f88)
feat(ring_theory/algebraic data/real/irrational): add a proof that a transcendental real number is irrational ([#6721](https://github.com/leanprover-community/mathlib/pull/#6721))


Zulip:
https://leanprover.zulipchat.com/#narrow/stream/263328-triage

### [2021-03-17T10:17:22+00:00](https://github.com/leanprover-community/mathlib/commit/4b1d5886c32a31dc41663122781d86bbd191f2c9)
chore(linear_algebra/determinant): redefine det using multilinear_map.alternatization ([#6708](https://github.com/leanprover-community/mathlib/pull/#6708))

This slightly changes the definitional unfolding of `matrix.det` (moving a function application outside a sum and adjusting the version of int-multiplication used).

By doing this, a large number of proofs become a trivial application of a more general statement about alternating maps.

`det_row_multilinear` already existed prior to this commit, but now `det` is defined in terms of it instead of the other way around.
We still need both, as otherwise we would break `M.det` dot notation, as `det_row_multilinear` does not have its argument expressed as a matrix.

### [2021-03-17T10:17:21+00:00](https://github.com/leanprover-community/mathlib/commit/84933f12a9ebd021d43358a7014e97070c8e68a0)
feat(ring_theory/polynomial): Pochhammer polynomials ([#6598](https://github.com/leanprover-community/mathlib/pull/#6598))

# The Pochhammer polynomials

We define and prove some basic relations about
`pochhammer S n : polynomial S = X * (X+1) * ... * (X + n - 1)`
which is also known as the rising factorial.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-17T08:30:54+00:00](https://github.com/leanprover-community/mathlib/commit/861f5946b8d147733b10f95ae068d96c41bcc6b2)
feat(field_theory/normal): Tower of solvable extensions is solvable ([#6643](https://github.com/leanprover-community/mathlib/pull/#6643))

This is the key lemma that makes Abel-Ruffini work.

### [2021-03-17T08:30:53+00:00](https://github.com/leanprover-community/mathlib/commit/6f6b548b2c2f2d54785630b097e474345ccac848)
refactor(group_theory/order_of_element): now makes sense for infinite monoids ([#6587](https://github.com/leanprover-community/mathlib/pull/#6587))

This PR generalises `order_of` from finite groups to (potentially infinite) monoids. By convention, the value of `order_of` for an element of infinite order is `0`. This is non-standard for the order of an element, but agrees with the convention that the characteristic of a field is `0` if `1` has infinite additive order. It also enables to remove the assumption `0<n` for some lemmas about orders of elements of the dihedral group, which by convention is also the infinite dihedral group for `n=0`.

The whole file has been restructured to take into account that `order_of` now makes sense for monoids. There is still an open issue about adding [to_additive], but this should be done in a seperate PR. Also, some results could be generalised with assumption `0 < order_of a` instead of finiteness of the whole group.



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-17T05:36:54+00:00](https://github.com/leanprover-community/mathlib/commit/3e7a56ee66a21fa3539b9dab6b8a0dbd3100decf)
feat(tactic/norm_num): support for nat.cast + int constructors ([#6235](https://github.com/leanprover-community/mathlib/pull/#6235))

This adds support for the functions `nat.cast`, `int.cast`, `rat.cast`
as well as `int.to_nat`, `int.nat_abs` and the constructors of int
 `int.of_nat` and `int.neg_succ_of_nat`, at least in their simp-normal
 forms.

### [2021-03-17T03:47:21+00:00](https://github.com/leanprover-community/mathlib/commit/d292fd7e9bbf1e01a38ccbbdcbc64aa4c8a35b36)
refactor(topology/metric_space/basic): add pseudo_metric ([#6716](https://github.com/leanprover-community/mathlib/pull/#6716))

This is the natural continuation of [#6694](https://github.com/leanprover-community/mathlib/pull/#6694): we introduce here `pseudo_metric_space`.

Note that I didn't do anything fancy, I only generalize the results that work out of the box for pseudometric spaces (quite a lot indeed).

It's possible that there is some duplicate code, especially in the section about products.

### [2021-03-17T02:56:43+00:00](https://github.com/leanprover-community/mathlib/commit/3936f5fdc065a73b6ca9ba03ca1d673850948b57)
chore(scripts): update nolints.txt ([#6719](https://github.com/leanprover-community/mathlib/pull/#6719))

I am happy to remove some nolints for you!

### [2021-03-17T01:14:27+00:00](https://github.com/leanprover-community/mathlib/commit/b9ccb8fa68401144d44bf35463856478e2cd11d5)
feat(algebraic_topology/simplicial_objects + ...): Truncated simplicial objects + skeleton ([#6711](https://github.com/leanprover-community/mathlib/pull/#6711))

This PR adds truncated simplicial objects and the skeleton functor (aka the truncation functor).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-17T01:14:26+00:00](https://github.com/leanprover-community/mathlib/commit/87c12abdb3b37d09debf927a66014c2dc1b48327)
feat(topology/continuous_map): lattice structures ([#6706](https://github.com/leanprover-community/mathlib/pull/#6706))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-16T21:43:26+00:00](https://github.com/leanprover-community/mathlib/commit/40a0ac77b704cef7896ed28d37e05f8ebd2555b2)
chore(linear_algebra/finite_dimensional): change instance ([#6713](https://github.com/leanprover-community/mathlib/pull/#6713))

With the new instance `finite_dimensional K K` Lean can deduce the old instance automatically. I don not completely understand why it needs the new instance (`apply_instance` proves it), probably this is related to the order of unfolding `finite_dimensional` and applying `is_noetherian` instances.

### [2021-03-16T21:43:25+00:00](https://github.com/leanprover-community/mathlib/commit/177020e487a2ea03ec8ab3f24cf05f38dc985fb9)
feat(topology/separation): `(closure s).subsingleton ↔ s.subsingleton` ([#6707](https://github.com/leanprover-community/mathlib/pull/#6707))

Also migrate `set.subsingleton_of_image` to `set.subsingleton`.

### [2021-03-16T21:43:23+00:00](https://github.com/leanprover-community/mathlib/commit/890066ac5a5fd56a95391ab8907ddb7029ff3cb5)
feat(measure_theory/measure_space): define `quasi_measure_preserving` ([#6699](https://github.com/leanprover-community/mathlib/pull/#6699))

* add `measurable.iterate`
* move section about `measure_space` up to make `volume_tac` available
  much earlier;
* add `map_of_not_measurable`;
* drop assumption `measurable f` in `map_mono`;
* add `tendsto_ae_map`;
* more API about `absolutely_continuous`;
* define `quasi_measure_preserving` and prove some properties.

### [2021-03-16T21:43:22+00:00](https://github.com/leanprover-community/mathlib/commit/f5f42bc940753a5736026441dcc3a83580b1e340)
chore(*): update to Lean 3.28.0c ([#6691](https://github.com/leanprover-community/mathlib/pull/#6691))




Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2021-03-16T21:43:21+00:00](https://github.com/leanprover-community/mathlib/commit/a116025ea3f141ed83a6b29a927f30253d28f12c)
feat(geometry/manifold/mfderiv): more lemmas ([#6679](https://github.com/leanprover-community/mathlib/pull/#6679))

* move section `mfderiv_fderiv` up, add aliases;
* rename old `unique_mdiff_on.unique_diff_on` to `unique_mdiff_on.unique_diff_on_target_inter`;
* add a section about `continuous_linear_map`;
* more lemmas about `model_with_corners`;
* add lemmas about `ext_chart_at`.

### [2021-03-16T21:43:20+00:00](https://github.com/leanprover-community/mathlib/commit/214b8e84f98a08c2080b9ebb1ced17926c45d57f)
feat(topology/algebra): more on closure ([#6675](https://github.com/leanprover-community/mathlib/pull/#6675))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-16T19:18:11+00:00](https://github.com/leanprover-community/mathlib/commit/8d8c35600803f284eca67b337f32186fd6087e9e)
chore(ring_theory/noetherian): add `fg_span` and `fg_span_singleton` ([#6709](https://github.com/leanprover-community/mathlib/pull/#6709))

### [2021-03-16T19:18:09+00:00](https://github.com/leanprover-community/mathlib/commit/f221bfd8f1979cb9219635abd2d9f10bb447b8c9)
feat(data/polynomial/degree/definitions): leading_coeff_X_pow_sub_C ([#6633](https://github.com/leanprover-community/mathlib/pull/#6633))

Lemma for the leading coefficient of `X ^ n - C r`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-03-16T19:18:08+00:00](https://github.com/leanprover-community/mathlib/commit/81dabdafe838e17354a7141dce1c32086dd87c5f)
feat(data/buffer/parser/*): expand parser properties ([#6339](https://github.com/leanprover-community/mathlib/pull/#6339))

Add several new properties to parsers:
`static`
`err_static`
`step`
`prog`
`bounded`
`unfailing`
`conditionally_unfailing`.

Most of these properties hold cleanly for existing core parsers, and are provided as classes. This allows nice derivation for any parsers that are made using parser combinators.

This PR is towards proving that the `nat` parser provides the maximal possible natural.

Other API lemmas are introduced for `string`, `buffer`, `char`, and `array`.

### [2021-03-16T16:06:27+00:00](https://github.com/leanprover-community/mathlib/commit/03a6c95d5d2336d4be63cdc0b1463571ba45718a)
chore(ring_theory/ideal): use `ideal.mul_mem_left` instead of `ideal.smul_mem` ([#6704](https://github.com/leanprover-community/mathlib/pull/#6704))

Lots of proofs are relying on the fact that mul and smul are defeq, but this makes them hard to follow, as the goal state never contains the smul referenced by these lemmas.

### [2021-03-16T16:06:26+00:00](https://github.com/leanprover-community/mathlib/commit/d9fbe9d257602c95e9e27af159cd0589afff684e)
chore(geometry/manifold/times_cont_mdiff_map): add `times_cont_mdiff_map.mdifferentiable` ([#6703](https://github.com/leanprover-community/mathlib/pull/#6703))

### [2021-03-16T16:06:25+00:00](https://github.com/leanprover-community/mathlib/commit/ffacd1208b212f7c8632477b7cd834bf5f658c98)
feat(algebra/iterate_hom): add `equiv.perm.coe_pow` ([#6698](https://github.com/leanprover-community/mathlib/pull/#6698))

Also rewrite `equiv.perm.perm_group` in a more explicit manner.

### [2021-03-16T16:06:23+00:00](https://github.com/leanprover-community/mathlib/commit/900963cd0a7781b1397e8064afef557c5b8f42a1)
refactor(topology/metric_space/emetric_space): add pseudo_emetric ([#6694](https://github.com/leanprover-community/mathlib/pull/#6694))

Working on the Liquid Tensor Experiment, we realize we need seminorms ~~pseudonorms~~ (meaning we don't require `∥x∥ = 0 → x = 0`). For this reason I would like to include seminorms, pseudometric and pseudoemetric to mathlib. (We currently have `premetric_space`, my plan is to change the name to `pseudometric_space`, that seems to be the standard terminology.)

I started modifying `emetric_space` since it seems the more fundamental (looking at the structure of the imports). What I did here is to define a new class `pseudo_emetric_space`, generalize almost all the results about `emetric_space` to this case (I mean, all the results that are actually true) and at the end of the file I defined `emetric_space` and prove the remaining results. It is the first time I did a refactor like this, so I probably did something wrong, but at least it compiles on my computer.

I don't know why one proof in `measure_theory/ae_eq_fun_metric.lean` stopped working, the same proof in tactic mode works.

### [2021-03-16T10:12:38+00:00](https://github.com/leanprover-community/mathlib/commit/22eba86cc73839d73456469c25b30495681f043b)
feat(*): add some missing `coe_*` lemmas ([#6697](https://github.com/leanprover-community/mathlib/pull/#6697))

* add `submonoid.coe_pow`, `submonoid.coe_list_prod`,
  `submonoid.coe_multiset_prod`, `submonoid.coe_finset_prod`,
  `subring.coe_pow`, `subring.coe_nat_cast`, `subring.coe_int_cast`;
* add `rat.num_div_denom`;
* add `inv_of_pow`.

### [2021-03-16T10:12:37+00:00](https://github.com/leanprover-community/mathlib/commit/57de126a11c235fff4bb776ee219f57543d2bc0c)
refactor(category_theory/limits): use auto_param ([#6696](https://github.com/leanprover-community/mathlib/pull/#6696))

Add an `auto_param`, making it slightly more convenient when build limits of particular shapes first, then all limits.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-16T10:12:36+00:00](https://github.com/leanprover-community/mathlib/commit/c0036af24595f39fdd12f82433973de48a91c7d7)
feat(category/is_iso): make is_iso a Prop ([#6662](https://github.com/leanprover-community/mathlib/pull/#6662))

Perhaps long overdue, this makes `is_iso` into a Prop.

It hasn't been a big deal, as it was always a subsingleton. Nevertheless this is probably safer than carrying data around in the typeclass inference system. 

As a side effect `simple` is now a Prop as well.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-16T06:30:41+00:00](https://github.com/leanprover-community/mathlib/commit/6669a28585c48effc2f74e8cda0ee8d20ec850ce)
feat(algebraic_topology/simplicial_object + ...): Add has_limits + has_colimits instances ([#6695](https://github.com/leanprover-community/mathlib/pull/#6695))

This PR adds `has_limits` and `has_colimits` instances for the category of simplicial objects (assuming the existence of such an instance for the base category). The category of simplicial sets now has both limits and colimits, and we include a small example of a simplicial set (the circle) constructed as a colimit.

This PR also includes the following two components, which were required for the above:

1. A basic API for working with `ulift C` where `C` is a category. This was required to avoid some annoying universe issues in the definitions of `has_colimits` and `has_limits`.
2. A small shim that transports a `has_(co)limit` instance along an equivalence of categories.




Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2021-03-16T06:30:40+00:00](https://github.com/leanprover-community/mathlib/commit/6d7d16988b660a6e1bf4b2475039d3b677d776e1)
feat(topology): More lemmas from LTE, refactor `is_totally_disconnected` to use `set.subsingleton` ([#6673](https://github.com/leanprover-community/mathlib/pull/#6673))

From the liquid tensor experiment

### [2021-03-16T04:37:30+00:00](https://github.com/leanprover-community/mathlib/commit/0176b42272657bdfbb017e9e0d7ded363c157d1e)
feat(ring_theory/finiteness): add `mv_polynomial_of_finite_presentation` ([#6512](https://github.com/leanprover-community/mathlib/pull/#6512))

Add `mv_polynomial_of_finite_presentation`: the polynomial ring over a finitely presented algebra is finitely presented.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-16T03:41:52+00:00](https://github.com/leanprover-community/mathlib/commit/afe38ca125a2fd6ef47a07214394eac767733e6e)
chore(scripts): update nolints.txt ([#6702](https://github.com/leanprover-community/mathlib/pull/#6702))

I am happy to remove some nolints for you!

### [2021-03-15T22:29:25+00:00](https://github.com/leanprover-community/mathlib/commit/f1b69a1250a30aff931e1e5c50c2470bd05a8d26)
feat(linear_algebra/quadratic_form): add nondegenerate_of_anisotropic ([#6692](https://github.com/leanprover-community/mathlib/pull/#6692))

### [2021-03-15T22:29:23+00:00](https://github.com/leanprover-community/mathlib/commit/ddb4617720c3ff2c8f4bef1f71ef04898f71d5e2)
refactor(topology/metric_space/isometry): move Kuratowski embedding to another file ([#6678](https://github.com/leanprover-community/mathlib/pull/#6678))

This reduces the import dependencies of `topology.metric_space.isometry`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-03-15T22:29:22+00:00](https://github.com/leanprover-community/mathlib/commit/cc48a5a446f2b2a5e96ca8bba046d951c7260829)
feat(geometry/manifold/diffeomorph): expand API ([#6668](https://github.com/leanprover-community/mathlib/pull/#6668))

### [2021-03-15T22:29:21+00:00](https://github.com/leanprover-community/mathlib/commit/bd386a8f491350ba3deac8695fb9d30e9169d6b5)
feat(measure_theory/outer_measure): golf, add lemmas ([#6664](https://github.com/leanprover-community/mathlib/pull/#6664))

* `Union_of_tendsto_zero`, `Union_nat_of_monotone_of_tsum_ne_top`, `of_function_union_of_separated`:
  supporting lemmas for the upcoming definition of the Hausdorff
  measure (and more generally metric outer measures).
* `ext_nonempty`, `smul_supr`, `map_sup`, `map_supr`, `comap_supr`,
  `restrict_univ`, `restrict_empty`, `restrict_supr`, `map_comap`,
  `map_comap_le`, `map_comap_of_surjective`, `restrict_le_self`,
  `map_le_restrict_range`, `le_comap_map`, `comap_map`, `comap_top`,
  `top_apply'`, `map_top`, `map_top_of_surjective`: new API lemmas
  about `map`/`comap`/`restrict` and `sup`/`supr`/`top`;
* `is_greatest_of_function`, `of_function_eq_Sup`,
`comap_of_function`, `map_of_function_le`, `map_of_function`,
restrict_of_function`, `smul_of_function`: new lemmas about
`of_function`;
* `Inf_apply'`: a version of `Inf_apply` that assumes that another set
is nonempty;
* `infi_apply`, `infi_apply'`, `binfi_apply`, `binfi_apply'`,
`map_infi_le`, `comap_infi`, `map_infi`, `map_infi_comap`,
`map_binfi_comap`, `restrict_infi_restrict`, `restrict_infi`,
`restrict_binfi`: new lemmas about `map`/`comap`/`restrict` and
`Inf`/`infi`;
* `extend_congr`: `infi_congr_Prop` specialized for `extend`; why this
is not a `congr` lemma?
* `le_induced_outer_measure`: `le_of_function` for
`induced_outer_measure`;
* `trim_le_trim` → `trim_mono`: rename, use `monotone`;
* `exists_measurable_superset_forall_eq_trim`: a version of
`exists_measurable_superset_eq_trim` that works for countable families
of measures;
* `trim_binop`, `trim_op`: new helper lemmas to golf `trim_add` etc;
* `trim_sup`, `trim_supr`: new lemmas about `trim`.
* `map_mono`, `comap_mono`, `mono''`, `restrict_mono`, `trim_mono`:
`@[mono]` lemmas.

### [2021-03-15T18:15:30+00:00](https://github.com/leanprover-community/mathlib/commit/c358676b2f428d993277a31439a30c335ee7b6ce)
feat(meta/expr): monadic analogue of expr.replace ([#6661](https://github.com/leanprover-community/mathlib/pull/#6661))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-15T18:15:29+00:00](https://github.com/leanprover-community/mathlib/commit/3ec8c1d47713ffa0e1dae7072f8dc5810ef4d2ba)
feat(algebra/direct_sum_graded): a direct_sum formed of powers of a submodule of an algebra inherits a ring structure ([#6550](https://github.com/leanprover-community/mathlib/pull/#6550))

This also fixes some incorrect universe parameters to the `of_submodules` constructors.

### [2021-03-15T17:06:11+00:00](https://github.com/leanprover-community/mathlib/commit/d9dc30e5754176e4c2c9ce36b3757f28ea72eb1c)
feat(algebra/free): turn `free_magma.lift` into an equivalence ([#6672](https://github.com/leanprover-community/mathlib/pull/#6672))

This will be convenient for some work I have in mind and is more consistent with the pattern used elsewhere, such as:

- [`free_algebra.lift`](https://leanprover-community.github.io/mathlib_docs/algebra/free_algebra.html#free_algebra.lift)
- [`monoid_algebra.lift`](https://leanprover-community.github.io/mathlib_docs/algebra/monoid_algebra.html#monoid_algebra.lift)
- [`universal_enveloping.lift`](https://leanprover-community.github.io/mathlib_docs/algebra/lie/universal_enveloping.html#universal_enveloping_algebra.lift)
- ...

### [2021-03-15T15:39:13+00:00](https://github.com/leanprover-community/mathlib/commit/ae776282dfec46239f9dbe9f7b26ccdd7889a54f)
chore(geometry/manifold/times_cont_mdiff): add `prod_mk_space` versions of `prod_mk` lemmas ([#6681](https://github.com/leanprover-community/mathlib/pull/#6681))

These lemmas are useful when dealing with maps `f : M → E' × F'` where
`E'` and `F'` are normed spaces. This means some code duplication with
`prod_mk` lemmas but I see no way to avoid this without making proofs
about `M → E' × F'` longer/harder.

### [2021-03-15T12:40:53+00:00](https://github.com/leanprover-community/mathlib/commit/e16ae246c073b5e5642477ff4fb56e7592fd6130)
doc(readme): add Eric Wieser to maintainer list ([#6688](https://github.com/leanprover-community/mathlib/pull/#6688))

### [2021-03-15T12:40:52+00:00](https://github.com/leanprover-community/mathlib/commit/b5f38321efc2ada105c106e2f7867f95b864331b)
feat(topology/metric_space): introduce `is_metric_separated` ([#6685](https://github.com/leanprover-community/mathlib/pull/#6685))

### [2021-03-15T12:40:51+00:00](https://github.com/leanprover-community/mathlib/commit/90db6fccdf87493af24e9fa3ff6897741c035f45)
feat(analysis/calculus/times_cont_diff): smoothness of `f : E → Π i, F i` ([#6674](https://github.com/leanprover-community/mathlib/pull/#6674))

Also add helper lemmas/definitions about multilinear maps.

### [2021-03-15T09:03:13+00:00](https://github.com/leanprover-community/mathlib/commit/1f47833ef9a065a9f787f352c2fcd2a7626b74c3)
feat(algebra/*, * : [regular, smul_with_zero, module/basic]): introduce `mul_action_with_zero` and `M`-regular elements ([#6590](https://github.com/leanprover-community/mathlib/pull/#6590))

This PR has been split and there are now two separate PRs.

* [#6590](https://github.com/leanprover-community/mathlib/pull/#6590), this one, introducing `smul_with_zero` and `mul_action_with_zero`: two typeclasses to deal with multiplicative actions of `monoid_with_zero`, without the need to assume the presence of an addition!
* [#6659](https://github.com/leanprover-community/mathlib/pull/#6659), introducing `M`-regular elements, called `smul_regular`: the analogue of `is_left_regular`, but defined for an action of `monoid_with_zero` on a module `M`.


This PR is a preparation for introducing `M`-regular elements.

From the doc-string:

### Introduce `smul_with_zero`

In analogy with the usual monoid action on a Type `M`, we introduce an action of a `monoid_with_zero` on a Type with `0`.

In particular, for Types `R` and `M`, both containing `0`, we define `smul_with_zero R M` to be the typeclass where the products `r • 0` and `0 • m` vanish for all `r ∈ R` and all `m ∈ M`.

Moreover, in the case in which `R` is a `monoid_with_zero`, we introduce the typeclass `mul_action_with_zero R M`, mimicking group actions and having an absorbing `0` in `R`.  Thus, the action is required to be compatible with

* the unit of the monoid, acting as the identity;
* the zero of the monoid_with_zero, acting as zero;
* associativity of the monoid.

Next, in a separate file, I introduce `M`-regular elements for a `monoid_with_zero R` with a `mul_action_with_zero` on a module `M`.  The definition is simply to require that an element `a : R` is `M`-regular if the smultiplication `M → M`, given by `m ↦ a • m` is injective.

We also prove some basic facts about `M`-regular elements.

The PR further changes three further the files

* `data/polynomial/coeffs`;
* `topology/algebra/module.lean`;
* `analysis/normed_space/bounded_linear_maps`.

The changes are prompted by a failure in CI.  In each case, the change was tiny, mostly having to do with an exchange of a multiplication by a smultiplication or vice-versa.



Co-authored-by: Vierkantor <vierkantor@vierkantor.com>
Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-03-15T09:03:12+00:00](https://github.com/leanprover-community/mathlib/commit/abf2ab4d5bd090bd6a91370d7fa0b6a86214be02)
feat(linear_algebra/quadratic_form): associated bilinear form over noncommutative rings ([#6585](https://github.com/leanprover-community/mathlib/pull/#6585))

The `associated` bilinear form to a quadratic form is currently constructed for commutative rings, but nearly the same construction works without a commutativity hypothesis (the only part that fails is that the operation of performing the construction is now an `add_monoid_hom` rather than a `linear_map`.  I provide this construction, naming it `associated'`.

Needed for [#5814](https://github.com/leanprover-community/mathlib/pull/#5814) (not exactly a dependency since we can merge a non-optimal version of that PR before this one is merged).



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-15T07:04:07+00:00](https://github.com/leanprover-community/mathlib/commit/249fd4f29c9eaf82230cedfbd79e64b6d78c6248)
refactor(data/polynomial,ring_theory): use big operators for polynomials ([#6616](https://github.com/leanprover-community/mathlib/pull/#6616))

This untangles some more definitions on polynomials from finsupp.  This uses the same approach as in [#6605](https://github.com/leanprover-community/mathlib/pull/#6605).

### [2021-03-15T01:08:57+00:00](https://github.com/leanprover-community/mathlib/commit/c5796c7bbcb717d5d7e50c5f9f59aab2877bd78a)
chore(scripts): update nolints.txt ([#6686](https://github.com/leanprover-community/mathlib/pull/#6686))

I am happy to remove some nolints for you!

### [2021-03-14T15:45:18+00:00](https://github.com/leanprover-community/mathlib/commit/0a16148c452052e085533e2b995421a571208dd6)
feat(measure_theory/lp_space): add snorm_norm_rpow ([#6619](https://github.com/leanprover-community/mathlib/pull/#6619))

The lemma `snorm_norm_rpow` states `snorm (λ x, ∥f x∥ ^ q) p μ = (snorm f (p * ennreal.of_real q) μ) ^ q`.

Also add measurability lemmas about pow/rpow.

### [2021-03-14T12:22:07+00:00](https://github.com/leanprover-community/mathlib/commit/feab14bc7d2f8ac256f9e758502a37b9d1785d51)
fix(algebra/continued_fractions): fix import ([#6677](https://github.com/leanprover-community/mathlib/pull/#6677))

Just fix an import

### [2021-03-14T10:50:39+00:00](https://github.com/leanprover-community/mathlib/commit/b48cf1716e6e8b1233a171f2d88c453251280f4f)
feat(linear_algebra/alternating): Add dom_coprod ([#5269](https://github.com/leanprover-community/mathlib/pull/#5269))

This implements a variant of the multiplication defined in the second half of [Proposition 22.24 of "Notes on Differential Geometry and Lie Groups" (Jean Gallier)](https://www.cis.upenn.edu/~cis610/diffgeom-n.pdf):

![image](https://user-images.githubusercontent.com/425260/104042315-3dfe7380-51d2-11eb-9b3a-bbbb52d180f0.png)

### [2021-03-14T06:52:22+00:00](https://github.com/leanprover-community/mathlib/commit/b52337a5f216da36ff38cedb63a3932056505644)
feat(topology/algebra/group): Add two easy lemmas ([#6669](https://github.com/leanprover-community/mathlib/pull/#6669))

A topological group is discrete as soon as {1} is open.
The closure of a subgroup is a subgroup.

From the liquid tensor experiment.

### [2021-03-14T03:22:20+00:00](https://github.com/leanprover-community/mathlib/commit/464d04af8d25017b6d38ee28312c706973ca7d8d)
feat(data/nat/fincard): introduce `nat.card`, `enat.card` ([#6670](https://github.com/leanprover-community/mathlib/pull/#6670))

Defines `nat`- and `enat`-valued cardinality functions.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-03-14T03:22:18+00:00](https://github.com/leanprover-community/mathlib/commit/70662e1c53659c8dcf74492ef9a6bdc096247e9e)
chore(data/rat/basic): a few trivial lemmas about `rat.denom` ([#6667](https://github.com/leanprover-community/mathlib/pull/#6667))

### [2021-03-14T03:22:18+00:00](https://github.com/leanprover-community/mathlib/commit/69d713415cada129799c3270fafb0797cf8ac033)
feat(topology/basic): `f =ᶠ[𝓝 a] 0` iff `a ∉ closure (support f)` ([#6665](https://github.com/leanprover-community/mathlib/pull/#6665))

Also add `equiv.image_symm_image` and `function.compl_support`.

### [2021-03-14T03:22:17+00:00](https://github.com/leanprover-community/mathlib/commit/c928e34d247c9582744705872bd4c446ba901bc5)
feat(data/real/ennreal,topology/*): assorted lemmas ([#6663](https://github.com/leanprover-community/mathlib/pull/#6663))

* add `@[simp]` to `ennreal.coe_nat_lt_coe_nat` and `ennreal.coe_nat_le_coe_nat`;
* add `ennreal.le_of_add_le_add_right`;
* add `set.nonempty.preimage`;
* add `ennreal.infi_mul_left'` and `ennreal.infi_mul_right'`;
* add `ennreal.tsum_top`;
* add `emetric.diam_closure`;
* add `edist_pos`;
* add `isometric.bijective`, `isometric.injective`, and `isometric.surjective`.

### [2021-03-14T03:22:15+00:00](https://github.com/leanprover-community/mathlib/commit/1e9f6646ed195081e3ef2ef55b5513c1fd66d31d)
refactor(ring_theory/discrete_valuation_ring): `discrete_valuation_ring.add_val` as an `add_valuation` ([#6660](https://github.com/leanprover-community/mathlib/pull/#6660))

Refactors `discrete_valuation_ring.add_val` to be an `enat`-valued `add_valuation`.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-03-14T03:22:14+00:00](https://github.com/leanprover-community/mathlib/commit/d61d8bfe58f0ab696e0bf9d80363d4d996a5b42e)
feat(measure_theory/bochner_integration): extend the integral_smul lemmas ([#6654](https://github.com/leanprover-community/mathlib/pull/#6654))

Extend the `integral_smul` lemmas to multiplication of a function `f : α → E` with scalars in `𝕜` with `[nondiscrete_normed_field 𝕜] [normed_space 𝕜 E] [smul_comm_class ℝ 𝕜 E]` instead of only `ℝ`.

### [2021-03-14T03:22:13+00:00](https://github.com/leanprover-community/mathlib/commit/a8af8e882afa0a1964ff2b9c6653b06264f11b2d)
feat(polynomial/algebra_map): aeval_algebra_map_apply ([#6649](https://github.com/leanprover-community/mathlib/pull/#6649))

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>



Co-authored-by: Moritz Firsching <firsching@google.com>

### [2021-03-14T03:22:12+00:00](https://github.com/leanprover-community/mathlib/commit/3e011d6625316ccd1347928427ce9f3e4c5cd59a)
chore(equiv/*): add missing lemmas to traverse coercion diamonds ([#6648](https://github.com/leanprover-community/mathlib/pull/#6648))

These don't have a preferred direction, but there are cases when they are definitely needed.

The conversion paths commute as squares:
```
`→+` <-- `→+*` <-- `→ₐ[R]`
 ^         ^          ^
 |         |          |
`≃+` <-- `≃+*` <-- `≃ₐ[R]`
```
so we only need lemmas to swap within each square.

### [2021-03-14T03:22:11+00:00](https://github.com/leanprover-community/mathlib/commit/a3050f423bc8c11e484349d640eeb8c846047198)
feat(group_theory/order_of_element): Endomorphisms of cyclic groups ([#6645](https://github.com/leanprover-community/mathlib/pull/#6645))

If G is cyclic then every group homomorphism G -> G is a power map.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-03-14T03:22:10+00:00](https://github.com/leanprover-community/mathlib/commit/b23e14de6888a1270f1d1170bb4675608f5e5114)
feat(data/polynomial/eval): prod_comp ([#6644](https://github.com/leanprover-community/mathlib/pull/#6644))

Extend `mul_comp` to `multiset.prod`

### [2021-03-14T03:22:09+00:00](https://github.com/leanprover-community/mathlib/commit/d5563aea7a21f477369381e691102e64af998650)
feat(group_theory/solvable): Solvability preserved by short exact sequences ([#6632](https://github.com/leanprover-community/mathlib/pull/#6632))

Proves that if 0 -> A -> B -> C -> 0 is a short exact sequence of groups, and if A and C are both solvable, then so is B.

### [2021-03-14T03:22:08+00:00](https://github.com/leanprover-community/mathlib/commit/ade8889a3478cb4049fd8dce10a40e560065b42d)
feat(algebra/algebra/basic): An algebra isomorphism induces a group isomorphism between automorphism groups ([#6622](https://github.com/leanprover-community/mathlib/pull/#6622))

Constructs the group isomorphism induced from an algebra isomorphism.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-03-14T00:42:57+00:00](https://github.com/leanprover-community/mathlib/commit/552ebeb0def26484cdf049b5ba451d45b6671d22)
feat(algebra/continued_fractions): add convergence theorem  ([#6607](https://github.com/leanprover-community/mathlib/pull/#6607))

1. Add convergence theorem for continued fractions, i.e. `(gcf.of v).convergents` converges to `v`. 
2. Add some simple corollaries following from the already existing approximation lemmas for continued fractions, e.g. the equivalence of the convergent computations for continued fractions computed by `gcf.of` (`(gcf.of v).convergents` and `(gcf.of v).convergents'`).

### [2021-03-14T00:42:55+00:00](https://github.com/leanprover-community/mathlib/commit/a7410df0f10df4a2289b972fcbd0dfe6f5b9c567)
feat(analysis/calculus/tangent_cone): add `unique_diff_on.pi` ([#6577](https://github.com/leanprover-community/mathlib/pull/#6577))

### [2021-03-14T00:42:54+00:00](https://github.com/leanprover-community/mathlib/commit/1b0db8e3a7d47561c3d74c0673416660cc5f64ab)
feat(order/well_founded_set, ring_theory/hahn_series): `hahn_series.add_val` ([#6564](https://github.com/leanprover-community/mathlib/pull/#6564))

Defines `set.is_wf.min` in terms of `well_founded.min`
Places an `add_valuation`, `hahn_series.add_val`, on `hahn_series`



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-03-14T00:42:53+00:00](https://github.com/leanprover-community/mathlib/commit/0c26cea20540e2fe26631278d812f6e032386840)
feat(order/filter/cofinite): a growing function has a minimum ([#6556](https://github.com/leanprover-community/mathlib/pull/#6556))

If `tendsto f cofinite at_top`, then `f` has a minimal element. 

Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-03-14T00:42:52+00:00](https://github.com/leanprover-community/mathlib/commit/19ecff8b533cf85a63f10d7ca1c90d67f6289336)
feat(topology/algebra/nonarchimedean): added nonarchimedean groups and rings ([#6551](https://github.com/leanprover-community/mathlib/pull/#6551))

Adding nonarchimedean topological groups and rings.

### [2021-03-14T00:42:51+00:00](https://github.com/leanprover-community/mathlib/commit/ae33fb09a94c9c6a229510e2d2816f6104375972)
feat(group_theory/submonoid/operations): add eq_top_iff' ([#6536](https://github.com/leanprover-community/mathlib/pull/#6536))

### [2021-03-14T00:42:50+00:00](https://github.com/leanprover-community/mathlib/commit/f4c4d107a3fa85a27b0f27c14c7ca0c9193f880b)
feat(probability_theory/independence): prove equivalences for indep_set ([#6242](https://github.com/leanprover-community/mathlib/pull/#6242))

Prove the following equivalences on `indep_set`, for measurable sets `s,t` and a probability measure `µ` :
* `indep_set s t μ ↔ μ (s ∩ t) = μ s * μ t`,
* `indep_set s t μ ↔ indep_sets {s} {t} μ`.

In `indep_sets.indep_set_of_mem`, we use those equivalences to obtain `indep_set s t µ` from `indep_sets S T µ` and `s ∈ S`, `t ∈ T`.



Co-authored-by: mzinkevi <martinz@google.com>
Co-authored-by: mzinkevi <41597957+mzinkevi@users.noreply.github.com>

### [2021-03-13T21:18:31+00:00](https://github.com/leanprover-community/mathlib/commit/c277752838407b835d869a75630876367d1055cb)
feat(algebra/group/defs, data/nat/basic): some `ne` lemmas ([#6637](https://github.com/leanprover-community/mathlib/pull/#6637))

`≠` versions of `mul_left_inj`, `mul_right_inj`, and `succ_inj`, as well as the lemma `succ_succ_ne_one`.

### [2021-03-13T21:18:30+00:00](https://github.com/leanprover-community/mathlib/commit/468b8ffd2654b2e08856e9c5582baf7642f194a9)
feat(field_theory/polynomial_galois_group): instances of trivial Galois group ([#6634](https://github.com/leanprover-community/mathlib/pull/#6634))

This PR adds a bunch of instances where the Galois group of a polynomial is trivial.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-03-13T21:18:29+00:00](https://github.com/leanprover-community/mathlib/commit/ba6b6899f9c6f0ca1512b923ae68214236f3bef2)
feat(field_theory/intermediate_field): coe_pow ([#6626](https://github.com/leanprover-community/mathlib/pull/#6626))

### [2021-03-13T15:08:17+00:00](https://github.com/leanprover-community/mathlib/commit/e6819d3a89e550615469e426dc4f2776068e9ef2)
feat(algebra/group_power/lemmas): add invertible_of_pow_eq_one ([#6658](https://github.com/leanprover-community/mathlib/pull/#6658))

### [2021-03-13T01:18:53+00:00](https://github.com/leanprover-community/mathlib/commit/ff8c8f58fbe433a89847be07665cc68978db978f)
fix(tactic/norm_num): perform cleanup even if norm_num fails ([#6655](https://github.com/leanprover-community/mathlib/pull/#6655))

[As reported on Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/norm_num.20fails.20when.20simp.20is.20too.20effective/near/230004826).

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-12T14:44:38+00:00](https://github.com/leanprover-community/mathlib/commit/f54f81c0c4faacd6fa6fb2c7194ec1f248c87043)
refactor(algebra/invertible): push deeper into the import graph ([#6650](https://github.com/leanprover-community/mathlib/pull/#6650))

I want to be able to import this in files where we use `is_unit`, to remove a few unecessary non-computables.

This moves all the lemmas about `char_p` and `char_zero` from `algebra.invertible` to `algebra.char_p.invertible`. This means that we can talk about `invertible` elements without having to build up the theory in `order_of_element` first.

This doesn't change any lemma statements or proofs, but it does move some type arguments into `variables` statements.

### [2021-03-12T08:19:11+00:00](https://github.com/leanprover-community/mathlib/commit/85c6a799e4eb547f4a314e973479d8ebaf186768)
feat(measure_theory/lp_space): Lp is complete ([#6563](https://github.com/leanprover-community/mathlib/pull/#6563))

Prove the completeness of `Lp` by showing that Cauchy sequences of `ℒp` have a limit.



Co-authored-by: RemyDegenne <Remydegenne@gmail.com>

### [2021-03-12T04:45:09+00:00](https://github.com/leanprover-community/mathlib/commit/dae047edc45af5954ebbb413304bec1ab2056949)
feat(data/polynomial/*): more lemmas, especially for noncommutative rings ([#6599](https://github.com/leanprover-community/mathlib/pull/#6599))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-12T01:21:10+00:00](https://github.com/leanprover-community/mathlib/commit/b852648931446c800e0ee892b98d6d640ec0eb77)
chore(scripts): update nolints.txt ([#6651](https://github.com/leanprover-community/mathlib/pull/#6651))

I am happy to remove some nolints for you!

### [2021-03-12T00:18:01+00:00](https://github.com/leanprover-community/mathlib/commit/2dabe5af7ee219673ea62df34e0199ee6d3c6585)
feat(.docker): Docker containers for debian, alpine, and gitpod ([#6515](https://github.com/leanprover-community/mathlib/pull/#6515))

# Docker containers

The `.docker` directory contains instructions for building Docker containers
with Lean and mathlib.

## Build

You can build these containers using `scripts/docker_build.sh`.
This will result in the creation of two containers:

* `leanprovercommunity/lean` - contains elan, lean, and leanproject
* `leanprovercommunity/mathlib` - additionally contains a copy of mathlib, with oleans

In fact, for each container you'll get three different tags, `:debian`, `:alpine` and `:latest`.
`:debian` and `:alpine` use those respective distributions, and `:latest` just points at `:debian`.
Finally, there is also a `leanprovercommunity/mathlib:gitpod` for use at
[https://gitpod.io/](https://gitpod.io/).

## Usage

### gitpod.io

There is a container based on `gitpod/workspace-base`
enabling [https://gitpod.io/](https://gitpod.io/) to create in-browser VSCode sessions
with elan/lean/leanproject/mathlib already set up.

Either prepend `https://gitpod.io/#` to basically any URL at github, e.g.
[https://gitpod.io/#https://github.com/leanprover-community/mathlib/tree/docker](https://gitpod.io/#https://github.com/leanprover-community/mathlib/tree/docker),
or install a [gitpod browser extension](https://www.gitpod.io/docs/browser-extension/)
which will add buttons directly on github.

### Command line

You can use these containers as virtual machines:

```sh
docker run -it leanprovercommunity/mathlib
```

### Docker registry

These containers are deployed to the Docker registry, so anyone can just
`docker run -it leanprovercommunity/mathlib` to get a local lean+mathlib environment.

There is a local script in `scripts/docker_push.sh` for deployment,
but I have also set up `hub.docker.com` to watch the `docker` branch for updates
and automatically rebuild.

If this PR is merged to master we should change that to watch `master`.

### Remote containers for VSCode

Installing the `Remote - Containers` VSCode extension
will allow you to open a project inside the `leanprovercommunity/mathlib` container
(meaning you don't even need a local copy of lean installed).

The file `/.devcontainer/devcontainer.json` sets this up:
if you have the extension installed, you'll be prompted to ask if you'd like to run inside the
container, no configuration necessary.


Co-authored-by: Alex J. Best <alex.j.best@gmail.com>



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-11T22:32:31+00:00](https://github.com/leanprover-community/mathlib/commit/b1aafb20f0543db5eeca42a0b827f59a5add1d4b)
fix (topology/algebra/basic): fix universe issue with of_nhds_one ([#6647](https://github.com/leanprover-community/mathlib/pull/#6647))

Everything had type max{u v} before.

### [2021-03-11T17:09:38+00:00](https://github.com/leanprover-community/mathlib/commit/4d8d344cf9428038c6ee38ba603a78425666ae0e)
feat(data/multiset/basic): Multiset induction lemma ([#6623](https://github.com/leanprover-community/mathlib/pull/#6623))

This is the multiset analog of `finset.induction_on'`

### [2021-03-11T17:09:36+00:00](https://github.com/leanprover-community/mathlib/commit/bd3695ac3a21139d63bac69069e63c50801529bf)
feat(data/complex/is_R_or_C): add linear maps for is_R_or_C.re, im, conj and of_real ([#6621](https://github.com/leanprover-community/mathlib/pull/#6621))

Add continuous linear maps and linear isometries (when applicable) for the following `is_R_or_C` functions: `re`, `im`, `conj` and `of_real`.
Rename the existing continuous linear maps defined in complex.basic to adopt the naming convention of is_R_or_C.



Co-authored-by: Rémy Degenne <remydegenne@gmail.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-03-11T17:09:35+00:00](https://github.com/leanprover-community/mathlib/commit/998a382727127a7b768d629f7ec8f6710f7a5891)
feat(topology/algebra/infinite_sum): add `tsum_even_add_odd` ([#6620](https://github.com/leanprover-community/mathlib/pull/#6620))

Prove `∑' i, f (2 * i) + ∑' i, f (2 * i + 1) = ∑' i, f i` and some
supporting lemmas.

### [2021-03-11T17:09:34+00:00](https://github.com/leanprover-community/mathlib/commit/95a8e958e655dee8f2a0065a0cc1f5d508e45759)
refactor(data/{,mv_}polynomial): support function ([#6615](https://github.com/leanprover-community/mathlib/pull/#6615))

With polynomials, we try to avoid the function coercion in favor of the `coeff` functions.  However the coercion easily leaks through the abstraction because of the `finsupp.mem_support_iff` lemma.

This PR adds the `polynomial.support` and `mv_polynomial.support` functions.  This allows us to define the `polynomial.mem_support_iff` and `mv_polynomial.mem_support_iff` lemmas that are stated in terms of `coeff`.

### [2021-03-11T17:09:33+00:00](https://github.com/leanprover-community/mathlib/commit/f5c9d0f48c017892c8bba680186ff8948620becc)
feat(topology/algebra/ordered): generalize `real.compact_Icc` ([#6602](https://github.com/leanprover-community/mathlib/pull/#6602))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-03-11T13:28:38+00:00](https://github.com/leanprover-community/mathlib/commit/3b3a8b559ef32b6fb7f4ca71edc40ae73f9df6cb)
fix(normed_space/multilinear): speed up slow proof ([#6639](https://github.com/leanprover-community/mathlib/pull/#6639))

This proof seems to be right on the edge of timing out and has been causing CI issues.

I'm not sure if this is the only culprit. This whole file is very slow. Is this because of recent changes, or has it always been like this?



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-03-11T13:28:36+00:00](https://github.com/leanprover-community/mathlib/commit/3d451c706c80ff0e785d33efa314735bd014b686)
chore(tactic/interactive): propagate tags in `substs` ([#6638](https://github.com/leanprover-community/mathlib/pull/#6638))

Before this change, the `case left` tactic here did not work:
```lean
example {α : Type*} (a b c : α) (h : a = b) : (a = b ∨ a = c) ∧ true :=
begin
  with_cases {apply and.intro},
  substs' h,
  case left : { exact or.inl rfl },
  case right : { trivial }
end
```

### [2021-03-11T13:28:35+00:00](https://github.com/leanprover-community/mathlib/commit/9beec03c8e3de76f72c30f1ae3e571798dfd3154)
feat(group_theory/subgroup): le_ker_iff ([#6630](https://github.com/leanprover-community/mathlib/pull/#6630))

A subgroup is contained in the kernel iff it is mapped to the trivial subgroup.

### [2021-03-11T13:28:33+00:00](https://github.com/leanprover-community/mathlib/commit/57fda28fc376ecee03c9f2ccdf48806115946519)
refactor(data/polynomial/degree/definitions): Remove hypothesis of nat_degree_X_pow_sub_C ([#6628](https://github.com/leanprover-community/mathlib/pull/#6628))

The lemma `nat_degree_X_pow_sub_C ` had an unnecessary hypothesis.

### [2021-03-11T13:28:32+00:00](https://github.com/leanprover-community/mathlib/commit/41f11966a0cf44d9ce1360cfeee90944219a047f)
feat(field_theory/polynomial_galois_group): ext lemma ([#6627](https://github.com/leanprover-community/mathlib/pull/#6627))

Two elements of `gal p` are equal if they agree on all roots of `p`

### [2021-03-11T13:28:31+00:00](https://github.com/leanprover-community/mathlib/commit/3dd125739cce1978d1beda0fda63c99972a41837)
feat(group_theory/solvable): Commutative groups are solvable ([#6625](https://github.com/leanprover-community/mathlib/pull/#6625))

In practice, `is_solvable_of_comm` is hard to use, since you often aren't working with a `comm_group`. Instead, it is much nicer to be able to write:
`apply is_solvable_of_comm'`
`intros g h`

### [2021-03-11T13:28:30+00:00](https://github.com/leanprover-community/mathlib/commit/2c4a9855239503f90eabe46ae58cf5e0b5eec7ee)
feat(field_theory/splitting_field): splits_pow ([#6624](https://github.com/leanprover-community/mathlib/pull/#6624))

If a polynomial splits then so do its powers.

### [2021-03-11T13:28:29+00:00](https://github.com/leanprover-community/mathlib/commit/653fd2924cfcfe32b200c2465468c563c077e55c)
refactor(topology): make is_closed a class ([#6552](https://github.com/leanprover-community/mathlib/pull/#6552))

In `lean-liquid`, it would be useful that `is_closed` would be a class, to be able to infer a normed space structure on `E/F` when `F` is a closed subspace of a normed space `E`. This is implemented in this PR. This is mostly straightforward: the only proofs that need fixing are those abusing defeqness, so the new version makes them clearer IMHO.

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-03-11T11:19:18+00:00](https://github.com/leanprover-community/mathlib/commit/56065f7e1b9f41f8e902187fd31cb06206e5aad7)
feat(measure_theory/pi_system) lemmas for pi_system, useful for independence. ([#6353](https://github.com/leanprover-community/mathlib/pull/#6353))

The goal here is to prove that the expectation of a product of an finite number of independent random variables equals the production of the expectations.

See https://github.com/leanprover-community/mathlib/tree/mzinkevi_independent_finite_alt




Co-authored-by: mzinkevi <41597957+mzinkevi@users.noreply.github.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-03-11T06:05:43+00:00](https://github.com/leanprover-community/mathlib/commit/925ea07d1f6de50802e0f7854110c26bfe0cf142)
feat(linear_algebra/basic): add missing lemma finsupp.sum_smul_index_linear_map' ([#6565](https://github.com/leanprover-community/mathlib/pull/#6565))

See also [this Zulip conversation](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Sum.20is.20linear/near/229021943). cc @eric-wieser 

Co-authored-by: Adam Topaz <github@adamtopaz.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-11T05:06:41+00:00](https://github.com/leanprover-community/mathlib/commit/b7c5709daf9bb256e2852e14e01477840b70323d)
chore(geometry/manifold): use notation `𝓘(𝕜, E)` ([#6636](https://github.com/leanprover-community/mathlib/pull/#6636))

### [2021-03-11T02:48:51+00:00](https://github.com/leanprover-community/mathlib/commit/514973a9a6a587c422d82b3aaa9c487ba7b84650)
chore(scripts): update nolints.txt ([#6635](https://github.com/leanprover-community/mathlib/pull/#6635))

I am happy to remove some nolints for you!

### [2021-03-11T02:48:49+00:00](https://github.com/leanprover-community/mathlib/commit/0e3211675d9973a9da2197bdf800229e55b51ff1)
feat(data/dfinsupp): add is_scalar_tower and smul_comm_class ([#6614](https://github.com/leanprover-community/mathlib/pull/#6614))

This also weakens the requirements for the `has_scalar` instance

### [2021-03-11T02:48:47+00:00](https://github.com/leanprover-community/mathlib/commit/a814e189e87c6bef9ddf7e142861af05c644e978)
ci(.github/workflows/build.yml): do not install azcopy, change upload logic ([#6613](https://github.com/leanprover-community/mathlib/pull/#6613))

The "install azcopy" step has been [failing](https://github.com/leanprover-community/mathlib/runs/2070026978) from time to time, probably due to failed downloads. As it turns out, the GitHub-hosted actions runner [comes with it installed](https://github.com/actions/virtual-environments/blob/main/images/linux/Ubuntu2004-README.md#tools), so I've removed that step entirely.

I also made two other changes:

- The "push release to azure" step now only runs if the build actually started. The idea is that if the build never even starts due to e.g. `elan` temporarily failing to install, then we should be able to restart the build on GitHub and get `.olean`s for that commit without having to push another dummy commit. Currently we can't do this because we push an empty archive to Azure no matter what.

- We now upload artifacts if the build fails. This gives us an alternative way to get `.olean`s in case something goes wrong with Azure, and might make working with forks of mathlib slightly easier.

### [2021-03-11T00:47:49+00:00](https://github.com/leanprover-community/mathlib/commit/c5c97f274b1c96395aa74359f4fec9b58ef1ccee)
chore(ring_theory/polynomial/basic): remove a use of comap ([#6612](https://github.com/leanprover-community/mathlib/pull/#6612))

This merges together `quotient_equiv_quotient_mv_polynomial` and `quotient_alg_equiv_quotient_mv_polynomial`, since the two now have the same domain and codomain.

`comap` was previously needed here to provide a wrapper type with an R-algebra structure on `mv_polynomial σ (I.quotient)`.
The updated `mv_polynomial.algebra` in [#6533](https://github.com/leanprover-community/mathlib/pull/#6533) transfers the `algebra R I.quotient` structure directly to `mv_polynomial σ I.quotient`, eliminating the need for this wrapper type.

### [2021-03-11T00:47:48+00:00](https://github.com/leanprover-community/mathlib/commit/590444c4b1a7521fe28c3ca4e867b1c6b9eb82bd)
chore(topology/metric/hausdorff_distance): use `infi`/`supr` ([#6611](https://github.com/leanprover-community/mathlib/pull/#6611))

### [2021-03-10T20:43:06+00:00](https://github.com/leanprover-community/mathlib/commit/5be9ceae23e3e0c12c872737a252d245b12e49f6)
chore(linear_algebra/quadratic_form): clean up universe collisions, generalize smul lemmas ([#6609](https://github.com/leanprover-community/mathlib/pull/#6609))

### [2021-03-10T20:43:05+00:00](https://github.com/leanprover-community/mathlib/commit/547bf551e9916e8310915a939036aed68d587e09)
feat(data/complex/module): transfer all `has_scalar ℝ` structures to `ℂ` ([#6562](https://github.com/leanprover-community/mathlib/pull/#6562))

This provides (for an `R` with the same instance on `ℝ`) the instances:
* `has_scalar R ℂ`
* `is_scalar_tower R S ℂ`
* `smul_comm_class R S ℂ`
* `mul_action R ℂ`
* `distrib_mul_action R ℂ`
* `semimodule R ℂ`
* `algebra R ℂ`
* `normed_algebra R ℂ`

This has the downside that `smul_coe` is no longer a `rfl` lemma, but means that `ℂ` is automatically an algebra over `ℝ≥0`.

It renames `smul_re` and `smul_im` to `of_real_mul_re` and `of_real_mul_im`, since the previous statements did not use `smul` at all, and renaming frees up these names for lemmas which _do_ use `smul`.

This removes `normed_space.restrict_scalars_real E` (implemented as `normed_space.restrict_scalars ℝ ℂ E`) as:
* As an instance, it now causes unwanted diamonds
* After downgrading to a def, it is never used
* The docs for `normed_space.restrict_scalars` suggest judicious use, and that if you want this instance you should use the type synonym `semimodule.restrict_scalars ℝ ℂ E` which will have this instance for free.

### [2021-03-10T20:43:04+00:00](https://github.com/leanprover-community/mathlib/commit/60e257990662364a2a6b657c61279d606347be5b)
feat(ring_theory/valuation/basic): additive valuations ([#6559](https://github.com/leanprover-community/mathlib/pull/#6559))

Introduces `add_valuation`, a version of `valuation` that takes values in a `linear_ordered_add_comm_monoid_with_top`.
As an example, defines `multiplicity.add_valuation`

### [2021-03-10T20:43:02+00:00](https://github.com/leanprover-community/mathlib/commit/e62a406b77c5b080e896749dd122eb44c977caba)
feat(linear_algebra/determinant): determinant of a block triangular matrix ([#6050](https://github.com/leanprover-community/mathlib/pull/#6050))

Add lemmas for determinants of block triangular matrices.



Co-authored-by: paulvanwamelen <30371019+paulvanwamelen@users.noreply.github.com>

### [2021-03-10T17:05:28+00:00](https://github.com/leanprover-community/mathlib/commit/664feedeb220c03efbc95101057663dd7a4eb12a)
chore(topology/algebra/ordered): add some `at_bot` versions of lemmas ([#6618](https://github.com/leanprover-community/mathlib/pull/#6618))

### [2021-03-10T17:05:27+00:00](https://github.com/leanprover-community/mathlib/commit/f675a86408a10a2210674c7507010a347f090bb1)
feat(data/real/{nnreal,ennreal}): add (e)nnreal.of_real_bit0/bit1 ([#6617](https://github.com/leanprover-community/mathlib/pull/#6617))

Add bit0/bit1 lemmas for `nnreal.of_real`, `ennreal.of_real` and `ennreal.to_nnreal`.
With these additions, it is for example possible to prove `h : ennreal.of_real (2 : ℝ) = 2 := by simp`.



Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2021-03-10T17:05:26+00:00](https://github.com/leanprover-community/mathlib/commit/df1337ef4108fd093bd4095c41208b6fb9c4443d)
feat(data/local_equiv,topology/local_homeomorph): add `local_equiv.pi` and `local_homeomorph.pi` ([#6574](https://github.com/leanprover-community/mathlib/pull/#6574))

### [2021-03-10T11:57:13+00:00](https://github.com/leanprover-community/mathlib/commit/e221dc9a044343d75da4f26a8bbb279f3f2df4e7)
feat(ring_theory/hahn_series): algebra structure, equivalences with power series ([#6540](https://github.com/leanprover-community/mathlib/pull/#6540))

Places an `algebra` structure on `hahn_series`
Defines a `ring_equiv` and when relevant an `alg_equiv` between `hahn_series nat R` and `power_series R`.



Co-authored-by: Filippo A. E. Nuccio <filippo.nuccio@univ-st-etienne.fr>

### [2021-03-10T11:57:12+00:00](https://github.com/leanprover-community/mathlib/commit/eaa0218570c1c727b20e510923792b9eb2190a06)
feat(category_theory/triangulated/basic): add definitions of additive category and triangle ([#6539](https://github.com/leanprover-community/mathlib/pull/#6539))

This PR adds the definition of an additive category and the definition of a triangle in an additive category with an additive shift.

### [2021-03-10T11:57:10+00:00](https://github.com/leanprover-community/mathlib/commit/a7f1e3c65ce7ae88f132649e8266be006d646633)
feat(normed_group): tendsto_at_top ([#6525](https://github.com/leanprover-community/mathlib/pull/#6525))

Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-10T11:57:09+00:00](https://github.com/leanprover-community/mathlib/commit/ccd35db8d2c001400fcd04ecefd4290283052132)
feat(linear_algebra/matrix): to_matrix and to_lin as alg_equiv ([#6496](https://github.com/leanprover-community/mathlib/pull/#6496))

The existing `linear_map.to_matrix` and `matrix.to_lin` can be upgraded to an `alg_equiv` if working on linear endomorphisms or square matrices. The API is copied over in rote fashion.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-03-10T08:51:55+00:00](https://github.com/leanprover-community/mathlib/commit/b1ecc987c2ade75a2e35f8711fade9e8eacbb320)
feat(nat/digits): natural basis representation using list sum and map ([#5975](https://github.com/leanprover-community/mathlib/pull/#5975))


Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>



Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>

### [2021-03-10T02:23:34+00:00](https://github.com/leanprover-community/mathlib/commit/fad44b9f670670d87c8e25ff9cdf63af87ad731e)
feat(ring_theory/ideal/operations): add quotient_equiv ([#6492](https://github.com/leanprover-community/mathlib/pull/#6492))

The ring equiv `R/I ≃+* S/J` induced by a ring equiv `f : R ≃+* S`,  where `J = f(I)`, and similarly for algebras.

### [2021-03-10T02:23:33+00:00](https://github.com/leanprover-community/mathlib/commit/4e370b5dcd98df8bab6f43b5647e48c9730754be)
feat(topology): shrinking lemma ([#6478](https://github.com/leanprover-community/mathlib/pull/#6478))

### Add a few versions of the shrinking lemma:

* `exists_subset_Union_closure_subset` and `exists_Union_eq_closure_subset`: shrinking lemma for general normal spaces;
* `exists_subset_Union_ball_radius_lt`, `exists_Union_ball_eq_radius_lt`, `exists_subset_Union_ball_radius_pos_lt`, `exists_Union_ball_eq_radius_pos_lt`: shrinking lemma for coverings by open balls in a proper metric space;
* `exists_locally_finite_subset_Union_ball_radius_lt`, `exists_locally_finite_Union_eq_ball_radius_lt`: given a positive function `R : X → ℝ`, finds a locally finite covering by open balls `ball (c i) (r' i)`, `r' i < R` and a subcovering by balls of strictly smaller radius `ball (c i) (r i)`, `0 < r i < r' i`.

### Other API changes

* add `@[simp]` to `set.compl_subset_compl`;
* add `is_closed_bInter` and `locally_finite.point_finite`;
* add `metric.closed_ball_subset_closed_ball`, `metric.uniformity_basis_dist_lt`, `exists_pos_lt_subset_ball`, and `exists_lt_subset_ball`;
* generalize `refinement_of_locally_compact_sigma_compact_of_nhds_basis` to `refinement_of_locally_compact_sigma_compact_of_nhds_basis_set`, replace arguments `(s : X → set X) (hs : ∀ x, s x ∈ 𝓝 x)` with a hint to use `filter.has_basis.restrict_subset` if needed.
* make `s` and `t` arguments of `normal_separation` implicit;
* add `normal_exists_closure_subset`;
* turn `sigma_compact_space_of_locally_compact_second_countable` into an `instance`.

### [2021-03-10T02:23:32+00:00](https://github.com/leanprover-community/mathlib/commit/05d3955a87b017b5e3fb1b3deaa9e7fd22315b95)
feat(number_theory/bernoulli): bernoulli_power_series ([#6456](https://github.com/leanprover-community/mathlib/pull/#6456))

Co-authored-by Ashvni Narayanan



Co-authored-by: Moritz Firsching <firsching@google.com>
Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored-by: Benjamin Davidson <68528197+benjamindavidson@users.noreply.github.com>

### [2021-03-10T02:23:31+00:00](https://github.com/leanprover-community/mathlib/commit/c96287179f2949957f88f3318a2ac444694f1c4f)
feat(linear_algebra): linear_independent_fin_snoc ([#6455](https://github.com/leanprover-community/mathlib/pull/#6455))

A slight variation on the existing `linear_independent_fin_cons`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-09T21:43:56+00:00](https://github.com/leanprover-community/mathlib/commit/b697e5239c8900380661ab08e36090f240dfcb7c)
refactor(ring_theory/power_series/basic): simplify truncation ([#6605](https://github.com/leanprover-community/mathlib/pull/#6605))

I'm trying to reduce how much finsupp leaks through the polynomial API, in this case it works quite nicely.

### [2021-03-09T21:43:55+00:00](https://github.com/leanprover-community/mathlib/commit/09a505a7841bb689dad06c8230a23e46c305762d)
feat(ring_theory/witt_vector): use structure instead of irreducible ([#6604](https://github.com/leanprover-community/mathlib/pull/#6604))

### [2021-03-09T21:43:53+00:00](https://github.com/leanprover-community/mathlib/commit/18d4e519e00e49e2c0403ad27af1ddd7cb625d54)
chore(algebra/ring/basic): weaken ring.inverse to only require monoid_with_zero ([#6603](https://github.com/leanprover-community/mathlib/pull/#6603))

Split from [#5539](https://github.com/leanprover-community/mathlib/pull/#5539) because I actually want to use this, and the PR is large and stalled.




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-09T21:43:52+00:00](https://github.com/leanprover-community/mathlib/commit/fb674e1ed6ba97f54c67f7180bdd78bdfd6d3539)
feat(data/finset/lattice): map_sup, map_inf ([#6601](https://github.com/leanprover-community/mathlib/pull/#6601))

### [2021-03-09T21:43:51+00:00](https://github.com/leanprover-community/mathlib/commit/be6753ca1b464625abb386d4e0e71b569d88163f)
feat(data/{list,multiset,finset}): map_filter ([#6600](https://github.com/leanprover-community/mathlib/pull/#6600))

This renames `list.filter_of_map` to `list.map_filter`, which unifies the name of the `map_filter` lemmas for lists and finsets, and adds a corresponding lemma for multisets.

Unfortunately, the name `list.filter_map` is already used for a definition.

### [2021-03-09T21:43:50+00:00](https://github.com/leanprover-community/mathlib/commit/366a23fb2d0ddaa659bb9f913625375af27ccc06)
feat(topology/constructions): frontier/interior/closure in `X × Y` ([#6594](https://github.com/leanprover-community/mathlib/pull/#6594))

### [2021-03-09T21:43:49+00:00](https://github.com/leanprover-community/mathlib/commit/9ff745828333b704aa4f7cee44e11e1d92b54dff)
feat(algebra/group_power/basic): add abs_add_eq_add_abs_iff ([#6593](https://github.com/leanprover-community/mathlib/pull/#6593))

I've added
```
lemma abs_add_eq_add_abs_iff {α : Type*} [linear_ordered_add_comm_group α]  (a b : α) :
  abs (a + b) = abs a + abs b ↔ (0 ≤ a ∧ 0 ≤ b ∨ a ≤ 0 ∧ b ≤ 0)
```
from `lean-liquid`. For some reasons I am not able to use `wlog hle : a ≤ b using [a b, b a]` at the beginning of the proof, Lean says `unknown identifier 'wlog'` and if I try to import `tactic.wlog` I have tons of errors.

### [2021-03-09T21:43:47+00:00](https://github.com/leanprover-community/mathlib/commit/8e246cbb79355dd512c6652e2027f53216ccd7ae)
refactor(data/mv_polynomial): cleanup equivs ([#6589](https://github.com/leanprover-community/mathlib/pull/#6589))

This:
* Replaces `alg_equiv_congr_left` with `rename_equiv` (to match `rename`)
* Removes `ring_equiv_congr_left` (it's now `rename_equiv.to_ring_equiv`)
* Renames `alg_equiv_congr_right` to `map_alg_equiv` (to match `map`) and removes the `comap` from the definition
* Renames `ring_equiv_congr_right` to `map_equiv` (to match `map`)
* Removes `alg_equiv_congr` (it's now `(map_alg_equiv R e).trans $ (rename_equiv e_var).restrict_scalars _`, which while longer is never used anyway)
* Removes `ring_equiv_congr` (it's now `(map_equiv R e).trans $ (rename_equiv e_var).to_ring_equiv`, which while longer is never used anyway)
* Replaces `punit_ring_equiv` with `punit_alg_equiv`
* Removes `comap` from the definition of `sum_alg_equiv`
* Promotes `option_equiv_left`, `option_equiv_right`, and `fin_succ_equiv` to `alg_equiv`s

This is a follow-up to [#6420](https://github.com/leanprover-community/mathlib/pull/#6420)

### [2021-03-09T21:43:46+00:00](https://github.com/leanprover-community/mathlib/commit/5d82d1d4ff351deaca332b2c48ef7ef88b441b36)
feat(algebra,linear_algebra): `{smul,lmul,lsmul}_injective` ([#6588](https://github.com/leanprover-community/mathlib/pull/#6588))

This PR proves a few injectivity results for (scalar) multiplication in the setting of modules and algebras over a ring.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-03-09T21:43:45+00:00](https://github.com/leanprover-community/mathlib/commit/3d7524211aa0cf44593a8cdf9c50529186843c07)
chore(data/equiv/local_equiv,topology/local_homeomorph): put `source`/`target` to the left in `∩` ([#6583](https://github.com/leanprover-community/mathlib/pull/#6583))

### [2021-03-09T21:43:44+00:00](https://github.com/leanprover-community/mathlib/commit/78af5b166e355235f6203ec11bd57b145ea825d3)
feat(topology): closure in a `pi` space ([#6575](https://github.com/leanprover-community/mathlib/pull/#6575))

Also add `can_lift` instances that lift `f : subtype p → β` to `f : α → β` and a version of `filter.mem_infi_iff` that uses a globally defined function.

### [2021-03-09T21:43:43+00:00](https://github.com/leanprover-community/mathlib/commit/792e492182b1621b584a5fa1dd323aaf9576bea3)
feat(topology/separation): add API for interaction between discrete topology and subsets ([#6570](https://github.com/leanprover-community/mathlib/pull/#6570))

The final result:

Let `s, t ⊆ X` be two subsets of a topological space `X`.  If `t ⊆ s` and the topology induced
by `X`on `s` is discrete, then also the topology induces on `t` is discrete.

The proofs are by Patrick Massot.

### [2021-03-09T16:22:20+00:00](https://github.com/leanprover-community/mathlib/commit/8713c0bd9a4a0ed3ee8769d23ceaa11a70620158)
feat(measure/pi): prove extensionality for `measure.pi` ([#6304](https://github.com/leanprover-community/mathlib/pull/#6304))

* If two measures in a finitary product are equal on cubes with measurable sides (or with sides in a set generating the corresponding sigma-algebra), then the measures are equal.
* Add `sigma_finite` instance for `measure.pi`
* Some basic lemmas about sets (more specifically `Union` and `set.pi`)
* rename `measurable_set.pi_univ` -> `measurable_set.univ_pi` (`pi univ t` is called `univ_pi` consistently in `set/basic`, but it's not always consistent elsewhere)
* rename `[bs]?Union_prod` -> `[bs]?Union_prod_const`



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-03-09T11:19:52+00:00](https://github.com/leanprover-community/mathlib/commit/c1a7c19595e694881f1af1927432ccc2da1dfaaf)
chore(data/polynomial/basic): add missing is_scalar_tower and smul_comm_class instances ([#6592](https://github.com/leanprover-community/mathlib/pull/#6592))

These already exist for `mv_polynomial`, but the PR that I added them in forgot to add them for `polynomial`.

Notably, this provides the instance `is_scalar_tower R (mv_polynomial S₁ R) (polynomial (mv_polynomial S₁ R))`.

### [2021-03-09T11:19:51+00:00](https://github.com/leanprover-community/mathlib/commit/fa28a8c54c77c1d5c56927a1d281f4a48fe2bb62)
feat(data/nat/parity): even/odd.mul_even/odd ([#6584](https://github.com/leanprover-community/mathlib/pull/#6584))

Lemmas pertaining to the multiplication of even and odd natural numbers.

### [2021-03-09T11:19:50+00:00](https://github.com/leanprover-community/mathlib/commit/49afae5a71548db95e974aca8721d02bebca30d2)
feat(number_theory/bernoulli): bernoulli_poly_eval_one ([#6581](https://github.com/leanprover-community/mathlib/pull/#6581))




Co-authored-by: Moritz Firsching <firsching@google.com>

### [2021-03-09T11:19:49+00:00](https://github.com/leanprover-community/mathlib/commit/9889502263e33b28f8dec9c318380c8300b23208)
feat(linear_algebra/pi): add `submodule.pi` ([#6576](https://github.com/leanprover-community/mathlib/pull/#6576))

### [2021-03-09T11:19:47+00:00](https://github.com/leanprover-community/mathlib/commit/a331113613a9fb5a5a07865b30ef8fc76b55d3fa)
feat(analysis/normed_space/normed_group_hom): bounded homs between normed groups ([#6375](https://github.com/leanprover-community/mathlib/pull/#6375))

From `lean-liquid`





Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2021-03-09T08:12:31+00:00](https://github.com/leanprover-community/mathlib/commit/6dec23b20cfdee382d0b70a39329416922fe7a8f)
chore(topology/algebra/ordered): use dot notation, golf some proofs ([#6595](https://github.com/leanprover-community/mathlib/pull/#6595))

Use more precise typeclass arguments here and there, golf some proofs, use dot notation.

### Renamed lemmas

* `is_lub_of_is_lub_of_tendsto` → `is_lub.is_lub_of_tendsto`;
* `is_glb_of_is_glb_of_tendsto` → `is_glb.is_glb_of_tendsto`;
* `is_glb_of_is_lub_of_tendsto` → `is_lub.is_glb_of_tendsto`;
* `is_lub_of_is_glb_of_tendsto` → `is_glb.is_lub_of_tendsto`;
* `mem_closure_of_is_lub` → `is_lub.mem_closure`;
* `mem_of_is_lub_of_is_closed` → `is_lub.mem_of_is_closed`, `is_closed.is_lub_mem`;
* `mem_closure_of_is_glb` → `is_glb.mem_closure`;
* `mem_of_is_glb_of_is_closed` → `is_glb.mem_of_is_closed`, `is_closed.is_glb_mem`;

### New lemmas

* `is_lub.inter_Ici_of_mem`
* `is_glb.inter_Iic_of_mem`
* `frequently.filter_mono`
* `is_lub.frequently_mem`
* `is_lub.frequently_nhds_mem`
* `is_glb.frequently_mem`
* `is_glb.frequently_nhds_mem`
* `is_lub.mem_upper_bounds_of_tendsto`
* `is_glb.mem_lower_bounds_of_tendsto`
* `is_lub.mem_lower_bounds_of_tendsto`
* `is_glb.mem_upper_bounds_of_tendsto`
* `diff_subset_closure_iff`

### [2021-03-09T02:15:11+00:00](https://github.com/leanprover-community/mathlib/commit/32bd00f13904d08301216063cdeff916d0fcf892)
refactor(topology/bounded_continuous_function): structure extending continuous_map ([#6521](https://github.com/leanprover-community/mathlib/pull/#6521))

Convert `bounded_continuous_function` from a subtype to a structure extending `continuous_map`, and some minor improvements to `@[simp]` lemmas.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-08T19:42:23+00:00](https://github.com/leanprover-community/mathlib/commit/3e5d90d90e8c2daf76b7dac6f5bf40d7dade1b8a)
feat(algebra/continued_fractions) add determinant formula and approximations for error term ([#6461](https://github.com/leanprover-community/mathlib/pull/#6461))

### [2021-03-08T19:42:22+00:00](https://github.com/leanprover-community/mathlib/commit/0afdaab2c4a1a02b1a9a2128b09cee1952255173)
feat(linear_algebra): submodules of f.g. free modules are free ([#6178](https://github.com/leanprover-community/mathlib/pull/#6178))

This PR proves the first half of the structure theorem for modules over a PID: if `R` is a principal ideal domain and `M` an `R`-module which is free and finitely generated (expressed by `is_basis R (b : ι → M)`, for a `[fintype ι]`), then all submodules of `M` are also free and finitely generated.

This result requires some lemmas about the rank of (free) modules (which in that case is basically the same as `fintype.card ι`). If `M` were a vector space, this could just be expressed as `findim R M`, but it isn't necessarily, so it can't be.

### [2021-03-08T17:02:28+00:00](https://github.com/leanprover-community/mathlib/commit/cdc222da1aea927d28f1fe3b7b1593bef876514c)
chore(topology): add a few simple lemmas ([#6580](https://github.com/leanprover-community/mathlib/pull/#6580))

### [2021-03-08T17:02:27+00:00](https://github.com/leanprover-community/mathlib/commit/87eec0b62cfad635bec3354e5162e849547ab40d)
feat(linear_algebra/bilinear_form): Existence of orthogonal basis with respect to a bilinear form ([#5814](https://github.com/leanprover-community/mathlib/pull/#5814))

We state and prove the result that there exists an orthogonal basis with respect to a symmetric nondegenerate.

### [2021-03-08T14:38:24+00:00](https://github.com/leanprover-community/mathlib/commit/6791ed9bd7132ae1421a89f7f235d1f0d26d7f74)
chore(algebra/module/linear_map): add linear_map.to_distrib_mul_action_hom ([#6573](https://github.com/leanprover-community/mathlib/pull/#6573))

My aim in adding this is primarily to give the reader a hint that `distrib_mul_action_hom` exists.

The only difference between the two is that `linear_map` can infer `map_zero'` from its typeclass arguments.

### [2021-03-08T14:38:23+00:00](https://github.com/leanprover-community/mathlib/commit/13d86df647bda384e5c685616cff6a046ab50563)
chore(algebra/monoid_algebra): provide finer-grained levels of structure for less-structured `G`. ([#6572](https://github.com/leanprover-community/mathlib/pull/#6572))

This provides `distrib` and `mul_zero_class` for when `G` is just `has_mul`, and `semigroup` for when `G` is just `semigroup`.

It also weakens the typeclass assumptions on some correspondings lemmas.

### [2021-03-08T12:32:37+00:00](https://github.com/leanprover-community/mathlib/commit/7058fa619588d27e3b76ab97380db47df741292a)
feat(linear_algebra/{bilinear,quadratic}_form): inherit scalar actions from algebras ([#6586](https://github.com/leanprover-community/mathlib/pull/#6586))

For example, this means a quadratic form over the quaternions inherits an `ℝ` action.

### [2021-03-08T12:32:35+00:00](https://github.com/leanprover-community/mathlib/commit/5d0a40f119abe5da848f4a78ea04ca559fbe9075)
feat(algebra/algebra/{basic,tower}): add alg_equiv.comap and alg_equiv.restrict_scalars ([#6548](https://github.com/leanprover-community/mathlib/pull/#6548))

This also renames `is_scalar_tower.restrict_base` to `alg_hom.restrict_scalars`, to enable dot notation and match `linear_map.restrict_scalars`.

### [2021-03-08T11:35:06+00:00](https://github.com/leanprover-community/mathlib/commit/b6ed62ca19ff4e0865658dc050f1ac6d7f6bd096)
feat(algebraic_topology): simplicial objects and simplicial types ([#6195](https://github.com/leanprover-community/mathlib/pull/#6195))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-03-08T10:21:12+00:00](https://github.com/leanprover-community/mathlib/commit/f3dbe9f0b423140ef1f39827012feb7f1889de1b)
feat(bounded_continuous_function): coe_sum ([#6522](https://github.com/leanprover-community/mathlib/pull/#6522))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2021-03-08T02:11:14+00:00](https://github.com/leanprover-community/mathlib/commit/98c6bbc9ff36f82afc3c2059be0c62c45dfe6825)
feat(data/set/function): three lemmas about maps_to ([#6518](https://github.com/leanprover-community/mathlib/pull/#6518))

### [2021-03-08T01:18:53+00:00](https://github.com/leanprover-community/mathlib/commit/5b61f07f3d7e0907165293d0a56b0f4159c8d03f)
chore(scripts): update nolints.txt ([#6582](https://github.com/leanprover-community/mathlib/pull/#6582))

I am happy to remove some nolints for you!

### [2021-03-07T22:03:50+00:00](https://github.com/leanprover-community/mathlib/commit/2d3c522b60739312f41c7de1b2b4068c44f4500c)
feat(order/ideal): added proper ideal typeclass and lemmas to order_top ([#6566](https://github.com/leanprover-community/mathlib/pull/#6566))

Defined `proper` and proved basic lemmas about proper ideals.
Also turned `order_top` into a section.

### [2021-03-07T21:14:26+00:00](https://github.com/leanprover-community/mathlib/commit/79be90a74bb1ddddb3ec81221444abc42dbfd9a6)
feat(algebra/regular): add lemmas about regularity of non-zero elements ([#6579](https://github.com/leanprover-community/mathlib/pull/#6579))

More API, to deal with cases in which a regular element is non-zero.

### [2021-03-07T17:19:18+00:00](https://github.com/leanprover-community/mathlib/commit/b25994d522d1368e19a6e568aa7e642d72a95294)
feat(number_theory/bernoulli): definition and properties of Bernoulli polynomials ([#6309](https://github.com/leanprover-community/mathlib/pull/#6309))

The Bernoulli polynomials and its properties are defined.





Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>

### [2021-03-07T14:37:15+00:00](https://github.com/leanprover-community/mathlib/commit/d9370e03c630fc4495076f7ca6c3431cd7d7842e)
fead(data/support): add `support_smul` ([#6569](https://github.com/leanprover-community/mathlib/pull/#6569))

* add `smul_ne_zero`;
* rename `support_smul_subset` to `support_smul_subset_right`;
* add `support_smul_subset_left` and `support_smul`.

### [2021-03-07T10:18:36+00:00](https://github.com/leanprover-community/mathlib/commit/02251b1ed3544ae658f687eb332f7627fff47f57)
refactor(geometry/manifold): drop some unused arguments ([#6545](https://github.com/leanprover-community/mathlib/pull/#6545))

API changes:

* add lemmas about `map (ext_chart_at I x) (𝓝[s] x')`;
* prove `times_cont_mdiff_within_at.comp` directly without using other charts; the new proof does not need a `smooth_manifold_with_corners` instance;
* add aliases `times_cont_mdiff.times_cont_diff` etc;
* `times_cont_mdiff_map` no longer needs a `smooth_manifold_with_corners` instance;
* `has_smooth_mul` no longer extends `smooth_manifold_with_corners` and no longer takes `has_continuous_mul` as an argument;
* `has_smooth_mul_core` is gone in favor of `has_continuous_mul_of_smooth`;
* `smooth_monoid_morphism` now works with any model space (needed, e.g., to define `smooth_monoid_morphism.prod`);
* `lie_group_morphism` is gone: we use `M →* N` both for monoids and groups, no reason to have two structures in this case;
* `lie_group` no longer extends `smooth_manifold_with_corners` and no longer takes `topological_group` as an argument;
* `lie_group_core` is gone in favor of `topological_group_of_lie_group`;
* the `I : model_with_corners 𝕜 E H` argument of `smooth_mul` and `smooth_inv` is now explicit.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-03-07T04:25:18+00:00](https://github.com/leanprover-community/mathlib/commit/ebe2c61601f50845911fe78dce1cbf12a97bf10e)
feat(analysis/normed_space/multilinear): a few more bundled (bi)linear maps ([#6546](https://github.com/leanprover-community/mathlib/pull/#6546))

### [2021-03-07T03:26:19+00:00](https://github.com/leanprover-community/mathlib/commit/9f17db51958a1f183f102dd5926dc4d4e0080322)
feat(analysis/special_functions/integrals): mul/div by a const ([#6357](https://github.com/leanprover-community/mathlib/pull/#6357))

This PR, together with [#6216](https://github.com/leanprover-community/mathlib/pull/#6216), makes the following possible:
```
import analysis.special_functions.integrals
open real interval_integral
open_locale real

example : ∫ x in 0..π, 2 * sin x = 4 := by norm_num
example : ∫ x:ℝ in 4..5, x * 2 = 9 := by norm_num
example : ∫ x in 0..π/2, cos x / 2 = 1 / 2 := by simp
```

### [2021-03-07T01:15:46+00:00](https://github.com/leanprover-community/mathlib/commit/07fc9821f41bd369d930fa9ff8e83e56935e7594)
chore(scripts): update nolints.txt ([#6567](https://github.com/leanprover-community/mathlib/pull/#6567))

I am happy to remove some nolints for you!

### [2021-03-06T21:16:19+00:00](https://github.com/leanprover-community/mathlib/commit/df1e6f920e5acab1651b0b0fc3e874a14f3e3da0)
refactor(data/{finset,multiset}): move inductions proofs on sum/prod from finset to multiset, add more induction lemmas ([#6561](https://github.com/leanprover-community/mathlib/pull/#6561))

The starting point is `finset.le_sum_of_subadditive`, which is extended in several ways:
* It is written in multiplicative form, and a `[to_additive]` attribute generates the additive version,
* It is proven for multiset, which is then used for the proof of the finset case.
* For multiset, some lemmas are written for foldr/foldl (and prod is a foldr).
* Versions of these lemmas specialized to nonempty sets are provided. These don't need the initial hypothesis `f 1 = 1`/`f 0 = 0`.
* The new `..._on_pred` lemmas like `finset.le_sum_of_subadditive_on_pred` apply to functions that are only sub-additive for arguments that verify some property. I included an application of this with `snorm_sum_le`, which uses that the Lp seminorm is subadditive on a.e.-measurable functions. Those `on_pred` lemmas could be avoided by constructing the submonoid given by the predicate, then using the standard subadditive result, but I find convenient to be able to use them directly.



Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2021-03-06T21:16:18+00:00](https://github.com/leanprover-community/mathlib/commit/b280b005ea8063b3d5c21a773d7673fde0cdf1c9)
feat(data/set/basic): add `set.set_ite` ([#6557](https://github.com/leanprover-community/mathlib/pull/#6557))

I'm going to use it as `source` and `target` in
`local_equiv.piecewise` and `local_homeomorph.piecewise`. There are
many non-defeq ways to define this set and I think that it's better to
have a name than to ensure that we always use the same formula.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-03-06T19:15:21+00:00](https://github.com/leanprover-community/mathlib/commit/ac8a1196d030c316601452f2454fbbf9997e02fd)
chore(geometry/manifold): use `namespace`, rename `image` to `image_eq` ([#6517](https://github.com/leanprover-community/mathlib/pull/#6517))

* use `namespace` command in
  `geometry/manifold/smooth_manifold_with_corners`;
* rename `model_with_corners.image` to `model_with_corners.image_eq`
  to match `source_eq` etc;
* replace `homeomorph.coe_eq_to_equiv` with
  `@[simp] lemma coe_to_equiv`;
* add `continuous_linear_map.symm_image_image` and
  `continuous_linear_map.image_symm_image`;
* add `unique_diff_on.image`,
  `continuous_linear_equiv.unique_diff_on_image_iff`.

### [2021-03-06T17:06:17+00:00](https://github.com/leanprover-community/mathlib/commit/16ef29135dfe41fba018ef7005909c279bee45f5)
feat(order/filter/*, topology/subset_properties): define "coproduct" of two filters ([#6372](https://github.com/leanprover-community/mathlib/pull/#6372))

Define the "coproduct" of two filters (unclear if this is really a categorical coproduct) as
```lean
protected def coprod (f : filter α) (g : filter β) : filter (α × β) :=
f.comap prod.fst ⊔ g.comap prod.snd
```
and prove the three lemmas which motivated this construction ([Zulip](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Filter.20golf)):  coproduct of cofinite filters is the cofinite filter, coproduct of cocompact filters is the cocompact filter, and
```lean
(tendsto f a c) → (tendsto g b d) → (tendsto (prod.map f g) (a.coprod b) (c.coprod d))
```

Co-authored by: Kevin Buzzard <k.buzzard@imperial.ac.uk>
Co-authored by: Patrick Massot <patrickmassot@free.fr>

### [2021-03-06T11:31:49+00:00](https://github.com/leanprover-community/mathlib/commit/0fa0d61e0efa68b39afa7ddb4e602f1d8b62550b)
feat(topology/paracompact): define paracompact spaces ([#6395](https://github.com/leanprover-community/mathlib/pull/#6395))

Fixes [#6391](https://github.com/leanprover-community/mathlib/pull/#6391)

### [2021-03-06T07:42:55+00:00](https://github.com/leanprover-community/mathlib/commit/126cebca3b12c6da91e9eff1d7cd3678b5c1c779)
feat(data/real/nnreal): ℝ is an ℝ≥0-algebra ([#6560](https://github.com/leanprover-community/mathlib/pull/#6560))

Zulip discussion:
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/rings.20from.20subtype

### [2021-03-06T07:42:54+00:00](https://github.com/leanprover-community/mathlib/commit/a05b35cac02c8d476a14c953d7c6b03f0514e8b2)
doc(*): wrap raw URLs containing parentheses with angle brackets ([#6554](https://github.com/leanprover-community/mathlib/pull/#6554))

Raw URLs with parentheses in them are tricky for `doc-gen` to parse, so this commit wraps them in angle brackets.

### [2021-03-06T07:42:53+00:00](https://github.com/leanprover-community/mathlib/commit/3e5643e8807ae73d0cefa9e527f92392a9bab684)
feat(category_theory/opposites): use simps everywhere ([#6553](https://github.com/leanprover-community/mathlib/pull/#6553))

This is possible after leanprover-community/lean[#538](https://github.com/leanprover-community/mathlib/pull/#538)

### [2021-03-06T07:42:52+00:00](https://github.com/leanprover-community/mathlib/commit/5962c76fb636d17a041726adcc11299c8a23e2b6)
feat(algebra/ring/boolean_ring): Boolean rings ([#6464](https://github.com/leanprover-community/mathlib/pull/#6464))

`boolean_ring.to_boolean_algebra` is the Boolean algebra structure on a Boolean ring.

### [2021-03-06T02:14:45+00:00](https://github.com/leanprover-community/mathlib/commit/32547fc8344507017fdda6a1e4564aa0ed69d19d)
chore(scripts): update nolints.txt ([#6558](https://github.com/leanprover-community/mathlib/pull/#6558))

I am happy to remove some nolints for you!

### [2021-03-06T01:08:46+00:00](https://github.com/leanprover-community/mathlib/commit/44282437ba364333f38f5fb1a9121c08d1268b47)
chore(polynomial/chebyshev): changes names of chebyshev₁ to chebyshev.T and chebyshev₂ to chebyshev.U ([#6519](https://github.com/leanprover-community/mathlib/pull/#6519))

Still have to write here what was changed (will be a long list). More or less this is just search and replace `chebyshev₁` for `chebyshev.T` and `chebyshev₂` for `chebyshev.U`.

* `polynomial.chebyshev₁` is now `polynomial.chebyshev.T`
* `polynomial.chebyshev₁_zero` is now `polynomial.chebyshev.T_zero`
* `polynomial.chebyshev₁_one` is now `polynomial.chebyshev.T_one`
* `polynomial.chebyshev₁_two` is now `polynomial.chebyshev.T_two`
* `polynomial.chebyshev₁_add_two` is now `polynomial.chebyshev.T_add_two`
* `polynomial.chebyshev₁_of_two_le` is now `polynomial.chebyshev.T_of_two_le`
* `polynomial.map_chebyshev₁` is now `polynomial.chebyshev.map_T`
* `polynomial.chebyshev₂` is now `polynomial.chebyshev.U`
* `polynomial.chebyshev₂_zero` is now `polynomial.chebyshev.U_zero`
* `polynomial.chebyshev₂_one` is now `polynomial.chebyshev.U_one`
* `polynomial.chebyshev₂_two` is now `polynomial.chebyshev.U_two`
* `polynomial.chebyshev₂_add_two` is now `polynomial.chebyshev.U_add_two`
* `polynomial.chebyshev₂_of_two_le` is now `polynomial.chebyshev.U_of_two_le`
* `polynomial.chebyshev₂_eq_X_mul_chebyshev₂_add_chebyshev₁` is now `polynomial.chebyshev.U_eq_X_mul_U_add_T`
* `polynomial.chebyshev₁_eq_chebyshev₂_sub_X_mul_chebyshev₂` is now `polynomial.chebyshev.T_eq_U_sub_X_mul_U`
* `polynomial.chebyshev₁_eq_X_mul_chebyshev₁_sub_pol_chebyshev₂` is now `polynomial.chebyshev.T_eq_X_mul_T_sub_pol_U`
* `polynomial.one_sub_X_pow_two_mul_chebyshev₂_eq_pol_in_chebyshev₁` is now `polynomial.chebyshev.one_sub_X_pow_two_mul_U_eq_pol_in_T`
* `polynomial.map_chebyshev₂` is now `polynomial.chebyshev.map_U`
* `polynomial.chebyshev₁_derivative_eq_chebyshev₂` is now `polynomial.chebyshev.T_derivative_eq_U`
* `polynomial.one_sub_X_pow_two_mul_derivative_chebyshev₁_eq_poly_in_chebyshev₁` is now `polynomial.chebyshev.one_sub_X_pow_two_mul_derivative_T_eq_poly_in_T`
* `polynomial.add_one_mul_chebyshev₁_eq_poly_in_chebyshev₂` is now `polynomial.chebyshev.add_one_mul_T_eq_poly_in_U`
* `polynomial.mul_chebyshev₁` is now `polynomial.chebyshev.mul_T`
* `polynomial.chebyshev₁_mul` is now `polynomial.chebyshev.T_mul`
* `polynomial.dickson_one_one_eq_chebyshev₁` is now `polynomial.dickson_one_one_eq_chebyshev_T`
* `polynomial.chebyshev₁_eq_dickson_one_one` is now `polynomial.chebyshev_T_eq_dickson_one_one`
* `chebyshev₁_complex_cos` is now `polynomial.chebyshev.T_complex_cos`
* `cos_nat_mul` is now `polynomial.chebyshev.cos_nat_mul`
* `chebyshev₂_complex_cos` is now `polynomial.chebyshev.U_complex_cos`
* `sin_nat_succ_mul` is now `polynomial.chebyshev.sin_nat_succ_mul`




Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-03-05T21:45:36+00:00](https://github.com/leanprover-community/mathlib/commit/4bc670705ddc0585569444218998719e26cc8da3)
feat(topology/local_homeomorph): preimage of `closure` and `frontier` ([#6547](https://github.com/leanprover-community/mathlib/pull/#6547))

### [2021-03-05T21:45:35+00:00](https://github.com/leanprover-community/mathlib/commit/cbcbe24dc1f45e08d22cfb76d6ccfe652c95f804)
feat(algebra/ordered_monoid): linear_ordered_add_comm_monoid(_with_top) ([#6520](https://github.com/leanprover-community/mathlib/pull/#6520))

Separates out classes for `linear_ordered_(add_)comm_monoid`
Creates `linear_ordered_add_comm_monoid_with_top`, an additive and order-reversed version of `linear_ordered_comm_monoid_with_zero`.
Puts an instance of `linear_ordered_add_comm_monoid_with_top` on `with_top` of any `linear_ordered_add_comm_monoid` and also on `enat`



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-05T20:52:35+00:00](https://github.com/leanprover-community/mathlib/commit/626cb422befe7efea0376be60afab392c76620d4)
feat(data/polynomial/mirror): new file ([#6426](https://github.com/leanprover-community/mathlib/pull/#6426))

This files defines an alternate version of `polynomial.reverse`. This version is often nicer to work with since it preserves `nat_degree` and `nat_trailing_degree` and is always an involution.

(this PR is part of the irreducibility saga)



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-03-05T16:16:24+00:00](https://github.com/leanprover-community/mathlib/commit/913950ed5dd14741337c6a31703ebb47ba195206)
feat(group_theory/subgroup): add monoid_hom.restrict ([#6537](https://github.com/leanprover-community/mathlib/pull/#6537))

### [2021-03-05T15:05:25+00:00](https://github.com/leanprover-community/mathlib/commit/d40487b56e0389de4e33326d74b339c9bbd6d0de)
feat(measure_theory/[set_integral, interval_integral]): mono and nonneg lemmas ([#6292](https://github.com/leanprover-community/mathlib/pull/#6292))

See https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/.60integral_restrict.60/near/226274072

### [2021-03-05T13:04:47+00:00](https://github.com/leanprover-community/mathlib/commit/97d13d7561ef9c9a21587cf62324f8b2d215a7f8)
feat(algebra/lie/subalgebra): define the Lie subalgebra generated by a subset ([#6549](https://github.com/leanprover-community/mathlib/pull/#6549))

The work here is a lightly-edited copy-paste of the corresponding results for Lie submodules

### [2021-03-05T11:27:59+00:00](https://github.com/leanprover-community/mathlib/commit/d90448c6cd3b9aa4660319618cb16a3453837f59)
chore(linear_algebra/*): changes to finsupp_vectorspaces and move module doc dual ([#6516](https://github.com/leanprover-community/mathlib/pull/#6516))

This PR does the following:

- move the module doc of `linear_algebra.dual` so that it is recognised by the linter.
- add `ker_eq_bot_iff_range_eq_top_of_findim_eq_findim` to `linear_algebra.finite_dimensional`, this replaces `injective_of_surjective` in `linear_algebra.finsupp_vectorspaces`
- remove `eq_bot_iff_dim_eq_zero` from `linear_algebra.finsupp_vectorspaces`, this already exists as `dim_eq_zero` in `linear_algebra.finite_dimensional`
- changed `cardinal_mk_eq_cardinal_mk_field_pow_dim` and `cardinal_lt_omega_of_dim_lt_omega` to assume `finite_dimensional K V` instead of `dim < omega`.
- renamed `cardinal_lt_omega_of_dim_lt_omega` to `cardinal_lt_omega_of_finite_dimensional` since the assumption changed.
- provided a module doc for `linear_algebra.finsupp_vectorspaces` which should remove `linear_algebra.*` from the style exceptions file.

This file should probably be looked at again by someone more experienced in the linear_algebra part of the library. It seems to me that most of the statements in this file in fact would better fit in other files.




Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-03-05T08:42:35+00:00](https://github.com/leanprover-community/mathlib/commit/c782e282bfb40f211c94c6d712d1b71582fd5b2f)
chore(analysis/normed_space/units): add `protected`, minor review ([#6544](https://github.com/leanprover-community/mathlib/pull/#6544))

### [2021-03-05T08:42:34+00:00](https://github.com/leanprover-community/mathlib/commit/f158f25d424c2da3dcd7aef800220a3cc7df5145)
feat(data/mv_polynomial/basic): add is_scalar_tower and smul_comm_class instances ([#6542](https://github.com/leanprover-community/mathlib/pull/#6542))

This also fixes the `semimodule` instance to not require `comm_semiring R`

### [2021-03-05T05:37:32+00:00](https://github.com/leanprover-community/mathlib/commit/340dd69f81afc7af0f6df75005511ef6488e5827)
fix(*): remove some simp lemmas ([#6541](https://github.com/leanprover-community/mathlib/pull/#6541))

All of these simp lemmas are also declared in core. 
Maybe one of the copies can be removed in a future PR, but this PR is just to remove the duplicate simp attributes.

This is part of fixing linting problems in core, done in leanprover-community/lean[#545](https://github.com/leanprover-community/mathlib/pull/#545). 
Most of the duplicate simp lemmas are fixed in `core`, but I prefer to remove the simp attribute here in mathlib if the simp lemmas were already used in core.

### [2021-03-05T04:34:20+00:00](https://github.com/leanprover-community/mathlib/commit/990a5bbd84289251bf91efe41e573769929d2706)
chore(analysis/normed_space/extend): remove unnecessary imports ([#6538](https://github.com/leanprover-community/mathlib/pull/#6538))

Remove two imports.  `import analysis.complex.basic` is actually unnecessary, `import analysis.normed_space.operator_norm` is indirectly imported via `data.complex.is_R_or_C`.

### [2021-03-05T02:26:15+00:00](https://github.com/leanprover-community/mathlib/commit/10aadddf8c21a39741afa1bd41051a42af6cdd30)
chore(scripts): update nolints.txt ([#6543](https://github.com/leanprover-community/mathlib/pull/#6543))

I am happy to remove some nolints for you!

### [2021-03-05T00:23:57+00:00](https://github.com/leanprover-community/mathlib/commit/d2cc044fed7f6d57dd6f687a0f3d0917ca5ea0bc)
chore(algebra/algebra/basic): add a missing coe lemma ([#6535](https://github.com/leanprover-community/mathlib/pull/#6535))

This is just to stop the terrible pain of having to work with `⇑(e.to_ring_equiv) x` in goals.

In the long run, we should sort out the simp normal form, but for now I just want to stop the pain.

### [2021-03-04T21:18:05+00:00](https://github.com/leanprover-community/mathlib/commit/ef1a00b638a57bbedcd5700c153b8309d9c82846)
feat(data/finsupp, algebra/monoid_algebra): add is_scalar_tower and smul_comm_class ([#6534](https://github.com/leanprover-community/mathlib/pull/#6534))

This stops just short of transferring these instances to `polynomial` and `mv_polynomial`.

### [2021-03-04T21:18:04+00:00](https://github.com/leanprover-community/mathlib/commit/0dfba50dd3434b97763297b431ea7bc7745f448a)
feat(algebra/algebra/basic): alg_equiv.of_linear_equiv ([#6495](https://github.com/leanprover-community/mathlib/pull/#6495))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-03-04T21:18:02+00:00](https://github.com/leanprover-community/mathlib/commit/744e79c1fe89480f28a8d9df029e15f27ee1def4)
feat(algebra/ordered_*, */sub{monoid,group,ring,semiring,field,algebra}): pullback of ordered algebraic structures under an injective map ([#6489](https://github.com/leanprover-community/mathlib/pull/#6489))

Prove that the following 14 order typeclasses can be pulled back via an injective map (`function.injective.*`), and use them to attach 30 new instances to sub-objects:
* `ordered_comm_monoid` (and the implied `ordered_add_comm_monoid`)
  * `submonoid.to_ordered_comm_monoid`
  * `submodule.to_ordered_add_comm_monoid`
* `ordered_comm_group` (and the implied `ordered_add_comm_group`)
  * `subgroup.to_ordered_comm_group`
  * `submodule.to_ordered_add_comm_group`
* `ordered_cancel_comm_monoid` (and the implied `ordered_cancel_add_comm_monoid`)
  * `submonoid.to_ordered_cancel_comm_monoid`
  * `submodule.to_ordered_cancel_add_comm_monoid`
* `linear_ordered_cancel_comm_monoid` (and the implied `linear_ordered_cancel_add_comm_monoid`)
  * `submonoid.to_linear_ordered_cancel_comm_monoid`
  *  `submodule.to_linear_ordered_cancel_add_comm_monoid`
* `linear_ordered_comm_monoid_with_zero`
  * (no suitable subobject exists for monoid_with_zero)
* `linear_ordered_comm_group` (and the implied `linear_ordered_add_comm_group`)
  * `subgroup.to_linear_ordered_comm_group`
  * `submodule.to_linear_ordered_add_comm_group`
* `ordered_semiring`
  * `subsemiring.to_ordered_semiring`
  * `subalgebra.to_ordered_semiring`
* `ordered_comm_semiring`
  * `subsemiring.to_ordered_comm_semiring`
  * `subalgebra.to_ordered_comm_semiring`
* `ordered_ring`
  * `subring.to_ordered_ring`
  * `subalgebra.to_ordered_ring`
* `ordered_comm_ring`
  * `subring.to_ordered_comm_ring`
  * `subalgebra.to_ordered_comm_ring`
* `linear_ordered_semiring`
  * `subring.to_linear_ordered_semiring`
  * `subalgebra.to_linear_ordered_semiring`
* `linear_ordered_ring`
  * `subring.to_linear_ordered_ring`
  * `subalgebra.to_linear_ordered_ring`
* `linear_ordered_comm_ring`
  * `subring.to_linear_ordered_comm_ring`
  * `subalgebra.to_linear_ordered_comm_ring`
* `linear_ordered_field`
  * `subfield.to_linear_ordered_field`

Zulip:
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/rings.20from.20subtype



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-04T21:18:00+00:00](https://github.com/leanprover-community/mathlib/commit/09273ae0b0fd03d04f9630f24d6e9c97de525882)
feat(measure_theory/probability_mass_function): Generalize bind on pmfs to binding on the support ([#6210](https://github.com/leanprover-community/mathlib/pull/#6210))

### [2021-03-04T17:49:12+00:00](https://github.com/leanprover-community/mathlib/commit/8c72ca3ff2a87089846978886b8499aaa88f65ef)
feat(data/mv_polynomial/basic): a polynomial ring over an R-algebra is also an R-algebra ([#6533](https://github.com/leanprover-community/mathlib/pull/#6533))

### [2021-03-04T17:49:11+00:00](https://github.com/leanprover-community/mathlib/commit/84f4d5cc9a3792add87a687d624ffd4bdcd103d2)
feat(order/zorn): nonempty formulation of Zorn's lemma ([#6532](https://github.com/leanprover-community/mathlib/pull/#6532))

In practice it's often helpful to have this alternate formulation of Zorn's lemma

### [2021-03-04T17:49:10+00:00](https://github.com/leanprover-community/mathlib/commit/dbddee6963b2b1f1a6826c8e9f3fb7b2752cba88)
feat(topology/continuous_on): add `set.left_inv_on.map_nhds_within_eq` ([#6529](https://github.com/leanprover-community/mathlib/pull/#6529))

Also add some trivial lemmas to `data/set/function` and
`order/filter/basic`.

### [2021-03-04T17:49:09+00:00](https://github.com/leanprover-community/mathlib/commit/0690d9708531f7a267c90641abdb4a08c861d9ce)
feat(bounded_continuous_function): norm_lt_of_compact ([#6524](https://github.com/leanprover-community/mathlib/pull/#6524))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-04T17:49:08+00:00](https://github.com/leanprover-community/mathlib/commit/10d2e70d827982d8ec4bf24cbcd54f0dc665bd1e)
feat(order/lattice): "algebraic" constructors for (semi-)lattices ([#6460](https://github.com/leanprover-community/mathlib/pull/#6460))

I also added a module doc string for `order/lattice.lean`.

### [2021-03-04T16:01:55+00:00](https://github.com/leanprover-community/mathlib/commit/1cc59b9dc6c1efdcda3270750bd7711987266ece)
feat(set_theory/cardinal, data/nat/fincard): Define `nat`- and `enat`-valued cardinalities ([#6494](https://github.com/leanprover-community/mathlib/pull/#6494))

Defines `cardinal.to_nat` and `cardinal.to_enat`
Uses those to define `nat.card` and `enat.card`

### [2021-03-04T14:43:48+00:00](https://github.com/leanprover-community/mathlib/commit/9607dbddcee3af783e78b1232f7463d14956a2e9)
feat(analysis/convex): linear image of segment ([#6531](https://github.com/leanprover-community/mathlib/pull/#6531))

### [2021-03-04T14:43:47+00:00](https://github.com/leanprover-community/mathlib/commit/a8d285ccc09bc2394feb91cb1016698749ff5c9e)
feat(algebra/direct_sum_graded): endow `direct_sum` with a ring structure ([#6053](https://github.com/leanprover-community/mathlib/pull/#6053))

To quote the module docstring

> This module provides a set of heterogenous typeclasses for defining a multiplicative structure
> over `⨁ i, A i` such that `(*) : A i → A j → A (i + j)`; that is to say, `A` forms an
> additively-graded ring. The typeclasses are:
> 
> * `direct_sum.ghas_one A`
> * `direct_sum.ghas_mul A`
> * `direct_sum.gmonoid A`
> * `direct_sum.gcomm_monoid A`
> 
> Respectively, these imbue the direct sum `⨁ i, A i` with:
> 
> * `has_one`
> * `mul_zero_class`, `distrib`
> * `semiring`, `ring`
> * `comm_semiring`, `comm_ring`
>
> Additionally, this module provides helper functions to construct `gmonoid` and `gcomm_monoid`
> instances for:
> 
> * `A : ι → submonoid S`: `direct_sum.ghas_one.of_submonoids`, `direct_sum.ghas_mul.of_submonoids`,
>   `direct_sum.gmonoid.of_submonoids`, `direct_sum.gcomm_monoid.of_submonoids`
> * `A : ι → submonoid S`: `direct_sum.ghas_one.of_subgroups`, `direct_sum.ghas_mul.of_subgroups`,
>   `direct_sum.gmonoid.of_subgroups`, `direct_sum.gcomm_monoid.of_subgroups`
> 
> If the `A i` are disjoint, these provide a gradation of `⨆ i, A i`, and the mapping
> `⨁ i, A i →+ ⨆ i, A i` can be obtained as
> `direct_sum.to_monoid (λ i, add_submonoid.inclusion $ le_supr A i)`.

### [2021-03-04T13:58:56+00:00](https://github.com/leanprover-community/mathlib/commit/edbbecbe232363033780c617cb4b256b4873d2be)
doc(group_theory/sylow): module doc ([#6477](https://github.com/leanprover-community/mathlib/pull/#6477))

This PR provides the last module doc which was missing from `group_theory`, namely that for `sylow`.

### [2021-03-04T11:33:23+00:00](https://github.com/leanprover-community/mathlib/commit/d32bb6edf64aceb019804d71ef39880f4ea4782f)
feat(data/finsupp/basic): add support_nonempty_iff and nonzero_iff_exists ([#6530](https://github.com/leanprover-community/mathlib/pull/#6530))

Add two lemmas to work with `finsupp`s with non-empty support.

Zulip:
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/finsupp.2Enonzero_iff_exists

### [2021-03-04T11:33:22+00:00](https://github.com/leanprover-community/mathlib/commit/ca96bfbe859ea9380e70b7d00eff3f02fcf4c332)
feat(linear_algebra/clifford_algebra): add definitions of the conjugation operators and some API ([#6491](https://github.com/leanprover-community/mathlib/pull/#6491))

This also replaces the file with a directory, to avoid monstrous files from developing.

### [2021-03-04T11:33:21+00:00](https://github.com/leanprover-community/mathlib/commit/deb3d4524093d0e343d719a26580d5d2865243c1)
feat(data/mv_polynomial/equiv): generalize ring_equiv_congr ([#6420](https://github.com/leanprover-community/mathlib/pull/#6420))

Following the discussion in [#6324](https://github.com/leanprover-community/mathlib/pull/#6324), I have modified `mv_polynomial.ring_equiv_of_equiv` and `mv_polynomial.ring_equiv_congr`, that are now called `ring_equiv_congr_left` and `ring_equiv_congr_left`: both are proved as special cases of `ring_equiv_congr` (the situation for algebras is exactly the same).

This has the side effect that the lemmas automatically generated by `@[simps]` are not in a good form (see for example the lemma `mv_polynomial.alg_equiv_congr_left_apply ` in the current mathlib, where there is an unwanted `alg_equiv.refl.to_ring_equiv`). To avoid this I deleted the `@[simps]` and I wrote the lemmas by hand (also correcting the problem with `mv_polynomial.alg_equiv_congr_left_apply`). I probably don't understand completely `@[simps]`, since I had to manually modified some other proofs that no longer worked (I mean, I had to do something more that just using the new names).

If there is some `simp` lemma I forgot I would be happy to write it.

### [2021-03-04T08:43:30+00:00](https://github.com/leanprover-community/mathlib/commit/3329ec4e85cbf645fc76cac194e8f39ce1a1095b)
chore(topology/algebra/*): tendsto namespacing ([#6528](https://github.com/leanprover-community/mathlib/pull/#6528))

Correct a few lemmas which I noticed were namespaced as `tendsto.***` rather than `filter.tendsto.***`, and thus couldn't be used with projection notation.

Also use the projection notation, where now permitted.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Search.20for.20all.20declarations.20in.20a.20namespace)



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-03-04T08:43:29+00:00](https://github.com/leanprover-community/mathlib/commit/76aee25dc96d4220e8828b6cbd9768c2a76e279d)
refactor(big_operators/basic): move prod_mul_prod_compl ([#6526](https://github.com/leanprover-community/mathlib/pull/#6526))

Several lemmas were unnecessarily in `src/data/fintype/card.lean`, and I've relocated them to `src/algebra/big_operators/basic.lean`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-04T08:43:28+00:00](https://github.com/leanprover-community/mathlib/commit/d7fa1bc8efa58e9dbf4d63968a29b97bef5fb7b4)
feat(topology/instances/real): generalize 'compact_space I' to 'compact_space (Icc a b)' ([#6523](https://github.com/leanprover-community/mathlib/pull/#6523))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-04T08:43:27+00:00](https://github.com/leanprover-community/mathlib/commit/2f357794542eddb6cb63cafce50b03fddc1075a0)
chore(*/sub*): tidy up inherited algebraic structures from parent objects ([#6509](https://github.com/leanprover-community/mathlib/pull/#6509))

This changes `subfield.to_field` to ensure that division is defeq.

It also removes `subring.subset_comm_ring` which was identical to `subring.to_comm_ring`, renames some `subalgebra` instances to match those of `subring`s, and cleans up a few related proofs that relied on the old names.

These are cleanups split from [#6489](https://github.com/leanprover-community/mathlib/pull/#6489), which failed CI but was otherwise approved

### [2021-03-04T07:49:34+00:00](https://github.com/leanprover-community/mathlib/commit/f4db322fb24bb09e00bfc12b0418f80689726ae2)
feat(category_theory/subobject): factoring morphisms through subobjects ([#6302](https://github.com/leanprover-community/mathlib/pull/#6302))

The predicate `h : P.factors f`, for `P : subobject Y` and `f : X ⟶ Y`
asserts the existence of some `P.factor_thru f : X ⟶ (P : C)` making the obvious diagram commute.
We provide conditions for `P.factors f`, when `P` is a kernel/equalizer/image/inf/sup subobject.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-04T02:11:25+00:00](https://github.com/leanprover-community/mathlib/commit/8289518d1bca4119aa154dbe7ada59375e4a2eed)
feat(algebra/star): the Bell/CHSH/Tsirelson inequalities ([#4687](https://github.com/leanprover-community/mathlib/pull/#4687))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2021-03-04T01:15:55+00:00](https://github.com/leanprover-community/mathlib/commit/283780766a56024eaf9d12775b919a731110229e)
chore(scripts): update nolints.txt ([#6527](https://github.com/leanprover-community/mathlib/pull/#6527))

I am happy to remove some nolints for you!

### [2021-03-03T13:41:37+00:00](https://github.com/leanprover-community/mathlib/commit/3c9399d168e7d814c75de596a9c181b0925a0506)
chore(algebra/ordered_group): put to_additive on lemmas about linear_ordered_comm_group ([#6506](https://github.com/leanprover-community/mathlib/pull/#6506))

No lemmas are added or renamed for the additive version, this just adds lemmas (and more importantly instances) for the multiplicative version.

This:

* Adds missing `ancestor` attributes to `linear_ordered_add_comm_group` and `linear_ordered_comm_group`, which are needed to make `to_additive` work correctly on `to_add_comm_group` and `to_comm_group`
* Adds multiplicative versions of:
  * `sub_le_self_iff` (`div_le_self_iff`)
  * `sub_lt_self_iff` (`div_lt_self_iff `)
  * `linear_ordered_add_comm_group.to_linear_ordered_cancel_add_comm_monoid` (`linear_ordered_comm_group.to_linear_ordered_cancel_comm_monoid`)
  * `linear_ordered_add_comm_group.add_lt_add_left` (`linear_ordered_comm_group.mul_lt_mul_left'`)
  * `min_neg_neg` (`min_inv_inv'`)
  * `max_neg_neg` (`max_inv_inv'`)
  * `min_sub_sub_right` (`min_div_div_right'`)
  * `min_sub_sub_left` (`min_div_div_left'`)
  * `max_sub_sub_right` (`max_div_div_right'`)
  * `max_sub_sub_left` (`max_div_div_left'`)
  * `max_zero_sub_eq_self` (`max_one_div_eq_self'`)
  * `eq_zero_of_neg_eq` (`eq_one_of_inv_eq'`)
  * `exists_zero_lt` (`exists_one_lt'`)

### [2021-03-03T13:41:37+00:00](https://github.com/leanprover-community/mathlib/commit/d4ac4c3e6ad0e46dcf98399707b5c29debd5fbb8)
feat(data/list/basic): add `list.prod_eq_zero(_iff)` ([#6504](https://github.com/leanprover-community/mathlib/pull/#6504))

API changes:

* add `list.prod_eq_zero`, `list.prod_eq_zero_iff`, ;
* lemmas `list.prod_ne_zero`, `multiset.prod_ne_zero`, `polynomial.root_list_prod`, `polynomial.roots_multiset_prod`, `polynomial.nat_degree_multiset_prod`,  now assume `0 ∉ L` (or `0 ∉ m`/`0 ∉ s`) instead of `∀ x ∈ L, x ≠ 0`

### [2021-03-03T13:41:36+00:00](https://github.com/leanprover-community/mathlib/commit/a852bf40d4ab17858256ff58bc2002e5010d1676)
feat(data/equiv/fin): fin_add_flip and fin_rotate ([#6454](https://github.com/leanprover-community/mathlib/pull/#6454))

Add
* `fin_add_flip : fin (m + n) ≃ fin (n + m)`
* `fin_rotate : Π n, fin n ≃ fin n` (acts by +1 mod n)
and simp lemmas, and shows `fin.snoc` is a rotation of `fin.cons`.


Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-03-03T10:36:54+00:00](https://github.com/leanprover-community/mathlib/commit/9c48eb188cd7395f6fbaba0e7aa67659d51c455c)
chore(ring_theory/{subring,integral_closure}): simplify a proof, remove redundant instances ([#6513](https://github.com/leanprover-community/mathlib/pull/#6513))

### [2021-03-03T10:36:53+00:00](https://github.com/leanprover-community/mathlib/commit/eec54d0532ac49065b5a4e7711aa5e3cc9c343a4)
feat(algebra/field): add function.injective.field ([#6511](https://github.com/leanprover-community/mathlib/pull/#6511))

We already have defs of this style for all sorts of algebraic constructions, why not one more.

### [2021-03-03T10:36:52+00:00](https://github.com/leanprover-community/mathlib/commit/3309ce274362523bd5efacb14b78097e01f076ee)
refactor(ring_theory/polynomial/chebyshev): move lemmas around ([#6510](https://github.com/leanprover-community/mathlib/pull/#6510))

As discussed in [#6501](https://github.com/leanprover-community/mathlib/pull/#6501), split up the old file `ring_theory.polynomial.chebyshev.basic`, moving half its contents to `ring_theory.polynomial.chebyshev.defs` and the other half to `ring_theory.polynomial.chebyshev.dickson`.

### [2021-03-03T07:35:46+00:00](https://github.com/leanprover-community/mathlib/commit/383dd2bd27b50c2315db588b5d6377c6d3a92142)
chore(data/equiv): add missing simp lemmas about mk ([#6505](https://github.com/leanprover-community/mathlib/pull/#6505))

This adds missing `mk_coe` lemmas, and new `symm_mk`, `symm_bijective`, and `mk_coe'` lemmas.

### [2021-03-02T23:24:10+00:00](https://github.com/leanprover-community/mathlib/commit/22e34370e62f4338d73889dc93094829439eb420)
feat(algebra/big_operators/basic): lemmas prod_range_add, sum_range_add ([#6484](https://github.com/leanprover-community/mathlib/pull/#6484))

### [2021-03-02T22:25:31+00:00](https://github.com/leanprover-community/mathlib/commit/19ed0f8e562cbd719b608e13ac5198e534c9ecd9)
refactor(ring_theory/valuation): valuations in `linear_ordered_comm_monoid_with_zero` ([#6500](https://github.com/leanprover-community/mathlib/pull/#6500))

Generalizes the value group in a `valuation` to a `linear_ordered_comm_monoid_with_zero`



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-03-02T19:27:12+00:00](https://github.com/leanprover-community/mathlib/commit/0c5b5172561a51c9d1671cd25854442abcc113c8)
feat(ring_theory/polynomial/chebyshev/basic): multiplication of Chebyshev polynomials ([#6501](https://github.com/leanprover-community/mathlib/pull/#6501))

Add the identity for multiplication of Chebyshev polynomials,
```lean
2 * chebyshev₁ R m * chebyshev₁ R (m + k) = chebyshev₁ R (2 * m + k) + chebyshev₁ R k
```

Use this to give a direct proof of the identity `chebyshev₁_mul` for composition of Chebyshev polynomials, replacing the current proof using trig functions.  This means that the import `import analysis.special_functions.trigonometric` to the Chebyshev file can be removed.

### [2021-03-02T19:27:11+00:00](https://github.com/leanprover-community/mathlib/commit/0c863e98ed278646300b7b4cf242ea5c1d4c1bc5)
refactor(data/set/finite): change type of `set.finite.dependent_image` ([#6475](https://github.com/leanprover-community/mathlib/pull/#6475))

The old lemma combined a statement similar to `set.finite.image` with
`set.finite.subset`. The new statement is a direct generalization of
`set.finite.image`.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-03-02T16:36:18+00:00](https://github.com/leanprover-community/mathlib/commit/c08701150af191efd3d44b35c808ddadf3ad5d75)
refactor(data/set/finite): make `finite` argument of `set.finite.mem_to_finset` explicit ([#6508](https://github.com/leanprover-community/mathlib/pull/#6508))

This way we can use dot notation.

### [2021-03-02T15:26:34+00:00](https://github.com/leanprover-community/mathlib/commit/9f0f05eee872a4fa66fa15d51b0ba1c1cf58c9b4)
feat(data/{nat,int}/parity): even_mul_succ_self ([#6507](https://github.com/leanprover-community/mathlib/pull/#6507))

### [2021-03-02T08:23:47+00:00](https://github.com/leanprover-community/mathlib/commit/6b5e48d7b59f4ec498644405219a221e2294e756)
feat(data/finset/lattice): +2 induction principles for `finset`s ([#6502](https://github.com/leanprover-community/mathlib/pull/#6502))

### [2021-03-02T06:06:52+00:00](https://github.com/leanprover-community/mathlib/commit/572f7274550cbbde0b5336180154d87e1445efb0)
chore(algebra/big_operators): use weaker typeclass assumptions ([#6503](https://github.com/leanprover-community/mathlib/pull/#6503))

### [2021-03-02T04:20:01+00:00](https://github.com/leanprover-community/mathlib/commit/c69c8a9e8eb60a72a5f5a7619186b6cf83d71ac5)
chore(scripts): update nolints.txt ([#6499](https://github.com/leanprover-community/mathlib/pull/#6499))

I am happy to remove some nolints for you!

### [2021-03-02T02:22:47+00:00](https://github.com/leanprover-community/mathlib/commit/f63069f3d07d29900a0892af18610fa991f042ae)
feat(linear_algebra/basic): simp lemmas about endomorphisms ([#6452](https://github.com/leanprover-community/mathlib/pull/#6452))

Also renames some lemmas:

* `linear_map.one_app` has been renamed to `linear_map.one_apply`
* `linear_map.mul_app` has been removed in favour of the existing `linear_map.mul_app`.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-02T02:22:45+00:00](https://github.com/leanprover-community/mathlib/commit/5c016137dd39d63112646c04432491130c6f5713)
feat(analysis/special_functions/integrals): some simple integration lemmas ([#6216](https://github.com/leanprover-community/mathlib/pull/#6216))

Integration of some simple functions, including `sin`, `cos`, `pow`, and `inv`. @ADedecker and I are working on the integrals of some more intricate functions, which we hope to add in a subsequent (series of) PR(s).

With this PR, simple integrals are now computable by `norm_num`. Here are some examples:
```
import analysis.special_functions.integrals
open real interval_integral
open_locale real

example : ∫ x in 0..π, sin x = 2 := by norm_num
example : ∫ x in 0..π/4, cos x = sqrt 2 / 2 := by simp
example : ∫ x:ℝ in 2..4, x^(3:ℕ) = 60 := by norm_num
example : ∫ x in 0..2, -exp x = 1 - exp 2 := by simp
example : ∫ x:ℝ in (-1)..4, x = 15/2 := by norm_num
example : ∫ x:ℝ in 8..11, (1:ℝ) = 3 := by norm_num
example : ∫ x:ℝ in 2..3, x⁻¹ = log (3/2) := by norm_num
example : ∫ x:ℝ in 0..1, 1 / (1 + x^2) = π/4 := by simp
```
`integral_deriv_eq_sub'` courtesy of @gebner.

### [2021-03-02T00:24:51+00:00](https://github.com/leanprover-community/mathlib/commit/5eb7ebbb13fc12fa92cc3e2d588b78719a2097c8)
feat(data/polynomial): lemmas about polynomial derivative ([#6433](https://github.com/leanprover-community/mathlib/pull/#6433))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-03-01T21:31:43+00:00](https://github.com/leanprover-community/mathlib/commit/03344754bb17df95938c8beb8a618a118243ac3c)
ci(scripts/detect_errors): try to show info messages in a way github understands ([#6493](https://github.com/leanprover-community/mathlib/pull/#6493))

I don't actually know if this works, but I know that the previous code was not working:

https://github.com/leanprover-community/mathlib/pull/6485/checks?check_run_id=2006396264#step:7:7



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-03-01T21:31:42+00:00](https://github.com/leanprover-community/mathlib/commit/0a5f69ccba193d22af1ff54546761f0c6a6f10a1)
feat(src/order/basic): show injectivity of order conversions, and tag lemmas with ext ([#6490](https://github.com/leanprover-community/mathlib/pull/#6490))

Stating these as `function.injective` provides slightly more API, especially since before only the composition was proven as injective.

For convenience, this leaves behind `preorder.ext`, `partial_order.ext`, and `linear_order.ext`, although these are now provable with trivial applications of `ext`.

### [2021-03-01T21:31:41+00:00](https://github.com/leanprover-community/mathlib/commit/cc57915491d0c47e01c7b416e12431a5d69a971a)
chore(data/equiv/basic): add simp lemmas about subtype_equiv ([#6479](https://github.com/leanprover-community/mathlib/pull/#6479))

### [2021-03-01T21:31:40+00:00](https://github.com/leanprover-community/mathlib/commit/354fda08a042a3b29b4db15b6c336e641f4d69e3)
feat(linear_algebra/finsupp): add mem_span_set ([#6457](https://github.com/leanprover-community/mathlib/pull/#6457))

From the doc-string:

If `m ∈ M` is contained in the `R`-submodule spanned by a set `s ⊆ M`, then we can write
`m` as a finite `R`-linear combination of elements of `s`.
The implementation uses `finsupp.sum`.

The initial proof was a substantial simplification of mine, due to Kevin Buzzard.  The final one is due to Eric Wieser.

Zulip discussion for the proof:
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/submodule.2Espan.20as_sum

Zulip discussion for the universe issue:
https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe.20issue.20with.20.60Type*.60

### [2021-03-01T21:31:39+00:00](https://github.com/leanprover-community/mathlib/commit/e0a4dd88f6e619af7ceef318fef8a60778fd7872)
feat(ring_theory/finiteness): improve API for finite presentation ([#6382](https://github.com/leanprover-community/mathlib/pull/#6382))

Improve the API for finitely presented morphism. I changed the name from `algebra.finitely_presented` to `algebra.finite_presentation` that seems more coherent with the other names.

Coming soon: transitivity of finite presentation.

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-03-01T18:58:11+00:00](https://github.com/leanprover-community/mathlib/commit/0faa78806ea202870118e8614f582ede2c045a8a)
feat(ring_theory/hahn_series): introduce ring of Hahn series ([#6237](https://github.com/leanprover-community/mathlib/pull/#6237))

Defines Hahn series
Provides basic algebraic structure on Hahn series, up to `comm_ring`.

### [2021-03-01T15:40:36+00:00](https://github.com/leanprover-community/mathlib/commit/e77f071c7aee780fc93f7b09f14d9d6403297c1f)
feat(linear_algebra/{clifford,exterior,tensor}_algebra): add induction principles ([#6416](https://github.com/leanprover-community/mathlib/pull/#6416))

These are closely derived from the induction principle for the free algebra.
I can't think of a good way to deduplicate them, so for now I've added comments making it clear to the reader that the code is largely copied.

### [2021-03-01T10:35:11+00:00](https://github.com/leanprover-community/mathlib/commit/aff6bd1b9df00a41b8590fbe38267580629de62d)
fix(group_action/defs): make mul_action.regular an instance ([#6241](https://github.com/leanprover-community/mathlib/pull/#6241))

This is essentially already an instance via `semiring.to_semimodule.to_distrib_mul_action.to_mul_action`, but with an unecessary `semiring R` constraint.

I can't remember the details, but I've run into multiple instance resolution issues in the past that were resolved with `local attribute [instance] mul_action.regular`.

This also renames the instance to `monoid.to_mul_action` for consistency with `semiring.to_semimodule`.

### [2021-03-01T04:31:52+00:00](https://github.com/leanprover-community/mathlib/commit/6ac19b46508cdbf3989105aa5e9bb7c3e9d15f78)
doc(algebra/ring/basic): change pullback and injective to pushforward and surjective ([#6487](https://github.com/leanprover-community/mathlib/pull/#6487))

Zulip reference:
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/pullback.20vs.20pushforward

### [2021-03-01T01:14:26+00:00](https://github.com/leanprover-community/mathlib/commit/9ad469d811fb5cfbc392207976dfe9d14fea86b9)
chore(scripts): update nolints.txt ([#6486](https://github.com/leanprover-community/mathlib/pull/#6486))

I am happy to remove some nolints for you!

### [2021-02-28T22:54:58+00:00](https://github.com/leanprover-community/mathlib/commit/13f30e53194d0ec83a2d1598479b5f6fc19d410a)
feat(geometry/manifold): `ext_chart_at` is smooth on its source ([#6473](https://github.com/leanprover-community/mathlib/pull/#6473))

### [2021-02-28T22:54:57+00:00](https://github.com/leanprover-community/mathlib/commit/83bc6634cb6c840dadb736a18eb60b7556c4adbb)
feat(category_theory/monoidal): skeleton of a monoidal category is a monoid ([#6444](https://github.com/leanprover-community/mathlib/pull/#6444))

### [2021-02-28T22:54:56+00:00](https://github.com/leanprover-community/mathlib/commit/1e45472a08f9272caf8bdf64d95da0ce1f815ff7)
feat(analysis/calculus): Lagrange multipliers ([#6431](https://github.com/leanprover-community/mathlib/pull/#6431))

### [2021-02-28T20:56:20+00:00](https://github.com/leanprover-community/mathlib/commit/18804b20bf5c73526837765e3c8ee38591acfb18)
chore(category/equivalence): remove functor.fun_inv_id ([#6450](https://github.com/leanprover-community/mathlib/pull/#6450))

`F.fun_inv_id` was just a confusing alternative way to write `F.as_equivalence.unit_iso.symm`, and meant that many lemmas couldn't fire.

Deletes the definitions `functor.fun_inv_id` and `functor.inv_hom_id`, and the lemmas `is_equivalence.functor_unit_comp` and `is_equivalence.inv_fun_id_inv_comp`.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-28T20:56:19+00:00](https://github.com/leanprover-community/mathlib/commit/ac3c478717cc00930d93f0dbd957dbde74bab953)
feat(archive/100-theorems-list/9_area_of_a_circle): area of a disc ([#6374](https://github.com/leanprover-community/mathlib/pull/#6374))

Freek № 9: The area of a disc with radius _r_ is _πr²_.

Also included are an `of_le` version of [FTC-2 for the open set](https://leanprover-community.github.io/mathlib_docs/find/interval_integral.integral_eq_sub_of_has_deriv_at') and the definition `nnreal.pi`.

Co-authored by @asouther4  and @jamesa9283.



Co-authored-by: Andrew Souther <asouther@fordham.edu>
Co-authored-by: Benjamin Davidson <68528197+benjamindavidson@users.noreply.github.com>
Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2021-02-28T17:40:43+00:00](https://github.com/leanprover-community/mathlib/commit/b18186600a6423bf85f3a74d69b04dbbd345ca03)
feat(data/set): more lemmas ([#6474](https://github.com/leanprover-community/mathlib/pull/#6474))

### [2021-02-28T10:49:48+00:00](https://github.com/leanprover-community/mathlib/commit/ef5c1d50c3f95b3c8cda0bb843305eacdfde69ca)
feat(analysis/special_functions/pow): smoothness of `complex.cpow` ([#6447](https://github.com/leanprover-community/mathlib/pull/#6447))

* `x ^ y` is smooth in both variables at `(x, y)`, if `0 < re x` or
  `im x ≠ 0`;
* `x ^ y` is smooth in `y` if `x ≠ 0` or `y ≠ 0`.

### [2021-02-28T07:50:15+00:00](https://github.com/leanprover-community/mathlib/commit/abb3121f210743a930dea73cd766d988079bdf8b)
chore(*): more line lengths ([#6472](https://github.com/leanprover-community/mathlib/pull/#6472))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-28T04:58:12+00:00](https://github.com/leanprover-community/mathlib/commit/f153a85a8dc0a96ce9133fed69e34df72f7f191f)
chore(category_theory/*): fix long lines ([#6471](https://github.com/leanprover-community/mathlib/pull/#6471))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-28T04:58:11+00:00](https://github.com/leanprover-community/mathlib/commit/c7a2d6703b50e290c66432918620dd2351095d41)
refactor(analysis/calculus/specific_functions): add params to `smooth_bump_function` ([#6467](https://github.com/leanprover-community/mathlib/pull/#6467))

In the construction of a partition of unity we need a smooth bump
function that vanishes outside of `ball x R` and equals one on
`closed_ball x r` with arbitrary `0 < r < R`.

### [2021-02-28T04:58:10+00:00](https://github.com/leanprover-community/mathlib/commit/cc3e2c7726f184e2e9654902e0aa680be4259f5f)
feat(linear_algebra/basic): f x ∈ submodule.span R (f '' s) ([#6453](https://github.com/leanprover-community/mathlib/pull/#6453))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-28T01:58:42+00:00](https://github.com/leanprover-community/mathlib/commit/ee1947d744aea2e0a0d08cacbd14dbfd72f51f54)
chore(scripts): update nolints.txt ([#6468](https://github.com/leanprover-community/mathlib/pull/#6468))

I am happy to remove some nolints for you!

### [2021-02-28T01:58:42+00:00](https://github.com/leanprover-community/mathlib/commit/5b18369aedb3ce7a247d182f636d0c553002e126)
feat(ring_theory/power_series): coeff multiplication lemmas ([#6462](https://github.com/leanprover-community/mathlib/pull/#6462))

Some lemmas used in combinatorics, from [#4259](https://github.com/leanprover-community/mathlib/pull/#4259).

### [2021-02-28T01:58:41+00:00](https://github.com/leanprover-community/mathlib/commit/11f18015290b62e4e94a5356e7e5333622484469)
feat(linear_algebra/quadratic_form): add associated_eq_self_apply ([#6458](https://github.com/leanprover-community/mathlib/pull/#6458))

### [2021-02-28T01:58:40+00:00](https://github.com/leanprover-community/mathlib/commit/9668bdd55716c3e839e933bb76fa0eba35eeff21)
feat(algebra/category/Mon/adjunctions): adjoin_unit adjunction from Semigroup ([#6440](https://github.com/leanprover-community/mathlib/pull/#6440))

This PR provides the adjoin_unit-forgetful adjunction between `Semigroup` and `Mon` and additionally the second to last module doc in algebra, namely `algebra.group.with_one`.

### [2021-02-27T23:21:06+00:00](https://github.com/leanprover-community/mathlib/commit/09d572d72277eda482958f8e89cb8bcdb7eccb3b)
feat(algebra/big_operators): additive versions of multiset lemmas ([#6463](https://github.com/leanprover-community/mathlib/pull/#6463))

### [2021-02-27T19:21:16+00:00](https://github.com/leanprover-community/mathlib/commit/aa0b274b260f64ee5c9c2944fe4f64142e549fab)
chore(*): split lines and move module doc `measure_theory/category/Meas` ([#6459](https://github.com/leanprover-community/mathlib/pull/#6459))

### [2021-02-27T19:21:15+00:00](https://github.com/leanprover-community/mathlib/commit/d1b7a676e5e084c48f4b08f6171e034c6a0a1e9c)
feat(ring_theory/power_series/basic): coeff_zero_X_mul ([#6445](https://github.com/leanprover-community/mathlib/pull/#6445))




Co-authored-by: Moritz Firsching <firsching@google.com>

### [2021-02-27T16:06:18+00:00](https://github.com/leanprover-community/mathlib/commit/a19af600930a17c0da5ebe0ca8d796d877f0ec35)
feat(data/option): add `option.forall` and `option.exists` ([#6419](https://github.com/leanprover-community/mathlib/pull/#6419))

### [2021-02-27T12:58:12+00:00](https://github.com/leanprover-community/mathlib/commit/4b02853b97e582211f5e13c2f17267936a47bc77)
feat(tactic/apply_fun): work on the goal as well ([#6439](https://github.com/leanprover-community/mathlib/pull/#6439))

Extend the functionality of `apply_fun`, to "apply" functions to inequalities in the goal, as well.

```
Apply a function to an equality or inequality in either a local hypothesis or the goal.

* If we have `h : a = b`, then `apply_fun f at h` will replace this with `h : f a = f b`.
* If we have `h : a ≤ b`, then `apply_fun f at h` will replace this with `h : f a ≤ f b`,
  and create a subsidiary goal `monotone f`.
  `apply_fun` will automatically attempt to discharge this subsidiary goal using `mono`,
  or an explicit solution can be provided with `apply_fun f at h using P`, where `P : monotone f`.
* If the goal is `a ≠ b`, `apply_fun f` will replace this with `f a ≠ f b`.
* If the goal is `a = b`, `apply_fun f` will replace this with `f a = f b`,
  and create a subsidiary goal `injective f`.
  `apply_fun` will automatically attempt to discharge this subsidiary goal using local hypotheses,
  or if `f` is actually an `equiv`,
  or an explicit solution can be provided with `apply_fun f using P`, where `P : injective f`.
* If the goal is `a ≤ b` (or similarly for `a < b`), and `f` is actually an `order_iso`,
  `apply_fun f` will replace the goal with `f a ≤ f b`.
  If `f` is anything else (e.g. just a function, or an `equiv`), `apply_fun` will fail.
```

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-27T09:13:13+00:00](https://github.com/leanprover-community/mathlib/commit/7256361aef91a14aba4359c0ea96a8a4b5573525)
chore(data/nat/choose): fix namespace of theorems ([#6451](https://github.com/leanprover-community/mathlib/pull/#6451))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-27T09:13:12+00:00](https://github.com/leanprover-community/mathlib/commit/5f68d0e59b10ef0aa5775022740bcb8157ddb616)
feat(ring_theory/power_series/basic): rescale_inj ([#6446](https://github.com/leanprover-community/mathlib/pull/#6446))

Authored-by Ashvni Narayanan



Co-authored-by: Moritz Firsching <firsching@google.com>

### [2021-02-27T09:13:11+00:00](https://github.com/leanprover-community/mathlib/commit/f33418a9548508e85e1ceab70abe3c77fc38eff4)
feat(algebra/homology/chain_complex): pushforward of complex w.r.t. additive functor ([#6403](https://github.com/leanprover-community/mathlib/pull/#6403))

This PR adds a definition for the pushforward of a homological complex with respect to an additive functor.

### [2021-02-27T06:20:12+00:00](https://github.com/leanprover-community/mathlib/commit/7ce01bbc4cc52815601939a36f4a7e4a2414c900)
feat(category_theory/skeletal): skeleton of a general category ([#6443](https://github.com/leanprover-community/mathlib/pull/#6443))

Construct the skeleton of a category using choice.

### [2021-02-27T01:15:38+00:00](https://github.com/leanprover-community/mathlib/commit/1af882b42d509c2c910da778e24ee00baec5bb83)
chore(scripts): update nolints.txt ([#6449](https://github.com/leanprover-community/mathlib/pull/#6449))

I am happy to remove some nolints for you!

### [2021-02-26T23:38:23+00:00](https://github.com/leanprover-community/mathlib/commit/d38b5a5035cee6ce3d3bdd3334876e1074fdd56a)
feat(category_theory/monoidal): construct the monoidal inverse to a functor ([#6442](https://github.com/leanprover-community/mathlib/pull/#6442))

I worked out what was mentioned here: https://github.com/leanprover-community/mathlib/blob/20b49fbd453fc42c91c36ee30ecb512d70f48172/src/category_theory/monoidal/transport.lean#L283-L287

except for uniqueness, not sure how important that is

### [2021-02-26T21:29:04+00:00](https://github.com/leanprover-community/mathlib/commit/a225e12cc2660edf540993b2fd5bc65980becb5e)
feat(linear_algebra/basic): add is_scalar_tower instance for hom type ([#6331](https://github.com/leanprover-community/mathlib/pull/#6331))

This instance tells Lean that if R is an S-algebra with R and S both commutative semirings, then the R-action on Hom_R(M,N) is compatible with the S-action.

`linear_map.is_scalar_tower_extend_scalars` is just a special case of this new instance with the `smul_comm_class` arguments populated with `is_scalar_tower.to_smul_comm_class` and `smul_comm_class_self`, so has been removed.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-02-26T20:32:43+00:00](https://github.com/leanprover-community/mathlib/commit/407615e05814e98b24b2ff322b14e8e3eb5e5d67)
feat(algebra/lie/solvable): images of solvable Lie algebras are solvable ([#6413](https://github.com/leanprover-community/mathlib/pull/#6413))

Summary of changes:

New definition:
 - `lie_hom.range_restrict`

New lemmas:
 - `lie_ideal.derived_series_map_eq`
 - `function.surjective.lie_algebra_is_solvable`
 - `lie_algebra.solvable_iff_equiv_solvable`
 - `lie_hom.is_solvable_range`
 - `lie_hom.mem_range_self`
 - `lie_hom.range_restrict_apply`
 - `lie_hom.surjective_range_restrict`

Renamed lemmas:
 - `lie_algebra.is_solvable_of_injective` → `function.injective.lie_algebra_is_solvable`
 - `lie_ideal.derived_series_map_le_derived_series` → `lie_ideal.derived_series_map_le`

### [2021-02-26T19:47:44+00:00](https://github.com/leanprover-community/mathlib/commit/ddefd9654e37cc0bee4b130d195e84750dc27b6a)
feat(category_theory/subobject): kernels and images as subobjects ([#6301](https://github.com/leanprover-community/mathlib/pull/#6301))

Further work on subobjects,  building on the initial definition in [#6278](https://github.com/leanprover-community/mathlib/pull/#6278).

* Add noncomputable functions to obtain representatives of subobjects.
* Realise kernel/equalizer/image as subobjects.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-26T15:56:35+00:00](https://github.com/leanprover-community/mathlib/commit/11e1cc36ac3f71f3dc97c68a0ba3bae5ab46552a)
feat(data/equiv/basic): Add `fin_succ_above_equiv` ([#5145](https://github.com/leanprover-community/mathlib/pull/#5145))



Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>
Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-02-26T13:13:36+00:00](https://github.com/leanprover-community/mathlib/commit/20b49fbd453fc42c91c36ee30ecb512d70f48172)
feat(linear_algebra/tensor_product): allow different semirings in linear_map.flip ([#6414](https://github.com/leanprover-community/mathlib/pull/#6414))

This also means the `map_*₂` lemmas are more generally applicable to linear_maps over different rings, such as `linear_map.prod_equiv.to_linear_map`.

To avoid breakage, this leaves `mk₂ R` for when R is commutative, and introduces `mk₂' R S` for when two different rings are wanted.

### [2021-02-26T13:13:35+00:00](https://github.com/leanprover-community/mathlib/commit/47b62ea4dc425772891b1c101c9f9f7ce6fdea42)
feat(algebra/big_operators): add lemmas about `sum` and `pi.single` ([#6390](https://github.com/leanprover-community/mathlib/pull/#6390))

### [2021-02-26T10:06:30+00:00](https://github.com/leanprover-community/mathlib/commit/aeda3fb78f7bd7310138b340ff37cc0160ec5a50)
feat(topology/instances/real, topology/metric_space/basic, algebra/floor): integers are a proper space ([#6437](https://github.com/leanprover-community/mathlib/pull/#6437))

The metric space `ℤ` is a proper space.  Also, under the coercion from `ℤ` to `ℝ`, inverse images of compact sets are finite.

The key point for both facts is to express the inverse image of an `ℝ`-interval under the coercion as an appropriate `ℤ`-interval, using floor or ceiling of the endpoints -- I provide these facts as simp-lemmas.

Indirectly related discussion:
https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Finiteness.20of.20balls.20in.20the.20integers

### [2021-02-26T10:06:29+00:00](https://github.com/leanprover-community/mathlib/commit/ff5fa5291250758860529c47c21da58da1a61817)
chore(data/finsupp/basic): add coe_{neg,sub,smul} lemmas to match coe_{zero,add,fn_sum} ([#6350](https://github.com/leanprover-community/mathlib/pull/#6350))

This also:
* merges together `smul_apply'` and `smul_apply`, since the latter is just a special case of the former.
* changes the implicitness of arguments to all of the `finsupp.*_apply` lemmas so that all the variables and none of the types are explicit

The whitespace style here matches how `coe_add` is spaced.

### [2021-02-26T10:06:28+00:00](https://github.com/leanprover-community/mathlib/commit/dd5363b5af78f4023901dd38b4b246dc3d50541a)
feat(algebraic_topology): introduce the simplex category ([#6173](https://github.com/leanprover-community/mathlib/pull/#6173))

* introduce `simplex_category`, with objects `nat` and morphisms `n ⟶ m` order-preserving maps from `fin (n+1)` to `fin (m+1)`.
* prove the simplicial identities
* show the category is equivalent to `NonemptyFinLinOrd`

This is the start of simplicial sets, moving and completing some of the material from @jcommelin's `sset` branch. Dold-Kan is the obvious objective; apparently we're going to need it for `lean-liquid` at some point.

The proofs of the simplicial identities are bad and slow. They involve extravagant use of nonterminal simp (`simp?` doesn't seem to give good answers) and lots of `linarith` bashing. Help welcome, especially if you love playing with inequalities in `nat` involving lots of `-1`s.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-02-26T07:13:25+00:00](https://github.com/leanprover-community/mathlib/commit/2f1de3f750aa52f2d24367c9d5f75c15308b943e)
feat(polynomial/eval): lemmas relating eval/map on numerals ([#6438](https://github.com/leanprover-community/mathlib/pull/#6438))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-02-26T07:13:24+00:00](https://github.com/leanprover-community/mathlib/commit/300e81de4e0a2fce638150ea35995e98c05ee34d)
feat(analysis/complex/basic): complex conjugation is a linear isometry ([#6436](https://github.com/leanprover-community/mathlib/pull/#6436))

Complex conjugation is a linear isometry (and various corollaries, eg it is a continuous linear map).

Also rewrite the results that `re` and `im` are continuous linear maps, to deduce from explicit bounds rather than passing through `linear_map.continuous_of_finite_dimensional`.

### [2021-02-26T07:13:23+00:00](https://github.com/leanprover-community/mathlib/commit/274042d55a39e1a64fcacd5ddac0ba763cf628bd)
feat(data/polynomial): basic lemmas ([#6434](https://github.com/leanprover-community/mathlib/pull/#6434))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-26T07:13:22+00:00](https://github.com/leanprover-community/mathlib/commit/cca22d7bddf669d477d9c5d50be19b776eba1f50)
feat(data/polynomial/degree/trailing_degree): Trailing degree of multiplication by X^n ([#6425](https://github.com/leanprover-community/mathlib/pull/#6425))

A lemma about the trailing degree of a shifted polynomial.

(this PR is part of the irreducibility saga)

### [2021-02-26T07:13:21+00:00](https://github.com/leanprover-community/mathlib/commit/24ed74a20dd7f06a2b337e32ecda7a6cf42ddf59)
feat(algebra/category/Semigroup/basic): categories of magmas and semigroups ([#6387](https://github.com/leanprover-community/mathlib/pull/#6387))

This PR introduces the category of magmas and the category of semigroups, together with their additive versions.



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-26T07:13:20+00:00](https://github.com/leanprover-community/mathlib/commit/aafa5fe48362cfdc4d11e997897cc28adda0f883)
feat(ring_theory/flat): definition of flat module ([#6284](https://github.com/leanprover-community/mathlib/pull/#6284))

### [2021-02-26T07:13:19+00:00](https://github.com/leanprover-community/mathlib/commit/d451876b88b5dfe795dd6bb58c9d5210100ef265)
doc(data/finset/basic): rewrite finset module doc ([#5893](https://github.com/leanprover-community/mathlib/pull/#5893))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: Hanting Zhang <76727734+acxxa@users.noreply.github.com>

### [2021-02-26T04:07:32+00:00](https://github.com/leanprover-community/mathlib/commit/07d6d3f1da4b92bc578fce22c238992b000bc7bb)
feat(algebra/algebra/basic): smul_mul_smul ([#6423](https://github.com/leanprover-community/mathlib/pull/#6423))

An identity for algebras.

(this PR is part of the irreducibility saga)

### [2021-02-26T04:07:31+00:00](https://github.com/leanprover-community/mathlib/commit/0035e2dd30b71232b3bf7d0827eeaa0c002c1825)
chore(*): upgrade to Lean 3.27.0c ([#6411](https://github.com/leanprover-community/mathlib/pull/#6411))




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2021-02-26T04:07:31+00:00](https://github.com/leanprover-community/mathlib/commit/5fbebf670dc5d2233f0ff3877410e1599021087a)
fix(logic/{function}/basic): remove simp lemmas `function.injective.eq_iff` and `imp_iff_right` ([#6402](https://github.com/leanprover-community/mathlib/pull/#6402))

* `imp_iff_right` is a conditional simp lemma that matches a lot and should never successfully rewrite.
* `function.injective.eq_iff` is a conditional simp lemma that matches a lot and is rarely used. Since you almost always need to give the proof `hf : function.injective f` as an argument to `simp`, you can replace it with `hf.eq_iff`.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2021-02-26T03:21:37+00:00](https://github.com/leanprover-community/mathlib/commit/093888086c67331db6c365194143d5cf139d3967)
chore(scripts): update nolints.txt ([#6432](https://github.com/leanprover-community/mathlib/pull/#6432))

I am happy to remove some nolints for you!

### [2021-02-26T00:42:52+00:00](https://github.com/leanprover-community/mathlib/commit/521b8211594d4307fa807511865877a71ba70bb5)
feat(data/polynomial/basic): monomial_left_inj ([#6430](https://github.com/leanprover-community/mathlib/pull/#6430))

A version of `finsupp.single_left_inj` for monomials, so that it works with `rw.`

(this PR is part of the irreducibility saga)

### [2021-02-26T00:42:51+00:00](https://github.com/leanprover-community/mathlib/commit/84ca016d2a1ef43f303b3f053872622561251ea9)
feat(data/polynomial/coeff): Alternate form of coeff_mul_X_pow ([#6424](https://github.com/leanprover-community/mathlib/pull/#6424))

An `ite`-version of `coeff_mul_X_pow` that sometimes works better with `rw`.

(this PR is part of the irreducibility saga)

### [2021-02-26T00:42:50+00:00](https://github.com/leanprover-community/mathlib/commit/49d2191b66bac1cbe9f20076ae5228502a162c5a)
feat(data/polynomial/basic): monomial_neg ([#6422](https://github.com/leanprover-community/mathlib/pull/#6422))

The monomial of a negation is the negation of the monomial.

(this PR is part of the irreducibility saga)

### [2021-02-26T00:42:49+00:00](https://github.com/leanprover-community/mathlib/commit/f34fa5fc8a207d469bd3b6d62cc88a665934d874)
feat(algebra/algebra/subalgebra): use opt_param for redundant axioms ([#6417](https://github.com/leanprover-community/mathlib/pull/#6417))

### [2021-02-26T00:42:48+00:00](https://github.com/leanprover-community/mathlib/commit/9d5088a22259ed2ac01a88c45321fc0a7c3e5917)
feat(linear_algebra/pi): add `linear_equiv.pi` ([#6415](https://github.com/leanprover-community/mathlib/pull/#6415))

### [2021-02-26T00:42:47+00:00](https://github.com/leanprover-community/mathlib/commit/61028ed19d6cb24bedf4e3075c0e2eff591d48a2)
chore(number_theory/bernoulli): use factorial notation ([#6412](https://github.com/leanprover-community/mathlib/pull/#6412))

### [2021-02-26T00:42:46+00:00](https://github.com/leanprover-community/mathlib/commit/275593981939f8ac937d6ba16ea80a970f29d011)
feat(data/pnat/basic): add induction principle ([#6410](https://github.com/leanprover-community/mathlib/pull/#6410))

An induction principle for `pnat`.  The proof is by Mario Carneiro.  If there are mistakes, I introduced them!

Zulip discussion:
https://leanprover.zulipchat.com/#narrow/stream/267928-condensed-mathematics/topic/torsion.20free/near/227748865

### [2021-02-26T00:42:45+00:00](https://github.com/leanprover-community/mathlib/commit/6ed8b4b0b1e888016e16d3d835be6da5570abcab)
feat(linear_algebra/finite_dimensional): lemmas for zero dimensional vector spaces ([#6397](https://github.com/leanprover-community/mathlib/pull/#6397))

### [2021-02-25T21:38:34+00:00](https://github.com/leanprover-community/mathlib/commit/d4966769c6944fe6752480d896b0988e3840fc9b)
feat(geometry/manifold): manifold modelled on locally compact vector space is locally compact ([#6394](https://github.com/leanprover-community/mathlib/pull/#6394))

Also connect `locally_compact_space` to `filter.has_basis`.

### [2021-02-25T21:38:33+00:00](https://github.com/leanprover-community/mathlib/commit/8770f5c761ad25dd93a9e25e9a5ae02cad34cc33)
refactor(topology/subset_properties): more properties of `compact_covering` ([#6328](https://github.com/leanprover-community/mathlib/pull/#6328))

Modify the definition of `compact_covering α n` to ensure that it is monotone in `n`.

Also, in a locally compact space, prove the existence of a compact exhaustion, i.e. a sequence which satisfies the properties for `compact_covering` and in which, moreover, the interior of the next set includes the previous set.

### [2021-02-25T15:43:34+00:00](https://github.com/leanprover-community/mathlib/commit/85b5d5cb1069ef41a8e8fe4bfe3b29cd0cfefad1)
refactor(logic/basic): turn *_prop_of_* into congr lemma ([#6406](https://github.com/leanprover-community/mathlib/pull/#6406))

Alternative solution to the exists part of [#6404](https://github.com/leanprover-community/mathlib/pull/#6404).

### [2021-02-25T09:50:19+00:00](https://github.com/leanprover-community/mathlib/commit/e3ae6cd609faa3c77182fbf3e0d4675a57317880)
feat(data/equiv/basic): lemmas about images and preimages ([#6398](https://github.com/leanprover-community/mathlib/pull/#6398))

### [2021-02-25T07:29:30+00:00](https://github.com/leanprover-community/mathlib/commit/56f2c05eafb1a4dec11fca4f6f3786ba88049dfd)
chore(algebra/regular): rename lemma is_regular_of_cancel_monoid_with_zero to is_regular_of_ne_zero ([#6408](https://github.com/leanprover-community/mathlib/pull/#6408))

Change the name of lemma is_regular_of_cancel_monoid_with_zero to the shorter is_regular_of_ne_zero.

Zulip reference:
https://leanprover.zulipchat.com/#narrow/stream/267928-condensed-mathematics

### [2021-02-25T04:10:42+00:00](https://github.com/leanprover-community/mathlib/commit/4b6680a3c6384a9c77bed4064cd0e3e0176bf304)
chore(scripts): update nolints.txt ([#6407](https://github.com/leanprover-community/mathlib/pull/#6407))

I am happy to remove some nolints for you!

### [2021-02-25T04:10:41+00:00](https://github.com/leanprover-community/mathlib/commit/caed8413d5db508c1b0124fc8b299f9a791d0c13)
feat(order/complete_lattice): add complete_lattice.independent.disjoint{_Sup,} ([#6405](https://github.com/leanprover-community/mathlib/pull/#6405))

### [2021-02-25T04:10:40+00:00](https://github.com/leanprover-community/mathlib/commit/9d748f0b5d74e3bccfd99da897b7473778f17eab)
feat(data/finset/basic): mem_map_equiv ([#6399](https://github.com/leanprover-community/mathlib/pull/#6399))

This adds a version of `mem_map` specialized to equivs, which has a better simp-nf.

### [2021-02-25T04:10:39+00:00](https://github.com/leanprover-community/mathlib/commit/eba9be5176c937717ad33be2cfc2a4ca6c5801bb)
feat(ring_theory/power_series/basic): remove const coeff ([#6383](https://github.com/leanprover-community/mathlib/pull/#6383))

This shows that we can factor out X when the constant coefficient is removed from a power series.



Co-authored-by: Moritz Firsching <firsching@google.com>

### [2021-02-25T04:10:38+00:00](https://github.com/leanprover-community/mathlib/commit/a31d06a715307944560be045ff3f10b1d73e4681)
feat(data/zmod/basic): Explicitly state computable right_inverses instead of just surjectivity ([#5797](https://github.com/leanprover-community/mathlib/pull/#5797))

### [2021-02-25T00:30:10+00:00](https://github.com/leanprover-community/mathlib/commit/a518fb8659f097c0638efc41b8711123dd1e459c)
feat(data/list/basic): take_init, take_eq_nil ([#6380](https://github.com/leanprover-community/mathlib/pull/#6380))

### [2021-02-24T22:06:41+00:00](https://github.com/leanprover-community/mathlib/commit/e66e136f48e48c97f953f103d598522abeac481c)
feat(data/mv_polynomial/basic): add two equivs ([#6324](https://github.com/leanprover-community/mathlib/pull/#6324))

Two small lemma about `mv_polynomial` as `R`-algebra.

### [2021-02-24T21:08:03+00:00](https://github.com/leanprover-community/mathlib/commit/ead4731a631f7c55119bb87edd0be5d9c097733d)
feat(geometry/manifold): `model_with_corners` is a `closed_embedding` ([#6393](https://github.com/leanprover-community/mathlib/pull/#6393))

### [2021-02-24T21:08:02+00:00](https://github.com/leanprover-community/mathlib/commit/27b6110e8869959bbfa68522e4f869717b948882)
feat(algebra/lie/cartan_subalgebra): define Cartan subalgebras ([#6385](https://github.com/leanprover-community/mathlib/pull/#6385))

We do this via the normalizer of a Lie subalgebra, which is also defined here.

### [2021-02-24T17:52:02+00:00](https://github.com/leanprover-community/mathlib/commit/25ea4998913d00e14b5e6e5c39dd455253b3e8b6)
feat(data/multiset/basic): subsingleton_equiv_apply' ([#6400](https://github.com/leanprover-community/mathlib/pull/#6400))

### [2021-02-24T17:52:00+00:00](https://github.com/leanprover-community/mathlib/commit/6271fe5b0ddec5e4259339ef9527b21af618feeb)
fix(tactic/delta_instance): beta reduce type of instance ([#6396](https://github.com/leanprover-community/mathlib/pull/#6396))

The delta derive handler was creating instances that weren't beta reduced, which isn't a problem for type class inference but can be unexpected. @gebner fixed the line in doc-gen that assumed beta reduction, but we should also produce the expected instance in the first place.

Zulip: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/doc-gen.20is.20failing



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2021-02-24T15:23:35+00:00](https://github.com/leanprover-community/mathlib/commit/3d9e79078ecc500b7dbc33b51c5ee8301f489fce)
fix(topology/metric_space/cau_seq_filter): remove non-terminal simp ([#6401](https://github.com/leanprover-community/mathlib/pull/#6401))

### [2021-02-24T11:31:20+00:00](https://github.com/leanprover-community/mathlib/commit/12afc98144c73ccf98623817178a5275eaea4d75)
chore(data/matrix/basic): instances for unique, subsing, nontriv, coe ([#6296](https://github.com/leanprover-community/mathlib/pull/#6296))

This adds a coercion to the underlying scalar if the matrix is 1 x 1.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-02-24T09:53:02+00:00](https://github.com/leanprover-community/mathlib/commit/85636f9a9e9baf816228d3514a11749290523067)
feat(data/complex|matrix): instances of star_ordered_ring and star_ordered_algebra ([#4686](https://github.com/leanprover-community/mathlib/pull/#4686))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2021-02-24T06:44:15+00:00](https://github.com/leanprover-community/mathlib/commit/196c2a8af0ceebd0455f3a57d58ee627b9964112)
feat(topology/separation): a cont. function with a cont. left inverse is a closed embedding ([#6329](https://github.com/leanprover-community/mathlib/pull/#6329))

### [2021-02-24T03:38:57+00:00](https://github.com/leanprover-community/mathlib/commit/9bad59cf13af2b53a6c61f6d6c01cf3877e16f11)
chore(scripts): update nolints.txt ([#6389](https://github.com/leanprover-community/mathlib/pull/#6389))

I am happy to remove some nolints for you!

### [2021-02-24T03:38:56+00:00](https://github.com/leanprover-community/mathlib/commit/4a391c9d76da991952516027a5c8a95b4e8d356b)
fix(data/int/basic,category_theory/equivalence): use neg not minus in lemma names ([#6384](https://github.com/leanprover-community/mathlib/pull/#6384))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-24T03:38:55+00:00](https://github.com/leanprover-community/mathlib/commit/358fdf23d3433503489b89bef64185b71c18b6a3)
feat(category_theory/abelian/additive_functor): Adds definition of additive functors ([#6367](https://github.com/leanprover-community/mathlib/pull/#6367))

This PR adds the basic definition of an additive functor.
See associated [zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Additive.20functors/near/227295322).



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2021-02-24T00:38:48+00:00](https://github.com/leanprover-community/mathlib/commit/b4d2ce456108781fd73bfb76418b53d1c2486327)
chore(data/equiv/local_equiv,topology/local_homeomorph,data/set/function): review ([#6306](https://github.com/leanprover-community/mathlib/pull/#6306))

## `data/equiv/local_equiv`:

* move `local_equiv.inj_on` lemmas closer to each other, add missing lemmas;
* rename `local_equiv.bij_on_source` to `local_equiv.bij_on`;
* rename `local_equiv.inv_image_target_eq_souce` to `local_equiv.symm_image_target_eq_souce`;

## `data/set/function`

* add `set.inj_on.mem_of_mem_image`, `set.inj_on.mem_image_iff`, `set.inj_on.preimage_image_inter`;
* add `set.left_inv_on.image_image'` and `set.left_inv_on.image_image`;
* add `function.left_inverse.right_inv_on_range`;
* move `set.inj_on.inv_fun_on_image` to golf the proof;

## `topology/local_homeomorph`

* add lemmas like `local_homeomorph.inj_on`;
* golf the definition of `open_embedding.to_local_homeomorph`, make `f` explicit.

### [2021-02-23T21:11:54+00:00](https://github.com/leanprover-community/mathlib/commit/387db0d96cacb85a06f227ee0466424e4b6aab2b)
feat(data/real/sqrt): add continuity attributes ([#6388](https://github.com/leanprover-community/mathlib/pull/#6388))

I add continuity attributes to `continuous_sqrt` and `continuous.sqrt`.

### [2021-02-23T21:11:53+00:00](https://github.com/leanprover-community/mathlib/commit/8cfada11b533d8f2901260739e98fd25e3cea158)
doc(measure_theory/interval_integral): move comment ([#6386](https://github.com/leanprover-community/mathlib/pull/#6386))

### [2021-02-23T21:11:52+00:00](https://github.com/leanprover-community/mathlib/commit/2d51a449849fef5f161ebe8ba6fe464ff5009e73)
feat(data/list/basic): nth_drop ([#6381](https://github.com/leanprover-community/mathlib/pull/#6381))

### [2021-02-23T21:11:50+00:00](https://github.com/leanprover-community/mathlib/commit/63e75351d5a821af799cab551a5da2148e3b508f)
chore(group_theory/coset): right_coset additions and module doc ([#6371](https://github.com/leanprover-community/mathlib/pull/#6371))

This PR dualises two results from left_coset to right_coset and adds a module doc.



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-02-23T17:14:41+00:00](https://github.com/leanprover-community/mathlib/commit/750d117de21338fb1e161c8596b2c896d69ac84f)
feat(logic/basic): subsingleton_iff_forall_eq ([#6379](https://github.com/leanprover-community/mathlib/pull/#6379))

### [2021-02-23T17:14:40+00:00](https://github.com/leanprover-community/mathlib/commit/59bf982e734e229aa5157ccd23b9aaf4981ffe9c)
feat(algebra/lie/nilpotent): basic facts about nilpotent Lie algebras ([#6378](https://github.com/leanprover-community/mathlib/pull/#6378))



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-02-23T17:14:39+00:00](https://github.com/leanprover-community/mathlib/commit/4b22c39d65ec5e2a45cc01d2bb47e09afafcc082)
feat(ring_theory/power_series/well_known): sum of power of exponentials ([#6368](https://github.com/leanprover-community/mathlib/pull/#6368))




Co-authored-by: Moritz Firsching <firsching@google.com>

### [2021-02-23T17:14:38+00:00](https://github.com/leanprover-community/mathlib/commit/e3d6cf821b3d33f5d7790ae42d702925ff66afc0)
feat(measure_theory/integration): add theorems about the product of independent random variables ([#6106](https://github.com/leanprover-community/mathlib/pull/#6106))

Consider the integral of the product of two random variables. Two random variables are independent if the preimage of all measurable sets are independent variables. Alternatively, if there is a pair of independent measurable spaces (as sigma algebras are independent), then two random variables are independent if they are measurable with respect to them.




Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-02-23T14:09:45+00:00](https://github.com/leanprover-community/mathlib/commit/f84f5b2e2364c66682a58de79553937c55535f63)
feat(category_theory/subobject): the semilattice_inf/sup of subobjects ([#6278](https://github.com/leanprover-community/mathlib/pull/#6278))

# The lattice of subobjects

We define `subobject X` as the quotient (by isomorphisms) of
`mono_over X := {f : over X // mono f.hom}`.

Here `mono_over X` is a thin category (a pair of objects has at most one morphism between them),
so we can think of it as a preorder. However as it is not skeletal, it is not a partial order.

We provide
* `def pullback [has_pullbacks C] (f : X ⟶ Y) : subobject Y ⥤ subobject X`
* `def map (f : X ⟶ Y) [mono f] : subobject X ⥤ subobject Y`
* `def «exists» [has_images C] (f : X ⟶ Y) : subobject X ⥤ subobject Y`
(each first at the level of `mono_over`), and prove their basic properties and relationships.

We also provide the `semilattice_inf_top (subobject X)` instance when `[has_pullback C]`,
and the `semilattice_inf (subobject X)` instance when `[has_images C] [has_finite_coproducts C]`.

## Notes

This development originally appeared in Bhavik Mehta's "Topos theory for Lean" repository,
and was ported to mathlib by Scott Morrison.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-02-23T14:09:44+00:00](https://github.com/leanprover-community/mathlib/commit/7f46c81169668848c435e8579dca700a880ba3ca)
feat(chain_complex): lemmas about eq_to_hom ([#6250](https://github.com/leanprover-community/mathlib/pull/#6250))

Adds two lemmas relating `eq_to_hom` to differentials and chain maps. Useful in the ubiquitous circumstance of having to apply identities in the index of a chain complex.

Also add some `@[reassoc]` tags for convenience.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-23T14:09:43+00:00](https://github.com/leanprover-community/mathlib/commit/8d3efb716f854cc97e2475ecdc87322dcb1d453b)
feat(data/buffer/basic): read and to_buffer lemmas ([#6048](https://github.com/leanprover-community/mathlib/pull/#6048))

### [2021-02-23T10:52:40+00:00](https://github.com/leanprover-community/mathlib/commit/391c90a3dcddb923d75eeef62a6958193d9b3e88)
feat(logic/basic): subsingleton_of_forall_eq ([#6376](https://github.com/leanprover-community/mathlib/pull/#6376))

### [2021-02-23T10:52:39+00:00](https://github.com/leanprover-community/mathlib/commit/e6d23d23baa917192a9ca6dbc998154258dfb407)
feat(ring_theory/power_series/basic): coeff_succ_X_mul ([#6370](https://github.com/leanprover-community/mathlib/pull/#6370))




Co-authored-by: Moritz Firsching <firsching@google.com>

### [2021-02-23T09:46:58+00:00](https://github.com/leanprover-community/mathlib/commit/3ff924897164d7efeea00e77ddfbea6c6bdf863e)
feat({group,ring}_theory/free_*): make free_ring.lift and free_comm_ring.lift equivs ([#6364](https://github.com/leanprover-community/mathlib/pull/#6364))

This also adds `free_ring.hom_ext` and `free_comm_ring.hom_ext`, and deduplicates the definitions of the two lifts by introducing `abelian_group.lift_monoid`.

### [2021-02-23T06:48:15+00:00](https://github.com/leanprover-community/mathlib/commit/b7a7b3d9474ebb0b6b536e80621dcf36862967ff)
feat(algebra/regular): lemmas for powers of regular elements ([#6356](https://github.com/leanprover-community/mathlib/pull/#6356))

Prove that an element is (left/right-)regular iff a power of it is (left/right-)regular.

### [2021-02-23T06:48:15+00:00](https://github.com/leanprover-community/mathlib/commit/ec36fc065fde297567fc93793de6525fdfc0f9fb)
fix(data/set/finite): add decidable assumptions ([#6264](https://github.com/leanprover-community/mathlib/pull/#6264))


Yury's rule of thumb https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/classicalize/near/224871122 says that we should have decidable instances here, because the statements of the lemmas need them (rather than the proofs). I'm making this PR to see if anything breaks.

### [2021-02-23T06:48:14+00:00](https://github.com/leanprover-community/mathlib/commit/680e8eda083a412e205267e312b62183b961bd72)
feat(order/well_founded_set): defining `is_partially_well_ordered` to prove `is_wf.add` ([#6226](https://github.com/leanprover-community/mathlib/pull/#6226))

Defines `set.is_partially_well_ordered s`, equivalent to any infinite sequence to `s` contains an infinite monotone subsequence
Provides a basic API for `set.is_partially_well_ordered`
Proves `is_wf.add` and `is_wf.mul`

### [2021-02-23T05:21:51+00:00](https://github.com/leanprover-community/mathlib/commit/5931c5cb23ec4f358c486dc375a02f86bbdcb279)
lint(set_theory/ordinal): fix def/lemma ([#6369](https://github.com/leanprover-community/mathlib/pull/#6369))

### [2021-02-23T01:14:10+00:00](https://github.com/leanprover-community/mathlib/commit/3c66fd1c3231a9b88d2cd17713bc780e336d0474)
chore(scripts): update nolints.txt ([#6373](https://github.com/leanprover-community/mathlib/pull/#6373))

I am happy to remove some nolints for you!

### [2021-02-22T21:32:01+00:00](https://github.com/leanprover-community/mathlib/commit/7a91822506410f2f2f3c62e12df2da06843ea258)
feat(data/fintype/intervals): Add set.finite lemmas for integer intervals ([#6365](https://github.com/leanprover-community/mathlib/pull/#6365))

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2021-02-22T21:32:00+00:00](https://github.com/leanprover-community/mathlib/commit/c03898458c628195a539b8285dbfd6397e6999b4)
chore(data/equiv/*): add missing coercion lemmas for equivs ([#6268](https://github.com/leanprover-community/mathlib/pull/#6268))

This does not affect the simp-normal form.

This tries to make a lot of lemma names and statements more consistent:
* restates `linear_map.mk_apply` to be `linear_map.coe_mk` to match `monoid_hom.coe_mk`
* adds `linear_map.to_linear_map_eq_coe`
* adds the simp lemma `linear_map.coe_to_equiv`
* adds the simp lemma `linear_map.linear_map.coe_to_linear_map`
* adds the simp lemma `linear_map.to_fun_eq_coe`
* adds the missing `ancestor` attributes required to make `to_additive` work for things like `add_equiv.to_add_hom`
* restates `add_equiv.to_fun_apply` to be `add_equiv.to_fun_eq_coe`
* restates `add_equiv.to_equiv_apply` to be `add_equiv.coe_to_equiv`
* adds the simp lemma `add_equiv.coe_to_mul_hom`
* removes `add_equiv.to_add_monoid_hom_apply` since `add_equiv.coe_to_add_monoid_hom` is a shorter and more general statement
* restates `ring_equiv.to_fun_apply` to be `ring_equiv.to_fun_eq_coe`
* restates `ring_equiv.coe_mul_equiv` to be `ring_equiv.coe_to_mul_equiv`
* restates `ring_equiv.coe_add_equiv` to be `ring_equiv.coe_to_add_equiv`
* restates `ring_equiv.coe_ring_hom` to be `ring_equiv.coe_to_ring_hom`
* adds `ring_equiv.to_ring_hom_eq_coe`
* adds `ring_equiv.to_add_equiv_eq_coe`
* adds `ring_equiv.to_mul_equiv_eq_coe`

### [2021-02-22T18:48:55+00:00](https://github.com/leanprover-community/mathlib/commit/283aafffb276c127a4c3efed7ef12f54b8b4c8ab)
feat(ring_theory/power_series/well_known): power of exponential ([#6330](https://github.com/leanprover-community/mathlib/pull/#6330))

Co-authored by Fabian Kruse





Co-authored-by: Moritz Firsching <moritz.firsching@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-02-22T18:48:54+00:00](https://github.com/leanprover-community/mathlib/commit/0fb6adaeb0d19dae84eaf17dd7c1cf579047ad30)
chore(topology): move `exists_compact_superset`, drop assumption `t2_space` ([#6327](https://github.com/leanprover-community/mathlib/pull/#6327))

Also golf the proof of `is_compact.elim_finite_subcover_image`

### [2021-02-22T18:48:53+00:00](https://github.com/leanprover-community/mathlib/commit/db00ee42899074f1de0e3747e723e1f3351fdd87)
feat(ring_theory/polynomial/basic): add quotient_equiv_quotient_mv_polynomial ([#6287](https://github.com/leanprover-community/mathlib/pull/#6287))

I've added `quotient_equiv_quotient_mv_polynomial` that says that `(R/I)[x_i] ≃+* (R[x_i])/I` where `I` is an ideal of `R`. I've included also a version for `R`-algebras. The proof is very similar to the case of (one variable) polynomials.

### [2021-02-22T18:48:52+00:00](https://github.com/leanprover-community/mathlib/commit/cc9d3ab1984491e8c6090f6f6791693149735f4d)
feat(algebra/module,linear_algebra): generalize `smul_eq_zero` ([#6199](https://github.com/leanprover-community/mathlib/pull/#6199))

Moves the theorem on division rings `smul_eq_zero` to a typeclass `no_zero_smul_divisors` with instances for the previously existing cases. The motivation for this change is that [#6178](https://github.com/leanprover-community/mathlib/pull/#6178) added another `smul_eq_zero`, which could be captured neatly as an instance of the typeclass.

I didn't spend a lot of time yet on figuring out all the necessary instances, first let's see whether this compiles.




Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-22T17:14:14+00:00](https://github.com/leanprover-community/mathlib/commit/7abfbc92eec87190fba3ed3d5ec58e7c167e7144)
doc(references.bib): add witt vector references and normalize ([#6366](https://github.com/leanprover-community/mathlib/pull/#6366))

Now that we're actually displaying these bib links we should pay more attention to them.

Two commits: one adds references for the Witt vector files, the other normalizes the bib file. We can drop the second if people don't care.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2021-02-22T17:14:13+00:00](https://github.com/leanprover-community/mathlib/commit/70d71149a98dbfefd9bfe5a3101b1c3a6d391d9a)
feat(nat/choose): lemmas regarding binomial coefficients ([#6362](https://github.com/leanprover-community/mathlib/pull/#6362))

### [2021-02-22T17:14:10+00:00](https://github.com/leanprover-community/mathlib/commit/4daac6644be46281f01118ab5e4485ba9a4c5376)
chore(field_theory/mv_polynomial): generalised to comm_ring and module doc ([#6341](https://github.com/leanprover-community/mathlib/pull/#6341))

This PR generalises most of `field_theory/mv_polynomial` from polynomial rings over fields to polynomial rings over commutative rings. This is put into a separate file. 

Also renamed the field to K and did one tiny golf.



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-02-22T14:12:42+00:00](https://github.com/leanprover-community/mathlib/commit/6d2726c699bac7678f5dc3330100455952c01c5b)
feat(number_theory/bernoulli): definition and properties of Bernoulli numbers ([#6363](https://github.com/leanprover-community/mathlib/pull/#6363))

### [2021-02-22T14:12:41+00:00](https://github.com/leanprover-community/mathlib/commit/46fb0d8bd03d47f6636ad3924c6ef29a249eb27c)
feat(big_operators/intervals): lemma on dependent double sum ([#6361](https://github.com/leanprover-community/mathlib/pull/#6361))

### [2021-02-22T14:12:40+00:00](https://github.com/leanprover-community/mathlib/commit/12bb9aee6ac7f0b1321a01e04a51736793a6c8df)
chore(linear_algebra/*): split lines and doc `direct_sum/tensor_product` ([#6360](https://github.com/leanprover-community/mathlib/pull/#6360))

This PR provides a short module doc to `direct_sum/tensor_product` (the file contains only one result). Furthermore, it splits lines in the `linear_algebra` folder. 



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-02-22T14:12:39+00:00](https://github.com/leanprover-community/mathlib/commit/a10c19d0a88807ef60f5ff5b164795071e81906f)
doc(group_theory/*): module docs for `quotient_group` and `presented_group` ([#6358](https://github.com/leanprover-community/mathlib/pull/#6358))




Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-02-22T14:12:38+00:00](https://github.com/leanprover-community/mathlib/commit/590442adc3654a68a01d703977075d589c863abe)
feat(topology/subset_properties): locally finite family on a compact space is finite ([#6352](https://github.com/leanprover-community/mathlib/pull/#6352))

### [2021-02-22T14:12:37+00:00](https://github.com/leanprover-community/mathlib/commit/120feb11e35a343f3174ef8a5d74ca95cba858f6)
refactor(order/filter,topology): review API ([#6347](https://github.com/leanprover-community/mathlib/pull/#6347))

### Filters

* move old `filter.map_comap` to `filter.map_comap_of_mem`;
* add a new `filter.map_comap` that doesn't assume `range m ∈ f` but
  gives `map m (comap m f) = f ⊓ 𝓟 (range m)` instead of
  `map m (comap m f) = f`;
* add `filter.comap_le_comap_iff`, use it to golf a couple of proofs;
* move some lemmas using `filter.map_comap`/`filter.map_comap_of_mem`
  closure to these lemmas;
* use `function.injective m` instead of `∀ x y, m x = m y → x = y` in
  some lemmas;
* drop `filter.le_map_comap_of_surjective'`,
  `filter.map_comap_of_surjective'`, and
  `filter.le_map_comap_of_surjective`: the inequalities easily follow
  from equalities, and `filter.map_comap_of_surjective'` is just
  `filter.map_comap_of_mem`+`filter.mem_sets_of_superset`;

### Topology

* add `closed_embedding_subtype_coe`, `ennreal.open_embedding_coe`;
* drop `inducing_open`, `inducing_is_closed`, `embedding_open`, and
  `embedding_is_closed` replace them with `inducing.is_open_map` and
  `inducing.is_closed_map`;
* move old `inducing.map_nhds_eq` to `inducing.map_nhds_of_mem`, the
  new `inducing.map_nhds_eq` says `map f (𝓝 a) = 𝓝[range f] (f a)`;
* add `inducing.is_closed_iff`;
* move old `embedding.map_nhds_eq` to `embedding.map_nhds_of_mem`, the
  new `embedding.map_nhds_eq` says `map f (𝓝 a) = 𝓝[range f] (f a)`;
* add `open_embedding.map_nhds_eq`;
* change signature of `is_closed_induced_iff` to match other similar
  lemmas;
* move old `map_nhds_induced_eq` to `map_nhds_induced_of_mem`, the new
  `map_nhds_induced_eq` give `𝓝[range f] (f a)` instead of `𝓝 (f a)`.

### [2021-02-22T14:12:36+00:00](https://github.com/leanprover-community/mathlib/commit/26e6d4cb122abb1494f8cf33d631726f1707adfa)
feat(algebra/lie/{subalgebra,submodule}): grab bag of new lemmas ([#6342](https://github.com/leanprover-community/mathlib/pull/#6342))

I'm splitting these off from other work to simplify subsequent reviews.
Cosmetic changes aside, the following summarises what I am proposing:

New definitions:
 - `lie_subalgebra.of_le`

Definition tweaks:
 - `lie_hom.range` [use coercion instead of `lie_hom.to_linear_map`]
 - `lie_ideal.map` [factor through `submodule.map` to avoid dropping all the way down to `set.image`]

New lemmas:
 - `lie_ideal.coe_to_lie_subalgebra_to_submodule`
 - `lie_ideal.incl_range`
 - `lie_hom.ideal_range_eq_lie_span_range`
 - `lie_hom.is_ideal_morphism_iff`
 - `lie_subalgebra.mem_range`
 - `lie_subalgebra.mem_map`
 - `lie_subalgebra.mem_of_le`
 - `lie_subalgebra.of_le_eq_comap_incl`
 - `lie_subalgebra.exists_lie_ideal_coe_eq_iff`
 - `lie_subalgebra.exists_nested_lie_ideal_coe_eq_iff`
 - `submodule.exists_lie_submodule_coe_eq_iff`
 - `lie_submodule.coe_lie_span_submodule_eq_iff`

Deleted lemma:
 - `lie_hom.range_bracket`

New simp attributes:
 - `lie_subalgebra.mem_top`
 - `lie_submodule.mem_top`

### [2021-02-22T14:12:35+00:00](https://github.com/leanprover-community/mathlib/commit/78eb83a3c1cef7a36268dd6fe0c05bd5343ea136)
feat(linear_algebra/pi): add `pi.lsum` ([#6335](https://github.com/leanprover-community/mathlib/pull/#6335))

### [2021-02-22T14:12:34+00:00](https://github.com/leanprover-community/mathlib/commit/aa730c63d59ad23a3590679a738b713c6c754f57)
feat(linear_algebra): a module has a unique submodule iff it has a unique element ([#6281](https://github.com/leanprover-community/mathlib/pull/#6281))

Also strengthens the related lemmas about subgroup and submonoid

### [2021-02-22T14:12:33+00:00](https://github.com/leanprover-community/mathlib/commit/ffb6a582032b4e5a9e4e6883a2e65ad81d515a1d)
feat(data/sigma/basic): add a more convenient ext lemma for equality of sigma types over subtypes ([#6257](https://github.com/leanprover-community/mathlib/pull/#6257))

### [2021-02-22T14:12:32+00:00](https://github.com/leanprover-community/mathlib/commit/9d54837a5e9eb12b6409f401fd73168f7ad91bb1)
feat(data/polynomial/degree): lemmas on nat_degree and behaviour under multiplication by constants ([#6224](https://github.com/leanprover-community/mathlib/pull/#6224))

These lemmas extend the API for nat_degree

I intend to use them to work with integrality statements

### [2021-02-22T10:42:24+00:00](https://github.com/leanprover-community/mathlib/commit/87a021cd96bccdac9548eba72f752dc76d601022)
feat(data/quot): `quotient.rec_on_subsingleton` with implicit setoid ([#6346](https://github.com/leanprover-community/mathlib/pull/#6346))

### [2021-02-22T10:42:23+00:00](https://github.com/leanprover-community/mathlib/commit/69b93fcb0eb5df4ebaf3678858609390ecc8dcd1)
fix(data/finsupp/basic): delta-reduce the definition of coe_fn_injective ([#6344](https://github.com/leanprover-community/mathlib/pull/#6344))

Without this, `apply coe_fn_injective` leaves a messy goal that usually has to be `dsimp`ed in order to make progress with `rw`.
With this change, `dsimp` now fails as the goal is already fully delta-reduced.

### [2021-02-22T08:31:25+00:00](https://github.com/leanprover-community/mathlib/commit/0e519766dc3094865dc59425a8f98089f27d6d35)
feat(data/polynomial/reverse): Trailing degree is multiplicative ([#6351](https://github.com/leanprover-community/mathlib/pull/#6351))

Uses `polynomial.reverse` to prove that `nat_trailing_degree` behaves well under multiplication.

### [2021-02-22T06:58:33+00:00](https://github.com/leanprover-community/mathlib/commit/a3d951bc6ee53bcdbcea4080108579fcc62eb5a5)
feat(data/nat/digits): digits injective at fixed base ([#6338](https://github.com/leanprover-community/mathlib/pull/#6338))





Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-02-22T06:58:32+00:00](https://github.com/leanprover-community/mathlib/commit/2b6dec0b8df7715cdd9d2e8a1bd192442b09504d)
feat(algebraic_geometry/prime_spectrum): specialization order ([#6286](https://github.com/leanprover-community/mathlib/pull/#6286))

### [2021-02-22T03:13:35+00:00](https://github.com/leanprover-community/mathlib/commit/dc781774eb6da86b22693565b4172ad0bc65eeb2)
chore(scripts): update nolints.txt ([#6354](https://github.com/leanprover-community/mathlib/pull/#6354))

I am happy to remove some nolints for you!

### [2021-02-22T03:13:34+00:00](https://github.com/leanprover-community/mathlib/commit/2134d0c14e1c5c5e8a1250c2141e936030663623)
feat(algebra/group_power/basic): `abs_lt_abs_of_sqr_lt_sqr` ([#6277](https://github.com/leanprover-community/mathlib/pull/#6277))

These lemmas are (almost) the converses of some of the lemmas I added in [#5933](https://github.com/leanprover-community/mathlib/pull/#5933).

### [2021-02-22T00:01:15+00:00](https://github.com/leanprover-community/mathlib/commit/b8b87559e0ed57d6e0fae29a3f8f381b1131f95e)
feat(data/list/basic): repeat injectivity ([#6337](https://github.com/leanprover-community/mathlib/pull/#6337))





Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-02-21T21:41:23+00:00](https://github.com/leanprover-community/mathlib/commit/87f8db2ed30ebb7174e12a24be34aa4502710447)
feat(data/dfinsupp): add coe lemmas ([#6343](https://github.com/leanprover-community/mathlib/pull/#6343))

These lemmas already exist for `finsupp`, let's add them for `dfinsupp` too.

### [2021-02-21T21:41:22+00:00](https://github.com/leanprover-community/mathlib/commit/96ae2ad102678406f82a6070986437acfd046028)
docs(undergrad.yaml): recent changes ([#6313](https://github.com/leanprover-community/mathlib/pull/#6313))

### [2021-02-21T18:45:11+00:00](https://github.com/leanprover-community/mathlib/commit/4355d17105aac6e4e2e4d2ca3cffd44c61b87533)
chore(topology/order): drop an unneeded argument ([#6345](https://github.com/leanprover-community/mathlib/pull/#6345))

`closure_induced` doesn't need `f` to be injective.

### [2021-02-21T18:45:10+00:00](https://github.com/leanprover-community/mathlib/commit/ab03ebe722f169266dc38e3389d25dfa234afc1c)
feat(data/list/basic): drop_eq_nil_iff_le ([#6336](https://github.com/leanprover-community/mathlib/pull/#6336))

The iff version of a recently added lemma.

### [2021-02-21T15:22:22+00:00](https://github.com/leanprover-community/mathlib/commit/473bb7d4821386cb602090057451c946bd385227)
feat(topology/locally_constant): basics on locally constant functions ([#6192](https://github.com/leanprover-community/mathlib/pull/#6192))

From `lean-liquid`





Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-02-21T06:06:38+00:00](https://github.com/leanprover-community/mathlib/commit/f470cc626093d6a1c4195ab7856c0121ac0d73af)
feat(measure_theory/interval_integral): add simp attribute to `integral_const` ([#6334](https://github.com/leanprover-community/mathlib/pull/#6334))

By adding a `simp` attribute to `interval_integral.integral_const`, the likes of the following become possible:
```
import measure_theory.interval_integral

example : ∫ x:ℝ in 5..19, (12:ℝ) = 168 := by norm_num
```

### [2021-02-21T01:15:37+00:00](https://github.com/leanprover-community/mathlib/commit/4d4c7bb9b210946fd836315c6328d83cfff7e18d)
chore(scripts): update nolints.txt ([#6332](https://github.com/leanprover-community/mathlib/pull/#6332))

I am happy to remove some nolints for you!

### [2021-02-20T21:10:00+00:00](https://github.com/leanprover-community/mathlib/commit/93d17601acdf4bbb2ff0e20fdb13697268036755)
chore(topology/bases): golf a proof ([#6326](https://github.com/leanprover-community/mathlib/pull/#6326))

Also add some supporting lemmas

### [2021-02-20T21:09:59+00:00](https://github.com/leanprover-community/mathlib/commit/08ea23b2106a7bdf00a67a7c50d369218ac9ef82)
refactor(group_theory/free_*): remove API duplicated by lift, promote lift functions to equivs ([#6311](https://github.com/leanprover-community/mathlib/pull/#6311))

This removes:

* `free_group.to_group.to_fun` and `free_group.to_group`, as these are both subsumed by the stronger `lift`.
* `abelianization.hom_equiv` as this is now `abelianization.lift.symm`
* `free_abelian_group.hom_equiv` as this is now `free_abelian_group.lift.symm`

### [2021-02-20T17:42:12+00:00](https://github.com/leanprover-community/mathlib/commit/dccc542186fa30b54629693681ea4b33b4853b57)
fix(algebra/group/pi): remove unnecessary add_monoid requirement from pi.single_zero ([#6325](https://github.com/leanprover-community/mathlib/pull/#6325))

Follows on from [#6317](https://github.com/leanprover-community/mathlib/pull/#6317)

### [2021-02-20T17:42:11+00:00](https://github.com/leanprover-community/mathlib/commit/f0aad5032f80b4cce444f270d1b6dd1ffedffb95)
feat(data/equiv/basic): injective iff injective after composing with equiv ([#6283](https://github.com/leanprover-community/mathlib/pull/#6283))



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-02-20T17:42:10+00:00](https://github.com/leanprover-community/mathlib/commit/ee8708e438e97e8380a8a3e7b41223b5b1debbd5)
feat(algebra/regular): define regular elements ([#6282](https://github.com/leanprover-community/mathlib/pull/#6282))

The goal of this PR is to start the API for regular elements.  The final goal is to talk about non-zero-divisors.

Zulip discussion:
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/is_regular

### [2021-02-20T15:00:59+00:00](https://github.com/leanprover-community/mathlib/commit/1855bd59590895937fe3bc97b82b8266d4a59e83)
chore(*): split lines ([#6323](https://github.com/leanprover-community/mathlib/pull/#6323))

### [2021-02-20T11:52:21+00:00](https://github.com/leanprover-community/mathlib/commit/ed55502f4ea0853d79572c214e11f77b2056aff5)
doc(algebraic_geometry/is_open_comap_C): add reference to Stacks project ([#6322](https://github.com/leanprover-community/mathlib/pull/#6322))

Updated the doc-strings to reference the Stacks project.

Zulip chat:
https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/stacks.20tags

### [2021-02-20T11:52:20+00:00](https://github.com/leanprover-community/mathlib/commit/52e2937956afe911fc25076fd36ed204035fa115)
feat(topology): the currying homeomorphism ([#6319](https://github.com/leanprover-community/mathlib/pull/#6319))

### [2021-02-20T11:52:19+00:00](https://github.com/leanprover-community/mathlib/commit/26d287cc2eebc794e650140707a68900de203868)
doc(ring_theory/*): two module docs ([#6318](https://github.com/leanprover-community/mathlib/pull/#6318))

This PR provides module docs for `ring_theory.polynomial.scale_roots` as well as `ring_theory.multiplicity`. Furthermore, some lines are split in those two files.

### [2021-02-20T11:52:19+00:00](https://github.com/leanprover-community/mathlib/commit/c7c40a7d229465205906637bc600ad270d07f8f5)
feat(*/pi): add lemmas about how `single` interacts with operators ([#6317](https://github.com/leanprover-community/mathlib/pull/#6317))

This also adds a missing pi instances for `monoid_with_zero`.

### [2021-02-20T09:02:14+00:00](https://github.com/leanprover-community/mathlib/commit/4d2dcdb551fba8da3eeaf54e1901f2facb99331d)
chore(*): fix broken Zulip archive links ([#6321](https://github.com/leanprover-community/mathlib/pull/#6321))

### [2021-02-20T01:44:35+00:00](https://github.com/leanprover-community/mathlib/commit/3e381ad0201fa0be84d8987d83222408405ab193)
chore(ring_theory/*): split lines ([#6316](https://github.com/leanprover-community/mathlib/pull/#6316))




Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-02-20T01:44:34+00:00](https://github.com/leanprover-community/mathlib/commit/32b9b214fd394f634168f63e1097c20533b9b6fb)
refactor(linear_algebra/pi): add `linear_map.single` to match `add_monoid_hom.single` ([#6315](https://github.com/leanprover-community/mathlib/pull/#6315))

This changes the definition of `std_basis` to be exactly `linear_map.single`, but proves equality with the old definition.

In future, it might make sense to remove `std_basis` entirely.

### [2021-02-20T01:44:33+00:00](https://github.com/leanprover-community/mathlib/commit/d483bc2ca8aab24bd4bc02b516729f05be34c1f6)
chore(data/indicator_function): add a formula for the support of `indicator` ([#6314](https://github.com/leanprover-community/mathlib/pull/#6314))

* rename `set.support_indicator` to `set.support_indicator_subset`;
* add a new `set.support_indicator`;
* add `function.support_comp_eq_preimage`.

### [2021-02-20T01:01:26+00:00](https://github.com/leanprover-community/mathlib/commit/3ab9818f53982718733f053d6b13908b36052ecd)
chore(scripts): update nolints.txt ([#6320](https://github.com/leanprover-community/mathlib/pull/#6320))

I am happy to remove some nolints for you!

### [2021-02-19T14:14:19+00:00](https://github.com/leanprover-community/mathlib/commit/845654a1e129c0e3978b82234eb931967bbe01c1)
feat(analysis/calculus): define a smooth bump function ([#4458](https://github.com/leanprover-community/mathlib/pull/#4458))

Define an infinitely smooth function which is `1` on the closed ball of radius `1` and is `0` outside of the open ball of radius `2`.

### [2021-02-19T12:23:04+00:00](https://github.com/leanprover-community/mathlib/commit/f6eef43cc0414b5959a8662b14e2a4a41c1b4385)
doc(ring_theory): move some module docstring to correct place ([#6312](https://github.com/leanprover-community/mathlib/pull/#6312))

### [2021-02-19T12:23:03+00:00](https://github.com/leanprover-community/mathlib/commit/aaab8375e8d678c0d1d17a518cd9f9e95ed551dd)
doc(ring_theory/witt_vector/witt_polynomial): move module docstring up ([#6310](https://github.com/leanprover-community/mathlib/pull/#6310))

### [2021-02-19T12:23:02+00:00](https://github.com/leanprover-community/mathlib/commit/0df19987b0bb47eaf55eedda374b27a7a8f26c1a)
doc(set_theory/*): more documentation about cardinals and ordinals ([#6247](https://github.com/leanprover-community/mathlib/pull/#6247))

### [2021-02-19T12:23:01+00:00](https://github.com/leanprover-community/mathlib/commit/114f8ef87582bfc98aaad2acb211aa8c0b547964)
chore(data/buffer/parser/numeral): derive mono for numeral ([#5463](https://github.com/leanprover-community/mathlib/pull/#5463))

Thanks to Rob Lewis, using classes, instances, and the `delta_instance_handler`, transferring over instances becomes very easy.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-02-19T09:04:38+00:00](https://github.com/leanprover-community/mathlib/commit/e5c7789259571987c24fecad47dde854ba0a610f)
fix(lint/type_classes): fix instance_priority bug ([#6305](https://github.com/leanprover-community/mathlib/pull/#6305))

The linter now doesn't fail if the type is a beta redex

### [2021-02-19T07:04:09+00:00](https://github.com/leanprover-community/mathlib/commit/a0e2b3c4379bf1150ab977acc9b29fccd7d04fb1)
chore(topology/Profinite): reduce universe variables ([#6300](https://github.com/leanprover-community/mathlib/pull/#6300))

See https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/universe.20issue

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-19T07:04:08+00:00](https://github.com/leanprover-community/mathlib/commit/64d86f7a5e80d218cf283e6b3c40e8bc98b65e9d)
feat(topology/{subset_properties,separation}): closed subsets of compact t0 spaces contain a closed point ([#6273](https://github.com/leanprover-community/mathlib/pull/#6273))

This adds two statements.  The first is that nonempty closed subsets of a compact space have a minimal nonempty closed subset, and the second is that when the space is additionally T0 then that minimal subset is a singleton.

(This PR does not do this, but one can go on to show that there is functor from compact T0 spaces to T1 spaces by taking the set of closed points, and it preserves nonemptiness.)

### [2021-02-19T04:14:30+00:00](https://github.com/leanprover-community/mathlib/commit/626a4b577bf6101444d7de464fc3588effc06c71)
chore(scripts): update nolints.txt ([#6303](https://github.com/leanprover-community/mathlib/pull/#6303))

I am happy to remove some nolints for you!

### [2021-02-19T04:14:29+00:00](https://github.com/leanprover-community/mathlib/commit/75149c391fc92398c7d4d409c97cb3ac59d2876a)
feat(data/list/basic): tail_drop, cons_nth_le_drop_succ ([#6265](https://github.com/leanprover-community/mathlib/pull/#6265))

### [2021-02-19T00:43:42+00:00](https://github.com/leanprover-community/mathlib/commit/1fecd52f009a8a9ec9aa2f8bea9ed5347acfa2e4)
fix(tactic/push_neg): fully simplify expressions not named `h` ([#6297](https://github.com/leanprover-community/mathlib/pull/#6297))

A final pass of `push_neg` is intended to turn `¬ a = b` into `a ≠ b`.
Unfortunately, when you use `push_neg at ...`, this is applied to the hypothesis literally named `h`.


[Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60push_neg.60.20behaviour.20depends.20on.20variable.20name)



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2021-02-18T23:50:16+00:00](https://github.com/leanprover-community/mathlib/commit/3a8d976975a7b34d345fc8479fc1609d3351e05a)
fix(archive/100/82): remove nonterminal simps ([#6299](https://github.com/leanprover-community/mathlib/pull/#6299))

### [2021-02-18T23:50:15+00:00](https://github.com/leanprover-community/mathlib/commit/86969906a696c2ef22d93d1f604b0c86dddfc203)
feat(category_theory/adjunction/reflective): show compositions of reflective are reflective ([#6298](https://github.com/leanprover-community/mathlib/pull/#6298))

Show compositions of reflective are reflective.

### [2021-02-18T20:23:11+00:00](https://github.com/leanprover-community/mathlib/commit/96f893352b7e3eeb8af75e68ecc569019b716174)
perf(tactic/lint/frontend): run linters in parallel ([#6293](https://github.com/leanprover-community/mathlib/pull/#6293))

With this change it takes 5 minutes instead of 33 minutes to lint mathlib (on my machine...).

https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/linting.20time



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-02-18T16:34:50+00:00](https://github.com/leanprover-community/mathlib/commit/619c1b0dd58a0edeefcdb5af936ab30e39622583)
chore({algebra, algebraic_geometry}/*): move 1 module doc and split lines ([#6294](https://github.com/leanprover-community/mathlib/pull/#6294))

This moves the module doc for `algebra/ordered_group` so that it gets recognised by the linter. Furthermore, several lines are split in the algebra and algebraic_geometry folder.

### [2021-02-18T11:09:39+00:00](https://github.com/leanprover-community/mathlib/commit/5b579a2c3c3706e518dae73630c9397a5f7d900f)
feat(topology/category/profinite): show Profinite is reflective in CompHaus ([#6219](https://github.com/leanprover-community/mathlib/pull/#6219))

Show Profinite is reflective in CompHaus.

### [2021-02-18T09:36:21+00:00](https://github.com/leanprover-community/mathlib/commit/5a5978190b964c43d6688e7f3e96cd458c65622c)
fix(doc/references.bib): fix syntax ([#6290](https://github.com/leanprover-community/mathlib/pull/#6290))

### [2021-02-18T08:05:51+00:00](https://github.com/leanprover-community/mathlib/commit/2a7eafa54c2e63cff56bf8724d18d4f7a410bd76)
feat(order/pfilter): add preorder filters, dual to preorder ideals ([#5928](https://github.com/leanprover-community/mathlib/pull/#5928))

Named `pfilter` to not conflict with the existing `order/filter`,
which is a much more developed theory of a special case of this.

### [2021-02-18T05:31:27+00:00](https://github.com/leanprover-community/mathlib/commit/017acaee0f7c57c39fc9417b668c1813078a05e5)
feat(linear_algebra/dual): adds dual annihilators ([#6078](https://github.com/leanprover-community/mathlib/pull/#6078))

### [2021-02-18T02:18:27+00:00](https://github.com/leanprover-community/mathlib/commit/7c267dfa652ab0ae511c614440b232114f881144)
chore(scripts): update nolints.txt ([#6289](https://github.com/leanprover-community/mathlib/pull/#6289))

I am happy to remove some nolints for you!

### [2021-02-17T23:53:33+00:00](https://github.com/leanprover-community/mathlib/commit/7592a8f4afe1735f2e82f020d55b55f68cbbdb19)
chore(analysis/normed_space/finite_dimension,topology/metric_space): golf ([#6285](https://github.com/leanprover-community/mathlib/pull/#6285))

* golf two proofs about `finite_dimension`;
* move `proper_image_of_proper` to `antilipschitz`, rename to
  `antilipschitz_with.proper_space`, golf.

### [2021-02-17T23:53:32+00:00](https://github.com/leanprover-community/mathlib/commit/bc1c4f24a55dc1618043fa59c15a258a88b4e35d)
feat(data/zmod/basic): add simp lemmas about coercions, tidy lemma names ([#6280](https://github.com/leanprover-community/mathlib/pull/#6280))

Split from [#5797](https://github.com/leanprover-community/mathlib/pull/#5797). This takes the new proofs without introducing the objectionable names.

This also renames a bunch of lemmas from `zmod.cast_*` to `zmod.nat_cast_*` and `zmod.int_cast_*`, in order to distinguish lemmas about `zmod.cast` from lemmas about `nat.cast` and `int.cast` applied with a zmod argument.

As an example, `zmod.cast_val` has been renamed to `zmod.nat_cast_zmod_val`, as the lemma statement is defeq to `(nat.cast : ℕ → zmod n) (zmod.val x) = x`, and `zmod.nat_cast_val` is already taken by `nat.cast (zmod.val x) = (x : R)`.

The full list of renames:
* `zmod.cast_val` → `zmod.nat_cast_zmod_val`
* `zmod.cast_self` → `zmod.nat_cast_self`
* `zmod.cast_self'` → `zmod.nat_cast_self'`
* `zmod.cast_mod_nat` → `zmod.nat_cast_mod`
* `zmod.cast_mod_int` → `zmod.int_cast_mod`
* `zmod.val_cast_nat` → `zmod.val_nat_cast`
* `zmod.coe_to_nat` → `zmod.nat_cast_to_nat`
* `zmod.cast_unit_of_coprime` → `coe_unit_of_coprime`
* `zmod.cast_nat_abs_val_min_abs` → `zmod.nat_cast_nat_abs_val_min_abs`

### [2021-02-17T20:29:45+00:00](https://github.com/leanprover-community/mathlib/commit/75f33464960a64eb391710b79b3902373d94da64)
feat(analysis/normed_space/multilinear): generalized `curry` ([#6270](https://github.com/leanprover-community/mathlib/pull/#6270))

### [2021-02-17T20:29:44+00:00](https://github.com/leanprover-community/mathlib/commit/152bf15ac4f5b5989d03c755f2dd1c5f0d14d28b)
feat(data/fin): pred_above_monotone ([#6170](https://github.com/leanprover-community/mathlib/pull/#6170))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-02-17T15:49:57+00:00](https://github.com/leanprover-community/mathlib/commit/4bae1c47faf4c28ef0c152c8638ad3823f5fa423)
doc(tactic/algebra): document @[ancestor] ([#6272](https://github.com/leanprover-community/mathlib/pull/#6272))

### [2021-02-17T15:49:55+00:00](https://github.com/leanprover-community/mathlib/commit/07a1b8db899308d753d71f089c44439910c82fc2)
feat(ring_theory/simple_module): introduce `is_semisimple_module` ([#6215](https://github.com/leanprover-community/mathlib/pull/#6215))

Defines `is_semisimple_module` to mean that the lattice of submodules is complemented
Shows that this is equivalent to the module being the `Sup` of its simple submodules

### [2021-02-17T11:38:42+00:00](https://github.com/leanprover-community/mathlib/commit/f066eb1a0a238016ce4d5a74f70b7de9ec3d6335)
feat(algebra/lie/subalgebra): define lattice structure for Lie subalgebras ([#6279](https://github.com/leanprover-community/mathlib/pull/#6279))

We already have the lattice structure for Lie submodules but not for subalgebras.
This is mostly a lightly-edited copy-paste of the corresponding subset of results
for Lie submodules that remain true for subalgebras.

The results which hold for Lie submodules but not for Lie subalgebras are:
  - `sup_coe_to_submodule` and `mem_sup`
  - `is_modular_lattice`

I have also made a few tweaks to bring the structure and naming of Lie
subalgebras a little closer to that of Lie submodules.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-02-17T11:38:41+00:00](https://github.com/leanprover-community/mathlib/commit/d43a3bae3da9d89bb971211f35024c4462f54b0a)
feat(analysis/normed_space/inner_product): norm is smooth at `x ≠ 0` ([#6275](https://github.com/leanprover-community/mathlib/pull/#6275))

### [2021-02-17T11:38:40+00:00](https://github.com/leanprover-community/mathlib/commit/b190131f879110a3cdd6387ce389d42bb09ba9fc)
feat(data/int/basic): lemmas about int and int.to_nat ([#6253](https://github.com/leanprover-community/mathlib/pull/#6253))

Golfing welcome.

This adds a `@[simp]` lemma `int.add_minus_one : i + -1 = i - 1`, which I think is mostly helpful, but needs to be turned off in `data/num/lemmas.lean`, which is perhaps an argument against it.

I've also added a lemma
```
@[simp] lemma lt_self_iff_false [preorder α] (a : α) : a < a ↔ false :=
```
(not just for `int`), which I've often found useful (e.g. `simpa` works well when it can reduce a hypothesis to `false`). This lemma seems harmless, but I'm happy to hear objections if it is too general.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-02-17T11:38:39+00:00](https://github.com/leanprover-community/mathlib/commit/8b8a5a27094f80607f7ee48c91d3bb899e95342c)
feat(category/eq_to_hom): lemmas to replace rewriting in objects with eq_to_hom ([#6252](https://github.com/leanprover-community/mathlib/pull/#6252))

This adds two lemmas which replace expressions in which we've used `eq.mpr` to rewrite the source or target of a morphism, replacing the `eq.mpr` by composition with an `eq_to_hom`.

Possibly we just shouldn't add these 

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-17T11:38:38+00:00](https://github.com/leanprover-community/mathlib/commit/ea1cff4a25de39b996a298c8f82dab5477f25d06)
feat(linear_algebra/pi): ext lemma for `f : (Π i, M i) →ₗ[R] N` ([#6233](https://github.com/leanprover-community/mathlib/pull/#6233))

### [2021-02-17T11:38:37+00:00](https://github.com/leanprover-community/mathlib/commit/0c61fc46ac121cf9c25d03767f8a5e71a9556844)
feat(group_theory): prove the 2nd isomorphism theorem for groups ([#6187](https://github.com/leanprover-community/mathlib/pull/#6187))

Define an `inclusion` homomorphism from a subgroup `H` contained in `K` to `K`. Add instance of `subgroup.normal` to `H ∩ N` in `H` whenever `N` is normal and use it to prove the 2nd isomorphism theorem for groups.



Co-authored-by: Adrián Doña Mateo <43966663+AdrianDoM@users.noreply.github.com>

### [2021-02-17T11:38:36+00:00](https://github.com/leanprover-community/mathlib/commit/9b3008eb99c60c37ec882d2eaf7e8e9b36790818)
feat(algebra/ordered_monoid): inequalities involving mul/add ([#6171](https://github.com/leanprover-community/mathlib/pull/#6171))

I couldn't find some statements about inequalities, so I'm adding them. I included all the useful variants I could think of.

### [2021-02-17T11:38:35+00:00](https://github.com/leanprover-community/mathlib/commit/3c1575126fdb4346a57d0ba294f615f894849cad)
feat(ring_theory/ideal/operations) : add lemma prod_eq_bot ([#5795](https://github.com/leanprover-community/mathlib/pull/#5795))

Add lemma `prod_eq_bot` showing that a product of ideals in an integral domain is zero if and only if one of the terms
is zero.



Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Filippo A. E. Nuccio <65080144+faenuccio@users.noreply.github.com>
Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2021-02-17T07:54:59+00:00](https://github.com/leanprover-community/mathlib/commit/11f054bb2adb1e29118215f448996cad305da034)
chore(topology/sheaves): speed up slow proofs by tidy ([#6274](https://github.com/leanprover-community/mathlib/pull/#6274))

No changes, just making some proofs by tidy explicit, so the file is not quite as slow as previously. Now compiles with `-T40000`.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-17T07:54:58+00:00](https://github.com/leanprover-community/mathlib/commit/5258de0879d8efab8dbf269797d45be86ce831fe)
feat(data/fin): refactor `pred_above` ([#6125](https://github.com/leanprover-community/mathlib/pull/#6125))

Currently the signature of `pred_above` is
```lean
def pred_above (p : fin (n+1)) (i : fin (n+1)) (hi : i ≠ p) : fin n := ...
```
and its behaviour is "subtract one from `i` if it is greater than `p`".

There are two reasons I don't like this much:
1. It's not a total function.
2. Since `succ_above` is exactly a simplicial face map, I'd like `pred_above` to be a simplicial degeneracy map.

In this PR I propose replacing this with
```lean
def pred_above (p : fin n) (i : fin (n+1)) : fin n :=
```
again with the behaviour "subtract one from `i` if it is greater than `p`".

~~Unfortunately, it seems the current `pred_above` really is needed for the sake of `fin.insert_nth`, so this PR has ended up as a half-hearted attempt to replace `pred_above` 

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-02-17T03:54:44+00:00](https://github.com/leanprover-community/mathlib/commit/b2dbfd6f0856bf2b1264c6d9ca6bfbb14a33fa7b)
chore(scripts): update nolints.txt ([#6276](https://github.com/leanprover-community/mathlib/pull/#6276))

I am happy to remove some nolints for you!

### [2021-02-17T03:54:43+00:00](https://github.com/leanprover-community/mathlib/commit/d4ef2e856125fc9c90a38b00dc8aeb44a70e3a6d)
feat(topology/category/Top): nonempty inverse limit of compact Hausdorff spaces ([#6271](https://github.com/leanprover-community/mathlib/pull/#6271))

The limit of an inverse system of nonempty compact Hausdorff spaces is nonempty, and this can be seen as a generalization of Kőnig's lemma.  A future PR will address the weaker generalization that the limit of an inverse system of nonempty finite types is nonempty.

This result could be generalized more, to the inverse limit of nonempty compact T0 spaces where all the maps are closed, but I think it involves an essentially different method.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-17T03:54:42+00:00](https://github.com/leanprover-community/mathlib/commit/bf9ca8b54561b7b3ef4726cfd3754a2f9a1a6224)
feat(data/set/finite): complement of finite set is infinite ([#6266](https://github.com/leanprover-community/mathlib/pull/#6266))

Add two missing lemmas. One-line proofs due to Yakov Pechersky.

### [2021-02-16T23:59:06+00:00](https://github.com/leanprover-community/mathlib/commit/7a7a5591d7dd8b68947e5458730475e578595e6d)
feat(option/basic): add join_eq_none ([#6269](https://github.com/leanprover-community/mathlib/pull/#6269))

### [2021-02-16T23:59:05+00:00](https://github.com/leanprover-community/mathlib/commit/781cc63fe58efa114843f64ed0215f2d11888cc4)
feat(data/real/liouville, ring_theory/algebraic): a Liouville number is transcendental! ([#6204](https://github.com/leanprover-community/mathlib/pull/#6204))

This is an annotated proof.  It finishes the first half of the Liouville PR.

A taste of what is to come in a future PR: a proof that Liouville numbers actually exist!

Co-authored-by: Jujian Zhang <jujian.zhang1998@outlook.com>

### [2021-02-16T23:59:04+00:00](https://github.com/leanprover-community/mathlib/commit/efa6877bbb57b938ded6b09cea0896078f535b39)
feat(algebra/category/Module): the free/forgetful adjunction for R-modules ([#6168](https://github.com/leanprover-community/mathlib/pull/#6168))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-02-16T23:59:03+00:00](https://github.com/leanprover-community/mathlib/commit/3bf724169d84a3c64fada6724f6ab82c4ec9908d)
feat(algebra/algebra,linear_algebra): add *_equiv.of_left_inverse ([#6167](https://github.com/leanprover-community/mathlib/pull/#6167))

The main purpose of this change is to add equivalences onto the range of a function with a left-inverse:
* `algebra_equiv.of_left_inverse`
* `linear_equiv.of_left_inverse`
* `ring_equiv.of_left_inverse`
* `ring_equiv.sof_left_inverse` (the sub***S***emiring version)

This also:
* Renames `alg_hom.alg_equiv.of_injective` to `alg_equiv.of_injective`
* Adds `subalgebra.mem_range_self` and `subsemiring.mem_srange_self` for consistency with `subring.mem_range_self`
* Replaces `subring.surjective_onto_range` with `subring.range_restrict_surjective`, which have defeq statements

These are computable versions of `*_equiv.of_injective`, with the benefit of having a known inverse, and in the case of `linear_equiv` working for `semiring` and not just `ring`.

### [2021-02-16T21:22:44+00:00](https://github.com/leanprover-community/mathlib/commit/2289b185aeae31e4c6baf4adc94c992ea44f64be)
chore(topology/basic): add `continuous_at_congr` and `continuous_at.congr` ([#6267](https://github.com/leanprover-community/mathlib/pull/#6267))

### [2021-02-16T18:36:50+00:00](https://github.com/leanprover-community/mathlib/commit/0b4823ccb4ca936aee95e2273bf764855c3f0f52)
doc(*): remove `\\` hack for latex backslashes in markdown ([#6263](https://github.com/leanprover-community/mathlib/pull/#6263))

With leanprover-community/doc-gen[#110](https://github.com/leanprover-community/mathlib/pull/#110), these should no longer be needed.





Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2021-02-16T18:36:49+00:00](https://github.com/leanprover-community/mathlib/commit/16eb4af75283ad8a53254dc464088b8076aa4927)
doc(algebraic_geometry/structure_sheaf): fix latex ([#6262](https://github.com/leanprover-community/mathlib/pull/#6262))

This is broken regardless of the markdown processor: <https://leanprover-community.github.io/mathlib_docs/algebraic_geometry/structure_sheaf.html#algebraic_geometry.structure_sheaf.is_locally_fraction>

### [2021-02-16T18:36:48+00:00](https://github.com/leanprover-community/mathlib/commit/7459c21cf5f035dee8a140be68c6349b3e4d292a)
feat(analysis/special_functions): strict differentiability of `real.exp` and `real.log` ([#6256](https://github.com/leanprover-community/mathlib/pull/#6256))

### [2021-02-16T18:36:47+00:00](https://github.com/leanprover-community/mathlib/commit/b0071f3f8beeca8022cc8ec505ba675ba690b50a)
feat(analysis/special_functions): `sqrt` is infinitely smooth at `x ≠ 0` ([#6255](https://github.com/leanprover-community/mathlib/pull/#6255))

Also move lemmas about differentiability of `sqrt` out from `special_functions/pow` to a new file.

### [2021-02-16T18:36:46+00:00](https://github.com/leanprover-community/mathlib/commit/8a4316304302f22df76b48f9b8d39d8c11b4d30a)
feat(topology/algebra/normed_group): completion of normed groups ([#6189](https://github.com/leanprover-community/mathlib/pull/#6189))

From `lean-liquid`

### [2021-02-16T18:36:45+00:00](https://github.com/leanprover-community/mathlib/commit/35c070fa950b63891fcf9d4a683b521ea184e1c7)
chore(linear_algebra/dfinsupp): make lsum a linear_equiv ([#6185](https://github.com/leanprover-community/mathlib/pull/#6185))

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Typeclass.20inference.20can't.20fill.20in.20parameters/near/226019081) with a summary of the problem which required the nasty `semimodule_of_linear_map` present here.

### [2021-02-16T15:40:57+00:00](https://github.com/leanprover-community/mathlib/commit/2411d681127e17b7ba96b80c50c9e50f631491da)
doc(algebra/big_operators): fix formatting of library note ([#6261](https://github.com/leanprover-community/mathlib/pull/#6261))

The name of a library note is already used as its title: <https://leanprover-community.github.io/mathlib_docs_demo/notes.html#operator%20precedence%20of%20big%20operators>

### [2021-02-16T12:05:22+00:00](https://github.com/leanprover-community/mathlib/commit/362619ebc74073495414578128b9bcb10879aa57)
chore(data/equiv/basic): add lemmas about `equiv.cast` ([#6246](https://github.com/leanprover-community/mathlib/pull/#6246))

### [2021-02-16T12:05:21+00:00](https://github.com/leanprover-community/mathlib/commit/841b0074cea7d6b5a7d857846057eef799ca18e2)
doc(control/fold): fix bad markdown ([#6245](https://github.com/leanprover-community/mathlib/pull/#6245))




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2021-02-16T12:05:20+00:00](https://github.com/leanprover-community/mathlib/commit/beee5d866c35ba37f26495ea17b0f97a586f6e9f)
doc(topology/category/*): 5 module docs ([#6240](https://github.com/leanprover-community/mathlib/pull/#6240))

This PR provides module docs to `Top.basic`, `Top.limits`, `Top.adjuntions`, `Top.epi_mono` , `TopCommRing`.

Furthermore, a few lines are split to please the line length linter.



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-02-16T12:05:19+00:00](https://github.com/leanprover-community/mathlib/commit/0716fa4471f43ededc23990bebee6a9ead4f71eb)
feat(data/set/intervals/basic): not_mem of various intervals ([#6238](https://github.com/leanprover-community/mathlib/pull/#6238))

`c` is not in a given open/closed/unordered interval if it is outside the bounds of that interval (or if it is not in a superset of that interval).

### [2021-02-16T12:05:17+00:00](https://github.com/leanprover-community/mathlib/commit/914517b568dc9eeef9f3fec8a5668da550a3be2c)
feat(order/well_founded_set): finite antidiagonal of well-founded sets ([#6208](https://github.com/leanprover-community/mathlib/pull/#6208))

Defines `set.add_antidiagonal s t a`, the set of pairs of an element from `s` and an element from `t` that add to `a`
If `s` and `t` are well-founded, then constructs a finset version, `finset.add_antidiagonal_of_is_wf`

### [2021-02-16T12:05:16+00:00](https://github.com/leanprover-community/mathlib/commit/1a4388892059f3b735d523622bfd8e5b25643227)
feat(analysis/normed_space/operator_norm): bundle more arguments ([#6207](https://github.com/leanprover-community/mathlib/pull/#6207))

* Drop `lmul_left` in favor of a partially applied `lmul`.
* Use `lmul_left_right` in `has_fderiv_at_ring_inverse` and related lemmas.
* Add bundled `compL`, `lmulₗᵢ`, `lsmul`.
* Make `𝕜` argument in `of_homothety` implicit.
* Add `deriv₂` and `bilinear_comp`.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-02-16T12:05:15+00:00](https://github.com/leanprover-community/mathlib/commit/8d9eb2664003fde6fb017f298c83307e8dbe33fa)
chore(linear_algebra/finsupp): make lsum a linear_equiv ([#6183](https://github.com/leanprover-community/mathlib/pull/#6183))

### [2021-02-16T12:05:14+00:00](https://github.com/leanprover-community/mathlib/commit/314f5ad7c191e42994a57a0c730fd465c35ef3a4)
feat(ring_theory/finiteness): add quotient of finitely presented ([#6098](https://github.com/leanprover-community/mathlib/pull/#6098))

I've added `algebra.finitely_presented.quotient`: the quotient of a finitely presented algebra by a finitely generated ideal is finitely presented. To do so I had to prove some preliminary results about finitely generated modules.

### [2021-02-16T12:05:12+00:00](https://github.com/leanprover-community/mathlib/commit/3cec1cf69707fa13d912ffba2dbc4545889da13e)
feat(apply_fun): handle implicit arguments ([#6091](https://github.com/leanprover-community/mathlib/pull/#6091))

I've modified the way `apply_fun` handles inequalities, by building an intermediate expression before calling `mono` to discharge the `monotone f` subgoal. This has the effect of sometimes filling in implicit arguments successfully, so that `mono` works.

In `tests/apply_fun.lean` I've added an example showing this in action 


Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-16T12:05:11+00:00](https://github.com/leanprover-community/mathlib/commit/d3c56678c161a59c3489387f8922508e6c4131c7)
feat(number_theory/bernoulli): the odd Bernoulli numbers (greater than 1) are zero ([#6056](https://github.com/leanprover-community/mathlib/pull/#6056))

The proof requires a ring homomorphism between power series to be defined, `eval_mul_hom` . This PR defines it and states some of its properties, along with the result that `e^(ax) * e^(bx) = e^((a + b) x)`, which is needed for the final result, `bernoulli_odd_eq_zero`.



Co-authored-by: laughinggas <58670661+laughinggas@users.noreply.github.com>

### [2021-02-16T12:05:10+00:00](https://github.com/leanprover-community/mathlib/commit/2da1ab4188302b10ef16bc62f367ffec2d8a6b12)
feat(data/equiv): Add lemmas to reduce `@finset.univ (perm (fin n.succ)) _` ([#5593](https://github.com/leanprover-community/mathlib/pull/#5593))

The culmination of these lemmas is that `matrix.det` can now be reduced by a minimally steered simp:
```lean
import data.matrix.notation
import group_theory.perm.fin
import linear_algebra.determinant
open finset

example {α : Type} [comm_ring α] {a b c d : α} :
  matrix.det ![![a, b], ![c, d]] = a * d - b * c :=
begin
  simp [matrix.det, univ_perm_fin_succ, ←univ_product_univ, sum_product, fin.sum_univ_succ, fin.prod_univ_succ],
  ring
end
```


Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>

### [2021-02-16T09:30:21+00:00](https://github.com/leanprover-community/mathlib/commit/dc917df79f73d82de7531a162ee39b2b76be0f96)
feat(category/limits/shapes/zero): lemmas about is_isomorphic 0 ([#6251](https://github.com/leanprover-community/mathlib/pull/#6251))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-16T09:30:20+00:00](https://github.com/leanprover-community/mathlib/commit/d7003c1d1735bf097dd7a123a5b56ef58869dda1)
feat(algebra/category/Module): allow writing (0 : Module R) ([#6249](https://github.com/leanprover-community/mathlib/pull/#6249))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-16T09:30:19+00:00](https://github.com/leanprover-community/mathlib/commit/2961e79cebd38f89ae541ec191f124bd1dd1369a)
feat(topology/connected.lean): define pi_0 and prove basic properties ([#6188](https://github.com/leanprover-community/mathlib/pull/#6188))

Define and prove basic properties of pi_0, the functor quotienting a space by its connected components. 

For dot notation convenience, this PR renames `subset_connected_component` to `is_preconnected.subset_connected_component` and also defines the weaker version `is_connected.subset_connected_component`.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-02-16T08:09:48+00:00](https://github.com/leanprover-community/mathlib/commit/acf2b6d88e32a5a1852cc2bbb34ccdf77b60d3e5)
docs(algebraic_geometry/Scheme): fix typo in module docstring ([#6254](https://github.com/leanprover-community/mathlib/pull/#6254))

### [2021-02-16T06:42:40+00:00](https://github.com/leanprover-community/mathlib/commit/dbe586c1667812ecee1249e8a995ceeddde6b588)
chore(scripts): update nolints.txt ([#6248](https://github.com/leanprover-community/mathlib/pull/#6248))

I am happy to remove some nolints for you!

### [2021-02-16T00:20:31+00:00](https://github.com/leanprover-community/mathlib/commit/97f7b5237b3000e579b2e7fa965a4903be9062da)
chore(data/logic/unique): there is a unique function with domain pempty ([#6243](https://github.com/leanprover-community/mathlib/pull/#6243))

### [2021-02-15T21:04:25+00:00](https://github.com/leanprover-community/mathlib/commit/65fe78aeb10cf73c9060c0152201651334618fee)
feat(analysis/special_functions/trigonometric): add missing continuity attributes ([#6236](https://github.com/leanprover-community/mathlib/pull/#6236))

I added continuity attributes to lemmas about the continuity of trigonometric functions, e.g. `continuous_sin`, `continuous_cos`, `continuous_tan`, etc. This came up in [this Zulip conversation](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/What's.20new.20in.20Lean.20maths.3F/near/221511451)

I also added `real.continuous_tan`.

### [2021-02-15T17:15:21+00:00](https://github.com/leanprover-community/mathlib/commit/0ed6f7c08ad342246b6522406c85e3e0cb3e3ed5)
feat(data/real/liouville, topology/metric_space/basic): further preparations for Liouville ([#6201](https://github.com/leanprover-community/mathlib/pull/#6201))

These lemmas are used to show that a Liouville number is transcendental.

The statement that Liouville numbers are transcendental is the next PR in this sequence!

Co-authored-by: Jujian Zhang <jujian.zhang1998@outlook.com>

### [2021-02-15T13:26:17+00:00](https://github.com/leanprover-community/mathlib/commit/26c6fb5b5245e1eda01fa981d9fce0524557bf9d)
chore(data/set/basic): set.union_univ and set.univ_union ([#6239](https://github.com/leanprover-community/mathlib/pull/#6239))

### [2021-02-15T13:26:16+00:00](https://github.com/leanprover-community/mathlib/commit/d6db0386ee9fb828041b9c85f26bdf93c549dfbc)
refactor(analysis/normed_space/multilinear): use `≃ₗᵢ` for `curry` equivs ([#6232](https://github.com/leanprover-community/mathlib/pull/#6232))

Also copy some `continuous_linear_equiv` API to `linear_isometry_equiv` (e.g., all API in `analysis.calculus.fderiv`).

### [2021-02-15T13:26:15+00:00](https://github.com/leanprover-community/mathlib/commit/f5c55aead7dfe364340d64be3ec8f53805be782c)
feat(analysis/normed_space/basic): uniform_continuous_norm ([#6162](https://github.com/leanprover-community/mathlib/pull/#6162))

From `lean-liquid`

### [2021-02-15T13:26:14+00:00](https://github.com/leanprover-community/mathlib/commit/0fa131286672b9929e2d477c5b6f67baaa80b507)
feat(linear_algebra/unitary_group): add unitary/orthogonal groups ([#5702](https://github.com/leanprover-community/mathlib/pull/#5702))

### [2021-02-15T10:01:44+00:00](https://github.com/leanprover-community/mathlib/commit/9f0687c721823eafa6a58c1137afbc80302470dd)
feat(order/liminf_limsup): liminf_nat_add and liminf_le_of_frequently_le' ([#6220](https://github.com/leanprover-community/mathlib/pull/#6220))

Add `liminf_nat_add (f : ℕ → α) (k : ℕ) : at_top.liminf f = at_top.liminf (λ i, f (i + k))`. Same for `limsup`.

Add `liminf_le_of_frequently_le'`, variant of `liminf_le_of_frequently_le` in which the lattice is complete but there is no linear order. Same for `limsup`.

### [2021-02-15T03:01:16+00:00](https://github.com/leanprover-community/mathlib/commit/1f0bf3379ad66737f2f4bd3953d589164abf1f30)
chore(scripts): update nolints.txt ([#6234](https://github.com/leanprover-community/mathlib/pull/#6234))

I am happy to remove some nolints for you!

### [2021-02-15T03:01:15+00:00](https://github.com/leanprover-community/mathlib/commit/0469268058705c1e9b5f4bcc4d6fc0fd88568bc9)
doc(topology/subset_properties): minor change to docstring of `is_compact` ([#6231](https://github.com/leanprover-community/mathlib/pull/#6231))

I'm learning (for the first time) about how to do topology with filters, and this docstring confused me for a second. If there are linguistic reasons for leaving it as it is then fair enough, but it wasn't clear to me on first reading that `a` was independent of the set in the filter.

### [2021-02-15T03:01:14+00:00](https://github.com/leanprover-community/mathlib/commit/5a6c8934646b07417848576766aef061c59783ca)
feat(topology/algebra/module): 2 new ext lemmas ([#6211](https://github.com/leanprover-community/mathlib/pull/#6211))

Add ext lemmas for maps `f : M × M₂ →L[R] M₃` and `f : R →L[R] M`.

### [2021-02-15T03:01:13+00:00](https://github.com/leanprover-community/mathlib/commit/c94577a6b75d0c09bd550f616cd167ac22ea5bdf)
feat(group_theory/free_abelian_group): add module doc and some equivs ([#6062](https://github.com/leanprover-community/mathlib/pull/#6062))

Also add some API for `free_abelian_group.map`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-14T23:17:58+00:00](https://github.com/leanprover-community/mathlib/commit/6f99407e21a36cdf3433d68a16741384e90778a7)
feat(analysis/calculus/inverse): a function with onto strict derivative is locally onto ([#6229](https://github.com/leanprover-community/mathlib/pull/#6229))

Removes a useless assumption in `map_nhds_eq_of_complemented` (no need to have a completemented subspace).

The proof of the local inverse theorem breaks into two parts, local injectivity and local surjectivity. We refactor the local surjectivity part, assuming in the proof only that the derivative is onto. The result is stronger, but the proof is less streamlined since there is no contracting map any more: we give a naive proof from first principles instead of reducing to the fixed point theorem for contracting maps.

### [2021-02-14T19:41:17+00:00](https://github.com/leanprover-community/mathlib/commit/22b26d3c3447a29324897eeefa5ddb59ac9845ab)
chore(algebra/group/basic): remove three redundant lemmas ([#6197](https://github.com/leanprover-community/mathlib/pull/#6197))

The following lemmas are changed in this PR (long list because of the additive versions:
* `mul_eq_left_iff` for `left_cancel_monoid` is renamed to `mul_right_eq_self` which previously was stated for `group`
* `add_eq_left_iff` the additive version is automatically renamed to `add_right_eq_self`
* `mul_eq_right_iff` for `right_cancel_monoid` is renamed to `mul_left_eq_self` which previously was stated for `group`
* `add_eq_right_iff` the additive version is automatically renamed to `add_left_eq_self`
* `left_eq_mul_iff` is renamed to `self_eq_mul_right` to fit the convention above
* `left_eq_add_iff` is renamed to `self_eq_add_right` to fit the convention above
* `right_eq_mul_iff` is renamed to `self_eq_mul_left` to fit the convention above
* `right_eq_add_iff` is renamed to `self_eq_add_left` to fit the convention above
* the duplicate `mul_left_eq_self` and `add_left_eq_self` for groups are removed
* the duplicate `mul_right_eq_self` and `add_right_eq_self` for groups are removed
* `mul_self_iff_eq_one` and `add_self_iff_eq_zero` deal only with the special case `a=b` of the other lemmas. It is therefore removed and the few instances in the library are replaced by one of the above. 

While I was at it, I provided a module doc for this file.

### [2021-02-14T16:06:00+00:00](https://github.com/leanprover-community/mathlib/commit/c35672bbe581370c345d0862c078fbbbe1258fb3)
feat(analysis/special_functions): strict differentiability of some functions ([#6228](https://github.com/leanprover-community/mathlib/pull/#6228))

### [2021-02-14T16:05:59+00:00](https://github.com/leanprover-community/mathlib/commit/713432fa4092435a660500e96b67b1a01b6ae2a0)
chore(.github/PULL_REQUEST_TEMPLATE.md): clarify instructions ([#6222](https://github.com/leanprover-community/mathlib/pull/#6222))

### [2021-02-14T14:16:51+00:00](https://github.com/leanprover-community/mathlib/commit/b9af22d00f8ce57370105adbd5f3d1f2fbb254c9)
fix(*): arsinh and complex.basic had module docs at the wrong position ([#6230](https://github.com/leanprover-community/mathlib/pull/#6230))

This is fixed and the module doc for `complex.basic` is expanded slightly.

### [2021-02-14T03:41:08+00:00](https://github.com/leanprover-community/mathlib/commit/c54a8d099a90f98c9c57805a365584043bb6eba1)
chore(scripts): update nolints.txt ([#6227](https://github.com/leanprover-community/mathlib/pull/#6227))

I am happy to remove some nolints for you!

### [2021-02-14T01:28:45+00:00](https://github.com/leanprover-community/mathlib/commit/86e8a5d26a81f4ec3d6d27be8d13f573f1b65f23)
fix(data/real/basic): remove `decidable_le` field in `real.conditionally_complete_linear_order` ([#6223](https://github.com/leanprover-community/mathlib/pull/#6223))

Because of this field, `@conditionally_complete_linear_order.to_linear_order ℝ real.conditionally_complete_linear_order` and `real.linear_order` were not defeq

See : https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Different.20linear.20orders.20on.20reals/near/226257434

Co-authored by @urkud

### [2021-02-13T22:35:47+00:00](https://github.com/leanprover-community/mathlib/commit/b0aae27376031a3d40e77c114d68ad1de144068e)
feat(algebra/category/Group/adjunctions): free_group-forgetful adjunction ([#6190](https://github.com/leanprover-community/mathlib/pull/#6190))

Furthermore, a module doc for `group_theory/free_group` is provided and a few lines in this file are split. 



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-02-13T22:35:46+00:00](https://github.com/leanprover-community/mathlib/commit/07600ee4da3e5373fdf674258b1f37ad74e2b6e8)
feat(computability/epsilon_nfa): epsilon-NFA definition ([#6108](https://github.com/leanprover-community/mathlib/pull/#6108))



Co-authored-by: foxthomson <11833933+foxthomson@users.noreply.github.com>

### [2021-02-13T19:32:58+00:00](https://github.com/leanprover-community/mathlib/commit/ac19b4a965de2dec48c4a502e58bc7bc7a76e89d)
refactor(measure_theory/l1_space): remove one of the two definitions of L1 space ([#6058](https://github.com/leanprover-community/mathlib/pull/#6058))

Currently, we have two independent versions of the `L^1` space in mathlib: one coming from the general family of `L^p` spaces, the other one is an ad hoc construction based on the `integrable` predicate used in the construction of the Bochner integral.

We remove the second construction, and use instead the `L^1` space coming from the family of `L^p` spaces to construct the Bochner integral. Still, we keep the `integrable` predicate as it is generally useful, and show that it coincides with the `mem_Lp 1` predicate.

### [2021-02-13T17:23:27+00:00](https://github.com/leanprover-community/mathlib/commit/ad5a81d35e864bb916f67b8c8dfe660e0933ad27)
chore(measure_theory/measure_space): add some `simp`/`mono` tags ([#6221](https://github.com/leanprover-community/mathlib/pull/#6221))

### [2021-02-13T14:34:16+00:00](https://github.com/leanprover-community/mathlib/commit/3cfaa0bf785a6ac3ec571fe1c444680b6ba2521a)
feat(measure_theory/measure_space): add ae_imp_iff ([#6218](https://github.com/leanprover-community/mathlib/pull/#6218))

This is `filter.eventually_imp_distrib_left` specialized to the measure.ae filter.

### [2021-02-13T12:18:12+00:00](https://github.com/leanprover-community/mathlib/commit/d0456d3b6cd6a7002f1d629779cff82430f86f12)
feat(measure_theory/borel_space): add ae_measurable versions of finset.measurable_prod and measurable.ennreal_tsum ([#6217](https://github.com/leanprover-community/mathlib/pull/#6217))

Also add an ae_measurable version of `ae_lt_top`.

### [2021-02-13T12:18:11+00:00](https://github.com/leanprover-community/mathlib/commit/42bb0c4b499b908683262eb12f055c19046f2558)
feat(ring_theory/ideal/operations): add first isomorphism theorem for rings and algebras ([#6166](https://github.com/leanprover-community/mathlib/pull/#6166))

The first isomorphism theorem for commutative rings `quotient_ker_equiv_of_surjective` and algebras `quotient_ker_alg_equiv_of_surjective`.

### [2021-02-13T12:18:10+00:00](https://github.com/leanprover-community/mathlib/commit/8b59d97d3e1888234e9cb1e5629ba916faf6aef1)
feat(linear_algebra/pi_tensor_product): tmul distributes over tprod ([#6126](https://github.com/leanprover-community/mathlib/pull/#6126))

This adds the equivalence `(⨂[R] i : ι, M) ⊗[R] (⨂[R] i : ι₂, M) ≃ₗ[R] ⨂[R] i : ι ⊕ ι₂, M`.
Working with dependently-typed `M` here is more trouble than it's worth, as we don't have any typeclass structures on `sum.elim M N` right now,

This is one of the pieces needed to provide a ring structure on `⨁ n, ⨂[R] i : fin n, M`, but that's left for another time.

### [2021-02-13T09:47:57+00:00](https://github.com/leanprover-community/mathlib/commit/445e6fc05f54cc61afc135d8f9199ba2ad2b46bd)
refactor(topology/{basic,continuous_on}): review `continuous_if` etc ([#6182](https://github.com/leanprover-community/mathlib/pull/#6182))

* move `continuous_if` to `topology/continuous_on`, use weaker assumptions;
* add `piecewise` versions of various `if` lemmas;
* add a specialized `continuous_if_le` version;
* use dot notation for `continuous_on.if` and `continuous_on.if'`;
* minor golfing here and there.

### [2021-02-13T09:47:56+00:00](https://github.com/leanprover-community/mathlib/commit/5c22531bfcd684b4ecbec4a17164908ef7a85d15)
doc(data/polynomial/denoms_clearable): fix typo in the doc-string ([#6174](https://github.com/leanprover-community/mathlib/pull/#6174))

### [2021-02-13T07:17:57+00:00](https://github.com/leanprover-community/mathlib/commit/5bee82629ac7141a3d0c5a860c92b3e1d86ab96c)
feat(data/int/gcd): some missing lemmas about int.gcd ([#6212](https://github.com/leanprover-community/mathlib/pull/#6212))

As requested [on zulip](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/different.20gcd's.3F/near/226203698).

### [2021-02-13T07:17:56+00:00](https://github.com/leanprover-community/mathlib/commit/0544641d137c90384eac1c3442db9a2b9e70a828)
chore(analysis/special_functions/pow): review lemmas about measurability of `cpow`/`rpow` ([#6209](https://github.com/leanprover-community/mathlib/pull/#6209))

* prove that `complex.cpow` is measurable;
* deduce measurability of `real.rpow` from definition, not continuity.

### [2021-02-13T07:17:55+00:00](https://github.com/leanprover-community/mathlib/commit/ee9197a12dec84b8606b6f8f42d7dfffe66d1d80)
chore(topology/algebra/module): review `coe` lemmas ([#6206](https://github.com/leanprover-community/mathlib/pull/#6206))

* add `@[simp]` to `continuous_linear_equiv.coe_coe`, remove from `continuous_linear_equiv.coe_apply`;
* golf `continuous_linear_equiv.ext`;
* given `(e e' : M ≃L[R] M₂)`, simplify `(e : M →L[R] M₂) = e'` to `e = e'`;
* add `@[simp]` to `continuous_linear_equiv.symm_comp_self` and `continuous_linear_equiv.self_comp_symm`;
* drop `symm_comp_self'` and `self_comp_symm'`: now `coe_coe` simplifies LHS to `symm_comp_self`/`self_comp_symm`;
* `continuous_linear_equiv.coord` is no longer an `abbreviation`: without this change `coe_coe` prevents us from using lemmas about `coord`;

### [2021-02-13T07:17:54+00:00](https://github.com/leanprover-community/mathlib/commit/43bfd90321eb34e610236b144321027b4b670260)
chore(group_theory/free_group): clean up unnecessary lemmas ([#6200](https://github.com/leanprover-community/mathlib/pull/#6200))

This removes:

* `free_abelian_group.lift.{add,sub,neg,zero}` as these exist already as `(free_abelian_group.lift _).map_{add,sub,neg,zero}` 
* `free_group.to_group.{mul,one,inv}` as these exist already as `(free_group.to_group _).map_{mul,one,inv}`
* `free_group.map.{mul,one,inv}` as these exist already as `(free_group.map _).map_{mul,one,inv}`
* `free_group.prod.{mul,one,inv}` as these exist already as `free_group.prod.map_{mul,one,inv}`
* `to_group.is_group_hom` as this is provided automatically for `monoid_hom`s

and renames

* `free_group.sum.{mul,one,inv}` to `free_group.sum.map_{mul,one,inv}`

These lemmas are already simp lemmas thanks to the functions they relate to being bundled homs.
While the new spelling is slightly longer, it makes it clear that the entire set of `monoid_hom` lemmas apply, not just the three that were copied across.

This also wraps some lines to make the linter happier about these files.

### [2021-02-13T05:21:53+00:00](https://github.com/leanprover-community/mathlib/commit/759ebc0b648e8d7f67e90300cf3011fa1c376364)
chore(analysis/calculus/local_extr): minor golfing ([#6214](https://github.com/leanprover-community/mathlib/pull/#6214))

### [2021-02-13T03:56:07+00:00](https://github.com/leanprover-community/mathlib/commit/5869039e56a1bfce2275031e9183451f1332b686)
chore(scripts): update nolints.txt ([#6213](https://github.com/leanprover-community/mathlib/pull/#6213))

I am happy to remove some nolints for you!

### [2021-02-13T00:49:42+00:00](https://github.com/leanprover-community/mathlib/commit/37459eee6d6deafa7bf01f801fed548bc7c167b3)
doc(docs/overview.yaml): Added Hall's theorem ([#6205](https://github.com/leanprover-community/mathlib/pull/#6205))

Also fixed module documentation to use inline math mode (and removed the dreaded "any").

### [2021-02-13T00:49:41+00:00](https://github.com/leanprover-community/mathlib/commit/06fdc087af5a20832151865be59a714e6678a699)
chore(algebra/group/pi): replace a lemma with @[simps] ([#6203](https://github.com/leanprover-community/mathlib/pull/#6203))

### [2021-02-13T00:49:40+00:00](https://github.com/leanprover-community/mathlib/commit/e79bf0538567c320ed3d957e529728db07b46cd5)
feat(number_theory/ADE_inequality): the inequality 1/p + 1/q + 1/r > 1 ([#6156](https://github.com/leanprover-community/mathlib/pull/#6156))

### [2021-02-13T00:49:38+00:00](https://github.com/leanprover-community/mathlib/commit/30c2c5bfc6aab9e7f7d61bb09a3cc8f97736eb0a)
feat(data/fin): cast_succ_mk and other lemmas ([#6094](https://github.com/leanprover-community/mathlib/pull/#6094))

* add lemmas for all the `fin.cast_*` functions which describe what happens to an "explicitly presented" term of `fin n`, built from the constructor
* fixes some errors in doc-strings



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-02-13T00:49:36+00:00](https://github.com/leanprover-community/mathlib/commit/152ad1fc5f4d72398e70eb775d247107d26c7cdb)
feat(measure_theory/measure_space): add theorems about restrict and subtraction ([#5000](https://github.com/leanprover-community/mathlib/pull/#5000))

This is the next tranche of theorems toward Lebesgue-Radon-Nikodym.

### [2021-02-12T21:14:37+00:00](https://github.com/leanprover-community/mathlib/commit/dd13f00a5945ec2dff4370328607895bbc21f666)
feat(data/set/intervals/basic): 24 lemmas about membership of arithmetic operations ([#6202](https://github.com/leanprover-community/mathlib/pull/#6202))

### [2021-02-12T14:15:57+00:00](https://github.com/leanprover-community/mathlib/commit/254c3ee133c15abef81ae2f63ad2c6220dfb167c)
feat(analysis/special_functions/exp_log): added `log_div` ([#6196](https://github.com/leanprover-community/mathlib/pull/#6196))

`∀ x y : ℝ, x ≠ 0 → y ≠ 0 → log (x / y) = log x - log y`

### [2021-02-12T14:15:56+00:00](https://github.com/leanprover-community/mathlib/commit/a5ccba6b2457276dfdf8989ec33dea0f4c18b97e)
feat(analysis/calculus): generalize `has_strict_fderiv_at.map_nhds_eq` ([#6193](https://github.com/leanprover-community/mathlib/pull/#6193))

Generalize `has_strict_fderiv_at.map_nhds_eq` to a function that satisfies assumptions of the implicit function theorem.

### [2021-02-12T12:44:07+00:00](https://github.com/leanprover-community/mathlib/commit/74d3270e500890c3a31f157f451d2cc8ee195e37)
fix(topology/topological_fiber_bundle): fix definition, review ([#6184](https://github.com/leanprover-community/mathlib/pull/#6184))

* fix definition of `is_topological_fiber_bundle`;
* add `is_trivial_topological_fiber_bundle`;
* more lemmas, golf here and there;
* define induced fiber bundle.

### [2021-02-12T10:09:14+00:00](https://github.com/leanprover-community/mathlib/commit/2d7088030fcacf0ba43972ec8d1d0e888b3f5b70)
feat(topology/subset_properties): compact discrete spaces are finite ([#6191](https://github.com/leanprover-community/mathlib/pull/#6191))

From `lean-liquid`



Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: damiano <adomani@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>
Co-authored-by: Anne Baanen <vierkantor@vierkantor.com>
Co-authored-by: Julian-Kuelshammer <julian.kuelshammer@math.uu.se>
Co-authored-by: Jesse Michael Han <hyrodi@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: tb65536 <tb65536@uw.edu>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Aaron Anderson <awainverse@gmail.com>
Co-authored-by: Chase Meadors <c.ed.mead@gmail.com>
Co-authored-by: Oliver Nash <github@olivernash.org>
Co-authored-by: Calle Sönne <calle.sonne@gmail.com>
Co-authored-by: leanprover-community-bot <leanprover.community@gmail.com>
Co-authored-by: Adrián Doña Mateo <drnaia100@gmail.com>

### [2021-02-12T02:51:33+00:00](https://github.com/leanprover-community/mathlib/commit/159e807b89e5ff9e928b7c0729b8dfb6b82cecc6)
chore(scripts): update nolints.txt ([#6194](https://github.com/leanprover-community/mathlib/pull/#6194))

I am happy to remove some nolints for you!

### [2021-02-12T02:51:32+00:00](https://github.com/leanprover-community/mathlib/commit/72141fdc94feec6f394b95c9310687f517bb4d02)
feat(combinatorics/hall): Hall's marriage theorem ([#5695](https://github.com/leanprover-community/mathlib/pull/#5695))

We state and prove Hall's marriage theorem with respect to fintypes and relations. 

Coauthor: @b-mehta @kmill



Co-authored-by: Kyle Miller <kmill31415@gmail.com>
Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>

### [2021-02-11T23:33:03+00:00](https://github.com/leanprover-community/mathlib/commit/db305fb5546e787dcb2582eefe10c89ef283285e)
feat(data/set/finite): fintype_of_univ_finite ([#6164](https://github.com/leanprover-community/mathlib/pull/#6164))

From `lean-liquid`

### [2021-02-11T23:33:02+00:00](https://github.com/leanprover-community/mathlib/commit/2f566202f1bbefee115b5b45b48a7127133309c7)
feat(data/real/irrational): define Liouville numbers ([#6158](https://github.com/leanprover-community/mathlib/pull/#6158))

Prove that a Liouville number is irrational

Co-authored-by: Jujian Zhang <jujian.zhang1998@outlook.com>

### [2021-02-11T20:21:07+00:00](https://github.com/leanprover-community/mathlib/commit/64914d3691539c90927088e69e36b1ecde3309e7)
chore(group_theory/perm, linear_algebra/alternating): add some helper lemmas for gh-5269 ([#6186](https://github.com/leanprover-community/mathlib/pull/#6186))

### [2021-02-11T20:21:06+00:00](https://github.com/leanprover-community/mathlib/commit/cee5ddf3d1702a751979fc367da1a7d90f1b61ff)
chore(topology/homeomorph): review, add `prod_punit`/`punit_prod` ([#6180](https://github.com/leanprover-community/mathlib/pull/#6180))

* use `to_equiv := e` instead of `.. e` to have definitional equality
  `h.to_equiv = e`;
* add some `@[simp]` lemmas;
* add `homeomorph.prod_punit` and `homeomorph.punit_prod`;
* generalize `unit.topological_space` to `punit.topological_space`.

### [2021-02-11T20:21:05+00:00](https://github.com/leanprover-community/mathlib/commit/6c602c7e55293258b391da2a2495b167d4cdf9b4)
feat(data/nat/bitwise): test bits of powers of two ([#6070](https://github.com/leanprover-community/mathlib/pull/#6070))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-02-11T16:21:09+00:00](https://github.com/leanprover-community/mathlib/commit/1ad29d69ab844eaad5af67035d383dfe46eef45e)
refactor(algebra/lie/of_associative): remove `ring_commutator` namespace; use `ring` instead ([#6181](https://github.com/leanprover-community/mathlib/pull/#6181))

The `old_structure_cmd` change to `lie_algebra.is_simple` is unrelated and is
included here only for convenience.

`ring_commutator.commutator` -> `ring.lie_def`

### [2021-02-11T16:21:06+00:00](https://github.com/leanprover-community/mathlib/commit/abf72e6d4a3be4ce3b1b6dd9ffa03bc70cd609db)
refactor(algebra/lie/*): rename `lie_algebra.morphism` --> `lie_hom`, `lie_algebra.equiv` --> `lie_equiv` ([#6179](https://github.com/leanprover-community/mathlib/pull/#6179))

Also renaming the field `map_lie` to `map_lie'` in both `lie_algebra.morphism` and `lie_module_hom`
for consistency with the pattern elsewhere in Mathlib.

### [2021-02-11T16:21:04+00:00](https://github.com/leanprover-community/mathlib/commit/b3347e567148c4eb7c4b6cf88ba4e18460ecb6f7)
doc(algebra/field): added module doc ([#6177](https://github.com/leanprover-community/mathlib/pull/#6177))



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-02-11T16:21:00+00:00](https://github.com/leanprover-community/mathlib/commit/af8b60b80265bdd53e6e795445a4ad7b58104007)
feat(algebra/lie/submodule): Lie submodules form a modular lattice ([#6176](https://github.com/leanprover-community/mathlib/pull/#6176))

### [2021-02-11T16:20:58+00:00](https://github.com/leanprover-community/mathlib/commit/b9354dda64c181c9f7920791d7535a567d9d3c7f)
feat(algebra/ordered_ring): a product is at least one if both factors are ([#6172](https://github.com/leanprover-community/mathlib/pull/#6172))

Add single lemma one_le_mul_of_one_le_of_one_le

The lemma is stated for an `ordered_semiring`, but only multiplication is used.  There does not seem to be an `ordered_monoid` class where this lemma would fit.

Relevant Zulip chat:
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/ordered_monoid.3F

### [2021-02-11T16:20:56+00:00](https://github.com/leanprover-community/mathlib/commit/194ec667adf9aff2168df8f04466ad4601e48209)
feat(group_theory/subgroup): prove relation between pointwise product of submonoids/subgroups and their join ([#6165](https://github.com/leanprover-community/mathlib/pull/#6165))

If `H` and `K` are subgroups/submonoids then `H ⊔ K = closure (H * K)`, where `H * K` is the pointwise set product. When `H` or `K` is a normal subgroup, it is proved that `(↑(H ⊔ K) : set G) = H * K`.

<!--
put comments you want to keep out of the PR commit here.
If this PR depends on other PRs, please list them below this comment,
using the following format:
- [ ] depends on: #abc [optional extra text]
- [ ] depends on: #xyz [optional extra text]
-->

### [2021-02-11T16:20:55+00:00](https://github.com/leanprover-community/mathlib/commit/f151da2acb211593b157858420d0cf33d34aac60)
feat(field_theory/polynomial_galois_group): Restriction from splitting field of composition ([#6148](https://github.com/leanprover-community/mathlib/pull/#6148))

Defines the surjective restriction map from the splitting field of a composition



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-02-11T16:20:52+00:00](https://github.com/leanprover-community/mathlib/commit/7b4a9e5ffb709d5e7b642bd910802dea2e6b9405)
feat(order/well_founded_set) : Define when a set is well-founded with `set.is_wf` ([#6113](https://github.com/leanprover-community/mathlib/pull/#6113))

Defines a predicate for when a set within an ordered type is well-founded (`set.is_wf`)
Proves basic lemmas about well-founded sets

### [2021-02-11T16:20:48+00:00](https://github.com/leanprover-community/mathlib/commit/a557f8bdfed187fd43724dcb96626d4dd6dcb7da)
feat(data/complex): order structure ([#4684](https://github.com/leanprover-community/mathlib/pull/#4684))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2021-02-11T14:27:06+00:00](https://github.com/leanprover-community/mathlib/commit/39090c8c477dd231c68156288e7d8f2441e08501)
doc(analysis/analytic/inverse): fix mathjax output ([#6175](https://github.com/leanprover-community/mathlib/pull/#6175))

`\\` in source code is converted to `\` in the generated html file, so one should have `\\\\` to generate proper line break for mathjax.

### [2021-02-11T11:51:02+00:00](https://github.com/leanprover-community/mathlib/commit/58632ac6a3114194a01fca7ac8add5f76cb86d47)
feat(topology/order): discrete_topology_bot ([#6163](https://github.com/leanprover-community/mathlib/pull/#6163))

From `lean-liquid`

### [2021-02-11T11:50:59+00:00](https://github.com/leanprover-community/mathlib/commit/fdace9516da5d40277ddfc9d727d21199bb41fd5)
feat(linear_algebra/matrix): generalize some `is_basis.to_matrix` results ([#6127](https://github.com/leanprover-community/mathlib/pull/#6127))

This PR contains some changes to the lemmas involving `is_basis.to_matrix`, allowing the bases involved to differ in their index type. Although you can prove there exists an `equiv` between those types, it's easier to not have to transport along that equiv.

The PR also generalizes `linear_map.to_matrix_id` to a form with two different bases, `linear_map.to_matrix_id_eq_basis_to_matrix`. Marking the second as `simp` means the first can be proved automatically, hence the removal of `simp` on that one.

### [2021-02-11T09:21:58+00:00](https://github.com/leanprover-community/mathlib/commit/d405c5e9099b4b2e23a475dd76e418918d08b666)
chore(scripts): update nolints.txt ([#6169](https://github.com/leanprover-community/mathlib/pull/#6169))

I am happy to remove some nolints for you!

### [2021-02-11T09:21:57+00:00](https://github.com/leanprover-community/mathlib/commit/59daf5308977327656b27688168fe8002db0ae36)
refactor(topology/subset_properties.lean): split the subset_properties.lean file ([#6161](https://github.com/leanprover-community/mathlib/pull/#6161))

split the file subset_properties.lean into another file called connected.lean which contains the properties that relate to connectivity. This is in preparation for a future PR proving properties about the quotient of a space by its connected components and it would add roughly 300 lines.

### [2021-02-11T09:21:55+00:00](https://github.com/leanprover-community/mathlib/commit/97a56e63e5d3023bd0ab28f062c265288101fa2c)
refactor(algebra/lie/basic): split giant file into pieces ([#6141](https://github.com/leanprover-community/mathlib/pull/#6141))

### [2021-02-11T06:02:45+00:00](https://github.com/leanprover-community/mathlib/commit/97f89af64791b5149678fae75ca75fc44912da42)
doc(algebra/euclidean_domain): module doc ([#6107](https://github.com/leanprover-community/mathlib/pull/#6107))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-02-11T06:02:43+00:00](https://github.com/leanprover-community/mathlib/commit/906e03def271177d637fc78005e6c4668532bac1)
chore(field_theory,ring_theory): reduce dependencies of `power_basis.lean` ([#6104](https://github.com/leanprover-community/mathlib/pull/#6104))

I was having trouble with circular imports related to `power_basis.lean`, so I decided to reshuffle some definitions to make `power_basis.lean` have less dependencies. That way, something depending on `power_basis` doesn't also need to depend on `intermediate_field.adjoin`.

The following (main) declarations are moved:
 - `algebra.adjoin`: from `ring_theory/adjoin.lean` to `ring_theory/adjoin/basic.lean` (renamed file)
 - `algebra.adjoin.power_basis`: from `ring_theory/power_basis.lean` to `ring_theory/adjoin/power_basis.lean` (new file)
 - `adjoin_root.power_basis`: from `ring_theory/power_basis.lean` to `ring_theory/adjoin_root.lean`
 - `intermediate_field.adjoin.power_basis`: from `ring_theory/power_basis.lean` to `field_theory/adjoin.lean`
 - `is_scalar_tower.polynomial`: from `ring_theory/algebra_tower.lean` to `ring_theory/polynomial/tower.lean` (new file)

The following results are new:
 - `is_integral.linear_independent_pow` and `is_integral.mem_span_pow`: generalize `algebra.adjoin.linear_independent_power_basis` and `algebra.adjoin.mem_span_power_basis`.

### [2021-02-11T06:02:41+00:00](https://github.com/leanprover-community/mathlib/commit/330129d42ab7071af58cd4ea320c23c49e09bde0)
feat(data/finset/lattice): `inf` and `sup` on complete_linear_orders produce an element of the set ([#6103](https://github.com/leanprover-community/mathlib/pull/#6103))

### [2021-02-11T06:02:39+00:00](https://github.com/leanprover-community/mathlib/commit/3959a8bbc57a630dac1aadcd56d6b129ce6eef68)
perf(ring_theory/{noetherian,ideal/basic}): Simplify proofs of Krull's theorem and related theorems ([#6082](https://github.com/leanprover-community/mathlib/pull/#6082))

Move `submodule.singleton_span_is_compact_element` and `submodule.is_compactly_generated` to more appropriate locations. Add trivial order isomorphisms and order-iso lemmas. Show that `is_atomic` and `is_coatomic` are respected by order isomorphisms. Greatly simplify `is_noetherian_iff_well_founded`. Provide an `is_coatomic` instance on the ideal lattice of a ring and simplify `ideal.exists_le_maximal`.

### [2021-02-11T00:37:06+00:00](https://github.com/leanprover-community/mathlib/commit/030107f6fe5a9c8bb9880ed4377355f19910d617)
feat(order/compactly_generated): A compactly-generated modular lattice is complemented iff atomistic ([#6071](https://github.com/leanprover-community/mathlib/pull/#6071))

Shows that a compactly-generated modular lattice is complemented iff it is atomistic
Proves extra lemmas about atomistic or compactly-generated lattices
Proves extra lemmas about `complete_lattice.independent`
Fix the name of `is_modular_lattice.sup_inf_sup_assoc`



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-02-11T00:37:04+00:00](https://github.com/leanprover-community/mathlib/commit/7fb7fb360158b7e3f71d616bb55f313ea8b414bb)
feat(ring_theory/polynomial/chebyshev/dickson): Introduce generalised Dickson polynomials ([#5869](https://github.com/leanprover-community/mathlib/pull/#5869))

and replace lambdashev with dickson 1 1. 



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: Julian <kuelsha@mathematik.uni-stuttgart.de>

### [2021-02-11T00:37:02+00:00](https://github.com/leanprover-community/mathlib/commit/c70feebd43e143d81a695f7d7e5b21e5892286e8)
feat(analysis/analytic/inverse): convergence of the inverse of a power series ([#5854](https://github.com/leanprover-community/mathlib/pull/#5854))

If a formal multilinear series has a positive radius of convergence, then its inverse also does.

### [2021-02-11T00:37:00+00:00](https://github.com/leanprover-community/mathlib/commit/19f24ced70b85cf9aa82146ec580c19c61bb2939)
feat(algebra/subalgebra): Trivial subalgebra has trivial automorphism group ([#5672](https://github.com/leanprover-community/mathlib/pull/#5672))

Adds a lemma stating that if top=bot in the subalgebra type then top=bot in the subgroup type.



Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-02-11T00:36:58+00:00](https://github.com/leanprover-community/mathlib/commit/983cb905e2468a820d833263bd537686b549267a)
feat(archive/imo): formalize 1987Q1 ([#4731](https://github.com/leanprover-community/mathlib/pull/#4731))

### [2021-02-10T21:01:42+00:00](https://github.com/leanprover-community/mathlib/commit/13c9ed344e1df442851c3c9e5978e59c5bf494b1)
refactor(data/finset/basic): simplify proof ([#6160](https://github.com/leanprover-community/mathlib/pull/#6160))

... of `bUnion_filter_eq_of_maps_to`

looks nicer, slightly faster elaboration, 13% smaller proof term

Co-authors: `lean-gptf`, Stanislas Polu

Co-authored-by: Jesse Michael Han <39395247+jesse-michael-han@users.noreply.github.com>

### [2021-02-10T21:01:40+00:00](https://github.com/leanprover-community/mathlib/commit/0bc7fc1b9c5834da81769409f9122a06b812718d)
refactor(ring_theory/perfection): faster proof of `coeff_frobenius` ([#6159](https://github.com/leanprover-community/mathlib/pull/#6159))

4X smaller proof term, elaboration 800ms -> 50ms

Co-authors: `lean-gptf`, Stanislas Polu

Note: supplying `coeff_pow_p f n` also works but takes 500ms to
elaborate


Co-authored-by: Jesse Michael Han <39395247+jesse-michael-han@users.noreply.github.com>

### [2021-02-10T21:01:38+00:00](https://github.com/leanprover-community/mathlib/commit/6e52dfe3cd5afd745dc39843d9ae1ec73cd3db3a)
feat(algebra/category/Group/adjunctions): adjunction of abelianization and forgetful functor ([#6154](https://github.com/leanprover-community/mathlib/pull/#6154))

Abelianization has been defined in `group_theory/abelianization` without realising it in category theory. This PR adds this feature. Furthermore, a module doc for abelianization is added and the one for adjunctions is expanded.



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-02-10T21:01:36+00:00](https://github.com/leanprover-community/mathlib/commit/bce1cb3e973ced1625f9387463f76cec3f8a758e)
feat(linear_algebra/matrix): lemmas for `reindex({_linear,_alg}_equiv)?` ([#6153](https://github.com/leanprover-community/mathlib/pull/#6153))

This PR contains a couple of `simp` lemmas for `reindex` and its bundled equivs. Namely, it adds `reindex_refl` (reindexing along the identity map is the identity), and `reindex_apply` (the same as `coe_reindex`, but no `λ i j` on the RHS, which makes it more useful for `rw`'ing.) The previous `reindex_apply` is renamed `coe_reindex` for disambiguation.

### [2021-02-10T21:01:35+00:00](https://github.com/leanprover-community/mathlib/commit/eca4f38f27d2b4bf6a7aed047e3073fc54891c35)
feat(data/int/basic): an integer of absolute value less than one is zero ([#6151](https://github.com/leanprover-community/mathlib/pull/#6151))

lemma eq_zero_iff_abs_lt_one

### [2021-02-10T21:01:33+00:00](https://github.com/leanprover-community/mathlib/commit/14a1fd7b016e2ad944f55cd09685304bc5a98c43)
feat(data/nat/basic): le_of_add_le_* ([#6145](https://github.com/leanprover-community/mathlib/pull/#6145))

### [2021-02-10T21:01:31+00:00](https://github.com/leanprover-community/mathlib/commit/dbbac3b38d0f2fa14db4f07df393add67902e0e3)
chore(algebra/module/pi): add missing smul_comm_class instances ([#6139](https://github.com/leanprover-community/mathlib/pull/#6139))

There are three families of these for consistency with how we have three families of `is_scalar_tower` instances.

### [2021-02-10T21:01:30+00:00](https://github.com/leanprover-community/mathlib/commit/56fde49b8c82132b6ae0c41916818d15df754c6e)
feat(data/polynomial/denoms_clearable): add lemma about clearing denominators in evaluating a polynomial ([#6122](https://github.com/leanprover-community/mathlib/pull/#6122))

Evaluating a polynomial with integer coefficients at a rational number and clearing denominators, yields a number greater than or equal to one.  The target can be any `linear_ordered_field K`.

The assumption on `K` could be weakened to `linear_ordered_comm_ring` assuming that the
image of the denominator is invertible in `K`.

Reference: Liouville PR [#4301](https://github.com/leanprover-community/mathlib/pull/#4301).

### [2021-02-10T21:01:28+00:00](https://github.com/leanprover-community/mathlib/commit/db0fa613675282caeebff91125774bc5e1a784a4)
feat(category_theory/differential_object): the shift functor ([#6111](https://github.com/leanprover-community/mathlib/pull/#6111))

Requested by @jcommelin.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-10T17:50:05+00:00](https://github.com/leanprover-community/mathlib/commit/f0413daff7b631dcb85c240508a01fe493f5cc91)
refactor(combinatorics/simple_graph/basic): change statement of mem_decidable to more general version ([#6157](https://github.com/leanprover-community/mathlib/pull/#6157))

Change statement of `mem_decidable` to more general version.

### [2021-02-10T17:50:03+00:00](https://github.com/leanprover-community/mathlib/commit/83118da744f2ad598d2069475687a9d67239da6b)
feat(data/nat/basic): prove an inequality of natural numbers ([#6155](https://github.com/leanprover-community/mathlib/pull/#6155))

Add lemma mul_lt_mul_pow_succ, proving the inequality `n * q < a * q ^ (n + 1)`.

Reference: Liouville PR [#4301](https://github.com/leanprover-community/mathlib/pull/#4301).

### [2021-02-10T17:50:01+00:00](https://github.com/leanprover-community/mathlib/commit/ca8e0093b443852a8a84d4cc077d20fd40332f9d)
feat(data/polynomial/ring_division): comp_eq_zero_iff ([#6147](https://github.com/leanprover-community/mathlib/pull/#6147))

Condition for a composition of polynomials to be zero (assuming that the ring is an integral domain).

### [2021-02-10T17:49:59+00:00](https://github.com/leanprover-community/mathlib/commit/41530ae3bde10b8f71db94812c71275b5704df36)
feat(field_theory/splitting_field): splits_of_nat_degree_le_one ([#6146](https://github.com/leanprover-community/mathlib/pull/#6146))

Adds the analogs of `splits_of_degree_eq_one` and `splits_of_degree_le_one` for `nat_degree`

### [2021-02-10T17:49:57+00:00](https://github.com/leanprover-community/mathlib/commit/3fae96c9844948fa741552edbded69582818567f)
feat(algebra/ordered_monoid): min_*_distrib ([#6144](https://github.com/leanprover-community/mathlib/pull/#6144))

Also provide a `canonically_linear_ordered_add_monoid` instances for `nat`, `nnreal`, `cardinal` and `with_top`.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-02-10T17:49:55+00:00](https://github.com/leanprover-community/mathlib/commit/3cc398b2a57818ac283476cb7209a9143ee81b8b)
feat(linear_algebra/prod): add an ext lemma that recurses into products ([#6124](https://github.com/leanprover-community/mathlib/pull/#6124))

Combined with [#6105](https://github.com/leanprover-community/mathlib/pull/#6105), this means that applying `ext` when faced with an equality between `A × (B ⊗[R] C) →ₗ[R] D`s now expands to two goals, the first taking `a : A` and the second taking `b : B` and `c : C`.

Again, this comes at the expense of sometimes needing to `simp [prod.mk_fst, linear_map.inr_apply]` after using `ext`, but those are all covered by `dsimp` anyway.

### [2021-02-10T15:17:41+00:00](https://github.com/leanprover-community/mathlib/commit/0854536965c3a40e3b1eea8e9d5e99411b394e13)
feat(topology/constructions): add `map_fst_nhds` and `map_snd_nhds` ([#6142](https://github.com/leanprover-community/mathlib/pull/#6142))

* Move the definition of `nhds_within` to `topology/basic`. The theory is still in `continuous_on`.
* Add `filter.map_inf_principal_preimage`.
* Add `map_fst_nhds_within`, `map_fst_nhds`, `map_snd_nhds_within`, and `map_snd_nhds`.

### [2021-02-10T15:17:39+00:00](https://github.com/leanprover-community/mathlib/commit/7fd4dcf136dc70b6897d9c31d2d546648979a565)
feat(analysis/normed_space/operator_norm): bundle more arguments ([#6140](https://github.com/leanprover-community/mathlib/pull/#6140))

* bundle the first argument of `continuous_linear_map.smul_rightL`;
* add `continuous_linear_map.flip` and `continuous_linear_map.flipₗᵢ`;
* use `flip` to redefine `apply`.

### [2021-02-10T15:17:37+00:00](https://github.com/leanprover-community/mathlib/commit/d5e2029d6c13030df33e217027e6ff2422be3994)
refactor(linear_algebra/basic): extract definitions about pi types to a new file ([#6130](https://github.com/leanprover-community/mathlib/pull/#6130))

This makes it consistent with how the `prod` definitions are in their own file.
With each in its own file, it should be easier to unify the APIs between them.
This does not do anything other than copy across the definitions.

### [2021-02-10T11:14:03+00:00](https://github.com/leanprover-community/mathlib/commit/7a51c0f64ae8956c6f6e179fe149fe6b04223898)
refactor(data/set/intervals/basic): simpler proof of `Iio_union_Ioo'` ([#6132](https://github.com/leanprover-community/mathlib/pull/#6132))

proof term 2577 -> 1587 chars

elaboration time 130ms -> 75ms

Co-authors: `lean-gptf`, Stanislas Polu

This was found by `formal-lean-wm-to-tt-m1-m2-v4-c4` when we evaluated it on theorems added to `mathlib` after we last extracted training data.


Co-authored-by: Jesse Michael Han <39395247+jesse-michael-han@users.noreply.github.com>

### [2021-02-10T05:02:51+00:00](https://github.com/leanprover-community/mathlib/commit/5a2eac675a74091953448747e9a5b9cc9d4d58ff)
refactor(order/closure): golf `closure_inter_le` ([#6138](https://github.com/leanprover-community/mathlib/pull/#6138))

Co-authors: `lean-gptf`, Stanislas Polu

This was found by `formal-lean-wm-to-tt-m1-m2-v4-c4` when we evaluated it on theorems added to `mathlib` after we last extracted training data.

### [2021-02-10T03:37:24+00:00](https://github.com/leanprover-community/mathlib/commit/0731a7003bf4a3265e91c33c9aa4e3c3df973248)
chore(scripts): update nolints.txt ([#6143](https://github.com/leanprover-community/mathlib/pull/#6143))

I am happy to remove some nolints for you!

### [2021-02-10T00:03:36+00:00](https://github.com/leanprover-community/mathlib/commit/922ecb070fc3b8ba1ab11de4207bfd0483472c0b)
chore(group_theory/perm/sign): speed up sign_aux_swap_zero_one proof ([#6128](https://github.com/leanprover-community/mathlib/pull/#6128))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-02-10T00:03:34+00:00](https://github.com/leanprover-community/mathlib/commit/18b378d87b408b0b1979c85b2f7229bdf16becf4)
chore(data/fin): reorder file to group declarations ([#6109](https://github.com/leanprover-community/mathlib/pull/#6109))

The `data/fin` file has a lot of definitions and lemmas. This reordering groups declarations and places ones that do not rely on `fin` operations first, like order. No definitions or lemma statements have been changed. A minimal amount of proofs have been rephrased. No reformatting of style has been done. Section titles have been added.

This is useful in preparation for redefining `fin` operations (lean[#527](https://github.com/leanprover-community/mathlib/pull/#527)). Additionally, it allows for better organization for other refactors like making `pred` and `pred_above` total.

### [2021-02-10T00:03:32+00:00](https://github.com/leanprover-community/mathlib/commit/4c1c11ce0e64170ac188c55598efcf40db324876)
feat(data/equiv/mul_add): monoids/rings with one element are isomorphic ([#6079](https://github.com/leanprover-community/mathlib/pull/#6079))

Monoids (resp. add_monoids, semirings) with one element are isomorphic.

### [2021-02-10T00:03:30+00:00](https://github.com/leanprover-community/mathlib/commit/b34da0021ea93a7538fd804a06b5bed9ac67a213)
feat(algebra/geom_sum): adds further variants ([#6077](https://github.com/leanprover-community/mathlib/pull/#6077))

This adds further variants for the value of `geom_series\2`. Additionally, a docstring is provided.

Thanks to Patrick Massot for help with the reindexing of sums.



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-02-10T00:03:28+00:00](https://github.com/leanprover-community/mathlib/commit/49e50ee5c981802cd493d2e63b5f93750951872c)
feat(measure_theory/lp_space): add more API on Lp spaces ([#6042](https://github.com/leanprover-community/mathlib/pull/#6042))

Flesh out the file on `L^p` spaces, notably adding facts on the composition with Lipschitz functions. This makes it possible to define in one go the positive part of an `L^p` function, and its image under a continuous linear map.

The file `ae_eq_fun.lean` is split into two, to solve a temporary issue: this file defines a global emetric space instance (of `L^1` type) on the space of function classes. This passes to subtypes, and clashes with the topology on `L^p` coming from the distance. This did not show up before as there were not enough topological statements on `L^p`, but I have been bitten by this when adding new results. For now, we move this part of `ae_eq_fun.lean` to another file which is not imported by `lp_space.lean`, to avoid the clash. This will be solved in a subsequent PR in which I will remove the global instance, and construct the integral based on the specialization of `L^p` to `p = 1` instead of the ad hoc construction we have now (note that, currently, we have two different `L^1` spaces in mathlib, denoted `Lp E 1 μ` and `α →₁[μ] E` -- I will remove the second one in a later PR).



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-02-10T00:03:26+00:00](https://github.com/leanprover-community/mathlib/commit/7c77279eec0b350e1e15ebda7cc4f74ee3fd58fb)
feat(category_theory/monad): use bundled monads everywhere ([#5889](https://github.com/leanprover-community/mathlib/pull/#5889))

This PR makes bundled monads the default (adapting definitions by @adamtopaz). The main motivation for this is that the category of algebras for a monad is currently not "hygienic" in that isomorphic monads don't have equivalent Eilenberg-Moore categories, but further that the notion of monad isomorphism is tricky to express, in particular this makes the definition of a monadic functor not preserved by isos either despite not explicitly having monads or algebras in the type.

We can now say:
```
@[simps]
def algebra_equiv_of_iso_monads {T₁ T₂ : monad C} (h : T₁ ≅ T₂) :
  algebra T₁ ≌ algebra T₂ :=
```

Other than this new data, virtually everything in this PR is just refactoring - in particular there's quite a bit of golfing and generalisation possible, but to keep the diff here minimal I'll do those in later PRs

### [2021-02-09T20:17:00+00:00](https://github.com/leanprover-community/mathlib/commit/ba9e06ecd08c0ce9de6a466c5c92e23014d23314)
refactor(algebra/lie/basic): rm extraneous rewrite hypothesis ([#6137](https://github.com/leanprover-community/mathlib/pull/#6137))

Co-authors: `lean-gptf`, Stanislas Polu

This was found by `formal-lean-wm-to-tt-m1-m2-v4-c4` when we evaluated it on theorems added to `mathlib` after we last extracted training data.

### [2021-02-09T20:16:58+00:00](https://github.com/leanprover-community/mathlib/commit/456bdb7318ef17f9fcf3a1895d0d6a5fe0792d48)
refactor(measure_theory/measure_space): simplify proof ([#6136](https://github.com/leanprover-community/mathlib/pull/#6136))

2X smaller proof term

Co-authors: `lean-gptf`, Stanislas Polu

This was found by `formal-lean-wm-to-tt-m1-m2-v4-c4` when we evaluated it on theorems added to `mathlib` after we last extracted training data.

### [2021-02-09T20:16:56+00:00](https://github.com/leanprover-community/mathlib/commit/c377e68e6b96bc04f18697cc999db9f588c92986)
refactor(ring_theory/polynomial/symmetric): simplify proof ([#6135](https://github.com/leanprover-community/mathlib/pull/#6135))

... of `mv_polynomial.is_symmetric.sub`

2X smaller proof term

Co-authors: `lean-gptf`, Stanislas Polu

This was found by `formal-lean-wm-to-tt-m1-m2-v4-c4` when we evaluated it on theorems added to `mathlib` after we last extracted training data.


Co-authored-by: Jesse Michael Han <39395247+jesse-michael-han@users.noreply.github.com>

### [2021-02-09T20:16:55+00:00](https://github.com/leanprover-community/mathlib/commit/eb2dcba5fc219a01b4c4a0a3200b6ce743d9a263)
refactor(*): remove uses of omega in the library ([#6129](https://github.com/leanprover-community/mathlib/pull/#6129))

The transition to Lean 4 will be easier if we don't have to port omega.

### [2021-02-09T20:16:52+00:00](https://github.com/leanprover-community/mathlib/commit/296899eb1e07ebe42f1649ee5761a5dae189a467)
refactor(data/string/basic): simplify proof of `to_list_nonempty` ([#6117](https://github.com/leanprover-community/mathlib/pull/#6117))

Co-authors: `lean-gptf`, Stanislas Polu

This was found by `formal-lean-wm-to-tt-m1-m2-v4-c4` when we evaluated it on theorems added to `mathlib` after we last extracted training data.

### [2021-02-09T20:16:49+00:00](https://github.com/leanprover-community/mathlib/commit/d9d56eb394ed1e73f644c23dbe2e8ab15374794f)
feat(analysis/special_functions/trigonometric): `complex.log` is smooth away from `(-∞, 0]` ([#6041](https://github.com/leanprover-community/mathlib/pull/#6041))

### [2021-02-09T16:47:39+00:00](https://github.com/leanprover-community/mathlib/commit/e8f383c0ffbf738e286debc2e666337a3edecefe)
refactor(analysis/special_functions/trigonometric): simpler proof ([#6133](https://github.com/leanprover-community/mathlib/pull/#6133))

... of `complex.tan_int_mul_pi`

3X faster elaboration, 2X smaller proof term

Co-authors: `lean-gptf`, Stanislas Polu

This was found by `formal-lean-wm-to-tt-m1-m2-v4-c4` when we evaluated it on theorems added to `mathlib` after we last extracted training data.

### [2021-02-09T16:47:37+00:00](https://github.com/leanprover-community/mathlib/commit/bf1465c29bcf61db7e2691f450e75fe7269766eb)
refactor(data/fintype/basic): golf `card_eq_one_of_forall_eq` ([#6131](https://github.com/leanprover-community/mathlib/pull/#6131))

Co-authors: `lean-gptf`, Stanislas Polu

This was found by `formal-lean-wm-to-tt-m1-m2-v4-c4` when we evaluated it on theorems added to `mathlib` after we last extracted training data.

### [2021-02-09T16:47:34+00:00](https://github.com/leanprover-community/mathlib/commit/fdbd4bffdc00b53b0b337ff308378a448b069f7e)
feat(archive/imo): formalize solution to IMO 2013 problem Q1 ([#6110](https://github.com/leanprover-community/mathlib/pull/#6110))

### [2021-02-09T14:41:24+00:00](https://github.com/leanprover-community/mathlib/commit/aa9e2b8f0736bf09be56d8f767df28e44c10ef9f)
feat(analysis/normed_space/operator_norm): lemmas about `E →L[𝕜] F →L[𝕜] G` ([#6102](https://github.com/leanprover-community/mathlib/pull/#6102))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-02-09T14:41:22+00:00](https://github.com/leanprover-community/mathlib/commit/766146b9e13e579dcbbb55f70cadeeded52ab3e0)
fix(topology/algebra/infinite_sum): remove hard-coding of ℕ and ℝ ([#6096](https://github.com/leanprover-community/mathlib/pull/#6096))

It may be possible to make these assumptions stricter, but they're weak enough to still cover the original use case.

Hopefully that can be handled by @alexjbest's upcoming linter to relax assumptions.

### [2021-02-09T11:14:56+00:00](https://github.com/leanprover-community/mathlib/commit/2d50cce30dc0f56b9d052aa8fdfc19f4818e4168)
refactor(geometry/euclidean): shorten proof ([#6121](https://github.com/leanprover-community/mathlib/pull/#6121))

... of `eq_reflection_of_eq_subspace`

Co-authors: `lean-gptf`, Stanislas Polu

This was found by `formal-lean-wm-to-tt-m1-m2-v4-c4` when we evaluated it on theorems added to `mathlib` after we last extracted training data.

Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2021-02-09T11:14:54+00:00](https://github.com/leanprover-community/mathlib/commit/aaab1139d1b88a14bf732f19afc93346e64f9493)
refactor(linear_algebra/prod): split out prod and coprod defs and lemmas  ([#6059](https://github.com/leanprover-community/mathlib/pull/#6059))

Lemmas are moved without modification.

I expect this will take a few builds of adding missing imports.

### [2021-02-09T11:14:52+00:00](https://github.com/leanprover-community/mathlib/commit/17448c64326cd862adbef67650cac254224cffbe)
feat(group_theory/perm/sign): induced permutation on a subtype that is a fintype ([#5706](https://github.com/leanprover-community/mathlib/pull/#5706))

If a permutation on a type maps a subtype into itself and the subtype is a fintype, then we get a permutation on the subtype. Similar to the subtype_perm definition in the same file.

Co-authored-by: paulvanwamelen <30371019+paulvanwamelen@users.noreply.github.com>

### [2021-02-09T07:26:19+00:00](https://github.com/leanprover-community/mathlib/commit/342bccf679cf607cf33dea8d143842ca4149901b)
refactor(group_theory/solvable): `simp` -> assumption ([#6120](https://github.com/leanprover-community/mathlib/pull/#6120))

Co-authors: `lean-gptf`, Stanislas Polu

This was found by `formal-lean-wm-to-tt-m1-m2-v4-c4` when we evaluated it on theorems added to `mathlib` after we last extracted training data.

### [2021-02-09T07:26:17+00:00](https://github.com/leanprover-community/mathlib/commit/ec8f2ac831319b2b7bdfc6b95281306142f3722e)
refactor(data/ordmap/ordset): simpler proof of `not_le_delta` ([#6119](https://github.com/leanprover-community/mathlib/pull/#6119))

Co-authors: `lean-gptf`, Stanislas Polu

This was found by `formal-lean-wm-to-tt-m1-m2-v4-c4` when we evaluated it on theorems added to `mathlib` after we last extracted training data.

### [2021-02-09T07:26:15+00:00](https://github.com/leanprover-community/mathlib/commit/7e5ff2f1711eddbd0b1a46108f446cfc01c8a66b)
refactor(computability/partrec): simpler proof of `subtype_mk` ([#6118](https://github.com/leanprover-community/mathlib/pull/#6118))

Co-authors: `lean-gptf`, Stanislas Polu

This was found by `formal-lean-wm-to-tt-m1-m2-v4-c4` when we evaluated it on theorems added to `mathlib` after we last extracted training data.

### [2021-02-09T07:26:13+00:00](https://github.com/leanprover-community/mathlib/commit/183f4fcee002fad8e9d6e9685b9586e39697e143)
refactor(category_theory/adjunction/mates): faster proof ([#6116](https://github.com/leanprover-community/mathlib/pull/#6116))

Co-authors: `lean-gptf`, Stanislas Polu

elaboration 750ms -> 350ms

5X smaller proof term

This was found by `formal-lean-wm-to-tt-m1-m2-v4-c4` when we evaluated it on theorems added to `mathlib` after we last extracted training data.

### [2021-02-09T07:26:11+00:00](https://github.com/leanprover-community/mathlib/commit/1611b30c24e90b7d629d8723d35c8f86ec38934d)
refactor(combinatorics/simple_graph): simplify proofs ([#6115](https://github.com/leanprover-community/mathlib/pull/#6115))

Co-authors: `lean-gptf`, Stanislas Polu

This was found by `formal-lean-wm-to-tt-m1-m2-v4-c4` when we evaluated it on theorems added to `mathlib` after we last extracted training data.

### [2021-02-09T07:26:10+00:00](https://github.com/leanprover-community/mathlib/commit/d06b11a5df4dfff4c7c134dbe93504aba51677c1)
refactor(algebra/lie/basic): golf `lie_algebra.morphism.map_bot_iff` ([#6114](https://github.com/leanprover-community/mathlib/pull/#6114))

Co-authors: `lean-gptf`, Stanislas Polu

This was found by `formal-lean-wm-to-tt-m1-m2-v4-c4` when we evaluated it on theorems added to `mathlib` after we last extracted training data.

Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2021-02-09T07:26:06+00:00](https://github.com/leanprover-community/mathlib/commit/6b65c3755cb8a79f6a433d86977539dad8069b5e)
refactor(linear_algebra/tensor_product): Use a more powerful lemma for ext ([#6105](https://github.com/leanprover-community/mathlib/pull/#6105))

This means that the `ext` tactic can recurse into both the left and the right of the tensor product.
The downside is that `compr₂_apply, mk_apply` needs to be added to some `simp only`s.

Notably this makes `ext` able to prove `tensor_product.ext_fourfold` (which is still needed to cut down elaboration time for the `pentagon` proof), and enables `ext` to be used on things like tensor products of a tensor_algebra and a free_algebra.

### [2021-02-09T07:26:04+00:00](https://github.com/leanprover-community/mathlib/commit/7b1945e9b32da23556b36500f12c19bde3b810b2)
feat(logic/basic): dite_eq_ite ([#6095](https://github.com/leanprover-community/mathlib/pull/#6095))

Simplify `dite` to `ite` when possible.


Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-09T05:58:46+00:00](https://github.com/leanprover-community/mathlib/commit/8fd86366a4472716b25100e831a2ba0f266b28b8)
feat(field_theory/minpoly): add `minpoly.nat_degree_pos` ([#6100](https://github.com/leanprover-community/mathlib/pull/#6100))

I needed this lemma and noticed that `minpoly.lean` actually uses this result more than `minpoly.degree_pos` (including in the proof of `degree_pos` itself). So I took the opportunity to golf a couple of proofs.

### [2021-02-09T03:30:54+00:00](https://github.com/leanprover-community/mathlib/commit/69bf4840e901ba22802ef99fddc29a85a339d512)
chore(scripts): update nolints.txt ([#6112](https://github.com/leanprover-community/mathlib/pull/#6112))

I am happy to remove some nolints for you!

### [2021-02-09T00:54:24+00:00](https://github.com/leanprover-community/mathlib/commit/117e729020c9af3c4c53ac48ddf5e724f6a127e9)
chore(linear_algebra/basic, analysis/normed_space/operator_norm): bundle another argument into the homs ([#5899](https://github.com/leanprover-community/mathlib/pull/#5899))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-02-08T21:41:41+00:00](https://github.com/leanprover-community/mathlib/commit/7f11d7218b35891b7c38222e2a2af5199b96b471)
feat(analysis/normed_space): `continuous_linear_map.prod` as a `linear_isometry_equiv` ([#6099](https://github.com/leanprover-community/mathlib/pull/#6099))

* add lemma `continuous_linear_map.op_norm_prod`;
* add `continuous_linear_map.prodₗ` and `continuous_linear_map.prodₗᵢ`;
* add `prod.topological_semimodule`;
* drop unused `is_bounded_linear_map_prod_iso`.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-02-08T21:41:39+00:00](https://github.com/leanprover-community/mathlib/commit/03074b12858f8c436a770b9a6efde61d7bd69e91)
doc(algebra/{field_power, punit_instances}): module docs ([#6097](https://github.com/leanprover-community/mathlib/pull/#6097))

Additionally `ordered_field` is aligned with the style guidelines.



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-02-08T19:30:23+00:00](https://github.com/leanprover-community/mathlib/commit/d62d793797e65a37ee2eac6e9fceb93047d2e2b4)
feat(differential_object/iso_app): extract the isomorphism of underlying objects ([#6083](https://github.com/leanprover-community/mathlib/pull/#6083))

From `lean-liquid`.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-08T19:30:20+00:00](https://github.com/leanprover-community/mathlib/commit/0c6fa2885935ee3910c9630d791f4811622f7eef)
feat(linear_algebra/basis): if `(p : submodule K V) < ⊤`, then there exists `f : V →ₗ[K] K`, `p ≤ ker f` ([#6074](https://github.com/leanprover-community/mathlib/pull/#6074))

### [2021-02-08T19:30:18+00:00](https://github.com/leanprover-community/mathlib/commit/4e9fbb9443bb508fc7626dda5d7dcb9a51f336ee)
feat(measure_theory/probability_mass_function): Add definitions for filtering pmfs on a predicate ([#6033](https://github.com/leanprover-community/mathlib/pull/#6033))

### [2021-02-08T19:30:16+00:00](https://github.com/leanprover-community/mathlib/commit/f6504f1a0843ba481e17e3fabe3d70d5415c5454)
feat(computability/DFA): the pumping lemma ([#5925](https://github.com/leanprover-community/mathlib/pull/#5925))

### [2021-02-08T16:17:44+00:00](https://github.com/leanprover-community/mathlib/commit/1d49f87e39d02adb86d5608a239a9d63cddda36c)
chore(data/finset): golf some proofs ([#6101](https://github.com/leanprover-community/mathlib/pull/#6101))

* prove that `finset.min'` and `finset.max'` are `is_least` and
  `is_greatest` elements of the corresponding sets;
* use this fact to golf some proofs;
  generalize `min'_lt_max'` to `is_glb_lt_is_lub_of_ne`;
* add `finset.card_le_one` and `finset.one_lt_card`.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-02-08T16:17:43+00:00](https://github.com/leanprover-community/mathlib/commit/1a0f84c71b16f6a1676a56b5aad66f2e0e6decc1)
feat(linear_algebra/basic): bundle prod and coprod into linear_equivs ([#5992](https://github.com/leanprover-community/mathlib/pull/#5992))

In order to do this, this has to reorder some definitions to make the semimodule structure on linear maps available earlier.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-02-08T14:15:50+00:00](https://github.com/leanprover-community/mathlib/commit/8a23aa3bbc95ff3b9d5e3be00bf99823b3921f42)
feat(topology/instances/{nnreal,ennreal}): add tendsto_cofinite_zero_of_summable ([#6093](https://github.com/leanprover-community/mathlib/pull/#6093))

For `f : a -> nnreal`, `summable f` implies `tendsto f cofinite (nhds 0)`.
For `f : a -> ennreal`, `tsum f < \top` implies `tendsto f cofinite (nhds 0)`.

Add versions of these lemmas with `at_top` instead of `cofinite` when `a = N`.

Also add `ennreal.tendsto_at_top_zero`, a simpler statement for a particular case of `ennreal.tendsto_at_top`.

### [2021-02-08T14:15:49+00:00](https://github.com/leanprover-community/mathlib/commit/8e3e79a280ad2d5d438e0dc5d60af264c37f1e6e)
feat(category_theory/pi): extract components of isomorphisms of indexed objects ([#6086](https://github.com/leanprover-community/mathlib/pull/#6086))

From `lean-liquid`.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-08T14:15:47+00:00](https://github.com/leanprover-community/mathlib/commit/f075a698bfadfab82773c66ce4a0b75401da6f07)
feat(category_theory/differential_object): lifting a functor ([#6084](https://github.com/leanprover-community/mathlib/pull/#6084))

From `lean-liquid`.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-08T14:15:44+00:00](https://github.com/leanprover-community/mathlib/commit/65616390832d6837ef2a8eea9c7fee7e6336a7ef)
feat(topology/local_extr): not locally surjective at a local extr ([#6076](https://github.com/leanprover-community/mathlib/pull/#6076))

### [2021-02-08T14:15:42+00:00](https://github.com/leanprover-community/mathlib/commit/054b4676b2672913093376e9fcb30a141e5ba521)
feat(analysis/calculus): derivatives of `f : E → Π i, F i` ([#6075](https://github.com/leanprover-community/mathlib/pull/#6075))

### [2021-02-08T14:15:40+00:00](https://github.com/leanprover-community/mathlib/commit/dc48a8494368d1398ca1175849b4136f69421b8d)
feat(linear_algebra/pi_tensor_product): add reindex and pempty_equiv ([#6069](https://github.com/leanprover-community/mathlib/pull/#6069))

### [2021-02-08T10:21:58+00:00](https://github.com/leanprover-community/mathlib/commit/d7a4f7274a0bc1cbe6ef0977eb26aa639f765e14)
feat(norm_cast): dite_cast to match ite_cast ([#6092](https://github.com/leanprover-community/mathlib/pull/#6092))

There's already an `ite_cast` lemma, for pushing a cast inside an `ite`. This adds the analogous `dite_cast`.


Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-08T10:21:56+00:00](https://github.com/leanprover-community/mathlib/commit/b338240eadd8026db18c89321e66fdefc337c3f7)
feat(topology/constructions): a finite product of discrete spaces is discrete ([#6088](https://github.com/leanprover-community/mathlib/pull/#6088))

From `lean-liquid`.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-08T10:21:55+00:00](https://github.com/leanprover-community/mathlib/commit/e4369fe35dfee7561fd024a964ff2b6444bebd20)
chore(algebra/module/prod): add missing instances ([#6055](https://github.com/leanprover-community/mathlib/pull/#6055))

This adds the following instances for `prod`:
* `is_scalar_tower`
* `smul_comm_class`
* `mul_action`
* `distrib_mul_action`

It also renames the type variables to match the usual convention for modules

### [2021-02-08T08:08:37+00:00](https://github.com/leanprover-community/mathlib/commit/90702a043bf807f114adf2b79be3fe5f3a609153)
feat(topology/continuous_map): missing coe_mk lemma ([#6087](https://github.com/leanprover-community/mathlib/pull/#6087))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-08T05:08:19+00:00](https://github.com/leanprover-community/mathlib/commit/a6fc6bdca924e8da96093d1b4e9bfa2b78df156b)
feat(finset/lattice): max'_insert ([#6089](https://github.com/leanprover-community/mathlib/pull/#6089))

From `lean-liquid`.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2021-02-08T02:16:50+00:00](https://github.com/leanprover-community/mathlib/commit/6b83e72814a606b4896f124908159309f3cb8038)
chore(scripts): update nolints.txt ([#6090](https://github.com/leanprover-community/mathlib/pull/#6090))

I am happy to remove some nolints for you!

### [2021-02-08T02:16:48+00:00](https://github.com/leanprover-community/mathlib/commit/5bf92e1d6f1dc27044f6db45d1efba71c83cfc17)
chore(analysis/calculus/local_extr): review ([#6085](https://github.com/leanprover-community/mathlib/pull/#6085))

* golf 2 proofs;
* don't use explicit section `variables`;
* add 2 docstrings.

### [2021-02-07T23:41:53+00:00](https://github.com/leanprover-community/mathlib/commit/45f95448b98dbcddb289b1be5e881ccf88e967c2)
feat(topology/separation): an injective map on a compact space is an embedding ([#6057](https://github.com/leanprover-community/mathlib/pull/#6057))

### [2021-02-07T23:41:49+00:00](https://github.com/leanprover-community/mathlib/commit/9411b00e59595240f9d75dcd7bb15a66b7cbae8e)
feat(algebra/lie/basic): define the center of a Lie algebra and prove some related results ([#6013](https://github.com/leanprover-community/mathlib/pull/#6013))

### [2021-02-07T23:41:48+00:00](https://github.com/leanprover-community/mathlib/commit/d989ff47b57cdca5c95a660ba0a4dd82b4d1d76c)
feat(measure_theory/lebesgue_measure): integral as volume between graphs ([#5932](https://github.com/leanprover-community/mathlib/pull/#5932))

I show that the integral can compute the volume between two real-valued functions. I start with the definition `region_between`, I prove that the region between two functions is a `measurable_set`, and then I prove two integral theorems. 

Help from @hrmacbeth and @benjamindavidson.

Co-authored-by: Andrew Souther <65313859+asouther4@users.noreply.github.com>
Co-authored-by: Benjamin Davidson <68528197+benjamindavidson@users.noreply.github.com>

### [2021-02-07T21:13:03+00:00](https://github.com/leanprover-community/mathlib/commit/f3b0295a1c7cbf7ac182e1bcb07e92cdb92101e3)
chore(measure_theory): use `∞` notation for `(⊤ : ℝ≥0∞)` ([#6080](https://github.com/leanprover-community/mathlib/pull/#6080))

### [2021-02-07T21:13:00+00:00](https://github.com/leanprover-community/mathlib/commit/5d4d8158c95be8c9341393afe66e54886058c234)
feat(analysis): prove that a polynomial function is equivalent to its leading term along at_top, and consequences ([#5354](https://github.com/leanprover-community/mathlib/pull/#5354))

The main result is `eval_is_equivalent_at_top_eval_lead`, which states that for
any polynomial `P` of degree `n` with leading coeff `a`, the corresponding polynomial
function is equivalent to `a * x^n` as `x` goes to +∞.
We can then use this result to prove various limits for polynomial and rational
functions, depending on the degrees and leading coeffs of the considered polynomials.



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2021-02-07T19:35:43+00:00](https://github.com/leanprover-community/mathlib/commit/99fe12af69abe4344872de299fa59908ba83765e)
refactor(measure_theory/ae_eq_fun): move emetric to `ae_eq_fun_metric` ([#6081](https://github.com/leanprover-community/mathlib/pull/#6081))

Cherry-picked from [#6042](https://github.com/leanprover-community/mathlib/pull/#6042)

### [2021-02-07T19:35:41+00:00](https://github.com/leanprover-community/mathlib/commit/5a25827e9d717d7bd60617c60e701a4071d172e0)
chore(measure_theory/measure_space): move definition of `measure.ae` up ([#6051](https://github.com/leanprover-community/mathlib/pull/#6051))

### [2021-02-07T19:35:39+00:00](https://github.com/leanprover-community/mathlib/commit/132b0fe97dbfd390f778e706c1e1eccc242ff935)
fix(scripts): make lint-style.* work on macos and windows ([#6047](https://github.com/leanprover-community/mathlib/pull/#6047))

Make lint-style.sh use a POSIX-portable way of checking for executable bits, and make it always open files as UTF-8.

Also makes CI run the sanity checks across all 3 OSes to ensure this stays working.

### [2021-02-07T15:56:24+00:00](https://github.com/leanprover-community/mathlib/commit/288cc2e4803cf764b44b904e33c3e3186bc26af2)
feat(logic/function/basic): add lemma stating that dite of two injective functions is injective if images are disjoint ([#5866](https://github.com/leanprover-community/mathlib/pull/#5866))

Add lemma stating that dite of two injective functions is injective if their images are disjoint. Part of [#5695](https://github.com/leanprover-community/mathlib/pull/#5695) in order to prove Hall's Marriage Theorem.



Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>

### [2021-02-07T13:33:58+00:00](https://github.com/leanprover-community/mathlib/commit/c25dad98caa98a707252412e59e309a1548215be)
refactor(analysis/calculus/mean_value): use `is_R_or_C` in more lemmas ([#6022](https://github.com/leanprover-community/mathlib/pull/#6022))

* use `is_R_or_C` in `convex.norm_image_sub_le*` lemmas;
* replace `strict_fderiv_of_cont_diff` with
  `has_strict_fderiv_at_of_has_fderiv_at_of_continuous_at` and
  `has_strict_deriv_at_of_has_deriv_at_of_continuous_at`, slightly change assumptions;
* add `has_ftaylor_series_up_to_on.has_fderiv_at`,
  `has_ftaylor_series_up_to_on.eventually_has_fderiv_at`,
  `has_ftaylor_series_up_to_on.differentiable_at`;
* add `times_cont_diff_at.has_strict_deriv_at` and
  `times_cont_diff_at.has_strict_deriv_at'`;
* prove that `complex.exp` is strictly differentiable and is an open map;
* add `simp` lemma `interior_mem_nhds`.

### [2021-02-07T06:54:51+00:00](https://github.com/leanprover-community/mathlib/commit/8b1f3237fa6888b42f3cc0305a01c0fb1aeffae2)
feat(ring_theory/polynomial): Almost Vieta's formula on products of (X + r) ([#5696](https://github.com/leanprover-community/mathlib/pull/#5696))

The main result is `prod_X_add_C_eq_sum_esymm`, which proves that a product of linear terms is equal to a linear combination of symmetric polynomials. Evaluating the variables of the symmetric polynomials gives Vieta's Formula.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-02-07T04:02:36+00:00](https://github.com/leanprover-community/mathlib/commit/4b035fcd65b4c3c1f87817ee1dd8b2a557021863)
refactor(analysis/normed_space): upgrade `linear_map.to_continuous_linear_map` to `linear_equiv` ([#6072](https://github.com/leanprover-community/mathlib/pull/#6072))

This way Lean will simplify, e.g., `f.to_continuous_linear_map = 0` to
`f = 0`.

### [2021-02-07T02:14:17+00:00](https://github.com/leanprover-community/mathlib/commit/736929e5568a9c01700ae713947a5e1d7665d8a5)
chore(scripts): update nolints.txt ([#6073](https://github.com/leanprover-community/mathlib/pull/#6073))

I am happy to remove some nolints for you!

### [2021-02-06T22:54:57+00:00](https://github.com/leanprover-community/mathlib/commit/7f467fad8cfa38e3233d67cf384213dae3f3cdaf)
feat(algebra/group/hom): add inv_comp and comp_inv ([#6046](https://github.com/leanprover-community/mathlib/pull/#6046))

Two missing lemmas. Used in the Liquid Tensor Experiment.

Inversion for monoid hom is (correctly) only defined when the target is a comm_group; this explains the choice of typeclasses. I follow `inv_apply` and use `{}` rather than `[]`, but this is certainly not my area of expertise.

### [2021-02-06T22:54:56+00:00](https://github.com/leanprover-community/mathlib/commit/7c53a168c956c7168e7b02c5b58cc6f4d440294b)
feat(algebra/ordered_ring): add lemma ([#6031](https://github.com/leanprover-community/mathlib/pull/#6031))

Add a lemma in algebra.ordered_ring proving the inequality `a + (2 + b) ≤ a * (2 + b)`.

This is again part of the Liouville PR.

### [2021-02-06T21:31:25+00:00](https://github.com/leanprover-community/mathlib/commit/7ec4fcc393241cb46d2dd85b94170da718d376d7)
feat(category_theory): connected components of a category ([#5425](https://github.com/leanprover-community/mathlib/pull/#5425))

### [2021-02-06T20:09:52+00:00](https://github.com/leanprover-community/mathlib/commit/a1ebf540d17e094c04e7b6fd295adc383ee9fc3b)
refactor(data/buffer/parser/basic): make valid a class and rename to mono ([#6015](https://github.com/leanprover-community/mathlib/pull/#6015))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-02-06T15:06:18+00:00](https://github.com/leanprover-community/mathlib/commit/dbf038d6804f171fa68eb12562c493c89a4b701f)
feat(topology/category): constructor for compact hausdorff spaces ([#6068](https://github.com/leanprover-community/mathlib/pull/#6068))

`CompHaus.of` constructor. From the lean-liquid project.

### [2021-02-06T12:13:41+00:00](https://github.com/leanprover-community/mathlib/commit/767e6ae04d52e6ddc01d15260a6544b998c8574c)
refactor(topology): make two definitions irreducible from the start ([#6060](https://github.com/leanprover-community/mathlib/pull/#6060))

### [2021-02-06T08:37:26+00:00](https://github.com/leanprover-community/mathlib/commit/2bdeda9cfd9c7fb74a5683dedd0f21ecec30b5e0)
doc(number_theory/*): provide docstrings for basic and dioph ([#6063](https://github.com/leanprover-community/mathlib/pull/#6063))

The main purpose of this PR is to provide docstrings for the two remaining files without docstring in number_theory, basic and dioph. Furthermore, lines are split in other files, so that there should be no number_theory entries in the style_exceptions file.



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-02-06T05:00:08+00:00](https://github.com/leanprover-community/mathlib/commit/d951b2b4ecd117a5a656b088b3b23b138bdd849d)
feat(data/nat): division of powers ([#6067](https://github.com/leanprover-community/mathlib/pull/#6067))

A small missing lemma.

### [2021-02-06T01:48:21+00:00](https://github.com/leanprover-community/mathlib/commit/b8a6f811125a81b528001e880cbc5441c4061fd8)
chore(scripts): update nolints.txt ([#6066](https://github.com/leanprover-community/mathlib/pull/#6066))

I am happy to remove some nolints for you!

### [2021-02-06T01:48:19+00:00](https://github.com/leanprover-community/mathlib/commit/b6b90e28b8dd508743a0b0a56adb08a6dfc5ea76)
fix(ring_theory/power_series/basic): fix algebra arguments ([#6065](https://github.com/leanprover-community/mathlib/pull/#6065))

`power_series` is just an alias for `mv_power_series` over `unit`, yet it did not correctly inherit the algebra instance

### [2021-02-06T01:48:17+00:00](https://github.com/leanprover-community/mathlib/commit/94033d8e14bf3737e65d65e43306ad803c16bed4)
feat(data/list/basic): simp iffs about *fix nil ([#6064](https://github.com/leanprover-community/mathlib/pull/#6064))

### [2021-02-05T22:20:21+00:00](https://github.com/leanprover-community/mathlib/commit/0926e67428d5b0658fda50eafa13dcc0670efb05)
feat(algebra/star): star_ordered_ring ([#4685](https://github.com/leanprover-community/mathlib/pull/#4685))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2021-02-05T15:46:37+00:00](https://github.com/leanprover-community/mathlib/commit/bd38c5ff2ebebf897d87916965d81d87af05ae7e)
chore(linear_algebra): move `is_basis_std_basis` to `std_basis.lean` ([#6054](https://github.com/leanprover-community/mathlib/pull/#6054))

This is a follow-up to [#6020](https://github.com/leanprover-community/mathlib/pull/#6020) which moved `std_basis` to a new file: now move results from `basis.lean` to that same file.

CC @eric-wieser 



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-02-05T15:46:35+00:00](https://github.com/leanprover-community/mathlib/commit/b5c23cea0b67a828707288f349dbf8653af49985)
feat(data/nat/factorial): non-strict inequality on factorial ([#6052](https://github.com/leanprover-community/mathlib/pull/#6052))

Add lemmas add_factorial_le_factorial_add and  add_factorial_le_factorial_add'.  These are still used in the Liouville PR.

I should have added them to the previous PR on factorials, but they got lost on the way!

### [2021-02-05T15:46:33+00:00](https://github.com/leanprover-community/mathlib/commit/1ab7cf67113e7fabf63217ebfce348cf122b351b)
feat(algebra/ordered_ring): proof that `a + b ≤ a * b` ([#6043](https://github.com/leanprover-community/mathlib/pull/#6043))

This is Johan's proof of the fact above.  If you are curious about the assumptions, there is an extensive discussion on

https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/canonically_ordered.20pathology

### [2021-02-05T15:46:31+00:00](https://github.com/leanprover-community/mathlib/commit/fa9bf621eab43d6b6e857d5e6e905c410ff25012)
feat(algebra/char_zero): add char_zero lemma for ordered_semirings ([#6038](https://github.com/leanprover-community/mathlib/pull/#6038))

Relevant Zulip chat:

https://leanprover.zulipchat.com/#narrow/stream/113489-new-members

### [2021-02-05T15:46:28+00:00](https://github.com/leanprover-community/mathlib/commit/c2c686e422ac3e854b5429bd6eeeab2ec69e8941)
feat(linear_algebra/multilinear): add more `curry` equivs ([#6012](https://github.com/leanprover-community/mathlib/pull/#6012))

* `multilinear_map (λ i : ι ⊕ ι', E) F` is equivalent to
  `multilinear_map (λ i : ι, E) (multilinear_map (λ i : ι', E) F)`;
* given `s : finset (fin n)`, `s.card = k`, and `sᶜ.card = l`,
  `multilinear_map (λ i : fin n, E) F` is equivalent to
  `multilinear_map (λ i : fin k, E) (multilinear_map (λ i : fin l, E) F)`.

### [2021-02-05T15:46:26+00:00](https://github.com/leanprover-community/mathlib/commit/dc9854787241dcfd329a551814b4b182da3df5ec)
feat(linear_algebra/projection): Extending maps from complement submodules to the entire module ([#5981](https://github.com/leanprover-community/mathlib/pull/#5981))

Given two linear maps from complement submodules, `of_is_comp` is the linear map extended to the entire module. 
This is useful whenever we would like to extend a linear map from a submodule to a map on the entire module.

### [2021-02-05T12:11:35+00:00](https://github.com/leanprover-community/mathlib/commit/34e366c6fca99c411565ec72e0b15068b079a252)
refactor(*): remove uses of @[class] def  ([#6028](https://github.com/leanprover-community/mathlib/pull/#6028))

Preparation for lean 4, which does not support this idiom.

### [2021-02-05T12:11:33+00:00](https://github.com/leanprover-community/mathlib/commit/c6c7eaf34bee14a358fe078b02d2e00a4b3fbaca)
refactor(topology/algebra/module,analysis/*): merge some `smul` lemmas and defs ([#5987](https://github.com/leanprover-community/mathlib/pull/#5987))

Generalize some definitions and lemmas about `smul`  and `f : E →L[k] F` so that now they allow scalars from an algebra over `k`. This way we can get rid of `smul_algebra` definitions and lemmas.

In particular, now `continuous_linear_map.smul_right` accepts functions with values in an algebra over `k`, so `smul_right 1 f` now needs a type annotation on `1`.

### [2021-02-05T12:11:32+00:00](https://github.com/leanprover-community/mathlib/commit/392ebecdfa251120625a61825792bfa02954f6e7)
chore(algebra/algebra/basic): show that the ℚ-algebra structure is unique ([#5980](https://github.com/leanprover-community/mathlib/pull/#5980))

Note that we already have similar lemmas showing that ℕ and ℤ modules are unique.

The name is based on `rat.algebra_rat`, which provides a canonical instance.

### [2021-02-05T12:11:29+00:00](https://github.com/leanprover-community/mathlib/commit/915bff4724ef01abaa0ce3c9630cf80f556473b0)
feat(field_theory/polynomial_galois_group): Restriction is surjective ([#5961](https://github.com/leanprover-community/mathlib/pull/#5961))

Proves surjectivity of `restrict` and `restrict_dvd`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-02-05T12:11:27+00:00](https://github.com/leanprover-community/mathlib/commit/e1db909313cbc80335097e906b28562be8cee055)
feat(order/filter): add lattice instance to order.ideal ([#5937](https://github.com/leanprover-community/mathlib/pull/#5937))

Add lattice instance to `order.ideal P` when the preorder `P` is
actually a `semilattice_sup_bot` (that is, when `P` is a partial
order with all finite suprema).

### [2021-02-05T12:11:25+00:00](https://github.com/leanprover-community/mathlib/commit/70269f3c2f1db18d05ca800107c79288ef0154e3)
feat(order/*): introduces complemented lattices ([#5747](https://github.com/leanprover-community/mathlib/pull/#5747))

Defines `is_complemented` on bounded lattices
Proves facts about complemented modular lattices
Provides two instances of `is_complemented` on submodule lattices



Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-02-05T08:47:31+00:00](https://github.com/leanprover-community/mathlib/commit/53914334827818730adededabe69a8d9ae400f6a)
feat(algebra/group_power/basic): `pow_add_pow_le` ([#6037](https://github.com/leanprover-community/mathlib/pull/#6037))

For natural `n ≠ 0` and nonnegative `x, y` in an `ordered_semiring`, `x ^ n + y ^ n ≤ (x + y) ^ n`.

### [2021-02-05T04:22:35+00:00](https://github.com/leanprover-community/mathlib/commit/5cb2865ed2ac31478f33fbdd5939cefbe3c26df6)
chore(scripts): update nolints.txt ([#6049](https://github.com/leanprover-community/mathlib/pull/#6049))

I am happy to remove some nolints for you!

### [2021-02-05T00:51:27+00:00](https://github.com/leanprover-community/mathlib/commit/80c7ac1cce1cf7a637ce2b4b6ba2bf2c9b17bd9c)
feat(algebra/big_operators/order): add fintype.sum_mono and fintype.sum_strict_mono ([#6040](https://github.com/leanprover-community/mathlib/pull/#6040))

### [2021-02-05T00:51:25+00:00](https://github.com/leanprover-community/mathlib/commit/a101788b1a5ee4f454da1ba46b87913df031f0e2)
fix(tactic/congr): fix trivial congr/convert ([#6011](https://github.com/leanprover-community/mathlib/pull/#6011))

Now `convert` will prove reflexivity goals even at the top level, before
applying any congruence rules. Under the interpretation of the depth
argument as the number of nested congruence rules applied, we allow
proofs by assumption or reflexivity to work even at depth 0.

Also fixes a bug where
```lean
example {α} (a b : α) : a = b := by congr'
```
would succeed, because `apply proof_irrel` will unify the universe
metavariable in the type of `α` to `Prop`, causing surprising behavior.




Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2021-02-05T00:51:23+00:00](https://github.com/leanprover-community/mathlib/commit/59cfa02fad06345bd7df61f76b8f7d312b588714)
chore(data/quot): rename `lift_on_beta` to `lift_on_mk` ([#5921](https://github.com/leanprover-community/mathlib/pull/#5921))

This also renames some other `lift_*_beta` lemmas to match their statement.

The [Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/quotient.20.22on_beta.22.20vs.20.22on_mk.22) was unanimously in favor of this rename.

### [2021-02-04T21:33:38+00:00](https://github.com/leanprover-community/mathlib/commit/b9e559b76f6aeca16428782b24c6e2f75f62c408)
feat(data/real/ennreal): use notation for ennreal ([#6044](https://github.com/leanprover-community/mathlib/pull/#6044))

The notation for `ennreal` is `ℝ≥0∞` and it is localized to `ennreal` (though I guess it doesn't have to be?).

Zulip: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation.20for.20ennreal

### [2021-02-04T21:33:36+00:00](https://github.com/leanprover-community/mathlib/commit/7734d3866b1bfd8ea39b474bee6d0918cd4e0f7a)
refactor(data/real/basic): make ℝ a structure ([#6024](https://github.com/leanprover-community/mathlib/pull/#6024))

Preparation for :four_leaf_clover:, which doesn't have irreducible.

### [2021-02-04T21:33:34+00:00](https://github.com/leanprover-community/mathlib/commit/d2938225e99f1c3609a4f1d2939393f62dece2f4)
feat(topology/algebra/infinite_sum, topology/instances/ennreal): extend tsum API ([#6017](https://github.com/leanprover-community/mathlib/pull/#6017))

Lemma `tsum_lt_of_nonneg` shows that if a sequence `f` with non-negative terms is dominated by a sequence `g` with summable series and at least one term of `f` is strictly smaller than the corresponding term in `g`, then the series of `f` is strictly smaller than the series of `g`.

Besides this lemma, I also added the relevant API in topology.algebra.infinite_sum.

### [2021-02-04T21:33:32+00:00](https://github.com/leanprover-community/mathlib/commit/1ee00c89a8d83cbea01b3eb84ffdd79d5d48163e)
feat(number_theory/bernoulli): Results regarding Bernoulli numbers as a generating function ([#5957](https://github.com/leanprover-community/mathlib/pull/#5957))

We prove that the Bernoulli numbers are generating functions for t/(e^t - 1). Most of the results are proved by @kbuzzard.



Co-authored-by: laughinggas <58670661+laughinggas@users.noreply.github.com>

### [2021-02-04T18:03:59+00:00](https://github.com/leanprover-community/mathlib/commit/49cf0be5701ab42d2ff759303292cc228ef686cc)
refactor(real): protect real.pi ([#6039](https://github.com/leanprover-community/mathlib/pull/#6039))

Currently, `real.pi` is not protected. This can conflict with `set.pi`. Since it is most often used as `π` through the `real` locale, let's protect it.

### [2021-02-04T18:03:58+00:00](https://github.com/leanprover-community/mathlib/commit/1a7fb7e4b25c424db0064c84c8d005af71538b4d)
feat(data/list/sort): add sorted.rel_of_mem_take_of_mem_drop ([#6027](https://github.com/leanprover-community/mathlib/pull/#6027))

Also renames the existing lemmas to enable dot notation

Co-authored-by: pechersky@users.noreply.github.com

### [2021-02-04T18:03:56+00:00](https://github.com/leanprover-community/mathlib/commit/b98b5f6b61e9cda6ae62ee8e584e6f48896d8544)
chore(data/dfinsupp): add simp lemmas about sum_add_hom, remove commutativity requirement ([#5939](https://github.com/leanprover-community/mathlib/pull/#5939))

Note that `dfinsupp.sum_add_hom` and `dfinsupp.sum` are not defeq, so its valuable to repeat these lemmas.
The former is often easier to work with because there are no decidability requirements to juggle on equality with zero.

`dfinsupp.single_eq_of_sigma_eq` was a handy lemma for constructing a term-mode proof of `dfinsupp.single` equality.

A lot of the lemmas about `lift_add_hom` have to be repeated for `sum_add_hom` because the former simplifies to the latter before its lemmas get a chance to apply. At least the proofs can be reused.

### [2021-02-04T18:03:54+00:00](https://github.com/leanprover-community/mathlib/commit/6d153f1be525225e2e11813714b052b6fcabe605)
feat(data/equiv/basic): perm.subtype_congr ([#5875](https://github.com/leanprover-community/mathlib/pull/#5875))



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-02-04T18:03:51+00:00](https://github.com/leanprover-community/mathlib/commit/bbf97744b18a4e2c497806db3ef5c91cd18c69be)
feat(data/fintype/basic): inv of inj on deceq ([#5872](https://github.com/leanprover-community/mathlib/pull/#5872))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-02-04T18:03:49+00:00](https://github.com/leanprover-community/mathlib/commit/9993a5044a6309c0effa13588268b22ffd1dc0f3)
feat(tactic/norm_swap): simplify numeral swaps ([#5637](https://github.com/leanprover-community/mathlib/pull/#5637))

Explicitly applied swap equalities over `nat` can be proven to be true using `dec_trivial`. However, if occurring in the middle of a larger expression, a separate specialized hypothesis would be necessary to reduce them down. This is an initial attempt at a `norm_num` extension which seeks to reduce down expressions of the `swap X Y Z` form. Handles `nat`, `int`, `rat`, and `fin` swaps.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-02-04T14:28:12+00:00](https://github.com/leanprover-community/mathlib/commit/4d26028ea2dc978ef4f713d33b2886e61d0a9a40)
chore(order/basic): add a lemma expanding `le` on pi types ([#6023](https://github.com/leanprover-community/mathlib/pull/#6023))

### [2021-02-04T14:28:10+00:00](https://github.com/leanprover-community/mathlib/commit/e61db52e120e921ab4ed61a3bd4f0e52052d6d2a)
chore(linear_algebra/quadratic_form): add polar_self, polar_zero_left, and polar_zero_right simp lemmas ([#6003](https://github.com/leanprover-community/mathlib/pull/#6003))

This also reorders the existing lemmas to keep the polar ones separate from the non-polar ones

### [2021-02-04T12:05:37+00:00](https://github.com/leanprover-community/mathlib/commit/1a2eb0b514cc0c2ceab745caa4d810244984fa8d)
feat(analysis/special_functions/trigonometric): add mistakenly omitted lemma ([#6036](https://github.com/leanprover-community/mathlib/pull/#6036))

### [2021-02-04T12:05:35+00:00](https://github.com/leanprover-community/mathlib/commit/16be8e393c585ca982ff7bcd8ebbc24ae7f15de5)
refactor(analysis/normed_space): simpler proof of `norm_sub_pow_two` ([#6035](https://github.com/leanprover-community/mathlib/pull/#6035))

Co-authors: `lean-gptf`, Stanislas Polu

### [2021-02-04T12:05:34+00:00](https://github.com/leanprover-community/mathlib/commit/894ff7ada3c14265b58fb6da7fb79f90815a1d45)
doc(number_theory/{pell, sum_of_four_squares}): docstring to pell  ([#6030](https://github.com/leanprover-community/mathlib/pull/#6030))

and additionally fixing the syntax for the docstring of sum_of_four_squares.

### [2021-02-04T12:05:32+00:00](https://github.com/leanprover-community/mathlib/commit/0aed8b1e648a63408dbf9976983797cc634f9611)
refactor(analysis/asymptotics): make definitions immediately irreducible ([#6021](https://github.com/leanprover-community/mathlib/pull/#6021))

### [2021-02-04T12:05:30+00:00](https://github.com/leanprover-community/mathlib/commit/97781b9a9b19db6ef5cdc71e1f5976c3ceb72fb0)
chore(linear_algebra/std_basis): move std_basis to a new file ([#6020](https://github.com/leanprover-community/mathlib/pull/#6020))

linear_algebra/basic is _very_ long. This reduces its length by about 5%.

Authorship of the std_basis stuff seems to come almost entirely from 10a586b1d82098af32e13c8d8448696022132f17.

None of the lemmas have changed, and the variables are kept in exactly the same order as before.

### [2021-02-04T07:48:51+00:00](https://github.com/leanprover-community/mathlib/commit/6df15017ef46b851d5c5738d57b51ee17cffa5b9)
feat(algebra/ordered_ring): weaken hypotheses for one_le_two ([#6034](https://github.com/leanprover-community/mathlib/pull/#6034))

Adjust `one_le_two` to not require nontriviality.

### [2021-02-04T03:30:09+00:00](https://github.com/leanprover-community/mathlib/commit/3309490a30e1f951d00ad0ce2ea3ff56df1689bf)
chore(scripts): update nolints.txt ([#6032](https://github.com/leanprover-community/mathlib/pull/#6032))

I am happy to remove some nolints for you!

### [2021-02-04T03:30:08+00:00](https://github.com/leanprover-community/mathlib/commit/7812afa38eeeb8e532dca6db5dd841671432fad4)
feat(data/list/basic): drop_eq_nil_of_le ([#6029](https://github.com/leanprover-community/mathlib/pull/#6029))

### [2021-02-04T03:30:06+00:00](https://github.com/leanprover-community/mathlib/commit/cbd67cf486165725b51276a11d6237c2540b2dc5)
feat(order/(complete_lattice, compactly_generated)): independent sets in a complete lattice ([#5971](https://github.com/leanprover-community/mathlib/pull/#5971))

Defines `complete_lattice.independent`
Shows that this notion of independence is finitary in compactly generated lattices



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-02-04T03:30:04+00:00](https://github.com/leanprover-community/mathlib/commit/5f328b6e300bba3d6a7f14ea8915f9fecbbe8a5d)
feat(linear_algebra/free_algebra): Show that free_monoid forms a basis over free_algebra ([#5868](https://github.com/leanprover-community/mathlib/pull/#5868))

### [2021-02-03T23:29:31+00:00](https://github.com/leanprover-community/mathlib/commit/36b35107a48b6641a85ba5bd65b2ff2430f8c932)
feat(data/nat/factorial): additional inequalities ([#6026](https://github.com/leanprover-community/mathlib/pull/#6026))

I added two lemmas about factorials.  I use them in the Liouville PR [#4301](https://github.com/leanprover-community/mathlib/pull/#4301).

### [2021-02-03T17:44:44+00:00](https://github.com/leanprover-community/mathlib/commit/360fa07e88141f49f1741dc06e631e8c3133b405)
feat(data/real/sqrt): added some missing sqrt lemmas ([#5933](https://github.com/leanprover-community/mathlib/pull/#5933))

I noticed that some facts about `sqrt` and `abs` are missing, so I am adding them.

### [2021-02-03T16:02:37+00:00](https://github.com/leanprover-community/mathlib/commit/bb15b1ce52d7dbc7f9d1040eae1bade403c91a73)
chore(analysis/calculus): rename `has_f?deriv_at_unique` to `has_f?deriv_at.unique` ([#6019](https://github.com/leanprover-community/mathlib/pull/#6019))

Also make some lemmas `protected`.

### [2021-02-03T12:26:39+00:00](https://github.com/leanprover-community/mathlib/commit/235a7c46ce3edb7573b271f0f342ac3708ef879b)
doc(lint/simp): typesetting issues in simp_nf library note ([#6018](https://github.com/leanprover-community/mathlib/pull/#6018))

### [2021-02-03T12:26:38+00:00](https://github.com/leanprover-community/mathlib/commit/9a0d2b23036961e9dbc905507e1b141fb7a20b9f)
chore(data/nat/parity): rename type variable ([#6016](https://github.com/leanprover-community/mathlib/pull/#6016))

### [2021-02-03T12:26:36+00:00](https://github.com/leanprover-community/mathlib/commit/fa8df59b1f5d4ada98a77e55fd0e96bbe7cee1fe)
feat(algebra/polynomial/big_operators): add degree_prod lemma ([#5979](https://github.com/leanprover-community/mathlib/pull/#5979))

This PR adds a degree_prod lemma next to the nat_degree_prod lemma. This version of the lemma works for the interpretation of 'degree' which says the degree of the zero polynomial is \bot

### [2021-02-03T12:26:34+00:00](https://github.com/leanprover-community/mathlib/commit/5a9ca8d357041dbf4a41e308638d9f8b86173598)
feat(linear_algebra/sesquilinear_form): add composition between sesquilinear forms and linear maps ([#5729](https://github.com/leanprover-community/mathlib/pull/#5729))

Add composition lemmas for sesquilinear forms, that is, given a sesquilinear form and linear maps, a new sesquilinear form is induced by applying the arguments with the linear map.

### [2021-02-03T09:45:38+00:00](https://github.com/leanprover-community/mathlib/commit/e1ca806c5573891feb7aa262ea03cd789fb59004)
doc(algebra/{archimedean, char_zero}): provide docstrings ([#6010](https://github.com/leanprover-community/mathlib/pull/#6010))

### [2021-02-03T04:39:23+00:00](https://github.com/leanprover-community/mathlib/commit/e66ad5f5de56823b38720cb9480e03c614326515)
chore(scripts): update nolints.txt ([#6014](https://github.com/leanprover-community/mathlib/pull/#6014))

I am happy to remove some nolints for you!

### [2021-02-03T04:39:21+00:00](https://github.com/leanprover-community/mathlib/commit/79ca6e23519b7ca73c71c7d832999cae9e921a33)
feat(order/compactly_generated): Show that the sublattice below a compact element is coatomic ([#5942](https://github.com/leanprover-community/mathlib/pull/#5942))

Show that the sublattice below a compact element is coatomic. Introduce a lemma stating that any set lying strictly below a compact element has Sup strictly below that element.

<!--
put comments you want to keep out of the PR commit here.
If this PR depends on other PRs, please list them below this comment,
using the following format:
- [ ] depends on: #abc [optional extra text]
- [ ] depends on: #xyz [optional extra text]
-->

### [2021-02-03T01:05:51+00:00](https://github.com/leanprover-community/mathlib/commit/fcad25f28cfe49d08f867d65e114b7ec9ca85f0c)
feat(algebra/ring): add mk_mul_self_of_two_ne_zero ([#5862](https://github.com/leanprover-community/mathlib/pull/#5862))

Which allows us to make a ring homomorphism from an additive hom which maps squares to squares assuming a couple of  things, this is especially useful in ordered fields where it allows us to think only of positive elements.

### [2021-02-02T23:11:29+00:00](https://github.com/leanprover-community/mathlib/commit/2153dc34270890213254efb80380205b8dd7d5e3)
feat(data/fintype/sort): add `fin_sum_equiv_of_finset` ([#6008](https://github.com/leanprover-community/mathlib/pull/#6008))

### [2021-02-02T21:38:31+00:00](https://github.com/leanprover-community/mathlib/commit/1b1ad15c64fa9703e67ab22bce39104d1de5349b)
refactor(measure_theory/*): rename `is_(null_)?measurable` to `(null_)?measurable_set` ([#6001](https://github.com/leanprover-community/mathlib/pull/#6001))

Search & replace:
* `is_null_measurable` → `null_measurable`;
* `is_measurable` → `measurable_set'`;
* `measurable_set_set` → `measurable_set`;
* `measurable_set_spanning_sets` → `measurable_spanning_sets`;
* `measurable_set_superset` → `measurable_superset`.

### [2021-02-02T18:29:12+00:00](https://github.com/leanprover-community/mathlib/commit/2b2edc97fc38da5eca96f99b6d4b1a4dd9bd3f14)
chore(analysis/normed_space/basic): use explicit arg `𝕜'` in lemmas about `normed_algebra` ([#6009](https://github.com/leanprover-community/mathlib/pull/#6009))

### [2021-02-02T18:29:10+00:00](https://github.com/leanprover-community/mathlib/commit/4e786548020c3293df16afcb1a8670517bdab919)
fix(tactic/delta_instance): improve naming of instances with multiple arguments ([#6007](https://github.com/leanprover-community/mathlib/pull/#6007))

### [2021-02-02T18:29:08+00:00](https://github.com/leanprover-community/mathlib/commit/fe9c021d132a63acf63099c255f5fa9d0e61731c)
feat(geometry/manifold/instances): sphere is a smooth manifold ([#5607](https://github.com/leanprover-community/mathlib/pull/#5607))

Put a smooth manifold structure on the sphere, and provide tools for constructing smooth maps to and from the sphere.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-02-02T14:44:00+00:00](https://github.com/leanprover-community/mathlib/commit/dbb5ca1e546249b1656bd127edcfae7a2587d644)
refactor(group_theory/perm): move perm.subtype_perm to basic ([#6005](https://github.com/leanprover-community/mathlib/pull/#6005))

Both `perm.subtype_perm` and `perm.of_subtype` can be moved up the import hierarchy out of `group_theory/perm/sign` since they do not rely on any finiteness assumption.

### [2021-02-02T14:43:58+00:00](https://github.com/leanprover-community/mathlib/commit/9b3dc4177abfe30e3c0a1c71551c7dc5f4c42d89)
feat(nat/basic): more nat.find lemmas ([#6002](https://github.com/leanprover-community/mathlib/pull/#6002))

also merge two sections on nat.find

### [2021-02-02T14:43:56+00:00](https://github.com/leanprover-community/mathlib/commit/6633a70e5f0a9b0cacc864b6f9260d0949c90cd0)
feat(analysis/normed_space/inner_product): remove unnecessary `nonneg_im` field ([#5999](https://github.com/leanprover-community/mathlib/pull/#5999))

The `nonneg_im` property already follows from `conj_sym`.

### [2021-02-02T14:43:54+00:00](https://github.com/leanprover-community/mathlib/commit/508c265023c239f8eb868ba0999e7d35eef64a69)
feat(logic/function/basic): add bijective.iff_exists_unique and projections ([#5995](https://github.com/leanprover-community/mathlib/pull/#5995))

### [2021-02-02T14:43:51+00:00](https://github.com/leanprover-community/mathlib/commit/3732fb9d05c97f43476f1fc045b0292f139df2b5)
refactor(data/polynomial/eval): change eval_smul lemmas to use * instead of 2nd smul ([#5991](https://github.com/leanprover-community/mathlib/pull/#5991))

### [2021-02-02T14:43:49+00:00](https://github.com/leanprover-community/mathlib/commit/ff05d3af0f5d6376c3efed2a9831148a9c0af064)
feat(algebra/group_power/lemmas): sign of even/odd powers ([#5990](https://github.com/leanprover-community/mathlib/pull/#5990))

Added theorems about the sign of even and odd natural powers.

### [2021-02-02T14:43:46+00:00](https://github.com/leanprover-community/mathlib/commit/25c34e04eb8cd251b39d2c958ffd4f148d08973c)
refactor(linear_algebra,algebra/algebra): generalize `linear_map.smul_right` ([#5967](https://github.com/leanprover-community/mathlib/pull/#5967))

* the new `linear_map.smul_right` generalizes both the old
  `linear_map.smul_right` and the old `linear_map.smul_algebra_right`;
* add `smul_comm_class` for `linear_map`s.

### [2021-02-02T14:43:44+00:00](https://github.com/leanprover-community/mathlib/commit/fc7daa365f0daacbb7c910f83dcb8861352cc31a)
feat(data/nat/parity): addition/subtraction of even/odd nats ([#5934](https://github.com/leanprover-community/mathlib/pull/#5934))

 Added various theorems pertaining to the addition and subtraction of even and odd natural numbers.

### [2021-02-02T14:43:42+00:00](https://github.com/leanprover-community/mathlib/commit/893ce8b6e1ac2fb2fc94b64828d0833ff685003f)
feat(tactic/norm_fin): tactic for normalizing `fin n` expressions ([#5820](https://github.com/leanprover-community/mathlib/pull/#5820))

This is based on [#5791](https://github.com/leanprover-community/mathlib/pull/#5791), with a new implementation using the
`normalize_fin` function.


Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2021-02-02T11:46:18+00:00](https://github.com/leanprover-community/mathlib/commit/75a7ce9f38f1be5b771197cf656f65f1b7de0159)
refactor(*): rename subtype_congr to subtype_equiv ([#6004](https://github.com/leanprover-community/mathlib/pull/#6004))

This definition is closely related to `perm.subtype_perm`, so renaming will bring them closer in use. Also releavnt is [#5875](https://github.com/leanprover-community/mathlib/pull/#5875) which defines a separate `perm.subtype_congr`.

### [2021-02-02T07:14:15+00:00](https://github.com/leanprover-community/mathlib/commit/fec8ee4e622c1eb1a6682f5493b371cb12b55930)
chore(topology/bases): rewrite 2 proofs using tactic mode ([#5996](https://github.com/leanprover-community/mathlib/pull/#5996))

IMHO they're more readable that way

### [2021-02-02T04:14:06+00:00](https://github.com/leanprover-community/mathlib/commit/0c26bb09d605fd2a4ca8dbc44f4473927bcfd821)
feat(data/finset/basic): add lemmas about bUnion and images of functions on finsets ([#5887](https://github.com/leanprover-community/mathlib/pull/#5887))

Add lemmas about bUnion and images of functions on finsets. Part of [#5695](https://github.com/leanprover-community/mathlib/pull/#5695) in order to prove Hall's marriage theorem.

Coauthors: @kmill @b-mehta 



Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>

### [2021-02-02T02:06:24+00:00](https://github.com/leanprover-community/mathlib/commit/2c62c0bd37d7369f4e53bdcda807b48acf2a8734)
chore(scripts): update nolints.txt ([#6006](https://github.com/leanprover-community/mathlib/pull/#6006))

I am happy to remove some nolints for you!

### [2021-02-02T02:06:21+00:00](https://github.com/leanprover-community/mathlib/commit/a301ef7ede4b8308ba3ac62a57ce646b28e528d1)
feat(order/compactly_generated, ring_theory/noetherian): the lattice of submodules is compactly generated ([#5944](https://github.com/leanprover-community/mathlib/pull/#5944))

Redefines `is_compactly_generated` as a class
Provides an instance of `is_compactly_generated` on `submodule R M`



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-02-01T22:55:52+00:00](https://github.com/leanprover-community/mathlib/commit/4d3b26f8ef64ceca4ce16d7f974558fdd61b0ead)
feat(combinatorics/simple_graph/basic): add decidable instance for adjacency of complement ([#6000](https://github.com/leanprover-community/mathlib/pull/#6000))

Add instance that states that, if the adjacency relation for a simple graph is decidable, the adjacency relation for its complement is also decidable. 



Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>

### [2021-02-01T22:55:50+00:00](https://github.com/leanprover-community/mathlib/commit/1706e5527c3e2f9d71c0add39c9a939ea6adc788)
feat(data/list/basic) add update_nth_comm ([#5989](https://github.com/leanprover-community/mathlib/pull/#5989))

As requested on Zulip at https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/list.2Eupdate_nth_comm/near/223007424

### [2021-02-01T22:55:48+00:00](https://github.com/leanprover-community/mathlib/commit/9b779f40081a71f0ab572d12e81c51c753e87a44)
refactor(ring_theory/ideal/*, ring_theory/jacobson): use `comm_semiring` instead of `comm_ring` for ideals ([#5954](https://github.com/leanprover-community/mathlib/pull/#5954))

This is the second pass at refactoring the definition of `ideal`.  I have changed a `comm_ring` assumption to a `comm_semiring` assumption on many of the lemmas in `ring_theory/ideal/basic`.  Most implied changes were very simple, with the usual exception of `jacobson`.

I also moved out of `jacobson` the lemmas that were left-over from the previous refactor in this sequence.

Besides changing such assumptions on other files, many of the lemmas in `ring_theory/ideal/basic` still using `comm_ring` and without explicit subtractions, deal with quotients.

### [2021-02-01T19:15:19+00:00](https://github.com/leanprover-community/mathlib/commit/829c1a506518685efee759a5598d696e4855a2e2)
chore(group_theory/coset): rename lemmas to follow naming conventions ([#5998](https://github.com/leanprover-community/mathlib/pull/#5998))

Rename `normal_of_eq_cosets` and `eq_cosets_of_normal` to follow naming conventions. Conclusion should be stated before the `of`.

### [2021-02-01T19:15:16+00:00](https://github.com/leanprover-community/mathlib/commit/684f4f508b96fbb91ac96d8042bf893816b62088)
chore(*): split some long lines ([#5997](https://github.com/leanprover-community/mathlib/pull/#5997))

### [2021-02-01T19:15:14+00:00](https://github.com/leanprover-community/mathlib/commit/acabfa683600daec30c3a3ad43a83997c30e3edd)
fix(archive/imo/*): fixed syntax for docstrings ([#5994](https://github.com/leanprover-community/mathlib/pull/#5994))

### [2021-02-01T19:15:11+00:00](https://github.com/leanprover-community/mathlib/commit/a84a80d57ee449785e74acb8505c15e8d205ebd7)
fix(topology/algebra/infinite_sum): add missing decidable arguments ([#5993](https://github.com/leanprover-community/mathlib/pull/#5993))

These decidable instances were being inferred as classical instances, which meant these lemmas would not match other instances.

### [2021-02-01T19:15:09+00:00](https://github.com/leanprover-community/mathlib/commit/64283ce90abc81b814d409da66d0e7d782c92d9a)
feat(list/{zip,indexes}): Add `zip_with` and `map_with_index` lemmas ([#5974](https://github.com/leanprover-community/mathlib/pull/#5974))

All proofs are due to @pechersky.

Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>



Co-authored-by: Jannis Limperg <jannis@limperg.de>

### [2021-02-01T15:46:19+00:00](https://github.com/leanprover-community/mathlib/commit/cbd88d63d728acab54f66d584dbadd9a60fe6866)
chore(*) add mod_add_div' and div_add_mod' and golf proofs ([#5962](https://github.com/leanprover-community/mathlib/pull/#5962))

Resolves issue [#1534](https://github.com/leanprover-community/mathlib/pull/#1534).

Name of nat.mod_add_div shouldn't be changed as this is in core. Better name suggestions for mod_add_div' and div_add_mod' welcome.



Co-authored-by: Julian <kuelsha@mathematik.uni-stuttgart.de>

### [2021-02-01T12:31:43+00:00](https://github.com/leanprover-community/mathlib/commit/866e4fda588a131183b133b043acf9be8ada1172)
chore(linear_algebra/quadratic_form): add two missing simp lemmas about subtraction ([#5985](https://github.com/leanprover-community/mathlib/pull/#5985))

This also reorders the instance definitions to keep the lemmas about subtraction near the ones about negation, and uses the `add := (+)` pattern to make definitions unfold more nicely, even though it probably doesn't make any difference.

### [2021-02-01T12:31:41+00:00](https://github.com/leanprover-community/mathlib/commit/f2c84aa03fd7ef9afdb99122d18bc1cecd404a0c)
doc(algebra/category/*): provide two short docstrings and shorten lines ([#5984](https://github.com/leanprover-community/mathlib/pull/#5984))

also fixed one minor typo.


Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-02-01T12:31:39+00:00](https://github.com/leanprover-community/mathlib/commit/b1ab3107a285d239bbd1cc10d3d8a736ce19bb99)
chore(analysis/normed_space/inner_product): add {bilin,sesq}_form_of_inner_apply simp lemmas ([#5982](https://github.com/leanprover-community/mathlib/pull/#5982))

### [2021-02-01T12:31:37+00:00](https://github.com/leanprover-community/mathlib/commit/398e7ad5a3c69c86c28ca0078c8a30f64dee6751)
feat(data/pnat/basic) pnat can_lift instances ([#5977](https://github.com/leanprover-community/mathlib/pull/#5977))

Add can_lift instances for pnat from nat and int

### [2021-02-01T12:31:35+00:00](https://github.com/leanprover-community/mathlib/commit/89c79633c6faad27e8e3b954b4a2abd28bd2e636)
feat(category_theory/nat_iso): dsimp lemma for natural isomorphisms ([#5973](https://github.com/leanprover-community/mathlib/pull/#5973))

a little simp lemma

### [2021-02-01T12:31:33+00:00](https://github.com/leanprover-community/mathlib/commit/82735883e1b17e536d104d9ac77eccc4e0eaa1cb)
chore(category_theory/monad): generate simp lemmas ([#5972](https://github.com/leanprover-community/mathlib/pull/#5972))

Adds a missing simps command to generate simp lemmas for the functor.

### [2021-02-01T12:31:31+00:00](https://github.com/leanprover-community/mathlib/commit/3f9b03553d490c95a77c68938c87851d21c2be70)
chore(category_theory/adjunction): reflective lemmas ([#5968](https://github.com/leanprover-community/mathlib/pull/#5968))

Improves the docstring and changes the name to be more appropriate (the lemma has nothing to do with essential images).

### [2021-02-01T09:10:42+00:00](https://github.com/leanprover-community/mathlib/commit/c5e0d103e95e95ee4beb9399b79454cf18998552)
chore(*): split some long lines ([#5988](https://github.com/leanprover-community/mathlib/pull/#5988))

### [2021-02-01T03:11:45+00:00](https://github.com/leanprover-community/mathlib/commit/f060e09c527f9512bd8725b47b19047ac044c51a)
chore(*): golf some proofs ([#5983](https://github.com/leanprover-community/mathlib/pull/#5983))

API changes:

* new lemmas `finset.card_filter_le`, `finset.compl_filter`, `finset.card_lt_univ_of_not_mem`, `fintype.card_le_of_embedding`, `fintype.card_lt_of_injective_not_surjective`;
* rename `finset.card_le_of_inj_on` → `finset.le_card_of_inj_on_range`;
* rename `card_lt_of_injective_of_not_mem` to `fintype.card_lt_of_injective_of_not_mem`;
* generalize `card_units_lt` to a `monoid_with_zero`.

### [2021-02-01T01:50:40+00:00](https://github.com/leanprover-community/mathlib/commit/609f5f74aaf835f4f76aceac694b70fb9eb391ea)
chore(scripts): update nolints.txt ([#5986](https://github.com/leanprover-community/mathlib/pull/#5986))

I am happy to remove some nolints for you!

### [2021-01-31T18:12:02+00:00](https://github.com/leanprover-community/mathlib/commit/a15e64af037c78eac49c63aa6a44b4f601d45f58)
refactor(data/polynomial/degree/definitions): rw -> exact, use term mode proof ([#5946](https://github.com/leanprover-community/mathlib/pull/#5946))

Co-authors: `lean-gptf`, Stanislas Polu



Co-authored-by: Jesse Michael Han <39395247+jesse-michael-han@users.noreply.github.com>

### [2021-01-31T06:59:28+00:00](https://github.com/leanprover-community/mathlib/commit/4f4a9b58621774337eda8539d87189ace19a7e32)
feat(analysis/analytic/inverse): inverse of a formal multilinear series ([#5852](https://github.com/leanprover-community/mathlib/pull/#5852))

We construct the left inverse and a right inverse of a formal multilinear series with invertible first term, and we show that they coincide.

### [2021-01-31T01:46:38+00:00](https://github.com/leanprover-community/mathlib/commit/1ea538b3c9f8b612cc7ec17266e7093ea36ff23e)
chore(scripts): update nolints.txt ([#5976](https://github.com/leanprover-community/mathlib/pull/#5976))

I am happy to remove some nolints for you!

### [2021-01-30T22:44:52+00:00](https://github.com/leanprover-community/mathlib/commit/ae1b530272b821bf82ad58bf7bb86c45e7e0d73a)
chore(algebra/algebra/basic): add simp lemma about `algebra_map ℚ` ([#5970](https://github.com/leanprover-community/mathlib/pull/#5970))

Since there is a subsingleton instance over ring_homs, we may as well let the simplifier replace `algebra_map` with `id`.

### [2021-01-30T22:44:50+00:00](https://github.com/leanprover-community/mathlib/commit/f596077ff7e2aef713cdae8657b112a0f408363b)
feat(geometry/manifold/instances): sphere is a topological manifold ([#5591](https://github.com/leanprover-community/mathlib/pull/#5591))

Construct stereographic projection, as a local homeomorphism from the unit sphere in an inner product space `E` to a hyperplane in `E`.  Make a charted space instance for the sphere, with these stereographic projections as the atlas.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-01-30T20:09:59+00:00](https://github.com/leanprover-community/mathlib/commit/a6c0442bdbeeb7d28f027b118a69b20a9e876ad1)
feat(field_theory/normal): Restriction is surjective ([#5960](https://github.com/leanprover-community/mathlib/pull/#5960))

Proves surjectivity of `alg_equiv.restrict_normal_hom`.

Also proves a bijectivity lemma which gives a cleaner construction of `alg_equiv.restrict_normal`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-01-30T20:09:57+00:00](https://github.com/leanprover-community/mathlib/commit/48d05924b763b98cd3730bdc0e06b5494b07128b)
feat(algebra/lie/basic): define derived length and semisimple Lie algebras ([#5930](https://github.com/leanprover-community/mathlib/pull/#5930))

We also provide proofs of some basic characterisations

### [2021-01-30T18:21:17+00:00](https://github.com/leanprover-community/mathlib/commit/539550d0e9bb5b478f6a32c087a101f9b6c0a74f)
feat(topology/instances/nnreal): add has_sum_nat_add_iff and module docstring ([#5716](https://github.com/leanprover-community/mathlib/pull/#5716))

### [2021-01-30T14:50:34+00:00](https://github.com/leanprover-community/mathlib/commit/d6fe605f4f028b34543a9394037a8c497ab9c588)
chore(*): split some long lines ([#5959](https://github.com/leanprover-community/mathlib/pull/#5959))

### [2021-01-30T10:07:38+00:00](https://github.com/leanprover-community/mathlib/commit/8069521e57586255c5bb36bb3b0d4392f0841eb7)
feat(measure_theory): Absolute continuity ([#5948](https://github.com/leanprover-community/mathlib/pull/#5948))

* Define absolute continuity between measures (@mzinkevi)
* State monotonicity of `ae_measurable` w.r.t. absolute continuity
* Weaken some `measurable` assumptions in `prod.lean` to `ae_measurable`
* Some docstring fixes
* Some cleanup

### [2021-01-30T08:05:04+00:00](https://github.com/leanprover-community/mathlib/commit/cf218639537f45f6a8c949c49d31757afcf0b7ee)
doc(group_theory/order_of_element): Adding doc string ([#5936](https://github.com/leanprover-community/mathlib/pull/#5936))



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-01-30T06:47:28+00:00](https://github.com/leanprover-community/mathlib/commit/cbcbaa06dded87ac8161156463ac651d2bdf5c29)
feat(topology/category): compact hausdorff spaces are reflective in Top ([#5955](https://github.com/leanprover-community/mathlib/pull/#5955))

Show explicitly that `CompHaus_to_Top` is a reflective functor via the Stone-Cech compactification.

### [2021-01-30T01:48:52+00:00](https://github.com/leanprover-community/mathlib/commit/b44e9dd8d398e3aa8488aeb5fb22f9d63826d08e)
chore(scripts): update nolints.txt ([#5965](https://github.com/leanprover-community/mathlib/pull/#5965))

I am happy to remove some nolints for you!

### [2021-01-29T21:16:04+00:00](https://github.com/leanprover-community/mathlib/commit/686d005af8e945dab92b91d3cb597c2bca4b2a6d)
chore(*): fix some "line too long" lint errors by rewriting proofs/statements ([#5958](https://github.com/leanprover-community/mathlib/pull/#5958))

### [2021-01-29T19:10:11+00:00](https://github.com/leanprover-community/mathlib/commit/e8e05265eac1632e6e77c9096c30ad45ff76218c)
feat(field_theory/polynomial_galois_group): New file ([#5861](https://github.com/leanprover-community/mathlib/pull/#5861))

This PR adds the file `polynomial_galois_group`. It contains some of the groundwork needed for proving the Abel-Ruffini theorem.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-01-29T17:21:20+00:00](https://github.com/leanprover-community/mathlib/commit/62cf420b8805e176180058c68255125b005f5fe2)
ci(lint-style): adjust output to integrate with github ([#5952](https://github.com/leanprover-community/mathlib/pull/#5952))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-01-29T17:21:18+00:00](https://github.com/leanprover-community/mathlib/commit/657cfeb60eb357a321d9491c391cf887f580c721)
doc(algebra/polynomial/big_operators): add / fix docstrings and lint ([#5950](https://github.com/leanprover-community/mathlib/pull/#5950))

### [2021-01-29T17:21:16+00:00](https://github.com/leanprover-community/mathlib/commit/aabb8436d16d0ef5477397827eb0eaa612e1745e)
feat(analysis/normed_space/inner_product): existence of isometry to Euclidean space ([#5949](https://github.com/leanprover-community/mathlib/pull/#5949))

A finite-dimensional inner product space admits an isometry (expressed using the new `linear_isometry_equiv` structure of [#5867](https://github.com/leanprover-community/mathlib/pull/#5867), cc @urkud) to Euclidean space.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-01-29T17:21:14+00:00](https://github.com/leanprover-community/mathlib/commit/0d18179a497f98907f0dbac83b2361a959a0e50d)
chore(analysis/normed_space/multilinear): rename variables ([#5929](https://github.com/leanprover-community/mathlib/pull/#5929))

Use `E` and `E'` for indexed types and `G` and `G'` for `Type*`s.

### [2021-01-29T15:28:07+00:00](https://github.com/leanprover-community/mathlib/commit/9c5064cc47bb5872553eb1ea33ff45da978b53c0)
chore(linear_algebra/linear_independent): relax requirements to semiring and division_ring ([#5953](https://github.com/leanprover-community/mathlib/pull/#5953))

No lemma names or proofs were changed, this just reordered some lemmas so that they could be put into sections with weaker requirements.

### [2021-01-29T14:19:09+00:00](https://github.com/leanprover-community/mathlib/commit/783e11a57f7eaa53f85d7a558e450ea85240b107)
fix(scripts): fix mixing absolute and relative paths to the linter ([#5810](https://github.com/leanprover-community/mathlib/pull/#5810))

Fix providing either relative or absolute paths to the linter.

Make the linter emit outputted paths corresponding to the ones passed on the command line -- relative if relative, absolute if absolute.

Also adds a short set of tests.

Reported in: https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/2013.20Q5 (and introduced in [#5721](https://github.com/leanprover-community/mathlib/pull/#5721)).

### [2021-01-29T11:30:18+00:00](https://github.com/leanprover-community/mathlib/commit/41decdb1e78a87ec6079e1e909e692699844ec08)
chore(combinatorics/simple_graph/basic): remove classical locale ([#5951](https://github.com/leanprover-community/mathlib/pull/#5951))

This completes the simple graph part of the refactor that removed classical fintype instances.

### [2021-01-29T11:30:16+00:00](https://github.com/leanprover-community/mathlib/commit/15217c2cf9da53ca9152c80e446d6d39538e0d0a)
refactor(topology/local_homeomorph): simplify `prod_trans` ([#5915](https://github.com/leanprover-community/mathlib/pull/#5915))

10X faster elaboration

(pretty-printed) proof term length 14637 -> 2046

Co-authors: `lean-gptf`, Stanislas Polu




Co-authored-by: Jesse Michael Han <39395247+jesse-michael-han@users.noreply.github.com>

### [2021-01-29T09:42:09+00:00](https://github.com/leanprover-community/mathlib/commit/bbec09914886bc22171299a2733d6ed863781019)
refactor(data/real/nnreal): shorter proof of `div_lt_iff` ([#5945](https://github.com/leanprover-community/mathlib/pull/#5945))

Co-authors: `lean-gptf`, Stanislas Polu

### [2021-01-29T06:49:21+00:00](https://github.com/leanprover-community/mathlib/commit/145f12706c2645a77e56a04c3e65dc5b59c9a78d)
feat(ring_theory/polynomial/chebyshev/defs): Chebyshev polynomials of the second kind ([#5793](https://github.com/leanprover-community/mathlib/pull/#5793))

This will define Chebyshev polynomials of the second kind and introduce some basic properties:

- [x] Define Chebyshev polynomials of the second kind.
- [x] Relate Chebyshev polynomials of the first and second kind through recursive formulae
- [x] Prove trigonometric identity regarding Chebyshev polynomials of the second kind
- [x] Compute the derivative of the Chebyshev polynomials of the first kind in terms of the Chebyshev polynomials of the second kind. 
- [x] Compute the derivative of the Chebyshev polynomials of the second kind in terms of the Chebyshev polynomials of the first kind.



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-01-29T04:36:40+00:00](https://github.com/leanprover-community/mathlib/commit/1edd85c3dfd19d53215cf3d7c9a4db46a2d162c2)
chore(scripts): update nolints.txt ([#5947](https://github.com/leanprover-community/mathlib/pull/#5947))

I am happy to remove some nolints for you!

### [2021-01-29T01:34:13+00:00](https://github.com/leanprover-community/mathlib/commit/4dca6e1a1c4f1038ac77a62f5628c591c3303f0b)
chore(data/fintype/basic): Remove duplicate instance ([#5943](https://github.com/leanprover-community/mathlib/pull/#5943))

We already have `subtype.fintype`, there is no need for `fintype.subtype_of_fintype` which does the same thing

### [2021-01-28T23:59:53+00:00](https://github.com/leanprover-community/mathlib/commit/69e7f143c08f09d940597f884ff55d28e33882a6)
chore(combinatorics/simple_graph): generalise decidability proofs ([#5938](https://github.com/leanprover-community/mathlib/pull/#5938))

This generalises the decidable instances so they're more applicable, and also golfs the proofs.

### [2021-01-28T20:36:43+00:00](https://github.com/leanprover-community/mathlib/commit/2cbaa9cc29bc44812b679810352ed383f35dcf75)
feat(data/list/basic): add diff_erase ([#5941](https://github.com/leanprover-community/mathlib/pull/#5941))

### [2021-01-28T19:15:38+00:00](https://github.com/leanprover-community/mathlib/commit/287021234a843ab952bf653e0819c8dc14863b49)
chore(data/sym2): golf decidability proofs ([#5940](https://github.com/leanprover-community/mathlib/pull/#5940))

This golfs the decidable instances, and removes a redundant one (`from_rel.decidable_as_set` is automatically inferred from `from_rel.decidable_pred`)

### [2021-01-28T16:36:05+00:00](https://github.com/leanprover-community/mathlib/commit/645dc60f59104f974decae54aa70ca6c0a33d600)
refactor(analysis/calculus/inverse): inverse of C^k functions over R or C ([#5926](https://github.com/leanprover-community/mathlib/pull/#5926))

Some results on the local inverse of smooth functions are currently formulated only for real functions, but they work as well for complex functions. We formulate them uniformly, assuming `is_R_or_C`.

### [2021-01-28T13:17:00+00:00](https://github.com/leanprover-community/mathlib/commit/c43c709f83ee411d922fa1626b9504e5b402a3e1)
fix(data/dfinsupp): fix overly strict type-class arguments ([#5935](https://github.com/leanprover-community/mathlib/pull/#5935))

### [2021-01-28T08:12:08+00:00](https://github.com/leanprover-community/mathlib/commit/82481e30c3e937fe2e43d41fccc266afa45d978e)
feat(analysis/normed_space/inner_product): existence of orthonormal basis ([#5734](https://github.com/leanprover-community/mathlib/pull/#5734))

Define `orthonormal` sets (indexed) of vectors in an inner product space `E`.  Show that a finite-dimensional inner product space has an orthonormal basis.

Co-authored by: Busiso Chisala

### [2021-01-28T01:39:54+00:00](https://github.com/leanprover-community/mathlib/commit/95454452f6b3569bf967d35aab8d852b1ddf8017)
chore(scripts): update nolints.txt ([#5931](https://github.com/leanprover-community/mathlib/pull/#5931))

I am happy to remove some nolints for you!

### [2021-01-27T23:19:08+00:00](https://github.com/leanprover-community/mathlib/commit/6585eff99deca6bb21ae0c84c5c7b609c0406189)
feat(archive/imo): formalize IMO 2013 problem Q5 ([#5787](https://github.com/leanprover-community/mathlib/pull/#5787))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-01-27T21:59:34+00:00](https://github.com/leanprover-community/mathlib/commit/3e5996003b7844a751a05d0a47458131a30be6db)
feat(ring_theory/nullstellensatz): Classical Nullstellensatz ([#5760](https://github.com/leanprover-community/mathlib/pull/#5760))

This file states and proves Hilbert's classical nullstellensatz for multi-variate polynomials over an algebraically closed field.  



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-01-27T18:19:45+00:00](https://github.com/leanprover-community/mathlib/commit/4cc0d5255cb7c6f079e5f3f652efc68052bdf4bd)
refactor(data/set/basic): simpler proofs ([#5920](https://github.com/leanprover-community/mathlib/pull/#5920))

This replaces many uses of `simp` and `finish` with direct term proofs
to speed up the overall compilation of the file.

This PR is WIP in the sense that not all of `set.basic` is converted,
but there are no dependencies between the changes so this can be merged
at any point.

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-01-27T18:19:43+00:00](https://github.com/leanprover-community/mathlib/commit/8af7e08ed7f0a995c63d20862c0f3f1310fb860d)
feat(data/fintype/basic): make subtype_of_fintype computable ([#5919](https://github.com/leanprover-community/mathlib/pull/#5919))

This smokes out a few places downstream that are missing decidability hypotheses needed for the fintype instance to exist.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-01-27T18:19:41+00:00](https://github.com/leanprover-community/mathlib/commit/f45dee43bdad528d1bc73a416b2bfea148eb8d41)
feat(algebra/*,linear_algebra/basic,ring_theory/ideal): lemmas about span of finite subsets and nontrivial maximal ideals ([#5641](https://github.com/leanprover-community/mathlib/pull/#5641))



Co-authored-by: laughinggas <58670661+laughinggas@users.noreply.github.com>
Co-authored-by: Ashvni <ashvni.n@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-01-27T18:19:40+00:00](https://github.com/leanprover-community/mathlib/commit/32fdb81bab6d193a75e4eb95d365009ea35af97c)
feat(data/zsqrtd/to_real): Add `to_real` ([#5640](https://github.com/leanprover-community/mathlib/pull/#5640))

Also adds `norm_eq_zero`, and replaces some calls to simp with direct lemma applications



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-01-27T16:19:52+00:00](https://github.com/leanprover-community/mathlib/commit/1011601dce14969e1e1ba771e07c96d6c64bc764)
feat(algebra/continued_fractions): add termination iff rat lemmas ([#4867](https://github.com/leanprover-community/mathlib/pull/#4867))

### What

Show that the computation of a continued fraction terminates if and only if we compute the continued fraction of a rational number.

### How

1. Show that every intermediate operation involved in the computation of a continued fraction returns a value that has a rational counterpart. This then shows that a terminating continued fraction corresponds to a rational value.
2. Show that the operations involved in the computation of a continued fraction for rational numbers only return results that can be lifted to the result of the same operations done on an equal value in a suitable linear ordered, archimedean field with a floor function.
3. Show that the continued fraction of a rational number terminates.
4. Set up the needed coercions to express the results above starting from [here](https://github.com/leanprover-community/mathlib/compare/kappelmann_termination_iff_rat?expand=1#diff-1dbcf8473152b2d8fca024352bd899af37669b8af18792262c2d5d6f31148971R129). I did not know where to put these lemmas. Please let me know your opinion.
4. Extract 4 auxiliary lemmas that are not specific to continued fraction but more generally about rational numbers, integers, and natural numbers starting from [here](https://github.com/leanprover-community/mathlib/compare/kappelmann_termination_iff_rat?expand=1#diff-1dbcf8473152b2d8fca024352bd899af37669b8af18792262c2d5d6f31148971R28). Again, I did not know where to put these. Please let me know your opinion.

Co-authored-by: Kevin Kappelmann <kappelmann@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-01-27T12:14:38+00:00](https://github.com/leanprover-community/mathlib/commit/9adf9bb6f4723596fbd869004bb481915534eaa2)
feat(order/ideal): add partial_order instance to order.ideal ([#5909](https://github.com/leanprover-community/mathlib/pull/#5909))

Add some instances for `order.ideal`, some of them conditional on
having extra structure on the carrier preorder `P`:

* In all cases, `ideal P` is a partial order.

* If `P` has a bottom element, so does `ideal P`.

* If `P` has a top element, so does `ideal P`.
  (Although this could be weekened to `P` being directed.)

Also, add some `@[ext]`, `@[simp]`, `@[trans]` lemmas.

### [2021-01-27T12:14:36+00:00](https://github.com/leanprover-community/mathlib/commit/7244b43cc91025996e3dca8b8eb4818380d9bce7)
refactor(topology/local_homeomorph): simpler proof of `prod_symm` ([#5906](https://github.com/leanprover-community/mathlib/pull/#5906))

17X smaller proof

co-authors: `lean-gptf`, Stanislas Polu




Co-authored-by: Jesse Michael Han <39395247+jesse-michael-han@users.noreply.github.com>

### [2021-01-27T12:14:34+00:00](https://github.com/leanprover-community/mathlib/commit/a859f10d3aebac9f9c7d06f58e3ac5f7dd8fbb2e)
refactor(computability/primrec): simpler proof of `primrec.of_equiv` ([#5905](https://github.com/leanprover-community/mathlib/pull/#5905))

12X smaller proof term

co-authors: `lean-gptf`, Stanislas Polu

### [2021-01-27T12:14:32+00:00](https://github.com/leanprover-community/mathlib/commit/35638edbcb34c8d0d1397e386e913c77927c061d)
refactor(data/set/basic): simpler proof of `union_subset_iff` ([#5904](https://github.com/leanprover-community/mathlib/pull/#5904))

12X smaller proof term

co-authors: `lean-gptf`, Stanislas Polu

### [2021-01-27T12:14:30+00:00](https://github.com/leanprover-community/mathlib/commit/c64aa1327ea3ce07673e98f9a1a33097ad377019)
chore(*): bump to lean-3.26.0 ([#5895](https://github.com/leanprover-community/mathlib/pull/#5895))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-01-27T12:14:28+00:00](https://github.com/leanprover-community/mathlib/commit/78a518a34e555687a5420511cb4bec1e2a8ffc59)
feat(measure_theory/independence): define independence of sets of sets, measurable spaces, sets, functions ([#5848](https://github.com/leanprover-community/mathlib/pull/#5848))

This first PR about independence contains definitions, a few lemmas about independence of unions/intersections of sets of sets, and a proof that two measurable spaces are independent iff generating pi-systems are independent (included in this PR to demonstrate usability of the definitions).



Co-authored-by: Rémy Degenne <remydegenne@gmail.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-01-27T08:42:04+00:00](https://github.com/leanprover-community/mathlib/commit/e5f9409cd645db4734e2fd09e6d1a120e8405dd0)
refactor(category_theory/abelian): golf `mono_of_kernel_ι_eq_zero` ([#5914](https://github.com/leanprover-community/mathlib/pull/#5914))

Co-authors: `lean-gptf`, Stanislas Polu

### [2021-01-27T08:41:59+00:00](https://github.com/leanprover-community/mathlib/commit/1688b3e8603a71f29022dda8bca21e2d9016de0e)
refactor(data/complex/exponential): simplify proof of `tan_eq_sin_div_cos` ([#5913](https://github.com/leanprover-community/mathlib/pull/#5913))

Co-authors: `lean-gptf`, Stanislas Polu




Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2021-01-27T08:41:57+00:00](https://github.com/leanprover-community/mathlib/commit/e927930c8977a266723c637ac01077720c733d8e)
refactor(data/holor): simp -> refl ([#5912](https://github.com/leanprover-community/mathlib/pull/#5912))

Co-authors: `lean-gptf`, Stanislas Polu

### [2021-01-27T08:41:55+00:00](https://github.com/leanprover-community/mathlib/commit/38f6e050bf655cd6006126725da9db62c32ed02e)
refactor(algebra/category/Group/limits): simp -> refl ([#5911](https://github.com/leanprover-community/mathlib/pull/#5911))

Co-authors: `lean-gptf`, Stanislas Polu

### [2021-01-27T08:41:53+00:00](https://github.com/leanprover-community/mathlib/commit/6eae63033f8c1a78733a3af56d5955aef3abb2b7)
refactor(data/real/golden_ratio): simpler proof of `gold_pos` ([#5910](https://github.com/leanprover-community/mathlib/pull/#5910))

13X smaller (pretty-printed) proof term

Co-authors: `lean-gptf`, Stanislas Polu

### [2021-01-27T08:41:51+00:00](https://github.com/leanprover-community/mathlib/commit/e9a1e2b38f7291482fc5d9f5a039f2048dd1b56f)
refactor(data/pequiv): simpler proof of `pequiv.of_set_univ` ([#5907](https://github.com/leanprover-community/mathlib/pull/#5907))

17X smaller proof

co-authors: `lean-gptf`, Stanislas Polu

### [2021-01-27T08:41:50+00:00](https://github.com/leanprover-community/mathlib/commit/fd55e57f99ccde34c7156473484954699b79576e)
refactor(algebra/group/basic): simp -> rw in `sub_eq_sub_iff_sub_eq_sub` ([#5903](https://github.com/leanprover-community/mathlib/pull/#5903))

co-authors: `lean-gptf`, Yuhuai Wu

### [2021-01-27T08:41:48+00:00](https://github.com/leanprover-community/mathlib/commit/1cd228629592ddb002dc85b3efa74f550abedf59)
chore(data/finset/preimage): add missing simp lemmas ([#5902](https://github.com/leanprover-community/mathlib/pull/#5902))

### [2021-01-27T08:41:46+00:00](https://github.com/leanprover-community/mathlib/commit/20d6b6a7060beb1d881801da14fa170bbdb2fa52)
chore(*): add more simp lemmas, refactor theorems about `fintype.sum` ([#5888](https://github.com/leanprover-community/mathlib/pull/#5888))

* `finset.prod_sum_elim`, `finset.sum_sum_elim`: use `finset.map`
  instead of `finset.image`;
* add `multilinear_map.coe_mk_continuous`,
  `finset.order_emb_of_fin_mem`, `fintype.univ_sum_type`,
  `fintype.prod_sum_elim`, `sum.update_elim_inl`,
  `sum.update_elim_inr`, `sum.update_inl_comp_inl`,
  `sum.update_inl_comp_inr`, `sum.update_inr_comp_inl`,
  `sum.update_inr_comp_inr` and `apply` versions of `sum.*_comp_*` lemmas,
* move some lemmas about `function.update` from `data.set.function` to `logic.function.basic`;
* rename `sum.elim_injective` to `function.injective.sum_elim`
* `simps` lemmas for `function.embedding.inl` and
  `function.embedding.inr`;
* for `e : α ≃o β`, simplify `e.to_equiv.symm` to `e.symm_to_equiv`;
* add `continuous_multilinear_map.to_multilinear_map_add`,
  `continuous_multilinear_map.to_multilinear_map_smul`, and `simps`
  for `continuous_multilinear_map.to_multilinear_map_linear`.

### [2021-01-27T08:41:44+00:00](https://github.com/leanprover-community/mathlib/commit/21e9d4245bc7d14a5fb03370bf0a4df11d4fc403)
feat(algebra/euclidean_domain): Unify occurences of div_add_mod and mod_add_div ([#5884](https://github.com/leanprover-community/mathlib/pull/#5884))

Adding the corresponding commutative version at several places (euclidean domain, nat, pnat, int) whenever there is the other version. 

In subsequent PRs other proofs in the library which now use some version of `add_comm, exact div_add_mod` or `add_comm, exact mod_add_div` should be golfed.

Trying to address issue [#1534](https://github.com/leanprover-community/mathlib/pull/#1534)



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-01-27T08:41:42+00:00](https://github.com/leanprover-community/mathlib/commit/688772e9d186e192c01b04c3854dd253897110d1)
refactor(ring_theory/ideal ring_theory/jacobson): allow `ideal` in a `comm_semiring` ([#5879](https://github.com/leanprover-community/mathlib/pull/#5879))

At the moment, `ideal` requires the underlying ring to be a `comm_ring`.  This changes in this PR and the underlying ring can now be a `comm_semiring`.  There is a discussion about merits and issues in this Zulip chat:

https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F

At the moment, this PR changes the definition and adapts, mostly `ring_theory/jacobson`, to avoid deterministic timeouts.  In future PRs, I will start changing hypotheses on lemmas involving `ideal` to use the more general framework.

A note: the file `ring_theory/jacobson` might require further improvements.  If possible, I would like this change to push through without cluttering it with changes to that file.  If there is a way of accepting this change and then proceeding to the changes in `jacobson`, that would be ideal!  If it needs to be done at the same time, then so be it!

### [2021-01-27T08:41:40+00:00](https://github.com/leanprover-community/mathlib/commit/b2c5d9b2b3397af0a5c01e9a845581708a46320b)
feat(ring_theory/noetherian, linear_algebra/basic): Show that finitely generated submodules are the compact elements in the submodule lattice ([#5871](https://github.com/leanprover-community/mathlib/pull/#5871))

Show that a submodule is finitely generated if and only if it is a compact lattice element. Add lemma showing that any submodule is the supremum of the spans of its elements.

### [2021-01-27T08:41:39+00:00](https://github.com/leanprover-community/mathlib/commit/7f04253ca571c7c78e6aaa153697eb2400f15c0b)
feat(field_theory/adjoin): Generalize alg_hom_mk_adjoin_splits to infinite sets ([#5860](https://github.com/leanprover-community/mathlib/pull/#5860))

This PR uses Zorn's lemma to generalize `alg_hom_mk_adjoin_splits` to infinite sets.

The proof is rather long, but I think that the result is worth it. It should allow me to prove that if E/F is any normal extension then any automorphism of F lifts to an automorphism of E.

### [2021-01-27T08:41:36+00:00](https://github.com/leanprover-community/mathlib/commit/e95928c0a908852ff90f50718972aa29d64041b3)
feat(field_theory/normal): Restrict to normal subfield ([#5845](https://github.com/leanprover-community/mathlib/pull/#5845))

Now that we know that splitting fields are normal, it makes sense to move the results of [#5562](https://github.com/leanprover-community/mathlib/pull/#5562) to `normal.lean`.

### [2021-01-27T08:41:35+00:00](https://github.com/leanprover-community/mathlib/commit/61491ca306d699b722aa94c5e00fa01c9ce2f2a7)
feat(linear_algebra/matrix): A vector is zero iff its dot product with every vector is zero ([#5837](https://github.com/leanprover-community/mathlib/pull/#5837))

### [2021-01-27T08:41:33+00:00](https://github.com/leanprover-community/mathlib/commit/31edca86eaddf23eaf58da060b414097ad459080)
chore(data/finsupp,data/dfinsupp,algebra/big_operators): add missing lemmas about sums of bundled functions ([#5834](https://github.com/leanprover-community/mathlib/pull/#5834))

This adds missing lemmas about how `{finset,finsupp,dfinsupp}.{prod,sum}` acts on {coercion,application,evaluation} of `{add_monoid_hom,monoid_hom,linear_map}`. Specifically, it:

* adds the lemmas:
  * `monoid_hom.coe_prod`
  * `monoid_hom.map_dfinsupp_prod`
  * `monoid_hom.dfinsupp_prod_apply`
  * `monoid_hom.finsupp_prod_apply`
  * `monoid_hom.coe_dfinsupp_prod`
  * `monoid_hom.coe_finsupp_prod`
  * that are the additive versions of the above for `add_monoid_hom`.
  * `linear_map.map_dfinsupp_sum`
  * `linear_map.dfinsupp_sum_apply`
  * `linear_map.finsupp_sum_apply`
  * `linear_map.coe_dfinsupp_sum`
  * `linear_map.coe_finsupp_sum`
* Renames `linear_map.finsupp_sum` to `linear_map.map_finsupp_sum` for consistency with `linear_map.map_sum`.
* Adds a new `monoid_hom.coe_fn` definition

### [2021-01-27T08:41:30+00:00](https://github.com/leanprover-community/mathlib/commit/aa8980d93f69c9428bd42a7d6250947cd5a45bb5)
chore(category_theory/monad): comonadic adjunction ([#5770](https://github.com/leanprover-community/mathlib/pull/#5770))

Defines comonadic adjunctions dual to what's already there



Co-authored-by: Oliver Nash <oliver.nash@gmail.com>
Co-authored-by: leanprover-community-bot <leanprover.community@gmail.com>
Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: tb65536 <tb65536@uw.edu>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>
Co-authored-by: Benjamin Davidson <68528197+benjamindavidson@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: Mohamed Al-Fahim <malfahim8@gmail.com>
Co-authored-by: hrmacbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2021-01-27T08:41:28+00:00](https://github.com/leanprover-community/mathlib/commit/3b6d6d741de3761cf693318d25992e1a2b004b45)
chore(data/fintype/basic): Add simp lemma about finset.univ ([#5708](https://github.com/leanprover-community/mathlib/pull/#5708))

### [2021-01-27T08:41:26+00:00](https://github.com/leanprover-community/mathlib/commit/00b88eb113e2fd5625e1c096bf426ed2891f73ab)
feat(data/polynomial/denominators): add file denominators ([#5587](https://github.com/leanprover-community/mathlib/pull/#5587))

The main goal of this PR is to establish that `b^deg(f)*f(a/b)` is an expression not involving denominators.

The first lemma, `induction_with_nat_degree_le` is an induction principle for polynomials, where the inductive hypothesis has a bound on the degree of the polynomial.  This allows to build the proof by tearing apart a polynomial into its monomials, while remembering the overall degree of the polynomial itself.  This lemma might be a better fit for the file `data.polynomial.induction`.

### [2021-01-27T05:12:41+00:00](https://github.com/leanprover-community/mathlib/commit/394d3574e5e53ceffbff03fbb424cd8fcc6d4fba)
refactor(data/nat/factorial): simpler proof of `mul_factorial_pred` ([#5917](https://github.com/leanprover-community/mathlib/pull/#5917))

Co-authors: `lean-gptf`, Stanislas Polu

### [2021-01-27T05:12:39+00:00](https://github.com/leanprover-community/mathlib/commit/d41781cfd16ec0653182bba6499635d9263eb619)
refactor(topology/metric_space): simplify `dist_triangle` proofs ([#5916](https://github.com/leanprover-community/mathlib/pull/#5916))

Co-authors: `lean-gptf`, Stanislas Polu

### [2021-01-27T05:12:37+00:00](https://github.com/leanprover-community/mathlib/commit/4e4298e2f389b53bc1af1722ed1ba18874ac8af1)
chore(*): split long lines ([#5908](https://github.com/leanprover-community/mathlib/pull/#5908))

### [2021-01-27T05:12:35+00:00](https://github.com/leanprover-community/mathlib/commit/47e2f804e913566e946c4bf291c489d98834a6a5)
chore(*): Replace integral_domain assumptions with no_zero_divisors ([#5877](https://github.com/leanprover-community/mathlib/pull/#5877))

This removes unnecessary `nontrivial` assumptions, and reduces some `comm_ring` requirements to `comm_semiring`.

This also adds some missing `nontrivial` and `no_zero_divisors` instances.




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-01-27T01:48:38+00:00](https://github.com/leanprover-community/mathlib/commit/19bb4709d5bb484ea03f2bdfc48f036d5735e4b6)
chore(scripts): update nolints.txt ([#5918](https://github.com/leanprover-community/mathlib/pull/#5918))

I am happy to remove some nolints for you!

### [2021-01-27T01:48:34+00:00](https://github.com/leanprover-community/mathlib/commit/9173005795fb67dc07a53380cd3758c3dfda1bab)
chore(tactic/finish): Remove broken ifinish ([#5897](https://github.com/leanprover-community/mathlib/pull/#5897))

See https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/intuitionistic.20logic/near/224013270


Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-01-27T01:48:32+00:00](https://github.com/leanprover-community/mathlib/commit/1ddb93a9410e735bf1d6bcff1122d9ee6289241f)
feat(analysis/normed_space): define linear isometries ([#5867](https://github.com/leanprover-community/mathlib/pull/#5867))

* define `linear_isometry` and `linear_isometry_equiv`;
* add `linear_map.ker_eq_bot_of_inverse`;
* replace `inv_fun_apply` lemmas with `inv_fun_eq_symm`;
* golf some proofs in `linear_algebra/finite_dimensional`.

### [2021-01-27T01:48:30+00:00](https://github.com/leanprover-community/mathlib/commit/1eb1293706c569ef94776d63fd4900923cc66270)
feat(archive/imo): formalize IMO 2011 problem Q3 ([#5842](https://github.com/leanprover-community/mathlib/pull/#5842))

### [2021-01-26T22:43:47+00:00](https://github.com/leanprover-community/mathlib/commit/531bcd8d49c4399c26cfc56c2512b06df59e62d1)
feat(data/real/{nnreal,ennreal}, topology/instances/ennreal): add of_real_(sum/prod/tsum) for nnreal and ennreal ([#5896](https://github.com/leanprover-community/mathlib/pull/#5896))

We remark that if all terms of a real sum are nonnegative, `nnreal.of_real` of the sum is equal to the sum of the `nnreal.of_real`. Idem for `ennreal.of_real`, for products and `tsum`.

### [2021-01-26T22:43:45+00:00](https://github.com/leanprover-community/mathlib/commit/8c732b2c8eb5e75b5c26fe6b1528eb102423a0c4)
feat(data/finset/basic): card_subtype simp lemma ([#5894](https://github.com/leanprover-community/mathlib/pull/#5894))

### [2021-01-26T16:37:25+00:00](https://github.com/leanprover-community/mathlib/commit/547d67fc7ad1ae9f0df0be5b64ac531c0dd5f4ca)
feat(analysis/{analytic,calculus}): an analytic function is strictly differentiable ([#5878](https://github.com/leanprover-community/mathlib/pull/#5878))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-01-26T04:21:27+00:00](https://github.com/leanprover-community/mathlib/commit/44fd23d139bdb8cf3680c4a481e8035468e1d390)
chore(data/finset): Rename bind to bUnion ([#5813](https://github.com/leanprover-community/mathlib/pull/#5813))

This commit renames `finset.bind` to `finset.bUnion`.  While this is the monadic bind operation, conceptually it's doing a bounded union of an indexed family of finite sets.  This will help with discoverability of this function.

There was a name conflict in `data.finset.lattice` due to this, since there are a number of theorems about the `set` version of `bUnion`, and for these I prefixed the lemmas with `set_`.

### [2021-01-26T01:48:59+00:00](https://github.com/leanprover-community/mathlib/commit/01a7cde647bd8d6f7e1b4c10373d7413cefa2455)
chore(scripts): update nolints.txt ([#5892](https://github.com/leanprover-community/mathlib/pull/#5892))

I am happy to remove some nolints for you!

### [2021-01-25T17:49:34+00:00](https://github.com/leanprover-community/mathlib/commit/5491c5923bce75b5a1bc9ed31ef5d41f854792df)
feat(data/fintype/basic): add lemmas about finsets and cardinality ([#5886](https://github.com/leanprover-community/mathlib/pull/#5886))

Add lemmas about finsets and cardinality. Part of [#5695](https://github.com/leanprover-community/mathlib/pull/#5695) in order to prove Hall's marriage theorem.

Coauthors: @kmill @b-mehta

### [2021-01-25T17:49:32+00:00](https://github.com/leanprover-community/mathlib/commit/7f25aa7617424a50de358d4c7e926deef3dd6e6d)
chore(algebra/group_with_zero): correct instance name ([#5885](https://github.com/leanprover-community/mathlib/pull/#5885))

The argument for this definition is `cancel_monoid_with_zero`, not `comm_cancel_monoid_with_zero`.

### [2021-01-25T17:49:30+00:00](https://github.com/leanprover-community/mathlib/commit/3a16e9f85e3e49c9664728d7c36457f6ba2656d8)
feat(data/set/finite): add to_finset lemma ([#5883](https://github.com/leanprover-community/mathlib/pull/#5883))

Add lemma stating that taking to_finset of the union of two sets is the same as taking the union of to_finset of the sets.

### [2021-01-25T17:49:28+00:00](https://github.com/leanprover-community/mathlib/commit/ba876475e3d9cde830c5a677754878fa82553d9e)
feat(data/set/finite): add lemma about to_finset of complement of set ([#5881](https://github.com/leanprover-community/mathlib/pull/#5881))

Add lemma stating that taking to_finset of the complement of a set is the same thing as taking the complement of to_finset of the set.



Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>

### [2021-01-25T17:49:25+00:00](https://github.com/leanprover-community/mathlib/commit/7188d8065484024d9435a5644d9f3ff1bf7a39d5)
chore(algebra/pi_tensor_product): Replace use of classical with decidable_eq ([#5880](https://github.com/leanprover-community/mathlib/pull/#5880))

This makes it consistent with `multilinear_map`, which also uses explicit decidability assumptions

### [2021-01-25T17:49:23+00:00](https://github.com/leanprover-community/mathlib/commit/1dfa81a13df6ae2dd7679c71be174e26778c1607)
feat(analysis/normed_space/inner_product): double orthogonal complement is closure ([#5876](https://github.com/leanprover-community/mathlib/pull/#5876))

Put a submodule structure on the closure (as a set in a topological space) of a submodule of a topological module.  Show that in a complete inner product space, the double orthogonal complement of a submodule is its closure.

### [2021-01-25T17:49:21+00:00](https://github.com/leanprover-community/mathlib/commit/ee750e33b3537981b589ae23a169dfebef1e0db7)
chore(algebra): a few more `@[mono]` tags ([#5874](https://github.com/leanprover-community/mathlib/pull/#5874))

### [2021-01-25T16:06:54+00:00](https://github.com/leanprover-community/mathlib/commit/6d80634849aec09af79b89eaef0439d3717651e7)
feat(measure_theory/{measure_space, borel_space, integration}): prove ae_measurable for various limits ([#5849](https://github.com/leanprover-community/mathlib/pull/#5849))

For a sequence of `ae_measurable` functions verifying some pointwise property almost everywhere, introduce a sequence of measurable functions verifying the same property and use it to prove ae-measurability of `is_lub`, `is_glb`, `supr`, `infi`, and almost everywhere pointwise limit.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2021-01-25T14:56:46+00:00](https://github.com/leanprover-community/mathlib/commit/d6d4435e2ba18f8ba02a70ac66355123043ee110)
chore(archive/sensitivity): split long lines ([#5882](https://github.com/leanprover-community/mathlib/pull/#5882))

### [2021-01-25T05:26:45+00:00](https://github.com/leanprover-community/mathlib/commit/9117ad7178c02041fb040d1c768965189c6bfbfe)
feat(order/atoms): define (co)atomic, (co)atomistic lattices ([#5588](https://github.com/leanprover-community/mathlib/pull/#5588))

Define (co)atomic, (co)atomistic lattices
Relate these lattice definitions
Provide basic subtype instances



Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-01-25T04:13:48+00:00](https://github.com/leanprover-community/mathlib/commit/87202fe9cf8979c0967117b147eb9d4bde6458b0)
chore(scripts): update nolints.txt ([#5873](https://github.com/leanprover-community/mathlib/pull/#5873))

I am happy to remove some nolints for you!

### [2021-01-25T01:08:37+00:00](https://github.com/leanprover-community/mathlib/commit/507c7ffc19993c7950f4d9c1f7c651428e530dee)
feat(analysis/specific_limits): formula for `∑' n, n * r ^ n` ([#5835](https://github.com/leanprover-community/mathlib/pull/#5835))

Also prove that `∑' n, n ^ k * r ^ n` is summable for any `k : ℕ`,
`∥r∥ < 1`.

### [2021-01-24T23:21:23+00:00](https://github.com/leanprover-community/mathlib/commit/5222db01037552fdad66a0e37d8aa279ba8145f2)
chore(linear_algebra/multilinear): Relax ring to semiring, add_comm_group to add_comm_monoid ([#5870](https://github.com/leanprover-community/mathlib/pull/#5870))

### [2021-01-24T20:25:01+00:00](https://github.com/leanprover-community/mathlib/commit/fbabe4273b3fa55161aff86f935e85212012b1de)
feat(order/complete_well_founded, data/finset/lattice): introduce compact elements of a complete lattice and characterize compact lattices as those with all elements compact ([#5825](https://github.com/leanprover-community/mathlib/pull/#5825))

Provide a definition of compact elements. Prove the equivalence of two characterizations of compact elements. Add "all elements are compact" to the equivalent characterizations of compact lattices. Introduce an auxiliary lemma about finite sups and directed sets.

<!--
A reference for the two equivalent definitions of compact element can be found [here](https://ncatlab.org/nlab/show/compact+element+in+a+lattice)
-->

### [2021-01-24T13:41:30+00:00](https://github.com/leanprover-community/mathlib/commit/5db7a188a3dfbd267d3cc2d2e293df0bf7af1f11)
feat(data/nat/basic): add decidable_exists_lt deciding existence of a natural below a bound satisfying a predicate ([#5864](https://github.com/leanprover-community/mathlib/pull/#5864))

Given a decidable predicate `P` on naturals it is decidable if there is a natural below any bound satisying the `P`.

closes [#5755](https://github.com/leanprover-community/mathlib/pull/#5755)

### [2021-01-24T10:50:05+00:00](https://github.com/leanprover-community/mathlib/commit/49c53d4f5ae197887ca9780f14bdf9c271b55924)
feat(measure_theory/lp_space): define Lp, subtype of ae_eq_fun with finite norm ([#5853](https://github.com/leanprover-community/mathlib/pull/#5853))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-01-24T06:50:40+00:00](https://github.com/leanprover-community/mathlib/commit/aa744dba88de45c7b91ca81b1bb526e7e312d7e1)
feat(topology/subset_properties): a locally compact space with second countable topology is sigma compact ([#5689](https://github.com/leanprover-community/mathlib/pull/#5689))

* add `set.subsingleton.induction_on`, `set.Union_eq_univ_iff`, and `set.bUnion_eq_univ_iff`;
* make `tactic.interactive.nontrivial` try `apply_instance` before
  `simp`;
* add `dense.inter_nhds_nonempty`;
* a subsingleton is compact (lemma for sets, instance for spaces);
* in a locally compact space, every point has a compact neighborhood;
* a compact space is sigma compact;
* a locally compact space with second countable topology is sigma
  compact;
* add `dense.bUnion_uniformity_ball`: the uniform neighborhoods of all
  points of a dense set cover the whole space

Some of these changes are leftovers from a failed attempt to prove a
wrong statement.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-01-24T03:45:38+00:00](https://github.com/leanprover-community/mathlib/commit/f414fcaac1886349675bcd75f825b32d5e9885c1)
feat(analysis/analytic/composition): filling small holes in existing API ([#5822](https://github.com/leanprover-community/mathlib/pull/#5822))

This PR expands the existing API around the composition of formal multilinear series.

Also makes the `finset` argument to `finset.prod_subtype` and `finset.add_subtype` explicit instead of implicit.

### [2021-01-24T02:20:04+00:00](https://github.com/leanprover-community/mathlib/commit/160d243d7c1d37b0a48d30dbe9a360f23c10b975)
chore(scripts): update nolints.txt ([#5865](https://github.com/leanprover-community/mathlib/pull/#5865))

I am happy to remove some nolints for you!

### [2021-01-23T13:02:18+00:00](https://github.com/leanprover-community/mathlib/commit/8da574f53f4ce41c7799324c9f94fe23d5f73e40)
feat(algebra/pointwise): a lemma about pointwise addition/multiplication of bdd_above sets ([#5859](https://github.com/leanprover-community/mathlib/pull/#5859))

### [2021-01-23T13:02:16+00:00](https://github.com/leanprover-community/mathlib/commit/3a136f81529020c6ed23a8207b5474157d9c88bb)
refactor(analysis/analytic/composition): extend definition, extract a lemma from a proof ([#5850](https://github.com/leanprover-community/mathlib/pull/#5850))

Extract a standalone lemma of the proof that the composition of two analytic functions is well-behaved, and extend a little bit the definition of the sets which are involved in the corresponding change of variables.

### [2021-01-23T11:06:24+00:00](https://github.com/leanprover-community/mathlib/commit/74760f22709c3a4d57d7d0eced60473cbc9250ef)
chore(set_theory/ordinal): use rel_iso notation in ordinal ([#5857](https://github.com/leanprover-community/mathlib/pull/#5857))

### [2021-01-23T07:40:00+00:00](https://github.com/leanprover-community/mathlib/commit/013b902d48acc46e03e9d1db889ad13da5c3eb9b)
feat(order/rel_iso): generalise several lemmas to assume only has_le not preorder ([#5858](https://github.com/leanprover-community/mathlib/pull/#5858))

### [2021-01-23T02:17:47+00:00](https://github.com/leanprover-community/mathlib/commit/b0e874e0b07872f254830a8ef610ac96ca1dca63)
chore(scripts): update nolints.txt ([#5856](https://github.com/leanprover-community/mathlib/pull/#5856))

I am happy to remove some nolints for you!

### [2021-01-22T21:50:00+00:00](https://github.com/leanprover-community/mathlib/commit/04972f696502ca10f8243e64ecb6f6a553ed87b2)
docs(undergrad.yaml): update with [#5724](https://github.com/leanprover-community/mathlib/pull/#5724) and [#5788](https://github.com/leanprover-community/mathlib/pull/#5788) ([#5855](https://github.com/leanprover-community/mathlib/pull/#5855))

Add results from a couple of recent PRs.  Also correct an apparent oversight from the translation of the file.

### [2021-01-22T17:20:38+00:00](https://github.com/leanprover-community/mathlib/commit/3250fc30bd55e1cd39c30caf4fc23375599cb6e2)
feat(analysis/mean_inequalities, measure_theory/lp_space): extend mem_Lp.add to all p in ennreal ([#5828](https://github.com/leanprover-community/mathlib/pull/#5828))

Show `(a ^ q + b ^ q) ^ (1/q) ≤ (a ^ p + b ^ p) ^ (1/p)` for `a,b : ennreal` and `0 < p <= q`.

Use it to show that for `p <= 1`, if measurable functions `f` and `g` are in Lp, `f+g` is also in Lp (the case `1 <= p` is already done).

### [2021-01-22T16:01:54+00:00](https://github.com/leanprover-community/mathlib/commit/f48ce7ecf3470f31cfdb309de975d893fb89db02)
feat(algebra/lie/basic): define the radical of a Lie algebra and prove it is solvable ([#5833](https://github.com/leanprover-community/mathlib/pull/#5833))

### [2021-01-22T12:52:31+00:00](https://github.com/leanprover-community/mathlib/commit/cb618e01861cd3f548c7393d3651e92f9372dd2a)
feat(analysis/analytic): a continuous linear map defines an analytic function ([#5840](https://github.com/leanprover-community/mathlib/pull/#5840))

Also add convenience lemmas with conclusion `radius = ⊤`.

### [2021-01-22T12:52:30+00:00](https://github.com/leanprover-community/mathlib/commit/faba9cea5765a3161aaa7f76118b9bd9dbf77ba3)
chore(algebra/group_power): generalize `semiring` version of Bernoulli's inequality ([#5831](https://github.com/leanprover-community/mathlib/pull/#5831))

Now `one_add_mul_le_pow'` assumes `0 ≤ a * a`, `0 ≤ (1 + a) * (1 +
a)`, and `0 ≤ 2 + a`.

Also add a couple of convenience lemmas.

### [2021-01-22T12:52:28+00:00](https://github.com/leanprover-community/mathlib/commit/0feb1d2023d9c223b73440667918f51119c472c1)
feat(measure_theory/interval_integral) : add integration by parts ([#5724](https://github.com/leanprover-community/mathlib/pull/#5724))

A direct application of FTC-2 for interval_integral.




Co-authored-by: Benjamin Davidson <68528197+benjamindavidson@users.noreply.github.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2021-01-22T12:52:26+00:00](https://github.com/leanprover-community/mathlib/commit/de10203fabda585e76d0908afb9f1612b9f40db3)
feat(order/modular_lattice): define modular lattices ([#5564](https://github.com/leanprover-community/mathlib/pull/#5564))

Defines modular lattices
Defines the diamond isomorphisms in a modular lattice
Places `is_modular_lattice` instances on a `distrib_lattice`, the lattice of `subgroup`s of a `comm_group`, and the lattice of `submodule`s of a `module`.



Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-01-22T09:40:49+00:00](https://github.com/leanprover-community/mathlib/commit/38ae9b37deffcc8a1ba095fe0387dbc40334ad55)
chore(data/nat/basic): reuse a proof, drop a duplicate ([#5836](https://github.com/leanprover-community/mathlib/pull/#5836))

Drop `nat.div_mul_le_self'`, use `nat.div_mul_le_self` instead.

### [2021-01-22T07:39:51+00:00](https://github.com/leanprover-community/mathlib/commit/8b4c455bf3bce19ae88dffa61111490000cc320e)
feat(data/polynomial/algebra_map): aeval_map ([#5843](https://github.com/leanprover-community/mathlib/pull/#5843))

Proves `aeval_map`, which relates `aeval` within an `is_scalar_tower`.

### [2021-01-22T06:16:16+00:00](https://github.com/leanprover-community/mathlib/commit/bef50a4d5c9ec66a17407b349421d334e0ab6821)
feat(field_theory/minpoly): Minimal polynomials of degree one ([#5844](https://github.com/leanprover-community/mathlib/pull/#5844))

If the minimal polynomial has degree one then the element in question lies in the base ring.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-01-22T04:19:57+00:00](https://github.com/leanprover-community/mathlib/commit/6958d8cd1c28c9a2b3014dd3ee3b20421a6f70d2)
feat(topology/metric_space/{basic,emetric_space}): product of balls of the same size ([#5846](https://github.com/leanprover-community/mathlib/pull/#5846))

### [2021-01-22T02:55:27+00:00](https://github.com/leanprover-community/mathlib/commit/244b3ed0c49a365381d52028ea5807b3ad0bc1ee)
chore(scripts): update nolints.txt ([#5841](https://github.com/leanprover-community/mathlib/pull/#5841))

I am happy to remove some nolints for you!

### [2021-01-21T23:47:37+00:00](https://github.com/leanprover-community/mathlib/commit/c681f48c107f9599b06478186708eaf5b86fca6c)
chore(analysis/analytic/composition): minor golfing ([#5839](https://github.com/leanprover-community/mathlib/pull/#5839))

### [2021-01-21T23:47:32+00:00](https://github.com/leanprover-community/mathlib/commit/228c00ba8bbcf758259ea9ea20929e91b8746464)
feat(computability/language): le on languages ([#5704](https://github.com/leanprover-community/mathlib/pull/#5704))

### [2021-01-21T20:47:04+00:00](https://github.com/leanprover-community/mathlib/commit/b2ca761490825768103a1459488593c0cb8c06b9)
chore(algebra/group_power): add `(a+b)^2=a^2+2ab+b^2` ([#5838](https://github.com/leanprover-community/mathlib/pull/#5838))

Also generalize 2 lemmas from `comm_semiring` to `semiring`.

### [2021-01-21T18:59:17+00:00](https://github.com/leanprover-community/mathlib/commit/fac0f253201cf36ef3a2b67db06e70f16ee9a53d)
fix(tactic/default): make field_simp work with import tactic ([#5832](https://github.com/leanprover-community/mathlib/pull/#5832))

### [2021-01-21T14:01:20+00:00](https://github.com/leanprover-community/mathlib/commit/b52b3041f23c91a70517d425ef45b91935b4297f)
feat(algebra/lie/basic): show `I + J` is solvable if Lie ideals `I`, `J` are solvable ([#5819](https://github.com/leanprover-community/mathlib/pull/#5819))

The key result is `lie_algebra.is_solvable_add`

### [2021-01-21T11:18:02+00:00](https://github.com/leanprover-community/mathlib/commit/3ef8281175073ab34586bc495c086c59c0551fc8)
fix(group_theory/group_action/defs): fix minor typo ([#5827](https://github.com/leanprover-community/mathlib/pull/#5827))

heirarchy -> hierarchy

### [2021-01-21T11:17:59+00:00](https://github.com/leanprover-community/mathlib/commit/b3a21123aaa08fd78bb0a830f34f0f7188cbfb3c)
chore(algebra/group/conj): move `conj_injective` and use existing proofs ([#5798](https://github.com/leanprover-community/mathlib/pull/#5798))

### [2021-01-21T11:17:58+00:00](https://github.com/leanprover-community/mathlib/commit/d66d56395dd3695733b85d5091a38fb2948e2279)
feat(measure_theory/interval_integral): FTC-2 for the open set ([#5733](https://github.com/leanprover-community/mathlib/pull/#5733))

A follow-up to [#4945](https://github.com/leanprover-community/mathlib/pull/#4945). I replaced `integral_eq_sub_of_has_deriv_at'` with a stronger version that holds for functions that have a derivative on an `Ioo` (as opposed to an `Ico`). Inspired by [this](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/FTC-2.20on.20open.20set/near/222177308) conversation on Zulip.

I also emended docstrings to reflect changes made in [#5647](https://github.com/leanprover-community/mathlib/pull/#5647).

### [2021-01-21T08:15:25+00:00](https://github.com/leanprover-community/mathlib/commit/ce9bc688f603b5ce4261ea2cfffb524acf8e84dc)
feat(ring_theory/polynomial): symmetric polynomials and elementary symmetric polynomials ([#5788](https://github.com/leanprover-community/mathlib/pull/#5788))

Define symmetric polynomials and elementary symmetric polynomials, and prove some basic facts about them.

### [2021-01-21T02:18:43+00:00](https://github.com/leanprover-community/mathlib/commit/a19e48b1364734ff89261200305ffe67b93e6c08)
chore(scripts): update nolints.txt ([#5826](https://github.com/leanprover-community/mathlib/pull/#5826))

I am happy to remove some nolints for you!

### [2021-01-20T22:33:10+00:00](https://github.com/leanprover-community/mathlib/commit/b2d95c0c08054284987b1e24b6a44ed3915612f8)
feat(data/nat/modeq): Generalised version of the Chinese remainder theorem ([#5683](https://github.com/leanprover-community/mathlib/pull/#5683))

That allows the moduli to not be coprime, assuming the necessary condition. Old crt is now in terms of this one

### [2021-01-20T19:25:37+00:00](https://github.com/leanprover-community/mathlib/commit/8b6f541e526e23500a6377d2c13b1fcc50c2deee)
feat(field_theory/normal): Splitting field is normal ([#5768](https://github.com/leanprover-community/mathlib/pull/#5768))

Proves that splitting fields are normal.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-01-20T16:12:42+00:00](https://github.com/leanprover-community/mathlib/commit/7c8926536639b2800befd91fe951c4ad794170ae)
chore(data/list/range): Add range_zero and rename range_concat to range_succ ([#5821](https://github.com/leanprover-community/mathlib/pull/#5821))

The name `range_concat` was derived from `range'_concat`, where there are multiple possible expansions for `range' s n.succ`.
For `range` there is only one choice, and naming the lemma after the result rather than the statement makes it harder to find.

### [2021-01-20T14:40:22+00:00](https://github.com/leanprover-community/mathlib/commit/2ec396a763677e0144aea5cb048f7e54fa9dc475)
chore(data/dfinsupp): add `dfinsupp.prod_comm` ([#5817](https://github.com/leanprover-community/mathlib/pull/#5817))

This is the same lemma as `finsupp.prod_comm` but for dfinsupp

### [2021-01-20T11:51:00+00:00](https://github.com/leanprover-community/mathlib/commit/9cdffe9ccfff2a16792509a4b7c70a38a7fce5f9)
refactor(data/fin): shorter proof of `mk.inj_iff` ([#5811](https://github.com/leanprover-community/mathlib/pull/#5811))

Co-authors: `lean-gptf`, Yuhuai Wu

### [2021-01-20T11:50:58+00:00](https://github.com/leanprover-community/mathlib/commit/c700791b9ba17598dc9a4b6f6b38d05cbaf7915d)
feat(data/list/range): nth_le_fin_range ([#5456](https://github.com/leanprover-community/mathlib/pull/#5456))

### [2021-01-20T11:50:56+00:00](https://github.com/leanprover-community/mathlib/commit/9ae33174d28f58bed9b996c94a4bafc27341044e)
feat(data/fin): add_comm_monoid and simp lemmas ([#5010](https://github.com/leanprover-community/mathlib/pull/#5010))

Provide `add_comm_monoid` for `fin (n + 1)`, which makes proofs that have to do with `bit0`, `bit1`, and `nat.cast` and related happy. Provide the specialized lemmas as simp lemmas. Also provide various simp lemmas about multiplication, but without the associated `comm_monoid`.

### [2021-01-20T09:51:08+00:00](https://github.com/leanprover-community/mathlib/commit/a7a4f34cabf25db4d310bb8ac0c9393370319dfe)
feat(algebraic_geometry/is_open_comap_C): add file is_open_comap_C, prove that Spec R[x] \to Spec R is an open map ([#5693](https://github.com/leanprover-community/mathlib/pull/#5693))

This file is the first part of a proof of Chevalley's Theorem.  It contains a proof that the morphism Spec R[x] \to Spec R is open.  In a later PR, I hope to prove that, under the same morphism, the image of a closed set is constructible.

### [2021-01-20T08:32:57+00:00](https://github.com/leanprover-community/mathlib/commit/0c57d1e7996eadc7f28ea321b5c60ade6fcfec0c)
feat(category_theory/monad): algebras for the coproduct monad ([#5679](https://github.com/leanprover-community/mathlib/pull/#5679))

WIP, I'll fix it up when the dependent PRs merge

<!--
put comments you want to keep out of the PR commit here.
If this PR depends on other PRs, please list them below this comment,
using the following format:
- [ ] depends on: #abc [optional extra text]
- [ ] depends on: #xyz [optional extra text]
-->

- [x] depends on: [#5674](https://github.com/leanprover-community/mathlib/pull/#5674)
- [x] depends on: [#5677](https://github.com/leanprover-community/mathlib/pull/#5677) 
- [x] depends on: [#5678](https://github.com/leanprover-community/mathlib/pull/#5678)

### [2021-01-20T06:40:59+00:00](https://github.com/leanprover-community/mathlib/commit/e41b917c22a234314301a049f5a6c4f23601f43e)
feat(char_p/quotient): Add a lemma to inherit char_p from the underlying ring ([#5809](https://github.com/leanprover-community/mathlib/pull/#5809))

### [2021-01-20T06:40:57+00:00](https://github.com/leanprover-community/mathlib/commit/385173df70dc46cd4dd6cbe1bf77518cf3cbf8d8)
feat(ring_theory/ideal/operations): generalize quotient of algebras ([#5802](https://github.com/leanprover-community/mathlib/pull/#5802))

I generalize [#5703](https://github.com/leanprover-community/mathlib/pull/#5703) (that was merged earlier today... sorry for that, I should have thought more carefully about it) to be able to work with `S/I` as an `R`-algebra, where `S` is an `R`-algebra.  (In [#5703](https://github.com/leanprover-community/mathlib/pull/#5703) only `R/I` was considered.) The proofs are the same.

### [2021-01-20T06:40:55+00:00](https://github.com/leanprover-community/mathlib/commit/31fd5b58d973406ae1d4863fc4d97b572aebb370)
feat(category_theory/limits): preserve monomorphisms ([#5801](https://github.com/leanprover-community/mathlib/pull/#5801))

A functor which preserves pullbacks also preserves monomorphisms.

### [2021-01-20T04:42:11+00:00](https://github.com/leanprover-community/mathlib/commit/a3ef65da5926e382e5a0098322bb2f9a1b23978f)
feat(algebra/lie/basic): additional lemmas concerning `lie_algebra.derived_series_of_ideal` ([#5815](https://github.com/leanprover-community/mathlib/pull/#5815))

### [2021-01-20T03:20:26+00:00](https://github.com/leanprover-community/mathlib/commit/b1d567367bc84c0b9fd2fdfa253fa37b861b15c1)
chore(scripts): update nolints.txt ([#5816](https://github.com/leanprover-community/mathlib/pull/#5816))

I am happy to remove some nolints for you!

### [2021-01-20T00:07:09+00:00](https://github.com/leanprover-community/mathlib/commit/d7a8709e9a00c18074e3be2f4f3bdb84d2561d0e)
chore(algebra/group/hom): Add `mk_coe` lemmas ([#5812](https://github.com/leanprover-community/mathlib/pull/#5812))

These are the counterparts to the `coe_mk` lemmas.

### [2021-01-19T21:59:16+00:00](https://github.com/leanprover-community/mathlib/commit/b1214293f5d90741bfe05bf692ee5211253de571)
feat(measure_theory/lp_space): extend the definition of Lp seminorm to p ennreal ([#5808](https://github.com/leanprover-community/mathlib/pull/#5808))

Rename the seminorm with real exponent to `snorm'`, introduce `snorm_ess_sup` for `L\infty`, equal to the essential supremum of the norm.

### [2021-01-19T18:42:43+00:00](https://github.com/leanprover-community/mathlib/commit/9d14a5f3f6d76e6e98f975d87a2e9b334341e6c9)
chore(order/filter/basic): add `eventually_eq.rfl` and `eventually_le.rfl` ([#5805](https://github.com/leanprover-community/mathlib/pull/#5805))

### [2021-01-19T18:42:41+00:00](https://github.com/leanprover-community/mathlib/commit/21b0b012a3b3c6f43aead56c3c9cae7f38ef6117)
feat(analysis/normed_space,topology/metric_space): distance between diagonal vectors ([#5803](https://github.com/leanprover-community/mathlib/pull/#5803))

Add formulas for (e|nn|)dist between `λ _, a` and `λ _, b` as well
as `∥(λ _, a)∥` and `nnnorm (λ _, a)`.

### [2021-01-19T17:22:05+00:00](https://github.com/leanprover-community/mathlib/commit/da6e3c36620da59ea8dae09f24b41256be5e9253)
feat(data/buffer/parser/numeral): numeral parser defs ([#5462](https://github.com/leanprover-community/mathlib/pull/#5462))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-01-19T13:11:48+00:00](https://github.com/leanprover-community/mathlib/commit/8b47563e959109ec13d89e36d8630184312947ad)
chore(category_theory/adjunction): move reflective functor lemmas ([#5800](https://github.com/leanprover-community/mathlib/pull/#5800))

Moves a lemma and describes a generalisation.

### [2021-01-19T13:11:46+00:00](https://github.com/leanprover-community/mathlib/commit/90763c468f20b3938f7e36bbeff75b8cba4b7b31)
feat(algebra/lie/basic): generalise the definition of `lie_algebra.derived_series` ([#5794](https://github.com/leanprover-community/mathlib/pull/#5794))

This generalisation will make it easier to relate properties of the derived
series of a Lie algebra and the derived series of its ideals (regarded as Lie
algebras in their own right).

The key definition is `lie_algebra.derived_series_of_ideal` and the key result is `lie_ideal.derived_series_eq_bot_iff`.

### [2021-01-19T13:11:44+00:00](https://github.com/leanprover-community/mathlib/commit/18841a9e35cce911208fa0114cd4dce9ff1d46ea)
feat(data/list/basic): nth and nth_le for pmap ([#5451](https://github.com/leanprover-community/mathlib/pull/#5451))

### [2021-01-19T13:11:42+00:00](https://github.com/leanprover-community/mathlib/commit/9777d1e73e195af2db5ae1d0d397ad81415e98d0)
feat(data/option/basic): map_bind and join_pmap lemmas ([#5445](https://github.com/leanprover-community/mathlib/pull/#5445))

### [2021-01-19T11:40:25+00:00](https://github.com/leanprover-community/mathlib/commit/c37c64fbfa58467c88cf0513398f3376171ac41a)
chore(data/matrix/notation): Add some missing simp lemmas for sub, head, and tail ([#5807](https://github.com/leanprover-community/mathlib/pull/#5807))

### [2021-01-19T03:39:22+00:00](https://github.com/leanprover-community/mathlib/commit/190dd10609d23a8bf9861b10e598596f0c61722b)
chore(analysis/normed_space): golf some proofs ([#5804](https://github.com/leanprover-community/mathlib/pull/#5804))

* add `pi_norm_lt_iff`;
* add `has_sum.norm_le_of_bounded`;
* add `multilinear_map.bound_of_shell`;
* rename `continuous_multilinear_map.norm_image_sub_le_of_bound` to
  `continuous_multilinear_map.norm_image_sub_le`, same with prime
  version;
* golf some proofs.

### [2021-01-19T02:19:31+00:00](https://github.com/leanprover-community/mathlib/commit/c9c3b6f5d0e3ea1b4a3bfa78ebe32ea5c9739bb6)
chore(scripts): update nolints.txt ([#5806](https://github.com/leanprover-community/mathlib/pull/#5806))

I am happy to remove some nolints for you!

### [2021-01-18T23:02:32+00:00](https://github.com/leanprover-community/mathlib/commit/541688b56165fe3916afc3e7e40cfeda13145e1e)
feat(combinatorics/simple_graph/basic): add lemmas about cardinality of common neighbor set ([#5789](https://github.com/leanprover-community/mathlib/pull/#5789))

Add lemmas about the cardinality of the set of common neighbors between two vertices. Add note in module docstring about naming convention. Part of [#5698](https://github.com/leanprover-community/mathlib/pull/#5698) in order to prove facts about strongly regular graphs.



Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>

### [2021-01-18T23:02:30+00:00](https://github.com/leanprover-community/mathlib/commit/77003ce27487947e5918defc8e541e1e302a0c5d)
refactor(field_theory|ring_theory|linear_algebra): minpoly A x ([#5774](https://github.com/leanprover-community/mathlib/pull/#5774))

This PR refactors the definition of `minpoly` to
```
noncomputable def minpoly (x : B) : polynomial A := if hx : is_integral
A x then well_founded.min degree_lt_wf _ hx else 0
```

The benefit is that we can write `minpoly A x` instead of
`minpoly hx` for `hx : is_integral A x`. The resulting code is more
readable, and some lemmas are true without the `hx` assumption.

### [2021-01-18T19:33:02+00:00](https://github.com/leanprover-community/mathlib/commit/725efb183bdc19730a0bb0d9b61007a76d18d834)
doc(tactic/rewrite): Add an example for assoc_rw ([#5799](https://github.com/leanprover-community/mathlib/pull/#5799))

### [2021-01-18T17:54:03+00:00](https://github.com/leanprover-community/mathlib/commit/b5e832e2e65141cbc03af97f372af5177170387b)
refactor(algebraic_geometry/prime_spectrum): simplify `comap_id`, `comap_comp` ([#5796](https://github.com/leanprover-community/mathlib/pull/#5796))

faster proofs and smaller proof terms

Co-authors: `lean-gptf`, Yuhuai Wu

### [2021-01-18T15:57:43+00:00](https://github.com/leanprover-community/mathlib/commit/57bc1dab7497cdc72a7b2856ed8b3a7e59c6f255)
feat(order/limsup_liminf, order/filter/ennreal): add properties of limsup for ennreal-valued functions ([#5746](https://github.com/leanprover-community/mathlib/pull/#5746))




Co-authored-by: Rémy Degenne <remydegenne@gmail.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-01-18T10:20:56+00:00](https://github.com/leanprover-community/mathlib/commit/66e955e4f0650aaaaaa53820adb9dc31f9721f82)
feat(algebra/lie/basic): results relating Lie algebra morphisms and ideal operations ([#5778](https://github.com/leanprover-community/mathlib/pull/#5778))

The key results are `lie_ideal.comap_bracket_eq` and its corollary `lie_ideal.comap_bracket_incl`

### [2021-01-18T08:58:39+00:00](https://github.com/leanprover-community/mathlib/commit/9381e37d86658cdde9ad7b03733610c506e2a9e0)
doc(data/buffer/parser/basic): fix typo ([#5792](https://github.com/leanprover-community/mathlib/pull/#5792))

### [2021-01-18T07:03:48+00:00](https://github.com/leanprover-community/mathlib/commit/8ab1a39dec8ed51b9c047f01075ef43419b7fc29)
chore(field_theory/minpoly): meaningful variable names ([#5773](https://github.com/leanprover-community/mathlib/pull/#5773))

### [2021-01-18T07:03:45+00:00](https://github.com/leanprover-community/mathlib/commit/db617b3c5e9154e6cd0e7d2695b907670c42e672)
feat(ring_theory/ideal/operations): add algebra structure on quotient ([#5703](https://github.com/leanprover-community/mathlib/pull/#5703))

I added very basic stuff about `R/I` as an `R`-algebra that are missing in mathlib.

### [2021-01-18T05:44:26+00:00](https://github.com/leanprover-community/mathlib/commit/f3d3d0461cbf550eed1ac770e48f6c2c51bb9c01)
chore(category_theory/monad): golf and lint monadic adjunctions ([#5769](https://github.com/leanprover-community/mathlib/pull/#5769))

Some lintfixes and proof golfing using newer API



Co-authored-by: Oliver Nash <oliver.nash@gmail.com>
Co-authored-by: leanprover-community-bot <leanprover.community@gmail.com>
Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: tb65536 <tb65536@uw.edu>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>
Co-authored-by: Benjamin Davidson <68528197+benjamindavidson@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: Mohamed Al-Fahim <malfahim8@gmail.com>
Co-authored-by: hrmacbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2021-01-18T03:26:01+00:00](https://github.com/leanprover-community/mathlib/commit/3089b1617dc7cfabb998966b91339fe52d82a4b0)
chore(scripts): update nolints.txt ([#5790](https://github.com/leanprover-community/mathlib/pull/#5790))

I am happy to remove some nolints for you!

### [2021-01-18T00:03:46+00:00](https://github.com/leanprover-community/mathlib/commit/2f824aa115db722d4721e30afb300b1ed3fcd4c3)
feat(data/option/*): pmap and pbind defs and lemmas ([#5442](https://github.com/leanprover-community/mathlib/pull/#5442))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-01-17T21:46:49+00:00](https://github.com/leanprover-community/mathlib/commit/c3639e94df6b271dc4ce9f8c08f1d4650e2c0894)
refactor(algebra/monoid_algebra) generalize from group to monoid algebras ([#5785](https://github.com/leanprover-community/mathlib/pull/#5785))

There was a TODO in the monoid algebra file to generalize three statements from group to monoid algebras. It seemed to be solvable by just changing the assumptions, not the proofs.




Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-01-17T14:43:58+00:00](https://github.com/leanprover-community/mathlib/commit/f29d1c3038422168fbbdb2526abf7c0ff13e86db)
refactor(analysis/calculus/deriv): simpler proof of `differentiable_at.div_const` ([#5782](https://github.com/leanprover-community/mathlib/pull/#5782))

Co-authors: `lean-gptf`, Yuhuai Wu

### [2021-01-17T14:43:56+00:00](https://github.com/leanprover-community/mathlib/commit/83d44a3d2c9cdd6da08047ac61708388b3e8d1c4)
hack(manifold): disable subsingleton instances to speed up simp ([#5779](https://github.com/leanprover-community/mathlib/pull/#5779))

Simp takes an enormous amount of time in manifold code looking for subsingleton instances (and in fact probably in the whole library, but manifolds are particularly simp-heavy). We disable two such instances in the `manifold` locale, to get serious speedups (for instance, `times_cont_mdiff_on.times_cont_mdiff_on_tangent_map_within` goes down from 27s to 10s on my computer).

This is *not* a proper fix. But it already makes a serious difference in this part of the library..

Zulip discussion at https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.235672.20breaks.20timeout/near/223001979

### [2021-01-17T11:37:27+00:00](https://github.com/leanprover-community/mathlib/commit/bf46986e5af8cf0204b003e479050c7f0da239fd)
doc(tactic/auto_cases): fix typo ([#5784](https://github.com/leanprover-community/mathlib/pull/#5784))

### [2021-01-17T08:33:51+00:00](https://github.com/leanprover-community/mathlib/commit/289df3a70e3fa2740895f5d02cc26f04dc9ae15e)
feat(data/set/lattice): add lemmas set.Union_subtype and set.Union_of_singleton_coe ([#5691](https://github.com/leanprover-community/mathlib/pull/#5691))

Add one simp lemma, following a suggestion on the Zulip chat:

https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/image_bUnion

### [2021-01-17T03:47:19+00:00](https://github.com/leanprover-community/mathlib/commit/2c4a51618d489fc4ecb8414049b19b57d230751c)
chore(topology/metric_space/isometry): a few more lemmas ([#5780](https://github.com/leanprover-community/mathlib/pull/#5780))

Also reuse more proofs about `inducing` and `quotient_map` in
`topology/homeomorph`.

Non-bc change: rename `isometric.range_coe` to
`isometric.range_eq_univ` to match `equiv.range_eq_univ`.

### [2021-01-17T02:21:15+00:00](https://github.com/leanprover-community/mathlib/commit/00e1f4c84154a696150b89520316ebc003251218)
chore(scripts): update nolints.txt ([#5781](https://github.com/leanprover-community/mathlib/pull/#5781))

I am happy to remove some nolints for you!

### [2021-01-17T00:33:57+00:00](https://github.com/leanprover-community/mathlib/commit/dec44fe7d04102a03d6c6f278d44fe4e0096b194)
chore(group_theory/perm/{sign,cycles}): renaming for dot notation, linting, formatting ([#5777](https://github.com/leanprover-community/mathlib/pull/#5777))

Declarations renamed in `group_theory/perm/sign.lean` (all of these are under `equiv.perm`):
- `disjoint_mul_comm` -> `disjoint.mul_comm`
- `disjoint_mul_left` -> `disjoint.mul_left`
- `disjoint_mul_right` -> `disjoint.mul_right`
- `is_swap_of_subtype` -> `is_swap.of_subtype_is_swap`
- `sign_eq_of_is_swap` -> `is_swap.sign_eq`

Declarations renamed in `group_theory/perm/cycles.lean` (all of these are under `equiv.perm`):
- `is_cycle_swap` -> `is_cycle.swap`
- `is_cycle_inv` -> `is_cycle.inv`
- `exists_gpow_eq_of_is_cycle` -> `is_cycle.exists_gpow_eq`
- `exists_pow_eq_of_is_cycle` -> `is_cycle.exists_pow_eq`
- `eq_swap_of_is_cycle_of_apply_apply_eq_self` -> `eq_swap_of_apply_apply_eq_self`
- `is_cycle_swap_mul` -> `is_cycle.swap_mul`
- `sign_cycle` -> `is_cycle.sign`
- `apply_eq_self_iff_of_same_cycle` -> `same_cycle.apply_eq_self_iff`
- `same_cycle_of_is_cycle` -> `is_cycle.same_cycle`
- `cycle_of_apply_of_same_cycle` -> `same_cycle.cycle_of_apply`
- `cycle_of_cycle` -> `is_cycle.cycle_of_eq`

I also added a basic module doc string to `group_theory/perm/cycles.lean`.

### [2021-01-17T00:33:55+00:00](https://github.com/leanprover-community/mathlib/commit/a2630fc33c40151ac1eb69eb31d3b0e9a2ac25f1)
chore(field_theory|ring_theory|linear_algebra): rename minimal_polynomial to minpoly ([#5771](https://github.com/leanprover-community/mathlib/pull/#5771))

This PR renames:

* `minimal_polynomial` -> `minpoly`
* a similar substitution throughout the library for all names containing the substring `minimal_polynomial`
* `fixed_points.minpoly.minimal_polynomial` -> `fixed_points.minpoly_eq_minpoly`

This PR moves a file:

  src/field_theory/minimal_polynomial.lean -> src/field_theory/minpoly.lean





Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-01-16T23:11:28+00:00](https://github.com/leanprover-community/mathlib/commit/0cc93a137e9b2e243f8ae1f808fa7225ce0fe143)
feat(category_theory/is_filtered): is_filtered_of_equiv ([#5485](https://github.com/leanprover-community/mathlib/pull/#5485))

If `C` is filtered and there is a right adjoint functor `C => D`, then `D` is filtered. Also a category equivalent to a filtered category is filtered.

Co-authored-by: Bhavik Mehta <bhavikmehta8@gmail.com>

### [2021-01-16T21:37:58+00:00](https://github.com/leanprover-community/mathlib/commit/787e6b302eb24ceef9c0ac097389f2f70409d401)
feat(measure_theory/haar_measure): Prove uniqueness ([#5663](https://github.com/leanprover-community/mathlib/pull/#5663))

Prove the uniqueness of Haar measure (up to a scalar) following  *Measure Theory* by Paul Halmos. This proof seems to contain an omission which we fix by adding an extra hypothesis to an intermediate lemma.
Add some lemmas about left invariant regular measures.
We add the file `measure_theory.prod_group` which contain various measure-theoretic properties of products of topological groups, needed for the uniqueness.
We add `@[to_additive]` to some declarations in `measure_theory`, but leave it out for many because of [#4210](https://github.com/leanprover-community/mathlib/pull/#4210). This causes some renamings in concepts, like `is_left_invariant` -> `is_mul_left_invariant` and `measure.conj` -> `measure.inv` (though a better naming suggestion for this one is welcome).

### [2021-01-16T19:32:30+00:00](https://github.com/leanprover-community/mathlib/commit/23373d15c2d8c005e2c7bf2220bd21d94cb09052)
chore(category_theory/limits): coproduct functor ([#5677](https://github.com/leanprover-community/mathlib/pull/#5677))

Dualises a def already there.


Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-01-16T17:42:15+00:00](https://github.com/leanprover-community/mathlib/commit/e0f4142e3fb1549148ec45e61d551f35141df0d7)
refactor(data/nat/fib): explicitly state fibonacci sequence is monotone ([#5776](https://github.com/leanprover-community/mathlib/pull/#5776))

https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/fib_mono




Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-01-16T17:42:12+00:00](https://github.com/leanprover-community/mathlib/commit/4155665200057b2cdf229efb96ec856858a20e35)
refactor(linear_algebra/dual): replace dim<omega by finite_dimensional ([#5775](https://github.com/leanprover-community/mathlib/pull/#5775))

### [2021-01-16T17:42:09+00:00](https://github.com/leanprover-community/mathlib/commit/d23dbfbab148a914b9cac5da418408a3188b6fc2)
feat(category_theory/adjunction): reflective functors ([#5680](https://github.com/leanprover-community/mathlib/pull/#5680))

Extract reflective functors from monads, and show some properties of them

### [2021-01-16T17:42:07+00:00](https://github.com/leanprover-community/mathlib/commit/64abe5aac974da3023b1b0fb6fd1c0bfc36ab3b8)
feat(category_theory/sites): closed sieves ([#5282](https://github.com/leanprover-community/mathlib/pull/#5282))

- closed sieves
- closure of a sieve
- subobject classifier in Sheaf (without proof of universal property)
- equivalent sheaf condition iff same topology
- closure operator induces topology

### [2021-01-16T15:21:08+00:00](https://github.com/leanprover-community/mathlib/commit/e076a9c137f704c20f4798816124821d76e82d5a)
chore(topology/metric_space/gluing): use `⨅` notation ([#5772](https://github.com/leanprover-community/mathlib/pull/#5772))

Also use `exists_lt_of_cinfi_lt` to golf one proof.

### [2021-01-16T15:21:06+00:00](https://github.com/leanprover-community/mathlib/commit/ba5d1f63f8ae0dc5ef3a59b5468d5d1a32ab0ecb)
feat(linear_algebra/basic): add comap span lemmas ([#5744](https://github.com/leanprover-community/mathlib/pull/#5744))

We already had `map_span` but nothing for `comap`.

### [2021-01-16T15:21:04+00:00](https://github.com/leanprover-community/mathlib/commit/bd578040fe7122261802e477da140ad02dffade6)
feat(algebraic_geometry/prime_spectrum): add lemma zero_locus_bUnion ([#5692](https://github.com/leanprover-community/mathlib/pull/#5692))

Add a simple extension of a lemma, to be able to work with `bUnion`, instead of only `Union`.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2021-01-16T11:02:21+00:00](https://github.com/leanprover-community/mathlib/commit/55d5564a31c1aea85f6baf9c64469c6eaee4ee03)
feat(ring_theory/jacobson): Generalize proofs about Jacobson rings and polynomials ([#5520](https://github.com/leanprover-community/mathlib/pull/#5520))

These changes are meant to make deriving the classical nullstellensatz from the generalized version about Jacobson rings much easier and much more direct.

`is_integral_localization_map_polynomial_quotient` already exists in the proof of a previous theorem, and this just pulls it out into an independent lemma.

`polynomial.quotient_mk_comp_C_is_integral_of_jacobson` and `mv_polynomial.quotient_mk_comp_C_is_integral_of_jacobson` are the two main new statements, most of the rest of the changes are just generalizations and reorganizations of the existing theorems.



Co-authored-by: Devon Tuma <dtumad@gmail.com>

### [2021-01-16T11:02:18+00:00](https://github.com/leanprover-community/mathlib/commit/05e7be9da02f21d3dde35be4c03a971f31610140)
feat(algebra/category/Module): direct limit is a colimit ([#4756](https://github.com/leanprover-community/mathlib/pull/#4756))



Co-authored-by: Bhavik Mehta <bhavikmehta8@gmail.com>

### [2021-01-16T09:11:40+00:00](https://github.com/leanprover-community/mathlib/commit/f03f5a960733b0886be42de8fa5959e365ba3204)
feat(ring_theory/algebra_tower): Restriction of adjoin ([#5767](https://github.com/leanprover-community/mathlib/pull/#5767))

Two technical lemmas about restricting `algebra.adjoin` within an `is_scalar_tower`.

### [2021-01-16T09:11:38+00:00](https://github.com/leanprover-community/mathlib/commit/e95988a30c17fc9ad45452ee38e1e2527bea338a)
feat(field_theory/adjoin): Inductively construct algebra homomorphism ([#5765](https://github.com/leanprover-community/mathlib/pull/#5765))

The lemma `alg_hom_mk_adjoin_splits` can be viewed as lifting an embedding F -> K to an embedding F(S) -> K.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-01-16T09:11:36+00:00](https://github.com/leanprover-community/mathlib/commit/9acd349663f328575507675eef069e1bb647782a)
feat(order/closure): closure operator from galois connection ([#5764](https://github.com/leanprover-community/mathlib/pull/#5764))

Construct a closure operator from a galois connection

### [2021-01-16T09:11:34+00:00](https://github.com/leanprover-community/mathlib/commit/51ffdd03d2ec1814eb96146e3c2d79d4cd3214ac)
refactor(ring_theory): change field instance on adjoin_root ([#5759](https://github.com/leanprover-community/mathlib/pull/#5759))

This makes some things faster.

[Discussion](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Slow.20instance/near/222839607)

### [2021-01-16T09:11:32+00:00](https://github.com/leanprover-community/mathlib/commit/dffb09adcbbdd5c4e78610d256a210229486650b)
feat(linear_algebra/{clifford,exterior,tensor,free}_algebra): provide canonical images from larger algebras into smaller ones ([#5745](https://github.com/leanprover-community/mathlib/pull/#5745))

This adds:

* `free_algebra.to_tensor`
* `tensor_algebra.to_exterior`
* `tensor_algebra.to_clifford`

Providing the injection in the other direction is more challenging, so is left as future work.

### [2021-01-16T09:11:30+00:00](https://github.com/leanprover-community/mathlib/commit/bea76514ab30cc513c0b301ec839706561358d9b)
feat(category_theory/monad): construct isomorphisms of algebras ([#5678](https://github.com/leanprover-community/mathlib/pull/#5678))

### [2021-01-16T03:57:08+00:00](https://github.com/leanprover-community/mathlib/commit/592edb6b9b0c4bd9a593aae023d75f3a6559d3c5)
chore(scripts): update nolints.txt ([#5763](https://github.com/leanprover-community/mathlib/pull/#5763))

I am happy to remove some nolints for you!

### [2021-01-16T03:57:02+00:00](https://github.com/leanprover-community/mathlib/commit/6351f01d7597075d2816f4d338e6a3eadaa537d4)
chore(algebra/group_with_zero): cleanup ([#5762](https://github.com/leanprover-community/mathlib/pull/#5762))

* remove `classical,` from proofs: we have `open_locale classical` anyway;
* add a lemma `a / (a * a) = a⁻¹`, use it to golf some proofs in other files.

### [2021-01-16T03:57:00+00:00](https://github.com/leanprover-community/mathlib/commit/798024a9cfe5a3cafe63f11dd944cee335655ada)
chore(data/real/*): rename `le_of_forall_epsilon_le` to `le_of_forall_pos_le_add` ([#5761](https://github.com/leanprover-community/mathlib/pull/#5761))

* generalize the `real` version to a `linear_ordered_add_comm_group`;
* rename `nnreal` and `ennreal` versions.

### [2021-01-16T00:47:54+00:00](https://github.com/leanprover-community/mathlib/commit/78493c9d8bbaa92bde3b1f0ad8ec5640ee6e7b68)
feat(data/nat/modeq): add missing lemmas for int and nat regarding dvd ([#5752](https://github.com/leanprover-community/mathlib/pull/#5752))

Adding lemmas `(a+b)/c=a/c+b/c` if `c` divides `a` for `a b c : nat` and `a b c : int` after discussion on Zulip https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/nat_add_div



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2021-01-16T00:47:52+00:00](https://github.com/leanprover-community/mathlib/commit/e4da493c6bbd1ce29efa1ba59211db64afe46482)
feat(group_theory/perm/sign): exists_pow_eq_of_is_cycle ([#5665](https://github.com/leanprover-community/mathlib/pull/#5665))

Slight generalization of `exists_gpow_eq_of_is_cycle` in the case of a cycle on a finite set.

Also move the following from `group_theory/perm/sign.lean` to `group_theory/perm/cycles.lean`:
- is_cycle
- is_cycle_swap
- is_cycle_inv
- exists_gpow_eq_of_is_cycle
- is_cycle_swap_mul_aux₁
- is_cycle_swap_mul_aux₂
- eq_swap_of_is_cycle_of_apply_apply_eq_self
- is_cycle_swap_mul
- sign_cycle





Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2021-01-15T21:05:36+00:00](https://github.com/leanprover-community/mathlib/commit/d43f202f2628f1693ee5a6c9a4c7b6c141bf330b)
feat(analysis/analytic/basic): `f (x + y) - p.partial_sum n y = O(∥y∥ⁿ)` ([#5756](https://github.com/leanprover-community/mathlib/pull/#5756))

### Lemmas about analytic functions

* add `has_fpower_series_on_ball.uniform_geometric_approx'`, a more
  precise version of `has_fpower_series_on_ball.uniform_geometric_approx`;
* add `has_fpower_series_at.is_O_sub_partial_sum_pow`, a version of
  the Taylor formula for an analytic function;

### Lemmas about `homeomorph` and topological groups

* add `simp` lemmas `homeomorph.coe_mul_left` and
  `homeomorph.mul_left_symm`;
* add `map_mul_left_nhds` and `map_mul_left_nhds_one`;
* add `homeomorph.to_equiv_injective` and `homeomorph.ext`;

### Lemmas about `is_O`/`is_o`

* add `simp` lemmas `asymptotics.is_O_with_map`,
  `asymptotics.is_O_map`, and `asymptotics.is_o_map`;
* add `asymptotics.is_o_norm_pow_norm_pow` and
  `asymptotics.is_o_norm_pow_id`;

### Misc changes

* rename `div_le_iff_of_nonneg_of_le` to `div_le_of_nonneg_of_le_mul`;
* add `continuous_linear_map.op_norm_le_of_nhds_zero`;
* golf some proofs.

### [2021-01-15T21:05:34+00:00](https://github.com/leanprover-community/mathlib/commit/bc5d5c9dcf4380c7c9c7c04a4b4584f1946e7954)
feat(data/matrix/notation,data/fin): head and append simp ([#5741](https://github.com/leanprover-community/mathlib/pull/#5741))

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-01-15T21:05:30+00:00](https://github.com/leanprover-community/mathlib/commit/0104948ee7e80d834243cf3dbdec2727c9f4084e)
feat(order/atoms): further facts about atoms, coatoms, and simple lattices ([#5493](https://github.com/leanprover-community/mathlib/pull/#5493))

Provides possible instances of `bounded_distrib_lattice`, `boolean_algebra`, `complete_lattice`, and `complete_boolean_algebra` on a simple lattice
Relates the `is_atom` and `is_coatom` conditions to `is_simple_lattice` structures on intervals
Shows that all three conditions are preserved by `order_iso`s
Adds more instances on `bool`, including `is_simple_lattice`



Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2021-01-15T17:48:45+00:00](https://github.com/leanprover-community/mathlib/commit/bc94d05242714263947fa485f3b64b911bb84faf)
fix(algebra/ordered_monoid): Ensure that `ordered_cancel_comm_monoid` can provide a `cancel_comm_monoid` instance ([#5713](https://github.com/leanprover-community/mathlib/pull/#5713))

### [2021-01-15T16:03:27+00:00](https://github.com/leanprover-community/mathlib/commit/8b4b941383dc41bbf5c0091dc5324a67dbe05123)
feat(data/mv_polynomial): stronger `degrees_X` for `nontrivial R` ([#5758](https://github.com/leanprover-community/mathlib/pull/#5758))

Also rename `degrees_X` to `degrees_X'` and mark `degrees_{zero,one}` with `simp`.

### [2021-01-15T14:40:09+00:00](https://github.com/leanprover-community/mathlib/commit/c347c75d85b8b1419a3d32c0c541a8bbece173e2)
feat(algebra/lie/basic): add a few `simp` lemmas ([#5757](https://github.com/leanprover-community/mathlib/pull/#5757))

### [2021-01-15T10:58:03+00:00](https://github.com/leanprover-community/mathlib/commit/ed0ae3e7eb3cf85730df203b9c543346f84a3f80)
feat(analysis/calculus/inverse): a map that has an invertible strict derivative at every point is an open map ([#5753](https://github.com/leanprover-community/mathlib/pull/#5753))

More generally, the same is true for a map that is a local homeomorphism near every point.

### [2021-01-15T10:58:01+00:00](https://github.com/leanprover-community/mathlib/commit/4c1d12f53e4ea9c4c9efef081418350cc6befa3d)
feat(data/complex/basic): Adding `im_eq_sub_conj` ([#5750](https://github.com/leanprover-community/mathlib/pull/#5750))

Adds `im_eq_sub_conj`, which I couldn't find in the library.

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2021-01-15T09:57:54+00:00](https://github.com/leanprover-community/mathlib/commit/94f45c748b8c887a1519641b6005cae7400a6746)
chore(linear_algebra/quadratic_form): Add missing simp lemmas about quadratic_form.polar ([#5748](https://github.com/leanprover-community/mathlib/pull/#5748))

### [2021-01-15T08:35:59+00:00](https://github.com/leanprover-community/mathlib/commit/09c23456a0c030160d9b9711db86cfb5b0c22b4c)
feat(category_theory/over): epis and monos in the over category ([#5684](https://github.com/leanprover-community/mathlib/pull/#5684))

### [2021-01-15T08:35:56+00:00](https://github.com/leanprover-community/mathlib/commit/395eb2babb98ab300642ea0a7e0c634c35b9edcf)
feat(category_theory): subterminal objects ([#5669](https://github.com/leanprover-community/mathlib/pull/#5669))

### [2021-01-15T08:35:54+00:00](https://github.com/leanprover-community/mathlib/commit/f8db86a213a0e074243911a4f457ed8e183db0cc)
feat(category_theory/limits): finite products from binary products ([#5516](https://github.com/leanprover-community/mathlib/pull/#5516))

Adds constructions for finite products from binary products and terminal object, and a preserves version

### [2021-01-15T05:41:26+00:00](https://github.com/leanprover-community/mathlib/commit/faf106a334877915ad562e74912b94a97c1a20b4)
refactor(data/real/{e,}nnreal): reuse generic lemmas ([#5751](https://github.com/leanprover-community/mathlib/pull/#5751))

* reuse `div_eq_mul_inv` and `one_div` from `div_inv_monoid`;
* reuse lemmas about `group_with_zero` instead of repeating them in the `nnreal` namespace;
* add `has_sum.div_const`.

### [2021-01-15T05:41:24+00:00](https://github.com/leanprover-community/mathlib/commit/931182ee18f24097abdd3b8410bf9bd63bdc8031)
chore(algebra/ordered_ring): add a few simp lemmas ([#5749](https://github.com/leanprover-community/mathlib/pull/#5749))

* fix misleading names `neg_lt_iff_add_nonneg` → `neg_lt_iff_pos_add`,
  `neg_lt_iff_add_nonneg'` → `neg_lt_iff_pos_add'`;
* add `@[simp]` to `abs_mul_abs_self` and `abs_mul_self`;
* add lemmas `neg_le_self_iff`, `neg_lt_self_iff`, `le_neg_self_iff`,
  `lt_neg_self_iff`, `abs_eq_self`, `abs_eq_neg_self`.

### [2021-01-15T02:19:33+00:00](https://github.com/leanprover-community/mathlib/commit/5d003d8597b27b0238580cc4f235f0c91f90c57e)
chore(scripts): update nolints.txt ([#5754](https://github.com/leanprover-community/mathlib/pull/#5754))

I am happy to remove some nolints for you!

### [2021-01-15T02:19:31+00:00](https://github.com/leanprover-community/mathlib/commit/7151fb70365eb45e55e12494cc2f308df17bf569)
chore(data/equiv/basic): equiv/perm_congr simp lemmas ([#5737](https://github.com/leanprover-community/mathlib/pull/#5737))

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-01-14T22:10:57+00:00](https://github.com/leanprover-community/mathlib/commit/64a1b1976c4365b551f19210912a3b3e9b823af5)
feat(data/equiv/basic): subsingleton equiv and perm ([#5736](https://github.com/leanprover-community/mathlib/pull/#5736))

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-01-14T22:10:54+00:00](https://github.com/leanprover-community/mathlib/commit/975f41a4df5aec87c458b669f77805038dca5fce)
feat(order): closure operators ([#5524](https://github.com/leanprover-community/mathlib/pull/#5524))

Adds closure operators on a partial order, as in [wikipedia](https://en.wikipedia.org/wiki/Closure_operator#Closure_operators_on_partially_ordered_sets). I made them bundled for no particular reason, I don't mind unbundling.

### [2021-01-14T19:06:18+00:00](https://github.com/leanprover-community/mathlib/commit/0817e7fe4f28ddb1e1dea3753a8c89499ac81116)
feat(measure_theory): absolute continuity of the integral ([#5743](https://github.com/leanprover-community/mathlib/pull/#5743))

### API changes:

#### `ennreal`s and `nnreal`s:

* `ennreal.mul_le_mul` and `ennreal.mul_lt_mul` are now `mono` lemmas;
* rename `ennreal.sub_lt_sub_self` to `ennreal.sub_lt_self`: there is no `-` in the RHS;
* new lemmas `enrneal.mul_div_le`, `nnreal.sub_add_eq_max`, and `nnreal.add_sub_eq_max`;
* add new lemma `ennreal.bsupr_add`, use in in the proof of `ennreal.Sup_add`;

#### Complete lattice

* new lemma `supr_lt_iff`;

#### Simple functions

* new lemmas `simple_func.exists_forall_le`, `simple_func.map_add`,
  `simple_func.sub_apply`;
* weaker typeclass assumptions in `simple_func.coe_sub`;
* `monotone_eapprox` is now a `mono` lemma;

#### Integration

* new lemmas `exists_simple_func_forall_lintegral_sub_lt_of_pos`,
  `exists_pos_set_lintegral_lt_of_measure_lt`,
  `tendsto_set_lintegral_zero`, and
  `has_finite_integral.tendsto_set_integral_nhds_zero`.

### [2021-01-14T19:06:16+00:00](https://github.com/leanprover-community/mathlib/commit/3b8cfdc905c663f3d99acac325c7dff1a0ce744c)
feat(linear_algebra/{exterior,tensor,free}_algebra): provide left-inverses for `algebra_map` and `ι` ([#5722](https://github.com/leanprover-community/mathlib/pull/#5722))

The strategy used for `algebra_map` here can't be used on `clifford_algebra` as the zero map does not satisfy `f m * f m = Q m`.

### [2021-01-14T15:25:47+00:00](https://github.com/leanprover-community/mathlib/commit/91b099eb445bfde9f6296d3eabd3d40790cf589f)
chore(data/equiv/fin): simp definitional lemmas ([#5740](https://github.com/leanprover-community/mathlib/pull/#5740))

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-01-14T15:25:44+00:00](https://github.com/leanprover-community/mathlib/commit/7e9094b1851be1a6e12e38eb0f99b660c6d5982a)
feat(control/equiv_functor): simp defn lemmas and injectivity ([#5739](https://github.com/leanprover-community/mathlib/pull/#5739))

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-01-14T15:25:42+00:00](https://github.com/leanprover-community/mathlib/commit/e3cc92e13f20a5ccb19754018ced1dbe907d1dc1)
chore(data/equiv/basic): swap symm and trans simp lemmas ([#5738](https://github.com/leanprover-community/mathlib/pull/#5738))

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-01-14T15:25:40+00:00](https://github.com/leanprover-community/mathlib/commit/de8b88f10d64cd91b57183c98974399d2995b69b)
chore(group_theory/perm/sign): trans and symm simp ([#5735](https://github.com/leanprover-community/mathlib/pull/#5735))

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-01-14T15:25:37+00:00](https://github.com/leanprover-community/mathlib/commit/82532c19c997372be18bc7547ec56bd270e2e9c9)
chore(data/set/basic): reuse some proofs about `boolean_algebra` ([#5728](https://github.com/leanprover-community/mathlib/pull/#5728))

API changes:

* merge `set.compl_compl` with `compl_compl'`;
* add `is_compl.compl_eq_iff`, `compl_eq_top`, and `compl_eq_bot`;
* add `simp` attribute to `compl_le_compl_iff_le`;
* fix misleading name in `compl_le_iff_compl_le`, add a missing
  variant;
* add `simp` attribute to `compl_empty_iff` and `compl_univ_iff`;
* add `set.subset.eventually_le`.

### [2021-01-14T11:59:28+00:00](https://github.com/leanprover-community/mathlib/commit/3b3f9a21ed9eb0a15f2f5d2946ca74e71983e8af)
refactor(measure_theory): review def&API of the `dirac` measure ([#5732](https://github.com/leanprover-community/mathlib/pull/#5732))

* use `set.indicator` instead of `⨆ a ∈ s, 1` in the definition.
* rename some theorems to `thm'`, add a version assuming
  `[measurable_singleton_class α]` but not
  `is_measurable s`/`measurable f` under the old name.
* rename some lemmas from `eventually` to `ae`.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-01-14T11:59:26+00:00](https://github.com/leanprover-community/mathlib/commit/8bc26d13ca93ddee0025b0174d1db454a458ae68)
feat(algebra/order): ne_iff_lt_iff_le
 
 ([#5731](https://github.com/leanprover-community/mathlib/pull/#5731))




Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2021-01-14T08:39:13+00:00](https://github.com/leanprover-community/mathlib/commit/159542ad3f7004d3ac954c23439309cd431e16e8)
chore(*): split some long lines ([#5742](https://github.com/leanprover-community/mathlib/pull/#5742))

### [2021-01-14T07:15:46+00:00](https://github.com/leanprover-community/mathlib/commit/1509c2950946374803b265830452880816e0f0c1)
chore(archive/100-theorems-list): 83_friendship_graphs ([#5727](https://github.com/leanprover-community/mathlib/pull/#5727))

Cleaned up some lint and put it in terms of the new `simple_graph.common_neighbors`.



Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>
Co-authored-by: Kyle Miller <kmill31415@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-01-14T03:38:41+00:00](https://github.com/leanprover-community/mathlib/commit/c8c6d2e79e1df2b1b578ed6071f1352fecabbc59)
feat(ci): Emit error messages in a way understood by github ([#5726](https://github.com/leanprover-community/mathlib/pull/#5726))

This uses the commands described [here](https://github.com/actions/toolkit/blob/master/docs/commands.md#log-level), for which [the implementation](https://github.com/actions/toolkit/blob/af821474235d3c5e1f49cee7c6cf636abb0874c4/packages/core/src/command.ts#L36-L94) provides a slightly clearer spec.
This means github now annotates broken lines, and highlights the error in red.

Originally I tried to implement this using "problem matchers", but these do not support multi-line error messages.

Supporting this in the linter is something that I'll leave for a follow-up PR.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-01-14T03:38:39+00:00](https://github.com/leanprover-community/mathlib/commit/d11d83ade8262efb696f259c49ccab37bfd7b689)
feat(measure_theory/lebesgue_measure): volume of a box in `ℝⁿ` ([#5635](https://github.com/leanprover-community/mathlib/pull/#5635))

### [2021-01-14T02:21:22+00:00](https://github.com/leanprover-community/mathlib/commit/c050452a6e768ff27263764ae3b2883d1e779042)
chore(scripts): update nolints.txt ([#5730](https://github.com/leanprover-community/mathlib/pull/#5730))

I am happy to remove some nolints for you!

### [2021-01-13T21:36:30+00:00](https://github.com/leanprover-community/mathlib/commit/71a3261c0ebeffa74e01aae7aa80d0a87877c3fc)
feat(logic/basic): exists_eq simp lemmas without and.comm ([#5694](https://github.com/leanprover-community/mathlib/pull/#5694))

### [2021-01-13T21:36:28+00:00](https://github.com/leanprover-community/mathlib/commit/6397e144f310c3202a1bd70f0d4f658816bc9d3f)
feat(data/nat/cast): add nat.bin_cast for faster casting ([#5664](https://github.com/leanprover-community/mathlib/pull/#5664))

[As suggested](https://github.com/leanprover-community/mathlib/pull/5462#discussion_r553226279) by @gebner.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-01-13T18:52:53+00:00](https://github.com/leanprover-community/mathlib/commit/69e9344cdc3fd5a4d2a6631d2bfc6830787ca993)
feat(data/set/finite): add lemma with iff statement about when finite sets can be subsets ([#5725](https://github.com/leanprover-community/mathlib/pull/#5725))

Part of [#5698](https://github.com/leanprover-community/mathlib/pull/#5698) in order to prove statements about strongly regular graphs.

Co-author: @shingtaklam1324 



Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>

### [2021-01-13T18:52:51+00:00](https://github.com/leanprover-community/mathlib/commit/0b9fbc4801981840d2ce66b32fb04db88f473741)
feat(combinatorics/simple_graph/basic): add definition of common neighbors and lemmas ([#5718](https://github.com/leanprover-community/mathlib/pull/#5718))

Part of [#5698](https://github.com/leanprover-community/mathlib/pull/#5698) in order to prove facts about strongly regular graphs



Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>

### [2021-01-13T18:52:49+00:00](https://github.com/leanprover-community/mathlib/commit/7ce4717486faf7452f90b6eef675bbff809ee98a)
refactor(computability/reduce): define many-one degrees without parameter ([#2630](https://github.com/leanprover-community/mathlib/pull/#2630))

The file `reduce.lean` defines many-one degrees for computable reductions.  At the moment every primcodable type `α` has a separate type of degrees `many_one_degree α`.  This is completely antithetical to the notion of degrees, which are introduced to classify problems up to many-one equivalence.

This PR defines a single `many_one_degree` type that lives in `Type 0`.  We use the `ulower` infrastructure from [#2574](https://github.com/leanprover-community/mathlib/pull/#2574) which shows that every type is computably equivalent to a subset of natural numbers.  The function `many_one_degree.of` which assigns to every set of a primcodable type a degree is still universe polymorphic.  In particular, we show that `of p = of q ↔ many_one_equiv p q`, etc. in maximal generality, where `p` and `q` are subsets of different types in different universes.

See previous discussion at [#1203](https://github.com/leanprover-community/mathlib/pull/#1203).

### [2021-01-13T16:08:10+00:00](https://github.com/leanprover-community/mathlib/commit/d533fbb5b09b5b152ebed5022bcf307064f78635)
fix(finsupp/pointwise): Relax the ring requirement to semiring ([#5723](https://github.com/leanprover-community/mathlib/pull/#5723))

### [2021-01-13T16:08:07+00:00](https://github.com/leanprover-community/mathlib/commit/340ddf83f3053b198dbcf3c7ef128c91bc181a92)
chore(scripts): don't assume cwd when running lint-style. ([#5721](https://github.com/leanprover-community/mathlib/pull/#5721))

Allows running the linter from any ol' directory.

### [2021-01-13T16:08:04+00:00](https://github.com/leanprover-community/mathlib/commit/d351cfe019d74ae2b6f8f1ead4fea843ced586e9)
feat(data/finset): sup_eq_bind ([#5717](https://github.com/leanprover-community/mathlib/pull/#5717))

`finset.sup s f` is equal to `finset.bind s f` when `f : α → finset β` is an indexed family of finite sets.  This is a proof of that with a couple supporting lemmas.  (There might be a more direct proof through the definitions of `sup` and `bind`, which are eventually in terms of `multiset.foldr`.)

I also moved `finset.mem_sup` to `multiset.mem_sup` and gave a new `finset.mem_sup` for indexed families of `finset`, where the old one was for indexed families of `multiset`.

### [2021-01-13T16:08:02+00:00](https://github.com/leanprover-community/mathlib/commit/3ac4bb24ad71db8cb9589ff3ae69e3056b6b9d09)
feat(combinatorics/simple_graph/basic): add definition of complement of simple graph ([#5697](https://github.com/leanprover-community/mathlib/pull/#5697))

Add definition of the complement of a simple graph. Part of branch [strongly_regular_graph](https://github.com/leanprover-community/mathlib/tree/strongly_regular_graph), with the goal of proving facts about strongly regular graphs.



Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>

### [2021-01-13T14:54:29+00:00](https://github.com/leanprover-community/mathlib/commit/c8574c893b8965bcb547f31ec13a8586ff26a460)
feat(analysis/special_functions/pow): add various lemmas about ennreal.rpow ([#5701](https://github.com/leanprover-community/mathlib/pull/#5701))






Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2021-01-13T10:19:12+00:00](https://github.com/leanprover-community/mathlib/commit/b6cca97ee4de7997d99d696acca766e79fe93835)
feat(linear_algebra/{exterior,tensor}_algebra): Prove that `ι` is injective ([#5712](https://github.com/leanprover-community/mathlib/pull/#5712))

This strategy can't be used on `clifford_algebra`, and the obvious guess of trying to define a `less_triv_sq_quadratic_form_ext` leads to a non-associative multiplication; so for now, we just handle these two cases.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-01-13T02:51:51+00:00](https://github.com/leanprover-community/mathlib/commit/b9b6b16cbc1198b69fd10266a43b053ff5f33488)
chore(scripts): update nolints.txt ([#5720](https://github.com/leanprover-community/mathlib/pull/#5720))

I am happy to remove some nolints for you!

### [2021-01-13T02:51:48+00:00](https://github.com/leanprover-community/mathlib/commit/5a532cabd5e936d3056d51f346537230c3989064)
fix(tactic/ring): fix loop in ring ([#5711](https://github.com/leanprover-community/mathlib/pull/#5711))

This occurs because when we name the atoms in `A * B = 2`, `A` is the
first and `B` is the second, and once we put it in horner form it ends up
as `B * A = 2`; but then when we go to rewrite it again `B` is named atom
number 1 and `A` is atom number 2, so we write it the other way around
and end up back at `A * B = 2`. The solution implemented here is to
retain the atom map across calls to `ring.eval` while simp is driving
it, so we end up rewriting it to `B * A = 2` in the first place but in the
second pass we still think `B` is the second atom so we stick with the
`B * A` order.

Fixes [#2672](https://github.com/leanprover-community/mathlib/pull/#2672)

### [2021-01-12T22:49:15+00:00](https://github.com/leanprover-community/mathlib/commit/fe5ec00eb0d6e28bf55f9e7e8ef43c401a131829)
doc(tactic/generalize_proofs): docs and test for generalize_proofs ([#5715](https://github.com/leanprover-community/mathlib/pull/#5715))

As requested on Zulip: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Extracting.20un-named.20proofs.20from.20the.20goal.20state/near/222472426

### [2021-01-12T22:49:13+00:00](https://github.com/leanprover-community/mathlib/commit/a7b800eccabf43db7b1868f6f8282e70fc68ab00)
doc(overview): small reorganization of algebra/number theory ([#5707](https://github.com/leanprover-community/mathlib/pull/#5707))

- adds Witt vectors
- adds perfection of a ring
- deduplicates Zariski topology
- moves some items to a new subsection "Number theory"





Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-01-12T19:31:47+00:00](https://github.com/leanprover-community/mathlib/commit/c1894c88822a7c5e899efa7d4d67f5a8e95b4047)
chore(analysis|measure_theory|topology): give tsum notation precedence 67 ([#5709](https://github.com/leanprover-community/mathlib/pull/#5709))

This saves us a lot of `()`
In particular, lean no longer thinks that `∑' i, f i = 37` is a tsum of propositions.

### [2021-01-12T19:31:44+00:00](https://github.com/leanprover-community/mathlib/commit/0e7a9214fc191241d2f20901207e8755c3cf1d0b)
feat(data/buffer/parser/basic): lemmas describing parsers ([#5460](https://github.com/leanprover-community/mathlib/pull/#5460))

### [2021-01-12T16:10:51+00:00](https://github.com/leanprover-community/mathlib/commit/1025908277406486447c957f15d8b208b792d175)
chore(topology/algebra/infinite_sum): speedup has_sum_sum ([#5710](https://github.com/leanprover-community/mathlib/pull/#5710))

this lemma was pretty slow, now it is pretty fast

### [2021-01-12T16:10:48+00:00](https://github.com/leanprover-community/mathlib/commit/73ba4602bd8b80f432ed52ddcb85838cca0b9f84)
feat(submonoid/basic): subsingleton and nontrivial instances for {add_,}submonoid ([#5690](https://github.com/leanprover-community/mathlib/pull/#5690))

### [2021-01-12T16:10:46+00:00](https://github.com/leanprover-community/mathlib/commit/e76fdb9e8c785d3914198ae486e7884b42974ad3)
docs(undergrad.yaml): analysis updates ([#5675](https://github.com/leanprover-community/mathlib/pull/#5675))

Updates to `undergrad.yaml` (including reverting some changes from [#5638](https://github.com/leanprover-community/mathlib/pull/#5638), after further discussion), and fix a docstring typo in `measure_theory.interval_integral`.

### [2021-01-12T16:10:44+00:00](https://github.com/leanprover-community/mathlib/commit/ce6a7eba547b29b15ede711090ad28c461a2fcfb)
feat(linear_algebra/multilinear_map): Add `range` and `map` ([#5658](https://github.com/leanprover-community/mathlib/pull/#5658))

Note that unlike `linear_map`, `range` cannot return a submodule, only a `sub_mul_action`.
We also can't guarantee closure under `smul` unless the map has at least one argument, as there is nothing requiring the multilinear map of no arguments to be zero.

### [2021-01-12T13:08:45+00:00](https://github.com/leanprover-community/mathlib/commit/3a3ec6c3120f8f0d10e376cf51871f26a3d5aaf8)
feat(measure_theory): each set has a measurable superset of the same measure ([#5688](https://github.com/leanprover-community/mathlib/pull/#5688))

* generalize `outer_measure.exists_is_measurable_superset_of_trim_eq_zero`
  to `outer_measure.exists_is_measurable_superset_eq_trim`;
* generalize `exists_is_measurable_superset_of_null` to
  `exists_is_measurable_superset`;
* define `to_measurable mu s` to be a measurable superset `t ⊇ s`
	with `μ t = μ s`;
* prove `countable_cover_nhds`: in a `second_countable_topology`, if
  `f` sends each point `x` to a neighborhood of `x`, then some
  countable subfamily of neighborhoods `f x` cover the whole space.
* `sigma_finite_of_countable` no longer assumes that all sets `s ∈ S`
  are measurable.

### [2021-01-12T13:08:41+00:00](https://github.com/leanprover-community/mathlib/commit/267106860ce03367e0e2670dbfea8565e56f69d5)
feat(data/set/intervals): add 2 Icc ssubset lemmas ([#5617](https://github.com/leanprover-community/mathlib/pull/#5617))

Add two strict subset lemmas for Icc, discussed in https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Icc_ssubset_Icc.

Co-authored-by: Damiano Testa

### [2021-01-12T08:26:45+00:00](https://github.com/leanprover-community/mathlib/commit/cd7a8a184d7c5635e30083eabc4baf5589c30b7a)
chore(category_theory/limits): move constructions folder ([#5681](https://github.com/leanprover-community/mathlib/pull/#5681))

As mentioned here: https://github.com/leanprover-community/mathlib/pull/5516#issuecomment-753450199

The linter is giving new errors, so I might as well fix them in this PR.

### [2021-01-12T08:26:43+00:00](https://github.com/leanprover-community/mathlib/commit/be75005ce12ca7e019dd16e4c6324c9ba647bd08)
fix(linear_algebra/tensor_product): Remove the priorities from the module structure ([#5667](https://github.com/leanprover-community/mathlib/pull/#5667))

These were added originally so that `semimodule'` was lower priority than `semimodule`, as the `semimodule'` instance took too long to resolve.
However, this happens automatically anyway, since the former appears before the latter - the simple existence of the `semimodule` shortcut instances was enough to solve the long typeclass-resolution paths, their priority was a red herring.

The only effect of these attributes was to cause these instances to not take priority over `add_comm_monoid.nat_semimodule`, which was neither intended nor desirable.

### [2021-01-12T07:23:33+00:00](https://github.com/leanprover-community/mathlib/commit/cd0d8c0224d861f100e9b5854082d09e85817e6f)
chore(category_theory/limits/over): generalise, golf and document over limits ([#5674](https://github.com/leanprover-community/mathlib/pull/#5674))

- Show that the forgetful functor `over X => C` creates colimits, generalising what was already there
- Golf the proofs using this new instance
- Add module doc

and duals of the above

### [2021-01-12T02:03:22+00:00](https://github.com/leanprover-community/mathlib/commit/9f9f85e86183fad68e80acdfd9551c8b93b24b9c)
chore(scripts): update nolints.txt ([#5705](https://github.com/leanprover-community/mathlib/pull/#5705))

I am happy to remove some nolints for you!

### [2021-01-11T21:22:16+00:00](https://github.com/leanprover-community/mathlib/commit/049f16a89fe3fcf7ea5b5b98a36e1a68b6707e97)
feat(measure_theory/pi): `ae_eq` lemmas about intervals in `Π i, α i` ([#5633](https://github.com/leanprover-community/mathlib/pull/#5633))

### [2021-01-11T10:10:45+00:00](https://github.com/leanprover-community/mathlib/commit/b537cc08ba7dc490c40e48145ab8a63d12941462)
feat(algebra/splitting_field): Restrict to splitting field ([#5562](https://github.com/leanprover-community/mathlib/pull/#5562))

Restrict an alg_hom or alg_equiv to an is_splitting_field.

### [2021-01-11T01:59:51+00:00](https://github.com/leanprover-community/mathlib/commit/c112ad03b9164a8f485be7ce3c1c87eacc2f51e1)
chore(scripts): update nolints.txt ([#5699](https://github.com/leanprover-community/mathlib/pull/#5699))

I am happy to remove some nolints for you!

### [2021-01-10T22:38:07+00:00](https://github.com/leanprover-community/mathlib/commit/08800bb7b8c2f29a5eea4ec539fec29bfb9a61f2)
feat(analysis/special/functions/trigonometric): complex trig and some even/odd lemmas ([#5404](https://github.com/leanprover-community/mathlib/pull/#5404))

Complex (and some real) trigonometry lemmas, parity propositions, and some field algebra.

### [2021-01-10T19:12:03+00:00](https://github.com/leanprover-community/mathlib/commit/cc6f039ffae734d113b3bcf81eae1581d0d60758)
feat(equiv|set|topology): various additions ([#5656](https://github.com/leanprover-community/mathlib/pull/#5656))

define sigma_compact_space
update module doc for topology/subset_properties
define shearing
some lemmas in set.basic, equiv.mul_add and topology.instances.ennreal



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-01-10T19:12:01+00:00](https://github.com/leanprover-community/mathlib/commit/62c1912ecd51c9d4d285b351fbd8080bdeec11fa)
chore(measure_theory/set_integral): use weaker assumptions here and there ([#5647](https://github.com/leanprover-community/mathlib/pull/#5647))

* use `ae_measurable f (μ.restrict s)` in more lemmas;
* introduce `measurable_at_filter` and use it.

### [2021-01-10T17:59:16+00:00](https://github.com/leanprover-community/mathlib/commit/3e7efd4ecd5d379932a89212eebd362beb01309e)
feat(field_theory/separable): Remove hypothesis in irreducible.separable ([#5687](https://github.com/leanprover-community/mathlib/pull/#5687))

An irreducible polynomial is nonzero, so this hypothesis is unnecessary.

### [2021-01-10T17:59:14+00:00](https://github.com/leanprover-community/mathlib/commit/b72811f200cb7b40574dc2b8b5a2f1e97f9657d3)
feat(order/complete_well_founded): characterise well-foundedness for complete lattices ([#5575](https://github.com/leanprover-community/mathlib/pull/#5575))



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Oliver Nash <github@olivernash.org>

### [2021-01-10T14:47:11+00:00](https://github.com/leanprover-community/mathlib/commit/0d9cb85eba2f9127949d76c3a1fd888193ac84fe)
chore(order/filter): a few more lemmas about `eventually` and set operations ([#5686](https://github.com/leanprover-community/mathlib/pull/#5686))

### [2021-01-10T14:47:09+00:00](https://github.com/leanprover-community/mathlib/commit/b0c35d12fa3e9b7a8eb18f885a9377ab3c63e92f)
chore(order/filter/basic): a few `simp` lemmas ([#5685](https://github.com/leanprover-community/mathlib/pull/#5685))

### Changes in `order/filter/basic`

* add `filter.inter_mem_sets_iff`;
* rename `filter.Inter_mem_sets` to `filter.bInter_mem_sets`, make it
  an `iff` `[simp]` lemma;
* add a version `filter.bInter_finset_mem_sets` with a protected alias
  `finset.Inter_mem_sets`;
* rename `filter.sInter_mem_sets_of_finite` to
  `filter.sInter_mem_sets`, make it an `iff` `[simp]` lemma;
* rename `filter.Inter_mem_sets_of_fintype` to
  `filter.Inter_mem_sets`, make it an `iff` `[simp]` lemma
* add `eventually` versions of the `*Inter_mem_sets` lemmas.

### New `@[mono]` attributes

* `set.union_subset_union` and `set.inter_subset_inter` instead of
  `monotone_union` and `monotone_inter`; `mono*` failed to make a
  progress with `s ∩ t ⊆ s' ∩ t'` goal.
* `set.image2_subset`
* `closure_mono`

### [2021-01-10T09:02:16+00:00](https://github.com/leanprover-community/mathlib/commit/1c4f2aece51bc4b7b09159b1e01da70c8b97b599)
feat(data/equiv/basic, logic/embedding): swap commutes with injective functions ([#5636](https://github.com/leanprover-community/mathlib/pull/#5636))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-01-10T01:57:53+00:00](https://github.com/leanprover-community/mathlib/commit/a28602a73d1241a3f153603ea330361b9a9525f3)
chore(scripts): update nolints.txt ([#5682](https://github.com/leanprover-community/mathlib/pull/#5682))

I am happy to remove some nolints for you!

### [2021-01-09T16:50:50+00:00](https://github.com/leanprover-community/mathlib/commit/f60c184e72f0afbc0262b86fe32c534409993fcc)
feat(algebra/lie/basic): Lie ideal operations are linear spans ([#5676](https://github.com/leanprover-community/mathlib/pull/#5676))

### [2021-01-09T15:06:06+00:00](https://github.com/leanprover-community/mathlib/commit/5faf34ccee6562091b5b2a0007fd317f1afacc78)
feat(measure_theory/lp_space): add more lemmas about snorm ([#5644](https://github.com/leanprover-community/mathlib/pull/#5644))

### [2021-01-09T12:23:44+00:00](https://github.com/leanprover-community/mathlib/commit/fdec90ad38772ce3153d9e0e3fda85cd16ee514d)
chore(data/set/lattice): add a few simp lemmas ([#5671](https://github.com/leanprover-community/mathlib/pull/#5671))

### [2021-01-09T12:23:42+00:00](https://github.com/leanprover-community/mathlib/commit/3166f4ef1dcd91ffa6ddf4de4f2b4c7262625286)
feat(topology/separation, topology/metric_space/basic): add lemmas on discrete subsets of a topological space ([#5523](https://github.com/leanprover-community/mathlib/pull/#5523))

These lemmas form part of a simplification of the proofs of [#5361](https://github.com/leanprover-community/mathlib/pull/#5361).



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-01-09T10:41:15+00:00](https://github.com/leanprover-community/mathlib/commit/a161256c94d5ec6e3997a22c1b02cb3f56b21d13)
feat(topology/algebra/ordered): prove `tendsto.Icc` for pi-types ([#5639](https://github.com/leanprover-community/mathlib/pull/#5639))

### [2021-01-09T03:54:42+00:00](https://github.com/leanprover-community/mathlib/commit/faf1a98353b6435f5cecf1c91387c9540a9003f6)
chore(scripts): update nolints.txt ([#5673](https://github.com/leanprover-community/mathlib/pull/#5673))

I am happy to remove some nolints for you!

### [2021-01-09T00:41:04+00:00](https://github.com/leanprover-community/mathlib/commit/1294500406f873a12b7ea5d0d80fd4135c8a1ef6)
feat(category_theory/limits): preserving pullbacks ([#5668](https://github.com/leanprover-community/mathlib/pull/#5668))

This touches multiple files but it's essentially the same thing as all my other PRs for preserving limits of special shapes - I can split it up if you'd like but hopefully this is alright?

### [2021-01-09T00:41:01+00:00](https://github.com/leanprover-community/mathlib/commit/ce34ae6ae612bc2cda06ec2d839a45f4808ec5ea)
chore(linear_algebra/alternating): golf a proof ([#5666](https://github.com/leanprover-community/mathlib/pull/#5666))

`sign_mul` seems to have been marked `simp` recently, making it not necessary to include in `simp` calls.

### [2021-01-09T00:40:59+00:00](https://github.com/leanprover-community/mathlib/commit/0cd70d093687a859557b0821ef1ff86b4f2028dc)
chore(algebra/group/hom): fix additive version of docstring ([#5660](https://github.com/leanprover-community/mathlib/pull/#5660))

### [2021-01-08T21:30:46+00:00](https://github.com/leanprover-community/mathlib/commit/2b5344f5f3015ce5d4bce115ac5564ac2ee29f60)
chore(analysis/special_functions/trigonometric): adding `@[pp_nodot]` to complex.log ([#5670](https://github.com/leanprover-community/mathlib/pull/#5670))

Added `@[pp_nodot]` to complex.log

### [2021-01-08T21:30:44+00:00](https://github.com/leanprover-community/mathlib/commit/aab5994eed2995b122ee56d68825a1b098d2fb06)
feat(data/finset/intervals, data/set/intervals/basic): intersection of finset.Ico, union of intervals for sets and finsets ([#5410](https://github.com/leanprover-community/mathlib/pull/#5410))

### [2021-01-08T17:23:08+00:00](https://github.com/leanprover-community/mathlib/commit/d935760d0bd4b275301a2c0f1d51cfbe61a67a3d)
feat(algebra/linear_ordered_comm_group_with_zero): Add linear_ordered_comm_monoid_with_zero and an instance for nat ([#5645](https://github.com/leanprover-community/mathlib/pull/#5645))

This generalizes a lot of statements about `linear_ordered_comm_group_with_zero` to `linear_ordered_comm_monoid_with_zero`.

### [2021-01-08T17:23:06+00:00](https://github.com/leanprover-community/mathlib/commit/2bde21d1216ff312aa7abc363071673dc4e35de7)
feat(geometry/manifold/times_cont_mdiff): API for checking `times_cont_mdiff` ([#5631](https://github.com/leanprover-community/mathlib/pull/#5631))

Two families of lemmas:
- to be `times_cont_mdiff`, it suffices to be `times_cont_mdiff` after postcomposition with any chart of the target
- projection notation to go from `times_cont_diff` (in a vector space) to `times_cont_mdiff`

### [2021-01-08T17:23:03+00:00](https://github.com/leanprover-community/mathlib/commit/bd9b03f6c9b59b3a6448871d3a722ee98cf36dab)
feat(category_theory/closed): Frobenius reciprocity of cartesian closed categories ([#5624](https://github.com/leanprover-community/mathlib/pull/#5624))

A re-do of [#4929](https://github.com/leanprover-community/mathlib/pull/#4929). 

Re-defines the exponential comparison morphism (now as a natural transformation rather than a morphism with a naturality prop), and defines the Frobenius reciprocity morphism for an adjoint. In the case where the functor has a left adjoint, gives a sufficient condition for it to be cartesian closed, and a sufficient condition for a functor whose left adjoint preserves binary products to be cartesian closed (but doesn't show the necessity of this).

- [x] depends on: [#5623](https://github.com/leanprover-community/mathlib/pull/#5623)

### [2021-01-08T16:06:43+00:00](https://github.com/leanprover-community/mathlib/commit/0d7ca9865ad6077b8691bb9ca9cc00bdf97a7ad0)
feat(measure_theory/measure_space): ae_measurable and measurable are equivalent for complete measures ([#5643](https://github.com/leanprover-community/mathlib/pull/#5643))

### [2021-01-08T14:20:37+00:00](https://github.com/leanprover-community/mathlib/commit/9f066f1fa8c66142f02eb43dbbe2dfe05f61ff73)
refactor(linear_algebra/alternating): Use unapplied maps when possible ([#5648](https://github.com/leanprover-community/mathlib/pull/#5648))

Notably, this removes the need for a proof of `map_add` and `map_smul` in `def alternatization`, as the result is now already bundled with these proofs.

This also:

* Replaces `equiv.perm.sign p` with `p.sign` for brevity
* Makes `linear_map.comp_alternating_map` an `add_monoid_hom`

### [2021-01-08T09:47:21+00:00](https://github.com/leanprover-community/mathlib/commit/795d5ab684ee8ba343b98287900a6bb82b94081a)
chore(algebra/ordered_monoid): rename lemmas ([#5657](https://github.com/leanprover-community/mathlib/pull/#5657))

I wanted to add the alias `pos_iff_ne_zero` for `zero_lt_iff_ne_zero`, but then I saw a note already in the library to do this renaming. So I went ahead.

`le_zero_iff_eq` -> `nonpos_iff_eq_zero`
`zero_lt_iff_ne_zero` -> `pos_iff_ne_zero`
`le_one_iff_eq` -> `le_one_iff_eq_one`
`measure.le_zero_iff_eq_zero'` -> `measure.nonpos_iff_eq_zero'`

There were various specific types that had their own custom `pos_iff_ne_zero`-lemma, which caused nameclashes. Therefore:

* remove `nat.pos_iff_ne_zero`
* Prove that `cardinal` forms a `canonically_ordered_semiring`, remove various special case lemmas
* There were lemmas `cardinal.le_add_[left|right]`. Generalized them to arbitrary canonically_ordered_monoids and renamed them to `self_le_add_[left|right]` (to avoid name clashes)
* I did not provide a canonically_ordered_monoid class for ordinal, since that requires quite some work (it's true, right?)
* `protect` various lemmas in `cardinal` and `ordinal` to avoid name clashes.

### [2021-01-08T07:46:54+00:00](https://github.com/leanprover-community/mathlib/commit/611bc8657ebfc2ebca988ae2fd0886b5f053acaf)
feat(measure_theory/borel_space): locally finite measure is sigma finite ([#5634](https://github.com/leanprover-community/mathlib/pull/#5634))

I forgot to add this to [#5604](https://github.com/leanprover-community/mathlib/pull/#5604)

### [2021-01-08T05:13:37+00:00](https://github.com/leanprover-community/mathlib/commit/efdcab1a20c7927372ef15e227990171db805eaa)
refactor(algebra/module/basic): Clean up all the nat/int semimodule definitions ([#5654](https://github.com/leanprover-community/mathlib/pull/#5654))

These were named inconsistently, and lots of proof was duplicated.

The name changes are largely making the API for `nsmul` consistent with the one for `gsmul`:
* For `ℕ`:
  * Replaces `nat.smul_def : n • x = n •ℕ x` with `nsmul_def : n •ℕ x = n • x`
  * Renames `semimodule.nsmul_eq_smul : n •ℕ b = (n : R) • b` to `nsmul_eq_smul_cast`
  * Removes `semimodule.smul_eq_smul : n • b = (n : R) • b`
  * Adds `nsmul_eq_smul : n •ℕ b = n • b` (this is different from `nsmul_def` as described in the docstring)
  * Renames the instances to be named more consistently and all live under `add_comm_monoid.nat_*`
* For `ℤ`:
  * Renames `gsmul_eq_smul : n •ℤ x = n • x` to `gsmul_def`
  * Renames `module.gsmul_eq_smul : n •ℤ x = n • x` to `gsmul_eq_smul`
  * Renames `module.gsmul_eq_smul_cast` to `gsmul_eq_smul_cast`
  * Renames the instances to be named more consistently and all live under `add_comm_group.int_*`

### [2021-01-08T03:36:08+00:00](https://github.com/leanprover-community/mathlib/commit/d89464d231467fb72838b4c00460146b80c8c523)
feat(topology/algebra): add additive/multiplicative instances ([#5662](https://github.com/leanprover-community/mathlib/pull/#5662))

### [2021-01-08T02:05:16+00:00](https://github.com/leanprover-community/mathlib/commit/7500b242f24f385662c5315e68b818d9de870578)
chore(scripts): update nolints.txt ([#5661](https://github.com/leanprover-community/mathlib/pull/#5661))

I am happy to remove some nolints for you!

### [2021-01-08T02:05:14+00:00](https://github.com/leanprover-community/mathlib/commit/4c3c8d780c9939223c71eb8027c4fcdedcde705b)
feat(measure_theory): some additions ([#5653](https://github.com/leanprover-community/mathlib/pull/#5653))

rename `exists_is_measurable_superset_of_measure_eq_zero` -> `exists_is_measurable_superset_of_null`
make `measure.prod` and `measure.pi` irreducible

### [2021-01-07T23:12:07+00:00](https://github.com/leanprover-community/mathlib/commit/33a86cfff12d7f200d0010cd03b95e9b69a6c1a5)
chore(data/list/basic): tag mmap(') with simp ([#5443](https://github.com/leanprover-community/mathlib/pull/#5443))

### [2021-01-07T21:43:48+00:00](https://github.com/leanprover-community/mathlib/commit/18ba69b75825ae49691b8264d4fd2e1b58671b1a)
feat(category_theory/sites): category of sheaves on the trivial topology  ([#5651](https://github.com/leanprover-community/mathlib/pull/#5651))

Shows that the category of sheaves on the trivial topology is just the category of presheaves.

### [2021-01-07T21:43:46+00:00](https://github.com/leanprover-community/mathlib/commit/3c5d5c516884b23fa8a02b60086d7d18502ac1bf)
feat(category_theory/monad): reflector preserves terminal object ([#5649](https://github.com/leanprover-community/mathlib/pull/#5649))

### [2021-01-07T21:43:44+00:00](https://github.com/leanprover-community/mathlib/commit/a30c39e075ca1056967f689ec9f4c1740f75d7cd)
feat(measure_theory/borel_space): a compact set has finite measure ([#5628](https://github.com/leanprover-community/mathlib/pull/#5628))

### [2021-01-07T21:43:41+00:00](https://github.com/leanprover-community/mathlib/commit/4da831347b04c89c44c79bfdac9a20339373011f)
feat(category_theory/closed): golf definition and proofs ([#5623](https://github.com/leanprover-community/mathlib/pull/#5623))

Using the new mates framework, simplify the definition of `pre` and shorten proofs about it. 
To be more specific,

- `pre` is now explicitly a natural transformation, rather than indexed morphisms with a naturality property
- The new definition of `pre` means things like `pre_map` which I complained about before are easier to prove, and `pre_post_comm` is automatic
- There are now more lemmas relating `pre` to `coev`, `ev` and `uncurry`: `uncurry_pre` in particular was a hole in the API.
- `internal_hom` has a shorter construction. In particular I changed the type to `Cᵒᵖ ⥤ C ⥤ C`, which I think is better since the usual external hom functor is given as `Cᵒᵖ ⥤ C ⥤ Type*`, so this is consistent with that. 

In a subsequent PR I'll do the same for `exp_comparison`, but that's a bigger change with improved API so they're separate for now.

### [2021-01-07T21:43:39+00:00](https://github.com/leanprover-community/mathlib/commit/fdbcab6a8d96eb3ad598787cc61a12f4f4d3bd23)
feat(category_theory/limits): the product comparison natural transformation ([#5621](https://github.com/leanprover-community/mathlib/pull/#5621))

### [2021-01-07T19:12:12+00:00](https://github.com/leanprover-community/mathlib/commit/2894260bbbe7b77363ef59259a011515e5ddc90a)
feat(group_theory): add lemmas on solvability ([#5646](https://github.com/leanprover-community/mathlib/pull/#5646))

Proves some basic lemmas about solvable groups: the subgroup of a solvable group is solvable, a quotient of a solvable group is solvable.

### [2021-01-07T13:09:27+00:00](https://github.com/leanprover-community/mathlib/commit/66e02b35bc74304e21920b6dcf706d0118054244)
feat(docs/100): Add Masdeu's formalisation of Euler's Summation to 100.yaml ([#5655](https://github.com/leanprover-community/mathlib/pull/#5655))

### [2021-01-07T13:09:25+00:00](https://github.com/leanprover-community/mathlib/commit/7bc2e9efa504fd256b1fc033adee602e8264596a)
feat(ring_theory/polynomial/cyclotomic): add cyclotomic.irreducible ([#5642](https://github.com/leanprover-community/mathlib/pull/#5642))

I proved irreducibility of cyclotomic polynomials, showing that `cyclotomic n Z` is the minimal polynomial of any primitive root of unity.

### [2021-01-07T13:09:23+00:00](https://github.com/leanprover-community/mathlib/commit/b9da50ad5f395fa0ec30097c8649d258909c08d1)
feat(ring_theory/*): Various lemmas used to prove classical nullstellensatz ([#5632](https://github.com/leanprover-community/mathlib/pull/#5632))

### [2021-01-07T13:09:21+00:00](https://github.com/leanprover-community/mathlib/commit/3aea2845517a73ed01799664dd223bfbadaf8ff3)
feat(analysis/normed_space): affine map with findim domain is continuous ([#5627](https://github.com/leanprover-community/mathlib/pull/#5627))

### [2021-01-07T13:09:18+00:00](https://github.com/leanprover-community/mathlib/commit/833e9a047a4b12958e72dea78d209ab49f27c99f)
chore(analysis/calculus): add `of_mem_nhds` versions of 2 lemmas ([#5626](https://github.com/leanprover-community/mathlib/pull/#5626))

### [2021-01-07T13:09:16+00:00](https://github.com/leanprover-community/mathlib/commit/e14d5eba0dd2c604208d8f70003b6e4765cc585b)
feat(category_theory/limits): prod map is iso if components are ([#5620](https://github.com/leanprover-community/mathlib/pull/#5620))

Show that if `f` and `g` are iso, then `prod.map f g` is an iso, and the dual.

### [2021-01-07T13:09:14+00:00](https://github.com/leanprover-community/mathlib/commit/87ef7afffdc9e665779a739fb54178e36ce3a0b7)
feat(linear_algebra/pi_tensor_product): define the tensor product of an indexed family of semimodules ([#5311](https://github.com/leanprover-community/mathlib/pull/#5311))

This PR defines the tensor product of an indexed family `s : ι → Type*` of semimodules over commutative semirings. We denote this space by `⨂[R] i, s i` and define it as `free_add_monoid (R × Π i, s i)` quotiented by the appropriate equivalence relation. The treatment follows very closely that of the binary tensor product in `linear_algebra/tensor_product.lean`.



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2021-01-07T10:05:38+00:00](https://github.com/leanprover-community/mathlib/commit/47c6081284c1dfbc2db530bab5a6caeff677dfff)
chore(group_theory/perm/sign): remove classical for sign congr simp lemmas ([#5622](https://github.com/leanprover-community/mathlib/pull/#5622))

Previously, some lemmas about how `perm.sign` simplifies across various congrs of permutations assumed `classical`, which prevented them from being applied by the simplifier. This makes the `decidable_eq` assumptions explicit.

### [2021-01-07T10:05:35+00:00](https://github.com/leanprover-community/mathlib/commit/9dd1496adac9f0be0adb0f8b07f68d58e8e9fd20)
chore(group_theory/perm/basic): Add some missing simp lemmas ([#5614](https://github.com/leanprover-community/mathlib/pull/#5614))

`simp` can't find the appropriate `equiv` lemmas as they are about `refl` not `1`, even though those are defeq.

### [2021-01-07T10:05:33+00:00](https://github.com/leanprover-community/mathlib/commit/24572870b9eff53908c02b89a3ba6e0c316fc5cf)
feat(algebra/subalgebra): Restrict injective algebra homomorphism to algebra isomorphism ([#5560](https://github.com/leanprover-community/mathlib/pull/#5560))

The domain of an injective algebra homomorphism is isomorphic to its range.

### [2021-01-07T10:05:31+00:00](https://github.com/leanprover-community/mathlib/commit/2c8175fa8be29cdc5972026d89c1d0f6e4ee2ba9)
feat(algebra/algebra/ordered): ordered algebras ([#4683](https://github.com/leanprover-community/mathlib/pull/#4683))

An ordered algebra is an ordered semiring, which is an algebra over an ordered commutative semiring,
for which scalar multiplication is "compatible" with the two orders.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2021-01-07T08:51:54+00:00](https://github.com/leanprover-community/mathlib/commit/95c70870d2e77bea6f74b23e339734b860375877)
chore(docs/100.yaml): Freek No. 15 ([#5638](https://github.com/leanprover-community/mathlib/pull/#5638))

I've updated docs/100.yaml to reflect the fact that both FTC-1 and FTC-2 have been added to mathlib.

### [2021-01-07T05:47:19+00:00](https://github.com/leanprover-community/mathlib/commit/a32e223607a2480bc6ed48d9db0506fa9589be44)
refactor(analysis/special_functions/trigonometric): redefine arcsin and arctan ([#5300](https://github.com/leanprover-community/mathlib/pull/#5300))

Redefine `arcsin` and `arctan` using `order_iso`, and prove that both of them are infinitely smooth.

### [2021-01-07T02:28:43+00:00](https://github.com/leanprover-community/mathlib/commit/3f3596125040d4fca6776621bfcb622030fae203)
chore(scripts): update nolints.txt ([#5652](https://github.com/leanprover-community/mathlib/pull/#5652))

I am happy to remove some nolints for you!

### [2021-01-06T23:23:44+00:00](https://github.com/leanprover-community/mathlib/commit/f668be057286dfbeff4450eb94c2c18c819b2976)
feat(data/list/zip): parameterize zip_append more generally ([#5650](https://github.com/leanprover-community/mathlib/pull/#5650))

zip_append should only require that each pair of lists is of the same type

### [2021-01-06T16:21:02+00:00](https://github.com/leanprover-community/mathlib/commit/f4128dc427f8c23b280bbc9b1f44fb8cd519fc7a)
chore(ring_theory/ideal/basic): Make an argument to mul_mem_{left,right} explicit ([#5611](https://github.com/leanprover-community/mathlib/pull/#5611))

Before this change, the lemmas with result `a * b ∈ I` did not have enough explicit arguments to determine both `a` and `b`, such as `I.mul_mem_left hb`.

This resulted in callers using `show`, `@`, or sometimes ignoring the API and using `smul_mem` which does have appropriate argument explicitness. These callers have been cleaned up accordingly.

### [2021-01-06T16:21:00+00:00](https://github.com/leanprover-community/mathlib/commit/91fcb4803c16de59c487e4cdec9fc6a703c8e207)
feat(linear_algebra/tensor_product,algebra/module/linear_map): Made tmul_smul and map_smul_of_tower work for int over semirings ([#5430](https://github.com/leanprover-community/mathlib/pull/#5430))

With this change, ` ∀ (f : M →ₗ[S] M₂) (z : int) (x : M), f (z • x) = z • f x` can be proved with `linear_map.map_smul_of_tower` even when `S` is a semiring, and `z • (m ⊗ₜ n : M ⊗[S] N) = (r • m) ⊗ₜ n` can be proved with `tmul_smul`.

### [2021-01-06T13:54:26+00:00](https://github.com/leanprover-community/mathlib/commit/eeb194dc9bc27dd1f116038185d61f632172df91)
feat(analysis/normed_space/inner_product): facts about the span of a single vector, mostly in inner product spaces ([#5589](https://github.com/leanprover-community/mathlib/pull/#5589))

### [2021-01-06T11:04:14+00:00](https://github.com/leanprover-community/mathlib/commit/186ad763a117e745fc7ded99211ace4b2c71ebad)
feat(ring_theory/finiteness): add finitely presented algebra ([#5407](https://github.com/leanprover-community/mathlib/pull/#5407))

This PR contains the definition of a finitely presented algebra and some very basic results. A lot of other fundamental results are missing (stability under composition, equivalence with finite type for noetherian rings ecc): I am ready to work on them, but I wanted some feedback. Feel free to convert to WIP if you think it's better to wait.

### [2021-01-06T11:04:12+00:00](https://github.com/leanprover-community/mathlib/commit/35ff0434c4fc3b95dea1579ba170546d224da0ca)
feat(ring_theory/fractional_ideal): move inv to dedekind_domain ([#5053](https://github.com/leanprover-community/mathlib/pull/#5053))

Remove all instances of `inv` and I^{-1}. The notation (1 / I) is the one used for the old I^{-1}.



Co-authored-by: faenuccio <65080144+faenuccio@users.noreply.github.com>
Co-authored-by: Filippo A. E. Nuccio <65080144+faenuccio@users.noreply.github.com>

### [2021-01-06T11:04:08+00:00](https://github.com/leanprover-community/mathlib/commit/1db70a8954a220f41c449e20c36f24ab7dcf619b)
feat(computability/regular_expressions): define regular expressions ([#5036](https://github.com/leanprover-community/mathlib/pull/#5036))

Very basic definitions for regular expressions



Co-authored-by: foxthomson <11833933+foxthomson@users.noreply.github.com>

### [2021-01-06T11:04:04+00:00](https://github.com/leanprover-community/mathlib/commit/137a6e0f6e30fc1e6d940326d313c07fe95a3188)
feat(tactic/rewrite_search): Automatically searching for chains of rewrites ([#4841](https://github.com/leanprover-community/mathlib/pull/#4841))

This pull request is based on a branch originally developed by @semorrison , @khoek , and @jcommelin . The idea of rewrite_search is a tactic that will search through chains of potential rewrites to prove the goal, when the goal is an equality or iff statement. There are three key components: `discovery.lean` finds a bunch of rules that can be used to generate rewrites, `search.lean` runs a breadth-first-search algorithm on the two sides of the quality to find a path that connects them, and `explain.lean` generates Lean code from the resulting proof, so that you can replace the call to `rewrite_search` with the explicit steps for it.

I removed some functionality from the rewrite_search branch and simplified the data structures somewhat in order to get this pull request small enough to be reviewed. If there is functionality from that branch that people particularly wanted, let me know and I can either include it in this PR or in a subsequent one. In particular, most of the configuration options are omitted.

For data structures, the whole `table` data structure is gone, replaced by a `buffer` and `rb_map` for efficient lookup. Write access to the buffer is also append-only for efficiency. This seems to be a lot faster, although I haven't created specific performance benchmarks.

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: Keeley Hoek <keeley@hoek.io>

### [2021-01-06T08:30:32+00:00](https://github.com/leanprover-community/mathlib/commit/062f24434fe613a69c8a29739fd9f7cbd72f53f1)
feat(category_theory/monad): generalise limits lemma ([#5630](https://github.com/leanprover-community/mathlib/pull/#5630))

A slight generalisation of a lemma already there.

### [2021-01-06T08:30:30+00:00](https://github.com/leanprover-community/mathlib/commit/56ed5d786a042e70288093d3e3115fd38b02e00c)
feat(category_theory/adjunction): mates ([#5599](https://github.com/leanprover-community/mathlib/pull/#5599))

Adds some results on the calculus of mates.

### [2021-01-06T08:30:28+00:00](https://github.com/leanprover-community/mathlib/commit/5f98a9617e4b634cb60c15698087f92557e47fa6)
feat(group_theory): add definition of solvable group ([#5565](https://github.com/leanprover-community/mathlib/pull/#5565))

Defines solvable groups using the definition that a group is solvable if its nth commutator is eventually trivial. Defines the nth commutator of a group and provides some lemmas for working with it. More facts about solvable groups will come in future PRs.

### [2021-01-06T08:30:25+00:00](https://github.com/leanprover-community/mathlib/commit/648ff2168c7e00bf53bf99485f9d645ed117444c)
feat(algebra/lie/basic): the lattice of Lie submodules of a Noetherian Lie module is well-founded ([#5557](https://github.com/leanprover-community/mathlib/pull/#5557))

The key result is: `well_founded_of_noetherian`

### [2021-01-06T05:36:16+00:00](https://github.com/leanprover-community/mathlib/commit/38921554030e9c0bc4609150b0f9761270fc18b0)
fix(algebra/group/pi): use correct `div`/`sub` ([#5625](https://github.com/leanprover-community/mathlib/pull/#5625))

Without an explicit `div := has_div.div`, `rw [pi.sub_apply]` fails sometimes.

### [2021-01-06T05:36:13+00:00](https://github.com/leanprover-community/mathlib/commit/3d6ba9a7d523da7a13a521404fd668165c27a121)
feat(data/list/chain): chain pmap ([#5438](https://github.com/leanprover-community/mathlib/pull/#5438))

Two chain pmap lemmas

### [2021-01-06T02:30:13+00:00](https://github.com/leanprover-community/mathlib/commit/de7391220be1dc47ab7c4ff23902ce770d43e59d)
chore(scripts): update nolints.txt ([#5629](https://github.com/leanprover-community/mathlib/pull/#5629))

I am happy to remove some nolints for you!

### [2021-01-06T02:30:10+00:00](https://github.com/leanprover-community/mathlib/commit/19d2ea761959e8b38f067cd284549b97c3a52829)
feat(order/atoms): Pairwise coprime ([#5596](https://github.com/leanprover-community/mathlib/pull/#5596))

Don't really know what to call it, but it's the atom-level version of the statement that maximal ideals are pairwise coprime.

### [2021-01-06T02:30:08+00:00](https://github.com/leanprover-community/mathlib/commit/9fdd703b856389864d81105ec1b926f58e708763)
feat(linear_algebra/affine_space/midpoint): a few more lemmas ([#5571](https://github.com/leanprover-community/mathlib/pull/#5571))

* simplify expressions like `midpoint R p₁ p₂ -ᵥ p₁` and
  `p₂ - midpoint R p₁ p₂`;
* fix a typo in `data/set/intervals/surj_on`.

### [2021-01-06T02:30:06+00:00](https://github.com/leanprover-community/mathlib/commit/731c26f2afc8934fcc8588b79d90cf7d95da71a1)
refactor(*): swap sides of `iff` in `{rel_embedding,order_embedding}.map_rel_iff` ([#5556](https://github.com/leanprover-community/mathlib/pull/#5556))

This way RHS is "simpler" than LHS.
Other API changes (in `rel_embedding` and/or `ord_embedding` and/or `rel_iso` and/or `ord_iso` namespaces):

* drop `map_le_iff`, rename `apply_le_apply` to `le_iff_le`;
* drop `map_lt_iff`, rename `apply_lt_apply` to `lt_iff_lt`;
* rename `apply_eq_apply` to `eq_iff_eq`.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-01-06T00:02:09+00:00](https://github.com/leanprover-community/mathlib/commit/8f424fca8dddfb622e134f15237d7ee5ce3c6771)
chore(measure_theory/pi): a few more lemmas ([#5604](https://github.com/leanprover-community/mathlib/pull/#5604))

Also prove that a locally finite measure in a `second_countable_topology` is `sigma_finite`.

### [2021-01-05T20:33:53+00:00](https://github.com/leanprover-community/mathlib/commit/00d86176e5af0b019655c52e66fd4eed231be945)
feat(analysis/normed_space/inner_product): inner product is continuous, norm squared is smooth ([#5600](https://github.com/leanprover-community/mathlib/pull/#5600))

### [2021-01-05T20:33:51+00:00](https://github.com/leanprover-community/mathlib/commit/0c8fffe96d9cceb22739d00d59d4809bedf236c5)
fix(algebra/group/prod): fixes for [#5563](https://github.com/leanprover-community/mathlib/pull/#5563) ([#5577](https://github.com/leanprover-community/mathlib/pull/#5577))

* rename `prod.units` to `mul_equiv.prod_units`;
* rewrite it with better definitional equalities;
* now `@[to_additive]` works: fixes [#5566](https://github.com/leanprover-community/mathlib/pull/#5566);
* make `M` and `N` implicit in `mul_equiv.prod_comm`

### [2021-01-05T20:33:49+00:00](https://github.com/leanprover-community/mathlib/commit/7cf0a29db556e17e1d232ccb96703651d5111907)
feat(analysis/normed_space/inner_product): consequences of characterization of orthogonal projection ([#5558](https://github.com/leanprover-community/mathlib/pull/#5558))

Reverse order of equality in the lemma `eq_orthogonal_projection_of_mem_of_inner_eq_zero`.  Add some variants.  Also add three consequences:
- the orthogonal projection onto `K` of an element of `K` is itself
- the orthogonal projection onto `K` of an element of `Kᗮ` is zero
- for a submodule `K` of an inner product space, the sum of the orthogonal projections onto `K` and `Kᗮ` is the identity.

Reverse order of `iff` in the lemma `submodule.eq_top_iff_orthogonal_eq_bot`, and rename to `submodule.orthogonal_eq_bot_iff`.

### [2021-01-05T20:33:46+00:00](https://github.com/leanprover-community/mathlib/commit/82ec0ccb60eb889bd5e81a3a094edb91c85a261d)
feat(ring_theory/roots_of_unity): degree of minimal polynomial ([#5475](https://github.com/leanprover-community/mathlib/pull/#5475))

This is the penultimate PR about roots of unity and cyclotomic polynomials: I prove that the degree of the minimal polynomial of a primitive `n`th root of unity is at least `nat.totient n`.

It's easy to prove now that it is actually `nat.totient n`, and indeed that the minimal polynomial is the cyclotomic polynomial (that it is hence irreducible). I decided to split the PR like this because I feel that it's better to put the remaining results in `ring_theory/polynomials/cyclotomic`.

### [2021-01-05T18:04:53+00:00](https://github.com/leanprover-community/mathlib/commit/d1b2d6eb6d5934c086393014ce93258ff0fe5090)
fix(linear_algebra/tensor_algebra): Correct the precedence of `⊗ₜ[R]` ([#5619](https://github.com/leanprover-community/mathlib/pull/#5619))

Previously, `a ⊗ₜ[R] b = c` was interpreted as `a ⊗ₜ[R] (b = c)` which was nonsense because `eq` is not in `Type`.
I'm not sure whether `:0` is necessary, but it seems harmless.
The `:100` is the crucial bugfix here.

### [2021-01-05T18:04:51+00:00](https://github.com/leanprover-community/mathlib/commit/01e17a9d8e48a9b1b36fd4f1d26922bf687d0193)
feat(scripts/lint-style.sh): check that Lean files don't have executable bit ([#5606](https://github.com/leanprover-community/mathlib/pull/#5606))

### [2021-01-05T16:18:37+00:00](https://github.com/leanprover-community/mathlib/commit/a6633e5b30eee3834b79115f1183607f4a0048f7)
feat(analysis/normed_space/inner_product): new versions of Cauchy-Schwarz equality case ([#5586](https://github.com/leanprover-community/mathlib/pull/#5586))

The existing version of the Cauchy-Schwarz equality case characterizes the pairs `x`, `y` with `abs ⟪x, y⟫ = ∥x∥ * ∥y∥`.  This PR provides a characterization, with converse, of pairs satisfying `⟪x, y⟫ = ∥x∥ * ∥y∥`, and some consequences.

### [2021-01-05T14:50:35+00:00](https://github.com/leanprover-community/mathlib/commit/1de608d814cbc4e34889e84e68a4227d0b18b89d)
refactor(measure_theory): integrate almost everywhere measurable functions ([#5510](https://github.com/leanprover-community/mathlib/pull/#5510))

Currently, the Bochner integral is only defined for measurable functions. This means that, if `f` is continuous on an interval `[a, b]`, to be able to make sense of `∫ x in a..b, f`, one has to add a global measurability assumption, which is very much unnatural.

This PR redefines the Bochner integral so that it makes sense for functions that are almost everywhere measurable, i.e., they coincide almost everywhere with a measurable function (This is equivalent to measurability for the completed measure, but we don't state or prove this as it is not needed to develop the theory).



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-01-05T10:34:59+00:00](https://github.com/leanprover-community/mathlib/commit/8f9f5ca0a709d712b85b2626c94e6d701c6d0f56)
chore(linear_algebra/alternating): Use `have` instead of `simp only` ([#5618](https://github.com/leanprover-community/mathlib/pull/#5618))

This makes the proof easier to read and less fragile to lemma changes.

### [2021-01-05T06:08:53+00:00](https://github.com/leanprover-community/mathlib/commit/78dc23ff84199e8aa300e41be50e2df40fa722dd)
chore(scripts/*): rename files of the style linter ([#5605](https://github.com/leanprover-community/mathlib/pull/#5605))

The style linter has been doing a bit more than just checking for
copyright headers, module docstrings, or line lengths.
So I thought it made sense to reflect that in the filenames.

### [2021-01-05T03:19:32+00:00](https://github.com/leanprover-community/mathlib/commit/6dcfa5c276abdd2ccc2d9ab98434a255c83a667b)
chore(scripts): update nolints.txt ([#5615](https://github.com/leanprover-community/mathlib/pull/#5615))

I am happy to remove some nolints for you!

### [2021-01-04T23:56:31+00:00](https://github.com/leanprover-community/mathlib/commit/12921e9eaa574d0087ae4856860e6dda8690a438)
feat(tactic/simps): some improvements ([#5541](https://github.com/leanprover-community/mathlib/pull/#5541))

* `@[simps]` would previously fail if the definition is not a constructor application (with the suggestion to add option `{rhs_md := semireducible}` and maybe `simp_rhs := tt`). Now it automatically adds `{rhs_md := semireducible, simp_rhs := tt}` whenever it reaches this situation. 
* Remove all (now) unnecessary occurrences of `{rhs_md := semireducible}` from the library. There are still a couple left where the `simp_rhs := tt` is undesirable.
* `@[simps {simp_rhs := tt}]` now also applies `dsimp, simp` to the right-hand side of the lemmas it generates.
* Add some `@[simps]` in `category_theory/limits/cones.lean`
* `@[simps]` would not recursively apply projections of `prod` or `pprod`. This is now customizable with the `not_recursive` option.
* Add an option `trace.simps.debug` with some debugging information.

### [2021-01-04T22:10:37+00:00](https://github.com/leanprover-community/mathlib/commit/78d5bd370a8f7824aee1f46fc6a32d6df9fc59c4)
feat(analysis/normed_space/{finite_dimension, inner_product}): assorted finite-dimensionality lemmas ([#5580](https://github.com/leanprover-community/mathlib/pull/#5580))

Two groups of lemmas about finite-dimensional normed spaces:
- normed spaces of the same finite dimension are continuously linearly equivalent (this is a continuation of [#5559](https://github.com/leanprover-community/mathlib/pull/#5559))
- variations on the existing lemma `submodule.findim_add_inf_findim_orthogonal`, that the dimensions of a subspace and its orthogonal complement sum to the dimension of the full space.

### [2021-01-04T20:20:02+00:00](https://github.com/leanprover-community/mathlib/commit/7b825f2a06ef2f6fb5cc239265f2041b94d90a52)
feat(linear_algebra/alternating): Add comp_alternating_map and lemmas ([#5476](https://github.com/leanprover-community/mathlib/pull/#5476))

This is just `comp_multilinear_map` with the extra bundled proof

### [2021-01-04T16:47:45+00:00](https://github.com/leanprover-community/mathlib/commit/2300b477ba1806842ee480133f74f3065f59dc17)
chore(computability/*FA): remove unnecessary type variables ([#5613](https://github.com/leanprover-community/mathlib/pull/#5613))

### [2021-01-04T16:47:44+00:00](https://github.com/leanprover-community/mathlib/commit/9535f9148b91e33d12281ef5ac99292c2fb62220)
feat(*): switch to lean 3.24 ([#5612](https://github.com/leanprover-community/mathlib/pull/#5612))

### [2021-01-04T16:47:42+00:00](https://github.com/leanprover-community/mathlib/commit/7d0b9882860eeff366090334f7206c6c5a733f36)
chore(data/equiv/basic): Add refl / symm / trans lemmas for equiv_congr ([#5609](https://github.com/leanprover-community/mathlib/pull/#5609))

We already have this triplet of lemmas for `sum_congr` and `sigma_congr`.

### [2021-01-04T16:47:40+00:00](https://github.com/leanprover-community/mathlib/commit/50beef25b74b19d54cc095ae6c0401dca5d4e86d)
feat(data/set/basic): more lemmas about `set.pi` ([#5603](https://github.com/leanprover-community/mathlib/pull/#5603))

### [2021-01-04T12:04:36+00:00](https://github.com/leanprover-community/mathlib/commit/3669cb35c578441812ad30fd967d21a94b6f387e)
feat(data/real/ennreal): add `ennreal.prod_lt_top` ([#5602](https://github.com/leanprover-community/mathlib/pull/#5602))

Also add `with_top.can_lift`, `with_top.mul_lt_top`, and `with_top.prod_lt_top`.

### [2021-01-04T08:50:41+00:00](https://github.com/leanprover-community/mathlib/commit/41501369d88b5da276dc57ac333b570a4361a1d2)
chore(logic/function): generalize `rel_update_iff` to `forall_update_iff` ([#5601](https://github.com/leanprover-community/mathlib/pull/#5601))

### [2021-01-04T08:50:39+00:00](https://github.com/leanprover-community/mathlib/commit/6acf99e8443b9b97792dce4fd3d0b86c0415e05c)
fix(data/nat/basic): fix typos in docstrings ([#5592](https://github.com/leanprover-community/mathlib/pull/#5592))



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2021-01-04T05:36:22+00:00](https://github.com/leanprover-community/mathlib/commit/afbf47d5739ec69e6fdbb66fac2ce1d478f0ae64)
feat(data/*, order/*) supporting lemmas for characterising well-founded complete lattices ([#5446](https://github.com/leanprover-community/mathlib/pull/#5446))

### [2021-01-04T02:31:40+00:00](https://github.com/leanprover-community/mathlib/commit/24340238d0de311b44ed69f07c08e95dad469207)
chore(scripts): update nolints.txt ([#5598](https://github.com/leanprover-community/mathlib/pull/#5598))

I am happy to remove some nolints for you!

### [2021-01-03T23:19:01+00:00](https://github.com/leanprover-community/mathlib/commit/1503cf89c4805e23365354ccf33504f621c55391)
doc(overview): add dynamics and `measure.pi` ([#5597](https://github.com/leanprover-community/mathlib/pull/#5597))

### [2021-01-03T23:18:59+00:00](https://github.com/leanprover-community/mathlib/commit/4fcf65c0fa25b29d4eddde4ee3ff1cacb08bcb09)
fix(tactic/rcases): fix rcases? goal alignment ([#5576](https://github.com/leanprover-community/mathlib/pull/#5576))

This fixes a bug in which `rcases?` will not align the goals correctly
in the same manner as `rcases`, leading to a situation where the hint
produced by `rcases?` does not work in `rcases`.

Also fixes a bug where missing names will be printed as `[anonymous]`
instead of `_`.

Fixes [#2794](https://github.com/leanprover-community/mathlib/pull/#2794)

### [2021-01-03T23:18:57+00:00](https://github.com/leanprover-community/mathlib/commit/96948e4570d55af70bef41fbaaf124999037620f)
feat(measure_theory): almost everywhere measurable functions ([#5568](https://github.com/leanprover-community/mathlib/pull/#5568))

This PR introduces a notion of almost everywhere measurable function, i.e., a function which coincides almost everywhere with a measurable function, and builds a basic API around the notion. It will then be used in [#5510](https://github.com/leanprover-community/mathlib/pull/#5510) to extend the Bochner integral. The main new definition in the PR is `h : ae_measurable f μ`. It comes with `h.mk f` building a measurable function that coincides almost everywhere with `f` (these assertions are respectively `h.measurable_mk` and `h.ae_eq_mk`).

### [2021-01-03T23:18:53+00:00](https://github.com/leanprover-community/mathlib/commit/2967793e409d9134cc72f69430999d24a694ced5)
feat(data/option/basic): join and associated lemmas ([#5426](https://github.com/leanprover-community/mathlib/pull/#5426))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2021-01-03T23:18:51+00:00](https://github.com/leanprover-community/mathlib/commit/d04e034a000e231b73e79f55f607a4a5023a9c4c)
feat(measure_theory/interval_integral): FTC-2 ([#4945](https://github.com/leanprover-community/mathlib/pull/#4945))

The second fundamental theorem of calculus and supporting lemmas


Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-01-03T20:40:21+00:00](https://github.com/leanprover-community/mathlib/commit/46c35cc1008640e6f1637d941bfb235551227634)
fix(algebra/module/basic): Do not attach the ℕ and ℤ `is_scalar_tower` and `smul_comm_class` instances to a specific definition of smul ([#5509](https://github.com/leanprover-community/mathlib/pull/#5509))

These instances are in `Prop`, so the more the merrier.
Without this change, these instances are not available for alternative ℤ-module definitions.

An example of one of these alternate definitions is `linear_map.semimodule`, which provide a second non-defeq ℤ-module structure alongside `add_comm_group.int_module`.
With this PR, both semimodule structures are shown to satisfy `smul_comm_class` and `is_scalar_tower`; while before it, only `add_comm_group.int_module` was shown to satisfy these.

This PR makes the following work:
```lean
example {R : Type*} {M₁ M₂ M₃ : Type*}
  [comm_semiring R]
  [add_comm_monoid M₁] [semimodule R M₁]
  [add_comm_monoid M₂] [semimodule R M₂]
  [add_comm_monoid M₃] [semimodule R M₃]
(f : M₁ →ₗ[R] M₂ →ₗ[R] M₃) (x : M₁) (n : ℕ) : f (n • x) = n • f x :=
by simp
```

### [2021-01-03T18:36:11+00:00](https://github.com/leanprover-community/mathlib/commit/e1138b008a469f80a761877c462bcf9f05680c25)
feat(measure_theory/lp_space): snorm is zero iff the function is zero ae ([#5595](https://github.com/leanprover-community/mathlib/pull/#5595))

Adds three lemmas, one for both directions of the iff, `snorm_zero_ae` and `snorm_eq_zero`, and the iff lemma `snorm_eq_zero_iff`.

### [2021-01-03T16:58:07+00:00](https://github.com/leanprover-community/mathlib/commit/ae2c8572e313e5231ec73d647372d9030b915dc3)
feat(measure_theory/lp_space): add triangle inequality for the Lp seminorm ([#5594](https://github.com/leanprover-community/mathlib/pull/#5594))

### [2021-01-03T16:58:05+00:00](https://github.com/leanprover-community/mathlib/commit/384ba88bf56209e52a0bed1b7176805c09b05c9a)
feat(computability/*FA): Deterministic and Nondeterministic Finite Automata ([#5038](https://github.com/leanprover-community/mathlib/pull/#5038))

Definition and equivalence of NFA's and DFA's



Co-authored-by: foxthomson <11833933+foxthomson@users.noreply.github.com>

### [2021-01-03T14:06:47+00:00](https://github.com/leanprover-community/mathlib/commit/eb6d5f15483ffabd0cdfdaea9f58184322f927a3)
feat(analysis/normed_space/basic): basic facts about the sphere ([#5590](https://github.com/leanprover-community/mathlib/pull/#5590))

Basic lemmas about the sphere in a normed group or normed space.

### [2021-01-03T11:59:40+00:00](https://github.com/leanprover-community/mathlib/commit/0837fc30f425b2f777addbf5a80a96bf97220a67)
feat(measure_theory/pi): finite products of measures ([#5414](https://github.com/leanprover-community/mathlib/pull/#5414))

See module doc of `measure_theory/pi.lean`

### [2021-01-03T08:56:55+00:00](https://github.com/leanprover-community/mathlib/commit/e3501142be144126a16b8c9fdd4d827a07c44e2e)
feat(data/equiv/basic): rfl lemma for equiv_congr ([#5585](https://github.com/leanprover-community/mathlib/pull/#5585))

### [2021-01-03T05:59:33+00:00](https://github.com/leanprover-community/mathlib/commit/57c6d191e33800adc5229932aee69f334abd0bee)
feat(combinatorics/simple_graph): finitely many simple graphs on a finite type ([#5584](https://github.com/leanprover-community/mathlib/pull/#5584))

Adds an `ext` lemma for simple graphs and an instance that there are finitely many if the vertex set is finite.

### [2021-01-03T05:59:31+00:00](https://github.com/leanprover-community/mathlib/commit/9fc7aa5698e415d9f90d0c8de8017da53a75907c)
feat(data/finset/basic): add `finset.piecewise_le_piecewise` ([#5572](https://github.com/leanprover-community/mathlib/pull/#5572))

* add `finset.piecewise_le_piecewise` and `finset.piecewise_le_piecewise'`;
* add `finset.piecewise_compl`.

### [2021-01-03T02:24:46+00:00](https://github.com/leanprover-community/mathlib/commit/0a4fbd8c7443310b7f6f23108b3f3f4a26c107b3)
chore(data/prod): add `prod.forall'` and `prod.exists'` ([#5570](https://github.com/leanprover-community/mathlib/pull/#5570))

They work a bit better with curried functions.

### [2021-01-03T02:24:43+00:00](https://github.com/leanprover-community/mathlib/commit/0dc7a27c74682cb1ae8d212dcb5ad8946cd32b09)
feat(data/nat/fib): fib n is a strong divisibility sequence ([#5555](https://github.com/leanprover-community/mathlib/pull/#5555))



Co-authored-by: Hanting Zhang <hantingzhang03@gmail.com>
Co-authored-by: Hanting Zhang <76727734+acxxa@users.noreply.github.com>

### [2021-01-03T02:24:41+00:00](https://github.com/leanprover-community/mathlib/commit/9f25244288c04424263d247ee7e4a56c48e71aff)
chore(data/finset/sort): upgrade `finset.mono_of_fin` to an `order_iso` ([#5495](https://github.com/leanprover-community/mathlib/pull/#5495))

* Upgrade `finset.mono_of_fin` to an `order_embedding`.
* Drop some lemmas that now immediately follow from `order_embedding.*`.
* Upgrade `finset.mono_equiv_of_fin` to `order_iso`.
* Define `list.nodup.nth_le_equiv` and `list.sorted.nth_le_iso`.
* Upgrade `mono_equiv_of_fin` to an `order_iso`, make it `computable`.

### [2021-01-03T02:24:39+00:00](https://github.com/leanprover-community/mathlib/commit/9ea7e4625fcaddb97037f85aa0377dbff47566bb)
feat(linear_algebra/alternating): Show the link to linear_independent ([#5477](https://github.com/leanprover-community/mathlib/pull/#5477))

### [2021-01-03T02:24:36+00:00](https://github.com/leanprover-community/mathlib/commit/04f8fd744a1d8e9f5aec9fd8d4809d4345365916)
feat(group_theory/dihedral): add dihedral groups ([#5171](https://github.com/leanprover-community/mathlib/pull/#5171))

Contains a subset of the content of [#1076](https://github.com/leanprover-community/mathlib/pull/#1076) , but implemented slightly differently.

In [#1076](https://github.com/leanprover-community/mathlib/pull/#1076), finite and infinite dihedral groups are implemented separately, but a side effect of what I did was that `dihedral 0` corresponds to the infinite dihedral group.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2021-01-03T00:36:14+00:00](https://github.com/leanprover-community/mathlib/commit/ee2c963e53ca6dd774560a4db53da34d0d674a7c)
doc(overview): pluralization convention ([#5583](https://github.com/leanprover-community/mathlib/pull/#5583))

Normalized pluralizations, according to the convention @PatrickMassot described

### [2021-01-03T00:36:12+00:00](https://github.com/leanprover-community/mathlib/commit/e6982901378e12ec4cd7af929c4e5d6cd5316ed3)
doc(overview): Add alternating_map ([#5582](https://github.com/leanprover-community/mathlib/pull/#5582))

### [2021-01-03T00:36:10+00:00](https://github.com/leanprover-community/mathlib/commit/1a39825bcb25ad69c8ae0ac198fa56edfd953818)
doc(overview): combinatorics section ([#5581](https://github.com/leanprover-community/mathlib/pull/#5581))

Added overview entries for simple graphs and some pigeonhole principles

### [2021-01-03T00:36:08+00:00](https://github.com/leanprover-community/mathlib/commit/5bff88723dd37ef2f0a203276a79f26fc6cb735e)
doc(overview): add missing algebras to overview ([#5579](https://github.com/leanprover-community/mathlib/pull/#5579))

### [2021-01-03T00:36:06+00:00](https://github.com/leanprover-community/mathlib/commit/e0946065b0403320def90459b169c005ec0a80d8)
chore(topology/algebra/ordered,analysis/specific_limits): two more limits ([#5573](https://github.com/leanprover-community/mathlib/pull/#5573))

### [2021-01-02T20:59:51+00:00](https://github.com/leanprover-community/mathlib/commit/aa88bb81fb3b9158fa9eb078df06ad4d8aa4e0db)
feat(measure_theory/borel_space): the inverse of a closed embedding is measurable ([#5567](https://github.com/leanprover-community/mathlib/pull/#5567))



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2021-01-02T20:59:49+00:00](https://github.com/leanprover-community/mathlib/commit/a7d05c450bfeace4c3b83ddaec64667b43c7e9dd)
chore(number_theory/bernoulli): refactor definition of bernoulli ([#5534](https://github.com/leanprover-community/mathlib/pull/#5534))

A minor refactor of the definition of Bernoulli number, and I expanded the docstring.

### [2021-01-02T20:59:48+00:00](https://github.com/leanprover-community/mathlib/commit/12b5024b802f73016295206041a93dba04f4043b)
feat(data/polynomial/erase_lead): add lemma erase_lead_card_support_eq ([#5529](https://github.com/leanprover-community/mathlib/pull/#5529))

One further lemma to increase the API of `erase_lead`.  I use it to simplify the proof of the Liouville PR.  In particular, it is used in a step of the proof that you can "clear denominators" when evaluating a polynomial with integer coefficients at a rational number.

### [2021-01-02T17:53:35+00:00](https://github.com/leanprover-community/mathlib/commit/fceb7c1a8af7c19fb28ec54d7d64c2d1a579fed2)
chore(algebra/group,algebra/group_with_zero): a few more injective/surjective constructors ([#5547](https://github.com/leanprover-community/mathlib/pull/#5547))

### [2021-01-02T15:05:58+00:00](https://github.com/leanprover-community/mathlib/commit/e142c825761b0fedd26a0ebc1eb5876d5b46850e)
feat(algebra/group/prod) Units of a product monoid ([#5563](https://github.com/leanprover-community/mathlib/pull/#5563))

Just a simple seemingly missing def

### [2021-01-02T10:18:26+00:00](https://github.com/leanprover-community/mathlib/commit/e35a703f907e325031dfcc78fcfe7a1b0456badf)
feat(algebra/ordered_{group,field}): more lemmas relating inv and mul inequalities ([#5561](https://github.com/leanprover-community/mathlib/pull/#5561))

I also renamed `inv_le_iff_one_le_mul` to `inv_le_iff_one_le_mul'` for consistency with `div_le_iff` and `div_le_iff'` (unprimed lemmas involve multiplication on the right and primed lemmas involve multiplication on the left).

### [2021-01-02T10:18:25+00:00](https://github.com/leanprover-community/mathlib/commit/f5f879e23fe13bd831d4ef96d466b750d88d0519)
feat(linear_algebra/dimension): linear equiv iff eq dim ([#5559](https://github.com/leanprover-community/mathlib/pull/#5559))

See related zulip discussion
https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Classification.20of.20finite-dimensional.20vector.20spaces/near/221357275


Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2021-01-02T10:18:22+00:00](https://github.com/leanprover-community/mathlib/commit/9f6300e97210b0d316a392ffd0226a79dca60240)
chore(data/complex/basic): upgrade `complex.norm_sq` to a `monoid_with_zero_hom` ([#5553](https://github.com/leanprover-community/mathlib/pull/#5553))

### [2021-01-02T10:18:20+00:00](https://github.com/leanprover-community/mathlib/commit/9d3c05ada99fa05198468edb6fa9a2f3de2da930)
feat(ring_theory/simple_module): simple modules and Schur's Lemma ([#5473](https://github.com/leanprover-community/mathlib/pull/#5473))

Defines `is_simple_module` in terms of `is_simple_lattice`
Proves Schur's Lemma
Defines `division ring` structure on the endomorphism ring of a simple module

### [2021-01-02T10:18:18+00:00](https://github.com/leanprover-community/mathlib/commit/afc3f03a081020c84f16c9f3956af03272fceba6)
feat(algebra/ordered_group): add linear_ordered_comm_group and linear_ordered_cancel_comm_monoid ([#5286](https://github.com/leanprover-community/mathlib/pull/#5286))

We have `linear_ordered_add_comm_group` but we didn't have `linear_ordered_comm_group`. This PR adds it, as well as multiplicative versions of `canonically_ordered_add_monoid`, `canonically_linear_ordered_add_monoid` and `linear_ordered_cancel_add_comm_monoid`. I added multiplicative versions of the lemmas about these structures too. The motivation is that I want to slightly generalise the notion of a valuation.

[ also random other bits of tidying which I noticed along the way (docstring fixes, adding `norm_cast` attributes) ].

### [2021-01-02T07:10:53+00:00](https://github.com/leanprover-community/mathlib/commit/d94f0a27c26bb8e4de3e7db51a350e0279ec3b0b)
chore(data/list): a list sorted w.r.t. `(<)` has no duplicates ([#5550](https://github.com/leanprover-community/mathlib/pull/#5550))

### [2021-01-02T00:36:58+00:00](https://github.com/leanprover-community/mathlib/commit/409ea425e97e29e9d0cdeac7395145e531b2853d)
chore(algebra/*): move some lemmas to `div_inv_monoid` ([#5552](https://github.com/leanprover-community/mathlib/pull/#5552))

### [2021-01-02T00:36:56+00:00](https://github.com/leanprover-community/mathlib/commit/06a11fd5763ec818bb84ff27c5f16dcc8e6c83fc)
chore(data/fintype/card): generalize `equiv.prod_comp` to `function.bijective.prod_comp` ([#5551](https://github.com/leanprover-community/mathlib/pull/#5551))

This way we can apply it to `add_equiv`, `mul_equiv`, `order_iso`, etc
without using `to_equiv`.

### [2021-01-02T00:36:54+00:00](https://github.com/leanprover-community/mathlib/commit/ea3815fbcc5f43fc82747465bcd328dcb2450059)
feat(analysis/normed_space/inner_product): upgrade orthogonal projection to a continuous linear map ([#5543](https://github.com/leanprover-community/mathlib/pull/#5543))

Upgrade the orthogonal projection, from a linear map `E →ₗ[𝕜] K` to a continuous linear map `E →L[𝕜] K`.

### [2021-01-02T00:36:53+00:00](https://github.com/leanprover-community/mathlib/commit/b57d562c0c428e8c037f364d501a8951cc5cce20)
feat(algebra/big_operators/nat_antidiagonal): add prod_antidiagonal_eq_prod_range_succ ([#5528](https://github.com/leanprover-community/mathlib/pull/#5528))

Sometimes summing over nat.antidiagonal is nicer than summing over range(n+1).

### [2021-01-02T00:36:49+00:00](https://github.com/leanprover-community/mathlib/commit/c32efeae4aa7aebb40d0d040a5883700b604e086)
feat(data/fin): there is at most one `order_iso` from `fin n` to `α` ([#5499](https://github.com/leanprover-community/mathlib/pull/#5499))

* Define a `bounded_lattice` instance on `fin (n + 1)`.
* Prove that there is at most one `order_iso` from `fin n` to `α`.

### [2021-01-01T21:26:00+00:00](https://github.com/leanprover-community/mathlib/commit/8aa23326400e409d8677ace91188dd8ca4539460)
chore(*): golf some proofs ([#5548](https://github.com/leanprover-community/mathlib/pull/#5548))

Parts of [#5539](https://github.com/leanprover-community/mathlib/pull/#5539)

### [2021-01-01T21:25:58+00:00](https://github.com/leanprover-community/mathlib/commit/e0030ffe70ad0fcecfbdb6bc68c1377890af76ef)
chore(data/real/cau_seq): golf some proofs ([#5545](https://github.com/leanprover-community/mathlib/pull/#5545))

### [2021-01-01T19:02:10+00:00](https://github.com/leanprover-community/mathlib/commit/b542cfbc53b6e851d6793cc253e03036dd409fa2)
chore(linear_algebra/basic): notation for span of a singleton ([#5538](https://github.com/leanprover-community/mathlib/pull/#5538))

Notation `∙` (`\.`) for the span of a single element of a module, so one can write `R ∙ x` instead of `span R {x}`.  This in itself does not save so many keystrokes, but it also seems to be a bit more robust: it works in settings where previously one had to type `span R ({x} : set M)` because the type of the singleton was not recognised.

[Zulip 1](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/New.20linear.20algebra.20notation), [Zulip 2](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation.20for.20span)

### [2021-01-01T15:24:16+00:00](https://github.com/leanprover-community/mathlib/commit/fcbaf625fbf4c139b99e5a16de2be0cfbc05b67b)
doc(lint/type_classes): add has_coe_to_fun linter ([#5546](https://github.com/leanprover-community/mathlib/pull/#5546))

### [2021-01-01T01:33:29+00:00](https://github.com/leanprover-community/mathlib/commit/d2bde119a93bf08dfd163fb7744d1bc9059b2b2d)
chore(scripts): update nolints.txt ([#5554](https://github.com/leanprover-community/mathlib/pull/#5554))

I am happy to remove some nolints for you!