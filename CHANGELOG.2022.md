### [2022-07-08T09:53:26+00:00](https://github.com/leanprover-community/mathlib/commit/7c070c4d46f03c4398bda237e5cebdfffd2cfb60)
feat(data/finset/basic): Coercion of a product of finsets ([#15011](https://github.com/leanprover-community/mathlib/pull/#15011))

`↑(∏ i in s, f i) : set α) = ∏ i in s, ↑(f i)` for `f : ι → finset α`.

### [2022-07-08T05:24:53+00:00](https://github.com/leanprover-community/mathlib/commit/d34b3306f8568421153bdea2349f264d80915a64)
feat(data/set/basic,order/filter/basic): add semiconj lemmas about images and maps ([#14970](https://github.com/leanprover-community/mathlib/pull/#14970))

This adds `function.commute` and `function.semiconj` lemmas, and replaces all the uses of `_comm` lemmas with the `semiconj` version as it turns out that only this generality is needed.

### [2022-07-08T05:24:52+00:00](https://github.com/leanprover-community/mathlib/commit/563a51af45e58bf72b691742b5d6271d3c6685ae)
chore(topology/algebra/semigroup): golf file ([#14957](https://github.com/leanprover-community/mathlib/pull/#14957))

### [2022-07-08T05:24:52+00:00](https://github.com/leanprover-community/mathlib/commit/ba9f346a2c63b8f2b8f3038c40434add8bfd015e)
feat(topology/algebra/uniform_group): `uniform_group` is preserved by Inf and comap ([#14889](https://github.com/leanprover-community/mathlib/pull/#14889))

This is the uniform version of [#11720](https://github.com/leanprover-community/mathlib/pull/#11720)

### [2022-07-08T02:55:33+00:00](https://github.com/leanprover-community/mathlib/commit/6eeb941cf39066417a09b1bbc6e74761cadfcb1a)
refactor(set_theory/cardinal/basic): migrate from `fintype` to `finite` ([#15175](https://github.com/leanprover-community/mathlib/pull/#15175))

* add `finite_iff_exists_equiv_fin`;
* add `cardinal.mk_eq_nat_iff` and `cardinal.lt_aleph_0_iff_finite`;
* rename the old `cardinal.lt_aleph_0_iff_finite` to `cardinal.lt_aleph_0_iff_finite_set`;
* rename `cardinal.lt_aleph_0_of_fintype` to `cardinal.lt_aleph_0_of_finite`, assume `[finite]` instead of `[fintype]`;
* add an alias `set.finite.lt_aleph_0`;
* rename `W_type.cardinal_mk_le_max_aleph_0_of_fintype` to `W_type.cardinal_mk_le_max_aleph_0_of_finite`, fix assumption.

### [2022-07-08T02:55:32+00:00](https://github.com/leanprover-community/mathlib/commit/a3c647bb34db2ebcc2e4dbe9b909fab8279686b1)
feat(set_theory/ordinal/arithmetic): tweak theorems about `0` and `1` ([#15174](https://github.com/leanprover-community/mathlib/pull/#15174))

We add a few basic theorems on the `0` and `1` ordinals. We rename `one_eq_type_unit` to `type_unit`, and remove `one_eq_lift_type_unit` by virtue of being a trivial consequence of `type_unit` and `lift_one`.

### [2022-07-08T02:55:31+00:00](https://github.com/leanprover-community/mathlib/commit/f0f4070448e8af03f0ab16e344c41bb3ccf37e00)
feat(topology/algebra/infinite_sum): Double sum is equal to a single value ([#15157](https://github.com/leanprover-community/mathlib/pull/#15157))

A generalized version of `tsum_eq_single` that works for a double indexed sum, when all but one summand is zero.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-07-08T02:55:30+00:00](https://github.com/leanprover-community/mathlib/commit/8927a02c7ff169b7f2a280d55d0fb73c9a860a2b)
chore(tactic/lift): move a proof to `subtype.exists_pi_extension` ([#15098](https://github.com/leanprover-community/mathlib/pull/#15098))

* Move `_can_lift` attr to the bottom of the file, just before the
  rest of meta code.
* Use `ι → Sort*` instead of `Π i : ι, Sort*`.
* Move `pi_subtype.can_lift.prf` to a separate lemma.

### [2022-07-08T02:55:29+00:00](https://github.com/leanprover-community/mathlib/commit/0e3184fc8664a1baaa564d4080f931df9a5df964)
feat(data/fin/tuple/basic): add lemmas for rewriting exists and forall over `n+1`-tuples ([#15048](https://github.com/leanprover-community/mathlib/pull/#15048))

The lemma names `fin.forall_fin_succ_pi` and `fin.exists_fin_succ_pi` mirror the existing `fin.forall_fin_succ` and `fin.exists_fin_succ`.

### [2022-07-08T02:55:28+00:00](https://github.com/leanprover-community/mathlib/commit/2a7ceb0e411e459553a303d48eecdbb8553bd7ed)
perf(linear_algebra): speed up `graded_algebra` instances ([#14967](https://github.com/leanprover-community/mathlib/pull/#14967))

Reduce `elaboration of graded_algebra` in:

+ `exterior_algebra.graded_algebra` from ~20s to 3s-
+ `tensor_algebra.graded_algebra` from 7s+ to 2s-
+ `clifford_algebra.graded_algebra` from 14s+ to 4s-

(These numbers were before `lift_ι` and `lift_ι_eq` were extracted from `exterior_algebra.graded_algebra` and `lift_ι_eq` was extracted from `clifford_algebra.graded_algebra` in [#12182](https://github.com/leanprover-community/mathlib/pull/#12182).)

Fix [timeout reported on Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/deterministic.20timeout/near/286996731)

Also shorten the statements of the first two without reducing clarity (I think).

### [2022-07-08T02:55:27+00:00](https://github.com/leanprover-community/mathlib/commit/a5a6865f3d3f93ef56e7cb9ace8cfc8077818a2a)
feat(combinatorics/set_family/intersecting): Intersecting families ([#14475](https://github.com/leanprover-community/mathlib/pull/#14475))

Define intersecting families, prove that intersecting families in `α` have size at most `card α / 2` and that all maximal intersecting families are this size.

### [2022-07-08T02:55:26+00:00](https://github.com/leanprover-community/mathlib/commit/70a27086279df8849102ab02d814d6bbdeb704e2)
feat(topology/continuous_function): Any T0 space embeds in a product of copies of the Sierpinski space ([#14036](https://github.com/leanprover-community/mathlib/pull/#14036))

Any T0 space embeds in a product of copies of the Sierpinski space



Co-authored-by: Iván Sadofschi Costa <isadofschi@users.noreply.github.com>

### [2022-07-08T00:21:19+00:00](https://github.com/leanprover-community/mathlib/commit/646028a0b749eabb281682751d09fe573a4f8cf6)
refactor(data/finset/lattice): finset.{min,max} away from option ([#15163](https://github.com/leanprover-community/mathlib/pull/#15163))

Switch to a `with_top`/`with_bot` based API. This avoids exposing `option`
as implementation detail.
Redefines `polynomial.degree` to use `coe` instead of `some`





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2022-07-07T22:47:30+00:00](https://github.com/leanprover-community/mathlib/commit/8a80759badd4907a3894ab7ce9e521f3730d472f)
feat(order/filter/basic): add `map_le_map` and `map_injective` ([#15128](https://github.com/leanprover-community/mathlib/pull/#15128))

* Add `filter.map_le_map`, an `iff` version of `filter.map_mono`.
* Add `filter.map_injective`, a `function.injective` version of `filter.map_inj`.

### [2022-07-07T19:22:46+00:00](https://github.com/leanprover-community/mathlib/commit/b4979cbdb1800f3bded2ae932701944cb5ce21aa)
chore(data/rat): split `field ℚ` instance from definition of `ℚ` ([#14893](https://github.com/leanprover-community/mathlib/pull/#14893))

I want to refer to the rational numbers in the definition of a field, meaning we can't define the field structure on `ℚ` in the same file as `ℚ` itself.

This PR moves everything in `data/rat/basic.lean` that does not depend on `algebra/field/basic.lean` into a new file `data/rat/defs.lean`: definition of the type `ℚ`, the operations giving its algebraic structure, and the coercions from integers and natural numbers. Basically, everything except the actual `field ℚ` instance.

It turns out our basic lemmas on rational numbers only require a `comm_ring`, `comm_group_with_zero` and `is_domain` instance, so I defined those instances in `defs.lean` could leave all lemmas intact.

As a consequence, the transitive imports provided by `data.rat.basic` are somewhat smaller: no `linear_ordered_field` is needed until `data.rat.order`. I see this as a bonus but can also re-import `algebra.order.field` in `data.rat.basic` if desired.

### [2022-07-07T16:57:16+00:00](https://github.com/leanprover-community/mathlib/commit/7428bd9bd894d6604dcb3142a769ded5ae26af64)
refactor(data/finite/set,data/set/finite): move most contents of one file to another ([#15166](https://github.com/leanprover-community/mathlib/pull/#15166))

* move most content of `data.finite.set` to `data.set.finite`;
* use `casesI nonempty_fintype _` instead of `letI := fintype.of_finite`; sometimes it lets us avoid `classical.choice`;
* merge `set.finite.of_fintype`, `set.finite_of_fintype`, and `set.finite_of_finite` into `set.to_finite`;
* rewrite `set.finite_univ_iff` and `finite.of_finite_univ` in terms of `set.finite`;
* replace some assumptions `[fintype (plift _)]` with `[finite _]`;
* generalize `set.cod_restrict` and some lemmas to allow domain in `Sort*`, use it for `finite.of_injective_finite.range`.

### [2022-07-07T16:57:15+00:00](https://github.com/leanprover-community/mathlib/commit/691f04fea9dfda701bdd2a15667b069f784cff8c)
feat(order/rel_iso): two reflexive/irreflexive relations on a unique type are isomorphic ([#14760](https://github.com/leanprover-community/mathlib/pull/#14760))

We also rename `not_rel` to the more descriptive name `not_rel_of_subsingleton`.

### [2022-07-07T14:49:11+00:00](https://github.com/leanprover-community/mathlib/commit/6df59d685784fb322f290c1ac1a0a488dfba3abd)
feat(data/list/basic): nth_le_enum ([#15139](https://github.com/leanprover-community/mathlib/pull/#15139))

Fill out some of the `enum` and `enum_from` API
Link the two via `map_fst_add_enum_eq_enum_from`.





Co-authored-by: Yakov Pechersky <ffxen158@gmail.com>

### [2022-07-07T13:45:33+00:00](https://github.com/leanprover-community/mathlib/commit/58525685eca1c19d72e068777999d946be5007b0)
feat(combinatorics/simple_graph/{basic,subgraph,clique,coloring}): add induced graphs, characterization of cliques, and bounds for colorings ([#14034](https://github.com/leanprover-community/mathlib/pull/#14034))

This adds `simple_graph.map`, `simple_graph.comap`, and induced graphs and subgraphs. There are renamings: `simple_graph.subgraph.map` to `simple_graph.subgraph.inclusion`, `simple_graph.subgraph.map_top` to `simple_graph.subgraph.hom`, and `simple_graph.subgraph.map_spanning_top` to `simple_graph.subgraph.spanning_hom`. These changes originated to be able to express that a clique is a set of vertices whose induced subgraph is complete, which gives some clique-based bounds for chromatic numbers.

### [2022-07-07T08:40:00+00:00](https://github.com/leanprover-community/mathlib/commit/1422d387ff4bf67c4e3df5c2956a1fd64de4caa2)
feat(order/succ_pred): expand API on `with_bot` and `with_top` ([#15016](https://github.com/leanprover-community/mathlib/pull/#15016))

We add a bunch of `simp` lemmas for successor and predecessors on `with_bot` and `with_top`, and golf some proofs.



Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2022-07-07T06:45:03+00:00](https://github.com/leanprover-community/mathlib/commit/0d186304df9a5cc9ed16cf52eb4851748837b29c)
chore(ring_theory/norm): generalise a couple of lemmas ([#15160](https://github.com/leanprover-community/mathlib/pull/#15160))

Using the generalisation linter

### [2022-07-07T05:04:33+00:00](https://github.com/leanprover-community/mathlib/commit/bf735cd1517d3a2bfd3fb6b449814bab64ea90bf)
chore(set_theory/ordinal/basic): remove `rel_iso_out` ([#15145](https://github.com/leanprover-community/mathlib/pull/#15145))

This is just a specific application of `rel_iso.cast`. Moreover, it's unused.

### [2022-07-07T05:04:32+00:00](https://github.com/leanprover-community/mathlib/commit/9b2755b951bc323c962bd072cd447b375cf58101)
chore(*): add missing `to_fun → apply` configurations for `simps` ([#15112](https://github.com/leanprover-community/mathlib/pull/#15112))

This improves the names of some generated lemmas for `continuous_map` and `quadratic_form`.

### [2022-07-07T05:04:31+00:00](https://github.com/leanprover-community/mathlib/commit/ab99fd1b8aa249259a5993a3fa47491cd12969e4)
chore(data/nat): rename oddly named lemma odd_gt_zero ([#13040](https://github.com/leanprover-community/mathlib/pull/#13040))

### [2022-07-07T02:38:11+00:00](https://github.com/leanprover-community/mathlib/commit/6d02dac3d17db172c4b47c9730f1aca8717de57d)
feat(order/lattice, order/lattice_intervals): coe inf/sup lemmas ([#15136](https://github.com/leanprover-community/mathlib/pull/#15136))

This PR adds simp lemmas for coercions of inf/sup in order instances on intervals. We also change the order of some arguments in instances/lemmas, by removing `variables` commands, so that typeclass arguments precede others. 



Co-authored-by: Peter Nelson <apnelson@uwaterloo.ca>

### [2022-07-07T00:12:50+00:00](https://github.com/leanprover-community/mathlib/commit/418373e885f1adfc02882efed6d04ba63ebfe20b)
feat(combinatorics/simple_graph/basic): `dart.to_prod` is injective ([#15150](https://github.com/leanprover-community/mathlib/pull/#15150))

### [2022-07-07T00:12:49+00:00](https://github.com/leanprover-community/mathlib/commit/3e52000ca95b57785fafe35d86863507be2d4a0f)
feat(data/quot): `is_equiv` instance for quotient equivalence ([#15148](https://github.com/leanprover-community/mathlib/pull/#15148))

### [2022-07-07T00:12:47+00:00](https://github.com/leanprover-community/mathlib/commit/e034eb096119fb15b3cdb19cde19e04fc8969999)
feat(order/rel_iso): add `rel_iso.cast` ([#15144](https://github.com/leanprover-community/mathlib/pull/#15144))

### [2022-07-07T00:12:46+00:00](https://github.com/leanprover-community/mathlib/commit/e335a41f66aae9c214e972e7dd5f06731863ef7f)
refactor(group_theory/congruence): use `quotient.map` ([#15130](https://github.com/leanprover-community/mathlib/pull/#15130))

Also add explicit universe levels in `algebra.category.Module.monoidal`.

### [2022-07-07T00:12:45+00:00](https://github.com/leanprover-community/mathlib/commit/fdfc2229d66fb8fe28243fdf6fdbc458a71b5ecc)
feat(measure_theory/integral): Circle integral transform ([#13885](https://github.com/leanprover-community/mathlib/pull/#13885))

Some basic definitions and results related to circle integrals of a function. These form part of [#13500](https://github.com/leanprover-community/mathlib/pull/#13500) 



Co-authored-by: David Loeffler <d.loeffler.01@cantab.net>

### [2022-07-06T21:58:37+00:00](https://github.com/leanprover-community/mathlib/commit/0a89f18faa014fa06af1c85c9e05f2289ecfe50d)
chore(set_theory/ordinal/basic): clean up `ordinal.card` API ([#15147](https://github.com/leanprover-community/mathlib/pull/#15147))

We tweak some spacing throughout this section of the file, and golf a few theorems/definitions.

Conflicts and is inspired by [#15137](https://github.com/leanprover-community/mathlib/pull/#15137).

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-07-06T21:58:36+00:00](https://github.com/leanprover-community/mathlib/commit/a54e63dac27fa2fd0b0a28322fede9ba2b1720ff)
feat(set_theory/ordinal/basic): basic lemmas on `ordinal.lift`  ([#15146](https://github.com/leanprover-community/mathlib/pull/#15146))

We add some missing instances for preimages, and missing theorems for `ordinal.lift`. We remove `ordinal.lift_type`, as it was just a worse way of stating `ordinal.type_ulift`.

We also tweak some spacing and golf a few theorems.

This conflicts with (and is inspired by) some of the changes of [#15137](https://github.com/leanprover-community/mathlib/pull/#15137).

### [2022-07-06T19:18:30+00:00](https://github.com/leanprover-community/mathlib/commit/b7581040092176f4b3bfbc193ba267724e22dc5f)
feat(order/basic): a symmetric relation implies equality when it implies less-equal ([#15149](https://github.com/leanprover-community/mathlib/pull/#15149))

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-07-06T15:08:32+00:00](https://github.com/leanprover-community/mathlib/commit/d45a8ace0fb50f4b0a1ea72bdf57f3881f6f8112)
refactor(topology/separation): redefine `t0_space` ([#15046](https://github.com/leanprover-community/mathlib/pull/#15046))

### [2022-07-06T13:12:54+00:00](https://github.com/leanprover-community/mathlib/commit/71b1be63560d43c689b2c1338ed1366619ce2940)
feat(analysis/inner_product_space): add simple lemmas for the orthogonal complement ([#15020](https://github.com/leanprover-community/mathlib/pull/#15020))

We show that the orthogonal complement of a dense subspace is trivial.

### [2022-07-06T11:16:59+00:00](https://github.com/leanprover-community/mathlib/commit/f09322bc94e14791bd8e6e460d79b298df74f438)
feat(geometry/manifold/local_invariant_properties): simplify definitions and proofs ([#15116](https://github.com/leanprover-community/mathlib/pull/#15116))

* Simplify the sets in `local_invariant_prop` and `lift_prop_within_at`
* Simplify many proofs in `local_invariant_properties.lean`
* Reorder the intersection in `cont_diff_within_at_prop` to be more consistent with all lemmas in `smooth_manifold_with_corners.lean`
* New lemmas, such as `cont_mdiff_within_at_iff_of_mem_source` and properties of `local_invariant_prop`
* I expect that some lemmas in `cont_mdiff.lean` can be simplified using the new definitions, but I don't do that in this PR.
* Lemma renamings:
```
cont_mdiff_within_at_iff -> cont_mdiff_within_at_iff'
cont_mdiff_within_at_iff' -> cont_mdiff_within_at_iff_of_mem_source'
cont_mdiff_within_at_iff'' -> cont_mdiff_within_at_iff [or iff.rfl]
```

### [2022-07-06T08:41:41+00:00](https://github.com/leanprover-community/mathlib/commit/8ff5e1132acc276757fe42322bdc769d30bcc929)
feat(analysis/special_functions/complex/arg): add complex.abs_eq_one_iff ([#15125](https://github.com/leanprover-community/mathlib/pull/#15125))

This is a simpler formulation of `complex.range_exp_mul_I` below.





Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-07-06T08:41:40+00:00](https://github.com/leanprover-community/mathlib/commit/d908bc0b90c116b190f889b924b01f8ccc42ce61)
chore(data/fintype): drop a `decidable_pred` assumption ([#14971](https://github.com/leanprover-community/mathlib/pull/#14971))

OTOH, now the proof depends on `classical.choice`.

### [2022-07-06T07:46:32+00:00](https://github.com/leanprover-community/mathlib/commit/a95b442734d137aef46c1871e147089877fd0f62)
feat(probability/martingale): Doob's maximal inequality ([#14737](https://github.com/leanprover-community/mathlib/pull/#14737))

### [2022-07-06T07:04:08+00:00](https://github.com/leanprover-community/mathlib/commit/bd9c307d10f0bd0ad9d1f09840b13bcee9205d65)
doc(overview): add probability theory ([#15114](https://github.com/leanprover-community/mathlib/pull/#15114))

Also:
* Add convolutions to overview and undergrad
* Add some other probability notions to undergrad
* Minor cleanup in probability module docs



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2022-07-06T02:26:24+00:00](https://github.com/leanprover-community/mathlib/commit/93e97d1ef98c0ba1b86e12c69319e4cdb55932af)
feat(analysis/convex/function): Variants of `convex_on.le_right_of_left_le` ([#14821](https://github.com/leanprover-community/mathlib/pull/#14821))

This PR adds four variants of `convex_on.le_right_of_left_le` that are useful when dealing with convex functions on the real numbers.

### [2022-07-05T23:18:42+00:00](https://github.com/leanprover-community/mathlib/commit/71e11de864149aecd752d067b3f9795835883222)
chore(analysis/normed/field/basic): add `@[simp]` to `real.norm_eq_abs ([#15006](https://github.com/leanprover-community/mathlib/pull/#15006))

* mark `real.norm_eq_abs` and `abs_nonneg` as `simp` lemmas;
* add `abs` versions of `is_o.norm_left` etc;
* add `inner_product_geometry.angle_smul_smul` and `linear_isometry.angle_map`.

### [2022-07-05T23:18:41+00:00](https://github.com/leanprover-community/mathlib/commit/071dc9081a4a462c2ce5f55740f4c2e7ea530f45)
feat(probability/martingale): positive part of a submartingale is also a submartingale ([#14932](https://github.com/leanprover-community/mathlib/pull/#14932))



Co-authored-by: RemyDegenne <Remydegenne@gmail.com>

### [2022-07-05T19:14:55+00:00](https://github.com/leanprover-community/mathlib/commit/f10d0abc2de3397966db34cf599c3d53c03e348d)
feat(*): add lemmas about sigma types ([#15085](https://github.com/leanprover-community/mathlib/pull/#15085))

* move `set.range_sigma_mk` to `data.set.sigma`;
* add `set.preimage_image_sigma_mk_of_ne`, `set.image_sigma_mk_preimage_sigma_map_subset`, and `set.image_sigma_mk_preimage_sigma_map`;
* add `function.injective.of_sigma_map` and `function.injective.sigma_map_iff`;
* don't use pattern matching in the definition of `prod.to_sigma`;
* add `filter.map_sigma_mk_comap`

### [2022-07-05T16:26:49+00:00](https://github.com/leanprover-community/mathlib/commit/527afb3d1cd8dc1900f01773d834311dafa3c8fb)
feat(topology/sets/compacts): prod constructions ([#15118](https://github.com/leanprover-community/mathlib/pull/#15118))

### [2022-07-05T15:04:58+00:00](https://github.com/leanprover-community/mathlib/commit/db9cb4660db4257ca8bb7d857126af9d2370f3c3)
feat(analysis/complex): equiv_real_prod_symm_apply ([#15122](https://github.com/leanprover-community/mathlib/pull/#15122))

Plus some minor lemmas for [#15106](https://github.com/leanprover-community/mathlib/pull/#15106).

### [2022-07-05T15:04:57+00:00](https://github.com/leanprover-community/mathlib/commit/68ae182e8c99ce38637a915f1e54f7bfa59e5300)
feat(measure_theory/group/measure): a product of Haar measures is a Haar measure ([#15120](https://github.com/leanprover-community/mathlib/pull/#15120))

### [2022-07-05T12:32:49+00:00](https://github.com/leanprover-community/mathlib/commit/365e30de69eef720f460649431c7c75f0156b327)
chore(data/set/*,order/*): add missing lemmas about `monotone_on` etc ([#14943](https://github.com/leanprover-community/mathlib/pull/#14943))

* Add `monotone_on`/`antitone`/`antitone_on` versions of existing `monotone` lemmas for `id`/`const`, `inf`/`sup`/`min`/`max`, `inter`/`union`, and intervals.
* Drop `set.monotone_prod`, leave `monotone.set_prod` only.
* Golf some proofs that were broken by removal of `set.monotone_prod`.

### [2022-07-05T10:10:27+00:00](https://github.com/leanprover-community/mathlib/commit/dba3dcef3e1932234476296250cf52f61c0a6d87)
feat(measure_theory/function/conditional_expectation): monotonicity of the conditional expectation ([#15024](https://github.com/leanprover-community/mathlib/pull/#15024))




Co-authored-by: RemyDegenne <Remydegenne@gmail.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2022-07-05T10:10:26+00:00](https://github.com/leanprover-community/mathlib/commit/676e77255648ae8232ce83e845b05263a5399097)
refactor(analysis/convex/specific_functions): Remove hypothesis from `deriv_sqrt_mul_log` ([#15015](https://github.com/leanprover-community/mathlib/pull/#15015))

This PR removes the `hx : 0 < x` hypothesis from `deriv_sqrt_mul_log`.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-07-05T08:48:19+00:00](https://github.com/leanprover-community/mathlib/commit/83eda07ea8e676f06906c3635172c69aacc264c7)
refactor(data/real/ennreal): golf, generalize ([#14996](https://github.com/leanprover-community/mathlib/pull/#14996))

## Add new lemmas

* `ennreal.bit0_strict_mono`, `ennreal.bit0_injective`, `ennreal.bit0_lt_bit0`, `ennreal.bit0_le_bit0`, `ennreal.bit0_top`;
* `ennreal.bit1_strict_mono`, `ennreal.bit1_injective`, `ennreal.bit1_lt_bit1`, `ennreal.bit1_le_bit1`, `ennreal.bit1_top`;
* `ennreal.div_eq_inv_mul`, `ennreal.of_real_mul'`;
* `filter.eventually.prod_nhds`.

## Generalize lemmas

* Drop unneeded assumption in `real.to_nnreal_bit0` and `ennreal.of_real_bit0`.

## Rename lemmas

* `ennreal.mul_div_cancel` → `ennreal.div_mul_cancel`, fixing a TODO;
* `prod_is_open.mem_nhds` → `prod_mem_nhds`: there are no open sets in the statement.

## Other changes

* Golf some proofs.
* Avoid non-final `simp`s here and there.
* Move `mul_inv_cancel` etc up to use them in other proofs.
* Move some `to_nnreal` lemmas above `to_real` lemmas, use them in `to_real` lemmas.
* Use `to_dual` in `order_iso.inv_ennreal`.

### [2022-07-04T23:23:06+00:00](https://github.com/leanprover-community/mathlib/commit/188609338b21a790a008b01334aaf9668994b1be)
chore(analysis/calculus/deriv): make the exponent explicit in pow lemmas ([#15117](https://github.com/leanprover-community/mathlib/pull/#15117))

This is useful to build derivatives for explicit functions using dot notation.

### [2022-07-04T21:37:31+00:00](https://github.com/leanprover-community/mathlib/commit/73d15d772e8b97c511da46925888ea7ac040679b)
feat(number_theory/wilson): add Wilson's Theorem ([#14717](https://github.com/leanprover-community/mathlib/pull/#14717))

The previous "Wilson's lemma" (zmod.wilsons_lemma) was a single direction of the iff for Wilson's Theorem. This finishes the proof by adding the (admittedly, much simpler) direction where, if the congruence is satisfied for `n`, then `n` is prime.

### [2022-07-04T20:40:33+00:00](https://github.com/leanprover-community/mathlib/commit/06ac34b847b44c53c0992ccc582c42d3b7711ddd)
feat(analysis/special_functions/complex/arg): `continuous_at_arg_coe_angle` ([#14980](https://github.com/leanprover-community/mathlib/pull/#14980))

Add the lemma that `complex.arg`, coerced to `real.angle`, is
continuous except at 0.

### [2022-07-04T19:58:37+00:00](https://github.com/leanprover-community/mathlib/commit/8f391f56393ba2196b1dcceb6dc587efef07462c)
feat(geometry/euclidean/basic): `continuous_at_angle` ([#15021](https://github.com/leanprover-community/mathlib/pull/#15021))

Add lemmas that (unoriented) angles are continuous, as a function of a
pair of vectors or a triple of points, except where one of the vectors
is zero or one of the end points equals the middle point.

### [2022-07-04T17:12:28+00:00](https://github.com/leanprover-community/mathlib/commit/407f39b0090e286126a67871dcad81bfefb70b90)
chore(ring_theory/matrix_algebra): golf using `matrix.map` ([#15040](https://github.com/leanprover-community/mathlib/pull/#15040))

This replaces terms of the form `λ i j, a * algebra_map R A (m i j)` with the defeq `a • m.map (algebra_map R A)`, as then we get access to the API about `map`.

This also leverages existing bundled maps to avoid reproving linearity in the auxiliary constructions, removing `to_fun` and `to_fun_right_linear` as we can construct `to_fun_bilinear` directly with ease.

### [2022-07-04T01:38:58+00:00](https://github.com/leanprover-community/mathlib/commit/051dffa5c1636e415eec0edb6b9bde2bbd3f032f)
refactor(data/nat/parity): `nat.even_succ` -> `nat.even_add_one` ([#14917](https://github.com/leanprover-community/mathlib/pull/#14917))

Change `nat.even_succ` to be analogous to `int.even_add_one`.

### [2022-07-03T17:11:19+00:00](https://github.com/leanprover-community/mathlib/commit/46344b4df5e173b6ce2b4a9a03cdeebfc393babf)
feat(category_theory/limits): bilimit from kernel ([#14452](https://github.com/leanprover-community/mathlib/pull/#14452))

### [2022-07-03T11:47:31+00:00](https://github.com/leanprover-community/mathlib/commit/024a4231815538ac739f52d08dd20a55da0d6b23)
refactor(category_theory): generalise universe levels in preservation statements ([#15067](https://github.com/leanprover-community/mathlib/pull/#15067))

This big refactoring of universe levels in the category theory library allows to express limit preservation statements like exactness of functors which are between categories that are not necessarily in the same universe level. For this change to make sense for fixed diagrams (like coequalizers or binary products), the corresponding index categories, the universe of which so far was pinned to the category they were used for, is now fixed to `Type`.



Co-authored-by: Markus Himmel <markus@himmel-villmar.de>

### [2022-07-03T09:05:56+00:00](https://github.com/leanprover-community/mathlib/commit/6e8f25e15b369ae9050f11bc2ff7441bf702c8e7)
chore(ring_theory/dedekind_domain/ideal): fix style of a lemma statement  ([#15097](https://github.com/leanprover-community/mathlib/pull/#15097))

### [2022-07-02T14:14:01+00:00](https://github.com/leanprover-community/mathlib/commit/9e701b983661e6bad0006dee10ef1467d04e79c6)
feat(ring_theory/dedekind_domain): If `R/I` is isomorphic to `S/J` then the factorisations of `I` and `J` have the same shape ([#11053](https://github.com/leanprover-community/mathlib/pull/#11053))

In this PR, we show that given Dedekind domains `R` and `S` with ideals `I` and `J`respectively, if quotients `R/I` and `S/J` are isomorphic, then the prime factorizations of `I` and `J` have the same shape, i.e. they have the same number of prime factors and up to permutation these prime factors have the same multiplicities. We can then get [the Dedekind-Kummer theorem](https://kconrad.math.uconn.edu/blurbs/gradnumthy/dedekindf.pdf) as a corollary of this statement. 

For previous discussion concerning the structure of this PR and the results it proves, see [#9345](https://github.com/leanprover-community/mathlib/pull/#9345) 

Co-authored-by: Anne Baanen.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-07-02T12:02:23+00:00](https://github.com/leanprover-community/mathlib/commit/4823da237a2739f1b19b483dbda521e865f2a5d7)
feat(data/nat/basic): add `mul_div_mul_comm_of_dvd_dvd` ([#15031](https://github.com/leanprover-community/mathlib/pull/#15031))

Add lemma `mul_div_mul_comm_of_dvd_dvd (hac : c ∣ a) (hbd : d ∣ b) : (a * b) / (c * d) = (a / c) * (b / d)`

(Compare with `mul_div_mul_comm`, which holds for a `division_comm_monoid`)

Also adds the same lemma for a `euclidean_domain`.

### [2022-07-02T10:12:17+00:00](https://github.com/leanprover-community/mathlib/commit/2d76f563b76e89f949fd64ec7a4c496a27890b1e)
chore(algebra/associated): make `irreducible` not a class ([#14713](https://github.com/leanprover-community/mathlib/pull/#14713))

This functionality was rarely used and doesn't align with how `irreducible` is used in practice.

In a future PR, we can remove some `unfreezingI`s caused by this.



Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-07-02T04:29:20+00:00](https://github.com/leanprover-community/mathlib/commit/855ed5c1ea224fb80fd220604ee46d35a171f7ed)
chore(scripts): update nolints.txt ([#15090](https://github.com/leanprover-community/mathlib/pull/#15090))

I am happy to remove some nolints for you!

### [2022-07-01T20:56:46+00:00](https://github.com/leanprover-community/mathlib/commit/5654410688ed462345c2a12bdfa578345aaf5f72)
chore(group_theory/group_action/opposite): add a missed smul/scalar rename ([#15082](https://github.com/leanprover-community/mathlib/pull/#15082))

…ename

### [2022-07-01T20:56:45+00:00](https://github.com/leanprover-community/mathlib/commit/774e6803e50669a993cc2307f078ac834b2d7247)
feat(data/fintype/basic): add noncomputable equivalences between finsets as fintypes and `fin s.card`, etc. ([#15080](https://github.com/leanprover-community/mathlib/pull/#15080))

As `s.card` is not defeq to `fintype.card s`, it is convenient to have these definitions in addition to `fintype.equiv_fin` and others (though we omit the computable ones).


Co-authored-by: Wrenna Robson <34025592+linesthatinterlace@users.noreply.github.com>

### [2022-07-01T20:56:44+00:00](https://github.com/leanprover-community/mathlib/commit/9fcf391e97f201b4c12df4c22c62457ac0e67830)
chore(group_theory/group_action/basic): relax monoid to mul_one_class ([#15051](https://github.com/leanprover-community/mathlib/pull/#15051))

### [2022-07-01T20:56:43+00:00](https://github.com/leanprover-community/mathlib/commit/e94e5c083d2a2e83dbac93db4408b998f77f885b)
feat(topology/uniform_space/basic): uniform continuity from/to an infimum of uniform spaces ([#14892](https://github.com/leanprover-community/mathlib/pull/#14892))

This adds uniform versions of various topological lemmas about continuity from/to infimas of topological spaces



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-07-01T18:31:15+00:00](https://github.com/leanprover-community/mathlib/commit/ff5e97ad1a8b6f076e1d4be39d16fec27b5acd62)
feat(order/lattice, data/set): some helper lemmas ([#14789](https://github.com/leanprover-community/mathlib/pull/#14789))

This PR provides lemmas describing when `s ∪ a = t ∪ a`, in both necessary and iff forms, as well as intersection and lattice versions. 



Co-authored-by: Peter Nelson <apnelson@uwaterloo.ca>
Co-authored-by: Kyle Miller <kmill31415@gmail.com>

### [2022-07-01T18:31:14+00:00](https://github.com/leanprover-community/mathlib/commit/7f95e22038f84d68623493e950a7cd636bc26ba6)
feat(linear_algebra/*): add lemma `linear_independent.finite_of_is_noetherian` ([#14714](https://github.com/leanprover-community/mathlib/pull/#14714))

This replaces `fintype_of_is_noetherian_linear_independent` which gave the same
conclusion except demanded `strong_rank_condition R` instead of just `nontrivial R`.

Also some other minor gaps filled.

### [2022-07-01T14:39:25+00:00](https://github.com/leanprover-community/mathlib/commit/2ae2065119209d1eaeae6b25dbb95b2276d4358e)
chore(data/set,topology): fix 2 lemma names ([#15079](https://github.com/leanprover-community/mathlib/pull/#15079))

* rename `set.quot_mk_range_eq` to `set.range_quotient_mk`;
* rename `is_closed_infi_iff` to `is_closed_supr_iff`.

### [2022-07-01T14:39:24+00:00](https://github.com/leanprover-community/mathlib/commit/8b69a4b2d236ae9f7f18271cba49b52c945c64f5)
feat(ring_theory): Some missing lemmas ([#15064](https://github.com/leanprover-community/mathlib/pull/#15064))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2022-07-01T14:39:22+00:00](https://github.com/leanprover-community/mathlib/commit/36ee9aff0d51aebe269a2e3a2cb01627f69fd36a)
feat(topology/separation): `separation_quotient α` is a T₀ space ([#15043](https://github.com/leanprover-community/mathlib/pull/#15043))

### [2022-07-01T14:39:20+00:00](https://github.com/leanprover-community/mathlib/commit/0369f202c567854a686d31b0a3059a41d78efdf5)
feat(order/locally_finite): make `fintype.to_locally_finite_order` computable ([#14733](https://github.com/leanprover-community/mathlib/pull/#14733))

### [2022-07-01T12:26:35+00:00](https://github.com/leanprover-community/mathlib/commit/0522ee08d22add866b162b56764eb4feaeaa1a2e)
refactor(ring_theory/jacobson): remove unnecessary `fintype.trunc_equiv_fin` ([#15077](https://github.com/leanprover-community/mathlib/pull/#15077))

### [2022-07-01T12:26:34+00:00](https://github.com/leanprover-community/mathlib/commit/640955c679ee3982c7764cc80e9ea19b3b88eb65)
refactor(ring_theory/finiteness): remove unnecessary `fintype.trunc_equiv_fin` ([#15076](https://github.com/leanprover-community/mathlib/pull/#15076))

### [2022-07-01T12:26:33+00:00](https://github.com/leanprover-community/mathlib/commit/f9b939c33fbabf66d5fa964be2e7def49bf97f75)
feat(data/nat/enat): simple lemmas on `enat` ([#15029](https://github.com/leanprover-community/mathlib/pull/#15029))

### [2022-07-01T12:26:32+00:00](https://github.com/leanprover-community/mathlib/commit/6e362f68e38aa0fdcacca47a63a404ba43c8c8b6)
chore(algebra/order/monoid): golf proofs, fix docs ([#14728](https://github.com/leanprover-community/mathlib/pull/#14728))

### [2022-07-01T10:20:04+00:00](https://github.com/leanprover-community/mathlib/commit/9e97baaea2ee99d47f1e8103c2f618c2c52fd620)
feat(data/list/basic): add filter_map_join ([#14777](https://github.com/leanprover-community/mathlib/pull/#14777))




Co-authored-by: madvorak <dvorakmartinbridge@seznam.cz>

### [2022-07-01T10:20:03+00:00](https://github.com/leanprover-community/mathlib/commit/e73ac9401e203b14889dba61a9d9d3bd489c2008)
feat (analysis/normed_space/lp_space):add l_infinity ring instances ([#14104](https://github.com/leanprover-community/mathlib/pull/#14104))

We define pointwise multiplication on `lp E ∞` and give it has_mul, non_unital_ring, non_unital_normed_ring, ring, normed_ring, comm_ring and normed_comm_ring instances under the appropriate assumptions.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-07-01T08:11:22+00:00](https://github.com/leanprover-community/mathlib/commit/ce332c115c6fc7b87d4abf0d0dc802913e7e2974)
refactor(algebra/group_power): split ring lemmas into a separate file ([#15032](https://github.com/leanprover-community/mathlib/pull/#15032))

This doesn't actually stop `algebra.ring.basic` being imported into `group_power.basic` yet, but it makes it easier to make that change in future. Two ~300 line files are also slightly easier to manage than one ~600 line file, and ring/add_group feels like a natural place to draw the line

All lemmas have just been moved, and none have been renamed. Some lemmas have had their `R` variables renamed to `M` to better reflect that they apply to monoids with zero.

By grouping together the `monoid_with_zero` lemmas from separate files, it become apparent that there's some overlap.
This PR does not attempt to clean this up, in the interest of limiting the the scope of this change to just moves.

### [2022-07-01T04:21:43+00:00](https://github.com/leanprover-community/mathlib/commit/7e244d8bbdd2d32f0ad33cc553ad1d90325f29f0)
feat(algebra/category/Module): upgrade `free : Type ⥤ Module R` to a monoidal functor ([#14328](https://github.com/leanprover-community/mathlib/pull/#14328))






Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-06-30T21:59:47+00:00](https://github.com/leanprover-community/mathlib/commit/9229b0e04e56e0e31955d5a09d160ae4e90a1220)
chore(data/nat/factorization/basic): delete `import tactic.linarith` ([#15075](https://github.com/leanprover-community/mathlib/pull/#15075))

Removes the import of `tactic.linarith` that's no longer needed.

### [2022-06-30T21:59:46+00:00](https://github.com/leanprover-community/mathlib/commit/e7425e7bbab7bff823628da9f6e41fa445cf351a)
feat(data/fin/basic): `induction_zero` and `induction_succ` lemmas ([#15060](https://github.com/leanprover-community/mathlib/pull/#15060))

This pull request introduces `fin.induction_zero` and `fin.induction_succ` simp lemmas for `fin.induction`, similar to `fin.cases_zero` and `fin.cases_succ` for `fin.cases`.

### [2022-06-30T19:45:49+00:00](https://github.com/leanprover-community/mathlib/commit/806bbb0132ba63b93d5edbe4789ea226f8329979)
refactor(algebra/group/defs): rename has_scalar to has_smul ([#14559](https://github.com/leanprover-community/mathlib/pull/#14559))

Discussion: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/scalar.20smul.20naming.20discrepancy



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-06-30T17:18:22+00:00](https://github.com/leanprover-community/mathlib/commit/c10efa66db3bae14406dd3064f2388ca7e0ec3d8)
refactor(algebra/hom/group): generalize basic API of `monoid_hom` to `monoid_hom_class` ([#14997](https://github.com/leanprover-community/mathlib/pull/#14997))

This PR generalizes part of the basic API of monoid homs to monoid_hom_class. This notably includes things like monoid_hom.mker, submonoid.map and submonoid.comap. I left the namespaces unchanged, for example `monoid_hom.mker` remains the same even though it is now defined for any `monoid_hom_class` morphism; this way dot notation still (mostly) works for actual monoid homs.

### [2022-06-30T12:40:15+00:00](https://github.com/leanprover-community/mathlib/commit/eb852609e908d661c0e31c94fa3fff6d113b9d6e)
feat(topology/compact_open):  continuous_comp left functor C(-, γ) ([#15068](https://github.com/leanprover-community/mathlib/pull/#15068))



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-06-30T06:53:03+00:00](https://github.com/leanprover-community/mathlib/commit/050f9e6d72baa6176e3f31f573e3683b304111be)
feat(number_theory/legendre_symbol/mul_character): alternative implementation ([#14768](https://github.com/leanprover-community/mathlib/pull/#14768))

This is an alternative version of `number_theory/legendre_symbol/mul_character.lean`.

It defines `mul_character R R'` as a `monoid_hom` that sends non-units to zero.
This allows to define a `comm_group` structure on `mul_character R R'`.

There is an alternative implementation in [#14716](https://github.com/leanprover-community/mathlib/pull/#14716) ([side by side comparison](https://github.com/leanprover-community/mathlib/compare/legendre_symbol_mul_char...variant)).

See the [discussion on Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Implementation.20of.20multiplicative.20characters).

### [2022-06-30T04:08:55+00:00](https://github.com/leanprover-community/mathlib/commit/ad154bd0ff7f9b296fff447ec4ac42ebdd5eaf61)
chore(scripts): update nolints.txt ([#15063](https://github.com/leanprover-community/mathlib/pull/#15063))

I am happy to remove some nolints for you!

### [2022-06-29T23:58:49+00:00](https://github.com/leanprover-community/mathlib/commit/5d8810aa2afae9e5c0de9c6ad53f1b7cd244f75c)
feat(set_theory/cardinal/*): simp lemmas for `to_nat` and `to_enat` ([#15059](https://github.com/leanprover-community/mathlib/pull/#15059))

### [2022-06-29T23:58:48+00:00](https://github.com/leanprover-community/mathlib/commit/68452ec1998ff62f33a613e8e36fea3b7e307002)
feat(set_theory/game/pgame): golf `le_trans`  ([#14956](https://github.com/leanprover-community/mathlib/pull/#14956))

This also adds `has_le.le.move_left_lf` and `has_le.le.lf_move_right` to enable dot notation. Note that we already have other pgame lemmas in the `has_le.le` namespace like `has_le.le.not_gf`.

To make this dot notation work even when these lemmas are partially-applied, we swap the arguments of `move_left_lf_of_le` and `lf_move_right_of_le`.

### [2022-06-29T22:22:06+00:00](https://github.com/leanprover-community/mathlib/commit/501c1d4165f9b1894abb96b95701aca042a89910)
feat(linear_algebra/linear_pmap): add has_smul and ext ([#14915](https://github.com/leanprover-community/mathlib/pull/#14915))

Adds the type-class `has_smul` for partially defined linear maps. We proof the ext lemma.



Co-authored-by: Moritz Doll <doll@uni-bremen.de>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-06-29T22:22:05+00:00](https://github.com/leanprover-community/mathlib/commit/a2a8c9be9292ab6a2813ac5ceebb53fb74313a7a)
refactor(ring_theory/graded_algebra): use `add_submonoid_class` to generalize to graded rings ([#14583](https://github.com/leanprover-community/mathlib/pull/#14583))

Now that we have `add_submonoid_class`, we don't need to consider only families of submodules.
For convenience, this keeps around `graded_algebra` as an alias for `graded_ring` over a family of submodules, as this can help with elaboration here and there.

This renames:
* `graded_algebra` to `graded_ring`
* `graded_algebra.proj_zero_ring_hom` to `graded_ring.proj_zero_ring_hom`

adds:
* `direct_sum.decompose_ring_equiv`
* `graded_ring.proj`
* `graded_algebra` (as an alias for a suitable `graded_ring`

and removes:
* `graded_algebra.is_internal`, which was just an alias anyway.


Co-authored-by: Jujian Zhang <jujian.zhang1998@outlook.com>

### [2022-06-29T20:39:00+00:00](https://github.com/leanprover-community/mathlib/commit/1116684d1dd33a3b9076f462896d5f129d6347e1)
chore(set_theory/game/pgame): golf various theorems about relabellings ([#15054](https://github.com/leanprover-community/mathlib/pull/#15054))

### [2022-06-29T20:38:59+00:00](https://github.com/leanprover-community/mathlib/commit/108e3a07c229c358de1d59ced0274338bc11896a)
refactor(group_theory/coset): redefine quotient group to be quotient by action of subgroup ([#15045](https://github.com/leanprover-community/mathlib/pull/#15045))

Given a group `α` and subgroup `s`, redefine the relation `left_rel` ("being in the same left coset") to
```lean
def left_rel : setoid α := mul_action.orbit_rel s.opposite α
```
This means that a quotient group is definitionally a quotient by a group action.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/two.20different.20quotients.20by.20subgroup)

### [2022-06-29T20:38:58+00:00](https://github.com/leanprover-community/mathlib/commit/71985dc5e7819ba989f6409717c07f431eac707a)
feat(field_theory/minpoly): generalize statements about GCD domains ([#14979](https://github.com/leanprover-community/mathlib/pull/#14979))

Currently, the statements about the minimal polynomial over a GCD domain `R` require the element to be in a `K`-algebra, where `K` is the fraction field of `R`. We remove this assumption.

From flt-regular.

### [2022-06-29T20:38:57+00:00](https://github.com/leanprover-community/mathlib/commit/6879dd0c6ded8cab558ebc9e1ee1e66bcf032b4b)
feat(model_theory/satisfiability): The Łoś–Vaught Test ([#14758](https://github.com/leanprover-community/mathlib/pull/#14758))

Provides more API for elementary equivalence
Shows that a `κ`-categorical theory with only infinite models is complete.

### [2022-06-29T18:27:22+00:00](https://github.com/leanprover-community/mathlib/commit/397d45f28d6885036212c976b7b8afecc0751ade)
feat(algebra/order/monoid): `a + b ≤ c → a ≤ c` ([#15033](https://github.com/leanprover-community/mathlib/pull/#15033))

Generalize four lemmas that were left by previous PRs before `canonically_ordered_monoid` was a thing.

### [2022-06-29T18:27:20+00:00](https://github.com/leanprover-community/mathlib/commit/07726e218aa356e32b9f3538d0206e7dec12b181)
chore(analysis/locally_convex/balanced_core_hull): Golf ([#14987](https://github.com/leanprover-community/mathlib/pull/#14987))

Golf and improve lemmas based on the naming convention:
* `balanced_mem` → `balanced_iff_smul_mem`
* `zero_singleton_balanced` → `balanced_zero`
* `balanced_core_emptyset` → `balanced_core_empty`
* `balanced_core_mem_iff` → `mem_balanced_core_iff`
* `balanced_hull_mem_iff` → `mem_balanced_hull_iff`
* `balanced_core_is_closed` → `is_closed.balanced_core`

### [2022-06-29T18:27:19+00:00](https://github.com/leanprover-community/mathlib/commit/478773b8b248e669e6e8536c8104759fd0445927)
chore(data/nat/factorization/basic): golf rec_on_pos_prime_pos_coprime, remove import ([#14935](https://github.com/leanprover-community/mathlib/pull/#14935))

Golf the proof of `rec_on_pos_prime_pos_coprime`, eliminating the need for `tactic.interval_cases`

### [2022-06-29T17:31:54+00:00](https://github.com/leanprover-community/mathlib/commit/ee8d588d889a411ac6e8b0299954c857ef1e56df)
refactor(logic/hydra): use `is_irrefl` ([#15039](https://github.com/leanprover-community/mathlib/pull/#15039))

`is_irrefl` seems to be the more commonly used spelling

### [2022-06-29T14:27:11+00:00](https://github.com/leanprover-community/mathlib/commit/c8ab806ef73c20cab1d87b5157e43a82c205f28e)
feat(tactic/alias.lean): use current namespace in alias ([#14961](https://github.com/leanprover-community/mathlib/pull/#14961))

This makes `alias foo <- bar` use the current namespace to resolve the new alias name `bar`, for consistency with `def bar := foo` and leanprover-community/mathlib4[#293](https://github.com/leanprover-community/mathlib/pull/#293).

### [2022-06-29T14:27:10+00:00](https://github.com/leanprover-community/mathlib/commit/5de765c559b3c1bd98aa4eb230b821b2285baa1c)
feat(linear_algebra/linear_pmap): definition of the graph ([#14920](https://github.com/leanprover-community/mathlib/pull/#14920))

Define the graph of a partial linear map as the pushforward of the graph of the underlying linear map
and prove some elementary facts.



Co-authored-by: Moritz Doll <doll@uni-bremen.de>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-06-29T12:27:59+00:00](https://github.com/leanprover-community/mathlib/commit/aa812bd12a4dbbd2c129b38205f222df282df26d)
chore(group_theory/group_action/basic): split file ([#15044](https://github.com/leanprover-community/mathlib/pull/#15044))

Split the file `group_theory/group_action/basic` to remove the dependency on `group_theory/quotient_group`, moving everything involving quotients to a new file `group_theory/group_action/quotient`.

### [2022-06-29T10:03:54+00:00](https://github.com/leanprover-community/mathlib/commit/ea9dae214472d959780031b1aeccdd7aa8884e67)
refactor(topology/*): Use `disjoint` ([#14950](https://github.com/leanprover-community/mathlib/pull/#14950))

Replace uses of `s ∩ t = ∅` by `disjoint s t` in the topology library. This shortens proofs.

### [2022-06-29T08:02:38+00:00](https://github.com/leanprover-community/mathlib/commit/03374ee307c0dfe61c4056562f825412ca067edd)
feat(algebra/order/field): Linearly ordered semifields ([#15027](https://github.com/leanprover-community/mathlib/pull/#15027))

Define `linear_ordered_semifield` and generalize lemmas within `algebra.order.field`.

### [2022-06-29T02:12:43+00:00](https://github.com/leanprover-community/mathlib/commit/55ec65a6134b68f32687de70fed5f296b4fa924b)
feat(topology/algebra/module/basic): define continuous_(semi)linear_map_class ([#14674](https://github.com/leanprover-community/mathlib/pull/#14674))

This PR brings the morphism refactor to continuous (semi)linear maps. We define `continuous_semilinear_map_class` and `continuous_linear_map_class` in a way that parallels the non-continuous versions, along with a few extras (i.e. `add_monoid_hom_class` instance for `normed_group_hom`).

A few things I was not too sure about:
- When generalizing lemmas to a morphism class rather than a particular type of morphism, I used `𝓕` as the type (instead of just `F` as is done for most `fun_like` types) to avoid clashing with our convention of using `E`, `F`, etc for e.g. vector spaces.
- Namespacing: I placed lemmas like `isometry_of_norm`, `continuous_of_bound`, etc, under the `add_monoid_hom_class` namespace. Maybe the root namespace would make sense here.



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2022-06-28T19:09:05+00:00](https://github.com/leanprover-community/mathlib/commit/08b07a64e688d155e788355b2c722a9a4a7ecb27)
feat(order/succ_pred/basic): tag more lemmas with simp  ([#14998](https://github.com/leanprover-community/mathlib/pull/#14998))

### [2022-06-28T19:09:03+00:00](https://github.com/leanprover-community/mathlib/commit/7db76670d15dbf7c3238d1d216ba985c873cc296)
feat(order/boolean_algebra): Interaction of disjointness and complements ([#14925](https://github.com/leanprover-community/mathlib/pull/#14925))

Prove `disjoint x yᶜ ↔ x ≤ y` and similar, transfer those results to `set`.

Lemma renames
* `subset_compl_iff_disjoint` → `subset_compl_iff_disjoint_right`
* `set.subset_compl_iff_disjoint` → `set.subset_compl_iff_disjoint_right`
* `disjoint_iff_le_compl_left` → `le_compl_iff_disjoint_left`
* `disjoint_iff_le_compl_right` → `le_compl_iff_disjoint_right`

### [2022-06-28T15:21:02+00:00](https://github.com/leanprover-community/mathlib/commit/00c17d657767c048b3c4623c37e8ed28b7e983ea)
feat(algebra/ring/boolean_ring): `bool` is a Boolean ring ([#15004](https://github.com/leanprover-community/mathlib/pull/#15004))

and a few `bool` lemmas.

### [2022-06-28T12:51:25+00:00](https://github.com/leanprover-community/mathlib/commit/78bc3724ad4901b0f586df128b9b44a54a811a60)
feat(data/{finset, set}/basic): tweak `nonempty_coe_sort` and `is_empty_coe_sort` ([#14937](https://github.com/leanprover-community/mathlib/pull/#14937))

This PR does the following:
- add lemmas `set.is_empty_coe_sort` and `finset.is_empty_coe_sort`
- made argument of both `nonempty_coe_sort` lemmas inferred
- fix some spacing

### [2022-06-28T09:03:25+00:00](https://github.com/leanprover-community/mathlib/commit/3594b635e7e1d8b92058f49a4adad7e5807926fa)
feat(probability_theory/independence): if a family of pi-systems is independent, then so are the generated measurable spaces ([#9387](https://github.com/leanprover-community/mathlib/pull/#9387))

The main result in this PR is `Indep_sets.Indep`: if π-systems are independent as sets of sets, then the
measurable space structures they generate are independent. We already had a version of this for two pi-systems instead of a family.

In order to prove this, and as preparation for a next PR about Kolmogorov's 0-1 law, a definition `pi_Union_Inter` is introduced to build a particular pi-system from a family of pi-systems.



Co-authored-by: Rémy Degenne <remydegenne@gmail.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2022-06-28T08:13:29+00:00](https://github.com/leanprover-community/mathlib/commit/728e074e011d3da69f2479bac2f1aafe2fb12f87)
feat(measure_theory/function/lp_order): prove a `normed_lattice_add_comm_group` instance for Lp ([#14999](https://github.com/leanprover-community/mathlib/pull/#14999))




Co-authored-by: RemyDegenne <Remydegenne@gmail.com>

### [2022-06-28T03:59:01+00:00](https://github.com/leanprover-community/mathlib/commit/dcedc047cf9626a8f635281ffbb28ffe66fa7b7f)
feat(order/symm_diff): Triangle inequality for the symmetric difference ([#14847](https://github.com/leanprover-community/mathlib/pull/#14847))

Prove that `a ∆ c ≤ a ∆ b ⊔ b ∆ c`.

### [2022-06-28T02:30:01+00:00](https://github.com/leanprover-community/mathlib/commit/ae3d572252ee76c0b7ce21a1783d75cb12a222e6)
chore(topology/uniform_space/basic): Make `to_topological_space_inf` and `inf_uniformity` true by definition ([#14912](https://github.com/leanprover-community/mathlib/pull/#14912))

Since the lattice API lets us provide a definition for `inf`, we may as well provide a nice one such that the obvious properties are true by rfl.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-06-28T00:05:04+00:00](https://github.com/leanprover-community/mathlib/commit/cf4d987dcac8bf524043dc3b6371cac9069435f2)
chore(analysis/special_functions/trigonometric/angle): rfl lemmas for nat and int smul actions on angle ([#15003](https://github.com/leanprover-community/mathlib/pull/#15003))

These can't be simp, because the simp-normal form is multiplication.

### [2022-06-28T00:05:02+00:00](https://github.com/leanprover-community/mathlib/commit/37bf8a2ec8d78cd61bdfa40c68276932a198ec54)
chore(topology/separation): Extract `set` product lemma ([#14958](https://github.com/leanprover-community/mathlib/pull/#14958))

Move `prod_subset_compl_diagonal_iff_disjoint` to `data.set.prod`, where it belongs. Delete `diagonal_eq_range_diagonal_map` because it duplicates `set.diagonal_eq_range`. Move `set.disjoint_left`/`set.disjoint_right` to `data.set.basic` to avoid an import cycle.

Make variable semi-implicit in the RHS of `disjoint_left` and `disjoint_right`.

### [2022-06-28T00:05:01+00:00](https://github.com/leanprover-community/mathlib/commit/ee7f38c7f7f080adcd471a2b8c093536c31eeea5)
chore(data/set/basic): remove duplicate `nonempty_insert` in favor of `insert_nonempty` ([#14884](https://github.com/leanprover-community/mathlib/pull/#14884))

This name matches e.g. `univ_nonempty` and `singleton_nonempty`.

### [2022-06-28T00:04:54+00:00](https://github.com/leanprover-community/mathlib/commit/365b2ee5fe488d4c523965ec3634b6aa87ef1d3d)
feat(data/bool): bnot_ne ([#10562](https://github.com/leanprover-community/mathlib/pull/#10562))



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: Yaël Dillies <yael.dillies@gmail.com>

### [2022-06-27T21:32:09+00:00](https://github.com/leanprover-community/mathlib/commit/f6b728f4cfefd9cc67c5433c65e73f3dbd255dd7)
feat(data/finset/pointwise): `•` and `⊆` ([#14968](https://github.com/leanprover-community/mathlib/pull/#14968))

Port `set` lemmas to `finset`. Tag a few more lemmas with `norm_cast`. Add some missing `to_additive` attributes.

### [2022-06-27T21:32:08+00:00](https://github.com/leanprover-community/mathlib/commit/7c6cd38ba73ace52e2d5f4a7ff0dfa33938a9675)
chore(set_theory/game/pgame): remove weird `simp` lemma ([#14954](https://github.com/leanprover-community/mathlib/pull/#14954))

I added this back before there was much API on casting natural numbers to pre-games, as a safeguard in case I used the wrong `1`. In retrospective this theorem was kind of dumb.

### [2022-06-27T21:32:07+00:00](https://github.com/leanprover-community/mathlib/commit/2cdded92a23df0a13c349d884cd1afd9fdbc9e7d)
feat(data/multiset/basic): add multiset.filter_singleton ([#14938](https://github.com/leanprover-community/mathlib/pull/#14938))


Adds a lemma, similar to `finset.filter_singleton`.

### [2022-06-27T21:32:05+00:00](https://github.com/leanprover-community/mathlib/commit/927b4685d65a7dab140b9d8b3b050047f8c07bff)
chore(data/nat/factorization/basic): golf pow_succ_factorization_not_dvd, remove import ([#14936](https://github.com/leanprover-community/mathlib/pull/#14936))

Move `pow_succ_factorization_not_dvd` below `factorization_le_iff_dvd` and use this to golf it, eliminating the need for `tactic.linarith`

### [2022-06-27T21:32:04+00:00](https://github.com/leanprover-community/mathlib/commit/f51286dd22dba3f68269233185d67b4b520e5055)
feat(analysis/locally_convex/bounded): continuous linear image of bounded set is bounded ([#14907](https://github.com/leanprover-community/mathlib/pull/#14907))

This is needed to prove that the usual strong topology on continuous linear maps satisfies `has_continuous_smul`.

### [2022-06-27T21:32:03+00:00](https://github.com/leanprover-community/mathlib/commit/cf50ac12e7677eb514b5e072cc06ea917aac0f7f)
chore(algebra/group/units): mark some lemmas as simp ([#14871](https://github.com/leanprover-community/mathlib/pull/#14871))

These seem like fairly natural candidates for simp lemmas.

### [2022-06-27T21:32:02+00:00](https://github.com/leanprover-community/mathlib/commit/cad1a6c643179245ee3e190e0694ddeaf7c860a1)
feat(set_theory/cardinal/basic): lemmas about `#(finset α)` ([#14850](https://github.com/leanprover-community/mathlib/pull/#14850))

This PR does the following:
- prove `mk_finset_of_fintype : #(finset α) = 2 ^ℕ fintype.card α` for `fintype α`
- rename `mk_finset_eq_mk` to `mk_finset_of_infinite` to match the former
- rename `mk_finset` to `mk_coe_finset` to avoid confusion with these two lemmas

### [2022-06-27T21:32:00+00:00](https://github.com/leanprover-community/mathlib/commit/fef4fb831ef61f6620b59832ae0dc69cff37a73f)
refactor(topology/inseparable): redefine `specializes` and `inseparable` ([#14647](https://github.com/leanprover-community/mathlib/pull/#14647))

* Redefine `specializes` and `inseparable` in terms of `nhds`.
* Review API.
* Define `inseparable_setoid` and `separation_quotient`.
* Add `function.surjective.subsingleton`.

### [2022-06-27T19:03:59+00:00](https://github.com/leanprover-community/mathlib/commit/1cd2bf58b81e95012e85affd182e7fa37747224c)
feat(analysis/special_functions/log/deriv): more power series for log ([#14881](https://github.com/leanprover-community/mathlib/pull/#14881))

This adds a power series expansion for `log ((a + 1) / a)`, and two lemmas that are needed for it. It's planned to be used in the proof of the Stirling formula.

Co-authored-by: nick-kuhn <46423253+nick-kuhn@users.noreply.github.com>



Co-authored-by: Moritz Firsching <firsching@google.com>
Co-authored-by: nick-kuhn <46423253+nick-kuhn@users.noreply.github.com>

### [2022-06-27T16:25:12+00:00](https://github.com/leanprover-community/mathlib/commit/68e01601280234304c984dbb4ecefaf1329a8af2)
chore(data/int/cast): redo [#14890](https://github.com/leanprover-community/mathlib/pull/#14890), moving field-specific lemmas ([#14995](https://github.com/leanprover-community/mathlib/pull/#14995))

In [#14894](https://github.com/leanprover-community/mathlib/pull/#14894), I want to refer to the rational numbers in the definition of a field, meaning we can't have `algebra.field.basic` in the transitive imports of `data.rat.defs`.

Apparently this dependency was re-added, so I'm going to have to split it again...

### [2022-06-27T16:25:11+00:00](https://github.com/leanprover-community/mathlib/commit/2558b3b31d33969bb3ef330982ff131533eebfdd)
feat(*): Upgrade to lean 3.44.1c ([#14984](https://github.com/leanprover-community/mathlib/pull/#14984))

The changes are:

* `reflected a` is now spelt `reflected _ a`, as the argument was made explicit to resolve type resolution issues. We need to add new instances for `with_top` and `with_bot` as these are no longer found via the `option` instance. These new instances are an improvement, as they can now use `bot` and `top` instead of `none`.
* Some nat order lemmas in core have been renamed or had their argument explicitness adjusted.
* `dsimp` now applies `iff` lemmas, which means it can end up making more progress than it used to. This appears to impact `split_ifs` too.
* `opposite.op_inj_iff` shouldn't be proved until after `opposite` is irreducible (where `iff.rfl` no longer works as a proof), otherwise `dsimp` is tricked into unfolding the irreducibility which puts the goal state in a form where no further lemmas can apply.

We skip Lean 3.44.0c because the support in that version for `iff` lemmas in `dsimp` had some unintended consequences which required many undesirable changes.

### [2022-06-27T13:50:22+00:00](https://github.com/leanprover-community/mathlib/commit/05565f4d64c988f5ad3bc97eae5413229c34d01d)
doc(analysis/convex/uniform_convex_space): End of sentence ([#14986](https://github.com/leanprover-community/mathlib/pull/#14986))

I kept the suspense for a month.

### [2022-06-27T13:50:15+00:00](https://github.com/leanprover-community/mathlib/commit/5de7c34683a286cf261cbd19a25bd1793765633f)
feat(order/*): Miscellaneous results about the product order ([#14977](https://github.com/leanprover-community/mathlib/pull/#14977))

`≤`, `<`, `⩿`, `⋖`, `is_bot`, `is_top`, `is_min`, `is_max` in `α × β`.

### [2022-06-27T13:50:14+00:00](https://github.com/leanprover-community/mathlib/commit/f5d2cc8f3355e50cf7972b4906075c6b4ab83416)
feat(measure_theory/function/l1_space): add some integrability lemmas ([#14931](https://github.com/leanprover-community/mathlib/pull/#14931))



Co-authored-by: RemyDegenne <Remydegenne@gmail.com>

### [2022-06-27T13:50:13+00:00](https://github.com/leanprover-community/mathlib/commit/cf8b46d7d220bf453377cece02874284001c7a51)
feat(analysis/convex/special_functions): `sqrt * log` is strictly convex on x>1 ([#14822](https://github.com/leanprover-community/mathlib/pull/#14822))

This convexity result can be used to golf the proof of the main inequality in the proof of Bertrand's postulate ([#8002](https://github.com/leanprover-community/mathlib/pull/#8002)).

### [2022-06-27T13:50:12+00:00](https://github.com/leanprover-community/mathlib/commit/68d29f52a51e1254f8c505a6eec0a5f885121198)
feat(probability/stopping): measurability of sets related to stopping times, under countable/encodable assumptions ([#14750](https://github.com/leanprover-community/mathlib/pull/#14750))

The file already contains similar lemmas under assumptions on the topology of the index set. The new results use countability hypotheses instead.

### [2022-06-27T11:38:35+00:00](https://github.com/leanprover-community/mathlib/commit/331df5a23a2ff0903604ba838e5c029c9c1f93d9)
feat(probability/moments): moments and moment generating function of a real random variable ([#14755](https://github.com/leanprover-community/mathlib/pull/#14755))

This PR defines moments, central moments, moment generating function and cumulant generating function.

### [2022-06-27T11:38:34+00:00](https://github.com/leanprover-community/mathlib/commit/3091b91e699b4db636081af3a2c1d9024dd2eb1c)
feat(probability/stopping): if a filtration is sigma finite, then the measure restricted to the sigma algebra generated by a stopping time is sigma finite ([#14752](https://github.com/leanprover-community/mathlib/pull/#14752))




Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2022-06-27T11:38:33+00:00](https://github.com/leanprover-community/mathlib/commit/72fbe5c31f6a409966b4278d1e1b1f1c1a4eda73)
feat(measure_theory/measure/finite_measure_weak_convergence): Characterize weak convergence of finite measures in terms of integrals of bounded continuous real-valued functions. ([#14578](https://github.com/leanprover-community/mathlib/pull/#14578))

Weak convergence of measures was defined in terms of integrals of bounded continuous nnreal-valued functions. This PR shows the equivalence to the textbook condition in terms of integrals of bounded continuous real-valued functions.

Also the file `measure_theory/measure/finite_measure_weak_convergence.lean` is divided to sections with dosctrings for clarity.



Co-authored-by: kkytola <39528102+kkytola@users.noreply.github.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2022-06-27T09:14:45+00:00](https://github.com/leanprover-community/mathlib/commit/cf0649c5ee81b41fc65e6c736f84dfd4402defc7)
chore(data/sigma/basic): make `sigma.reflect` universe-polymorphic ([#14934](https://github.com/leanprover-community/mathlib/pull/#14934))

### [2022-06-27T07:39:57+00:00](https://github.com/leanprover-community/mathlib/commit/671c7c05f16f2a23f0c32068248728b3f2f3d09b)
chore(algebra/direct_sum/ring): add new `int_cast` and `nat_cast` fields to match `ring` and `semiring` ([#14976](https://github.com/leanprover-community/mathlib/pull/#14976))

This was deliberately left to a follow up in [#12182](https://github.com/leanprover-community/mathlib/pull/#12182)

### [2022-06-27T07:39:56+00:00](https://github.com/leanprover-community/mathlib/commit/af8ca85dec51ac1fe1d3b3fa1fd0103075f8f0c3)
fix(linear_algebra/{exterior,clifford}_algebra/basic): add some missing namespaces ([#14975](https://github.com/leanprover-community/mathlib/pull/#14975))

These lemmas are about the auxiliary `{exterior,clifford}_algebra.graded_algebra.ι` not `{exterior,clifford}_algebra.ι`, so should have `graded_algebra` in their names.
This is a follow up to [#12182](https://github.com/leanprover-community/mathlib/pull/#12182)

### [2022-06-27T04:03:50+00:00](https://github.com/leanprover-community/mathlib/commit/d4f8a45466b2acabe05f748354bbbf94746030ff)
feat(algebra/group/units): add decidability instance for `is_unit` ([#14873](https://github.com/leanprover-community/mathlib/pull/#14873))

This adds a decidability instance for the `is_unit` predicate. See [here](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/Decidability.20of.20.60is_unit.60.20on.20finite.20rings/near/286543269).

### [2022-06-27T03:03:23+00:00](https://github.com/leanprover-community/mathlib/commit/0b18823cf4b828c2293ceb8752e841303f9b695f)
feat(set_theory/game/pgame): make `lt_iff_le_and_lf` true by def-eq ([#14983](https://github.com/leanprover-community/mathlib/pull/#14983))

### [2022-06-27T00:09:16+00:00](https://github.com/leanprover-community/mathlib/commit/894f92bc1800debc5f32502694d8fb894f7cc05c)
refactor(order/upper_lower): Reverse the order on `upper_set` ([#14982](https://github.com/leanprover-community/mathlib/pull/#14982))

Having `upper_set` being ordered by reverse inclusion makes it order-isomorphic to `lower_set` (and antichains once we have them as a type) and it matches the order on `filter`.

### [2022-06-26T23:29:19+00:00](https://github.com/leanprover-community/mathlib/commit/f63d925e7ab50ec3315c00fcd64b99ff4f503757)
feat(combinatorics/simple_graph/clique): The set of cliques ([#14827](https://github.com/leanprover-community/mathlib/pull/#14827))

Define `simple_graph.clique_set`, the `set` analogue to `simple_graph.clique_finset`.

### [2022-06-26T21:36:44+00:00](https://github.com/leanprover-community/mathlib/commit/f2b108e8e97ba393f22bf794989984ddcc1da89b)
refactor(set_theory/cardinal/*): `cardinal.sup` → `supr` ([#14569](https://github.com/leanprover-community/mathlib/pull/#14569))

We remove `cardinal.sup` in favor of `supr`. We tweak many other theorems relating to cardinal suprema in the process.

A noteworthy consequence is that there's no longer universe constraints on the domain and codomain of the functions one takes the supremum of. When one does still have this constraint, one can use `bdd_above_range` to immediately prove their range is bounded above.

<!-- Lemmas `lift_sup_le`, `lift_sup_le_iff`, `lift_sup_le_lift_sup`, and `lift_sup_le_lift_sup'` have been removed by virtue of being trivial consequences of basic lemmas on suprema and `lift_supr`. -->

The result of this PR is the following replacements:

* `cardinal.sup` → `supr`
* `cardinal.le_sup` → `le_csupr`
* `cardinal.sup_le` → `csupr_le'`
* `cardinal.sup_le_sup` → `csupr_mono`
* `cardinal.sup_le_sum` → `cardinal.supr_le_sum`
* `cardinal.sum_le_sup` → `cardinal.sum_le_supr`
* `cardinal.sum_le_sup_lift` → `cardinal.sum_le_supr_lift`
* `cardinal.sup_eq_zero` → `cardinal.supr_of_empty`
* `cardinal.le_sup_iff` → `le_csupr_iff'`
* `cardinal.lift_sup` → `cardinal.lift_supr`
* `cardinal.lift_sup_le` → `cardinal.lift_supr` + `csupr_le'`
* `cardinal.lift_sup_le_iff` → `cardinal.lift_supr` + `csupr_le_iff`
* `cardinal.lift_sup_le_lift_sup` → `cardinal.lift_supr` + `csupr_le_iff'`
* `cardinal.lift_sup_le_lift_sup'` → `cardinal.lift_supr` + `csupr_mono'`
* `cardinal.sup_lt_lift` → `cardinal.supr_lt_lift`
* `cardinal.sup_lt` → `cardinal.supr_lt`

### [2022-06-26T19:48:44+00:00](https://github.com/leanprover-community/mathlib/commit/33112c45909c0cdf7ec13d1bf0f810079d0373d3)
feat(data/nat/totient): more general multiplicativity lemmas for totient ([#14842](https://github.com/leanprover-community/mathlib/pull/#14842))

Adds lemmas: 
`totient_gcd_mul_totient_mul : φ (a.gcd b) * φ (a * b) = φ a * φ b * (a.gcd b)`
`totient_super_multiplicative : φ a * φ b ≤ φ (a * b)`

`totient_gcd_mul_totient_mul` is Theorem 2.5(b) in Apostol (1976) Introduction to Analytic Number Theory.

Developed while reviewing @CBirkbeck 's [#14828](https://github.com/leanprover-community/mathlib/pull/#14828)

### [2022-06-26T18:50:48+00:00](https://github.com/leanprover-community/mathlib/commit/381733a5f1e9048e6a8fff7591d2fce061c556c1)
feat(analysis/convex/stone_separation): Stone's separation theorem ([#14677](https://github.com/leanprover-community/mathlib/pull/#14677))

Disjoint convexes can be separated by a convex whose complement is also convex.

### [2022-06-26T17:01:08+00:00](https://github.com/leanprover-community/mathlib/commit/4111ed94de910d850ae6e6a5861e90105f11c52d)
docs(linear_algebra/invariant_basis_number): Drop a TODO ([#14973](https://github.com/leanprover-community/mathlib/pull/#14973))

This TODO was fixed some time ago by @riccardobrasca, reference the relevant instance in the docstring.

### [2022-06-26T17:01:07+00:00](https://github.com/leanprover-community/mathlib/commit/ca070dd69f9d25ab4409ee3668eb3f910babfafe)
feat(analysis/special_functions/trigonometric/angle): topology ([#14969](https://github.com/leanprover-community/mathlib/pull/#14969))

Give `real.angle` the structure of a `topological_add_group` (rather
than just an `add_comm_group`), so that it's possible to talk about
continuity for functions involving this type, and add associated
continuity lemmas for `coe : ℝ → angle`, `real.angle.sin` and
`real.angle.cos`.

### [2022-06-26T17:01:06+00:00](https://github.com/leanprover-community/mathlib/commit/28a6f0acfca61e3c522bb3648dbb4b2fa0feb5a5)
feat(set_theory/surreal/basic): add `numeric.mk` lemma, golf ([#14962](https://github.com/leanprover-community/mathlib/pull/#14962))

### [2022-06-26T17:01:05+00:00](https://github.com/leanprover-community/mathlib/commit/54352be4543ae6ca6b0140c12cbb1a8d12803682)
feat(combinatorics/catalan): definition and equality of recursive and explicit definition ([#14869](https://github.com/leanprover-community/mathlib/pull/#14869))

This PR defines the Catalan numbers via the recursive definition $$C (n+1) = \sum_{i=0}^n C (i) * C (n-i)$$. 

Furthermore, it shows that $$ n+1 | \binom {2n}{n}$$ and that the alternative $$C(n)=\frac{1}{n+1} \binom{2n}{n}$$ holds. 

The proof is based on the following stackexchange answer: https://math.stackexchange.com/questions/3304415/catalan-numbers-algebraic-proof-of-the-recurrence-relation which is quite elementary, so that the proof is relatively easy to formalise. 



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2022-06-26T14:56:15+00:00](https://github.com/leanprover-community/mathlib/commit/ee7a886328ac0a149680dcf0b2e0e6c3559fdcbc)
feat({data/{finset,set},order/filter}/pointwise): Missing `smul_comm_class` instances ([#14963](https://github.com/leanprover-community/mathlib/pull/#14963))

Instances of the form `smul_comm_class α β (something γ)`.

### [2022-06-26T12:02:17+00:00](https://github.com/leanprover-community/mathlib/commit/32b08ef840dd25ca2e47e035c5da03ce16d2dc3c)
feat: `add_monoid_with_one`, `add_group_with_one` ([#12182](https://github.com/leanprover-community/mathlib/pull/#12182))

Adds two type classes `add_monoid_with_one R` and `add_group_with_one R` with operations for `ℕ → R` and `ℤ → R`, resp.  The type classes extend `add_monoid` and `add_group` because those seem to be the weakest type classes where such a `+₀₁`-homomorphism is guaranteed to exist.  The `nat.cast` function as well as `coe : ℕ → R` are implemented in terms of `add_monoid_with_one R`, removing the infamous `nat.cast` diamond.  Fixes [#946](https://github.com/leanprover-community/mathlib/pull/#946).

Some lemmas are less general now because the algebraic hierarchy is not fine-grained enough, or because the lawful coercion only exists for monoids and above.  This generality was not used in mathlib as far as I could tell.  For example:
 - `char_p.char_p_to_char_zero` now requires a group instead of a left-cancellative monoid, because we don't have the `add_left_cancel_monoid_with_one` class
 - `nat.norm_cast_le` now requires a seminormed ring instead of a seminormed group, because we don't have `semi_normed_group_with_one`

### [2022-06-26T08:42:14+00:00](https://github.com/leanprover-community/mathlib/commit/871fcd8730a53182048d79e977938e6d9530ac8e)
feat(data/zmod/algebra): add subsingleton instance for zmod-algebras ([#14946](https://github.com/leanprover-community/mathlib/pull/#14946))

This will be used to eliminate a diamond with `galois_field.algebra` in a followup PR.



Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-06-26T08:01:37+00:00](https://github.com/leanprover-community/mathlib/commit/e0ecaa9ed0b9d89f9e3c03a53d571fbe54552369)
feat(set_theory/ordinal/notation): fast growing hierarchy ([#14072](https://github.com/leanprover-community/mathlib/pull/#14072))

Adds a definition `onote.fast_growing` which yields elements of the [fast-growing hierarchy](https://en.wikipedia.org/wiki/Fast-growing_hierarchy) up to and including ε₀. Because it is built on `onote` instead of `ordinal`, the definition is fully computable, and you can work out some small elements. For example `fast_growing_ε₀ 2 = 2048` and `fast_growing_ε₀ 3` is... big.

### [2022-06-26T04:37:04+00:00](https://github.com/leanprover-community/mathlib/commit/cfbb97f7704a1003e00ceffeca29a300b607b240)
feat(data/{finset,set}/basic): More `∪`/`∩` laws ([#14952](https://github.com/leanprover-community/mathlib/pull/#14952))

Specialise lattice lemmas to `set` and `finset`.

### [2022-06-26T04:37:03+00:00](https://github.com/leanprover-community/mathlib/commit/ccb1cf3850454dfb793df26299fe8286d3ddc1a9)
feat(data/set/lattice): Preimages are disjoint iff the sets are disjoint ([#14951](https://github.com/leanprover-community/mathlib/pull/#14951))

Prove `disjoint (f ⁻¹' s) (f ⁻¹' t) ↔ disjoint s t` and `disjoint (f '' s) (f '' t) ↔ disjoint s t` when `f` is surjective/injective. Delete `set.disjoint_preimage` in favor of `disjoint.preimage`. Fix the statement of `set.preimage_eq_empty_iff` (the name referred to the RHS).

### [2022-06-26T03:02:54+00:00](https://github.com/leanprover-community/mathlib/commit/72cff840c2dfad2523d9451425c25b84667d8100)
feat(order/symm_diff): The symmetric difference is involutive ([#14959](https://github.com/leanprover-community/mathlib/pull/#14959))

`a ∆ (a ∆ b) = b` and `b ∆ a ∆ a = b`.

### [2022-06-26T00:12:23+00:00](https://github.com/leanprover-community/mathlib/commit/b8c3e61b886963856e814ce815c8e9353149c102)
refactor(*): Use `finset.Iix`/`finset.Ixi` ([#14448](https://github.com/leanprover-community/mathlib/pull/#14448))

Now that `finset.Iix`/`finset.Ixi` work for empty types, there is no need for `univ.filter (λ j, j < i)` and similar.

### [2022-06-25T21:12:47+00:00](https://github.com/leanprover-community/mathlib/commit/7ee73e4af4d0e8cfb5d2b871e911dd8aa29c8479)
feat(data/fintype/basic): Constructing an equivalence from a left inverse ([#14816](https://github.com/leanprover-community/mathlib/pull/#14816))

When `f : α → β`, `g : β → α` are inverses one way and `card α ≤ card β`, then they form an equivalence.

### [2022-06-25T21:12:46+00:00](https://github.com/leanprover-community/mathlib/commit/881275210af08ca670834e66ebb66ddfe7817eaf)
feat(algebra/field/basic): Semifields ([#14683](https://github.com/leanprover-community/mathlib/pull/#14683))

Define division semirings and semifields.

Co-authored-by: Yury Kudriashov <urkud@ya.ru>

### [2022-06-25T20:02:11+00:00](https://github.com/leanprover-community/mathlib/commit/f9571f0fcba0e25c9f9f6aea823e4077e7854e1f)
feat(analysis/normed*): add instances about balls and spheres ([#14808](https://github.com/leanprover-community/mathlib/pull/#14808))

Non-bc change: `has_inv.inv` on the unit circle is now defined using `has_inv.inv` instead of complex conjugation.

### [2022-06-25T13:57:10+00:00](https://github.com/leanprover-community/mathlib/commit/6f923bd9cb8a36e9db49f63894fdfbb77104e50e)
chore(*): golf ([#14939](https://github.com/leanprover-community/mathlib/pull/#14939))

Some golfs I made while working on a large refactor.

### [2022-06-25T07:57:38+00:00](https://github.com/leanprover-community/mathlib/commit/07c83c81c0016c1ac08e8c9c3f1260c2f4c6ac7f)
feat(linear_algebra/clifford_algebra/of_alternating): extend alternating maps to the exterior algebra ([#14803](https://github.com/leanprover-community/mathlib/pull/#14803))

### [2022-06-24T21:45:08+00:00](https://github.com/leanprover-community/mathlib/commit/4fd263babc93035783de6cac61043bd1b8ae715d)
feat(representation_theory/character): characters of representations ([#14453](https://github.com/leanprover-community/mathlib/pull/#14453))

### [2022-06-24T19:24:10+00:00](https://github.com/leanprover-community/mathlib/commit/8bf85d74b283f36646eedfcca2f0cce31e8227ba)
feat(algebra/indicator_function): add an apply version of `mul_indicator_finset_bUnion` ([#14919](https://github.com/leanprover-community/mathlib/pull/#14919))

### [2022-06-24T19:24:09+00:00](https://github.com/leanprover-community/mathlib/commit/f94a64f7430a0ccc53ef5b4e2f2bf7bcecc3518c)
feat(probability/martingale): add some lemmas for submartingales ([#14904](https://github.com/leanprover-community/mathlib/pull/#14904))

### [2022-06-24T19:24:08+00:00](https://github.com/leanprover-community/mathlib/commit/40fa2d8443e572afbb3feab50c1d58deb81e92e2)
feat(topology/metric_space): a countably generated uniformity is metrizable ([#14052](https://github.com/leanprover-community/mathlib/pull/#14052))

### [2022-06-24T17:15:45+00:00](https://github.com/leanprover-community/mathlib/commit/fe322e1226c990d0d2e2eefc15342173a28eac64)
refactor(algebra/order/monoid): use typeclasses instead of lemmas ([#14848](https://github.com/leanprover-community/mathlib/pull/#14848))

Use `covariant_class`/`contravariant_class` instead of type-specific `mul_le_mul_left` etc lemmas. Also, rewrite some proofs to use API about inequalities on `with_top`/`with_bot` instead of the exact form of the current definition.

### [2022-06-24T15:26:20+00:00](https://github.com/leanprover-community/mathlib/commit/0e5f278d48e9798ef85ff15b5068929c98ed64f4)
feat(linear_algebra/{multilinear, alternating}): add `cod_restrict` and lemmas ([#14927](https://github.com/leanprover-community/mathlib/pull/#14927))

### [2022-06-24T15:26:19+00:00](https://github.com/leanprover-community/mathlib/commit/3e326fcb27efed5f4688d7355b939b17bd62539b)
feat(data/finite/basic): add missing instances ([#14913](https://github.com/leanprover-community/mathlib/pull/#14913))

* Add `finite` instances for `prod`, `pprod`, `sigma`, and `psigma`.
* Don't depend on `classical.choice` in `finite_iff_nonempty_fintype`.
* Move `not_finite_iff_infinite` up, use it to golf some proofs.

### [2022-06-24T15:26:17+00:00](https://github.com/leanprover-community/mathlib/commit/363bbd22b34a1a6b32503278a5c01b8270e77e35)
chore(topology/basic): golf a proof ([#14911](https://github.com/leanprover-community/mathlib/pull/#14911))

### [2022-06-24T15:26:16+00:00](https://github.com/leanprover-community/mathlib/commit/475cf3798b3916dc8807b863e686eed9d5b84718)
refactor(data/polynomial): extract/add lemmas and golf ([#14888](https://github.com/leanprover-community/mathlib/pull/#14888))

+ Extract lemmas `roots_multiset_prod_X_sub_C`, `nat_degree_multiset_prod_X_sub_C_eq_card`, `monic_prod_multiset_X_sub_C` from the proof of `C_leading_coeff_mul_prod_multiset_X_sub_C` in *ring_division.lean*.

+ Add the lemma `exists_prod_multiset_X_sub_C_mul` in *ring_division.lean* and `roots_ne_zero_of_splits` in *splitting_field.lean* and use them to golf `nat_degree_eq_card_roots` The proof of the latter originally depends on `eq_prod_roots_of_splits`, but now the dependency reversed, with `nat_degree_eq_card_roots` now used to golf `eq_prod_roots_of_splits` (and `roots_map` as well).

+ Move `prod_multiset_root_eq_finset_root` and `prod_multiset_X_sub_C_dvd` from *field_division.lean* to *ring_division.lean* and golf the proof of the latter, generalizing `field` to `is_domain`.

+ Remove redundant imports and the lemma `exists_multiset_of_splits`, because it is just one direction of `splits_iff_exists_multiset`, and it follows trivially from `eq_prod_roots_of_splits`. It couldn't be removed before this PR because `roots_map` and `eq_prod_roots_of_splits` depended on it.

+ Golf `splits_of_exists_multiset` (independent of other changes).

### [2022-06-24T15:26:15+00:00](https://github.com/leanprover-community/mathlib/commit/dabb0c61831e2756b1dec9469bf25778a7e3b7d5)
feat(probability/independence): equivalent ways to check indep_fun ([#14814](https://github.com/leanprover-community/mathlib/pull/#14814))

Prove:
- `indep_fun f g μ ↔ ∀ s t, measurable_set s → measurable_set t → μ (f ⁻¹' s ∩ g ⁻¹' t) = μ (f ⁻¹' s) * μ (g ⁻¹' t)`,
- `indep_fun f g μ ↔ ∀ s t, measurable_set s → measurable_set t → indep_set (f ⁻¹' s) (g ⁻¹' t) μ`.

### [2022-06-24T15:26:14+00:00](https://github.com/leanprover-community/mathlib/commit/7c2ad75e9009263a0a7bb19ea7471bd0abb0ef0a)
feat(field_theory.intermediate_field):  intermediate_field.inclusion ([#12596](https://github.com/leanprover-community/mathlib/pull/#12596))




Co-authored-by: Sebastian-Monnet <54352341+Sebastian-Monnet@users.noreply.github.com>
Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-06-24T13:23:16+00:00](https://github.com/leanprover-community/mathlib/commit/e420232b9bd47d510b91b9287227d4143741f164)
feat(data/int/basic): add a better `has_reflect int` instance ([#14906](https://github.com/leanprover-community/mathlib/pull/#14906))

This closes a todo comment in `number_theory.lucas_lehmer`.

This also merges `rat.has_reflect` with `rat.reflect` to match `nat.reflect`.

### [2022-06-24T13:23:15+00:00](https://github.com/leanprover-community/mathlib/commit/f05c49f623bd3b7634ea0df752c10227d56a41ea)
feat(meta/univs): Add a reflect_name tactic, make reflected instances universe polymorphic ([#14766](https://github.com/leanprover-community/mathlib/pull/#14766))

The existing `list.reflect` instance only works for `Type 0`, this version works for `Type u` providing `u` is known.

### [2022-06-24T11:15:40+00:00](https://github.com/leanprover-community/mathlib/commit/8187142bcaed0d4b2d33ed87d9327eba270b00ff)
feat(data/finset/pointwise): `s • t` is the union of the `a • t` ([#14696](https://github.com/leanprover-community/mathlib/pull/#14696))

and a few other results leading to it. Also tag `set.coe_bUnion` with `norm_cast` and rename `finset.image_mul_prod`/`finset.add_image_prod` to `finset.image_mul_product`/`finset.image_add_product`

### [2022-06-24T11:15:39+00:00](https://github.com/leanprover-community/mathlib/commit/6d00cc214b197f94dd7b418e4f4d88e59a317115)
feat(ring_theory/trace): Add `trace_eq_sum_automorphisms`, `norm_eq_prod_automorphisms`, `normal.alg_hom_equiv_aut` ([#14523](https://github.com/leanprover-community/mathlib/pull/#14523))




Co-authored-by: Iván Sadofschi Costa <isadofschi@users.noreply.github.com>

### [2022-06-24T09:56:29+00:00](https://github.com/leanprover-community/mathlib/commit/efe794c39a034b25ee5fc7fc595c26eb314bc9eb)
chore(order/filter): turn `tendsto_id'` into an `iff` lemma ([#14791](https://github.com/leanprover-community/mathlib/pull/#14791))

### [2022-06-24T09:16:09+00:00](https://github.com/leanprover-community/mathlib/commit/6cefaf4bf12b4b0a1acb81824b5e97e7e593fcb2)
feat(measure_theory/function/conditional_expectation): conditional expectation w.r.t. the restriction of a measure to a set ([#14751](https://github.com/leanprover-community/mathlib/pull/#14751))

We prove `(μ.restrict s)[f | m] =ᵐ[μ.restrict s] μ[f | m]`.

### [2022-06-24T01:29:11+00:00](https://github.com/leanprover-community/mathlib/commit/ac2e9dbf23324304ba329824ff42a877ac8d61a5)
feat(data/real/{e,}nnreal): add some order isomorphisms ([#14900](https://github.com/leanprover-community/mathlib/pull/#14900))

* If `a` is a nonnegative real number, then
  -  `set.Icc (0 : ℝ) (a : ℝ)` is order isomorphic to `set.Iic a`;
  - `set.Iic (a : ℝ≥0∞)` is order isomorphic to `set.Iic a`;
* Also, `ℝ≥0∞` is order isomorphic both to `Iic (1 : ℝ≥0∞)` and to the unit interval in `ℝ`.
* Use the latter fact to golf `ennreal.second_countable_topology`.
* Golf `ennreal.has_continuous_inv` using `order_iso.continuous`.
* Improve definitional equalities for `equiv.subtype_subtype_equiv_subtype_exists`, `equiv.subtype_subtype_equiv_subtype_inter`, `equiv.subtype_subtype_equiv_subtype`, `equiv.set.sep`, use `simps`.

### [2022-06-24T01:29:10+00:00](https://github.com/leanprover-community/mathlib/commit/cb9489303c496c7cd1db5965d65669930f4cb6b7)
refactor(order/complete_lattice): `Sup` lemmas before `Inf` lemmas ([#14868](https://github.com/leanprover-community/mathlib/pull/#14868))

Throughout the file, we make sure that `Sup` theorems always appear immediately before their `Inf` counterparts. This ensures consistency, and makes it much easier to golf theorems or detect missing API.

We choose to put `Sup` before `Inf` rather than the other way around, since this seems to minimize the amount of things that need to be moved around, and it matches the order that we define the two operations.

We also golf a few proofs throughout, and add some missing corresponding theorems, namely:
- `infi_extend_top`
- `infi_supr_ge_nat_add`
- `unary_relation_Inf_iff`
- `binary_relation_Inf_iff`



Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-06-24T01:29:09+00:00](https://github.com/leanprover-community/mathlib/commit/649ca66bf4d62796b5eefef966e622d91aa471f3)
chore(*): Disparate generalizations to division monoids ([#14686](https://github.com/leanprover-community/mathlib/pull/#14686))

The leftover changes from the introduction of `division_monoid`.

### [2022-06-23T23:27:42+00:00](https://github.com/leanprover-community/mathlib/commit/56185bdd5d83c8dd707bc192d5d21e3ff8e9257e)
feat(data/finset): add some lemmas about `finset.disj_union` ([#14910](https://github.com/leanprover-community/mathlib/pull/#14910))




Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-06-23T20:16:37+00:00](https://github.com/leanprover-community/mathlib/commit/198cb64d5c961e1a8d0d3e219feb7058d5353861)
refactor(ring_theory): generalize basic API of `ring_hom` to `ring_hom_class` ([#14756](https://github.com/leanprover-community/mathlib/pull/#14756))

This PR generalizes part of the basic API of ring homs to `ring_hom_class`. This notably includes things like `ring_hom.ker`, `ideal.map` and `ideal.comap`. I left the namespaces unchanged, for example `ring_hom.ker` remains the same even though it is now defined for any `ring_hom_class` morphism; this way dot notation still (mostly) works for actual ring homs.

### [2022-06-23T16:23:10+00:00](https://github.com/leanprover-community/mathlib/commit/44d3fc00c856beb287b6a8b0d2ffed217c737036)
chore(data/nat,int): move field-specific lemmas about cast ([#14890](https://github.com/leanprover-community/mathlib/pull/#14890))

I want to refer to the rational numbers in the definition of a field, meaning we can't have `algebra.field.basic` in the transitive imports of `data.rat.basic`.

This is a step in rearranging those imports: remove the definition of a field from the dependencies of the casts `ℕ → α` and `ℤ → α`, where `α` is a (semi)ring.

### [2022-06-23T16:23:08+00:00](https://github.com/leanprover-community/mathlib/commit/c3e3d1aaa624501a2dd21990967122a4953edc9d)
feat(data/set): replace `set_coe.can_lift` by `subtype.can_lift` ([#14792](https://github.com/leanprover-community/mathlib/pull/#14792))

### [2022-06-23T16:23:07+00:00](https://github.com/leanprover-community/mathlib/commit/4de20c5667c939a204c410768a04fc72aac280d3)
feat(analysis/../log): log_nat_eq_sum_factorization ([#14782](https://github.com/leanprover-community/mathlib/pull/#14782))




Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-06-23T16:23:06+00:00](https://github.com/leanprover-community/mathlib/commit/c2fcf9f1b149dc06e6f576a85a86c04489555ba7)
feat(data/polynomial/erase_lead): Characterizations of polynomials of small support ([#14500](https://github.com/leanprover-community/mathlib/pull/#14500))

This PR adds iff-lemmas `card_support_eq_one`, `card_support_eq_two`, and `card_support_eq_three`. These will be useful for irreducibility of x^n-x-1.

### [2022-06-23T14:10:06+00:00](https://github.com/leanprover-community/mathlib/commit/ef24aced05a4122ac14aeb52b9a436677726122b)
feat(order/hom/basic): some lemmas about order homs and equivs  ([#14872](https://github.com/leanprover-community/mathlib/pull/#14872))

A few lemmas from [#11053](https://github.com/leanprover-community/mathlib/pull/#11053), which I have seperated from the original PR following @riccardobrasca's suggestion. 

Co-authored-by: Eric Weiser <wieser.eric@gmail.com>

### [2022-06-23T14:10:05+00:00](https://github.com/leanprover-community/mathlib/commit/dd2e7add2acd6b9d79ecae160594851ebd1e501a)
feat(analysis/convex/strict_convex_space): isometries of strictly convex spaces are affine ([#14837](https://github.com/leanprover-community/mathlib/pull/#14837))

Add the result that isometries of (affine spaces for) real normed
spaces with strictly convex codomain are affine isometries.  In
particular, this applies to isometries of Euclidean spaces (we already
have the instance that real inner product spaces are uniformly convex
and thus strictly convex).  Strict convexity means the surjectivity
requirement of Mazur-Ulam can be avoided.





Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-06-23T14:10:04+00:00](https://github.com/leanprover-community/mathlib/commit/966bb2457367c2f49b441cc62256a3c480e0a51a)
feat(group_theory/finite_abelian): Structure of finite abelian groups ([#14736](https://github.com/leanprover-community/mathlib/pull/#14736))

Any finitely generated abelian group is the product of a power of `ℤ` and a direct sum of some `zmod (p i ^ e i)` for some prime powers `p i ^ e i`.
Any finite abelian group is a direct sum of some `zmod (p i ^ e i)` for some prime powers `p i ^ e i`.
(TODO : prove uniqueness of this decomposition)

### [2022-06-23T14:10:03+00:00](https://github.com/leanprover-community/mathlib/commit/cff439d8260f4378e6bfbf91c896d42fd0416298)
feat(analysis/seminorm): add add_group_seminorm ([#14336](https://github.com/leanprover-community/mathlib/pull/#14336))

We introduce `add_group_seminorm` and refactor `seminorm` to extend this new definition. This new `add_group_seminorm` structure will also be used in [#14115](https://github.com/leanprover-community/mathlib/pull/#14115) to define `ring_seminorm`.



Co-authored-by: María Inés de Frutos-Fernández <88536493+mariainesdff@users.noreply.github.com>
Co-authored-by: Oliver Nash <github@olivernash.org>

### [2022-06-23T14:10:01+00:00](https://github.com/leanprover-community/mathlib/commit/585a1bf34b683cb3f6c285b66b0548b8287cac27)
feat(number_theory): define ramification index and inertia degree ([#14332](https://github.com/leanprover-community/mathlib/pull/#14332))

We define ramification index `ramification_idx` and inertia degree `inertia_deg` for `P : ideal S` over `p : ideal R` given a ring extension `f : R →+* S`. The literature generally assumes `p` is included in `P`, both are maximal, `R` is the ring of integers of a number field `K` and `S` is the integral closure of `R` in `L`, a finite separable extension of `K`; we relax these assumptions as much as is practical.

### [2022-06-23T11:58:10+00:00](https://github.com/leanprover-community/mathlib/commit/cc4b8e5597b3316ecc32238087a45c30300f2b08)
feat(data/sigma,data/ulift,logic/equiv): add missing lemmas ([#14903](https://github.com/leanprover-community/mathlib/pull/#14903))

Add lemmas and `equiv`s about `plift`, `psigma`, and `pprod`.

### [2022-06-23T10:25:45+00:00](https://github.com/leanprover-community/mathlib/commit/cf2319958c1705877b30b4aef0cd5d965f99352d)
chore(number_theory/lucas_lehmer): remove `has_to_pexpr` instances ([#14905](https://github.com/leanprover-community/mathlib/pull/#14905))

These instances are sort of out-of-place, and aren't really needed anyway.
We already use the more verbose ``%%`(n)`` notation elsewhere in mathlib, which as an operation makes more conceptual sense.


Until [#14901](https://github.com/leanprover-community/mathlib/pull/#14901) these two instances were just special cases of `has_reflect.has_to_pexpr`. While unlike that instance these two instances are not diamond-forming, they're unecessary special cases that make antiquoting harder to understand.

### [2022-06-22T23:55:53+00:00](https://github.com/leanprover-community/mathlib/commit/416edbd3d8e0f13468e493c4af8290b3fb0c4f05)
chore(ring_theory/polynomial/symmetric): golf proofs ([#14866](https://github.com/leanprover-community/mathlib/pull/#14866))

### [2022-06-22T21:42:36+00:00](https://github.com/leanprover-community/mathlib/commit/c45e5d58ce8b5a90e21ee97a7316071a0095169e)
fix(meta/expr): remove `has_reflect.has_to_pexpr` ([#14901](https://github.com/leanprover-community/mathlib/pull/#14901))

This instance (introduced in [#3477](https://github.com/leanprover-community/mathlib/pull/#3477)) forms a diamond with the builtin `pexpr.has_to_pexpr`:
```lean
import meta.expr

#eval show tactic unit, from do
  let i1 : has_to_pexpr pexpr := pexpr.has_to_pexpr,
  let i2 : has_to_pexpr pexpr := has_reflect.has_to_pexpr,
  let e := ``(1),
  let p1 := @to_pexpr _ i1 e,
  let p2 := @to_pexpr _ i2 e,
  guard (p1 = p2) -- fails
```

The consequence is that in cases where `bar` is not a `pexpr` or `expr` but a value to be reflected, ``` ``(foo %%bar) ``` now has to be written ``` ``(foo %%`(bar)) ```; a spelling already used in various existing files.

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming-.2F-tactics/topic/Instance.20diamonds.20in.20has_to_pexpr/near/287083928)

### [2022-06-22T18:31:24+00:00](https://github.com/leanprover-community/mathlib/commit/2a732ed5bed98a55510fc8b9c05eed6bbea2db92)
chore(analysis/special_functions/log/basic): golf a proof ([#14898](https://github.com/leanprover-community/mathlib/pull/#14898))

### [2022-06-22T18:31:23+00:00](https://github.com/leanprover-community/mathlib/commit/23918a541a9e2c72f1983a169bd1cb1a2d7a97bd)
feat(order/filter/basic): add some lemmas about `eventually_le` ([#14891](https://github.com/leanprover-community/mathlib/pull/#14891))




Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-06-22T18:31:21+00:00](https://github.com/leanprover-community/mathlib/commit/12e5f2e018df540baaf34d98329f54a179966854)
refactor(data/set/countable): make `set.countable` protected ([#14886](https://github.com/leanprover-community/mathlib/pull/#14886))

I'm going to add `_root_.countable` typeclass, a data-free version of `encodable`.

### [2022-06-22T18:31:20+00:00](https://github.com/leanprover-community/mathlib/commit/d8fc588d4506484e0aa5cc612b1e8ed411f59da2)
refactor(data/finite/card): split from `basic` ([#14885](https://github.com/leanprover-community/mathlib/pull/#14885))

### [2022-06-22T18:31:18+00:00](https://github.com/leanprover-community/mathlib/commit/c2719adf00b0bf637c9dde38aa73f8781c277044)
feat(topology/basic): `sum.elim` of locally finite set families is locally finite ([#14826](https://github.com/leanprover-community/mathlib/pull/#14826))

### [2022-06-22T18:31:17+00:00](https://github.com/leanprover-community/mathlib/commit/44bb35e5fe380e9cc8896e91ebfdb6e29ff0f3d1)
feat({algebra/big_operators/basic,data/rat/cast}): Missing cast lemmas ([#14824](https://github.com/leanprover-community/mathlib/pull/#14824))

`rat.cast_sum`, `rat.cast_prod` and `nat`, `int` lemmas about `multiset` and `list` big operators.

### [2022-06-22T16:29:05+00:00](https://github.com/leanprover-community/mathlib/commit/38642efc6364cc80f6073acdeb257ec249736702)
chore(data/rat): rename `data.rat.basic` to `data.rat.defs` ([#14895](https://github.com/leanprover-community/mathlib/pull/#14895))

This is a preparatory step for PR [#14893](https://github.com/leanprover-community/mathlib/pull/#14893) that moves only the `field ℚ` instance (and its small set of dependencies) back to `data.rat.basic`; doing this in two moves should produce a neater set of diffs.

### [2022-06-22T16:29:04+00:00](https://github.com/leanprover-community/mathlib/commit/f57c0cdcf5c08330d00e3ca85b01bf2b6587419e)
chore(algebra/{group_power,order}): split off field lemmas ([#14849](https://github.com/leanprover-community/mathlib/pull/#14849))

I want to refer to the rational numbers in the definition of a field, meaning we can't have `algebra.field.basic` in the transitive imports of `data.rat.basic`.

This is half of rearranging those imports: remove the definition of a field from the dependencies of basic lemmas about `nsmul`, `npow`, `zsmul` and `zpow`.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2022-06-22T13:46:51+00:00](https://github.com/leanprover-community/mathlib/commit/d939b0e6a6ede5bf84d45e10be5c7f9dd927841b)
feat(topology/vector_bundle/hom): define the vector bundle of continuous linear maps ([#14541](https://github.com/leanprover-community/mathlib/pull/#14541))

* The changes in `topology/fiber_bundle` are not necessary for this PR, but perhaps nice additions
* Co-authored by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>
* Co-authored by: Patrick Massot <patrick.massot@u-psud.fr>


Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2022-06-22T08:58:26+00:00](https://github.com/leanprover-community/mathlib/commit/ad49768532540f77b87e78601821bc95f06d9546)
feat(set_theory/surreal/basic): define map `surreal →+o game` ([#14783](https://github.com/leanprover-community/mathlib/pull/#14783))

### [2022-06-22T04:11:06+00:00](https://github.com/leanprover-community/mathlib/commit/61b837fb72835e06748e52fce9b824514592e15b)
feat(combinatorics/simple_graph/connectivity): Connectivity is a graph property ([#14865](https://github.com/leanprover-community/mathlib/pull/#14865))

`simple_graph.preconnected` and `simple_graph.connected` are preserved under graph isomorphisms.

### [2022-06-22T02:09:00+00:00](https://github.com/leanprover-community/mathlib/commit/f3cd150bf23503db6a693f369c236da9590066aa)
fix(tactic/apply_fun.lean): instantiate mvars in apply_fun ([#14882](https://github.com/leanprover-community/mathlib/pull/#14882))

Fixes leanprover-community/lean[#733](https://github.com/leanprover-community/mathlib/pull/#733)

### [2022-06-21T16:31:41+00:00](https://github.com/leanprover-community/mathlib/commit/3b6552e051629f68c08f02b32339a8f53076a016)
chore(linear_algebra/alternating): more lemmas about `curry_left` ([#14844](https://github.com/leanprover-community/mathlib/pull/#14844))

This follows on from [#14802](https://github.com/leanprover-community/mathlib/pull/#14802)

### [2022-06-21T16:31:40+00:00](https://github.com/leanprover-community/mathlib/commit/d95377325a26763fa5c2edee4d7e274ddf463a3d)
feat(data/finsupp/basic): make `prod_add_index_of_disjoint` to_additive ([#14786](https://github.com/leanprover-community/mathlib/pull/#14786))

Adds lemma `sum_add_index_of_disjoint (h : disjoint f1.support f2.support) (g : α → M → β) : (f1 + f2).sum g = f1.sum g + f2.sum g`

### [2022-06-21T16:31:39+00:00](https://github.com/leanprover-community/mathlib/commit/3e66afe70ac15bdbc77d475356b6ec085d132937)
feat(data/sigma): add reflected instance ([#14764](https://github.com/leanprover-community/mathlib/pull/#14764))

### [2022-06-21T16:31:38+00:00](https://github.com/leanprover-community/mathlib/commit/b779513a1970da1da843c77062a00a736b5fc3ce)
feat(order/conditionally_complete_lattice): add `cInf_le_cInf'` ([#14719](https://github.com/leanprover-community/mathlib/pull/#14719))

A version of `cInf_le_cInf` for `conditionally_complete_linear_order_bot`

### [2022-06-21T14:57:41+00:00](https://github.com/leanprover-community/mathlib/commit/2d70b94604a93ba1570a59a680c48f9640164a60)
golf(data/polynomial): factorization into linear factors when #roots=degree  ([#14862](https://github.com/leanprover-community/mathlib/pull/#14862))

+ Golf the proofs of `prod_multiset_X_sub_C_of_monic_of_roots_card_eq` and `C_leading_coeff_mul_prod_multiset_X_sub_C` and move them from *splitting_field.lean* to *ring_division.lean*; instead of using the former to deduce the latter as is currently done in mathlib, we prove the latter first and deduce the former easily. Remove the less general auxiliary, `private` `_of_field` versions.

+ Move `pairwise_coprime_X_sub` from *field_division.lean* to *ring_division.lean*. Rename it to `pairwise_coprime_X_sub_C` to conform with existing convention. Golf its proof using the more general new lemma `is_coprime_X_sub_C_of_is_unit_sub`.

+ Golf `monic.irreducible_of_irreducible_map`, but it's essentially the same proof.

### [2022-06-21T14:57:40+00:00](https://github.com/leanprover-community/mathlib/commit/ee12362853ab6332561d7a65a3b1ef6055285a92)
feat(topology/metric_space/basic): Add `ball_comm` lemmas ([#14858](https://github.com/leanprover-community/mathlib/pull/#14858))

This adds `closed_ball` and `sphere` comm lemmas to go with the existing `mem_ball_comm`.

### [2022-06-21T13:23:46+00:00](https://github.com/leanprover-community/mathlib/commit/2b5a57707e1234cbd674706512de53d79b7ca754)
doc(data/polynomial/div): fix runaway code block ([#14864](https://github.com/leanprover-community/mathlib/pull/#14864))

Also use a fully-qualilfied name for linking

### [2022-06-21T13:23:45+00:00](https://github.com/leanprover-community/mathlib/commit/65031cafd5a664d09aad32f4642ee2af0dc63a59)
feat(ring_theory/dedekind_domain/ideal): drop an unneeded assumption ([#14444](https://github.com/leanprover-community/mathlib/pull/#14444))




Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2022-06-21T11:26:39+00:00](https://github.com/leanprover-community/mathlib/commit/273986addceffb690ee697b9738a9e5231ecd64c)
fix(topology/algebra/group_completion): add lemmas about nsmul and zsmul and fix diamonds ([#14846](https://github.com/leanprover-community/mathlib/pull/#14846))

This prevents a diamond forming between `uniform_space.completion.has_scalar` and the default `add_monoid.nsmul` and `sub_neg_monoid.zsmul` fields; by manually defining the latter to match the former.

To do this, we add two new instances of `has_uniform_continuous_smul` for nat- and int- actions.

To use the existing scalar actions, we had to shuffle the imports around a bit.

### [2022-06-21T11:26:38+00:00](https://github.com/leanprover-community/mathlib/commit/2a7bde04efed02d562658cefb5901ab884ce124d)
feat(data{finset,set}/pointwise): Pointwise monoids are domains ([#14687](https://github.com/leanprover-community/mathlib/pull/#14687))

`no_zero_divisors`/`no_zero_smul_divisors` instances for `set` and `finset`.

### [2022-06-21T09:14:05+00:00](https://github.com/leanprover-community/mathlib/commit/481f991077bfdc8ef82d907f87b721222499920e)
refactor(algebra/{hom/equiv, ring/equiv}): rename `equiv_of_unique_of_unique` to `equiv_of_unique` ([#14861](https://github.com/leanprover-community/mathlib/pull/#14861))

This matches [`equiv.equiv_of_unique`](https://leanprover-community.github.io/mathlib_docs/logic/equiv/basic.html#equiv.equiv_of_unique).

### [2022-06-21T07:18:59+00:00](https://github.com/leanprover-community/mathlib/commit/e1d7cc70f78c8c125dea05b0bb2b7111f9d7d503)
chore(set_theory/game/*): create `pgame` and `natural_ops` locales ([#14856](https://github.com/leanprover-community/mathlib/pull/#14856))

### [2022-06-21T07:18:57+00:00](https://github.com/leanprover-community/mathlib/commit/67e026c8ed8490ab0654b849afc71f5851d5d3e2)
fix(tactic/norm_num): fix bad proof / bad test ([#14852](https://github.com/leanprover-community/mathlib/pull/#14852))

This is a bug in master but it was first noticed in [#14683](https://github.com/leanprover-community/mathlib/pull/#14683).

### [2022-06-21T05:57:01+00:00](https://github.com/leanprover-community/mathlib/commit/8ac19d32db225d10374c261c3ceec8cadea68f62)
chore(data/finsupp/fin): fix spacing ([#14860](https://github.com/leanprover-community/mathlib/pull/#14860))

### [2022-06-21T04:38:57+00:00](https://github.com/leanprover-community/mathlib/commit/326465de067685b87d85f353d1f3c619ccf79d02)
chore(set_theory/ordinal/natural_ops): use derive ([#14859](https://github.com/leanprover-community/mathlib/pull/#14859))

### [2022-06-21T01:37:43+00:00](https://github.com/leanprover-community/mathlib/commit/3b5441cb84c0b2899dff1a50b1d27c1d2703ce22)
feat(data/fintype/basic): equivalence between `finset α` and `set α` for `fintype α` ([#14840](https://github.com/leanprover-community/mathlib/pull/#14840))

Co-authored-by: Kyle Miller <kmill31415@gmail.com>

### [2022-06-21T00:01:30+00:00](https://github.com/leanprover-community/mathlib/commit/87f4758022756908a610403928ae52d2b202d2a0)
feat(polynomial/ring_division): strengthen/generalize various lemmas ([#14839](https://github.com/leanprover-community/mathlib/pull/#14839))

+ Generalize the assumption `function.injective f` in `le_root_multiplicity_map` to `map f p ≠ 0`. Strictly speaking this is not a generalization because the trivial case `p = 0` is excluded. If one do want to apply the lemma without assuming `p ≠ 0`, they can use the newly introduced `eq_root_multiplicity_map`, which is a strengthening of the original lemma (with the same hypothesis `function.injective f`).

+ Extract some common `variables` from four lemmas.

+ Generalize `eq_of_monic_of_dvd_of_nat_degree_le` to `eq_leading_coeff_mul_of_monic_of_dvd_of_nat_degree_le`: if a polynomial `q` is divisible by a monic polynomial `p` and has degree no greater than `p`, then `q = p`. Also remove the `is_domain` hypothesis and golf the proof.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/multiplicity.20of.20root.20in.20extension.20field/near/286736361)

### [2022-06-20T22:02:23+00:00](https://github.com/leanprover-community/mathlib/commit/125055b09a95ace3413d5ddcaff26dfd71fbcb3d)
refactor(data/sym/basic): change notation for sym.cons ([#14853](https://github.com/leanprover-community/mathlib/pull/#14853))

Switch from `::` to `::ₛ` for `sym.cons` so that it no longer conflicts with `list.cons`. This (finally) puts it in line with other notations, like `::ₘ` for `multiset.cons`.

### [2022-06-20T16:13:29+00:00](https://github.com/leanprover-community/mathlib/commit/9df2762e550f420b4e0f50af7d3e524d02695a80)
chore(data/nat/totient): golf a proof ([#14851](https://github.com/leanprover-community/mathlib/pull/#14851))

### [2022-06-20T13:49:56+00:00](https://github.com/leanprover-community/mathlib/commit/f855a4ba2a7a11f48ed2cdb3f0bcf41f06e58ea4)
feat(order/monotone): Monotonicity of `prod.map` ([#14843](https://github.com/leanprover-community/mathlib/pull/#14843))

If `f` and `g` are monotone/antitone, then `prod.map f g` is as well.

### [2022-06-20T13:49:55+00:00](https://github.com/leanprover-community/mathlib/commit/66d3f897c5cc9251d8d475f65bf01b4cb783caac)
feat(logic/unique): functions from a `unique` type is `const` ([#14823](https://github.com/leanprover-community/mathlib/pull/#14823))

+ A function `f` from a `unique` type is equal to the constant function with value `f default`, and the analogous heq version for dependent functions.

+ Also changes `Π a : α, Sort v` in the file to `α → Sort v`.

Inspired by https://github.com/leanprover-community/mathlib/pull/14724#discussion_r900542203

### [2022-06-20T13:49:54+00:00](https://github.com/leanprover-community/mathlib/commit/0b806ba6d34ff44ca10757631c9b39972ca6b9f1)
docs(linear_algebra): refer to `pi.basis_fun` in `pi.basis` ([#14505](https://github.com/leanprover-community/mathlib/pull/#14505))

This is a common question so the more ways we can point to the standard basis, the better!

See also Zulip thread: https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/Standard.20basis

### [2022-06-20T11:25:39+00:00](https://github.com/leanprover-community/mathlib/commit/c781c0ea0fe52b900ec7e3932e6ef67dffc7bc8e)
feat(data/prod/basic): Involutivity of `prod.map` ([#14845](https://github.com/leanprover-community/mathlib/pull/#14845))

If `f` and `g` are involutive, then so is `prod.map f g`.

### [2022-06-20T11:25:38+00:00](https://github.com/leanprover-community/mathlib/commit/c1abe0611ca4047cff799f84b0d1ccba98c546ce)
refactor(linear_algebra/exterior_algebra): redefine `exterior_algebra` as `clifford_algebra 0` ([#14819](https://github.com/leanprover-community/mathlib/pull/#14819))

The motivation here is to avoid having to duplicate API between these two types, else we end up having to repeat every definition that works on `clifford_algebra Q` on `exterior_algebra` for the case when `Q = 0`. This also:
* Removes `as_exterior : clifford_algebra (0 : quadratic_form R M) ≃ₐ[R] exterior_algebra R M` as the two types are reducibly defeq.
* Removes support for working with exterior algebras over semirings; while it is entirely possible to generalize `clifford_algebra` to semirings to make this removal unnecessary, it creates difficulties with elaboration, and the support for semirings was without mathematical motivation in the first place. This is in line with a [vote on Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Exterior.20algebras.20over.20semiring/near/286660821).

The consequences are:
* A bunch of redundant code can be removed
* `x.reverse` and `x.involute` should now work on `x : exterior_algebra R M`.
* Future API will extend effortlessly from one to the other

### [2022-06-20T11:25:37+00:00](https://github.com/leanprover-community/mathlib/commit/320ea398157fea32a22273674795d7452ed3627a)
feat(data/dfinsupp/basic): add missing lemmas about `single` ([#14815](https://github.com/leanprover-community/mathlib/pull/#14815))

These lemmas were missed in [#13076](https://github.com/leanprover-community/mathlib/pull/#13076):

* `comap_domain_single`
* `comap_domain'_single`
* `sigma_curry_single`
* `sigma_uncurry_single`
* `extend_with_single_zero`
* `extend_with_zero`

These are useful since many induction principles replace a generic `dfinsupp` with `dfinsupp.single`.

### [2022-06-20T11:25:36+00:00](https://github.com/leanprover-community/mathlib/commit/c5e13baac2921ef36831fe3bdc5c84897eb0d248)
feat(algebra/order/pointwise): Supremum of pointwise operations ([#13669](https://github.com/leanprover-community/mathlib/pull/#13669))

Pointwise operations of sets distribute over the (conditional) supremum/infimum.

### [2022-06-20T09:15:57+00:00](https://github.com/leanprover-community/mathlib/commit/f9c339ecf5efb4cf0d911bb3501bd57ca2ef2507)
feat(group_theory/group_action/sigma): Scalar action on a sigma type ([#14825](https://github.com/leanprover-community/mathlib/pull/#14825))

`(Π i, has_scalar α (β i)) → has_scalar α (Σ i, β i)` and similar.

### [2022-06-20T09:15:55+00:00](https://github.com/leanprover-community/mathlib/commit/ff40b2c1a6da5c154363ef616ce098fbe18f1c7f)
chore(algebra/group/basic): lemmas about `bit0`, `bit1`, and addition ([#14798](https://github.com/leanprover-community/mathlib/pull/#14798))

### [2022-06-20T09:15:53+00:00](https://github.com/leanprover-community/mathlib/commit/df50b88ab610f53066a669c9231925a36bcf41d0)
feat(order/filter/bases): basis for directed (b)infi of filters ([#14775](https://github.com/leanprover-community/mathlib/pull/#14775))

### [2022-06-20T09:15:51+00:00](https://github.com/leanprover-community/mathlib/commit/2604c048981f60994a6c4a84cf04f65228e2c108)
feat(number_theory/number_field): add definitions and results about embeddings  ([#14749](https://github.com/leanprover-community/mathlib/pull/#14749))

We consider the embeddings of a number field into an algebraic closed field (of char. 0) and prove some results about those. 

We also prove the ```number_field``` instance  for ```adjoint_root``` of an irreducible polynomial of `ℚ[X]`. 

Co-authored-by: Alex J. Best <alex.j.best@gmail.com>

From flt-regular



Co-authored-by: Xavier-François Roblot <46200072+xroblot@users.noreply.github.com>

### [2022-06-20T09:15:48+00:00](https://github.com/leanprover-community/mathlib/commit/8263a4bf5fa20bb0df6c016449ddc2b51c25db66)
refactor(analysis/complex/upper_half_plane): move topology to a new file ([#14748](https://github.com/leanprover-community/mathlib/pull/#14748))

Also add some instances and lemmas about topology on the upper half plane.

### [2022-06-20T09:15:46+00:00](https://github.com/leanprover-community/mathlib/commit/804afcb0c51e40ebecf3194f4c4f1a85716fd521)
feat(geometry/manifold/diffeomorph): some additions needed for smooth vector bundles ([#14738](https://github.com/leanprover-community/mathlib/pull/#14738))

* Define `diffeomorph.prod_comm`, `diffeomorph.prod_congr`, `diffeomorph.prod_assoc`
* Prove `cont_mdiff_on.comp_cont_mdiff`
* In `fiber_bundle`, define some lemmas for `local_triv_at` that were already there for `local_triv`
* Yes, this PR does a couple different things, but it is still very small
* This is part of [#14412](https://github.com/leanprover-community/mathlib/pull/#14412)

### [2022-06-20T09:15:45+00:00](https://github.com/leanprover-community/mathlib/commit/04f450543e83664b4726d3f2a881529e4910f83b)
feat(analysis/convex/join): Join of sets ([#14676](https://github.com/leanprover-community/mathlib/pull/#14676))

Define the join of two sets as the union of all segments between them.

### [2022-06-20T07:16:13+00:00](https://github.com/leanprover-community/mathlib/commit/29036740fdd650867bbfc0795f05813214d11b63)
refactor(order/conditionally_complete_lattice): tweak `well_founded.conditionally_complete_linear_order_with_bot` ([#14706](https://github.com/leanprover-community/mathlib/pull/#14706))

We change the `well_founded` assumption on `well_founded.conditionally_complete_linear_order_bot` to an equivalent but more convenient `is_well_order` typeclass assumption. As such, we place it in the `is_well_order` namespace.

### [2022-06-20T04:10:04+00:00](https://github.com/leanprover-community/mathlib/commit/ae5b6952ad7a79351d75d0115832ccfa71aa3a9b)
refactor(number_theory/cyclotomic/*): refactor the definition of is_cyclotomic_extension ([#14463](https://github.com/leanprover-community/mathlib/pull/#14463))

We modify the definition of `is_cyclotomic_extension`, requiring the existence of a primitive root of unity rather than a root of the cyclotomic polynomial. This removes almost all the `ne_zero` assumptions.

### [2022-06-20T00:03:55+00:00](https://github.com/leanprover-community/mathlib/commit/10a52752500c56a895ff0f08fc55b78618dd3d58)
feat(analysis/normed/group/basic): `isometry.norm_map_of_map_zero` ([#14836](https://github.com/leanprover-community/mathlib/pull/#14836))

Add the lemma that an isometry of `semi_normed_group`s that preserves
0 preserves the norm.

### [2022-06-19T23:24:05+00:00](https://github.com/leanprover-community/mathlib/commit/cf118ee688c60b686c440f76111d68fc2142bc4d)
feat(analysis/complex/upper_half_plane): add `upper_half_plane.mk` ([#14795](https://github.com/leanprover-community/mathlib/pull/#14795))

### [2022-06-19T17:24:08+00:00](https://github.com/leanprover-community/mathlib/commit/26279c5f549803f63b906d1d0f20bdef94fd8e81)
chore(algebraic_geometry/function_field): fix timeout in `function_field.algebra` ([#14830](https://github.com/leanprover-community/mathlib/pull/#14830))

Reduces `elaboration of function_field.algebra` from ~29.3s to ~0.4s.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/deterministic.20timeout/near/286714162)

### [2022-06-19T16:13:12+00:00](https://github.com/leanprover-community/mathlib/commit/65c9ffb2cc55ad74eafc78d8cc9b5c42f60c8e34)
feat(topology/algebra/infinite_sum) Sums over Z vs sums over N ([#14667](https://github.com/leanprover-community/mathlib/pull/#14667))

This PR adds some functions for handling infinite sums indexed by the integers, relating them to sums over the naturals.

### [2022-06-19T12:34:38+00:00](https://github.com/leanprover-community/mathlib/commit/f460576d02c89ab5a0cd53c214351c291c35ea95)
feat(group_theory/group_action/sum): Scalar action on a sum of types ([#14818](https://github.com/leanprover-community/mathlib/pull/#14818))

`has_scalar α β → has_scalar α γ → has_scalar α (β ⊕ γ)` and similar.

### [2022-06-19T09:55:31+00:00](https://github.com/leanprover-community/mathlib/commit/5dabef86b3c77b404548403dc306252fd66ad4ef)
feat(set_theory/game/basic): Basic lemmas on `inv` ([#13840](https://github.com/leanprover-community/mathlib/pull/#13840))

Note that we've redefined `inv` so that `inv x = 0` when `x ≈ 0`. This is because, in order to lift it to an operation on surreals, we need to prove that equivalent numeric games give equivalent numeric values, and this isn't the case otherwise.



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>
Co-authored-by: Junyan Xu <junyanxumath@gmail.com>
Co-authored-by: Mauricio Collares <mauricio@collares.org>

### [2022-06-19T09:12:48+00:00](https://github.com/leanprover-community/mathlib/commit/69686e7156695bb2b2db1d5655464525174d4c0c)
feat(algebra/category/Module): Tannaka duality for rings ([#14352](https://github.com/leanprover-community/mathlib/pull/#14352))

Obviously this is not the most interesting statement that one might label "Tannaka duality", but perhaps it can get the ball rolling. :-)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-06-19T07:01:49+00:00](https://github.com/leanprover-community/mathlib/commit/7f358d06b087ea83be99b6f44e2008887c887967)
feat(category_theory/preadditive/eilenberg_moore): (Co)algebras over a (co)monad are preadditive ([#14811](https://github.com/leanprover-community/mathlib/pull/#14811))

The category of algebras over an additive monad on a preadditive category is preadditive (and the dual result). 



Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>
Co-authored-by: Markus Himmel <markus@himmel-villmar.de>

### [2022-06-18T19:10:48+00:00](https://github.com/leanprover-community/mathlib/commit/0a5b9eba2570c7671aaf9d1eed5b37af7d3b0d9d)
feat(set_theory/game/pgame): tweak lemmas ([#14810](https://github.com/leanprover-community/mathlib/pull/#14810))

This PR does the following:
- uncurry `le_of_forall_lf` and `le_of_forall_lt`.
- remove `lf_of_exists_le`, as it's made redundant by `lf_of_move_right_le` and `lf_of_le_move_left`.
- golfing.

### [2022-06-18T16:59:43+00:00](https://github.com/leanprover-community/mathlib/commit/4264220c463850512b95af29b1151bd5d9e19ba6)
feat(analysis/asymptotics): add several lemmas ([#14805](https://github.com/leanprover-community/mathlib/pull/#14805))

Also make `𝕜` explicit in `asymptotics.is_O_with_const_one` and `asymptotics.is_O_const_one`.

### [2022-06-18T16:59:42+00:00](https://github.com/leanprover-community/mathlib/commit/100975e9629d5aa006042797ecafcf8cebb15597)
feat(geometry/euclidean/inversion) new file ([#14692](https://github.com/leanprover-community/mathlib/pull/#14692))

* Define `euclidean_geometry.inversion`.
* Prove Ptolemy's inequality.

### [2022-06-18T16:59:41+00:00](https://github.com/leanprover-community/mathlib/commit/92d5fdf8e25dc1e64efc672fc6f598e39f6d82c2)
feat(topology/metric_space/baire): generalize some lemmas ([#14633](https://github.com/leanprover-community/mathlib/pull/#14633))

Add `is_Gδ.dense_{s,b,}Union_interior_of_closed`.

### [2022-06-18T16:59:40+00:00](https://github.com/leanprover-community/mathlib/commit/f1b0402a0aaf487fc69b2c2fe60148c4c3d4d410)
feat(tactic/core + test/list_summands): a function extracting a list of summands from an expression ([#14617](https://github.com/leanprover-community/mathlib/pull/#14617))

This meta def is used in [#13483](https://github.com/leanprover-community/mathlib/pull/#13483), where `move_add` is defined.

A big reason for splitting these 5 lines off the main PR is that they are not in a leaf of the import hierarchy: this hopefully saves lots of CI time, when doing trivial changes to the main PR.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-06-18T15:26:18+00:00](https://github.com/leanprover-community/mathlib/commit/3a8e0a11edcd9068b248e3cb9d8cd3f44d233403)
feat(group_theory/torsion): define the p-primary component of a group ([#14312](https://github.com/leanprover-community/mathlib/pull/#14312))

### [2022-06-18T12:50:23+00:00](https://github.com/leanprover-community/mathlib/commit/3abee0542b353a50cbce24681b321b63c02839ba)
chore(order/pfilter): more `principal` API ([#14759](https://github.com/leanprover-community/mathlib/pull/#14759))

`principal` and `Inf` form a Galois coinsertion.

### [2022-06-18T09:28:02+00:00](https://github.com/leanprover-community/mathlib/commit/39986ae2ecac2b84d00d7bbe665b94f89b6eb66e)
chore(data/nat/lattice): add `nat.infi_of_empty` to match `_root_.infi_of_empty` ([#14797](https://github.com/leanprover-community/mathlib/pull/#14797))

### [2022-06-18T08:28:16+00:00](https://github.com/leanprover-community/mathlib/commit/7fb5ed20fa18d0ace1c4615658114d45235eb490)
feat(data/complex/basic): add `complex.abs_le_sqrt_two_mul_max` ([#14804](https://github.com/leanprover-community/mathlib/pull/#14804))

### [2022-06-17T23:41:50+00:00](https://github.com/leanprover-community/mathlib/commit/bd6b98b22cdb9f13a7e1fd790a8e796d723f8c0f)
feat(linear_algebra/alternating): add more compositional API ([#14802](https://github.com/leanprover-community/mathlib/pull/#14802))

These will be helpful in relating `alternating_map`s to the `exterior_algebra`.
This adds:

* `alternating_map.curry_left`
* `alternating_map.const_linear_equiv_of_is_empty`
* `alternating_map.dom_dom_congr`

### [2022-06-17T23:41:49+00:00](https://github.com/leanprover-community/mathlib/commit/0c476570123ed75211c9fa16654f7ecdd77e9c92)
chore(order/symm_diff): add lemma about `bxor` ([#14801](https://github.com/leanprover-community/mathlib/pull/#14801))

### [2022-06-17T22:43:38+00:00](https://github.com/leanprover-community/mathlib/commit/4ff9e93ef76633add245b45374771ed3e1063e0b)
feat(analysis/complex/basic): add a few lemmas about `dist` on `complex` ([#14796](https://github.com/leanprover-community/mathlib/pull/#14796))

### [2022-06-17T20:37:43+00:00](https://github.com/leanprover-community/mathlib/commit/d2369bcbad7b30ee38dcefae3e563dd4f36a5d13)
feat(data/set/intervals): add two `ssubset` lemmas ([#14793](https://github.com/leanprover-community/mathlib/pull/#14793))

### [2022-06-17T18:57:26+00:00](https://github.com/leanprover-community/mathlib/commit/e23de85c1a0f355e02db196732badf9286402daa)
feat(algebra/algebra/basic) : add ring_hom.equiv_rat_alg_hom ([#14772](https://github.com/leanprover-community/mathlib/pull/#14772))

Proves the equivalence between `ring_hom` and `rat_alg_hom`.

From flt-regular

Co-authored-by: Alex J. Best <alex.j.best@gmail.com>



Co-authored-by: Xavier-François Roblot <46200072+xroblot@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-06-17T17:39:07+00:00](https://github.com/leanprover-community/mathlib/commit/260d472eef32dd64049d3654707b1d30f6273c96)
feat(order/topology/**/uniform*): Lemmas about uniform convergence ([#14587](https://github.com/leanprover-community/mathlib/pull/#14587))

To prove facts about uniform convergence, it is often useful to manipulate the various functions without dealing with the ε's and δ's. To do so, you need auxiliary lemmas about adding/muliplying/etc Cauchy sequences.

This commit adds several such lemmas. It supports [#14090](https://github.com/leanprover-community/mathlib/pull/#14090), which we're slowly transforming to use these lemmas instead of doing direct ε/δ manipulation.





Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2022-06-17T16:27:29+00:00](https://github.com/leanprover-community/mathlib/commit/545f0fb9837ce297da8eae0fec799d70191e97d4)
feat(category_theory/monad/kleisli): dualise kleisli of monad to cokleisli of comonad ([#14799](https://github.com/leanprover-community/mathlib/pull/#14799))

This PR defines the (co)Kleisli category of a comonad, defines the corresponding adjunction, and proves that it gives rise to the original comonad.

### [2022-06-17T15:08:42+00:00](https://github.com/leanprover-community/mathlib/commit/ade72abcc760d1e2f69c2b281560d4fbda36ce8e)
refactor(linear_algebra/quadratic_form/basic): generalize to semiring ([#14303](https://github.com/leanprover-community/mathlib/pull/#14303))

This uses a slightly nicer strategy than the one suggested by @adamtopaz [on Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Exterior.20algebras.20over.20semiring/near/282808284).

The main motivation here is to be able to talk about `0 : quadratic_form R M` even when there is no negation available, as that will let us merge `clifford_algebra`  (which currently requires negation) and `exterior_algebra` (which does not).

It's likely this generalization is broadly not very useful, so this adds a `quadratic_form.of_polar` constructor to preserve the old more convenient API.

Note the `.bib` file changed slightly as I ran the autoformatting tool.

### [2022-06-17T13:35:37+00:00](https://github.com/leanprover-community/mathlib/commit/9c2b8903ed7bc567db5cdf111a241504cf8173b6)
feat(group_theory/sylow): API lemmas for smul and subtype  ([#14521](https://github.com/leanprover-community/mathlib/pull/#14521))

This PR adds some API lemmas for smul and subtype.

### [2022-06-17T11:03:20+00:00](https://github.com/leanprover-community/mathlib/commit/0be36f6ff973023d58cb46e6db66f25b2db6898f)
feat(data/list/of_fn): Add `list.of_fn_add` and `list.of_fn_mul` ([#14370](https://github.com/leanprover-community/mathlib/pull/#14370))

This adds some lemmas to split up lists generated over `fin (n + m)` and `fin (n * m)` into their constituent parts.

It also adds a congr lemma to allow `list.of_fn (λ i : fin n, _)` to be rewritten into `list.of_fn (λ i : fin m, _)` by `simp` when `h : n = m` is available.

I'll need these eventually to prove some things about products of tensor powers.

### [2022-06-17T08:38:50+00:00](https://github.com/leanprover-community/mathlib/commit/e427a0e51f96149d513bb6194580b3ce03dd6c3a)
feat(set/basic, order/boolean_algebra): generalized `compl_comp_compl` ([#14784](https://github.com/leanprover-community/mathlib/pull/#14784))

This PR generalizes `compl_comp_compl` to apply whenever there is a `boolean_algebra` instance. We also make the set parameter of `compl_compl_image` explicit.

### [2022-06-17T01:10:15+00:00](https://github.com/leanprover-community/mathlib/commit/d21469e412f3974c5e773f8e240610d2b049e96f)
feat(set_theory/ordinal/basic): improve docs on `lift`, add `simp` lemmas ([#14599](https://github.com/leanprover-community/mathlib/pull/#14599))

This is pretty much the same thing as [#14596](https://github.com/leanprover-community/mathlib/pull/#14596), just on `ordinal.lift` instead of `cardinal.lift`.

### [2022-06-16T22:34:16+00:00](https://github.com/leanprover-community/mathlib/commit/d0b93faff96ae03e6436baa2b6bc4e5bad53a2a9)
feat(set_theory/{pgame, basic}): Notation for `relabelling`, golfing ([#14155](https://github.com/leanprover-community/mathlib/pull/#14155))

We introduce the notation `≡r` for relabellings between two pre-games. We also golf many theorems on relabellings.

### [2022-06-16T19:20:25+00:00](https://github.com/leanprover-community/mathlib/commit/ae10dceda978370b312f93a53a0e93fd2157d5bf)
feat(algebra/direct_sum/decomposition): add decompositions into a direct sum ([#14626](https://github.com/leanprover-community/mathlib/pull/#14626))

This is a constructive version of `direct_sum.is_internal`, and generalizes the existing `graded_algebra`.

The main user-facing changes are:
* `graded_algebra.decompose` is now spelt `direct_sum.decompose_alg_hom`
* The simp normal form of decomposition is now `direct_sum.decompose`.
* `graded_algebra.support 𝒜 x` is now spelt `(decompose 𝒜 x).support`
* `left_inv` and `right_inv` has swapped, now with meaning "the decomposition is the (left|right) inverse of the canonical map" rather than the other way around

To keep this from growing even larger, I've left `graded_algebra.proj` alone for a future refactor.



Co-authored-by: Jujian Zhang <jujian.zhang1998@outlook.com>

### [2022-06-16T19:20:24+00:00](https://github.com/leanprover-community/mathlib/commit/67da2721856ca153166af8db5f8eb99e149f84ea)
feat(analysis/inner_product_space): Gram-Schmidt Basis ([#14514](https://github.com/leanprover-community/mathlib/pull/#14514))

When the Gram-Schmidt procedure is given a basis, it produces a basis.

This pull request also refactors the lemma `gram_schmidt_span`. The new versions of the lemmas cover the span of `Iio`, the span of `Iic` and the span of the complete set of input vectors. I was also able to remove some type classes in the process.

### [2022-06-16T15:46:22+00:00](https://github.com/leanprover-community/mathlib/commit/988f160d3161d1612a6e6f84c6b87c97f4525a88)
fix(data/rat/basic): Remove incorrect simp attribute ([#14765](https://github.com/leanprover-community/mathlib/pull/#14765))

Remove simp attribute that breaks `field_simp`.

### [2022-06-16T15:46:20+00:00](https://github.com/leanprover-community/mathlib/commit/6c46641df8be7fd1f7d6f4a22739181b5a8d033a)
feat(linear_algebra/clifford_algebra/fold): Add recursors for folding along generators ([#14619](https://github.com/leanprover-community/mathlib/pull/#14619))

This adds `clifford_algebra.fold{l,r}` and `clifford_algebra.{left,right}_induction`.
The former are analogous to `list.foldl` and `list.foldr`, while the latter are two stronger variants of `clifford_algebra.induction`.

We don't bother duplicating these for the `exterior_algebra`, as a future PR will make `exterior_algebra = clifford_algebra 0` true by `rfl`.

This construction can be used to show:
* `clifford_algebra Q ≃ₗ[R] exterior_algebra R M` (when `invertible 2`)
* `clifford_algebra Q ≃ₐ[R] clifford_algebra.even (Q' Q)` (where `Q' Q` is a quadratic form over an augmented `V`)

These will follow in future PRs.

### [2022-06-16T15:46:18+00:00](https://github.com/leanprover-community/mathlib/commit/7584a1040c93d5015aae8246b1872c2062be87e1)
feat(set_theory/game/ordinal): addition of ordinals on games matches natural addition ([#14298](https://github.com/leanprover-community/mathlib/pull/#14298))

### [2022-06-16T12:52:06+00:00](https://github.com/leanprover-community/mathlib/commit/b05d8459e462a16499b14aa138567afa7d48983f)
feat(data/nat/basic): add a few lemmas ([#14718](https://github.com/leanprover-community/mathlib/pull/#14718))

Add a few lemmas about sub and mod.

### [2022-06-16T11:52:28+00:00](https://github.com/leanprover-community/mathlib/commit/3feb151caefe53df080ca6ca67a0c6685cfd1b82)
feat(algebra/homology,category_theory/abelian): exact_comp_mono_iff ([#14410](https://github.com/leanprover-community/mathlib/pull/#14410))

From LTE.

### [2022-06-16T02:53:25+00:00](https://github.com/leanprover-community/mathlib/commit/6834a24e53e2a05e038a0678313782e175a3f91b)
feat(analysis/asymptotics): define `is_Theta` ([#14567](https://github.com/leanprover-community/mathlib/pull/#14567))

* define `f =Θ[l] g` and prove basic properties;
* add `is_O.const_smul_left`, `is_o.const_smul_left`;
* rename `is_O_const_smul_left_iff` and `is_o_const_smul_left_iff` to
  `is_O_const_smul_left` and `is_o_const_smul_left`.

### [2022-06-16T02:00:04+00:00](https://github.com/leanprover-community/mathlib/commit/0053e3c54dbcd120cd1f46e0d64ce352c8cd4c7f)
feat(analysis/special_functions/arsinh): add lemmas, review API ([#14668](https://github.com/leanprover-community/mathlib/pull/#14668))

### [2022-06-16T02:00:03+00:00](https://github.com/leanprover-community/mathlib/commit/22f3255905656c2cd3318365722803e15d3b9a54)
refactor(set_theory/game/*): Delete `winner.lean` ([#14271](https://github.com/leanprover-community/mathlib/pull/#14271))

The file `winner.lean` currently consists of one-line definitions and theorems, including aliases for basic inequalities. This PR removes the file, inlines all previous definitions and theorems, and golfs various proofs in the process.



Co-authored-by: Junyan Xu <junyanxumath@gmail.com>

### [2022-06-15T23:36:05+00:00](https://github.com/leanprover-community/mathlib/commit/f991b4d4039c878ebf5afde537c2d1ef7dfc5557)
chore(*): Bump to Lean 3.43.0 ([#14684](https://github.com/leanprover-community/mathlib/pull/#14684))

Most of the changes in this upgrade are a consequence of https://github.com/leanprover-community/lean/pull/675, which removed almost all of `init/data/set.lean` from lean core so it could be migrated to mathlib. Other relevant core changes are https://github.com/leanprover-community/lean/pull/714, which removed a few order decidability instances, and https://github.com/leanprover-community/lean/pull/711, which caused a docstring to be rejected.

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>



Co-authored-by: Mauricio Collares <mauricio@collares.org>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2022-06-15T21:34:32+00:00](https://github.com/leanprover-community/mathlib/commit/c81c6c91781f12ac7005367a4477dcb2f6be638f)
feat(data/polynomial/erase_lead): `lt_nat_degree_of_mem_erase_lead_support` ([#14745](https://github.com/leanprover-community/mathlib/pull/#14745))

This PR adds a lemma `lt_nat_degree_of_mem_erase_lead_support` and adds term-mode proofs of a couple related lemmas.

### [2022-06-15T21:34:31+00:00](https://github.com/leanprover-community/mathlib/commit/ea2dbcbb9aa111a91edeab41c88d7c90deb077eb)
feat(analysis/special_functions/integrals): Add integral_cpow ([#14491](https://github.com/leanprover-community/mathlib/pull/#14491))

Also adds various helper lemmas.

The purpose of this commit is to provide a computed integral for the `cpow` function. The proof is functionally identical to that of `integral_rpow`, but places a different set of constraints on the various parameters due to different continuity constraints of the cpow function.

Some notes on future improvments:
  * The range of valid integration can be expanded using ae_covers a la [#14147](https://github.com/leanprover-community/mathlib/pull/#14147)
  * We currently only contemplate a real argument. However, this should essentially work for any continuous path in the complex plane that avoids the negative real axis. That would require a lot more machinery, not currently in mathlib.

Despite these restrictions, why is this important? This, Abel summation, [#13500](https://github.com/leanprover-community/mathlib/pull/#13500), and [#14090](https://github.com/leanprover-community/mathlib/pull/#14090) are the key ingredients to bootstrapping Dirichlet series.

### [2022-06-15T21:34:27+00:00](https://github.com/leanprover-community/mathlib/commit/714504372442a8a4657b44faf1794cbb4ba4a0cf)
feat(algebra/group/pi): Technical casework lemma for when two binomials are equal to each other ([#14400](https://github.com/leanprover-community/mathlib/pull/#14400))

This PR adds a technical casework lemma for when two binomials are equal to each other. It will be useful for irreducibility of x^n-x-1. If anyone can see how to golf the proof further, that would be appreciated!

### [2022-06-15T18:51:17+00:00](https://github.com/leanprover-community/mathlib/commit/665cec2519305b3263f53b41c7de54669897afd7)
chore(data/nat/factorization/basic): delete two duplicate lemmas ([#14754](https://github.com/leanprover-community/mathlib/pull/#14754))

Deleting two lemmas introduced in [#14461](https://github.com/leanprover-community/mathlib/pull/#14461) that are duplicates of lemmas already present, as follows:

```
lemma div_factorization_pos {q r : ℕ} (hr : nat.prime r) (hq : q ≠ 0) :
  q / (r ^ (q.factorization r)) ≠ 0 := div_pow_factorization_ne_zero r hq
```

```
lemma ne_dvd_factorization_div {q r : ℕ} (hr : nat.prime r) (hq : q ≠ 0) :
  ¬(r ∣ (q / (r ^ (q.factorization r)))) := not_dvd_div_pow_factorization hr hq
```

### [2022-06-15T18:51:16+00:00](https://github.com/leanprover-community/mathlib/commit/a5832444a4ea679c53c31b237fed19fc7c620673)
feat(representation_theory/Action): a few lemmas about the rigid structure of Action ([#14620](https://github.com/leanprover-community/mathlib/pull/#14620))

### [2022-06-15T18:51:15+00:00](https://github.com/leanprover-community/mathlib/commit/c4ef20e9dfd039160c21b7c551ed5a2f93af9b9f)
feat(order/rel_classes): an irreflexive order on a subsingleton type is a well order ([#14601](https://github.com/leanprover-community/mathlib/pull/#14601))

This generalizes a previously existing lemma that the empty relation on a subsingleton type is a well order.

### [2022-06-15T17:10:38+00:00](https://github.com/leanprover-community/mathlib/commit/94fa33b443d0f30666e304f064f0a086d9f7eb36)
fix(tactic/congrm): support multiple binders ([#14753](https://github.com/leanprover-community/mathlib/pull/#14753))

### [2022-06-15T17:10:37+00:00](https://github.com/leanprover-community/mathlib/commit/430da94fb1fa6d0da31149a8a0244f7c6985f93f)
chore(analysis/normed): move `normed.normed_field` to `normed.field.basic` ([#14747](https://github.com/leanprover-community/mathlib/pull/#14747))

### [2022-06-15T17:10:36+00:00](https://github.com/leanprover-community/mathlib/commit/6a0f967488d65b320e2de1718ad5dd54bf2fb08e)
feat(data/finite/set): `finite` instances for set constructions ([#14673](https://github.com/leanprover-community/mathlib/pull/#14673))

### [2022-06-15T17:10:35+00:00](https://github.com/leanprover-community/mathlib/commit/8eaeec265ece03162f7e9be9391729de07cfc3dd)
chore(a few random files): golfing using the new tactic `congrm` ([#14593](https://github.com/leanprover-community/mathlib/pull/#14593))

This PR is simply intended to showcase some possible applications of the new tactic `congrm`, introduced in [#14153](https://github.com/leanprover-community/mathlib/pull/#14153).




Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2022-06-15T14:55:51+00:00](https://github.com/leanprover-community/mathlib/commit/34ce7847c188e1346e627f195e25c5ce76bbd9f2)
refactor(algebra/group_with_zero/basic): Golf using division monoid lemmas ([#14213](https://github.com/leanprover-community/mathlib/pull/#14213))

Make all eligible `group_with_zero` lemmas one-liners from `division_monoid` ones and group them within the file.

### [2022-06-15T14:55:50+00:00](https://github.com/leanprover-community/mathlib/commit/bbca2890fda447dec3ef1475fa79fb19d000f2c7)
feat(dynamics/periodic_pts): `chain.pairwise` on orbit ([#12991](https://github.com/leanprover-community/mathlib/pull/#12991))

We prove that a relation holds pairwise on an orbit iff it does for `f^[n] x` and `f^[n+1] x` for any `n`.

### [2022-06-15T13:13:12+00:00](https://github.com/leanprover-community/mathlib/commit/46614736c224ab9250240d26eb435877292451ae)
chore(analysis/normed/normed_field): golf 2 proofs ([#14746](https://github.com/leanprover-community/mathlib/pull/#14746))

### [2022-06-15T13:13:11+00:00](https://github.com/leanprover-community/mathlib/commit/dccdef6b5fc29aafa2e84e82d305eea82da671db)
chore(set_theory/ordinal/basic): golf ordinal addition definition ([#14744](https://github.com/leanprover-community/mathlib/pull/#14744))

### [2022-06-15T13:13:10+00:00](https://github.com/leanprover-community/mathlib/commit/d2bfb32bdc6d84b51896e49ce676a3b5d151c260)
feat(analysis/normed_space): range of `norm` ([#14740](https://github.com/leanprover-community/mathlib/pull/#14740))

* Add `exists_norm_eq`, `range_norm`, `range_nnnorm`, and `nnnorm_surjective`.
* Open `set` namespace.

### [2022-06-15T13:13:09+00:00](https://github.com/leanprover-community/mathlib/commit/2aa3fd9489deec10620bc84e87fe12292a80ccf0)
feat(analysis/convex): a convex set is contractible ([#14732](https://github.com/leanprover-community/mathlib/pull/#14732))

### [2022-06-15T13:13:08+00:00](https://github.com/leanprover-community/mathlib/commit/7430d2d4f0fafc91c6c885d18886d93b58e96fe4)
feat(data/complex/exponential): more `simp` lemmas ([#14731](https://github.com/leanprover-community/mathlib/pull/#14731))

Add `simp` attrs and `simp` lemmas.



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2022-06-15T13:13:07+00:00](https://github.com/leanprover-community/mathlib/commit/fee91d74414e681a8b72cb7160e6b5ef0ec2cc0b)
feat(data/fin/vec_notation): add has_reflect instance and tests ([#14670](https://github.com/leanprover-community/mathlib/pull/#14670))

### [2022-06-15T13:13:06+00:00](https://github.com/leanprover-community/mathlib/commit/764d7a908a7dc1e28229e3faae1e79cb20f0b7d7)
feat(probability/stopping): first hitting time ([#14630](https://github.com/leanprover-community/mathlib/pull/#14630))


This PR adds the first hitting time (before some time) and proves that it is a stopping time in the discrete case. 



Co-authored-by: RemyDegenne <Remydegenne@gmail.com>

### [2022-06-15T13:13:04+00:00](https://github.com/leanprover-community/mathlib/commit/947c3c6df7ef87afb13183418de60f03bc2f4ee2)
refactor(order/locally_finite): Allow `finset.Iix`/`finset.Ixi` on empty types ([#14430](https://github.com/leanprover-community/mathlib/pull/#14430))

Define `locally_finite_order_top` and `locally_finite_order_bot` are redefine `Ici`, `Ioi`, `iic`, `Iio` using them. Those new typeclasses are the same as `locally_finite_order` + `order_top`/`order_bot`, except that they allow the empty type, which is a surprisingly useful feature.

### [2022-06-15T11:13:37+00:00](https://github.com/leanprover-community/mathlib/commit/114f5436263d935a5c9c256453bd003a21813c1f)
feat(model_theory/semantics, elementary_maps): Defines elementary equivalence ([#14723](https://github.com/leanprover-community/mathlib/pull/#14723))

Defines elementary equivalence of structures
Shows that the domain and codomain of an elementary map are elementarily equivalent.

### [2022-06-15T11:13:36+00:00](https://github.com/leanprover-community/mathlib/commit/9c40f30ac07217d9fd0f997d99f5350debe9f98a)
refactor(set_theory/game/*): fix theorem names ([#14685](https://github.com/leanprover-community/mathlib/pull/#14685))

Some theorems about `exists` had `forall` in the name, other theorems about swapped `≤` or `⧏` used `le` and `lf` instead of `ge` and `gf`.

We also golf `le_of_forall_lt`.



Co-authored-by: Junyan Xu <junyanxumath@gmail.com>

### [2022-06-15T11:13:35+00:00](https://github.com/leanprover-community/mathlib/commit/c6677234ba6dd948b975038a7d37e7047f43f57f)
feat(model_theory/syntax, semantics): Mapping formulas given maps on terms and relations ([#14466](https://github.com/leanprover-community/mathlib/pull/#14466))

Defines `first_order.language.bounded_formula.map_term_rel`, which maps formulas given maps on terms and maps on relations.

### [2022-06-15T11:13:33+00:00](https://github.com/leanprover-community/mathlib/commit/ea9760683db190f0c7406a6e210913c0c48c9322)
feat(tactic/ring): recursive ring_nf ([#14429](https://github.com/leanprover-community/mathlib/pull/#14429))

As [reported on Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60ring_nf.60.20not.20consistently.20normalizing.3F). This allows `ring_nf` to rewrite inside the atoms of a ring expression, meaning that things like `f (a + b) + c` can simplify in both `+` expressions.

### [2022-06-15T10:32:10+00:00](https://github.com/leanprover-community/mathlib/commit/6e0e270d7426835d09f73a140f0f986d748b8db6)
feat(linear_algebra/matrix): positive definite ([#14531](https://github.com/leanprover-community/mathlib/pull/#14531))

Define positive definite matrices and connect them to positive definiteness of quadratic forms.

### [2022-06-15T09:13:28+00:00](https://github.com/leanprover-community/mathlib/commit/784c70343dcf5484265e31d42c24484e45ee3ba1)
docs(topology/basic): Fix typo in library note ([#14743](https://github.com/leanprover-community/mathlib/pull/#14743))

### [2022-06-15T08:32:58+00:00](https://github.com/leanprover-community/mathlib/commit/1fbe1183eea518b531aca72c62196dbd264a7216)
golf(set_theory/game/pgame): golf `neg_le_neg_iff` ([#14726](https://github.com/leanprover-community/mathlib/pull/#14726))

Also in this PR:

+ slightly golf `subsequent.trans`

+ replace `->` by `→`

+ replace a nonterminal `simp` by `dsimp`

### [2022-06-15T08:32:57+00:00](https://github.com/leanprover-community/mathlib/commit/7958e7dabc61ba7f69d302aa137b43df52804ac2)
chore(analysis/convex/extreme): Make arguments semi-implicit ([#14698](https://github.com/leanprover-community/mathlib/pull/#14698))

Change the definition of `is_extreme` from
```
B ⊆ A ∧ ∀ x₁ x₂ ∈ A, ∀ x ∈ B, x ∈ open_segment 𝕜 x₁ x₂ → x₁ ∈ B ∧ x₂ ∈ B
```
to
```
B ⊆ A ∧ ∀ ⦃x₁⦄, x₁ ∈ A → ∀ ⦃x₂⦄, x₂ ∈ A → ∀ ⦃x⦄, x ∈ B → x ∈ open_segment 𝕜 x₁ x₂ → x₁ ∈ B ∧ x₂ ∈ B
```
and similar for `extreme_points`.

### [2022-06-15T07:00:25+00:00](https://github.com/leanprover-community/mathlib/commit/6b4f3f2b6b4e2d5a25c50cd84d562d1f9c07fd30)
feat(data/nat/prime): prime.even_iff ([#14688](https://github.com/leanprover-community/mathlib/pull/#14688))

Adds a lemma saying that the only even prime is two.

### [2022-06-15T04:54:47+00:00](https://github.com/leanprover-community/mathlib/commit/e86ab0b0a64fc543b820f9866e31101d34fdc947)
refactor(src/algebra/order/monoid): make bot_eq_zero a simp lemma only when the order is linear ([#14553](https://github.com/leanprover-community/mathlib/pull/#14553))

### [2022-06-15T04:54:45+00:00](https://github.com/leanprover-community/mathlib/commit/b4b816c9acaccdd81d2f572e0d09ee321a3eb421)
feat(number_theory/cyclotomic/primitive_roots): generalize finrank lemma  ([#14550](https://github.com/leanprover-community/mathlib/pull/#14550))

We generalize certain results from fields to domains.



Co-authored-by: Eric Rodriguez <ericrboidi@gmail.com>

### [2022-06-15T03:13:18+00:00](https://github.com/leanprover-community/mathlib/commit/38ad656e278f3ce0e5c990ed8ab35e02792ee026)
chore(field_theory/intermediate_field): fix timeout ([#14725](https://github.com/leanprover-community/mathlib/pull/#14725))

+ Remove `@[simps]` from `intermediate_field_map` to reduce `decl post-processing of intermediate_field_map` from 18.3s to 46.4ms (on my machine).

+ Manually provide the two `simp` lemmas previously auto-generated by `@[simps]`. Mathlib compiles even without the two simp lemmas (see commit 1f5a7f1), but I am inclined to keep them in case some other branches/projects are using them.

[Zulip reports](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/deterministic.20timeout/near/285792556) about `intermediate_field_map` causing timeout in two separate branches

### [2022-06-15T03:13:17+00:00](https://github.com/leanprover-community/mathlib/commit/dd4d8e6a218659c2265672a29f8fa0480e66ddb5)
feat(logic/hydra): basic lemmas on `cut_expand` ([#14408](https://github.com/leanprover-community/mathlib/pull/#14408))




Co-authored-by: Junyan Xu <junyanxumath@gmail.com>

### [2022-06-15T03:13:16+00:00](https://github.com/leanprover-community/mathlib/commit/a16f1cfe8fbd0c13c00c6c3034a627f4af9ed185)
feat(set_theory/game/basic): cast inequalities on `pgame` to `game` ([#14405](https://github.com/leanprover-community/mathlib/pull/#14405))

### [2022-06-15T00:05:51+00:00](https://github.com/leanprover-community/mathlib/commit/bf2edb5dff1e47086ef5c93098887e90ae5fc49f)
feat(data/vector/basic): reflected instance for vectors ([#14669](https://github.com/leanprover-community/mathlib/pull/#14669))

This means that a `vector` from a tactic block can be used in an expression.

### [2022-06-15T00:05:50+00:00](https://github.com/leanprover-community/mathlib/commit/b134b2f5cf6dd25d4bbfd3c498b6e36c11a17225)
refactor(set_theory/game/state): rename `pgame.of` to `pgame.of_state` ([#14658](https://github.com/leanprover-community/mathlib/pull/#14658))

This is so that we can redefine `pgame.of x y = {x | y}` in [#14659](https://github.com/leanprover-community/mathlib/pull/#14659). Further, this is just a much clearer name.

### [2022-06-15T00:05:49+00:00](https://github.com/leanprover-community/mathlib/commit/7b2970fa094422e2d0411905fd064284dc390c2e)
feat(set_theory/cardinal/basic): improve docs on `lift`, add `simp` lemmas ([#14596](https://github.com/leanprover-community/mathlib/pull/#14596))

We add some much needed documentation to the `cardinal.lift` API.  We also mark a few extra lemmas with `simp`.

### [2022-06-15T00:05:48+00:00](https://github.com/leanprover-community/mathlib/commit/2e2d51554c7f39bf233e6dcd732e302fca929498)
feat(data/nat/factorization): add lemma `coprime_of_div_pow_factorization` ([#14576](https://github.com/leanprover-community/mathlib/pull/#14576))

Add lemma `coprime_of_div_pow_factorization (hp : prime p) (hn : n ≠ 0) : coprime p (n / p ^ n.factorization p)`

Prompted by [this Zulip question](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/div.20by.20p_adic_val_nat.20is.20coprime).

### [2022-06-14T18:25:05+00:00](https://github.com/leanprover-community/mathlib/commit/16728b3064a1751103e1dc2815ed8d00560e0d87)
feat(topology/homotopy/contractible): a few convenience lemmas ([#14710](https://github.com/leanprover-community/mathlib/pull/#14710))

If `X` and `Y` are homotopy equivalent spaces, then one is
contractible if and only if the other one is contractible.

### [2022-06-14T18:25:02+00:00](https://github.com/leanprover-community/mathlib/commit/05aa9607ee7462d30c36fba74a629c3a55a37daf)
feat(analysis/special_functions/trigonometric/deriv): compare `sinh x` with `x` ([#14702](https://github.com/leanprover-community/mathlib/pull/#14702))

### [2022-06-14T18:24:59+00:00](https://github.com/leanprover-community/mathlib/commit/d5c726051a9ec1b99602821420a27cb4aa65ac1a)
feat(order/monotone): add lemmas about `cmp` ([#14689](https://github.com/leanprover-community/mathlib/pull/#14689))

Also replace `order_dual.cmp_le_flip` with lemmas about `to_dual` and `of_dual`.

### [2022-06-14T17:04:56+00:00](https://github.com/leanprover-community/mathlib/commit/6cdc30d73b33e3342d93dd7c1af183f753acee04)
golf(set_theory/ordinal/basic): golf theorems on `cardinal.ord` and `ordinal.card`  ([#14709](https://github.com/leanprover-community/mathlib/pull/#14709))

### [2022-06-14T15:42:17+00:00](https://github.com/leanprover-community/mathlib/commit/ed033f39e47450018d32d4d30691f121a5143675)
feat(linear_algebra/vandermonde): add lemmas about det equals zero ([#14695](https://github.com/leanprover-community/mathlib/pull/#14695))

Adding two lemmas about when the determinant is zero.
I shortened the first with the help of some code I found in `ring_theory/trace.lean`, lemma `det_trace_matrix_ne_zero'`.



Co-authored-by: Bart Michels <97157072+bartmichels@users.noreply.github.com>

### [2022-06-14T15:42:15+00:00](https://github.com/leanprover-community/mathlib/commit/41eb95875a0b71db5ce2d33f2c673f0feaa7ceef)
feat({tactic + test}/congrm, logic/basic): `congrm = congr + pattern-match` ([#14153](https://github.com/leanprover-community/mathlib/pull/#14153))

This PR defines a tactic `congrm`.  If the goal is an equality, where the sides are "almost" equal, then calling `congrm <expr_with_mvars_for_differences>` will produce goals for each place where the given expression has metavariables and will try to close the goal assuming all equalities have been proven.

For instance,
```
example {a b : ℕ} (h : a = b) : (λ y : ℕ, ∀ z, a + a = z) = (λ x, ∀ z, b + a = z) :=
begin
  congrm λ x, ∀ w, _ + a = w,
  exact h,
end
```
works.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming-.2F-tactics/topic/variant.20syntax.20for.20.60congr'.60)

Co-authored-by: Gabriel Ebner <gebner@gebner.org>



Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2022-06-14T13:35:08+00:00](https://github.com/leanprover-community/mathlib/commit/32d8fc4e69a58cb7f79f32af1d35b231c6fd0f8f)
feat(topology/homeomorph): add `homeomorph.set.univ` ([#14730](https://github.com/leanprover-community/mathlib/pull/#14730))

### [2022-06-14T13:35:07+00:00](https://github.com/leanprover-community/mathlib/commit/1c8f995c35427ceee80ee47107ca3b2c92957671)
feat(analysis/special_functions/exp): add `real.exp_half` ([#14729](https://github.com/leanprover-community/mathlib/pull/#14729))

### [2022-06-14T13:35:06+00:00](https://github.com/leanprover-community/mathlib/commit/da5a737bb3fdf58d5b3c22c6ccf30b294309c73c)
feat(data/complex/basic): ranges of `re`, `im`, `norm_sq`, and `abs` ([#14727](https://github.com/leanprover-community/mathlib/pull/#14727))

### [2022-06-14T13:35:05+00:00](https://github.com/leanprover-community/mathlib/commit/b11f8e7fd6c1fe8b03e284094dbc8830e9499b98)
refactor(algebra/order/group): unify instances ([#14705](https://github.com/leanprover-community/mathlib/pull/#14705))

Drop `group.covariant_class_le.to_contravariant_class_le` etc in favor
of `group.covconv` (now an instance) and a new similar instance
`group.covconv_swap`.

### [2022-06-14T13:35:03+00:00](https://github.com/leanprover-community/mathlib/commit/2b469927d921e99ce3df39a7feefc7b2706c9928)
feat(algebra/algebra/basic): define `alg_hom_class` and `non_unital_alg_hom_class` ([#14679](https://github.com/leanprover-community/mathlib/pull/#14679))

This PR defines `alg_hom_class` and `non_unital_alg_hom_class` as part of the morphism refactor.

### [2022-06-14T13:35:02+00:00](https://github.com/leanprover-community/mathlib/commit/5d18a7220378c67fc49366a77eb5f8dabda20589)
feat(order/{conditionally_complete_lattice,galois_connection): Supremum of `set.image2` ([#14307](https://github.com/leanprover-community/mathlib/pull/#14307))

`Sup` and `Inf` distribute over `set.image2` in the presence of appropriate Galois connections.

### [2022-06-14T13:35:01+00:00](https://github.com/leanprover-community/mathlib/commit/300c4395eac702764528a19be674d873fb1aa9b9)
feat(algebra/lie/weights): the zero root space is the Cartan subalgebra for a Noetherian Lie algebra ([#14174](https://github.com/leanprover-community/mathlib/pull/#14174))

### [2022-06-14T11:24:09+00:00](https://github.com/leanprover-community/mathlib/commit/67dfb57c38a0cea9811c880c676a6543b34195fb)
feat(set_theory/cardinal/cofinality): lemma on subsets of strong limit cardinal ([#14442](https://github.com/leanprover-community/mathlib/pull/#14442))

### [2022-06-14T01:31:50+00:00](https://github.com/leanprover-community/mathlib/commit/7fee0f12df00894e1e545983887435a136ce6869)
fix(data/list/nodup): change `Type` to `Type u` ([#14721](https://github.com/leanprover-community/mathlib/pull/#14721))

Change `Type` to `Type u` in `nodup_iff_nth_ne_nth` and two other lemmas added in [#14371](https://github.com/leanprover-community/mathlib/pull/#14371).

### [2022-06-14T01:31:49+00:00](https://github.com/leanprover-community/mathlib/commit/659983c60a0a88b27394f7145c96400123b1ac04)
feat(logic/equiv/basic): add `Pi_comm` aka `function.swap` as an `equiv` ([#14561](https://github.com/leanprover-community/mathlib/pull/#14561))

### [2022-06-14T01:31:48+00:00](https://github.com/leanprover-community/mathlib/commit/18bf7af32a2bcb2f4b21fc5ae911b6d7e12e97c1)
refactor(algebra/order/monoid): Split field of `canonically_ordered_...` ([#14556](https://github.com/leanprover-community/mathlib/pull/#14556))

Replace
```
(le_iff_exists_add : ∀ a b : α, a ≤ b ↔ ∃ c, b = a + c)
```
by
```
(exists_add_of_le : ∀ {a b : α}, a ≤ b → ∃ c, b = a + c)
(le_self_add : ∀ a b : α, a ≤ a + b)
```
This makes our life easier because
* We can use existing `has_exists_add_of_le` instances to complete the `exists_add_of_le` field, and detect the missing ones.
* No need to substitute `b = a + c` every time.

### [2022-06-13T23:08:36+00:00](https://github.com/leanprover-community/mathlib/commit/2967fae827b2d5ca57d15c7b721fe486c7e4cc63)
refactor(data/option/defs): Swap arguments to `option.elim` ([#14681](https://github.com/leanprover-community/mathlib/pull/#14681))

Make `option.elim` a non-dependent version of `option.rec` rather than a non-dependent version of `option.rec_on`. Same for `option.melim`.

This replaces `option.cons`, and brings `option.elim` in line with `nat.elim`, `sum.elim`, and `iff.elim`.
It addresses the TODO comment added in 22c4291217925c6957c0f5a44551c9917b56c7cf.

### [2022-06-13T21:43:10+00:00](https://github.com/leanprover-community/mathlib/commit/425dfe7607fa50c2c1d72c9818d96258946b6e6d)
feat(set_theory/game/ordinal): golf `to_pgame_birthday` ([#14662](https://github.com/leanprover-community/mathlib/pull/#14662))

### [2022-06-13T19:21:13+00:00](https://github.com/leanprover-community/mathlib/commit/3afafe6b0f4b3a30c936f33bc78d9bbd3b5fc454)
doc(ring_theory/algebraic): clarify docstring ([#14715](https://github.com/leanprover-community/mathlib/pull/#14715))

### [2022-06-13T19:21:12+00:00](https://github.com/leanprover-community/mathlib/commit/b44e742e63d34a074cc89c618acc8b87511efb7d)
feat(category_theory/limits): realise products as pullbacks ([#14322](https://github.com/leanprover-community/mathlib/pull/#14322))

This was mostly done in [#10581](https://github.com/leanprover-community/mathlib/pull/#10581), this just adds the isomorphisms between the objects produced by the `has_limit` API.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-06-13T19:21:11+00:00](https://github.com/leanprover-community/mathlib/commit/a75460f3b9ed01d4e345a4677cc8df90f63956e3)
feat(algebra/module/pid): Classification of finitely generated torsion modules over a PID ([#13524](https://github.com/leanprover-community/mathlib/pull/#13524))

A finitely generated torsion module over a PID is isomorphic to a direct sum of some `R ⧸ R ∙ (p i ^ e i)` where the `p i ^ e i` are prime powers.
(TODO : This part should be generalisable to a Dedekind domain, see https://en.wikipedia.org/wiki/Dedekind_domain#Finitely_generated_modules_over_a_Dedekind_domain . Part of the proof is already generalised).

More generally, a finitely generated module over a PID is isomorphic to the product of a free module and a direct sum of some
`R ⧸ R ∙ (p i ^ e i)`.
(TODO : prove this decomposition is unique.)
(TODO : deduce the structure theorem for finite(ly generated) abelian groups).
- [x] depends on: [#13414](https://github.com/leanprover-community/mathlib/pull/#13414)
- [x] depends on: [#14376](https://github.com/leanprover-community/mathlib/pull/#14376) 
- [x] depends on: [#14573](https://github.com/leanprover-community/mathlib/pull/#14573) 



Co-authored-by: pbazin <75327486+pbazin@users.noreply.github.com>

### [2022-06-13T17:42:16+00:00](https://github.com/leanprover-community/mathlib/commit/3225926b9f2c1e31b4d4329aec72f69555270282)
feat(category_theory/monoidal): monoidal functors `Type ⥤  C` acting on powers ([#14330](https://github.com/leanprover-community/mathlib/pull/#14330))







Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-06-13T16:22:21+00:00](https://github.com/leanprover-community/mathlib/commit/6ad279982240707a768dfe2faa8555153297e998)
chore(analysis/locally_convex/weak_dual): golf using `seminorm.comp` ([#14699](https://github.com/leanprover-community/mathlib/pull/#14699))

### [2022-06-13T15:38:03+00:00](https://github.com/leanprover-community/mathlib/commit/aae786c2bad3324e6243af4cc1ac4d80a44912dd)
feat(data/zmod/basic): fix a diamond in comm_ring and field ([#14712](https://github.com/leanprover-community/mathlib/pull/#14712))

Before this change the following diamond existed:
```lean
import data.zmod.basic

variables {p : ℕ} [fact p.prime]
example :
  @euclidean_domain.to_comm_ring _ (@field.to_euclidean_domain _ (zmod.field p)) = zmod.comm_ring p :=
rfl
```
as the eta-expanded `zmod.comm_ring` was not defeq to itself, as it is defined via cases.
We fix this by instead defining each field by cases, which looks worse but at least seems to resolve the issue.

See https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/zmod.20comm_ring.20field.20diamond/near/285847071 for discussion

### [2022-06-13T14:24:16+00:00](https://github.com/leanprover-community/mathlib/commit/aed7f9afd289a674edd7485f34d7f7e84b486119)
feat(topology/uniform_space/basic): add three easy lemmas about `uniform_space.comap` ([#14678](https://github.com/leanprover-community/mathlib/pull/#14678))

These are uniform spaces versions of `filter.comap_inf`, `filter.comap_infi` and `filter.comap_mono`. I split them from [#14534](https://github.com/leanprover-community/mathlib/pull/#14534) which is already a quite big PR.

### [2022-06-13T13:01:51+00:00](https://github.com/leanprover-community/mathlib/commit/b7b371e1bdbb582e4ac5edce0419705e672734ee)
doc(field_theory/finite/trace): fix module docstring ([#14711](https://github.com/leanprover-community/mathlib/pull/#14711))

This PR just fixes the docstring in `field_theory/finite/trace.lean`. It was still mentioning a definition that was removed.

### [2022-06-13T13:01:50+00:00](https://github.com/leanprover-community/mathlib/commit/46ac3cb365cd0df096a4a4d1c2eccfeae9a642ae)
chore(analysis/complex/upper_half_plane): move to a subdirectory ([#14704](https://github.com/leanprover-community/mathlib/pull/#14704))

I'm going to add more files to `analysis/complex/upper_half_plane/` soon.

### [2022-06-13T11:39:13+00:00](https://github.com/leanprover-community/mathlib/commit/04019de3ca409a1f1ac74d7eaf6b577ff49d665f)
chore(algebra/big_operators/associated,ring_theory/unique_factorization_domain): golf ([#14671](https://github.com/leanprover-community/mathlib/pull/#14671))

### [2022-06-13T09:39:39+00:00](https://github.com/leanprover-community/mathlib/commit/b100037610cb4ab24f6757190d3ff4ee92c921f4)
refactor(order/conditionally_complete_lattice): use `order_bot` ([#14568](https://github.com/leanprover-community/mathlib/pull/#14568))

Use `order_bot` instead of an explicit `c = ⊥` argument in
`well_founded.conditionally_complete_linear_order_with_bot`. Also
reuse `linear_order.to_lattice` and add `well_founded.min_le`.

### [2022-06-13T09:39:38+00:00](https://github.com/leanprover-community/mathlib/commit/4b67645711c1e49a92d62a741e75a4d7177be8b7)
chore(algebra/ring_quot): provide an explicit npow field ([#14349](https://github.com/leanprover-community/mathlib/pull/#14349))

While this probably shouldn't matter since `ring_quot` is irreducible, this matches what we do for `nsmul` and `zsmul`.

### [2022-06-13T08:58:22+00:00](https://github.com/leanprover-community/mathlib/commit/716824d353b00a5fe653d8ef470567f5485f3c4a)
feat(set_theory/surreal/dyadic): tweak API + golf ([#14649](https://github.com/leanprover-community/mathlib/pull/#14649))

This PR does the following changes:
- Get rid of `pgame.half`, as it's def-eq to `pow_half 1`, which has strictly more API.
- Fix the docstring on `pow_half`, which incorrectly stated `pow_half 0 = 0`.
- Remove `simp` from some type equality lemmas.
- Remove the redundant theorems `pow_half_move_left'` and `pow_half_move_right'`.
- Add instances for left and right moves of `pow_half`. 
- Rename `zero_lt_pow_half` to `pow_half_pos`.
- Prove `pow_half_le_one` and `pow_half_succ_lt_one`.
- Make arguments explicit throughout.
- Golf proofs throughout.

### [2022-06-13T03:45:17+00:00](https://github.com/leanprover-community/mathlib/commit/dc9eab668f772012648a4c5a60a20824c5a74662)
feat(tactic/lift): generalize pi.can_lift to Sort ([#14700](https://github.com/leanprover-community/mathlib/pull/#14700))

### [2022-06-12T20:34:14+00:00](https://github.com/leanprover-community/mathlib/commit/8fb92bf14e22a6106d25dd82160ea51fe5cd6b15)
feat(measure_theory/integral/circle_integral): add lemma `circle_map_nmem_ball` ([#14643](https://github.com/leanprover-community/mathlib/pull/#14643))

The lemma `set.ne_of_mem_nmem` is unrelated except that both of these should be helpful for:
https://github.com/leanprover-community/mathlib/pull/13885

### [2022-06-12T16:53:57+00:00](https://github.com/leanprover-community/mathlib/commit/d6eb634b58906ef0cc4bba155e099da9d7d99615)
feat(number_theory/legendre_symbol/auxiliary, *): add/move lemmas in/to various files, delete `auxiliary.lean` ([#14572](https://github.com/leanprover-community/mathlib/pull/#14572))

This is the first PR in a series that will culminate in providing the proof of Quadratic Reciprocity using Gauss sums.

Here we just add some lemmas to the file `auxiliary.lean` that will be used in new code later.
We also generalize the lemmas `neg_one_ne_one_of_char_ne_two` and `neg_ne_self_of_char_ne_two` from finite fields to more general rings.

See [this Zulipt topic](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Quadratic.20Hilbert.20symbol.20over.20.E2.84.9A/near/285053214) for more information.

**CHANGE OF PLAN:** Following the discussion on Zulip linked to above, the lemmas in `auxiliary.lean` are supposed to be moved to there proper places. I have added suggestions to each lemma or group of lemmas (or definitions) what the proper place could be (in some cases, there are alternatives). Please comment if you do not agree or to support one of the alternatives.

### [2022-06-12T16:03:11+00:00](https://github.com/leanprover-community/mathlib/commit/97c9ef8cd3e7a896a61ee35aa39c7827e03980ce)
chore(measure_theory): use notation `measurable_set[m]` ([#14690](https://github.com/leanprover-community/mathlib/pull/#14690))

### [2022-06-12T11:53:19+00:00](https://github.com/leanprover-community/mathlib/commit/8cad81ae3de9cfcd414abe7d2d3e1c33488d3f08)
feat(data/{finset,set}/basic): More `insert` and `erase` lemmas ([#14675](https://github.com/leanprover-community/mathlib/pull/#14675))

Also turn `finset.disjoint_iff_disjoint_coe` around and change `set.finite.to_finset_insert` take `(insert a s).finite` instead of `s.finite`.

### [2022-06-12T11:13:54+00:00](https://github.com/leanprover-community/mathlib/commit/579d6f9eb0580e3a774afcbf4b86f31d2ccfa1d7)
feat(data/polynomial/laurent): Laurent polynomials are a localization of polynomials ([#14489](https://github.com/leanprover-community/mathlib/pull/#14489))

This PR proves the lemma `is_localization (submonoid.closure ({X} : set R[X])) R[T;T⁻¹]`.

### [2022-06-12T08:43:37+00:00](https://github.com/leanprover-community/mathlib/commit/4a3b22e51d8a7f1a9677d8b7607fdf838bcfb4de)
feat(number_theory/bernoulli_polynomials): Derivative of Bernoulli polynomial ([#14625](https://github.com/leanprover-community/mathlib/pull/#14625))

Add the statement that the derivative of `bernoulli k x` is `k * bernoulli (k-1) x`. This will be used in a subsequent PR to evaluate the even positive integer values of the Riemann zeta function.

### [2022-06-12T05:48:33+00:00](https://github.com/leanprover-community/mathlib/commit/0926f07a98bb3ef1d8bf6df99efff0034d35026f)
feat(data/polynomial/eval): add some lemmas for `comp` ([#14346](https://github.com/leanprover-community/mathlib/pull/#14346))

### [2022-06-12T05:09:43+00:00](https://github.com/leanprover-community/mathlib/commit/eb063e785ce3203cb92ba2d8f4c61703b782dd37)
feat(category_theory/Fintype): equiv_equiv_iso ([#13984](https://github.com/leanprover-community/mathlib/pull/#13984))

From LTE.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-06-11T15:30:23+00:00](https://github.com/leanprover-community/mathlib/commit/053a03d6fd53ef6d1a81167ed6ae75f91d2327a4)
feat(algebra/char_p): `char_p` of a local ring is zero or prime power ([#14461](https://github.com/leanprover-community/mathlib/pull/#14461))

For a local commutative ring the characteristics is either zero or a prime power.

### [2022-06-11T14:33:12+00:00](https://github.com/leanprover-community/mathlib/commit/2e3a0a6e39abd77a2007624a37f41470d1fa9792)
feat(analysis/special_functions/log): add `real.log_sqrt` ([#14663](https://github.com/leanprover-community/mathlib/pull/#14663))

### [2022-06-11T11:06:30+00:00](https://github.com/leanprover-community/mathlib/commit/d1a6dd2350a4811b5866f77ca95a129551747779)
feat(topology/algebra/module/locally_convex): local convexity is preserved by `Inf` and `induced` ([#12118](https://github.com/leanprover-community/mathlib/pull/#12118))

I also generalized slightly `locally_convex_space.of_bases` and changed a `Sort*` to `Type*` in `filter.has_basis_infi` to correctly reflect the universe constraints.

### [2022-06-11T08:59:36+00:00](https://github.com/leanprover-community/mathlib/commit/13b999c4f43d02ec13027f7b674fb6aa159fe855)
feat(algebra/{group,hom}/units): Units in division monoids ([#14212](https://github.com/leanprover-community/mathlib/pull/#14212))

Copy over `group_with_zero` lemmas to the more general setting of `division_monoid`.

### [2022-06-11T02:10:15+00:00](https://github.com/leanprover-community/mathlib/commit/050404af11ed26970b3c773888f6e9de12e79b97)
feat(group_theory/sylow): Sylow subgroups are Hall subgroups ([#14624](https://github.com/leanprover-community/mathlib/pull/#14624))

This PR adds a lemma stating that Sylow subgroups are Hall subgroups (cardinality is coprime to index).

### [2022-06-10T14:50:29+00:00](https://github.com/leanprover-community/mathlib/commit/18936e552fbb42e4599fededbd126cadaad12866)
feat(topology/uniform_space/equiv): define uniform isomorphisms ([#14537](https://github.com/leanprover-community/mathlib/pull/#14537))

This adds a new file, mostly copy-pasted from `topology/homeomorph`, to analogously define uniform isomorphisms

### [2022-06-10T12:55:31+00:00](https://github.com/leanprover-community/mathlib/commit/8c812fd49c82a071648641af2f12a79a720a4254)
feat(topology/algebra/order): `coe : ℚ → 𝕜` has dense range ([#14635](https://github.com/leanprover-community/mathlib/pull/#14635))

* add `rat.dense_range_cast`, use it in `rat.dense_embedding_coe_real`;
* rename `dense_iff_forall_lt_exists_mem` to `dense_iff_exists_between`;
* add `dense_of_exists_between`, use it in `dense_iff_exists_between`.

### [2022-06-10T12:55:30+00:00](https://github.com/leanprover-community/mathlib/commit/0f5a1f22a5c157669d8c8b5cea8d21f021bb373d)
feat(data/rat): Add some lemmas to work with num/denom ([#14456](https://github.com/leanprover-community/mathlib/pull/#14456))

### [2022-06-10T10:43:10+00:00](https://github.com/leanprover-community/mathlib/commit/95da649319dabd2a2a3189b5ef1b22d94021fded)
feat(analysis/inner_product_space): Generalize Gram-Schmidt ([#14379](https://github.com/leanprover-community/mathlib/pull/#14379))

The generalisation is to allow a family of vectors indexed by a general indexing set `ι` (carrying appropriate order typeclasses) rather than just `ℕ`.

### [2022-06-10T10:04:50+00:00](https://github.com/leanprover-community/mathlib/commit/391d1780dff00faa805af84c7983f3f7f9851472)
feat(set_theory/game/ordinal): golf `to_pgame_injective` ([#14661](https://github.com/leanprover-community/mathlib/pull/#14661))

We also add the `eq_iff` version and remove an outdated todo comment.

### [2022-06-10T10:04:49+00:00](https://github.com/leanprover-community/mathlib/commit/68dc07f62bf6b238f26e8ecb3309ac0d204ad88c)
refactor(set_theory/game/pgame): rename and add theorems like `-y ≤ -x ↔ x ≤ y` ([#14653](https://github.com/leanprover-community/mathlib/pull/#14653))

For `*` in `le`, `lf`, `lt`, we rename `neg_*_iff : -y * -x ↔ x * y` to `neg_*_neg_iff`, and add the theorems `neg_*_iff : -y * x ↔ x * -y`.

We further add many missing corresponding theorems for equivalence and fuzziness.

### [2022-06-10T07:36:57+00:00](https://github.com/leanprover-community/mathlib/commit/a912392260971d75be26951dc83275257c07a3f6)
feat(data/fintype/basic): add `card_subtype_mono` ([#14645](https://github.com/leanprover-community/mathlib/pull/#14645))

This lemma naturally forms a counterpart to existing lemmas.

I've also renamed a lemma it uses that didn't seem to fit the existing naming pattern.

### [2022-06-10T07:36:56+00:00](https://github.com/leanprover-community/mathlib/commit/771f2b7bdb5ddd20437224862f7c39fe16fd8ebc)
chore(topology/metric_space/basic): add `metric_space.replace_bornology` ([#14638](https://github.com/leanprover-community/mathlib/pull/#14638))

We have the `pseudo_metric_space` version from [#13927](https://github.com/leanprover-community/mathlib/pull/#13927), but not the `metric_space` version.





Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-06-10T07:36:55+00:00](https://github.com/leanprover-community/mathlib/commit/5bccb515295fc0cb52693fcb96e2d3adee1dfb79)
refactor(logic/equiv/basic): tweak lemmas on equivalences between `unique` types ([#14605](https://github.com/leanprover-community/mathlib/pull/#14605))

This PR does various simple and highly related things:
- Rename `equiv_of_unique_of_unique` to `equiv_of_unique` and make its arguments explicit, in order to match the lemma `equiv_of_empty` added in [#14604](https://github.com/leanprover-community/mathlib/pull/#14604).  
- Rename `equiv_punit_of_unique` to `equiv_punit` and make its argument explicit to match `equiv_pempty`.
- Fix their docstrings (which talked about a `subsingleton` type instead of a `unique` one).
- Move them much earlier in the file, together with the lemmas on empty types.
- Golf `prop_equiv_punit`.

### [2022-06-10T07:36:53+00:00](https://github.com/leanprover-community/mathlib/commit/76918216c58e698a13bbab6992bdaa09a05db5fb)
feat(data/polynomial/derivative): reduce assumptions ([#14338](https://github.com/leanprover-community/mathlib/pull/#14338))

The only changes here are to relax typeclass assumptions.

Specifically these changes relax `comm_semiring` to `semiring` in:
 * polynomial.derivative_eval
 * polynomial.derivative_map
 * polynomial.iterate_derivative_map
 * polynomial.iterate_derivative_cast_nat_mul

and relax `ring` to `semiring` as well as `char_zero` + `no_zero_divisors` to `no_zero_smul_divisors ℕ` in:
 * polynomial.mem_support_derivative
 * polynomial.degree_derivative_eq

### [2022-06-10T07:36:52+00:00](https://github.com/leanprover-community/mathlib/commit/39184f4016c871a7c4639e326144477b47757550)
feat(dynamics/periodic_pts): Orbit under periodic function ([#12976](https://github.com/leanprover-community/mathlib/pull/#12976))

### [2022-06-10T05:26:20+00:00](https://github.com/leanprover-community/mathlib/commit/e3dade354c92c7fb47abf450f5ab62aac785782c)
feat(data/finite/basic): `finite` predicate ([#14373](https://github.com/leanprover-community/mathlib/pull/#14373))

Introduces a `Prop`-valued finiteness predicate on types and adapts some subset of the `fintype` API to get started. Uses `nat.card` as the primary cardinality function.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-06-10T04:32:43+00:00](https://github.com/leanprover-community/mathlib/commit/e9d25648f3781acc6677bb10f493d5cf73db4aa4)
chore(measure_theory): golf ([#14657](https://github.com/leanprover-community/mathlib/pull/#14657))

Also use `@measurable_set α m s` instead of `m.measurable_set' s` in the definition of the partial order on `measurable_space`. This way we can use dot notation lemmas about measurable sets in a proof of `m₁ ≤ m₂`.

### [2022-06-10T02:04:07+00:00](https://github.com/leanprover-community/mathlib/commit/ed2cfce868a29e85a62defcbcc8e37a32cfeb51d)
feat(set_theory/ordinal/basic): tweak theorems on order type of empty relation ([#14650](https://github.com/leanprover-community/mathlib/pull/#14650))

We move the theorems on the order type of an empty relation much earlier, and golf them. We also remove other redundant theorems.

`zero_eq_type_empty` is made redundant by `type_eq_zero_of_empty`, while `zero_eq_lift_type_empty`  is made redundant by the former lemma and `lift_zero`.

### [2022-06-09T23:59:52+00:00](https://github.com/leanprover-community/mathlib/commit/2cf4746b711727a070accf3af68a3f071af07507)
chore(analysis/special_functions/gamma): tidy some proofs ([#14615](https://github.com/leanprover-community/mathlib/pull/#14615))

### [2022-06-09T23:59:51+00:00](https://github.com/leanprover-community/mathlib/commit/3afb1fa16e642f169f6f706ce56a736c87d50078)
feat(ci): Add support for "notice"-level messages ([#14443](https://github.com/leanprover-community/mathlib/pull/#14443))

It looks like support for this was added recently, it's now documented at the same link already in our source code.

### [2022-06-09T22:24:53+00:00](https://github.com/leanprover-community/mathlib/commit/6e1361777b41d5eaea776c9f9840b79a9427a02d)
feat(set_theory/ordinal/basic): better definitions for `0` and `1` ([#14651](https://github.com/leanprover-community/mathlib/pull/#14651))

We define the `0` and `1` ordinals as the order types of the empty relation on `pempty` and `punit`, respectively. These definitions are definitionally equal to the previous ones, yet much clearer, for two reasons:
- They don't make use of the auxiliary `Well_order` type. 
- Much of the basic API for these ordinals uses this def-eq anyways.

### [2022-06-09T22:24:52+00:00](https://github.com/leanprover-community/mathlib/commit/c89d319407ab99064ae804b9718d408e8635d57d)
feat(set_theory/cardinal): add `cardinal.aleph_0_le_mul_iff'` ([#14648](https://github.com/leanprover-community/mathlib/pull/#14648))

This version provides a more useful `iff.mpr`. Also review 2 proofs.

### [2022-06-09T22:24:51+00:00](https://github.com/leanprover-community/mathlib/commit/405be36f8a9ece5da70df85ce09b30b7da54e0f3)
feat(data/matrix): Lemmas about `vec_mul`, `mul_vec`, `dot_product`, `inv` ([#14644](https://github.com/leanprover-community/mathlib/pull/#14644))

### [2022-06-09T22:24:50+00:00](https://github.com/leanprover-community/mathlib/commit/3e458e2369270a9ed51f1fd77ebfa6383d574774)
chore(topology/sequences): rename variables ([#14631](https://github.com/leanprover-community/mathlib/pull/#14631))

* types `X`, `Y`;
* sequence `x : ℕ → X`;
* a point `a : X`;
* sets `s`, `t`.

### [2022-06-09T19:45:28+00:00](https://github.com/leanprover-community/mathlib/commit/81ab992e35159224fc37313f22092a68ce1094ea)
chore(set_theory/cardinal/basic): tidy lt_wf proof ([#14574](https://github.com/leanprover-community/mathlib/pull/#14574))

### [2022-06-09T19:45:27+00:00](https://github.com/leanprover-community/mathlib/commit/34a9d0df96316e79a4020506b752733e88dbdaa2)
feat(algebra/order/ring): Binary rearrangement inequality ([#14478](https://github.com/leanprover-community/mathlib/pull/#14478))

Extract the binary case of the rearrangement inequality (`a * d + b * c ≤ a * c + b * d` if `a ≤ b` and `c ≤ d`) from the general one.

### [2022-06-09T19:45:25+00:00](https://github.com/leanprover-community/mathlib/commit/7fbff0f72132abdd98119c9e467a2aa144e75702)
feat(data/nat/choose/central): arity of primes in central binomial coefficients ([#14017](https://github.com/leanprover-community/mathlib/pull/#14017))


Spun off of [#8002](https://github.com/leanprover-community/mathlib/pull/#8002). Lemmas about the arity of primes in central binomial coefficients.

### [2022-06-09T18:12:47+00:00](https://github.com/leanprover-community/mathlib/commit/4d4de43edf248474b75673faeaec55f8045016f3)
chore(ring_theory/unique_factorization_domain): drop simp annotation for factors_pow ([#14646](https://github.com/leanprover-community/mathlib/pull/#14646))

Followup to https://github.com/leanprover-community/mathlib/pull/14555.

### [2022-06-09T18:12:46+00:00](https://github.com/leanprover-community/mathlib/commit/7b4680fe94efaca560bca8d22860968ab7ac0071)
feat(analysis/inner_product_space/pi_L2): Distance formula in the euclidean space ([#14642](https://github.com/leanprover-community/mathlib/pull/#14642))

A few missing results about `pi_Lp 2` and `euclidean_space`.

### [2022-06-09T18:12:45+00:00](https://github.com/leanprover-community/mathlib/commit/ac0ce64ce0ebd991203a5d34af7ddf3f9dfd4e2b)
feat(special_functions/integrals): exponential of complex multiple of x ([#14623](https://github.com/leanprover-community/mathlib/pull/#14623))

We add an integral for `exp (c * x)` for `c` complex (so this cannot be reduced to integration of `exp x` on the real line). This is useful for Fourier series.

### [2022-06-09T15:38:27+00:00](https://github.com/leanprover-community/mathlib/commit/abee64985a945f451a7006c3140c1d8c1d41b321)
feat(data/set/intervals): add lemmas about unions of intervals ([#14636](https://github.com/leanprover-community/mathlib/pull/#14636))

### [2022-06-09T15:38:26+00:00](https://github.com/leanprover-community/mathlib/commit/e0f3ea3139c893f502a9942a3251fffedad8b1a0)
feat(topology/constructions): add `subtype.dense_iff` ([#14632](https://github.com/leanprover-community/mathlib/pull/#14632))

Also add `inducing.dense_iff`.

### [2022-06-09T15:38:25+00:00](https://github.com/leanprover-community/mathlib/commit/48f557d58571cbca9fb91747314f2b4a95ed002e)
chore(analysis/convex/integral): use `variables` ([#14592](https://github.com/leanprover-community/mathlib/pull/#14592))

* Move some implicit arguments to `variables`.
* Move `ae_eq_const_or_exists_average_ne_compl` to the root namespace.
* Add `ae_eq_const_or_norm_set_integral_lt_of_norm_le_const`.

### [2022-06-09T13:27:25+00:00](https://github.com/leanprover-community/mathlib/commit/c0b3ed79c03a2204dbfb252be8a549558d9e1f03)
feat(number_theory/padics/padic_val): add `padic_val_nat_def'` and generalise `pow_padic_val_nat_dvd` ([#14637](https://github.com/leanprover-community/mathlib/pull/#14637))

add `padic_val_nat_def' (hn : 0 < n) (hp : p ≠ 1) : ↑(padic_val_nat p n) = multiplicity p n`

`pow_padic_val_nat_dvd : p ^ (padic_val_nat p n) ∣ n` holds without the assumption that `p` is prime.

### [2022-06-09T13:27:23+00:00](https://github.com/leanprover-community/mathlib/commit/dc766dd44f363bea6fba7841fc0d7798aeb62009)
refactor(group_theory/sylow): Golf proof of `pow_dvd_card_of_pow_dvd_card` ([#14622](https://github.com/leanprover-community/mathlib/pull/#14622))

This PR golfs the proof of `pow_dvd_card_of_pow_dvd_card`.

### [2022-06-09T13:27:22+00:00](https://github.com/leanprover-community/mathlib/commit/cde6e6322bf86c1c05dfeda6b203968890332551)
feat(analysis/seminorm): removed unnecessary `norm_one_class` arguments ([#14614](https://github.com/leanprover-community/mathlib/pull/#14614))

### [2022-06-09T13:27:21+00:00](https://github.com/leanprover-community/mathlib/commit/d997baa47403a6a7b48ed4bd137d49afc9c4430f)
refactor(logic/equiv/basic): remove `fin_equiv_subtype` ([#14603](https://github.com/leanprover-community/mathlib/pull/#14603))

The types `fin n` and `{m // m < n}` are definitionally equal, so it doesn't make sense to have a dedicated equivalence between them (other than `equiv.refl`). We remove this equivalence and golf the places where it was used.

### [2022-06-09T13:27:20+00:00](https://github.com/leanprover-community/mathlib/commit/c2bb59e5eb9d8e9aab3575f3180b564cca1eb39a)
feat(algebra/module/torsion.lean): various lemmas about torsion modules ([#14573](https://github.com/leanprover-community/mathlib/pull/#14573))

An intermediate PR for various lemmas about torsion modules needed at [#13524](https://github.com/leanprover-community/mathlib/pull/#13524)

### [2022-06-09T13:27:19+00:00](https://github.com/leanprover-community/mathlib/commit/dfc54a3af84beb378726b08ea44af39edec566de)
feat(combinatorics/ballot): the Ballot problem ([#13592](https://github.com/leanprover-community/mathlib/pull/#13592))

### [2022-06-09T11:44:36+00:00](https://github.com/leanprover-community/mathlib/commit/d51aacbd6162a7df4ab99408d0abb0bc72935745)
feat(ring_theory/unique_factorization_domain): add some lemmas about … ([#14555](https://github.com/leanprover-community/mathlib/pull/#14555))

### [2022-06-09T09:58:31+00:00](https://github.com/leanprover-community/mathlib/commit/dc2f6bb9816f2146cbb60731b824885eaeb95aeb)
chore(topology/metric_space): remove instances that duplicate lemmas ([#14639](https://github.com/leanprover-community/mathlib/pull/#14639))

We can use the structure projections directly as instances, rather than duplicating them with primed names. This removes;

* `metric_space.to_uniform_space'` (was misnamed, now `pseudo_metric_space.to_uniform_space`)
* `pseudo_metric_space.to_bornology'` (now `pseudo_metric_space.to_bornology`)
* `pseudo_emetric_space.to_uniform_space'` (now `pseudo_metric_space.to_uniform_space`)
* `emetric_space.to_uniform_space'` (redundant)

Follows up from review comments in [#13927](https://github.com/leanprover-community/mathlib/pull/#13927)

### [2022-06-09T09:58:30+00:00](https://github.com/leanprover-community/mathlib/commit/bc7b3425a4e12cab37e9e7d753ea69a8c920c89a)
feat(topology/metric_space/basic): add lemma `exists_lt_mem_ball_of_mem_ball` ([#14627](https://github.com/leanprover-community/mathlib/pull/#14627))

This is apparently necessary in https://github.com/leanprover-community/mathlib/pull/13885

### [2022-06-09T09:58:29+00:00](https://github.com/leanprover-community/mathlib/commit/6a1ce4e859bb45668b8285331bd9d34cdf1f9737)
feat(analysis/seminorm): add a `zero_hom_class` instance and remove `seminorm.zero` ([#14613](https://github.com/leanprover-community/mathlib/pull/#14613))

### [2022-06-09T09:58:28+00:00](https://github.com/leanprover-community/mathlib/commit/6826bf007ac4592e539033fcd9fcc0d094c6459f)
doc(data/vector3): improve wording ([#14610](https://github.com/leanprover-community/mathlib/pull/#14610))

### [2022-06-09T09:58:27+00:00](https://github.com/leanprover-community/mathlib/commit/ab64f631d73c8aa47fc98741f1d700d2684d8b80)
refactor(algebra/sub{monoid,group,ring,semiring,field}): merge together the `restrict` and `cod_restrict` helpers ([#14548](https://github.com/leanprover-community/mathlib/pull/#14548))

This uses the new subobject typeclasses to merge together:
* `monoid_hom.mrestrict`, `monoid_hom.restrict`
* `monoid_hom.cod_mrestrict`, `monoid_hom.cod_restrict`
* `ring_hom.srestrict`, `ring_hom.restrict`, `ring_hom.restrict_field`
* `ring_hom.cod_srestrict`, `ring_hom.cod_restrict`, `ring_hom.cod_restrict_field`

For consistency, this also removes the `m` prefix from `mul_hom.mrestrict`

### [2022-06-09T09:58:26+00:00](https://github.com/leanprover-community/mathlib/commit/732b79f8d258217ad69015517ff54c803e3fa82b)
feat(order/compactly_generated): an independent subset of a well-founded complete lattice is finite ([#14215](https://github.com/leanprover-community/mathlib/pull/#14215))

### [2022-06-09T07:52:18+00:00](https://github.com/leanprover-community/mathlib/commit/3a95d1d3d33c7d4954d0e5d48ef651dd0de47ac3)
feat(algebra/order/monoid): `zero_le_one_class` instances for `with_top` and `with_bot` ([#14640](https://github.com/leanprover-community/mathlib/pull/#14640))

### [2022-06-09T05:43:16+00:00](https://github.com/leanprover-community/mathlib/commit/971a9b00a0772f397993d2f485afb96268ba8dcc)
feat(logic/equiv/basic): two empty types are equivalent; remove various redundant lemmas ([#14604](https://github.com/leanprover-community/mathlib/pull/#14604))

We prove `equiv_of_is_empty`, which states two empty types are equivalent. This allows us to remove various redundant lemmas.

We keep `empty_equiv_empty` and `empty_equiv_pempty` as these specific instantiations of that lemma are widely used.

### [2022-06-09T04:07:37+00:00](https://github.com/leanprover-community/mathlib/commit/9f19686c4a140c895f4d492a998c8a5980e375e0)
feat(logic/small): generalize + golf ([#14584](https://github.com/leanprover-community/mathlib/pull/#14584))

This PR does the following:
- add a lemma `small_lift`
- generalize the lemma `small_ulift`
- golf `small_self` and `small_max`

### [2022-06-09T01:54:18+00:00](https://github.com/leanprover-community/mathlib/commit/b392bb2c83dc188eecdc2270f271dbfecbd1d9aa)
feat(data/nat/factorization/basic): two trivial simp lemmas about factorizations ([#14634](https://github.com/leanprover-community/mathlib/pull/#14634))

For any `n : ℕ`, `n.factorization 0 = 0` and `n.factorization 1 = 0`

### [2022-06-09T01:54:16+00:00](https://github.com/leanprover-community/mathlib/commit/4fc35392bfde791c4ead63260f41c5833b5b6d99)
refactor(data/finset/nat_antidiagonal): state lemmas with cons instead of insert ([#14533](https://github.com/leanprover-community/mathlib/pull/#14533))

This puts less of a burden on the caller rewriting in the forward direction, as they don't have to prove obvious things about membership when evaluating sums.

Since this adds the missing `finset.map_cons`, a number of uses of `multiset.map_cons` now need qualified names.

### [2022-06-08T23:44:35+00:00](https://github.com/leanprover-community/mathlib/commit/0c08bd430ade2616ffbd83d34d0af901bac9fb77)
chore(data/set/basic): minor style fixes ([#14628](https://github.com/leanprover-community/mathlib/pull/#14628))

### [2022-06-08T20:36:43+00:00](https://github.com/leanprover-community/mathlib/commit/c1faa2ee45665f3590ca56707208ae4ff68e8d00)
feat(linear_algebra/affine_space/affine_subspace/pointwise): Translations are an action on affine subspaces ([#14230](https://github.com/leanprover-community/mathlib/pull/#14230))



Co-authored-by: Hanting Zhang <hantingzhang03@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-06-08T20:36:42+00:00](https://github.com/leanprover-community/mathlib/commit/84a1bd6ab0a447a6c7ba3c974c24a4834261fdb9)
refactor(topology/metric_space/basic): add `pseudo_metric_space.to_bornology'` ([#13927](https://github.com/leanprover-community/mathlib/pull/#13927))

* add `pseudo_metric_space.to_bornology'` and `pseudo_metric_space.replace_bornology`;
* add `metric.is_bounded_iff` and a few similar lemmas;
* fix instances for `subtype`, `prod`, `pi`, and `pi_Lp` to use the correct bornology`;
* add `lipschitz_with.to_locally_bounded_map` and `lipschitz_with.comap_cobounded_le`;
* add `antilipschitz_with.tendsto_cobounded`.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-06-08T18:51:48+00:00](https://github.com/leanprover-community/mathlib/commit/61df9c668ac6fe6b94d95ffc11f48c473f525958)
feat(set_theory/ordinal/basic): tweak `type_def` + golf `type_lt` ([#14611](https://github.com/leanprover-community/mathlib/pull/#14611))

We replace the original, redundant `type_def'` with a new more general lemma. We keep `type_def` as it enables `dsimp`, unlike `type_def'`. We golf `type_lt` using this new lemma.

### [2022-06-08T18:51:32+00:00](https://github.com/leanprover-community/mathlib/commit/9c4a3d1bf039ea91722a0e49a2de893f3bd8f2ac)
feat(ring_theory/valuation/valuation_subring): define unit group of valuation subring and provide basic API ([#14540](https://github.com/leanprover-community/mathlib/pull/#14540))


This PR defines the unit group of a valuation subring as a multiplicative subgroup of the units of the field. We show two valuation subrings are equivalent iff they have the same unit group. We show the map sending a valuation to its unit group is an order embedding.



Co-authored-by: Adam Topaz <github@adamtopaz.com>
Co-authored-by: jackmckoen <104791831+jackmckoen@users.noreply.github.com>

### [2022-06-08T18:10:02+00:00](https://github.com/leanprover-community/mathlib/commit/d3156667c006b239cc5a7a0cef0e32ea060bdd97)
feat(model_theory/substructures): tweak universes for `lift_card_closure_le` ([#14597](https://github.com/leanprover-community/mathlib/pull/#14597))

Since `cardinal.lift.{(max u v) u} = cardinal.lift.{v u}`, the latter form should be preferred.

### [2022-06-08T15:58:47+00:00](https://github.com/leanprover-community/mathlib/commit/8934884882bde9b23c8c4874105bcfb44995da84)
feat(set_theory/ordinal/basic): `rel_iso.ordinal_type_eq` ([#14602](https://github.com/leanprover-community/mathlib/pull/#14602))

### [2022-06-08T15:58:46+00:00](https://github.com/leanprover-community/mathlib/commit/09df85f6386056526cf955a34b152a529034fa21)
feat(order/rel_classes): any relation on an empty type is a well-order ([#14600](https://github.com/leanprover-community/mathlib/pull/#14600))

### [2022-06-08T15:58:45+00:00](https://github.com/leanprover-community/mathlib/commit/201a3f4a0e59b5f836fe8a6c1a462ee674327211)
chore(*): remove extra parentheses in universe annotations ([#14595](https://github.com/leanprover-community/mathlib/pull/#14595))

We change `f.{(max u v)}` to `f.{max u v}` throughout, and similarly for `imax`. This is for consistency with the rest of the code.

Note that `max` and `imax` take an arbitrary number of parameters, so if anyone wants to add a second universe parameter, they'll have to add the parentheses again.

### [2022-06-08T15:58:43+00:00](https://github.com/leanprover-community/mathlib/commit/3e4d6aa3106bcc8edc7f56112dcb20b9f1c827f5)
feat(algebra/algebra/basic): add instances `char_zero.no_zero_smul_divisors_int`, `char_zero.no_zero_smul_divisors_nat` ([#14395](https://github.com/leanprover-community/mathlib/pull/#14395))

The proofs are taken from [#14338](https://github.com/leanprover-community/mathlib/pull/#14338) where a specific need for these arose

Aside from the new instances, nothing else has changed; I moved the
`no_zero_smul_divisors` section lower down in the file since the new
instances need the `algebra ℤ R` structure carried by a ring `R`.

### [2022-06-08T13:42:41+00:00](https://github.com/leanprover-community/mathlib/commit/bfb8ec83467773a56d81ffc07f809c4bc9a1673e)
feat(logic/basic): add lemma `pi_congr` ([#14616](https://github.com/leanprover-community/mathlib/pull/#14616))

This lemma is used in [#14153](https://github.com/leanprover-community/mathlib/pull/#14153), where `congrm` is defined.

A big reason for splitting these 3 lines off the main PR is that they are the only ones that are not in a leaf of the import hierarchy: this hopefully saves lots of CI time, when doing trivial changes to the main PR.

### [2022-06-08T13:42:38+00:00](https://github.com/leanprover-community/mathlib/commit/700181a31a17a8f4236ab93a1cd0115e89eee369)
refactor(algebra/is_prime_pow): move lemmas using `factorization` to new file ([#14598](https://github.com/leanprover-community/mathlib/pull/#14598))

As discussed in [this Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/squarefree.2C.20is_prime_pow.2C.20and.20factorization/near/285144241).

### [2022-06-08T12:10:16+00:00](https://github.com/leanprover-community/mathlib/commit/db4531fa04fa38386526023a6cad124e32c863e7)
doc(data/qpf/multivariate/constructions/cofix): fix doc typos ([#14609](https://github.com/leanprover-community/mathlib/pull/#14609))

### [2022-06-08T12:10:15+00:00](https://github.com/leanprover-community/mathlib/commit/0add8768c07a29fd74c36c979a41cfa2c3626243)
chore(set_theory/cardinal/basic): remove unused universe + fix spacing ([#14606](https://github.com/leanprover-community/mathlib/pull/#14606))

### [2022-06-08T12:10:14+00:00](https://github.com/leanprover-community/mathlib/commit/65fba4cb3c9767389bba83acbeea3f97fa78b85f)
feat(algebra/lie/centralizer): define the centralizer of a Lie submodule and the upper central series ([#14173](https://github.com/leanprover-community/mathlib/pull/#14173))

### [2022-06-08T09:31:34+00:00](https://github.com/leanprover-community/mathlib/commit/ffad43d259e5eb5084c2b76ace1ffa417aec33d5)
golf(*): `λ _, default` → `default` ([#14608](https://github.com/leanprover-community/mathlib/pull/#14608))

### [2022-06-08T09:31:33+00:00](https://github.com/leanprover-community/mathlib/commit/60454dd30be92dde7a986bf843cd21ec8ac70d3f)
feat(algebra/order/monoid): `zero_le_one'` lemma with explicit type argument ([#14594](https://github.com/leanprover-community/mathlib/pull/#14594))

### [2022-06-08T09:31:32+00:00](https://github.com/leanprover-community/mathlib/commit/f40cd3cf8ed7f1822d702f9cb491a1001300f5f6)
feat(topology/algebra/order/basic): in a second-countable linear order, only countably many points are isolated to the right ([#14564](https://github.com/leanprover-community/mathlib/pull/#14564))

This makes it possible to remove a useless `densely_ordered` assumption in a lemma in `borel_space`.

### [2022-06-08T09:31:31+00:00](https://github.com/leanprover-community/mathlib/commit/a20032ac65011038633070e7dd30b1c04bb00675)
feat(group_theory/sylow): The index of a sylow subgroup is indivisible by the prime ([#14518](https://github.com/leanprover-community/mathlib/pull/#14518))

This PR adds a lemma stating that the index of a sylow subgroup is indivisible by the prime.

### [2022-06-08T09:31:30+00:00](https://github.com/leanprover-community/mathlib/commit/54236f5a2ac339b8046c911e2a851f3de1150412)
feat(topology/continuous_function/compact): `cstar_ring` instance on `C(α, β)` when `α` is compact ([#14437](https://github.com/leanprover-community/mathlib/pull/#14437))

We define the star operation on `C(α, β)` by applying `β`'s star operation pointwise. In the case when `α` is compact, then `C(α, β)` has a norm, and we show that it is a `cstar_ring`.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-06-08T07:33:27+00:00](https://github.com/leanprover-community/mathlib/commit/e39af18191011d8b85bacad9baf2e23e0246bbdc)
chore(data/finset): remove duplicated lemma ([#14607](https://github.com/leanprover-community/mathlib/pull/#14607))

The lemma `ssubset_iff_exists_insert_subset` was added in [#11248](https://github.com/leanprover-community/mathlib/pull/#11248) but is just a duplicate of the `ssubset_iff` lemma a few lines earlier in the file. It's only used once.




Co-authored-by: Bhavik Mehta <bm489@cam.ac.uk>

### [2022-06-08T00:23:16+00:00](https://github.com/leanprover-community/mathlib/commit/9d0484435a53c2ae65520afa8b1893592b025484)
feat(data/int/basic): Sum of units casework lemma ([#14557](https://github.com/leanprover-community/mathlib/pull/#14557))

This PR adds a casework lemma for when the sum of two units equals the sum of two units. I needed this lemma for irreducibility of x^n-x-1.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-06-07T22:31:45+00:00](https://github.com/leanprover-community/mathlib/commit/759516c7d9f801272ad67cce5972d57cd5443ba3)
chore(ring_theory/dedekind_domain/ideal): speed up a proof ([#14590](https://github.com/leanprover-community/mathlib/pull/#14590))

... which causes recurring timeout at irrelevant places, see https://github.com/leanprover-community/mathlib/pull/14585#issuecomment-1148222373 and referenced Zulip discussion.

Feel free to push golfs that remains fast (1-2s)!

### [2022-06-07T21:09:01+00:00](https://github.com/leanprover-community/mathlib/commit/905374c4c50717c1884de9f05e38d3963a06dc38)
feat(special_functions/gamma): better convergence bounds ([#14496](https://github.com/leanprover-community/mathlib/pull/#14496))

Use the stronger form of FTC-2 added [#14147](https://github.com/leanprover-community/mathlib/pull/#14147) to strengthen some results about the gamma function.



Co-authored-by: David Loeffler <d.loeffler.01@cantab.net>
Co-authored-by: loefflerd <d.loeffler.01@cantab.net>

### [2022-06-07T17:43:24+00:00](https://github.com/leanprover-community/mathlib/commit/cfa447ecbc305ce911368f13576aa21807f9a4f0)
chore(logic/hydra): tweak docs + minor golf ([#14579](https://github.com/leanprover-community/mathlib/pull/#14579))

Co-authored-by: @alreadydone 



Co-authored-by: Junyan Xu <junyanxumath@gmail.com>

### [2022-06-07T13:32:20+00:00](https://github.com/leanprover-community/mathlib/commit/43f1af9903249b991d7409fd6bb7064a99e05416)
refactor(topology/continuous_function/basic): rename `map_specialization` ([#14565](https://github.com/leanprover-community/mathlib/pull/#14565))

Rename `continuous_map.map_specialization` to `continuous_map.map_specializes` to align with the name of the relation.

### [2022-06-07T12:37:21+00:00](https://github.com/leanprover-community/mathlib/commit/544fdc0d710515ddbe92c07ddcd57d63d525da90)
chore(ring_theory/integral_closure): fix dot notation ([#14589](https://github.com/leanprover-community/mathlib/pull/#14589))

### [2022-06-07T11:40:32+00:00](https://github.com/leanprover-community/mathlib/commit/6906627327ae29d144e7c2548c927372d6b8060d)
refactor(algebra/squarefree): split out `nat` part to new file `data/nat/squarefree` ([#14577](https://github.com/leanprover-community/mathlib/pull/#14577))

As discussed in this Zulip [thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/squarefree.2C.20is_prime_pow.2C.20and.20factorization)

### [2022-06-07T07:06:14+00:00](https://github.com/leanprover-community/mathlib/commit/4a4cd6d61e404c116144088a9f7ba1cc07985052)
feat(topology/metric_space/metrizable): assume `regular_space` ([#14586](https://github.com/leanprover-community/mathlib/pull/#14586))

### [2022-06-07T01:29:01+00:00](https://github.com/leanprover-community/mathlib/commit/de648fd51be82c29292e25a5912fd492683ef876)
chore(set_theory/game/basic): spacing tweaks + fix docstring typo ([#14580](https://github.com/leanprover-community/mathlib/pull/#14580))

### [2022-06-06T22:44:27+00:00](https://github.com/leanprover-community/mathlib/commit/6ad1a55f4f6be5d96c342fd35ca0104540b80f29)
feat(set_theory/game/pgame): induction on left/right moves of add/mul ([#14345](https://github.com/leanprover-community/mathlib/pull/#14345))

### [2022-06-06T20:46:31+00:00](https://github.com/leanprover-community/mathlib/commit/c7a1319b6b568c0824d67ef3a9d24d89b89fa8e2)
feat(measure_theory/measure/measure_space): add `interval_oc_ae_eq_interval` ([#14566](https://github.com/leanprover-community/mathlib/pull/#14566))

### [2022-06-06T20:46:30+00:00](https://github.com/leanprover-community/mathlib/commit/2c89306097c4beb1cd8546dffdbdd75f318321b6)
chore(geometry/manifold/charted_space): make `M` an explicit argument ([#14562](https://github.com/leanprover-community/mathlib/pull/#14562))

### [2022-06-06T20:46:29+00:00](https://github.com/leanprover-community/mathlib/commit/d0b7ecc9f7435f12fbbfc2989feb22f8b453c195)
refactor(analysis/asymptotics): rename `is_O.join` to `is_O.sup` ([#14558](https://github.com/leanprover-community/mathlib/pull/#14558))

* rename `is_*.join` to `is_*.sup`;
* add `iff` versions.

### [2022-06-06T20:46:28+00:00](https://github.com/leanprover-community/mathlib/commit/2b7e72b09e941970f7f6183d3cc46d8af680cbdc)
feat(order/liminf_limsup): add a few lemmas ([#14554](https://github.com/leanprover-community/mathlib/pull/#14554))

* add `is_bounded_under.mono_le`, `is_bounded_under.mono_ge`;
* add `order_iso.is_bounded_under_le_comp`, `order_iso.is_bounded_under_ge_comp`;
* add `is_bounded_under_le_inv`, `is_bounded_under_le_inv`, and additive versions;
* rename `is_bounded_under_sup` and `is_bounded_under_inf` to `is_bounded_under.sup` and `is_bounded_under.inf`;
* add `iff` versions under names `is_bounded_under_le_sup` and `is_bounded_under_ge_inf`;
* add `is_bounded_under_le_abs`.

### [2022-06-06T20:46:27+00:00](https://github.com/leanprover-community/mathlib/commit/029a9551884868559f0f47c0f3cbd340a7abbb6a)
refactor(../metric_space/baire): add baire_space class and instances ([#14547](https://github.com/leanprover-community/mathlib/pull/#14547))

* Add a `baire_space` class containing the Baire property (a countable intersection of open dense sets is dense).
* The Baire category theorem for complete metric spaces becomes an instance of `baire_space`.
* Previous consequences of the Baire property use `baire_space` as an hypothesis, instead of `pseudo_emetric_space` `complete_space`.
* Add an instance of `baire_space` for locally compact t2 spaces, in effect extending all the consequences of the Baire property to locally compact spaces.


Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-06-06T20:46:26+00:00](https://github.com/leanprover-community/mathlib/commit/d28aa2c9db719c26b85643e1ed3beed0bee30f35)
feat(analysis/normed_space/banach): closed graph theorem ([#14265](https://github.com/leanprover-community/mathlib/pull/#14265))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2022-06-06T18:41:09+00:00](https://github.com/leanprover-community/mathlib/commit/7b7da89322fe46a16bf03eeb345b0acfc73fe10e)
feat(algebra/order/*): typeclass for `0 ≤ 1` ([#14510](https://github.com/leanprover-community/mathlib/pull/#14510))

With this new typeclass, lemmas such as `zero_le_two` and `one_le_two` can be generalized to require just a few typeclasses for notation, `zero_add_class`, and some `covariant` class.

### [2022-06-06T14:27:28+00:00](https://github.com/leanprover-community/mathlib/commit/abbc7f6306f952f08edc0869bb42528dbc8153b1)
feat(measure_theory/measure/finite_measure_weak_convergence): Prove one implication of portmanteau theorem, convergence implies a limsup condition for measures of closed sets. ([#14116](https://github.com/leanprover-community/mathlib/pull/#14116))

This PR contains the proof of one implication of portmanteau theorem characterizing weak convergence: it is shown that weak convergence implies that for any closed set the limsup of measures is at most the limit measure.



Co-authored-by: kkytola <39528102+kkytola@users.noreply.github.com>

### [2022-06-06T13:48:54+00:00](https://github.com/leanprover-community/mathlib/commit/d6477a89997a05f77d17d02e30ca5290cb992935)
feat(analysis/convex/krein_milman): The Krein-Milman theorem ([#8112](https://github.com/leanprover-community/mathlib/pull/#8112))

This PR proves the Krein-Milman lemma and the Krein-Milman theorem.

### [2022-06-06T12:19:21+00:00](https://github.com/leanprover-community/mathlib/commit/d490ad10765847cf921ab31eadb5aa4e9b55cb92)
move(set_theory/ordinal/cantor_normal_form): move `CNF` to a new file ([#14563](https://github.com/leanprover-community/mathlib/pull/#14563))

We move the API for the Cantor Normal Form to a new file, in preparation for an API expansion.

### [2022-06-06T10:35:42+00:00](https://github.com/leanprover-community/mathlib/commit/0f5ea39607458652c2d97254f172f75125cc98f2)
feat(order/antichain, order/minimal): some antichain lemmas ([#14507](https://github.com/leanprover-community/mathlib/pull/#14507))

This PR adds a few lemmas about antichains, including their images under complementation and order isomorphisms. 



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2022-06-06T09:16:32+00:00](https://github.com/leanprover-community/mathlib/commit/d88ecd5b74aff826ca75c729f57155c8eb1bcc39)
chore(linear_algebra/std_basis): minor golfs ([#14552](https://github.com/leanprover-community/mathlib/pull/#14552))

### [2022-06-06T07:26:33+00:00](https://github.com/leanprover-community/mathlib/commit/789af09c09596258c2c01a368965ffbd0a326873)
feat(algebra/char_p): add two helper lemmas about the cast of the characteristics being zero ([#14464](https://github.com/leanprover-community/mathlib/pull/#14464))

- `(ring_char R : R) = 0` and
- If there exists a positive `n` lifting to zero, then the characteristics is positive.



Co-authored-by: Jon Eugster <eugster.jon@gmail.com>

### [2022-06-05T20:50:27+00:00](https://github.com/leanprover-community/mathlib/commit/769a93495119c11f63d3a776987cbad47a8349ec)
feat(set_theory/*) `cardinal.min` → `Inf` ([#13410](https://github.com/leanprover-community/mathlib/pull/#13410))

We discard `cardinal.min` in favor of `Inf` (the original definition is really just `infi`). 

Note: `lift_min'` is renamed to `lift_min`, as the name clash no longer exists. For consistency, `lift_max'` is renamed to `lift_max` and `lift_max` is renamed to `lift_umax_eq`.

### [2022-06-05T19:28:46+00:00](https://github.com/leanprover-community/mathlib/commit/736b4e5ca34d52e311058f53c79411f204a2bc90)
feat(data/nat/factorization): Lemma on zero-ness of factorization ([#14560](https://github.com/leanprover-community/mathlib/pull/#14560))

Sad naming is sad.

[![Open in Gitpod](https://gitpod.io/button/open-in-gitpod.svg)](https://gitpod.io/from-referrer/)

### [2022-06-05T14:52:20+00:00](https://github.com/leanprover-community/mathlib/commit/043fa29d92a61253920be6dedb1e305b41ba3387)
feat(src/analysis/normed_space): various improvements for continuous bilinear maps ([#14539](https://github.com/leanprover-community/mathlib/pull/#14539))

* Add `simps` to `arrow_congrSL`
* `continuous_linear_map.flip (compSL F E H σ₂₁ σ₁₄)` takes almost 5 seconds to elaborate, but when giving the argument `(F →SL[σ₂₄] H)` for `G` explicitly, this goes down to 1 second.
* Reorder arguments of `is_bounded_bilinear_map_comp`
* Use `continuous_linear_map` results to prove `is_bounded_bilinear_map` results.
* Make arguments to `comp_continuous_multilinear_mapL` explicit
* Add `continuous[_on].clm_comp`, `cont_diff[_on].clm_comp` and `cont_diff.comp_cont_diff_on(₂|₃)`

### [2022-06-05T12:08:46+00:00](https://github.com/leanprover-community/mathlib/commit/d9e72ffbcd0f117947ebe2258697d23caf1d884d)
feat(analysis/normed_space/hahn-banach/separation): Eidelheit's theorem ([#14460](https://github.com/leanprover-community/mathlib/pull/#14460))

Prove Eidelheit's theorem as a corollary to the geometric Hahn-Banach.

### [2022-06-05T07:36:59+00:00](https://github.com/leanprover-community/mathlib/commit/b6395b3a5acd655b16385fa0cdbf1961d6c34b3e)
refactor(set_theory/*): change `omega` to `aleph_0` + golf ([#14467](https://github.com/leanprover-community/mathlib/pull/#14467))

This PR does two things:
- we change `cardinal.omega` to `cardinal.aleph_0` and introduce the notation `ℵ₀`.
- we golf many proofs throughout

### [2022-06-05T04:57:10+00:00](https://github.com/leanprover-community/mathlib/commit/8651b707b2eb2b80b6058fca6a7c350db8e5a82d)
chore(set_theory/cardinal/cofinality): golf + fix spacing ([#14509](https://github.com/leanprover-community/mathlib/pull/#14509))

### [2022-06-05T02:47:09+00:00](https://github.com/leanprover-community/mathlib/commit/10f457251db27804c0f577a92276be2d365470a2)
refactor(group_theory/group_action/defs): rename has_faithful_scalar ([#14515](https://github.com/leanprover-community/mathlib/pull/#14515))

This is the first scalar -> smul renaming transition.

Discussion: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/scalar.20smul.20naming.20discrepancy

### [2022-06-05T01:29:35+00:00](https://github.com/leanprover-community/mathlib/commit/157013da8b7a81bbfe56108ba9d0913b3c512e21)
feat(set_theory/cardinal/cofinality): weaker definition for regular cardinals ([#14433](https://github.com/leanprover-community/mathlib/pull/#14433))

We weaken `c.ord.cof = c` to `c ≤ c.ord.cof` in the definition of regular cardinals, in order to slightly simplify proofs. The lemma `is_regular.cof_eq` shows that this leads to an equivalent definition.

### [2022-06-04T21:21:39+00:00](https://github.com/leanprover-community/mathlib/commit/741f4deb86562a8ce042d89350d51e3b3d60e1f5)
feat(data/fin/tuple/monotone): new file ([#14483](https://github.com/leanprover-community/mathlib/pull/#14483))

### [2022-06-04T21:21:38+00:00](https://github.com/leanprover-community/mathlib/commit/f65b160d8805f3239a8c2299c9712172c596b037)
feat(set_theory/cardinal/cofinality): basic lemmas on limit cardinals ([#14439](https://github.com/leanprover-community/mathlib/pull/#14439))

### [2022-06-04T19:44:08+00:00](https://github.com/leanprover-community/mathlib/commit/d136cd555dab1b0781eb7280e976d42d91cd9e92)
chore(data/pi/lex): turn `pi.lex.linear_order` into an instance ([#14389](https://github.com/leanprover-community/mathlib/pull/#14389))

* Use `[is_well_order ι (<)]` instead of `(wf : well_founded ((<) : ι → ι → Prop))`. This way `pi.lex.linear_order` can be an instance.
* Add `pi.lex.order_bot`/`pi.lex.order_top`/`pi.lex.bounded_order`.

### [2022-06-04T19:44:07+00:00](https://github.com/leanprover-community/mathlib/commit/9749297571a809804997dba608e5531a188321ec)
feat(measure_theory/integral/interval_integral): integrability of nonnegative derivatives on open intervals ([#14147](https://github.com/leanprover-community/mathlib/pull/#14147))

Shows that derivatives of continuous functions are integrable when nonnegative.



Co-authored-by: David Loeffler <d.loeffler.01@cantab.net>
Co-authored-by: loefflerd <d.loeffler.01@cantab.net>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2022-06-04T17:34:23+00:00](https://github.com/leanprover-community/mathlib/commit/93fb5345725d3c8aacf995e98f5c4f3aa0d4b99c)
refactor(topology/vector_bundle): split file ([#14535](https://github.com/leanprover-community/mathlib/pull/#14535))

Also:

* Rename `pullback` -> `topological_vector_bundle.pullback`
* Use `delta_instance` instead of `local attribute [reducible]`
* Change module doc
* Remove transitive import

### [2022-06-04T17:34:22+00:00](https://github.com/leanprover-community/mathlib/commit/3103a89bb62424f4544d36b0a0d52c61c1480d55)
feat(analysis/special_functions/exp): a lemma about `exp (f x) =O[l] const _ _` ([#14524](https://github.com/leanprover-community/mathlib/pull/#14524))

### [2022-06-04T17:34:21+00:00](https://github.com/leanprover-community/mathlib/commit/19b578667e02dbdd1cec7dda6bc1725b155d7a1a)
feat(tactic/set): fix a bug ([#14488](https://github.com/leanprover-community/mathlib/pull/#14488))

We make the behaviour of `tactic.interactive.set` closer to that of `tactic.interactive.let`, this should fix the following issue reported in https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/set.20bug.3F/near/284471523:
```lean
import ring_theory.adjoin.basic

example {R S : Type*} [comm_ring R] [comm_ring S] [algebra R S] (x : S): false :=
begin
  let y : algebra.adjoin R ({x} : set S) := ⟨x, algebra.self_mem_adjoin_singleton R x⟩, -- works
  set y : algebra.adjoin R ({x} : set S) := ⟨x, algebra.self_mem_adjoin_singleton R x⟩, -- error
  sorry
end
```
This is related to [lean[#555](https://github.com/leanprover-community/mathlib/pull/#555)
](https://github.com/leanprover-community/lean/pull/555)

I also fix two completely unrelated docstrings (where the list syntax created two lists instead of one) as I wouldn't want to separately add them to CI...

### [2022-06-04T17:34:20+00:00](https://github.com/leanprover-community/mathlib/commit/a869df9e66f5fb74772ec27c6a5e630ca1f964fb)
feat(analysis/asymptotics/asymptotics): generalize `is_*.inv_rev` ([#14486](https://github.com/leanprover-community/mathlib/pull/#14486))

Use weaker assumption `∀ᶠ x in l, f x = 0 → g x = 0` instead of `∀ᶠ x in l, f x ≠ 0`.

### [2022-06-04T17:34:19+00:00](https://github.com/leanprover-community/mathlib/commit/8a6a79338d525a60a813aa4ff8fa0484a646627a)
refactor(data/fin/basic): reformulate `fin.strict_mono_iff_lt_succ` ([#14482](https://github.com/leanprover-community/mathlib/pull/#14482))

Use `fin.succ_cast` and `fin.succ`. This way we lose the case `n = 0`
but the statement looks more natural in other cases. Also add versions
for `monotone`, `antitone`, and `strict_anti`.

### [2022-06-04T17:34:18+00:00](https://github.com/leanprover-community/mathlib/commit/cab5a456be3e3ff7bfa8544ed2e010ccc70f235f)
refactor(order/directed): use `(≥)` instead of `swap (≤)` ([#14474](https://github.com/leanprover-community/mathlib/pull/#14474))

### [2022-06-04T17:34:17+00:00](https://github.com/leanprover-community/mathlib/commit/b5973ba9c9490c3e40b79b4337729439c45c3393)
feat(measure_theory/measure/measure_space): there exists a ball of positive measure ([#14449](https://github.com/leanprover-community/mathlib/pull/#14449))

Motivated by [#12933](https://github.com/leanprover-community/mathlib/pull/#12933) 

Co-authored-by: Mantas Bakšys <baksysmantas@gmail.com>

### [2022-06-04T15:25:58+00:00](https://github.com/leanprover-community/mathlib/commit/cfcc3a1b7778581482ca42bc2f2149387b847fbf)
chore(data/finsupp/basic): make arguments explicit ([#14551](https://github.com/leanprover-community/mathlib/pull/#14551))

This follow the pattern that arguments to an `=` lemma should be explicit if they're not implied by other arguments.

### [2022-06-04T15:25:56+00:00](https://github.com/leanprover-community/mathlib/commit/b9492402198df95deb5e4ff1a543c4b41b5fff33)
feat(algebra/{lie/subalgebra,module/submodule/pointwise}): submodules and lie subalgebras form canonically ordered additive monoids under addition ([#14529](https://github.com/leanprover-community/mathlib/pull/#14529))

We can't actually make these instances because they result in loops for `simp`.

The `le_iff_exists_sup` lemma is probably not very useful for much beyond these new instances, but it matches `le_iff_exists_add`.

### [2022-06-04T15:25:56+00:00](https://github.com/leanprover-community/mathlib/commit/83c1cd8a1225df2490619f130df156a3e08cc294)
feat(set_theory/cardinal/cofinality): `ω` is a strong limit cardinal ([#14436](https://github.com/leanprover-community/mathlib/pull/#14436))

### [2022-06-04T15:25:55+00:00](https://github.com/leanprover-community/mathlib/commit/0746194f505d76a6abd4a6bf8bd7803eec1b6509)
feat(set_theory/cardinal/cofinality): limit cardinal is at least `ω` ([#14432](https://github.com/leanprover-community/mathlib/pull/#14432))

### [2022-06-04T15:25:54+00:00](https://github.com/leanprover-community/mathlib/commit/15726ee0a96dbdbe3f35c98617725bef4dbe824c)
move(set_theory/{schroeder_bernstein → cardinal/schroeder_bernstein}): move file ([#14426](https://github.com/leanprover-community/mathlib/pull/#14426))

Schroeder-Bernstein is ultimately the statement that cardinals are a total order, so it should go in that folder.

### [2022-06-04T15:25:53+00:00](https://github.com/leanprover-community/mathlib/commit/1f196cb2fd9e5ced9dd6c308c5007c2a76fa170d)
feat(data/list/nodup): Add `list.nodup_iff` ([#14371](https://github.com/leanprover-community/mathlib/pull/#14371))

Add `list.nodup_iff` and two helper lemmas `list.nth_le_eq_iff` and `list.some_nth_le_eq`

### [2022-06-04T13:17:06+00:00](https://github.com/leanprover-community/mathlib/commit/aa7d90bcf730db3bcbe73c23ec2d738268d8fde0)
doc(set_theory/ordinal/natural_ops): mention alternate names ([#14546](https://github.com/leanprover-community/mathlib/pull/#14546))

### [2022-06-04T13:17:05+00:00](https://github.com/leanprover-community/mathlib/commit/8ef2c02c2e59c65530424eccd31a649929a05fd2)
chore(order/bounded_order): move `order_dual` instances up, use them to golf lemmas ([#14544](https://github.com/leanprover-community/mathlib/pull/#14544))

I only golf lemmas and `Prop`-valued instances to be sure that I don't add `order_dual`s to the statements.

### [2022-06-04T13:17:04+00:00](https://github.com/leanprover-community/mathlib/commit/50024528ed166f7444632ffa16ac1c2d9a93bd5d)
refactor(topology): move code around ([#14525](https://github.com/leanprover-community/mathlib/pull/#14525))

Create a new file `topology/inseparable` and more the definitions of `specializes` and `inseparable` to this file. This is a preparation to a larger refactor of these definitions.

### [2022-06-04T13:17:03+00:00](https://github.com/leanprover-community/mathlib/commit/66b618d25e6a807fd593219f6963d8df53771b24)
perf(measure_theory/probability_mass_function/monad): speed up proof ([#14519](https://github.com/leanprover-community/mathlib/pull/#14519))

This causes a deterministic timeout in another PR.

### [2022-06-04T13:17:02+00:00](https://github.com/leanprover-community/mathlib/commit/3f26dfe2bd36d40892bcdf21c167d33e6752ab68)
feat(data/int/basic): Units are either equal or negatives of each other ([#14517](https://github.com/leanprover-community/mathlib/pull/#14517))

This PR adds a lemma stating that units in the integers are either equal or negatives of each other. I have found this lemma to be useful for casework.

### [2022-06-04T13:17:01+00:00](https://github.com/leanprover-community/mathlib/commit/b332507c7de6af1edaea322597b390b7ab2d1c3a)
feat(data/int/basic): Forward direction of `is_unit_iff_nat_abs_eq` ([#14516](https://github.com/leanprover-community/mathlib/pull/#14516))

This PR adds the forward direction of `is_unit_iff_nat_abs_eq` as a separate lemma. This is useful since you often have `is_unit n` as a hypothesis, and `is_unit_iff_nat_abs_eq.mp hn` is a bit of a mouthful.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-06-04T13:17:00+00:00](https://github.com/leanprover-community/mathlib/commit/2a9be5b5753bb428e35f6edd55ebf874b104ae9f)
feat(analysis/special_functions): lemmas about filter `map`/`comap` ([#14513](https://github.com/leanprover-community/mathlib/pull/#14513))

* add `comap_inf_principal_range` and `comap_nhds_within_range`;
* add `@[simp]` to `real.comap_exp_nhds_within_Ioi_zero`;
* add `real.comap_exp_nhds_zero`, `complex.comap_exp_comap_abs_at_top`, `complex.comap_exp_nhds_zero`, `complex.comap_exp_nhds_within_zero`, and `complex.tendsto_exp_nhds_zero_iff`;
* add `complex.map_exp_comap_re_at_bot` and `complex.map_exp_comap_re_at_top`;
* add `comap_norm_nhds_zero` and `complex.comap_abs_nhds_zero`.

### [2022-06-04T13:16:59+00:00](https://github.com/leanprover-community/mathlib/commit/0e943b15c2dac954c7ecd44f64b578adc47e0323)
feat(order/boolean_algebra, set/basic): some compl lemmas ([#14508](https://github.com/leanprover-community/mathlib/pull/#14508))

Added a few lemmas about complementation, and rephrased `compl_compl` and `mem_compl_image` to apply in `boolean_algebra` rather than `set (set _ ))`.



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2022-06-04T13:16:58+00:00](https://github.com/leanprover-community/mathlib/commit/27c4241b4ea903dae2ae4a4d545fdbe47f1ad0c0)
feat(set_theory/ordinal/arithmetic): `has_exists_add_of_le` instance for `ordinal` ([#14499](https://github.com/leanprover-community/mathlib/pull/#14499))

### [2022-06-04T11:12:53+00:00](https://github.com/leanprover-community/mathlib/commit/7c57af94fc5afce927da3ad38aa11893952ce8f6)
feat(order/bounds): Bounds on `set.image2` ([#14306](https://github.com/leanprover-community/mathlib/pull/#14306))

`set.image2` analogues to the `set.image` lemmas.

### [2022-06-04T08:30:21+00:00](https://github.com/leanprover-community/mathlib/commit/85fffda8f13d46fbd02fc89ca2c64d21cc70f3a3)
feat(order/conditionally_complete_lattice,data/real/nnreal): add 2 lemmas ([#14545](https://github.com/leanprover-community/mathlib/pull/#14545))

Add `cInf_univ` and `nnreal.Inf_empty`.

### [2022-06-04T06:32:56+00:00](https://github.com/leanprover-community/mathlib/commit/72ac40e9dca357370018e7561508ed219e00b84a)
feat(data/multiset/basic): add some lemmas ([#14421](https://github.com/leanprover-community/mathlib/pull/#14421))

### [2022-06-04T04:55:08+00:00](https://github.com/leanprover-community/mathlib/commit/a418945adc2cbe843f8e75fcc6adbccd9c4d9644)
chore(set_theory/surreal/basic): golf ([#14168](https://github.com/leanprover-community/mathlib/pull/#14168))

We also add some basic lemmas for simplifying the definition of `numeric` when either a game's left or right moves are empty.

### [2022-06-04T04:16:45+00:00](https://github.com/leanprover-community/mathlib/commit/e1b3351d942b716767f1946bdec624ff1928ac96)
feat(set_theory/game/pgame): Add dot notation on many lemmas ([#14149](https://github.com/leanprover-community/mathlib/pull/#14149))

### [2022-06-03T22:33:16+00:00](https://github.com/leanprover-community/mathlib/commit/009828656de1dab4c05ae2e1bbf42c15f18a7b3c)
feat(set_theory/ordinal/natural_ops): define natural addition ([#14291](https://github.com/leanprover-community/mathlib/pull/#14291))

We define the natural addition operation on ordinals. We prove the basic properties, like commutativity, associativity, and cancellativity. We also provide the type synonym `nat_ordinal` for ordinals with natural operations, which allows us to take full advantage of this rich algebraic structure.

### [2022-06-03T16:16:11+00:00](https://github.com/leanprover-community/mathlib/commit/d63246c03faa2a2c409f2656032df69379df8a3f)
feat(analysis/calculus/fderiv_measurable): the right derivative is measurable ([#14527](https://github.com/leanprover-community/mathlib/pull/#14527))

We already know that the full Fréchet derivative is measurable. In this PR, we follow the same proof to show that the right derivative of a function defined on the real line is also measurable (the target space may be any complete vector space).

### [2022-06-03T16:16:10+00:00](https://github.com/leanprover-community/mathlib/commit/2a21a8614d752fd7a935f40676086a45302dcbc8)
refactor(algebra/order/ring): turn `sq_le_sq` into an `iff` ([#14511](https://github.com/leanprover-community/mathlib/pull/#14511))

* `sq_le_sq` and `sq_lt_sq` are now `iff` lemmas;
* drop `abs_le_abs_of_sq_le_sq` and `abs_lt_abs_of_sq_lt_sq`.

### [2022-06-03T14:08:37+00:00](https://github.com/leanprover-community/mathlib/commit/fa226034f7b44bc36c7bf58f6adde3b978780e3e)
docs(order/boolean_algebra): typo in generalized boolean algebra doc ([#14536](https://github.com/leanprover-community/mathlib/pull/#14536))

### [2022-06-03T12:27:32+00:00](https://github.com/leanprover-community/mathlib/commit/6ca5910f07b72fa4b786e3bd15134ba05df137a9)
feat(measure_theory/integral/lebesgue): approximate a function by a finite integral function in a sigma-finite measure space. ([#14528](https://github.com/leanprover-community/mathlib/pull/#14528))

If `L < ∫⁻ x, f x ∂μ`, then there exists a measurable function `g ≤ f` (even a simple function) with finite integral and `L < ∫⁻ x, g x ∂μ`, if the measure is sigma-finite.



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2022-06-03T10:31:17+00:00](https://github.com/leanprover-community/mathlib/commit/bec8b65e84c756d40aa0ce4efe91bd63dca95e95)
feat(analysis/calculus/tangent_cone): unique differentiability of open interval at endpoint ([#14530](https://github.com/leanprover-community/mathlib/pull/#14530))

We show that, if a point belongs to the closure of a convex set with nonempty interior, then it is a point of unique differentiability. We apply this to the specific situation of `Ioi` and `Iio`.

### [2022-06-03T10:31:16+00:00](https://github.com/leanprover-community/mathlib/commit/705160e9e3b68abbb75716ed62e3848b0b608dcf)
feat(algebra/char_zero): add a lemma `ring_hom.injective_nat` ([#14414](https://github.com/leanprover-community/mathlib/pull/#14414))

Note that there is a lemma `ring_hom.injective_int`.

### [2022-06-03T10:31:15+00:00](https://github.com/leanprover-community/mathlib/commit/d2dcb74a1e19ea93d2ee4b462288fb2a6163de5c)
feat(data/polynomial/eval): reduce assumptions, add a lemma ([#14391](https://github.com/leanprover-community/mathlib/pull/#14391))

Note that there is a lemma `mv_polynomial.support_map_of_injective`.

### [2022-06-03T10:31:14+00:00](https://github.com/leanprover-community/mathlib/commit/c9d69a46a7f304024cd79d71c1f100590dfbee4a)
feat(topology/algebra/module/finite_dimension): all linear maps from a finite dimensional T2 TVS are continuous ([#13460](https://github.com/leanprover-community/mathlib/pull/#13460))

Summary of the changes :
- generalize a bunch of results from `analysis/normed_space/finite_dimension` (main ones are : `continuous_equiv_fun_basis`, `linear_map.continuous_of_finite_dimensional`, and related constructions like `linear_map.to_continuous_linear_map`) to arbitrary TVSs, and move them to a new file `topology/algebra/module/finite_dimension`
- generalize `linear_map.continuous_iff_is_closed_ker` to arbitrary TVSs, and move it from `analysis/normed_space/operator_norm` to the new file
- as needed by the generalizations, add lemma `unique_topology_of_t2` : if `𝕜` is a nondiscrete normed field, any T2 topology on `𝕜` which makes it a topological vector space over itself (with the norm topology) is *equal* to the norm topology
- finally, change `pi_eq_sum_univ` to take any `decidable_eq` instance (not just the classical ones), and fix later uses

### [2022-06-03T08:57:19+00:00](https://github.com/leanprover-community/mathlib/commit/31cbfbb046db71b01811fb75932b2dceb5576dc3)
feat(linear_algebra/basis): repr_support_of_mem_span ([#14504](https://github.com/leanprover-community/mathlib/pull/#14504))

This lemma states that if a vector is in the span of a subset of the basis vectors, only this subset of basis vectors will be used in its `repr` representation.



Co-authored-by: Alexander Bentkamp <a.bentkamp@vu.nl>

### [2022-06-03T07:58:59+00:00](https://github.com/leanprover-community/mathlib/commit/2b69bb43b37bfd2da2f0d6fa41e050bd6f5e75c8)
feat(analysis/complex/upper_half_plane): extend action on upper half plane to GL_pos ([#12415](https://github.com/leanprover-community/mathlib/pull/#12415))

This extends the action on the upper half plane from `SL_2` to `GL_pos`,



Co-authored-by: AlexKontorovich <58564076+AlexKontorovich@users.noreply.github.com>

### [2022-06-02T21:38:24+00:00](https://github.com/leanprover-community/mathlib/commit/1a1895cd74de2b3272df34347fa37e69bea8d1b3)
feat(data/nat/basic): add lemmas about `nat.bit_cases_on` ([#14481](https://github.com/leanprover-community/mathlib/pull/#14481))

Also drop `nat.bit_cases` (was the same definition with a different
order of arguments).

### [2022-06-02T19:38:29+00:00](https://github.com/leanprover-community/mathlib/commit/ade30c34adc9ed1ab98753e83a0794a6ea05b21e)
feat(data/int/basic): Lemmas for when a square equals 1 ([#14501](https://github.com/leanprover-community/mathlib/pull/#14501))

This PR adds two lemmas for when a square equals one. The `lt` lemma will be useful for irreducibility of x^n-x-1.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-06-02T19:38:28+00:00](https://github.com/leanprover-community/mathlib/commit/e44333112716d0f67bf23abe213bd32941e9597d)
refactor(field_theory/normal): generalize `lift_normal` and `restrict_normal` ([#14450](https://github.com/leanprover-community/mathlib/pull/#14450))

This generalization seems useful. The example I have in mind is restricting a map `ϕ : E →ₐ[F] (algebraic_closure E)` to a map `ϕ : E →ₐ[F] E` when E/F is normal.

Coauthored by @mariainesdff

### [2022-06-02T17:31:51+00:00](https://github.com/leanprover-community/mathlib/commit/ae0258357889e34fa2c9eb49e905628fdd0f9fbf)
refactor(data/set/finite): protect `set.finite` ([#14344](https://github.com/leanprover-community/mathlib/pull/#14344))

This change will make it so that it does not conflict with a top-level `finite` that will be added to complement `infinite`.

### [2022-06-02T17:31:49+00:00](https://github.com/leanprover-community/mathlib/commit/28031a8024016a40d7f57109d5ed20aea14765c0)
feat(number_theory/factorization): evaluating arithmetic functions at prime powers ([#13817](https://github.com/leanprover-community/mathlib/pull/#13817))




Co-authored-by: Bhavik Mehta <bm489@cam.ac.uk>

### [2022-06-02T15:58:16+00:00](https://github.com/leanprover-community/mathlib/commit/0575db0ccb6aca1b130ef9dfcbb1bdb1911e5db9)
feat(topology/vector_bundle): define some useful linear maps globally ([#14484](https://github.com/leanprover-community/mathlib/pull/#14484))

* Define `pretrivialization.symmₗ`, `pretrivialization.linear_map_at`, `trivialization.symmL`, `trivialization.continuous_linear_map_at`
* These are globally-defined (continuous) linear maps. They are linear equivalences on `e.base_set`, but it is useful to define these globally. They are defined as `0` outside `e.base_set`
* These are convenient to define the vector bundle of continuous linear maps.



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2022-06-02T15:58:15+00:00](https://github.com/leanprover-community/mathlib/commit/c5f8d786419fc0fe5eeaec1c360be0d47be21d5a)
doc(set_theory/cardinal/cofinality): add myself as author ([#14469](https://github.com/leanprover-community/mathlib/pull/#14469))

### [2022-06-02T15:58:14+00:00](https://github.com/leanprover-community/mathlib/commit/4bd8c855d6ba8f0d5eefbf80c20fa00ee034dec9)
feat(category_theory/limits): is_kernel_of_comp ([#14409](https://github.com/leanprover-community/mathlib/pull/#14409))

From LTE.

Also rename `lift_comp_ι` to `lift_ι` for consistency with the general `has_limit` versions.

### [2022-06-02T15:58:13+00:00](https://github.com/leanprover-community/mathlib/commit/294159008a5ab2469cd4b69e5806fb20878ae6ba)
feat(linear_algebra/matrix): Spectral theorem for matrices ([#14231](https://github.com/leanprover-community/mathlib/pull/#14231))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-06-02T13:48:11+00:00](https://github.com/leanprover-community/mathlib/commit/4e1eeebe63ac6d44585297e89c6e7ee5cbda487a)
feat(tactic/linear_combination): allow combinations of arbitrary proofs ([#14229](https://github.com/leanprover-community/mathlib/pull/#14229))

This changes the syntax of `linear_combination` so that the combination is expressed using arithmetic operation. Credit to @digama0 for the parser. See [Zulip](https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.2313979.20arbitrary.20proof.20terms.20in.20.60linear_combination.60) for more details.

Co-authored-by: Mario Carneiro <di.gama@gmail.com>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2022-06-02T09:08:42+00:00](https://github.com/leanprover-community/mathlib/commit/57885b4e115d14c920e4e646f209e7e274938cba)
feat(topological_space/vector_bundle): reformulate linearity condition ([#14485](https://github.com/leanprover-community/mathlib/pull/#14485))

* Reformulate the linearity condition on (pre)trivializations of vector bundles using `total_space_mk`. Note: it is definitionally equal to the previous definition, but without using the coercion.
* Make one argument of `e.linear` implicit
* Simplify the proof of linearity of the product of vector bundles

### [2022-06-01T23:57:04+00:00](https://github.com/leanprover-community/mathlib/commit/c414df7d5fe3eff4bc124f2d7f25e7d56060ad6f)
feat(tactic/linear_combination): allow arbitrary proof terms ([#13979](https://github.com/leanprover-community/mathlib/pull/#13979))

This extends `linear_combination` to allow arbitrary proof terms of equalities instead of just local hypotheses. 

```lean
constants (qc : ℚ) (hqc : qc = 2*qc)

example (a b : ℚ) (h : ∀ p q : ℚ, p = q) : 3*a + qc = 3*b + 2*qc :=
by linear_combination (h a b, 3) (hqc)
```

This changes the syntax of `linear_combination` in the case where no coefficient is provided and it defaults to 1. A space-separated list of pexprs won't parse, since there's an ambiguity in `h1 h2` between an application or two arguments. So this case now requres parentheses around the argument:
`linear_combination (h1, 3) (h2)`

Does anyone object to this syntax change?



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2022-06-01T20:32:56+00:00](https://github.com/leanprover-community/mathlib/commit/12ad63e67a62c8e59b2b1ccb359c0bdab5a06b99)
feat(order/conditionally_complete_lattice): Map `Inf` by monotone function ([#14118](https://github.com/leanprover-community/mathlib/pull/#14118))

### [2022-06-01T17:27:02+00:00](https://github.com/leanprover-community/mathlib/commit/9600f4f6f8caf49c50e32ed9bc7ab8d09cbaaade)
feat(order/filter/bases): view a filter as a *bundled* filter basis ([#14506](https://github.com/leanprover-community/mathlib/pull/#14506))

We already have `filter.basis_sets` which says that the elements of a filter are a basis of itself (in the `has_basis` sense), but we don't have the fact that they form a filter basis (in the `filter_basis` sense), and `x ∈ f.basis_sets.is_basis.filter_basis` is not defeq to `x ∈ f`

### [2022-06-01T17:27:01+00:00](https://github.com/leanprover-community/mathlib/commit/0950ba3d2bb8ba0d95389ced7cdc29b705309aed)
refactor(topology/separation): rename `indistinguishable` to `inseparable` ([#14401](https://github.com/leanprover-community/mathlib/pull/#14401))

* Replace `indistinguishable` by `inseparable` in the definition and lemma names. The word "indistinguishable" is too generic.
* Rename `t0_space_iff_distinguishable` to `t0_space_iff_not_inseparable` because the name `t0_space_iff_separable` is misleading, slightly golf the proof.
* Add `t0_space_iff_nhds_injective`, `nhds_injective`, reorder lemmas around these two.

### [2022-06-01T17:27:00+00:00](https://github.com/leanprover-community/mathlib/commit/9b3ea03db959ce4693a1fda4bc534f5a6d380054)
feat(data/bundle): make arguments to proj and total_space_mk implicit ([#14359](https://github.com/leanprover-community/mathlib/pull/#14359))

I will wait for a later PR to (maybe) fix the reducibility/simp of these declarations.

### [2022-06-01T15:09:46+00:00](https://github.com/leanprover-community/mathlib/commit/dba797a432ad47b2f0fbec26df25da12be36df8d)
feat(order/liminf_limsup): composition `g ∘ f` is bounded iff `f` is bounded ([#14479](https://github.com/leanprover-community/mathlib/pull/#14479))

* If `g` is a monotone function that tends to infinity at infinity, then a filter is bounded from above under `g ∘ f` iff it is bounded under `f`, similarly for antitone functions and/or filter bounded from below.
* A filter is bounded from above under `real.exp ∘ f` iff it is is bounded from above under `f`.
* Use `monotone` in `real.exp_monotone`.
* Add `@[mono]` to `real.exp_strict_mono`.

### [2022-06-01T15:09:45+00:00](https://github.com/leanprover-community/mathlib/commit/047db39933db02fc1fd79d0ad9e0ee265bcf9607)
feat(algebra/char_p/basic): add lemma `ring_char.char_ne_zero_of_finite` ([#14454](https://github.com/leanprover-community/mathlib/pull/#14454))

This adds the fact that a finite (not necessarily associative) ring cannot have characteristic zero.
See [this topic on Zulip](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/Statements.20about.20finite.20rings).

### [2022-06-01T15:09:44+00:00](https://github.com/leanprover-community/mathlib/commit/df057e3297d69be4034b69cbd9640f3c89dd94d8)
feat(measure_theory/integral/lebesgue): integral over finite and countable sets ([#14447](https://github.com/leanprover-community/mathlib/pull/#14447))

### [2022-06-01T15:09:43+00:00](https://github.com/leanprover-community/mathlib/commit/f0216ff2729a7df9890d2537c9cb40086afeaf7e)
refactor(combinatorics/simple_graph/basic): rename induced embedding on complete graphs ([#14404](https://github.com/leanprover-community/mathlib/pull/#14404))

### [2022-06-01T15:09:42+00:00](https://github.com/leanprover-community/mathlib/commit/0a0a60cc467497467bfa425b2c9b751052408f9c)
feat(data/set/finite,order/*): generalize some lemmas from sets to (co)frames ([#14394](https://github.com/leanprover-community/mathlib/pull/#14394))

* generalize `set.Union_inter_of_monotone` to an `order.frame`;
* add dual versions, both for `(co)frame`s and sets;
* same for `set.Union_Inter_of_monotone`.

### [2022-06-01T15:09:41+00:00](https://github.com/leanprover-community/mathlib/commit/892f8899cd7c696966342d15befe5ad41786d8dd)
feat(data/matrix/basic): lemmas about mul_vec and single ([#13835](https://github.com/leanprover-community/mathlib/pull/#13835))

We seem to be proving variants of the same statement over and over again; this introduces a new lemma that we can use to prove all these variants trivially in term mode. The new lemmas are:

* `matrix.mul_vec_single`
* `matrix.single_vec_mul`
* `matrix.diagonal_mul_vec_single`
* `matrix.single_vec_mul_diagonal`

A lot of the proofs got shorter by avoiding `ext` which invokes a more powerful lemma than we actually need.

### [2022-06-01T13:00:47+00:00](https://github.com/leanprover-community/mathlib/commit/f359d55ba7adcd7dfba5f9c5784a838e6bbe64ca)
feat(analysis/asymptotics/asymptotics): generalize `is_O.smul` etc ([#14487](https://github.com/leanprover-community/mathlib/pull/#14487))

Allow `(k₁ : α → 𝕜) (k₂ : α → 𝕜')` instead of `(k₁ k₂ : α → 𝕜)`.

### [2022-06-01T13:00:46+00:00](https://github.com/leanprover-community/mathlib/commit/4f1c8cf5c94b8abccc5405b91ed631ea9207e7f1)
feat(algebra/order/group): helper lemma `0 ≤ a + |a|` ([#14457](https://github.com/leanprover-community/mathlib/pull/#14457))

Helper lemma for integers and absolute values.

### [2022-06-01T12:13:54+00:00](https://github.com/leanprover-community/mathlib/commit/f4fe7907163d9cb3769f7cb60e14c112009e5afc)
feat(topology/vector_bundle): redefine continuous coordinate change ([#14462](https://github.com/leanprover-community/mathlib/pull/#14462))

* For any two trivializations, we define the coordinate change between the two trivializations: continous linear automorphism of `F`, defined by composing one trivialization with the inverse of the other. This is defined for any point in the intersection of their base sets, and we define it to be the identity function outside this set.
* Redefine `topological_vector_bundle`: we now require that this coordinate change between any two trivializations is continuous on the intersection of their base sets.
* Redefine `topological_vector_prebundle` with the existence of a continuous linear coordinate change function.
* Simplify the proofs that the coordinate change function is continuous for constructions on vector bundles.

### [2022-06-01T09:59:02+00:00](https://github.com/leanprover-community/mathlib/commit/60371b883c78b980093d1af05dd80032f1f70114)
refactor(topology/metric_space/lipschitz): use `function.End` ([#14502](https://github.com/leanprover-community/mathlib/pull/#14502))

This way we avoid dependency on `category_theory`.

### [2022-06-01T09:59:01+00:00](https://github.com/leanprover-community/mathlib/commit/7d713439daeee2c182ccc075f9a5ec66af705994)
chore(topology/algebra/uniform_field): Wrap in namespace ([#14498](https://github.com/leanprover-community/mathlib/pull/#14498))

Put everything in `topology.algebra.uniform_field` in the `uniform_space.completion` namespace.



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2022-06-01T09:18:43+00:00](https://github.com/leanprover-community/mathlib/commit/2a0f474326b729679e3f87515f12ded91f247f57)
feat(analysis/normed_space/star/character_space): compactness of the character space of a normed algebra ([#14135](https://github.com/leanprover-community/mathlib/pull/#14135))

This PR puts a `compact_space` instance on `character_space 𝕜 A` for a normed algebra `A` using the Banach-Alaoglu theorem. This is a key step in developing the continuous functional calculus.



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2022-06-01T01:59:39+00:00](https://github.com/leanprover-community/mathlib/commit/6b1836243aedeaa63570ef290da312e2f13f4125)
feat(data/zmod/quotient): More API for `orbit_zpowers_equiv` ([#14181](https://github.com/leanprover-community/mathlib/pull/#14181))

This PR adds another `symm_apply` API lemma for `orbit_zpowers_equiv`, taking `(k : ℤ)` rather than `(k : zmod (minimal_period ((•) a) b))`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-05-31T22:07:31+00:00](https://github.com/leanprover-community/mathlib/commit/bdf3e97009f6066579768f4109d478447ddaad84)
chore(data/polynomial/laurent): remove unused case distinction ([#14490](https://github.com/leanprover-community/mathlib/pull/#14490))

### [2022-05-31T20:07:53+00:00](https://github.com/leanprover-community/mathlib/commit/26a62b0da8b3710bafb97abb4bc964a5838c3a4f)
fix(topology/algebra/module/multilinear): initialize simps projections ([#14495](https://github.com/leanprover-community/mathlib/pull/#14495))

* `continuous_multilinear_map.smul_right` has a `simps` attribute, causing the generation of the simps projections for `continuous_multilinear_map`, but without specific support for apply. We now initialize the simps projections correctly.
* This fixes an error in the sphere eversion project

### [2022-05-31T20:07:51+00:00](https://github.com/leanprover-community/mathlib/commit/9dc4b8ecd8695445ad7d717da17665ce617e1786)
feat(algebra/group_power/basic): `a^2 = b^2 ↔ a = b ∨ a = -b` ([#14431](https://github.com/leanprover-community/mathlib/pull/#14431))

Generalize `a ^ 2 = 1 ↔ a = 1 ∨ a = -1` to `ring` + `no_zero_divisors` and prove `a ^ 2 = b ^ 2 ↔ a = b ∨ a = -b` under `comm_ring` + `no_zero_divisors`.

### [2022-05-31T18:03:22+00:00](https://github.com/leanprover-community/mathlib/commit/8e522f85ff5ca2564e9214a40314ab0fd6552b05)
feat(algebra/order/monoid): Missing `has_exists_mul_of_le` instances ([#14476](https://github.com/leanprover-community/mathlib/pull/#14476))

Add a few `has_exists_mul_of_le` instances, generalize `has_exists_mul_of_le` to `has_le` + `has_mul`.

### [2022-05-31T13:49:17+00:00](https://github.com/leanprover-community/mathlib/commit/e0b2ad8face75b0e5c8665bec2e252e6753dc93f)
chore(algebra/lie/quotient): golf some instances ([#14480](https://github.com/leanprover-community/mathlib/pull/#14480))

### [2022-05-31T13:49:16+00:00](https://github.com/leanprover-community/mathlib/commit/806f673f5f1105bba4758b830b28877597d788e1)
feat(algebra/star): star_single, star_update ([#14477](https://github.com/leanprover-community/mathlib/pull/#14477))




Co-authored-by: Alexander Bentkamp <a.bentkamp@vu.nl>

### [2022-05-31T11:57:57+00:00](https://github.com/leanprover-community/mathlib/commit/3e79ce405303a69ed235be8308e6bb88e6bf61ee)
chore(combinatorics/simple_graph/basic): remove unnecessary lemma ([#14468](https://github.com/leanprover-community/mathlib/pull/#14468))

This lemma was added in [#11371](https://github.com/leanprover-community/mathlib/pull/#11371) for the Lean version bump, since the more powerful congr lemmas revealed a bug in fintype instances that were finally corrected in [#14136](https://github.com/leanprover-community/mathlib/pull/#14136).

### [2022-05-31T11:57:56+00:00](https://github.com/leanprover-community/mathlib/commit/1eb7339515ce178ddec798dd7490eef2afc8d54e)
feat(topology/algebra/group): add `continuous_of_continuous_at_one` ([#14451](https://github.com/leanprover-community/mathlib/pull/#14451))

This lemma is more general than
`uniform_continuous_of_continuous_at_one` because it allows the
codomain to be a monoid.

### [2022-05-31T11:57:55+00:00](https://github.com/leanprover-community/mathlib/commit/0f3e083c81c26407d9f1f91fc94cf1378d0263e9)
feat(algebra/algebra/basic): relax typeclass assumptions ([#14415](https://github.com/leanprover-community/mathlib/pull/#14415))

### [2022-05-31T11:57:54+00:00](https://github.com/leanprover-community/mathlib/commit/346174e949314759c0218ec550adfadc1ee3e475)
feat(data/polynomial/laurent): a Laurent polynomial can be multiplied by a power of `X` to "become" a polynomial ([#14106](https://github.com/leanprover-community/mathlib/pull/#14106))

This PR proves two versions of the result mentioned in the title, one involving multiplying by a non-negative power of `T`, the other usable as an induction principle.

### [2022-05-31T09:48:05+00:00](https://github.com/leanprover-community/mathlib/commit/87fbbd1f030e6795719b4d04c4d85f8893b03a84)
chore(analysis/asymptotics): golf 2 proofs ([#14473](https://github.com/leanprover-community/mathlib/pull/#14473))

Don't go back and forth between `∈ l` and `∀ᶠ l`.

### [2022-05-31T09:48:04+00:00](https://github.com/leanprover-community/mathlib/commit/9e9cc57d5ed0e2c9ec6485981a363a8642b960b0)
feat(analysis/asymptotics/asymptotics): add `is_O_const_iff` ([#14472](https://github.com/leanprover-community/mathlib/pull/#14472))

* use `f =ᶠ[l] 0` instead of `∀ᶠ x in l, f x = 0` in
  `is_{O_with,O,o}_zero_right_iff`;
* generalize these lemmas from `0` in a `normed_group` to `0` in a `semi_normed_group`;
* add `is_O.is_bounded_under_le`, `is_O_const_of_ne`, and `is_O_const_iff`.

### [2022-05-31T09:48:03+00:00](https://github.com/leanprover-community/mathlib/commit/615babafe5d46c44c52425fe2f15f03ea33cc99b)
feat(order/monotone): prove `nat.exists_strict_mono` etc ([#14435](https://github.com/leanprover-community/mathlib/pull/#14435))

* add `nat.exists_strict_mono`, `nat.exists_strict_anti`, `int.exists_strict_mono`, and `int.exists_strict_anti`;
* move `set.Iic.no_min_order` and `set.Ici.no_max_order` to `data.set.intervals.basic`;
* add `set.Iio.no_min_order` and `set.Ioi.no_max_order`;
* add `no_max_order.infinite` and `no_min_order.infinite`, use them in the proofs;
* rename `set.Ixx.infinite` to `set.Ixx_infinite`;
* add `set.Ixx.infinite` - lemmas and instances about `infinite`, not `set.infinite`.

### [2022-05-31T09:48:01+00:00](https://github.com/leanprover-community/mathlib/commit/cafeaa35d2096d4d0886bd86602dd97b28919539)
feat(data/set/lattice): add lemmas about unions over natural numbers ([#14393](https://github.com/leanprover-community/mathlib/pull/#14393))

* Add `Union`/`Inter` versions of lemmas like `supr_ge_eq_supr_nat_add`.
* Make some arguments explicit.

### [2022-05-31T09:48:00+00:00](https://github.com/leanprover-community/mathlib/commit/7127048505e16194bdfebc7e5ba122fb2916b1d9)
feat(data/polynomial/*): `support_binomial` and `support_trinomial` lemmas ([#14385](https://github.com/leanprover-community/mathlib/pull/#14385))

This PR adds lemmas for the support of binomials and trinomials. The trinomial lemmas will be helpful for irreducibility of x^n-x-1.

### [2022-05-31T09:47:59+00:00](https://github.com/leanprover-community/mathlib/commit/8315ad02246e6ea2240d87e83bc151d993dcaf8e)
refactor(group_theory/sylow): Move basic API earlier in the file ([#14367](https://github.com/leanprover-community/mathlib/pull/#14367))

This PR moves some basic sylow API to earlier in the file, so that it can be used earlier.

### [2022-05-31T09:47:58+00:00](https://github.com/leanprover-community/mathlib/commit/111ce5b84f4526b567eea2a11cc56791ad34202c)
feat(group_theory/subgroup/basic): `comap_le_comap` lemmas ([#14365](https://github.com/leanprover-community/mathlib/pull/#14365))

This PR adds some `comap_le_comap` lemmas.

### [2022-05-31T09:47:57+00:00](https://github.com/leanprover-community/mathlib/commit/1b49d480e85e9f316a41eb0c30964dcdfd837b02)
refactor(group_theory/order_of_element): Remove coercion in `order_eq_card_zpowers` ([#14364](https://github.com/leanprover-community/mathlib/pull/#14364))

This PR removes a coercion in `order_eq_card_zpowers`.

### [2022-05-31T09:47:56+00:00](https://github.com/leanprover-community/mathlib/commit/6531c72008e29b6b3da8b08c7e643f2c47431fd6)
chore(algebra/algebra/restrict_scalars): put a right action on restricted scalars ([#13996](https://github.com/leanprover-community/mathlib/pull/#13996))

This provides `module Rᵐᵒᵖ (restrict_scalars R S M)` in terms of a `module Sᵐᵒᵖ M` action, by sending `Rᵐᵒᵖ` to `Sᵐᵒᵖ` through `algebra_map R S`.

This means that `restrict_scalars R S M` now works for right-modules and bi-modules in addition to left-modules.

This will become important if we change `algebra R A` to require `A` to be an `R`-bimodule, as otherwise `restrict_scalars R S A` would no longer be an algebra.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.2313996.20right.20actions.20on.20restrict_scalars/near/282045994)

### [2022-05-31T08:02:43+00:00](https://github.com/leanprover-community/mathlib/commit/876cb64e1d1bd6289e2f71a0fb69dea0005eb3dc)
feat({group,ring}_theory/sub{monoid,group,semiring,ring}): the action by the center is commutative ([#14362](https://github.com/leanprover-community/mathlib/pull/#14362))

None of these `smul_comm_class` instances carry data, so they cannot form diamonds.

This action is used to golf the proofs in `quadratic_form.associated`.

### [2022-05-30T23:53:46+00:00](https://github.com/leanprover-community/mathlib/commit/6633283a66ad355acd3cdce4ef4e77173aeb69e4)
fix(tactic/norm_num): fix ge unfolding bug ([#14425](https://github.com/leanprover-community/mathlib/pull/#14425))

As reported on [Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bug.20in.20norm_num.20handling.20of.20ge.3F).

### [2022-05-30T22:37:30+00:00](https://github.com/leanprover-community/mathlib/commit/e7cc0eba73d0416ffa067883e8d4846ddd292427)
feat(group_theory/perm/cycle): improve doc and namespace for cauchy's theorem ([#14471](https://github.com/leanprover-community/mathlib/pull/#14471))

Fix a few things in the module docstring, remove namespace, add an additive version and add docstrings for Cauchy's theorem.

https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/Existence.20of.20elements.20of.20order.20p.20in.20a.20group/near/284399583

### [2022-05-30T17:48:15+00:00](https://github.com/leanprover-community/mathlib/commit/ba22440fbf321f36fa1b4a3b2ba62201465e7ce7)
feat(set_theory/cardinal/cofinality): use `bounded` and `unbounded` ([#14438](https://github.com/leanprover-community/mathlib/pull/#14438))

We change `∀ a, ∃ b ∈ s, ¬ r b a` to its def-eq predicate `unbounded r s`, and similarly for `bounded r s`.

### [2022-05-30T17:48:15+00:00](https://github.com/leanprover-community/mathlib/commit/1de757ef4c743756c88c583730edd1d98a7711d1)
feat(data/fin/basic): add `iff`lemmas about `nontrivial`/`subsingleton` ([#14390](https://github.com/leanprover-community/mathlib/pull/#14390))

### [2022-05-30T17:10:32+00:00](https://github.com/leanprover-community/mathlib/commit/1791ed3c6225ba544d24c913fa6ab31c40357139)
chore(ring_theory/polynomial/vieta): generalize universe ([#14411](https://github.com/leanprover-community/mathlib/pull/#14411))

### [2022-05-30T17:10:31+00:00](https://github.com/leanprover-community/mathlib/commit/08c14123aaffea64e1674549e334eccbf874a5e0)
feat(set_theory/game/pgame): `lt_or_equiv_or_gf` ([#14407](https://github.com/leanprover-community/mathlib/pull/#14407))

### [2022-05-30T16:30:46+00:00](https://github.com/leanprover-community/mathlib/commit/59a1a509be90ca521b0e5ce543804308af3bb320)
chore(analysis/normed_space/pi_Lp): add `pi_Lp.linear_equiv` ([#14380](https://github.com/leanprover-community/mathlib/pull/#14380))

This is just a more bundled version of the `pi_Lp.equiv` we already have.
Also adds two missing simp lemmas about `pi_Lp.equiv`.

### [2022-05-30T13:47:58+00:00](https://github.com/leanprover-community/mathlib/commit/01af73ae136705c45f2b32a6861faded58cb15f7)
feat(alegbra/homology/short_exact/abelian.lean): Right split exact sequences + case of modules ([#14376](https://github.com/leanprover-community/mathlib/pull/#14376))

A right split short exact sequence in an abelian category is split.
Also, in the case of the Module category, a version fully expressed in terms of modules and linear maps is provided.

### [2022-05-30T12:53:32+00:00](https://github.com/leanprover-community/mathlib/commit/3641bf9a9bb43772ba369e76a90b0697674a532c)
refactor(algebraic_topology/*): use rw instead of erw where possible ([#14320](https://github.com/leanprover-community/mathlib/pull/#14320))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-30T11:01:47+00:00](https://github.com/leanprover-community/mathlib/commit/af70f8ef27cec9dc5fdfc34fba1011300c4fb7de)
feat(number_theory/bernoulli_polynomials): Added some lemmas ([#14282](https://github.com/leanprover-community/mathlib/pull/#14282))

Have added some lemmas regarding rearrangements of sums and evaluations of Bernoulli polynomials.



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2022-05-30T04:06:04+00:00](https://github.com/leanprover-community/mathlib/commit/475f18b620e743ecc547fe096502c054cf8b5db8)
refactor(analysis/asymptotics): make `is_o`/`is_O` work with `calc` ([#14129](https://github.com/leanprover-community/mathlib/pull/#14129))

Reorder arguments of `is_O_with`/`is_O`/`is_o` as well as `trans` lemmas so that they work with `calc`.

Also adds `f =O[l] g` notation.

Fixes [#2273](https://github.com/leanprover-community/mathlib/pull/#2273)

### [2022-05-29T17:50:03+00:00](https://github.com/leanprover-community/mathlib/commit/55f32daeda5844a45580f1c71443f94c354c230d)
feat(topology/vector_bundle): the pullback of a vector bundle is a vector bundle ([#8545](https://github.com/leanprover-community/mathlib/pull/#8545))

We construct the pullback bundle of a vector bundle.

* Co-authored by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>
* Co-authored by: Floris van Doorn <fpvdoorn@gmail.com>
* Co-authored by: Sebastien Gouezel <sebastien.gouezel@univ-rennes1.fr>

### [2022-05-29T15:46:51+00:00](https://github.com/leanprover-community/mathlib/commit/938eeeb4d473ba542797e0e5e72c94aa722c2e68)
feat(algebra/group/with_one): add a recursor and a `no_zero_divisors` instance ([#14434](https://github.com/leanprover-community/mathlib/pull/#14434))

### [2022-05-29T13:40:03+00:00](https://github.com/leanprover-community/mathlib/commit/b673ed8a6bfde770e8505d0cb2d302549b19b4eb)
feat(analysis/normed_space): Geometric Hahn Banach theorems ([#7288](https://github.com/leanprover-community/mathlib/pull/#7288))

This proves a range of variants of the Hahn-Banach separation theorems.



Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-05-29T11:50:46+00:00](https://github.com/leanprover-community/mathlib/commit/98b763729c8c50e53e7d7ba76ab01ba72e6306d3)
feat(category_theory/limits): monos have images ([#14186](https://github.com/leanprover-community/mathlib/pull/#14186))

Turning on an instance for `has_image` for any monomorphism.




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-29T11:13:23+00:00](https://github.com/leanprover-community/mathlib/commit/8d13a2db4c69722d2902a5faecd3760e920b4f38)
feat(algebra/order/rearrangement): Equality case of the Rearrangement Inequality ([#13245](https://github.com/leanprover-community/mathlib/pull/#13245))

This PR deduces the cases of equality and strict inequality of the Rearrangement Inequality as a corollary to the existing statement of the rearrangement inequality.



Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-05-29T09:04:36+00:00](https://github.com/leanprover-community/mathlib/commit/6b936a9d2daba3bf60f963c8dad157c741813c5b)
feat(data/set/basic): simp-normal form for `↥{x | p x}` ([#14441](https://github.com/leanprover-community/mathlib/pull/#14441))

We make `{x // p x}` the simp-normal form for `↥{x | p x}`. We also rewrite some lemmas to use the former instead of the latter.

### [2022-05-29T01:31:29+00:00](https://github.com/leanprover-community/mathlib/commit/3e58d9c3d2747383088ccb4d08eb10b8dfe4879a)
feat(data/nat/enat): `is_well_order` instance for `enat` ([#14416](https://github.com/leanprover-community/mathlib/pull/#14416))

### [2022-05-28T20:10:48+00:00](https://github.com/leanprover-community/mathlib/commit/ad2baee4083eb9a905ec775e3ed4d64bea5ea2dc)
feat(topology/separation): `t0_space` and `t1_space` for `α × β` and `Π i, α i` ([#14418](https://github.com/leanprover-community/mathlib/pull/#14418))

### [2022-05-28T17:52:57+00:00](https://github.com/leanprover-community/mathlib/commit/f13e5dfdaf7f8267bdeefd8fb168aafdd3ef6950)
refactor(set_theory/*) rename `wf` lemmas to `lt_wf` ([#14417](https://github.com/leanprover-community/mathlib/pull/#14417))

This is done for consistency with the rest of `mathlib` (`nat.lt_wf`, `enat.lt_wf`, `finset.lt_wf`, ...)

### [2022-05-28T17:52:56+00:00](https://github.com/leanprover-community/mathlib/commit/762fc15070a876d869d025b35cf6abe5067c6eef)
feat(set_theory/ordinal/arithmetic): Add missing instances for `ordinal` ([#14128](https://github.com/leanprover-community/mathlib/pull/#14128))

We add the following instances:
- `monoid_with_zero ordinal`
- `no_zero_divisors ordinal`
- `is_left_distrib_class ordinal`
- `contravariant_class ordinal ordinal (swap (+)) (<)`
- `is_antisymm ordinal (∣)`

### [2022-05-28T17:52:55+00:00](https://github.com/leanprover-community/mathlib/commit/3280d00618a849c87b3291f1a5f91015a4b1d55d)
feat(algebra/order/monoid_lemmas_zero_lt): add some lemmas assuming `mul_zero_class` `partial_order`, remove primes ([#14060](https://github.com/leanprover-community/mathlib/pull/#14060))

### [2022-05-28T15:49:21+00:00](https://github.com/leanprover-community/mathlib/commit/1e46532cf0f255e21e6b26382bde333db99b1a07)
feat(measure_theory/integral/lebesgue): `lintegral_add` holds if 1 function is measurable ([#14278](https://github.com/leanprover-community/mathlib/pull/#14278))

* for any function `f` there exists a measurable function `g ≤ f` with the same Lebesgue integral;
* prove `∫⁻ a, f a + g a ∂μ = ∫⁻ a, f a ∂μ + ∫⁻ a, g a ∂μ` assuming **one** of the functions is (a.e.-)measurable; split `lintegral_add` into two lemmas `lintegral_add_(left|right)`;
* prove `∫⁻ a, f a ∂μ + ∫⁻ a, g a ∂μ ≤ ∫⁻ a, f a + g a ∂μ` for any `f`, `g`;
* prove a version of Markov's inequality for `μ {x | f x + ε ≤ g x}` with possibly non-measurable `f`;
* prove `f ≤ᵐ[μ] g → ∫⁻ x, f x ∂μ ≠ ∞ → ∫⁻ x, g x ∂μ ≤ ∫⁻ x, f x ∂μ → f =ᵐ[μ] g` for an a.e.-measurable function `f`;
* drop one measurability assumption in `lintegral_sub` and `lintegral_sub_le`;
* add `lintegral_strict_mono_of_ae_le_of_frequently_ae_lt`, a version of `lintegral_strict_mono_of_ae_le_of_ae_lt_on`;
* drop one measurability assumption in `lintegral_strict_mono_of_ae_le_of_ae_lt_on`, `lintegral_strict_mono`, and `set_lintegral_strict_mono`;
* prove `with_density_add` assuming measurability of one of the functions; replace it with `with_density_add_(left|right)`;
* drop measurability assumptions here and there in `mean_inequalities`.

### [2022-05-28T15:49:19+00:00](https://github.com/leanprover-community/mathlib/commit/249f1072913485d0edf4df4d691c2ae8024bdcc1)
feat(algebra/order/monoid_lemmas): remove duplicates, add missing lemmas, fix inconsistencies ([#13494](https://github.com/leanprover-community/mathlib/pull/#13494))

Changes in the order:

`mul_lt_mul'''` has asymmetric typeclass assumptions. So I did the following 3 changes.
Rename `mul_lt_mul'''` to `left.mul_lt_mul`
Make an alias `mul_lt_mul'''` of `mul_lt_mul_of_lt_of_lt`
Add `right.mul_lt_mul`

Move `le_mul_of_one_le_left'` and `mul_le_of_le_one_left'` together with similar lemmas.
Move `lt_mul_of_one_lt_left'` together with similar lemmas.
Add `mul_lt_of_lt_one_right'` and `mul_lt_of_lt_one_left'`. These are analogs of other lemmas.

Following are changes of lemmas of the form `b ≤ c → a ≤ 1 → b * a ≤ c`, `b ≤ c → 1 ≤ a → b ≤ c * a`, `a ≤ 1 → b ≤ c → a * b ≤ c` and `1 ≤ a → b ≤ c → b ≤ a * c`. With the following changes, these 4 sections will be very similar.

For `b ≤ c → a ≤ 1 → b * a ≤ c`:
Remove `alias mul_le_of_le_of_le_one ← mul_le_one'`. This naming is not consistent with `left.mul_lt_one`.
Add `mul_lt_of_lt_of_lt_one'`.
Add `left.mul_le_one`.
Add `left.mul_lt_one_of_le_of_lt`.
Add `left.mul_lt_one_of_lt_of_le`.
Add `left.mul_lt_one'`.

For `b ≤ c → 1 ≤ a → b ≤ c * a`:
Rename `le_mul_of_le_of_le_one` to `le_mul_of_le_of_one_le`.
Remove `lt_mul_of_lt_of_one_le'`. It's exactly the same as `lt_mul_of_lt_of_one_le`.
Rename `one_le_mul_right` to `left.one_le_mul`.
Rename `one_le_mul` to `left.one_le_mul`.
Rename `one_lt_mul_of_lt_of_le'` to `left.one_lt_mul_of_lt_of_le'`.
Add `left.one_lt_mul`.
Rename `one_lt_mul'` to `left.one_lt_mul'`.

For `a ≤ 1 → b ≤ c → a * b ≤ c`:
Add `mul_lt_of_lt_one_of_lt'`.
Add `right.mul_le_one`.
Add `right.mul_lt_one_of_lt_of_le`.
Add `right.mul_lt_one'`.

For `1 ≤ a → b ≤ c → b ≤ a * c`:
Rename `lt_mul_of_one_lt_of_lt` to `lt_mul_of_one_lt_of_lt'`.
Add `lt_mul_of_one_lt_of_lt`.
Add `right.one_lt_mul_of_lt_of_le`.
Rename `one_lt_mul_of_le_of_lt'` to `right.one_lt_mul_of_le_of_lt`.
Add `right.one_lt_mul'`.

Then create aliases for all `left` lemmas in these 4 sections.

Rename `mul_eq_mul_iff_eq_and_eq` to `left.mul_eq_mul_iff_eq_and_eq`.
Add `right.mul_eq_mul_iff_eq_and_eq`.
Make an alias `mul_eq_mul_iff_eq_and_eq` of `left.mul_eq_mul_iff_eq_and_eq`.

Same for additive version.

However, the implicit parameter inconsistency has not been resolved. It affects too many files.



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2022-05-28T13:51:33+00:00](https://github.com/leanprover-community/mathlib/commit/2ce8482e27326fdbbc45324102cd03056e556b80)
feat(computability/regular_expressions): add power operator ([#14261](https://github.com/leanprover-community/mathlib/pull/#14261))

We can't make `regular_expression` a monoid, but we can put a power operator on it that's compatible with the power operator on languages.

### [2022-05-28T13:51:32+00:00](https://github.com/leanprover-community/mathlib/commit/8a0e71287eb4c80e87f72e8c174835f360a6ddd9)
feat(category_theory/monoidal/discrete): simps ([#14259](https://github.com/leanprover-community/mathlib/pull/#14259))

This is a minuscule change, but it appears to work both on `master` and in the [shift functor refactor](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/trouble.20in.20.60shift_functor.60.20land) I'm aspiring towards, so I'm shipping it off for CI.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-28T13:51:31+00:00](https://github.com/leanprover-community/mathlib/commit/dcd5ebd9e447876963a179e51b2d83d5dd4bb0ae)
feat({data/{finset,set},order/filter}/pointwise): More lemmas ([#14216](https://github.com/leanprover-community/mathlib/pull/#14216))

Lemmas about `s ^ n`, `0 * s` and `1 ∈ s / t`.

Other changes:
* `finset.mul_card_le` → `finset.card_mul_le`
* `finset.card_image_eq_iff_inj_on` → `finset.card_image_iff`.
* `zero_smul_subset` → `zero_smul_set_subset`
* Reorder lemmas slightly
* Add an explicit argument to `finset.coe_smul_finset`
* Remove an explicit argument to `set.empty`

### [2022-05-28T11:42:59+00:00](https://github.com/leanprover-community/mathlib/commit/15fe782481a5737b2dd10772f2fe6e957a52e82a)
doc(set_theory/lists): fix typo ([#14427](https://github.com/leanprover-community/mathlib/pull/#14427))

### [2022-05-28T11:42:58+00:00](https://github.com/leanprover-community/mathlib/commit/d0efbcb0104bb1741b7e53328bacbae802678cf3)
feat(model_theory/elementary_maps): Elementary maps respect all (bounded) formulas ([#14252](https://github.com/leanprover-community/mathlib/pull/#14252))

Generalizes `elementary_embedding.map_formula` to more classes of formula.

### [2022-05-28T11:42:57+00:00](https://github.com/leanprover-community/mathlib/commit/599240fc770c9ceec6f18bfe609a9b38282a4257)
refactor(order/bounds): general cleanup ([#14127](https://github.com/leanprover-community/mathlib/pull/#14127))

Apart from golfing, this PR does the following:

Add the following theorems (which are immediate from the non-self counterparts):
- `monotone_on.mem_upper_bounds_image_self`
- `monotone_on.mem_lower_bounds_image_self`
- `antitone_on.mem_upper_bounds_image_self`
- `antitone_on.mem_lower_bounds_image_self`

Remove the following theorems (as they're just `mem_X_bounds_image` under unnecessarily stronger assumptions):

- `monotone_on.is_lub_image_le`
- `monotone_on.le_is_glb_image`
- `antitone_on.is_lub_image_le`
- `antitone_on.le_is_glb_image`
- `monotone.is_lub_image_le`
- `monotone.le_is_glb_image`
- `antitone.is_lub_image_le`
- `antitone.le_is_glb_image`

Remove a redundant argument `s ⊆ t` from the following (the old theorems follow immediately from the new ones and `monotone_on.mono`):

- `monotone_on.map_is_greatest`
- `monotone_on.map_is_least`
- `antitone_on.map_is_greatest`
- `antitone_on.map_is_least`

### [2022-05-28T10:25:26+00:00](https://github.com/leanprover-community/mathlib/commit/bb90598b9111a49dd3e3688bc8b22d173ca09209)
feat(set_theory/ordinal/basic): Turn various lemmas into `simp` ([#14075](https://github.com/leanprover-community/mathlib/pull/#14075))

### [2022-05-28T05:34:51+00:00](https://github.com/leanprover-community/mathlib/commit/dccab1c99a3be493f820397c1d9d93f8855d816d)
feat(algebra/ring/basic): Generalize theorems on distributivity ([#14140](https://github.com/leanprover-community/mathlib/pull/#14140))

Many theorems assuming full distributivity only need left or right distributivity. We remedy this by making new `left_distrib_class` and `right_distrib_class` classes.

The main motivation here is to generalize various theorems on ordinals, like [ordinal.mul_add](https://leanprover-community.github.io/mathlib_docs/set_theory/ordinal/arithmetic.html#ordinal.mul_add).

### [2022-05-28T04:03:23+00:00](https://github.com/leanprover-community/mathlib/commit/15b7e536fa1812114861b7e0207851acd3f1a25d)
refactor(set_theory/cardinal/*): `cardinal.succ` → `order.succ` ([#14273](https://github.com/leanprover-community/mathlib/pull/#14273))

### [2022-05-28T00:43:54+00:00](https://github.com/leanprover-community/mathlib/commit/5eb68b5ca1cce3e5fd3cb3975e3af2b9d4f6149a)
feat(data/polynomial/mirror): `nat_degree` and `nat_trailing_degree` of `p * p.mirror` ([#14397](https://github.com/leanprover-community/mathlib/pull/#14397))

This PR adds lemmas for the `nat_degree` and `nat_trailing_degree` of `p * p.mirror`. These lemmas tell you that you can recover `p.nat_degree` and `p.nat_trailing_degree` from `p * p.mirror`, which will be useful for irreducibility of x^n-x-1.

### [2022-05-27T23:26:09+00:00](https://github.com/leanprover-community/mathlib/commit/a08d17971f836ec30bb42da4500ca328b6bdf753)
refactor(set_theory/ordinal/*): `ordinal.succ` → `order.succ` ([#14243](https://github.com/leanprover-community/mathlib/pull/#14243))

We inline the definition of `ordinal.succ` in the `succ_order` instance. This allows us to comfortably use all of the theorems about `order.succ` to our advantage.

### [2022-05-27T21:20:28+00:00](https://github.com/leanprover-community/mathlib/commit/991953954baebaf372f9baa83125eec5a795742b)
feat(category_theory): more API for isomorphisms ([#14420](https://github.com/leanprover-community/mathlib/pull/#14420))

### [2022-05-27T21:20:27+00:00](https://github.com/leanprover-community/mathlib/commit/533cbf45a39014e19c3fbb6ebd15cd4bba1d684f)
feat(data/int/{cast, char_zero}): relax typeclass assumptions ([#14413](https://github.com/leanprover-community/mathlib/pull/#14413))

### [2022-05-27T19:20:34+00:00](https://github.com/leanprover-community/mathlib/commit/f598e58199b7d86785445f3c7c3c43374a9b65ad)
feat(topology/vector_bundle): do not require topology on the fibers for topological_vector_prebundle ([#14377](https://github.com/leanprover-community/mathlib/pull/#14377))

* Separated from branch `vb-hom`

Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2022-05-27T19:20:33+00:00](https://github.com/leanprover-community/mathlib/commit/a94ae0cafe4d143ff7844f7edead32d9115ba0bd)
feat(data/list/min_max): add le_max_of_le, min_le_of_le  ([#14340](https://github.com/leanprover-community/mathlib/pull/#14340))

### [2022-05-27T19:20:32+00:00](https://github.com/leanprover-community/mathlib/commit/41ca601555ef8a6e4c241fff820f8a00531e27b2)
feat(analysis/convolution): The convolution of two functions ([#13540](https://github.com/leanprover-community/mathlib/pull/#13540))

* Define the convolution of two functions.
* Prove that when one of the functions has compact support and is `C^n` and the other function is locally integrable, the convolution is `C^n`.
* Compute the total derivative of the convolution (when one of the functions has compact support).
* Prove that when taking the convolution with functions that "tend to the Dirac delta function", the convolution tends to the original function.
* From the sphere eversion project.

### [2022-05-27T19:20:31+00:00](https://github.com/leanprover-community/mathlib/commit/baad00261d8f44142fdd90c6ef85256175518d64)
feat(analysis/complex/phragmen_lindelof): Phragmen-Lindelöf principle for some shapes ([#13178](https://github.com/leanprover-community/mathlib/pull/#13178))

Prove Phragmen-Lindelöf principle

- in a horizontal strip;
- in a vertical strip;
- in a coordinate quadrant;
- in the right half-plane (a few versions).

### [2022-05-27T17:41:19+00:00](https://github.com/leanprover-community/mathlib/commit/1ccb7f0410b74ce590c9077dd20792dfc95ed015)
feat(model_theory/syntax, semantics): Lemmas about relabeling variables ([#14225](https://github.com/leanprover-community/mathlib/pull/#14225))

Proves lemmas about relabeling variables in terms and formulas
Defines `first_order.language.bounded_formula.to_formula`, which turns turns all of the extra variables of a `bounded_formula` into free variables.

### [2022-05-27T17:02:33+00:00](https://github.com/leanprover-community/mathlib/commit/4b9e57b11e487362f7436ea8c935d842745785b1)
feat(model_theory/satisfiability): Upward Löwenheim–Skolem ([#13982](https://github.com/leanprover-community/mathlib/pull/#13982))

`first_order.language.Theory.exists_elementary_embedding_card_eq` proves the Upward Löwenheim–Skolem Theorem: every infinite `L`-structure `M` elementarily embeds into an `L`-structure of a given cardinality if that cardinality is larger than the cardinalities of `L` and `M`.

### [2022-05-27T08:53:16+00:00](https://github.com/leanprover-community/mathlib/commit/25f75c4eb572cbb5e9130ad8026e700042221f94)
chore(filter/pointwise): protect filter.has_involutive_inv ([#14398](https://github.com/leanprover-community/mathlib/pull/#14398))

### [2022-05-27T08:04:40+00:00](https://github.com/leanprover-community/mathlib/commit/2a9b0f858963cd817723e8cbe27667b70dae9213)
chore(ring_theory/artinian): clarify left/right -ness in doc strings ([#14396](https://github.com/leanprover-community/mathlib/pull/#14396))

### [2022-05-27T05:12:29+00:00](https://github.com/leanprover-community/mathlib/commit/841aef25c9d7a5a5d63a3dcf7bc43386b2c206d6)
feat(algebraic_topology): the nerve of a category ([#14304](https://github.com/leanprover-community/mathlib/pull/#14304))

### [2022-05-27T04:25:55+00:00](https://github.com/leanprover-community/mathlib/commit/bae02292cf8b1fa8b8b4d4049ff86aac5c2ba0ac)
feat(category_theory/monoidal/subcategory): full monoidal subcategories ([#14311](https://github.com/leanprover-community/mathlib/pull/#14311))

We use a type synonym for `{X : C // P X}` when `C` is a monoidal category and the property `P` is closed under the monoidal unit and tensor product so that `full_monoidal_subcategory` can be made an instance.



Co-authored-by: antoinelab01 <66086247+antoinelab01@users.noreply.github.com>

### [2022-05-27T02:02:29+00:00](https://github.com/leanprover-community/mathlib/commit/48d831a466eecc9a8d38f23c2d131846de000eea)
feat(order/bounded_order): define `with_bot.map` and `with_top.map` ([#14163](https://github.com/leanprover-community/mathlib/pull/#14163))

Also define `monotone.with_bot` etc.

### [2022-05-26T22:13:11+00:00](https://github.com/leanprover-community/mathlib/commit/8dd4619ba9467b52f253b3af114f95a0be181a59)
feat(combinatorics/simple_graph/connectivity): deleting edges outside a walk ([#14110](https://github.com/leanprover-community/mathlib/pull/#14110))

### [2022-05-26T20:25:47+00:00](https://github.com/leanprover-community/mathlib/commit/27791f970ac50950e57b02200e5ace40d18a7915)
feat(data/real/nnreal): add mul csupr/cinfi lemmas ([#13936](https://github.com/leanprover-community/mathlib/pull/#13936))




Co-authored-by: YaelDillies <yael.dillies@gmail.com>
Co-authored-by: María Inés de Frutos-Fernández <88536493+mariainesdff@users.noreply.github.com>

### [2022-05-26T18:17:05+00:00](https://github.com/leanprover-community/mathlib/commit/525cc65245a1a74a1074fbaa76b4edf7523164bf)
feat(order/rel_classes): Reflexive relation from irreflexive and viceversa ([#13411](https://github.com/leanprover-community/mathlib/pull/#13411))

### [2022-05-26T15:16:47+00:00](https://github.com/leanprover-community/mathlib/commit/b2973b12098ecaacfe6e1151bfb6ca05a12af376)
feat(logic/function/basic): add `function.const_injective` ([#14388](https://github.com/leanprover-community/mathlib/pull/#14388))

Add `function.const_injective` and `function.const_inj`.

### [2022-05-26T15:16:46+00:00](https://github.com/leanprover-community/mathlib/commit/d3b155bb4d1bde2c4453ba81a03c9351f2e7715d)
chore(data/stream/defs): add spaces around infix operators ([#14386](https://github.com/leanprover-community/mathlib/pull/#14386))

### [2022-05-26T15:16:44+00:00](https://github.com/leanprover-community/mathlib/commit/034cf668ca19cf5bf231136e35d8bbf3f5007291)
chore(set_theory/ordinal/topology): add `variables` block ([#14369](https://github.com/leanprover-community/mathlib/pull/#14369))

We rename a bunch of variables, but don't fundamentally change any proof.

### [2022-05-26T15:16:39+00:00](https://github.com/leanprover-community/mathlib/commit/be34b95028340fabcaee15afefcd6471e713bb37)
feat(topology/separation): split some proofs ([#14337](https://github.com/leanprover-community/mathlib/pull/#14337))

### [2022-05-26T13:56:36+00:00](https://github.com/leanprover-community/mathlib/commit/70e784d062f3e8bdf004e2fbb85f41676b2fa1db)
feat(data/polynomial/*): `(p * q).trailing_degree = p.trailing_degree + q.trailing_degree` ([#14384](https://github.com/leanprover-community/mathlib/pull/#14384))

We already had a `nat_trailing_degree_mul` lemma, but this PR does things properly, following the analogous results for `degree`. In particular, we now have some useful intermediate results that do not assume `no_zero_divisors`.

### [2022-05-26T11:04:30+00:00](https://github.com/leanprover-community/mathlib/commit/5aeafaab6cda7a066893d6fd701eb6a617160573)
feat(algebra/order/monoid): add `le_iff_exists_mul'` ([#14387](https://github.com/leanprover-community/mathlib/pull/#14387))

Add a version of `le_iff_exists_mul'`/`le_iff_exists_add'`, versions of `le_iff_exists_mul`/`le_iff_exists_add` with multiplication on the other side.

### [2022-05-26T09:28:23+00:00](https://github.com/leanprover-community/mathlib/commit/acd050942b29beb2d68a9ebfe496e24bd4e1a934)
feat(order/succ_pred/interval_succ): new file ([#14294](https://github.com/leanprover-community/mathlib/pull/#14294))

Add 2 lemmas about `set.Ioc (f x) (f (order.succ x))`, where `f` is a
monotone function.

### [2022-05-26T05:56:29+00:00](https://github.com/leanprover-community/mathlib/commit/4bf1b02fbb7bdf2fd780ddecc8ce6377a4ecbb18)
feat(category_theory/limits): products give pullback squares ([#14327](https://github.com/leanprover-community/mathlib/pull/#14327))

Follow-up to [#14220](https://github.com/leanprover-community/mathlib/pull/#14220)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-26T02:20:40+00:00](https://github.com/leanprover-community/mathlib/commit/634bef9f511254a241bc38e73925440a1010d434)
feat(topology/continuous_function/stone_weierstrass): generalize the complex Stone-Weierstrass theorem to is_R_or_C fields ([#14374](https://github.com/leanprover-community/mathlib/pull/#14374))

This PR generalizes the complex Stone-Weierstrass theorem to hold for an `is_R_or_C` field.

### [2022-05-25T20:40:47+00:00](https://github.com/leanprover-community/mathlib/commit/c5b3de8dec0e0e1740b14b75b089c134d30958e6)
refactor(data/polynomial/*): Make `support_C_mul_X_pow` match `support_monomial` ([#14119](https://github.com/leanprover-community/mathlib/pull/#14119))

This PR makes `support_C_mul_X_pow` match `support_monomial`.

### [2022-05-25T19:08:50+00:00](https://github.com/leanprover-community/mathlib/commit/dc0fadda795a8fbef964748708769d3384c5b0f6)
feat(linear_algebra/prod): define the graph of a linear map ([#14266](https://github.com/leanprover-community/mathlib/pull/#14266))

### [2022-05-25T19:08:49+00:00](https://github.com/leanprover-community/mathlib/commit/fae32b6ed0013ff16b489f71e485b64207964dd9)
refactor(analysis/normed_space/M_structure): generalize to arbitrary faithful actions ([#14222](https://github.com/leanprover-community/mathlib/pull/#14222))

This follows up from a comment in review of [#12173](https://github.com/leanprover-community/mathlib/pull/#12173)

The motivation here is to allow `X →L[𝕜] X`, `X →+ X`, and other weaker or stronger endomorphisms to also be used

This also tides up a few proof names and some poorly-rendering LaTeX

### [2022-05-25T17:33:44+00:00](https://github.com/leanprover-community/mathlib/commit/189e5d1360a7e2737970aa414b496e066377906e)
feat(data/polynomial/degree/trailing_degree): The trailing degree of a product is at least the sum of the trailing degrees ([#14253](https://github.com/leanprover-community/mathlib/pull/#14253))

This PR adds lemmas for `nat_trailing_degree` analogous to `degree_mul_le` and `nat_degree_mul_le`.

### [2022-05-25T14:21:08+00:00](https://github.com/leanprover-community/mathlib/commit/7e1c1263b6a25eb90bf16e80d8f47a657e403c4c)
move(group_theory/perm/cycle/*): A cycle folder ([#14285](https://github.com/leanprover-community/mathlib/pull/#14285))

Move:
* `group_theory.perm.cycles` → `group_theory.perm.cycle.basic`
* `group_theory.perm.cycle_type` → `group_theory.perm.cycle.type`
* `group_theory.perm.concrete_cycle` → `group_theory.perm.cycle.concrete`

### [2022-05-25T10:28:06+00:00](https://github.com/leanprover-community/mathlib/commit/ba1c3f36367b52abfc6d33340b41a207dc0b4092)
feat(data/int/log): integer logarithms of linearly ordered fields ([#13913](https://github.com/leanprover-community/mathlib/pull/#13913))

Notably, this provides a way to find the position of the most significant digit of a decimal expansion

### [2022-05-25T09:48:16+00:00](https://github.com/leanprover-community/mathlib/commit/f8d5c649eae0f7cd7693c6a1d3f2f4f98fa058e1)
feat(topology/vector_bundle): use trivialization.symm to simplify the product of vector bundles ([#14361](https://github.com/leanprover-community/mathlib/pull/#14361))

### [2022-05-25T08:59:21+00:00](https://github.com/leanprover-community/mathlib/commit/660918bbb98cc1b2191e6752d23e95b7b996130a)
feat(measure_theory/function/conditional_expectation): Conditional expectation of an indicator ([#14058](https://github.com/leanprover-community/mathlib/pull/#14058))

The main lemma is this:
```lean
lemma condexp_indicator (hf_int : integrable f μ) (hs : measurable_set[m] s) :
  μ[s.indicator f | m] =ᵐ[μ] s.indicator (μ[f | m])
```
We also use it to prove that if two sigma algebras are "equal under an event", then the conditional expectations with respect to those two sigma algebras are equal under the same event.

### [2022-05-25T07:01:43+00:00](https://github.com/leanprover-community/mathlib/commit/5da373149d59f18494c771179ae88765ea94f932)
feat(measure_theory/integral): add formulas for average over an interval ([#14132](https://github.com/leanprover-community/mathlib/pull/#14132))

### [2022-05-25T02:04:38+00:00](https://github.com/leanprover-community/mathlib/commit/c1e2121200767281747893d7d82311ad47f3f08d)
feat(data/set/finite): set priority for fintype_insert' and document ([#14363](https://github.com/leanprover-community/mathlib/pull/#14363))

This follows up with some review comments for [#14136](https://github.com/leanprover-community/mathlib/pull/#14136).

### [2022-05-25T00:18:41+00:00](https://github.com/leanprover-community/mathlib/commit/f58229841637035245e4968814d5ae1742e950ba)
feat(group_theory/subgroup/basic): `zpowers_eq_bot` ([#14366](https://github.com/leanprover-community/mathlib/pull/#14366))

This PR adds a lemma `zpowers_eq_bot`.

### [2022-05-24T19:56:59+00:00](https://github.com/leanprover-community/mathlib/commit/ebb52066656954a1b3a53971d4c315556a97b934)
chore(set_theory/surreal/basic): clarify some proofs ([#14356](https://github.com/leanprover-community/mathlib/pull/#14356))

### [2022-05-24T19:56:58+00:00](https://github.com/leanprover-community/mathlib/commit/cdaa6d2b4b4445e7e38437119fb4078b29adfc35)
refactor(analysis/normed_space/pi_Lp): golf some instances ([#14339](https://github.com/leanprover-community/mathlib/pull/#14339))

* drop `pi_Lp.emetric_aux`;
* use `T₀` to get `(e)metric_space` from `pseudo_(e)metric_space`;
* restate `pi_Lp.(anti)lipschitz_with_equiv` with correct `pseudo_emetric_space` instances; while they're defeq, it's better not to leak auxiliary instances unless necessary.

### [2022-05-24T19:02:02+00:00](https://github.com/leanprover-community/mathlib/commit/23f30a30b73f6f67b390dedae486468568e26ef6)
fix(topology/vector_bundle): squeeze simp, remove non-terminal simp ([#14357](https://github.com/leanprover-community/mathlib/pull/#14357))

For some reason I had to mention `trivialization.coe_coe` explicitly, even though it is in `mfld_simps` (maybe because another simp lemma would otherwise apply first?)

### [2022-05-24T16:46:14+00:00](https://github.com/leanprover-community/mathlib/commit/88f8de36b4955834fc6d6f2b02a47b8ec238f3f4)
feat(topology/local_homeomorph): define helper definition ([#14360](https://github.com/leanprover-community/mathlib/pull/#14360))

* Define `homeomorph.trans_local_homeomorph` and `local_homeomorph.trans_homeomorph`. They are equal to `local_homeomorph.trans`, but with better definitional behavior for `source` and `target`.
* Define similar operations for `local_equiv`.
* Use this to improve the definitional behavior of [`topological_fiber_bundle.trivialization.trans_fiber_homeomorph`](https://leanprover-community.github.io/mathlib_docs/find/topological_fiber_bundle.trivialization.trans_fiber_homeomorph)
* Also use `@[simps]` to generate a couple of extra simp-lemmas.

### [2022-05-24T16:46:12+00:00](https://github.com/leanprover-community/mathlib/commit/483b54f1ef9b3f3125b78636903af0fc9f7dbf41)
refactor(logic/equiv/set): open set namespace ([#14355](https://github.com/leanprover-community/mathlib/pull/#14355))

### [2022-05-24T16:46:11+00:00](https://github.com/leanprover-community/mathlib/commit/ec8587f46a8d88fd638cf3d00f0318cd818df163)
chore(data/list/forall2): fix incorrect docstring ([#14276](https://github.com/leanprover-community/mathlib/pull/#14276))

The previous docstring was false, this corrects the definition. 



Co-authored-by: Bhavik Mehta <bm489@cam.ac.uk>

### [2022-05-24T15:53:41+00:00](https://github.com/leanprover-community/mathlib/commit/73a61259c8a1a1968b30931fb763406a878eba38)
feat(linear_algebra/bilinear_form): generalize scalar instances, fix diamonds ([#14358](https://github.com/leanprover-community/mathlib/pull/#14358))

This fixes the zsmul and nsmul diamonds, makes sub definitionally better, and makes the scalar instance apply more generally.
This also adds `linear_map.comp_bilin_form`.

These changes bring the API more in line with `quadratic_form`.

### [2022-05-24T14:54:33+00:00](https://github.com/leanprover-community/mathlib/commit/28f7172e9677fd412cdd500c914d18d423846715)
refactor(algebra/direct_sum/basic): use the new polymorphic subobject API   ([#14341](https://github.com/leanprover-community/mathlib/pull/#14341))

This doesn't let us deduplicate the lattice lemmas, but does eliminate the duplicate instances and definitions!

This merges:

* `direct_sum.add_submonoid_is_internal`, `direct_sum.add_subgroup_is_internal`, `direct_sum.submodule_is_internal` into `direct_sum.is_internal`
* `direct_sum.add_submonoid_coe`, `direct_sum.add_subgroup_coe` into `direct_sum.coe_add_monoid_hom`
* `direct_sum.add_submonoid_coe_ring_hom`, `direct_sum.add_subgroup_coe_ring_hom` into `direct_sum.coe_ring_hom`
* `add_submonoid.gsemiring`, `add_subgroup.gsemiring`, `submodule.gsemiring` into `set_like.gsemiring`
* `add_submonoid.gcomm_semiring`, `add_subgroup.gcomm_semiring`, `submodule.gcomm_semiring` into `set_like.gcomm_semiring`

Renames

* `direct_sum.submodule_coe` into `direct_sum.coe_linear_map`
* `direct_sum.submodule_coe_alg_hom` into `direct_sum.coe_alg_hom

And adds:

* `set_like.gnon_unital_non_assoc_semiring`, now that it doesn't need to be repeated three times!

A large number of related lemmas are also renamed to match the new definition names.

This was what originally motivated the `set_like` typeclass; thanks to @Vierkantor for doing the subobject follow up I never got around to!

### [2022-05-24T14:17:37+00:00](https://github.com/leanprover-community/mathlib/commit/a07493af5f1c372f3f5dfb79f53b34944db2ef4f)
feat(analysis/convolution): the predicate `convolution_exists` ([#13541](https://github.com/leanprover-community/mathlib/pull/#13541))

* This PR defines the predicate that a convolution exists.
* This is not that interesting by itself, but it is a preparation for [#13540](https://github.com/leanprover-community/mathlib/pull/#13540)
* I'm using the full module doc for the convolution file, even though not everything promised in the module doc is in this PR.
* From the sphere eversion project

### [2022-05-24T12:33:08+00:00](https://github.com/leanprover-community/mathlib/commit/dc22d65a356f2bebebaf1c2bac4261266da13406)
doc(100.yaml): add Law of Large Numbers ([#14353](https://github.com/leanprover-community/mathlib/pull/#14353))

### [2022-05-24T12:33:07+00:00](https://github.com/leanprover-community/mathlib/commit/9d193c59e8370ff7e2802a3f6650dbe0faeeb7ef)
feat(category_theory/comm_sq): functors mapping pullback/pushout squares ([#14351](https://github.com/leanprover-community/mathlib/pull/#14351))

```
lemma map_is_pullback [preserves_limit (cospan h i) F] (s : is_pullback f g h i) :
  is_pullback (F.map f) (F.map g) (F.map h) (F.map i) := ...
```




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-24T12:33:06+00:00](https://github.com/leanprover-community/mathlib/commit/53a70a08bf14364b8b4e3fb078c79d5e0f928bc0)
feat(linear_algebra/tensor_power): Add notation for tensor powers, and a definition of multiplication ([#14196](https://github.com/leanprover-community/mathlib/pull/#14196))

This file introduces the notation `⨂[R]^n M` for `tensor_power R n M`, which in turn is an
abbreviation for `⨂[R] i : fin n, M`.

The proof that this multiplication forms a semiring will come in a later PR ([#10255](https://github.com/leanprover-community/mathlib/pull/#10255)).

### [2022-05-24T12:33:05+00:00](https://github.com/leanprover-community/mathlib/commit/8e3deffcda54a4d57f6950c2784bfa97c95e10d8)
feat(representation_theory/invariants): average_map is a projection onto the subspace of invariants ([#14167](https://github.com/leanprover-community/mathlib/pull/#14167))

### [2022-05-24T10:24:08+00:00](https://github.com/leanprover-community/mathlib/commit/893f4800480ce9b42021f4d596a1d24b4f14cfa4)
feat(group_theory/index): Lemmas for when `relindex` divides `index` ([#14314](https://github.com/leanprover-community/mathlib/pull/#14314))

This PR adds two lemmas for when `relindex` divides `index`.

### [2022-05-24T10:24:07+00:00](https://github.com/leanprover-community/mathlib/commit/65f1f8e2a385ce9475a4e1d15db7e7e90ba613d9)
feat(linear_algebra/quadratic_form/isometry): extract from `linear_algebra/quadratic_form/basic` ([#14305](https://github.com/leanprover-community/mathlib/pull/#14305))

150 lines seems worthy of its own file, especially if this grows `fun_like` boilerplate in future.

No lemmas have been renamed or proofs changed.

### [2022-05-24T10:24:06+00:00](https://github.com/leanprover-community/mathlib/commit/9870d1385c61a025d75856b04a2c0998bff4092b)
chore(order/bounded_order): Golf `disjoint` API ([#14194](https://github.com/leanprover-community/mathlib/pull/#14194))

Reorder lemmas and golf.

Lemma additions:
* `disjoint.eq_bot_of_ge`
* `is_compl.of_dual`
* `is_compl_to_dual_iff`
* `is_compl_of_dual_iff`

Lemma deletions:
* `eq_bot_of_disjoint_absorbs`: This is an unhelpful combination of `disjoint.eq_bot_of_ge` and `sup_eq_left`
* `inf_eq_bot_iff_le_compl`: This is a worse version of `is_compl.disjoint_left_iff`

Lemma renames:
* `is_compl.to_order_dual` → `is_compl.dual`

### [2022-05-24T08:19:34+00:00](https://github.com/leanprover-community/mathlib/commit/533c67bc05e8c559969bbd5a4d8befbe2f039959)
feat(analysis/sum_integral_comparisons): Comparison lemmas between finite sums and integrals ([#13179](https://github.com/leanprover-community/mathlib/pull/#13179))

In this pull request we target the following lemmas:

```lean
lemma antitone_on.integral_le_sum {x₀ : ℝ} {a : ℕ} {f : ℝ → ℝ}
   (hf : antitone_on f (Icc x₀ (x₀ + a))) :
   ∫ x in x₀..(x₀ + a), f x ≤ ∑ i in finset.range a, f (x₀ + i)

lemma antitone_on.sum_le_integral
   {x₀ : ℝ} {a : ℕ} {f : ℝ → ℝ}
   (hf : antitone_on f (Icc x₀ (x₀ + a))) :
   ∑ i in finset.range a, f (x₀ + i + 1) ≤ ∫ x in x₀..(x₀ + a), f x :=
```

as well as their `monotone_on` equivalents.

These lemmas are critical to many analytic facts, specifically because it so often is the way that error terms end up getting computed.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2022-05-24T07:08:08+00:00](https://github.com/leanprover-community/mathlib/commit/93df724a2c0bd3aece583c3c788e5c16d52d3511)
feat(measure_theory/integral/integral_eq_improper): Covering finite intervals by finite intervals ([#13514](https://github.com/leanprover-community/mathlib/pull/#13514))

Currently, the ability to prove facts about improper integrals only allows for at least one infinite endpoint. However, it is a common need to work with functions that blow up at an end point (e.g., x^r on [0, 1] for r in (-1, 0)). As a step toward allowing that, we introduce `ae_cover`s that allow exhausting finite intervals by finite intervals.

Partially addresses: [#12666](https://github.com/leanprover-community/mathlib/pull/#12666)

### [2022-05-24T06:28:33+00:00](https://github.com/leanprover-community/mathlib/commit/0973ad45e4751619a882c41d847f3744b69cd86a)
feat(probability/strong_law): the strong law of large numbers ([#13690](https://github.com/leanprover-community/mathlib/pull/#13690))

We prove the almost sure version of the strong law of large numbers: given an iid sequence of integrable random variables `X_i`, then `(\sum_{i < n} X_i)/n` converges almost surely to `E(X)`. We follow Etemadi's proof, which only requires pairwise independence instead of full independence.

### [2022-05-24T05:19:10+00:00](https://github.com/leanprover-community/mathlib/commit/0d14ee8be5fa8c3783212789740efccce5989dbe)
feat(field_theory/finite/galois_field): Finite fields are Galois ([#14290](https://github.com/leanprover-community/mathlib/pull/#14290))

This PR also generalizes a section of `field_theory/finite/basic` from `[char_p K p]` to `[algebra (zmod p) K]`. This is indeed a generalization, due to the presence of the instance `zmod.algebra`.

### [2022-05-24T03:06:12+00:00](https://github.com/leanprover-community/mathlib/commit/179ae9e8bddb2660f75cdbec68408a14e719c406)
feat(category_theory/preadditive): hom orthogonal families ([#13871](https://github.com/leanprover-community/mathlib/pull/#13871))

A family of objects in a category with zero morphisms is "hom orthogonal" if the only
morphism between distinct objects is the zero morphism.

We show that in any category with zero morphisms and finite biproducts,
a morphism between biproducts drawn from a hom orthogonal family `s : ι → C`
can be decomposed into a block diagonal matrix with entries in the endomorphism rings of the `s i`.

When the category is preadditive, this decomposition is an additive equivalence,
and intertwines composition and matrix multiplication.
When the category is `R`-linear, the decomposition is an `R`-linear equivalence.

If every object in the hom orthogonal family has an endomorphism ring with invariant basis number
(e.g. if each object in the family is simple, so its endomorphism ring is a division ring,
or otherwise if each endomorphism ring is commutative),
then decompositions of an object as a biproduct of the family have uniquely defined multiplicities.
We state this as:
```
lemma hom_orthogonal.equiv_of_iso (o : hom_orthogonal s) {f : α → ι} {g : β → ι}
  (i : ⨁ (λ a, s (f a)) ≅ ⨁ (λ b, s (g b))) : ∃ e : α ≃ β, ∀ a, g (e a) = f a
```

This is preliminary to defining semisimple categories.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-24T01:48:51+00:00](https://github.com/leanprover-community/mathlib/commit/c340170b347c914bf6596b01a6acf92c43098e80)
chore(set_theory/ordinal/*): improve autogenerated instance names for `o.out.α` ([#14342](https://github.com/leanprover-community/mathlib/pull/#14342))

### [2022-05-24T00:02:28+00:00](https://github.com/leanprover-community/mathlib/commit/10f415adfc00bd3d0d6c3bd32fa2b0778dbf0d45)
feat(set_theory/game/basic): mul_cases lemmas ([#14343](https://github.com/leanprover-community/mathlib/pull/#14343))

These are the multiplicative analogs for `{left/right}_moves_add_cases`.

### [2022-05-23T23:25:06+00:00](https://github.com/leanprover-community/mathlib/commit/dc36333824ef3849384592d7e8fa8b9154c2ef23)
feat(set_theory/surreal/basic): ordinals are numeric ([#14325](https://github.com/leanprover-community/mathlib/pull/#14325))

### [2022-05-23T22:05:46+00:00](https://github.com/leanprover-community/mathlib/commit/59ef0700b341547c8512d0f99491cec7d2510472)
feat(ring_theory/unique_factorization_domain): misc lemmas on factors ([#14333](https://github.com/leanprover-community/mathlib/pull/#14333))

Two little lemmas on the set of factors which I needed for [#12287](https://github.com/leanprover-community/mathlib/pull/#12287).



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2022-05-23T20:34:27+00:00](https://github.com/leanprover-community/mathlib/commit/3f0a2bb4f9c9a1fb61c6682c0acb4ac7c89365c4)
feat(set_theory/cardinal/basic): Inline instances ([#14130](https://github.com/leanprover-community/mathlib/pull/#14130))

We inline some instances, thus avoiding redundant lemmas. We also clean up the code somewhat.

### [2022-05-23T17:51:44+00:00](https://github.com/leanprover-community/mathlib/commit/b3ff79ae64b522eeb7d1bb759279f3c10ebb87dc)
feat(topology/uniform_space/uniform_convergence): Uniform Cauchy sequences ([#14003](https://github.com/leanprover-community/mathlib/pull/#14003))

A sequence of functions `f_n` is pointwise Cauchy if `∀x ∀ε ∃N ∀(m, n) > N` we have `|f_m x - f_n x| < ε`. A sequence of functions is _uniformly_ Cauchy if `∀ε ∃N ∀(m, n) > N ∀x` we have `|f_m x - f_n x| < ε`.

As a sequence of functions is pointwise Cauchy if (and when the underlying space is complete, only if) the sequence converges, a sequence of functions is uniformly Cauchy if (and when the underlying space is complete, only if) the sequence uniformly converges. (Note that the parenthetical is not directly covered by this commit, but is an easy consequence of two of its lemmas.)

This notion is commonly used to bootstrap convergence into uniform convergence.

### [2022-05-23T16:11:41+00:00](https://github.com/leanprover-community/mathlib/commit/dab06b6b6e1f9f80e0f184dddaf40d74d834a1c7)
refactor(topology/sequences): rename some `sequential_` to `seq_` ([#14318](https://github.com/leanprover-community/mathlib/pull/#14318))

## Rename

* `sequential_closure` → `seq_closure`, similarly rename lemmas;
* `sequentially_continuous` → `seq_continuous`, similarly rename lemmas;
* `is_seq_closed_of_is_closed` → `is_closed.is_seq_closed`;
* `mem_of_is_seq_closed` → `is_seq_closed.mem_of_tendsto`;
* `continuous.to_sequentially_continuous` → `continuous.seq_continuous`;

## Remove

* `mem_of_is_closed_sequential`: was a weaker version of `is_closed.mem_of_tendsto`;

## Add

* `is_seq_closed.is_closed`;
* `seq_continuous.continuous`;

### [2022-05-23T16:11:40+00:00](https://github.com/leanprover-community/mathlib/commit/bbf57768258db024bf86e84a8cd8052d32cb163f)
feat(group_theory/sylow): The number of sylow subgroups is indivisible by p ([#14313](https://github.com/leanprover-community/mathlib/pull/#14313))

A corollary of Sylow's third theorem is that the number of sylow subgroups is indivisible by p.

### [2022-05-23T16:11:39+00:00](https://github.com/leanprover-community/mathlib/commit/7a6d8505f7f02acd93c5ee9d0902b119d7211221)
feat(probability/stopping): measurability of comparisons of stopping times ([#14061](https://github.com/leanprover-community/mathlib/pull/#14061))

Among other related results, prove that `{x | τ x ≤ π x}` is measurable with respect to the sigma algebras generated by each of the two stopping times involved.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2022-05-23T14:09:34+00:00](https://github.com/leanprover-community/mathlib/commit/8df8968c68178c7c559c5863e8881ee9c61ed24a)
feat(data/set/function): add `monotone_on.monotone` etc ([#14301](https://github.com/leanprover-community/mathlib/pull/#14301))

### [2022-05-23T14:09:33+00:00](https://github.com/leanprover-community/mathlib/commit/33262e0cbfe1282aa081605121d37cbb9fa11940)
feat(ring_theory/power_series): Added lemmas regarding rescale ([#14283](https://github.com/leanprover-community/mathlib/pull/#14283))

Added lemmas `rescale_mk`, `rescale_mul` and `rescale_rescale`.

### [2022-05-23T14:09:32+00:00](https://github.com/leanprover-community/mathlib/commit/15e8bc48cfbe0837e1e089aa299be8fdc068dedf)
feat(topology/vector_bundle): define pretrivialization.symm ([#14192](https://github.com/leanprover-community/mathlib/pull/#14192))

* Also adds some other useful lemmas about (pre)trivializations
* This splits out the part of [#8545](https://github.com/leanprover-community/mathlib/pull/#8545) that is unrelated to pullbacks

- Co-authored by Nicolo Cavalleri <nico@cavalleri.net>

### [2022-05-23T12:13:01+00:00](https://github.com/leanprover-community/mathlib/commit/2b35fc7bea4640cb75e477e83f32fbd538920822)
refactor(data/set/finite): reorganize and put emphasis on fintype instances ([#14136](https://github.com/leanprover-community/mathlib/pull/#14136))

I went through `data/set/finite` and reorganized it by rough topic (and moved some lemmas to their proper homes; closes [#11177](https://github.com/leanprover-community/mathlib/pull/#11177)). Two important parts of this module are (1) `fintype` instances for various set constructions and (2) ways to create `set.finite` terms. This change puts the module closer to following a design where the `set.finite` terms are created in a formulaic way from the `fintype` instances. One tool for this is a `set.finite_of_fintype` constructor, which lets typeclass inference do most of the work.

Included in this commit is changing `set.infinite` to be protected so that it does not conflict with `infinite`.

### [2022-05-23T10:20:39+00:00](https://github.com/leanprover-community/mathlib/commit/34e450b14b88022bf886f5133657edb60dafbce6)
chore(linear_algebra/quadratic_form/basic): Reorder lemmas ([#14326](https://github.com/leanprover-community/mathlib/pull/#14326))

This moves the `fun_like` lemmas up to the top of the file next to the `coe_to_fun` instance, and condenses some sections containing only one lemma.

### [2022-05-23T10:20:38+00:00](https://github.com/leanprover-community/mathlib/commit/275dd0f3626b4f57b97483d8335b139899b7bcc0)
feat(algebra/ne_zero): add helper methods ([#14286](https://github.com/leanprover-community/mathlib/pull/#14286))

Also golfs the inspiration for one of these, and cleans up some code around the area.

### [2022-05-23T10:20:35+00:00](https://github.com/leanprover-community/mathlib/commit/15f49ae2bf160814531adce78f39f236a68629a2)
feat(linear_algebra/tensor_algebra/basic): add `tensor_algebra.tprod` ([#14197](https://github.com/leanprover-community/mathlib/pull/#14197))

This is related to `exterior_power.ι_multi`.

Note the new import caused a proof to time out, so I squeezed the simps into term mode.

### [2022-05-23T09:19:36+00:00](https://github.com/leanprover-community/mathlib/commit/9288a2d90f6d6e6d2907b3374ef0ab78c3ea577f)
feat(linear_algebra/affine_space/affine_equiv): extra lemmas and docstrings ([#14319](https://github.com/leanprover-community/mathlib/pull/#14319))

I was struggling to find this definition, so added some more lemmas and a docstring.

### [2022-05-23T08:30:52+00:00](https://github.com/leanprover-community/mathlib/commit/aa6dc5759b19b34758f9c005c05d87dada66b185)
chore(measure_theory/function/l1_space): drop `integrable.sub'` ([#14309](https://github.com/leanprover-community/mathlib/pull/#14309))

It used to have weaker TC assumptions than `integrable.sub` but now it's just a weaker version of it.

### [2022-05-23T07:50:19+00:00](https://github.com/leanprover-community/mathlib/commit/2962eabcb21dc145f01306d302a20f5863efc8a6)
feat(linear_algebra/trace): trace of transpose map ([#13897](https://github.com/leanprover-community/mathlib/pull/#13897))

### [2022-05-23T06:53:49+00:00](https://github.com/leanprover-community/mathlib/commit/b5128b8af436c9c2216b2e1dad740fb034fa41eb)
feat(category_theory/limits): pullback squares ([#14220](https://github.com/leanprover-community/mathlib/pull/#14220))

Per [zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/pushout.20of.20biprod.2Efst.20and.20biprod.2Esnd.20is.20zero).




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-23T04:06:58+00:00](https://github.com/leanprover-community/mathlib/commit/94644b7dd6d6366af2dc0fc79ea69e978eaaade0)
chore(scripts): update nolints.txt ([#14321](https://github.com/leanprover-community/mathlib/pull/#14321))

I am happy to remove some nolints for you!

### [2022-05-23T01:49:47+00:00](https://github.com/leanprover-community/mathlib/commit/542d06a68b81fda2549795b7380e57aa6845c806)
feat(measure_theory): use `pseudo_metrizable_space` instead of `metrizable_space` ([#14310](https://github.com/leanprover-community/mathlib/pull/#14310))

### [2022-05-23T01:49:46+00:00](https://github.com/leanprover-community/mathlib/commit/c100004ccb500c38c33e2d430c0d58c5cbb96439)
refactor(category_theory/shift_functor): improve defeq of inverse ([#14300](https://github.com/leanprover-community/mathlib/pull/#14300))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-23T01:49:45+00:00](https://github.com/leanprover-community/mathlib/commit/56de25efcec99cd67f8d3599a901897f24333ed6)
chore(topology/separation): golf some proofs ([#14279](https://github.com/leanprover-community/mathlib/pull/#14279))

* extract `minimal_nonempty_closed_eq_singleton` out of the proof of
  `is_closed.exists_closed_singleton`;

* replace `exists_open_singleton_of_open_finset` with
  `exists_open_singleton_of_open_finite`, extract
  `minimal_nonempty_open_eq_singleton` out of its proof.

* add `exists_is_open_xor_mem`, an alias for `t0_space.t0`.

### [2022-05-23T01:49:44+00:00](https://github.com/leanprover-community/mathlib/commit/01eda9ab84a48e4cb226e4124c794b8e988efa60)
feat(topology/instances/ennreal): golf, add lemmas about `supr_add_supr` ([#14274](https://github.com/leanprover-community/mathlib/pull/#14274))

* add `ennreal.bsupr_add'` etc that deal with
  `{ι : Sort*} {p : ι → Prop}` instead of `{ι : Type*} {s : set ι}`;
* golf some proofs by reusing more powerful generic lemmas;
* add `ennreal.supr_add_supr_le`, `ennreal.bsupr_add_bsupr_le`,
  and `ennreal.bsupr_add_bsupr_le'`.

### [2022-05-23T01:49:43+00:00](https://github.com/leanprover-community/mathlib/commit/9861db0dff6f94b9b649cdcc4fdf947fd6864ce9)
feat(logic/hydra): termination of a hydra game ([#14190](https://github.com/leanprover-community/mathlib/pull/#14190))

+ The added file logic/hydra.lean deals with the following version of the hydra game: each head of the hydra is labelled by an element in a type `α`, and when you cut off one head with label `a`, it grows back an arbitrary but finite number of heads, all labelled by elements smaller than `a` with respect to a well-founded relation `r` on `α`. We show that no matter how (in what order) you choose cut off the heads, the game always terminates, i.e. all heads will eventually be cut off. The proof follows https://mathoverflow.net/a/229084/3332, and the notion of `fibration` and the `game_add` relation on the product of two types arise in the proof.

+ The results is used to show the well-foundedness of the intricate induction used to show that multiplication of games is well-defined on surreals, see [Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Well-founded.20recursion.20for.20pgames/near/282379832).

+ One lemma `add_singleton_eq_iff` is added to data/multiset/basic.

+ `acc.trans_gen` is added, closing [a comment](https://github.com/leanprover-community/lean/pull/713/files#r867394835) at lean[#713](https://github.com/leanprover-community/mathlib/pull/#713).

### [2022-05-23T01:49:42+00:00](https://github.com/leanprover-community/mathlib/commit/8304b951ef89cddd69196e7c8aa13a165d47abdc)
refactor(algebra/big_operators/*): Generalize to division monoids ([#14189](https://github.com/leanprover-community/mathlib/pull/#14189))

Generalize big operators lemmas to `division_comm_monoid`. Rename `comm_group.inv_monoid_hom` to `inv_monoid_hom` because it is not about`comm_group` anymore and we do not use classes as namespaces.

### [2022-05-23T01:49:41+00:00](https://github.com/leanprover-community/mathlib/commit/16a5286f31f9e60b7c568e54bec44930c2733ee0)
feat(order/atoms): add lemmas ([#14162](https://github.com/leanprover-community/mathlib/pull/#14162))

### [2022-05-22T23:41:38+00:00](https://github.com/leanprover-community/mathlib/commit/4cdde79fdea6614e460d406747e41839be382a02)
chore(set_theory/game/ordinal): minor golfing ([#14317](https://github.com/leanprover-community/mathlib/pull/#14317))

We open the `pgame` namespace to save a few characters. We also very slightly golf the proof of `to_pgame_le`.

### [2022-05-22T23:41:37+00:00](https://github.com/leanprover-community/mathlib/commit/005df4568fde502602bbd69835e32d60284c6ae2)
feat(topology/metric_space): use weaker TC assumptions ([#14316](https://github.com/leanprover-community/mathlib/pull/#14316))

Assume `t0_space` instead of `separated_space` in `metric.of_t0_pseudo_metric_space` and `emetric.of_t0_pseudo_emetric_space` (both definition used to have `t2` in their names).

### [2022-05-22T23:41:36+00:00](https://github.com/leanprover-community/mathlib/commit/9e9a2c9ec016774dab38de2c400d0fc44a95599d)
feat(algebra/ring/basic): add `no_zero_divisors.to_cancel_comm_monoid_with_zero` ([#14302](https://github.com/leanprover-community/mathlib/pull/#14302))

This already existed as `is_domain.to_cancel_comm_monoid_with_zero` with overly strong assumptions.

### [2022-05-22T23:41:35+00:00](https://github.com/leanprover-community/mathlib/commit/dcb3cb1ce1f8d35a69d1a75e6ea35d2e66bea570)
chore(logic/equiv/set): golf definition ([#14284](https://github.com/leanprover-community/mathlib/pull/#14284))

I've no idea which name is better; for now, let's at least not implement the same function twice.

### [2022-05-22T23:41:34+00:00](https://github.com/leanprover-community/mathlib/commit/60897e3b083d76b11bdf4c1a852241079d5519cf)
refactor(set_theory/game/nim): `0 ≈ nim 0` → `nim 0 ≈ 0` ([#14270](https://github.com/leanprover-community/mathlib/pull/#14270))

We invert the directions of a few simple equivalences/relabellings to a more natural order (simpler on the RHS).

### [2022-05-22T23:41:33+00:00](https://github.com/leanprover-community/mathlib/commit/5a24374d33bc1c37257b7b2af1e9a9a856340c02)
doc(set_theory/game/basic): improve docs ([#14268](https://github.com/leanprover-community/mathlib/pull/#14268))

### [2022-05-22T23:41:32+00:00](https://github.com/leanprover-community/mathlib/commit/cef5898cae97dded6c20fd02a66567ea83d1c7ac)
chore(linear_algebra): generalize conversion between matrices and bilinear forms to semirings ([#14263](https://github.com/leanprover-community/mathlib/pull/#14263))

Only one lemma was moved (`dual_distrib_apply`), none were renamed, and no proofs were meaningfully changed.

Section markers were shuffled around, and some variables exchanged for variables with weaker typeclass assumptions.

A few other things have been generalized to semiring at the same time; `linear_map.trace` and `linear_map.smul_rightₗ`

### [2022-05-22T23:41:31+00:00](https://github.com/leanprover-community/mathlib/commit/e09e87701536bf8397f0607055e9c6e8102e2350)
refactor(set_theory/cardinal/cofinality): infer arguments ([#14251](https://github.com/leanprover-community/mathlib/pull/#14251))

We make one of the arguments in `cof_type_le` and `lt_cof_type` implicit.

### [2022-05-22T23:41:30+00:00](https://github.com/leanprover-community/mathlib/commit/d9465730acf31bdd4946cba5e9f0929a38bf5361)
chore(data/matrix/basic): add `matrix.star_mul_vec` and `matrix.star_vec_mul` ([#14248](https://github.com/leanprover-community/mathlib/pull/#14248))

This also generalizes some nearby typeclasses.

### [2022-05-22T23:41:29+00:00](https://github.com/leanprover-community/mathlib/commit/684587b0acd70197b83bc318946fb8ef893b1bf5)
feat(set_theory/game/pgame): `add_lf_add_of_lf_of_le` ([#14150](https://github.com/leanprover-community/mathlib/pull/#14150))

This generalizes the previously existing `add_lf_add` on `numeric` games.

### [2022-05-22T22:57:28+00:00](https://github.com/leanprover-community/mathlib/commit/b7952ee5a36224bbce34912f1721e04779dc2878)
refactor(category_theory/shift): remove opaque_eq_to_iso ([#14262](https://github.com/leanprover-community/mathlib/pull/#14262))

It seems `opaque_eq_to_iso` was only needed because we had over-eager simp lemmas. After [#14260](https://github.com/leanprover-community/mathlib/pull/#14260), it is easy to remove.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-22T21:01:20+00:00](https://github.com/leanprover-community/mathlib/commit/178456ffefddf80dec3b26262cebc88c596e4969)
feat(set_theory/surreal/basic): definition of `≤` and `<` on numeric games ([#14169](https://github.com/leanprover-community/mathlib/pull/#14169))

### [2022-05-22T18:33:19+00:00](https://github.com/leanprover-community/mathlib/commit/fe2b5ab0983afdb6746dda6239f8ffc446a3ff47)
feat(set_theory/game/pgame): instances for empty moves of addition ([#14297](https://github.com/leanprover-community/mathlib/pull/#14297))

### [2022-05-22T17:01:21+00:00](https://github.com/leanprover-community/mathlib/commit/1b7e918ccaa086c5ed12e1a23145672fdf4e816d)
chore(algebra/geom_sum): rename to odd.geom_sum_pos ([#14264](https://github.com/leanprover-community/mathlib/pull/#14264))

allowing dot notation :)

### [2022-05-22T16:14:11+00:00](https://github.com/leanprover-community/mathlib/commit/eb8994b8a1a2827e89537f883381e599ed7a384b)
feat(measure_theory): use more `[(pseudo_)metrizable_space]` ([#14232](https://github.com/leanprover-community/mathlib/pull/#14232))

* Use `[metrizable_space α]` or `[pseudo_metrizable_space α]` assumptions in some lemmas, replace `tendsto_metric` with `tendsto_metrizable` in the names of these lemmas.
* Drop `measurable_of_tendsto_metric'` and `measurable_of_tendsto_metric` in favor of `measurable_of_tendsto_metrizable'` and `measurable_of_tendsto_metrizable`.

### [2022-05-22T14:41:20+00:00](https://github.com/leanprover-community/mathlib/commit/eae0510503794feb937b042e756f2f98f75a8222)
feat(category_theory/natural_isomorphism): a simp lemma cancelling inverses ([#14299](https://github.com/leanprover-community/mathlib/pull/#14299))

I am not super happy to be adding lemmas like this, because it feels like better designed simp normal forms (or something else) could just avoid the need.

However my efforts to think about this keep getting stuck on the shift functor hole we're in, and this lemma is useful in the meantime to dig my way out of it. :-)




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-22T14:41:19+00:00](https://github.com/leanprover-community/mathlib/commit/e4a8db19fd983ec7f8b260bc46c790f17629347a)
feat(data/real/ennreal): lemmas about unions and intersections ([#14296](https://github.com/leanprover-community/mathlib/pull/#14296))

### [2022-05-22T14:41:17+00:00](https://github.com/leanprover-community/mathlib/commit/a836c6dba9bd1ee2a0cdc9af0006a596f243031c)
refactor(category_theory): remove some simp lemmas about eq_to_hom ([#14260](https://github.com/leanprover-community/mathlib/pull/#14260))

The simp lemma `eq_to_hom_map : F.map (eq_to_hom p) = eq_to_hom (congr_arg F.obj p)` is rather dangerous, but after it has fired it's much harder to see the functor `F` (e.g. to use naturality of a natural transformation).

This PR removes `@[simp]` from that lemma, at the expense of having a few `local attribute [simp]`s, and adding it explicitly to simp sets.

On the upside, we also get to *remove* some `simp [-eq_to_hom_map]`s. I'm hoping also to soon be able to remove `opaque_eq_to_hom`, as it was introduced to avoid the problem this simp lemma was causing.

The PR is part of an effort to solve some problems identified on [zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/trouble.20in.20.60shift_functor.60.20land).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-22T12:23:13+00:00](https://github.com/leanprover-community/mathlib/commit/0386c3b3f02336825bb4b7bd8437747cead63488)
refactor(order/filter/lift): reformulate `lift_infi` etc ([#14138](https://github.com/leanprover-community/mathlib/pull/#14138))

* add `monotone.of_map_inf` and `monotone.of_map_sup`;
* add `filter.lift_infi_le`: this inequality doesn't need any assumptions;
* reformulate `filter.lift_infi` and `filter.lift'_infi` using `g (s ∩ t) = g s ⊓ g t` instead of `g s ⊓ g t = g (s ∩ t)`;
* rename `filter.lift_infi'` to `filter.lift_infi_of_directed`, use `g (s ∩ t) = g s ⊓ g t`;
* add `filter.lift_infi_of_map_univ` and `filter.lift'_infi_of_map_univ`.

### [2022-05-22T11:09:06+00:00](https://github.com/leanprover-community/mathlib/commit/d036d3cf9aa86704f85e0df605a9e6be18a02cec)
feat(probability/stopping): prove measurability of the stopped value ([#14062](https://github.com/leanprover-community/mathlib/pull/#14062))

### [2022-05-22T11:09:05+00:00](https://github.com/leanprover-community/mathlib/commit/49b68e802cfd909ceb7b81d385e447c109c747da)
feat(analysis/convex/uniform): Uniformly convex spaces ([#13480](https://github.com/leanprover-community/mathlib/pull/#13480))

Define uniformly convex spaces and prove the implications `inner_product_space ℝ E → uniform_convex_space E` and `uniform_convex_space E → strict_convex_space ℝ E`.

### [2022-05-22T09:27:57+00:00](https://github.com/leanprover-community/mathlib/commit/ac0060364a3fa8243c0e5809ed0282929233015a)
feat(measure_theory/measure/measure_space): add some `null_measurable_set` lemmas ([#14293](https://github.com/leanprover-community/mathlib/pull/#14293))

Add `measure_bUnion₀`, `measure_sUnion₀`, and `measure_bUnion_finset₀`.

### [2022-05-22T09:27:56+00:00](https://github.com/leanprover-community/mathlib/commit/726b9ce7ae9469c1420115a7b2f103a5c5a1ea8a)
feat(set_theory/ordinal/arithmetic): Lemmas about `bsup o.succ f` on a monotone function ([#14289](https://github.com/leanprover-community/mathlib/pull/#14289))

### [2022-05-22T09:27:55+00:00](https://github.com/leanprover-community/mathlib/commit/e99ff8895848de8b284ab3936b5216dec583e63d)
feat(measure_theory): add `restrict_inter_add_diff` and `lintegral_inter_add_diff` ([#14280](https://github.com/leanprover-community/mathlib/pull/#14280))

* add `measure_theory.measure.restrict_inter_add_diff` and `measure_theory.lintegral_inter_add_diff`;
* drop one measurability assumption in `measure_theory.lintegral_union`;
* add `measure_theory.lintegral_max` and `measure_theory.set_lintegral_max`;
* drop `measure_theory.measure.lebesgue_decomposition.max_measurable_le`: use `set_lintegral_max` instead.

### [2022-05-22T09:27:53+00:00](https://github.com/leanprover-community/mathlib/commit/2d9f791db470c022aa7e24a7392f39873ed13e34)
feat(order/filter): add lemmas about filter.has_antitone_basis ([#14131](https://github.com/leanprover-community/mathlib/pull/#14131))

* add `filter.has_antitone_basis.comp_mono` and
  `filter.has_antitone_basis.comp_strict_mono`;
* add `filter.has_antitone_basis.subbasis_with_rel`;
* generalize `filter.has_basis.exists_antitone_subbasis` to `ι : Sort*`.
* add a missing docstring.

### [2022-05-22T09:27:53+00:00](https://github.com/leanprover-community/mathlib/commit/52df6ab6b8ede43c7df97500c2107319768c990d)
refactor(category_theory): remove all decidability instances ([#14046](https://github.com/leanprover-community/mathlib/pull/#14046))

Make the category theory library thoroughly classical: mostly this is ceasing carrying around decidability instances for the indexing types of biproducts, and for the object and morphism types in `fin_category`.

It appears there was no real payoff: the category theory library is already extremely non-constructive.
As I was running into occasional problems providing decidability instances (when writing construction involving reindexing biproducts), it seems easiest to just remove this vestigial constructiveness from the category theory library.
 


Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-22T08:40:44+00:00](https://github.com/leanprover-community/mathlib/commit/37647bf2dc7429be4455fd2cea00c25f17039f34)
feat(measure_theory/constructions/borel_space): add `norm_cast` lemmas ([#14295](https://github.com/leanprover-community/mathlib/pull/#14295))

### [2022-05-22T06:29:42+00:00](https://github.com/leanprover-community/mathlib/commit/9b8588af1bf10f86a13e87954b9f9e363a2c084d)
chore(algebra/order/ring): golf `mul_le_one` ([#14245](https://github.com/leanprover-community/mathlib/pull/#14245))

golf `mul_le_one`

### [2022-05-22T06:29:41+00:00](https://github.com/leanprover-community/mathlib/commit/49ce9677855e71e391ea8d46e0b8b0eaf2bd6bca)
feat(ring_theory/valuation/basic): notation for `with_zero (multiplicative ℤ)` ([#14064](https://github.com/leanprover-community/mathlib/pull/#14064))

And likewise for `with_zero (multiplicative ℕ)`

### [2022-05-22T04:22:45+00:00](https://github.com/leanprover-community/mathlib/commit/a8a211f2e893ba470871d4ac22f769307b20ab6d)
feat(order/lattice): add `left_lt_inf` etc ([#14152](https://github.com/leanprover-community/mathlib/pull/#14152))

* add `left_lt_sup`, `right_lt_sup`, `left_or_right_lt_sup`, and their `inf` counterparts;
* generalize `is_top_or_exists_gt` and `is_bot_or_exists_lt` to directed orders, replacing `forall_le_or_exists_lt_inf` and `forall_le_or_exists_lt_sup`;
* generalize `exists_lt_of_sup` and `exists_lt_of_inf` to directed orders, rename them to `exists_lt_of_directed_le` and `exists_lt_of_directed_ge`.

### [2022-05-22T01:40:48+00:00](https://github.com/leanprover-community/mathlib/commit/d8b6f768d8d801c5bb8c5d65e9dad4418fa60028)
feat(set_theory/game/birthday): More basic birthdays ([#14287](https://github.com/leanprover-community/mathlib/pull/#14287))

### [2022-05-21T11:38:54+00:00](https://github.com/leanprover-community/mathlib/commit/f04684f434458523487438cd9c2f3907148d2906)
chore(data/set/pointwise): Move into the `set` namespace ([#14281](https://github.com/leanprover-community/mathlib/pull/#14281))

A bunch of lemmas about scalar multiplications of sets were dumped in root namespace for some reason.

The lemmas moved to `set.*` are:
* `zero_smul_set`
* `zero_smul_subset`
* `subsingleton_zero_smul_set`
* `zero_mem_smul_set`
* `zero_mem_smul_iff`
* `zero_mem_smul_set_iff`
* `smul_add_set`
* `smul_mem_smul_set_iff`
* `mem_smul_set_iff_inv_smul_mem`
* `mem_inv_smul_set_iff`
* `preimage_smul`
* `preimage_smul_inv`
* `set_smul_subset_set_smul_iff`
* `set_smul_subset_iff`
* `subset_set_smul_iff`
* `smul_mem_smul_set_iff₀`
* `mem_smul_set_iff_inv_smul_mem₀`
* `mem_inv_smul_set_iff₀`
* `preimage_smul₀`
* `preimage_smul_inv₀`
* `set_smul_subset_set_smul_iff₀`
* `set_smul_subset_iff₀`
* `subset_set_smul_iff₀`
* `smul_univ₀`
* `smul_set_univ₀`

### [2022-05-21T08:14:04+00:00](https://github.com/leanprover-community/mathlib/commit/fc19a4e4c9f11add4d8e55cc7bfca15325b8dbcf)
feat({data/finset,order/filter}/pointwise): Multiplicative action on pointwise monoids ([#14214](https://github.com/leanprover-community/mathlib/pull/#14214))

`mul_action`, `distrib_mul_action`, `mul_distrib_mul_action` instances for `finset` and `filter`. Also delete `set.smul_add_set` because `smul_add` proves it.

### [2022-05-21T06:32:31+00:00](https://github.com/leanprover-community/mathlib/commit/eaa771fc4f5f356afeacac4ab92e0cbf10b0b1df)
chore(tactic/cancel_denoms): remove an unused have ([#14269](https://github.com/leanprover-community/mathlib/pull/#14269))

### [2022-05-21T03:17:39+00:00](https://github.com/leanprover-community/mathlib/commit/d787d4990bac1c8d0bbd8043a1d47fd318e9a5ba)
feat(algebra/big_operators): add `finset.prod_comm'` ([#14257](https://github.com/leanprover-community/mathlib/pull/#14257))

* add a "dependent" version of `finset.prod_comm`;
* use it to prove the original lemma;
* slightly generalize `exists_eq_right_right` and `exists_eq_right_right'`;
* add two `simps` attributes.

### [2022-05-21T00:59:53+00:00](https://github.com/leanprover-community/mathlib/commit/3fc6fbb3f0b2eddc4547888551345b1faf4887d2)
feat(algebra/divisibility): `is_refl` and `is_trans` instances for divisibility ([#14240](https://github.com/leanprover-community/mathlib/pull/#14240))

### [2022-05-21T00:22:23+00:00](https://github.com/leanprover-community/mathlib/commit/0e095f0e4dc0c746ca365f38db947db4d927abd3)
feat(data/polynomial/mirror): `mirror` is injective ([#14254](https://github.com/leanprover-community/mathlib/pull/#14254))

This PR adds an `inj` lemma for `mirror`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-05-20T23:44:35+00:00](https://github.com/leanprover-community/mathlib/commit/d217e1dbac4a3dfe92389bcefe930ce58a0f64dd)
feat(set_theory/game/pgame): `sub_self_equiv` ([#14272](https://github.com/leanprover-community/mathlib/pull/#14272))

### [2022-05-20T18:26:01+00:00](https://github.com/leanprover-community/mathlib/commit/a6b90bebf8b540a0d96566a34f514828ff5c9c7d)
refactor(set_theory/cardinal/*): add `succ_order` instance, rename `succ` lemmas ([#14244](https://github.com/leanprover-community/mathlib/pull/#14244))

We rename the lemmas on `cardinal.succ` to better match those from `succ_order`.

- `succ_le` → `succ_le_iff`
- `lt_succ` → `lt_succ_iff`
- `lt_succ_self` → `lt_succ`

We also add `succ_le_of_lt` and `le_of_lt_succ`.

### [2022-05-20T17:46:23+00:00](https://github.com/leanprover-community/mathlib/commit/113f7e428418f8c144d4f8496d7c15e936dde65e)
feat(linear_algebra/trace): trace of projection maps  ([#14165](https://github.com/leanprover-community/mathlib/pull/#14165))

This is proved under the `field` assumption instead of the finite free module assumptions generally used to talk about the trace because we need the submodules `p` and `f.ker` to also be free and finite.

- [x] depends on: [#13872](https://github.com/leanprover-community/mathlib/pull/#13872) 


Co-authored-by: antoinelab01 <66086247+antoinelab01@users.noreply.github.com>

### [2022-05-20T16:36:21+00:00](https://github.com/leanprover-community/mathlib/commit/1983e40ab05f49ad0b952e0178d8481499a8d44e)
feat(data/zmod/basic): If the orbit is finite, then the minimal period is positive ([#14201](https://github.com/leanprover-community/mathlib/pull/#14201))

This PR adds an instance stating that if the orbit is finite, then the minimal period is positive.

The instance is needed for an explicit computation that involves a product indexed by `zmod (minimal_period ((•) a) b)`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-05-20T15:32:16+00:00](https://github.com/leanprover-community/mathlib/commit/846ed9f2e49bdb58e4f71ad5c23fbe8203f4aedc)
chore(measure_theory/integral/lebesgue): golf some proofs ([#14256](https://github.com/leanprover-community/mathlib/pull/#14256))

### [2022-05-20T13:34:14+00:00](https://github.com/leanprover-community/mathlib/commit/180d97519a36eb9e9c1220ab7e1c2d3d0be47110)
feat(set_theory/game/pgame): Tweak `pgame.add` API ([#13611](https://github.com/leanprover-community/mathlib/pull/#13611))

We modify the API for `pgame.add` as follows: 

- `left_moves_add` and `right_moves_add` are turned from type equivalences into type equalities.
- The former equivalences are prefixed with `to_` and inverted.

We also golf a few theorems and make some parameters explicit.

### [2022-05-20T11:17:03+00:00](https://github.com/leanprover-community/mathlib/commit/1483eca134d36e6eab632ed3fc6825b4737337d0)
feat(algebra/algebra/operations): add right induction principles for power membership ([#14219](https://github.com/leanprover-community/mathlib/pull/#14219))

We already had the left-induction principles.

There's probably some clever trick to get these via `mul_opposite`, but I'm not sure if it's worth the effort.

### [2022-05-20T06:26:14+00:00](https://github.com/leanprover-community/mathlib/commit/1e011e3fb89aa8a5375106f9293505a219bac3b4)
feat(linear_algebra/trace): trace of prod_map ([#13872](https://github.com/leanprover-community/mathlib/pull/#13872))

In this PR I prove that the trace is additive under `prod_map`, i.e. that `trace (prod_map f g) = trace f + trace g`. 



Co-authored-by: antoinelab01 <66086247+antoinelab01@users.noreply.github.com>

### [2022-05-20T04:06:08+00:00](https://github.com/leanprover-community/mathlib/commit/735fbe054fcfce7fb4e033621683936604abdd68)
chore(scripts): update nolints.txt ([#14255](https://github.com/leanprover-community/mathlib/pull/#14255))

I am happy to remove some nolints for you!

### [2022-05-20T01:48:36+00:00](https://github.com/leanprover-community/mathlib/commit/a5878bbea1a41b4fcc73acb01ac1ba6e51388d38)
feat(data/polynomial/mirror): `mirror_eq_iff` ([#14238](https://github.com/leanprover-community/mathlib/pull/#14238))

This PR adds a lemma stating that `p.mirror = q ↔ p = q.mirror`.

### [2022-05-20T00:16:04+00:00](https://github.com/leanprover-community/mathlib/commit/c9c9fa15fec7ca18e9ec97306fb8764bfe988a7e)
refactor(category_theory/discrete): make discrete irreducible ([#13762](https://github.com/leanprover-community/mathlib/pull/#13762))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Adam Topaz <github@adamtopaz.com>
Co-authored-by: Jakob von Raumer <jakob@von-raumer.de>
Co-authored-by: Markus Himmel <markus@himmel-villmar.de>
Co-authored-by: yuma-mizuno <mizuno.y.aj@gmail.com>
Co-authored-by: Praneeth Kolichala <praneeth.kolichala@gmail.com>

### [2022-05-19T19:16:16+00:00](https://github.com/leanprover-community/mathlib/commit/5cf7a1c5d86f8b2f7629a97a8ebf9fce8931ebef)
feat (algebra/group/prod): Showing that embed_product is injective ([#14247](https://github.com/leanprover-community/mathlib/pull/#14247))

Proves that `embed_product` is injective.



Co-authored-by: laughinggas <58670661+laughinggas@users.noreply.github.com>

### [2022-05-19T19:16:15+00:00](https://github.com/leanprover-community/mathlib/commit/3c6f16c35fb0ea0fc127e369d08b324828a758ee)
feat(algebra/group/conj): instances + misc ([#13943](https://github.com/leanprover-community/mathlib/pull/#13943))





Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-05-19T17:11:59+00:00](https://github.com/leanprover-community/mathlib/commit/c8f2a1f481d0d4b675fcaee019917de97091f9c1)
chore(*) : `zero_dvd_iff.1` → `eq_zero_of_zero_dvd` ([#14241](https://github.com/leanprover-community/mathlib/pull/#14241))

We already had a name for this theorem, so we might as well use it.

### [2022-05-19T17:11:58+00:00](https://github.com/leanprover-community/mathlib/commit/ffe70020059f75e529bdf2230a3699ed4b43e7ae)
feat(topology/locally_constant): Characteristic functions on clopen sets are locally constant ([#11708](https://github.com/leanprover-community/mathlib/pull/#11708))

Gives an API for characteristic functions on clopen sets, `char_fn`, which are locally constant functions.



Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2022-05-19T16:29:55+00:00](https://github.com/leanprover-community/mathlib/commit/d403caddc5f83512c40def35742393b003854a5c)
chore(linear_algebra/quadratic_form/basic): remove redundant fields ([#14246](https://github.com/leanprover-community/mathlib/pull/#14246))

This renames `quadratic_form.mk_left` to `quadratic_form.mk` by removing the redundant fields in the structure, as the proof of `mk_left` didn't actually use the fact the ring was commutative as it claimed to in the docstring.
The only reason we could possibly want these is if addition were non-commutative, which seems extremely unlikely.

### [2022-05-19T14:21:27+00:00](https://github.com/leanprover-community/mathlib/commit/218d66a1f891a63e84eb9f1f21eafe14e2dd25b9)
doc(tactic/lint/type_classes): Fix small typo ([#14242](https://github.com/leanprover-community/mathlib/pull/#14242))

### [2022-05-19T12:28:20+00:00](https://github.com/leanprover-community/mathlib/commit/e29d9110012609888ed68be91ce363ce2c1a3f41)
feat(group_theory/quotient_group): properties of quotients of homomorphisms and equivalences ([#13046](https://github.com/leanprover-community/mathlib/pull/#13046))

Add `id`, `comp` for quotients of homomorphisms and `refl`, `symm`, `trans` for quotients of equivalences.

### [2022-05-19T10:20:40+00:00](https://github.com/leanprover-community/mathlib/commit/18624efab7a0a9e4b61f0e5301a250204cf7f8b6)
feat(order/complete_lattice): add `Sup_diff_singleton_bot` etc ([#14205](https://github.com/leanprover-community/mathlib/pull/#14205))

* add `Sup_diff_singleton_bot` and `Inf_diff_singleton_top`;
* add `set.sUnion_diff_singleton_empty` and `set.sInter_diff_singleton_univ`.

### [2022-05-19T09:41:31+00:00](https://github.com/leanprover-community/mathlib/commit/6906b6f7e21d1d93fef24d0dfe49db1661f9159e)
feat(analysis/normed_space/pi_Lp): add missing nnnorm lemmas ([#14221](https://github.com/leanprover-community/mathlib/pull/#14221))

This renames `pi_Lp.dist` to `pi_Lp.dist_eq` and `pi_Lp.edist` to `pi_Lp.edist_eq` to match `pi_Lp.norm_eq`.
The `nndist` version of these lemmas is new.

The `pi_Lp.norm_eq_of_L2` lemma was not stated at the correct generality, and has been moved to an earlier file where doing so is easier.
The `nnnorm` version of this lemma is new.

Also replaces some `∀` binders with `Π` to match the pretty-printer, and tidies some whitespace.

### [2022-05-19T05:25:12+00:00](https://github.com/leanprover-community/mathlib/commit/ea3009f6c1a37dc031f741382dbb3ed93c965620)
docs(category_theory/*): the last missing module docs ([#14237](https://github.com/leanprover-community/mathlib/pull/#14237))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-19T03:48:08+00:00](https://github.com/leanprover-community/mathlib/commit/923a14dab8d406845d0edee680095a9805723aa0)
chore(scripts): update nolints.txt ([#14239](https://github.com/leanprover-community/mathlib/pull/#14239))

I am happy to remove some nolints for you!

### [2022-05-19T01:41:46+00:00](https://github.com/leanprover-community/mathlib/commit/83285b247cb65b22fd66c511a3236a331268d022)
refactor(set_theory/game/pgame): Rename `le_def_lf` → `le_iff_forall_lf` ([#14206](https://github.com/leanprover-community/mathlib/pull/#14206))

One-sided variants of these have also been introduced.

### [2022-05-19T00:34:01+00:00](https://github.com/leanprover-community/mathlib/commit/cc74bcbd94f99712f20b3ec7c8a6775e76f6828b)
feat(topology/algebra/module/basic): add `continuous_linear_map.apply_module` ([#14223](https://github.com/leanprover-community/mathlib/pull/#14223))

This matches `linear_map.apply_module`, but additionally provides `has_continuous_const_smul`.

This also adds the missing `continuous_linear_map.semiring` and `continuous_linear_map.monoid_with_zero` instances.

### [2022-05-18T23:17:05+00:00](https://github.com/leanprover-community/mathlib/commit/76f9f45419d8d984668fccb6b76547e0597011cf)
feat(category_theory/limits): (co/bi)products over types with a unique term ([#14191](https://github.com/leanprover-community/mathlib/pull/#14191))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-18T22:19:04+00:00](https://github.com/leanprover-community/mathlib/commit/c42cff118a8e197970db0e83a933bf632ed87175)
doc(deprecated/*): all deprecated files now lint ([#14233](https://github.com/leanprover-community/mathlib/pull/#14233))

I am happy to remove some nolints for you.

### [2022-05-18T22:19:03+00:00](https://github.com/leanprover-community/mathlib/commit/a5f4cf53d2794c4630605938105083285d5ca7ed)
fix(algebra/ring_quot): fix a diamond in the int-smul action ([#14226](https://github.com/leanprover-community/mathlib/pull/#14226))

We already handle the `nsmul` diamond correctly in the lines above

### [2022-05-18T20:08:39+00:00](https://github.com/leanprover-community/mathlib/commit/32700f50bca04d231f9f180564934f30fba4aad8)
refactor(*): `insert_singleton` → `pair` ([#14210](https://github.com/leanprover-community/mathlib/pull/#14210))

We rename various theorems with `insert_singleton` in the name to the more sensible and searchable `pair`. We also golf `finset.pair_comm`.

### [2022-05-18T20:08:38+00:00](https://github.com/leanprover-community/mathlib/commit/5fe43a91d001a233454a3fc2befb947d628c2704)
feat(linear_algebra/trace): trace of tensor_products and hom_tensor_hom is an equivalence ([#13728](https://github.com/leanprover-community/mathlib/pull/#13728))




Co-authored-by: antoinelab01 <66086247+antoinelab01@users.noreply.github.com>

### [2022-05-18T18:01:54+00:00](https://github.com/leanprover-community/mathlib/commit/259c951d6695860553b90bcff9e88fb056a9ed58)
doc(src/deprecated/*): add module docstrings ([#14224](https://github.com/leanprover-community/mathlib/pull/#14224))

Although we don't ever import them now, I add module docstrings for a couple of deprecated files to make the linter happier. I also attempt to unify the style in the docstrings of all the deprecated files.

### [2022-05-18T18:01:53+00:00](https://github.com/leanprover-community/mathlib/commit/4f31117e307c8b2ddb25d244dbfea8a9cc206828)
feat(data/set/basic): add `set.subset_range_iff_exists_image_eq` and `set.range_image` ([#14203](https://github.com/leanprover-community/mathlib/pull/#14203))

* add `set.subset_range_iff_exists_image_eq` and `set.range_image`;
* use the former to golf `set.can_lift` (name fixed from `set.set.can_lift`);
* golf `set.exists_eq_singleton_iff_nonempty_subsingleton`.

### [2022-05-18T16:04:05+00:00](https://github.com/leanprover-community/mathlib/commit/470ddbdb3e84c2da030f0fb2b4219332373587e5)
chore(analysis,topology): add missing ulift instances ([#14217](https://github.com/leanprover-community/mathlib/pull/#14217))

### [2022-05-18T16:04:04+00:00](https://github.com/leanprover-community/mathlib/commit/503970d28e436590b17e8ae6a669f21ad73aa872)
chore(data/fintype/basic): Better `fin` lemmas ([#14200](https://github.com/leanprover-community/mathlib/pull/#14200))

Turn `finset.image` into `finset.map` and `insert` into `finset.cons` in the three lemmas relating `univ : finset (fin (n + 1))` and `univ : finset (fin n)`. Golf proofs involving the related big operators lemmas.

### [2022-05-18T16:04:03+00:00](https://github.com/leanprover-community/mathlib/commit/c38ab356656d192251ecc8e7927e81c9932d3c9c)
feat(analysis/convex/combination): The convex hull of `s + t` ([#14160](https://github.com/leanprover-community/mathlib/pull/#14160))

`convex_hull` distributes over pointwise addition of sets and commutes with pointwise scalar multiplication. Also delete `linear_map.image_convex_hull` because it duplicates `linear_map.convex_hull_image`.

### [2022-05-18T14:08:52+00:00](https://github.com/leanprover-community/mathlib/commit/cfedf1d5b51096eccff25b7dd9ea8c86f4c402c8)
feat(ring_theory/ideal/operations.lean): lemmas about coprime ideals ([#14176](https://github.com/leanprover-community/mathlib/pull/#14176))

Generalises some lemmas from `ring_theory/coprime/lemmas.lean` to the case of non-principal ideals.

### [2022-05-18T14:08:51+00:00](https://github.com/leanprover-community/mathlib/commit/2c2d515a73bf92c6e27c3a15089028612606f391)
refactor(data/list/min_max): Generalise `list.argmin`/`list.argmax` to preorders ([#13221](https://github.com/leanprover-community/mathlib/pull/#13221))

This PR generalises the contents of the `data/list/min_max` file from a `linear_order` down to a `preorder` with decidable `<`. Note that for this to work out, I have had to change the structure of the auxiliary function `argmax₂` to now mean `option.cases_on a (some b) (λ c, if f c < f b then some b else some c)`. This is because in the case of a preorder, `argmax₂` would perform the swap in the absence of the `≤` relation, which would result in a semi-random shuffle that doesn't look very `maximal`.



Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-05-18T13:10:54+00:00](https://github.com/leanprover-community/mathlib/commit/54773fc062eb7c7a19f9727eeaa4b1a08f96bb10)
feat(topology/algebra/module/multilinear): add `continuous_multilinear_map.smul_right` ([#14218](https://github.com/leanprover-community/mathlib/pull/#14218))

See https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Question.20about.20.60formal_multilinear_series.60 for one use case

### [2022-05-18T12:02:21+00:00](https://github.com/leanprover-community/mathlib/commit/9dc9c3ea8f5830bb330e536e27580a0132e381a4)
feat(logic/lemmas): Distributivity of `if then else` ([#14146](https://github.com/leanprover-community/mathlib/pull/#14146))

Distributivity laws for `dite` and `ite`.

### [2022-05-18T10:31:07+00:00](https://github.com/leanprover-community/mathlib/commit/ae6a7c3f2d43c6ecb4fba50338c473e4b383b19d)
feat(linear_algebra/multilinear/finite_dimensional): generalize to finite and free ([#14199](https://github.com/leanprover-community/mathlib/pull/#14199))

This also renames some `free` and `finite` instances which had garbage names.

### [2022-05-18T07:53:52+00:00](https://github.com/leanprover-community/mathlib/commit/59facea406cedc965fa37e04bb68a6f1fd307ac7)
chore(data/multiset/basic): `∅` → `0` ([#14211](https://github.com/leanprover-community/mathlib/pull/#14211))

It's preferred to use `0` instead of `∅` throughout the multiset API.

### [2022-05-18T04:57:17+00:00](https://github.com/leanprover-community/mathlib/commit/d08f73409464b55b0e8391aefb2a87479bef99e8)
chore(measure_theory/function/strongly_measurable): golf some proofs ([#14209](https://github.com/leanprover-community/mathlib/pull/#14209))

### [2022-05-18T02:51:15+00:00](https://github.com/leanprover-community/mathlib/commit/50696a85c846cdd3f6fa7608527abab0fba8269f)
chore(data/multiset/basic): Inline instances ([#14208](https://github.com/leanprover-community/mathlib/pull/#14208))

We inline various protected theorems into the `ordered_cancel_add_comm_monoid` instance. We also declare `covariant_class` and `contravariant_class` instances, which make further theorems redundant.

### [2022-05-18T02:13:32+00:00](https://github.com/leanprover-community/mathlib/commit/9f6f605bb0cd47a8e50210872f906f397a8ae348)
feat(data/polynomial/mirror): Central coefficient of `p * p.mirror` ([#14096](https://github.com/leanprover-community/mathlib/pull/#14096))

This PR adds a lemma `(p * p.mirror).coeff (p.nat_degree + p.nat_trailing_degree) = p.sum (λ n, (^ 2))`.
I also rearranged the file by assumptions on the ring `R`.

### [2022-05-18T01:20:31+00:00](https://github.com/leanprover-community/mathlib/commit/f48cbb16b2a9b4b279803b8cb5205772b004b07d)
feat(category_theory/limits): reindexing (co/bi)products ([#14193](https://github.com/leanprover-community/mathlib/pull/#14193))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-17T23:22:58+00:00](https://github.com/leanprover-community/mathlib/commit/ca5930dfb4afe600bf6bcc99312aeff892e24b49)
feat(data/multiset/basic): `pair_comm` ([#14207](https://github.com/leanprover-community/mathlib/pull/#14207))

### [2022-05-17T23:22:57+00:00](https://github.com/leanprover-community/mathlib/commit/6b291d7b5c37958995846584ba40133cb346c8dd)
feat(analysis/special_functions/trigonometric/arctan): add `real.range_arctan` ([#14204](https://github.com/leanprover-community/mathlib/pull/#14204))

### [2022-05-17T23:22:56+00:00](https://github.com/leanprover-community/mathlib/commit/632fef372ebe2ab65b51f4e922fe28ce1d0fec1f)
feat(analysis/normed_space/M_structure): Define L-projections, show they form a Boolean algebra ([#12173](https://github.com/leanprover-community/mathlib/pull/#12173))

A continuous projection P on a normed space X is said to be an L-projection if, for all `x` in `X`,
```
∥x∥ = ∥P x∥ + ∥(1-P) x∥.
```
The range of an L-projection is said to be an L-summand of X.

A continuous projection P on a normed space X is said to be an M-projection if, for all `x` in `X`,
```
∥x∥ = max(∥P x∥,∥(1-P) x∥).
```
The range of an M-projection is said to be an M-summand of X.

The L-projections and M-projections form Boolean algebras. When X is a Banach space, the Boolean
algebra of L-projections is complete.

Let `X` be a normed space with dual `X^*`. A closed subspace `M` of `X` is said to be an M-ideal if
the topological annihilator `M^∘` is an L-summand of `X^*`.

M-ideal, M-summands and L-summands were introduced by Alfsen and Effros to
study the structure of general Banach spaces. When `A` is a JB*-triple, the M-ideals of `A` are
exactly the norm-closed ideals of `A`. When `A` is a JBW*-triple with predual `X`, the M-summands of
`A` are exactly the weak*-closed ideals, and their pre-duals can be identified with the L-summands
of `X`. In the special case when `A` is a C*-algebra, the M-ideals are exactly the norm-closed
two-sided ideals of `A`, when `A` is also a W*-algebra the M-summands are exactly the weak*-closed
two-sided ideals of `A`.

This initial PR limits itself to showing that the L-projections form a Boolean algebra. The approach followed is based on that used in `measure_theory.measurable_space`. The equivalent result for M-projections can be established by a similar argument or by a duality result (to be established). However, I thought it best to seek feedback before proceeding further.



Co-authored-by: Christopher Hoskin <mans0954@users.noreply.github.com>

### [2022-05-17T21:17:37+00:00](https://github.com/leanprover-community/mathlib/commit/0afb90b4d34e9c3cb8c2b794682adeda9376bd9d)
refactor(algebra/parity): Generalize to division monoids ([#14187](https://github.com/leanprover-community/mathlib/pull/#14187))

Generalize lemmas about `is_square`, `even` and `odd`. Improve dot notation.

### [2022-05-17T20:04:43+00:00](https://github.com/leanprover-community/mathlib/commit/215819372362aa1947ed77e172311e4ee08a7c6b)
feat(topology/instances/matrix): add topological/continuous instances ([#14202](https://github.com/leanprover-community/mathlib/pull/#14202))

For completeness, `has_continuous_add` and `topological_add_group`
instances are added to matrices, as pi types already have
these. Additionally, `has_continuous_const_smul` and
`has_continuous_smul` matrix instances have been made more generic,
allowing differing index types.





Co-authored-by: Aron Erben <aron.erben@econ.uzh.ch>

### [2022-05-17T18:49:25+00:00](https://github.com/leanprover-community/mathlib/commit/1f0f981374d4ed151c763996d883872e28bdd975)
chore(linear_algebra/multilinear/basic): move finite-dimensionality to a new file ([#14198](https://github.com/leanprover-community/mathlib/pull/#14198))

`linear_algebra.matrix.to_lin` pulls in a lot of imports that appear to slow things down considerably in downstream files.

The proof is moved without modification.

### [2022-05-17T17:18:53+00:00](https://github.com/leanprover-community/mathlib/commit/ae6f59d7c2ec01b920f490ba31fa6522fca04d29)
feat(analysis/locally_convex/with_seminorms): pull back `with_seminorms` along a linear inducing ([#13549](https://github.com/leanprover-community/mathlib/pull/#13549))

This show that, if `f : E -> F` is linear and the topology on `F` is induced by a family of seminorms `p`, then the topology induced on `E` through `f` is induced by the seminorms `(p i) ∘ f`.

- [x] depends on: [#13547](https://github.com/leanprover-community/mathlib/pull/#13547)

### [2022-05-17T17:18:52+00:00](https://github.com/leanprover-community/mathlib/commit/ba38b47fd930ea556dffa13346c1dcb26509d1f1)
feat(group_theory/perm/list): Add missing `form_perm` lemmas ([#13218](https://github.com/leanprover-community/mathlib/pull/#13218))




Co-authored-by: Mantas Bakšys <39908973+MantasBaksys@users.noreply.github.com>
Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-05-17T15:35:00+00:00](https://github.com/leanprover-community/mathlib/commit/da201ad41501d0758e3ef8469c8388f288cb5ff6)
chore(set_theory/ordinal/{basic, arithmetic}): Inline instances ([#14076](https://github.com/leanprover-community/mathlib/pull/#14076))

We inline various definition in the `ordinal` instances, thus avoiding protected (or unprotected!) definitions that are only used once.

### [2022-05-17T15:34:59+00:00](https://github.com/leanprover-community/mathlib/commit/600d8eaa7d3730e96a96e8a6825bbef0ab6d4ede)
feat(topology/metric_space): define a pseudo metrizable space ([#14053](https://github.com/leanprover-community/mathlib/pull/#14053))

* define `topological_space.pseudo_metrizable_space`;
* copy API from `topological_space.metrizable_space`;
* add `pi` instances;
* use `X`, `Y` instead of `α`, `β`.

### [2022-05-17T15:34:57+00:00](https://github.com/leanprover-community/mathlib/commit/e2eea5500733446ad9be0dba34167066a864df20)
feat(algebra/homology): short exact sequences ([#14009](https://github.com/leanprover-community/mathlib/pull/#14009))

Migrating from LTE. (This is all Johan and Andrew's work, I think, I just tidied up some.)

Please feel free to push changes directly without consulting me. :-)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-17T13:06:20+00:00](https://github.com/leanprover-community/mathlib/commit/3d279118b3c2987d2ee4396d6afa2171508ec366)
feat(data/zmod/quotient): The minimal period equals the cardinality of the orbit ([#14183](https://github.com/leanprover-community/mathlib/pull/#14183))

This PR adds a lemma stating that `minimal_period ((•) a) b = card (orbit (zpowers a) b)`.

### [2022-05-17T13:06:19+00:00](https://github.com/leanprover-community/mathlib/commit/3c87882bc6f23cb3b7806e113b02662173a5e2fd)
feat(number_theory/arithmetic_function): map a multiplicative function across a product ([#14180](https://github.com/leanprover-community/mathlib/pull/#14180))






Co-authored-by: Bhavik Mehta <bm489@cam.ac.uk>

### [2022-05-17T13:06:18+00:00](https://github.com/leanprover-community/mathlib/commit/beee9ecb6e05f59443c055a03fdcf77c0a72bb0a)
feat(data/complex): real part of sum ([#14177](https://github.com/leanprover-community/mathlib/pull/#14177))




Co-authored-by: Bhavik Mehta <bm489@cam.ac.uk>

### [2022-05-17T13:06:17+00:00](https://github.com/leanprover-community/mathlib/commit/d3e3eb847b2cce95208e1d08d62a50535a44c661)
chore(algebra/monoid_algebra): clean up some bad decidable arguments ([#14175](https://github.com/leanprover-community/mathlib/pull/#14175))

Some of these statements contained classical decidable instances rather than generalized ones.
By removing `open_locale classical`, these become easy to find.

### [2022-05-17T13:06:16+00:00](https://github.com/leanprover-community/mathlib/commit/7db6ca99659dfa79b1c192139b741bc0aef42586)
test({data/{finset,set},order/filter}/pointwise): Ensure priority of the `ℕ` and `ℤ` actions ([#14166](https://github.com/leanprover-community/mathlib/pull/#14166))

Each of `set`, `finset`, `filter` creates (non propeq) diamonds with the fundamental `ℕ` and `ℤ` actions because of instances of the form `has_scalar α β → has_scalar α (set β)`. For example, `{2, 3}^2` could well be `{4, 9}` or `{4, 6, 9}`.

The instances involved are all too important to be discarded, so we decide to live with the diamonds but give priority to the `ℕ` and `ℤ` actions. The reasoning for the priority is that those can't easily be spelled out, while the derived actions can. For example, `s.image ((•) 2)` easily replaces `2 • s`. Incidentally, additive combinatorics uses extensively the `ℕ` action.

This PR adds both a library note and tests to ensure this stays the case. It also fixes the additive `set` and `filter` versions, which were not conforming to the test.

### [2022-05-17T13:06:14+00:00](https://github.com/leanprover-community/mathlib/commit/f33b0847b53c3806f20846eb3eea1c0412f1a7b0)
feat(topology/separation): generalize a lemma ([#14154](https://github.com/leanprover-community/mathlib/pull/#14154))

* generalize `nhds_eq_nhds_iff` from a `[t1_space α]` to a `[t0_space α]`;
* relate `indistinguishable` to `nhds`.

### [2022-05-17T13:06:13+00:00](https://github.com/leanprover-community/mathlib/commit/65bf134940aa082f9dc6cd193f7edbb61fe817d3)
split(algebra/hom/ring): Split off `algebra.ring.basic` ([#14144](https://github.com/leanprover-community/mathlib/pull/#14144))

Move `non_unital_ring_hom` and `ring_hom` to a new file `algebra.hom.ring`.

Crediting
* Amelia for [#1305](https://github.com/leanprover-community/mathlib/pull/#1305)
* Jireh for [#13430](https://github.com/leanprover-community/mathlib/pull/#13430)

### [2022-05-17T13:06:12+00:00](https://github.com/leanprover-community/mathlib/commit/4ae5e7a0ffc7090ae0f5aa354f655ef5c74324cb)
feat(data/polynomial/laurent): laurent polynomials are a module over polynomials ([#14121](https://github.com/leanprover-community/mathlib/pull/#14121))

This PR only introduces the instance `module R[X] R[T;T⁻¹]`.

I isolated it from the rest, since I want to give special attention to whether there might be any issues declaring it a global instance and whether it should be localized or even simply a def.  Edit: Eric seems happy with this instance!

### [2022-05-17T13:06:11+00:00](https://github.com/leanprover-community/mathlib/commit/46c42cc9e064d35ea379cd364a9c52dc21708c13)
refactor(algebra/geom_sum): remove definition ([#14120](https://github.com/leanprover-community/mathlib/pull/#14120))

There's no need to have a separate definition `geom_sum := ∑ i in range n, x ^ i`. Instead it's better to just write the lemmas about the sum itself: that way `simp` lemmas fire "in the wild", without needing to rewrite expression in terms of `geom_sum` manually.




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-17T11:00:13+00:00](https://github.com/leanprover-community/mathlib/commit/2370d104526beadca569248bcd3a4115c4889ee6)
chore(algebra/order/monoid): golf an instance ([#14184](https://github.com/leanprover-community/mathlib/pull/#14184))

Move two instances below to reuse a proof.

### [2022-05-17T03:48:46+00:00](https://github.com/leanprover-community/mathlib/commit/f1c08cded027da1239ff040de4717b0e5154f9d1)
chore(scripts): update nolints.txt ([#14185](https://github.com/leanprover-community/mathlib/pull/#14185))

I am happy to remove some nolints for you!

### [2022-05-17T00:02:01+00:00](https://github.com/leanprover-community/mathlib/commit/737784efc8fd40eeb58cdfa40e9657d2e44aaf4d)
refactor(algebra/{group_power/{basic,lemmas},group_with_zero/power}): Generalize lemmas to division monoids ([#14102](https://github.com/leanprover-community/mathlib/pull/#14102))

Generalize `group` and `group_with_zero` lemmas about `zpow` to `division_monoid`. Lemmas are renamed because one of the `group` or `group_with_zero` name has to go. It's just a matter of removing the suffixed `₀`.

Lemma renames

### [2022-05-16T16:38:19+00:00](https://github.com/leanprover-community/mathlib/commit/89f2760f5d18df9443eaf53ef7c1f5a0c563f5ef)
feat(number_theory/legendre_symbol/*): move characters on `zmod n` to new file, add API, improve a proof ([#14178](https://github.com/leanprover-community/mathlib/pull/#14178))

This is another "administrative" PR with the goal to have a better file structure.
It moves the section `quad_char_mod_p` from `quadratic_char.lean` to a new file `zmod_char.lean`.
It also adds some API lemmas for `χ₈` and `χ₈'` (which will be useful when dealing with the value of quadratic characters at 2 and -2), and I have used the opportunity to shorten the proof of `χ₄_eq_neg_one_pow`.

### [2022-05-16T15:52:19+00:00](https://github.com/leanprover-community/mathlib/commit/93dca41adf162655cc2e073a7a85cde8bdea3228)
chore(geometry/manifold/algebra/left_invariant_derivation): golf some proofs ([#14172](https://github.com/leanprover-community/mathlib/pull/#14172))

The `simp only` had a bunch of lemmas that weren't used.

### [2022-05-16T13:42:53+00:00](https://github.com/leanprover-community/mathlib/commit/4586a97a143b4717179de36705e0b7b3281a8dcf)
refactor(data/pi/lex): Use `lex`, provide notation ([#14164](https://github.com/leanprover-community/mathlib/pull/#14164))

Delete `pilex ι β` in favor of `lex (Π i, β i)` which we provide `Πₗ i, β i` notation for.

### [2022-05-16T13:42:52+00:00](https://github.com/leanprover-community/mathlib/commit/009669cb6c6d30a3556a3ceb6fc8df1682376789)
feat(data/bool/basic): Kaminski's equation ([#14159](https://github.com/leanprover-community/mathlib/pull/#14159))

`bool.apply_apply_apply : ∀ (f : bool → bool) (x : bool), f (f (f x)) = f x`

### [2022-05-16T13:42:51+00:00](https://github.com/leanprover-community/mathlib/commit/909b6732ae457b0e8498d3d21a2bde26e16438ac)
split(data/set/semiring): Split off `data.set.pointwise` ([#14145](https://github.com/leanprover-community/mathlib/pull/#14145))

Move `set_semiring` to a new file `data.set.semiring`.

Crediting Floris for [#3240](https://github.com/leanprover-community/mathlib/pull/#3240)



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-05-16T13:42:49+00:00](https://github.com/leanprover-community/mathlib/commit/a9e74ab7de53e1eb2168521b973f2828b82c4720)
feat(order/filter/at_top_bot): use weaker TC assumptions, add lemmas ([#14105](https://github.com/leanprover-community/mathlib/pull/#14105))

* add `filter.eventually_gt_of_tendsto_at_top`,
  `filter.eventually_ne_at_bot`,
  `filter.eventually_lt_of_tendsto_at_bot`;

* generalize `filter.eventually_ne_of_tendsto_at_top` and
  `filter.eventually_ne_of_tendsto_at_bot` from nontrivial ordered
  (semi)rings to preorders with no maximal/minimal elements.



Co-authored-by: Bhavik Mehta <bm489@cam.ac.uk>
Co-authored-by: Bhavik Mehta <bhavikmehta8@gmail.com>

### [2022-05-16T11:34:45+00:00](https://github.com/leanprover-community/mathlib/commit/844a4f7bfc68950c17fe410a218bedb40637bf5b)
refactor(algebra/hom/group): Generalize `map_inv` to division monoids ([#14134](https://github.com/leanprover-community/mathlib/pull/#14134))

A minor change with unexpected instance synthesis breakage. A good deal of dot notation on `monoid_hom.map_inv` breaks, along with a few uses of `map_inv`. Expliciting the type fixes them all, but this is still quite concerning.

### [2022-05-16T11:34:44+00:00](https://github.com/leanprover-community/mathlib/commit/90659cbe25e59ec302e2fb92b00e9732160cc620)
fix(tactic/core): Make the `classical` tactic behave like `open_locale classical` ([#14122](https://github.com/leanprover-community/mathlib/pull/#14122))

This renames the existing `classical` tactic to `classical!`, and adds a new `classical` tactic that is equivalent to `open_locale classical`.

Comparing the effects of these:
```lean
import tactic.interactive
import tactic.localized

-- this uses the noncomputable instance
noncomputable def foo : decidable_eq ℕ :=
λ m n, begin classical!, apply_instance, end

def bar : decidable_eq ℕ :=
λ m n, begin classical, apply_instance, end

section
open_locale classical

def baz : decidable_eq ℕ :=
λ m n, by apply_instance

end

example : baz = bar := rfl
```

In a few places `classical` was actually just being used as a `resetI`. Only a very small number of uses of `classical` actually needed the more aggressive `classical!` (there are roughtly 500 uses in total); while a number of `congr`s can be eliminated with this change.

### [2022-05-16T09:19:06+00:00](https://github.com/leanprover-community/mathlib/commit/df64e5e5ec7698e4fe143619019947dcfa7c771c)
chore(set_theory/game/pgame): minor golf ([#14171](https://github.com/leanprover-community/mathlib/pull/#14171))

### [2022-05-16T09:19:05+00:00](https://github.com/leanprover-community/mathlib/commit/f4c67ee561ed61ea74db3f06f4a88833680530a2)
chore(group_theory/specific_groups/cyclic): golf `card_order_of_eq_totient_aux₁` and `card_order_of_eq_totient_aux₂` ([#14161](https://github.com/leanprover-community/mathlib/pull/#14161))

Re-writing the proofs of `card_order_of_eq_totient_aux₁` and `card_order_of_eq_totient_aux₂` to use the new `sum_totient` introduced in [#14007](https://github.com/leanprover-community/mathlib/pull/#14007), and golfing them.

### [2022-05-16T09:19:04+00:00](https://github.com/leanprover-community/mathlib/commit/a5975e734d4d0e35bd5123f3c4cb96e4cbd996fc)
feat(data/int/basic): add theorem `int.div_mod_unique` ([#14158](https://github.com/leanprover-community/mathlib/pull/#14158))

add the `int` version of `div_mod_unique`.

Co-authored-by: Kyle Miller <kmill31415@gmail.com>

### [2022-05-16T09:19:03+00:00](https://github.com/leanprover-community/mathlib/commit/f7a7c27234fef797a54eb3b5b08cde13bac66f57)
chore(ring_theory/ideal/local_ring): golf some proofs, add missing lemma ([#14157](https://github.com/leanprover-community/mathlib/pull/#14157))

### [2022-05-16T09:19:01+00:00](https://github.com/leanprover-community/mathlib/commit/55b31e05b98b815de0e80acb311a085127d7f953)
feat(data/zmod/quotient): `orbit (zpowers a) b` is a cycle of order `minimal_period ((•) a) b` ([#14124](https://github.com/leanprover-community/mathlib/pull/#14124))

This PR applies the orbit-stabilizer theorem to the action of a cyclic subgroup.

### [2022-05-16T09:19:00+00:00](https://github.com/leanprover-community/mathlib/commit/bc7a201ec1c21c71f312d18ef910ff5ed52f4f02)
feat(*): Pointwise monoids have distributive negations ([#14114](https://github.com/leanprover-community/mathlib/pull/#14114))

More instances of `has_distrib_neg`:
* `function.injective.has_distrib_neg`, `function.surjective.has_distrib_neg`
* `add_opposite`, `mul_opposite`
* `set`, `finset`, `filter`

### [2022-05-16T09:18:59+00:00](https://github.com/leanprover-community/mathlib/commit/f0db51d47092b5d3e300557c27facc138cd49d83)
feat(algebra/module): morphism classes for (semi)linear maps ([#13939](https://github.com/leanprover-community/mathlib/pull/#13939))

This PR introduces morphism classes corresponding to `mul_action_hom`, `distrib_mul_action_hom`, `mul_semiring_action_hom` and `linear_map`.

Most of the new generic results work smoothly, only `simp` seems to have trouble applying `map_smulₛₗ`. I expect this requires another fix in the elaborator along the lines of [lean[#659](https://github.com/leanprover-community/mathlib/pull/#659)](https://github.com/leanprover-community/lean/pull/659). For now we can just keep around the specialized `simp` lemmas `linear_map.map_smulₛₗ` and `linear_equiv.map_smulₛₗ`.

The other changes are either making `map_smul` protected where it conflicts, or helping the elaborator unfold some definitions that previously were helped by the specific `map_smul` lemma suggesting the type.

Thanks to @dupuisf for updating and making this branch compile!

Co-Authored-By: Frédéric Dupuis <dupuisf@iro.umontreal.ca>



Co-authored-by: Frédéric Dupuis <dupuisf@iro.umontreal.ca>
Co-authored-by: Anne Baanen <t.baanen@vu.nl>

### [2022-05-16T08:42:11+00:00](https://github.com/leanprover-community/mathlib/commit/0d762850ad26d4ad499ba0fa3cf9e3ca4ffc65d2)
doc(set_theory/surreal/basic): update docs ([#14170](https://github.com/leanprover-community/mathlib/pull/#14170))

We remove an incorrect remark about the order relations on `pgame`, and reference the branch on which the proof of surreal multiplication is being worked on.

### [2022-05-15T19:05:27+00:00](https://github.com/leanprover-community/mathlib/commit/4cf20164ef3c8028c29329e75738ea93ae97a54b)
feat(order/cover): Covering elements are unique ([#14156](https://github.com/leanprover-community/mathlib/pull/#14156))

In a linear order, there's at most one element covering `a` and at most one element being covered by `a`.

### [2022-05-15T16:12:50+00:00](https://github.com/leanprover-community/mathlib/commit/00e80a63509ad1abe815a4dbb82d45e166f69c61)
feat (group_theory/perm/cycles): Add missing `is_cycle` lemma ([#13219](https://github.com/leanprover-community/mathlib/pull/#13219))

Add `is_cycle.pow_eq_pow_iff`, which extends `is_cycle.pow_eq_one_iff`.

### [2022-05-15T14:04:27+00:00](https://github.com/leanprover-community/mathlib/commit/c1091050947ce7ae78ed9af018fd1853a53e5654)
chore(logic/equiv): golf equiv.subtype_equiv ([#14125](https://github.com/leanprover-community/mathlib/pull/#14125))

The naming is a bit all over the place, but I will fix this in a later PR.



Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-05-15T14:04:26+00:00](https://github.com/leanprover-community/mathlib/commit/843240b048bbb19942c581fd64caecbbe96337be)
feat(linear_algebra/matrix): invariant basis number for matrices ([#13845](https://github.com/leanprover-community/mathlib/pull/#13845))

This PR shows that invertible matrices over a ring with invariant basis number are square.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-15T14:04:26+00:00](https://github.com/leanprover-community/mathlib/commit/f9f64f37ca037f93a2272107d5e2d392a570f064)
move(data/prod/*): A `prod` folder ([#13771](https://github.com/leanprover-community/mathlib/pull/#13771))

Create folder `data.prod.` to hold `prod` files and related types. Precisely:
* `data.prod` → `data.prod.basic`
* `data.pprod` → `data.prod.pprod`
* `data.tprod` → `data.prod.tprod`
* `order.lexicographic` → `data.prod.lex`

### [2022-05-15T11:58:06+00:00](https://github.com/leanprover-community/mathlib/commit/a74298d8e95f8e203ebb906d35f89dd7ce464d74)
chore(order/lattice): reflow, golf ([#14151](https://github.com/leanprover-community/mathlib/pull/#14151))

### [2022-05-15T08:37:51+00:00](https://github.com/leanprover-community/mathlib/commit/5c954e124413b91598815f330c2a788aaf776ddc)
chore(order/conditionally_complete_lattice): General cleanup ([#13319](https://github.com/leanprover-community/mathlib/pull/#13319))



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-05-15T01:31:14+00:00](https://github.com/leanprover-community/mathlib/commit/b8d8a5e45e724ccbb543958c3e84f4c36e8c84b0)
refactor(set_theory/game/*): Fix bad notation `<` on (pre-)games ([#13963](https://github.com/leanprover-community/mathlib/pull/#13963))

Our current definition for `<` on pre-games is, in the wider mathematical literature, referred to as `⧏` (less or fuzzy to). Conversely, what's usually referred to by `<` coincides with the relation we get from `preorder pgame` (which the current API avoids using at all).

We rename `<` to `⧏`, and add the basic API for both the new `<` and `⧏` relations. This allows us to define new instances on `pgame` and `game` that we couldn't before. We also take the opportunity to add some basic API on the fuzzy relation `∥`.

See the [Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal.20numbers/near/281094687).

### [2022-05-14T23:44:35+00:00](https://github.com/leanprover-community/mathlib/commit/1f00800da19a9ceeb7d73d89e69b29ebefb85cc1)
feat(linear_algebra/projection) : projections are conjugate to prod_map id 0 ([#13802](https://github.com/leanprover-community/mathlib/pull/#13802))

### [2022-05-14T22:46:42+00:00](https://github.com/leanprover-community/mathlib/commit/e7386121c04a1e8629f38375df01ae9b2aa5bfb2)
feat(analysis/special_functions/exp_deriv): generalize some lemmas about `complex.exp`, remove `*.cexp_real` ([#13579](https://github.com/leanprover-community/mathlib/pull/#13579))

Now we can use `*.cexp` instead of some previous `*.cexp_real` lemmas.

- [x] depends on: [#13575](https://github.com/leanprover-community/mathlib/pull/#13575)

### [2022-05-14T17:09:34+00:00](https://github.com/leanprover-community/mathlib/commit/570db888f0afcac6075841d6aac1042edeb276e1)
feat(category_theory): missing comp_ite lemma ([#14143](https://github.com/leanprover-community/mathlib/pull/#14143))

We already have `comp_dite`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-14T17:09:33+00:00](https://github.com/leanprover-community/mathlib/commit/ad5edeb50e9a7343d061f65c6c5891a72a84e95e)
feat(algebra/big_operators): prod_ite_irrel ([#14142](https://github.com/leanprover-community/mathlib/pull/#14142))

A few missing lemams in `big_operators/basic.lean`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-14T17:09:32+00:00](https://github.com/leanprover-community/mathlib/commit/05997bda8cdd222139eb1328c76bdb3333386123)
chore(set_theory/ordinal/{basic, arithmetic}): Remove redundant `function` namespace ([#14133](https://github.com/leanprover-community/mathlib/pull/#14133))

### [2022-05-14T17:09:31+00:00](https://github.com/leanprover-community/mathlib/commit/9d022d777797f19718f008aba820a00814291787)
doc(data/real/sqrt): Fix typo in described theorem ([#14126](https://github.com/leanprover-community/mathlib/pull/#14126))

The previous statement was not true. e.g. sqrt 4 <= 3 does not imply 4 * 4 <= 3

### [2022-05-14T17:09:30+00:00](https://github.com/leanprover-community/mathlib/commit/4125b9adf2e268d1cf438092d690a78f7c664743)
chore(category_theory/*): move some elementwise lemmas earlier ([#13998](https://github.com/leanprover-community/mathlib/pull/#13998))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-14T15:50:40+00:00](https://github.com/leanprover-community/mathlib/commit/c992b04dd295c0033bbdf2eff4bb4a51c800d5ca)
feat(set_theory/cardinal/cofinality): Cofinality of `nfp` and `deriv` ([#12556](https://github.com/leanprover-community/mathlib/pull/#12556))

### [2022-05-14T12:48:56+00:00](https://github.com/leanprover-community/mathlib/commit/6d4c2027519eece0561d9e311b1acf3f4a81b782)
feat(analysis/specific_limits/floor_pow): auxiliary results on series involving floors of powers ([#13850](https://github.com/leanprover-community/mathlib/pull/#13850))

### [2022-05-14T10:51:28+00:00](https://github.com/leanprover-community/mathlib/commit/ba9d551afe114fd67efa7a16cdf678536f5c165c)
chore(algebra/invertible): minor golf ([#14141](https://github.com/leanprover-community/mathlib/pull/#14141))

### [2022-05-14T08:16:18+00:00](https://github.com/leanprover-community/mathlib/commit/79bc06bf0b64a7459adf449b6963d7644cfd4088)
feat(linear_algebra/matrix/to_lin): equivalence via right multiplication ([#13870](https://github.com/leanprover-community/mathlib/pull/#13870))

A very partial generalization of `linear_algebra/matrix/to_lin` to non-commutative rings.

This is far from a complete refactor of the file; it just adds enough for what I need in representation theory immediately.

I've left an extensive note explaining what should be done in a later refactor, but I don't want to have to do this all at once.

See discussion on [zulip](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/matrices).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-14T07:28:44+00:00](https://github.com/leanprover-community/mathlib/commit/21a71de142a65658c2b2aa4aad74c9f0cf6f62b9)
chore(*): use notation instead of `set.*` ([#14139](https://github.com/leanprover-community/mathlib/pull/#14139))

### [2022-05-14T05:39:32+00:00](https://github.com/leanprover-community/mathlib/commit/382449392766ffa047103a67bd1772acb8d5d5ca)
refactor(group_theory/free_abelian_group): Make proofs more robust ([#14089](https://github.com/leanprover-community/mathlib/pull/#14089))

Reduce the API breakage by proving `distrib (free_abelian_group α)` and `has_distrib_neg (free_abelian_group α)` earlier. Protect lemmas to avoid shadowing the root ones.

Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>

### [2022-05-14T05:02:33+00:00](https://github.com/leanprover-community/mathlib/commit/9f5b32803a6c48932ff32db585f6d68004e14309)
feat(.github/workflows): restore merge_conflicts action, running on cron ([#14137](https://github.com/leanprover-community/mathlib/pull/#14137))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-13T16:35:43+00:00](https://github.com/leanprover-community/mathlib/commit/b7e20ca09ab5793901bf2170f3d879524bf80e30)
feat(data/polynomial/degree/definitions): two more `nat_degree_le` lemmas ([#14098](https://github.com/leanprover-community/mathlib/pull/#14098))

This PR is similar to [#14095](https://github.com/leanprover-community/mathlib/pull/#14095).  It proves the `le` version of `nat_degree_X_pow` and `nat_degree_monomial`.

These lemmas are analogous to the existing `nat_degree_X_le` and `nat_degree_C_mul_X_pow_le`.

### [2022-05-13T15:42:07+00:00](https://github.com/leanprover-community/mathlib/commit/6b7fa7abe3fb07f98b31c278eeb9f86f685d2847)
feat(data/nat/totient): add `totient_div_of_dvd` and golf `sum_totient` ([#14007](https://github.com/leanprover-community/mathlib/pull/#14007))

Add lemma `totient_div_of_dvd`: for `d ∣ n`, the totient of `n/d` equals the number of values `k < n` such that `gcd n k = d`.

Use this to golf `sum_totient`, now stated in terms of `divisors`.  This proof follows that of Theorem 2.2 in Apostol (1976) Introduction to Analytic Number Theory.

Adapt the proof of `nth_roots_one_eq_bUnion_primitive_roots'` to use the new `sum_totient`.

Re-prove the original statement of `sum_totient` for compatibility with uses in `group_theory/specific_groups/cyclic` — may delete this if those uses can be adapted to the new statement.

### [2022-05-13T13:23:57+00:00](https://github.com/leanprover-community/mathlib/commit/55cd10479fd11199dc96f8873090790e149cf4ed)
feat(archive/imo/imo1975_q1): Add the formalization of IMO 1975 Q1 ([#13047](https://github.com/leanprover-community/mathlib/pull/#13047))




Co-authored-by: Mantas Bakšys <39908973+MantasBaksys@users.noreply.github.com>

### [2022-05-13T09:53:49+00:00](https://github.com/leanprover-community/mathlib/commit/caa1352a5c963ac52492054784c9c734a4b71b4a)
feat(data/zmod/quotient): Multiplicative version of `zmultiples_quotient_stabilizer_equiv` ([#13948](https://github.com/leanprover-community/mathlib/pull/#13948))

This PR adds a multiplicative version of `zmultiples_quotient_stabilizer_equiv`.

### [2022-05-13T09:53:48+00:00](https://github.com/leanprover-community/mathlib/commit/03da681862b0775afb8bc082b8b53f2a55642e92)
feat(representation_theory): fdRep k G, the category of finite dim representations of G ([#13740](https://github.com/leanprover-community/mathlib/pull/#13740))

We verify that this inherits the rigid monoidal structure from `FinVect G` when `G` is a group.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-13T07:38:22+00:00](https://github.com/leanprover-community/mathlib/commit/6a48b384e32a6c8e047f028967fcaf4f57f006a2)
feat(topology/uniform_space): lemmas about `s ○ s ○ ... ○ s ⊆ t` ([#14051](https://github.com/leanprover-community/mathlib/pull/#14051))

### [2022-05-13T05:13:49+00:00](https://github.com/leanprover-community/mathlib/commit/3185c251f4be8322d58af107a6e5f92ec9b1a06e)
feat(data/list/{count,perm},data/multiset/basic): countp and count lemmas ([#14108](https://github.com/leanprover-community/mathlib/pull/#14108))

Co-authored-by: Arjun Pitchanathan <arjunpitchanathan@gmail.com>

### [2022-05-13T05:13:48+00:00](https://github.com/leanprover-community/mathlib/commit/23a220589e8400fe6786633765e25243306b1e39)
chore(data/real/ennreal): tidy some proofs ([#14101](https://github.com/leanprover-community/mathlib/pull/#14101))

### [2022-05-13T05:13:47+00:00](https://github.com/leanprover-community/mathlib/commit/7b7af48b50cbaa16cf5b80458a5a5563efac0e40)
feat(set_theory/ordinal/basic): Order isomorphism between `o.out.α` and `set.Iio o` ([#14074](https://github.com/leanprover-community/mathlib/pull/#14074))

This strengthens the previously existing equivalence.

### [2022-05-13T05:13:46+00:00](https://github.com/leanprover-community/mathlib/commit/26f411202dceead560e1e14a03eab2f03068d6a4)
feat(topology/uniform_space/separation): add `filter.has_basis.mem_separation_rel` ([#14050](https://github.com/leanprover-community/mathlib/pull/#14050))

* add `filter.has_basis.mem_separation_rel`;
* add `filter.has_basis.forall_mem_mem`, use it in
  `filter.has_basis.sInter_sets`;
* replace two remaining `lift' powerset` with `small_sets`.

### [2022-05-13T05:13:45+00:00](https://github.com/leanprover-community/mathlib/commit/a2e671bb2158577065e9480be942b1e128c961d4)
feat(number_theory/von_mangoldt): simple bounds on von mangoldt function ([#14033](https://github.com/leanprover-community/mathlib/pull/#14033))

From the unit fractions project.
More interesting bounds such as the chebyshev bounds coming soon, but for now here are some easy upper and lower bounds.



Co-authored-by: Bhavik Mehta <bm489@cam.ac.uk>

### [2022-05-13T05:13:44+00:00](https://github.com/leanprover-community/mathlib/commit/644cae5ea8e5d0a950837b9873a5bdcaae3f64f1)
feat(set_theory/cardinal/cofinality): Move fundamental sequence results to namespace ([#14020](https://github.com/leanprover-community/mathlib/pull/#14020))

We put most results about fundamental sequences in the `is_fundamental_sequence` namespace. We also take the opportunity to add a simple missing theorem, `ord_cof`.

### [2022-05-13T02:53:51+00:00](https://github.com/leanprover-community/mathlib/commit/c53285a85e0566c25cf915e1130eeaeac092603a)
feat(order/filter/lift): drop an unneeded assumption ([#14117](https://github.com/leanprover-community/mathlib/pull/#14117))

Drop `monotone _` assumptions in `filter.comap_lift_eq` and `filter.comap_lift'_eq`.

### [2022-05-13T02:53:50+00:00](https://github.com/leanprover-community/mathlib/commit/85124aff9435f89e76d0476ec76a710698b34a42)
chore(algebra/order/field): fill in TODO for inv anti lemmas ([#14112](https://github.com/leanprover-community/mathlib/pull/#14112))




Co-authored-by: Bhavik Mehta <bm489@cam.ac.uk>

### [2022-05-13T02:53:49+00:00](https://github.com/leanprover-community/mathlib/commit/462b95095b8f8ac91158cf9b10d569a000ec87e6)
chore(algebra/order/field): fill in missing lemma ([#14111](https://github.com/leanprover-community/mathlib/pull/#14111))

We had `inv_le_inv` and its backward direction, this fills in the backward direction for `inv_lt_inv`.



Co-authored-by: Bhavik Mehta <bm489@cam.ac.uk>

### [2022-05-13T02:53:48+00:00](https://github.com/leanprover-community/mathlib/commit/f61786291b61c9c64dfe9ea7049e6a009674e1bd)
feat(data/polynomial/degree/lemmas): two lemmas about `nat_degree`s of sums ([#14100](https://github.com/leanprover-community/mathlib/pull/#14100))

Suppose that `f, g` are polynomials.  If both `nat_degree (f + g)` and `nat_degree` of one of them are bounded by `n`, then `nat_degree` of the other is also bounded by `n`.

### [2022-05-13T02:53:47+00:00](https://github.com/leanprover-community/mathlib/commit/de418aad095345c2720f5e47ddc007f7eab525d8)
feat(topology/basic): add lemmas like `closure s \ interior s = frontier s` ([#14086](https://github.com/leanprover-community/mathlib/pull/#14086))

### [2022-05-13T02:53:46+00:00](https://github.com/leanprover-community/mathlib/commit/15f6b52779208a1e588fd9a07f67757e50c4c26f)
feat(data/set/prod): add `prod_self_{s,}subset_prod_self` ([#14084](https://github.com/leanprover-community/mathlib/pull/#14084))

### [2022-05-13T02:53:45+00:00](https://github.com/leanprover-community/mathlib/commit/1474996417b839ddc680b321428211a3b0e14eab)
feat(topology/basic): add `nhds_basis_closeds` ([#14083](https://github.com/leanprover-community/mathlib/pull/#14083))

* add `nhds_basis_closeds`;
* golf 2 proofs;
* move `topological_space.seq_tendsto_iff` to `topology.basic`, rename
  it to `tendsto_at_top_nhds`.

### [2022-05-13T02:53:44+00:00](https://github.com/leanprover-community/mathlib/commit/bb97a64b5510f8d21a60389262485417d959e714)
feat(topology/order): add `nhds_true` and `nhds_false` ([#14082](https://github.com/leanprover-community/mathlib/pull/#14082))

### [2022-05-13T02:53:43+00:00](https://github.com/leanprover-community/mathlib/commit/bd5914f6e2d61bd8d84f4bce205d2a00e273baaa)
perf(field_theory/primitive_element): declare auxiliary function `noncomputable!` ([#14071](https://github.com/leanprover-community/mathlib/pull/#14071))

The declaration `roots_of_min_poly_pi_type` is computable and gets compiled by Lean. Unfortunately, compilation takes about 2-3s on my machine and times out under [#11759](https://github.com/leanprover-community/mathlib/pull/#11759) (with timeouts disabled, it takes about 11s on that branch). Since the parameters are all elements of noncomputable types and its only use is a noncomputable `fintype` instance, nobody will care if we explicitly make it computable, and it saves a lot of compilation time.

See also this Zulip thread on `noncomputable!` fixing mysterious timeouts: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278494746

### [2022-05-13T02:53:42+00:00](https://github.com/leanprover-community/mathlib/commit/c4c279e605cc29bb6b40266dc141c2647fbe8e8a)
feat(data/real/nnreal): add `nnreal.le_infi_add_infi` and other lemmas ([#14048](https://github.com/leanprover-community/mathlib/pull/#14048))

* add `nnreal.coe_two`, `nnreal.le_infi_add_infi`, `nnreal.half_le_self`;
* generalize `le_cinfi_mul_cinfi`, `csupr_mul_csupr_le`, and their
  additive versions to allow two different index types.

### [2022-05-13T01:22:31+00:00](https://github.com/leanprover-community/mathlib/commit/a945b1878c48a9cf98c358de9bdc5f241ef93c32)
feat(linear_algebra/tensor_product): tensor_product.map is bilinear in its two arguments ([#13608](https://github.com/leanprover-community/mathlib/pull/#13608))




Co-authored-by: antoinelab01 <66086247+antoinelab01@users.noreply.github.com>

### [2022-05-12T20:54:24+00:00](https://github.com/leanprover-community/mathlib/commit/17102ae874da293d11ad561ebe2de9438cccd141)
feat(algebra/big_operators/basic): add `sum_erase_lt_of_pos` ([#14066](https://github.com/leanprover-community/mathlib/pull/#14066))

`sum_erase_lt_of_pos (hd : d ∈ s) (hdf : 0 < f d) : ∑ (m : ℕ) in s.erase d, f m < ∑ (m : ℕ) in s, f m`

### [2022-05-12T20:54:23+00:00](https://github.com/leanprover-community/mathlib/commit/86d58ae71f0d2aac5abc001fcb45491387ce8dfa)
feat(data/nat/factorization): three lemmas on the components of factorizations ([#14031](https://github.com/leanprover-community/mathlib/pull/#14031))

`pow_factorization_le : p ^ (n.factorization) p ≤ n`

`div_pow_factorization_ne_zero : n / p ^ (n.factorization) p ≠ 0`

`not_dvd_div_pow_factorization : ¬p ∣ n / p ^ (n.factorization) p`

Prompted by [this question](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/prime.20factorisation) in Zulip

### [2022-05-12T20:54:22+00:00](https://github.com/leanprover-community/mathlib/commit/3c1ced3ba8c73d6abb60dc350d0b5075e1ad0999)
feat(data/nat/basic): four lemmas on nat and int division ([#13991](https://github.com/leanprover-community/mathlib/pull/#13991))

`lt_div_iff_mul_lt (hnd : d ∣ n) : a < n / d ↔ d * a < n`

`div_left_inj (hda : d ∣ a) (hdb : d ∣ b) : a / d = b / d ↔ a = b` (for `ℕ` and `ℤ`)

`div_lt_div_of_lt_of_dvd (hdb : d ∣ b) (h : a < b) : a / d < b / d`

### [2022-05-12T19:34:26+00:00](https://github.com/leanprover-community/mathlib/commit/4b3988ad564f35ed80aba7cdb22580a79c304daa)
feat(data/sym/sym2): simp lemma for quotient.eq ([#14113](https://github.com/leanprover-community/mathlib/pull/#14113))

### [2022-05-12T19:34:25+00:00](https://github.com/leanprover-community/mathlib/commit/3d0309830848c7e80b21119235e9b8017f251336)
doc(data/matrix/basic): Clarify docstring ([#14109](https://github.com/leanprover-community/mathlib/pull/#14109))

### [2022-05-12T18:30:47+00:00](https://github.com/leanprover-community/mathlib/commit/27e7f7ac393bdf8af74242f35eb67cd81836e4d3)
feat(number_theory/divisors): add `filter_dvd_eq_proper_divisors` ([#14049](https://github.com/leanprover-community/mathlib/pull/#14049))

Adds `filter_dvd_eq_proper_divisors` and golfs `filter_dvd_eq_divisors` and a few other lemmas

### [2022-05-12T17:54:58+00:00](https://github.com/leanprover-community/mathlib/commit/3b185739887154f8f8dfb52d14f5c798d3b23549)
doc(tactic/rewrite_search/explain): Fix documentation-breaking docstring ([#14107](https://github.com/leanprover-community/mathlib/pull/#14107))

This currently renders as

![image](https://user-images.githubusercontent.com/425260/168125021-06ef8851-55a6-4629-b437-7c38a1df7b05.png)

### [2022-05-12T16:23:39+00:00](https://github.com/leanprover-community/mathlib/commit/0e834dfe6c83c8035fa12f12971b3df50435ef66)
chore(data/nat/multiplicity): simplify proof ([#14103](https://github.com/leanprover-community/mathlib/pull/#14103))

### [2022-05-12T16:23:38+00:00](https://github.com/leanprover-community/mathlib/commit/0509c9c613c92db97908758d880f025f9b267b4d)
fix(analysis/special_functions/pow): fix norm_num extension ([#14099](https://github.com/leanprover-community/mathlib/pull/#14099))

As [reported on Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/kernel.20slow.20to.20accept.20refl.20proof/near/282043840).

### [2022-05-12T16:23:37+00:00](https://github.com/leanprover-community/mathlib/commit/c8edd608704fc9f37a8b6b6abda92250bda12447)
chore(data/polynomial/ring_division): golf a few proofs ([#14097](https://github.com/leanprover-community/mathlib/pull/#14097))

* add `polynomial.finite_set_of_is_root`;
* use it to golf a few proofs.

### [2022-05-12T16:23:36+00:00](https://github.com/leanprover-community/mathlib/commit/6cf6e8cbc5b0c4827ed4fe387fde381a5254a0dd)
chore(order/filter/basic): golf a few proofs ([#14078](https://github.com/leanprover-community/mathlib/pull/#14078))

* golf the proof of `mem_generate_iff` by using `sInter_mem`;
* use `set.inj_on` in the statement of `filter.eq_of_map_eq_map_inj'`;
* golf the proofs of `filter.map_inj` and `filter.comap_ne_bot_iff`.

### [2022-05-12T14:24:07+00:00](https://github.com/leanprover-community/mathlib/commit/9b41e4e07ef180793038f6a50ad5c812a94911ee)
feat(data/polynomial/laurent): add truncation from Laurent polynomials to polynomials ([#14085](https://github.com/leanprover-community/mathlib/pull/#14085))

We introduce the truncation of a Laurent polynomial `f`.  It returns a polynomial whose support is exactly the non-negative support of `f`.  We use it to prove injectivity of the inclusion of polynomials in Laurent polynomials.

I also plan to use the results in this PR to prove that any Laurent polynomials is obtain from a polynomial by dividing by a power of the variable.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-05-12T14:24:06+00:00](https://github.com/leanprover-community/mathlib/commit/fa4c0368f0dd92b20b12bd32150a6789756b39db)
chore(order/complete_lattice,data/set/lattice): move `Sup_sUnion` ([#14077](https://github.com/leanprover-community/mathlib/pull/#14077))

* move `Sup_sUnion` and `Inf_sUnion` to `data.set.lattice`;
* golf a few proofs.

### [2022-05-12T12:10:19+00:00](https://github.com/leanprover-community/mathlib/commit/bada932ca30c61e21cff72aeb358d1729c7c1600)
feat(data/multiset/basic): `erase_singleton` ([#14094](https://github.com/leanprover-community/mathlib/pull/#14094))

Add `multiset.erase_singleton` which is analogous to the existing [finset.erase_singleton](https://leanprover-community.github.io/mathlib_docs/data/finset/basic.html#finset.erase_singleton).

### [2022-05-12T12:10:18+00:00](https://github.com/leanprover-community/mathlib/commit/55671bee396682515fe4c99f6cf127efa0f71ba8)
chore(set_theory/zfc): use `derive` for some instances ([#14079](https://github.com/leanprover-community/mathlib/pull/#14079))

Also use `has_compl` instead of `has_neg`.

### [2022-05-12T12:10:17+00:00](https://github.com/leanprover-community/mathlib/commit/d9e623c26511e1c6abf1f7f02f30500d7f4674e5)
feat(algebra/*): Division monoid instances for `with_zero` and `mul_opposite` ([#14073](https://github.com/leanprover-community/mathlib/pull/#14073))

A few missing instances of `division_monoid` and friends.

### [2022-05-12T12:10:16+00:00](https://github.com/leanprover-community/mathlib/commit/c57cfc6d6bb88407387e89bc444c999b0dab9e23)
feat({data/{finset,set},order/filter}/pointwise): Pointwise monoids are division monoids ([#13900](https://github.com/leanprover-community/mathlib/pull/#13900))

`α` is a `division_monoid` implies that `set α`, `finset α`, `filter α` are too. The core result needed for this is that `s` is a unit in `set α`/`finset α`/`filter α` if and only if it is equal to `{u}`/`{u}`/`pure u` for some unit `u : α`.

### [2022-05-12T10:27:03+00:00](https://github.com/leanprover-community/mathlib/commit/c2e87de523d3a1b2fdf630f52a9793184545ebeb)
feat(data/polynomial/degree/definitions): if `r ≠ 0`, then `(monomial i r).nat_degree = i` ([#14095](https://github.com/leanprover-community/mathlib/pull/#14095))

Add a lemma analogous to `nat_degree_C_mul_X_pow` and `nat_degree_C_mul_X`.

### [2022-05-12T10:27:02+00:00](https://github.com/leanprover-community/mathlib/commit/5927330596e4461067e766b577f0413baca057ee)
refactor(combinatorics/simple_graph/basic): relax `edge_finset` typeclasses ([#14091](https://github.com/leanprover-community/mathlib/pull/#14091))

### [2022-05-12T10:27:01+00:00](https://github.com/leanprover-community/mathlib/commit/41afd8c29757abede41841c6c96e93983f76a065)
feat(analysis/special_functions/pow): asymptotics for real powers and log ([#14088](https://github.com/leanprover-community/mathlib/pull/#14088))

From the unit fractions project.



Co-authored-by: Bhavik Mehta <bm489@cam.ac.uk>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-05-12T08:45:52+00:00](https://github.com/leanprover-community/mathlib/commit/1c8ce7e08807e83bc95fcebe7b6e6296afcf46fa)
feat(data/complex): real exponential bounds ([#14087](https://github.com/leanprover-community/mathlib/pull/#14087))

Bounds on the real exponential function near 1, derived from the complex versions.



Co-authored-by: Bhavik Mehta <bm489@cam.ac.uk>

### [2022-05-12T08:45:51+00:00](https://github.com/leanprover-community/mathlib/commit/b6d10283f5d6085a7d18f7d77b277ff1b46e1cfc)
chore(topology/sequences): golf a few proofs ([#14081](https://github.com/leanprover-community/mathlib/pull/#14081))

### [2022-05-12T08:45:50+00:00](https://github.com/leanprover-community/mathlib/commit/7c4c90f422a4a4477e4d8bc4dc9f1e634e6b2349)
feat(category_theory/noetherian): nonzero artinian objects have simple subobjects ([#13972](https://github.com/leanprover-community/mathlib/pull/#13972))

# Artinian and noetherian categories

An artinian category is a category in which objects do not
have infinite decreasing sequences of subobjects.

A noetherian category is a category in which objects do not
have infinite increasing sequences of subobjects.

We show that any nonzero artinian object has a simple subobject.

## Future work
The Jordan-Hölder theorem, following https://stacks.math.columbia.edu/tag/0FCK.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-12T08:45:49+00:00](https://github.com/leanprover-community/mathlib/commit/fd98cf15a54ed5e66623de92010a1bbec017dd2e)
chore(ring_theory/unique_factorization_domain): golf ([#13820](https://github.com/leanprover-community/mathlib/pull/#13820))

+ Shorten the proof of `exists_irreducible_factor` using `well_founded.has_min` instead of `well_founded.fix`.

+ Remove use of `simp` in `induction_on_irreducible`; now a pure term-mode proof except for the classical instance.

+ Change the proof of `not_unit_iff_exists_factors_eq` (just added in [[#13682](https://github.com/leanprover-community/mathlib/pull/#13682)](https://github.com/leanprover-community/mathlib/pull/13682)) to use induction. The new proof doesn't require the `multiset.prod_erase` introduced in [[#13682](https://github.com/leanprover-community/mathlib/pull/#13682)](https://github.com/leanprover-community/mathlib/pull/13682), but is about as complex as the old one, so I might change it back if reviewers prefer.

### [2022-05-12T08:45:48+00:00](https://github.com/leanprover-community/mathlib/commit/0c26348e2a26d8b22f0aa4402ffbcf1a33071af7)
feat(data/finsupp/basic): `finsupp.comap_domain` is an `add_monoid_hom` ([#13783](https://github.com/leanprover-community/mathlib/pull/#13783))

This is the version of `map_domain.add_monoid_hom` for `comap_domain`.

I plan to use it for the inclusion of polynomials in Laurent polynomials ([#13415](https://github.com/leanprover-community/mathlib/pull/#13415)).

I also fixed a typo in a doc-string.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-05-12T07:44:21+00:00](https://github.com/leanprover-community/mathlib/commit/a966557173583e4e6fad235958396de7792e5d9c)
chore(analysis/special_functions/pow): golf a proof ([#14093](https://github.com/leanprover-community/mathlib/pull/#14093))

* move `real.abs_rpow_of_nonneg` up;
* use it to golf a line in `real.abs_rpow_le_abs_rpow`.

### [2022-05-12T00:05:58+00:00](https://github.com/leanprover-community/mathlib/commit/4977fd9da637b6e0a805c1cf460c3a6b8df3f556)
feat(ring_theory/finiteness): tensor product of two finite modules is finite ([#13733](https://github.com/leanprover-community/mathlib/pull/#13733))

Removes [finite_dimensional_tensor_product](https://leanprover-community.github.io/mathlib_docs/linear_algebra/tensor_product_basis.html#finite_dimensional_tensor_product) since it's now proved by `infer_instance`.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-05-11T20:41:58+00:00](https://github.com/leanprover-community/mathlib/commit/d4884c0d5ddd8b2c207710dd47c3cd23b5e401d8)
feat(analysis/asymptotics): use weaker TC assumptions ([#14080](https://github.com/leanprover-community/mathlib/pull/#14080))

Merge `is_o.trans` with `is_o.trans'`: both lemmas previously took one `semi_normed_group` argument on the primed type (corresponding to the primed function), but now only assume `has_norm` on all three types.

### [2022-05-11T18:53:31+00:00](https://github.com/leanprover-community/mathlib/commit/0302cfdd76d24ee5121340bba1fb888d80356cd7)
chore(measure_theory/function/conditional_expectation): change the definition of condexp and its notation ([#14010](https://github.com/leanprover-community/mathlib/pull/#14010))

Before this PR, the conditional expectation `condexp` was defined using an argument `(hm : m ≤ m0)`.
This changes the definition to take only `m`, and assigns the default value 0 if we don't have `m ≤ m0`.

The notation for `condexp m μ f` is simplified to `μ[f|m]`.

The change makes the proofs of the condexp API longer, but no change is needed to lemmas outside of that file. See the file `martingale.lean`: the notation is now simpler, but otherwise little else changes besides removing the now unused argument `[sigma_finite_filtration μ ℱ]` from many lemmas.

Also add an instance `is_finite_measure.sigma_finite_filtration`: we had a lemma with both `is_finite_measure` and `sigma_finite_filtration` arguments, but the first one implies the other.

### [2022-05-11T15:02:00+00:00](https://github.com/leanprover-community/mathlib/commit/7a3ae977d8a8bc8c53270971770f35f0a46e082c)
feat(data/polynomial/laurent): add inductions for Laurent polynomials ([#14005](https://github.com/leanprover-community/mathlib/pull/#14005))

This PR introduces two induction principles for Laurent polynomials and uses them to show that `T` commutes with everything.

### [2022-05-11T14:23:17+00:00](https://github.com/leanprover-community/mathlib/commit/483affadb9c7c7aa2dbedf3e20a6db63dc8afc33)
feat(measure_theory/integral/interval_integral): add lemma `interval_integrable.sum` ([#14069](https://github.com/leanprover-community/mathlib/pull/#14069))

Formalized as part of the Sphere Eversion project.

### [2022-05-11T08:00:03+00:00](https://github.com/leanprover-community/mathlib/commit/83bc3b9ce9b13910b57bda6b56222495ebd31c2f)
chore(algebra/module/submodule*): replace underscores in file names with a folder ([#14063](https://github.com/leanprover-community/mathlib/pull/#14063))

### [2022-05-11T08:00:02+00:00](https://github.com/leanprover-community/mathlib/commit/ba60237bbba190d491bc3a263ff58db4965e67dd)
chore(field_theory/adjoin): clarify and speed up proof ([#14041](https://github.com/leanprover-community/mathlib/pull/#14041))

This PR turns a couple of refls into `simp` lemmas. Apart from being clearer now, this also speeds up the proof significantly in [#11759](https://github.com/leanprover-community/mathlib/pull/#11759) (where the elaborator chooses the wrong subexpression to unfold first).

Elaboration time changed stayed about the same at about 300-350ms on master, and went from timeout to about 300ms on [#11759](https://github.com/leanprover-community/mathlib/pull/#11759).

### [2022-05-11T08:00:01+00:00](https://github.com/leanprover-community/mathlib/commit/b75113ac4a12627c4ac23dea12bd90207646c83e)
chore(set_theory/game/ordinal): Remove redundant namespaces ([#14039](https://github.com/leanprover-community/mathlib/pull/#14039))

### [2022-05-11T06:01:29+00:00](https://github.com/leanprover-community/mathlib/commit/4231b68149b19d0941d5088ae2e50c4bcb6c7d18)
feat(data/list): add a few lemmas ([#14047](https://github.com/leanprover-community/mathlib/pull/#14047))

* add `list.reverse_surjective` and `list.reverse_bijective`;
* add `list.chain_iff_forall₂`,
  `list.chain_append_singleton_iff_forall₂`, and `list.all₂_zip_with`.

### [2022-05-10T19:04:38+00:00](https://github.com/leanprover-community/mathlib/commit/df9683ca3c237d11920a3de8dfab2cc9dc2f8214)
feat(topology/algebra/infinite_sum): lemmas about `mul_opposite` ([#13674](https://github.com/leanprover-community/mathlib/pull/#13674))

### [2022-05-10T17:00:25+00:00](https://github.com/leanprover-community/mathlib/commit/3ea573ef4c7af4c032386aab61c35a8a49f64d6a)
refactor(algebra/{group,group_with_zero/basic): Delete lemmas generalized to division monoids ([#14042](https://github.com/leanprover-community/mathlib/pull/#14042))

Delete the `group` and `group_with_zero` lemmas which have been made one-liners in [#14000](https://github.com/leanprover-community/mathlib/pull/#14000).

Lemmas are renamed because
* one of the `group` or `group_with_zero` name has to go
* the new API should have a consistent naming convention

Lemma renames

### [2022-05-10T11:03:33+00:00](https://github.com/leanprover-community/mathlib/commit/e68961170429147df501d4f6cc767d944dd7b434)
chore({data/{finset,set},order/filter}/pointwise): Reorganize files ([#14021](https://github.com/leanprover-community/mathlib/pull/#14021))

Order the three files more similarly. The idea is to order things as:
* Arithmetic notation typeclasses, and lemmas that don't depend on algebraic structure for them:
  * `0` and `1`
  * `-` and `⁻¹`
  * `+` and `*`
  * `-` and `/`
* monoid-like instances, interleaved with the corresponding lemmas (some of them are used for the instances themselves, and more will be in the future)
* `•`
* `-ᵥ`
* scalar instances

### [2022-05-10T11:03:32+00:00](https://github.com/leanprover-community/mathlib/commit/45d2b5234e95becf55474e0db458c6d4f879a43d)
chore(analysis/normed_space/basic): reorder the `restrict_scalars` definitions ([#13995](https://github.com/leanprover-community/mathlib/pull/#13995))

This also update the docstrings to make `normed_space.restrict_scalars` even scarier.

The instances here themselves haven't actually changed.

### [2022-05-10T11:03:31+00:00](https://github.com/leanprover-community/mathlib/commit/91489acb70383d5861b021d3c3f7c40e451291c4)
feat(algebra/module/submodule_bilinear): add `submodule.map₂`, generalizing `submodule.has_mul` ([#13709](https://github.com/leanprover-community/mathlib/pull/#13709))

The motivation here is to be able to talk about combinations of submodules under other bilinear maps, such as the tensor product. This unifies the definitions of and lemmas about `submodule.has_mul` and `submodule.has_scalar'`.

The lemmas about `submodule.map₂` are copied verbatim from those for `mul`, and then adjusted slightly replacing `mul_zero` with `linear_map.map_zero` etc. I've then replaced the lemmas about `smul` with the `map₂` proofs where possible.

The lemmas about finiteness weren't possible to copy this way, as the proofs about `finset` multiplication are not generalized in a similar way. Someone else can copy these in a future PR.

This also adds `set.image2_eq_Union` to match `set.image_eq_Union`, and removes `submodule.union_eq_smul_set` which is neither about submodules nor about `union`, and instead is really just a copy of `set.image_eq_Union`

### [2022-05-10T08:56:43+00:00](https://github.com/leanprover-community/mathlib/commit/34f29db322129222b81bac44c5179c6f3de4d3a8)
feat(topology/algebra/group): Division is an open map ([#14028](https://github.com/leanprover-community/mathlib/pull/#14028))

A few missing lemmas about division in topological groups.

### [2022-05-10T08:56:42+00:00](https://github.com/leanprover-community/mathlib/commit/c8926223912f97465d04321ad10d93dcf3bbcb71)
move(order/synonym): Group `order_dual` and `lex` ([#13769](https://github.com/leanprover-community/mathlib/pull/#13769))

Move `to_dual`, `of_dual`, `to_lex`, `of_lex` to a new file `order.synonym`. This does not change the import tree, because `order.lexicographic` had slightly higher imports than `order.order_dual`, but those weren't used for `lex` itself.

### [2022-05-10T08:02:09+00:00](https://github.com/leanprover-community/mathlib/commit/37c691f7ec8315a650cdb1c89bcccadab1a921e9)
feat(analysis/convex/*): Convexity and subtraction ([#14015](https://github.com/leanprover-community/mathlib/pull/#14015))

Now that we have a fair bit more pointwise operations on `set`, a few results can be (re)written using them. For example, existing lemmas about `add` and `neg` can be combined to give lemmas about `sub`.

### [2022-05-10T05:20:28+00:00](https://github.com/leanprover-community/mathlib/commit/5650366444b8a490c83e144f09f2c1d913beac45)
chore(.github/workflows): disable merge conflicts bot for now ([#14057](https://github.com/leanprover-community/mathlib/pull/#14057))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-10T05:20:27+00:00](https://github.com/leanprover-community/mathlib/commit/153b20f557c6e5aa91d9c6745ced7c55224a5929)
chore(scripts): update nolints.txt ([#14056](https://github.com/leanprover-community/mathlib/pull/#14056))

I am happy to remove some nolints for you!

### [2022-05-10T05:20:26+00:00](https://github.com/leanprover-community/mathlib/commit/b17070db62dce8799fc798fc97e640cc38b8272a)
fix(data/real/ennreal): style and golfing ([#14055](https://github.com/leanprover-community/mathlib/pull/#14055))

### [2022-05-10T05:20:26+00:00](https://github.com/leanprover-community/mathlib/commit/87069e9134f1da4fef5cee07f8e8d676840e0ec0)
chore(ring_theory/hahn_series): golf a proof ([#14054](https://github.com/leanprover-community/mathlib/pull/#14054))

### [2022-05-10T03:35:32+00:00](https://github.com/leanprover-community/mathlib/commit/c5e0299a8adf8f78b80a3cc2eb9814c0a8ba9678)
feat(group_theory/subsemigroup/{center, centralizer}): define center and centralizer as subsemigroups ([#13627](https://github.com/leanprover-community/mathlib/pull/#13627))

This defines the center and centralizers for semigroups. This is necessary so that we can do the same for non-unital semirings. 

- [x] depends on: [#12112](https://github.com/leanprover-community/mathlib/pull/#12112) 
- [x] depends on: [#13903](https://github.com/leanprover-community/mathlib/pull/#13903)

### [2022-05-09T20:46:25+00:00](https://github.com/leanprover-community/mathlib/commit/260d5cedf078b07c41acbc78bc49c97ee0b8fa6c)
feat(model_theory/semantics): Realizing restricted terms and formulas ([#14014](https://github.com/leanprover-community/mathlib/pull/#14014))

Shows that realizing a restricted term or formula gives the same value as the unrestricted version.

### [2022-05-09T16:57:31+00:00](https://github.com/leanprover-community/mathlib/commit/98f2779c9d8462385f3b44f631acae2510361d1a)
refactor(number_theory/legendre_symbol/*): move section `general` from `quadratic_char.lean` into new file `auxiliary.lean` ([#14027](https://github.com/leanprover-community/mathlib/pull/#14027))

This is a purely administrative step (in preparation of adding more files that may need some of the auxiliary results).
We move the collection of auxiliary results that constitute `section general` of `quadratic_char.lean` to a new file `auxiliary.lean` (and change the `import`s of `quadratic_char.lean` accordingly).
This new file is meant as a temporary place for these auxiliary results; when the refactor of `quadratic_reciprocity` is finished, they will be moved to appropriate files in mathlib.

### [2022-05-09T14:40:50+00:00](https://github.com/leanprover-community/mathlib/commit/31af0e886be7f39d49ae42e0b99f21c470e693e3)
feat(model_theory/satisfiability): Definition of categorical theories ([#14038](https://github.com/leanprover-community/mathlib/pull/#14038))

Defines that a first-order theory is `κ`-categorical when all models of cardinality `κ` are isomorphic.
Shows that all theories in the empty language are `κ`-categorical for all cardinals `κ`.

### [2022-05-09T14:40:49+00:00](https://github.com/leanprover-community/mathlib/commit/5d8b43284e30fa436a83808a4dfef151aa24d8e7)
feat(model_theory/language_map): Cardinality of languages with constants ([#13981](https://github.com/leanprover-community/mathlib/pull/#13981))

`first_order.language.card_with_constants` shows that the cardinality of `L[[A]]` is `L.card + # A`.

### [2022-05-09T14:40:47+00:00](https://github.com/leanprover-community/mathlib/commit/4eb76a7bba7da1df944b5bb3a2a6591ae05a9198)
refactor(set_theory/ordinal/arithmetic): Rename theorems to match `nat.log` API ([#12733](https://github.com/leanprover-community/mathlib/pull/#12733))

We match the API for `ordinal.log` with that of `nat.log`.

### [2022-05-09T12:58:30+00:00](https://github.com/leanprover-community/mathlib/commit/00cec552261e3208e7ae41337119c53f232155e3)
feat(linear_algebra/affine_space/independent): add characterisation of affine independence for modules ([#14043](https://github.com/leanprover-community/mathlib/pull/#14043))

### [2022-05-09T12:58:29+00:00](https://github.com/leanprover-community/mathlib/commit/1fef5154f4889d3acc07530571d24025f4161a48)
chore(analysis/normed_space/basic): add short-circuit instance to obtain module structure over reals ([#14013](https://github.com/leanprover-community/mathlib/pull/#14013))

### [2022-05-09T12:58:28+00:00](https://github.com/leanprover-community/mathlib/commit/4da939bfdbf1deda842a5f13f97104af9bb66655)
feat(probability_theory/cond_count): use the counting measure to describe probability in the elementary sense ([#13484](https://github.com/leanprover-community/mathlib/pull/#13484))

### [2022-05-09T12:18:53+00:00](https://github.com/leanprover-community/mathlib/commit/5397ac0e9af3dca6c4708f9f238198a378ecafeb)
chore(ring_theory/hahn_series): remove redundant instances ([#14045](https://github.com/leanprover-community/mathlib/pull/#14045))

Both of these instances can be proved `by apply_instance`

### [2022-05-09T11:26:03+00:00](https://github.com/leanprover-community/mathlib/commit/c43486ecf2a5a17479a32ce09e4818924145e90e)
feat(category_theory/limits): allow (co)limits over lower universes in algebraic categories ([#13990](https://github.com/leanprover-community/mathlib/pull/#13990))

I'm concerned about the new universe annotations required in places. It was not so impossible to add them when proofs broke, but the proofs might have been hard to construct in the first place ....




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-09T11:25:59+00:00](https://github.com/leanprover-community/mathlib/commit/ad244dd7b79552857470a9c5940f3e62d349d9f2)
feat(ring_theory/dedekind_domain/adic_valuation): extend valuation ([#13462](https://github.com/leanprover-community/mathlib/pull/#13462))

We extend the `v`-adic valuation on a Dedekind domain `R` to its field of fractions `K` and prove some basic properties. We define the completion of `K` with respect to this valuation, as well as its ring of integers, and provide some topological instances.



Co-authored-by: Oliver Nash <github@olivernash.org>

### [2022-05-09T09:20:59+00:00](https://github.com/leanprover-community/mathlib/commit/fc640963158751a91f001bec2861c60e417d326c)
feat(topology/algebra/infinite_sum): summable on subtype iff ([#14032](https://github.com/leanprover-community/mathlib/pull/#14032))

A summable version of the `has_sum` lemma previously (the `tsum` version is already present)



Co-authored-by: Bhavik Mehta <bm489@cam.ac.uk>

### [2022-05-09T09:20:58+00:00](https://github.com/leanprover-community/mathlib/commit/d55a6545d26d1a63ecc1f385d50e1211a9c543c7)
feat(order/*): Order constructions under `to_dual`/`of_dual` ([#13788](https://github.com/leanprover-community/mathlib/pull/#13788))

A few missing lemmas about `of_dual` and `to_dual`.

### [2022-05-09T09:20:56+00:00](https://github.com/leanprover-community/mathlib/commit/1d9d573997946631a824f6b995d66410cd5cbb74)
feat(algebra/order/monoid_lemmas_zero_lt): add some lemmas assuming `has_mul` `has_zero` `preorder` ([#13296](https://github.com/leanprover-community/mathlib/pull/#13296))

### [2022-05-09T08:31:21+00:00](https://github.com/leanprover-community/mathlib/commit/b38aee47c8131c8ff6802b90de10d61bd4dc3987)
feat(analysis/special_functions): differentiability of Gamma function ([#13000](https://github.com/leanprover-community/mathlib/pull/#13000))

Third instalment of my Gamma-function project (following [#12917](https://github.com/leanprover-community/mathlib/pull/#12917) and [#13156](https://github.com/leanprover-community/mathlib/pull/#13156)). This PR adds the proof that the Gamma function is complex-analytic, away from the poles at non-positive integers.

### [2022-05-09T06:03:23+00:00](https://github.com/leanprover-community/mathlib/commit/bf8db9b77bbd54290360f2eaec587a36d28bebb5)
feat(analysis/normed_space/matrix_exponential): lemmas about the matrix exponential ([#13520](https://github.com/leanprover-community/mathlib/pull/#13520))

This checks off "Matrix Exponential" from the undergrad TODO list, by providing the majority of the "obvious" statements about matrices over a real normed algebra. Combining this PR with what is already in mathlib, we have:

* `exp 0 = 1`
* `exp (A + B) = exp A * exp B` when `A` and `B` commute
* `exp (n • A) = exp A ^ n`
* `exp (z • A) = exp A ^ z`
* `exp (-A) = (exp A)⁻¹`
* `exp (U * D * ↑(U⁻¹)) = U * exp D * ↑(U⁻¹)`
* `exp Aᵀ = (exp A)ᵀ`
* `exp Aᴴ = (exp A)ᴴ`
* `A * exp B = exp B * A`  if `A * B = B * A`
* `exp (diagonal v) = diagonal (exp v)`
* `exp (block_diagonal v) = block_diagonal (exp v)`
* `exp (block_diagonal' v) = block_diagonal' (exp v)`

Still missing are:

* `det (exp A) = exp (trace A)`
* `exp A` can be written a weighted sum of powers of `A : matrix n n R` less than `fintype.card n` (an extension of [`matrix.pow_eq_aeval_mod_charpoly`](https://leanprover-community.github.io/mathlib_docs/linear_algebra/matrix/charpoly/coeff.html#matrix.pow_eq_aeval_mod_charpoly))

The proofs in this PR may seem small, but they had a substantial dependency chain: https://github.com/leanprover-community/mathlib/projects/16.
It turns out that there's always more missing glue than you think there is.

### [2022-05-09T02:37:50+00:00](https://github.com/leanprover-community/mathlib/commit/77c86ba48f6c444a97fb5e7b7d5fd8edea0b6074)
rename(imo/imo1972_b2 → imo/imo1972_q5): Fix file name ([#14037](https://github.com/leanprover-community/mathlib/pull/#14037))

### [2022-05-09T02:37:49+00:00](https://github.com/leanprover-community/mathlib/commit/8412f1fc16838f696855f6e95575cb8a2f1299e6)
feat(representation_theory/invariants): invariants of `lin_hom` are representation morphisms ([#14012](https://github.com/leanprover-community/mathlib/pull/#14012))

### [2022-05-09T02:37:47+00:00](https://github.com/leanprover-community/mathlib/commit/594ceda90604bfc6e77a852a9d68ae78ea13cdfc)
feat(analysis/normed_space/exponential): Generalize `field` lemmas to `division_ring` ([#13997](https://github.com/leanprover-community/mathlib/pull/#13997))

This generalizes the lemmas about `exp 𝕂 𝕂` to lemmas about `exp 𝕂 𝔸` where `𝔸` is a `division_ring`.

This moves the lemmas down to the appropriate division_ring sections, and replaces the word `field` with `div` in their names, since `division_ring` is a mouthful, and really the name reflects the use of `/` in the definition.

### [2022-05-09T02:37:47+00:00](https://github.com/leanprover-community/mathlib/commit/afec1d73edeea4f075119daef50c08aedde57ff7)
fix(tactics/alias): Make docstring calculation available to to_additive ([#13968](https://github.com/leanprover-community/mathlib/pull/#13968))

PR [#13944](https://github.com/leanprover-community/mathlib/pull/#13944) fixed the docstrings for iff-style aliases, but because of
code duplication I added in [#13330](https://github.com/leanprover-community/mathlib/pull/#13330) this did not apply to aliases
introduced by `to_additive`. This fixes that.

### [2022-05-09T02:37:45+00:00](https://github.com/leanprover-community/mathlib/commit/34b61e3d612e7c44a42902abf73473e662bc4c84)
chore(algebra/regular/*): generalisation linter ([#13955](https://github.com/leanprover-community/mathlib/pull/#13955))

### [2022-05-09T02:37:44+00:00](https://github.com/leanprover-community/mathlib/commit/5253153299d6da8255c23c69fa19c24cef88e8d1)
feat(algebra/category/Module/basic): `iso.hom_congr`agrees with `linear_equiv.arrow_congr` ([#13954](https://github.com/leanprover-community/mathlib/pull/#13954))






Co-authored-by: antoinelab01 <66086247+antoinelab01@users.noreply.github.com>

### [2022-05-09T02:37:43+00:00](https://github.com/leanprover-community/mathlib/commit/4f386e6653e295c98d2e45bf62dac999eef27a49)
feat(set_theory/pgame/birthday): Birthdays of ordinals ([#13714](https://github.com/leanprover-community/mathlib/pull/#13714))

### [2022-05-09T02:37:42+00:00](https://github.com/leanprover-community/mathlib/commit/1e8f3817346bffaae9675f9a0d4e7a1cbd21ff9e)
feat(algebraic_topology/dold_kan): defining some null homotopic maps ([#13085](https://github.com/leanprover-community/mathlib/pull/#13085))




Co-authored-by: Joël Riou <37772949+joelriou@users.noreply.github.com>

### [2022-05-09T00:34:40+00:00](https://github.com/leanprover-community/mathlib/commit/bf6e13bf9e257d52d6216afddeffee7e7280ac08)
refactor(algebra/{group,group_with_zero/basic): Generalize lemmas to division monoids ([#14000](https://github.com/leanprover-community/mathlib/pull/#14000))

Generalize `group` and `group_with_zero` lemmas to `division_monoid`. We do not actually delete the original lemmas but make them one-liners from the new ones. The next PR will then delete the old lemmas and perform the renames in all files.

Lemmas are renamed because
* one of the `group` or `group_with_zero` name has to go
* the new API should have a consistent naming convention

Pre-emptive lemma renames

### [2022-05-08T19:06:53+00:00](https://github.com/leanprover-community/mathlib/commit/449ba97d90e6bc7023d80771e003c4c950f31f4a)
refactor(data/nat/log): Golf + improved theorem names ([#14019](https://github.com/leanprover-community/mathlib/pull/#14019))

Other than golfing and moving a few things around, our main changes are:
- rename `log_le_log_of_le` to `log_mono_right`, analogous renames elsewhere.
- add `lt_pow_iff_log_lt` and a `clog` analog.

### [2022-05-08T18:01:58+00:00](https://github.com/leanprover-community/mathlib/commit/163ef61e3d6081bb97ebe9386c713d0d5914e3b6)
feat(topology/algebra/infinite_sum): add `tsum_star` ([#13999](https://github.com/leanprover-community/mathlib/pull/#13999))

These lemmas names are copied from `tsum_neg` and friends.

As a result, `star_exp` can be golfed and generalized.

### [2022-05-08T18:01:58+00:00](https://github.com/leanprover-community/mathlib/commit/dd16a836c9dfbbec9668e738f11f582c74473c2f)
fix(topology/algebra/module/weak_dual): fix namespace issue, add a few extra lemmas ([#13407](https://github.com/leanprover-community/mathlib/pull/#13407))

This PR fixes a namespace issue in `weak_dual`, to ensure lemmas with names like `eval_continuous` are appropriately namespaced. Also, lemmas about continuity of the evaluation map have been copied from `weak_bilin` to `weak_dual`.



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2022-05-08T16:31:29+00:00](https://github.com/leanprover-community/mathlib/commit/69c07a4b1cc7bf04ba6a71fadd7c4729bd224e52)
feat(linear_algebra/linear_pmap): `mk_span_singleton` of the same point ([#14029](https://github.com/leanprover-community/mathlib/pull/#14029))

One more lemma about `mk_span_singleton'` and slightly better lemma names.

### [2022-05-08T16:31:28+00:00](https://github.com/leanprover-community/mathlib/commit/6a5d17eea69ac0948920944b1ff3bd0ddcaf999d)
feat(measure_theory/integral): a few more integral lemmas ([#14025](https://github.com/leanprover-community/mathlib/pull/#14025))

### [2022-05-08T15:55:36+00:00](https://github.com/leanprover-community/mathlib/commit/e3306942ebcd15ba75ff24fb43ca2effa35ae8f8)
feat(analysis/p_series): explicit bounds on sums of the form 1/j^2 ([#13851](https://github.com/leanprover-community/mathlib/pull/#13851))

### [2022-05-08T14:02:33+00:00](https://github.com/leanprover-community/mathlib/commit/79ffb5563b56fefdea3d60b5736dad168a9494ab)
chore(algebra/category/CommRing=>Ring): rename ([#14022](https://github.com/leanprover-community/mathlib/pull/#14022))

This folder was originally named `algebra/category/CommRing/` because it only handled the commutative case. That's largely no longer the case, so we should rename the folder.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-08T12:55:28+00:00](https://github.com/leanprover-community/mathlib/commit/3478a2af22c9eacc1b064f49514e7acea46fbeaa)
feat(probability/ident_distrib): identically distributed random variables ([#14024](https://github.com/leanprover-community/mathlib/pull/#14024))

### [2022-05-08T06:24:13+00:00](https://github.com/leanprover-community/mathlib/commit/0c64b3d3c568ab32b344d89b0ee5a799e3e09c4d)
feat(algebra/category/Module): biproducts ([#13908](https://github.com/leanprover-community/mathlib/pull/#13908))

Following the same pattern for `AddCommGroup`, create the instance for biproducts in` Module R`, and check they are isomorphic to the usual construction.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-08T04:50:21+00:00](https://github.com/leanprover-community/mathlib/commit/ce0dc83676ba6ce32c3fb32c633f499b89e2fc6f)
feat(set_theory/ordinal/basic): Supremum indexed over an empty / unique type ([#13735](https://github.com/leanprover-community/mathlib/pull/#13735))

This PR contains the following changes:
- The lemmas `sup_unique`, `bsup_one`, `lsub_unique`, `blsub_one`.
- `congr` lemmas for `bsup` and `blsub`
- Arguments like `o = 0` are removed as the `congr` lemmas now handle this.
- `a + 1` is changed to `a.succ` in some lemmas (for better rewriting).

### [2022-05-07T22:21:48+00:00](https://github.com/leanprover-community/mathlib/commit/3a0eb4b5606be0c4f0d51fdc5c726925b8120b25)
chore(logic/relation): Dot notation on `well_founded.trans_gen` ([#14016](https://github.com/leanprover-community/mathlib/pull/#14016))

### [2022-05-07T22:21:47+00:00](https://github.com/leanprover-community/mathlib/commit/e1902256fb5248e57ec9fc08b9ac12a98ee9e426)
feat(data/rat/meta_defs, meta/expr): rat.to_pexpr and int.to_pexpr ([#14002](https://github.com/leanprover-community/mathlib/pull/#14002))




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2022-05-07T20:15:08+00:00](https://github.com/leanprover-community/mathlib/commit/e0dd30031013653bccdac0a4fa58e413453e4678)
feat(algebra/{invertible + group_power/lemmas}): taking `inv_of` (⅟_) is injective ([#14011](https://github.com/leanprover-community/mathlib/pull/#14011))

Besides the lemma stated in the description, I also made explicit an argument that was implicit in a different lemma and swapped the arguments of `invertible_unique` in order to get the typeclass assumptions before some non-typeclass assumptions.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/inv_of_inj)

Co-authored-by: Floris van Doorn <[fpvdoorn@gmail.com](mailto:fpvdoorn@gmail.com)>

### [2022-05-07T15:50:10+00:00](https://github.com/leanprover-community/mathlib/commit/0e494afeeb1945dbc6fec3bdf933e14892f4a018)
chore(order/*): Less `order_dual` abuse ([#14008](https://github.com/leanprover-community/mathlib/pull/#14008))

Sanitize uses of `order_dual` by inserting the required `of_dual` and `to_dual` instead of type-ascripting. Also remove some uses which were not necessary. Those dated from the time where we did not have antitone functions.

### [2022-05-07T15:50:09+00:00](https://github.com/leanprover-community/mathlib/commit/5166765790949718234828bf0f974afbbd9feb49)
chore(order/filter/pointwise): Better definitional unfolding ([#13941](https://github.com/leanprover-community/mathlib/pull/#13941))

Tweak pointwise operation definitions to make them easier to work with:
* `1` is now `pure 1` instead of `principal 1`. This changes defeq.
* Binary operations unfold to the set operation instead exposing a bare `set.image2` (`obtain ⟨t₁, t₂, h₁, h₂, h⟩ : s ∈ f * g` now gives `h : t₁ * t₂ ⊆ s` instead of `h : set.image2 (*) t₁ t₂ ⊆ s`. This does not change defeq.

### [2022-05-07T11:59:00+00:00](https://github.com/leanprover-community/mathlib/commit/cf65daf0e2ff9730a15c401dfe8b77120c9a255c)
feat(probability/variance): define the variance of a random variable, prove its basic properties ([#13912](https://github.com/leanprover-community/mathlib/pull/#13912))

### [2022-05-07T09:57:54+00:00](https://github.com/leanprover-community/mathlib/commit/c24762232e82281e047f5b012fd7c33440d0be36)
feat(group_theory/group_action/units): simp lemma for scalar action of `is_unit.unit h` ([#14006](https://github.com/leanprover-community/mathlib/pull/#14006))

### [2022-05-07T09:57:53+00:00](https://github.com/leanprover-community/mathlib/commit/9134a8e763a4955bcb7ab64fa2c43b13552f6d8e)
feat(combinatorics/simple_graph/hasse): Hasse diagram and path graph ([#13959](https://github.com/leanprover-community/mathlib/pull/#13959))

Define the Hasse diagram of an order and the path graph on `n` vertices as the Hasse diagram of `fin n`.

### [2022-05-07T09:57:51+00:00](https://github.com/leanprover-community/mathlib/commit/b2aa27e319a83aa45e880a58f332278f09ebdfa4)
feat(analysis/calculus/deriv): generalize some lemmas ([#13575](https://github.com/leanprover-community/mathlib/pull/#13575))

The types of scalar and codomain can be different now.

For example, these lemmas can be used for `f : ℝ → ℂ` `f' : ℝ →L[ℝ] ℂ` now.

### [2022-05-07T08:20:10+00:00](https://github.com/leanprover-community/mathlib/commit/f8bc097de20ed70d1d6ad4f9cd65a9ff89892948)
feat(algebra/module/linear_map): `Rᵐᵒᵖ` is isomorphic to `module.End R R` ([#13931](https://github.com/leanprover-community/mathlib/pull/#13931))

This PR adds the canonical (semi)ring isomorphism from `Rᵐᵒᵖ` to
`module.End R R` for a (semi)ring `R`, given by the right multiplication.

### [2022-05-07T07:07:16+00:00](https://github.com/leanprover-community/mathlib/commit/559f58b11032054f3ee8ee7099887558350a5dbd)
feat(order/filter): add a few lemmas ([#13985](https://github.com/leanprover-community/mathlib/pull/#13985))

* weaken assumptions of `filter.has_antitone_basis.tendsto` from `[semilattice_sup ι] [nonempty ι]` to `[preorder ι]`;
* add `filter.has_antitone_basis.tendsto`, `filter.has_antitone_basis.mem`, `filter.has_antitone_basis.tendsto_small_sets`.

### [2022-05-07T04:45:56+00:00](https://github.com/leanprover-community/mathlib/commit/ca1375a5a53a12877cf366316abff5cac77fc4af)
refactor(algebra/order/monoid_lemmas): reorder the file ([#13492](https://github.com/leanprover-community/mathlib/pull/#13492))

Just like in `algebra/order/monoid_lemmas_zero_lt`, sort by algebraic assumptions and order assumptions first, then put similar lemmas together.
It would be simpler to find duplicates, missing lemmas, and inconsistencies. (There are so many!)

### [2022-05-07T04:10:25+00:00](https://github.com/leanprover-community/mathlib/commit/5789c637d5855d9fe2094bda16be177d4f36477e)
chore(scripts): update nolints.txt ([#14004](https://github.com/leanprover-community/mathlib/pull/#14004))

I am happy to remove some nolints for you!

### [2022-05-07T00:43:46+00:00](https://github.com/leanprover-community/mathlib/commit/275dabfc96302f0d4d973cd206e16ef2910e6bce)
feat(order/atoms): is_atomic_of_order_bot_lt_well_founded ([#13967](https://github.com/leanprover-community/mathlib/pull/#13967))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-06T20:39:04+00:00](https://github.com/leanprover-community/mathlib/commit/dcd452deeda31bb585d4c7527396a0ffb8fc2f7c)
feat(analysis/locally_convex/with_seminorms): characterization of the topology induced by seminorms in terms of `𝓝 0` ([#13547](https://github.com/leanprover-community/mathlib/pull/#13547))

This shows that a topology is induced by the family of seminorms `p` iff `𝓝 0 = ⨅ i, (𝓝 0).comap (p i)`, which allows to use the extensive filter and topology library (see e.g. [#13549](https://github.com/leanprover-community/mathlib/pull/#13549)).

### [2022-05-06T19:31:54+00:00](https://github.com/leanprover-community/mathlib/commit/10721bab946e62d158fd3b8fa88667e1f851180c)
feat(topology/algebra/module/basic): basic topological properties of quotient modules ([#13433](https://github.com/leanprover-community/mathlib/pull/#13433))

More precisely, we prove that : 
* if `M` is a topological module and `S` is a submodule of `M`, then `M ⧸ S` is a topological module
* furthermore, if `S` is closed, then `M ⧸ S` is regular (hence T2) 

- [x] depends on: [#13278](https://github.com/leanprover-community/mathlib/pull/#13278) 
- [x] depends on: [#13401](https://github.com/leanprover-community/mathlib/pull/#13401)

### [2022-05-06T18:45:20+00:00](https://github.com/leanprover-community/mathlib/commit/8f116f43510e0912199c0dd62171eaacbdf2c917)
feat(ring_theory/localization): generalize lemmas from `comm_ring` to `comm_semiring` ([#13994](https://github.com/leanprover-community/mathlib/pull/#13994))

This PR does not add new stuffs, but removes several subtractions from the proofs.

### [2022-05-06T18:45:19+00:00](https://github.com/leanprover-community/mathlib/commit/27e105d2b813141dad348aeff6d319899f729661)
chore(analysis/normed_space/exponential): Make the `𝔸` argument implicit ([#13986](https://github.com/leanprover-community/mathlib/pull/#13986))

`exp 𝕂 𝔸` is now just `exp 𝕂`.

This also renames two lemmas that refer to this argument in their name to no longer do so.

In a few places we have to add type annotations where they weren't needed before, but nowhere do we need to resort to `@`.

### [2022-05-06T18:45:18+00:00](https://github.com/leanprover-community/mathlib/commit/eea16dc8f687e0894148602e01e1d40c39ea56b3)
feat(number_theory/legendre_symbol/*): add results on value at -1 ([#13978](https://github.com/leanprover-community/mathlib/pull/#13978))

This PR adds code expressing the value of the quadratic character at -1 of a finite field of odd characteristic as χ₄ applied to the cardinality of the field. This is then also done for the Legendre symbol.

Additional changes:
* two helper lemmas `odd_mod_four` and `finite_field.even_card_of_char_two` that are needed
* some API lemmas for χ₄
* write `euler_criterion` and `exists_sq_eq_neg_one_iff` in terms of `is_square`; simplify the proof of the latter using the general result for quadratic characters

### [2022-05-06T18:45:17+00:00](https://github.com/leanprover-community/mathlib/commit/dfe1897f27c24cf5999a131a74b927e08c315341)
feat(data/polynomial/laurent): laurent polynomials -- defs and some API ([#13784](https://github.com/leanprover-community/mathlib/pull/#13784))

I broke off the initial part of [#13415](https://github.com/leanprover-community/mathlib/pull/#13415) into this initial segment, leaving the rest of the PR as depending on this one.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-05-06T16:39:40+00:00](https://github.com/leanprover-community/mathlib/commit/58d83ed5268d96bd37757ac03062a4d69e5aa435)
feat(tactic/lint/misc): adding a linter that flags iffs with explicit variables on both sides ([#11606](https://github.com/leanprover-community/mathlib/pull/#11606))

### [2022-05-06T15:42:43+00:00](https://github.com/leanprover-community/mathlib/commit/863a1676f130b6ca8050656d4ce2eb063c88c7f4)
docs(ring_theory/localization/ideal): fix an unused name ([#13992](https://github.com/leanprover-community/mathlib/pull/#13992))

### [2022-05-06T15:42:42+00:00](https://github.com/leanprover-community/mathlib/commit/db5c2a6df5edb8c8b52e1b76709cfcbb9f1e7bac)
chore(data/zmod/basic.lean): change order of arguments of `zmod.nat_cast_mod` for consistency ([#13988](https://github.com/leanprover-community/mathlib/pull/#13988))

As discussed [here](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60zmod.2Enat_cast_mod.60.20vs.20.60zmod.2Eint_cast_mod.60), this changes the order of arguments in `zmod.nat_cast_mod` to be compatible with `zmod.int_cast_mod`.

### [2022-05-06T15:42:40+00:00](https://github.com/leanprover-community/mathlib/commit/40bedd62b1d56aa3771cf26467c907cebaca47cd)
refactor(set_theory/game/pgame): Remove `pgame.omega` ([#13960](https://github.com/leanprover-community/mathlib/pull/#13960))

This barely had any API to begin with. Thanks to `ordinal.to_pgame`, it is now entirely redundant.

### [2022-05-06T15:42:39+00:00](https://github.com/leanprover-community/mathlib/commit/c9f5cee248e5dee1011b12ab911b68f0d03914eb)
feat(set_theory/game/pgame): Add remark on relabelings ([#13732](https://github.com/leanprover-community/mathlib/pull/#13732))

### [2022-05-06T14:58:58+00:00](https://github.com/leanprover-community/mathlib/commit/ba627bc71a5a38597e21005f8ed3b838d752a12a)
feat(measure_theory/function/conditional_expectation): induction over Lp functions which are strongly measurable wrt a sub-sigma-algebra ([#13129](https://github.com/leanprover-community/mathlib/pull/#13129))




Co-authored-by: Rémy Degenne <remydegenne@gmail.com>
Co-authored-by: RemyDegenne <remydegenne@gmail.com>

### [2022-05-06T12:51:04+00:00](https://github.com/leanprover-community/mathlib/commit/fe0c4cd9ca62b56c3027a1381266ba6985169449)
docs(data/polynomial/algebra_map): fix a typo in a doc-string ([#13989](https://github.com/leanprover-community/mathlib/pull/#13989))

The doc-string talks about `comm_ring`, while the lemma uses `comm_semiring`.  I aligned the two to the weaker one!

### [2022-05-06T12:51:03+00:00](https://github.com/leanprover-community/mathlib/commit/f6c030fea3c2809bb489bc8901f307bf6b4bf0c0)
feat(linear_algebra/matrix/nonsingular_inverse): inverse of a diagonal matrix is diagonal ([#13827](https://github.com/leanprover-community/mathlib/pull/#13827))

The main results are `is_unit (diagonal v) ↔ is_unit v` and `(diagonal v)⁻¹ = diagonal (ring.inverse v)`.

This also generalizes `invertible.map` to `monoid_hom_class`.

### [2022-05-06T12:03:00+00:00](https://github.com/leanprover-community/mathlib/commit/e4d3d3392cec7c26813b6fb9d0db0165a33984c5)
feat(probability/stopping): add properties of the measurable space generated by a stopping time ([#13909](https://github.com/leanprover-community/mathlib/pull/#13909))

- add lemmas stating that various sets are measurable with respect to that space
- describe the sigma algebra generated by the minimum of two stopping times
- use the results to generalize `is_stopping_time.measurable_set_eq_const` from nat to first countable linear orders and rename it to `is_stopping_time.measurable_space_eq'` to have a name similar to `is_stopping_time.measurable_set_eq`.

### [2022-05-06T10:42:54+00:00](https://github.com/leanprover-community/mathlib/commit/f0339374016bccf700da0b2e0129d107c4346521)
feat(topology/algebra/monoid): add missing `has_continuous_const_smul` instances ([#13987](https://github.com/leanprover-community/mathlib/pull/#13987))

This makes an argument to `exp` redundant.

### [2022-05-06T10:42:53+00:00](https://github.com/leanprover-community/mathlib/commit/97c4d4edb50a09efa1a40e8f761e763a539032a3)
feat(analysis/asymptotics/asymptotics): add `is_O.exists_mem_basis` ([#13973](https://github.com/leanprover-community/mathlib/pull/#13973))

### [2022-05-06T10:07:19+00:00](https://github.com/leanprover-community/mathlib/commit/d98930516cd6bdef33027591f5e39500d4ca2153)
feat(algebra/order/monoid_lemmas_zero_lt): add some lemmas assuming `mul_zero_class` `partial_order` / `linear_order` ([#13377](https://github.com/leanprover-community/mathlib/pull/#13377))

### [2022-05-06T10:07:18+00:00](https://github.com/leanprover-community/mathlib/commit/1675b78dc23ded23dd61416f9059052f3c6a3721)
feat(algebra/order/monoid_lemmas_zero_lt): add some lemmas assuming `mul_zero_one_class` `partial_order` ([#13375](https://github.com/leanprover-community/mathlib/pull/#13375))

### [2022-05-06T09:15:39+00:00](https://github.com/leanprover-community/mathlib/commit/95413e23e3d29b45c701fcd31f2dbadaf1b79cba)
feat(measure_theory/group/*): various lemmas about invariant measures ([#13539](https://github.com/leanprover-community/mathlib/pull/#13539))

* Make the `measurable_equiv` argument to `measure_preserving.symm` explicit. This argument is cannot always be deduced from the other explicit arguments (which can be seen form the changes in `src/measure_theory/constructions/pi.lean`).
* From the sphere eversion project
* Required for convolutions

### [2022-05-06T06:39:57+00:00](https://github.com/leanprover-community/mathlib/commit/ebac9f0369e34093b7872d2231d0b4ad215d5939)
feat(analysis/special_functions/trigonometric): add a lemma ([#13975](https://github.com/leanprover-community/mathlib/pull/#13975))

Add a lemma needed for [#13178](https://github.com/leanprover-community/mathlib/pull/#13178)

### [2022-05-06T06:03:17+00:00](https://github.com/leanprover-community/mathlib/commit/faf16900bd1fb52fb990e1848cd6dfc4602be05b)
feat(model_theory/*): Any theory with infinite models has arbitrarily large models ([#13980](https://github.com/leanprover-community/mathlib/pull/#13980))

Defines the theory `distinct_constants_theory`, indicating that a set of constants are distinct.
Uses that theory to show that any theory with an infinite model has models of arbitrarily large cardinality.

### [2022-05-06T01:59:37+00:00](https://github.com/leanprover-community/mathlib/commit/f0eded9a1bb05be91c31cbf96eeb5da544c6511b)
chore(algebra/ring/idempotents): golf iff_eq_zero_or_one ([#13977](https://github.com/leanprover-community/mathlib/pull/#13977))

### [2022-05-05T23:51:54+00:00](https://github.com/leanprover-community/mathlib/commit/151933d10ac5b272ce9d57e64dcef50289a79b97)
feat(algebra/group/defs): Division monoids ([#13860](https://github.com/leanprover-community/mathlib/pull/#13860))

Introduce what I call division monoids. Those are monoids `α` with a pseudo-inverse `⁻¹ : α → α ` and a pseudo-division `/ : α → α → α` respecting:
* `a / b = a * b⁻¹`
* `a⁻¹⁻¹ = a`
* `(a * b)⁻¹ = b⁻¹ * a⁻¹`
* `a * b = 1 → a⁻¹ = b`

This made-up algebraic structure has two uses:
* Deduplicate lemmas between `group` and `group_with_zero`. Almost all lemmas which are literally duplicated (same conclusion, same assumptions except for `group` vs `group_with_zero`) generalize to division monoids.
* Give access to lemmas for pointwise operations: `set α`, `finset α`, `filter α`, `submonoid α`, `subgroup α`, etc... all are division monoids when `α` is. In some sense, they are very close to being groups, the only obstruction being that `s / s ≠ 1` in general. Hence any identity which is true in a group/group with zero is also true in those pointwise monoids, if no cancellation is involved.



Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2022-05-05T22:29:30+00:00](https://github.com/leanprover-community/mathlib/commit/c62dfe61977dd1fc41841cabfcd4d7515c0c6c5d)
feat(model_theory/skolem): Downward Löwenheim–Skolem ([#13723](https://github.com/leanprover-community/mathlib/pull/#13723))

Proves the Downward Löwenheim–Skolem theorem:  If `s` is a set in an `L`-structure `M` and `κ` an infinite cardinal such that `max (# s, L.card) ≤ κ` and `κ ≤ # M`, then `M` has an elementary substructure containing `s` of cardinality `κ`.

### [2022-05-05T20:53:20+00:00](https://github.com/leanprover-community/mathlib/commit/91cc3f063ee3b5985beb6c07af17a93cfb7cbe8d)
feat(linear_algebra/basic): ker of a linear map equals ker of the corresponding group hom ([#13858](https://github.com/leanprover-community/mathlib/pull/#13858))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-05-05T19:41:55+00:00](https://github.com/leanprover-community/mathlib/commit/c12536a7a1e96489e3dbeb7175ade0c97349df11)
fix(gitpod): correct command name ([#13976](https://github.com/leanprover-community/mathlib/pull/#13976))

`leanpkg config` doesn't exist, it's `leanpkg configure`.

@b-mehta tricked me in https://github.com/leanprover-community/mathlib/pull/13949#issuecomment-1117589670

### [2022-05-05T17:30:45+00:00](https://github.com/leanprover-community/mathlib/commit/73e5dadd23049c8c5074f3374c2115d52e8d3879)
feat(analysis/special_functions/exp): add limits of `exp z` as `re z → ±∞` ([#13974](https://github.com/leanprover-community/mathlib/pull/#13974))

### [2022-05-05T16:19:12+00:00](https://github.com/leanprover-community/mathlib/commit/54af9e9b05a1f98a5817de6da6f8ae433b6863b5)
fix(topology/algebra/infinite_sum): `tsum_neg` doesn't need `summable` ([#13950](https://github.com/leanprover-community/mathlib/pull/#13950))

Both sides are 0 in the not-summable case.

### [2022-05-05T14:55:41+00:00](https://github.com/leanprover-community/mathlib/commit/ec44f459272ea63715a528409dee6d75bcb29c91)
feat(data/matrix/basic): even more lemmas about `conj_transpose` and `smul` ([#13970](https://github.com/leanprover-community/mathlib/pull/#13970))

It turns out none of the lemmas in the previous [#13938](https://github.com/leanprover-community/mathlib/pull/#13938) were the ones I needed.

### [2022-05-05T13:11:01+00:00](https://github.com/leanprover-community/mathlib/commit/420fabf72e27bd2092ae39ee01211538227a7a30)
chore(analysis/normed_space/exponential): replace `1/x` with `x⁻¹` ([#13971](https://github.com/leanprover-community/mathlib/pull/#13971))

Note that `one_div` makes `⁻¹` the simp-normal form.

### [2022-05-05T13:11:00+00:00](https://github.com/leanprover-community/mathlib/commit/03f5ac93053efd6290745aa21f4dc51addddfd63)
feat(category_theory/simple): simple_iff_subobject_is_simple_order ([#13969](https://github.com/leanprover-community/mathlib/pull/#13969))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-05T13:10:59+00:00](https://github.com/leanprover-community/mathlib/commit/929c90184fb4554bd01224e412d5d8b0b048cd6b)
refactor(ring_theory/*): Remove unnecessary commutativity assumptions ([#13966](https://github.com/leanprover-community/mathlib/pull/#13966))

This replaces `[comm_ring R]` or `[comm_semiring R]` with `[ring R]` or `[semiring R]`, without changing any proofs.

### [2022-05-05T13:10:58+00:00](https://github.com/leanprover-community/mathlib/commit/8e0ab168514b96107f000bf5dcf906508b19a1e0)
feat(polynomial/cyclotomic/basic): ɸ_pⁱ irreducible → ɸ_pʲ irreducible for j ≤ i ([#13952](https://github.com/leanprover-community/mathlib/pull/#13952))





Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-05-05T11:55:59+00:00](https://github.com/leanprover-community/mathlib/commit/057e0283c5a877ddf8286ee8168c7fb17703349e)
feat(linear_algebra/finite_dimensional): surjective_of_nonzero_of_finrank_eq_one ([#13961](https://github.com/leanprover-community/mathlib/pull/#13961))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-05T11:55:58+00:00](https://github.com/leanprover-community/mathlib/commit/da06587c1c602c9e729dedbdc26811c70d6a1eb3)
feat(linear_algebra): A-linear maps between finite dimensional vector spaces over k are finite dimensional ([#13934](https://github.com/leanprover-community/mathlib/pull/#13934))






Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-05T09:52:28+00:00](https://github.com/leanprover-community/mathlib/commit/4dfbcac38fb3f7000760c585227c214fa0113fc9)
feat({data/{finset,set},order/filter}/pointwise): More basic API ([#13899](https://github.com/leanprover-community/mathlib/pull/#13899))

More basic lemmas about pointwise operations on `set`/`finset`/`filter`. Also make the three APIs more consistent with each other.

### [2022-05-05T07:41:38+00:00](https://github.com/leanprover-community/mathlib/commit/f82067179d1ff74303c01bfdac6d13a967741aac)
ci(gitpod): do not rerun get-cache if a workspace is reloaded ([#13949](https://github.com/leanprover-community/mathlib/pull/#13949))

Instead, only run it at workspace start. This prevents it clobbering local builds created with `lean --make src` or similar.

I have no idea why the `. /home/gitpod/.profile` line is there, so I've left it to run in the same phase as before.

### [2022-05-05T07:41:37+00:00](https://github.com/leanprover-community/mathlib/commit/697012956aff5aead72f5287d61b62ff1123f2a2)
chore(algebra/group/units): add a lemma about is_unit on a coerced unit ([#13947](https://github.com/leanprover-community/mathlib/pull/#13947))

### [2022-05-05T07:41:36+00:00](https://github.com/leanprover-community/mathlib/commit/bd944fe1f6f26ea22243d429b905ae3fd0b1b94f)
chore(linear_algebra/free_module): fix name in doc ([#13942](https://github.com/leanprover-community/mathlib/pull/#13942))

### [2022-05-05T07:41:35+00:00](https://github.com/leanprover-community/mathlib/commit/4f7603c797564cc02a80feec39cd591c9921f1fa)
chore(data/matrix/basic): add more lemmas about `conj_transpose` and `smul` ([#13938](https://github.com/leanprover-community/mathlib/pull/#13938))

Unfortunately the `star_module` typeclass is of no help here; see [this Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Is.20star_module.20sensible.20for.20non-commutative.20rings.3F/near/257272767) for some discussion.

In the meantime, this adds the lemmas for the most frequent special cases.

### [2022-05-05T07:41:33+00:00](https://github.com/leanprover-community/mathlib/commit/7eacca31fa6f5980038bf433fc8e75a4df6ac803)
feat(analysis/normed/normed_field): limit of `∥a * x∥` as `∥x∥ → ∞` ([#13819](https://github.com/leanprover-community/mathlib/pull/#13819))

These lemmas should use `bornology.cobounded` but we don't have an instance `pseudo_metric_space α -> bornology α` yet.

### [2022-05-05T05:36:23+00:00](https://github.com/leanprover-community/mathlib/commit/03fbe7de7be7416228b491873db7946654370b52)
Update CODE_OF_CONDUCT.md ([#13965](https://github.com/leanprover-community/mathlib/pull/#13965))

deleted one character (duplicate space)





Co-authored-by: Martin Dvořák <dvorakmartinbridge@seznam.cz>

### [2022-05-05T05:36:22+00:00](https://github.com/leanprover-community/mathlib/commit/63875eaefe9ba0828f5d050d4afb2744487ed0bc)
chore(scripts): update nolints.txt ([#13964](https://github.com/leanprover-community/mathlib/pull/#13964))

I am happy to remove some nolints for you!

### [2022-05-05T05:36:21+00:00](https://github.com/leanprover-community/mathlib/commit/116435d6081386854378a7f31333f05f9932cf24)
feat(tactic/alias): fix alias docstrings for implications from iffs ([#13944](https://github.com/leanprover-community/mathlib/pull/#13944))

Now they say for instance:
```lean
le_inv_mul_of_mul_le : ∀ {α : Type u} [_inst_1 : group α] [_inst_2 : has_le α] [_inst_3 : covariant_class α α has_mul.mul has_le.le] {a b c : α}, a * b ≤ c → b ≤ a⁻¹ * c
**Alias** of the reverse direction of `le_inv_mul_iff_mul_le`.
```

https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60alias.60.20issue.20in.20algebra.2Eorder.2Egroup/near/281158569

### [2022-05-05T05:36:20+00:00](https://github.com/leanprover-community/mathlib/commit/524793de15bc4c52ee32d254e7d7867c7176b3af)
feat(representation_theory): Action V G is rigid whenever V is ([#13738](https://github.com/leanprover-community/mathlib/pull/#13738))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-05-05T05:36:19+00:00](https://github.com/leanprover-community/mathlib/commit/b1da074a9113f2dde55f8c26329e58f0612f5e1b)
feat(data/sum/basic): Shortcuts for the ternary sum of types ([#13678](https://github.com/leanprover-community/mathlib/pull/#13678))

Define `sum3.in₀`, `sum3.in₁`, `sum3.in₂`, shortcut patterns for pattern-matching on a ternary sum of types.

Co-authored-by: Bhavik Mehta <bhavik.mehta8@gmail.com>

### [2022-05-05T03:36:27+00:00](https://github.com/leanprover-community/mathlib/commit/0c9b72632bbe90c3e09adb1977b7e7210e213002)
feat(algebra/group/{pi, opposite}): add missing pi and opposite defs for `mul_hom` ([#13956](https://github.com/leanprover-community/mathlib/pull/#13956))

The declaration names and the contents of these definitions are all copied from the corresponding ones for `monoid_hom`.

### [2022-05-05T02:21:58+00:00](https://github.com/leanprover-community/mathlib/commit/50781196cfb96cc78f4fbe3675f80d442725826b)
feat(data/matrix/block): add `matrix.block_diag` and `matrix.block_diag'` ([#13918](https://github.com/leanprover-community/mathlib/pull/#13918))

`matrix.block_diag` is to `matrix.block_diagonal` as `matrix.diag` is to `matrix.diagonal`.

As well as the basic arithmetic lemmas and bundling, this also adds continuity lemmas.

These definitions are primarily an auxiliary construction to prove `matrix.tsum_block_diagonal`, and `matrix.tsum_block_diagonal'`, which are really the main goal of this PR.

### [2022-05-05T02:21:58+00:00](https://github.com/leanprover-community/mathlib/commit/50fd3d6adfbac00997babac42d704d7e5415a7b5)
feat(analysis/special_functions/log/monotone): add lemmas ([#13848](https://github.com/leanprover-community/mathlib/pull/#13848))


Adds a few lemmas regarding tonality of `log x / x ^ a`, and puts them in a new file, along with previous results.

### [2022-05-05T00:25:32+00:00](https://github.com/leanprover-community/mathlib/commit/1e1893566a84cbbc43b4619c4be5b441a13d5736)
docs(algebra/ring/opposite): fix docstring for `ring_hom.from_opposite` ([#13957](https://github.com/leanprover-community/mathlib/pull/#13957))

### [2022-05-05T00:25:31+00:00](https://github.com/leanprover-community/mathlib/commit/3650936965ead994c067cbce455aa5eb60cd0e55)
feat(representation_theory/Action): lemma about isomorphisms in `Action G V` ([#13951](https://github.com/leanprover-community/mathlib/pull/#13951))

### [2022-05-05T00:25:30+00:00](https://github.com/leanprover-community/mathlib/commit/9b245e23e083ff6b9ed2f47a93e412219c096449)
feat(analysis/convex/integral): drop an assumption, add a version ([#13920](https://github.com/leanprover-community/mathlib/pull/#13920))

* add `convex.set_average_mem_closure`;
* drop `is_closed s` assumption in `convex.average_mem_interior_of_set`;
* add `ae_eq_const_or_norm_average_lt_of_norm_le_const`, a version of `ae_eq_const_or_norm_integral_lt_of_norm_le_const` for average.

### [2022-05-04T22:19:39+00:00](https://github.com/leanprover-community/mathlib/commit/f8c303eac93bd0f48dd4c9a98b8f5772af6be0c1)
refactor(order/filter/pointwise): Localize instances ([#13898](https://github.com/leanprover-community/mathlib/pull/#13898))

Localize pointwise `filter` instances into the `pointwise` locale, as is done for `set` and `finset`.

### [2022-05-04T22:19:38+00:00](https://github.com/leanprover-community/mathlib/commit/627f81b477cdd0a00631312a3cab06be7a63940d)
feat(group_theory/order_of_element): The index-th power lands in the subgroup ([#13890](https://github.com/leanprover-community/mathlib/pull/#13890))

The PR adds a lemma stating `g ^ index H ∈ H`. I had to restate `G` to avoid the fintype assumption on `G`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-04T22:19:37+00:00](https://github.com/leanprover-community/mathlib/commit/5696275aef07e5a567d328e053f5babfddb62103)
feat(data/list/big_operators): add `list.sublist.prod_le_prod'` etc ([#13879](https://github.com/leanprover-community/mathlib/pull/#13879))

* add `list.forall₂.prod_le_prod'`, `list.sublist.prod_le_prod'`, and `list.sublist_forall₂.prod_le_prod'`;
* add their additive versions;
* upgrade `list.forall₂_same` to an `iff`.

### [2022-05-04T20:04:22+00:00](https://github.com/leanprover-community/mathlib/commit/9503f73336f35b9e1e0c1b3a37a364768187749f)
feat(linear_algebra/dual): dual of a finite free module is finite free ([#13896](https://github.com/leanprover-community/mathlib/pull/#13896))

### [2022-05-04T20:04:21+00:00](https://github.com/leanprover-community/mathlib/commit/eb1a566f92f1561fa476c14bd72f37cf62257dbf)
refactor(set_theory/game/ordinal): Improve API ([#13878](https://github.com/leanprover-community/mathlib/pull/#13878))

We change our former equivalence `o.out.α ≃ o.to_pgame.left_moves` to an equivalence `{o' // o' < o} ≃ o.to_pgame.left_moves`. This makes two proofs much simpler. 

We also add a simple missing lemma, `to_pgame_equiv_iff`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-04T20:04:20+00:00](https://github.com/leanprover-community/mathlib/commit/28568bdbcb367cb4680e3292f02893068d27aff8)
feat(set_theory/game/nim): Add basic API ([#13857](https://github.com/leanprover-community/mathlib/pull/#13857))

### [2022-05-04T20:04:19+00:00](https://github.com/leanprover-community/mathlib/commit/a80e5683d1607bf62d580d4b26b80670e4239c1d)
feat(logic/equiv/set): equivalences between all preimages gives an equivalence of domains ([#13853](https://github.com/leanprover-community/mathlib/pull/#13853))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-04T20:04:18+00:00](https://github.com/leanprover-community/mathlib/commit/edf6cefaa1ab4eb886c632102f62a87691647724)
feat(set_theory/game/nim): `nim 0` is a relabelling of `0` and `nim 1` is a relabelling of `star` ([#13846](https://github.com/leanprover-community/mathlib/pull/#13846))

### [2022-05-04T20:04:17+00:00](https://github.com/leanprover-community/mathlib/commit/fd8474f55263f48c9f5293b8cf6ece4737145cf2)
feat(algebra/ring/idempotents): Introduce idempotents ([#13830](https://github.com/leanprover-community/mathlib/pull/#13830))




Co-authored-by: Christopher Hoskin <mans0954@users.noreply.github.com>

### [2022-05-04T20:04:15+00:00](https://github.com/leanprover-community/mathlib/commit/91c0ef86c522355b76acbfa92def7e9512144e72)
feat(analysis/normed_space/weak_dual): add the rest of Banach-Alaoglu theorem ([#9862](https://github.com/leanprover-community/mathlib/pull/#9862))

The second of two parts to add the Banach-Alaoglu theorem about the compactness of the closed unit ball (and more generally polar sets of neighborhoods of the origin) of the dual of a normed space in the weak-star topology.

This second half is about the embedding of the weak dual of a normed space into a (big) product of the ground fields, and the required compactness statements from Tychonoff's theorem. In particular it contains the actual Banach-Alaoglu theorem.

Co-Authored-By: Yury Kudryashov <urkud@urkud.name>



Co-authored-by: kkytola <39528102+kkytola@users.noreply.github.com>

### [2022-05-04T17:58:32+00:00](https://github.com/leanprover-community/mathlib/commit/90d6f2710f1463b34279fb1b79d497bcec4156d0)
ci(workflows/dependent-issues): run once every 15 mins, instead of on every merged PR ([#13940](https://github.com/leanprover-community/mathlib/pull/#13940))

### [2022-05-04T17:58:30+00:00](https://github.com/leanprover-community/mathlib/commit/aabcd8950d0738c0f5ae431461a488ac439c70bc)
chore(analysis/analytic_composition): weaken some typeclass arguments ([#13924](https://github.com/leanprover-community/mathlib/pull/#13924))

There's no need to do a long computation to show the multilinear_map is bounded, when continuity follows directly from the definition.

This deletes `comp_along_composition_aux`, and moves the lemmas about the norm of `comp_along_composition` further down the file so as to get the lemmas with weaker typeclass requirements out of the way first.
The norm proofs are essentially unchanged.

### [2022-05-04T17:58:29+00:00](https://github.com/leanprover-community/mathlib/commit/209bb5d4dcf7f692be8bf6b57ccbc81b5eb35512)
feat(set_theory/game/{pgame, basic}): Add more order lemmas ([#13807](https://github.com/leanprover-community/mathlib/pull/#13807))

### [2022-05-04T17:58:28+00:00](https://github.com/leanprover-community/mathlib/commit/31529827d0f68d1fbd429edc393a928f677f4aba)
feat(representation/Rep): linear structures ([#13782](https://github.com/leanprover-community/mathlib/pull/#13782))

Make `Rep k G` a `k`-linear (and `k`-linear monoidal) category.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-04T17:58:27+00:00](https://github.com/leanprover-community/mathlib/commit/0009ffbaae1afb5c9ee0a8cc1999ff95184870b2)
refactor(linear_algebra/charpoly): split file to reduce imports ([#13778](https://github.com/leanprover-community/mathlib/pull/#13778))

While working on representation theory I was annoyed to find that essentially all of field theory was being transitively imported (causing lots of unnecessary recompilation). This improves the situation slightly.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-04T17:58:26+00:00](https://github.com/leanprover-community/mathlib/commit/dd4590af908d6443402aed7fd8ad899917b2a518)
refactor(algebra/restrict_scalars): remove global instance on module_orig ([#13759](https://github.com/leanprover-community/mathlib/pull/#13759))

The global instance was conceptually wrong, unnecessary (after avoiding a hack in algebra/lie/base_change.lean), and wreaking havoc in [#13713](https://github.com/leanprover-community/mathlib/pull/#13713).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-05-04T17:58:24+00:00](https://github.com/leanprover-community/mathlib/commit/abcd601cd12c86fce3b85942817e1ca78e31b0c7)
fix(src/tactic/alias): Teach `get_alias_target` about `alias f ↔ a b` ([#13742](https://github.com/leanprover-community/mathlib/pull/#13742))

the `get_alias_target` function in `alias.lean` is used by the
`to_additive` command to add the “Alias of …” docstring when creating an
additive version of an existing alias (this was [#13330](https://github.com/leanprover-community/mathlib/pull/#13330)).

But `get_alias_target` did not work for `alias f ↔ a b`. This fixes it
by extending the `alias_attr` map to not just store whether a defintion
is an alias, but also what it is an alias of. Much more principled than
trying to reconstruct the alias target from the RHS of the alias
definition.

Note that `alias` currently says “Alias of `foo_iff`” even though it’s
really an alias of `foo_iff.mp`. This is an existing bug, not fixed in
this PR – the effect is just that this “bug” will uniformly apply to
additive lemmas as well.

Hopefully will get rid of plenty of nolint.txt entries, and create
better docs.

Also improve the test file for the linter significantly.

### [2022-05-04T15:53:31+00:00](https://github.com/leanprover-community/mathlib/commit/0038a0436f689d37fd3ad00d69d617c338ae6028)
feat(data/int/cast): int cast division lemmas ([#13929](https://github.com/leanprover-community/mathlib/pull/#13929))

Adds lemmas for passing int cast through division, and renames the nat versions from `nat.cast_dvd` to `nat.cast_div`. 
Also some golf.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-04T15:53:30+00:00](https://github.com/leanprover-community/mathlib/commit/46023701ec7ed21d8f4126834a758b54e826386b)
feat(set_theory/game/birthday): More basic lemmas on birthdays ([#13729](https://github.com/leanprover-community/mathlib/pull/#13729))

### [2022-05-04T15:53:29+00:00](https://github.com/leanprover-community/mathlib/commit/60ad8448586c787c4cc409173ef2923810809447)
feat(group_theory/complement): API lemmas relating `range_mem_transversals` and `to_equiv` ([#13694](https://github.com/leanprover-community/mathlib/pull/#13694))

This PR adds an API lemma relating `range_mem_left_transversals` (the main way of constructing left transversals) and `mem_left_transversals.to_equiv` (one of the main constructions from left transversals), and a similar lemma relating the right versions.

### [2022-05-04T15:53:28+00:00](https://github.com/leanprover-community/mathlib/commit/923ae0bc059a456feeeb08fcbd0749439904777e)
feat(group_theory/free_group): is_free_group via `free_group X ≃* G` ([#13633](https://github.com/leanprover-community/mathlib/pull/#13633))

The previous definition of the `is_free_group` class was defined via the universal
property of free groups, which is intellectually pleasing, but
technically annoying, due to the universe problems of quantifying over
“all other groups” in the definition. To work around them, many
definitions had to be duplicated.

This changes the definition of `is_free_group` to contain an isomorphism
between the `free_group` over the generator and `G`. It also moves this
class into `free_group.lean`, so that it can be found more easily.

Relevant Zulip thread:
<https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe.20levels.20for.20is_free_group>

A previous attempt at reforming `is_free_group` to unbundle the set
of generators (`is_freely_generated_by G X`) is on branch
`joachim/is_freely_generated_by`, but it wasn't very elegant to use in some places.

### [2022-05-04T15:53:27+00:00](https://github.com/leanprover-community/mathlib/commit/552a470943af7f335184c272deac01eac0237df9)
feat(number_theory/cyclotomic/rat): the ring of integers of cyclotomic fields. ([#13585](https://github.com/leanprover-community/mathlib/pull/#13585))

We compute the ring of integers of a `p ^ n`-th cyclotomic extension of `ℚ`.

From flt-regular



Co-authored-by: Eric Rodriguez <ericrboidi@gmail.com>

### [2022-05-04T15:53:26+00:00](https://github.com/leanprover-community/mathlib/commit/e71613938c5bf2466f931e8c935505ac3929ca64)
feat(algebra/homology/Module): API for complexes of modules ([#12622](https://github.com/leanprover-community/mathlib/pull/#12622))

API for homological complexes in `Module R`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>

### [2022-05-04T15:53:24+00:00](https://github.com/leanprover-community/mathlib/commit/a7c50973a983daab8e850d3c97abe8bc4d9ea2e0)
feat(set_theory/cardinal/cofinality): Cofinality of normal functions ([#12384](https://github.com/leanprover-community/mathlib/pull/#12384))

If `f` is normal and `a` is limit, then `cof (f a) = cof a`. We use this to golf `cof_add` from 24 lines down to 6.

### [2022-05-04T15:53:23+00:00](https://github.com/leanprover-community/mathlib/commit/d565adb7ef4acb81b73435eca0aca865fa09a9c5)
feat(analysis/convex/topology): Separating by convex sets ([#11458](https://github.com/leanprover-community/mathlib/pull/#11458))

When `s` is compact, `t` is closed and both are convex, we can find disjoint open convex sets containing `s` and `t`.

### [2022-05-04T14:57:36+00:00](https://github.com/leanprover-community/mathlib/commit/32320a100c580e1f5b0339ebf03c2b8d8a92fe90)
feat(measure_theory/integral/lebesgue): speed up a proof ([#13946](https://github.com/leanprover-community/mathlib/pull/#13946))

### [2022-05-04T11:10:47+00:00](https://github.com/leanprover-community/mathlib/commit/ceca8d741ffe664b90353d0a82ded9103082ba36)
fix(ring_theory/polynomial/basic): fix unexpected change of an implicit parameter ([#13935](https://github.com/leanprover-community/mathlib/pull/#13935))

Fix unexpected change of an implicit parameter in the previous PR([#13800](https://github.com/leanprover-community/mathlib/pull/#13800)).

Fix docstring.

### [2022-05-04T11:10:46+00:00](https://github.com/leanprover-community/mathlib/commit/53c79d561eec6b94be44bdaedeb2621361aa514f)
feat(linear_algebra/span): add `finite_span_is_compact_element` ([#13901](https://github.com/leanprover-community/mathlib/pull/#13901))

This PR adds `finite_span_is_compact_element`, which extends `singleton_span_is_compact_element` to the spans of finite subsets.
This will be useful e.g. when proving the existence of a maximal submodule of a finitely generated module.

### [2022-05-04T11:10:45+00:00](https://github.com/leanprover-community/mathlib/commit/a057441eb14fe0e65a5588084e7e2c1193b82579)
feat(order/basic): Notation for `order_dual` ([#13798](https://github.com/leanprover-community/mathlib/pull/#13798))

Define `αᵒᵈ` as notation for `order_dual α` and replace current uses.

[Zulip poll](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation.20for.20order_dual/near/280629129)

### [2022-05-04T11:10:44+00:00](https://github.com/leanprover-community/mathlib/commit/402e5647e15c7ffc54642586a4643653809fea42)
feat(linear_algebra/prod): linear version of prod_map ([#13751](https://github.com/leanprover-community/mathlib/pull/#13751))




Co-authored-by: antoinelab01 <66086247+antoinelab01@users.noreply.github.com>

### [2022-05-04T11:10:43+00:00](https://github.com/leanprover-community/mathlib/commit/e1f00bc7f9533db84552999828c627155ee96075)
feat(order/well_founded): Well founded relations are asymmetric and irreflexive ([#13692](https://github.com/leanprover-community/mathlib/pull/#13692))

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-05-04T11:10:42+00:00](https://github.com/leanprover-community/mathlib/commit/6c7b880ed2cd2c48fe92576b33a48a29150d565b)
feat(algebra/module/torsion): torsion ideal, decomposition lemma ([#13414](https://github.com/leanprover-community/mathlib/pull/#13414))

Defines the torsion ideal of an element in a module, and also shows a decomposition lemma for torsion modules.



Co-authored-by: pbazin <75327486+pbazin@users.noreply.github.com>

### [2022-05-04T11:10:40+00:00](https://github.com/leanprover-community/mathlib/commit/e24f7f7ae84b6b7987073bd99ff4ed60ef469124)
move(set_theory/ordinal/{arithmetic → fixed_points}): Move `nfp` ([#13315](https://github.com/leanprover-community/mathlib/pull/#13315))

That way, it belong with the other functions about fixed points.

### [2022-05-04T07:51:01+00:00](https://github.com/leanprover-community/mathlib/commit/1a862493f1cd226be1f2e26d46e4a53a57c26436)
feat(measure_theory/function/l1_space): add `integrable_smul_measure` ([#13922](https://github.com/leanprover-community/mathlib/pull/#13922))

* add `integrable_smul_measure`, an `iff` version of
  `integrable.smul_measure`;
* add `integrable_average`, an `iff` version of `integrable.to_average`.

### [2022-05-04T07:51:00+00:00](https://github.com/leanprover-community/mathlib/commit/af4c6c8afa4b7136902f6359bf01c5fd888cdce6)
chore(ring_theory/polynomial/basic): golf polynomial_not_is_field ([#13919](https://github.com/leanprover-community/mathlib/pull/#13919))

### [2022-05-04T07:50:59+00:00](https://github.com/leanprover-community/mathlib/commit/d0efe252cb8bd36e8c1e5557a97e6c5bf31ba11c)
feat(data/finset/prod): diag of union ([#13916](https://github.com/leanprover-community/mathlib/pull/#13916))

Lemmas about diag and off diag in relation to simple finset constructions.

### [2022-05-04T07:50:58+00:00](https://github.com/leanprover-community/mathlib/commit/098ab17f68a4533aae57771d2bfc3058a6165de6)
feat(category_theory/simple): nonzero morphisms to/from a simple are epi/mono ([#13905](https://github.com/leanprover-community/mathlib/pull/#13905))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-04T07:50:57+00:00](https://github.com/leanprover-community/mathlib/commit/455393d346008ac4b08dc7ae49888d4a1d94e6f4)
refactor(group_theory/{submonoid, subsemigroup}/{center, centralizer}): move set.center and set.centralizer into subsemigroup ([#13903](https://github.com/leanprover-community/mathlib/pull/#13903))

This moves `set.center` and `set.centralizer` (the center and centralizers for a magma) into `group_theory/subsemigroup/{center, centralizer}` so that we can define the center and centralizers for semigroups in [#13627](https://github.com/leanprover-community/mathlib/pull/#13627).

### [2022-05-04T07:50:55+00:00](https://github.com/leanprover-community/mathlib/commit/e6b84992199574b59393cf0fbed437d5f0b14ceb)
feat(ring_theory/valuation/valuation_subring): Adds some equivalent conditions for equivalence of valuations ([#13895](https://github.com/leanprover-community/mathlib/pull/#13895))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-04T07:50:54+00:00](https://github.com/leanprover-community/mathlib/commit/6d370064d8fc595aab91befef52f950c3ab8630e)
feat(data/list/basic): add `list.cons_diff` ([#13892](https://github.com/leanprover-community/mathlib/pull/#13892))

### [2022-05-04T07:50:53+00:00](https://github.com/leanprover-community/mathlib/commit/269bc85dfd5b866576c9b29af87b4cbf6bd2ab2c)
feat(analysis/matrix): add `frobenius_norm_conj_transpose` ([#13883](https://github.com/leanprover-community/mathlib/pull/#13883))

This also moves the existing lemmas about the elementwise norm to the same file.

### [2022-05-04T07:50:52+00:00](https://github.com/leanprover-community/mathlib/commit/d537897a924791827325d44ece505b10d7a3096e)
feat(category_theory/simple): simple objects are indecomposable ([#13882](https://github.com/leanprover-community/mathlib/pull/#13882))

Remarkably tedious.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-04T07:50:51+00:00](https://github.com/leanprover-community/mathlib/commit/1afdaf96bfd4b62658e486541ee2662615a3b157)
feat(linear_algebra/trace): more general versions of `trace_mul_comm` and `trace_conj` ([#13874](https://github.com/leanprover-community/mathlib/pull/#13874))

### [2022-05-04T07:50:50+00:00](https://github.com/leanprover-community/mathlib/commit/517aa8b6f54a2730709a3f294b4306d3f0de4ee2)
feat(topology/algebra/star): continuity of `star` ([#13855](https://github.com/leanprover-community/mathlib/pull/#13855))

This adds the obvious instances for `pi`, `prod`, `units`, `mul_opposite`, `real`, `complex`, `is_R_or_C`, and `matrix`.

We already had a `continuous_star` lemma, but it had stronger typeclass assumptions.

This resolves multiple TODO comments.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-05-04T07:50:49+00:00](https://github.com/leanprover-community/mathlib/commit/35c8980d95a735a176fff87a5619f3fd1a97ef7d)
feat(analysis/asymptotics/specific_asymptotics): Cesaro averaging preserves convergence ([#13825](https://github.com/leanprover-community/mathlib/pull/#13825))

### [2022-05-04T07:50:48+00:00](https://github.com/leanprover-community/mathlib/commit/6e0033066b049b9689ef6d3aa7e2970e8e175385)
feat(algebra/squarefree): relate squarefree on naturals to factorization ([#13816](https://github.com/leanprover-community/mathlib/pull/#13816))

Also moves `nat.two_le_iff` higher up the hierarchy since it's an elementary lemma and give it a more appropriate type.

The lemma `squarefree_iff_prime_sq_not_dvd` has been deleted because it's a duplicate of a lemma which is already earlier in the same file.



Co-authored-by: Bhavik Mehta <bm489@cam.ac.uk>

### [2022-05-04T07:50:47+00:00](https://github.com/leanprover-community/mathlib/commit/ba4bf54514b4ba6ed84cbc226c5d5e45762cea0c)
feat(set_theory/game/pgame): Add more congr lemmas ([#13808](https://github.com/leanprover-community/mathlib/pull/#13808))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-05-04T07:50:46+00:00](https://github.com/leanprover-community/mathlib/commit/85657f1b887a19de9aa4b6d2c326e15470b724fe)
feat(algebra/category/FinVect): has finite limits ([#13793](https://github.com/leanprover-community/mathlib/pull/#13793))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-04T07:50:45+00:00](https://github.com/leanprover-community/mathlib/commit/e3d38edbcbb728b03a9ffdc098b6e3b566d010b3)
feat(algebra/hom/non_unital_alg): some constructions for `prod` ([#13785](https://github.com/leanprover-community/mathlib/pull/#13785))

### [2022-05-04T07:50:44+00:00](https://github.com/leanprover-community/mathlib/commit/9015d2adb19ee4166685d63ea54f5e97d026ac2e)
refactor(set_theory/game/pgame): Redefine `subsequent` ([#13752](https://github.com/leanprover-community/mathlib/pull/#13752))

We redefine `subsequent` as `trans_gen is_option`. This gives a much nicer induction principle than the previous one, and allows us to immediately prove well-foundedness.

### [2022-05-04T07:50:43+00:00](https://github.com/leanprover-community/mathlib/commit/b337b921b0a15855924e88712d5fe51f95a08d1a)
feat(model_theory/satisfiability): A union of a directed family of satisfiable theories is satisfiable ([#13750](https://github.com/leanprover-community/mathlib/pull/#13750))

Proves `first_order.language.Theory.is_satisfiable_directed_union_iff` - the union of a directed family of theories is satisfiable if and only if all of the theories in the family are satisfiable.

### [2022-05-04T07:50:40+00:00](https://github.com/leanprover-community/mathlib/commit/51d816755aac557749ca7339fb4eb77e3e8996ec)
feat(model_theory/elementary_maps): The elementary diagram of a structure ([#13724](https://github.com/leanprover-community/mathlib/pull/#13724))

Defines the elementary diagram of a structure - the theory consisting of all sentences with parameters it satisfies.
Defines the canonical elementary embedding of a structure into any model of its elementary diagram.

### [2022-05-04T07:50:39+00:00](https://github.com/leanprover-community/mathlib/commit/319d50280e1294d6e37f2ab239f27a4c9d354f7d)
refactor(linear_algebra/*): more generalisations ([#13668](https://github.com/leanprover-community/mathlib/pull/#13668))

Many further generalisations from `field` to `division_ring` in the linear algebra library.

This PR changes some proofs; it's not just relaxing hypotheses.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-04T07:50:38+00:00](https://github.com/leanprover-community/mathlib/commit/36c5faacbd3ca2403a511ff154493f1bc1fca33f)
feat(set_theory/game/pgame): Tweak `pgame.mul` API ([#13651](https://github.com/leanprover-community/mathlib/pull/#13651))

We modify the API for `pgame.mul` in two ways:

- `left_moves_mul` and `right_moves_mul` are turned from type equivalences into type equalities.
- The former equivalences are prefixed with `to_` and inverted.

### [2022-05-04T07:50:37+00:00](https://github.com/leanprover-community/mathlib/commit/bd23639bf5754851c49f2ad05f1f8aef54bd3829)
feat(topology/bornology): add more instances ([#13621](https://github.com/leanprover-community/mathlib/pull/#13621))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-05-04T07:50:35+00:00](https://github.com/leanprover-community/mathlib/commit/2402b4d80ade4d5f7aa1a757da116368b18686b6)
feat(set_theory/game/pgame): Tweak `pgame.neg` API ([#13617](https://github.com/leanprover-community/mathlib/pull/#13617))

We modify the API for `pgame.neg` in various ways: 

- `left_moves_neg` and `right_moves_neg` are turned from type equivalences into type equalities.
- The former equivalences are prefixed with `to_` and inverted.

We also golf a few theorems.

### [2022-05-04T06:42:38+00:00](https://github.com/leanprover-community/mathlib/commit/58de2a0a0b901e0b5263635622177589773b1b50)
chore(analysis): use nnnorm notation everywhere ([#13930](https://github.com/leanprover-community/mathlib/pull/#13930))

This was done with a series of ad-hoc regular expressions, then cleaned up by hand.

### [2022-05-04T06:42:36+00:00](https://github.com/leanprover-community/mathlib/commit/6f3426cf4f862fbd800ca9ab8c494ceb155974e0)
chore(number_theory/legendre_symbol/quadratic_char): golf some proofs ([#13926](https://github.com/leanprover-community/mathlib/pull/#13926))

### [2022-05-04T06:42:35+00:00](https://github.com/leanprover-community/mathlib/commit/171825a926fa0bb43dc23efcd97442322304d0db)
chore(algebra/order/floor): missing simp lemmas on floor of nat and int ([#13904](https://github.com/leanprover-community/mathlib/pull/#13904))

### [2022-05-04T05:51:33+00:00](https://github.com/leanprover-community/mathlib/commit/4d0b6301ef962e6bd74462998943ce38b7adb132)
feat(category_theory/bicategory/coherence_tactic): coherence tactic for bicategories ([#13417](https://github.com/leanprover-community/mathlib/pull/#13417))

This PR extends the coherence tactic for monoidal categories [#13125](https://github.com/leanprover-community/mathlib/pull/#13125) to bicategories. The setup is the same as for monoidal case except for the following : we normalize 2-morphisms before running the coherence tactic. This normalization is achieved by the set of simp lemmas in `whisker_simps` defined in `coherence_tactic.lean`.

As a test of the tactic in the real world, I have proved several properties of adjunction in bicategories in [#13418](https://github.com/leanprover-community/mathlib/pull/#13418). Unfortunately some proofs cause timeout, so it seems that we need to speed up the coherence tactic in the future.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-04T05:16:36+00:00](https://github.com/leanprover-community/mathlib/commit/c1f329df4f29d9411585df27b38dcfc180ff55ae)
feat(data/zmod/quotient): The quotient `<a>/stab(b)` is cyclic of order `minimal_period ((+ᵥ) a) b` ([#13722](https://github.com/leanprover-community/mathlib/pull/#13722))

This PR adds an isomorphism stating that the quotient `<a>/stab(b)` is cyclic of order `minimal_period ((+ᵥ) a) b`.

There is also a multiplicative version, but it is easily proved from the additive version, so I'll PR the multiplicative version afterwards.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-04T04:20:31+00:00](https://github.com/leanprover-community/mathlib/commit/a2a873fc0d70e8488ddabd82194ecfa7e03015e9)
chore(scripts): update nolints.txt ([#13932](https://github.com/leanprover-community/mathlib/pull/#13932))

I am happy to remove some nolints for you!

### [2022-05-04T01:08:00+00:00](https://github.com/leanprover-community/mathlib/commit/dd584384a10448029c50519a25803c85b22789ed)
feat(set_theory/game/short): Birthday of short games ([#13875](https://github.com/leanprover-community/mathlib/pull/#13875))

We prove that a short game has a finite birthday. We also clean up the file somewhat.

### [2022-05-04T00:13:27+00:00](https://github.com/leanprover-community/mathlib/commit/fc3de1972fd9f6f215b9d3910a093b3dec92fc51)
feat(ring_theory/ideal/local_ring): generalize lemmas to semirings ([#13471](https://github.com/leanprover-community/mathlib/pull/#13471))

What is essentially new is the proof of `local_ring.of_surjective` and `local_ring.is_unit_or_is_unit_of_is_unit_add`.

- I changed the definition of local ring to `local_ring.of_is_unit_or_is_unit_of_add_one`, which is reminiscent of the definition before the recent change in [#13341](https://github.com/leanprover-community/mathlib/pull/#13341). The equivalence of the previous definition is essentially given by `local_ring.is_unit_or_is_unit_of_is_unit_add`. The choice of the definition is insignificant here because they are all equivalent, but I think the choice here is better for the default constructor because this condition is "weaker" than e.g. `local_ring.of_non_units_add` in some sense.

- The proof of `local_ring.of_surjective` needs `[is_local_ring_hom f]`, which was not necessary for commutative rings in the previous proof. So the new version here is not a genuine generalization of the previous version. The previous version was  renamed to `local_ring.of_surjective'`.

### [2022-05-03T23:37:38+00:00](https://github.com/leanprover-community/mathlib/commit/6c0580a2e81c8320725548e3f18b6a299264b9a2)
fix(.docker/*): update elan URL ([#13928](https://github.com/leanprover-community/mathlib/pull/#13928))

These are hopefully the last occurrences of the URL that was breaking things earlier today. cf. [#13906](https://github.com/leanprover-community/mathlib/pull/#13906)

### [2022-05-03T22:34:05+00:00](https://github.com/leanprover-community/mathlib/commit/fd65159725ca63778da71bcd25b2190489a979d6)
feat(topology/metric_space/basic): golf, avoid unfold ([#13923](https://github.com/leanprover-community/mathlib/pull/#13923))

* Don't use `unfold` in `nnreal.pseudo_metric_space`.
* Golf some proofs.

### [2022-05-03T21:57:27+00:00](https://github.com/leanprover-community/mathlib/commit/de07131ef3c3a986eb1ba3c5677d789ff132abe4)
feat(measure_theory/integral/torus_integral): torus integral and its properties ([#12892](https://github.com/leanprover-community/mathlib/pull/#12892))

Define a generalized torus map and prove some basic properties.
Define the torus integral and the integrability of functions on a generalized torus, and prove lemmas about them.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-05-03T20:33:18+00:00](https://github.com/leanprover-community/mathlib/commit/9c0dfcd81b268269792f53b748f999f983ab9ba6)
doc(order/countable_dense_linear_order): Fix minor mistake ([#13921](https://github.com/leanprover-community/mathlib/pull/#13921))

I wrongfully removed some instances of the word "linear" in [#12928](https://github.com/leanprover-community/mathlib/pull/#12928). This is in fact used as a hypothesis.

### [2022-05-03T19:18:51+00:00](https://github.com/leanprover-community/mathlib/commit/5cfb8dbcc9965bd6270947f4643172c20979245a)
refactor(ring_theory/jacobson_ideal): generalize lemmas to non-commutative rings ([#13865](https://github.com/leanprover-community/mathlib/pull/#13865))

The main change here is that the order of multiplication has been adjusted slightly in `mem_jacobson_iff`and `exists_mul_sub_mem_of_sub_one_mem_jacobson`. In the commutative case this doesn't matter anyway.

All the other changes are just moving lemmas between sections, the statements of no lemmas other than those two have been changed. No lemmas have been added or removed.

The lemmas about `is_unit` and quotients don't generalize as easily, so I've not attempted to touch those; that would require some mathematical insight, which is out of scope for this PR!

### [2022-05-03T18:19:54+00:00](https://github.com/leanprover-community/mathlib/commit/16157f26bde58e04ae3babf40ef89c8ad147dd1c)
chore(topology/continuous_function/bounded): generalize from `normed_*` to `semi_normed_*` ([#13915](https://github.com/leanprover-community/mathlib/pull/#13915))

Every single lemma in this file generalized, apart from the ones that transferred a `normed_*` instance which obviously need the stronger assumption.

`dist_zero_of_empty` was the only lemma that actually needed reproving from scratch, all the other affected proofs are just split between two instances.

### [2022-05-03T18:19:53+00:00](https://github.com/leanprover-community/mathlib/commit/bd1d93596306387096bd9ea14aac11f6514c3e95)
feat(number_theory/legendre_symbol/): add some lemmas ([#13831](https://github.com/leanprover-community/mathlib/pull/#13831))

This adds essentially two lemmas on quadratic characters:
* `quadratic_char_neg_one_iff_not_is_square`, which says that the quadratic character takes the value `-1` exactly on non-squares, and
* `quadratic_char_number_of_sqrts`. which says that the number of square roots of `a : F` is `quadratic_char F a + 1`.

It also adds the corresponding statements, `legendre_sym_eq_neg_one_iff` and `legendre_sym_number_of_sqrts`, for the Legendre symbol.

### [2022-05-03T16:29:01+00:00](https://github.com/leanprover-community/mathlib/commit/7d28753753500766d0b0b2a36a3b3ed37e18cb57)
chore(normed_space/weak_dual): generalize `normed_group` to `semi_normed_group` ([#13914](https://github.com/leanprover-community/mathlib/pull/#13914))

This almost halves the time this file takes to build, and is more general too.

### [2022-05-03T16:29:00+00:00](https://github.com/leanprover-community/mathlib/commit/86887539c7b0ea357fd251800e81ff4a574170e1)
feat(set_theory/game/basic): Inline instances ([#13813](https://github.com/leanprover-community/mathlib/pull/#13813))

We also add a few missing instances.

### [2022-05-03T16:28:59+00:00](https://github.com/leanprover-community/mathlib/commit/5c433d03f821fa9f111ea6ec6d9b5675e8d3a249)
feat(algebra/big_operators/basic): `prod_list_count` and `prod_list_count_of_subset` ([#13370](https://github.com/leanprover-community/mathlib/pull/#13370))

Add 
`prod_list_count (l : list α) : l.prod = ∏ x in l.to_finset, (x ^ (l.count x))`
and
`prod_list_count_of_subset (l : list α) (s : finset α) (hs : l.to_finset ⊆ s) : l.prod = ∏ x in s, x ^ (l.count x)`
as counterparts of `prod_multiset_count` and `prod_multiset_count_of_subset` (whose proofs are then golfed using the new lemmas).

### [2022-05-03T14:29:31+00:00](https://github.com/leanprover-community/mathlib/commit/40b595239b1441b80cb9b3eb3d20d7aa57c4e411)
doc(analysis/matrix): fix broken LaTeX ([#13910](https://github.com/leanprover-community/mathlib/pull/#13910))

### [2022-05-03T14:29:30+00:00](https://github.com/leanprover-community/mathlib/commit/1c4d2b7ccfa5ce0d0921bb4f61aa27821db606b9)
feat(linear_algebra/matrix/trace): add `trace_conj_transpose` ([#13888](https://github.com/leanprover-community/mathlib/pull/#13888))

### [2022-05-03T14:29:29+00:00](https://github.com/leanprover-community/mathlib/commit/0f8d7a99ca8bc9cafc10d4f853f76084e2215b45)
feat(order/omega_complete_partial_order): make `continuous_hom.prod.apply` continuous ([#13833](https://github.com/leanprover-community/mathlib/pull/#13833))

Previous it was defined as `apply : (α →𝒄 β) × α →o β` and the comment
said that it would make sense to define it as a continuous function, but
we need an instance for `α →𝒄 β` first. But then let’s just define that
instance first, and then define `apply : (α →𝒄 β) × α →𝒄 β` as you would
expect.

Also rephrases `lemma ωSup_ωSup` differently now that `apply` is
continuous.

### [2022-05-03T14:29:28+00:00](https://github.com/leanprover-community/mathlib/commit/475a533469a8f078f44213f9a97fefb5b9d9af11)
feat(topology/algebra/module/basic): A continuous linear functional is open ([#13829](https://github.com/leanprover-community/mathlib/pull/#13829))

### [2022-05-03T14:29:27+00:00](https://github.com/leanprover-community/mathlib/commit/4cea0a8fc0d71a8c906faa887890c62ba52495a0)
move(data/pi/*): Group `pi` files ([#13826](https://github.com/leanprover-community/mathlib/pull/#13826))

Move `data.pi` to `data.pi.algebra` and `order.pilex` to `data.pi.lex`.

### [2022-05-03T14:29:25+00:00](https://github.com/leanprover-community/mathlib/commit/8a5b4a7c1e59fc8bf83d74ead11a9bfaee1b0a52)
feat(analysis/special_functions/complex/arg): lemmas about `arg z` and `±(π / 2)` ([#13821](https://github.com/leanprover-community/mathlib/pull/#13821))

### [2022-05-03T14:29:24+00:00](https://github.com/leanprover-community/mathlib/commit/2f38ccb4d5529facc13e13b7d049199ac2db52e9)
chore(data/matrix/basic): add lemmas about powers of matrices ([#13815](https://github.com/leanprover-community/mathlib/pull/#13815))

Shows that:
* natural powers commute with `transpose`, `conj_transpose`, `diagonal`, `block_diagonal`, and `block_diagonal'`.
* integer powers commute with `transpose`, and `conj_transpose`.

### [2022-05-03T14:29:24+00:00](https://github.com/leanprover-community/mathlib/commit/36b5341d21e32968805371d91e1486aa97c88c91)
feat(ring_theory/polynomial/basic): reduce assumptions, golf ([#13800](https://github.com/leanprover-community/mathlib/pull/#13800))

There is some reorder, so the diff is a bit large. Sorry for that.

### [2022-05-03T14:29:22+00:00](https://github.com/leanprover-community/mathlib/commit/6d2788c27600964d433697babe0861a58dd1c5aa)
feat(analysis/calculus/cont_diff): cont_diff_succ_iff_fderiv_apply ([#13797](https://github.com/leanprover-community/mathlib/pull/#13797))

* Prove that a map is `C^(n+1)` iff it is differentiable and all its directional derivatives in all points are `C^n`. 
* Also some supporting lemmas about `continuous_linear_equiv`.
* We only manage to prove this when the domain is finite dimensional.
* Prove one direction of `cont_diff_on_succ_iff_fderiv_within` with fewer assumptions
* From the sphere eversion project

Co-authored by: Patrick Massot [patrick.massot@u-psud.fr](mailto:patrick.massot@u-psud.fr)
Co-authored by: Oliver Nash [github@olivernash.org](mailto:github@olivernash.org)

### [2022-05-03T14:29:21+00:00](https://github.com/leanprover-community/mathlib/commit/234b3df25a0f94ff15411b64372cc3fdb0615e03)
feat(analysis/normed_space): lemmas about continuous bilinear maps ([#13522](https://github.com/leanprover-community/mathlib/pull/#13522))

* Define `continuous_linear_map.map_sub₂` and friends, similar to the lemmas for `linear_map`. 
* Rename `continuous_linear_map.map_add₂` to `continuous_linear_map.map_add_add`
* Two comments refer to `continuous.comp₂`, which will be added in [#13423](https://github.com/leanprover-community/mathlib/pull/#13423) (but there is otherwise no dependency on this PR).
* Define `precompR` and `precompL`, which will be used to compute the derivative of a convolution.
* From the sphere eversion project
* Required for convolutions

### [2022-05-03T12:18:57+00:00](https://github.com/leanprover-community/mathlib/commit/3b971a7bed3dae6f1bc44717e82d5390d48ba1e7)
feat(data/zmod/basic): Add `zmod.cast_sub_one` ([#13889](https://github.com/leanprover-community/mathlib/pull/#13889))

This PR adds `zmod.cast_sub_one`, an analog of `fin.coe_sub_one`. Unfortunately, the proof is a bit long. But maybe it can be golfed?



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-05-03T12:18:56+00:00](https://github.com/leanprover-community/mathlib/commit/78c86e1de7ecba60f9ee8aedf423832e7fff2702)
chore(data/nat/totient): golf three lemmas ([#13886](https://github.com/leanprover-community/mathlib/pull/#13886))

Golf the proofs of `totient_le`, `totient_lt`, and `totient_pos`

### [2022-05-03T12:18:55+00:00](https://github.com/leanprover-community/mathlib/commit/9f818ce0fe16e689dc799808e8dcb81d9d028351)
feat(set_theory/ordinal_basic): `o.out.α` is equivalent to the ordinals below `o` ([#13876](https://github.com/leanprover-community/mathlib/pull/#13876))

### [2022-05-03T12:18:54+00:00](https://github.com/leanprover-community/mathlib/commit/82b9c42f7adbe4e0a494fa0cbdd2651d0f49c597)
feat(set_theory/game/nim): Mark many lemmas as `simp` ([#13844](https://github.com/leanprover-community/mathlib/pull/#13844))

### [2022-05-03T12:18:53+00:00](https://github.com/leanprover-community/mathlib/commit/e104992d2ed6f4c774f8f35dd84855077711e7cf)
chore(order/*): Replace total partial orders by linear orders ([#13839](https://github.com/leanprover-community/mathlib/pull/#13839))

`partial_order α` + `is_total α (≤)` has no more theorems than `linear_order α`  but is nonetheless used in some places. This replaces those uses by `linear_order α` or `complete_linear_order α`. Also make implicit one argument of `finset.lt_inf'_iff` and friends.

### [2022-05-03T12:18:52+00:00](https://github.com/leanprover-community/mathlib/commit/f6cb9be24263235f5326e2fc1fb4fea8df7c306e)
fix(data/complex/basic): make complex addition computable again ([#13837](https://github.com/leanprover-community/mathlib/pull/#13837))

This was fixed once before in [#8166](https://github.com/leanprover-community/mathlib/pull/#8166) (5f2358c43b769b334f3986a96565e606fe5bccec), but a new noncomputable shortcut appears if your file has more imports.

### [2022-05-03T12:18:51+00:00](https://github.com/leanprover-community/mathlib/commit/b07c0f70877ebe529e60f0cf5f0f3ecad4f3dbdd)
feat(set_theory/game/basic): Add `le_rfl` on games ([#13814](https://github.com/leanprover-community/mathlib/pull/#13814))

### [2022-05-03T12:18:50+00:00](https://github.com/leanprover-community/mathlib/commit/72816f95e620cc25e6f55468cf6eca1567e30041)
feat(data/real/nnreal): add `nnreal.forall` and `nnreal.exists` ([#13774](https://github.com/leanprover-community/mathlib/pull/#13774))

### [2022-05-03T12:18:49+00:00](https://github.com/leanprover-community/mathlib/commit/7931ba4416ad13f44768e3aeb95f834e546f5cbf)
feat(order/conditionally_complete_lattice): Simp theorems ([#13756](https://github.com/leanprover-community/mathlib/pull/#13756))

We remove `supr_unit` and `infi_unit` since, thanks to [#13741](https://github.com/leanprover-community/mathlib/pull/#13741), they can be proven by `simp`.

### [2022-05-03T11:43:28+00:00](https://github.com/leanprover-community/mathlib/commit/65cad4187da45259d3d74f3f2de5139ee0e8df8d)
chore(.github/workflows): use separate secret token for dependent issues ([#13902](https://github.com/leanprover-community/mathlib/pull/#13902))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-03T11:03:24+00:00](https://github.com/leanprover-community/mathlib/commit/1c39267116733f40fe874efaf25d8571def0d0fc)
ci(elan): update dead repository URLs ([#13906](https://github.com/leanprover-community/mathlib/pull/#13906))

`Kha/elan` is redirected by github to `leanprover/elan`, but seemingly with a cache that is delayed.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/install.20elan.20fails.20in.20CI/near/280981154)

### [2022-05-02T21:37:01+00:00](https://github.com/leanprover-community/mathlib/commit/ca1551c26a375d70da9a2c88f99ee650c596da68)
feat(data/finset/n_ary): Binary image of finsets ([#13718](https://github.com/leanprover-community/mathlib/pull/#13718))

Define `finset.image₂`, the binary map of finsets. Golf `data.finset.pointwise` using it.

### [2022-05-02T20:22:14+00:00](https://github.com/leanprover-community/mathlib/commit/174120760f712153fcca4a7d603f0236f76ff0e6)
feat(analysis/normed_space/exponential): `Aeᴮ = eᴮA` if `AB = BA` ([#13881](https://github.com/leanprover-community/mathlib/pull/#13881))

This commit shows that the exponenential commutes if the exponent does.
This generalizes a previous weaker result.

### [2022-05-02T19:32:06+00:00](https://github.com/leanprover-community/mathlib/commit/c44091fcf8c4a87d411ed6c7b86a325b4ff1532c)
feat(data/zmod/basic): Generalize `zmod.card` ([#13887](https://github.com/leanprover-community/mathlib/pull/#13887))

This PR generalizes `zmod.card` from assuming `[fact (0 < n)]` to assuming `[fintype (zmod n)]`.
Note that the latter was already part of the statement, but was previously deduced from the instance `instance fintype : Π (n : ℕ) [fact (0 < n)], fintype (zmod n)` on line 80.

### [2022-05-02T19:32:04+00:00](https://github.com/leanprover-community/mathlib/commit/2b0aeda1dbee991cd82ca3fd3d218b46e3d51878)
feat(measure/function/l*_space): a sample of useful lemmas on L^p spaces ([#13823](https://github.com/leanprover-community/mathlib/pull/#13823))

Used in [#13690](https://github.com/leanprover-community/mathlib/pull/#13690)

### [2022-05-02T17:28:50+00:00](https://github.com/leanprover-community/mathlib/commit/aa921ef3bb68c9cf18683dcd6eb737c794184b23)
docs(set_theory/game/pgame): Fix note on `pgame` ([#13880](https://github.com/leanprover-community/mathlib/pull/#13880))

We never actually quotient by extensionality. What we quotient by is game equivalence.

### [2022-05-02T17:28:49+00:00](https://github.com/leanprover-community/mathlib/commit/0606d7ca39d44b4c8d61fe798ce4a99305c2a4f4)
feat(set_theory/game/pgame): Negative of `of_lists` ([#13868](https://github.com/leanprover-community/mathlib/pull/#13868))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-05-02T17:28:48+00:00](https://github.com/leanprover-community/mathlib/commit/3e2f214527310a1003a340f2901324ee2d4389b1)
feat(logic/basic): Generalize `congr_fun_heq` ([#13867](https://github.com/leanprover-community/mathlib/pull/#13867))

The lemma holds for arbitrary heterogeneous equalities, not only that given by casts.

### [2022-05-02T17:28:47+00:00](https://github.com/leanprover-community/mathlib/commit/785f62c695ccb62810a794268fa250f78e06c94a)
feat(algebra/star/prod): elementwise `star` operator ([#13856](https://github.com/leanprover-community/mathlib/pull/#13856))

The lemmas and instances this provides are inspired by `algebra/star/pi`, and appear in the same order.

We should have these instances anyway for completness, but the motivation is to make it easy to talk about the continuity of `star` on `units R` via the `units.embed_product_star` lemma.

### [2022-05-02T17:28:46+00:00](https://github.com/leanprover-community/mathlib/commit/206a5f773bbbaf2adcf320825106097f0f193019)
feat(measure_theory/integral/bochner): Add a rewrite lemma saying the ennreal coercion of an integral of a nonnegative function equals the lintegral of the ennreal coercion of the function. ([#13701](https://github.com/leanprover-community/mathlib/pull/#13701))

This PR adds a rewrite lemma `of_real_integral_eq_lintegral_of_real` that is very similar to `lintegral_coe_eq_integral`, but for nonnegative real-valued functions instead of nnreal-valued functions.



Co-authored-by: kkytola <39528102+kkytola@users.noreply.github.com>

### [2022-05-02T17:28:45+00:00](https://github.com/leanprover-community/mathlib/commit/917b5275f33ff60aa0e1f60bf3bb6ef8203a50a5)
feat(topology/metric_space/thickened_indicator): Add definition and lemmas about thickened indicators. ([#13481](https://github.com/leanprover-community/mathlib/pull/#13481))

Add thickened indicators, to be used for the proof of the portmanteau theorem.

### [2022-05-02T15:58:17+00:00](https://github.com/leanprover-community/mathlib/commit/af11e154f8917054fd6e73f21a82893874b3d19e)
feat(algebra/big_operators/finprod): add lemma `finprod_eq_prod_of_mul_support_to_finset_subset'` ([#13801](https://github.com/leanprover-community/mathlib/pull/#13801))

Formalized as part of the Sphere Eversion project.

### [2022-05-02T15:58:16+00:00](https://github.com/leanprover-community/mathlib/commit/65843cdc05700c540d337d4ef3b9d20e44841e73)
feat(analysis/matrix): provide a normed_algebra structure on matrices ([#13518](https://github.com/leanprover-community/mathlib/pull/#13518))

This is one of the final pieces needed to defining the matrix exponential.

It would be nice to show:
```lean
lemma l1_linf_norm_to_matrix [nondiscrete_normed_field R] [decidable_eq n]
  (f : (n → R) →L[R] (m → R)) :
  ∥linear_map.to_matrix' (↑f : (n → R) →ₗ[R] (m → R))∥ = ∥f∥ :=
```
but its not clear to me under what generality it holds.

### [2022-05-02T15:58:14+00:00](https://github.com/leanprover-community/mathlib/commit/90418df51fdf2c642c160cbe80ab17da15620a72)
feat(linear_algebra/finite_dimensional): `finite_dimensional_iff_of_rank_eq_nsmul` ([#13357](https://github.com/leanprover-community/mathlib/pull/#13357))

If `V` has a dimension that is a scalar multiple of the dimension of `W`, then `V` is finite dimensional iff `W` is.

### [2022-05-02T15:58:14+00:00](https://github.com/leanprover-community/mathlib/commit/64bc02c5dec469f8b84c21bc4e49c39ee1b5edcb)
feat(ring_theory/dedekind_domain): Chinese remainder theorem for Dedekind domains ([#13067](https://github.com/leanprover-community/mathlib/pull/#13067))

The general Chinese remainder theorem states `R / I` is isomorphic to a product of `R / (P i ^ e i)`, where `P i` are comaximal, i.e.  `P i + P j = 1` for `i ≠ j`, and the infimum of all `P i` is `I`.

In a Dedekind domain the theorem can be stated in a more friendly way, namely that the `P i` are the factors (in the sense of a unique factorization domain) of `I`. This PR provides two ways of doing so, and includes some more lemmas on the ideals in a Dedekind domain.

### [2022-05-02T13:45:11+00:00](https://github.com/leanprover-community/mathlib/commit/384a7a39489e613464e05519f2a9324301822f59)
chore(.github/workflows/merge_conflicts.yaml): use separate token ([#13884](https://github.com/leanprover-community/mathlib/pull/#13884))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-02T13:45:10+00:00](https://github.com/leanprover-community/mathlib/commit/ad2e9365113b6966af44c9eb3e40e9b70bd4f15f)
feat(topology/homeomorph): add `(co)map_cocompact` ([#13861](https://github.com/leanprover-community/mathlib/pull/#13861))

Also rename `filter.comap_cocompact` to `filter.comap_cocompact_le`.

### [2022-05-02T13:45:09+00:00](https://github.com/leanprover-community/mathlib/commit/dbc033949e8ddb7b221bb9fd451d40db35f9c12f)
feat(category_theory/limits/shapes/types): explicit isos ([#13854](https://github.com/leanprover-community/mathlib/pull/#13854))

Requested on Zulip. https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/Relating.20the.20categorical.20product.20and.20the.20normal.20product



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-02T13:45:08+00:00](https://github.com/leanprover-community/mathlib/commit/9d3db5347e8c637ca8c0247bea649ec9fa500d64)
feat(category_theory/preadditive): End X is a division_ring or field when X is simple ([#13849](https://github.com/leanprover-community/mathlib/pull/#13849))

Consequences of Schur's lemma





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-02T13:45:07+00:00](https://github.com/leanprover-community/mathlib/commit/e5b48f9bf7f31a18a7d87eeedde572ea2e26c7c6)
chore(model_theory/basic): golf `countable_empty` ([#13836](https://github.com/leanprover-community/mathlib/pull/#13836))

### [2022-05-02T13:45:06+00:00](https://github.com/leanprover-community/mathlib/commit/4fe734da35688d84ba11b786d7f8af26ab5cdb53)
fix(algebra/indicator_function): add missing decidable instances to lemma statements   ([#13834](https://github.com/leanprover-community/mathlib/pull/#13834))

This keeps the definition of `set.indicator` as non-computable, but ensures that when lemmas are applied they generalize to any decidable instances.

### [2022-05-02T13:45:04+00:00](https://github.com/leanprover-community/mathlib/commit/cf5fa84cb487d04e580d45ba52839e91cb0fe13e)
feat(analysis/normed_space/add_torsor_bases): add lemma `smooth_barycentric_coord` ([#13764](https://github.com/leanprover-community/mathlib/pull/#13764))

Formalized as part of the Sphere Eversion project.

### [2022-05-02T13:45:03+00:00](https://github.com/leanprover-community/mathlib/commit/4113e00adf60e50fca319b741c5a6a77ecfe63b5)
feat(linear_algebra/affine_space/basis): add lemma `affine_basis.linear_combination_coord_eq_self` ([#13763](https://github.com/leanprover-community/mathlib/pull/#13763))


Formalized as part of the Sphere Eversion project.

### [2022-05-02T13:45:02+00:00](https://github.com/leanprover-community/mathlib/commit/b063c2861e09afb51c6eb0925319bd8cce1e79a7)
fix(src/tactic/alias): Support `alias foo ↔ ..` as documented ([#13743](https://github.com/leanprover-community/mathlib/pull/#13743))

the current code and the single(!) use of this feature work only if
you write `alias foo ↔ . .` which is very odd.

### [2022-05-02T13:45:01+00:00](https://github.com/leanprover-community/mathlib/commit/3fde0827a555c4df0562c60317c3bbe3e0781bb5)
refactor(topology/algebra/order): reorganize, simplify proofs ([#13716](https://github.com/leanprover-community/mathlib/pull/#13716))

* Prove `has_compact_mul_support.is_compact_range`
* Simplify the proof of `continuous.exists_forall_le_of_has_compact_mul_support` and `continuous.bdd_below_range_of_has_compact_mul_support` using `has_compact_mul_support.is_compact_range`.
* Reorder `topology.algebra.order.basic` so that `is_compact.bdd_below` and friends are together with all results about `order_closed_topology`.
* Move `continuous.bdd_below_range_of_has_compact_mul_support` (and dual) to `topology.algebra.order.basic`

### [2022-05-02T13:45:00+00:00](https://github.com/leanprover-community/mathlib/commit/52a454af5e524961fcc26fb1bde541b76f4e0292)
feat(category_theory/limits): pushouts and pullbacks in the opposite category ([#13495](https://github.com/leanprover-community/mathlib/pull/#13495))

This PR adds duality isomorphisms for the categories `wide_pushout_shape`, `wide_pullback_shape`, `walking_span`, `walking_cospan` and produce pullbacks/pushouts in the opposite category when pushouts/pullbacks exist.

### [2022-05-02T11:44:57+00:00](https://github.com/leanprover-community/mathlib/commit/61d5d308c6b2268799d2e4377a6232b34aced678)
feat(group_theory/group_action/basic): A multiplicative action induces an additive action of the additive group ([#13780](https://github.com/leanprover-community/mathlib/pull/#13780))

`mul_action M α` induces `add_action (additive M) α`.

### [2022-05-02T11:44:56+00:00](https://github.com/leanprover-community/mathlib/commit/320df450e9abeb5fc6417971e75acb6ae8bc3794)
refactor(linear_algebra/trace): unbundle `matrix.trace` ([#13712](https://github.com/leanprover-community/mathlib/pull/#13712))

These extra type arguments are annoying to work with in many cases, especially when Lean doesn't have any information to infer the mostly-irrelevant `R` argument from. This came up while trying to work with `continuous.matrix_trace`, which is annoying to use for that reason.
The old bundled version is still available as `matrix.trace_linear_map`.

The cost of this change is that we have to copy across the usual set of obvious lemmas about additive maps; but we already do this for `diagonal`, `transpose` etc anyway.

### [2022-05-02T11:44:55+00:00](https://github.com/leanprover-community/mathlib/commit/a6275694804455fe8995bd530e86b67ddab5cff1)
feat(category_theory/monoidal): adjunctions in rigid categories ([#13707](https://github.com/leanprover-community/mathlib/pull/#13707))

We construct the bijection on hom-sets `(Yᘁ ⊗ X ⟶ Z) ≃ (X ⟶ Y ⊗ Z)`
given by "pulling the string on the left" down or up, using right duals in a right rigid category.

As consequences, we show that a left rigid category is monoidal closed (it seems our lefts and rights have got mixed up!!), and that functors from a groupoid to a rigid category is again a rigid category.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-02T09:54:04+00:00](https://github.com/leanprover-community/mathlib/commit/fe445767f40c5f55ba36722675d6fcc3fd1f49e4)
feat(probability/martingale): the optional stopping theorem ([#13630](https://github.com/leanprover-community/mathlib/pull/#13630))


We prove the optional stopping theorem (also known as the fair game theorem). This is number 62 on Freek 100 theorems.

 

Co-authored-by: RemyDegenne <Remydegenne@gmail.com>
Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2022-05-02T06:04:17+00:00](https://github.com/leanprover-community/mathlib/commit/db0b495b3bdbea3e0fae1643c9d5b5eeefb30c60)
chore(category_theory/limits/cones): avoid a timeout from @[simps] ([#13877](https://github.com/leanprover-community/mathlib/pull/#13877))


This was causing a timeout on another branch.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-02T06:04:16+00:00](https://github.com/leanprover-community/mathlib/commit/67c0e13754a9cf0758833739296d5de67bd472c2)
doc(data/polynomial/basic): Remove references to `polynomial.norm2` ([#13847](https://github.com/leanprover-community/mathlib/pull/#13847))

`polynomial.norm2` was never added to mathlib.

### [2022-05-02T06:04:15+00:00](https://github.com/leanprover-community/mathlib/commit/03ed4c7858757aee7b2651ac27380ac87bcd4855)
move(topology/algebra/floor_ring → order/floor): Move topological properties of `⌊x⌋` and `⌈x⌉` ([#13824](https://github.com/leanprover-community/mathlib/pull/#13824))

Those belong in an order folder.

### [2022-05-02T06:04:14+00:00](https://github.com/leanprover-community/mathlib/commit/aaa167cd8798aaf0d0d7bb6ffa79f52b6d3497bb)
feat(linear_algebra/matrix/adjugate): `adjugate` of a diagonal matrix is diagonal ([#13818](https://github.com/leanprover-community/mathlib/pull/#13818))

This proof is a bit ugly...

### [2022-05-02T06:04:13+00:00](https://github.com/leanprover-community/mathlib/commit/34bbec610006e3df231f143b55fb7f30ac10aca7)
feat(logic/equiv/local_equiv): add `forall_mem_target`/`exists_mem_target` ([#13805](https://github.com/leanprover-community/mathlib/pull/#13805))

### [2022-05-02T06:04:12+00:00](https://github.com/leanprover-community/mathlib/commit/179b6c02ecc613ebe62a83cf8fd442260b78ddde)
feat(logic/equiv/local_equiv): add inhabited instances ([#13804](https://github.com/leanprover-community/mathlib/pull/#13804))

### [2022-05-02T06:04:11+00:00](https://github.com/leanprover-community/mathlib/commit/c1f8ac50998e43d01bba1f0e5de2f75651dd1b49)
feat(order/zorn): add Zorn lemma on a preorder ([#13803](https://github.com/leanprover-community/mathlib/pull/#13803))

### [2022-05-02T06:04:10+00:00](https://github.com/leanprover-community/mathlib/commit/925c4738dd9df03469a0d065babfdfaea7d7d30e)
chore(analysis/normed_space/add_torsor): make coefficients explicit in lemmas about eventual dilations ([#13796](https://github.com/leanprover-community/mathlib/pull/#13796))

For an example of why we should do this, see: https://github.com/leanprover-community/sphere-eversion/blob/19c461c9fba484090ff0af6f0c0204c623f63713/src/loops/surrounding.lean#L176

### [2022-05-02T06:04:09+00:00](https://github.com/leanprover-community/mathlib/commit/90b1ddba883f18ede7403e95947827fb9e1789d8)
feat(linear_algebra/finite_dimensional): of_injective ([#13792](https://github.com/leanprover-community/mathlib/pull/#13792))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-02T06:04:08+00:00](https://github.com/leanprover-community/mathlib/commit/0587eb186a483ce1224481bb5e06b188f669ea19)
feat(data/zmod/basic): Variant of `zmod.val_int_cast` ([#13781](https://github.com/leanprover-community/mathlib/pull/#13781))

This PR adds a variant of `zmod.val_int_cast` avoiding the characteristic assumption.

### [2022-05-02T06:04:07+00:00](https://github.com/leanprover-community/mathlib/commit/fd4188d7fb31507e570074482b8cda1e71067966)
feat(data/zmod/basic): `zmod 0` is infinite ([#13779](https://github.com/leanprover-community/mathlib/pull/#13779))

This PR adds an instance stating that `zmod 0` is infinite.

### [2022-05-02T06:04:06+00:00](https://github.com/leanprover-community/mathlib/commit/5c914907eedd469fc355ad864a10130ad86618cd)
refactor(field_theory/separable): move content about polynomial.expand earlier ([#13776](https://github.com/leanprover-community/mathlib/pull/#13776))

There were some definitions about polynomial.expand buried in the middle of `field_theory.separable` for no good reason. No changes to content, just moves stuff to an earlier file.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-02T06:04:05+00:00](https://github.com/leanprover-community/mathlib/commit/000cae16bf1ca478259c70a2afa0811d687bc941)
feat(representation_theory): Rep k G is symmetric monoidal ([#13685](https://github.com/leanprover-community/mathlib/pull/#13685))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-05-02T06:04:04+00:00](https://github.com/leanprover-community/mathlib/commit/1e385494da03fdc19eb2d90ac8658223e1f72294)
feat(analysis/matrix): define the frobenius norm on matrices ([#13497](https://github.com/leanprover-community/mathlib/pull/#13497))

### [2022-05-02T05:27:14+00:00](https://github.com/leanprover-community/mathlib/commit/3d946a3d7b4d1b88eb09b21020c9fc88b80f23c1)
chore(algebraic_geometry/AffineScheme): Speed up `Spec` ([#13866](https://github.com/leanprover-community/mathlib/pull/#13866))

`simps` take 38s in local and does not seem to generate any useful lemma.

### [2022-05-02T04:39:58+00:00](https://github.com/leanprover-community/mathlib/commit/523adb387a5265f8c30610d365ce7b19163e9f82)
feat(set_theory/game/nim): Birthday of `nim` ([#13873](https://github.com/leanprover-community/mathlib/pull/#13873))

### [2022-05-02T04:39:57+00:00](https://github.com/leanprover-community/mathlib/commit/039543c21a65b935775f9f8a545a1b43c968cf44)
refactor(set_theory/game/pgame): Simpler definition for `star` ([#13869](https://github.com/leanprover-community/mathlib/pull/#13869))

This new definition gives marginally easier proofs for the basic lemmas, and avoids use of the quite incomplete `of_lists` API.

### [2022-05-02T04:39:56+00:00](https://github.com/leanprover-community/mathlib/commit/26e24c7593fc9dd5ac8639f131581fe06b3281eb)
feat(set_theory/surreal/basic): `<` is transitive on numeric games ([#13812](https://github.com/leanprover-community/mathlib/pull/#13812))

### [2022-05-02T02:37:54+00:00](https://github.com/leanprover-community/mathlib/commit/922717e8c7fbbd2230265b576a4504b9be28039d)
chore(logic/function/basic): don't unfold set in cantor ([#13822](https://github.com/leanprover-community/mathlib/pull/#13822))

This uses `set_of` and `mem` consistently instead of using application everywhere, since `f` has type `A -> set A` instead of `A -> A -> Prop`. (Arguably, it could just be stated for `A -> A -> Prop` instead though.)

### [2022-05-02T01:07:34+00:00](https://github.com/leanprover-community/mathlib/commit/afc0700e00f12c0346200e2db4bb501e4fea4c4d)
feat(linear_algebra/tensor_product): define tensor_tensor_tensor_assoc ([#13864](https://github.com/leanprover-community/mathlib/pull/#13864))

### [2022-05-01T21:51:02+00:00](https://github.com/leanprover-community/mathlib/commit/b236cb20560c9558495065903fd31287201bcb61)
chore(set_theory/surreal/basic): Inline instances ([#13811](https://github.com/leanprover-community/mathlib/pull/#13811))

We inline various definitions used only for instances. We also remove the redundant lemma `not_le` (which is more generally true on preorders).

### [2022-05-01T21:16:30+00:00](https://github.com/leanprover-community/mathlib/commit/f0930c822ca29980df4218d85c2e5dc7cbe089d9)
feat(set_theory/pgame/impartial): `star` is impartial ([#13842](https://github.com/leanprover-community/mathlib/pull/#13842))

### [2022-05-01T18:53:38+00:00](https://github.com/leanprover-community/mathlib/commit/071cb550412bd76fa38a54fbca40a5088a928c81)
feat(data/set/function): missing mono lemmas ([#13863](https://github.com/leanprover-community/mathlib/pull/#13863))

### [2022-05-01T12:36:26+00:00](https://github.com/leanprover-community/mathlib/commit/9e7c80f638149bfb3504ba8ff48dfdbfc949fb1a)
docs(*): Wrap some links in < … > ([#13852](https://github.com/leanprover-community/mathlib/pull/#13852))

I noticed that many docs say

    See https://stacks.math.columbia.edu/tag/001T.

and the our documentation will include the final `.` in the URL, causing
the URL to not work.

This tries to fix some of these instances. I intentionally applied this
to some URLs ending with a space, because it does not hurt to be
explicit, and the next contributor cargo-culting the URL is more likely
to get this right.

Obligatory xkcd reference: https://xkcd.com/208/

### [2022-05-01T05:59:37+00:00](https://github.com/leanprover-community/mathlib/commit/232c15e53f32964e5a05ccaa3bec80cebef66ad5)
feat(set_theory/game/pgame): Add missing basic API ([#13744](https://github.com/leanprover-community/mathlib/pull/#13744))

### [2022-05-01T03:35:34+00:00](https://github.com/leanprover-community/mathlib/commit/51b1e1187e4b9d32c9155d89933eaff978632c25)
feat(set_theory/game/impartial): Relabelling of impartial game is impartial ([#13843](https://github.com/leanprover-community/mathlib/pull/#13843))

### [2022-05-01T03:00:28+00:00](https://github.com/leanprover-community/mathlib/commit/4b92515b992fd2f7a7d68daece84fe5c2cfdc5a7)
chore(set_theory/game/impartial): golf ([#13841](https://github.com/leanprover-community/mathlib/pull/#13841))

### [2022-04-30T20:50:46+00:00](https://github.com/leanprover-community/mathlib/commit/49342e3d19939aff27974fccc0b84b5e6cf053ce)
feat(set_theory/cardinal/basic): Add `simp` lemmas on `cardinal.sum` ([#13838](https://github.com/leanprover-community/mathlib/pull/#13838))

### [2022-04-30T16:49:17+00:00](https://github.com/leanprover-community/mathlib/commit/0420dd88ddad1db7840cf1b68f72211ba0818a50)
chore(measure_theory/measurable_space_def): make measurable_space arguments implicit ([#13832](https://github.com/leanprover-community/mathlib/pull/#13832))

### [2022-04-30T11:26:15+00:00](https://github.com/leanprover-community/mathlib/commit/26310e7182164a258e8cd220a730bd1febdf8cb0)
feat(algebra/*): a sample of easy useful lemmas ([#13696](https://github.com/leanprover-community/mathlib/pull/#13696))

Lemmas needed for [#13690](https://github.com/leanprover-community/mathlib/pull/#13690)

### [2022-04-30T10:51:30+00:00](https://github.com/leanprover-community/mathlib/commit/1c3ab8cdf0de083a8673cfcb7c2206c9f9c35eea)
feat(probability/notations): fix some notations, add a new one ([#13828](https://github.com/leanprover-community/mathlib/pull/#13828))

### [2022-04-30T05:24:54+00:00](https://github.com/leanprover-community/mathlib/commit/91419608bea241451e7b47d83bd07431bdfcf595)
feat(model_theory/syntax): Free variables ([#13529](https://github.com/leanprover-community/mathlib/pull/#13529))

Defines `term.var_finset` and `bounded_formula.free_var_finset` to consist of all (free) variables used in a term or formula.
Defines `term.restrict_var` and `bounded_formula.restrict_free_var` to restrict formulas to sets of their variables.

### [2022-04-30T02:26:48+00:00](https://github.com/leanprover-community/mathlib/commit/bb45687b639c38e5b5243d89b3eda1fb72a6fa6f)
feat(model_theory/syntax, semantics): Substitution of variables in terms and formulas ([#13632](https://github.com/leanprover-community/mathlib/pull/#13632))

Defines `first_order.language.term.subst` and `first_order.language.bounded_formula.subst`, which substitute free variables in terms and formulas with terms.

### [2022-04-29T22:22:48+00:00](https://github.com/leanprover-community/mathlib/commit/a34ee7b7499dbfe65ef87e2973cce5b98b1d00cb)
chore(set_theory/game/basic): golf proof ([#13810](https://github.com/leanprover-community/mathlib/pull/#13810))

### [2022-04-29T22:22:48+00:00](https://github.com/leanprover-community/mathlib/commit/24bc2e1c58098bb1716d27bb920e84db414c05dc)
feat(set_theory/surreal/basic): add `pgame.numeric.left_lt_right` ([#13809](https://github.com/leanprover-community/mathlib/pull/#13809))

Also compress some trivial proofs into a single line

### [2022-04-29T22:22:47+00:00](https://github.com/leanprover-community/mathlib/commit/a70166a39978e2b977907d4e9ddf33adcae9139b)
feat(ring_theory): factorize a non-unit into irreducible factors without multiplying a unit ([#13682](https://github.com/leanprover-community/mathlib/pull/#13682))

Used in https://proofassistants.stackexchange.com/a/1312/93. Also adds simp lemma `multiset.prod_erase` used in the main proof and the auto-generated additive version, which is immediately analogous to [list.prod_erase](https://leanprover-community.github.io/mathlib_docs/data/list/big_operators.html#list.prod_erase). Also removes some extraneous namespace prefix.

### [2022-04-29T20:31:27+00:00](https://github.com/leanprover-community/mathlib/commit/059c8eb7deb4351b03b4dd6974e9a70d92059297)
chore(set_theory/game/basic): fix a single space ([#13806](https://github.com/leanprover-community/mathlib/pull/#13806))

### [2022-04-29T20:31:26+00:00](https://github.com/leanprover-community/mathlib/commit/89102286dfe7d3587d1e9ae7173fdbc261da23e9)
chore(data/polynomial): use dot notation for sub lemmas ([#13799](https://github.com/leanprover-community/mathlib/pull/#13799))

To match the additive versions

### [2022-04-29T20:31:25+00:00](https://github.com/leanprover-community/mathlib/commit/e56b8fea84d60fe434632b9d3b829ee685fb0c8f)
feat(model_theory/graph): First-order language and theory of graphs ([#13720](https://github.com/leanprover-community/mathlib/pull/#13720))

Defines `first_order.language.graph`, the language of graphs
Defines `first_order.Theory.simple_graph`, the theory of simple graphs
Produces models of the theory of simple graphs from simple graphs and vice versa.

### [2022-04-29T20:31:23+00:00](https://github.com/leanprover-community/mathlib/commit/1d4ed4a58c744ab74d211f55eaf1ee9cbb42773a)
chore(topology/algebra/valuation): use forgetful inheritance pattern for valued fields ([#13691](https://github.com/leanprover-community/mathlib/pull/#13691))

This allows us to solve a `uniform_space` diamond problem that arises when extending valuations to the completion of a valued field.

More precisely, the main goal of this PR is to make the following work:
```lean
import topology.algebra.valued_field

example  {K Γ₀ : Type*} [field K] [linear_ordered_comm_group_with_zero Γ₀] [valued K Γ₀] :
  uniform_space.completion.uniform_space K = valued.to_uniform_space :=
rfl
```



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2022-04-29T20:31:22+00:00](https://github.com/leanprover-community/mathlib/commit/90bd6f54466d6957694d8adfee68531f4247fe10)
feat(model_theory/encoding): A bound on the number of bounded formulas ([#13616](https://github.com/leanprover-community/mathlib/pull/#13616))

Gives an encoding `first_order.language.bounded_formula.encoding` of bounded formulas as lists.
Uses the encoding to bound the number of bounded formulas with `first_order.language.bounded_formula.card_le`.

### [2022-04-29T20:31:21+00:00](https://github.com/leanprover-community/mathlib/commit/9ce5e95a9b9e1e8df002182baeeff5d2162fb119)
feat(model_theory/syntax, semantics): A theory of infinite structures ([#13580](https://github.com/leanprover-community/mathlib/pull/#13580))

Defines `first_order.language.infinite_theory`, a theory of infinite structures
Adjusts the API of the theory of nonempty structures to match

### [2022-04-29T20:31:20+00:00](https://github.com/leanprover-community/mathlib/commit/812518d90ef246e57ff59555c6a035eff78c89d7)
feat(model_theory/semantics, satisfiability): Complete Theories ([#13558](https://github.com/leanprover-community/mathlib/pull/#13558))

Defines `first_order.language.Theory.is_complete`, indicating that a theory is complete.
Defines `first_order.language.complete_theory`, the complete theory of a structure.
Shows that the complete theory of a structure is complete.

### [2022-04-29T20:31:19+00:00](https://github.com/leanprover-community/mathlib/commit/812e17f8de2ad3b199d0deb315278ea4267f246c)
feat(analysis/normed_space/pointwise): Addition of balls ([#13381](https://github.com/leanprover-community/mathlib/pull/#13381))

Adding two balls yields another ball.

### [2022-04-29T18:38:48+00:00](https://github.com/leanprover-community/mathlib/commit/a54db9a4d12d6a89158d6cac037bfc5738ff5b47)
feat(data/finset/basic): A finset that's a subset of a `directed` union is contained in one element ([#13727](https://github.com/leanprover-community/mathlib/pull/#13727))

Proves `directed.exists_mem_subset_of_finset_subset_bUnion`
Renames `finset.exists_mem_subset_of_subset_bUnion_of_directed_on` to `directed_on.exists_mem_subset_of_finset_subset_bUnion`

### [2022-04-29T17:28:05+00:00](https://github.com/leanprover-community/mathlib/commit/8624f6db6b62d239668a60164de8fa0d543636e9)
chore(analysis/normed/group/basic): add `nnnorm_sum_le_of_le` ([#13795](https://github.com/leanprover-community/mathlib/pull/#13795))

This is to match `norm_sum_le_of_le`.

Also tidies up the coercion syntax a little in `pi.semi_normed_group`.
The definition is syntactically identical, just with fewer unecessary type annotations.

### [2022-04-29T17:28:03+00:00](https://github.com/leanprover-community/mathlib/commit/8360f2c87767a49d4e34b9325b9bb9d609d902b6)
feat(model_theory/language_map, bundled): Reducts of structures ([#13745](https://github.com/leanprover-community/mathlib/pull/#13745))

Defines `first_order.language.Lhom.reduct` which pulls a structure back along a language map.
Defines `first_order.language.Theory.Model.reduct` which sends a model of `(φ.on_Theory T)` to its reduct as a model of `T`.

### [2022-04-29T15:59:00+00:00](https://github.com/leanprover-community/mathlib/commit/50c30283a05ef81505edddaa01c4cf30a89e1005)
chore(analysis/normed_space/operator_norm): move `continuous_linear_map.op_norm_lsmul` into the correct section ([#13790](https://github.com/leanprover-community/mathlib/pull/#13790))

This was in the "seminorm" section but was about regular norms.

Also relaxes some other typeclasses in the file. This file is still a mess with regards to assuming `nondiscrete_normed_field` when `normed_field` is enough, but that would require substantially more movement within the file.

This cleans up after [#13165](https://github.com/leanprover-community/mathlib/pull/#13165) and [#13538](https://github.com/leanprover-community/mathlib/pull/#13538)

### [2022-04-29T15:58:59+00:00](https://github.com/leanprover-community/mathlib/commit/64b3576ff5bbac1387223e93988368644fcbcd7e)
feat(ring_theory/valuation/extend_to_localization): Extending valuations to localizations. ([#13610](https://github.com/leanprover-community/mathlib/pull/#13610))




Co-authored-by: Junyan Xu <junyanxumath@gmail.com>

### [2022-04-29T14:39:20+00:00](https://github.com/leanprover-community/mathlib/commit/fe2917a41611736870b2564aa41ca2bb4d1f8df0)
feat(number_theory/primes_congruent_one): attempt to golf ([#13787](https://github.com/leanprover-community/mathlib/pull/#13787))

As suggested in the reviews of [#12595](https://github.com/leanprover-community/mathlib/pull/#12595) we try to golf the proof using the bound proved there.
This doesn't end up being as much of a golf as hoped due to annoying edge cases, but seems conceptually simpler.

### [2022-04-29T14:39:18+00:00](https://github.com/leanprover-community/mathlib/commit/a3beb6282deccf44f3f07746ce8390ff6305d410)
feat(analysis/*): a sample of easy useful lemmas ([#13697](https://github.com/leanprover-community/mathlib/pull/#13697))

Lemmas needed for [#13690](https://github.com/leanprover-community/mathlib/pull/#13690)

### [2022-04-29T14:39:17+00:00](https://github.com/leanprover-community/mathlib/commit/7373832e4b966d89c8f91f2b343d47ecd5ebf956)
chore(analysis/convex): move `convex_on_norm`, change API ([#13631](https://github.com/leanprover-community/mathlib/pull/#13631))

* Move `convex_on_norm` from `specific_functions` to `topology`, use it to golf the proof of `convex_on_dist`.
* The old `convex_on_norm` is now called `convex_on_univ_norm`. The new `convex_on_norm` is about convexity on any convex set.
* Add `convex_on_univ_dist` and make `s : set E` an implicit argument in `convex_on_dist`.

This way APIs about convexity of norm and distance agree.

### [2022-04-29T14:39:15+00:00](https://github.com/leanprover-community/mathlib/commit/ce79a27be6e65ca0590c177558dd9c9b019e263b)
feat(analysis/normed_space/pi_Lp): add lemmas about `pi_Lp.equiv` ([#13569](https://github.com/leanprover-community/mathlib/pull/#13569))

Most of these are trivial `dsimp` lemmas, but they also let us talk about the norm of constant vectors.

### [2022-04-29T14:39:14+00:00](https://github.com/leanprover-community/mathlib/commit/e56126404f9ab5e3349dab6fa4eac11353af4717)
feat(algebra/order/monoid_lemmas_zero_lt): add instances ([#13376](https://github.com/leanprover-community/mathlib/pull/#13376))

### [2022-04-29T12:25:32+00:00](https://github.com/leanprover-community/mathlib/commit/58552fe0860f199d68c6a9cf2330d5d68f8895ef)
feat(set_theory/cardinal/basic): cardinality of a powerset ([#13786](https://github.com/leanprover-community/mathlib/pull/#13786))

### [2022-04-29T12:25:31+00:00](https://github.com/leanprover-community/mathlib/commit/b2e0a2d0cd0ae990064d893146002acb664f6ee2)
feat(group_theory/subgroup/basic): `inclusion` lemmas ([#13754](https://github.com/leanprover-community/mathlib/pull/#13754))

A few lemmas for `set.inclusion`, `subgroup.inclusion`, `subalgebra.inclusion`.

### [2022-04-29T12:25:30+00:00](https://github.com/leanprover-community/mathlib/commit/8eb256410d66d34107732773bb5fa236aaeb48ee)
feat(topology/instances/matrix): add `matrix` lemmas about `tsum` ([#13677](https://github.com/leanprover-community/mathlib/pull/#13677))

This adds lemmas about how `tsum` interacts with `diagonal` and `transpose`, along with the helper `summable` and `has_sum` lemmas.

This also moves `topology/algebra/matrix` to `topology/instances/matrix`, since that seems to align better with how other types are handled.

### [2022-04-29T11:14:10+00:00](https://github.com/leanprover-community/mathlib/commit/889e9564b572d795f53c1aa6c67a66c98051336a)
chore(analysis/asymptotics/asymptotics): relax `normed_group` to `semi_normed_group` in lemmas ([#13642](https://github.com/leanprover-community/mathlib/pull/#13642))

This file already uses `E` vs `E'` for `has_norm` vs `normed_group`. This adds an `E''` to this naming scheme for `normed_group`, and repurposes `E'` to `semi_normed_group`. The majority of the lemmas in this file generalize without any additional work.

I've not attempted to relax the assumptions on lemmas where any proofs would have to change. Most of them would need their assumptions changing from `c ≠ 0` to `∥c∥ ≠ 0`, which is likely to be annoying.

In one place this results in dot notation breaking as the typeclass can no longer be found by unification.

### [2022-04-29T09:31:57+00:00](https://github.com/leanprover-community/mathlib/commit/aab0b2dfe501fcfe4c9ff6aa3e0a1df0e2e7e697)
feat(algebra/algebra/basic): add some lemmas about `subsemiring` and `algebra_map` ([#13767](https://github.com/leanprover-community/mathlib/pull/#13767))

These are analogs of `algebra_map_of_subring`, `coe_algebra_map_of_subring` and `algebra_map_of_subring_apply`.

### [2022-04-29T08:26:15+00:00](https://github.com/leanprover-community/mathlib/commit/8abfb3ba5e211d8376b855dab5d67f9eba9e0774)
feat(representation_theory/Rep): Rep k G is abelian ([#13689](https://github.com/leanprover-community/mathlib/pull/#13689))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-29T06:35:27+00:00](https://github.com/leanprover-community/mathlib/commit/bc65b7cd3793065168dccbcd718f0a391acb1c8a)
feat(data/list/basic): add `list.range_map` ([#13777](https://github.com/leanprover-community/mathlib/pull/#13777))

* add `list.range_map` and `list.range_map_coe`;
* add `submonoid.closure_eq_image_prod` and `add_submonoid.closure_eq_image_prod`.

### [2022-04-29T06:35:26+00:00](https://github.com/leanprover-community/mathlib/commit/992e26faf97aed5519a73a6a47dcb6fd9b5530a9)
feat(topology/algebra/affine): a sufficiently small dilation of a point in the interior of a set lands in the interior ([#13766](https://github.com/leanprover-community/mathlib/pull/#13766))

Formalized as part of the Sphere Eversion project.

### [2022-04-29T06:35:25+00:00](https://github.com/leanprover-community/mathlib/commit/b4cad37932a9475ae1cd1f014ea6e00a0d1848d5)
chore(ring_theory/mv_polynomial/basic): golf ([#13765](https://github.com/leanprover-community/mathlib/pull/#13765))

### [2022-04-29T06:35:24+00:00](https://github.com/leanprover-community/mathlib/commit/5c1ee3526704121adc0eb918481ea72883d2bf42)
feat(set_theory/game/pgame): `x - 0 = x + 0` ([#13731](https://github.com/leanprover-community/mathlib/pull/#13731))

### [2022-04-29T04:24:26+00:00](https://github.com/leanprover-community/mathlib/commit/7170b66ccbc9a0a28403171777f8a4cdc1c77173)
chore(scripts): update nolints.txt ([#13775](https://github.com/leanprover-community/mathlib/pull/#13775))

I am happy to remove some nolints for you!

### [2022-04-29T04:24:25+00:00](https://github.com/leanprover-community/mathlib/commit/ead85e618173c496ca63000df1c69add1e1b5412)
chore(*/equiv): add simp to refl_apply and trans_apply where missing ([#13760](https://github.com/leanprover-community/mathlib/pull/#13760))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-29T04:24:24+00:00](https://github.com/leanprover-community/mathlib/commit/e294500eabc804ed642de575684a5b8652870b18)
feat(category_theory/monoidal): transport rigid structure over an equivalence ([#13736](https://github.com/leanprover-community/mathlib/pull/#13736))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-29T04:24:23+00:00](https://github.com/leanprover-community/mathlib/commit/ccb9d64b28b39473d67e9c244e5653e7a0ec0139)
feat(category_theory/braiding): pull back a braiding along a faithful functor ([#13684](https://github.com/leanprover-community/mathlib/pull/#13684))

I intend to use this to define the braiding/symmetry on `Rep k G` using the existing braiding/symmetry on `Module k`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-29T03:48:10+00:00](https://github.com/leanprover-community/mathlib/commit/8edb3d16685c496558e9797fb894adb0c6af3306)
feat(representation_theory/Rep): the category of representations ([#13683](https://github.com/leanprover-community/mathlib/pull/#13683))

We define `Rep k G`, the category of `k`-linear representations of a monoid `G`.

Happily, by abstract nonsense we get that this has (co)limits and a monoidal structure for free.

This should play well with the new design for representations in [#13573](https://github.com/leanprover-community/mathlib/pull/#13573).




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-29T00:29:56+00:00](https://github.com/leanprover-community/mathlib/commit/11a4a745a13c56135e1292e598b421601cbc59ab)
feat(ring_theory/localization/basic): generalize to semiring ([#13459](https://github.com/leanprover-community/mathlib/pull/#13459))

The main ingredient of this PR is the definition of `is_localization.lift` that works for semirings. The previous definition uses `ring_hom.mk'` that essentially states that `f 0 = 0` follows from other conditions. This does not holds for semirings. Instead, this PR defines the localization of monoid with zero, and uses this to define `is_localization.lift`.

- I think definitions around `localization_with_zero_map` might be ad hoc, and any suggestions for improvement are welcome!
- I plan to further generalize the localization API for semirings. This needs generalization of other ring theory stuff such as `local_ring` and `is_domain` (generalizing `local_ring` is partially done in [#13341](https://github.com/leanprover-community/mathlib/pull/#13341)).

### [2022-04-28T22:42:55+00:00](https://github.com/leanprover-community/mathlib/commit/214e2f1c8c6cfc5c83ed0b4c603f0d9b121a58fa)
chore(set_theory/surreal/basic): Allow dot notation on `pgame.numeric` ([#13768](https://github.com/leanprover-community/mathlib/pull/#13768))

Rename `numeric_neg`/`numeric_add` to `numeric.add`/`numeric.neg`. Prove `numeric.sub` in passing.

### [2022-04-28T21:23:33+00:00](https://github.com/leanprover-community/mathlib/commit/ccd377469f7d0de62c7fb42069bbed1a088ee0b8)
chore(ring_theory/*): dot notation for `submodule.fg` and `subalgebra.fg` ([#13737](https://github.com/leanprover-community/mathlib/pull/#13737))

### [2022-04-28T21:23:32+00:00](https://github.com/leanprover-community/mathlib/commit/220d4b8901e454167ef71fa1ff2eca82cbcc57b1)
doc(order/filter/small_sets): fix in doc ([#13648](https://github.com/leanprover-community/mathlib/pull/#13648))

### [2022-04-28T20:49:01+00:00](https://github.com/leanprover-community/mathlib/commit/c096a33a5914f73c972a9ed9a783f0f523e77c54)
feat(set_theory/game/birthday): Game birthday is zero iff empty ([#13715](https://github.com/leanprover-community/mathlib/pull/#13715))

### [2022-04-28T19:47:12+00:00](https://github.com/leanprover-community/mathlib/commit/8a32fdfde20f1bc8468ec6464a639f7de64f9e82)
feat(cyclotomic/eval): (q - 1) ^ totient n < |ϕₙ(q)| ([#12595](https://github.com/leanprover-community/mathlib/pull/#12595))

Originally from the Wedderburn PR, but generalized to include an exponent.

Co-authored-by: Alex J. Best <alex.j.best@gmail.com>



Co-authored-by: Alex J. Best <alex.j.best@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Alex J Best <alex.j.best@gmail.com>

### [2022-04-28T17:35:20+00:00](https://github.com/leanprover-community/mathlib/commit/0d3f8a71a1b8776774d6453cdaf9bef365e66a5b)
feat(ring_theory/submonoid/membership): generalize a few lemmas to `mul_mem_class` ([#13748](https://github.com/leanprover-community/mathlib/pull/#13748))

This generalizes lemmas relating to the additive closure of a multiplicative monoid so that they also apply to multiplicative semigroups using `mul_mem_class`

### [2022-04-28T15:47:51+00:00](https://github.com/leanprover-community/mathlib/commit/c5bf4808289689195303a62b3d17912b92d235e9)
fix(group_theory/subsemigroup/basic): change `mul_one_class` to `has_mul` ([#13747](https://github.com/leanprover-community/mathlib/pull/#13747))

### [2022-04-28T13:52:30+00:00](https://github.com/leanprover-community/mathlib/commit/1c92dfdf52e691ec9a871bf928803192b315237a)
chore(*/equiv): missing refl_symm lemmas ([#13761](https://github.com/leanprover-community/mathlib/pull/#13761))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-28T08:07:58+00:00](https://github.com/leanprover-community/mathlib/commit/0cb20fca1930098392174cd182c7618375b3a0ff)
feat(set_theory/ordinal/basic): `max a 0 = a` ([#13734](https://github.com/leanprover-community/mathlib/pull/#13734))

### [2022-04-28T08:07:57+00:00](https://github.com/leanprover-community/mathlib/commit/98e78488c37615ba756a0181e572dce51f79d64d)
feat(set_theory/game/pgame): Right moves of nat game are empty ([#13730](https://github.com/leanprover-community/mathlib/pull/#13730))

### [2022-04-28T07:28:19+00:00](https://github.com/leanprover-community/mathlib/commit/a0af1474a0b493b7104c6c02e56b4d83622b1eff)
feat(set_theory/game/pgame): An empty game is a relabelling of `0` ([#13753](https://github.com/leanprover-community/mathlib/pull/#13753))

### [2022-04-27T23:52:26+00:00](https://github.com/leanprover-community/mathlib/commit/e89510c24deb6d9c5f9cb728cb3e599dcf93b104)
fix(ring_theory/subsemiring/basic): make `inclusion` a `ring_hom`, not a `monoid_hom` ([#13746](https://github.com/leanprover-community/mathlib/pull/#13746))

### [2022-04-27T20:32:15+00:00](https://github.com/leanprover-community/mathlib/commit/60bb07118896ff5d58e2e4332fcf2b4077024f5f)
feat(logic/unit): Make `punit.star` simp normal form of `default : punit` ([#13741](https://github.com/leanprover-community/mathlib/pull/#13741))

### [2022-04-27T15:34:59+00:00](https://github.com/leanprover-community/mathlib/commit/dc589c890576488ae0df5d62a389aa49ca507938)
fix(topology/bornology): turn `bounded_space` into a `mixin` ([#13615](https://github.com/leanprover-community/mathlib/pull/#13615))

Otherwise, we would need `bounded_pseudo_metric_space`,
`bounded_metric_space` etc.

Also add `set.finite.is_bounded`, `bornology.is_bounded.all`, and
`bornology.is_bounded_univ`.

### [2022-04-27T14:57:36+00:00](https://github.com/leanprover-community/mathlib/commit/d3997443e6fc4766e6275f1196b11131bf75f865)
feat(measure_theory/measure/finite_measure_weak_convergence): define the topology of weak convergence of measures and prove some lemmas about it. ([#9943](https://github.com/leanprover-community/mathlib/pull/#9943))

This PR has the definition of the topology of weak convergence ("convergence in law" / "convergence in distribution") on `finite_measure _` and on `probability_measure _`.



Co-authored-by: kkytola <39528102+kkytola@users.noreply.github.com>

### [2022-04-27T10:54:41+00:00](https://github.com/leanprover-community/mathlib/commit/ccefda0766e9ea44e6d4f59e0dc857190900e425)
perf(representation_theory/basic): speed up `representation.lin_hom` by a factor of 20 ([#13739](https://github.com/leanprover-community/mathlib/pull/#13739))

`ext` was over-expanding, and the `simp`s were not all squeezed.

This is causing timeouts in other PRs.

### [2022-04-27T07:01:45+00:00](https://github.com/leanprover-community/mathlib/commit/5ac5c922d3f1488f3bfbb5b2fc8b5516093ec0d9)
feat(combinatorics/simple_graph/regularity/uniform): Witnesses of non-uniformity ([#13155](https://github.com/leanprover-community/mathlib/pull/#13155))

Provide ways to pick witnesses of non-uniformity.

Co-authored-by: Bhavik Mehta <bhavik.mehta8@gmail.com>

### [2022-04-27T02:01:16+00:00](https://github.com/leanprover-community/mathlib/commit/cb2b02fff213ed6f65bebd64446baac64137dcda)
feat(representation_theory/basic): representation theory without scalar actions ([#13573](https://github.com/leanprover-community/mathlib/pull/#13573))

This PR rewrites the files `representation_theory/basic` and `representation_theory/invariants` so that they avoid making use of scalar actions. It also includes the new definitions and lemmas of PR [#13502](https://github.com/leanprover-community/mathlib/pull/#13502) written with this new approach.



Co-authored-by: antoinelab01 <66086247+antoinelab01@users.noreply.github.com>

### [2022-04-27T00:04:48+00:00](https://github.com/leanprover-community/mathlib/commit/79e309b7ef5310fdc2e8956f40f879fdb6f39b3d)
feat(set_theory/game/pgame): Define `is_option` relation ([#13700](https://github.com/leanprover-community/mathlib/pull/#13700))

### [2022-04-26T22:05:34+00:00](https://github.com/leanprover-community/mathlib/commit/48997d7ba1de201cc296ec17d0174c82d1c3074b)
fix(data/set/basic): fix name of `has_mem.mem.out` ([#13721](https://github.com/leanprover-community/mathlib/pull/#13721))

### [2022-04-26T20:19:00+00:00](https://github.com/leanprover-community/mathlib/commit/b00a7f8a2209a6c74a8401c87d3aad97adca508a)
refactor(number_theory/padics/padic_norm): split file ([#13576](https://github.com/leanprover-community/mathlib/pull/#13576))


This PR splits the initial part of the `padic_norm.lean` file that defines p-adic valuations into a new file called `padic_val.lean`. This split makes sense to me since it seems most files importing this don't actually use the norm, so those files can build more in parallel. It also seems like a good organizational change: This way people can look at the files in this directory and see immediately where the valuation is defined, and people looking for the definition of `padic_norm` in `padic_norm.lean` don't have to scroll.

### [2022-04-26T18:41:44+00:00](https://github.com/leanprover-community/mathlib/commit/de79a763b68ce417f0fb0d2e70ae728ebc386be1)
chore(topology/continuous_function/zero_at_infty): add `is_central_scalar` instance ([#13710](https://github.com/leanprover-community/mathlib/pull/#13710))

### [2022-04-26T18:41:43+00:00](https://github.com/leanprover-community/mathlib/commit/76de6f75a1b091c074f870aa5d88c9f5c108164a)
feat(group_theory/subsemigroup/operations): port from submonoid  ([#12112](https://github.com/leanprover-community/mathlib/pull/#12112))

Taken from `group_theory.submonoid.operations`, trying to keep as much API as possible

Co-authored-by: Jireh Loreaux <loreaujy@gmail.com>



Co-authored-by: Jireh Loreaux <loreaujy@gmail.com>

### [2022-04-26T17:50:15+00:00](https://github.com/leanprover-community/mathlib/commit/560d1a7175b509906f127287008c881e9198eb68)
chore(topology/continuous_function/continuous_map): add missing instances for `continuous_map` ([#13717](https://github.com/leanprover-community/mathlib/pull/#13717))

This adds instances related to the ring variants, i.e., non-unital, non-associative (semi)rings.


To avoid introducing accidental diamonds, this also changes how the existing instances are constructed, such that they now go through the `function.injective.*` definitions.

### [2022-04-26T17:50:14+00:00](https://github.com/leanprover-community/mathlib/commit/325dbc88802cb1b684a96cacd18f0ef7fcd35958)
refactor(number_theory/legendre_symbol/quadratic_reciprocity.lean): change definition of legendre_sym, simplify proofs, add lemmas ([#13667](https://github.com/leanprover-community/mathlib/pull/#13667))

This changes the definition of `legendre_sym` to use `quadratic_char`.
The proof of some of the statements can then be simplified by using the corresponding statements for quadratic characters.
Some new API lemmas are added, including the fact that the Legendre symbol is multiplicative,

Also, a few `simps` are squeezed in `.../quadratic_char.lean`.

### [2022-04-26T15:51:40+00:00](https://github.com/leanprover-community/mathlib/commit/8b14d48f10ea27afd2e05b6f52be022bca36cd54)
feat(logic/relation): Transitive closure of well-founded relation is well-founded ([#13698](https://github.com/leanprover-community/mathlib/pull/#13698))

### [2022-04-26T13:36:55+00:00](https://github.com/leanprover-community/mathlib/commit/e77dbe0c78a757807afba8158a6d828f36924cab)
doc(data/list/*): Fix file links ([#13711](https://github.com/leanprover-community/mathlib/pull/#13711))

They were linking to `data.list.data.list.defs`.

### [2022-04-26T13:36:53+00:00](https://github.com/leanprover-community/mathlib/commit/bfa0ba5b46ab222d056be276375b62be80d3b900)
feat(analysis/normed_space/pointwise): The closure of a thickening ([#13708](https://github.com/leanprover-community/mathlib/pull/#13708))

Prove `closure (thickening δ s) = cthickening δ s` and golf "thickening a thickening" lemmas.

### [2022-04-26T13:36:52+00:00](https://github.com/leanprover-community/mathlib/commit/e6c6764df0cdf3ee8c4d1159a4f8ce75be91311b)
feat(logic/relation): Add missing instances ([#13704](https://github.com/leanprover-community/mathlib/pull/#13704))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-04-26T13:36:51+00:00](https://github.com/leanprover-community/mathlib/commit/3d5e5ee18f2296753b5247c4c260592640324281)
feat(data/list/*): Miscellaneous lemmas ([#13577](https://github.com/leanprover-community/mathlib/pull/#13577))

A few lemmas about `list.chain`, `list.pairwise`. Also rename `list.chain_of_pairwise` to `list.pairwise.chain` for dot notation.

### [2022-04-26T11:29:38+00:00](https://github.com/leanprover-community/mathlib/commit/c83488b91c7030484d3c2afbd3960de719db9369)
feat(topology/order/priestley): Priestley spaces ([#12044](https://github.com/leanprover-community/mathlib/pull/#12044))

Define `priestley_space`, a Prop-valued mixin for an ordered topological space to respect Priestley's separation axiom.

### [2022-04-26T09:51:42+00:00](https://github.com/leanprover-community/mathlib/commit/b0efdbbd7555bbb1c4ad3f2c863902feccc2c972)
feat(algebra/module/linear_map) : cancel_right and cancel_left for linear_maps ([#13703](https://github.com/leanprover-community/mathlib/pull/#13703))

### [2022-04-26T09:51:41+00:00](https://github.com/leanprover-community/mathlib/commit/5172448ce8432766a61e883b261d10c489b2d6ca)
feat(set_theory/game/pgame): Conway induction on games ([#13699](https://github.com/leanprover-community/mathlib/pull/#13699))

This is a more convenient restatement of the induction principle of the type.

### [2022-04-26T09:51:40+00:00](https://github.com/leanprover-community/mathlib/commit/4c6b373745305904361a287b17d440499e72a2fe)
feat(group_theory/subgroup/basic): `zpowers_le` ([#13693](https://github.com/leanprover-community/mathlib/pull/#13693))

This PR adds a lemma `zpowers_le : zpowers g ≤ H ↔ g ∈ H`. I also fixed the `to_additive` name of a lemma from a previous PR.

### [2022-04-26T09:51:39+00:00](https://github.com/leanprover-community/mathlib/commit/b94ea159de7d40fcea1ee7a5debbfef3e8878ae8)
refactor(linear_algebra/matrix/trace): unbundle `matrix.diag` ([#13687](https://github.com/leanprover-community/mathlib/pull/#13687))

The bundling makes it awkward to work with, as the base ring has to be specified even though it doesn't affect the computation.
This brings it in line with `matrix.diagonal`.

The bundled version is now available as `matrix.diag_linear_map`.

This adds a handful of missing lemmas about `diag` inspired by those about `diagonal`; almost all of which are just `rfl`.

### [2022-04-26T07:55:34+00:00](https://github.com/leanprover-community/mathlib/commit/6ae00ad35437e38a2dc76f2328ff5a5c579aae0a)
chore(tactic/field_simp): fix docstring ([#13695](https://github.com/leanprover-community/mathlib/pull/#13695))

### [2022-04-26T07:55:33+00:00](https://github.com/leanprover-community/mathlib/commit/a02f11fa0d3c51298611e69991360861e3886298)
feat(algebra/ring/equiv): generalize `ring_equiv` material to allow for non-unital rings ([#13626](https://github.com/leanprover-community/mathlib/pull/#13626))

### [2022-04-26T07:55:32+00:00](https://github.com/leanprover-community/mathlib/commit/1b1ae61f9c2bbbd1ec50a70dc92d90c965f8d886)
feat(analysis/normed_space/pointwise): Thickening a thickening ([#13380](https://github.com/leanprover-community/mathlib/pull/#13380))

In a real normed space, thickening twice is the same as thickening once.

### [2022-04-26T07:21:28+00:00](https://github.com/leanprover-community/mathlib/commit/093b583bcbf190399f27bb76a1b00432d3768651)
feat(set_theory/game/pgame): `ordinal.to_pgame` ([#13628](https://github.com/leanprover-community/mathlib/pull/#13628))

We define the canonical map from ordinals to pre-games and prove it's an order embedding.

### [2022-04-26T04:54:38+00:00](https://github.com/leanprover-community/mathlib/commit/bf67d4734fce7895731c1664bd1642b13485d222)
chore(scripts): update nolints.txt ([#13706](https://github.com/leanprover-community/mathlib/pull/#13706))

I am happy to remove some nolints for you!

### [2022-04-26T04:54:37+00:00](https://github.com/leanprover-community/mathlib/commit/748ea79bf026554559d27fdb23ba7d74d4f8e22b)
feat(order/filter/basic): more lemmas about `filter.comap` ([#13619](https://github.com/leanprover-community/mathlib/pull/#13619))

* add `set.compl_def`, `set.finite_image_fst_and_snd_iff`, and `set.forall_finite_image_eval_iff`;
* add `filter.coext`, an extensionality lemma that is more useful for "cofilters";
* rename `filter.eventually_comap'` to `filter.eventually.comap`;
* add `filter.mem_comap'`, `filter.mem_comap_iff_compl`, and `filter.compl_mem_comap`;
* add `filter.compl_mem_coprod`, replace `filter.compl_mem_Coprod_iff` with a simpler `filter.compl_mem_Coprod`;
* add `filter.map_top`;
* use new lemmas to golf some proofs.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-04-26T02:57:32+00:00](https://github.com/leanprover-community/mathlib/commit/4de6527854ef9868a2309b0c7e30885f4d9704e4)
feat(algebra/ring/basic): define non-unital commutative (semi)rings ([#13476](https://github.com/leanprover-community/mathlib/pull/#13476))

This adds the classes of non-unital commutative (semi)rings. These are necessary to talk about, for example, non-unital commutative C∗-algebras such as `C₀(X, ℂ)` which are vital for the continuous functional calculus.

In addition, we weaken many type class assumptions in `algebra/ring/basic` to `non_unital_non_assoc_ring`.

### [2022-04-26T01:09:50+00:00](https://github.com/leanprover-community/mathlib/commit/24a8bb93a6ba81e3656ee2bc02cdec0186082614)
feat(order/well-founded): Remove redundant arguments ([#13702](https://github.com/leanprover-community/mathlib/pull/#13702))

All of these are inferred as `{α : Type*}` (as opposed to `{α : Sort*}`), and there is already a `variables {α : Type*}` at the top of the file.

### [2022-04-25T23:11:10+00:00](https://github.com/leanprover-community/mathlib/commit/438b39a7284cc701cf1ff8b12ae335fd7bac836e)
feat(set_theory/cardinal/basic): Distributivity of `cardinal.sum` and + ([#13643](https://github.com/leanprover-community/mathlib/pull/#13643))

`cardinal.sum_add_distrib` shows that `cardinal.sum` distributes over +.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2022-04-25T19:25:37+00:00](https://github.com/leanprover-community/mathlib/commit/8f604aa32be6acbbc0f28e24a47dfacf1da834f6)
feat(data/nat/totient): totient equals one iff ([#13688](https://github.com/leanprover-community/mathlib/pull/#13688))

### [2022-04-25T17:22:45+00:00](https://github.com/leanprover-community/mathlib/commit/4e50b688d7914d0d0b3a92027eab20af6f76d71a)
feat(category_theory/abelian): if D is abelian so is C ⥤ D ([#13686](https://github.com/leanprover-community/mathlib/pull/#13686))

Needed for LTE, and also useful to show `Rep k G` is abelian.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-25T17:22:44+00:00](https://github.com/leanprover-community/mathlib/commit/43e84cdd13ed91ee3c91022c0a6d6144d2960537)
feat(data/fin/succ_pred): `fin` is an archimedean succ/pred order ([#12792](https://github.com/leanprover-community/mathlib/pull/#12792))





Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>
Co-authored-by: Yaël Dillies <yael.dillies@gmail.com>

### [2022-04-25T15:23:31+00:00](https://github.com/leanprover-community/mathlib/commit/4481a561375b4302ce6fcb1fd1380ba89d0d02cc)
feat(algebra/group_power/order): Add sq_zero_iff ([#13670](https://github.com/leanprover-community/mathlib/pull/#13670))

Tiny lemma that seems to be missing.

Should this be a simp lemma?

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-04-25T15:23:30+00:00](https://github.com/leanprover-community/mathlib/commit/e2f56961d96f5ad2f61b798cb41184fb702aad5c)
feat(analysis/normed_space/exponential): add `pi.exp_apply` ([#13488](https://github.com/leanprover-community/mathlib/pull/#13488))

The statement is a bit weird, but this structure is useful because it allows us to push `exp` through `matrix.diagonal` and into its elements.

### [2022-04-25T15:23:29+00:00](https://github.com/leanprover-community/mathlib/commit/85075bccb68ab7fa49fb05db816233fb790e4fe9)
refactor(category_theory/monoidal): rearrange simp lemmas to work better with coherence ([#13409](https://github.com/leanprover-community/mathlib/pull/#13409))

Change the direction of some simp lemma for monoidal categories, and remove some unused lemmas.

This PR is effectively a "no-op": no substantial changes to proofs. However, it should enable making `coherence` more powerful soon (following suggestions of @yuma-mizuno)!



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-25T15:23:28+00:00](https://github.com/leanprover-community/mathlib/commit/9f75d75a0a66de0477a05279a7a55f63d4fcbc59)
feat(analysis/convex/measure): a convex set is null-measurable ([#13138](https://github.com/leanprover-community/mathlib/pull/#13138))

### [2022-04-25T15:23:27+00:00](https://github.com/leanprover-community/mathlib/commit/2c15ce1454b837880c5444de85a2333da9caa5e7)
feat(data/nat/choose): add facts about the multiplicity of primes in the factorisation of central binomial coefficients ([#9925](https://github.com/leanprover-community/mathlib/pull/#9925))

A number of bounds on the multiplicity of primes in the factorisation of central binomial coefficients. These are of interest because they form part of the proof of Bertrand's postulate.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-04-25T13:21:34+00:00](https://github.com/leanprover-community/mathlib/commit/2825f3534bbf0a65886edc0502cef42b83cdba4b)
feat(data/set/prod): add `set.eval_image_pi_subset` ([#13613](https://github.com/leanprover-community/mathlib/pull/#13613))

Also reorder lemmas like `fst_image_prod_subset` so that simpler
lemmas go first.

### [2022-04-25T13:21:32+00:00](https://github.com/leanprover-community/mathlib/commit/14b0e32bb98611a1878742902a797d2b42be08f2)
chore(data/finsupp/fin): golf some proofs ([#13607](https://github.com/leanprover-community/mathlib/pull/#13607))

### [2022-04-25T13:21:31+00:00](https://github.com/leanprover-community/mathlib/commit/b7538a30c0c99748febfc2fa78d3b2f719e89b20)
feat(algebra/periodic): add lemmas `periodic.prod`, `periodic.smul`, `antiperiodic.smul` ([#13496](https://github.com/leanprover-community/mathlib/pull/#13496))

Formalized as part of the Sphere Eversion project.

### [2022-04-25T11:19:25+00:00](https://github.com/leanprover-community/mathlib/commit/4bfae3d821bb4cedf6b3dec0e0da0ee0b75f1490)
feat(set_theory/game/pgame): remove nolint ([#13680](https://github.com/leanprover-community/mathlib/pull/#13680))

We remove `@[nolint has_inhabited_instance]` from `left_moves` and `right_moves` by providing the appropriate instances for `star`.

### [2022-04-25T11:19:24+00:00](https://github.com/leanprover-community/mathlib/commit/9e8d1075434eb7813e89d3b5a8bc9ea5c38b560f)
feat(dynamics/periodic_pts): `pow_smul_eq_iff_minimal_period_dvd` ([#13676](https://github.com/leanprover-community/mathlib/pull/#13676))

This PR adds a lemma `pow_smul_eq_iff_minimal_period_dvd`, along with additive and integer versions.

### [2022-04-25T11:19:22+00:00](https://github.com/leanprover-community/mathlib/commit/7231172eaa3b3436657ad3b58f6cf0af606b20d2)
feat(topology/algebra): actions on the opposite type are continuous ([#13671](https://github.com/leanprover-community/mathlib/pull/#13671))

This also adds the missing `t2_space` instance.

### [2022-04-25T11:19:21+00:00](https://github.com/leanprover-community/mathlib/commit/ed10ba23b2186a65864c6b6e83edbb231d02519c)
feat(ring_theory/witt_vector/frobenius): add `witt_vector.frobenius_equiv` ([#13666](https://github.com/leanprover-community/mathlib/pull/#13666))

This promotes the bijection to an equivalence with an explicit inverse

### [2022-04-25T11:19:20+00:00](https://github.com/leanprover-community/mathlib/commit/6d3ca07ac8cf33b913db5fca95d246689ebbac13)
feat(data/zmod/basic): `-1 : zmod n` lifts to `n - 1` ([#13665](https://github.com/leanprover-community/mathlib/pull/#13665))

This PR adds a lemma stating that `-1 : zmod n` lifts to `n - 1 : R` for any ring `R`. The proof is surprisingly painful, but maybe someone can find a nicer way?

### [2022-04-25T11:19:19+00:00](https://github.com/leanprover-community/mathlib/commit/ad0a3e66eb1677b0c613837cf8f1e0c44d6073f6)
feat(dynamics/periodic_pts): Iteration is injective below the period ([#13660](https://github.com/leanprover-community/mathlib/pull/#13660))

This PR adds `iterate_injective_of_lt_minimal_period`, generalizing `pow_injective_of_lt_order_of`.

### [2022-04-25T10:43:44+00:00](https://github.com/leanprover-community/mathlib/commit/6710d655487dbfac4a3c6fb00d5a0bd5062e3f0d)
feat(analysis/complex/roots_of_unity): arg of a primitive root ([#13583](https://github.com/leanprover-community/mathlib/pull/#13583))

### [2022-04-25T08:04:59+00:00](https://github.com/leanprover-community/mathlib/commit/b35ed4006c2c88fea4c272a6380bafcfd6d2e3b1)
feat(algebra/order/hom/ring): There's at most one hom between linear ordered fields ([#13601](https://github.com/leanprover-community/mathlib/pull/#13601))

There is at most one ring homomorphism from a linear ordered field to an archimedean linear ordered field. Also generalize `map_rat_cast` to take in `ring_hom_class`.

Co-authored-by: Alex J. Best <alex.j.best@gmail.com>

### [2022-04-25T08:04:57+00:00](https://github.com/leanprover-community/mathlib/commit/d795ea4b354c9d6f8f152259f5957ef6562d9c01)
feat(number_theory/legendre_symbol/quadratic_reciprocity): Alternate forms of `exists_sq_eq_neg_one` ([#13594](https://github.com/leanprover-community/mathlib/pull/#13594))

Also, renamed `exists_sq_eq_neg_one_iff_mod_four_ne_three` to `exists_sq_eq_neg_one` for consistency with `exists_sq_eq_two` and for convenience.

### [2022-04-25T08:04:56+00:00](https://github.com/leanprover-community/mathlib/commit/e251ef778688feb93fdcda1d84a9508acb6511b1)
feat(logic/basic): `congr_fun` for heterogeneous equality ([#13591](https://github.com/leanprover-community/mathlib/pull/#13591))


Co-authored-by: Bhavik Mehta <@b-mehta>

### [2022-04-25T08:04:55+00:00](https://github.com/leanprover-community/mathlib/commit/e059fdf93769567f8645ad9bb04679e4cdcf1ef8)
feat(algebra/big_operators/basic): mk0_prod ([#13582](https://github.com/leanprover-community/mathlib/pull/#13582))

Co-authored-by: Alex J Best <alex.j.best@gmail.com>

### [2022-04-25T08:04:54+00:00](https://github.com/leanprover-community/mathlib/commit/f02c78444da3ce58a92e8ac79e6cec48e8b0f9c7)
feat(special_functions/gamma): recurrence relation for Gamma function ([#13156](https://github.com/leanprover-community/mathlib/pull/#13156))



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-04-25T06:24:12+00:00](https://github.com/leanprover-community/mathlib/commit/ef3769db865bc1ca19d4886a51553928c23193ac)
feat(group_theory/subgroup/basic): Cyclic subgroups are commutative ([#13663](https://github.com/leanprover-community/mathlib/pull/#13663))

This PR adds an instance stating that the cyclic subgroups `zpowers g` are commutative.

### [2022-04-25T06:24:11+00:00](https://github.com/leanprover-community/mathlib/commit/b0fe3cd219318ec22f24510332104e29eca8bfc5)
feat(order/filter): add `filter.coprod_bot` etc ([#13662](https://github.com/leanprover-community/mathlib/pull/#13662))

### [2022-04-25T06:24:10+00:00](https://github.com/leanprover-community/mathlib/commit/feb9aed43e1e971fbf49f970afcefeae2875d1e6)
feat(group_theory/group_action/basic): More API for `quotient_action` ([#13661](https://github.com/leanprover-community/mathlib/pull/#13661))

This PR adds a couple more API lemmas for `quotient_action`.

### [2022-04-25T06:24:09+00:00](https://github.com/leanprover-community/mathlib/commit/46563c5c2671172990076960d2f3374290815831)
refactor(analysis/convex/basic): rewrite a few proofs ([#13658](https://github.com/leanprover-community/mathlib/pull/#13658))

* prove that a closed segment is the union of the corresponding open segment and the endpoints;
* use this lemma to golf some proofs;
* make the "field" argument of `mem_open_segment_of_ne_left_right` implicit.
* use section variables.

### [2022-04-25T06:24:07+00:00](https://github.com/leanprover-community/mathlib/commit/7d64215f7d4e2f28a1260266351a60db91312692)
chore(analysis/convex/topology): generalize a few lemmas ([#13656](https://github.com/leanprover-community/mathlib/pull/#13656))

This way they work for `𝕜 = ℚ` too.

### [2022-04-25T06:24:04+00:00](https://github.com/leanprover-community/mathlib/commit/c24f1f2b1ca4a93d74550f1179cb46c7378be53f)
chore(number_theory/padics/*): tidy some proofs ([#13652](https://github.com/leanprover-community/mathlib/pull/#13652))

### [2022-04-25T06:24:00+00:00](https://github.com/leanprover-community/mathlib/commit/962bfcdb9adbc484fc78db5bd5bf1d17ca1102ba)
chore(field_theory/finite/polynomial): tidy + remove nolints ([#13645](https://github.com/leanprover-community/mathlib/pull/#13645))

Some of these definitions only make full sense over a field (for example the indicator function can be nonsensical in non-field rings) but there's also no reason not to define them more generally. This removes all `nolint`s related to this file, and all of the generalisation linter suggestions too.

### [2022-04-25T06:24:00+00:00](https://github.com/leanprover-community/mathlib/commit/b6a4be447801918487ea47883e6b4b372aa2ccf5)
chore(ring_theory/witt_vector/isocrystal): speed up the proof ([#13644](https://github.com/leanprover-community/mathlib/pull/#13644))

to remove a timeout in [#13459](https://github.com/leanprover-community/mathlib/pull/#13459)

### [2022-04-25T06:23:59+00:00](https://github.com/leanprover-community/mathlib/commit/9c861e32fa7e3d0609a8975a4e7671f671f9efdb)
feat(topology/algebra/matrix): `matrix.block_diagonal` is continuous ([#13641](https://github.com/leanprover-community/mathlib/pull/#13641))

`continuous.if_const` isn't suitable for the primed `matrix.block_diagonal'` case, as the `if` is dependent.

### [2022-04-25T06:23:58+00:00](https://github.com/leanprover-community/mathlib/commit/b1b2cab4a2c54d65ba9daa584e816676281c94bb)
feat(group_theory/complement): The range of a section `G ⧸ H → G` is a transversal ([#13623](https://github.com/leanprover-community/mathlib/pull/#13623))

This PR adds left and right versions of the statement that the range of a section `G ⧸ H → G` is a transversal.

### [2022-04-25T06:23:57+00:00](https://github.com/leanprover-community/mathlib/commit/6cbf986ae623082ef27fb40106679fc6f68605d9)
refactor(group_theory/schur_zassenhaus): Golf proof of abelian case ([#13622](https://github.com/leanprover-community/mathlib/pull/#13622))

This PR golfs the proof of the abelian case of Schur-Zassenhaus by switching from a nonstandard definition of the difference of two left transversals to the definition used in `transfer.lean`.

### [2022-04-25T06:23:56+00:00](https://github.com/leanprover-community/mathlib/commit/b6c8c0d4fe150505510fc20bd5a18e1bed1da487)
refactor(linear_algebra/quotient): Use the same quotient relation as add_subgroup ([#13620](https://github.com/leanprover-community/mathlib/pull/#13620))

This means that the quotient by `p` and `p.to_add_subgroup` are defeq as types, and the instances defined on them are defeq too.

This removes a TODO comment by Mario; I can only assume it resolves it in the right direction

### [2022-04-25T06:23:55+00:00](https://github.com/leanprover-community/mathlib/commit/91b8084223bbe94b73903ef9a039e3cc1e19ce25)
chore(analysis/normed_space/finite_dimension): extract some lemmas from existentials ([#13600](https://github.com/leanprover-community/mathlib/pull/#13600))

A few proofs in this file prove an existential where a stronger statement in terms of the witness exists.

This:

* Removes `basis.sup_norm_le_norm` and replaces it with the more general statement `pi.sum_norm_apply_le_norm`
* Renames `basis.op_norm_le` to `basis.exists_op_norm_le`
* Creates a new `basis.op_norm_le` stated without the existential
* Adds the `nnnorm` version of some `norm` lemmas. In some cases it's easier to prove these first, and derive the `norm` versions from them.

### [2022-04-25T05:10:33+00:00](https://github.com/leanprover-community/mathlib/commit/070c21b6b705d908cc9203fa0b93865563f16bb4)
chore(data/matrix): generalisation linter ([#13655](https://github.com/leanprover-community/mathlib/pull/#13655))

### [2022-04-25T04:29:05+00:00](https://github.com/leanprover-community/mathlib/commit/df4066cf59a287ee05b2a06236c37c6ff1ef1a18)
refactor(order/ideal): Make `order.ideal` extend `lower_set` ([#13070](https://github.com/leanprover-community/mathlib/pull/#13070))

* Redefine `order.ideal` to extend `lower_set`.
* `set_like` instance
* Get rid of `order.ideal.ideal_Inter_nonempty` in favor of `order_bot`
* Make arguments to `order.ideal.sup_mem` semi-implicit
* Reorder sections according to typeclass assumptions (some were outdated since Yakov's `order_bot`/`order_top` refactor)

### [2022-04-25T03:54:20+00:00](https://github.com/leanprover-community/mathlib/commit/d4d5b6d26ac55183211a27655a55ad481dc9cb9d)
chore(scripts): update nolints.txt ([#13679](https://github.com/leanprover-community/mathlib/pull/#13679))

I am happy to remove some nolints for you!

### [2022-04-25T03:54:18+00:00](https://github.com/leanprover-community/mathlib/commit/65edf2556ea53e43bce4e3ab3240bd102e778614)
feat(set_theory/game/pgame): `x.move_left i < x` and variants  ([#13654](https://github.com/leanprover-community/mathlib/pull/#13654))

### [2022-04-25T01:54:43+00:00](https://github.com/leanprover-community/mathlib/commit/454b8848d4d525fbafb41ccec05108bd2053cfde)
chore(topology/metric_space/basic): golf an instance ([#13664](https://github.com/leanprover-community/mathlib/pull/#13664))

Golf the proof of `prod.pseudo_metric_space_max` using
`pseudo_emetric_space.to_pseudo_metric_space_of_dist`.

### [2022-04-25T01:54:42+00:00](https://github.com/leanprover-community/mathlib/commit/9101c48bb8cbb6a683d0afd58f8d521a16bd6eea)
docs(number_theory/sum_two_squares): Update docs ([#13593](https://github.com/leanprover-community/mathlib/pull/#13593))

We add a remark for an alternate name for the theorem, and a todo note for a generalization of it.

### [2022-04-25T01:54:41+00:00](https://github.com/leanprover-community/mathlib/commit/045fc4438e2f3b0c35283d3e937eb465d5b31ec3)
docs(tactic/algebra): Module docstring ([#13571](https://github.com/leanprover-community/mathlib/pull/#13571))

Write the module docstring.

### [2022-04-25T00:39:20+00:00](https://github.com/leanprover-community/mathlib/commit/54d1ddd2f1f08e4d0f1066bc681bc428afeba03a)
feat(algebra/polynomial/big_operators): add a lemma, reduce assumptions, golf ([#13264](https://github.com/leanprover-community/mathlib/pull/#13264))

### [2022-04-24T20:37:26+00:00](https://github.com/leanprover-community/mathlib/commit/0d16bb4dc9f0ec490a383204bba7fd71faa1d08a)
refactor(*): migrate from `filter.lift' _ powerset` to `filter.small_sets` ([#13673](https://github.com/leanprover-community/mathlib/pull/#13673))

### [2022-04-24T17:23:52+00:00](https://github.com/leanprover-community/mathlib/commit/53a484e6936f2c10940131c89205fb5abd533678)
chore(order/filter/small_sets): redefine, golf ([#13672](https://github.com/leanprover-community/mathlib/pull/#13672))

The new definition is defeq to the old one.

### [2022-04-24T13:05:30+00:00](https://github.com/leanprover-community/mathlib/commit/42b9cdf8602151a514e3f2970799ff97ee18cd14)
feat(data/quot): Decidability of `quotient.lift` and friends ([#13589](https://github.com/leanprover-community/mathlib/pull/#13589))

and make `antisymmetrization.linear_order` computable.

### [2022-04-24T11:06:15+00:00](https://github.com/leanprover-community/mathlib/commit/63da426d3cf9fb32bc2d5bcbd1a8a7565f63c0ef)
refactor(linear_algebra/dimension): further generalisations to division_ring ([#13657](https://github.com/leanprover-community/mathlib/pull/#13657))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-24T08:21:40+00:00](https://github.com/leanprover-community/mathlib/commit/812625597b89565712d7c597cad7faa0254bd673)
feat(set_theory/surreal/basic): Definitional characterization of `numeric` ([#13653](https://github.com/leanprover-community/mathlib/pull/#13653))

### [2022-04-24T06:52:55+00:00](https://github.com/leanprover-community/mathlib/commit/e006f38ce18b92066e5ed09449e78d185910d78e)
feat(algebra/hom/iterate): Iterating an action ([#13659](https://github.com/leanprover-community/mathlib/pull/#13659))

This PR adds `smul_iterate`, generalizing  `mul_left_iterate` and `mul_right_iterate`.

### [2022-04-24T04:20:58+00:00](https://github.com/leanprover-community/mathlib/commit/b8b8bf3ea0c625fa1f950034a184e07c67f7bcfe)
refactor(category_theory/monoidal): prove coherence lemmas by coherence ([#13406](https://github.com/leanprover-community/mathlib/pull/#13406))

Now that we have a basic monoidal coherence tactic, we can replace some boring proofs of particular coherence lemmas with `by coherence`.

I've also simply deleted a few lemmas which are not actually used elsewhere in mathlib, and can be proved `by coherence`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-24T02:22:31+00:00](https://github.com/leanprover-community/mathlib/commit/92ca1369638b203f8c48df4c72b53df68c93f33d)
feat(set_theory/game/pgame): Birthdays of pre-games ([#13636](https://github.com/leanprover-community/mathlib/pull/#13636))

### [2022-04-24T02:22:30+00:00](https://github.com/leanprover-community/mathlib/commit/5998b497fd3223c4307f027d1a6a75f0b33af339)
chore(order/filter/basic): golf 2 proofs ([#13614](https://github.com/leanprover-community/mathlib/pull/#13614))

### [2022-04-24T02:22:28+00:00](https://github.com/leanprover-community/mathlib/commit/946f253cc9b9ebf9515cba5bbca1cf5ffb61907e)
chore(set_theory/game/pgame): Cleanup ([#13612](https://github.com/leanprover-community/mathlib/pull/#13612))

We remove redundant parentheses, and make arguments explicit when they can't be inferred.

### [2022-04-24T02:22:27+00:00](https://github.com/leanprover-community/mathlib/commit/b0552c157365575f43c4f077c34739c579ae476b)
docs(tactic/lint/default): Module docstring ([#13570](https://github.com/leanprover-community/mathlib/pull/#13570))

Write the module docstring.

### [2022-04-24T00:36:50+00:00](https://github.com/leanprover-community/mathlib/commit/2d0ff32921bbe47e4829b3f69ab8184752a7f798)
chore(algebra/*): move function instances ([#13650](https://github.com/leanprover-community/mathlib/pull/#13650))

These should have been much earlier, but I put them in their current places to avoid large build times in what was an already large refactor.

### [2022-04-23T22:43:27+00:00](https://github.com/leanprover-community/mathlib/commit/cc406db0c3751c7b6c0521991b837527cfe9ce83)
feat(algebra/ring/basic): generalisation linter suggestions ([#13649](https://github.com/leanprover-community/mathlib/pull/#13649))

### [2022-04-23T22:43:26+00:00](https://github.com/leanprover-community/mathlib/commit/1abfde6cba9794bad68e5d4ca0ff92cc2a0a6586)
chore(group_theory/exponent): generalise ([#13647](https://github.com/leanprover-community/mathlib/pull/#13647))

Generalises a few lemmas to not require cancellativity.

### [2022-04-23T22:43:25+00:00](https://github.com/leanprover-community/mathlib/commit/34b1cfd80a1e199ff9dfa3eeab34721832fc87bc)
feat(set_theory/game/pgame): Strengthen `move_{left/right}_mk` ([#13646](https://github.com/leanprover-community/mathlib/pull/#13646))

### [2022-04-23T22:43:24+00:00](https://github.com/leanprover-community/mathlib/commit/44a05db5a73e352fbf68e3dc854ee7a2d31dc831)
fix(topology/algebra/matrix): correct a lemma name ([#13640](https://github.com/leanprover-community/mathlib/pull/#13640))

### [2022-04-23T21:10:27+00:00](https://github.com/leanprover-community/mathlib/commit/09eb35fd0e0d59c37ef95d1f243ef1c8a4f4b4a9)
feat(data/part): add get_or_else_of_dom ([#13588](https://github.com/leanprover-community/mathlib/pull/#13588))


Adds a lemma

### [2022-04-23T09:50:22+00:00](https://github.com/leanprover-community/mathlib/commit/afd8a525e0db02ff233c51c628b49a2a90b4a2be)
feat(order/hom/basic): add simp lemmas for `strict_mono.order_iso` and friends ([#13606](https://github.com/leanprover-community/mathlib/pull/#13606))

Formalized as part of the Sphere Eversion project.

### [2022-04-23T05:39:49+00:00](https://github.com/leanprover-community/mathlib/commit/8c262dae1613346a015a166e64d1ead54e086185)
chore(analysis/normed_space/ray): golf ([#13629](https://github.com/leanprover-community/mathlib/pull/#13629))

Golf 2 proofs

### [2022-04-23T05:39:48+00:00](https://github.com/leanprover-community/mathlib/commit/4ad7dc9d14d728552aa6081ee35ca85d4caee1e3)
chore(algebra/ring/equiv): protect ring equiv lemmas for big operators ([#13624](https://github.com/leanprover-community/mathlib/pull/#13624))

### [2022-04-23T05:39:47+00:00](https://github.com/leanprover-community/mathlib/commit/fe435de8ca7dcdda44d4f3e7ca99e8fe188489d7)
feat(algebra/algebra/basic,analysis/normed_space/basic): The zero ring is a (normed) algebra ([#13618](https://github.com/leanprover-community/mathlib/pull/#13618))

This instance probably isn't very useful, but it's nice to have in the docs as an example of what `normed_algebra` permits.

### [2022-04-23T05:39:45+00:00](https://github.com/leanprover-community/mathlib/commit/0bea7a085af15797ce88742011124dd91a252585)
feat(set_theory/pgame): Lemmas about order and left/right moves ([#13590](https://github.com/leanprover-community/mathlib/pull/#13590))

### [2022-04-23T04:08:28+00:00](https://github.com/leanprover-community/mathlib/commit/26b2d7278dd2b5d9cab7b08224983b28a39bffe4)
feat(set_theory/game/pgame): Empty instances ([#13635](https://github.com/leanprover-community/mathlib/pull/#13635))

### [2022-04-23T04:08:27+00:00](https://github.com/leanprover-community/mathlib/commit/94f970a61979b8efc9dce0f9b03fcbb96dd07a3a)
feat(linear_algebra/basic): add a simp lemma for comp_right ([#13625](https://github.com/leanprover-community/mathlib/pull/#13625))

### [2022-04-23T04:08:26+00:00](https://github.com/leanprover-community/mathlib/commit/b62b53141d4a29c766a045c2175af1df39e0b84b)
doc(analysis/normed_space/basic): Explain how to use non-unital normed algebras ([#13605](https://github.com/leanprover-community/mathlib/pull/#13605))

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/.E2.9C.94.20Is.20the.20zero.20algebra.20normed.3F/near/279555566)

### [2022-04-23T03:26:36+00:00](https://github.com/leanprover-community/mathlib/commit/79ea30ceb4db0240e8877cc42b5d2a4ef9be1a9f)
chore(scripts): update nolints.txt ([#13637](https://github.com/leanprover-community/mathlib/pull/#13637))

I am happy to remove some nolints for you!

### [2022-04-22T23:37:56+00:00](https://github.com/leanprover-community/mathlib/commit/9923362cefa105341da924075d44ebf9f5b84130)
doc(measure_theory): add some missing `to_additive` docstrings ([#13456](https://github.com/leanprover-community/mathlib/pull/#13456))

### [2022-04-22T22:31:59+00:00](https://github.com/leanprover-community/mathlib/commit/976c544cb0a0c1b1a21d2931a30d311ae2e0940e)
feat(algebra/order/archimedean): Comparing with rationals determines the order ([#13602](https://github.com/leanprover-community/mathlib/pull/#13602))

In a linear ordered field, if `q < x → q ≤ y` for all `q : ℚ`, then `x ≤ y`, and similar results.

### [2022-04-22T22:31:58+00:00](https://github.com/leanprover-community/mathlib/commit/b98bd418672ae57c29d5abc44cb374d01bf4b3cb)
feat(topology/uniform_space/matrix): Add the uniform_space structure on matrices ([#13534](https://github.com/leanprover-community/mathlib/pull/#13534))

Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2022-04-22T20:06:20+00:00](https://github.com/leanprover-community/mathlib/commit/45470769a21cac2f8a93b3ce55dfdba979a64a35)
chore(*): use zero_lt_two/two_ne_zero lemmas more ([#13609](https://github.com/leanprover-community/mathlib/pull/#13609))




Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-04-22T20:06:19+00:00](https://github.com/leanprover-community/mathlib/commit/9eb3858a77cc48d1063337b6a7ca1a851d1b9c88)
feat(combinatorics/pigeonhole): Pigeons in linear commutative rings ([#13308](https://github.com/leanprover-community/mathlib/pull/#13308))

Duplicate almost all the pigeonhole principle API to work in `linear_ordered_comm_ring`s.

Co-authored-by: Bhavik Mehta <bhavik.mehta8@gmail.com>

### [2022-04-22T20:06:18+00:00](https://github.com/leanprover-community/mathlib/commit/7be21e09f18082f2b51f7ec051c29b8f6ea50628)
feat(topology/algebra/group): quotient by a closed subgroup is regular ([#13278](https://github.com/leanprover-community/mathlib/pull/#13278))

### [2022-04-22T20:06:16+00:00](https://github.com/leanprover-community/mathlib/commit/ad3e66728408691b74d4d1c44cac81c1c58dec2b)
feat(order/chain): Flags ([#13089](https://github.com/leanprover-community/mathlib/pull/#13089))

Define the type of maximal chains, aka flags, of an order.

Co-authored-by: Violeta Hernández <[vi.hdz.p@gmail.com](mailto:vi.hdz.p@gmail.com)>

### [2022-04-22T18:15:50+00:00](https://github.com/leanprover-community/mathlib/commit/9c3cb72cfb6d9c16e6539a94b6e22dd004e67efb)
feat(data/int/basic): Add unit lemmas ([#13565](https://github.com/leanprover-community/mathlib/pull/#13565))

This PR adds a few more unit lemmas, and cleans up some of the proofs.

### [2022-04-22T18:15:49+00:00](https://github.com/leanprover-community/mathlib/commit/695e0b70e336cc1042100b29986334a148b248f9)
feat(analysis/convex/strict_convex_space): Verify strict convexity from fixed scalars ([#13548](https://github.com/leanprover-community/mathlib/pull/#13548))

Prove that `∀ x y : E, ∥x∥ ≤ 1 → ∥y∥ ≤ 1 → x ≠ y → ∥a • x + b • y∥ < 1` for **fixed** `a` and `b` is enough for `E` to be a strictly convex space.

### [2022-04-22T18:15:48+00:00](https://github.com/leanprover-community/mathlib/commit/2e83d61757d49ec6a11f72c4d62bebc704f14760)
feat(topology/metric_space/hausdorff_distance): Thickening the closure ([#13515](https://github.com/leanprover-community/mathlib/pull/#13515))

`thickening δ (closure s) = thickening δ s` and other simple lemmas. Also rename `inf_edist_le_inf_edist_of_subset` to `inf_edist_anti` and make arguments to `mem_thickening_iff` implicit.

### [2022-04-22T15:16:45+00:00](https://github.com/leanprover-community/mathlib/commit/355d68abdda3680e01337219f5b91fd5162b262c)
chore(ring_theory/roots_of_unity): primitive roots are not zero ([#13587](https://github.com/leanprover-community/mathlib/pull/#13587))





Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-04-22T15:16:44+00:00](https://github.com/leanprover-community/mathlib/commit/79ac4c81ed507f2d6f148169b05cbd044c4aec55)
chore(data/polynomial/degree/definitions): simplify sum_fin, degree_C_le ([#13564](https://github.com/leanprover-community/mathlib/pull/#13564))

### [2022-04-22T15:16:42+00:00](https://github.com/leanprover-community/mathlib/commit/a74df9b5af0cd5adfbf16d512831d7d31b820721)
feat(number_theory/legendre_symbol): add file quadratic_char.lean ([#13503](https://github.com/leanprover-community/mathlib/pull/#13503))

This adds the file `quadratic_char.lean` in `number_theory/legendre_symbol/`.

This file contains (apart from some more general stuff on finite fields that is useful for what is done in the file) the definition of the quadratic character on a finite field `F` (with values in the integers) and a number of statements of properties.

It also defines quadratic characters on `zmod 4` and `zmod 8` that will be useful for the supplements to the law of quadratic reciprocity.

### [2022-04-22T12:15:36+00:00](https://github.com/leanprover-community/mathlib/commit/631890bf90e76818b80c57c00291380c0329143d)
chore(data/rat/basic): tidy some proofs ([#13603](https://github.com/leanprover-community/mathlib/pull/#13603))

### [2022-04-22T12:15:35+00:00](https://github.com/leanprover-community/mathlib/commit/f7dac5eae2e4f675f03302a2f3cd4f18a7bbe9e1)
feat(logic/basic): add `auto_param.out` and `opt_param.out` ([#13599](https://github.com/leanprover-community/mathlib/pull/#13599))

### [2022-04-22T12:15:34+00:00](https://github.com/leanprover-community/mathlib/commit/6729cca2b8ac6723957708643ea5609bf70f6062)
feat(set_theory/game/pgame): simp + private ([#13596](https://github.com/leanprover-community/mathlib/pull/#13596))

### [2022-04-22T12:15:32+00:00](https://github.com/leanprover-community/mathlib/commit/62205c274d37071ff5d1e2b13dc0d9e1d0e86e62)
refactor(data/nat/factorization): Infer arguments ([#13595](https://github.com/leanprover-community/mathlib/pull/#13595))

### [2022-04-22T11:41:15+00:00](https://github.com/leanprover-community/mathlib/commit/9abfff391ab56625d3a8a38cf5a93e0c190934f1)
chore(analysis/inner_product_space/lax_milgram): tidy some proofs ([#13604](https://github.com/leanprover-community/mathlib/pull/#13604))

### [2022-04-22T08:34:36+00:00](https://github.com/leanprover-community/mathlib/commit/3d24b09321313b9195dcb8f54fb59bf01753075c)
feat(algebra/ring/basic): define non-unital ring homs ([#13430](https://github.com/leanprover-community/mathlib/pull/#13430))

This defines a new bundled hom type and associated class for non-unital (even non-associative) (semi)rings. The associated notation introduced for these homs is `α →ₙ+* β` to parallel the `ring_hom` notation `α →+* β`, where `ₙ` stands for "non-unital".

### [2022-04-22T06:47:42+00:00](https://github.com/leanprover-community/mathlib/commit/394dec321c38f11a47817548f04ce20c096dca83)
feat(order/filter/small_sets): define the filter of small sets ([#13467](https://github.com/leanprover-community/mathlib/pull/#13467))

* Main author is @PatrickMassot 
* From the sphere eversion project
* Required for convolutions

Co-authored by: Patrick Massot <patrick.massot@u-psud.fr>

### [2022-04-22T06:47:41+00:00](https://github.com/leanprover-community/mathlib/commit/9db591650f53d70a8fbd2f42fe2342f4ef128277)
fix(data/fintype/basic): fix `fintype_of_option_equiv` ([#13466](https://github.com/leanprover-community/mathlib/pull/#13466))

A type is a `fintype` if its successor (using `option`) is a `fintype`

This fixes an error introduced in [#13086](https://github.com/leanprover-community/mathlib/pull/#13086).

### [2022-04-22T06:47:40+00:00](https://github.com/leanprover-community/mathlib/commit/0d77f29f964ae1d828bc61945f92a65d5a7b01d8)
feat(analysis/calculus/specific_functions): define normed bump functions ([#13463](https://github.com/leanprover-community/mathlib/pull/#13463))

* Normed bump functions have integral 1 w.r.t. the specified measure.
* Also add a few more properties of bump functions, including its smoothness in all arguments (including midpoint and the two radii).
* From the sphere eversion project
* Required for convolutions

### [2022-04-22T06:47:39+00:00](https://github.com/leanprover-community/mathlib/commit/06a6044f9319693cc131da5ee2d577b7273a5360)
feat(analysis/normed_space/exponential): Weaken typeclass requirements ([#13444](https://github.com/leanprover-community/mathlib/pull/#13444))

This allows the exponential to be defined independently of a choice of norm.

### [2022-04-22T04:34:08+00:00](https://github.com/leanprover-community/mathlib/commit/2b902eb3a13739fc6f060608f58fec5cfb48118f)
chore(scripts): update nolints.txt ([#13597](https://github.com/leanprover-community/mathlib/pull/#13597))

I am happy to remove some nolints for you!

### [2022-04-22T04:34:07+00:00](https://github.com/leanprover-community/mathlib/commit/79bc6ad40a6b73456b065c286bbe66b43a001d9b)
feat(data/mv_polynomial/equiv): API for `mv_polynomial.fin_succ_equiv` ([#10812](https://github.com/leanprover-community/mathlib/pull/#10812))

This PR provides API for `mv_polynomial.fin_succ_equiv`: coefficients, degree, coefficientes of coefficients, degree_of of coefficients, etc.

To state and prove these lemmas I had to define `cons` and `tail` for maps `fin (n+1) →₀ M` and prove the usual properties for these. I'm not sure if this is necessary or the correct approach to do this.



Co-authored-by: Iván Sadofschi Costa <isadofschi@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-04-22T01:34:22+00:00](https://github.com/leanprover-community/mathlib/commit/17d24243497e7b1d112dc2ae8ead4dfbb7d49009)
feat(polynomial/cyclotomic): `eval_apply` ([#13586](https://github.com/leanprover-community/mathlib/pull/#13586))

Co-authored-by: Alex J Best <alex.j.best@gmail.com>

### [2022-04-22T01:34:21+00:00](https://github.com/leanprover-community/mathlib/commit/40fc58cbc2ab5c91f4cd4a2ac0e85bad8fc6d62f)
feat(data/quot): `quotient.out` is injective ([#13584](https://github.com/leanprover-community/mathlib/pull/#13584))

### [2022-04-22T01:34:20+00:00](https://github.com/leanprover-community/mathlib/commit/821e7c895e64cf70e6d58e947b369da4a8d530e7)
doc(category_theory/limits/has_limits): fix two docstrings ([#13581](https://github.com/leanprover-community/mathlib/pull/#13581))

### [2022-04-22T01:34:19+00:00](https://github.com/leanprover-community/mathlib/commit/7b92db75cbff19563fc3717930b2e91bf4050b97)
chore(set_theory/cardinal/basic): Fix spacing ([#13562](https://github.com/leanprover-community/mathlib/pull/#13562))

### [2022-04-22T01:34:17+00:00](https://github.com/leanprover-community/mathlib/commit/1da12b57494f434be3711d03e93064686ba0f59a)
fix(analysis/normed_space/basic): allow the zero ring to be a normed algebra ([#13544](https://github.com/leanprover-community/mathlib/pull/#13544))

This replaces `norm_algebra_map_eq : ∀ x : 𝕜, ∥algebra_map 𝕜 𝕜' x∥ = ∥x∥` with `norm_smul_le : ∀ (r : 𝕜) (x : 𝕜'), ∥r • x∥ ≤ ∥r∥ * ∥x∥` in `normed_algebra`. With this change, `normed_algebra` means nothing more than "a normed module that is also an algebra", which seems to be the only notion actually used in mathlib anyway. In practice, this change really just removes any constraints on `∥1∥`.

The old meaning of `[normed_algebra R A]` is now achieved with `[normed_algebra R A] [norm_one_class A]`.
As a result, lemmas like `normed_algebra.norm_one_class` and `normed_algebra.nontrivial` have been removed, as they no longer make sense now that the two typeclasses are entirely orthogonal.

Notably this means that the following `normed_algebra` instances hold more generally than before:

* `continuous_linear_map.to_normed_algebra`
* `pi.normed_algebra`
* `bounded_continuous_function.normed_algebra`
* `continuous_map.normed_algebra`
* Instances not yet in mathlib:
  * Matrices under the `L1-L_inf` norm are a normed algebra even if the matrix is empty
  * Matrices under the frobenius norm are a normed algebra (note `∥(1 : matrix n n 𝕜')∥ = \sqrt (fintype.card n)` with that norm)

This last one is the original motivation for this PR; otherwise every lemma about a matrix exponential has to case on whether the matrices are empty.

It is possible that some of the `[norm_one_class A]`s added in `spectrum.lean` are unnecessary; however, the assumptions are no stronger than they were before, and I'm not interested in trying to generalize them as part of this PR.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Is.20the.20zero.20algebra.20normed.3F/near/279515954)

### [2022-04-22T01:34:16+00:00](https://github.com/leanprover-community/mathlib/commit/77236cd233234c60ba164aaaeb6752102444caf5)
refactor(category_theory): make has_zero_object a Prop  ([#13517](https://github.com/leanprover-community/mathlib/pull/#13517))

### [2022-04-22T01:34:15+00:00](https://github.com/leanprover-community/mathlib/commit/dced133600d6368fd52fc21f4fc0940eed3a96a5)
feat(group_theory/group_action/basic): Right multiplication satisfies the `quotient_action` axiom ([#13475](https://github.com/leanprover-community/mathlib/pull/#13475))

This PR adds a `quotient_action` instance for right multiplication.

### [2022-04-22T01:34:14+00:00](https://github.com/leanprover-community/mathlib/commit/bb9d1c5085e0b7ea619806a68c5021927cecb2a6)
chore(*): remove `subst` when not necessary ([#13453](https://github.com/leanprover-community/mathlib/pull/#13453))

Where possible, this replaces `subst` with `obtain rfl` (which is equivalent to `have` and then `subst`, golfing a line).

This also tidies some non-terminal `simp`s.



Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-04-21T23:36:55+00:00](https://github.com/leanprover-community/mathlib/commit/afb43923c074b7e43aa3705e2764440c5f68ad4b)
feat(linear_algebra/prod): two lemmas about prod_map ([#13572](https://github.com/leanprover-community/mathlib/pull/#13572))




Co-authored-by: antoinelab01 <66086247+antoinelab01@users.noreply.github.com>

### [2022-04-21T23:36:54+00:00](https://github.com/leanprover-community/mathlib/commit/d444a279b3cb694963893ed84382689d939b83e8)
feat(group_theory/transfer): Define the transfer homomorphism ([#13446](https://github.com/leanprover-community/mathlib/pull/#13446))

This PR adds a definition of the transfer homomorphism.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-04-21T23:36:53+00:00](https://github.com/leanprover-community/mathlib/commit/b1a1ece31c0e794d3849d447067499646e9dd871)
feat(ring_theory/valuation/valuation_subring): The order structure on valuation subrings of a field ([#13429](https://github.com/leanprover-community/mathlib/pull/#13429))

This PR shows that for a valuation subring `R` of a field `K`, the coarsenings of `R` are in (anti)ordered bijections with the prime ideals of `R`. As a corollary, the collection of such coarsenings is totally ordered.



Co-authored-by: Junyan Xu <junyanxumath@gmail.com>

### [2022-04-21T23:36:51+00:00](https://github.com/leanprover-community/mathlib/commit/1e76b9ebd2c6396d2bf1439bc39a391f6b8536dd)
feat(topology/constructions): more convenient lemmas ([#13423](https://github.com/leanprover-community/mathlib/pull/#13423))

* Define `continuous.fst'` and friends and `continuous.comp₂` and friends for convenience (and to help with elaborator issues)
* Cleanup in `topology/constructions`
* Define `set.preimage_inl_image_inr` and `set.preimage_inr_image_inl` and prove the `range` versions in terms of these. This required reordering some lemmas (moving general lemmas about `range` above the lemmas of interactions with `range` and specific functions).
* From the sphere eversion project

### [2022-04-21T23:36:50+00:00](https://github.com/leanprover-community/mathlib/commit/63ee558225806eae8f0c7b671d3bd86323d7270c)
feat(algebra/big_operators): split products and sums over fin (a+b) ([#13291](https://github.com/leanprover-community/mathlib/pull/#13291))




Co-authored-by: Joël Riou <37772949+joelriou@users.noreply.github.com>

### [2022-04-21T23:36:49+00:00](https://github.com/leanprover-community/mathlib/commit/4d7683b272a5d5a70c7f85f8c5a9f68edf8aab59)
feat(group_theory/torsion): torsion-free groups and quotients by torsion subgroups ([#13173](https://github.com/leanprover-community/mathlib/pull/#13173))

### [2022-04-21T23:36:48+00:00](https://github.com/leanprover-community/mathlib/commit/e728cfd459d3e5d2a291594fad2523f5bb557b46)
feat(order/grade): Graded orders ([#11308](https://github.com/leanprover-community/mathlib/pull/#11308))

Define graded orders. To be the most general, we use `is_min`/`is_max` rather than `order_bot`/`order_top`. A grade is a function that respects the covering relation and eventually minimality/maximality.

Co-authored-by: Violeta Hernández Palacios <vi.hdz.p@gmail.com>
Co-authored-by: Grayson Burton <ocornoc@protonmail.com>
Co-authored-by: Vladimir Ivanov @astOwOlfo

### [2022-04-21T23:36:46+00:00](https://github.com/leanprover-community/mathlib/commit/8110ab9dec832ae17c9d31102ee131b0dfc04706)
feat(number_theory/modular): fundamental domain part 2 ([#8985](https://github.com/leanprover-community/mathlib/pull/#8985))

This completes the argument that the standard open domain `{z : |z|>1, |\Re(z)|<1/2}` is a fundamental domain for the action of `SL(2,\Z)` on `\H`. The first PR ([#8611](https://github.com/leanprover-community/mathlib/pull/#8611)) showed that every point in the upper half plane has a representative inside its closure, and here we show that representatives in the open domain are unique.

Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored-by: Marc Masdeu <marc.masdeu@gmail.com>



Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored-by: Marc Masdeu <marc.masdeu@gmail.com>

### [2022-04-21T20:30:58+00:00](https://github.com/leanprover-community/mathlib/commit/ba556a7017b27baeef76fff957bb67e6f246313d)
chore(algebra/algebra/spectrum): lemmas about the zero ring ([#13568](https://github.com/leanprover-community/mathlib/pull/#13568))

### [2022-04-21T20:30:57+00:00](https://github.com/leanprover-community/mathlib/commit/8145333431f1c22ce4a7a4e2c6a1ea8c33b52ec2)
ci(gitpod): update leanproject version ([#13567](https://github.com/leanprover-community/mathlib/pull/#13567))

### [2022-04-21T20:30:56+00:00](https://github.com/leanprover-community/mathlib/commit/aeef727f262897cd8c87803078995f16d36080a3)
chore(set_theory/ordinal/basic): Small style tweaks ([#13561](https://github.com/leanprover-community/mathlib/pull/#13561))

### [2022-04-21T20:30:55+00:00](https://github.com/leanprover-community/mathlib/commit/efab188aa1176e5cbbcedd25ab9ef984b97429d1)
refactor(group_theory/{submonoid, subsemigroup}/basic): move `mul_mem_class` ([#13559](https://github.com/leanprover-community/mathlib/pull/#13559))

This moves `mul_mem_class` (and `add_mem_class`) from `group_theory/submonoid/basic` to `group_theory/subsemigroup/basic` so that `subsemigroup` can be an instance. We then protect `subsemigroup.mul_mem`. In addition, we add an induction principle for binary predicates to better parallel `group_theory/submonoid/basic`.

### [2022-04-21T20:30:54+00:00](https://github.com/leanprover-community/mathlib/commit/afe14217a12abee4b585c99e687f889ca2a22eab)
feat(data/nat/pow): add theorem `nat.pow_mod` ([#13551](https://github.com/leanprover-community/mathlib/pull/#13551))

Add theorem that states `∀ (a b n : ℕ) : a ^ b % n = (a % n) ^ b % n`.

### [2022-04-21T20:30:53+00:00](https://github.com/leanprover-community/mathlib/commit/090e59d08005f984e112aa4a765031c2c0f384bc)
feat(analysis/normed_space/operator_norm): norm of `lsmul` ([#13538](https://github.com/leanprover-community/mathlib/pull/#13538))

* From the sphere eversion project
* Required for convolutions

### [2022-04-21T20:30:51+00:00](https://github.com/leanprover-community/mathlib/commit/8430aae360fa454c4d5ece0b80d41c21a557bbb0)
feat(algebra/group_power/lemmas): More lemmas through `to_additive` ([#13537](https://github.com/leanprover-community/mathlib/pull/#13537))

Use `to_additive` to generate a bunch of old `nsmul`/`zsmul` lemmas from new `pow`/`zpow` ones. Also protect `nat.nsmul_eq_mul` as it should have been.

### [2022-04-21T20:30:50+00:00](https://github.com/leanprover-community/mathlib/commit/08323cda859128765d861be8462563093aafdd70)
feat(data/real/ennreal): `tsub` lemmas ([#13525](https://github.com/leanprover-community/mathlib/pull/#13525))

Inherit lemmas about subtraction on `ℝ≥0∞` from `algebra.order.sub`. Generalize `add_le_cancellable.tsub_lt_self` in passing.

New `ennreal` lemmas

### [2022-04-21T20:30:49+00:00](https://github.com/leanprover-community/mathlib/commit/3a061790136d13594ec10c7c90d202335ac5d854)
refactor(category_theory): reverse simp lemmas about (co)forks ([#13519](https://github.com/leanprover-community/mathlib/pull/#13519))

Makes `fork.ι` instead of `t.π.app zero` so that we avoid any unnecessary references to `walking_parallel_pair` in (co)fork  homs. This induces quite a lot of changes in other files, but I think it's worth the pain. The PR also changes `fork.is_limit.mk` to avoid stating redundant morphisms.

### [2022-04-21T17:29:16+00:00](https://github.com/leanprover-community/mathlib/commit/b7cba57674fc37bca24fa9f3da3939db6e434ddc)
chore(set_theory/game/*): Protect ambiguous lemmas ([#13557](https://github.com/leanprover-community/mathlib/pull/#13557))

Protect `pgame.neg_zero` and inline `pgame.add_le_add_left` and friends into `covariant_class` instances.



Co-authored-by: Violeta Hernández <vi.hdz.p@gmail.com>

### [2022-04-21T17:29:14+00:00](https://github.com/leanprover-community/mathlib/commit/b6c96ef7f0aa040dc3437e81b1d6f7d724d03259)
feat(combinatorics/simple_graph/clique): Clique-free graphs ([#13552](https://github.com/leanprover-community/mathlib/pull/#13552))

... and the finset of cliques of a finite graph.

Co-authored-by: Bhavik Mehta <bhavik.mehta8@gmail.com>

### [2022-04-21T17:29:13+00:00](https://github.com/leanprover-community/mathlib/commit/e49ac91b4c0e531c8ba209db3d6dd20addb8a484)
feat(analysis/calculus/cont_diff): add more prod lemmas ([#13521](https://github.com/leanprover-community/mathlib/pull/#13521))

* Add `cont_diff.fst`, `cont_diff.comp₂`, `cont_diff_prod_mk_left` and many variants.
* From the sphere eversion project
* Required for convolutions
* PR [#13423](https://github.com/leanprover-community/mathlib/pull/#13423) is similar for continuity

### [2022-04-21T17:29:12+00:00](https://github.com/leanprover-community/mathlib/commit/62b33339aebf6a57cb772e85ed647994d92b5eaf)
chore(algebra/star/chsh): `repeat`ed golf ([#13499](https://github.com/leanprover-community/mathlib/pull/#13499))

Instead of having a real Gröbner tactic, we can leverage a loop of `ring, simp` to reach a goal.

### [2022-04-21T17:29:11+00:00](https://github.com/leanprover-community/mathlib/commit/777d1ec1f57c158551df64b81e52db6228a2226a)
feat(measure_theory/measure/measure_space): add some lemmas for the counting measure ([#13485](https://github.com/leanprover-community/mathlib/pull/#13485))

### [2022-04-21T17:29:10+00:00](https://github.com/leanprover-community/mathlib/commit/6490ee3aafd58e915f1bc6462b1fdcdd16d65d0c)
feat(topology/instances/ennreal): Add lemmas about continuity of ennreal subtraction. ([#13448](https://github.com/leanprover-community/mathlib/pull/#13448))

`ennreal` does not have continuous `sub`. This PR adds `ennreal.continuous_on_sub` and related lemmas, which give the continuity of the subtraction in more restricted/specialized setups.

### [2022-04-21T15:20:01+00:00](https://github.com/leanprover-community/mathlib/commit/91cbe460db457941f40b9dbea8b7ce8af211f94e)
feat(algebra/monoid_algebra/basic): lifts of (add_)monoid_algebras ([#13382](https://github.com/leanprover-community/mathlib/pull/#13382))

We show that homomorphisms of the grading (add) monoids of (add) monoid algebras lift to ring/algebra homs of the algebras themselves.

This PR is preparation for introducing Laurent polynomials (see [adomani_laurent_polynomials](https://github.com/leanprover-community/mathlib/tree/adomani_laurent_polynomials), file `data/polynomial/laurent` for a preliminary version).

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Laurent.20polynomials)



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-04-21T15:19:59+00:00](https://github.com/leanprover-community/mathlib/commit/8044794f20dd04221951384569cf8788c629af3e)
feat(topology/algebra/module/basic): continuous linear maps are automatically uniformly continuous ([#13276](https://github.com/leanprover-community/mathlib/pull/#13276))

Generalize `continuous_linear_map.uniform_continuous`, `continuous_linear_equiv.uniform_embedding` and `linear_equiv.uniform_embedding` form `normed_space`s to `uniform_add_group`s and move them to `topology/algebra/module/basic`.

### [2022-04-21T15:19:58+00:00](https://github.com/leanprover-community/mathlib/commit/79abf670d5f946912964c232736e97a761f29ebb)
fix(tactic/apply_rules): separate single rules and attribute names in syntax ([#13227](https://github.com/leanprover-community/mathlib/pull/#13227))

@hrmacbeth reported an issue with `apply_rules` [on Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/monotonicity.2Eattr.20with.20apply_rules). It boiled down to `apply_rules` not properly distinguishing between attribute names, the names of `user_attribute` declarations, and the names of normal declarations. There's an example of using `apply_rules` with attributes in the docs:
```lean
@[user_attribute]
meta def mono_rules : user_attribute :=
{ name := `mono_rules,
  descr := "lemmas usable to prove monotonicity" }

local attribute [mono_rules] add_le_add

example (a b c d : α) : a + b ≤ c + d :=
begin
  apply_rules mono_rules, -- takes action
end
```
but this only worked by coincidence because the attribute name and the name of the `user_attribute` declaration were the same.

With this change, expressions and names of attributes are now separated: the latter are specified after `with`. The call above becomes `apply_rules with mono_rules`. This mirrors the syntax of `simp`. Note that this feature was only used in meta code in mathlib.

The example from Zulip (modified for proper syntax) still doesn't work with my change:
```lean
import tactic.monotonicity

variables {α : Type*} [linear_ordered_add_comm_group α]

example (a b c d : α) : a + b ≤ c + d :=
begin
  apply_rules with mono,
end
```
but it seems to fail because the `mono` rules cause `apply_rules` to loop -- that is, the rule set is getting applied correctly. 



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2022-04-21T15:19:56+00:00](https://github.com/leanprover-community/mathlib/commit/e8b581a70d9ab0873052e2d4e48ca1e1c6659753)
feat(order/countable_dense_linear_order): Relax conditions of `embedding_from_countable_to_dense` ([#12928](https://github.com/leanprover-community/mathlib/pull/#12928))

We prove that any countable order embeds in any nontrivial dense order. We also slightly golf the rest of the file.

### [2022-04-21T12:10:04+00:00](https://github.com/leanprover-community/mathlib/commit/0f9edf98f8cd8a99a6694f19e0b3f47e7e12c165)
feat(data/set/[basic|prod]): make `×ˢ` bind more strongly, and define `mem.out` ([#13422](https://github.com/leanprover-community/mathlib/pull/#13422))

* This means that  `×ˢ` does not behave the same as `∪` or `∩` around `⁻¹'` or `''`, but I think that is fine.
* From the sphere eversion project

### [2022-04-21T12:10:02+00:00](https://github.com/leanprover-community/mathlib/commit/c956647c40ebed4b2e66cd9f9864dfd183babbc1)
feat(order/basic): Simple shortcut lemmas ([#13421](https://github.com/leanprover-community/mathlib/pull/#13421))

Add convenience lemmas to make the API a bit more symmetric and easier to translate between `transitive` and `is_trans`. Also rename `_ge'` to `_le` in lemmas and fix the `is_max_` aliases.

### [2022-04-21T12:10:00+00:00](https://github.com/leanprover-community/mathlib/commit/22c4291217925c6957c0f5a44551c9917b56c7cf)
chore(number_theory/dioph): Cleanup ([#13403](https://github.com/leanprover-community/mathlib/pull/#13403))

Clean up, including:
* Move prerequisites to the correct files
* Make equalities in `poly` operations defeq
* Remove defeq abuse around `set`
* Slightly golf proofs by tweaking explicitness of lemma arguments

Renames

### [2022-04-21T12:09:59+00:00](https://github.com/leanprover-community/mathlib/commit/e5f823639a579aa0872de64005fdbf06a84ef777)
feat(analysis/normed_space/exponential): ring homomorphisms are preserved by the exponential ([#13402](https://github.com/leanprover-community/mathlib/pull/#13402))

The new results here are:
* `prod.fst_exp`
* `prod.snd_exp`
* `exp_units_conj`
* `exp_conj`
* `map_exp`
* `map_exp_of_mem_ball`

This last lemma does all the heavy lifting, and also lets us golf `algebra_map_exp_comm`.

This doesn't bother to duplicate the rest of these lemmas for the `*_of_mem_ball` version, since the proofs are trivial and those lemmas probably wouldn't be used.

This also generalizes some of the lemmas about infinite sums to work with `add_monoid_hom_class`.

### [2022-04-21T12:09:58+00:00](https://github.com/leanprover-community/mathlib/commit/0821eef157b78424876a3b5ce6fb0b485095dab1)
feat(algebraic_geometry/projective_spectrum): degree zero part of a localized ring ([#13398](https://github.com/leanprover-community/mathlib/pull/#13398))

If we have a graded ring A and some element f of A, the the localised ring A away from f has a degree zero part. This construction is useful because proj locally is spec of degree zero part of some localised ring.

Perhaps this ring belongs to some other file or different name, suggestions are very welcome

### [2022-04-21T12:09:57+00:00](https://github.com/leanprover-community/mathlib/commit/f1091b38dcc06191b3899f6682417b7ef9db8b20)
feat(set_theory/cardinal): A set of cardinals is small iff it's bounded ([#13373](https://github.com/leanprover-community/mathlib/pull/#13373))

We move `mk_subtype_le` and `mk_set_le` earlier within the file in order to better accomodate for the new result, `bdd_above_iff_small`.  We need this result right above the `Sup` stuff, as we'll make heavy use of it in a following refactor for `cardinal.sup`.

### [2022-04-21T12:09:56+00:00](https://github.com/leanprover-community/mathlib/commit/c30131fb25d73d055d2fa98501dce55c6c4af5be)
feat(data/polynomial/{derivative, iterated_deriv}): reduce assumptions ([#13368](https://github.com/leanprover-community/mathlib/pull/#13368))

### [2022-04-21T12:09:55+00:00](https://github.com/leanprover-community/mathlib/commit/761801fd7e1657e5e9cbe667b7dd1cae3d76654c)
feat(algebra/monoid_algebra/grading): Use the new graded_algebra API ([#13360](https://github.com/leanprover-community/mathlib/pull/#13360))

This removes `to_grades_by` and `of_grades_by`, and prefers `graded_algebra.decompose` as the canonical spelling.

This might undo some of the performance improvements in [#13169](https://github.com/leanprover-community/mathlib/pull/#13169), but it's not clear where to apply the analogous changes here, or whether they're really needed any more anyway,

### [2022-04-21T12:09:54+00:00](https://github.com/leanprover-community/mathlib/commit/5c2088ed07d7c663b2d53b41c57e5e5467109de1)
feat(algebra/group/to_additive): let @[to_additive] mimic alias’s docstrings ([#13330](https://github.com/leanprover-community/mathlib/pull/#13330))

many of our `nolint.txt` entires are due to code of this shape:

    @[to_additive add_foo]
    lemma foo := .. /- no docstring -/
    alias foo <- bar
    attribute [to_additive add_bar] bar

where now `bar` has a docstring (from `alias`), but `bar_add` does not.

This PR makes `to_additive` detect that `bar` is an alias, and unless an 
explicit docstring is passed to `to_additive`, creates an “alias of add_foo”
docstring.

### [2022-04-21T12:09:53+00:00](https://github.com/leanprover-community/mathlib/commit/7d61199acd9d7a469c8eeaf9ca4eb9ba065a2607)
feat(set_theory/cofinality): Basic fundamental sequences ([#13326](https://github.com/leanprover-community/mathlib/pull/#13326))

### [2022-04-21T12:09:51+00:00](https://github.com/leanprover-community/mathlib/commit/ba455ea6cbba9b9da9a4f2af32f979807dbf920b)
feat(special_functions/pow): continuity of real to complex power ([#13244](https://github.com/leanprover-community/mathlib/pull/#13244))

Some lemmas excised from my Gamma-function project. The main result is that for a complex `s` with `re s > 0`, the function `(λ x, x ^ s : ℝ → ℂ)` is continuous on all of `ℝ`. 



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-04-21T12:09:50+00:00](https://github.com/leanprover-community/mathlib/commit/cf3b996e17af2aae5331c242d7cca6902bf5802b)
feat(group_theory/torsion): extension closedness, and torsion scalars in modules ([#13172](https://github.com/leanprover-community/mathlib/pull/#13172))


Co-authored by: Alex J. Best <alex.j.best@gmail.com>

### [2022-04-21T12:09:49+00:00](https://github.com/leanprover-community/mathlib/commit/82ef19af142847cd52beac83576107c906f6557c)
feat(category_theory/path_category): canonical quotient of a path category ([#13159](https://github.com/leanprover-community/mathlib/pull/#13159))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-21T12:09:48+00:00](https://github.com/leanprover-community/mathlib/commit/8261501767387260b49611e1ca9b7bcf22d70b1c)
refactor(number_theory/padics/padic_norm): Switch nat and rat definitions ([#12454](https://github.com/leanprover-community/mathlib/pull/#12454))

Switches the order in which `padic_val_nat` and `padic_val_rat` are defined.

This PR has also expanded to add `padic_val_int` and some API lemmas for that.

### [2022-04-21T11:02:58+00:00](https://github.com/leanprover-community/mathlib/commit/21bbe9002372da584955f4ccae0a3e0c6d912070)
feat(analysis/normed): more lemmas about the sup norm on pi types and matrices ([#13536](https://github.com/leanprover-community/mathlib/pull/#13536))

For now we name the matrix lemmas as `matrix.norm_*` and `matrix.nnnorm_*` to match `matrix.norm_le_iff` and `matrix.nnnorm_le_iff`.

We should consider renaming these in future to indicate which norm they refer to, but should probably deal with agreeing on a name in a separate PR.

### [2022-04-21T11:02:57+00:00](https://github.com/leanprover-community/mathlib/commit/b87e193dcd6e60bdf3b41c57d54f24b92ceb3727)
fix(category_theory/monoidal): improve hygiene in coherence tactic ([#13507](https://github.com/leanprover-community/mathlib/pull/#13507))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-21T11:02:56+00:00](https://github.com/leanprover-community/mathlib/commit/9f22a3670a326ea8f175b1254d55e40c1bd9366c)
feat(src/number_theory/cyclotomic/discriminant): add discr_prime_pow_ne_two ([#13465](https://github.com/leanprover-community/mathlib/pull/#13465))

We add `discr_prime_pow_ne_two`, the discriminant of the `p^n`-th cyclotomic field.

From flt-regular

### [2022-04-21T08:48:23+00:00](https://github.com/leanprover-community/mathlib/commit/16ecb3d1b9650956becc50099545495351729252)
chore(algebra/group/type_tags): missing simp lemmas ([#13553](https://github.com/leanprover-community/mathlib/pull/#13553))

To have `simps` generate these in an appropriate form, this inserts explicits coercions between the type synonyms.

### [2022-04-21T08:48:22+00:00](https://github.com/leanprover-community/mathlib/commit/839f5086fad551f03cc57ec4c307549fa52c865e)
feat(measure_theory): allow measurability to prove ae_strongly_measurable ([#13427](https://github.com/leanprover-community/mathlib/pull/#13427))

Adds `measurable.ae_strongly_measurable` to the `measurability` list



Co-authored-by: Bhavik Mehta <bm489@cam.ac.uk>

### [2022-04-21T06:55:01+00:00](https://github.com/leanprover-community/mathlib/commit/6012c219cdbafff96b0fc939dfa946e6955f42d1)
refactor(algebra/hom/group): generalize a few lemmas to `monoid_hom_class` ([#13447](https://github.com/leanprover-community/mathlib/pull/#13447))

This generalizes a few lemmas to `monoid_hom_class` from `monoid_hom`. In particular, `monoid_hom.injective_iff` has been generalized and renamed to `injective_iff_map_eq_one`.

This also deletes `add_monoid_hom.injective_iff`, `ring_hom.injective_iff` and `alg_hom.injective_iff`. All of these are superseded by the generically applicable `injective_iff_map_eq_zero`.

### [2022-04-21T03:36:38+00:00](https://github.com/leanprover-community/mathlib/commit/e0f78ab30b500480e68710c42dfdc5ec6dce1951)
chore(data/list/cycle): Add basic `simp` lemmas + minor golfing ([#13533](https://github.com/leanprover-community/mathlib/pull/#13533))

### [2022-04-21T03:36:36+00:00](https://github.com/leanprover-community/mathlib/commit/2f1a4aff21c9aadf7cfb96911734754d6c228029)
feat(algebra/hom/non_unital_alg): introduce notation for non-unital algebra homomorphisms ([#13470](https://github.com/leanprover-community/mathlib/pull/#13470))

This introduces the notation `A →ₙₐ[R] B` for `non_unital_alg_hom R A B` to mirror that of `non_unital_ring_hom R S` as `R →ₙ+* S` from [#13430](https://github.com/leanprover-community/mathlib/pull/#13430). Here, the `ₙ` stands for "non-unital".

### [2022-04-21T01:41:41+00:00](https://github.com/leanprover-community/mathlib/commit/c93b99fab5343cd511b62751ad3d8aff8ab8a2e0)
chore(algebra/group/defs): Declare `field_simps` attribute earlier ([#13543](https://github.com/leanprover-community/mathlib/pull/#13543))

Declaring `field_simps` earlier make the relevant lemmas taggable as they are declared.

### [2022-04-20T22:44:21+00:00](https://github.com/leanprover-community/mathlib/commit/b2518beef5f00e5d8515419f5522df13165d4592)
feat(analysis/normed/normed_field): add `one_le_(nn)norm_one` for nontrivial normed rings ([#13556](https://github.com/leanprover-community/mathlib/pull/#13556))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-04-20T22:44:20+00:00](https://github.com/leanprover-community/mathlib/commit/81c8f310c6bffbf40f97140e3bbaecb455a1d03c)
refactor(analysis/calculus/cont_diff): reorder the file ([#13468](https://github.com/leanprover-community/mathlib/pull/#13468))

* There are no functional changes in this PR (except the order of implicit arguments in some lemmas)
* This PR tries to move `cont_diff.comp` above some other lemmas. In a follow-up PR I will use this to add lemmas like `cont_diff.fst` which requires `cont_diff.comp`, but after this PR we can add it near `cont_diff_fst`.
* We also add `{m n : with_top ℕ}` as variables, so that we don't have to repeat this in every lemma

### [2022-04-20T21:15:06+00:00](https://github.com/leanprover-community/mathlib/commit/b86b927259e35348ddf4dddecb09b918c3664f37)
move(set_theory/*): Organize in folders ([#13530](https://github.com/leanprover-community/mathlib/pull/#13530))

Create folders `cardinal`, `ordinal` and `game`. Most files under `set_theory` belong to a least one of them.

### [2022-04-20T20:40:18+00:00](https://github.com/leanprover-community/mathlib/commit/741d28519981f307f6f2621b44cb2156792c184a)
chore(number_theory/zsqrtd/basic): simplify le_total proof ([#13555](https://github.com/leanprover-community/mathlib/pull/#13555))

### [2022-04-20T18:42:11+00:00](https://github.com/leanprover-community/mathlib/commit/9d6d8c26784b7eb301de840071c21046d1e4d9dd)
feat(group_theory/perm/basic): Iterating a permutation is the same as taking a power ([#13554](https://github.com/leanprover-community/mathlib/pull/#13554))

### [2022-04-20T18:42:10+00:00](https://github.com/leanprover-community/mathlib/commit/27a8328b3bfff5f8cf51466c3032f89718201573)
feat(data/real/sqrt): `sqrt x < y ↔ x < y^2` ([#13546](https://github.com/leanprover-community/mathlib/pull/#13546))

Prove `real.sqrt_lt_iff` and generalize `real.lt_sqrt`.

### [2022-04-20T18:42:09+00:00](https://github.com/leanprover-community/mathlib/commit/242d687581e1bac72e7a4ec272c5869fe9e5b238)
feat(algebra/hom/group and *): introduce `mul_hom M N` notation `M →ₙ* N` ([#13526](https://github.com/leanprover-community/mathlib/pull/#13526))

The discussion and poll related to this new notation can be found in this [Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ring_hom.20notation.20and.20friends/near/279313301)

### [2022-04-20T17:09:57+00:00](https://github.com/leanprover-community/mathlib/commit/7bfaa5c8f6954138d39b9f9e2a1b45d84cdf3153)
feat(group_theory/schreier): Schreier's lemma in terms of `group.fg` and `group.rank` ([#13361](https://github.com/leanprover-community/mathlib/pull/#13361))

This PR adds statements of Schreier's lemma in terms of `group.fg` and `group.rank`.

### [2022-04-20T17:09:56+00:00](https://github.com/leanprover-community/mathlib/commit/b0805a5eaa66fcf13d0e0589659da2a1ba55d8ba)
feat(linear_algebra/trace): dual_tensor_hom is an equivalence + basis-free characterization of the trace ([#10372](https://github.com/leanprover-community/mathlib/pull/#10372))




Co-authored-by: antoinelab01 <66086247+antoinelab01@users.noreply.github.com>
Co-authored-by: Oliver Nash <github@olivernash.org>

### [2022-04-20T16:01:13+00:00](https://github.com/leanprover-community/mathlib/commit/311ca722e066614d8c869905ebe00bf9bd684146)
feat(order/filter/basic): allow functions between different types in lemmas about [co]map by a constant function ([#13542](https://github.com/leanprover-community/mathlib/pull/#13542))

### [2022-04-20T14:05:05+00:00](https://github.com/leanprover-community/mathlib/commit/d79f6f3ce00dec9425d90247855bd54c6c716382)
feat(data/finset/basic): simp `to_finset_eq_empty` ([#13531](https://github.com/leanprover-community/mathlib/pull/#13531))

### [2022-04-20T12:56:15+00:00](https://github.com/leanprover-community/mathlib/commit/8ba7df83a8eaa9adde3e93920c28fef5c31bb191)
feat(topology/algebra/algebra): ℚ-scalar multiplication is continuous ([#13458](https://github.com/leanprover-community/mathlib/pull/#13458))

### [2022-04-20T10:38:26+00:00](https://github.com/leanprover-community/mathlib/commit/a3a166bcf61429dd14fb0867b75c2e844a665543)
chore(model_theory/encoding): Improve the encoding of terms  ([#13532](https://github.com/leanprover-community/mathlib/pull/#13532))

Makes it so that the encoding of terms no longer requires the assumption `inhabited (L.term A)`.
Adjusts following lemmas to use the `encoding` API more directly.

### [2022-04-20T10:38:25+00:00](https://github.com/leanprover-community/mathlib/commit/d9a8d6e504253b7f9b9b254029cdb572cf962a96)
feat(topology/separation): Finite sets in T2 spaces ([#12845](https://github.com/leanprover-community/mathlib/pull/#12845))

We prove the following theorem: given a finite set in a T2 space, one can choose an open set around each point so that these are pairwise disjoint.

### [2022-04-20T10:04:20+00:00](https://github.com/leanprover-community/mathlib/commit/8d351dc38a22b83ffbd451fc237150e8f8764aec)
feat(analysis/inner_product_space/gram_schmidt_ortho): Gram-Schmidt Orthogonalization and Orthonormalization ([#12857](https://github.com/leanprover-community/mathlib/pull/#12857))

Formalize Gram-Schmidt Orthogonalization and Orthonormalization

### [2022-04-20T08:56:47+00:00](https://github.com/leanprover-community/mathlib/commit/92f6eb6bf6e16e1e10912ffea637993b99a6f031)
chore(algebra/big_operators/fin): golf finset.prod_range ([#13535](https://github.com/leanprover-community/mathlib/pull/#13535))

### [2022-04-19T23:26:34+00:00](https://github.com/leanprover-community/mathlib/commit/71b470f9a6af307a4f9885dfd73440cde081ac42)
chore(analysis/normed_space/star): make an argument explicit ([#13523](https://github.com/leanprover-community/mathlib/pull/#13523))

### [2022-04-19T20:26:49+00:00](https://github.com/leanprover-community/mathlib/commit/5038a4a978d539d933fb62c8c05a74d591d2d654)
feat(*): `op_op_op_comm` lemmas ([#13528](https://github.com/leanprover-community/mathlib/pull/#13528))

A handful of lemmas of the form `op (op a b) (op c d) = op (op a c) (op b d)`.

### [2022-04-19T20:26:48+00:00](https://github.com/leanprover-community/mathlib/commit/cf5aea0a7abaffff75a1dfa0f1f42a059562fcc1)
chore(data/real/nnreal): add commuted version of `nnreal.mul_finset_sup` ([#13512](https://github.com/leanprover-community/mathlib/pull/#13512))

Also make the argument explicit

### [2022-04-19T20:26:47+00:00](https://github.com/leanprover-community/mathlib/commit/094b1f51f1da3fe34a87bc6f1294c0129039062d)
chore(*/matrix): order `m` and `n` alphabetically ([#13510](https://github.com/leanprover-community/mathlib/pull/#13510))

In a few places this also reorders `(n) [fintype n] (m) [fintype m]` to `(m n) [fintype m] [fintype n]` which seems to be where we prefer to put typeclasses.

### [2022-04-19T19:41:21+00:00](https://github.com/leanprover-community/mathlib/commit/3ac979a211c8ecaecb01ca020b191bb1a5b8a4d1)
feat(analysis/calculus/specific_functions): trivial extra lemmas ([#13516](https://github.com/leanprover-community/mathlib/pull/#13516))

### [2022-04-19T17:41:07+00:00](https://github.com/leanprover-community/mathlib/commit/70759ef9177b4dfdb1cb4df4b77bffa1d13c81eb)
feat(analysis): lemmas about nnnorm and nndist ([#13498](https://github.com/leanprover-community/mathlib/pull/#13498))

Most of these lemmas follow trivially from the `norm` versions. This is far from exhaustive.

Additionally:
* `nnreal.coe_supr` and `nnreal.coe_infi` are added
* The old `is_primitive_root.nnnorm_eq_one` is renamed to `is_primitive_root.norm'_eq_one` as it was not about `nnnorm` at all. The unprimed name is already taken in reference to `algebra.norm`.

* `parallelogram_law_with_norm_real` is removed since it's syntactically identical to `parallelogram_law_with_norm ℝ` and also not used anywhere.

### [2022-04-19T15:52:32+00:00](https://github.com/leanprover-community/mathlib/commit/f06dca76a989f23ba6e310e135c7ce1037bfba9d)
feat(data/int/basic): add lemma `int.abs_le_one_iff` ([#13513](https://github.com/leanprover-community/mathlib/pull/#13513))

Also renaming `int.eq_zero_iff_abs_lt_one`.

The proof is due to @Ruben-VandeVelde 

Discussed on Zulip [here](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/Integers.20of.20norm.20at.20most.20one)

Co-authored-by: Ruben Van de Velde <65514131+Ruben-VandeVelde@users.noreply.github.com>

### [2022-04-19T15:52:31+00:00](https://github.com/leanprover-community/mathlib/commit/634eab1080e5313afd206b1cc6e00aa28135fc15)
feat(category_theory/limits): add characteristic predicate for zero objects ([#13511](https://github.com/leanprover-community/mathlib/pull/#13511))

### [2022-04-19T14:04:47+00:00](https://github.com/leanprover-community/mathlib/commit/5dc8c1cf64737787dff8a3f27f75e9107661a7f0)
feat(order/filter/n_ary): Add lemma equating map₂ to map on the product ([#13490](https://github.com/leanprover-community/mathlib/pull/#13490))

Proof that map₂ is the image of the corresponding function `α × β → γ`.

Discussion: https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/filter.20map.E2.82.82.20as.20map

### [2022-04-19T14:04:46+00:00](https://github.com/leanprover-community/mathlib/commit/8fa3263c0c0cfc61fe0828f91be635fc983d166d)
fix(analysis/locally_convex/balanced_hull_core): minimize import ([#13450](https://github.com/leanprover-community/mathlib/pull/#13450))

I'm doing this because I need to have `balanced_hull_core` before `normed_space.finite_dimensional` and this little change seems to be enough for that, but I think at some point we'll need to move lemmas so that normed_spaces come as late as possible

### [2022-04-19T14:04:45+00:00](https://github.com/leanprover-community/mathlib/commit/ba6a9858108df1a82921bdc9be6e2b2232e90227)
feat(order/cover): define `wcovby` ([#13424](https://github.com/leanprover-community/mathlib/pull/#13424))

* This defines the reflexive closure of `covby`, which I call `wcovby` ("weakly covered by")
* This is useful, since some results about `covby` still hold for `wcovby`. 
* Use `wcovby` in the proofs of the properties for `covby`.
* Also define `wcovby_insert` (the motivating example, since I really want `(wcovby_insert _ _).eq_or_eq`)

### [2022-04-19T14:04:44+00:00](https://github.com/leanprover-community/mathlib/commit/8f7e10b888790ecc06c938ad55b4dcadabda7fdf)
refactor(group_theory/group_action/big_operators): extract to a new file ([#13340](https://github.com/leanprover-community/mathlib/pull/#13340))

`basic` is a misleading name, as `group_action.basic` imports a lot of things.
For now I'm not renaming it, but I've adding a skeletal docstring.

Splitting out the big operator lemmas allows access to big operators before modules and quotients.

This also performs a drive-by generalization of the typeclasses on `smul_cancel_of_non_zero_divisor`.

Authorship is from [#1910](https://github.com/leanprover-community/mathlib/pull/#1910)

### [2022-04-19T12:11:00+00:00](https://github.com/leanprover-community/mathlib/commit/3e78c23763f821fb355c2b37f2cc0d43a5c1c854)
fix(algebra/hom/units): better defeq in `is_unit.lift_right` ([#13508](https://github.com/leanprover-community/mathlib/pull/#13508))

… and fix a timeout introduced by this change and remove some extraneous parentheses there.

### [2022-04-19T10:05:03+00:00](https://github.com/leanprover-community/mathlib/commit/5a4bae1158b5503def0d5b417c82578bc1b7b009)
feat(algebra/*/basic): add trivial lemmas ([#13416](https://github.com/leanprover-community/mathlib/pull/#13416))

These save you from having to fiddle with `mul_one` when you want to rewrite them the other way, or allow easier commutativity rewrites.



Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-04-19T08:07:49+00:00](https://github.com/leanprover-community/mathlib/commit/9202b6d1d471f6020dd6b9c6b99fcf821e385406)
feat(order/succ_pred/basic): Intervals and `succ`/`pred` ([#13486](https://github.com/leanprover-community/mathlib/pull/#13486))

Relate `order.succ`, `order.pred` and `set.Ixx`.

### [2022-04-19T06:50:55+00:00](https://github.com/leanprover-community/mathlib/commit/d19e8cb7f24b33c79600bed337033ce9d993de9d)
chore(docs): don't use deprecated is_subring ([#13505](https://github.com/leanprover-community/mathlib/pull/#13505))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-19T05:04:57+00:00](https://github.com/leanprover-community/mathlib/commit/828ef48c26d54d92709b93b8487d791945b1ed97)
fix(category_theory/monoidal): increase class search depth in coherence tactic ([#13413](https://github.com/leanprover-community/mathlib/pull/#13413))

There were two places, not just one, where the class search depth needs to be increased.





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-19T03:39:47+00:00](https://github.com/leanprover-community/mathlib/commit/fb44330ec70e555fee4fc3afb97d6b323a3ba9ae)
feat(data/matrix/block): `matrix.block_diagonal` is a ring homomorphism ([#13489](https://github.com/leanprover-community/mathlib/pull/#13489))

This is one of the steps on the path to showing that the matrix exponential of a block diagonal matrix is a block diagonal matrix of the exponents of the blocks.

As well as adding the new bundled homomorphisms, this generalizes the typeclasses in this file and tidies up the order of arguments.

Finally, this protects some `map_*` lemmas to prevent clashes with the global lemmas of the same name.

### [2022-04-19T01:03:57+00:00](https://github.com/leanprover-community/mathlib/commit/eb22ba4f6e62243777c23844be5103d3c002666c)
chore(algebra/monoid_algebra/basic): use the homomorphism typeclasses ([#13389](https://github.com/leanprover-community/mathlib/pull/#13389))

This replaces `mul_hom` with `mul_hom_class` and `add_hom` with `add_hom_class`.

Also adds two trivial lemmas, `monoid_algebra.map_domain_one` and `add_monoid_algebra.map_domain_one`.

### [2022-04-18T20:47:04+00:00](https://github.com/leanprover-community/mathlib/commit/37d02d3da4e6d8437d522174bf85276fcd882b54)
chore(ring_theory/hahn_series, topology/locally_constant/algebra): add missing `non_unital_non_assoc_ring` instances ([#13504](https://github.com/leanprover-community/mathlib/pull/#13504))

### [2022-04-18T19:11:39+00:00](https://github.com/leanprover-community/mathlib/commit/3c20253bb3738f0e5ea90b8617a291d1ad8dd23a)
chore(algebra/ring/{pi, prod}): fix errors in `ring_hom` for `pi` and `prod`. ([#13501](https://github.com/leanprover-community/mathlib/pull/#13501))

Looks like some things were incorrectly changed when copied from the corresponding `monoid_hom` files.

### [2022-04-18T19:11:38+00:00](https://github.com/leanprover-community/mathlib/commit/b54591f7b62ebb86a38c91d7875f36b8ea08ae5a)
chore(analysis/normed_space/finite_dimension): golf a proof ([#13491](https://github.com/leanprover-community/mathlib/pull/#13491))

These `letI`s just made this proof convoluted, the instances were not needed.
Without them, we don't even need the import.

Similarly, the `classical` was the cause of the need for the `congr`.

### [2022-04-18T19:11:37+00:00](https://github.com/leanprover-community/mathlib/commit/fd08afe3eea9c106e9e06a9768329b5925fc56e9)
chore(data/nat/factorization): golf `dvd_iff_prime_pow_dvd_dvd` ([#13473](https://github.com/leanprover-community/mathlib/pull/#13473))

Golfing the edge-case proof added in https://github.com/leanprover-community/mathlib/pull/13316

### [2022-04-18T17:14:07+00:00](https://github.com/leanprover-community/mathlib/commit/d89160b5874c1c6c96d6cc1d6a0ae07405b5ee46)
feat(order/bounded_order): Strictly monotone functions preserve maximality ([#13434](https://github.com/leanprover-community/mathlib/pull/#13434))

Prove `f a = f ⊤ ↔ a = ⊤` and `f a = f ⊥ ↔ a = ⊥` for strictly monotone/antitone functions. Also fix `is_max.eq_top` and friends and delete `eq_top_of_maximal` (which accidentally survived the last refactor).

### [2022-04-18T17:14:06+00:00](https://github.com/leanprover-community/mathlib/commit/5c75390e9cf88f5f2220c375e39f5726724ccd88)
feat(data/real/ennreal): Order properties of addition ([#13371](https://github.com/leanprover-community/mathlib/pull/#13371))

Inherit algebraic order lemmas from `with_top`. Also protect `ennreal.add_lt_add_iff_left` and `ennreal.add_lt_add_iff_right`, as they should have been.

### [2022-04-18T17:14:05+00:00](https://github.com/leanprover-community/mathlib/commit/546618eb1b4409f73d4d5149400bd51149e4bfae)
feat(order/upper_lower): Principal upper/lower sets ([#13069](https://github.com/leanprover-community/mathlib/pull/#13069))

Define `upper_set.Ici` and `lower_set.Iic`. Also add membership lemmas for the lattice operations.

### [2022-04-18T15:45:35+00:00](https://github.com/leanprover-community/mathlib/commit/d790b4b8b957f782577f86d9f2bc7ae10cbb8d47)
feat(set_theory/cardinal): `lt_omega_of_fintype` ([#13365](https://github.com/leanprover-community/mathlib/pull/#13365))

### [2022-04-18T10:31:05+00:00](https://github.com/leanprover-community/mathlib/commit/e18ea79e7ceca20d686217d6b28cfdda6c56363b)
feat(number_theory/legendre_symbol/quadratic_reciprocity): replace `[fact (p % 2 = 1)]` arguments by `(p ≠ 2)` ([#13474](https://github.com/leanprover-community/mathlib/pull/#13474))

This removes implicit arguments of the form `[fact (p % 2 = 1)]` and replaces them by explicit arguments `(hp : p ≠ 2)`.

(See the short discussion on April 9 in [this topic](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Quadratic.20Hilbert.20symbol.20over.20.E2.84.9A).)

### [2022-04-18T05:37:15+00:00](https://github.com/leanprover-community/mathlib/commit/82348a6001b51b8622adafb1c68094038a686352)
feat(computability/partrec_code): add eval prec helpers ([#11945](https://github.com/leanprover-community/mathlib/pull/#11945))


A few helpers to clarify the definition of `eval`.

### [2022-04-18T03:41:36+00:00](https://github.com/leanprover-community/mathlib/commit/279b7f34a1615f73b601c44fd789ba4c9949850e)
chore(scripts): update nolints.txt ([#13493](https://github.com/leanprover-community/mathlib/pull/#13493))

I am happy to remove some nolints for you!

### [2022-04-17T15:18:45+00:00](https://github.com/leanprover-community/mathlib/commit/e6322c6acc2a71447ce123bed4fae533f0ced711)
feat(analysis/convex): golf some proofs ([#13451](https://github.com/leanprover-community/mathlib/pull/#13451))

### [2022-04-17T15:18:44+00:00](https://github.com/leanprover-community/mathlib/commit/b90e770fd3929c858be4cb2f7f0ebdfc525999ed)
feat(data/fin/tuple/nat_antidiagonal): add `list.nat.antidiagonal_tuple_pairwise_pi_lex` ([#13339](https://github.com/leanprover-community/mathlib/pull/#13339))

This proof feels a little clumsy, but maybe that's unavoidable.

### [2022-04-17T13:47:06+00:00](https://github.com/leanprover-community/mathlib/commit/9380977b6bd15d12ed0f02372b6ebb922ea9e580)
chore(algebra/big_operators/fin): moving lemmas ([#13331](https://github.com/leanprover-community/mathlib/pull/#13331))

This PR moves lemmas about products and sums over `fin n` from `data/fintype/card.lean` to `algebra/big_operators/fin.lean`.



Co-authored-by: Oliver Nash <github@olivernash.org>

### [2022-04-17T12:41:22+00:00](https://github.com/leanprover-community/mathlib/commit/7c7f35148e1f22bedb5e86949c01c6f62c32d8da)
feat(topology/[separation, homeomorph]): separation properties are topological invariants ([#13401](https://github.com/leanprover-community/mathlib/pull/#13401))

### [2022-04-17T10:27:47+00:00](https://github.com/leanprover-community/mathlib/commit/49e41eb5383e372352490c6236cb0293e4e84d59)
feat(topology/algebra/order): extreme value thm for a function continuous on a closed set ([#13348](https://github.com/leanprover-community/mathlib/pull/#13348))

### [2022-04-17T03:57:45+00:00](https://github.com/leanprover-community/mathlib/commit/f4f46cd512c0b3b8aeac5f4fd6269ad231692524)
chore(scripts): update nolints.txt ([#13482](https://github.com/leanprover-community/mathlib/pull/#13482))

I am happy to remove some nolints for you!

### [2022-04-16T19:28:42+00:00](https://github.com/leanprover-community/mathlib/commit/d4fda045ca8739b8eaa1039c335634c7962b2a7b)
feat(data/finsupp/basic): add a few lemmas, mostly about `finsupp.filter` ([#13457](https://github.com/leanprover-community/mathlib/pull/#13457))

### [2022-04-16T17:33:14+00:00](https://github.com/leanprover-community/mathlib/commit/96667b51f8ce1898f54d9690ca82767f5e1b5e02)
chore(number_theory/*): Weaken assumptions ([#13443](https://github.com/leanprover-community/mathlib/pull/#13443))

Follow @alexjbest's generalization linter to weaken typeclass assumptions in number theory.

### [2022-04-16T17:33:13+00:00](https://github.com/leanprover-community/mathlib/commit/018e9b574a0034058d8f9878934a560d8a61ef7b)
chore(order/bounded_order): Match the `with_bot` and `with_top` API ([#13419](https://github.com/leanprover-community/mathlib/pull/#13419))

The API for `with_top` and the API for `with_bot` somehow evolved independently from each other, which created frustating disparity in lemmas and argument implicitness. This synchronizes everything (including the layout), generalize a few lemmas from `preorder`/`partial_order` to `has_le`/`has_lt`, and removes the duplicated `is_total (with_bot α) (≤)`/`is_total (with_top α) (≤)` instances.

### [2022-04-16T17:33:12+00:00](https://github.com/leanprover-community/mathlib/commit/8decd4b1f9a9859123632ee017f419a0d1ae3a70)
chore(logic/encodable/basic): Rename `encodable` instances ([#13396](https://github.com/leanprover-community/mathlib/pull/#13396))

The instances were called `encodable.foo` instead of `foo.encodable` as the naming convention preconizes.

### [2022-04-16T17:33:11+00:00](https://github.com/leanprover-community/mathlib/commit/91a43e71f81a7bcef8eb23acd8d8d720020865f0)
feat(algebra/order/monoid): Co/contravariant classes for `with_bot`/`with_top` ([#13369](https://github.com/leanprover-community/mathlib/pull/#13369))

Add the `covariant_class (with_bot α) (with_bot α) (+) (≤)` and `contravariant_class (with_bot α) (with_bot α) (+) (<)` instances, as well as the lemmas that `covariant_class (with_bot α) (with_bot α) (+) (<)` and `contravariant_class (with_bot α) (with_bot α) (+) (≤)` almost hold.

On the way, match the APIs for `with_bot`/`with_top` by adding missing lemmas.

Co-authored-by: Wrenna Robson <wren.robson@gmail.com>

### [2022-04-16T16:18:59+00:00](https://github.com/leanprover-community/mathlib/commit/874dde52f661a63e76f88e00d3f1eb59e5be04ed)
feat(data/polynomial/eval): generalize smul lemmas ([#13479](https://github.com/leanprover-community/mathlib/pull/#13479))

### [2022-04-16T14:27:42+00:00](https://github.com/leanprover-community/mathlib/commit/010f09e786d4a7231da1cde9c97bc0a301650eba)
feat(data/polynomial/taylor): add `taylor_alg_hom` ([#13477](https://github.com/leanprover-community/mathlib/pull/#13477))

### [2022-04-16T12:38:45+00:00](https://github.com/leanprover-community/mathlib/commit/f7430cd76fadf42d04669c8d1d2212f4489a53ec)
feat(data/polynomial/eval): add `protected` on some lemmas about `polynomial.map` ([#13478](https://github.com/leanprover-community/mathlib/pull/#13478))

These clash with global lemmas.

### [2022-04-16T05:39:36+00:00](https://github.com/leanprover-community/mathlib/commit/862a5854eec8391746da856c2c4071a7b4ccbbc3)
feat(topology/stone_cech): add stone_cech_hom_ext ([#13472](https://github.com/leanprover-community/mathlib/pull/#13472))

The universal property that characterises the Stone–Čech compactification of a topological space X is that any function from X to a compact Hausdorff space extends uniquely to a continuous function on βX. Existence is already provided by `unique_stone_cech_extend`, but it seems that the uniqueness lemma was intentionally omitted previously. Easy, but probably worth being explicit about.



Co-authored-by: Matias Heikkilä <matias@three.consulting>

### [2022-04-15T20:29:48+00:00](https://github.com/leanprover-community/mathlib/commit/449e06a904fef33505a3e562309cbd9224956be5)
feat(algebraic_topology/fundamental_groupoid/fundamental_group): add type checker helpers for convertings paths to/from elements of fundamental group ([#13182](https://github.com/leanprover-community/mathlib/pull/#13182))

This pr adds the following helper functions for converting paths to and from elements of the fundamental group:
- `to_arrow`: converts element of the fundamental group to an arrow in the fundamental groupoid
- `to_path`: converts element of the fundamental group to a (quotient of homotopic) path in the space
- `from_arrow`: constructs an element of the fundamental group from a self-arrow in the fundamental groupoid
- `from_path`: constructs an element of the fundamental group from a (quotient of homotopic) path in the space

These parallel  the similarly named functions for the fundamental group [here](https://github.com/leanprover-community/mathlib/blob/743ed5d1dd54fffd65e3a7f3522e4a4e85472964/src/algebraic_topology/fundamental_groupoid/basic.lean#L339-L355). They will prove helpful in doing computations with the fundamental group later e.g. for the disk, circle, etc.

### [2022-04-15T17:50:17+00:00](https://github.com/leanprover-community/mathlib/commit/c988c6229455cbab9b4aaf07ab1ab41fa11c2f2b)
chore(number_theory/function_field): fix typo ([#13464](https://github.com/leanprover-community/mathlib/pull/#13464))

### [2022-04-15T17:50:16+00:00](https://github.com/leanprover-community/mathlib/commit/fbff76b51a6eb293321510f1e4f3ca65accd0796)
refactor(number_theory/legendre_symbol/): move Gauss/Eisenstein lemma code to separate file ([#13449](https://github.com/leanprover-community/mathlib/pull/#13449))

In preparation of further changes to number_theory/legendre_symbol/quadratic_reciprocity, this takes most of the code dealing with the lemmas of Gauss and Eisenstein out of quadratic_reciprocity.lean into a new file gauss_eisenstein_lemmas.lean.

Since I am not planning to do much (if anything) to this part of the code and it is rather involved and slows down Lean when I'm editing quadratic_reciprocity.lean, it makes sense to separate this code from the remainder of the file.



Co-authored-by: Oliver Nash <github@olivernash.org>

### [2022-04-15T17:09:01+00:00](https://github.com/leanprover-community/mathlib/commit/0c2d68a0610fea63b572b0b5e0aa8d43d5cd5235)
feat(data/sym/sym2): mem_map/mem_congr/map_id' ([#13437](https://github.com/leanprover-community/mathlib/pull/#13437))

Additional simplification lemmas, one to address non-simp-normal-form. (Also did a few proof simplifications.)

### [2022-04-15T15:03:07+00:00](https://github.com/leanprover-community/mathlib/commit/d6c1cf1668dd62584c7f6cbae3d428f80f7122cb)
feat(analysis/normed_space/pointwise): Balls disjointness ([#13379](https://github.com/leanprover-community/mathlib/pull/#13379))

Two balls in a real normed space are disjoint iff the sum of their radii is less than the distance between their centers.

### [2022-04-15T15:03:06+00:00](https://github.com/leanprover-community/mathlib/commit/2194eef23f2aaa72109edc5de4079495485a2328)
chore(ring_theory/ideal/local_ring): generalize to semirings ([#13341](https://github.com/leanprover-community/mathlib/pull/#13341))

### [2022-04-15T15:03:05+00:00](https://github.com/leanprover-community/mathlib/commit/c65bebb5a0781bf162bfba9a652e6b122681ebfc)
feat(number_theory/padics/padic_numbers): add padic.add_valuation ([#12939](https://github.com/leanprover-community/mathlib/pull/#12939))

We define the p-adic additive valuation on `Q_[p]`, as an `add_valuation` with values in `with_top Z`.

### [2022-04-15T13:10:57+00:00](https://github.com/leanprover-community/mathlib/commit/bbbea1c17a0d4c4b3898b7fb8be93c7ddcb8421a)
chore(*): clean up unnecessary uses of nat.cases_on ([#13454](https://github.com/leanprover-community/mathlib/pull/#13454))

### [2022-04-15T11:12:38+00:00](https://github.com/leanprover-community/mathlib/commit/ebc8b441f8f602d8b0cf28c201056bfc0c86bc9c)
feat(analysis/normed_space/basic): `pi` and `prod` are `normed_algebra`s ([#13442](https://github.com/leanprover-community/mathlib/pull/#13442))

Note that over an empty index type, `pi` is not a normed_algebra since it is trivial as a ring.

### [2022-04-15T10:39:09+00:00](https://github.com/leanprover-community/mathlib/commit/d13f291b4f9194b0cc1e49e5fe356a7ff9ea0972)
feat(group_theory/group_action/conj_act): conjugation by the units of a monoid ([#13439](https://github.com/leanprover-community/mathlib/pull/#13439))

I suspect we can make this even more general in future by introducing a compatibility typeclass, but this is good enough for me for now.

This also adds a stronger typeclass for the existing action of `conj_act K` where `K` is a `division_ring`.

### [2022-04-15T09:02:46+00:00](https://github.com/leanprover-community/mathlib/commit/dd51529f58cfbe33f3320231d3561bd4b2e8e2c1)
feat(combinatorics/simple_graph/subgraph): delete_edges ([#13306](https://github.com/leanprover-community/mathlib/pull/#13306))

Construct a subgraph from another by deleting edges.

### [2022-04-15T04:32:08+00:00](https://github.com/leanprover-community/mathlib/commit/d6a46b79e3d840f8a07bdc7df58752af963ae93d)
chore(scripts): update nolints.txt ([#13455](https://github.com/leanprover-community/mathlib/pull/#13455))

I am happy to remove some nolints for you!

### [2022-04-15T03:41:29+00:00](https://github.com/leanprover-community/mathlib/commit/6a5764b3a0ab1506fd7204f11e58591b19fc8edd)
chore(analysis/normed_space/multilinear): use notation ([#13452](https://github.com/leanprover-community/mathlib/pull/#13452))

* use notation `A [×n]→L[𝕜] B`;
* use `A → B` instead of `Π x : A, B`.

### [2022-04-15T02:47:13+00:00](https://github.com/leanprover-community/mathlib/commit/d81cedb1d1d9f2ecfd13335f1095a090c9a22d92)
feat(topology/algebra/module/multilinear): relax requirements for `continuous_multilinear_map.mk_pi_algebra` ([#13426](https://github.com/leanprover-community/mathlib/pull/#13426))

`continuous_multilinear_map.mk_pi_algebra` and `continuous_multilinear_map.mk_pi_algebra_fin` do not need a norm on either the algebra or base ring; all they need is a topology on the algebra compatible with multiplication.

The much weaker typeclasses cause some elaboration issues in a few places, as the normed space can no longer be found by unification. Adding a non-dependent version of `continuous_multilinear_map.has_op_norm` largely resolves this, although a few  API proofs about `mk_pi_algebra` and `mk_pi_algebra_fin` end up quite underscore heavy.

This is the first step in being able to define `exp` without first choosing a `norm`.

### [2022-04-14T20:31:11+00:00](https://github.com/leanprover-community/mathlib/commit/1506335dfb497c13e35430b320ca4ac897cd3380)
chore(number_theory/zsqrtd/*): Missing docstrings and cleanups ([#13445](https://github.com/leanprover-community/mathlib/pull/#13445))

Add docstrings to `gaussian_int` and `zsqrtd.norm` and inline definitions which did not have a docstring nor deserved one.

### [2022-04-14T17:32:49+00:00](https://github.com/leanprover-community/mathlib/commit/cbf3062bbc75ad2ca7757e1196690721d6f6b5e8)
feat(combinatorics/simple_graph/connectivity): define connected components ([#12766](https://github.com/leanprover-community/mathlib/pull/#12766))

### [2022-04-14T15:31:41+00:00](https://github.com/leanprover-community/mathlib/commit/251bd842ce7eba6c2fa7091c277bc3715f744063)
feat(group_theory/subgroup/basic): One more `mem_normalizer_iff` lemma ([#13395](https://github.com/leanprover-community/mathlib/pull/#13395))

This PR golfs `mem_normalizer_iff'` and adds `mem_normalizer_iff''`. There are not so easy to deduce from each other, so it's nice to have these variations available.

### [2022-04-14T15:31:40+00:00](https://github.com/leanprover-community/mathlib/commit/8bbc5ac4435372b888eeae07255e3e3a7226b0c8)
feat(combinatorics/additive/salem_spencer): Salem-Spencer sets under images ([#13279](https://github.com/leanprover-community/mathlib/pull/#13279))

A set `s` is Salem-Spencer iff its image under an injective Freiman hom is.

### [2022-04-14T14:09:05+00:00](https://github.com/leanprover-community/mathlib/commit/fecdd4b2008feb7e5fe584821227547367dd30ff)
feat(measure_theory/card_measurable_space): `generate_measurable_rec s` gives precisely the generated sigma-algebra ([#12462](https://github.com/leanprover-community/mathlib/pull/#12462))




Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2022-04-14T13:04:58+00:00](https://github.com/leanprover-community/mathlib/commit/adfe9c7fc6e377377776d72f3d45bebecf66af2a)
feat(topology/algebra/order/compact): Sup is continuous ([#13347](https://github.com/leanprover-community/mathlib/pull/#13347))

* Prove that the `Sup` of a binary function over a compact set is continuous in the second variable
* Some other lemmas about `Sup`
* Move and generalize `is_compact.bdd_[above|below]_image`
* from the sphere eversion project

### [2022-04-14T11:12:39+00:00](https://github.com/leanprover-community/mathlib/commit/936eb7eec6d83b64445274beb55dc351c96d4ae7)
feat(analysis/normed_space/finite_dimension): a finite dimensional affine subspace is closed ([#13440](https://github.com/leanprover-community/mathlib/pull/#13440))

### [2022-04-14T11:12:38+00:00](https://github.com/leanprover-community/mathlib/commit/9631a91350d11015b554ef1c553efc24c13691f9)
feat(ring_theory/multiplicity): int.nat_abs ([#13420](https://github.com/leanprover-community/mathlib/pull/#13420))


Spinning off of [#12454](https://github.com/leanprover-community/mathlib/pull/#12454)

### [2022-04-14T11:12:37+00:00](https://github.com/leanprover-community/mathlib/commit/88ba31c99b69ad482a754971d053a9a87355d499)
feat(measure_theory/constructions/pi): more `measure_preserving` lemmas ([#13404](https://github.com/leanprover-community/mathlib/pull/#13404))

* Reformulate `map_pi_equiv_pi_subtype_prod` in terms of
  `measure_preserving`.

* Add more equivalences (bare equivalences, order isomorphisms, and
  measurable equivalences) on pi types.

### [2022-04-14T11:12:36+00:00](https://github.com/leanprover-community/mathlib/commit/dd34ffaff0b06278ffe0814b68243fa5f46e039a)
refactor(group_theory/schur_zassenhaus): Golf using `is_complement'_stabilizer` ([#13392](https://github.com/leanprover-community/mathlib/pull/#13392))

This PR golfs the proof of the abelian case of Schur-Zassenhaus using the new lemma `is_complement'_stabilizer`.

### [2022-04-14T11:12:35+00:00](https://github.com/leanprover-community/mathlib/commit/15b764d8386d8e114a6fd3a899afb4736a21fa5f)
feat(group_theory/complement): Add more API for the action on left transversals ([#13363](https://github.com/leanprover-community/mathlib/pull/#13363))

This PR adds more API for the action on left transversals.

### [2022-04-14T11:12:34+00:00](https://github.com/leanprover-community/mathlib/commit/769ec8c8f414d83b06289b2dd744bce179372b25)
feat(group_theory/group_action/basic): Right multiplication satisfies the `quotient_action` axiom ([#13362](https://github.com/leanprover-community/mathlib/pull/#13362))

This PR adds an instance stating that the right multiplication action of `H.normalizer.opposite` on `G` satisfies the `quotient_action` axiom. In particular, we automatically get the induced action of `H.normalizer.opposite` on `G ⧸ H`, so we can delete the existing instance. (Technically, the existing instance was stated in terms of `H.normalizerᵐᵒᵖ`, but I think `H.normalizer.opposite` is a more natural way to write it).

### [2022-04-14T11:12:33+00:00](https://github.com/leanprover-community/mathlib/commit/3676f11db6ed591759a2351ac8008652bb40783f)
chore(order/complete_lattice): General cleanup ([#13323](https://github.com/leanprover-community/mathlib/pull/#13323))

### [2022-04-14T11:12:32+00:00](https://github.com/leanprover-community/mathlib/commit/7bb10813cac2c0eb023ba30fcc077beab4595097)
feat(category_theory): turn a split mono with cokernel into a biproduct ([#13184](https://github.com/leanprover-community/mathlib/pull/#13184))

### [2022-04-14T10:16:39+00:00](https://github.com/leanprover-community/mathlib/commit/2693ab58387d4ca25307385aa1044f57e8f39fb9)
feat(number_theory/legendre_symbol): add directory legendre_symbol and move quadratic_reciprocity.lean into it ([#13441](https://github.com/leanprover-community/mathlib/pull/#13441))

In preparation of adding more code in a structured way, this sets up a new directory `legendre_symbol` below `number_theory` and moves the file `quadratic_reciprocity.lean` there.

The imports in `src/number_theory/zsqrtd/gaussian_int.lean` and `archive/imo/imp2008_q3.lean` are changed accordingly.

### [2022-04-14T10:16:38+00:00](https://github.com/leanprover-community/mathlib/commit/eb2780b6dc19f50b1d25a45e80db6dc2d50d35e3)
feat(topology/unit_interval): add lemmas ([#13344](https://github.com/leanprover-community/mathlib/pull/#13344))

* also change the statement of `unit_interval.mul_mem`
* from the sphere eversion project

### [2022-04-14T08:29:02+00:00](https://github.com/leanprover-community/mathlib/commit/87f8076f2edee7d522a86d31b11850d7bb53fb83)
chore(data/nat/factorial): tidy ([#13436](https://github.com/leanprover-community/mathlib/pull/#13436))

I noticed this file had non-terminal simps, so I tidied it a little whilst removing them.

### [2022-04-14T08:29:00+00:00](https://github.com/leanprover-community/mathlib/commit/dac4f18f4723082699b571c9bbf7887f5a815760)
feat(data/mv_polynomial): add support_X_pow ([#13435](https://github.com/leanprover-community/mathlib/pull/#13435))

A simple lemma to match the `polynomial` API

from flt-regular

### [2022-04-14T08:28:58+00:00](https://github.com/leanprover-community/mathlib/commit/1378eabf1a6d2c1e4eec37d4eb30eb8454214379)
feat(complex/roots_of_unity):  extensionality ([#13431](https://github.com/leanprover-community/mathlib/pull/#13431))

Primitive roots are equal iff their arguments are equal. Adds some useful specialisations, too.

### [2022-04-14T06:30:11+00:00](https://github.com/leanprover-community/mathlib/commit/2249a240e5a2419cc17901ad240f8fc5435520b2)
chore(*): suggestions from the generalisation linter ([#13092](https://github.com/leanprover-community/mathlib/pull/#13092))

Prompted by zulip discussion at https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/An.20example.20of.20why.20formalization.20is.20useful

These are the "reasonable" suggestions from @alexjbest's generalisation linter up to `algebra.group.basic`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-14T03:43:29+00:00](https://github.com/leanprover-community/mathlib/commit/a5654710c05b560092e24548d91d9a59459ab648)
chore(scripts): update nolints.txt ([#13438](https://github.com/leanprover-community/mathlib/pull/#13438))

I am happy to remove some nolints for you!

### [2022-04-14T02:07:07+00:00](https://github.com/leanprover-community/mathlib/commit/b62626e5d00c3b229c6b0d2a6cb1ce66599b6bc2)
feat(complex/arg): arg_eq_zero_iff ([#13432](https://github.com/leanprover-community/mathlib/pull/#13432))

### [2022-04-13T23:29:58+00:00](https://github.com/leanprover-community/mathlib/commit/0765994dbf07dfa81622be12ef255dbe3fbcf7e7)
chore(order/category/Preorder): reduce imports ([#13301](https://github.com/leanprover-community/mathlib/pull/#13301))

Because `punit_instances` comes at the very end of the algebraic import hierarchy, we were requiring the entire algebraic hierarchy before we could begin compiling the theory of categorical limits.

This tweak substantially reduces the import dependencies.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-13T22:15:36+00:00](https://github.com/leanprover-community/mathlib/commit/6f401acf4faec3ab9ab13a42789c4f68064a61cd)
feat(data/polynomial/*): suggestions from the generalization linter ([#13342](https://github.com/leanprover-community/mathlib/pull/#13342))



Co-authored-by: negiizhao <egresf@gmail.com>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-13T18:43:15+00:00](https://github.com/leanprover-community/mathlib/commit/76c969b744a3a81d5a15782b94bb43edff47d7b6)
chore(algebra/polynomial/big_operators): drop some nontrivial assumptions ([#13428](https://github.com/leanprover-community/mathlib/pull/#13428))

### [2022-04-13T17:31:46+00:00](https://github.com/leanprover-community/mathlib/commit/da13598ddd7a8191b786860dad88e7071938360e)
feat(model_theory/encoding): Bundled encoding of terms ([#13226](https://github.com/leanprover-community/mathlib/pull/#13226))

Bundles `term.list_encode` and `term.list_decode` into a `computability.encoding`

### [2022-04-13T16:27:43+00:00](https://github.com/leanprover-community/mathlib/commit/991386042dcdf32785cb71f08cc7b6aaf47790b8)
feat(ring_theory/tensor_product): add assoc for tensor product as an algebra homomorphism ([#13309](https://github.com/leanprover-community/mathlib/pull/#13309))

By speeding up a commented out def, this goes from from ~100s to ~7s on my machine .


Co-authored-by: Scott Morrison <scott@tqft.net>

### [2022-04-13T10:56:42+00:00](https://github.com/leanprover-community/mathlib/commit/0c3f75bb3c9a9797ad394b77d9df5771d94c05ec)
feat(analysis/normed_space/basic): normed division algebras over ℝ are also normed algebras over ℚ ([#13384](https://github.com/leanprover-community/mathlib/pull/#13384))

This results shows that `algebra_rat` respects the norm in ` ℝ`-algebras that respect the norm.

The new instance carries no new data, as the norm and algebra structure are already defined elsewhere.

Probably there is a weaker requirement for compatibility, but I have no idea what it is, and the weakening can come later.

### [2022-04-13T10:56:41+00:00](https://github.com/leanprover-community/mathlib/commit/50ff59adea78a1bc90ee50c543251d55ca95b51a)
feat(model_theory/skolem, satisfiability): A weak Downward Loewenheim Skolem ([#13141](https://github.com/leanprover-community/mathlib/pull/#13141))

Defines a language and structure with built-in Skolem functions for a particular language
Proves a weak form of Downward Loewenheim Skolem: every structure has a small (in the universe sense) elementary substructure
Shows that `T` having a model in any universe implies `T.is_satisfiable`.

### [2022-04-13T10:56:40+00:00](https://github.com/leanprover-community/mathlib/commit/647aa5be0bcdc8179a664b379e62c7bcbbd9a076)
feat(model_theory/fraisse): Defines ultrahomogeneous structures, fixes Fraïssé limit definition ([#12994](https://github.com/leanprover-community/mathlib/pull/#12994))

Defines ultrahomogeneous structures
Fixes the definition of a Fraïssé limit to require ultrahomogeneity
Completes the characterization of when a class is the age of a countable structure.

### [2022-04-13T08:59:52+00:00](https://github.com/leanprover-community/mathlib/commit/6f59d7777cceba0fff1030042be3c612bb738da7)
feat(order/bounded_order): Basic API for `subtype.order_bot` and  `subtype.order_top` ([#12904](https://github.com/leanprover-community/mathlib/pull/#12904))

A few `simp` lemmas that were needed for `subtype.order_bot` and  `subtype.order_top`.

### [2022-04-13T07:30:42+00:00](https://github.com/leanprover-community/mathlib/commit/5b8bb9b4f790724f05fcefd83bd3f482836c6fd6)
feat(category_theory/monoidal): define monoidal structure on the category of monoids in a braided monoidal category ([#13122](https://github.com/leanprover-community/mathlib/pull/#13122))

Building on the preliminary work from the previous PRs, we finally show that monoids in a braided monoidal category form a monoidal category.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Scott Morrison <scott@tqft.net>

### [2022-04-13T04:14:04+00:00](https://github.com/leanprover-community/mathlib/commit/1de6ce93c44bd9b9a71bc5c967bd24de04ee1af7)
chore(scripts): update nolints.txt ([#13408](https://github.com/leanprover-community/mathlib/pull/#13408))

I am happy to remove some nolints for you!

### [2022-04-13T04:14:03+00:00](https://github.com/leanprover-community/mathlib/commit/b0bd77168ea7a0857a113bda3a5baddfc2f80c62)
fix(combinatorics/simple_graph/connectivity): correctly generalized variables ([#13405](https://github.com/leanprover-community/mathlib/pull/#13405))

### [2022-04-13T04:14:02+00:00](https://github.com/leanprover-community/mathlib/commit/917fc964bc0a1d671077e9220fdf93c7183a0456)
refactor(set_theory/cofinality): Normalize names ([#13400](https://github.com/leanprover-community/mathlib/pull/#13400))

We rename lemmas of the form `is_regular (foo x)` to `is_regular_foo` instead of `foo_is_regular`.

### [2022-04-13T02:38:14+00:00](https://github.com/leanprover-community/mathlib/commit/ac7a356aab6078a555e199317a48063281f2ccb5)
chore(set_theory/*): Fix lint ([#13399](https://github.com/leanprover-community/mathlib/pull/#13399))

Add missing docstrings and `inhabited` instances or a `nolint` when an `inhabited` instance isn't reasonable.

### [2022-04-13T02:38:13+00:00](https://github.com/leanprover-community/mathlib/commit/8c9ee310d3c57afaa121d54c9f44d692a705e5df)
feat(order/conditionally_complete_lattice): Add `le_cSup_iff` ([#13321](https://github.com/leanprover-community/mathlib/pull/#13321))

### [2022-04-13T00:37:31+00:00](https://github.com/leanprover-community/mathlib/commit/fb94880815a8c24f45e269189df0bd6386e831e7)
refactor(category_theory/shift): tighten scope of local attribute [reducible] ([#13335](https://github.com/leanprover-community/mathlib/pull/#13335))

In all the files dealing with shifts on categories, we have a sprinkling of `local attribute [reducible]`, without which we get somewhat mysterious errors.

However with them, we produce some very fragile proof states (recently I was upset to see that shifting by `(0 : A)` and shifting by the tensor unit in `discrete A` were not definitionally commuting...).

I've been attempting to refactor this part of the library so we just never need to use `local attribute [reducible]`, in the hope of making these problems go away.

Having failed so far, this PR simply tightens the scopes of these local attributes as narrowly as possible (or in cases removes them entirely), so it is clearer exactly what is relying on them to work.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-12T23:52:20+00:00](https://github.com/leanprover-community/mathlib/commit/f496ef4cd623f028d9b735bd36ba8c51a54b9900)
feat(computability/{language/regular_expressions): Map along a function ([#13197](https://github.com/leanprover-community/mathlib/pull/#13197))

Define `language.map` and `regular_expression.map`.

Co-authored-by: Fox Thomson

### [2022-04-12T23:00:49+00:00](https://github.com/leanprover-community/mathlib/commit/7ece83edb5d28ef1a13ef3399da8f066faf8c2ec)
feat(topology/homotopy): Add definition of contractible spaces ([#12731](https://github.com/leanprover-community/mathlib/pull/#12731))

### [2022-04-12T22:12:37+00:00](https://github.com/leanprover-community/mathlib/commit/94a52c43976c5b460cf3886d82ce5deb4076bb7b)
feat(category_theory/monoidal): prove that in a braided monoidal category unitors and associators are monoidal natural transformations ([#13121](https://github.com/leanprover-community/mathlib/pull/#13121))

This PR contains proofs of lemmas that are used in the stacked PR to define a monoidal structure on the category of monoids in a braided monoidal category.  The lemmas can be summarised by saying that in a braided monoidal category unitors and associators are monoidal natural transformations.

Note that for these statements to make sense we would need to define monoidal functors that are sources and targets of these monoidal natural transformations.  For example, the morphisms `(α_ X Y Z).hom` are the components of a monoidal natural transformation
```
(tensor.prod (𝟭 C)) ⊗⋙ tensor  ⟶ Α_ ⊗⋙ ((𝟭 C).prod tensor) ⊗⋙ tensor
```
where `Α_ : monoidal_functor ((C × C) × C) (C × (C × C))` is the associator functor given by `λ X, (X.1.1, (X.1.2, X.2))` on objects.  I didn't define the functor `Α_`.  (The easiest way would be to build it up using `prod'` we have already defined from `fst` and `snd`, which we would need to define as monoidal functors.)  Instead, I stated and proved the commutative diagram that expresses the monoidality of the above transformation.  Ditto for unitors.  Please let me know if you'd like me to define all the required functors and monoidal natural transformations.  The monoidal natural transformations themselves are not used in the proof that the category of monoids in a braided monoidal category is monoidal and only provide meaningful names to the lemmas that are used in the proof.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Scott Morrison <scott@tqft.net>

### [2022-04-12T20:53:45+00:00](https://github.com/leanprover-community/mathlib/commit/78ea75a008b843af023dab0dce8dabaebff7a27b)
feat(order/filter/cofinite): add lemmas, golf ([#13394](https://github.com/leanprover-community/mathlib/pull/#13394))

* add `filter.comap_le_cofinite`,
  `function.injective.comap_cofinite_eq`, and
  `filter.has_basis.coprod`;
* rename `at_top_le_cofinite` to `filter.at_top_le_cofinite`;
* golf `filter.coprod_cofinite` and `filter.Coprod_cofinite`, move
  them below `filter.comap_cofinite_le`;

### [2022-04-12T20:08:54+00:00](https://github.com/leanprover-community/mathlib/commit/da4ec7e1b56fd53732fe7c155fc39da48653bf63)
feat(ring_theory/valuation/valuation_subring): Valuation subrings of a field ([#12741](https://github.com/leanprover-community/mathlib/pull/#12741))

### [2022-04-12T18:28:33+00:00](https://github.com/leanprover-community/mathlib/commit/e72f275d3d6f3b2557f31f9b8b3588f9422ef2e4)
feat(number_theory/qudratic_reciprocity): change type of `a` in API lemmas to `int` ([#13393](https://github.com/leanprover-community/mathlib/pull/#13393))

This is step 2 in the overhaul of number_theory/qudratic_reciprocity.

The only changes are that the argument `a` is now of type `int` rather than `nat` in a bunch of statements.
This is more natural, since the corresponding (now second) argument of `legendre_symnbol` is of type `int`; it therefore makes the API lemmas more easily useable.

### [2022-04-12T18:28:32+00:00](https://github.com/leanprover-community/mathlib/commit/3bbb847e29ebea13277c14e508d8e03c31ca294d)
chore(*): remove instance arguments that are inferrable from earlier ([#13386](https://github.com/leanprover-community/mathlib/pull/#13386))

Some lemmas have typeclass arguments that are in fact inferrable from the earlier ones, at least when everything is Prop valued this is unecessary so we clean up a few cases as they likely stem from typos or library changes. 

- `src/field_theory/finiteness.lean` it wasn't known at the time ([#7644](https://github.com/leanprover-community/mathlib/pull/#7644)) that a division ring was noetherian, but now it is ([#7661](https://github.com/leanprover-community/mathlib/pull/#7661))
- `src/category_theory/simple.lean` any abelian category has all cokernels so no need to assume it seperately
- `src/analysis/convex/extreme.lean` assumed `linear_ordered_field` and `no_smul_zero_divisors` which is unnecessary, we take this as a sign that this and a couple of other convexity results should be generalized to densely ordered linear ordered rings (of which there are examples that are not fields) cc @YaelDillies

### [2022-04-12T18:28:30+00:00](https://github.com/leanprover-community/mathlib/commit/116ac710c70c1e6432db744b3b75ea581a790bdb)
feat(analysis/normed_space/exponential): exponentials of negations, scalar actions, and sums ([#13036](https://github.com/leanprover-community/mathlib/pull/#13036))

The new lemmas are:

* `exp_invertible_of_mem_ball`
* `exp_invertible`
* `is_unit_exp_of_mem_ball`
* `is_unit_exp`
* `ring.inverse_exp`
* `exp_neg_of_mem_ball`
* `exp_neg`
* `exp_sum_of_commute`
* `exp_sum`
* `exp_nsmul`
* `exp_zsmul`

I don't know enough about the radius of convergence of `exp` to know if `exp_nsmul` holds more generally under extra conditions.

### [2022-04-12T17:21:31+00:00](https://github.com/leanprover-community/mathlib/commit/949021d6a32b109b471897d298ebe372275b7e04)
feat(ring_theory/algebraic): Rational numbers are algebraic ([#13367](https://github.com/leanprover-community/mathlib/pull/#13367))

### [2022-04-12T17:21:10+00:00](https://github.com/leanprover-community/mathlib/commit/c994ab3fdf553b13c1ad0a01076fd2d1c71c340c)
feat(category_theory/monoidal): define a monoidal structure on the tensor product functor of a braided monoidal category ([#13150](https://github.com/leanprover-community/mathlib/pull/#13150))

Given a braided monoidal category `C`, equip its tensor product functor, viewed as a functor from `C × C` to `C` with a strength that turns it into a monoidal functor.

See [#13033](https://github.com/leanprover-community/mathlib/pull/#13033) for a discussion of the motivation of this definition.

(This PR replaces [#13034](https://github.com/leanprover-community/mathlib/pull/#13034) which was accidentally closed.)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: yuma-mizuno <mizuno.y.aj@gmail.com>

### [2022-04-12T15:33:18+00:00](https://github.com/leanprover-community/mathlib/commit/4c0a2744a4ba4eacbb331e2e7ca273354761f952)
doc(model_theory/order): typo in docstrings ([#13390](https://github.com/leanprover-community/mathlib/pull/#13390))

### [2022-04-12T15:33:16+00:00](https://github.com/leanprover-community/mathlib/commit/0c8b80849dc7e4bc3e0c4dbabf1f63a284e30aec)
fix(measure_theory/function/lp_space): fix an instance diamond in `measure_theory.Lp.has_edist` ([#13388](https://github.com/leanprover-community/mathlib/pull/#13388))

This also changes the definition of `edist` to something definitionally nicer



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2022-04-12T15:33:15+00:00](https://github.com/leanprover-community/mathlib/commit/c21561a0b1c01d3aab8d13687dbc4d510f5f8682)
feat(algebra/direct_sum): Reindexing direct sums ([#13076](https://github.com/leanprover-community/mathlib/pull/#13076))

Lemmas to reindex direct sums, as well as to rewrite direct sums over an option or sigma type.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-04-12T13:28:12+00:00](https://github.com/leanprover-community/mathlib/commit/745099b8f658bb70ad34ac6abce1a60b0e4ba251)
chore(*/parity): Generalize lemmas and clarify names  ([#13268](https://github.com/leanprover-community/mathlib/pull/#13268))

Generalizations

### [2022-04-12T12:36:48+00:00](https://github.com/leanprover-community/mathlib/commit/4b45a714873cc7556f573a42a222a3b4bf3eb622)
feat(counterexamples/pseudoelement): add counterexample to uniqueness in category_theory.abelian.pseudoelement.pseudo_pullback ([#13387](https://github.com/leanprover-community/mathlib/pull/#13387))

Borceux claims that the pseudoelement constructed in `category_theory.abelian.pseudoelement.pseudo_pullback` is unique. We show here that this claim is false.

### [2022-04-12T12:36:47+00:00](https://github.com/leanprover-community/mathlib/commit/73ec5b27b7896912da1d25e53d6957cc4c42960c)
chore(category_theory/closed/monoidal): correct error in doc string ([#13385](https://github.com/leanprover-community/mathlib/pull/#13385))

Sorry, should have done this immediately when @b-mehta pointed out my mistake.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-12T12:36:46+00:00](https://github.com/leanprover-community/mathlib/commit/ef8e256d9b47f9e0f38d8da26df622ff2aa5e7c5)
feat(number_theory/cyclotomic): alg-closed fields are cyclotomic extensions over themselves ([#13366](https://github.com/leanprover-community/mathlib/pull/#13366))




Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-04-12T11:56:25+00:00](https://github.com/leanprover-community/mathlib/commit/5534e246ec25d904c7d89053e2a8efcdfcef18b0)
chore(category_theory/preadditive/biproducts): Speed up `biprod.column_nonzero_of_iso` ([#13383](https://github.com/leanprover-community/mathlib/pull/#13383))

From 76s down to 2s. The decidability synthesis in `by_contradiction` is stupidly expensive.

### [2022-04-12T11:56:24+00:00](https://github.com/leanprover-community/mathlib/commit/4bcc532546299b17487b68a4767b541b45f0ba1a)
refactor(control/fold): don't use is_monoid_hom ([#13350](https://github.com/leanprover-community/mathlib/pull/#13350))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-12T10:40:32+00:00](https://github.com/leanprover-community/mathlib/commit/8b27c457cdb136efa60c5f8835a4e280adde0e11)
feat(order/filter/pointwise): Missing pointwise operations ([#13170](https://github.com/leanprover-community/mathlib/pull/#13170))

Define inversion/negation, division/subtraction, scalar multiplication/addition, scaling/translation, scalar subtraction of filters using the new `filter.map₂`. Golf the existing API.

### [2022-04-12T08:46:24+00:00](https://github.com/leanprover-community/mathlib/commit/998496068adc107acb37998b1aef08f2850d23dd)
fix(counterexamples): typo in module docstring ([#13378](https://github.com/leanprover-community/mathlib/pull/#13378))

### [2022-04-12T08:46:23+00:00](https://github.com/leanprover-community/mathlib/commit/36bafae8982ecc5a25ec73f5286c13e04f83c936)
feat(topology/bornology/basic): review ([#13374](https://github.com/leanprover-community/mathlib/pull/#13374))

* add lemmas;
* upgrade some implications to `iff`s.

### [2022-04-12T08:46:23+00:00](https://github.com/leanprover-community/mathlib/commit/d065fd4a4d9a1b8742f96df324563fe80af74584)
feat(ring_theory/ideal): generalize `x mod I ∈ J mod I ↔ x ∈ J` ([#13358](https://github.com/leanprover-community/mathlib/pull/#13358))

We already had a lemma like this assuming `I ≤ J`, and we can drop the assumption if we instead change the RHS to `x ∈ J \sup I`.

This also golfs the proof of the original `mem_quotient_iff_mem`.

### [2022-04-12T08:46:22+00:00](https://github.com/leanprover-community/mathlib/commit/c8835190a8428a04fe740a25cc5303208f096b14)
feat(ring_theory/unique_factorization_domain): `factors x = normalized_factors x` ([#13356](https://github.com/leanprover-community/mathlib/pull/#13356))

If the group of units is trivial, an arbitrary choice of factors is exactly the unique set of normalized factors.

I made this a `simp` lemma in this direction because `normalized_factors` has a stronger specification than `factors`. I believe currently we actually know less about `normalized_factors` than `factors`, so if it proves too inconvenient I can also remove the `@[simp]`.

### [2022-04-12T08:46:20+00:00](https://github.com/leanprover-community/mathlib/commit/85588f8777391727031f3122f49df54a5918605a)
feat(data/multiset): lemmas on intersecting a multiset with `repeat x n` ([#13355](https://github.com/leanprover-community/mathlib/pull/#13355))

Intersecting a multiset `s` with `repeat x n` gives `repeat x (min n (s.count x))`.

### [2022-04-12T08:46:19+00:00](https://github.com/leanprover-community/mathlib/commit/f7fe7dd0db39a30b21258279966e13f0c85af2b4)
refactor(ring_theory/free_comm_ring): don't use is_ring_hom ([#13352](https://github.com/leanprover-community/mathlib/pull/#13352))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-12T08:46:19+00:00](https://github.com/leanprover-community/mathlib/commit/fd53ce0f201af708e8d46b69497c839b267afaea)
feat(order/filter/at_top_bot): add more `disjoint` lemmas ([#13351](https://github.com/leanprover-community/mathlib/pull/#13351))

### [2022-04-12T08:46:18+00:00](https://github.com/leanprover-community/mathlib/commit/708e2deea460e4952f05730c95c27cd244af6d7c)
chore(group_theory/free_abelian_group): remove is_add_monoid_hom ([#13349](https://github.com/leanprover-community/mathlib/pull/#13349))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-12T08:46:17+00:00](https://github.com/leanprover-community/mathlib/commit/333e4be6e65ca44b7c91da86a04b347ed92f8a0a)
feat(algebra/group/basic|topology/connected): add two lemmas ([#13345](https://github.com/leanprover-community/mathlib/pull/#13345))

* from the sphere eversion project

### [2022-04-12T08:46:16+00:00](https://github.com/leanprover-community/mathlib/commit/56d63993e8a0f4547895b089cd7ee00f016bf76b)
chore(set_theory/cardinal): Golf `mk_le_mk_mul_of_mk_preimage_le` ([#13329](https://github.com/leanprover-community/mathlib/pull/#13329))

### [2022-04-12T08:46:15+00:00](https://github.com/leanprover-community/mathlib/commit/670735fc6a3aaaeb5c27643ccf313bd785fc6815)
feat(model_theory/order): The theory of dense linear orders without endpoints ([#13253](https://github.com/leanprover-community/mathlib/pull/#13253))

Defines the theory of dense linear orders without endpoints

### [2022-04-12T08:46:14+00:00](https://github.com/leanprover-community/mathlib/commit/34853a95f47a57e35253f7c08095d480af6c80ed)
feat(topology/algebra/algebra): define the topological subalgebra generated by an element ([#13093](https://github.com/leanprover-community/mathlib/pull/#13093))

This defines the topological subalgebra generated by a single element `x : A` of an algebra `A` as the topological closure of `algebra.adjoin R {x}`, and show it is commutative.

I called it `algebra.elemental_algebra`; if someone knows if this actually has a name in the literature, or just has a better idea for the name, let me know!

### [2022-04-12T08:46:12+00:00](https://github.com/leanprover-community/mathlib/commit/ed919b61d16ae888946400c66f338bfcfb469810)
feat(algebra/algebraic_card): Cardinality of algebraic numbers ([#12869](https://github.com/leanprover-community/mathlib/pull/#12869))

We prove the following result: the cardinality of algebraic numbers under an R-algebra is at most `# polynomial R * ω`.

### [2022-04-12T08:46:11+00:00](https://github.com/leanprover-community/mathlib/commit/6bc2bd6eae1ae0880ee4ef24a5ab878911868c69)
feat(algebraic_geometry/projective_spectrum): Proj as a locally ringed space ([#12773](https://github.com/leanprover-community/mathlib/pull/#12773))

This pr is about proving that Proj with its structure sheaf is a locally ringed space

### [2022-04-12T08:46:10+00:00](https://github.com/leanprover-community/mathlib/commit/72e1a9ee61b83d5d6382ee3242783aec9ea2a0ee)
feat(ring_theory/valuation/valuation_ring): Valuation rings and their associated valuation. ([#12719](https://github.com/leanprover-community/mathlib/pull/#12719))

This PR defines a class `valuation_ring`, stating that an integral domain is a valuation ring.
We also show that valuation rings induce valuations on their fraction fields, that valuation rings are local, and that their lattice of ideals is totally ordered.



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2022-04-12T07:55:03+00:00](https://github.com/leanprover-community/mathlib/commit/b889567e29ca0fdff07ade76e18fddf10ef0a5a1)
feat(data/complex/basic): add a few lemmas ([#13354](https://github.com/leanprover-community/mathlib/pull/#13354))

### [2022-04-12T05:57:50+00:00](https://github.com/leanprover-community/mathlib/commit/0783742ab425e7d68210a8899d4fb7a91a6a6d8c)
chore(*): more assumptions to lemmas that are removable ([#13364](https://github.com/leanprover-community/mathlib/pull/#13364))

This time I look at assumptions that are actually provable by simp from the earlier assumptions (fortunately there are only a couple of these), and one more from the review of [#13316](https://github.com/leanprover-community/mathlib/pull/#13316) that was slightly too nontrivial to be found automatically.

### [2022-04-12T05:57:49+00:00](https://github.com/leanprover-community/mathlib/commit/56f6c8e8e316ea22f50d7484b84d071094a616ae)
chore(algebra/big_operators/intervals): Move and golf sum_range_sub_sum_range ([#13359](https://github.com/leanprover-community/mathlib/pull/#13359))


Move sum_range_sub_sum_range to a better file. Also implemented the golf demonstrated in this paper https://arxiv.org/pdf/2202.01344.pdf from @spolu.

### [2022-04-12T05:57:48+00:00](https://github.com/leanprover-community/mathlib/commit/603db27a17bb03e6d7b1ff2318513eca8daef341)
feat(topology/metric_space/basic): some lemmas about dist ([#13343](https://github.com/leanprover-community/mathlib/pull/#13343))

from the sphere eversion project

### [2022-04-12T05:24:39+00:00](https://github.com/leanprover-community/mathlib/commit/cbea7e1fad2ede243e32a1cab1860e9e8591ad26)
feat(algebra/order/monoid_lemmas_zero_lt): add some lemmas assuming `mul_one_class` `preorder` ([#13299](https://github.com/leanprover-community/mathlib/pull/#13299))

### [2022-04-12T05:24:38+00:00](https://github.com/leanprover-community/mathlib/commit/e3db2e780c7ab5ab424926f8d6940c6a6d22fd57)
feat(group_theory/complement): Criterion for complementary subgroups ([#13292](https://github.com/leanprover-community/mathlib/pull/#13292))

This lemma gives a criterion for a stabilizer subgroup to be a complementary subgroup.

### [2022-04-12T03:21:18+00:00](https://github.com/leanprover-community/mathlib/commit/fdd68d9b778ae3ddc167acf87edf30d4d5481c3d)
fix(category_theory/elements): speed up `groupoid_of_elements` ([#13372](https://github.com/leanprover-community/mathlib/pull/#13372))

from 14.5s to 6s

It's [reported](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Quadratic.20Hilbert.20symbol.20over.20.E2.84.9A/near/278592167) that this is causing timeouts in recent bors batches.

### [2022-04-12T03:21:17+00:00](https://github.com/leanprover-community/mathlib/commit/bf1b813e20e108e8868341ca94bb3404a2506ae5)
chore(algebra/module/basic): generalize to add_monoid_hom_class ([#13346](https://github.com/leanprover-community/mathlib/pull/#13346))

I need some of these lemmas for `ring_hom`.

Additionally, this:
* removes `map_nat_module_smul` (duplicate of `map_nsmul`) and `map_int_module_smul` (duplicate of `map_zsmul`)
* renames `map_rat_module_smul` to `map_rat_smul` for brevity.
* adds the lemmas `inv_nat_cast_smul_comm` and `inv_int_cast_smul_comm`.
* Swaps the order of the arguments to `map_zsmul` and `map_nsmul` to align with the usual rules (`to_additive` emitted them in the wrong order)

### [2022-04-12T03:21:16+00:00](https://github.com/leanprover-community/mathlib/commit/955cb8e6bf37404865d0e1aab6dd4a2d96ba99f2)
feat(data/list/basic): add a theorem about last and append ([#13336](https://github.com/leanprover-community/mathlib/pull/#13336))

When `ys` is not empty, we can conclude that `last (xs ++ ys)` is `last ys`.

### [2022-04-12T03:21:15+00:00](https://github.com/leanprover-community/mathlib/commit/10a3faa4fbc5d7c6f07bf63cefba158b2bbc780e)
feat(algebra/order/monoid_lemmas_zero_lt): add lemmas assuming `mul_zero_class` `preorder` ([#13297](https://github.com/leanprover-community/mathlib/pull/#13297))

### [2022-04-12T03:21:14+00:00](https://github.com/leanprover-community/mathlib/commit/fe1c78af0f687090be8bf062e316207011c9f34b)
feat(data/polynomial/algebra_map): remove some lemmas about `aeval`, add `protected` on `polynomial.map_list_prod` ([#13294](https://github.com/leanprover-community/mathlib/pull/#13294))

Remove `aeval_sum` which is a duplicate of `map_sum`.
Remove `aeval_prod` which is a duplicate of `map_prod`.

### [2022-04-12T03:21:13+00:00](https://github.com/leanprover-community/mathlib/commit/483b7df9cb550ddd0152eca8e1587a4b13856940)
feat(analysis/convex/strict_convex_space): Ray characterization of `∥x - y∥` ([#13293](https://github.com/leanprover-community/mathlib/pull/#13293))

`∥x - y∥ = |∥x∥ - ∥y∥|` if and only if `x` and `y` are on the same ray.

### [2022-04-12T03:21:12+00:00](https://github.com/leanprover-community/mathlib/commit/f1c98ba8cba9d9155adbd48385e4a8f61f89d2f2)
feat(topology/uniform_space/uniform_convergence_topology): define the uniform structure of uniform convergence ([#13073](https://github.com/leanprover-community/mathlib/pull/#13073))

### [2022-04-12T01:13:15+00:00](https://github.com/leanprover-community/mathlib/commit/7ba9c3fede38b12a596d3e0c51a2035a60de1c7c)
feat(order/basic): More order instances for `subtype` ([#13134](https://github.com/leanprover-community/mathlib/pull/#13134))

Add the `has_le`, `has_lt`, `decidable_le`, `decidable_lt`, `bounded_order` instances.

Incorporating the `decidable_le` and `decidable_lt` instances into the `linear_order` one breaks some defeqs with `ite`/`dite`.

### [2022-04-11T23:09:24+00:00](https://github.com/leanprover-community/mathlib/commit/0453d6069aaffd422b0675711b9597aff3e404a0)
feat(algebraic_geometry/projective_spectrum): structure sheaf of Proj of graded ring ([#13072](https://github.com/leanprover-community/mathlib/pull/#13072))

Construct the structure sheaf of Proj of a graded algebra.

### [2022-04-11T23:09:23+00:00](https://github.com/leanprover-community/mathlib/commit/f94cd0f159a29b8777b9cce019de26e0e897afe6)
feat(analysis/normed/normed_field): Pi types form a normed ring ([#12912](https://github.com/leanprover-community/mathlib/pull/#12912))

### [2022-04-11T20:58:27+00:00](https://github.com/leanprover-community/mathlib/commit/887f933830de13464f039120426919e4c9053d4d)
feat(data/fin/tuple/nat_antidiagonal): add an equiv and some TODO comments. ([#13338](https://github.com/leanprover-community/mathlib/pull/#13338))

This follows on from [#13031](https://github.com/leanprover-community/mathlib/pull/#13031), and:

* Adds the tuple version of an antidiagonal equiv
* Makes some arguments implicit
* Adds some comments to tie together `finset.nat.antidiagonal_tuple` with the `cut` definition used in one of the 100 Freek problems.

### [2022-04-11T20:58:26+00:00](https://github.com/leanprover-community/mathlib/commit/455bc6572a244ae70a8cca1537f8c8290da47b68)
chore(representation_theory/invariants): clean up some simps ([#13337](https://github.com/leanprover-community/mathlib/pull/#13337))

### [2022-04-11T20:58:25+00:00](https://github.com/leanprover-community/mathlib/commit/e8339bd6bb7abe42fd3a085c8069da7b8f97ed86)
feat(category_theory/fully_faithful): nat_trans_of_comp_fully_faithful ([#13327](https://github.com/leanprover-community/mathlib/pull/#13327))

I added `nat_iso_of_comp_fully_faithful` in an earlier PR, but left out the more basic construction.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-11T20:58:24+00:00](https://github.com/leanprover-community/mathlib/commit/4a0705422f1e1248b3b0760f1db91875d8d95cb1)
chore(*): remove numerous edge cases from lemmas ([#13316](https://github.com/leanprover-community/mathlib/pull/#13316))

This PR uses the same methodology as [#10774](https://github.com/leanprover-community/mathlib/pull/#10774) to use a linter to remove edge case assumptions from lemmas when the result is easy to prove without the assumption.

These are assumptions things like: n \ne 0, 0 < n, p \ne \top, nontrivial R, nonempty R.
Removing these unneeded assumptions makes such lemmas easier to apply, and lets us golf a few other proofs along the way.

The file with the most changes is `src/ring_theory/unique_factorization_domain.lean` where the linter inspired me to allow trivial monoids in many places.

The code I used to find these is in the branch [https://github.com/leanprover-community/mathlib/tree/alexjbest/simple_edge_cases_linter](https://github.com/leanprover-community/mathlib/tree/alexjbest/simple_edge_cases_linter?rgh-link-date=2021-12-13T23%3A53%3A31Z)

### [2022-04-11T20:58:23+00:00](https://github.com/leanprover-community/mathlib/commit/a839f4dc71aa3dcaaefd7a4641ad694201f3fb63)
feat(number_theory/quadratic_reciprocity): change order of arguments … ([#13311](https://github.com/leanprover-community/mathlib/pull/#13311))

…in legendre_sym

This is the first step in a major overhaul of the contents of number_theory/quadratic_reciprocity.

As a first step, the order of the arguments `a` and `p` to `legendre_sym` is swapped, based on a [poll](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Quadratic.20Hilbert.20symbol.20over.20.E2.84.9A) on Zulip.

### [2022-04-11T20:58:22+00:00](https://github.com/leanprover-community/mathlib/commit/4e1102a0cee6cca3028c6450222020e23e431d19)
feat(probability/integration): characterize indep_fun by expected product of comp ([#13270](https://github.com/leanprover-community/mathlib/pull/#13270))

This is the third PR into probability/integration, to characterize independence by the expected product of compositions.

### [2022-04-11T18:49:41+00:00](https://github.com/leanprover-community/mathlib/commit/a521a32e6b0282673e6e3f16a104156417c7e3d1)
feat(data/set/basic): Missing `set.image_perm` ([#13242](https://github.com/leanprover-community/mathlib/pull/#13242))




Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-04-11T18:49:39+00:00](https://github.com/leanprover-community/mathlib/commit/dee495883fdf91ff2e020e4f467c27906c5488d9)
feat(computability/*): Automata lemmas ([#13194](https://github.com/leanprover-community/mathlib/pull/#13194))

A bunch of missing API for `language`, `regular_expression`, `DFA`, `NFA`, `ε_NFA`.

Co-authored-by: Fox Thomson

### [2022-04-11T18:49:38+00:00](https://github.com/leanprover-community/mathlib/commit/77ae09121291c3cd3877fd640bdba6f7dea318f1)
feat(number_theory/cyclotomic/primitive_roots): add `pow_sub_one_norm_prime_pow_ne_two` ([#13152](https://github.com/leanprover-community/mathlib/pull/#13152))

We add `pow_sub_one_norm_prime_pow_ne_two`, that computes the norm of `ζ ^ (p ^ s) - 1`, where `ζ` is a primitive `p ^ (k + 1)`-th root of unity. This will be used to compute the discriminant of the `p ^ n`-th cyclotomic field.

From flt-regular

### [2022-04-11T18:49:37+00:00](https://github.com/leanprover-community/mathlib/commit/04250c8d6cc93f30757414d5706ca7ffed0be909)
feat(measure_theory/measure/haar): Add the Steinhaus Theorem ([#12932](https://github.com/leanprover-community/mathlib/pull/#12932))

This PR proves the [Steinhaus Theorem](https://en.wikipedia.org/wiki/Steinhaus_theorem) in any locally compact group with a Haar measure. 



Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-04-11T18:49:35+00:00](https://github.com/leanprover-community/mathlib/commit/cea5e4bbcac13944bb4214fd5cf304e6e36d6757)
feat(data/sign): the sign function ([#12835](https://github.com/leanprover-community/mathlib/pull/#12835))





Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-04-11T16:38:59+00:00](https://github.com/leanprover-community/mathlib/commit/695a2b691e4e0d914092327085d9a3873ab7bb67)
feat(combinatorics/simple_graph/connectivity): induced maps on walks and paths ([#13310](https://github.com/leanprover-community/mathlib/pull/#13310))

Every graph homomorphism gives an induced map on walks.

### [2022-04-11T16:38:58+00:00](https://github.com/leanprover-community/mathlib/commit/a447dae92be358d87eb24065ec1ac869b8ceb987)
chore(category_theory/*): reduce imports ([#13305](https://github.com/leanprover-community/mathlib/pull/#13305))

An unnecessary import of `tactic.monotonicity` earlier in the hierarchy was pulling in quite a lot. A few compensatory imports are needed later.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-11T16:38:57+00:00](https://github.com/leanprover-community/mathlib/commit/5e8d6bb39a036f97008cd42886619c0a710e491c)
feat(combinatorics/simple_graph/{connectivity,adj_matrix}): powers of adjacency matrix ([#13304](https://github.com/leanprover-community/mathlib/pull/#13304))

The number of walks of length-n between two vertices is given by the corresponding entry of the n-th power of the adjacency matrix.

### [2022-04-11T16:38:56+00:00](https://github.com/leanprover-community/mathlib/commit/bfd53845714e5e50f92748c8e65f4a599b26ce02)
chore(category_theory): switch ulift and filtered in import hierarchy ([#13302](https://github.com/leanprover-community/mathlib/pull/#13302))

Many files require `ulift` but not `filtered`, so `ulift` should be lower in the import hierarchy. This avoids needing all of `data/` up to `data/fintype/basic` before we can start defining categorical limits.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-11T16:38:55+00:00](https://github.com/leanprover-community/mathlib/commit/dcb6c8656c85e3980f971970824f6615c8bc081c)
feat(measure_theory/function/uniform_integrable): Equivalent condition for uniformly integrable in the probability sense ([#12955](https://github.com/leanprover-community/mathlib/pull/#12955))


A sequence of functions is uniformly integrable in the probability sense if and only if `∀ ε : ℝ, 0 < ε → ∃ C : ℝ≥0, ∀ i, snorm ({x | C ≤ ∥f i x∥₊}.indicator (f i)) p μ ≤ ennreal.of_real ε`.

### [2022-04-11T16:38:54+00:00](https://github.com/leanprover-community/mathlib/commit/797c7133e0d741c0c879db90e70a8026e145cb2e)
feat(ring_theory/coprime/lemmas): alternative characterisations of pairwise coprimeness ([#12911](https://github.com/leanprover-community/mathlib/pull/#12911))

This provides two condtions equivalent to pairwise coprimeness : 

* each term is coprime to the product of all others
* 1 can be obtained as a linear combination of all products with one term missing.

### [2022-04-11T14:08:55+00:00](https://github.com/leanprover-community/mathlib/commit/67d6097232173a1aded55d7b3e15cb19b13fe66c)
feat(data/option/basic): add `option.coe_get` ([#13081](https://github.com/leanprover-community/mathlib/pull/#13081))

Adds lemma `coe_get {o : option α} (h : o.is_some) : ((option.get h : α) : option α) = o`

Extracted from @huynhtrankhanh's https://github.com/leanprover-community/mathlib/pull/11162, moved here to a separate PR

Co-authored-by: Huỳnh Trần Khanh [qcdz9r6wpcbh59@gmail.com](mailto:qcdz9r6wpcbh59@gmail.com)

### [2022-04-11T11:52:38+00:00](https://github.com/leanprover-community/mathlib/commit/41398242617c12aab370b5956e0b830db4873bcc)
refactor(category_theory/differential_object): simp only -> simp_rw ([#13333](https://github.com/leanprover-community/mathlib/pull/#13333))

This is extremely minor; I replace a `simp only` with a `simp_rw`.

This proof is apparently rather fragile with respect to some other changes I'm trying to make, and I worked out the correct `simp_rw` sequence while debugging. May as well preserve it for posterity, or at least until next time I make it break.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-11T11:52:37+00:00](https://github.com/leanprover-community/mathlib/commit/c7e76bc84d33fcab1cb831fe5958d44c42dd4843)
chore(category_theory/monoidal/discrete): typo in to_additive name ([#13332](https://github.com/leanprover-community/mathlib/pull/#13332))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-11T11:52:36+00:00](https://github.com/leanprover-community/mathlib/commit/d40595576cf30dcf7226be06b0703b88b3280eb2)
feat(analysis/complex/re_im_topology): add `metric.bounded.re_prod_im` ([#13324](https://github.com/leanprover-community/mathlib/pull/#13324))

Also add `complex.mem_re_prod_im`.

### [2022-04-11T11:52:34+00:00](https://github.com/leanprover-community/mathlib/commit/ebbe763f85ec0e24863a4726885ab7465d1a30f6)
feat(measure_theory/constructions/borel_space): a set with `μ (∂ s) = 0` is null measurable ([#13322](https://github.com/leanprover-community/mathlib/pull/#13322))

### [2022-04-11T11:52:33+00:00](https://github.com/leanprover-community/mathlib/commit/7e69148c17d4947977aa428af65cfe4266d783cf)
feat(order/conditionally_complete_lattice): Make `cSup_empty` a `simp` lemma ([#13318](https://github.com/leanprover-community/mathlib/pull/#13318))

### [2022-04-11T11:52:32+00:00](https://github.com/leanprover-community/mathlib/commit/159855d14804f7dfbdf040a917d8c4a03ed18188)
feat(set_theory/ordinal_arithmetic): `is_normal.monotone` ([#13314](https://github.com/leanprover-community/mathlib/pull/#13314))

We introduce a convenient abbreviation for `is_normal.strict_mono.monotone`.

### [2022-04-11T11:52:31+00:00](https://github.com/leanprover-community/mathlib/commit/c5b83f0ab6cdbed29a5020e482bf64e4184626c2)
doc(combinatorics/simple_graph/basic): mention half-edge synonym for darts ([#13312](https://github.com/leanprover-community/mathlib/pull/#13312))

### [2022-04-11T11:52:30+00:00](https://github.com/leanprover-community/mathlib/commit/722c0dfab3ec17226fd41158a82e8fec758e2389)
feat(category_theory/nat_iso): add simp lemmas ([#13303](https://github.com/leanprover-community/mathlib/pull/#13303))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-11T11:52:29+00:00](https://github.com/leanprover-community/mathlib/commit/f7e862f6b04f996ee70ad45939c3465d9fe060a1)
feat(analysis/special_functions/pow): `z ^ w` is continuous in `(z, w)` at `(0, w)` if `0 < re w` ([#13288](https://github.com/leanprover-community/mathlib/pull/#13288))

Also add a few supporting lemmas.

### [2022-04-11T11:52:28+00:00](https://github.com/leanprover-community/mathlib/commit/57682ffaab13e952aafd134f32b9243ea36b9e19)
feat(data/complex/is_R_or_C): add `polynomial.of_real_eval` ([#13287](https://github.com/leanprover-community/mathlib/pull/#13287))

### [2022-04-11T11:52:27+00:00](https://github.com/leanprover-community/mathlib/commit/577df07c3a6c8595ff0f6e0ea438a19d32d89c64)
feat(analysis/asymptotics): add a few versions of `c=o(x)` as `x→∞` ([#13286](https://github.com/leanprover-community/mathlib/pull/#13286))

### [2022-04-11T11:52:26+00:00](https://github.com/leanprover-community/mathlib/commit/171e2aa24a40d72749fcd4d263cb343ed8f29423)
feat(group_theory/group_action/basic): A `quotient_action` induces an action on left cosets ([#13283](https://github.com/leanprover-community/mathlib/pull/#13283))

A `quotient_action` induces an action on left cosets.

### [2022-04-11T11:52:25+00:00](https://github.com/leanprover-community/mathlib/commit/65b5dd8baf3bad0127d08f0ed87b11dc9b4dadd3)
feat(group_theory/transversal): A `quotient_action` induces an action on left transversals ([#13282](https://github.com/leanprover-community/mathlib/pull/#13282))

A `quotient_action` induces an action on left transversals.

Once [#13283](https://github.com/leanprover-community/mathlib/pull/#13283) is merged, I'll PR some more API generalizing the existing lemma `smul_symm_apply_eq_mul_symm_apply_inv_smul`.

### [2022-04-11T11:52:24+00:00](https://github.com/leanprover-community/mathlib/commit/2eba5241729f30ebf954a6fcba4f02bd739a3937)
chore(topology/algebra/uniform_group): use morphism classes ([#13273](https://github.com/leanprover-community/mathlib/pull/#13273))

### [2022-04-11T11:52:23+00:00](https://github.com/leanprover-community/mathlib/commit/2b80d4a0b8a8aec9db8c28d4d1313042e068d8e8)
feat(topology/order): if `e` is an equiv, `induced e.symm = coinduced e` ([#13272](https://github.com/leanprover-community/mathlib/pull/#13272))

### [2022-04-11T11:52:21+00:00](https://github.com/leanprover-community/mathlib/commit/c1600832f01e6a5370f650309c7c9105859bdfb4)
feat(algebra/big_operators): `norm_num` plugin for list/multiset/finset prod/sum ([#13005](https://github.com/leanprover-community/mathlib/pull/#13005))

This PR provides a plugin for the `norm_num` tactic that can evaluate finite sums and products, over lists, multisets and finsets.

`simp` could already handle some of these operations, but `norm_num` is overall much more suited to dealing with larger numerical operations such as arising from large sums.

I implemented the tactic as a `norm_num` plugin since it's intended to deal with numbers. I'm happy to make it its own tactic (`norm_bigop`?) if you feel this is outside of the `norm_num` scope. Similarly, I could also make a separate tactic for the parts that rewrite a list/multiset/finset into a sequence of `list.cons`es.

### [2022-04-11T09:27:57+00:00](https://github.com/leanprover-community/mathlib/commit/e5bd94139951e65061a4273b51c80ed9a473d897)
feat(scripts): make style lint script more robust to lines starting with spaces ([#13317](https://github.com/leanprover-community/mathlib/pull/#13317))

Currently some banned commands aren't caught if the line is indented.

Because of this I previously snuck in a `set_option pp.all true` by accident

### [2022-04-11T09:27:56+00:00](https://github.com/leanprover-community/mathlib/commit/cd616e0deb4ed32919fd22a00c0054589692eecf)
feat(analysis/special_functions/pow): more versions of `x ^ k = o(exp(b * x))` ([#13285](https://github.com/leanprover-community/mathlib/pull/#13285))

### [2022-04-11T09:27:54+00:00](https://github.com/leanprover-community/mathlib/commit/706905c54e159436f6735176dca0a6174585d95d)
fix(algebra/indicator_function): fix name of `mul_indicator_eq_one_iff` ([#13284](https://github.com/leanprover-community/mathlib/pull/#13284))

It is about `≠`, so call it `mul_indicator_ne_one_iff`/`indicator_ne_zero_iff`.

### [2022-04-11T09:27:53+00:00](https://github.com/leanprover-community/mathlib/commit/ff507a35fbfd3acba7828a41af9f8469e840ad1d)
feat(model_theory/basic): Structures over the empty language ([#13281](https://github.com/leanprover-community/mathlib/pull/#13281))

Any type is a first-order structure over the empty language.
Any function, embedding, or equiv is a first-order hom, embedding or equiv over the empty language.

### [2022-04-11T09:27:52+00:00](https://github.com/leanprover-community/mathlib/commit/fe17fee194e58f12d1122a248f59c1941a3f1cce)
feat(topology/algebra/uniform_group): a subgroup of a uniform group is a uniform group ([#13277](https://github.com/leanprover-community/mathlib/pull/#13277))

### [2022-04-11T09:27:50+00:00](https://github.com/leanprover-community/mathlib/commit/6f428ed4dadaa30c46907bd238e97882a4685c8e)
feat(group_theory/schreier): Finset version of Schreier's lemma ([#13274](https://github.com/leanprover-community/mathlib/pull/#13274))

This PR adds a finset version of Schreier's lemma, getting closer to a statement in terms of `group.fg` and `group.rank`.

### [2022-04-11T09:27:48+00:00](https://github.com/leanprover-community/mathlib/commit/102311e64fdf0b0468481382031a31ad435f30eb)
fix(algebra/module/basic,group_theory/group_action/defs): generalize nat and int smul_comm_class instances ([#13174](https://github.com/leanprover-community/mathlib/pull/#13174))

The `add_group.int_smul_with_zero` instance appears to be new, everything else is moved and has `[semiring R] [add_comm_monoid M] [module R M]` relaxed to `[monoid R] [add_monoid M] [distrib_mul_action R M]`, with the variables renamed to match the destination file.

### [2022-04-11T04:32:07+00:00](https://github.com/leanprover-community/mathlib/commit/4d27ecf745f7719e80d71bd59b25698f0b554670)
refactor(order/conditionally_complete_lattice): `csupr_le_csupr` → `csupr_mono` ([#13320](https://github.com/leanprover-community/mathlib/pull/#13320))

For consistency with `supr_mono` and `infi_mono`

### [2022-04-11T02:03:03+00:00](https://github.com/leanprover-community/mathlib/commit/6f9cb03e8a39ea345796a13c6639cb330e50869b)
chore(*): make more transitive relations available to calc ([#12860](https://github.com/leanprover-community/mathlib/pull/#12860))

Fixed as many possible declarations to have the correct argument order, as per [Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/calc.20with.20.60.E2.89.83*.60). Golfed some random ones while I was at it.

### [2022-04-11T00:55:09+00:00](https://github.com/leanprover-community/mathlib/commit/a85958cff0da0012e6ca890bbf95d4ada7daf7d1)
chore(measure_theory/mconstructions/prod): Speed up `finite_spanning_sets_in.prod` ([#13325](https://github.com/leanprover-community/mathlib/pull/#13325))

Disable the computability check on `measure_theory.measure.finite_spanning_sets_in.prod` because it was taking 20s of compilation.

### [2022-04-11T00:55:08+00:00](https://github.com/leanprover-community/mathlib/commit/a2d09b2434ece23bfcd8faa58abae63dc5034524)
feat(topology/algebra/order): add `le_on_closure` ([#13290](https://github.com/leanprover-community/mathlib/pull/#13290))

### [2022-04-10T23:04:54+00:00](https://github.com/leanprover-community/mathlib/commit/e5ae099185cd66443cd11766a12b12bf30dc4ee0)
chore(topology/uniform_space/basic): golf a proof ([#13289](https://github.com/leanprover-community/mathlib/pull/#13289))

Rewrite a proof using tactic mode and golf it.

### [2022-04-10T23:04:53+00:00](https://github.com/leanprover-community/mathlib/commit/849102175098a24fb33a6525dff32150899e03ab)
chore(algebra/invertible): generalise typeclasses ([#13275](https://github.com/leanprover-community/mathlib/pull/#13275))

### [2022-04-10T23:04:52+00:00](https://github.com/leanprover-community/mathlib/commit/4ded5ca36a4f73bc4d04ed91dc96d391a239bd16)
fix(field_theory/galois): update docstring ([#13188](https://github.com/leanprover-community/mathlib/pull/#13188))

### [2022-04-10T23:04:51+00:00](https://github.com/leanprover-community/mathlib/commit/be22d07e55fe810d2567ed931b0788047d7585f0)
feat(data/sym/basic): some basic lemmas in preparation for stars and bars ([#12479](https://github.com/leanprover-community/mathlib/pull/#12479))

Some lemmas extracted from @huynhtrankhanh's [#11162](https://github.com/leanprover-community/mathlib/pull/#11162), moved here to a separate PR

Co-authored-by: Huỳnh Trần Khanh <qcdz9r6wpcbh59@gmail.com>

### [2022-04-10T23:04:50+00:00](https://github.com/leanprover-community/mathlib/commit/609eb59e9fb7ebdbbad4d9098c94f798093446e3)
feat(set_theory/cofinality): Every ordinal has a fundamental sequence ([#12317](https://github.com/leanprover-community/mathlib/pull/#12317))

### [2022-04-10T21:57:11+00:00](https://github.com/leanprover-community/mathlib/commit/5bf57407a1db721efa8856c40b31ad50cf4c3f44)
chore(category_theory/fin_category): Speed up `as_type_equiv_obj_as_type` ([#13298](https://github.com/leanprover-community/mathlib/pull/#13298))

Rename `obj_as_type_equiv_as_type` to `as_type_equiv_obj_as_type` (likely a typo). Use `equivalence.mk` instead of `equivalence.mk'` to build it and split the functors to separate definitions to tag them with `@[simps]` and make `dsimp` go further.

On my machine, this cuts down the compile time from 41s to 3s.

### [2022-04-10T20:28:46+00:00](https://github.com/leanprover-community/mathlib/commit/60ccf8f7474e5d46505efa8534bd98eb3a243b1c)
feat(linear_algebra): add `adjoint_pair` from `bilinear_form` ([#13203](https://github.com/leanprover-community/mathlib/pull/#13203))

Copying the definition and theorem about adjoint pairs from `bilinear_form` to `sesquilinear_form`.
Defines the composition of two linear maps with a bilinear map to form a new bilinear map, which was missing from the `bilinear_map` API.

We also use the new definition of adjoint pairs in `analysis/inner_product_space/adjoint`.

### [2022-04-10T20:28:45+00:00](https://github.com/leanprover-community/mathlib/commit/a30cba497b1aebf753fcd6ace0ec744809af9ed7)
feat(set_theory/cardinal_ordinal): Simp lemmas for `mk` ([#13119](https://github.com/leanprover-community/mathlib/pull/#13119))

### [2022-04-10T19:34:23+00:00](https://github.com/leanprover-community/mathlib/commit/965f46d4ef154832ebde7cd99a30db3a6b5e3f28)
feat(category_theory/monoidal): coherence tactic ([#13125](https://github.com/leanprover-community/mathlib/pull/#13125))

This is an alternative to [#12697](https://github.com/leanprover-community/mathlib/pull/#12697) (although this one does not handle bicategories!)

From the docstring:
```
Use the coherence theorem for monoidal categories to solve equations in a monoidal equation,
where the two sides only differ by replacing strings of "structural" morphisms with
different strings with the same source and target.

That is, `coherence` can handle goals of the form
`a ≫ f ≫ b ≫ g ≫ c = a' ≫ f ≫ b' ≫ g ≫ c'`
where `a = a'`, `b = b'`, and `c = c'` can be proved using `coherence1`.
```

This PR additionally provides a "composition up to unitors+associators" operation, so you can write
```
example {U V W X Y : C} (f : U ⟶ V ⊗ (W ⊗ X)) (g : (V ⊗ W) ⊗ X ⟶ Y) : U ⟶ Y := f ⊗≫ g
```




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: yuma-mizuno <mizuno.y.aj@gmail.com>

### [2022-04-10T19:34:22+00:00](https://github.com/leanprover-community/mathlib/commit/0bc2aa9161c4d94acd5d087e8570794d24ca6136)
feat(data/fin/tuple/nat_antidiagonal): add `antidiagonal_tuple` ([#13031](https://github.com/leanprover-community/mathlib/pull/#13031))

### [2022-04-10T15:57:49+00:00](https://github.com/leanprover-community/mathlib/commit/6d0984dbdc4171313410530affbba8c2f7bc0d75)
doc(README): improve documentation on how to contribute ([#13116](https://github.com/leanprover-community/mathlib/pull/#13116))

Create a new contributing section which highlights the basic steps on how to start contributing to mathlib

### [2022-04-10T13:49:42+00:00](https://github.com/leanprover-community/mathlib/commit/6368956a89bcca78a5657661c1a20fdbb49239a3)
counterexample(counterexamples/char_p_zero_ne_char_zero.lean): `char_p R 0` and `char_zero R` need not coincide ([#13080](https://github.com/leanprover-community/mathlib/pull/#13080))

Following the [Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F), this counterexample formalizes a `semiring R` for which `char_p R 0` holds, but `char_zero R` does not.

See [#13075](https://github.com/leanprover-community/mathlib/pull/#13075) for the PR that lead to this example.

### [2022-04-10T12:36:58+00:00](https://github.com/leanprover-community/mathlib/commit/83225b3d95ae18f7106208b72e71baafc080f70a)
feat(order/monovary): Add missing `monovary` lemmas ([#13243](https://github.com/leanprover-community/mathlib/pull/#13243))

Add lemmas for postcomposing monovarying functions with monotone/antitone functions. Protect lemmas that needed it. Fix typos.



Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-04-10T12:36:57+00:00](https://github.com/leanprover-community/mathlib/commit/32cc868979becd819553cd02ebaece20dc88461d)
feat(measure_theory/measure/measure_space): let measure.map work with ae_measurable functions ([#13241](https://github.com/leanprover-community/mathlib/pull/#13241))

Currently, `measure.map f μ` is zero if `f` is not measurable. This means that one can not say that two integrable random variables `X` and `Y` have the same distribution by requiring `measure.map X μ = measure.map Y μ`, as `X` or `Y` might not be measurable. We adjust the definition of `measure.map` to also work with almost everywhere measurable functions. This means that many results in the library that were only true for measurable functions become true for ae measurable functions. We generalize some of the existing code to this more general setting.

### [2022-04-10T09:05:10+00:00](https://github.com/leanprover-community/mathlib/commit/ef51d2324e937c8883ac8d1781dfc9168668e451)
feat(category_theory/shift): restricting shift functors to a subcategory ([#13265](https://github.com/leanprover-community/mathlib/pull/#13265))

Given a family of endomorphisms of `C` which are interwined by a fully faithful `F : C ⥤ D`
with shift functors on `D`, we can promote that family to shift functors on `C`.

For LTE.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-04-10T09:05:09+00:00](https://github.com/leanprover-community/mathlib/commit/c916b64d7ed8a8f82575da652f90be3df3b7a4c6)
feat(ring_theory/polynomial/opposites + data/{polynomial/basic + finsupp/basic}): move `op_ring_equiv` to a new file + lemmas ([#13162](https://github.com/leanprover-community/mathlib/pull/#13162))

This PR moves the isomorphism `R[X]ᵐᵒᵖ ≃+* Rᵐᵒᵖ[X]` to a new file `ring_theory.polynomial.opposites`.

I also proved some basic lemmas about the equivalence.

[Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/113489-new-members)

### [2022-04-10T09:05:08+00:00](https://github.com/leanprover-community/mathlib/commit/d70e26bf50b0a076ed03874f4357ceb22ba18656)
feat(analysis/convex/topology): improve some lemmas ([#13136](https://github.com/leanprover-community/mathlib/pull/#13136))

Replace some `s` with `closure s` in the LHS of `⊆` in some lemmas.

### [2022-04-10T06:43:20+00:00](https://github.com/leanprover-community/mathlib/commit/208ebd4e99d23ca7b39e2ef4f147c0419e1ec0c8)
feat(algebra/order/monoid_lemmas_zero_lt): port some lemmas from `algebra.order.monoid_lemmas` ([#12961](https://github.com/leanprover-community/mathlib/pull/#12961))

Although the names of these lemmas are from `algebra.order.monoid_lemmas`, many of the lemmas in `algebra.order.monoid_lemmas` have incorrect names, and some others may not be appropriate. Also, many lemmas are missing in `algebra.order.monoid_lemmas`. It may be necessary to make some renames and additions.

### [2022-04-10T06:43:19+00:00](https://github.com/leanprover-community/mathlib/commit/00980d9dc8dc4913d4b60e78c6981567dde4eb7b)
feat(group_theory/free_product): The ping pong lemma for free groups ([#12916](https://github.com/leanprover-community/mathlib/pull/#12916))

We already have the ping-pong-lemma for free products; phrasing it for free groups is
a (potentially) useful corollary, and brings us on-par with the Wikipedia page.

Again, we state it as a lemma that gives a criteria for when `lift` is injective.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-04-10T06:43:18+00:00](https://github.com/leanprover-community/mathlib/commit/dfc1b4ccfac4a82a3442309b7d745f6320ccdf31)
feat(topology/algebra/module/character_space): Introduce the character space of an algebra ([#12838](https://github.com/leanprover-community/mathlib/pull/#12838))

The character space of a topological algebra is the subset of elements of the weak dual that are also algebra homomorphisms. This space is used in the Gelfand transform, which gives an isomorphism between a commutative C⋆-algebra and continuous functions on the character space of the algebra. This, in turn, is used to construct the continuous functional calculus on C⋆-algebras.



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2022-04-10T06:43:17+00:00](https://github.com/leanprover-community/mathlib/commit/55baab3e21ed409366f5be60cef112965431d1ed)
feat(field_theory/krull_topology): added fintype_alg_hom ([#12777](https://github.com/leanprover-community/mathlib/pull/#12777))




Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>
Co-authored-by: Sebastian-Monnet <54352341+Sebastian-Monnet@users.noreply.github.com>
Co-authored-by: Riccardo Brasca <riccardo.brasca@gmail.com>

### [2022-04-10T06:10:08+00:00](https://github.com/leanprover-community/mathlib/commit/36fceb911d9b63de8ac27215c7d5fd819e6357f8)
feat(data/list/cycle): Define `cycle.chain` analog to `list.chain` ([#12970](https://github.com/leanprover-community/mathlib/pull/#12970))

We define `cycle.chain`, which means that a relation holds in all adjacent elements in a cyclic list. We then show that for `r` a transitive relation, `cycle.chain r l` is equivalent to `r` holding for all pairs of elements in `l`.

### [2022-04-10T04:05:20+00:00](https://github.com/leanprover-community/mathlib/commit/de0aea46beb9380ac6e53bca34252f164e55f77e)
feat(topology/uniform_space/uniform_convergence): add lemma `tendsto_locally_uniformly_iff_forall_tendsto` ([#13201](https://github.com/leanprover-community/mathlib/pull/#13201))

### [2022-04-10T04:05:19+00:00](https://github.com/leanprover-community/mathlib/commit/26729d6db9de9c6cfef4c4b0db83f6cff5431056)
chore(ring_theory/polynomial/basic): Generalize `polynomial.degree_lt_equiv` to commutative rings ([#13190](https://github.com/leanprover-community/mathlib/pull/#13190))

This is a minor PR to generalise degree_lt_equiv to comm_ring.
Its restriction to field appears to be an oversight.



Co-authored-by: Wrenna Robson <34025592+linesthatinterlace@users.noreply.github.com>

### [2022-04-10T04:05:18+00:00](https://github.com/leanprover-community/mathlib/commit/2ff12ea3e07a266bb698f8d29a89e9af779753ad)
feat(linear_algebra/bilinear_form): generalize from is_symm to is_refl ([#13181](https://github.com/leanprover-community/mathlib/pull/#13181))

Generalize some lemmas that assumed symmetric bilinear forms to reflexive bilinear forms (which is more general) and update docstring (before the condition 'symmetric' was not mentioned)

Co-authored-by: tinval <44555630+tinval@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-04-10T01:48:20+00:00](https://github.com/leanprover-community/mathlib/commit/8b8f46e46b84b7b3c2667706065f30dcef4a0666)
feat(analysis/complex/arg): link same_ray and complex.arg ([#12764](https://github.com/leanprover-community/mathlib/pull/#12764))




Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-04-10T01:48:19+00:00](https://github.com/leanprover-community/mathlib/commit/7eff2330dfc5045a7909a51815b2614908b7329a)
feat(set_theory/cofinality): Golf and extend existing results relating `cof` to `sup` and `bsup` ([#12321](https://github.com/leanprover-community/mathlib/pull/#12321))

### [2022-04-10T01:48:17+00:00](https://github.com/leanprover-community/mathlib/commit/c2d870e2c1860d0ec86ff53e57ce6eaadd72cabd)
feat(set_theory/{ordinal_arithmetic, fixed_points}): Next fixed point of families ([#12200](https://github.com/leanprover-community/mathlib/pull/#12200))

We define the next common fixed point of a family of normal ordinal functions. We prove these fixed points to be unbounded, and that their enumerator functions are normal.

### [2022-04-10T01:48:16+00:00](https://github.com/leanprover-community/mathlib/commit/b2c707cd190a58ea0565c86695a19e99ccecc215)
feat(group_theory): use generic `subobject_class` lemmas ([#11758](https://github.com/leanprover-community/mathlib/pull/#11758))

This subobject class refactor PR follows up from [#11750](https://github.com/leanprover-community/mathlib/pull/#11750) by moving the `{zero,one,add,mul,...}_mem_class` lemmas to the root namespace and marking the previous `sub{monoid,group,module,algebra,...}.{zero,one,add,mul,...}_mem` lemmas as `protected`. This is the second part of [#11545](https://github.com/leanprover-community/mathlib/pull/#11545) to be split off.

I made the subobject parameter to the `_mem` lemmas implicit if it appears in the hypotheses, e.g.
```lean
lemma mul_mem {S M : Type*} [monoid M] [set_like S M] [submonoid_class S M]
  {s : S} {x y : M} (hx : x ∈ s) (hy : y ∈ s) : x * y ∈ s
```
instead of having `(s : S)` explicit. The generic `_mem` lemmas are not namespaced, so there is no dot notation that requires `s` to be explicit. Also there were already a couple of instances for the same operator where `s` was implicit and others where `s` was explicit, so some change was needed.

### [2022-04-10T01:48:15+00:00](https://github.com/leanprover-community/mathlib/commit/d13387491c9153b68396f6ddf38188f34e3eb2f9)
feat(representation_theory/basic): basics of group representation theory ([#11207](https://github.com/leanprover-community/mathlib/pull/#11207))

Some basic lemmas about group representations and some theory regarding the subspace of fixed points of a representation. 



Co-authored-by: antoinelab01 <66086247+antoinelab01@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-04-10T01:48:14+00:00](https://github.com/leanprover-community/mathlib/commit/3fe5c9326bc42d2581c799d6fe9b8891187f5c85)
feat(algebra/ring/boolean_ring): Turning a Boolean algebra into a Boolean ring ([#6476](https://github.com/leanprover-community/mathlib/pull/#6476))

Define `as_boolring`, a type synonym to turn a Boolean algebra into a Boolean ring and show that `as_boolring` and `as_boolalg` are "inverse" to each other.

Co-authored-by: Yaël Dillies <yael.dillies@gmail.com>



Co-authored-by: Yaël Dillies <yael.dillies@gmail.com>
Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-04-10T01:48:13+00:00](https://github.com/leanprover-community/mathlib/commit/9495b8cb2c4f00b05f7eed0ce4345832e929b688)
feat(data/set/intervals/with_bot_top): lemmas about `I??` and `with_top/bot` ([#4273](https://github.com/leanprover-community/mathlib/pull/#4273))

Prove theorems about (pre)images of intervals under `coe : α → with_top α` and `coe : α → with_bot α`.



Co-authored-by: Yaël Dillies <yael.dillies@gmail.com>
Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-04-09T23:54:02+00:00](https://github.com/leanprover-community/mathlib/commit/e4f93e6f0e77dd2dac6aec4811e010f8c0eecf74)
feat(group_theory/solvable): Golf some proofs ([#13271](https://github.com/leanprover-community/mathlib/pull/#13271))

This PR uses `solvable_of_ker_le_range` to golf some proofs.

### [2022-04-09T23:54:01+00:00](https://github.com/leanprover-community/mathlib/commit/b7f7c4aab7e6cf4585a24697d19752c826d4a68f)
feat(combinatorics/simple_graph/clique): Cliques ([#12982](https://github.com/leanprover-community/mathlib/pull/#12982))

Define cliques.

Co-authored-by: Bhavik Mehta <bhavik.mehta8@gmail.com>



Co-authored-by: Kyle Miller <kmill31415@gmail.com>

### [2022-04-09T22:07:41+00:00](https://github.com/leanprover-community/mathlib/commit/e690875dca9e32543ecdca89ffa6a849fd8c3279)
chore(ring_theory/roots_of_unity): generalise ([#13261](https://github.com/leanprover-community/mathlib/pull/#13261))

### [2022-04-09T22:07:40+00:00](https://github.com/leanprover-community/mathlib/commit/38796213564a7a74e9dd13c63c6ce6638baff13f)
feat(combinatorics/additive/salem_spencer): The sphere does not contain arithmetic progressions ([#13259](https://github.com/leanprover-community/mathlib/pull/#13259))

Prove that the frontier of a strictly convex closed set is Salem-Spencer. For this we need
* simple lemmas about `same_ray`. This involves renaming `same_ray.exists_right_eq_smul`/`same_ray.exists_left_eq_smul` to `same_ray.exists_nonneg_left`/`same_ray.exists_nonneg_right`.
* that the norm in a real normed space is injective on rays.
* that the midpoint of two points of equal norm has smaller norm, in a strictly convex space

### [2022-04-09T22:07:39+00:00](https://github.com/leanprover-community/mathlib/commit/b3a0f8505756a83e6010f84ec6ab5d3d80936d6c)
feat(group_theory/coset): Fintype instance for quotient by the right relation ([#13257](https://github.com/leanprover-community/mathlib/pull/#13257))

This PR adds a fintype instance for the quotient by the right relation.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-04-09T22:07:38+00:00](https://github.com/leanprover-community/mathlib/commit/e3a8ef1c95540bee707852ab771933e86d2ecf26)
feat(algebra/algebra/*): generalise ([#13252](https://github.com/leanprover-community/mathlib/pull/#13252))

Some generalisations straight from Alex's generalisation linter, with some care about how to place them. Some `algebra` lemmas are weakened to semirings, allowing us to talk about ℕ-algebras much more easily.

### [2022-04-09T22:07:37+00:00](https://github.com/leanprover-community/mathlib/commit/14801617d51e989b980e905790311ee5c6a42839)
feat(group_theory/group_action/basic): Left multiplication satisfies the `quotient_action` axiom ([#13249](https://github.com/leanprover-community/mathlib/pull/#13249))

This PR adds an instance `quotient_action α H`, meaning that left multiplication satisfies the `quotient_action` axiom.

### [2022-04-09T22:07:36+00:00](https://github.com/leanprover-community/mathlib/commit/22b7d21f36110c2d11432241c4414e2b0d366171)
feat(analysis/normed*): if `f → 0` and `g` is bounded, then `f * g → 0` ([#13248](https://github.com/leanprover-community/mathlib/pull/#13248))

Also drop `is_bounded_under_of_tendsto`: it's just `h.norm.is_bounded_under_le`.

### [2022-04-09T22:07:35+00:00](https://github.com/leanprover-community/mathlib/commit/4c4e5e8323142a9418f51f7c0afd5857f94150c4)
feat(analysis/locally_convex): every totally bounded set is von Neumann bounded ([#13204](https://github.com/leanprover-community/mathlib/pull/#13204))

Add one lemma and some cleanups of previous PR.

### [2022-04-09T19:44:54+00:00](https://github.com/leanprover-community/mathlib/commit/cc65716eba9abac249ad75da76fcb66adda2eff0)
refactor(analysis/complex): replace `diff_on_int_cont` with `diff_cont_on_cl` ([#13148](https://github.com/leanprover-community/mathlib/pull/#13148))

Use "differentiable on a set and continuous on its closure" instead of "continuous on a set and differentiable on its interior".
There are a few reasons to prefer the latter:

* it has better "composition" lemma;
* it allows us to talk about functions that are, e.g., differentiable on `{z : ℂ | abs z < 1 ∧ (re z < 0 ∨ im z ≠ 0)}` and continuous on the closed unit disk.

Also generalize `eq_on_of_eq_on_frontier` from a compact set to a bounded set (so that it works, e.g., for the unit ball in a Banach space).

This PR does not move the file `diff_on_int_cont` to make the diff more readable; the file will be moved in another PR.

### [2022-04-09T19:44:52+00:00](https://github.com/leanprover-community/mathlib/commit/57f382a0cf79163ff82a438ae12f7eb08f936730)
feat(order/bounds): Boundedness of monotone/antitone functions ([#13079](https://github.com/leanprover-community/mathlib/pull/#13079))




Co-authored-by: Mantas Bakšys <39908973+MantasBaksys@users.noreply.github.com>

### [2022-04-09T19:44:50+00:00](https://github.com/leanprover-community/mathlib/commit/0dde2cb8d09ca885ce6fbdce13ce4a6cfe52a7b1)
feat(data/list/chain): Lemma for `chain r a (list.range n.succ)` ([#12990](https://github.com/leanprover-community/mathlib/pull/#12990))

### [2022-04-09T17:28:10+00:00](https://github.com/leanprover-community/mathlib/commit/bc140d291fa7f4351650001faf158cdd6df5eda0)
feat(data/polynomial/degree/lemmas): add some lemmas and rename some lemmas ([#13235](https://github.com/leanprover-community/mathlib/pull/#13235))

rename `nat_degree_mul_C_eq_of_no_zero_divisors` to `nat_degree_mul_C`
rename `nat_degree_C_mul_eq_of_no_zero_divisors` to `nat_degree_C_mul`

### [2022-04-09T17:28:09+00:00](https://github.com/leanprover-community/mathlib/commit/f8467aafa279f411a52c0f96adcaf95b7c083316)
feat(data/polynomial/eval): add some lemmas for `eval₂` ([#13234](https://github.com/leanprover-community/mathlib/pull/#13234))

### [2022-04-09T17:28:08+00:00](https://github.com/leanprover-community/mathlib/commit/25d28c8399f9ce95ca7dc99cef87b6092c1f9ba7)
feat(group_theory/schreier): Add version of Schreier's lemma ([#13231](https://github.com/leanprover-community/mathlib/pull/#13231))

This PR adds a version of Schreier's lemma of the form `closure (_ : set H) = ⊤`, as opposed to `closure (_ : set G) = H`. This is closer to saying that `H` is finitely generated.

I also fiddled with the names a bit.

### [2022-04-09T17:28:06+00:00](https://github.com/leanprover-community/mathlib/commit/d831478d7a38c1578d9f969216b3396644201fdd)
feat(computability/encoding): Bounds on cardinality from an encoding ([#13224](https://github.com/leanprover-community/mathlib/pull/#13224))

Generalizes universe variables for `computability.encoding`
Uses a `computability.encoding` to bound the cardinality of a type

### [2022-04-09T17:28:05+00:00](https://github.com/leanprover-community/mathlib/commit/6abb6de90754c5613a3aab6261eea9e5c72d539d)
feat(category_theory/bicategory): monoidal categories are single object bicategories ([#13157](https://github.com/leanprover-community/mathlib/pull/#13157))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-09T17:28:04+00:00](https://github.com/leanprover-community/mathlib/commit/823699fbee1b71793e44d5f6493b0525ed61eef0)
feat(linear_algebra/general_linear_group): Add some lemmas about SL to GL_pos coercions. ([#12393](https://github.com/leanprover-community/mathlib/pull/#12393))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-04-09T15:37:04+00:00](https://github.com/leanprover-community/mathlib/commit/d42f6a8208880a1a17178be825a8093874e2034e)
chore(algebra/associated): golf irreducible_iff_prime_iff ([#13267](https://github.com/leanprover-community/mathlib/pull/#13267))

### [2022-04-09T15:37:03+00:00](https://github.com/leanprover-community/mathlib/commit/348b41d45f08d9394853995f477a42df1f72fc99)
chore(archive/imo/imo1994_q1): tidy a bit ([#13266](https://github.com/leanprover-community/mathlib/pull/#13266))

### [2022-04-09T15:37:02+00:00](https://github.com/leanprover-community/mathlib/commit/1d9d15307e711888aa291a8a3d6d11845b40da26)
chore(algebraic_geometry/pullbacks): replaced some simps by simp onlys ([#13258](https://github.com/leanprover-community/mathlib/pull/#13258))

This PR optimizes the file `algebraic_geometry/pullbacks` by replacing some calls to `simp` by `simp only [⋯]`.

This file has a high [`sec/LOC` ratio](https://mathlib-bench.limperg.de/commit/5e98dc1cc915d3226ea293c118d2ff657b48b0dc) and is not very short, which makes it a good candidate for such optimizations attempts.

On my machine, these changes reduced the compile time from 2m30s to 1m20s.

### [2022-04-09T15:37:01+00:00](https://github.com/leanprover-community/mathlib/commit/8c7e8a4d158e3c70bcd03defb1c789247c360ddd)
feat(group_theory/commutator): The commutator subgroup is characteristic ([#13255](https://github.com/leanprover-community/mathlib/pull/#13255))

This PR adds instances stating that the commutator subgroup is characteristic.

### [2022-04-09T15:37:00+00:00](https://github.com/leanprover-community/mathlib/commit/d23fd6f7f56c3852a28ee96a76b980c3497ff45a)
refactor(group_theory/solvable): Golf and move `solvable_of_ker_le_range` ([#13254](https://github.com/leanprover-community/mathlib/pull/#13254))

This PR moves `solvable_of_ker_le_range` to earlier in the file so that it can be used to golf the proofs of `solvable_of_solvable_injective` and `solvable_of_surjective`.

### [2022-04-09T15:02:56+00:00](https://github.com/leanprover-community/mathlib/commit/f24918e07f9bf28c18352b31e3fe020597da7e2c)
refactor(group_theory/solvable): Golf some proofs ([#13256](https://github.com/leanprover-community/mathlib/pull/#13256))

This PR golfs some proofs in `group_theory/solvable.lean`.

### [2022-04-09T12:31:00+00:00](https://github.com/leanprover-community/mathlib/commit/d6ff44ec68c4f63e1d2e8e5708a981f51e0cdc48)
feat(category_theory/faithful): map_iso_injective ([#13263](https://github.com/leanprover-community/mathlib/pull/#13263))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-09T10:39:57+00:00](https://github.com/leanprover-community/mathlib/commit/7a0513dbe6494b44a1852ea2d3a36d08b8203930)
feat(data/nat/*): generalize typeclass assumptions ([#13260](https://github.com/leanprover-community/mathlib/pull/#13260))

### [2022-04-09T07:19:58+00:00](https://github.com/leanprover-community/mathlib/commit/f5ee47b672e849e4449b85c6f890b8c902889f9d)
feat(category_theory/triangulated): upgrade map_triangle to a functor ([#13262](https://github.com/leanprover-community/mathlib/pull/#13262))

Useful for LTE.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-09T06:37:15+00:00](https://github.com/leanprover-community/mathlib/commit/a98a26b2d0fae2a7c2f284fe177dedfcf7fc24e8)
chore(measure_theory): move lemmas about `ae_measurable` to a new file ([#13246](https://github.com/leanprover-community/mathlib/pull/#13246))

### [2022-04-09T05:46:44+00:00](https://github.com/leanprover-community/mathlib/commit/59cf36754c2fbd705c70d56a74764bee00d05332)
chore(analysis/special_functions/pow): golf a proof ([#13247](https://github.com/leanprover-community/mathlib/pull/#13247))

`complex.continuous_at_cpow_const` follows from `complex.continuous_at_cpow`.

### [2022-04-09T00:02:05+00:00](https://github.com/leanprover-community/mathlib/commit/2a04ec03f17ad178e2e1e596973f7eb4c9838d1a)
feat(data/list/big_operators): More lemmas about alternating product ([#13195](https://github.com/leanprover-community/mathlib/pull/#13195))

A few more lemmas about `list.alternating_prod` and `list.alternating_sum` and a proof that 11 divides even length base 10 palindromes.

Also rename `palindrome` to `list.palindrome` (as it should have been).

Co-authored-by: Chris Wong



Co-authored-by: Chris Wong <lambda.fairy@gmail.com>

### [2022-04-08T21:51:39+00:00](https://github.com/leanprover-community/mathlib/commit/485d6484cc40befad52a8757f89964f8a5248e62)
feat(algebra/big_operators): some big operator lemmas ([#13066](https://github.com/leanprover-community/mathlib/pull/#13066))

Note that `prod_coe_sort` is essentially `prod_finset_coe` restated with the relatively new `finset.has_coe_to_sort`. I can also place `prod_finset_coe` with `prod_coe_sort` if we prefer.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2022-04-08T17:20:39+00:00](https://github.com/leanprover-community/mathlib/commit/9498beac24f2924fe0e9994554d2226f4472ef87)
feat(group_theory/group_action/fixing_subgroup): add lemmas about fixing_subgroup ([#13202](https://github.com/leanprover-community/mathlib/pull/#13202))

- pull back here the definition of fixing_subgroup and fixing_submonoid from field_theory.galois
- add lemmas about fixing_subgroup or fixing_submonoid in the context of mul_action
- add Galois connection relating it with fixed_points. 



Co-authored-by: Antoine Chambert-Loir <antoine.chambert-loir@math.univ-paris-diderot.fr>

### [2022-04-08T15:41:02+00:00](https://github.com/leanprover-community/mathlib/commit/ed266e51398c640151aafbe07aee677ad68acea9)
feat(category_theory/limits/terminal): limit of the constant terminal functor ([#13238](https://github.com/leanprover-community/mathlib/pull/#13238))

Needed in LTE.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-08T15:41:01+00:00](https://github.com/leanprover-community/mathlib/commit/afa9be28f0bdf1c3796a4455f8027b42fdcafc2e)
feat(category_theory/limits/pullbacks): missing simp lemmas ([#13237](https://github.com/leanprover-community/mathlib/pull/#13237))

Absence noted in LTE.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-08T15:40:59+00:00](https://github.com/leanprover-community/mathlib/commit/05213440b3b4f4a1c9c9635c994fb391e570c737)
feat(analysis/locally_convex/basic): add lemmas about finite unions for absorbs ([#13236](https://github.com/leanprover-community/mathlib/pull/#13236))

- Lemma for absorbing sets and addition
- Two Lemmas for absorbing sets as finite unions (set.finite and finset variant)
- Lemma for absorbent sets absorb finite sets.



Co-authored-by: Moritz Doll <doll@uni-bremen.de>

### [2022-04-08T15:40:58+00:00](https://github.com/leanprover-community/mathlib/commit/0831e4f19ca5687016068a0fda6a28f151bfded1)
feat(data/polynomial/degree/definitions): add `degree_monoid_hom` ([#13233](https://github.com/leanprover-community/mathlib/pull/#13233))

It will be used to simplify the proof of some lemmas.

### [2022-04-08T13:45:44+00:00](https://github.com/leanprover-community/mathlib/commit/f5d4fa198fe61ddd2444d38f041f425fc181af87)
feat(data/fintype/basic): add `fintype_of_{equiv,option}` ([#13086](https://github.com/leanprover-community/mathlib/pull/#13086))

`fintype_of_option_equiv` was extracted from @huynhtrankhanh's https://github.com/leanprover-community/mathlib/pull/11162, moved here to a separate PR.  The split into `fintype_of_option` and `fintype_of_equiv` is based on a comment on that PR by @jcommelin.

Co-authored-by: Huỳnh Trần Khanh [qcdz9r6wpcbh59@gmail.com](mailto:qcdz9r6wpcbh59@gmail.com)

### [2022-04-08T13:45:43+00:00](https://github.com/leanprover-community/mathlib/commit/d96e17df42711d095a80e128735c37524d28a236)
feat(data/multiset/basic): add `map_le_map_iff` and `map_embedding` ([#13082](https://github.com/leanprover-community/mathlib/pull/#13082))

Adds lemmas `map_le_map_iff : s.map f ≤ t.map f ↔ s ≤ t` and `map_embedding : multiset α ↪o multiset β` for embedding `f`.

Extracted from @huynhtrankhanh's [#11162](https://github.com/leanprover-community/mathlib/pull/#11162), moved here to a separate PR

Co-authored-by: Huỳnh Trần Khanh [qcdz9r6wpcbh59@gmail.com](mailto:qcdz9r6wpcbh59@gmail.com)

### [2022-04-08T13:45:41+00:00](https://github.com/leanprover-community/mathlib/commit/5acaeaf4738d84e74fedfd80b7ef3a8629df6b5b)
chore(computability/language): Golf ([#13039](https://github.com/leanprover-community/mathlib/pull/#13039))

Golf the `semiring` instance using the `set.image2` API, add half missing docstring.

### [2022-04-08T13:45:40+00:00](https://github.com/leanprover-community/mathlib/commit/2569ad52aaab23e34e7938fce9488d6c888288f9)
feat(data/set/intervals/basic): An open interval of a dense order has no maximum/minimum ([#12924](https://github.com/leanprover-community/mathlib/pull/#12924))

### [2022-04-08T12:12:47+00:00](https://github.com/leanprover-community/mathlib/commit/91ce04d43952a8409738d8c0da0e77fed48ce74f)
chore(model_theory/encoding): Move the encoding for terms to its own file ([#13223](https://github.com/leanprover-community/mathlib/pull/#13223))

Moves the declarations about encodings and cardinality of terms to their own file, `model_theory/encoding`

### [2022-04-08T12:12:46+00:00](https://github.com/leanprover-community/mathlib/commit/ed68854666a331abe832b8766be3c5bb00d9f1f4)
feat(model_theory/*): Theory of nonempty structures and bundling elementary substructures ([#13118](https://github.com/leanprover-community/mathlib/pull/#13118))

Defines a sentence and theory to indicate a structure is nonempty
Defines a map to turn elementary substructures of a bundled model into bundled models

### [2022-04-08T12:12:45+00:00](https://github.com/leanprover-community/mathlib/commit/710fe040e44cef953b2e4f91a5400bfa79e8a26f)
feat(model_theory/order): Defines ordered languages and structures ([#13088](https://github.com/leanprover-community/mathlib/pull/#13088))

Defines ordered languages and ordered structures
Defines the theories of pre-, partial, and linear orders, shows they are modeled by the respective structures.



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2022-04-08T12:12:44+00:00](https://github.com/leanprover-community/mathlib/commit/7340720cef214eeeed68fdb609fe663eaf6f36a3)
feat(group_theory/group_action/basic): Add typeclass for actions that descend to the quotient ([#12999](https://github.com/leanprover-community/mathlib/pull/#12999))

Part of [#12848](https://github.com/leanprover-community/mathlib/pull/#12848).

### [2022-04-08T11:40:03+00:00](https://github.com/leanprover-community/mathlib/commit/851b3200966fc106fa52da7166effcbe70ce147c)
feat(ring_theory/localization): b is linear independent over R iff l.i. over `Frac(R)` ([#13041](https://github.com/leanprover-community/mathlib/pull/#13041))

Co-authored-by: Junyan Xu <junyanxumath@gmail.com>



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2022-04-08T07:42:13+00:00](https://github.com/leanprover-community/mathlib/commit/7d417154154a97ce739fa511f08ada2e5c87772e)
feat(archive/imo/imo2008_q3): golf ([#13232](https://github.com/leanprover-community/mathlib/pull/#13232))

### [2022-04-08T07:42:12+00:00](https://github.com/leanprover-community/mathlib/commit/e85dc17a445246df73c3c4de14b4c3b066c9e787)
feat(group_theory/subgroup/basic): The centralizer of a characteristic subgroup is characteristic ([#13230](https://github.com/leanprover-community/mathlib/pull/#13230))

This PR proves that the centralizer of a characteristic subgroup is characteristic.

### [2022-04-08T07:42:10+00:00](https://github.com/leanprover-community/mathlib/commit/95ebbadb5c0a1ce143b5c23db275ac22e2db4a0f)
refactor(group_theory/commutator): Move `commutator_le_map_commutator` ([#13229](https://github.com/leanprover-community/mathlib/pull/#13229))

`commutator_le_map_commutator` is a general lemma about commutators, so it should be moved from `solvable.lean` to `commutator.lean`.

### [2022-04-08T07:42:09+00:00](https://github.com/leanprover-community/mathlib/commit/1a4203a94f96443548d84359dde6f029790a0872)
feat(group_theory/coset): Right cosets are in bijection with left cosets ([#13228](https://github.com/leanprover-community/mathlib/pull/#13228))

Right cosets are in bijection with left cosets. This came up in some work involving right transversals.

### [2022-04-08T07:42:08+00:00](https://github.com/leanprover-community/mathlib/commit/499a4a89a33aedf0ea35b76b408b82fc1178814a)
feat(group_theory/index): `fintype_of_index_ne_zero` ([#13225](https://github.com/leanprover-community/mathlib/pull/#13225))

This PR adds `fintype_of_index_ne_zero`.

### [2022-04-08T06:14:18+00:00](https://github.com/leanprover-community/mathlib/commit/ccf3e37f0c018770aadf1f70cb04062560c6b32a)
feat(ring_theory/unique_factorization_domain): alternative specification for `count (normalized_factors x)` ([#13161](https://github.com/leanprover-community/mathlib/pull/#13161))

`count_normalized_factors_eq` specifies the number of times an irreducible factor `p` appears in `normalized_factors x`, namely the number of times it divides `x`. This is often easier to work with than going through `multiplicity` since this way we avoid coercing to `enat`.

### [2022-04-08T06:14:17+00:00](https://github.com/leanprover-community/mathlib/commit/0c424e95d4eee5dac0451fb184d14ea61da32ef6)
refactor(analysis/normed_space/conformal_linear_map): redefine ([#13143](https://github.com/leanprover-community/mathlib/pull/#13143))

Use equality of bundled maps instead of coercions to functions in the definition of `is_conformal_map`. Also golf some proofs.

### [2022-04-08T06:14:16+00:00](https://github.com/leanprover-community/mathlib/commit/036fc99678ec8883a33403c21c7daf4de53cd28b)
feat(topology/uniform_space/uniform_convergence): add `tendsto_uniformly_iff_seq_tendsto_uniformly` ([#13128](https://github.com/leanprover-community/mathlib/pull/#13128))

For countably generated filters, uniform convergence is equivalent to uniform convergence of sub-sequences.



Co-authored-by: RemyDegenne <Remydegenne@gmail.com>

### [2022-04-08T06:14:15+00:00](https://github.com/leanprover-community/mathlib/commit/ab60244a148c08976eb0c4750fc0c762c79bf20e)
feat(model_theory/basic,bundled): Structures induced by equivalences ([#13124](https://github.com/leanprover-community/mathlib/pull/#13124))

Defines `equiv.induced_Structure`, a structure on the codomain of a bijection that makes the bijection an isomorphism.
Defines maps on bundled models to shift them along bijections and up and down universes.

### [2022-04-08T05:13:45+00:00](https://github.com/leanprover-community/mathlib/commit/9f3e7fba7437833203e14ad35bf80ed36cea3519)
feat(category_theory/limits): further API for commuting limits ([#13215](https://github.com/leanprover-community/mathlib/pull/#13215))

Needed for LTE.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-08T02:06:33+00:00](https://github.com/leanprover-community/mathlib/commit/5e98dc1cc915d3226ea293c118d2ff657b48b0dc)
feat(topology/continuous_function/zero_at_infty): add more instances for zero_at_infty_continuous_map and establish C₀ functorial properties ([#13196](https://github.com/leanprover-community/mathlib/pull/#13196))

This adds more instances for the type `C₀(α, β)` of continuous functions vanishing at infinity. Notably, these new instances include its non-unital ring, normed space and star structures, culminating with `cstar_ring` when `β` is a `cstar_ring` which is also a `topological_ring`.

In addition, this establishes functorial properties of `C₀(-, β)` for various choices of algebraic categories involving `β`. The domain of these (contravariant) functors is the category of topological spaces with cocompact continuous maps, and the functor applied to a cocompact map is given by pre-composition.

### [2022-04-08T00:26:57+00:00](https://github.com/leanprover-community/mathlib/commit/0719b36a6b244a6d0fbf9346a49da2fe99495f2f)
feat(category_theory/limits/shapes): isomorphisms of (co)spans ([#13216](https://github.com/leanprover-community/mathlib/pull/#13216))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-04-08T00:26:56+00:00](https://github.com/leanprover-community/mathlib/commit/b89711524c4a2e58dd0acb57388b86c32579574a)
chore(algebra/associated): generalisation linter ([#13108](https://github.com/leanprover-community/mathlib/pull/#13108))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-07T22:31:46+00:00](https://github.com/leanprover-community/mathlib/commit/cae5164677720733dcde82814e1e63275d5d25ba)
chore(algebra/order/{monoid,ring}): missing typeclasses about `*` and `+` on `order_dual` ([#13004](https://github.com/leanprover-community/mathlib/pull/#13004))

### [2022-04-07T20:32:53+00:00](https://github.com/leanprover-community/mathlib/commit/02a256020572e06e017291dc87f9689f6c5effd5)
feat(analysis/normed_space/add_torsor_bases): add `convex.interior_nonempty_iff_affine_span_eq_top` ([#13220](https://github.com/leanprover-community/mathlib/pull/#13220))

Generalize `interior_convex_hull_nonempty_iff_aff_span_eq_top` to any
convex set, not necessarily written as the convex hull of a set.

### [2022-04-07T20:32:52+00:00](https://github.com/leanprover-community/mathlib/commit/0f4d0ae4696408e2123d6d1b8e6eeaa8df5534b1)
feat(data/polynomial/identities): golf using `linear_combination` ([#13212](https://github.com/leanprover-community/mathlib/pull/#13212))

### [2022-04-07T20:32:51+00:00](https://github.com/leanprover-community/mathlib/commit/3b04f48c1d71886c65fee7207fb8f65d94c144ad)
feat(number_theory/fermat4): golf using `linear_combination` ([#13211](https://github.com/leanprover-community/mathlib/pull/#13211))

### [2022-04-07T20:32:50+00:00](https://github.com/leanprover-community/mathlib/commit/82d1e9f8f5080a32456c3939bcf40680870e0c0a)
feat(algebra/quadratic_discriminant): golf using `linear_combination` ([#13210](https://github.com/leanprover-community/mathlib/pull/#13210))

### [2022-04-07T18:41:47+00:00](https://github.com/leanprover-community/mathlib/commit/4ff75f5b8502275a4c2eb2d2f02bdf84d7fb8993)
refactor(category_theory/bicategory): set simp-normal form for 2-morphisms ([#13185](https://github.com/leanprover-community/mathlib/pull/#13185))

## Problem

The definition of bicategories contains the following axioms:
```lean
associator_naturality_left : ∀ {f f' : a ⟶ b} (η : f ⟶ f') (g : b ⟶ c) (h : c ⟶ d),
  (η ▷ g) ▷ h ≫ (α_ f' g h).hom = (α_ f g h).hom ≫ η ▷ (g ≫ h)

associator_naturality_middle : ∀ (f : a ⟶ b) {g g' : b ⟶ c} (η : g ⟶ g') (h : c ⟶ d),
  (f ◁ η) ▷ h ≫ (α_ f g' h).hom = (α_ f g h).hom ≫ f ◁ (η ▷ h)

associator_naturality_right : ∀ (f : a ⟶ b) (g : b ⟶ c) {h h' : c ⟶ d} (η : h ⟶ h'),
  (f ≫ g) ◁ η ≫ (α_ f g h').hom = (α_ f g h).hom ≫ f ◁ (g ◁ η) 

left_unitor_naturality : ∀ {f g : a ⟶ b} (η : f ⟶ g),
  𝟙 a ◁ η ≫ (λ_ g).hom = (λ_ f).hom ≫ η

right_unitor_naturality : ∀ {f g : a ⟶ b} (η : f ⟶ g) :
  η ▷ 𝟙 b ≫ (ρ_ g).hom = (ρ_ f).hom ≫ η
```

By using these axioms, we can see that, for example, 2-morphisms `(f₁ ≫ f₂) ◁ (f₃ ◁ (η ▷ (f₄ ≫ f₅)))` and `f₁ ◁ ((𝟙_ ≫ f₂ ≫ f₃) ◁ ((η ▷ f₄) ▷ f₅))` are equal up to some associators and unitors. The problem is that the proof of this fact requires tedious rewriting. We should insert appropriate associators and unitors, and then rewrite using the above axioms manually.

This tedious rewriting is also a problem when we use the (forthcoming) `coherence` tactic (bicategorical version of [#13125](https://github.com/leanprover-community/mathlib/pull/#13125)), which only works if the non-structural 2-morphisms in the LHS and the RHS are the same.

## Main change

The main proposal of this PR is to introduce a normal form of such 2-morphisms, and put simp attributes to suitable lemmas in order to rewrite any 2-morphism into the normal form. For example, the normal form of the previouse example is `f₁ ◁ (f₂ ◁ (f₃ ◁ ((η ▷ f₄) ▷ f₅)))`. The precise definition of the normal form can be found in the docs in `basic.lean` file. The new simp lemmas introduced in this PR are the following:

```lean
whisker_right_comp : ∀ {f f' : a ⟶ b} (η : f ⟶ f') (g : b ⟶ c) (h : c ⟶ d),
  η ▷ (g ≫ h) = (α_ f g h).inv ≫ η ▷ g ▷ h ≫ (α_ f' g h).hom 

whisker_assoc : ∀ (f : a ⟶ b) {g g' : b ⟶ c} (η : g ⟶ g') (h : c ⟶ d),
  (f ◁ η) ▷ h = (α_ f g h).hom ≫ f ◁ (η ▷ h) ≫ (α_ f g' h).inv

comp_whisker_left : ∀ (f : a ⟶ b) (g : b ⟶ c) {h h' : c ⟶ d} (η : h ⟶ h'),
  (f ≫ g) ◁ η = (α_ f g h).hom ≫ f ◁ g ◁ η ≫ (α_ f g h').inv

id_whisker_left : ∀ {f g : a ⟶ b} (η : f ⟶ g),
  𝟙 a ◁ η = (λ_ f).hom ≫ η ≫ (λ_ g).inv

whisker_right_id : ∀ {f g : a ⟶ b} (η : f ⟶ g),
  η ▷ 𝟙 b = (ρ_ f).hom ≫ η ≫ (ρ_ g).inv
```

Logically, these are equivalent to the five axioms presented above. The point is that these equalities have the definite simplification direction.

## Improvement 

Some proofs that had been based on tedious rewriting are now automated. For example, the conditions in `oplax_nat_trans.id`, `oplax_nat_trans.comp`, and several functions in `functor_bicategory.lean` are now proved by `tidy`.

## Specific changes

- The new simp lemmas `whisker_right_comp` etc. actually have been included in the definition of bicategories instead of `associate_naturality_left` etc. so that the latter lemmas are proved in later of the file just by `simp`.
- The precedence of the whiskering notations "infixr ` ◁ `:70" and "infixr ` ◁ `:70" have been changed into "infixr ` ◁ `:81" and "infixr ` ◁ `:81", which is now higher than that of the composition `≫`. This setting is consistent with the normal form introduced in this PR in the sence that an expression is in normal form only if it has the minimal number of parentheses in this setting. For example, the normal form `f₁ ◁ (f₂ ◁ (f₃ ◁ ((η ▷ f₄) ▷ f₅)))` can be written as `f₁ ◁ f₂ ◁ f₃ ◁ η ▷ f₄ ▷ f₅`.
- The unneeded parentheses caused by the precedence change have been removed.
- The lemmas `whisker_right_id` and `whisker_right_comp` have been renamed to `id_whisker_right` and `comp_whisker_right` since these are more consistent with the notation. Note that the name `whisker_right_id` and `whisker_right_comp` are now used for the two of the five simp lemmas presented above.
- The lemmas in `basic.lean` have been rearranged to be more logically consistent.

## Future work
I would like to apply a similar strategy for monoidal categories.

### [2022-04-07T18:41:46+00:00](https://github.com/leanprover-community/mathlib/commit/44c31d8fb9d751e942c5cee3ba5d1de97c02a749)
feat(data/finset/basic): add `map_injective` and `sigma_equiv_option_of_inhabited` ([#13083](https://github.com/leanprover-community/mathlib/pull/#13083))

Adds `map_injective (f : α ↪ β) : injective (map f) := (map_embedding f).injective` and `sigma_equiv_option_of_inhabited [inhabited α] : Σ (β : Type u), α ≃ option β`.

Extracted from @huynhtrankhanh's https://github.com/leanprover-community/mathlib/pull/11162, moved here to a separate PR

Co-authored-by: Huỳnh Trần Khanh [qcdz9r6wpcbh59@gmail.com](mailto:qcdz9r6wpcbh59@gmail.com)

### [2022-04-07T18:41:45+00:00](https://github.com/leanprover-community/mathlib/commit/9d786ce78b5662b47db779b0d3d3a1f3991e70ec)
feat(topology/metric/basic): construct a bornology from metric axioms and add it to the pseudo metric structure ([#12078](https://github.com/leanprover-community/mathlib/pull/#12078))

Every metric structure naturally gives rise to a bornology where the bounded sets are precisely the metric bounded sets. The eventual goal will be to replace the existing `metric.bounded` with one defined in terms of the bornology, so we need to construct the bornology first, as we do here.



Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-04-07T16:53:29+00:00](https://github.com/leanprover-community/mathlib/commit/2d2d09cbb5bdb2c26984da8b2c7c351574f62035)
feat(data/nat/gcd): added gcd_mul_of_dvd_coprime ([#12989](https://github.com/leanprover-community/mathlib/pull/#12989))

Added gcd_mul_of_dvd_coprime lemma to gcd.lean.



Co-authored-by: seangolinski7 <60711021+seangolinski7@users.noreply.github.com>

### [2022-04-07T16:20:47+00:00](https://github.com/leanprover-community/mathlib/commit/733aed57522aa5addd769375bf0ee4d31b51f4a3)
chore(group_theory/index): Add `to_additive` ([#13191](https://github.com/leanprover-community/mathlib/pull/#13191))

This PR adds `to_additive` to the rest of `group_theory/index.lean`.

### [2022-04-07T16:20:46+00:00](https://github.com/leanprover-community/mathlib/commit/c522e3b55fe2e8bb61136dab604e83443aa12d20)
feat(data/polynomial/basic): add simp lemmas X_mul_C and X_pow_mul_C ([#13163](https://github.com/leanprover-community/mathlib/pull/#13163))

These lemmas are direct applications of `X_mul` and `X_pow_mul`.  However, their more general version cannot be `simp` lemmas since they form loops.  These versions do not, since they involve an explicit `C`.

I golfed slightly a proof in `linear_algebra.eigenspace` since it was timing out.

[Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/polynomial.20op_C/near/277703846)

### [2022-04-07T16:20:44+00:00](https://github.com/leanprover-community/mathlib/commit/6a0524fdd286727f5764c0f2c64816fe93afe4c8)
feat(category_theory/monoidal): upgrades for monoidal equivalences ([#13158](https://github.com/leanprover-community/mathlib/pull/#13158))

(Recall that a "monoidal equivalence" is a functor which is separately monoidal, and an equivalence.
This PR completes the work required to see this is the same as having a monoidal inverse, up to monoidal units and counits.)

* Shows that the unit and counit of a monoidal equivalence have a natural monoidal structure. 
* Previously, when transporting a monoidal structure across a (non-monoidal) equivalence,
we constructed directly the monoidal strength on the inverse functor. In the meantime, @b-mehta has provided a general construction for the monoidal strength on the inverse of any monoidal equivalence, so now we use that.

The proofs of `monoidal_unit` and `monoidal_counit` in `category_theory/monoidal/natural_transformation.lean` are quite ugly. If anyone would like to golf these that would be lovely! :-)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-07T16:20:43+00:00](https://github.com/leanprover-community/mathlib/commit/d7ad7d3713843ff666e3de5d3202275d9d6d38be)
feat(set_theory/cardinal): Upper bound on domain from upper bound on fibers ([#13147](https://github.com/leanprover-community/mathlib/pull/#13147))

A uniform upper bound on fibers gives an upper bound on the domain.

### [2022-04-07T16:20:41+00:00](https://github.com/leanprover-community/mathlib/commit/47a3cd26a96460191eb53e7da928c5bf5d4dde15)
feat(probability/integration): Bochner integral of the product of independent functions ([#13140](https://github.com/leanprover-community/mathlib/pull/#13140))

This is limited to real-valued functions, which is not very satisfactory but it is not clear (to me) what the most general version of each of those lemmas would be.

### [2022-04-07T16:20:40+00:00](https://github.com/leanprover-community/mathlib/commit/ab1bf0fb08636ad881e8ed4d3d682e4071abb4dd)
feat(algebra/order/monoid): add eq_one_or_one_lt ([#13131](https://github.com/leanprover-community/mathlib/pull/#13131))

Needed in LTE.

### [2022-04-07T16:20:39+00:00](https://github.com/leanprover-community/mathlib/commit/7c04f361dfbc9b1fcbb58fcf9704dd3c29108913)
feat(group_theory/schreier): prove Schreier's lemma ([#13019](https://github.com/leanprover-community/mathlib/pull/#13019))

This PR adds a proof of Schreier's lemma.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-04-07T16:20:37+00:00](https://github.com/leanprover-community/mathlib/commit/315bff39c349e7e95fc5d801a8233c5172daf9ab)
feat(archive/100-theorems-list/37_solution_of_cubic): golf ([#13012](https://github.com/leanprover-community/mathlib/pull/#13012))

Express one of the lemmas for the solution of the cubic as a giant `linear_combination` calculation.

### [2022-04-07T14:25:29+00:00](https://github.com/leanprover-community/mathlib/commit/c4f3869beca216709582aa97b279dfce556e8715)
chore(order/symm_diff): Change the symmetric difference notation ([#13217](https://github.com/leanprover-community/mathlib/pull/#13217))

The notation for `symm_diff` was `Δ` (`\D`, `\GD`, `\Delta`). It now is `∆` (`\increment`).

### [2022-04-07T14:25:16+00:00](https://github.com/leanprover-community/mathlib/commit/ac5188dd92abf641b660d948087b2cb8797d96cc)
chore(algebra/char_p/{basic + algebra}): weaken assumptions for char_p_to_char_zero ([#13214](https://github.com/leanprover-community/mathlib/pull/#13214))

The assumptions for lemma `char_p_to_char_zero` can be weakened, without changing the proof.

Since the weakening breaks up one typeclass assumption into two, when the lemma was applied with `@`, I inserted an extra `_`.  This happens twice: once in the file where the lemma is, and once in a separate file.

### [2022-04-07T14:25:13+00:00](https://github.com/leanprover-community/mathlib/commit/321d159d0dcfa2d84915c6bd98eec73131f25b8f)
feat(algebra/order/monoid): generalize, convert to `to_additive` and iff of `lt_or_lt_of_mul_lt_mul` ([#13192](https://github.com/leanprover-community/mathlib/pull/#13192))

I converted a lemma showing
`m + n < a + b →  m < a ∨ n < b`
to the `to_additive` version of a lemma showing
`m * n < a * b →  m < a ∨ n < b`.

I also added a lemma showing `m * n < a * b ↔  m < a ∨ n < b` and its `to_additive` version.

### [2022-04-07T12:26:52+00:00](https://github.com/leanprover-community/mathlib/commit/506ad313844ca5656e5c18f7999c0dbeea3dc37d)
feat(order/monotone): simp lemmas for monotonicity in dual orders ([#13207](https://github.com/leanprover-community/mathlib/pull/#13207))

Add 4 lemmas of the kind `antitone_to_dual_comp_iff`
Add their variants for `antitone_on`
Add their strict variants



Co-authored-by: Antoine Chambert-Loir <antoine.chambert-loir@math.univ-paris-diderot.fr>
Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-04-07T11:44:37+00:00](https://github.com/leanprover-community/mathlib/commit/be147af19452bcb456bbcbe1620c4860109202b7)
feat(ring_theory/graded_algebra/homogeneous_localization): homogeneous localization ring is local ([#13071](https://github.com/leanprover-community/mathlib/pull/#13071))

showed that `local_ring (homogeneous_localization 𝒜 x)` from prime ideal `x`

### [2022-04-07T10:39:20+00:00](https://github.com/leanprover-community/mathlib/commit/3e4bf5de28dee5a41f3522a633c1ec9084f3a27b)
feat(order/symm_diff): More symmetric difference lemmas ([#13133](https://github.com/leanprover-community/mathlib/pull/#13133))

A few more `symm_diff` lemmas.

Co-authored-by: Bryan Gin-ge Chen

### [2022-04-07T07:05:52+00:00](https://github.com/leanprover-community/mathlib/commit/faa7e52f1a38ef9dbcca9800456414b2bd74af6b)
chore(group_theory/index): Add `to_additive` ([#13191](https://github.com/leanprover-community/mathlib/pull/#13191))

This PR adds `to_additive` to the rest of `group_theory/index.lean`.

### [2022-04-07T07:05:50+00:00](https://github.com/leanprover-community/mathlib/commit/45a8f6cd84a2fd7c3bf744f7dac0547e2903f382)
feat(data/polynomial/basic): add simp lemmas X_mul_C and X_pow_mul_C ([#13163](https://github.com/leanprover-community/mathlib/pull/#13163))

These lemmas are direct applications of `X_mul` and `X_pow_mul`.  However, their more general version cannot be `simp` lemmas since they form loops.  These versions do not, since they involve an explicit `C`.

I golfed slightly a proof in `linear_algebra.eigenspace` since it was timing out.

[Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/polynomial.20op_C/near/277703846)

### [2022-04-07T07:05:49+00:00](https://github.com/leanprover-community/mathlib/commit/d047eb4671130d5998b185e49a0443a0d2e9b191)
feat(category_theory/monoidal): upgrades for monoidal equivalences ([#13158](https://github.com/leanprover-community/mathlib/pull/#13158))

(Recall that a "monoidal equivalence" is a functor which is separately monoidal, and an equivalence.
This PR completes the work required to see this is the same as having a monoidal inverse, up to monoidal units and counits.)

* Shows that the unit and counit of a monoidal equivalence have a natural monoidal structure. 
* Previously, when transporting a monoidal structure across a (non-monoidal) equivalence,
we constructed directly the monoidal strength on the inverse functor. In the meantime, @b-mehta has provided a general construction for the monoidal strength on the inverse of any monoidal equivalence, so now we use that.

The proofs of `monoidal_unit` and `monoidal_counit` in `category_theory/monoidal/natural_transformation.lean` are quite ugly. If anyone would like to golf these that would be lovely! :-)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-07T07:05:48+00:00](https://github.com/leanprover-community/mathlib/commit/91db821c9fe9c8ef5556cdcbfab85a6d7c14e789)
feat(set_theory/cardinal): Upper bound on domain from upper bound on fibers ([#13147](https://github.com/leanprover-community/mathlib/pull/#13147))

A uniform upper bound on fibers gives an upper bound on the domain.

### [2022-04-07T07:05:46+00:00](https://github.com/leanprover-community/mathlib/commit/409f5f28a3272deb46bfd4bc3d75c8479f182a0d)
feat(probability/integration): Bochner integral of the product of independent functions ([#13140](https://github.com/leanprover-community/mathlib/pull/#13140))

This is limited to real-valued functions, which is not very satisfactory but it is not clear (to me) what the most general version of each of those lemmas would be.

### [2022-04-07T07:05:45+00:00](https://github.com/leanprover-community/mathlib/commit/fabad7ec2b2687638eff3f65f02fa696eaff2c83)
feat(order/symm_diff): More symmetric difference lemmas ([#13133](https://github.com/leanprover-community/mathlib/pull/#13133))

A few more `symm_diff` lemmas.

Co-authored-by: Bryan Gin-ge Chen

### [2022-04-07T07:05:44+00:00](https://github.com/leanprover-community/mathlib/commit/2a74d4e9e2b15849e724e1e7ea1f768869921447)
feat(algebra/order/monoid): add eq_one_or_one_lt ([#13131](https://github.com/leanprover-community/mathlib/pull/#13131))

Needed in LTE.

### [2022-04-07T07:05:40+00:00](https://github.com/leanprover-community/mathlib/commit/9eff8cb00682799bc81ee38fe2c4661cb78e7fe8)
feat(group_theory/schreier): prove Schreier's lemma ([#13019](https://github.com/leanprover-community/mathlib/pull/#13019))

This PR adds a proof of Schreier's lemma.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-04-07T07:05:37+00:00](https://github.com/leanprover-community/mathlib/commit/45e4e626df662c9b8924bdaa98f1a10c909de19d)
feat(archive/100-theorems-list/37_solution_of_cubic): golf ([#13012](https://github.com/leanprover-community/mathlib/pull/#13012))

Express one of the lemmas for the solution of the cubic as a giant `linear_combination` calculation.

### [2022-04-07T06:05:46+00:00](https://github.com/leanprover-community/mathlib/commit/f0ee4c81b2f326d900690e6b5f5fcb912ded6461)
feat(topology/metric_space): the product of bounded sets is bounded ([#13176](https://github.com/leanprover-community/mathlib/pull/#13176))

Also add an `iff` version.

### [2022-04-07T00:57:22+00:00](https://github.com/leanprover-community/mathlib/commit/05820c53ce464eecc216e44694c95a3ffdd41073)
feat(archive/imo/imo2008_q4): golf using `linear_combination` ([#13209](https://github.com/leanprover-community/mathlib/pull/#13209))

### [2022-04-07T00:24:49+00:00](https://github.com/leanprover-community/mathlib/commit/c4ced3a11d8ed8058b97b7253872bfea99ed7bec)
feat(archive/imo/imo2005_q6): golf using `field_simp` ([#13206](https://github.com/leanprover-community/mathlib/pull/#13206))

### [2022-04-06T23:45:15+00:00](https://github.com/leanprover-community/mathlib/commit/cc28054789f5ac47c90f0258653a826ea08c2844)
feat(archive/imo/imo2001_q6): golf using `linear_combination` ([#13205](https://github.com/leanprover-community/mathlib/pull/#13205))

### [2022-04-06T15:26:14+00:00](https://github.com/leanprover-community/mathlib/commit/06bdd8bc4c8f16d8001e513ebc4f6a0863f58f14)
feat(geometry/manifold/tangent_bundle): adapt the definition to the new vector bundle definition ([#13199](https://github.com/leanprover-community/mathlib/pull/#13199))

Also a few tweaks to simplify the defeq behavior of tangent spaces.

### [2022-04-06T12:59:06+00:00](https://github.com/leanprover-community/mathlib/commit/138448ae98f529ef34eeb61114191975ee2ca508)
feat(algebra/parity): introduce `is_square` and, via `to_additive`, also `even` ([#13037](https://github.com/leanprover-community/mathlib/pull/#13037))

This PR continues the refactor began in [#12882](https://github.com/leanprover-community/mathlib/pull/#12882).  Now that most of the the even/odd lemmas are in the same file, I changed the definition of `even` to become the `to_additive` version of `is_square`.

The reason for the large number of files touched is that the definition of `even` actually changed, from being of the form `2 * n` to being of the form `n + n`.  Thus, I inserted appropriate `two_mul`s and `even_iff_two_dvd`s in a few places where the defeq to the divisibility by 2 was exploited.

[Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/even.2Fodd)

### [2022-04-06T06:48:08+00:00](https://github.com/leanprover-community/mathlib/commit/6930ad5d5b252d8c52f3c30ef6bfffa604c7da62)
feat(topology/continuous_function/zero_at_infty): add the type of continuous functions vanishing at infinity ([#12907](https://github.com/leanprover-community/mathlib/pull/#12907))

This adds the type of of continuous functions vanishing at infinity (`zero_at_infty`) with the localized notation `C₀(α, β)` (we also allow `α →C₀ β` but the former has higher priority). This type is defined when `α` and `β` are topological spaces and `β` has a zero element. Elements of this type are continuous functions `f` with the additional property that `tendsto f (cocompact α) (𝓝 0)`. Here we attempt to follow closely the recent hom refactor and so we also create the type class `zero_at_infty_continuous_map_class`.

Various algebraic structures are instantiated on `C₀(α, β)` when corresponding structures exist on `β`. When `β` is a metric space, there is a natural inclusion `zero_at_infty_continuous_map.to_bcf : C₀(α, β) → α →ᵇ β`, which induces a metric space structure on `C₀(α, β)`, and the range of this map is closed. Therefore, when `β` is complete, `α →ᵇ β` is complete, and hence so is `C₀(α, β)`.

- [x] depends on: [#12894](https://github.com/leanprover-community/mathlib/pull/#12894)

### [2022-04-06T03:42:41+00:00](https://github.com/leanprover-community/mathlib/commit/2841aadc938ed9e3602451640c45a04afbcac985)
chore(scripts): update nolints.txt ([#13193](https://github.com/leanprover-community/mathlib/pull/#13193))

I am happy to remove some nolints for you!

### [2022-04-06T01:48:21+00:00](https://github.com/leanprover-community/mathlib/commit/2e8d269f78bab5b577c0b16b46c9abf7766f68c3)
feat(data/nat/factorization): Generalize natural factorization recursors. ([#12973](https://github.com/leanprover-community/mathlib/pull/#12973))


Switches `rec_on_prime_pow` precondition to allow use of `0 < n`, and strengthens correspondingly `rec_on_pos_prime_pos_coprime` and `rec_on_prime_coprime`.



Co-authored-by: seangolinski7 <seanrg2@illinois.edu>

### [2022-04-05T23:46:08+00:00](https://github.com/leanprover-community/mathlib/commit/2504a2b4e7758306ad6f341324d017a6c4a621fb)
chore(data/list/basic): remove axiom of choice assumption in some lemmas ([#13189](https://github.com/leanprover-community/mathlib/pull/#13189))

### [2022-04-05T21:26:16+00:00](https://github.com/leanprover-community/mathlib/commit/a8413617d318601282aed4ac8a31252a62bbc4bd)
refactor(topology/vector_bundle): redefine ([#13175](https://github.com/leanprover-community/mathlib/pull/#13175))

The definition of topological vector bundle in [#4658](https://github.com/leanprover-community/mathlib/pull/#4658) was (inadvertently) a nonstandard definition, which agreed in finite dimension with the usual definition but not in infinite dimension.

Specifically, it omitted the compatibility condition that for a vector bundle over `B` with model fibre `F`, the transition function `B → F ≃L[R] F` associated to any pair of trivializations be continuous, with respect to to the norm topology on `F →L[R] F`.  (The transition function is automatically continuous with respect to the topology of pointwise convergence, which is why this works in finite dimension.  The discrepancy between these conditions in infinite dimension turns out to be a [classic](https://mathoverflow.net/questions/4943/vector-bundle-with-non-smoothly-varying-transition-functions/4997[#4997](https://github.com/leanprover-community/mathlib/pull/#4997))
[gotcha](https://mathoverflow.net/questions/54550/the-third-axiom-in-the-definition-of-infinite-dimensional-vector-bundles-why/54706[#54706](https://github.com/leanprover-community/mathlib/pull/#54706)).)

We refactor to add this compatibility condition to the definition of topological vector bundle, and to verify this condition in the existing examples of topological vector bundles (construction via a cocycle, direct sum of vector bundles, tangent bundle).

Co-authored-by: Patrick Massot <patrickmassot@free.fr>



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2022-04-05T19:36:21+00:00](https://github.com/leanprover-community/mathlib/commit/7ec52a1ca7f229e99a97e3b2ce34fee749c3ad55)
chore(algebraic_topology/simplex_category): removed ulift ([#13183](https://github.com/leanprover-community/mathlib/pull/#13183))

### [2022-04-05T19:36:20+00:00](https://github.com/leanprover-community/mathlib/commit/960abb540496deff1c2ead1c3c1ef7c109321052)
chore(algebra/monoid_algebra/grading): fix slow elaboration ([#13169](https://github.com/leanprover-community/mathlib/pull/#13169))

There were a couple of lemmas in this file taking multiple seconds to elaborate.  Apart from `squeeze_dsimps`, the main change in this PR is to help the elaborator unfold certain definitions (that it originally did unfold, but only after multiple seconds of trying to unfold other things), by replacing proofs with `by simpa only [some_unfolding_lemma] using the_original_proof`.

The main alternative I discovered for the `simpa` changes was to strategically mark certain definitions irreducible. Those definitions needed to be unfolded in other places in this file, and it's less obviously connected to the source of the slowness: we might keep around the `local attribute [irreducible]` lines even if it's not needed after a refactor.

Zulip thread: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Slow.20defeqs.20in.20.60algebra.2Fmonoid_algebra.2Fgrading.2Elean.60

### [2022-04-05T19:36:19+00:00](https://github.com/leanprover-community/mathlib/commit/d34cbcf6c94953e965448c933cd9cc485115ebbd)
refactor(algebra/homology, category_theory/*): declassify exactness ([#13153](https://github.com/leanprover-community/mathlib/pull/#13153))

Having  `exact` be a class was very often somewhat inconvenient, so many lemmas took it as a normal argument while many others had it as a typeclass argument. This PR removes this inconsistency by downgrading `exact` to a structure. We lose very little by doing this, and using typeclass inference as a Prolog-like "automatic theorem prover" is rarely a good idea anyway.

### [2022-04-05T19:36:18+00:00](https://github.com/leanprover-community/mathlib/commit/427aae3a81c812c46ed9cdba2f922f2257e6de0d)
chore(algebra/*): generalisation linter (replacing ring with non_assoc_ring) ([#13106](https://github.com/leanprover-community/mathlib/pull/#13106))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-05T19:00:50+00:00](https://github.com/leanprover-community/mathlib/commit/e510b204eee841e05849d7243e1e82ef0b9706a9)
feat(group_theory/index): Index of intersection ([#13186](https://github.com/leanprover-community/mathlib/pull/#13186))

This PR adds `relindex_inf_le` and `index_inf_le`, which are companion lemmas to `relindex_inf_ne_zero` and `index_inf_ne_zero`.

### [2022-04-05T16:22:19+00:00](https://github.com/leanprover-community/mathlib/commit/cf131e1e4db72290f9377b1a904d38ff1d31fcbf)
feat(data/complex/exponential): add `real.cos_abs` ([#13177](https://github.com/leanprover-community/mathlib/pull/#13177))

### [2022-04-05T16:22:18+00:00](https://github.com/leanprover-community/mathlib/commit/b011b0e81758b564285c711bdae8af81c0adc892)
feat(ring_theory/unique_factorization_domain): The only divisors of prime powers are prime powers. ([#12799](https://github.com/leanprover-community/mathlib/pull/#12799))

The only divisors of prime powers are prime powers in the associates monoid of an UFD.

### [2022-04-05T14:51:10+00:00](https://github.com/leanprover-community/mathlib/commit/fd1861cfb7f85ef01d26e8f478978b4428000ad8)
fix(tactic/ring): `ring_nf` should descend into subexpressions ([#12430](https://github.com/leanprover-community/mathlib/pull/#12430))

Since the lambda passed to `ext_simp_core` was returning `ff`, this means the simplifier didn't descend into subexpressions, so `ring_nf` only tried to use the Horner normal form if the head symbol of the goal/hypothesis was `+`, `*`, `-` or `^`. In particular, since there are no such operations on `Sort`, `ring_nf` was exactly equivalent to `simp only [horner.equations._eqn_1, add_zero, one_mul, pow_one, neg_mul, add_neg_eq_sub]`. Toggling the return value means `ring_nf` will try to simplify all subexpressions, including the left hand side and right hand side of an equality.

@alexjbest discovered the MWE included in `test/ring.lean` while trying to use `ring_nf` to simplify a complicated expression.



Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2022-04-05T12:54:02+00:00](https://github.com/leanprover-community/mathlib/commit/91dd3b1914c615e5ce4446d01cfad92d8c7a591d)
chore(ring_theory/integral_domain): dedup, tidy ([#13180](https://github.com/leanprover-community/mathlib/pull/#13180))

### [2022-04-05T12:54:00+00:00](https://github.com/leanprover-community/mathlib/commit/da132ecfa861185bd0a8e090ac48cbe07634ac90)
feat(*): define subobject classes from submonoid up to subfield ([#11750](https://github.com/leanprover-community/mathlib/pull/#11750))

The next part of my big refactoring plans: subobject classes in the same style as morphism classes.

This PR introduces the following subclasses of `set_like`:
 * `one_mem_class`, `zero_mem_class`, `mul_mem_class`, `add_mem_class`, `inv_mem_class`, `neg_mem_class`
 * `submonoid_class`, `add_submonoid_class`
 * `subgroup_class`, `add_subgroup_class`
 * `subsemiring_class`, `subring_class`, `subfield_class`

The main purpose of this refactor is that we can replace the wide variety of lemmas like `{add_submonoid,add_subgroup,subring,subfield,submodule,subwhatever}.{prod,sum}_mem` with a single `prod_mem` lemma that is generic over all types `B` that extend `submonoid`:

```lean
@[to_additive]
lemma prod_mem {M : Type*} [comm_monoid M] [set_like B M] [submonoid_class B M]
  {ι : Type*} {t : finset ι} {f : ι → M} (h : ∀c ∈ t, f c ∈ S) : ∏ c in t, f c ∈ S
```

## API changes

 * When you extend a `struct subobject`, make sure to create a corresponding `subobject_class` instance.

## Upcoming PRs
This PR splits out the first part of [#11545](https://github.com/leanprover-community/mathlib/pull/#11545), namely defining the subobject classes. I am planning these follow-up PRs for further parts of [#11545](https://github.com/leanprover-community/mathlib/pull/#11545):

 - [ ] make the subobject consistently implicit in `{add,mul}_mem` [#11758](https://github.com/leanprover-community/mathlib/pull/#11758)
 - [ ] remove duplicate instances like `subgroup.to_group` (replaced by the `subgroup_class.to_subgroup` instances that are added by this PR) [#11759](https://github.com/leanprover-community/mathlib/pull/#11759)
 - [ ] further deduplication such as `finsupp_sum_mem`

## Subclassing `set_like`

Contrary to mathlib's typical subclass pattern, we don't extend `set_like`, but take a `set_like` instance parameter:
```lean
class one_mem_class (S : Type*) (M : out_param $ Type*) [has_one M] [set_like S M] :=
(one_mem : ∀ (s : S), (1 : M) ∈ s)
```
instead of:
```lean
class one_mem_class (S : Type*) (M : out_param $ Type*) [has_one M]
  extends set_like S M :=
(one_mem : ∀ (s : S), (1 : M) ∈ s)
```
The main reason is that this avoids some big defeq checks when typechecking e.g. `x * y : s`, where `s : S` and `[comm_group G] [subgroup_class S G]`. Namely, the type `coe_sort s` could be given by `subgroup_class → @@submonoid_class _ _ (comm_group.to_group.to_monoid) → set_like → has_coe_to_sort` or by `subgroup_class → @@submonoid_class _ _ (comm_group.to_comm_monoid.to_monoid) → set_like → has_coe_to_sort`. When checking that `has_mul` on the first type is the same as `has_mul` on the second type, those two inheritance paths are unified many times over ([sometimes exponentially many](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Why.20is.20.60int.2Ecast_abs.60.20so.20slow.3F/near/266945077)). So it's important to keep the size of types small, and therefore we avoid `extends`-based inheritance.

## Defeq fixes

Adding instances like `subgroup_class.to_group` means that there are now two (defeq) group instances for `subgroup`. This makes some code more fragile, until we can replace `subgroup.to_group` with its more generic form in a follow-up PR. Especially when taking subgroups of subgroups I needed to help the elaborator in a few places. These should be minimally invasive for other uses of the code.

## Timeout fixes

Some of the leaf files started timing out, so I made a couple of fixes. Generally these can be classed as:
 * `squeeze_simps`
 * Give inheritance `subX_class S M` → `X s` (where `s : S`) a lower prority than `Y s` → `X s` so that `subY_class S M` → `Y s` → `X s` is preferred over `subY_class S M` → `subX_class S M` → `X s`. This addresses slow unifications when `x : s`, `s` is a submonoid of `t`, which is itself a subgroup of `G`: existing code expects to go `subgroup → group → monoid`, which got changed to `subgroup_class → submonoid_class → monoid`; when this kind of unification issue appears in your type this results in slow unification. By tweaking the priorities, we help the elaborator find our preferred instance, avoiding the big defeq checks. (The real fix should of course be to fix the unifier so it doesn't become exponential in these kinds of cases.)
 * Split a long proof with duplication into smaller parts. This was basically my last resort.


I decided to bump the limit for the `fails_quickly` linter for `measure_theory.Lp_meas.complete_space`, which apparently just barely goes over this limit now. The time difference was about 10%-20% for that specific instance.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>
Co-authored-by: Riccardo Brasca <riccardo.brasca@gmail.com>

### [2022-04-05T11:06:01+00:00](https://github.com/leanprover-community/mathlib/commit/220f71ba506c8958c9b41bd82226b3d06b0991e8)
refactor(data/polynomial/basic): overhaul all the misnamed `to_finsupp` lemmas ([#13139](https://github.com/leanprover-community/mathlib/pull/#13139))

`zero_to_finsupp` was the statement `of_finsupp 0 = 0`, which doesn't match the name at all.

This change:

* Renames all those lemmas to `of_finsupp_<foo>`
* Changes the direction of `add_to_finsupp` to be `of_finsupp_add`, so the statement is now `of_finsupp (a + b) = _`
* Adds the missing `to_finsupp_<foo>` lemmas
* Uses the new lemmas to golf the semiring and ring instances

The renames include:

* `zero_to_finsupp` → `of_finsupp_zero`
* `one_to_finsupp` → `of_finsupp_one`
* `add_to_finsupp` → `of_finsupp_add` (direction reversed)
* `neg_to_finsupp` → `of_finsupp_neg` (direction reversed)
* `mul_to_finsupp` → `of_finsupp_mul` (direction reversed)
* `smul_to_finsupp` → `of_finsupp_smul` (direction reversed)
* `sum_to_finsupp` → `of_finsupp_sum` (direction reversed)
* `to_finsupp_iso_monomial` → `to_finsupp_monomial`
* `to_finsupp_iso_symm_single` → `of_finsupp_single`
* `eval₂_to_finsupp_eq_lift_nc` → `eval₂_of_finsupp`

The new lemmas include:

* `of_finsupp_sub`
* `of_finsupp_pow`
* `of_finsupp_erase`
* `of_finsupp_algebra_map`
* `of_finsupp_eq_zero`
* `of_finsupp_eq_one`
* `to_finsupp_zero`
* `to_finsupp_one`
* `to_finsupp_add`
* `to_finsupp_neg`
* `to_finsupp_sub`
* `to_finsupp_mul`
* `to_finsupp_pow`
* `to_finsupp_erase`
* `to_finsupp_algebra_map`
* `to_finsupp_eq_zero`
* `to_finsupp_eq_one`
* `to_finsupp_C`

Note that by marking things like `support` and `coeff` as `@[simp]`, they behave as if they were `support_of_finsupp` or `coeff_of_finsupp` lemma. By making `coeff` pattern match fewer arguments, we encourage it to apply more keenly.
Neither lemma will fire unless our expression contains `polynomial.of_finsupp`.

### [2022-04-05T11:06:00+00:00](https://github.com/leanprover-community/mathlib/commit/c108ed473ee0a4463ad08379151aeb87b1666f26)
feat(topology/algebra): add several lemmas ([#13135](https://github.com/leanprover-community/mathlib/pull/#13135))

* add `closure_smul`, `interior_smul`, and `closure_smul₀`;
* add `is_open.mul_closure` and `is_open.closure_mul`.

### [2022-04-05T11:05:59+00:00](https://github.com/leanprover-community/mathlib/commit/bb4099b44a312a40f66c6e40c37b7c7cad64984c)
feat(analysis/normed/normed_field): add abs_le_floor_nnreal_iff ([#13130](https://github.com/leanprover-community/mathlib/pull/#13130))

From LTE.

### [2022-04-05T11:05:57+00:00](https://github.com/leanprover-community/mathlib/commit/c7626b7dfe2bf35b48cf43178a32d74f5dbf8b3f)
feat(analysis/calculus/fderiv_analytic): an analytic function is smooth ([#13127](https://github.com/leanprover-community/mathlib/pull/#13127))

This basic fact was missing from the library, but all the nontrivial maths were already there, we are just adding the necessary glue.

Also, replace `ac_refl` by `ring` in several proofs (to go down from 30s to 4s in one proof, for instance). I wonder if we should ban `ac_refl` from mathlib currently.

### [2022-04-05T11:05:56+00:00](https://github.com/leanprover-community/mathlib/commit/cbbaef5a5e165cba97a7e395579b326693db7ef3)
chore(algebra/field_power): generalisation linter ([#13107](https://github.com/leanprover-community/mathlib/pull/#13107))

@alexjbest, this one is slightly more interesting, as the generalisation linter detected that two lemmas were stated incorrectly!




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-05T11:05:55+00:00](https://github.com/leanprover-community/mathlib/commit/225d1ce374177b3af68146a80fcd6299fcacc6b8)
refactor(combinatorics/hall/finite): small simplifications and readability improvements ([#13091](https://github.com/leanprover-community/mathlib/pull/#13091))

### [2022-04-05T09:11:51+00:00](https://github.com/leanprover-community/mathlib/commit/9ff42fdd0c67b40886f777374da53d733e587ebf)
feat(topology/fiber_bundle): lemmas about `e.symm.trans e'` ([#13168](https://github.com/leanprover-community/mathlib/pull/#13168))

### [2022-04-05T09:11:50+00:00](https://github.com/leanprover-community/mathlib/commit/01a424baadabf60cf973d96cb8b0df2224f9ae04)
feat(analysis): continuous_linear_map.prod_mapL ([#13165](https://github.com/leanprover-community/mathlib/pull/#13165))

From the sphere eversion project,

Co-authored by Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2022-04-05T09:11:49+00:00](https://github.com/leanprover-community/mathlib/commit/0e26022f3587920d76f88717792b60c2cbfaab48)
feat(group_theory/complement): Existence of transversals ([#13016](https://github.com/leanprover-community/mathlib/pull/#13016))

This PR constructs transversals containing a specified element. This will be useful for Schreier's lemma (which requires a transversal containing the identity element).

### [2022-04-05T09:11:48+00:00](https://github.com/leanprover-community/mathlib/commit/63feb1b647b807a07bda7f02d3772b4397633a9c)
feat(group_theory/index): Add `relindex_le_of_le_left` and `relindex_le_of_le_right` ([#13015](https://github.com/leanprover-community/mathlib/pull/#13015))

This PR adds `relindex_le_of_le_left` and `relindex_le_of_le_right`, which are companion lemmas to `relindex_eq_zero_of_le_left` and `relindex_eq_zero_of_le_right`.

### [2022-04-05T09:11:47+00:00](https://github.com/leanprover-community/mathlib/commit/ea1917b6f6cd54f12a4b068169f304981ae58a55)
feat(algebra/group/to_additive + algebra/regular/basic): add to_additive for `is_regular` ([#12930](https://github.com/leanprover-community/mathlib/pull/#12930))

This PR add the `to_additive` attribute to most lemmas in the file `algebra.regular.basic`.

I also added `to_additive` support for this: `to_additive` converts
*  `is_regular` to `is_add_regular`;
*  `is_left_regular` to `is_add_left_regular`;
*  `is_right_regular` to `is_add_right_regular`.

~~Currently, `to_additive` converts `regular` to `add_regular`.  This means that, for instance, `is_left_regular` becomes `is_left_add_regular`.~~
~~I have a slight preference for `is_add_left_regular/is_add_right_regular`, but I am not able to achieve this automatically.~~

~~EDIT: actually, the command~~
```
git ls-files | xargs grep -A1 "to\_additive" | grep -B1 regular
```
~~reveals more name changed by `to_additive` that require more thought.~~

### [2022-04-05T08:08:57+00:00](https://github.com/leanprover-community/mathlib/commit/21c48e1fee160fa2d3d83796b5620978c9f58f04)
doc(topology/algebra/*): explanation of relation between `uniform_group` and `topological_group` ([#13151](https://github.com/leanprover-community/mathlib/pull/#13151))

Adding some comments on how to use `uniform_group` and `topological_group`.

### [2022-04-05T05:20:37+00:00](https://github.com/leanprover-community/mathlib/commit/429c6e35c99d11819714a80bc3cb74d0356d241e)
chore(topology/algebra/infinite_sum): weaken from equiv to surjective ([#13164](https://github.com/leanprover-community/mathlib/pull/#13164))

### [2022-04-05T05:20:36+00:00](https://github.com/leanprover-community/mathlib/commit/4c83474d8a3a8e5d270c0a4376340b9ae0cf466e)
chore(model_theory/basic): Fix namespace on notation for first-order maps ([#13145](https://github.com/leanprover-community/mathlib/pull/#13145))

Removes projection notation from the definition of notation for first-order maps

### [2022-04-05T03:53:18+00:00](https://github.com/leanprover-community/mathlib/commit/41cd2f825aa072d47d9b8672823f27da87c1b214)
chore(data/fin/tuple/basic): lemmas about `cons` ([#13027](https://github.com/leanprover-community/mathlib/pull/#13027))

### [2022-04-04T23:36:07+00:00](https://github.com/leanprover-community/mathlib/commit/4eee8bc3c97430855be47509223195ab136e744a)
chore(order/complete_lattice): Generalize `⨆`/`⨅` lemmas to dependent families ([#13154](https://github.com/leanprover-community/mathlib/pull/#13154))

The "bounded supremum" and "bounded infimum" are both instances of nested `⨆`/`⨅`. But they only apply when the inner one runs over a predicate `p : ι → Prop`, and the function couldn't depend on `p`. This generalizes to `κ : ι → Sort*` and allows dependence on `κ i`.

The lemmas are renamed from `bsupr`/`binfi` to `supr₂`/`infi₂` to show that they are more general.

Some lemmas were missing between `⨆` and `⨅` or between `⨆`/`⨅` and nested `⨆`/`⨅`, so I'm adding them as well.

Renames

### [2022-04-04T20:06:50+00:00](https://github.com/leanprover-community/mathlib/commit/bae79d04c30a16d9212b8629e6a3da6f09230d7c)
chore(number_theory/cyclotomic/discriminant): golf `repr_pow_is_integral` a little ([#13167](https://github.com/leanprover-community/mathlib/pull/#13167))

Using nice mathlib tactics instead of doing boilerplate tasks by hand to reduce the verbosity.

### [2022-04-04T20:06:48+00:00](https://github.com/leanprover-community/mathlib/commit/a925d1ddee74b89ba0081d1c2957bcf75095b6c0)
chore(topology/algebra/module/basic): add continuous_linear_map.copy ([#13166](https://github.com/leanprover-community/mathlib/pull/#13166))

As suggested by the fun_like docs

### [2022-04-04T18:23:21+00:00](https://github.com/leanprover-community/mathlib/commit/05e2fc02625aad4ce458ca3b104a8599cce9ae17)
chore(order/*): generalisation linter ([#13105](https://github.com/leanprover-community/mathlib/pull/#13105))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-04T16:21:07+00:00](https://github.com/leanprover-community/mathlib/commit/fe21f5def4efb38467704b653d2b3f334b48945e)
feat(group_theory/torsion): define torsion subgroups and show they're torsion ([#12769](https://github.com/leanprover-community/mathlib/pull/#12769))

Also tidy up some linter errors and docstring for the module.

### [2022-04-04T16:21:06+00:00](https://github.com/leanprover-community/mathlib/commit/21082848a3947ff9be08a8ae178c36622cc8982e)
refactor(order/succ_order/basic): Use `is_min`/`is_max` ([#12597](https://github.com/leanprover-community/mathlib/pull/#12597))

Reformulate the `succ a ≤ a` and `a ≤ pred a` conditions to use `is_max` and `is_min`. This simplifies the proofs.

Change namespaces from `succ_order` and `pred_order` to `order`.

Lemma renames

### [2022-04-04T14:28:18+00:00](https://github.com/leanprover-community/mathlib/commit/f55d3524515e7e8482718a064c6b60cb87455822)
feat(order/filter/n_ary): Binary and ternary maps of filters ([#13062](https://github.com/leanprover-community/mathlib/pull/#13062))

Define `filter.map₂` and `filter.map₃`, the binary and ternary maps of filters.

### [2022-04-04T09:32:39+00:00](https://github.com/leanprover-community/mathlib/commit/b189be76bb6b8b36913ea04ec1c135f1786c7e1f)
feat(algebra/big_operators): add `commute.*_sum_{left,right}` lemmas ([#13035](https://github.com/leanprover-community/mathlib/pull/#13035))

This moves the existing `prod_commute` lemmas into the `commute` namespace for discoverabiliy, and adds the swapped variants.

This also fixes an issue where lemmas about `add_commute` were misnamed using `commute`.

### [2022-04-04T08:56:24+00:00](https://github.com/leanprover-community/mathlib/commit/19448a93523eb8d680494e5c5dd0dfbc5db2c7f0)
refactor(group_theory/schur_zassenhaus): Some golfing ([#13017](https://github.com/leanprover-community/mathlib/pull/#13017))

This PR uses `mem_left_transversals.to_equiv` to golf the start of `schur_zassenhaus.lean`.

### [2022-04-04T08:23:22+00:00](https://github.com/leanprover-community/mathlib/commit/0cb9407ae1e2fe997f657447838cd90d5979282b)
chore(measure_theory/function/locally_integrable): fix typo ([#13160](https://github.com/leanprover-community/mathlib/pull/#13160))

### [2022-04-04T06:48:14+00:00](https://github.com/leanprover-community/mathlib/commit/6dde651a7256b54c985c1ca9de35048b92b28b73)
feat(algebra/quaternion): Cardinality of quaternion algebras ([#12891](https://github.com/leanprover-community/mathlib/pull/#12891))

### [2022-04-04T06:15:27+00:00](https://github.com/leanprover-community/mathlib/commit/8cb151f7c20e55f6ab797d420c85ec077692b655)
feat(number_theory/cyclotomic/discriminant): add discr_zeta_eq_discr_zeta_sub_one ([#12710](https://github.com/leanprover-community/mathlib/pull/#12710))

We add `discr_zeta_eq_discr_zeta_sub_one`: the discriminant of the power basis given by a primitive root of unity `ζ` is the same as the
discriminant of the power basis given by `ζ - 1`.

from flt-regular

### [2022-04-03T17:52:03+00:00](https://github.com/leanprover-community/mathlib/commit/61e18ae185a9d8378318f1a08fc201a3040ee6ce)
fix(data/polynomial/basic): op_ring_equiv docstring ([#13132](https://github.com/leanprover-community/mathlib/pull/#13132))

### [2022-04-03T16:42:11+00:00](https://github.com/leanprover-community/mathlib/commit/36e1cdf8eaf740026150edfab2c27d226eb4809d)
feat(topology/uniform_space/basic): constructing a `uniform_space.core` from a filter basis for the uniformity ([#13065](https://github.com/leanprover-community/mathlib/pull/#13065))

### [2022-04-03T11:32:25+00:00](https://github.com/leanprover-community/mathlib/commit/12128187f1905ff2a5a2de1d60d788728822c9d1)
feat(category_theory/abelian): transferring "abelian-ness" across a functor ([#13059](https://github.com/leanprover-community/mathlib/pull/#13059))

If `C` is an additive category, `D` is an abelian category,
we have `F : C ⥤ D` `G : D ⥤ C` (both preserving zero morphisms),
`G` is left exact (that is, preserves finite limits),
and further we have `adj : G ⊣ F` and `i : F ⋙ G ≅ 𝟭 C`,
then `C` is also abelian.

See https://stacks.math.columbia.edu/tag/03A3



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Markus Himmel <markus@himmel-villmar.de>

### [2022-04-03T09:48:57+00:00](https://github.com/leanprover-community/mathlib/commit/6e26cff92c72d926fb56112a423400a4b76cbc87)
feat(analysis/special_functions): add the Gamma function ([#12917](https://github.com/leanprover-community/mathlib/pull/#12917))

### [2022-04-03T06:44:02+00:00](https://github.com/leanprover-community/mathlib/commit/6e5ca7d0097313e59f7533a42e3ea5197484c775)
chore(*): Bump to Lean 3.42.1 ([#13146](https://github.com/leanprover-community/mathlib/pull/#13146))

### [2022-04-03T06:44:01+00:00](https://github.com/leanprover-community/mathlib/commit/d6731a48519b45874ae617eae2d901fef4449334)
docs(data/polynomial/basic): Remove commutative from doc-module ([#13144](https://github.com/leanprover-community/mathlib/pull/#13144))

### [2022-04-03T04:50:50+00:00](https://github.com/leanprover-community/mathlib/commit/4f14d4d4fd1a0667c12e3092872ccafdf96ed4fc)
chore(topology/vector_bundle): split long proof ([#13142](https://github.com/leanprover-community/mathlib/pull/#13142))

The construction of the direct sum of two vector bundles is on the verge of timing out, and an upcoming refactor will push it over the edge.  Split it pre-emptively.

### [2022-04-03T04:50:49+00:00](https://github.com/leanprover-community/mathlib/commit/410e3d0efc55fe88c80226a9c314c13d04ecbb5d)
feat(logic/small, model_theory/*): Smallness of vectors, lists, terms, and substructures ([#13123](https://github.com/leanprover-community/mathlib/pull/#13123))

Provides instances of `small` on vectors, lists, terms, and `substructure.closure`.

### [2022-04-03T04:50:48+00:00](https://github.com/leanprover-community/mathlib/commit/2d22b5d378cbfbbdd0f6f3753a726b0da1596c78)
chore(algebra/*): generalisation linter ([#13109](https://github.com/leanprover-community/mathlib/pull/#13109))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-03T04:50:47+00:00](https://github.com/leanprover-community/mathlib/commit/d33ea7b221a251f23c557c8c48ffb0b27a8e079d)
chore(ring_theory/polynomial/pochhammer): make semiring implicit in a lemma that I just moved ([#13077](https://github.com/leanprover-community/mathlib/pull/#13077))

Moving lemma `pochhammer_succ_eval` to reduce typeclass assumptions ([#13024](https://github.com/leanprover-community/mathlib/pull/#13024)), the `semiring` became accidentally explicit.  Since one of the explicit arguments of the lemma is a term in the semiring, I changed the `semiring` to being implicit.

The neighbouring lemmas do not involve terms in their respective semiring, which is why the semiring is explicit throughout the section.

### [2022-04-03T04:50:46+00:00](https://github.com/leanprover-community/mathlib/commit/955e95ad185ffe2d64bc7a2cd880ffe2914a1490)
feat(logic/function/basic): add some more API for `injective2` ([#13074](https://github.com/leanprover-community/mathlib/pull/#13074))

Note that the new `.left` and `.right` lemmas are weaker than the original ones, but the original lemmas were pretty much useless anyway, as `hf.left h` was the same as `(hf h).left`.

### [2022-04-03T03:07:24+00:00](https://github.com/leanprover-community/mathlib/commit/ef7298d4f80fd83daa6edfcd304d71f90070130c)
chore(data/nat/gcd): move nat.coprime.mul_add_mul_ne_mul ([#13022](https://github.com/leanprover-community/mathlib/pull/#13022))

I'm not sure if it will be useful elsewhere, but this seems like a better place for it anyway.

### [2022-04-03T02:04:00+00:00](https://github.com/leanprover-community/mathlib/commit/e1eb0bd945a198f24fefadd6094ffd0f27c59510)
feat(algebra/algebra/unitization): add star structure for the unitization of a non-unital algebra ([#13120](https://github.com/leanprover-community/mathlib/pull/#13120))

The unitization of an algebra has a natural star structure when the underlying scalar ring and non-unital algebra have suitably interacting star structures.



Co-authored-by: Frédéric Dupuis <dupuisf@iro.umontreal.ca>

### [2022-04-03T00:36:47+00:00](https://github.com/leanprover-community/mathlib/commit/e41208d80dcb8ee8ea1342c7cbcf1cd073cdd9d8)
feat(category_theory/monoidal): define monoidal structures on cartesian products of monoidal categories, (lax) monoidal functors and monoidal natural transformations ([#13033](https://github.com/leanprover-community/mathlib/pull/#13033))

This PR contains (fairly straightforward) definitions / proofs of the following facts:
- Cartesian product of monoidal categories is a monoidal category.
- Cartesian product of (lax) monoidal functors is a (lax) monoidal functor.
- Cartesian product of monoidal natural transformations is a monoidal natural transformation.

These are prerequisites to defining a monoidal category structure on the category of monoids in a braided monoidal category (with the approach that I've chosen).  In particular, the first bullet point above is a prerequisite to endowing the tensor product functor, viewed as a functor from `C × C` to `C`, where `C` is a braided monoidal category, with a strength that turns it into a monoidal functor (stacked  PR).

This fits as follows into the general strategy for defining a monoidal category structure on the category of monoids in a braided monoidal category `C`, at least conceptually:
first, define a monoidal category structure on the category of lax monoidal functors into `C`, and then transport this structure to the category `Mon_ C` of monoids along the equivalence between `Mon_ C` and the category `lax_monoid_functor (discrete punit) C`.  All, not necessarily lax monoidal functors into `C` form a monoidal category with "pointwise" tensor product.  The tensor product of two lax monoidal functors equals the composition of their cartesian product, which is lax monoidal, with the tensor product on`C`, which is monoidal if `C` is braided.  This gives a way to define a tensor product of two lax monoidal functors.  The details still need to be fleshed out.

### [2022-04-02T23:29:08+00:00](https://github.com/leanprover-community/mathlib/commit/bb5e598641d9657149b7dc7e3f7346414221e3e7)
feat(set_theory/cardinal_ordinal): Add `simp` lemmas for `aleph` ([#13056](https://github.com/leanprover-community/mathlib/pull/#13056))

### [2022-04-02T22:23:30+00:00](https://github.com/leanprover-community/mathlib/commit/d4b40c3589738912d47f95c7936f688ecc4142df)
feat(measure_theory/measure/haar_lebesgue): measure of an affine subspace is zero ([#13137](https://github.com/leanprover-community/mathlib/pull/#13137))

* Additive Haar measure of an affine subspace of a finite dimensional
real vector space is zero.

* Additive Haar measure of the image of a set `s` under `homothety x r` is
  equal to `|r ^ d| * μ s`.

### [2022-04-02T22:23:29+00:00](https://github.com/leanprover-community/mathlib/commit/7617942ce93f96404be02034183aad338c6dc291)
feat(order/filter/basic): add `filter.eventually_{eq,le}.prod_map` ([#13103](https://github.com/leanprover-community/mathlib/pull/#13103))

### [2022-04-02T19:43:29+00:00](https://github.com/leanprover-community/mathlib/commit/a29bd58da838ef7ac7edeb6e6ed0043155a5acee)
feat(algebra/regular/basic): add lemma commute.is_regular_iff ([#13104](https://github.com/leanprover-community/mathlib/pull/#13104))

This lemma shows that an element that commutes with every element is regular if and only if it is left regular.

### [2022-04-02T16:29:33+00:00](https://github.com/leanprover-community/mathlib/commit/8e476fa4c303c1df363a71b2ce28d9292a4e4af5)
chore(topology/vector_bundle): use continuous-linear rather than linear in core construction ([#13053](https://github.com/leanprover-community/mathlib/pull/#13053))

The `vector_bundle_core` construction builds a vector bundle from a cocycle, the data of which are an open cover and a choice of transition function between any two elements of the cover.  Currently, for base `B` and model fibre `F`, the transition function has type `ι → ι → B → (F →ₗ[R] F)`.

This PR changes it to type `ι → ι → B → (F →L[R] F)`.  This is no loss of generality since there already were other conditions which forced the transition function to be continuous-linear on each fibre.  Of course, it is a potential loss of convenience since the proof obligation for continuity now occurs upfront.

The change is needed because in the vector bundle refactor to come, the further condition will be imposed that each transition function `B → (F →L[R] F)` is continuous; stating this requires a topology on `F →L[R] F`.

### [2022-04-02T15:55:20+00:00](https://github.com/leanprover-community/mathlib/commit/cf6f27ee91054ef0a3f7d1d7ec1acda4e767db05)
refactor(topology/{fiber_bundle, vector_bundle}): make trivializations data rather than an existential ([#13052](https://github.com/leanprover-community/mathlib/pull/#13052))

Previously, the construction `topological_vector_bundle` was a mixin requiring the _existence_ of a suitable trivialization at each point.

Change this to a class with data: a choice of trivialization at each point.  This has no effect on the mathematics, but it is necessary for the forthcoming refactor in which a further condition is imposed on the mutual compatibility of the trivializations.

Furthermore, attach to `topological_vector_bundle` and to two other constructions `topological_fiber_prebundle`, `topological_vector_prebundle` a further piece of data: an atlas of "good" trivializations.  This is not really mathematically necessary, since you could always take the atlas of "good" trivializations to be simply the set of canonical trivializations at each point in the manifold.  But sometimes one naturally has this larger "good" class and it's convenient to be able to access it.  The `charted_space` definition in the manifolds library does something similar.

### [2022-04-02T13:47:28+00:00](https://github.com/leanprover-community/mathlib/commit/3164b1ad370916de327a5020476672d9d5ad3061)
feat(probability/independence): two lemmas on indep_fun ([#13126](https://github.com/leanprover-community/mathlib/pull/#13126))

These two lemmas show that `indep_fun` is preserved under composition by measurable maps and under a.e. equality.

### [2022-04-02T13:47:26+00:00](https://github.com/leanprover-community/mathlib/commit/1d5b99b262c0e89a6842f47384160d828b44fcea)
feat(group_theory/free_product): add (m)range_eq_supr ([#12956](https://github.com/leanprover-community/mathlib/pull/#12956))

and lemmas leading to it as inspired by the corresponding lemmas from
`free_groups.lean`.

As suggested by @ocfnash, polish the free group lemmas a bit as well.

### [2022-04-02T11:56:22+00:00](https://github.com/leanprover-community/mathlib/commit/7df59077125c0d8e9fba5aa227ae2462fc2f51d1)
chore(algebra/order/ring): generalisation linter ([#13096](https://github.com/leanprover-community/mathlib/pull/#13096))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-02T01:59:06+00:00](https://github.com/leanprover-community/mathlib/commit/607f4f8a3ea94d91daabea89be3c029ad09d09a5)
feat(model_theory/semantics): A simp lemma for `Theory.model` ([#13117](https://github.com/leanprover-community/mathlib/pull/#13117))

Defines `Theory.model_iff` to make it easier to show when a structure models a theory.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2022-04-01T22:20:38+00:00](https://github.com/leanprover-community/mathlib/commit/6dad5f8ced3d73226d58f279c49f9fbc568fa5a3)
feat(topology/bornology/basic): alternate way of defining a bornology by its bounded set ([#13064](https://github.com/leanprover-community/mathlib/pull/#13064))

More precisely, this defines an alternative to https://leanprover-community.github.io/mathlib_docs/topology/bornology/basic.html#bornology.of_bounded (which is renamed `bornology.of_bounded'`) which expresses the covering condition as containing the singletons, and factors the old version trough it to have a simpler proof.

Note : I chose to add a prime to the old constructor because it's now defined in terms of the new one, so defeq works better this way (i.e lemma about the new constructor can be used whenever the old one is used).

### [2022-04-01T22:20:36+00:00](https://github.com/leanprover-community/mathlib/commit/6cf5dc53a4ba9087ed62bf744f616f7387dd58c9)
feat(topology/support): add lemma `locally_finite.exists_finset_nhd_mul_support_subset` ([#13006](https://github.com/leanprover-community/mathlib/pull/#13006))

When using a partition of unity to glue together a family of functions, this lemma allows
us to pass to a finite family in the neighbourhood of any point.

Formalized as part of the Sphere Eversion project.

### [2022-04-01T20:35:06+00:00](https://github.com/leanprover-community/mathlib/commit/912f195f7b26dec57eb5a8fdce987886576213d3)
feat(dynamics/periodic_pts): Lemma about periodic point from periodic point of iterate ([#12940](https://github.com/leanprover-community/mathlib/pull/#12940))

### [2022-04-01T19:21:53+00:00](https://github.com/leanprover-community/mathlib/commit/196a48c81d2bf045a379d53a50e9c03cb481a360)
feat(set_theory/ordinal_arithmetic): Coefficients of Cantor Normal Form ([#12681](https://github.com/leanprover-community/mathlib/pull/#12681))

We prove all coefficients of the base-b expansion of an ordinal are less than `b`. We also tweak the parameters of various other theorems.

### [2022-04-01T17:02:37+00:00](https://github.com/leanprover-community/mathlib/commit/a3c753c47eba01e0205651496711e7b3fe6623d2)
feat(topology/[subset_properties, separation]): bornologies for filter.co[closed_]compact ([#12927](https://github.com/leanprover-community/mathlib/pull/#12927))

### [2022-04-01T16:30:59+00:00](https://github.com/leanprover-community/mathlib/commit/e8ef74492cc345f190626ac00399da5f61ebe6b4)
docs(probability/martingale): missing word ([#13113](https://github.com/leanprover-community/mathlib/pull/#13113))

### [2022-04-01T16:30:58+00:00](https://github.com/leanprover-community/mathlib/commit/b365371707ad76201808214810937bd1459a5902)
feat(model_theory/syntax,semantics): Sentences for binary relation properties ([#13087](https://github.com/leanprover-community/mathlib/pull/#13087))

Defines sentences for basic properties of binary relations
Proves that realizing these sentences is equivalent to properties in the binary relation library

### [2022-04-01T12:39:38+00:00](https://github.com/leanprover-community/mathlib/commit/342a4b0a3a9c20652dd3c9b5b00e86eb6b1b5c57)
feat(data/polynomial/coeff): add `char_zero` instance on polynomials ([#13075](https://github.com/leanprover-community/mathlib/pull/#13075))

Besides adding the instance, I also added a warning on the difference between `char_zero R` and `char_p R 0` for general semirings.

An example showing the difference is in [#13080](https://github.com/leanprover-community/mathlib/pull/#13080).

[Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F)

### [2022-04-01T12:39:37+00:00](https://github.com/leanprover-community/mathlib/commit/89275df0556fd5e7445267c24c0f5f5ba41b103b)
feat(topology/algebra/uniform_group): add characterization of total boundedness ([#12808](https://github.com/leanprover-community/mathlib/pull/#12808))

The main result is `totally_bounded_iff_subset_finite_Union_nhds_one`.
We prove it for noncommutative groups, which involves taking opposites.

Add `uniform_group` instance for the opposite group.

Adds several helper lemmas for
* (co-)map of opposites applied to neighborhood filter
* filter basis of uniformity in a uniform group in terms of neighborhood basis at identity

Simplified proofs for `totally_bounded_of_forall_symm` and `totally_bounded.closure`.

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-04-01T10:46:51+00:00](https://github.com/leanprover-community/mathlib/commit/c61f7e884de6a899854b71f63bf1de8247ef6891)
chore(model_theory/elementary_maps): Fix Tarski-Vaught Test ([#13102](https://github.com/leanprover-community/mathlib/pull/#13102))

Fixes the assumption of the Tarski-Vaught test.

### [2022-04-01T10:46:50+00:00](https://github.com/leanprover-community/mathlib/commit/e6a0a2660fe271037e7e2d8ffe8c7cd089cd6f2a)
chore(algebra/order/*): generalisation linter ([#13098](https://github.com/leanprover-community/mathlib/pull/#13098))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-01T10:46:48+00:00](https://github.com/leanprover-community/mathlib/commit/8a51798c07dde9afffe6fa8678b491bc40b4a107)
chore(order/*): generalisation linter ([#13097](https://github.com/leanprover-community/mathlib/pull/#13097))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-01T10:46:47+00:00](https://github.com/leanprover-community/mathlib/commit/0e95cadcb6a5de907caffb2845dd3daa55fd6b1f)
chore(algebra/group_power/basic): generalisation linter ([#13095](https://github.com/leanprover-community/mathlib/pull/#13095))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-01T10:46:46+00:00](https://github.com/leanprover-community/mathlib/commit/6652766be6037c8f4fbfd2b67a1883fe5bd209e6)
chore(algebra/ring/basic): generalisation linter ([#13094](https://github.com/leanprover-community/mathlib/pull/#13094))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-01T10:46:45+00:00](https://github.com/leanprover-community/mathlib/commit/e326fe608e31966593d4dc10fb1dae2d090abb71)
feat(model_theory/basic,language_map): More about `language.mk₂` ([#13090](https://github.com/leanprover-community/mathlib/pull/#13090))

Provides instances on `language.mk₂`
Defines `first_order.language.Lhom.mk₂`, a constructor for maps from languages built with `language.mk₂`.

### [2022-04-01T08:58:07+00:00](https://github.com/leanprover-community/mathlib/commit/873f2685cd679468556e5daadccc452b5a559b6f)
chore(group_theory/group_action/*): generalisation linter ([#13100](https://github.com/leanprover-community/mathlib/pull/#13100))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-01T07:06:11+00:00](https://github.com/leanprover-community/mathlib/commit/3a0c0345f3059c2144d4e83090ac70d187678714)
chore(algebra/*): generalisation linter ([#13099](https://github.com/leanprover-community/mathlib/pull/#13099))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-04-01T03:39:04+00:00](https://github.com/leanprover-community/mathlib/commit/9728396edb0fba514fe2d1b5b326d108f2dc0f50)
chore(scripts): update nolints.txt ([#13101](https://github.com/leanprover-community/mathlib/pull/#13101))

I am happy to remove some nolints for you!

### [2022-03-31T23:56:26+00:00](https://github.com/leanprover-community/mathlib/commit/2b92d080bb7c7c69e0e357b73a1ecd1fc5035217)
feat(model_theory/elementary_maps): The Tarski-Vaught test ([#12919](https://github.com/leanprover-community/mathlib/pull/#12919))

Proves the Tarski-Vaught test for elementary embeddings and substructures.

### [2022-03-31T17:21:48+00:00](https://github.com/leanprover-community/mathlib/commit/de5038953210a6ffb013340c7bf82243be226f1c)
split(order/chain): Split off `order.zorn` ([#13060](https://github.com/leanprover-community/mathlib/pull/#13060))

Split `order.zorn` into two files, one about chains, the other one about Zorn's lemma.

### [2022-03-31T16:09:24+00:00](https://github.com/leanprover-community/mathlib/commit/13e08bf3458cc4b46273fabd087f28a50b680007)
feat(model_theory/*): Constructors for low-arity languages and structures ([#12960](https://github.com/leanprover-community/mathlib/pull/#12960))

Defines `first_order.language.mk₂` to make it easier to define a language with at-most-binary symbols.
Defines `first_order.language.Structure.mk₂` to make it easier to define a structure in a language defined with `first_order.language₂`.
Defines `first_order.language.functions.apply₁` and `first_order.language.functions.apply₂` to make it easier to construct terms using low-arity function symbols.
Defines `first_order.language.relations.formula₁` and `first_order.language.relations.formula₂` to make it easier to construct formulas using low-arity relation symbols.

### [2022-03-31T16:09:23+00:00](https://github.com/leanprover-community/mathlib/commit/f1ae620609496a37534c2ab3640b641d5be8b6f0)
feat(model_theory/bundled, satisfiability): Bundled models ([#12945](https://github.com/leanprover-community/mathlib/pull/#12945))

Defines `Theory.Model`, a type of nonempty bundled models of a particular theory.
Refactors satisfiability in terms of bundled models.

### [2022-03-31T15:26:34+00:00](https://github.com/leanprover-community/mathlib/commit/2861d4eba613217496c95cc55ce9e28dba1ba12c)
feat(combinatorics/simple_graph/connectivity): walk constructor patterns with explicit vertices ([#13078](https://github.com/leanprover-community/mathlib/pull/#13078))

This saves a couple underscores, letting you write `walk.cons' _ v _ h p` instead of `@walk.cons _ _ _ v _ h p` when you want that middle vertex in a pattern.

### [2022-03-31T14:15:57+00:00](https://github.com/leanprover-community/mathlib/commit/25ef4f0ff2cf735675b16c5decebc221e2af31ce)
feat(topology/algebra/matrix): more continuity lemmas for matrices ([#13009](https://github.com/leanprover-community/mathlib/pull/#13009))

This should cover all the definitions in `data/matrix/basic`, and also picks out a few notable definitions (`det`, `trace`, `adjugate`, `cramer`, `inv`) from other files.

### [2022-03-31T13:42:09+00:00](https://github.com/leanprover-community/mathlib/commit/0f6eec630288d896eee3c7194182c7f10d3a82ac)
feat(ring_theory/polynomial/pochhammer): generalize a proof from `comm_semiring` to `semiring` ([#13024](https://github.com/leanprover-community/mathlib/pull/#13024))

This PR is similar to [#13018](https://github.com/leanprover-community/mathlib/pull/#13018).  Lemma `pochhammer_succ_eval` was already proven with a commutativity assumption.  I generalized the proof to `semiring` by introducing a helper lemma.

I still feel that this is harder than I would like it to be: `pochhammer` "is" a polynomial in `ℕ[X]` and all these commutativity assumptions are satisfied, since `ℕ[X]` is commutative.

### [2022-03-31T13:00:33+00:00](https://github.com/leanprover-community/mathlib/commit/1b42223a64c081b1d8f60665acd1e1e4c9d33601)
feat(analysis/locally_convex): the topology of weak duals is locally convex ([#12623](https://github.com/leanprover-community/mathlib/pull/#12623))

### [2022-03-31T12:28:09+00:00](https://github.com/leanprover-community/mathlib/commit/6405a6adb7de8612b1dc30400def91f11d059370)
feat(analysis/locally_convex): closed balanced sets are a basis of the topology ([#12786](https://github.com/leanprover-community/mathlib/pull/#12786))

We prove some topological properties of the balanced core.

### [2022-03-31T10:35:37+00:00](https://github.com/leanprover-community/mathlib/commit/7833dbe4b551666b24d0e356f5f32d2a02d2f425)
lint(algebra/*): fix some lint errors ([#13058](https://github.com/leanprover-community/mathlib/pull/#13058))

* add some docstrings to additive versions;
* make `with_zero.ordered_add_comm_monoid` reducible.

### [2022-03-31T08:43:56+00:00](https://github.com/leanprover-community/mathlib/commit/ba9ead03da0a6c54aac9c5706ae5b9613b5cccb6)
feat(order/sup_indep): lemmas about `pairwise` and `set.pairwise` ([#12590](https://github.com/leanprover-community/mathlib/pull/#12590))

The `disjoint` lemmas can now be stated in terms of these two `pairwise` definitions.
This wasn't previously possible as these definitions were not yet imported.

This also adds the `iff` versions of these lemmas, and a docstring tying them all together.

### [2022-03-31T06:51:20+00:00](https://github.com/leanprover-community/mathlib/commit/81c5d17e986c31f3ae16ebfe7516f68c000ca950)
chore(algebra/order/monoid_lemmas): remove exactly same lemmas ([#13068](https://github.com/leanprover-community/mathlib/pull/#13068))

### [2022-03-31T06:51:19+00:00](https://github.com/leanprover-community/mathlib/commit/7a37490c947e0e31f0961a8b30640f6572d41190)
feat(ring_theory/polynomial/pochhammer): add a binomial like recursion for pochhammer ([#13018](https://github.com/leanprover-community/mathlib/pull/#13018))

This PR proves the identity

`pochhammer R n + n * (pochhammer R (n - 1)).comp (X + 1) = (pochhammer R n).comp (X + 1)`

analogous to the additive recursion for binomial coefficients.

For the proof, first we prove the result for a `comm_semiring` as `pochhammer_add_pochhammer_aux`.  Next, we apply this identity in the general case.

If someone has any idea of how to make the maths statement: it suffices to show this identity for pochhammer symbols in the commutative case, I would be *very* happy to know!

### [2022-03-31T06:51:18+00:00](https://github.com/leanprover-community/mathlib/commit/290f440af30b02454a65b078daa76f9cb75c3825)
feat(order/category/Semilattice): The categories of semilattices ([#12890](https://github.com/leanprover-community/mathlib/pull/#12890))

Define `SemilatticeSup` and `SemilatticeInf`, the categories of finitary supremum lattices and finitary infimum lattices.

### [2022-03-31T06:51:17+00:00](https://github.com/leanprover-community/mathlib/commit/760f1b2bb6a15fc404b294972b069f98afc5f91f)
refactor(*): rename `topological_ring` to `topological_semiring` and introduce a new `topological_ring` extending `has_continuous_neg` ([#12864](https://github.com/leanprover-community/mathlib/pull/#12864))

Following the discussion in this [Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/continuous.20maps.20vanishing.20at.20infinity/near/275553306), this renames `topological_ring` to `topological_semiring` throughout the library and weakens the typeclass assumptions from `semiring` to `non_unital_non_assoc_semiring`. Moreover, it introduces a new `topological_ring` class which takes a type class parameter of `non_unital_non_assoc_ring` and extends `topological_semiring` and `has_continuous_neg`.

In the case of *unital* (semi)rings (even non-associative), the type class `topological_semiring` is sufficient to capture the notion of `topological_ring` because negation is just multiplication by `-1`. Therefore, those working with unital (semi)rings can proceed with the small change of using `topological_semiring` instead of `topological_ring`.

The primary reason for the distinction is to weaken the type class assumptions to allow for non-unital rings, in which case `has_continuous_neg` must be explicitly assumed.

- [x] depends on: [#12748](https://github.com/leanprover-community/mathlib/pull/#12748) 



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-31T06:19:33+00:00](https://github.com/leanprover-community/mathlib/commit/c2339caaa2b678918f70a29e565fb0097f9b82fe)
feat(algebraic_topology): map_alternating_face_map_complex ([#13028](https://github.com/leanprover-community/mathlib/pull/#13028))

In this PR, we obtain a compatibility `map_alternating_face_map_complex` of the construction of the alternating face map complex functor with respect to additive functors between preadditive categories.

### [2022-03-31T02:41:53+00:00](https://github.com/leanprover-community/mathlib/commit/8a213165f30e865564311943f8d4c28bd13c6681)
feat(combinatorics/simple_graph/regularity/bound): Numerical bounds for Szemerédi's regularity lemma ([#12962](https://github.com/leanprover-community/mathlib/pull/#12962))

Define the constants appearing in Szemerédi's regularity lemma and prove a bunch of numerical facts about them.

Co-authored-by: Bhavik Mehta <bhavik.mehta8@gmail.com>

### [2022-03-31T02:10:17+00:00](https://github.com/leanprover-community/mathlib/commit/299984b42eafdd10e19d1d9a914fee7f2e9e5708)
feat(combinatorics/simple_graph/uniform): Graph uniformity and uniform partitions ([#12957](https://github.com/leanprover-community/mathlib/pull/#12957))

Define uniformity of a pair of vertices in a graph and uniformity of a partition of vertices of a graph.

Co-authored-by: Bhavik Mehta <bhavik.mehta8@gmail.com>

### [2022-03-31T00:12:51+00:00](https://github.com/leanprover-community/mathlib/commit/47b1d786e753d0bf4c4bcd6dea26b44950bace58)
feat(linear_algebra/matrix): any matrix power can be expressed as sums of powers `0 ≤ k < fintype.card n` ([#12983](https://github.com/leanprover-community/mathlib/pull/#12983))

I'm not familiar enough with the polynomial API to know if we can neatly state a similar result for negative powers.

### [2022-03-30T17:30:25+00:00](https://github.com/leanprover-community/mathlib/commit/fc35cb32d2ed939f52e5b624f37c0626d37e61e4)
chore(data/finset/card): add `card_disj_union` ([#13061](https://github.com/leanprover-community/mathlib/pull/#13061))

### [2022-03-30T16:05:51+00:00](https://github.com/leanprover-community/mathlib/commit/7f450cb8553180e3e0d60b896979147092f84319)
feat(topology/sets/order): Clopen upper sets ([#12670](https://github.com/leanprover-community/mathlib/pull/#12670))

Define `clopen_upper_set`, the type of clopen upper sets of an ordered topological space.

### [2022-03-30T13:52:41+00:00](https://github.com/leanprover-community/mathlib/commit/518e81a804b389144d6b22415d59636af9b78af9)
feat(topology): add lemmas about `frontier` ([#13054](https://github.com/leanprover-community/mathlib/pull/#13054))

### [2022-03-30T13:52:39+00:00](https://github.com/leanprover-community/mathlib/commit/de62b061c613c288ba1ae4024c05b3e58d35113c)
chore(data/set/pointwise): Golf using `set.image2` API ([#13051](https://github.com/leanprover-community/mathlib/pull/#13051))

Add some more `set.image2` API and demonstrate use by golfing all relevant `data.set.pointwise` declarations.

Other additions

### [2022-03-30T13:52:38+00:00](https://github.com/leanprover-community/mathlib/commit/25e8730e78a223a0d095f2f24adcf3052a78741d)
feat(analysis/special_functions/pow): abs value of real to complex power ([#13048](https://github.com/leanprover-community/mathlib/pull/#13048))

### [2022-03-30T13:52:37+00:00](https://github.com/leanprover-community/mathlib/commit/33a323cd6d5b28b3b4e1b45fa6abb4f425478001)
feat(data/fin): lemmas about ordering and cons ([#13044](https://github.com/leanprover-community/mathlib/pull/#13044))

This marks a few extra facts `simp`, since the analogous facts are `simp` for `nat`.

### [2022-03-30T13:52:33+00:00](https://github.com/leanprover-community/mathlib/commit/644a848d614f5605944c80132e754ab237d599ad)
fix(tactic/generalize_proofs): instantiate mvars ([#13025](https://github.com/leanprover-community/mathlib/pull/#13025))

Reported on [Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/generalize_proofs.20failed/near/276965359).

### [2022-03-30T13:52:32+00:00](https://github.com/leanprover-community/mathlib/commit/af3911c1db4b763914ff13d12abd3837783fc9a2)
feat(data/polynomial/erase_lead): add two erase_lead lemmas ([#12910](https://github.com/leanprover-community/mathlib/pull/#12910))

The two lemmas show that removing the leading term from the sum of two polynomials of unequal `nat_degree` is the same as removing the leading term of the one of larger `nat_degree` and adding.

The second lemma could be proved with `by rw [add_comm, erase_lead_add_of_nat_degree_lt_left pq, add_comm]`, but I preferred copying the same strategy as the previous one, to avoid interdependencies.

### [2022-03-30T13:52:30+00:00](https://github.com/leanprover-community/mathlib/commit/e31f03192226e18269cb8b1f399767e6d28df498)
feat(analysis/locally_convex): polar sets for dualities ([#12849](https://github.com/leanprover-community/mathlib/pull/#12849))

Define the absolute polar for a duality and prove easy properties such as
* `linear_map.polar_eq_Inter`: The polar as an intersection.
* `linear_map.subset_bipolar`: The polar is a subset of the bipolar.
* `linear_map.polar_weak_closed`: The polar is closed in the weak topology induced by `B.flip`.

Moreover, the corresponding lemmas are removed in the normed space setting as they all follow directly from the general case.

### [2022-03-30T11:47:45+00:00](https://github.com/leanprover-community/mathlib/commit/f13ee544703f3828731daed1c5e700fa3d711b3f)
chore(*): sort out some to_additive and simp orderings ([#13038](https://github.com/leanprover-community/mathlib/pull/#13038))

- To additive should always come after simp, unless the linter complains.
- Also make to_additive transfer the `protected` attribute for consistency.

### [2022-03-30T11:47:44+00:00](https://github.com/leanprover-community/mathlib/commit/37a8a0b2bd25cd22b01bd0fa48e764c8f31c5a1e)
feat(ring_theory/graded_algebra): define homogeneous localisation ([#12784](https://github.com/leanprover-community/mathlib/pull/#12784))

This pr defines `homogeneous_localization`. For `x` in projective spectrum of `A`, homogeneous localisation at `x` is the subring of $$A_x$$ containing `a/b` where `a` and `b` have the same degree. This construction is mainly used in constructing structure sheaf of Proj of a graded ring

### [2022-03-30T09:48:05+00:00](https://github.com/leanprover-community/mathlib/commit/cdd1703cd342275133a47a4a88160ed16ec0a08e)
feat(algebra/associates): add two instances and a lemma about the order on the monoid of associates of a monoid ([#12863](https://github.com/leanprover-community/mathlib/pull/#12863))

### [2022-03-30T03:51:16+00:00](https://github.com/leanprover-community/mathlib/commit/cd51f0dee14d42a5266831e4fd411787b73eaeaf)
fix(data/fintype/basic): generalize fintype instance for fintype.card_coe ([#13055](https://github.com/leanprover-community/mathlib/pull/#13055))

### [2022-03-30T03:51:14+00:00](https://github.com/leanprover-community/mathlib/commit/f2fd6db67d1d9c991bfcb1725c3a67d815f2d909)
chore(*): removing some `by { dunfold .., apply_instance }` proofs ([#13050](https://github.com/leanprover-community/mathlib/pull/#13050))

Replaces the proofs `by { dunfold .., apply_instance }` by the exact term that is outputted by `show_term`.

### [2022-03-30T03:19:42+00:00](https://github.com/leanprover-community/mathlib/commit/ca3bb9efe1875a1766631229b3688dc1e5738332)
chore(scripts): update nolints.txt ([#13057](https://github.com/leanprover-community/mathlib/pull/#13057))

I am happy to remove some nolints for you!

### [2022-03-30T02:20:22+00:00](https://github.com/leanprover-community/mathlib/commit/fc75855907eaa8ff39791039710f567f37d4556f)
feat(measure_theory/*): refactor integral to allow non second-countable target space ([#12942](https://github.com/leanprover-community/mathlib/pull/#12942))

Currently, the Bochner integral in mathlib only allows second-countable target spaces. This is an issue, since many constructions in spectral theory require integrals, and spaces of operators are typically not second-countable. The most general definition of the Bochner integral requires functions that may take values in non second-countable spaces, but which are still pointwise limits of a sequence of simple functions (so-called strongly measurable functions) -- equivalently, they are measurable and with second-countable range.

This PR refactors the Bochner integral, working with strongly measurable functions (or rather, almost everywhere strongly measurable functions, i.e., functions which coincide almost everywhere with a strongly measurable function). There are some prerequisistes (topological facts, and a good enough theory of almost everywhere strongly measurable functions) that have been PRed separately, but the remaining part of the change has to be done in one PR, as once one changes the basic definition of the integral one has to change all the files that depend on it.

Once the change is done, in many files the fix is just to remove `[measurable_space E] [borel_space E] [second_countable_topology E]` to make the linter happy, and see that everything still compiles. (Well, sometimes it is also much more painful, of course :-). For end users using `integrable`, nothing has to be changed, but if you need to prove integrability by hand, instead of checking `ae_measurable` you need to check `ae_strongly_measurable`. In second-countable spaces, the two of them are equivalent (and you can use `ae_strongly_measurable.ae_measurable` and `ae_measurable.ae_strongly_measurable` to go between the two of them).

The main changes are the following:
* change `ae_eq_fun` to base it on equivalence classes of ae strongly measurable functions
* fix everything that depends on this definition, including lp_space, set_to_L1, the Bochner integral and conditional expectation
* fix everything that depends on these, notably complex analysis (removing second-countability and measurability assumptions all over the place)
* A notion that involves a measurable function taking values in a normed space should probably better be rephrased in terms of strongly_measurable or ae_strongly_measurable. So, change a few definitions like `measurable_at_filter` (to `strongly_measurable_at_filter`) or `martingale`.

### [2022-03-30T02:20:21+00:00](https://github.com/leanprover-community/mathlib/commit/d28a163eae97f949e3f999070b3e6d3e3f37a768)
feat(linear_algebra/dual): define the algebraic dual pairing ([#12827](https://github.com/leanprover-community/mathlib/pull/#12827))

We define the pairing of algebraic dual and show that it is nondegenerate.

Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>

### [2022-03-30T00:29:28+00:00](https://github.com/leanprover-community/mathlib/commit/c594e2b97f8ae9362b24c7a8da50d2b06235a96c)
feat(algebra/ring/basic): neg_zero for distrib_neg ([#13049](https://github.com/leanprover-community/mathlib/pull/#13049))





Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-03-30T00:29:27+00:00](https://github.com/leanprover-community/mathlib/commit/b446c49887577718a1f600503c4fac03950d4a07)
feat(set_theory/cardinal): bit lemmas for exponentiation ([#13010](https://github.com/leanprover-community/mathlib/pull/#13010))

### [2022-03-30T00:29:26+00:00](https://github.com/leanprover-community/mathlib/commit/92b29c7731fff4035ca44aabaa2d11648331de3d)
fix(tactic/norm_num): make norm_num user command match norm_num better ([#12667](https://github.com/leanprover-community/mathlib/pull/#12667))

Corrects some issues with the `#norm_num` user command that prevented it from fully normalizing expressions. Also, adds `expr.norm_num`.

### [2022-03-29T23:57:24+00:00](https://github.com/leanprover-community/mathlib/commit/523d1779b170cb560223844c4178ed58056c8b9b)
feat(combinatorics/simple_graph/regularity/energy): Energy of a partition ([#12958](https://github.com/leanprover-community/mathlib/pull/#12958))

Define the energy of a partition.

Co-authored-by: Bhavik Mehta <bhavik.mehta8@gmail.com>

### [2022-03-29T23:24:55+00:00](https://github.com/leanprover-community/mathlib/commit/50903f0d5105c00cc7d0d428e820dca1313cc4ed)
feat(algebra/algebra/unitization): define unitization of a non-unital algebra ([#12601](https://github.com/leanprover-community/mathlib/pull/#12601))

Given a non-unital `R`-algebra `A` (given via the type classes `[non_unital_ring A] [module R A] [smul_comm_class R A A] [is_scalar_tower R A A]`) we construct the minimal unital `R`-algebra containing `A` as an ideal. This object `unitization R A` is a type synonym for `R × A` on which we place a different multiplicative structure, namely, `(r₁, a₁) * (r₂, a₂) = (r₁ * r₂, r₁ • a₂ + r₂ • a₁ + a₁ * a₂)` where the multiplicative identity is `(1, 0)`.

### [2022-03-29T20:37:44+00:00](https://github.com/leanprover-community/mathlib/commit/119eb05edfdce66f5ec32c8cd062d035f42330cb)
chore(ring_theory/valuation/basic): fix valuation_apply ([#13045](https://github.com/leanprover-community/mathlib/pull/#13045))

Follow-up to [#12914](https://github.com/leanprover-community/mathlib/pull/#12914).

### [2022-03-29T20:37:43+00:00](https://github.com/leanprover-community/mathlib/commit/e4c6449301cd808b7710f928432082218ee8e439)
feat(algebra/module): `sub_mem_iff_left` and `sub_mem_iff_right` ([#13043](https://github.com/leanprover-community/mathlib/pull/#13043))

Since it's a bit of a hassle to rewrite `add_mem_iff_left` and `add_mem_iff_right` to subtraction, I made a new pair of lemmas.

### [2022-03-29T20:37:42+00:00](https://github.com/leanprover-community/mathlib/commit/9aec6df4fca86fd6f0f4836f18029efdbe42899a)
feat(algebra/algebra/tower): `span A s = span R s` if `R → A` is surjective ([#13042](https://github.com/leanprover-community/mathlib/pull/#13042))

### [2022-03-29T18:32:04+00:00](https://github.com/leanprover-community/mathlib/commit/d3684bc372116d10c47e064c11e409280f3b35e8)
feat(category_theory/abelian): constructor in terms of coimage-image comparison ([#12972](https://github.com/leanprover-community/mathlib/pull/#12972))

The "stacks constructor" for an abelian category, following https://stacks.math.columbia.edu/tag/0109.

I also factored out the canonical morphism from the abelian coimage to the abelian image (which exists whether or not the category is abelian), and reformulated `abelian.coimage_iso_image` in terms of an `is_iso` instance for this morphism.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-29T17:44:57+00:00](https://github.com/leanprover-community/mathlib/commit/e92ecffc8be93305bf9d5ad347fc3774adca8cc4)
feat(algebra/direct_sum/module): link `direct_sum.submodule_is_internal` to `is_compl` ([#12671](https://github.com/leanprover-community/mathlib/pull/#12671))

This is then used to show the even and odd components of a clifford algebra are complementary.

### [2022-03-29T17:11:21+00:00](https://github.com/leanprover-community/mathlib/commit/90f0bee6323cf261d174d81f1d0b7f88a18e9d40)
chore(analysis/normed_space/exponential): fix lemma names in docstrings ([#13032](https://github.com/leanprover-community/mathlib/pull/#13032))

### [2022-03-29T14:38:00+00:00](https://github.com/leanprover-community/mathlib/commit/993d576463c524e4e441e9754178c9496a09d80c)
chore(data/list/pairwise): add `pairwise_bind` ([#13030](https://github.com/leanprover-community/mathlib/pull/#13030))

### [2022-03-29T14:37:59+00:00](https://github.com/leanprover-community/mathlib/commit/89998136dd54066c15bd1c827f3a3e88bdb48fee)
chore(data/list): two lemmas about bind ([#13029](https://github.com/leanprover-community/mathlib/pull/#13029))

### [2022-03-29T14:37:58+00:00](https://github.com/leanprover-community/mathlib/commit/cedf0220cd8c7710edad6f1875195c7a1cdd0c69)
feat(ring_theory/valuation/basic): add add_valuation.valuation ([#12914](https://github.com/leanprover-community/mathlib/pull/#12914))

### [2022-03-29T13:10:46+00:00](https://github.com/leanprover-community/mathlib/commit/84b8b0d803c05820bb0cecf2366fbc3960d56196)
chore(topology/vector_bundle): fix timeout by optimizing proof ([#13026](https://github.com/leanprover-community/mathlib/pull/#13026))

This PR speeds up a big and slow definition using `simp only` and `convert` → `refine`. This declaration seems to be on the edge of timing out and some other changes like [#11750](https://github.com/leanprover-community/mathlib/pull/#11750) tripped it up.

Time saved if I run it with timeouts disabled:
 * master 14.8s → 6.3s
 * [#11750](https://github.com/leanprover-community/mathlib/pull/#11750) 14.2s → 6.12s

### [2022-03-29T13:10:45+00:00](https://github.com/leanprover-community/mathlib/commit/d5fee32724575a8b2247cbe1b4ed65d15bdaf322)
chore(algebra/field_power): slightly simplify proof of min_le_of_zpow_le_max ([#13023](https://github.com/leanprover-community/mathlib/pull/#13023))

### [2022-03-29T13:10:44+00:00](https://github.com/leanprover-community/mathlib/commit/541c80d6659cb51a2e8d3916f85bd87e7f50b61c)
feat(group_theory/index): Golf proof of `relindex_eq_zero_of_le_left` ([#13014](https://github.com/leanprover-community/mathlib/pull/#13014))

This PR uses `relindex_dvd_of_le_left` to golf the proof of `relindex_eq_zero_of_le_left`.

### [2022-03-29T13:10:43+00:00](https://github.com/leanprover-community/mathlib/commit/e109c8f61b9ede7f130d620c8e9e6f27a0e857ad)
feat(topology): basis for `𝓤 C(α, β)` and convergence of a series of `f : C(α, β)` ([#11229](https://github.com/leanprover-community/mathlib/pull/#11229))

* add `filter.has_basis.compact_convergence_uniformity`;
* add a few facts about `compacts X`;
* add `summable_of_locally_summable_norm`.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-03-29T11:26:23+00:00](https://github.com/leanprover-community/mathlib/commit/66509e13a7b3fc3e3dcb0decb559a9560fa0df57)
feat(data/polynomial/div): `a - b ∣ p.eval a - p.eval b` ([#13021](https://github.com/leanprover-community/mathlib/pull/#13021))

Co-authored-by: Eric Rodriguez <@ericrbg>

### [2022-03-29T11:26:22+00:00](https://github.com/leanprover-community/mathlib/commit/111d3a4a31e65ed687a234d25b56a82c951c7b14)
chore(data/polynomial/eval): golf two proofs involving evals ([#13020](https://github.com/leanprover-community/mathlib/pull/#13020))

I shortened two proofs involving `eval/eval₂/comp`.

### [2022-03-29T11:26:21+00:00](https://github.com/leanprover-community/mathlib/commit/b87c267754b707bdcf6101e54557fe9efd03dde4)
feat(topology/algebra/group): add small topology lemma ([#12931](https://github.com/leanprover-community/mathlib/pull/#12931))

Adds a small topology lemma by splitting `compact_open_separated_mul` into `compact_open_separated_mul_left/right`, which was useful in my proof of `Steinhaus theorem` (see [#12932](https://github.com/leanprover-community/mathlib/pull/#12932)), as in a non-abelian group, the current version was not sufficient.



Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-03-29T09:36:12+00:00](https://github.com/leanprover-community/mathlib/commit/89c8112f242e32e6b5c740d46c959078ef44bf02)
feat(topology/algebra/monoid): `finprod` is eventually equal to `finset.prod` ([#13013](https://github.com/leanprover-community/mathlib/pull/#13013))

Motivated by https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Using.20partitions.20of.20unity



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2022-03-29T09:36:11+00:00](https://github.com/leanprover-community/mathlib/commit/545c2655498ea2e891ad650f4305d0965dd01ed5)
feat(data/polynomial/derivative): if `p` is a polynomial, then `p.derivative.nat_degree ≤ p.nat_degree - 1` ([#12948](https://github.com/leanprover-community/mathlib/pull/#12948))

I also golfed the proof that `p.derivative.nat_degree ≤ p.nat_degree`.

### [2022-03-29T09:36:10+00:00](https://github.com/leanprover-community/mathlib/commit/4bf4d9df823b85c13761b9e5dc4c58c999f68e10)
feat(ring_theory/dedekind_domain/adic_valuation): add adic valuation on a Dedekind domain ([#12712](https://github.com/leanprover-community/mathlib/pull/#12712))

Given a Dedekind domain R of Krull dimension 1 and a maximal ideal v of R, we define the
v-adic valuation on R and prove some of its properties, including the existence of uniformizers.

### [2022-03-29T09:36:08+00:00](https://github.com/leanprover-community/mathlib/commit/1ffd04c075f81c09407a4be8dda6a21a232d30e2)
feat(analysis/locally_convex): add balanced hull and core ([#12537](https://github.com/leanprover-community/mathlib/pull/#12537))

### [2022-03-29T07:35:13+00:00](https://github.com/leanprover-community/mathlib/commit/0f92307ec81353d662688b3f3c98273b3e39fc63)
feat(data/list/chain): Simp lemma for `chain r a (l ++ b :: c :: m)` ([#12969](https://github.com/leanprover-community/mathlib/pull/#12969))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-29T07:35:12+00:00](https://github.com/leanprover-community/mathlib/commit/1cdbc356682105626a48ebed466cfe7c101d8c32)
feat(order/hom/bounded): an order_iso maps top to top and bot to bot ([#12862](https://github.com/leanprover-community/mathlib/pull/#12862))




Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-03-29T07:35:11+00:00](https://github.com/leanprover-community/mathlib/commit/b535c2d5d996acd9b0554b76395d9c920e186f4f)
feat(algebra/homology): three lemmas on homological complexes ([#12742](https://github.com/leanprover-community/mathlib/pull/#12742))

### [2022-03-29T07:35:09+00:00](https://github.com/leanprover-community/mathlib/commit/1084cee9ebfa3a5d658df020d08381a28694c233)
feat(category_theory/bicategory/coherence): prove the coherence theorem for bicategories ([#12155](https://github.com/leanprover-community/mathlib/pull/#12155))




Co-authored-by: Junyan Xu <junyanxumath@gmail.com>

### [2022-03-29T07:35:08+00:00](https://github.com/leanprover-community/mathlib/commit/7b8b8f13431705aec2a8b2e8eba957be826bd67e)
feat(set_theory/ordinal_arithmetic): Characterize principal multiplicative ordinals ([#11701](https://github.com/leanprover-community/mathlib/pull/#11701))

Two lemmas were renamed in the process:
- `mul_lt_omega` → `principal_mul_omega`
- `opow_omega` → `principal_opow_omega`

Various others were moved to `principal.lean`.

### [2022-03-29T05:57:42+00:00](https://github.com/leanprover-community/mathlib/commit/ce3cecef7578164953d461eecd93b58325a82d72)
feat(measure_theory/constructions/borel_space): add `borelize` tactic ([#12844](https://github.com/leanprover-community/mathlib/pull/#12844))



Co-authored-by: Alex J. Best <alex.j.best@gmail.com>

### [2022-03-29T05:57:41+00:00](https://github.com/leanprover-community/mathlib/commit/5fb7b7b69bee0b5c16d9ad442a8c50be9c38fbf6)
feat(set_theory/{ordinal_arithmetic, game/nim}): Minimum excluded ordinal ([#12659](https://github.com/leanprover-community/mathlib/pull/#12659))

We define `mex` and `bmex`, and use the former to golf the proof of Sprague-Grundy.

### [2022-03-29T04:19:18+00:00](https://github.com/leanprover-community/mathlib/commit/5fcad214297200fa52b5a258b446ab8140eaa3df)
feat(number_theory/frobenius_number): Frobenius numbers ([#9729](https://github.com/leanprover-community/mathlib/pull/#9729))






Co-authored-by: cocohearts <41932135+cocohearts@users.noreply.github.com>
Co-authored-by: Thomas Browning <tb65536@uw.edu>
Co-authored-by: awainverse <awainverse@gmail.com>

### [2022-03-28T23:54:09+00:00](https://github.com/leanprover-community/mathlib/commit/7fea719c3b0a1afac6e83388750c91e72ed27c5f)
feat(data/set/basic): Laws for n-ary image ([#13011](https://github.com/leanprover-community/mathlib/pull/#13011))

Prove left/right commutativity, distributivity of `set.image2` in the style of `set.image2_assoc`. Also add `forall₃_imp` and `Exists₃.imp`.

### [2022-03-28T23:54:08+00:00](https://github.com/leanprover-community/mathlib/commit/94800295f16e17a398f2c604ffc4641b2c3355f1)
chore(data/{nat,int,rat}/cast): add bundled version of `cast_id` lemmas ([#13001](https://github.com/leanprover-community/mathlib/pull/#13001))

### [2022-03-28T23:54:07+00:00](https://github.com/leanprover-community/mathlib/commit/8c9dee1c6a4404db07df376e9c52169f5206e5c7)
feat(algebra/field_power): add min_le_of_zpow_le_max ([#12915](https://github.com/leanprover-community/mathlib/pull/#12915))

### [2022-03-28T22:26:18+00:00](https://github.com/leanprover-community/mathlib/commit/223d9a19f1f258393b2955d085f56219b913911b)
feat(group_theory/quotient_group): maps of quotients by powers of integers induced by group homomorphisms ([#12811](https://github.com/leanprover-community/mathlib/pull/#12811))

### [2022-03-28T22:26:16+00:00](https://github.com/leanprover-community/mathlib/commit/1a2182cd74f421702161ba2f6dca6ee7fad1cec6)
feat(group_theory/complement): Transversals as functions ([#12732](https://github.com/leanprover-community/mathlib/pull/#12732))

This PR adds interpretations of transversals as functions mapping elements of `G` to the chosen coset representative.

### [2022-03-28T20:38:27+00:00](https://github.com/leanprover-community/mathlib/commit/40b142e070878fdf6a68c3abd49931274e203e8c)
chore(analysis/*): move matrix definitions into their own file and generalize ([#13007](https://github.com/leanprover-community/mathlib/pull/#13007))

This makes it much easier to relax the typeclasses as needed.

`norm_matrix_le_iff` has been renamed to `matrix.norm_le_iff`, the rest of the lemmas have just had their typeclass arguments weakened. No proofs have changed.

The `matrix.normed_space` instance is now of the form `normed_space R (matrix n m α)` instead of `normed_space α (matrix n m α)`.

### [2022-03-28T20:38:26+00:00](https://github.com/leanprover-community/mathlib/commit/ea97ca6b8d7011a254b3150809f9fa8dc7fbf6ad)
feat(group_theory/group_action): add `commute.smul_{left,right}[_iff]` lemmas ([#13003](https://github.com/leanprover-community/mathlib/pull/#13003))

`(r • a) * b = b * (r • a)` follows trivially from `smul_mul_assoc` and `mul_smul_comm`

### [2022-03-28T20:38:25+00:00](https://github.com/leanprover-community/mathlib/commit/261a19531d76a4f8c0db914e85512f050b9400e2)
feat(group_theory/group_action/opposite): Add `smul_eq_mul_unop` ([#12995](https://github.com/leanprover-community/mathlib/pull/#12995))

This PR adds a simp-lemma `smul_eq_mul_unop`, similar to `op_smul_eq_mul` and `smul_eq_mul`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-03-28T16:49:23+00:00](https://github.com/leanprover-community/mathlib/commit/6fe0c3b132f88350013bc53250ec584f925730cc)
refactor(algebra/group/to_additive + files containing even/odd): move many lemmas involving even/odd to the same file ([#12882](https://github.com/leanprover-community/mathlib/pull/#12882))

This is the first step in refactoring the definition of `even` to be the `to_additive` of `square`.

This PR simply gathers together many (though not all) lemmas that involve `even` or `odd` in their assumptions.  The choice of which lemmas to migrate to the file `algebra.parity` was dictated mostly by whether importing `algebra.parity` in the current home would create a cyclic import.

The only change that is not a simple shift from a file to another one is the addition in `to_additive` for support to change `square` in a multiplicative name to `even` in an additive name.

The change to the test file `test.ring` is due to the fact that the definition of `odd` was no longer imported by the file.

### [2022-03-28T16:49:22+00:00](https://github.com/leanprover-community/mathlib/commit/958f6b02e9dcaf8c410d03fbe1b4124701ef8a87)
refactor(measure_theory/group/fundamental_domain): allow `null_measurable_set`s ([#12005](https://github.com/leanprover-community/mathlib/pull/#12005))

### [2022-03-28T15:03:16+00:00](https://github.com/leanprover-community/mathlib/commit/abaabc8c03c8bdc430975669014d3e6c19de58e4)
chore(algebra/group_power/lemmas): turn `[zn]smul` lemmas into instances ([#13002](https://github.com/leanprover-community/mathlib/pull/#13002))

This adds new instances such that:

* `mul_[zn]smul_assoc` is `←smul_mul_assoc`
* `mul_[zn]smul_left` is `←mul_smul_comm`

This also makes `noncomm_ring` slightly smarter, and able to handle scalar actions by `nat`.
Thanks to Christopher, this generalizes these instances to non-associative and non-unital rings.

Co-authored-by: Christopher Hoskin <christopher.hoskin@gmail.com>

### [2022-03-28T15:03:14+00:00](https://github.com/leanprover-community/mathlib/commit/0e1387bbaee7364294a2bfb58b4d1b0766c64be9)
feat(category_theory): the category of small categories has all small limits ([#12979](https://github.com/leanprover-community/mathlib/pull/#12979))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-28T15:03:13+00:00](https://github.com/leanprover-community/mathlib/commit/31e5ae2268551225f2dddf0fed4b3a81c1291c83)
feat(data/list/cycle): Define the empty cycle ([#12967](https://github.com/leanprover-community/mathlib/pull/#12967))

Also clean the file up somewhat, and add various `simp` lemmas.

### [2022-03-28T14:30:41+00:00](https://github.com/leanprover-community/mathlib/commit/0c6f0c2a9abeafd761ffff042ab6e5a6ea140f80)
feat(ring_theory/dedekind_domain/ideal): add lemmas about sup of ideal with irreducible ([#12859](https://github.com/leanprover-community/mathlib/pull/#12859))

These results were originally in [#9345](https://github.com/leanprover-community/mathlib/pull/#9345).
Co-authored-by: Anne Baanen <t.baanen@vu.nl>

### [2022-03-28T11:39:00+00:00](https://github.com/leanprover-community/mathlib/commit/4ee988db5cf978e135270a23ef268cabd58d40b2)
chore(algebra/homology/homotopy): cleanup ([#12998](https://github.com/leanprover-community/mathlib/pull/#12998))

Correcting a name and some whitespace.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-28T11:38:59+00:00](https://github.com/leanprover-community/mathlib/commit/eba31b58431645be35ac463a734e0e142dfa8f5f)
feat(algebra/homology): some elementwise lemmas ([#12997](https://github.com/leanprover-community/mathlib/pull/#12997))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-28T11:38:58+00:00](https://github.com/leanprover-community/mathlib/commit/dacf049089b23b8bff022076c8054ecdac53c1e6)
feat(algebra/*): coe_to_equiv_symm simp lemmas ([#12996](https://github.com/leanprover-community/mathlib/pull/#12996))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-28T11:38:57+00:00](https://github.com/leanprover-community/mathlib/commit/f0c15be66cb8bb5ac9314a551e0123f38a2e3b1e)
feat(measure_theory/functions/strongly_measurable): almost everywhere strongly measurable functions ([#12985](https://github.com/leanprover-community/mathlib/pull/#12985))

A function is almost everywhere strongly measurable if it is almost everywhere the pointwise limit of a sequence of simple functions. These are the functions that can be integrated in the most general version of the Bochner integral. As a prerequisite for the refactor of the Bochner integral, we define almost strongly measurable functions and build a comprehensive API for them, gathering in the file `strongly_measurable.lean` all facts that will be needed for the refactor. The API does not claim to be complete, but it is already pretty big.

### [2022-03-28T11:38:56+00:00](https://github.com/leanprover-community/mathlib/commit/fd2c6c47899405c1ed1f72867260409310764645)
chore(data/polynomial/ring_division): remove nontrivial assumptions ([#12984](https://github.com/leanprover-community/mathlib/pull/#12984))

Additionally, this removes:

* some `polynomial.monic` assumptions that can be handled by casing instead
* the explicit `R` argument from `is_field.to_field R hR`

### [2022-03-28T11:38:55+00:00](https://github.com/leanprover-community/mathlib/commit/c0421e76c549f37dd966ab33e70951bdf5e88983)
feat({ring_theory,group_theory}/localization): add some small lemmas for localisation API ([#12861](https://github.com/leanprover-community/mathlib/pull/#12861))

Add the following:

* `sub_mk`: a/b - c/d = (ad - bc)/(bd)
* `mk_pow`: (a/b)^n = a^n/b^n
* `mk_int_cast`, `mk_nat_cast`: m = m/1 for integer/natural number m.

### [2022-03-28T11:38:54+00:00](https://github.com/leanprover-community/mathlib/commit/1ebb20602a8caef435ce47f6373e1aa40851a177)
feat(ring_theory/localization): lemmas about `Frac(R)`-spans ([#12425](https://github.com/leanprover-community/mathlib/pull/#12425))

A couple of lemmas relating spans in the localization of `R` to spans in `R` itself.





Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2022-03-28T09:53:37+00:00](https://github.com/leanprover-community/mathlib/commit/e48f2e82001f202bf53382737d359348c978d980)
doc(data/polynomial/field_division): fix broken docstring links ([#12981](https://github.com/leanprover-community/mathlib/pull/#12981))

### [2022-03-28T09:53:36+00:00](https://github.com/leanprover-community/mathlib/commit/d31410aba959c3864ae96a6a441443425a9de65c)
doc({linear_algebra,matrix}/charpoly): add crosslinks ([#12980](https://github.com/leanprover-community/mathlib/pull/#12980))

This way someone coming from `undergrad.yaml` has an easy way to jump between the two statements.

### [2022-03-28T09:53:35+00:00](https://github.com/leanprover-community/mathlib/commit/597cbf10adffba80f89efa50e7266163b188ece5)
feat(topology/continuous_on): add `set.maps_to.closure_of_continuous_on` ([#12975](https://github.com/leanprover-community/mathlib/pull/#12975))

### [2022-03-28T09:53:34+00:00](https://github.com/leanprover-community/mathlib/commit/ff72aa22128d7b7f48cb8f4b56713ce896926d4a)
feat(data/list/big_operators): add multiplicative versions ([#12966](https://github.com/leanprover-community/mathlib/pull/#12966))

* add `list.length_pos_of_one_lt_prod`, generate
  `list.length_pos_of_sum_pos` using `to_additive`;
* add `list.length_pos_of_prod_lt_one` and its additive version.

### [2022-03-28T09:53:33+00:00](https://github.com/leanprover-community/mathlib/commit/443c239dbe3693b0b66f24392520999e390cf140)
feat(data/polynomial/ring_division): `mem_root_set_iff` ([#12963](https://github.com/leanprover-community/mathlib/pull/#12963))

### [2022-03-28T09:53:31+00:00](https://github.com/leanprover-community/mathlib/commit/162d83fc9059030d721fc66fa163b2b80916c573)
chore(data/matrix/basic): square matrices over a non-unital ring form a non-unital ring ([#12913](https://github.com/leanprover-community/mathlib/pull/#12913))

### [2022-03-28T09:53:30+00:00](https://github.com/leanprover-community/mathlib/commit/c030dd2ad2d2ed559b834819f9f422a0cbec3ee0)
feat(set_theory/cardinal): `cardinal.to_nat` is order-preserving on finite cardinals ([#12763](https://github.com/leanprover-community/mathlib/pull/#12763))

This PR proves that `cardinal.to_nat` is order-preserving on finite cardinals.

### [2022-03-28T09:53:29+00:00](https://github.com/leanprover-community/mathlib/commit/2873b7acf3a455a86b46b69b10b07083783ccb14)
feat(set_theory/cofinality): Lemmas relating `cof` to `lsub` and `blsub` ([#12316](https://github.com/leanprover-community/mathlib/pull/#12316))

### [2022-03-28T09:53:28+00:00](https://github.com/leanprover-community/mathlib/commit/b7d6b3aa04ccefe15674db063f3c0b830b1494e4)
feat(topology/continuous/algebra) : giving `C(α, M)` a `has_continuous_mul` and a `has_continuous_smul` structure ([#11261](https://github.com/leanprover-community/mathlib/pull/#11261))

Here, `α` is a locally compact space.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-28T08:03:19+00:00](https://github.com/leanprover-community/mathlib/commit/77110125caaa6d3af4f4633449bdfed4ce919f7f)
feat(order/hom/*): equivalences mapping morphisms to their dual ([#12888](https://github.com/leanprover-community/mathlib/pull/#12888))

Add missing `whatever_hom.dual` equivalences.

### [2022-03-28T06:13:19+00:00](https://github.com/leanprover-community/mathlib/commit/587af9960a71b58869ee813d617d083c08d1e836)
chore(test/matrix): clean up an unused argument ([#12986](https://github.com/leanprover-community/mathlib/pull/#12986))

these aren't caught by linters as examples don't generate declarations

### [2022-03-28T06:13:17+00:00](https://github.com/leanprover-community/mathlib/commit/562bbf524c595c153470e53d36c57b6f891cc480)
feat(measure_theory/measure): add some simp lemmas, golf ([#12974](https://github.com/leanprover-community/mathlib/pull/#12974))

* add `top_add`, `add_top`, `sub_top`, `zero_sub`, `sub_self`;
* golf the proof of `restrict_sub_eq_restrict_sub_restrict`.

### [2022-03-28T06:13:16+00:00](https://github.com/leanprover-community/mathlib/commit/4b05a42d983507530e4aee16d2f957f7d092db20)
feat(data/list/pairwise): `pairwise_of_forall_mem_list` ([#12968](https://github.com/leanprover-community/mathlib/pull/#12968))

A relation holds pairwise on a list when it does on any two of its elements.

### [2022-03-28T06:13:15+00:00](https://github.com/leanprover-community/mathlib/commit/73a9c27fb40d75eae306c80acd5212acc19f7c7b)
chore(analysis/analytic/basic): golf ([#12965](https://github.com/leanprover-community/mathlib/pull/#12965))

Golf a 1-line proof, drop an unneeded assumption.

### [2022-03-28T06:13:14+00:00](https://github.com/leanprover-community/mathlib/commit/33afea8231ef74e3571ebb66a7267dd57f96f635)
feat(analysis/normed_space): generalize some lemmas ([#12959](https://github.com/leanprover-community/mathlib/pull/#12959))

* add `metric.closed_ball_zero'`, a version of `metric.closed_ball_zero` for a pseudo metric space;
* merge `metric.closed_ball_inf_dist_compl_subset_closure'` with `metric.closed_ball_inf_dist_compl_subset_closure`, drop an unneeded assumption `s ≠ univ`;
* assume `r ≠ 0` instead of `0 < r` in `closure_ball`, `frontier_ball`, and `euclidean.closure_ball`.

### [2022-03-28T06:13:12+00:00](https://github.com/leanprover-community/mathlib/commit/c65d8079bcc48e19fe6ed8f9ef827dfb339a46ff)
feat(data/polynomial/erase_lead + data/polynomial/reverse): rename an old lemma, add a stronger one ([#12909](https://github.com/leanprover-community/mathlib/pull/#12909))

Taking advantage of nat-subtraction in edge cases, a lemma that previously proved `x ≤ y` actually holds with `x ≤ y - 1`.

Thus, I renamed the old lemma to `original_name_aux` and `original_name` is now the name of the new lemma.  Since this lemma was used in a different file, I used the `_aux` name in the other file.

Note that the `_aux` lemma is currently an ingredient in the proof of the stronger lemma.  It may be possible to have a simple direct proof of the stronger one that avoids using the `_aux` lemma, but I have not given this any thought.

### [2022-03-28T06:13:11+00:00](https://github.com/leanprover-community/mathlib/commit/7a1e0f203adf26f2de8ee690155206b1e08d6b69)
feat(analysis/inner_product_space): an inner product space is strictly convex ([#12790](https://github.com/leanprover-community/mathlib/pull/#12790))

### [2022-03-28T05:04:36+00:00](https://github.com/leanprover-community/mathlib/commit/1e72d86fcc15ef521db58f45b8fe1bf7dff682ad)
chore(data/polynomial/degree/lemmas + data/polynomial/ring_division): move lemmas, reduce assumptions, golf ([#12858](https://github.com/leanprover-community/mathlib/pull/#12858))

This PR takes advantage of the reduced assumptions that are a consequence of [#12854](https://github.com/leanprover-community/mathlib/pull/#12854).  Again, I moved two lemmas from their current location to a different file, where the typeclass assumptions make more sense,

### [2022-03-27T19:56:25+00:00](https://github.com/leanprover-community/mathlib/commit/e5cd2ea1e83aa783cad0f466f6220e997ed81660)
feat(analysis/von_neumann): concrete and abstract definitions of a von Neumann algebra ([#12329](https://github.com/leanprover-community/mathlib/pull/#12329))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-27T15:52:15+00:00](https://github.com/leanprover-community/mathlib/commit/1494a9b2c48c9dcf92848910414eacb9257bce1d)
feat(data/zmod/basic): add `int_coe_eq_int_coe_iff_dvd_sub` ([#12944](https://github.com/leanprover-community/mathlib/pull/#12944))

This adds the following API lemma.
```
lemma int_coe_eq_int_coe_iff_dvd_sub (a b : ℤ) (c : ℕ) : (a : zmod c) = ↑b ↔ ↑c ∣ b-a
```
extending the already present version with b = 0. [(Zulip discussion)](https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Missing.20zmod.20lemma.3F)

### [2022-03-27T10:05:55+00:00](https://github.com/leanprover-community/mathlib/commit/d620ad3c3060228be6999752057d31c439031196)
feat(measure_theory/measure/measure_space): remove measurable_set assumption in ae_measurable.subtype_mk ([#12978](https://github.com/leanprover-community/mathlib/pull/#12978))

### [2022-03-27T04:09:23+00:00](https://github.com/leanprover-community/mathlib/commit/2c6df07f0a1e72818a3a690f1307a399ba236786)
chore(model_theory/*): Split up big model theory files ([#12918](https://github.com/leanprover-community/mathlib/pull/#12918))

Splits up `model_theory/basic` into `model_theory/basic`, `model_theory/language_maps`, and `model_theory/bundled`.
Splits up `model_theory/terms_and_formulas` into `model_theory/syntax`, `model_theory/semantics`, and `model_theory/satisfiability`.
Adds to the module docs of these files.

### [2022-03-27T03:34:03+00:00](https://github.com/leanprover-community/mathlib/commit/57a5fd72b31c37b3c58776c55004f406fef5de32)
chore(scripts): update nolints.txt ([#12971](https://github.com/leanprover-community/mathlib/pull/#12971))

I am happy to remove some nolints for you!

### [2022-03-27T00:27:34+00:00](https://github.com/leanprover-community/mathlib/commit/664247fcb888a0f1ccf1d512eb00e3a1d8a3798e)
chore(data/set/intervals/ord_connected): Golf proof ([#12923](https://github.com/leanprover-community/mathlib/pull/#12923))

### [2022-03-27T00:27:33+00:00](https://github.com/leanprover-community/mathlib/commit/05ef6940c59bfffb28e4a6e7a1424032f89d7fed)
refactor(topology/instances/ennreal): make `ennreal` an instance of `has_continuous_inv` ([#12806](https://github.com/leanprover-community/mathlib/pull/#12806))

Prior to the type class `has_continuous_inv`, `ennreal` had to have it's own hand-rolled `ennreal.continuous_inv` statement. This replaces it with a `has_continuous_inv` instance.

- [x] depends on: [#12748](https://github.com/leanprover-community/mathlib/pull/#12748)

### [2022-03-26T23:54:12+00:00](https://github.com/leanprover-community/mathlib/commit/caf6f19291e1e86dfc5a91a0c730fad3d5bd53c0)
refactor(category_theory/abelian): deduplicate definitions of (co)image ([#12902](https://github.com/leanprover-community/mathlib/pull/#12902))

Previously we made two separate definitions of the abelian (co)image, as `kernel (cokernel.π f)` / `cokernel (kernel.ι f)`,
once for `non_preadditive_abelian C` and once for `abelian C`.

This duplication wasn't really necessary, and this PR unifies them.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-26T23:17:46+00:00](https://github.com/leanprover-community/mathlib/commit/f5a9d0a3264f55f1e1eaa7eb9b6bfee3ab98aa15)
feat(ring_theory/polynomial/eisenstein): add cyclotomic_prime_pow_comp_X_add_one_is_eisenstein_at ([#12707](https://github.com/leanprover-community/mathlib/pull/#12707))

We add `cyclotomic_prime_pow_comp_X_add_one_is_eisenstein_at`.

From flt-regular

### [2022-03-26T21:16:08+00:00](https://github.com/leanprover-community/mathlib/commit/7b9388996c1c4637666fe94c1e3d8eeaece5342d)
refactor(data/list/basic): Remove many redundant hypotheses ([#12950](https://github.com/leanprover-community/mathlib/pull/#12950))

Many theorems about `last` required arguments proving that certain things were not equal to `nil`, when in fact this was always the case. These hypotheses have been removed and replaced with the corresponding proofs.

### [2022-03-26T21:16:07+00:00](https://github.com/leanprover-community/mathlib/commit/e63e3322ebf3cf37a28109e071881fc36d6e267a)
feat(algebra/ring/basic): all non-zero elements in a non-trivial ring with no non-zero zero divisors are regular ([#12947](https://github.com/leanprover-community/mathlib/pull/#12947))

Besides what the PR description says, I also golfed two earlier proofs.

### [2022-03-26T21:16:06+00:00](https://github.com/leanprover-community/mathlib/commit/b30f25ce6368e9a0ec540e57e777a5421e6cf9d6)
fix(data/set/prod): fix the way `×ˢ` associates ([#12943](https://github.com/leanprover-community/mathlib/pull/#12943))

Previously `s ×ˢ t ×ˢ u` was an element of `set ((α × β) × γ)` instead of `set (α × β × γ) = set (α × (β × γ))`.

### [2022-03-26T21:16:05+00:00](https://github.com/leanprover-community/mathlib/commit/cc8c90d4ac61725a8f6c92691d8abcd2dec88115)
chore(data/equiv): split and move to `logic/equiv` ([#12929](https://github.com/leanprover-community/mathlib/pull/#12929))

Zulip discussion: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Rearranging.20files.20in.20.60data.2F.60

This PR rearranges files in `data/equiv/` by 1) moving bundled isomorphisms to a relevant subfolder of `algebra/`; 2) moving `denumerable` and `encodable` to `logic/`; 3) moving the remainder of `data/equiv/` to `logic/equiv/`. The commits of this PR correspond to those steps.

In particular, the following files were moved:

 * `data/equiv/module.lean` → `algebra/module/equiv.lean`
 * `data/equiv/mul_add.lean` → `algebra/hom/equiv.lean`
 * `data/equiv/mul_add_aut.lean` → `algebra/hom/aut.lean`
 * `data/equiv/ring.lean` → `algebra/ring/equiv.lean`
 * `data/equiv/ring_aut.lean` → `algebra/ring/aut.lean`
 * `data/equiv/denumerable.lean` → `logic/denumerable.lean`
 * `data/equiv/encodable/*.lean` → `logic/encodable/basic.lean logic/encodable/lattice.lean logic/encodable/small.lean`
 * `data/equiv/*.lean` to: `logic/equiv/basic.lean logic/equiv/fin.lean logic/equiv/functor.lean logic/equiv/local_equiv.lean logic/equiv/option.lean logic/equiv/transfer_instance.lean logic/equiv/embedding.lean logic/equiv/fintype.lean logic/equiv/list.lean logic/equiv/nat.lean logic/equiv/set.lean`

### [2022-03-26T20:22:51+00:00](https://github.com/leanprover-community/mathlib/commit/434a938b357e76c85ea44e5ed798978c61da6bf8)
feat(analysis/convex/strict_convex_space): Strictly convex spaces ([#11794](https://github.com/leanprover-community/mathlib/pull/#11794))

Define `strictly_convex_space`, a `Prop`-valued mixin to state that a normed space is strictly convex.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-03-26T19:19:53+00:00](https://github.com/leanprover-community/mathlib/commit/1f11f3f3ad6faf529ec2f1204275fbffd6a9c7fa)
chore(order/filter/basic): rename using the zero subscript convention for groups with zero ([#12952](https://github.com/leanprover-community/mathlib/pull/#12952))

### [2022-03-26T18:24:35+00:00](https://github.com/leanprover-community/mathlib/commit/a491055c0e6c05b08b6153bf5ec88c2203bf2a25)
chore(measure_theory/integral/lebesgue): extend to ae_measurable ([#12953](https://github.com/leanprover-community/mathlib/pull/#12953))

### [2022-03-26T14:15:19+00:00](https://github.com/leanprover-community/mathlib/commit/cb2797ee4ab564291a3cb45d37209ad43924f505)
feat(measure_theory/constructions/borel_space): drop a countability assumption ([#12954](https://github.com/leanprover-community/mathlib/pull/#12954))

### [2022-03-26T12:20:15+00:00](https://github.com/leanprover-community/mathlib/commit/b7d9166a29640e64c69f627f50e69b7e540d7d50)
chore(measure_theory/measure/lebesgue): delete leftovers ([#12951](https://github.com/leanprover-community/mathlib/pull/#12951))

### [2022-03-26T12:20:14+00:00](https://github.com/leanprover-community/mathlib/commit/11114823c2a6a84510684f0dbe8a7b328878df4d)
feat(topology/bases): separable subsets of topological spaces ([#12936](https://github.com/leanprover-community/mathlib/pull/#12936))

### [2022-03-26T12:20:13+00:00](https://github.com/leanprover-community/mathlib/commit/f68536e000ec42cc82c793f80f517649a30295dd)
feat(topology/constructions): continuity of uncurried functions when the first factor is discrete ([#12935](https://github.com/leanprover-community/mathlib/pull/#12935))

### [2022-03-26T12:20:12+00:00](https://github.com/leanprover-community/mathlib/commit/5e449c20bac85b413a9226cd1a509843ca699e64)
feat(algebra/is_prime_pow): add `is_prime_pow_iff_factorization_single` ([#12167](https://github.com/leanprover-community/mathlib/pull/#12167))

Adds lemma `is_prime_pow_iff_factorization_single : is_prime_pow n ↔ ∃ p k : ℕ, 0 < k ∧ n.factorization = finsupp.single p k`

Also adds `pow_of_factorization_single` to `data/nat/factorization`

### [2022-03-26T10:30:31+00:00](https://github.com/leanprover-community/mathlib/commit/023a78389afac336764b20a81ee1a5c6bcc9eb14)
feat(logic/nontrivial): `exists_pair_lt` ([#12925](https://github.com/leanprover-community/mathlib/pull/#12925))

### [2022-03-26T10:30:30+00:00](https://github.com/leanprover-community/mathlib/commit/c51f4f105a8543db64905a946f433f478799da0b)
feat(set_theory/cardinal_ordinal): `κ ^ n = κ` for infinite cardinals ([#12922](https://github.com/leanprover-community/mathlib/pull/#12922))

### [2022-03-26T09:35:33+00:00](https://github.com/leanprover-community/mathlib/commit/9d26041f6b8d22c99cc07324483a188e9b024988)
feat(topology/instances/ennreal): add `ennreal.has_sum_to_real` ([#12926](https://github.com/leanprover-community/mathlib/pull/#12926))

### [2022-03-26T03:28:38+00:00](https://github.com/leanprover-community/mathlib/commit/b83bd25df297ae8d73fb7e4a3e252d3609f0ff6d)
feat(linear_algebra/sesquilinear_form): add nondegenerate ([#12683](https://github.com/leanprover-community/mathlib/pull/#12683))

Defines nondegenerate sesquilinear forms as left and right separating sesquilinear forms.

### [2022-03-26T02:58:15+00:00](https://github.com/leanprover-community/mathlib/commit/17b621c0db04cacefbfe032ae31db3bff5bc20fe)
chore(scripts): update nolints.txt ([#12946](https://github.com/leanprover-community/mathlib/pull/#12946))

I am happy to remove some nolints for you!

### [2022-03-25T19:43:25+00:00](https://github.com/leanprover-community/mathlib/commit/b6d246a6ec5c1bd51f8570e81b1b83f95e836ac9)
feat(topology/continuous_function/cocompact_maps): add the type of cocompact continuous maps ([#12938](https://github.com/leanprover-community/mathlib/pull/#12938))

This adds the type of cocompact continuous maps, which are those functions `f : α → β` for which `tendsto f (cocompact α) (cocompact β)`. These maps are of interest primarily because of their connection with continuous functions vanishing at infinity ([#12907](https://github.com/leanprover-community/mathlib/pull/#12907)). In particular, if `f : α → β` is a cocompact continuous map and `g : β →C₀ γ` is a continuous function which vanishes at infinity, then `g ∘ f : α →C₀ γ`.

These are also related to quasi-compact maps (continuous maps for which preimages of compact sets are compact) and proper maps (continuous maps which are universally closed), neither of which are currently defined in mathlib. In particular, quasi-compact maps are cocompact continuous maps, and when the codomain is Hausdorff the converse holds also. Under some additional assumptions, both of these are also equivalent to being a proper map.

### [2022-03-25T18:48:49+00:00](https://github.com/leanprover-community/mathlib/commit/221796ab9ce35313992785ee9ea4eee4db4ff05e)
feat(topology/metric_space/metrizable): define and use a metrizable typeclass ([#12934](https://github.com/leanprover-community/mathlib/pull/#12934))

### [2022-03-25T17:53:43+00:00](https://github.com/leanprover-community/mathlib/commit/5925650f3fe7bf0de7e56d31bb1e522ea885938d)
chore(nnreal): rename lemmas based on real.to_nnreal when they mention of_real ([#12937](https://github.com/leanprover-community/mathlib/pull/#12937))

Many lemma using `real.to_nnreal` mention `of_real` in their names. This PR tries to make things more coherent.

### [2022-03-25T11:39:22+00:00](https://github.com/leanprover-community/mathlib/commit/2143571557740bf69d0631339deea0d0e479df54)
feat(topology/category/Born): The category of bornologies ([#12045](https://github.com/leanprover-community/mathlib/pull/#12045))

Define `Born`, the category of bornological spaces with bounded maps.

### [2022-03-25T09:33:50+00:00](https://github.com/leanprover-community/mathlib/commit/172f31797827df673ac8b8fb0d0129b45dc976aa)
move(algebra/hom/*): Move group hom files together ([#12647](https://github.com/leanprover-community/mathlib/pull/#12647))

Move
* `algebra.group.freiman` to `algebra.hom.freiman`
* `algebra.group.hom` to `algebra.hom.basic`
* `algebra.group.hom_instances` to `algebra.hom.instances`
* `algebra.group.units_hom` to `algebra.hom.units`
* `algebra.group_action_hom` to `algebra.hom.group_action`
* `algebra.iterate_hom` to `algebra.hom.iterate`
* `algebra.non_unital_alg_hom` to `algebra.hom.non_unital_alg`

### [2022-03-25T09:03:06+00:00](https://github.com/leanprover-community/mathlib/commit/351c32ffe4ba36a84ef54fd3255447f68b4a5f24)
docs(docs/undergrad): Update TODO list ([#12752](https://github.com/leanprover-community/mathlib/pull/#12752))

Update `undergrad` with the latest additions to mathlib.

### [2022-03-25T02:56:04+00:00](https://github.com/leanprover-community/mathlib/commit/9ee02c6c2208fd7795005aa394107c0374906cca)
feat(data/pfun): Remove unneeded assumption from pfun.fix_induction ([#12920](https://github.com/leanprover-community/mathlib/pull/#12920))

Removed a hypothesis from `pfun.fix_induction`. Note that it was two "layers" deep, so this is actually a strengthening. The original can be recovered by

```lean
/-- A recursion principle for `pfun.fix`. -/
@[elab_as_eliminator] def fix_induction_original
  {f : α →. β ⊕ α} {b : β} {C : α → Sort*} {a : α} (h : b ∈ f.fix a)
  (H : ∀ a', b ∈ f.fix a' →
    (∀ a'', /- this hypothesis was removed -/ b ∈ f.fix a'' → sum.inr a'' ∈ f a' → C a'') → C a') : C a :=
by { apply fix_induction h, intros, apply H; tauto, }
```

Note that `eval_induction` copies this syntax, so the same argument was removed there as well.

This allows for some simplifications of other parts of the code. Unfortunately, it was hard to figure out what was going on in the very dense parts of `tm_to_partrec.lean` and `partrec.lean`. I mostly just mechanically removed the hypotheses that were unnecessarily being supplied, and then checked if that caused some variable to be unused and removed that etc. But I cannot tell if this allows for greater simplifications.

I also extracted two lemmas `fix_fwd` and `fix_stop` that I thought would be useful on their own.

### [2022-03-25T00:37:21+00:00](https://github.com/leanprover-community/mathlib/commit/3dd8e4d58a80ee7a21288683d50350afec4997c7)
feat(order/category/FinBoolAlg): The category of finite Boolean algebras ([#12906](https://github.com/leanprover-community/mathlib/pull/#12906))

Define `FinBoolAlg`, the category of finite Boolean algebras.

### [2022-03-25T00:06:09+00:00](https://github.com/leanprover-community/mathlib/commit/7ec1a31e4a17bf64db32806eb48ef79dbee31b3e)
fix(combinatorics/simple_graph/density): correct name in docstring ([#12921](https://github.com/leanprover-community/mathlib/pull/#12921))

### [2022-03-24T22:53:04+00:00](https://github.com/leanprover-community/mathlib/commit/352ecfe114946c903338006dd3287cb5a9955ff2)
feat(combinatorics/simple_graph/{connectivity,metric}): `connected` and `dist` ([#12574](https://github.com/leanprover-community/mathlib/pull/#12574))

Co-authored-by: Vincent Beffara <vbeffara@gmail.com>

### [2022-03-24T17:30:47+00:00](https://github.com/leanprover-community/mathlib/commit/2891e1be8c77d2ff640980f33ba74c4b53641e36)
feat(algebra/category/BoolRing): The category of Boolean rings ([#12905](https://github.com/leanprover-community/mathlib/pull/#12905))

Define `BoolRing`, the category of Boolean rings.

### [2022-03-24T17:30:46+00:00](https://github.com/leanprover-community/mathlib/commit/f53b23994ac4c13afa38d31195c588a1121d1860)
feat(model_theory/fraisse): Construct Fraïssé limits ([#12138](https://github.com/leanprover-community/mathlib/pull/#12138))

Constructs Fraïssé limits (nonuniquely)

### [2022-03-24T16:39:34+00:00](https://github.com/leanprover-community/mathlib/commit/6ac7c18d86f602be0c4f6d0608aecfdcecdbdae0)
feat(combinatorics/simple_graph/density): Edge density ([#12431](https://github.com/leanprover-community/mathlib/pull/#12431))

Define the number and density of edges of a relation and of a simple graph between two finsets.

Co-authored-by: Bhavik Mehta <bhavik.mehta8@gmail.com>

### [2022-03-24T14:49:21+00:00](https://github.com/leanprover-community/mathlib/commit/7302e116c26fbb2d78d21f4744674e571b33d309)
feat(algebra/module/torsion): define torsion submodules ([#12027](https://github.com/leanprover-community/mathlib/pull/#12027))

This file defines the a-torsion and torsion submodules for a R-module M and gives some basic properties. (The ultimate goal I'm working on is to classify the finitely-generated modules over a PID).



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2022-03-24T13:01:54+00:00](https://github.com/leanprover-community/mathlib/commit/c7745b3bf8e2890bd03bd5323553d1d0f36574c4)
chore(order/zorn): Review ([#12175](https://github.com/leanprover-community/mathlib/pull/#12175))

Lemma renames

### [2022-03-24T12:01:35+00:00](https://github.com/leanprover-community/mathlib/commit/7c48d65cd4546dcb1cfa01073cbe016fa7f3fbcc)
feat(topology/algebra/group): define `has_continuous_inv` and `has_continuous_neg` type classes ([#12748](https://github.com/leanprover-community/mathlib/pull/#12748))

This creates the `has_continuous_inv` and `has_continuous_neg` type classes. The `has_continuous_neg` class will be helpful for generalizing `topological_ring` to the setting of `non_unital_non_assoc_semiring`s (see [Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/continuous.20maps.20vanishing.20at.20infinity)). In addition, `ennreal` can have a `has_continuous_inv` instance.

### [2022-03-24T10:12:39+00:00](https://github.com/leanprover-community/mathlib/commit/eabc6192c84ccce3936a8577a987b80b95ba75f6)
feat(ring_theory/polynomial): mv_polynomial over UFD is UFD ([#12866](https://github.com/leanprover-community/mathlib/pull/#12866))

Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>

### [2022-03-24T10:12:38+00:00](https://github.com/leanprover-community/mathlib/commit/db7606402885fb96d910527d740c13291aa82f4b)
feat(*): facts about degrees/multiplicites of derivatives ([#12856](https://github.com/leanprover-community/mathlib/pull/#12856))

For `t` an `n`th repeated root of `p`, we prove that it is an `n-1`th repeated root of `p'` (and tidy the section around this). We also sharpen the theorem stating that `deg p' < deg p`.

Co-authored-by: Antoine Chambert-Loir <antoine.chambert-loir@u-paris.fr>

### [2022-03-24T10:12:37+00:00](https://github.com/leanprover-community/mathlib/commit/355645e382b3ac09dae97b419884b9f961e02aec)
chore(data/polynomial/*): delete, rename and move lemmas ([#12852](https://github.com/leanprover-community/mathlib/pull/#12852))

- Replace `eval_eq_finset_sum` and `eval_eq_finset_sum'` with `eval_eq_sum_range` and `eval_eq_sum_range'` which are consistent with `eval₂_eq_sum_range`, `eval₂_eq_sum_range'` `eval_eq_finset_sum`, `eval_eq_finset_sum'`. Notice that the type of `eval_eq_sum_range'` is different, but this lemma has not been used anywhere in mathlib.
- Move the lemma `C_eq_int_cast` from `data/polynomial/degree/definitions.lean` to `data/polynomial/basic.lean`. `C_eq_nat_cast` was already here.

### [2022-03-24T10:12:36+00:00](https://github.com/leanprover-community/mathlib/commit/c1fb0ed96f76894a5744622090cbe25b75c0a324)
feat(algebra/associated): generalize nat.prime_mul_iff ([#12850](https://github.com/leanprover-community/mathlib/pull/#12850))

### [2022-03-24T10:12:35+00:00](https://github.com/leanprover-community/mathlib/commit/a5a0d2334ae14c8bb15c28d9fbc3bdb1ea526f1b)
feat(data/list/basic): nth_le+filter lemmas ([#12836](https://github.com/leanprover-community/mathlib/pull/#12836))

### [2022-03-24T10:12:34+00:00](https://github.com/leanprover-community/mathlib/commit/892e6113a5db016b165439ac2cd96633e4e76c7d)
feat(model_theory/*): Facts about countability of first-order structures ([#12819](https://github.com/leanprover-community/mathlib/pull/#12819))

Shows that in a countable language, a structure is countably generated if and only if it is countable.

### [2022-03-24T10:12:32+00:00](https://github.com/leanprover-community/mathlib/commit/e6c6f006fd6cf4497bccede246a1fd2d59c69a5d)
feat(number_theory/arithmetic_function): The moebius function is multiplicative ([#12796](https://github.com/leanprover-community/mathlib/pull/#12796))

A fundamental property of the moebius function is that it is
multiplicative, which allows many facts about Euler products to be
expressed

### [2022-03-24T10:12:31+00:00](https://github.com/leanprover-community/mathlib/commit/0faebd2af05ae55f707572c2ed9e88472b58a4c4)
chore(fintype/card_embedding): generalize instances ([#12775](https://github.com/leanprover-community/mathlib/pull/#12775))





Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-03-24T10:12:30+00:00](https://github.com/leanprover-community/mathlib/commit/0427430122131b4b21966e1d3966295769324f59)
feat(number_theory/function_field): add completion with respect to place at infinity ([#12715](https://github.com/leanprover-community/mathlib/pull/#12715))







Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-03-24T09:09:50+00:00](https://github.com/leanprover-community/mathlib/commit/ca93096b1a6385fd78361efd0d0ba46bbc3df9d2)
feat(topology/nhds_set): add `has_basis_nhds_set` ([#12908](https://github.com/leanprover-community/mathlib/pull/#12908))

Also add `nhds_set_union`.

### [2022-03-24T07:09:35+00:00](https://github.com/leanprover-community/mathlib/commit/399ce38e98f35fa2776add29eb18212358ce52e6)
feat(measure_theory/integral): continuous functions with exponential decay are integrable ([#12539](https://github.com/leanprover-community/mathlib/pull/#12539))

### [2022-03-24T05:18:39+00:00](https://github.com/leanprover-community/mathlib/commit/df3481644c2cba7b44a58836a625e80bf6c64163)
feat(ring_theory/principal_ideal_domain): add some irreducible lemmas ([#12903](https://github.com/leanprover-community/mathlib/pull/#12903))

### [2022-03-24T05:18:38+00:00](https://github.com/leanprover-community/mathlib/commit/a9781152426b1d1b28af51874df84683ecd5f752)
refactor(category_theory/abelian): trivial generalisations ([#12897](https://github.com/leanprover-community/mathlib/pull/#12897))

Trivial generalisations of some facts in `category_theory/abelian/non_preadditive.lean`.

They are true more generally, and this refactor will make it easier to do some other clean-up I'd like to perform on abelian categories.




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-24T05:18:37+00:00](https://github.com/leanprover-community/mathlib/commit/d4e27d0bf1ef4a8ab2824e82c034c2d6ca720f0c)
chore(topology/separation): move a lemma, golf ([#12896](https://github.com/leanprover-community/mathlib/pull/#12896))

* move `t0_space_of_injective_of_continuous` up;
* add `embedding.t0_space`, use it for `subtype.t0_space`.

### [2022-03-24T05:18:35+00:00](https://github.com/leanprover-community/mathlib/commit/e968b6d125bfdce683b686ea1d3e49ce98efa8da)
feat(topology/continuous_function/bounded): add `bounded_continuous_function.tendsto_iff_tendsto_uniformly` ([#12894](https://github.com/leanprover-community/mathlib/pull/#12894))

This establishes that convergence in the metric on bounded continuous functions is equivalent to uniform convergence of the respective functions.

### [2022-03-24T05:18:34+00:00](https://github.com/leanprover-community/mathlib/commit/a370cf05dfd7aaed3139119fb5504eaedf585e4d)
chore(data/set/intervals): golf, rename ([#12893](https://github.com/leanprover-community/mathlib/pull/#12893))

* rename `set.mem_Ioo_or_eq_endpoints_of_mem_Icc` →
  `set.eq_endpoints_or_mem_Ioo_of_mem_Icc`;
* rename `set.mem_Ioo_or_eq_left_of_mem_Ico` →
  `set.eq_left_or_mem_Ioo_of_mem_Ico`;
* rename `set.mem_Ioo_or_eq_right_of_mem_Ioc` →
  `set.eq_right_or_mem_Ioo_of_mem_Ioc`;
* golf the proofs of these lemmas.

The new names better reflect the order of terms in `or`.

### [2022-03-24T05:18:33+00:00](https://github.com/leanprover-community/mathlib/commit/5ef365a33b3cea3101d6e59c2fee6bc406e02d4c)
feat(topology/separation): generalize tendsto_const_nhds_iff to t1_space ([#12883](https://github.com/leanprover-community/mathlib/pull/#12883))

I noticed this when working on the sphere eversion project

### [2022-03-24T05:18:32+00:00](https://github.com/leanprover-community/mathlib/commit/6696bdd9e032966503b0010209462f5b57db6a86)
docs(data/set/pairwise): Explain preference for `s.pairwise_disjoint id` ([#12878](https://github.com/leanprover-community/mathlib/pull/#12878))

... over `s.pairwise disjoint`.

### [2022-03-24T05:18:31+00:00](https://github.com/leanprover-community/mathlib/commit/30449be1dfd796336bbbd13369620c72cc57ef8c)
feat(data/complex/is_R_or_C): generalize `is_R_or_C.proper_space_span_singleton` to all finite dimensional submodules ([#12877](https://github.com/leanprover-community/mathlib/pull/#12877))

Also goes on to show that finite supremums of finite_dimensional submodules are finite-dimensional.

### [2022-03-24T05:18:30+00:00](https://github.com/leanprover-community/mathlib/commit/debdd909a8b23a8669b51ac8b3ea0c5fc62e9ee7)
feat(tactic/ext): support rintro patterns in `ext` ([#12875](https://github.com/leanprover-community/mathlib/pull/#12875))

The change is actually quite simple, since `rintro_pat*` has approximately the same type as `rcases_pat*`.

### [2022-03-24T05:18:29+00:00](https://github.com/leanprover-community/mathlib/commit/8e50164db46f15f2f949b9008e1a2fe62e47bb18)
chore(data/int/basic): remove some `eq.mpr`s from `int.induction_on'` ([#12873](https://github.com/leanprover-community/mathlib/pull/#12873))

### [2022-03-24T05:18:27+00:00](https://github.com/leanprover-community/mathlib/commit/ae69578289478143952b0a349c2e7a84fe85ac8f)
fix(ring_theory/algebraic): Make `is_transcendental_of_subsingleton` fully general ([#12870](https://github.com/leanprover-community/mathlib/pull/#12870))

I mistyped a single letter.

### [2022-03-24T05:18:26+00:00](https://github.com/leanprover-community/mathlib/commit/706a824c61f129e0be182bac9a9c4f6cbf1d9b0c)
feat(data/{nat, real}/sqrt): Some simple facts about square roots ([#12851](https://github.com/leanprover-community/mathlib/pull/#12851))

Prove that sqrt 1 = 1 in the natural numbers and an order relationship between real and natural square roots.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-03-24T05:18:25+00:00](https://github.com/leanprover-community/mathlib/commit/ec434b7521e0f444637aa3ad413b1512ac6ba6a3)
feat(group_theory/order_of_element): finite orderness is closed under mul ([#12750](https://github.com/leanprover-community/mathlib/pull/#12750))

### [2022-03-24T05:18:24+00:00](https://github.com/leanprover-community/mathlib/commit/c705d414937f7a0e167753473493756b83099215)
feat(analysis/locally_convex): characterize the natural bornology in terms of seminorms ([#12721](https://github.com/leanprover-community/mathlib/pull/#12721))

Add four lemmas:
* `is_vonN_bounded_basis_iff`: it suffices to check boundedness for a basis
* `seminorm_family.has_basis`: the basis sets form a basis of the topology
* `is_bounded_iff_finset_seminorm_bounded`: a set is von Neumann bounded iff it is bounded for all finite suprema of seminorms
* `is_bounded_iff_seminorm_bounded`: a set is von Neumann bounded iff it is bounded for each seminorm

Also make the set argument in `seminorm_family.basis_sets_iff` implicit.

### [2022-03-24T05:18:23+00:00](https://github.com/leanprover-community/mathlib/commit/cbd1e98cb2247e0cfec3ce3ac14072aabc0854f0)
chore(algebra/category/*): simp lemmas for of_hom ([#12638](https://github.com/leanprover-community/mathlib/pull/#12638))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-24T04:46:31+00:00](https://github.com/leanprover-community/mathlib/commit/7967128a556e7ccf0b89b8c477aca1e162ea26ec)
feat(data/complex/basic): `#ℂ = 𝔠` ([#12871](https://github.com/leanprover-community/mathlib/pull/#12871))

### [2022-03-23T23:02:08+00:00](https://github.com/leanprover-community/mathlib/commit/584ae9dbb49e339998168ae429829f432285a2aa)
chore(data/{lists,multiset}/*): More dot notation ([#12876](https://github.com/leanprover-community/mathlib/pull/#12876))

Rename many `list` and `multiset` lemmas to make them eligible to dot notation. Also add a few aliases to `↔` lemmas for even more dot notation.

Renames

### [2022-03-23T21:13:19+00:00](https://github.com/leanprover-community/mathlib/commit/e620519025ac47eec4038da2ddd8ce8f90562633)
feat(order/hom/*): more superclass instances for `order_iso_class` ([#12889](https://github.com/leanprover-community/mathlib/pull/#12889))

 * Weaken hypotheses on `order_hom_class` and some subclasses
 * Add more instances deriving specific order hom classes from `order_iso_class`

### [2022-03-23T21:13:18+00:00](https://github.com/leanprover-community/mathlib/commit/3b8d217c468961db9aae70eb460726eca8be3256)
refactor(order/upper_lower): Use `⨆` rather than `Sup` ([#12644](https://github.com/leanprover-community/mathlib/pull/#12644))

Turn `Sup (coe '' S)` into  `⋃ s ∈ S, ↑s` and other similar changes. This greatly simplifies the proofs.

### [2022-03-23T20:36:51+00:00](https://github.com/leanprover-community/mathlib/commit/cd942870af69a837bde360337bee1a88eb1611c2)
feat(category_theory/abelian): right derived functor in abelian category with enough injectives ([#12810](https://github.com/leanprover-community/mathlib/pull/#12810))

This pr shows that in an abelian category with enough injectives, if a functor preserves finite limits, then the zeroth right derived functor is naturally isomorphic to itself.  Dual to [#12403](https://github.com/leanprover-community/mathlib/pull/#12403) ↔️ 



Co-authored-by: Kyle Miller <kmill31415@gmail.com>
Co-authored-by: tb65536 <tb65536@uw.edu>
Co-authored-by: mcdoll <moritz.doll@googlemail.com>
Co-authored-by: Jakob von Raumer <jakob@von-raumer.de>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: Jireh Loreaux <loreaujy@gmail.com>
Co-authored-by: Violeta Hernández <vi.hdz.p@gmail.com>

### [2022-03-23T20:36:49+00:00](https://github.com/leanprover-community/mathlib/commit/84a438e26b0c1ace18045895b838f47e489e3337)
refactor(algebraic_geometry/*): rename structure sheaf to `Spec.structure_sheaf` ([#12785](https://github.com/leanprover-community/mathlib/pull/#12785))

Following [this Zulip message](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Rename.20.60structure_sheaf.60.20to.20.60Spec.2Estructure_sheaf.60/near/275649595), this pr renames `structure_sheaf` to `Spec.structure_sheaf`

### [2022-03-23T12:35:46+00:00](https://github.com/leanprover-community/mathlib/commit/16fb8e269c48ff92ddfe9beec814865d5dfd0fa3)
chore(model_theory/terms_and_formulas): `realize_to_prenex` ([#12884](https://github.com/leanprover-community/mathlib/pull/#12884))

Proves that `phi.to_prenex` has the same realization in a nonempty structure as the original formula `phi` directly, rather than using `semantically_equivalent`.

### [2022-03-23T12:35:45+00:00](https://github.com/leanprover-community/mathlib/commit/64472d74340349a5c73e983997660d8860e9ef2c)
feat(ring_theory/polynomial/basic): the isomorphism between `R[a]/I[a]` and `(R/I[X])/(f mod I)` for `a` a root of polynomial `f` and `I` and ideal of `R` ([#12646](https://github.com/leanprover-community/mathlib/pull/#12646))

This PR defines the isomorphism between the ring `R[a]/I[a]` and the ring `(R/I[X])/(f mod I)` for `a` a root of the polynomial `f` with coefficients in `R` and `I` an ideal of `R`. This is useful for proving the Dedekind-Kummer Theorem.

### [2022-03-23T10:41:04+00:00](https://github.com/leanprover-community/mathlib/commit/912631021bfb31a1f7f37eaccad1893267028c08)
chore(docs/references): Remove duplicate key ([#12901](https://github.com/leanprover-community/mathlib/pull/#12901))

and clean up the rest while I'm at it.

### [2022-03-23T10:41:02+00:00](https://github.com/leanprover-community/mathlib/commit/2308b53c73f773abc3f91b7a59ba8cb262e0679f)
feat(model_theory/terms_and_formulas): Make `Theory.model` a class ([#12867](https://github.com/leanprover-community/mathlib/pull/#12867))

Makes `Theory.model` a class

### [2022-03-23T10:08:10+00:00](https://github.com/leanprover-community/mathlib/commit/92f26698519cd860eab61a395d2f874a2afccfcb)
feat(algebra/homology/quasi_iso): 2-out-of-3 property ([#12898](https://github.com/leanprover-community/mathlib/pull/#12898))




Co-authored-by: Joël Riou <37772949+joelriou@users.noreply.github.com>

### [2022-03-23T08:42:10+00:00](https://github.com/leanprover-community/mathlib/commit/11a365deb372fffacbe5045af14187816e2ba62e)
feat(linear_algebra/matrix): add variants of the existing `det_units_conj` lemmas ([#12881](https://github.com/leanprover-community/mathlib/pull/#12881))

### [2022-03-23T00:37:13+00:00](https://github.com/leanprover-community/mathlib/commit/c60bfca92e6c19d011eec71fb7f0d7a5cc389e45)
chore(data/nat/prime): golf nat.dvd_prime_pow ([#12886](https://github.com/leanprover-community/mathlib/pull/#12886))

### [2022-03-22T22:13:57+00:00](https://github.com/leanprover-community/mathlib/commit/d711d2a246e9f524fe0ffe5b7ca1771142c64552)
feat(set_theory/ordinal): Small iff cardinality less than `cardinal.univ` ([#12887](https://github.com/leanprover-community/mathlib/pull/#12887))

Characterizes when a type is small in terms of its cardinality

### [2022-03-22T20:22:10+00:00](https://github.com/leanprover-community/mathlib/commit/3838b852c6753f3f71dcdbc71c0be0cf551045bc)
feat(model_theory/*): Language equivalences ([#12837](https://github.com/leanprover-community/mathlib/pull/#12837))

Defines equivalences between first-order languages

### [2022-03-22T20:22:09+00:00](https://github.com/leanprover-community/mathlib/commit/f7905f0c0d78512557662f1a80bed2dd9c25c753)
feat(order/concept): Concept lattices ([#12286](https://github.com/leanprover-community/mathlib/pull/#12286))

Define `concept`, the type of concepts of a relation, and prove it forms a complete lattice.

### [2022-03-22T20:22:08+00:00](https://github.com/leanprover-community/mathlib/commit/b226b4b6539c6547e8b598a44c24415fbf33c43f)
feat(*): `has_repr` instances for `option`-like types ([#11282](https://github.com/leanprover-community/mathlib/pull/#11282))

This provides the `has_repr` instance for `with_bot α`, `with_top α`, `with_zero α`, `with_one α`, `alexandroff α`.

### [2022-03-22T19:50:36+00:00](https://github.com/leanprover-community/mathlib/commit/980185a1a2ecb4d21445f2407b22044b56b5cd00)
feat(algebra/{group,module}/ulift): Missing `ulift` instances ([#12879](https://github.com/leanprover-community/mathlib/pull/#12879))

Add a few missing algebraic instances for `ulift` and golf a few existing ones.

### [2022-03-22T14:24:51+00:00](https://github.com/leanprover-community/mathlib/commit/6a55ba89f859f9debcdc73f61265296758ed4247)
feat(algebra/subalgebra/basic): Missing scalar instances ([#12874](https://github.com/leanprover-community/mathlib/pull/#12874))

Add missing scalar instances for `submonoid`, `subsemiring`, `subring`, `subalgebra`.

### [2022-03-22T14:24:49+00:00](https://github.com/leanprover-community/mathlib/commit/52159408aa8c91ee6aa24dd940df4514d3037034)
feat(order/filter/basic): `filter` is a `coframe` ([#12872](https://github.com/leanprover-community/mathlib/pull/#12872))

Provide the `coframe (filter α)` instance and remove now duplicated lemmas.

### [2022-03-22T14:24:48+00:00](https://github.com/leanprover-community/mathlib/commit/1f470163ec0a49ed91e95b056e4d00591fc1f62c)
refactor(order/hom/complete_lattice): Fix the definition of `frame_hom` ([#12855](https://github.com/leanprover-community/mathlib/pull/#12855))

I misread "preserves finite meet" as "preserves binary meet", meaning that currently a `frame_hom` does not have to preserve `⊤` (subtly, preserving arbitrary join does not imply that either). This fixes my mistake.

### [2022-03-22T12:35:31+00:00](https://github.com/leanprover-community/mathlib/commit/d586195418d55d8d56c2d412c35bffd9a516a3c5)
feat(data/finset/pointwise): Missing operations ([#12865](https://github.com/leanprover-community/mathlib/pull/#12865))

Define `-s`, `s⁻¹`, `s - t`, `s / t`, `s +ᵥ t`, `s • t`, `s -ᵥ t`, `a • s`, `a +ᵥ s` for `s`, `t` finsets, `a` scalar. Provide a bare API following what is already there for `s + t`, `s * t`.

### [2022-03-22T09:42:58+00:00](https://github.com/leanprover-community/mathlib/commit/28eb06f9b9c61a3da55ed6221d02e6c7a1d0a2ea)
feat(analysis/calculus): define `diff_on_int_cont` ([#12688](https://github.com/leanprover-community/mathlib/pull/#12688))

### [2022-03-22T09:42:57+00:00](https://github.com/leanprover-community/mathlib/commit/5826b2fbca781c5d67609ed99afa837533545365)
feat(topology/order/hom/esakia): Esakia morphisms ([#12241](https://github.com/leanprover-community/mathlib/pull/#12241))

Define pseudo-epimorphisms and Esakia morphisms following the hom refactor.

### [2022-03-22T08:35:26+00:00](https://github.com/leanprover-community/mathlib/commit/41d291c7ef7e3598a1dcf25b4571bea156ab5ea4)
feat(algebra/big_operators/associated): generalize prod_primes_dvd ([#12740](https://github.com/leanprover-community/mathlib/pull/#12740))

### [2022-03-22T08:03:55+00:00](https://github.com/leanprover-community/mathlib/commit/3ce4161ca5eb2544fdbbf5fec8311ba966263696)
refactor(measure_theory/integral): restrict interval integrals to real intervals ([#12754](https://github.com/leanprover-community/mathlib/pull/#12754))

This way `∫ x in 0 .. 1, (1 : real)` means what it should, not `∫ x : nat in 0 .. 1, (1 : real)`.

### [2022-03-22T06:15:55+00:00](https://github.com/leanprover-community/mathlib/commit/b0f585c56237f0d6c1c006a0b7a5a852bbf214bd)
feat(combinatorics/simple_graph/inc_matrix): Incidence matrix ([#10867](https://github.com/leanprover-community/mathlib/pull/#10867))

Define the incidence matrix of a simple graph and prove the basics, including some stuff about matrix multiplication.

Co-authored-by: Gabriel Moise <gabriel.moise@stcatz.ox.ac.uk>
Co-authored-by: Kyle Miller <kmill31415@gmail.com>



Co-authored-by: Kyle Miller <kmill31415@gmail.com>

### [2022-03-22T03:26:17+00:00](https://github.com/leanprover-community/mathlib/commit/01eb653d586c506c2c66062950d1ef9ab8f3c1d3)
chore(scripts): update nolints.txt ([#12868](https://github.com/leanprover-community/mathlib/pull/#12868))

I am happy to remove some nolints for you!

### [2022-03-22T01:36:27+00:00](https://github.com/leanprover-community/mathlib/commit/e51377fe87ec7a176074d2c2ddf152e7174bebe6)
feat(logic/basic): `ulift.down` is injective ([#12824](https://github.com/leanprover-community/mathlib/pull/#12824))

We also make the arguments to `plift.down_inj` inferred.

### [2022-03-22T00:37:25+00:00](https://github.com/leanprover-community/mathlib/commit/d71e06cc6db58f771b0c8283cbd8174c5e06e747)
feat(topology/algebra/monoid): construct a unit from limits of units and their inverses ([#12760](https://github.com/leanprover-community/mathlib/pull/#12760))

### [2022-03-21T20:08:03+00:00](https://github.com/leanprover-community/mathlib/commit/f9dc84edcadf69551919808939cba5aa090fb2d6)
feat(topology/continuous_function/units): basic results about units in `C(α, β)` ([#12687](https://github.com/leanprover-community/mathlib/pull/#12687))

This establishes a few facts about units in `C(α, β)` including the equivalence `C(α, βˣ) ≃ C(α, β)ˣ`. Moreover, when `β` is a complete normed field, we show that the spectrum of `f : C(α, β)` is precisely `set.range f`.

### [2022-03-21T19:25:50+00:00](https://github.com/leanprover-community/mathlib/commit/8001ea54ece3bd5c0d0932f1e4f6d0f142ea20d9)
feat(category_theory/abelian): right derived functor ([#12841](https://github.com/leanprover-community/mathlib/pull/#12841))

This pr dualises derived.lean. Right derived functor and natural transformation between right derived functors and related lemmas are formalised. 

The docs string currently contains more than what is in this file, but everything else will come shortly after.

### [2022-03-21T18:05:19+00:00](https://github.com/leanprover-community/mathlib/commit/25ec622f41f8bab514fcd1caa6a9290b4654dde7)
feat(data/polynomial/eval + data/polynomial/ring_division): move a lemma and remove assumptions ([#12854](https://github.com/leanprover-community/mathlib/pull/#12854))

A lemma about composition of polynomials assumed `comm_ring` and `is_domain`.  The new version assumes `semiring`.

I golfed slightly the original proof: it may very well be that a shorter proof is available!

I also moved the lemma, since it seems better for this lemma to appear in the file where the definition of `comp` appears.

### [2022-03-21T18:05:18+00:00](https://github.com/leanprover-community/mathlib/commit/fd4a034d2f490f3538d4a115c52d0db0e2396ca2)
refactor(analysis/locally_convex/with_seminorms): use abbreviations to allow for dot notation ([#12846](https://github.com/leanprover-community/mathlib/pull/#12846))

### [2022-03-21T16:35:37+00:00](https://github.com/leanprover-community/mathlib/commit/a2e48025cd4bbb5cf33c2898204014b6fdef9baa)
feat(model_theory/fraisse): Defines Fraïssé classes ([#12817](https://github.com/leanprover-community/mathlib/pull/#12817))

Defines the age of a structure
(Mostly) characterizes the ages of countable structures
Defines Fraïssé classes

### [2022-03-21T16:35:35+00:00](https://github.com/leanprover-community/mathlib/commit/1b787d6be2ffdd024b292dc1db43edfd658e68d0)
feat(linear_algebra/span): generalize span_singleton_smul_eq ([#12736](https://github.com/leanprover-community/mathlib/pull/#12736))

### [2022-03-21T16:35:34+00:00](https://github.com/leanprover-community/mathlib/commit/df299a191706fda3cb31b5d09cd1747a0510ea99)
docs(order/filter/basic): fix docstring of generate ([#12734](https://github.com/leanprover-community/mathlib/pull/#12734))

### [2022-03-21T16:35:33+00:00](https://github.com/leanprover-community/mathlib/commit/09750eb82db94a4d69f4a66a125ee07264237de5)
feat(measure_theory/function/uniform_integrable): add API for uniform integrability in the probability sense ([#12678](https://github.com/leanprover-community/mathlib/pull/#12678))

Uniform integrability in probability theory is commonly defined as the uniform existence of a number for which the expectation of the random variables restricted on the set for which they are greater than said number is arbitrarily small. We have defined it 
in mathlib, on the other hand, as uniform integrability in the measure theory sense + existence of a uniform bound of the Lp norms. 

This PR proves the first definition implies the second while a later PR will deal with the reverse direction.

### [2022-03-21T16:35:32+00:00](https://github.com/leanprover-community/mathlib/commit/715f984ad359f3e2705d14473b5bc7847784c19c)
feat(model_theory/terms_and_formulas): Prenex Normal Form ([#12558](https://github.com/leanprover-community/mathlib/pull/#12558))

Defines `first_order.language.bounded_formula.to_prenex`, a function which takes a formula and outputs an equivalent formula in prenex normal form.
Proves inductive principles based on the fact that every formula is equivalent to one in prenex normal form.

### [2022-03-21T14:42:55+00:00](https://github.com/leanprover-community/mathlib/commit/091f27e8cb680a472ff33ed90009d9d5709bb9ae)
chore(order/{complete_lattice,sup_indep}): move `complete_lattice.independent` ([#12588](https://github.com/leanprover-community/mathlib/pull/#12588))

Putting this here means that in future we can talk about `pairwise_disjoint` at the same time, which was previously defined downstream of `complete_lattice.independent`.
This commit only moves existing declarations and adjusts module docstrings.

The new authorship comes from [#5971](https://github.com/leanprover-community/mathlib/pull/#5971) and [#7199](https://github.com/leanprover-community/mathlib/pull/#7199), which predate this file.

### [2022-03-21T12:46:46+00:00](https://github.com/leanprover-community/mathlib/commit/135c57421dd1423d5044e4e467f09489e3062759)
feat(model_theory/definability): Definability lemmas ([#12262](https://github.com/leanprover-community/mathlib/pull/#12262))

Proves several lemmas to work with definability over different parameter sets.
Shows that definability is closed under projection.

### [2022-03-21T11:08:42+00:00](https://github.com/leanprover-community/mathlib/commit/86055c5df5b474d48f836d9e523ff897265845be)
split(data/{finset,set}/pointwise): Split off `algebra.pointwise` ([#12831](https://github.com/leanprover-community/mathlib/pull/#12831))

Split `algebra.pointwise` into
* `data.set.pointwise`: Pointwise operations on `set`
* `data.finset.pointwise`: Pointwise operations on `finset`

I'm crediting
* The same people for `data.set.pointwise`
* Floris for [#3541](https://github.com/leanprover-community/mathlib/pull/#3541)

### [2022-03-21T09:13:23+00:00](https://github.com/leanprover-community/mathlib/commit/8161ba2822e467c5f902c804e4269144ac601ca6)
feat(model_theory/ultraproducts): Ultraproducts and the Compactness Theorem ([#12531](https://github.com/leanprover-community/mathlib/pull/#12531))

Defines `filter.product`, a dependent version of `filter.germ`.
Defines a structure on an ultraproduct (a `filter.product` with respect to an ultrafilter).
Proves Łoś's Theorem, characterizing when an ultraproduct realizes a formula.
Proves the Compactness theorem with ultraproducts.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2022-03-21T07:40:25+00:00](https://github.com/leanprover-community/mathlib/commit/8e9abe3cc8646ef4d6b68834881d06e37e89c8a4)
feat(measure_theory/constructions/borel_space): generalize a lemma ([#12843](https://github.com/leanprover-community/mathlib/pull/#12843))

Generalize `measurable_limit_of_tendsto_metric_ae` from
`at_top : filter ℕ` to any countably generated filter on a nonempty type.

### [2022-03-21T05:51:55+00:00](https://github.com/leanprover-community/mathlib/commit/d902c222f3976e8d6a598ad625229eb04f2a26c3)
chore(category/abelian/derived): shorten proof ([#12847](https://github.com/leanprover-community/mathlib/pull/#12847))

### [2022-03-21T05:51:54+00:00](https://github.com/leanprover-community/mathlib/commit/395019eeed52ba5ec93124561b5af2046e69f8e1)
feat(algebra/homology/additive): dualise statement of chain complex to cochain complex ([#12840](https://github.com/leanprover-community/mathlib/pull/#12840))

### [2022-03-21T05:51:53+00:00](https://github.com/leanprover-community/mathlib/commit/69d3d16b40a862dab9a99b7d2fdc6097c4c9285f)
feat(polynomial/derivative): tidy+new theorems ([#12833](https://github.com/leanprover-community/mathlib/pull/#12833))

Adds `iterate_derivative_eq_zero` and strengthens other results.

New theorems: `iterate_derivative_eq_zero`, `nat_degree_derivative_le`
Deleted: `derivative_lhom` - it is one already.
Misc: Turn a docstring into a comment

Everything else only got moved around + golfed, in order to weaken assumptions.

### [2022-03-21T05:51:52+00:00](https://github.com/leanprover-community/mathlib/commit/06017e078bd706e70966459cb0c1c42df5dac416)
feat(order/compare): add 4 dot notation lemmas ([#12832](https://github.com/leanprover-community/mathlib/pull/#12832))

### [2022-03-21T05:51:51+00:00](https://github.com/leanprover-community/mathlib/commit/f5987b2a0b3c3d4ec2efdc64b29a9c54857e9edc)
chore(data/real/basic): tweak lemmas about `of_cauchy` ([#12829](https://github.com/leanprover-community/mathlib/pull/#12829))

These lemmas are about `real.of_cauchy` not `real.cauchy`, as their name suggests.
This also flips the direction of some of the lemmas to be consistent with the zero and one lemmas.
Finally, this adds the lemmas about `real.cauchy` that are missing.

### [2022-03-21T05:51:50+00:00](https://github.com/leanprover-community/mathlib/commit/772c77666915a698c87d57acbd1b9f4c12b4603d)
feat(ring_theory/algebraic): Added basic lemmas + golf ([#12820](https://github.com/leanprover-community/mathlib/pull/#12820))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-03-21T05:20:44+00:00](https://github.com/leanprover-community/mathlib/commit/60af3bda76662101c42b043c2a85eab816c2aed4)
feat(data/rat/denumerable): Make `mk_rat` into a simp lemma ([#12821](https://github.com/leanprover-community/mathlib/pull/#12821))

### [2022-03-20T20:14:43+00:00](https://github.com/leanprover-community/mathlib/commit/656f7494a3e1d69cbd2c7ccae853e359fff8c470)
feat(analysis/locally_convex): define von Neumann boundedness ([#12449](https://github.com/leanprover-community/mathlib/pull/#12449))

Define the von Neumann boundedness and show elementary properties, including that it defines a bornology.

### [2022-03-20T15:25:50+00:00](https://github.com/leanprover-community/mathlib/commit/9502db1f6b0e999623c6ada6d028d78b12b6bfd0)
refactor(group_theory/group_action/basic): Golf definition of action on cosets ([#12823](https://github.com/leanprover-community/mathlib/pull/#12823))

This PR golfs the definition of the left-multiplication action on left cosets.

I deleted `mul_left_cosets` since it's the same as `•` and has no API.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-20T12:26:39+00:00](https://github.com/leanprover-community/mathlib/commit/f2fa1cf9d252a12218cc7cb9d03bc7c715c2b29b)
feat(category_theory/abelian/*): add some missing lemmas ([#12839](https://github.com/leanprover-community/mathlib/pull/#12839))

### [2022-03-20T00:39:53+00:00](https://github.com/leanprover-community/mathlib/commit/cdd057289d01558686a1a66894efff014f5fcce2)
chore(ring_theory/algebraic): fix typo + golf ([#12834](https://github.com/leanprover-community/mathlib/pull/#12834))

### [2022-03-19T23:35:59+00:00](https://github.com/leanprover-community/mathlib/commit/6abfb1d757378178e5413d7bacd214ef9999bc27)
feat(analysis/normed_space/spectrum): Prove the Gelfand-Mazur theorem ([#12787](https://github.com/leanprover-community/mathlib/pull/#12787))

**Gelfand-Mazur theorem** For a complex Banach division algebra, the natural `algebra_map ℂ A` is an algebra isomorphism whose inverse is given by selecting the (unique) element of `spectrum ℂ a`.

- [x] depends on: [#12132](https://github.com/leanprover-community/mathlib/pull/#12132) 



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-19T21:04:04+00:00](https://github.com/leanprover-community/mathlib/commit/cd012fbe3d1a4ceecb689b2449c7509867c94e9d)
chore(ring_theory/ideal): use `ideal.mul_mem_left` instead of `submodule.smul_mem` ([#12830](https://github.com/leanprover-community/mathlib/pull/#12830))

In one place this saves one rewrite.

### [2022-03-19T19:33:01+00:00](https://github.com/leanprover-community/mathlib/commit/f1200764a4c4b0bd6be592d3657cd4c98dcb6c5d)
feat(category_theory): (co)equalizers and (co)kernels when composing with monos/epis ([#12828](https://github.com/leanprover-community/mathlib/pull/#12828))

### [2022-03-19T19:33:00+00:00](https://github.com/leanprover-community/mathlib/commit/49cd1cc6fd3ee08c7596bf3f210097560ddba8ff)
refactor(analysis/seminorm): move topology induced by seminorms to its own file ([#12826](https://github.com/leanprover-community/mathlib/pull/#12826))

Besides the copy and paste I removed the namespace `seminorm` from most parts (it is still there for the boundedness definitions and statements) and updated the module docstrings. No real code has changed.

### [2022-03-19T19:32:59+00:00](https://github.com/leanprover-community/mathlib/commit/2660d16d3625156615bc95210fc6feeb446a5442)
feat(group_theory/group_action/basic): Right action of normalizer on left cosets ([#12822](https://github.com/leanprover-community/mathlib/pull/#12822))

This PR adds the right action of the normalizer on left cosets.

### [2022-03-19T17:43:23+00:00](https://github.com/leanprover-community/mathlib/commit/48eacc63751375da61238b90773c4208e768eabc)
chore(*): update to lean 3.42.0c ([#12818](https://github.com/leanprover-community/mathlib/pull/#12818))

### [2022-03-19T14:49:29+00:00](https://github.com/leanprover-community/mathlib/commit/42dcf354c56715e8b9e3fa8df385c51606ba95e8)
chore(algebra/char_p/exp_char): golf char_eq_exp_char_iff ([#12825](https://github.com/leanprover-community/mathlib/pull/#12825))

### [2022-03-19T11:33:35+00:00](https://github.com/leanprover-community/mathlib/commit/3ba1c0230e76b8dbd19cd2d2179cd102df533dfa)
feat(group_theory/subgroup/basic): Alternate version of `mem_normalizer_iff` ([#12814](https://github.com/leanprover-community/mathlib/pull/#12814))

This PR adds an alternate version of `mem_normalizer_iff`, in terms of commuting rather than conjugation.

### [2022-03-19T11:33:34+00:00](https://github.com/leanprover-community/mathlib/commit/52b9b36ba0a37cb3598b13f80bde45298cff8b69)
feat(ring_theory/fractional_ideal): fractional ideal is one if and only if ideal is one ([#12813](https://github.com/leanprover-community/mathlib/pull/#12813))

### [2022-03-19T11:33:33+00:00](https://github.com/leanprover-community/mathlib/commit/245b614e97bce54525dc56d853e645beba8b0262)
chore(measure_theory/measure): move subtraction to a new file ([#12809](https://github.com/leanprover-community/mathlib/pull/#12809))

### [2022-03-19T11:33:32+00:00](https://github.com/leanprover-community/mathlib/commit/dae6155d371a272f0d4e009d41019c9c15ee9e13)
chore(number_theory/primorial): golf a proof ([#12807](https://github.com/leanprover-community/mathlib/pull/#12807))

Use a new lemma to golf a proof.

### [2022-03-19T11:33:31+00:00](https://github.com/leanprover-community/mathlib/commit/1d1830948298113288aa9d36835afd15ab33c622)
feat(linear_algebra/determinant): no need for `is_domain` ([#12805](https://github.com/leanprover-community/mathlib/pull/#12805))

Nontriviality is all that was actually used, and in some cases the statement is already vacuous in the trivial case.

### [2022-03-19T11:33:30+00:00](https://github.com/leanprover-community/mathlib/commit/ef69547cbb1174913f72f7909d5f71113398bb11)
feat(group_theory/finiteness): Define the minimum number of generators ([#12765](https://github.com/leanprover-community/mathlib/pull/#12765))

The PR adds a definition of the minimum number of generators, which will be needed for a statement of Schreier's lemma.

### [2022-03-19T09:56:20+00:00](https://github.com/leanprover-community/mathlib/commit/ee4472b65fd654b084d4aed16c7ad3c2117641da)
feat(group_theory/group_action/embedding): group actions apply on the codomain of embeddings ([#12798](https://github.com/leanprover-community/mathlib/pull/#12798))

### [2022-03-19T09:56:19+00:00](https://github.com/leanprover-community/mathlib/commit/c9fc9bf7d1dc5455c465a37d559fa881a6181b30)
refactor(order/filter/pointwise): Cleanup ([#12789](https://github.com/leanprover-community/mathlib/pull/#12789))

* Reduce typeclass assumptions from `monoid` to `has_mul`
* Turn lemmas into instances
* Use hom classes rather than concrete hom types
* Golf

### [2022-03-19T09:56:18+00:00](https://github.com/leanprover-community/mathlib/commit/2b6b9ffc4411958742b98cc676daa94b8e7c0efc)
feat(category_theory/abelian/derived): add left_derived_zero_iso_self ([#12403](https://github.com/leanprover-community/mathlib/pull/#12403))

We add `left_derived_zero_iso_self`: the natural isomorphism `(F.left_derived 0) ≅ F` if `preserves_finite_colimits F`.

From lean-liquid

Co-authored-by: @adamtopaz

### [2022-03-19T08:22:18+00:00](https://github.com/leanprover-community/mathlib/commit/4c60258c29abd747a33525837632cd6bda12b1e8)
chore(ring_theory/dedekind_domain/ideal): golf ([#12737](https://github.com/leanprover-community/mathlib/pull/#12737))

### [2022-03-19T03:04:31+00:00](https://github.com/leanprover-community/mathlib/commit/128c0965596a107b0986273934037a672d98bb88)
chore(scripts): update nolints.txt ([#12816](https://github.com/leanprover-community/mathlib/pull/#12816))

I am happy to remove some nolints for you!

### [2022-03-19T01:22:50+00:00](https://github.com/leanprover-community/mathlib/commit/7764c6043834e3a3b40e853696f55f0ca958112c)
feat(*/sort): sorting empty sets/singletons ([#12801](https://github.com/leanprover-community/mathlib/pull/#12801))

### [2022-03-18T21:54:51+00:00](https://github.com/leanprover-community/mathlib/commit/d04fff95f686d5c372f7895551c40e7fa683ed6b)
feat(topology/{order,separation}): several lemmas from an old branch ([#12794](https://github.com/leanprover-community/mathlib/pull/#12794))

* add `mem_nhds_discrete`;
* replace the proof of `is_open_implies_is_open_iff` by `iff.rfl`;
* add lemmas about `separated`.

### [2022-03-18T20:21:42+00:00](https://github.com/leanprover-community/mathlib/commit/7f1ba1a333d66eed531ecb4092493cd1b6715450)
feat(algebra/char_p/two): add `simp` attribute to some lemmas involving characteristic two identities ([#12800](https://github.com/leanprover-community/mathlib/pull/#12800))

I hope that these `simp` attributes will make working with `char_p R 2` smooth!

I felt clumsy with this section, so hopefully this is an improvement.

### [2022-03-18T20:21:41+00:00](https://github.com/leanprover-community/mathlib/commit/e282089f7fc89fdb4886ba7ac4b067a60f6469e7)
feat(linear_algebra/sesquilinear_form): preliminary results for nondegeneracy ([#12269](https://github.com/leanprover-community/mathlib/pull/#12269))

Several lemmas needed to define nondegenerate bilinear forms and show that the canonical pairing of the algebraic dual is nondegenerate.

Add domain restriction of bilinear maps in the second component and in both compenents.

Some type-class generalizations for symmetric, alternating, and reflexive sesquilinear forms.

### [2022-03-18T20:21:40+00:00](https://github.com/leanprover-community/mathlib/commit/076490aea276599d4a3aadd4489d4ded8be0ab9f)
feat(group_theory/nilpotent): the is_nilpotent_of_finite_tfae theorem ([#11835](https://github.com/leanprover-community/mathlib/pull/#11835))

### [2022-03-18T20:21:38+00:00](https://github.com/leanprover-community/mathlib/commit/8c89ae6f24831fdc04e464ae4c16db9e69ff99a6)
feat(ring_theory/unique_factorization_domain): some lemmas relating shapes of factorisations ([#9345](https://github.com/leanprover-community/mathlib/pull/#9345))

Given elements `a`, `b` in a `unique_factorization_monoid`, if there is an order-preserving bijection between the sets of factors of `associates.mk a` and `associates.mk b` then the prime factorisations of `a` and `b` have the same shape.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-03-18T18:32:32+00:00](https://github.com/leanprover-community/mathlib/commit/0c52d3b41d42af6c057da3ccd28205a4192a4da4)
doc(src/tactic/doc_commands): typo “between” → “better” ([#12804](https://github.com/leanprover-community/mathlib/pull/#12804))

### [2022-03-18T18:32:31+00:00](https://github.com/leanprover-community/mathlib/commit/d3703fe96871d4a8c2efe9dfe2c4448eefbc081a)
doc(archive/100-theorems-list/9_area_of_a_circle): fix `×` ([#12803](https://github.com/leanprover-community/mathlib/pull/#12803))

this file used to have the category theory `\cross` as opposed to `\x`

### [2022-03-18T18:32:30+00:00](https://github.com/leanprover-community/mathlib/commit/f4e7f82a81d89f6f3762b1d30985e917d5b8ea3c)
chore(model_theory/definability): Change variable order in definability ([#12802](https://github.com/leanprover-community/mathlib/pull/#12802))

Changes `first_order.language.definable` and `first_order.language.definable_set` to `set.definable` and `set.definable_set`.
Makes `set.definable` a `def` rather than a `structure`.

### [2022-03-18T18:32:29+00:00](https://github.com/leanprover-community/mathlib/commit/f6e85fc4c6c54c59be41c848b7703ee254489a4b)
feat(order/rel_iso): Add `subrel` instances ([#12758](https://github.com/leanprover-community/mathlib/pull/#12758))

### [2022-03-18T18:32:28+00:00](https://github.com/leanprover-community/mathlib/commit/fdd7e98c38f34cfef6c619492d3d8790966c42ae)
feat(set_theory/*): Redefine `sup f` as `supr f` ([#12657](https://github.com/leanprover-community/mathlib/pull/#12657))

### [2022-03-18T18:32:27+00:00](https://github.com/leanprover-community/mathlib/commit/290ad75715fb0721ce5a1b95136de42ee9a0995d)
feat(model_theory/terms_and_formulas): Atomic, Quantifier-Free, and Prenex Formulas ([#12557](https://github.com/leanprover-community/mathlib/pull/#12557))

Provides a few induction principles for formulas
Defines atomic formulas with `first_order.language.bounded_formula.is_atomic`
Defines quantifier-free formulas with `first_order.language.bounded_formula.is_qf`
Defines `first_order.language.bounded_formula.is_prenex` indicating that a formula is in prenex normal form.

### [2022-03-18T18:32:25+00:00](https://github.com/leanprover-community/mathlib/commit/d17ecf9ee829a68d762d9e672d1810911a648877)
feat(category_theory/abelian) : injective resolutions of an object in a category with enough injectives ([#12545](https://github.com/leanprover-community/mathlib/pull/#12545))

This pr dualises `src/category_theory/preadditive/projective_resolution.lean`. But since half of the file requires `abelian` assumption, I moved it to `src/category_theory/abelian/*`. The reason it needs `abelian` assumption is because I want class inference to deduce `exact f g` from `exact g.op f.op`.

### [2022-03-18T16:51:05+00:00](https://github.com/leanprover-community/mathlib/commit/80b8d191889b9ef2552ba2393790bcd025eb30f2)
feat(model_theory/terms_and_formulas): Language maps act on terms, formulas, sentences, and theories ([#12609](https://github.com/leanprover-community/mathlib/pull/#12609))

Defines the action of language maps on terms, formulas, sentences, and theories
Shows that said action commutes with realization



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2022-03-18T16:51:04+00:00](https://github.com/leanprover-community/mathlib/commit/bf690dd33be96fda37bfde8913ec57e6f717fe74)
feat(archive/100-theorems-list): add proof of thm 81 ([#7274](https://github.com/leanprover-community/mathlib/pull/#7274))



Co-authored-by: Ruben Van de Velde <65514131+Ruben-VandeVelde@users.noreply.github.com>

### [2022-03-18T15:25:55+00:00](https://github.com/leanprover-community/mathlib/commit/b49bc778ddf63e4093178f91fc9ad8dd3f3db211)
feat(data/nat/prime): add two lemmas with nat.primes, mul and dvd ([#12780](https://github.com/leanprover-community/mathlib/pull/#12780))

These lemmas are close to available lemmas, but I could not actually find them.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-03-18T14:52:26+00:00](https://github.com/leanprover-community/mathlib/commit/5a547aa92cbde6097c32d0e76ea8e51cf09afc62)
fix(ring_theory/power_series/basic): remove duplicate instance ([#12744](https://github.com/leanprover-community/mathlib/pull/#12744))

### [2022-03-18T14:52:25+00:00](https://github.com/leanprover-community/mathlib/commit/14ee5e03151602b78268a82195121ff74e184483)
feat(number_theory/arithmetic_function): add eq of multiplicative functions ([#12689](https://github.com/leanprover-community/mathlib/pull/#12689))

To show that two multiplicative functions are equal, it suffices to show
that they are equal on prime powers. This is a commonly used strategy
when two functions are known to be multiplicative (e.g., they're both
Dirichlet convolutions of simpler multiplicative functions).

This will be used in several ongoing commits to prove asymptotics for
squarefree numbers.

### [2022-03-18T13:10:58+00:00](https://github.com/leanprover-community/mathlib/commit/ee8db20eca77345ba3b2c3bb90e947b73879a3a8)
feat(measure_theory/group/action): add `null_measurable_set.smul` ([#12793](https://github.com/leanprover-community/mathlib/pull/#12793))

Also add `null_measurable_set.preimage` and `ae_disjoint.preimage`.

### [2022-03-18T13:10:57+00:00](https://github.com/leanprover-community/mathlib/commit/2541387ecc6183f4d40a3ff6d059c5dfbdbd5192)
refactor(data/list/big_operators): review API ([#12782](https://github.com/leanprover-community/mathlib/pull/#12782))

* merge `prod_monoid` into `big_operators`;
* review typeclass assumptions in some lemmas;
* use `to_additive` in more lemmas.

### [2022-03-18T13:10:56+00:00](https://github.com/leanprover-community/mathlib/commit/241d63d89ec81d3d81089d768b527fd4d6c0ac72)
chore(algebraic_geometry/prime_spectrum/basic): remove TODO ([#12768](https://github.com/leanprover-community/mathlib/pull/#12768))

Sober topological spaces has been defined and it has been proven (in this file) that prime spectrum is sober

### [2022-03-18T12:36:36+00:00](https://github.com/leanprover-community/mathlib/commit/cfa7f6af693b7ffd675cb36945e0bad2e63e1d97)
feat(group_theory/index): Intersection of finite index subgroups ([#12776](https://github.com/leanprover-community/mathlib/pull/#12776))

This PR proves that if `H` and `K` are of finite index in `L`, then so is `H ⊓ K`.

### [2022-03-18T10:11:28+00:00](https://github.com/leanprover-community/mathlib/commit/5ecd27adc4d81d6638db01fecf4ed6d55f87ef8c)
refactor(topology/algebra/field): make `topological_division_ring` extend `has_continuous_inv₀` ([#12778](https://github.com/leanprover-community/mathlib/pull/#12778))

Topological division ring had been rolling its own `continuous_inv` field which was almost identical to the `continuous_at_inv₀` field of `has_continuous_inv₀`. Here we refactor so that `topological_division_ring` extends `has_continuous_inv₀` instead.

- [x] depends on: [#12770](https://github.com/leanprover-community/mathlib/pull/#12770)

### [2022-03-18T01:33:57+00:00](https://github.com/leanprover-community/mathlib/commit/a7cad67554317cbc9b9363797bf19de17945032b)
doc(overview): some additions to the Analysis section ([#12791](https://github.com/leanprover-community/mathlib/pull/#12791))

### [2022-03-18T00:28:28+00:00](https://github.com/leanprover-community/mathlib/commit/a32d58ba5f43a33a2ca06eafe2dc4789ebd80b1a)
feat(analysis/*): generalize `set_smul_mem_nhds_zero` to topological vector spaces ([#12779](https://github.com/leanprover-community/mathlib/pull/#12779))

The lemma holds for arbitrary topological vector spaces and has nothing to do with normed spaces.

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-18T00:28:27+00:00](https://github.com/leanprover-community/mathlib/commit/adcfc58d385c5596e652ae50bcffbf3e697e222e)
chore(data/matrix/block): Do not print `matrix.from_blocks` with dot notation ([#12774](https://github.com/leanprover-community/mathlib/pull/#12774))

`A.from_blocks B C D` is weird and asymmetric compared to `from_blocks A B C D`. In future we might want to introduce notation.

### [2022-03-17T22:40:49+00:00](https://github.com/leanprover-community/mathlib/commit/cf8c5ff169b0d7866ec80c7665f95c0c57687fef)
feat(algebra/pointwise): Subtraction/division of sets ([#12694](https://github.com/leanprover-community/mathlib/pull/#12694))

Define pointwise subtraction/division on `set`.

### [2022-03-17T22:40:48+00:00](https://github.com/leanprover-community/mathlib/commit/32e5b6b928253a3bc2240f7cf581d352669ac86a)
feat(model_theory/terms_and_formulas): Casting and lifting terms and formulas ([#12467](https://github.com/leanprover-community/mathlib/pull/#12467))

Defines `bounded_formula.cast_le`, which maps the `fin`-indexed variables with `fin.cast_le`
Defines `term.lift_at` and `bounded_formula.lift_at`, which raise `fin`-indexed variables above a certain threshold



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2022-03-17T22:40:47+00:00](https://github.com/leanprover-community/mathlib/commit/a26dfc4c7fa2c005803112ee306ed3fdcf38ab72)
feat(analysis/normed_space/basic): add `normed_division_ring` ([#12132](https://github.com/leanprover-community/mathlib/pull/#12132))

This defines normed division rings and generalizes some of the lemmas that applied to normed fields instead to normed division rings.

This breaks one `ac_refl`; although this could be resolved by using `simp only {canonize_instances := tt}` first, it's easier to just tweak the proof.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-17T18:31:29+00:00](https://github.com/leanprover-community/mathlib/commit/2cb5edb5f13ec5b4ed5624d65a57768e710d709a)
chore(topology/algebra/group_with_zero): mark `has_continuous_inv₀` as a `Prop` ([#12770](https://github.com/leanprover-community/mathlib/pull/#12770))

Since the type was not explicitly given, Lean marked this as a `Type`.

### [2022-03-17T18:31:28+00:00](https://github.com/leanprover-community/mathlib/commit/3e6e34e4fdb1195736695f4c23bb7e9aab5b240e)
feat(linear_algebra/matrix): The Weinstein–Aronszajn identity ([#12767](https://github.com/leanprover-community/mathlib/pull/#12767))

Notably this includes the proof of the determinant of a block matrix, which we didn't seem to have in the general case.

This also renames some of the lemmas about determinants of block matrices, and adds some missing API for `inv_of` on matrices.

There's some discussion at https://math.stackexchange.com/q/4105846/1896 about whether this name is appropriate, and whether it should be called "Sylvester's determinant theorem" instead.

### [2022-03-17T18:31:27+00:00](https://github.com/leanprover-community/mathlib/commit/6bfbb49ee29ff931cea44cbbe988e07db106111e)
docs(algebra/order/floor): Update floor_semiring docs to reflect it's just an ordered_semiring ([#12756](https://github.com/leanprover-community/mathlib/pull/#12756))

The docs say that `floor_semiring` is a linear ordered semiring, but it is only an `ordered_semiring` in the code. Change the docs to reflect this fact.

### [2022-03-17T18:31:26+00:00](https://github.com/leanprover-community/mathlib/commit/ca80c8b003dcb3f7dbe0017d2e951bc687b9ad3f)
feat(data/nat/sqrt_norm_num): norm_num extension for sqrt ([#12735](https://github.com/leanprover-community/mathlib/pull/#12735))

Inspired by https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/2.20is.20not.20a.20square . The norm_num extension has to go in a separate file from `data.nat.sqrt` because `data.nat.sqrt` is a dependency of `norm_num`.

### [2022-03-17T18:31:25+00:00](https://github.com/leanprover-community/mathlib/commit/e944a998073e514a020b0be96b070fd0c2ce9eb5)
feat(algebraic_geometry/projective_spectrum) : lemmas about `vanishing_ideal` and `zero_locus` ([#12730](https://github.com/leanprover-community/mathlib/pull/#12730))

This pr mimics the corresponding construction in `Spec`; other than `projective_spectrum.basic_open_eq_union_of_projection` everything else is a direct copy.

### [2022-03-17T17:30:04+00:00](https://github.com/leanprover-community/mathlib/commit/a1bdaddfb0427f2008fc981a562c25a414f3b2fe)
chore(topology/metric_space/hausdorff_distance): move two lemmas ([#12771](https://github.com/leanprover-community/mathlib/pull/#12771))

Remove the dependence of `topology/metric_space/hausdorff_distance` on `analysis.normed_space.basic`, by moving out two lemmas.

### [2022-03-17T11:06:31+00:00](https://github.com/leanprover-community/mathlib/commit/11b2f36be049ed41a424995f50d7f5479c6e6ec7)
feat(algebraic_topology/fundamental_groupoid): Fundamental groupoid of punit ([#12757](https://github.com/leanprover-community/mathlib/pull/#12757))

Proves the equivalence of the fundamental groupoid of punit and punit

### [2022-03-17T11:06:30+00:00](https://github.com/leanprover-community/mathlib/commit/cd196a8a2061cec61b39096795da6a52de3897d2)
feat(group_theory/order_of_element): 1 is finite order, as is g⁻¹ ([#12749](https://github.com/leanprover-community/mathlib/pull/#12749))

### [2022-03-17T11:06:29+00:00](https://github.com/leanprover-community/mathlib/commit/c9c4f40b5ed69d57e4f3f48bb4cc9cf51ea45ebf)
chore(topology/compact_open): remove `continuous_map.ev`, and rename related lemmas to `eval'` ([#12738](https://github.com/leanprover-community/mathlib/pull/#12738))

This:

* Eliminates `continuous_map.ev α β` in favor of `(λ p : C(α, β) × α, p.1 p.2)`, as this unifies better and does not require lean to unfold `ev` at the right time.
* Renames `continuous_map.continuous_evalx` to `continuous_map.continuous_eval_const` to match the `smul_const`-style names.
* Renames `continuous_map.continuous_ev` to `continuous_map.continuous_eval'` to match `continuous_map.continuous_eval`.
* Renames `continuous_map.continuous_ev₁` to `continuous_map.continuous_eval_const'`.
* Adds `continuous_map.continuous_coe'` to match `continuous_map.continuous_coe`.
* Golfs some nearby lemmas.

The unprimed lemma names have the same statement but different typeclasses, so the `ev` lemmas have taken the primed name. See [this zulip thread](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Evaluation.20of.20continuous.20functions.20is.20continuous/near/275502201) for discussion about whether one set of lemmas can be removed.

### [2022-03-17T11:06:28+00:00](https://github.com/leanprover-community/mathlib/commit/a6158f1988a622da8b4568854f4680bada36c9ee)
feat(group_theory/subgroup/basic): One-sided closure induction lemmas ([#12725](https://github.com/leanprover-community/mathlib/pull/#12725))

This PR adds one-sided closure induction lemmas, which I will need for Schreier's lemma.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-03-17T11:06:27+00:00](https://github.com/leanprover-community/mathlib/commit/b1bf390d4e896c346fff3255f0e52ccea984e2cc)
feat(number_theory/function_field): the ring of integers of a function field is not a field ([#12705](https://github.com/leanprover-community/mathlib/pull/#12705))

### [2022-03-17T10:35:37+00:00](https://github.com/leanprover-community/mathlib/commit/c3ecf005cfb8364ecff068cbb9279b920ee2ae1b)
feat(group_theory/sylow): direct product of sylow groups if all normal ([#11778](https://github.com/leanprover-community/mathlib/pull/#11778))



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-03-17T09:56:23+00:00](https://github.com/leanprover-community/mathlib/commit/31391dc29c553f309c8f5ca78192a7c92c4549cf)
feat(model_theory/basic, elementary_maps): Uses `fun_like` approach for first-order maps ([#12755](https://github.com/leanprover-community/mathlib/pull/#12755))

Introduces classes `hom_class`, `strong_hom_class` to describe classes of first-order maps.

### [2022-03-17T08:18:32+00:00](https://github.com/leanprover-community/mathlib/commit/9d7a6645777134305db47f890539f0adbacc665b)
feat(algebra/parity + *): generalize lemmas about parity ([#12761](https://github.com/leanprover-community/mathlib/pull/#12761))

I moved more even/odd lemmas from nat/int to general semirings/rings.

Some files that explicitly used the nat/int namespace were changed along the way.

### [2022-03-17T07:17:48+00:00](https://github.com/leanprover-community/mathlib/commit/3ba25ea69b868ef6824afb92adfdd846e41bf4d4)
feat(topology/algebra/const_mul_action): add is_closed smul lemmas ([#12747](https://github.com/leanprover-community/mathlib/pull/#12747))

### [2022-03-17T07:17:46+00:00](https://github.com/leanprover-community/mathlib/commit/87ab09ca2e052436d4d85a4d0b6267f719b8de01)
feat(category_theory/abelian/injective_resolution): homotopy between descents of morphism and two injective resolutions ([#12743](https://github.com/leanprover-community/mathlib/pull/#12743))

This pr contains the following
* `category_theory.InjectiveResolution.desc_homotopy`: Any two descents of the same morphism are homotopic.
* `category_theory.InjectiveResolution.homotopy_equiv`: Any two injective resolutions of the same
  object are homotopically equivalent.

### [2022-03-17T06:22:26+00:00](https://github.com/leanprover-community/mathlib/commit/7000efb8b5db6c9adc9b152ad3980442ace25b27)
refactor(analysis/specific_limits): split into two files ([#12759](https://github.com/leanprover-community/mathlib/pull/#12759))

Split the 1200-line file `analysis.specific_limits` into two:
- `analysis.specific_limits.normed` imports `normed_space` and covers limits in normed rings/fields
- `analysis.specific_limits.basic` imports only topology, and is still a bit of a grab-bag, covering limits in metric spaces, ordered rings, `ennreal`, etc.

### [2022-03-17T05:18:53+00:00](https://github.com/leanprover-community/mathlib/commit/877f2e7a8b277bc1a8f161db75dede255d986db2)
refactor(linear_algebra/ray): redefine `same_ray` to allow zero vectors ([#12618](https://github.com/leanprover-community/mathlib/pull/#12618))

In a strictly convex space, the new definition is equivalent to the fact that the triangle inequality becomes an equality. The old definition was only used for nonzero vectors in `mathlib`. Also make the definition of `ray_vector` semireducible so that `ray_vector.setoid` can be an instance.

### [2022-03-17T04:20:16+00:00](https://github.com/leanprover-community/mathlib/commit/e5470580a62bf043e10976760edfe73c913eb71e)
docs(algebraic_topology/fundamental_groupoid/induced_maps): fix diagram rendering ([#12745](https://github.com/leanprover-community/mathlib/pull/#12745))

### [2022-03-17T03:03:56+00:00](https://github.com/leanprover-community/mathlib/commit/d1e13043708324e9aff458e2449ada57d5faa9e4)
feat(combinatorics/simple_graph/connectivity): API for get_vert ([#12604](https://github.com/leanprover-community/mathlib/pull/#12604))

From my Formalising Mathematics 2022 course.

### [2022-03-17T01:38:15+00:00](https://github.com/leanprover-community/mathlib/commit/192819b49c63d7609f371823337d19d88f8b3fe5)
feat(category_theory/punit): A groupoid is equivalent to punit iff it has a unique arrow between any two objects ([#12726](https://github.com/leanprover-community/mathlib/pull/#12726))

In terms of topology, when this is used with the fundamental groupoid, it means that a space is simply connected (we still need to define this) if and only if any two paths between the same points are homotopic, and contractible spaces are simply connected.

### [2022-03-17T01:38:15+00:00](https://github.com/leanprover-community/mathlib/commit/3a0532a8b7f2e5770ccabc5b56d2a7fe71fb4457)
feat(topology/homotopy/fundamental_group): prove fundamental group is independent of basepoint in path-connected spaces ([#12234](https://github.com/leanprover-community/mathlib/pull/#12234))

Adds definition of fundamental group and proves fundamental group independent of basepoint choice in path-connected spaces.



Co-authored-by: Praneeth Kolichala <praneeth.kolichala@gmail.com>

### [2022-03-16T23:51:43+00:00](https://github.com/leanprover-community/mathlib/commit/4d350b978ef8abfe97023d63e162d7d7357b2f70)
chore(*): move code, golf ([#12753](https://github.com/leanprover-community/mathlib/pull/#12753))

* move `pow_pos` and `pow_nonneg` to `algebra.order.ring`;
* use the former to golf `has_pos pnat nat`;
* fix formatting.

### [2022-03-16T21:17:30+00:00](https://github.com/leanprover-community/mathlib/commit/b3abae50b4ef96fa26398d6ae7818aa1fc251689)
chore(category_theory/preadditive/projective_resolution): some minor golf ([#12739](https://github.com/leanprover-community/mathlib/pull/#12739))

### [2022-03-16T21:17:29+00:00](https://github.com/leanprover-community/mathlib/commit/b24372f60e4bf597be50e006542a8ab85c85263e)
feat(model_theory/basic, terms_and_formulas): Helper functions for constant symbols ([#12722](https://github.com/leanprover-community/mathlib/pull/#12722))

Defines a function `language.con` from `A` to constants of the language `L[[A]]`.
Changes the coercion of a constant to a term to a function `language.constants.term`.
Proves `simp` lemmas for interpretation of constant symbols and realization of constant terms.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2022-03-16T21:17:26+00:00](https://github.com/leanprover-community/mathlib/commit/3b91c324e47c1fe25afe32b509faf5d3d24c99af)
feat(group_theory/subgroup/basic): `map_le_map_iff_of_injective` for `subtype` ([#12713](https://github.com/leanprover-community/mathlib/pull/#12713))

This PR adds the special case of `map_le_map_iff_of_injective` when the group homomorphism is `subtype`. This is useful when working with nested subgroups.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-03-16T19:40:36+00:00](https://github.com/leanprover-community/mathlib/commit/c459d2b5a246e2e14aebd7713daec2b71cc6c144)
feat(algebra/algebra/basic,data/matrix/basic): resolve a TODO about `alg_hom.map_smul_of_tower` ([#12684](https://github.com/leanprover-community/mathlib/pull/#12684))

It turns out that this lemma doesn't actually help in the place I claimed it would, so I added the lemma that does help too.

### [2022-03-16T19:40:35+00:00](https://github.com/leanprover-community/mathlib/commit/6a71007a27ccb2df4f3156b3d01e8bfb40d286c3)
feat(group_theory/quotient_group) finiteness of groups for sequences of homomorphisms ([#12660](https://github.com/leanprover-community/mathlib/pull/#12660))

### [2022-03-16T18:34:52+00:00](https://github.com/leanprover-community/mathlib/commit/2e9985e94948b92fe2ef5ffe2140b6dbdf8ccd0d)
feat(topology/algebra/order/basic): f ≤ᶠ[l] g implies limit of f ≤ limit of g ([#12727](https://github.com/leanprover-community/mathlib/pull/#12727))

There are several implications of the form `eventually_*_of_tendsto_*`,
which involve the order relationships between the limit of a function
and other constants. What appears to be missing are reverse
implications: If two functions are eventually ordered, then their limits
respect the order.

This is lemma will be used in further work on the asymptotics of
squarefree numbers

### [2022-03-16T15:39:29+00:00](https://github.com/leanprover-community/mathlib/commit/693a3ac9b7d8a9d0f802d7912a2e7317bc1709bb)
feat(number_theory/cyclotomic/basic): add is_primitive_root.adjoin ([#12716](https://github.com/leanprover-community/mathlib/pull/#12716))

We add `is_cyclotomic_extension.is_primitive_root.adjoin`.

From flt-regular

### [2022-03-16T13:40:39+00:00](https://github.com/leanprover-community/mathlib/commit/b8faf130b780a2a4b95541957e23fd8206718f13)
feat(data/finset/basic): add finset.filter_eq_self ([#12717](https://github.com/leanprover-community/mathlib/pull/#12717))

and an epsilon of cleanup

from flt-regular

### [2022-03-16T13:40:38+00:00](https://github.com/leanprover-community/mathlib/commit/d495afdd5850890b19eb1f45377b89a016bee9f3)
feat(category_theory/abelian/injective_resolution): descents of a morphism ([#12703](https://github.com/leanprover-community/mathlib/pull/#12703))

This pr dualise `src/category_theory/preadditive/projective_resolution.lean`. The reason that it is moved to `abelian` folder is because we want `exact f g` from `exact g.op f.op` instance.
This pr is splitted from [#12545](https://github.com/leanprover-community/mathlib/pull/#12545). This pr contains the following:

Given `I : InjectiveResolution X` and  `J : InjectiveResolution Y`, any morphism `X ⟶ Y` admits a descent to a chain map `J.cocomplex ⟶ I.cocomplex`. It is a descent in the sense that `I.ι` intertwine the descent and the original morphism, see `category_theory.InjectiveResolution.desc_commutes`.


(Docstring contains more than what is currently in the file, but everything else will come soon)

### [2022-03-16T13:40:36+00:00](https://github.com/leanprover-community/mathlib/commit/f21a760507e51a0723784d36363cd72a32656d67)
feat(measure_theory/function/jacobian): change of variable formula in integrals in higher dimension ([#12492](https://github.com/leanprover-community/mathlib/pull/#12492))

Let `μ` be a Lebesgue measure on a finite-dimensional real vector space, `s` a measurable set, and `f` a function which is differentiable and injective on `s`. Then `∫ x in f '' s, g x ∂μ = ∫ x in s, |(f' x).det| • g (f x) ∂μ`. (There is also a version for the Lebesgue integral, i.e., for `ennreal`-valued functions).

### [2022-03-16T11:53:36+00:00](https://github.com/leanprover-community/mathlib/commit/0964573ae0a44375604c7321ce037b2515ffe87e)
feat(set_theory/cardinal): Lift `min` and `max` ([#12518](https://github.com/leanprover-community/mathlib/pull/#12518))

### [2022-03-16T11:53:35+00:00](https://github.com/leanprover-community/mathlib/commit/717b11ecf5807c48409375806e38ca13ee2a356e)
feat(group_theory/noncomm_pi_coprod): homomorphism from pi monoids or groups ([#11744](https://github.com/leanprover-community/mathlib/pull/#11744))

Co-authored-by: Junyan Xu <junyanxumath@gmail.com>



Co-authored-by: Junyan Xu <junyanxumath@gmail.com>

### [2022-03-16T10:05:27+00:00](https://github.com/leanprover-community/mathlib/commit/a50de33ff91efe519a77d658f52603da9a426c93)
docs(algebra/group/hom): fix typo ([#12723](https://github.com/leanprover-community/mathlib/pull/#12723))

### [2022-03-16T10:05:26+00:00](https://github.com/leanprover-community/mathlib/commit/35bb571bf600b7505d77c8cc6b99f4e2a4ee828f)
chore(number_theory/primorial): speed up some proofs ([#12714](https://github.com/leanprover-community/mathlib/pull/#12714))

### [2022-03-16T10:05:25+00:00](https://github.com/leanprover-community/mathlib/commit/a8bfcfed3ed6db60ad053539f7ca5b1c3fe27b60)
feat(algebraic_geometry/projective_spectrum): basic definitions of projective spectrum ([#12635](https://github.com/leanprover-community/mathlib/pull/#12635))

This pr contains the basic definitions of projective spectrum of a graded ring:
- projective spectrum
- zero locus
- vanishing ideal

### [2022-03-16T10:05:24+00:00](https://github.com/leanprover-community/mathlib/commit/a7a2f9d4b8355f67a1855cb80c1031ac8715d409)
feat(data/nat/fib): norm_num plugin for fib ([#12463](https://github.com/leanprover-community/mathlib/pull/#12463))




Co-authored-by: Mario Carneiro <di.gama@gmail.com>
Co-authored-by: Scott Morrison <scott@tqft.net>

### [2022-03-16T10:05:23+00:00](https://github.com/leanprover-community/mathlib/commit/500a1d3228177570e327ac33831d0e410106adde)
feat(data/pnat/find): port over `nat.find` API ([#12413](https://github.com/leanprover-community/mathlib/pull/#12413))

Didn't port `pnat.find_add` because I got lost in the proof.

### [2022-03-16T10:05:22+00:00](https://github.com/leanprover-community/mathlib/commit/bbc66b5e34c8a4c7a0c97a940dfc0a6b60de87ff)
feat(group_theory/subsemigroup/basic): subsemigroups ([#12111](https://github.com/leanprover-community/mathlib/pull/#12111))

Port over submonoid implementation to a generalization: subsemigroups.
Implement submonoids via extends using old_structure_cmd, since that is
what subsemirings do.
Copy over the attribution from submonoids because the content is almost
unchanged.

The submonoid file hasn't been changed, so no proofs rely on the
subsemigroups proofs.

### [2022-03-16T08:21:55+00:00](https://github.com/leanprover-community/mathlib/commit/50691e59bee433c7331820eb5260048ef74e2ae3)
chore(measure_theory/function): split files strongly_measurable and simple_func_dense ([#12711](https://github.com/leanprover-community/mathlib/pull/#12711))

The files `strongly_measurable` and `simple_func_dense` contain general results, and results pertaining to the `L^p` space. We move the results regarding `L^p` to new files, to make sure that the main parts of the files can be imported earlier in the hierarchy. This is needed for a forthcoming integral refactor.

### [2022-03-16T08:21:54+00:00](https://github.com/leanprover-community/mathlib/commit/ba6c84dd6776c9fcfcc163f4f788c61bb9a6bca8)
feat(ring_theory/fractional_ideal): two span_singleton lemmas ([#12656](https://github.com/leanprover-community/mathlib/pull/#12656))

### [2022-03-16T08:21:53+00:00](https://github.com/leanprover-community/mathlib/commit/17c74f1980e91000a90133c55ffa9d77da7e2ccc)
feat(algebra/group_power/order): add le_pow ([#12436](https://github.com/leanprover-community/mathlib/pull/#12436))


Added a new theorem so that library search will find it.



Co-authored-by: seangolinski7 <60711021+seangolinski7@users.noreply.github.com>

### [2022-03-16T08:21:52+00:00](https://github.com/leanprover-community/mathlib/commit/91f98e82147dcbb2d68157904c1ab77dad512784)
feat(topology/bornology/hom): Locally bounded maps ([#12046](https://github.com/leanprover-community/mathlib/pull/#12046))

Define `locally_bounded_map`, the type of locally bounded maps between two bornologies.

### [2022-03-16T08:21:51+00:00](https://github.com/leanprover-community/mathlib/commit/68033a229019de90e4eb220ec767d16dc9171a17)
feat(set_theory/ordinal_arithmetic): A set of ordinals is bounded above iff it's small ([#11870](https://github.com/leanprover-community/mathlib/pull/#11870))

### [2022-03-16T07:51:24+00:00](https://github.com/leanprover-community/mathlib/commit/a452bfa13a35ba7e0f9d396fee981a8435d69b40)
feat(analysis/seminorm): three simple lemmas about balls ([#12720](https://github.com/leanprover-community/mathlib/pull/#12720))

The lemmas are in preparation to characterize the natural bornology in terms of seminorms in LCTVSs.

### [2022-03-16T05:24:58+00:00](https://github.com/leanprover-community/mathlib/commit/1f1289fc9ac04a42bfff5a4a98ca1f708fdf68d6)
feat(algebra/parity + data/{int, nat}/parity): parity lemmas for general semirings ([#12718](https://github.com/leanprover-community/mathlib/pull/#12718))

This PR proves some general facts about adding even/odd elements in a semiring, thus removing the need to proving the same results for `nat` and `int`.

### [2022-03-16T03:13:34+00:00](https://github.com/leanprover-community/mathlib/commit/cbd61731932eb5e60e2a02a6aef9b40e7a80af98)
chore(scripts): update nolints.txt ([#12728](https://github.com/leanprover-community/mathlib/pull/#12728))

I am happy to remove some nolints for you!

### [2022-03-16T00:32:33+00:00](https://github.com/leanprover-community/mathlib/commit/45061f36926dcdc434d123459059704d61684fbf)
chore(data/equiv/basic): use `option.elim` and `sum.elim` ([#12724](https://github.com/leanprover-community/mathlib/pull/#12724))

We have these functions, why not use them?

### [2022-03-15T18:38:06+00:00](https://github.com/leanprover-community/mathlib/commit/b622d4dfd1285f937c39d131399f8cd84b38ba8b)
chore(algebra/associated): move prime_dvd_prime_iff_eq ([#12706](https://github.com/leanprover-community/mathlib/pull/#12706))

### [2022-03-15T16:38:31+00:00](https://github.com/leanprover-community/mathlib/commit/7ed4f2cec258c1a1f86cd9a45adf7dc335f42ee1)
feat(group_theory/submonoid/operations): monoids are isomorphic to themselves as submonoids ([#12658](https://github.com/leanprover-community/mathlib/pull/#12658))

### [2022-03-15T15:20:21+00:00](https://github.com/leanprover-community/mathlib/commit/375419f94786972e7e16086f23ce028c0bfcaad2)
feat(algebra/algebra/subalgebra/pointwise): lemmas about `*` and `to_submodule` ([#12695](https://github.com/leanprover-community/mathlib/pull/#12695))

### [2022-03-15T14:10:30+00:00](https://github.com/leanprover-community/mathlib/commit/7582e149cba5f1faf0c4dd9d1c362d1357288a45)
feat(linear_algebra/matrix/determinant): special case of the matrix determinant lemma ([#12682](https://github.com/leanprover-community/mathlib/pull/#12682))

### [2022-03-15T14:10:28+00:00](https://github.com/leanprover-community/mathlib/commit/9c09965eaddca7af077749c4e775866752fb80e9)
feat(algebra/big_operators/finprod): finite product of power is power of finite product ([#12655](https://github.com/leanprover-community/mathlib/pull/#12655))

### [2022-03-15T13:39:45+00:00](https://github.com/leanprover-community/mathlib/commit/88a5978578fef25b985e10c318d204de8952370e)
doc(algebra/hierarchy_design): fix my name ([#12674](https://github.com/leanprover-community/mathlib/pull/#12674))

### [2022-03-15T11:51:47+00:00](https://github.com/leanprover-community/mathlib/commit/530f00883f709e35595b92e4c11b3524661dba69)
feat(linear_algebra/matrix/nonsingular_inverse): Add `matrix.list_prod_inv_reverse` ([#12691](https://github.com/leanprover-community/mathlib/pull/#12691))

### [2022-03-15T11:51:46+00:00](https://github.com/leanprover-community/mathlib/commit/7a02c9e697dc77861001f1af0418ea958bcdcdc6)
fix(set_theory/ordinal_arithmetic): remove redundant hypothesis from `CNF_rec` ([#12680](https://github.com/leanprover-community/mathlib/pull/#12680))

The hypothesis in question was a theorem that could be deduced.

### [2022-03-15T11:51:45+00:00](https://github.com/leanprover-community/mathlib/commit/a3b39c6e29449d7e5918a4bae800adf6f3661139)
feat(linear_algebra/clifford_algebra/conjugation): add lemmas showing interaction between `involute` and `even_odd` ([#12672](https://github.com/leanprover-community/mathlib/pull/#12672))

Often the even and odd submodules are defined in terms of involution, but this strategy doesn't actually work in characteristic two.

### [2022-03-15T11:51:44+00:00](https://github.com/leanprover-community/mathlib/commit/48ffeb7930247f12951ea403c9f3264977ba7e38)
feat(group_theory/finiteness): quotient of fg is fg ([#12652](https://github.com/leanprover-community/mathlib/pull/#12652))

### [2022-03-15T11:10:28+00:00](https://github.com/leanprover-community/mathlib/commit/a98202b2a444ef3fa284733d021026a0184c6b94)
chore(category_theory/preadditive/projective_resolution): typo ([#12702](https://github.com/leanprover-community/mathlib/pull/#12702))

### [2022-03-15T11:10:27+00:00](https://github.com/leanprover-community/mathlib/commit/eefa4257fbbe3328b99a41cb08ee69df244ff03f)
perf(analysis/convec/topology): remove topological_add_group.path_connected instance ([#12675](https://github.com/leanprover-community/mathlib/pull/#12675))

The linter was right in [#10011](https://github.com/leanprover-community/mathlib/pull/#10011) and `topological_add_group.path_connected` should not be an instance, because it creates enormous TC subproblems (turn on `pp.all` to get an idea of what's going on).

Apparently the instance isn't even used in mathlib.

### [2022-03-15T11:10:26+00:00](https://github.com/leanprover-community/mathlib/commit/5b90340b9f2e51e7f7dc251a2ead34625480b94a)
feat(model_theory/terms_and_formulas): Notation for terms and formulas from Flypitch ([#12630](https://github.com/leanprover-community/mathlib/pull/#12630))

Introduces some notation, localized to `first_order`, to make typing explicit terms and formulas easier.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2022-03-15T10:32:43+00:00](https://github.com/leanprover-community/mathlib/commit/d199eb99ac1fd07e8cf2d7434873ef69e3914cd4)
feat(ring_theory/graded_algebra/homogeneous_ideal): refactor `homogeneous_ideal` as a structure extending ideals ([#12673](https://github.com/leanprover-community/mathlib/pull/#12673))

We refactored `homogeneous_ideal` as a structure extending ideals so that we can define a `set_like (homogeneous_ideal \McA) A` instance.

### [2022-03-15T10:32:41+00:00](https://github.com/leanprover-community/mathlib/commit/061d04b90539d33a79398a892b06eb05950c2ac4)
feat(category_theory/monoidal): distribute tensor over direct sum ([#12626](https://github.com/leanprover-community/mathlib/pull/#12626))

This is preliminary to the monoidal structure on chain complexes.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-15T10:02:26+00:00](https://github.com/leanprover-community/mathlib/commit/078b213e94cd6e6e18797e142958babc908f8c00)
chore(category_theory/abelian/projective): fix typo ([#12701](https://github.com/leanprover-community/mathlib/pull/#12701))

### [2022-03-15T08:11:54+00:00](https://github.com/leanprover-community/mathlib/commit/92e675977762b0183d67572ca4db23314c57bd88)
fix(category_theory/bicategory): remove spaces before closing parentheses ([#12700](https://github.com/leanprover-community/mathlib/pull/#12700))

### [2022-03-15T08:11:53+00:00](https://github.com/leanprover-community/mathlib/commit/0bd6dc2a04ff24f0974bf788bb980a25d8e91ee4)
chore(measure_theory): move and rename some lemmas ([#12699](https://github.com/leanprover-community/mathlib/pull/#12699))

* move `ae_interval_oc_iff`, `ae_measurable_interval_oc_iff`, and `ae_interval_oc_iff'` to `measure_theory.measure.measure_space`, rename `ae_interval_oc_iff'` to `ae_restrict_interval_oc_iff`;
* add lemmas about `ae` and union of sets.

### [2022-03-15T08:11:52+00:00](https://github.com/leanprover-community/mathlib/commit/4b562f8226f4af5979246aabfc30f3a161222f47)
doc(data/equiv/encodable): +2 docstrings ([#12698](https://github.com/leanprover-community/mathlib/pull/#12698))

### [2022-03-15T08:11:51+00:00](https://github.com/leanprover-community/mathlib/commit/a3e0c85dcc7c71510e31f479139713bca6279709)
chore(cyclotomic/gal): update todo ([#12693](https://github.com/leanprover-community/mathlib/pull/#12693))

this mentioned a non-existing old solution which got superseded by `is_primitive_root.power_basis`, but is still not the right solution in the long term

### [2022-03-15T08:11:50+00:00](https://github.com/leanprover-community/mathlib/commit/77395f1e7ec655cf8c82745e42c7d9326131d366)
chore(algebra/module/basic): Move the scalar action earlier ([#12690](https://github.com/leanprover-community/mathlib/pull/#12690))

This is prep work for golfing some of the instances.

This also adjust the variables slightly to be in a more sensible order.

### [2022-03-15T08:11:49+00:00](https://github.com/leanprover-community/mathlib/commit/025fe7cb029a15dc8314eb24e6ed178aac275058)
feat(group_theory/abelianization): An application of the three subgroups lemma ([#12677](https://github.com/leanprover-community/mathlib/pull/#12677))

This PR uses the three subgroups lemma to prove that `⁅(commutator G).centralizer, (commutator G).centralizer⁆ ≤ subgroup.center G`.

### [2022-03-15T08:11:48+00:00](https://github.com/leanprover-community/mathlib/commit/b7978f3900aaf0426cff533d17c3862cb0629e47)
chore(analysis/seminorm): Weaken typeclasses on `convex` and `locally_convex` lemmas ([#12645](https://github.com/leanprover-community/mathlib/pull/#12645))

Generalize type-classes `normed_linearly_ordered_field` to `normed_field` (otherwise it would not work over complex numbers).

### [2022-03-15T08:11:47+00:00](https://github.com/leanprover-community/mathlib/commit/53f6d68791bb116804ede46e94befc9836099d6c)
feat(category_theory/preadditive) : definition of injective resolution ([#12641](https://github.com/leanprover-community/mathlib/pull/#12641))

This pr is splitted from [#12545](https://github.com/leanprover-community/mathlib/pull/#12545). This pr contains the definition of:
- `InjectiveResolution`;
- `has_injective_resolution` and `has_injective_resolutions`;
- injective object has injective resolution.

### [2022-03-15T08:11:46+00:00](https://github.com/leanprover-community/mathlib/commit/585d64199f1cccd3748be5cb23ac8d7047b95d83)
refactor(linear_algebra/basic): split file ([#12637](https://github.com/leanprover-community/mathlib/pull/#12637))

`linear_algebra.basic` has become a 2800 line monster, with lots of imports.

This is some further work on splitting it into smaller pieces, by extracting everything about (or needing) `span` to `linear_algebra.span`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-15T06:38:19+00:00](https://github.com/leanprover-community/mathlib/commit/2ad9b39a6290c0d27900ffe3ee3ed0387013c4b2)
feat(algebra/associated): add irreducible.not_dvd_one ([#12686](https://github.com/leanprover-community/mathlib/pull/#12686))

### [2022-03-15T03:40:54+00:00](https://github.com/leanprover-community/mathlib/commit/6d63c9be21e1e75abc1fda62d6dd638fcbac2528)
chore(scripts): update nolints.txt ([#12696](https://github.com/leanprover-community/mathlib/pull/#12696))

I am happy to remove some nolints for you!

### [2022-03-15T03:40:53+00:00](https://github.com/leanprover-community/mathlib/commit/0fd9e309769dea078468d53abd67c01cb5dda710)
feat(set_theory/ordinal_arithmetic): `smul` coincides with `mul` ([#12692](https://github.com/leanprover-community/mathlib/pull/#12692))

### [2022-03-15T03:05:43+00:00](https://github.com/leanprover-community/mathlib/commit/f337856267067a1a22e6892ff074e6e609309cff)
feat(algebra/category): show categorical image in Module agrees with range ([#12605](https://github.com/leanprover-community/mathlib/pull/#12605))

This just follows the existing code for the same fact in `AddCommGroup`.

This PR is preparing for a better API for homological calculations in `Module R`.





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-15T00:51:24+00:00](https://github.com/leanprover-community/mathlib/commit/114871795666cae015d9d479db80181704636c99)
chore(set_theory/ordinal_arithmetic): `well_founded` → `wf` ([#12615](https://github.com/leanprover-community/mathlib/pull/#12615))

### [2022-03-14T20:38:51+00:00](https://github.com/leanprover-community/mathlib/commit/8d2e8871eb2fbed1e868181a417ad54d7ca45381)
feat(number_theory/function_field): add place at infinity  ([#12245](https://github.com/leanprover-community/mathlib/pull/#12245))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-14T18:58:33+00:00](https://github.com/leanprover-community/mathlib/commit/c1c61d44d35fa366df453d7d6a4b6204d6e2f717)
feat(data/W/constructions): add constructions of W types ([#12292](https://github.com/leanprover-community/mathlib/pull/#12292))

Here I write the naturals and lists as W-types and show that the definitions are equivalent. Any other interesting examples I should add?

Co-authored-by: jlh <48520973+Jlh18@users.noreply.github.com>

### [2022-03-14T17:36:38+00:00](https://github.com/leanprover-community/mathlib/commit/2e562102a619562f4171c08a13d30cdac7d8e3c9)
chore(analysis/complex/upper_half_plane): don't use `abbreviation` ([#12679](https://github.com/leanprover-community/mathlib/pull/#12679))

Some day we should add Poincaré metric as a `metric_space` instance on `upper_half_plane`.
In the meantime, make sure that Lean doesn't use `subtype` instances for `uniform_space` and/or `metric_space`.

### [2022-03-14T15:48:03+00:00](https://github.com/leanprover-community/mathlib/commit/28775ced565cd79e0f0467aebc2277fb42667e97)
feat(tactic/interactive): guard_{hyp,target}_mod_implicit ([#12668](https://github.com/leanprover-community/mathlib/pull/#12668))

This adds two new tactics `guard_hyp_mod_implicit` and `guard_target_mod_implicit`, with the same syntax as `guard_hyp` and `guard_target`.  While the `guard_*` tactics check for syntax equality, the `guard_*_mod_implicit` tactics check for definitional equality with the `none` transparency

### [2022-03-14T13:59:47+00:00](https://github.com/leanprover-community/mathlib/commit/d8ef1de07ed272626f54692de181cf9d2c3b8364)
feat(topology/separation): add t2_space_iff ([#12628](https://github.com/leanprover-community/mathlib/pull/#12628))

From my formalising mathematics 22 course

### [2022-03-14T13:59:46+00:00](https://github.com/leanprover-community/mathlib/commit/5242a7fbc06d9845f603f8188e58474602200776)
feat(data/list/infix): add lemmas and instances ([#12511](https://github.com/leanprover-community/mathlib/pull/#12511))

### [2022-03-14T13:59:45+00:00](https://github.com/leanprover-community/mathlib/commit/df3792f83b69cd32550977a4a8e346b3bc2c53e1)
refactor(data/set): generalize `set.restrict` and take set argument first in both `set.restrict` and `subtype.restrict` ([#12510](https://github.com/leanprover-community/mathlib/pull/#12510))

Generalizes `set.restrict` to Pi types and makes both this function and `subtype.restrict` take the restricting index set before the Pi type to restrict, which makes taking the image/preimage of a set of Pi types easier (`s.restrict '' pis` is shorter than `(λ p, set.restrict p s) '' pis` -- I'd argue that this is the more common case than taking the image of a set of restricting sets on a single Pi type). Changed uses of `set.restrict` to use dot notation where possible.

### [2022-03-14T13:59:43+00:00](https://github.com/leanprover-community/mathlib/commit/c1edbec8bc59ab145b9bb06db02bcff8a765ab4b)
feat(set_theory/ordinal_topology): Basic results on the order topology of ordinals ([#11861](https://github.com/leanprover-community/mathlib/pull/#11861))

We link together various notions about ordinals to their topological counterparts.

### [2022-03-14T12:19:21+00:00](https://github.com/leanprover-community/mathlib/commit/09ea7fb00a1154b17423e8285313c61e7c427ad7)
feat(data/finset/noncomm_prod): finite pi lemmas ([#12291](https://github.com/leanprover-community/mathlib/pull/#12291))

including a few helpers

Co-authored-by: Junyan Xu <junyanxumath@gmail.com>



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-14T11:12:21+00:00](https://github.com/leanprover-community/mathlib/commit/fc882ff84d2dd751f2e18dec3daa19ea61a7410b)
chore(ci): update trepplein to version 1.1 ([#12669](https://github.com/leanprover-community/mathlib/pull/#12669))

New upstream release, fixing some performance issues.

### [2022-03-14T11:12:20+00:00](https://github.com/leanprover-community/mathlib/commit/abb8e5da31ae5fe0cbca64a01a6a85588f661eb9)
feat(set_theory/principal): If `a` isn't additive principal, it's the sum of two smaller ordinals ([#12664](https://github.com/leanprover-community/mathlib/pull/#12664))

### [2022-03-14T11:12:19+00:00](https://github.com/leanprover-community/mathlib/commit/cc6e2eb1af6a20612b72a4aab7c8a7165dc58e06)
feat(group_theory/commutator): The three subgroups lemma ([#12634](https://github.com/leanprover-community/mathlib/pull/#12634))

This PR proves the three subgroups lemma: If `⁅⁅H₂, H₃⁆, H₁⁆ = ⊥` and `⁅⁅H₃, H₁⁆, H₂⁆ = ⊥`, then `⁅⁅H₁, H₂⁆, H₃⁆ = ⊥`.

### [2022-03-14T11:12:18+00:00](https://github.com/leanprover-community/mathlib/commit/6a51706df6baee825ace37c94dc9f75b64d7f035)
chore(topology/homotopy): Move more algebraic-flavored content about fundamental groupoid to algebraic_topology folder ([#12631](https://github.com/leanprover-community/mathlib/pull/#12631))

Moved:
  - `topology/homotopy/fundamental_groupoid.lean` to `algebraic_topology/fundamental_groupoid/basic.lean`
  - the second half of `topology/homotopy/product.lean`, dealing with `fundamental_groupoid_functor` preserving products, to `algebraic_topology/fundamental_groupoid/product.lean`
  - `topology/homotopy/induced_maps.lean` to `algebraic_topology/fundamental_groupoid/induced_maps.lean`

### [2022-03-14T09:29:31+00:00](https://github.com/leanprover-community/mathlib/commit/a2544deb3d8e581b96183d138557555803eecaa5)
chore(algebra/category/Module): simp lemmas for monoidal closed ([#12608](https://github.com/leanprover-community/mathlib/pull/#12608))

I'm worried by the fact that I can't express the coercions here without using `@`. They do turn up in the wild, however!



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-14T09:29:29+00:00](https://github.com/leanprover-community/mathlib/commit/31e60c8753a5dada29a354cda54d29ddf6fc2c41)
feat(set_theory/{ordinal, ordinal_arithmetic}): Add various instances for `o.out.α` ([#12508](https://github.com/leanprover-community/mathlib/pull/#12508))

### [2022-03-14T09:29:27+00:00](https://github.com/leanprover-community/mathlib/commit/1f428f3eee791f09d747d35ad7cea352f396795e)
feat(data/list/basic): Split and intercalate are inverses ([#12466](https://github.com/leanprover-community/mathlib/pull/#12466))

Show that split and intercalate are inverses of each other (under suitable conditions)

### [2022-03-14T09:29:26+00:00](https://github.com/leanprover-community/mathlib/commit/cd001b2d91e1e6f34926e05c2788ae9f18516967)
feat(category_theory/bicategory/free): define free bicategories ([#11998](https://github.com/leanprover-community/mathlib/pull/#11998))

### [2022-03-14T08:31:44+00:00](https://github.com/leanprover-community/mathlib/commit/520f20466a26adbfc58fe2bc7fa98285ea468c14)
feat(analysis/seminorm): add lemmas for inequalities and `finset.sup` ([#12650](https://github.com/leanprover-community/mathlib/pull/#12650))

These lemmas are not lean-trivial since seminorms map to the `real` and not to `nnreal`.

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-14T08:31:43+00:00](https://github.com/leanprover-community/mathlib/commit/0f3bfda71a66e7ce52a3142dbb7124546e4738dd)
feat(analysis/complex/schwarz): some versions of the Schwarz lemma ([#12633](https://github.com/leanprover-community/mathlib/pull/#12633))

### [2022-03-14T08:31:42+00:00](https://github.com/leanprover-community/mathlib/commit/c2368be5214e645ef52a7a8b57f6a80087521ae0)
feat(topology/hom/open): Continuous open maps ([#12406](https://github.com/leanprover-community/mathlib/pull/#12406))

Define `continuous_open_map`, the type of continuous opens maps between two topological spaces, and `continuous_open_map_class`, its companion hom class.

### [2022-03-14T07:05:57+00:00](https://github.com/leanprover-community/mathlib/commit/7b7fea5535b2e3c2da58561e26b4d8917bdded56)
refactor(set_theory/cardinal_ordinal): `aleph_is_principal_aleph` → `principal_add_aleph` ([#12663](https://github.com/leanprover-community/mathlib/pull/#12663))

This matches the naming scheme used throughout `set_theory/principal.lean`.

### [2022-03-14T07:05:56+00:00](https://github.com/leanprover-community/mathlib/commit/6ebb3786a96a2694878a97ef224a65a83cff2aac)
feat(set_theory/ordinal): `ord 1 = 1` ([#12662](https://github.com/leanprover-community/mathlib/pull/#12662))

### [2022-03-14T07:05:55+00:00](https://github.com/leanprover-community/mathlib/commit/18ba39500ad9ae359fd5cacd3524b190e92ac44a)
feat(algebra/support) support of power is subset of support ([#12654](https://github.com/leanprover-community/mathlib/pull/#12654))

### [2022-03-14T07:05:54+00:00](https://github.com/leanprover-community/mathlib/commit/6b3b567f634463fd1e5a4471049f304f6f3b3d36)
chore(topology/algebra/group_with_zero): fix docstring for has_continuous_inv0 ([#12653](https://github.com/leanprover-community/mathlib/pull/#12653))

### [2022-03-14T07:05:53+00:00](https://github.com/leanprover-community/mathlib/commit/1f5950a7dcc10041c5c68f4d208b73f19ec6c765)
feat(analysis/seminorm): add lemmas for `with_seminorms` ([#12649](https://github.com/leanprover-community/mathlib/pull/#12649))

Two helper lemmas that make it easier to generate an instance for `with_seminorms`.

### [2022-03-14T07:05:51+00:00](https://github.com/leanprover-community/mathlib/commit/b6fa3beb29f035598cf0434d919694c5e98091eb)
move(topology/sets/*): Move topological types of sets together ([#12648](https://github.com/leanprover-community/mathlib/pull/#12648))

Move
* `topology.opens` to `topology.sets.opens`
* `topology.compacts` to `topology.sets.closeds` and `topology.sets.compacts`

`closeds` and `clopens` go into `topology.sets.closeds` and `compacts`, `nonempty_compacts`, `positive_compacts` and `compact_opens` go into `topology.sets.compacts`.

### [2022-03-14T07:05:50+00:00](https://github.com/leanprover-community/mathlib/commit/778dfd508b2628b5bdb6197bd4ec99503c909ba4)
chore(analysis/locally_convex/basic): generalize lemmas and add simple lemmas  ([#12643](https://github.com/leanprover-community/mathlib/pull/#12643))

Gerenalize all 'simple' lemmas for `absorb` and `absorbent` to the type-class `[semi_normed_ring 𝕜] [has_scalar 𝕜 E]`.
Additionally, add the lemmas `absorbs_empty`, `balanced_mem` and `zero_singleton_balanced`.

### [2022-03-14T07:05:49+00:00](https://github.com/leanprover-community/mathlib/commit/f8d947c7c62de323255c8b454d3eaa0b3ea3deb6)
add endofunctor.algebra ([#12642](https://github.com/leanprover-community/mathlib/pull/#12642))

This is the second attempt at the following outdated pull request: https://github.com/leanprover-community/mathlib/pull/12295

The original post:
In this PR I define algebras of endofunctors, make the forgetful functor to the ambient category, and show that initial algebras have isomorphisms as their structure maps. This is mostly taken from `monad.algebra`.

### [2022-03-14T05:19:50+00:00](https://github.com/leanprover-community/mathlib/commit/174f1da1d78ef317a64e56a6340a30e540cf35fd)
refactor(set_theory/ordinal_arithmetic): Turn various results into simp lemmas ([#12661](https://github.com/leanprover-community/mathlib/pull/#12661))

In order to do this, we had to change the direction of various equalities.

### [2022-03-14T05:19:49+00:00](https://github.com/leanprover-community/mathlib/commit/ad0988b3ff0e0f0700a3002eca7e67022fab3738)
docs(algebra/*): Add docstrings to additive lemmas ([#12578](https://github.com/leanprover-community/mathlib/pull/#12578))

Many additive lemmas had no docstrings while their multiplicative counterparts had. This adds them in all files under `algebra`.

### [2022-03-14T04:48:58+00:00](https://github.com/leanprover-community/mathlib/commit/580e1d95b35b80c0619ff29261c4332d080ab071)
feat(analysis/inner_product_space/pi_L2): `linear_isometry.extend` ([#12192](https://github.com/leanprover-community/mathlib/pull/#12192))

Let `S` be a subspace of a finite-dimensional inner product
space `V`.  A linear isometry mapping `S` into `V` can be extended to a
full isometry of `V`.  Note that this is false if we remove the
finite-dimensional hypothesis; consider the shift operator
(0, x_2, x_3, ...) to (x_2, x_3, x_4, ...).

I hope that the naming choice is consistent.  Combining the two
`simp only` blocks in `linear_isometry.extend_apply` results in a
timeout, but they seem to work okay split up.

Co-authored-by: Daniel Packer



Co-authored-by: Daniel Packer <62404584+Daniel-Packer@users.noreply.github.com>
Co-authored-by: Hans Parshall <hparshall@users.noreply.github.com>

### [2022-03-14T02:40:00+00:00](https://github.com/leanprover-community/mathlib/commit/3751ec63877c2b0fe3080e39ec461398e6301640)
feat(measure_theory/group/fundamental_domain): ess_sup_measure_restrict ([#12603](https://github.com/leanprover-community/mathlib/pull/#12603))

If `f` is invariant under the action of a countable group `G`, and `μ` is a `G`-invariant measure with a fundamental domain `s`, then the `ess_sup` of `f` restricted to `s` is the same as that of `f` on all of its domain.

Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>



Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2022-03-13T14:52:04+00:00](https://github.com/leanprover-community/mathlib/commit/223e7428813a5bf6c4c49bad8435cd1dabd43778)
feat(analysis/*/{exponential, spectrum}): spectrum of a selfadjoint element is real ([#12417](https://github.com/leanprover-community/mathlib/pull/#12417))

This provides several properties of the exponential function and uses it to prove that for `𝕜 = ℝ` or `𝕜 = ℂ`, `exp 𝕜 𝕜` maps the spectrum of `a : A` (where `A` is a `𝕜`-algebra) into the spectrum of `exp 𝕜 A a`. In addition, `exp ℂ A (I • a)` is unitary when `a` is selfadjoint. Consequently, the spectrum of a selfadjoint element is real.

### [2022-03-13T13:32:14+00:00](https://github.com/leanprover-community/mathlib/commit/7d34f786074e58fda1bbaa44600b3110713d79e1)
chore(algebra/algebra/subalgebra): reduce imports ([#12636](https://github.com/leanprover-community/mathlib/pull/#12636))

Splitting a file, and reducing imports. No change in contents.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-13T07:59:44+00:00](https://github.com/leanprover-community/mathlib/commit/daa257ff3a9c62e08f9a9edcadf9da5c27a98004)
feat(analysis/normed_space/star/basic): `matrix.entrywise_sup_norm_star_eq_norm` ([#12201](https://github.com/leanprover-community/mathlib/pull/#12201))

This is precisely the statement needed for a `normed_star_monoid`
instance on matrices using the entrywise sup norm.





Co-authored-by: Hans Parshall <hparshall@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-03-13T04:14:17+00:00](https://github.com/leanprover-community/mathlib/commit/73530b52482ea71f5f4ab7282940195a67978fb7)
feat(algebra/algebra/spectrum): prove spectral inclusion for algebra homomorphisms ([#12573](https://github.com/leanprover-community/mathlib/pull/#12573))

If `φ : A →ₐ[R] B` is an `R`-algebra homomorphism, then for any `a : A`, `spectrum R (φ a) ⊆ spectrum R a`.

### [2022-03-13T00:04:24+00:00](https://github.com/leanprover-community/mathlib/commit/9f1f8c13f156bce43814c85eb8cdd4a2155f52cd)
feat(ring_theory/graded_algebra/homogeneous_ideal): definition of irrelevant ideal of a graded algebra ([#12548](https://github.com/leanprover-community/mathlib/pull/#12548))

For an `ℕ`-graded ring `⨁ᵢ 𝒜ᵢ`, the irrelevant ideal refers to `⨁_{i>0} 𝒜ᵢ`.

This construction is used in the Proj construction in algebraic geometry.

### [2022-03-12T21:08:56+00:00](https://github.com/leanprover-community/mathlib/commit/5b369417050b54da0f2ebc002728702fee741106)
feat(data/list/basic): Stronger form of `fold_fixed` ([#12613](https://github.com/leanprover-community/mathlib/pull/#12613))

### [2022-03-12T19:48:16+00:00](https://github.com/leanprover-community/mathlib/commit/3da03b9799d31313f69cf651166f2815dbf13e25)
refactor(group_theory/commutator): Use variables and rearrange lemmas ([#12629](https://github.com/leanprover-community/mathlib/pull/#12629))

This PR adds variables, and rearranges some of the lemmas (moving the lemmas about normal subgroups to a separate section).

### [2022-03-12T18:01:22+00:00](https://github.com/leanprover-community/mathlib/commit/23269bf0f33f65c041eb497990b32bc7d49c9778)
feat(category_theory/preadditive/Mat): ring version ([#12617](https://github.com/leanprover-community/mathlib/pull/#12617))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-12T18:01:21+00:00](https://github.com/leanprover-community/mathlib/commit/707df2cd5c849064fc5ea2ecde2260bba80cfd85)
feat(model_theory/definability): Definability with parameters ([#12611](https://github.com/leanprover-community/mathlib/pull/#12611))

Extends the definition of definable sets to include a parameter set.
Defines shorthands is_definable₁ and is_definable₂ for 1- and 2-dimensional definable sets.

### [2022-03-12T18:01:20+00:00](https://github.com/leanprover-community/mathlib/commit/9293174a3969cd6bce2b30c5b7188b6ec156a5a7)
feat(algebra/category/Module): monoidal_preadditive ([#12607](https://github.com/leanprover-community/mathlib/pull/#12607))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-12T18:01:19+00:00](https://github.com/leanprover-community/mathlib/commit/e4ea2bca7d1aee97f78ccfa96b4f10afcccfc923)
feat(topology/algebra/continuous_monoid_hom): Define the Pontryagin dual ([#12602](https://github.com/leanprover-community/mathlib/pull/#12602))

This PR adds the definition of the Pontryagin dual.

We're still missing the locally compact instance. I thought I could get it from `closed_embedding (to_continuous_map : continuous_monoid_hom A B → C(A, B))`, but actually `C(A, B)` is almost never locally compact.

### [2022-03-12T18:01:18+00:00](https://github.com/leanprover-community/mathlib/commit/5a9fb92b86469f4111a69819ac2ee21d0de3dfd0)
feat(topology/category/Locale): The category of locales ([#12580](https://github.com/leanprover-community/mathlib/pull/#12580))

Define `Locale`, the category of locales, as the opposite of `Frame`.

### [2022-03-12T18:01:17+00:00](https://github.com/leanprover-community/mathlib/commit/96bae07c5c5190791b1c668cdfcebe80c3ab6253)
feat(order/complete_lattice): add `complete_lattice.independent_pair` ([#12565](https://github.com/leanprover-community/mathlib/pull/#12565))

This makes `complete_lattice.independent` easier to work with in the degenerate case.

### [2022-03-12T16:17:42+00:00](https://github.com/leanprover-community/mathlib/commit/7e5ac6ad38f5e789d3ef7b0dfe1d945b495f486b)
chore(analysis/convex/strict): Reduce typeclass assumptions, golf ([#12627](https://github.com/leanprover-community/mathlib/pull/#12627))

Move lemmas around so they are stated with the correct generality. Restate theorems using pointwise operations. Golf proofs. Fix typos in docstrings.

### [2022-03-12T16:17:41+00:00](https://github.com/leanprover-community/mathlib/commit/22bdc8eca9e680c27dc7c578db96542baba0a6e0)
feat(order/upper_lower): Upper/lower sets ([#12189](https://github.com/leanprover-community/mathlib/pull/#12189))

Define upper and lower sets both as unbundled predicates and as bundled types.

Co-authored-by: Sara Rousta <@SaraRousta>

### [2022-03-12T15:43:41+00:00](https://github.com/leanprover-community/mathlib/commit/dc4e5cb4d1e1c2943d99503946ebbc244a7f4eec)
chore(analysis): move lemmas around ([#12621](https://github.com/leanprover-community/mathlib/pull/#12621))

* move `smul_unit_ball` to `analysis.normed_space.pointwise`, rename it to `smul_unit_ball_of_pos`;
* reorder lemmas in `analysis.normed_space.pointwise`;
* add `vadd_ball_zero`, `vadd_closed_ball_zero`, `smul_unit`, `affinity_unit_ball`, `affinity_unit_closed_ball`.

Co-authored-by: Yaël Dillies <yael.dillies@gmail.com>

### [2022-03-12T14:08:13+00:00](https://github.com/leanprover-community/mathlib/commit/7257ee7159ef64d35d8a844f032c04c3e14c7ff7)
chore(data/nat/prime): restate card_multiples without finset.sep ([#12625](https://github.com/leanprover-community/mathlib/pull/#12625))

As suggested by Eric Wieser in [#12592](https://github.com/leanprover-community/mathlib/pull/#12592).

### [2022-03-12T14:08:12+00:00](https://github.com/leanprover-community/mathlib/commit/a63b99c3f8f3cc4ff6d56404f43933a2681a7c84)
chore(category_theory/closed/monoidal): fix notation ([#12612](https://github.com/leanprover-community/mathlib/pull/#12612))

Previously the `C` in the internal hom arrow ` ⟶[C] ` was hardcoded, which wasn't very useful!

I've also reduced the precedence slightly, so we now require more parentheses, but I think these are less confusing rather than more so it is a good side effect?



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-12T14:08:11+00:00](https://github.com/leanprover-community/mathlib/commit/956f3dbc0ca129d94822dbed4ad17f883f2ac011)
chore(category_theory/limits): correct lemma names ([#12606](https://github.com/leanprover-community/mathlib/pull/#12606))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-12T14:08:10+00:00](https://github.com/leanprover-community/mathlib/commit/9456a74453da5a16e6c8aaf6773ecf112b7b2ced)
feat(group_theory/commutator): Prove `commutator_eq_bot_iff_le_centralizer` ([#12598](https://github.com/leanprover-community/mathlib/pull/#12598))

This lemma is needed for the three subgroups lemma.

### [2022-03-12T14:08:09+00:00](https://github.com/leanprover-community/mathlib/commit/b9ab27bd5c00250e34d1466f5ef659bc08c09ead)
feat(group_theory/subgroup/basic): add eq_one_of_noncomm_prod_eq_one_of_independent ([#12525](https://github.com/leanprover-community/mathlib/pull/#12525))

`finset.noncomm_prod` is “injective” in `f` if `f` maps into independent subgroups.  It
generalizes (one direction of) `subgroup.disjoint_iff_mul_eq_one`.

### [2022-03-12T13:35:45+00:00](https://github.com/leanprover-community/mathlib/commit/b21c1c9b683a7c3e1e82bf1fd4142e9df494e0cb)
split(analysis/locally_convex/basic): Split off `analysis.seminorm` ([#12624](https://github.com/leanprover-community/mathlib/pull/#12624))

Move `balanced`, `absorbs`, `absorbent` to a new file.

For `analysis.seminorm`, I'm crediting
* Jean for [#4827](https://github.com/leanprover-community/mathlib/pull/#4827)
* myself for
  * [#9097](https://github.com/leanprover-community/mathlib/pull/#9097)
  * [#11487](https://github.com/leanprover-community/mathlib/pull/#11487)
* Moritz for
  * [#11329](https://github.com/leanprover-community/mathlib/pull/#11329)
  * [#11414](https://github.com/leanprover-community/mathlib/pull/#11414)
  * [#11477](https://github.com/leanprover-community/mathlib/pull/#11477)

For `analysis.locally_convex.basic`, I'm crediting
* Jean for [#4827](https://github.com/leanprover-community/mathlib/pull/#4827)
* Bhavik for
  * [#7358](https://github.com/leanprover-community/mathlib/pull/#7358)
  * [#9097](https://github.com/leanprover-community/mathlib/pull/#9097)
* myself for
  * [#9097](https://github.com/leanprover-community/mathlib/pull/#9097)
  * [#10999](https://github.com/leanprover-community/mathlib/pull/#10999)
  * [#11487](https://github.com/leanprover-community/mathlib/pull/#11487)

### [2022-03-12T11:37:20+00:00](https://github.com/leanprover-community/mathlib/commit/a4187fef62bc41fdd991e5721b325e141a65deee)
chore(algebra/category/Module): remove unnecessary universe restriction ([#12610](https://github.com/leanprover-community/mathlib/pull/#12610))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-12T11:37:19+00:00](https://github.com/leanprover-community/mathlib/commit/31d28c622613298274555c9833241c8edfdab893)
fix(src/algebra/big_operators/multiset): unify prod_le_pow_card and prod_le_of_forall_le ([#12589](https://github.com/leanprover-community/mathlib/pull/#12589))

using the name `prod_le_pow_card` as per https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/duplicate.20lemmas
but use the phrasing of prod_le_of_forall_le with non-implicit
`multiset`, as that is how it is used.

### [2022-03-12T11:06:34+00:00](https://github.com/leanprover-community/mathlib/commit/2241588bebcfe5fe6cf9c6130b9da29f920592bb)
feat(topology/homotopy): Homotopic maps induce naturally isomorphic functors between fundamental groupoid ([#11595](https://github.com/leanprover-community/mathlib/pull/#11595))



Co-authored-by: prakol16 <prakol16@users.noreply.github.com>

### [2022-03-12T09:57:54+00:00](https://github.com/leanprover-community/mathlib/commit/5f3f70fe6331ff292051fd5bd341bb4ee14b4088)
doc(category_theory/monoidal/rigid): noting future work ([#12620](https://github.com/leanprover-community/mathlib/pull/#12620))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-12T09:57:53+00:00](https://github.com/leanprover-community/mathlib/commit/3d41a5bd67eb415bf30c540ce887245d50bb021a)
refactor(group_theory/commutator): Golf proof of `commutator_mono` ([#12619](https://github.com/leanprover-community/mathlib/pull/#12619))

This PR golfs the proof of `commutator_mono` by using `commutator_le` rather than `closure_mono`.

### [2022-03-12T09:57:52+00:00](https://github.com/leanprover-community/mathlib/commit/72c6979b088577e8a878e50ee9f6b4199e44a9fe)
refactor(set_theory/ordinal_arithmetic): remove dot notation ([#12614](https://github.com/leanprover-community/mathlib/pull/#12614))

### [2022-03-12T08:36:18+00:00](https://github.com/leanprover-community/mathlib/commit/3aaa5647656ce829508b1faf11b3e68d4d3a95da)
refactor(group_theory/commutator): Golf proof of `commutator_comm` ([#12600](https://github.com/leanprover-community/mathlib/pull/#12600))

This PR golfs the proof of `commutator_comm`.

### [2022-03-12T05:57:32+00:00](https://github.com/leanprover-community/mathlib/commit/1463f592a0a5aa3b73972c9ed333ee7a9ddb8e6b)
fix(tactic/suggest): fixing `library_search` ([#12616](https://github.com/leanprover-community/mathlib/pull/#12616))

Further enhancing `library_search` search possibilities for 'ne' and 'not eq'

Related: https://github.com/leanprover-community/mathlib/pull/11742

### [2022-03-12T05:57:31+00:00](https://github.com/leanprover-community/mathlib/commit/e8d0cacfd41dd8d94f1a9b40bc4d4d986481b74f)
feat(analysis/inner_product_space/adjoint): gram lemmas ([#12139](https://github.com/leanprover-community/mathlib/pull/#12139))

The gram operator is a self-adjoint, positive operator.



Co-authored-by: Hans Parshall <hparshall@users.noreply.github.com>

### [2022-03-12T04:22:20+00:00](https://github.com/leanprover-community/mathlib/commit/1eaf499975153f102a132a5d9b8d06f5208b5fc8)
feat(group_theory/subgroup/basic): {multiset_,}noncomm_prod_mem ([#12523](https://github.com/leanprover-community/mathlib/pull/#12523))

and same for submonoids.

### [2022-03-12T04:22:19+00:00](https://github.com/leanprover-community/mathlib/commit/6ee6203c67f164103567c9bc22f0da931ecf829e)
feat(counterexample) : a homogeneous ideal that is not prime but homogeneously prime ([#12485](https://github.com/leanprover-community/mathlib/pull/#12485))

For graded rings, if the indexing set is nice, then a homogeneous ideal `I` is prime if and only if it is homogeneously prime, i.e. product of two homogeneous elements being in `I` implying at least one of them is in `I`. This fact is in `src/ring_theory/graded_algebra/radical.lean`. This counter example is meant to show that "nice condition" at least needs to include cancellation property by exhibiting an ideal in Zmod4^2 graded by a two element set being homogeneously prime but not prime. In [#12277](https://github.com/leanprover-community/mathlib/pull/#12277), Eric suggests that this counter example is worth pr-ing, so here is the pr.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-12T02:28:54+00:00](https://github.com/leanprover-community/mathlib/commit/2e7483d268b8ee6c2904d6fdc8e4d5d7f0070fab)
refactor(group_theory/commutator): Move and golf `commutator_le` ([#12599](https://github.com/leanprover-community/mathlib/pull/#12599))

This PR golfs `commutator_le` and moves it earlier in the file so that it can be used earlier.

This PR will conflict with [#12600](https://github.com/leanprover-community/mathlib/pull/#12600), so don't merge them simultaneously (bors d+ might be better).

### [2022-03-12T02:28:53+00:00](https://github.com/leanprover-community/mathlib/commit/09d0f028d23235444b400510f542e84cc75ce3c7)
chore({category_theory,order}/category/*): Missing `dsimp` lemmas ([#12593](https://github.com/leanprover-community/mathlib/pull/#12593))

Add the `dsimp` lemmas stating `↥(of α) = α `. Also rename the few `to_dual` functors to `dual` to match the other files.

### [2022-03-12T02:28:52+00:00](https://github.com/leanprover-community/mathlib/commit/4e302f549f48ac2b274108dea5fcc6d4cc1ac5fb)
feat(data/nat): add card_multiples ([#12592](https://github.com/leanprover-community/mathlib/pull/#12592))

Co-authored-by: Manuel Candales <manuelcandales@gmail.com>





Co-authored-by: Thomas Browning <tb65536@uw.edu>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-03-12T02:28:51+00:00](https://github.com/leanprover-community/mathlib/commit/222faeda5e507350339adce3dc1b529f68c1bbc4)
feat(algebra/group/units_hom): make `is_unit.map` work on `monoid_hom_class` ([#12577](https://github.com/leanprover-community/mathlib/pull/#12577))

`ring_hom.is_unit_map` and `mv_power_series.is_unit_constant_coeff` are now redundant, but to keep this diff small I've left them around.

### [2022-03-12T02:28:50+00:00](https://github.com/leanprover-community/mathlib/commit/8364980d73f2345fbc5b06db6f53fcde86696f31)
feat(category_theory): interderivability of kernel and equalizers in preadditive cats ([#12576](https://github.com/leanprover-community/mathlib/pull/#12576))

### [2022-03-11T23:40:59+00:00](https://github.com/leanprover-community/mathlib/commit/c0a51cf2de54089d69301befc4c73bbc2f5c7342)
chore(*): update to 3.41.0c ([#12591](https://github.com/leanprover-community/mathlib/pull/#12591))

### [2022-03-11T21:59:23+00:00](https://github.com/leanprover-community/mathlib/commit/e7db1936ac39f511d7247f20ed2a11658782e159)
feat(algebra/module): add `module.nontrivial` ([#12594](https://github.com/leanprover-community/mathlib/pull/#12594))

### [2022-03-11T19:18:32+00:00](https://github.com/leanprover-community/mathlib/commit/5856c0c4725c5ccb462df116edb5daad2ccf84a9)
feat(data/finset/noncomm_prod): add noncomm_prod_mul_distrib ([#12524](https://github.com/leanprover-community/mathlib/pull/#12524))

The non-commutative version of `finset.sum_union`.

### [2022-03-11T19:18:31+00:00](https://github.com/leanprover-community/mathlib/commit/dc5f7fbf06912c55134411276f15af6cf2c2463d)
feat(set_theory/ordinal_arithmetic): Further theorems on normal functions ([#12484](https://github.com/leanprover-community/mathlib/pull/#12484))

We prove various theorems giving more convenient characterizations of normal functions.

### [2022-03-11T19:18:30+00:00](https://github.com/leanprover-community/mathlib/commit/e3ad468bb46b2773596ec7329c4a298d71a1df08)
feat(data/list/prod_monoid): add prod_eq_pow_card ([#12473](https://github.com/leanprover-community/mathlib/pull/#12473))

### [2022-03-11T17:31:10+00:00](https://github.com/leanprover-community/mathlib/commit/7dcba96ecb263b35a92b9d9ef15892073b93c871)
feat(order/monotone): Folds of monotone functions are monotone ([#12581](https://github.com/leanprover-community/mathlib/pull/#12581))

### [2022-03-11T17:31:09+00:00](https://github.com/leanprover-community/mathlib/commit/3dcc168999e8bcfddcacf49a76ae3cc4a533988d)
feat(linear_algebra/projective_space/basic): The projectivization of a vector space. ([#12438](https://github.com/leanprover-community/mathlib/pull/#12438))

This provides the initial definitions for the projective space associated to a vector space.

Future work:
- Linear subspaces of projective spaces, connection with subspaces of the vector space, etc.
- The incidence geometry structure of a projective space.
- The fundamental theorem of projective geometry.

I will tag this PR as RFC for now. If you see something missing from this *initial* PR, please let me know!

### [2022-03-11T16:25:21+00:00](https://github.com/leanprover-community/mathlib/commit/003701f0ff446ded831ac2248df4649b222f96b6)
feat(model_theory/substructures): Facts about substructures ([#12258](https://github.com/leanprover-community/mathlib/pull/#12258))

Shows that `closure L s` can be viewed as the set of realizations of terms over `s`.
Bounds the cardinality of `closure L s` by the cardinality of the type of terms.
Characterizes `closure L[[A]] s`.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2022-03-11T16:25:19+00:00](https://github.com/leanprover-community/mathlib/commit/d6f337dfda2740dfad795d85ab5a1cd7df05eed2)
feat(set_theory/ordinal_arithmetic): The derivative of multiplication ([#12202](https://github.com/leanprover-community/mathlib/pull/#12202))

We prove that for `0 < a`, `deriv ((*) a) b = a ^ ω * b`.

### [2022-03-11T13:44:08+00:00](https://github.com/leanprover-community/mathlib/commit/e6fef3977952dcaab3c697a4e4e67db026578da6)
feat(algebra/order/monoid): add `with_zero.canonically_linear_ordered_add_monoid` ([#12568](https://github.com/leanprover-community/mathlib/pull/#12568))

This also removes some non-terminal `simp`s in nearby proofs

### [2022-03-11T13:44:07+00:00](https://github.com/leanprover-community/mathlib/commit/12786d041faa9d83ccddc89f23d158e18673afcd)
feat(order/sup_indep): add `finset.sup_indep_pair` ([#12549](https://github.com/leanprover-community/mathlib/pull/#12549))

This is used to provide simp lemmas about `sup_indep` on `bool` and `fin 2`.

### [2022-03-11T13:44:06+00:00](https://github.com/leanprover-community/mathlib/commit/4dc4dc8bc6c2493668d2a1544b752571e8abf4f0)
chore(topology/algebra/module/basic): cleanup variables and coercions ([#12542](https://github.com/leanprover-community/mathlib/pull/#12542))

Having the "simple" variables in the lemmas statements rather than globally makes it easier to move lemmas around in future.
This also mean lemmas like `coe_comp` can have their arguments in a better order, as it's easier to customize the argument order at the declaration.

This also replaces a lot of `(_ : M₁ → M₂)`s with `⇑_` for brevity in lemma statements.

No lemmas statements (other than argument reorders) or proofs have changed.

### [2022-03-11T10:13:17+00:00](https://github.com/leanprover-community/mathlib/commit/02e0ab2c61ace10bd8ee72e8226cd4db33177dac)
refactor(group_theory/commutator): Golf some proofs ([#12586](https://github.com/leanprover-community/mathlib/pull/#12586))

This PR golfs the proofs of some lemmas in `commutator.lean`.

I also renamed `bot_commutator` and `commutator_bot` to `commutator_bot_left` and `commutator_bot_right`, since "bot_commutator" didn't sound right to me (you would say "the commutator of H and K", not "H commutator K"), but I can revert to the old name if you want.

### [2022-03-11T10:13:16+00:00](https://github.com/leanprover-community/mathlib/commit/d9a774e2898b8be37a71d3cdcd3c7fa5da8f6023)
feat(order/hom): `prod.swap` as an `order_iso` ([#12585](https://github.com/leanprover-community/mathlib/pull/#12585))

### [2022-03-11T08:22:26+00:00](https://github.com/leanprover-community/mathlib/commit/840a04255f731517972f7b26b0f113997a868ddc)
feat(data/list/basic): Miscellaneous `fold` lemmas ([#12579](https://github.com/leanprover-community/mathlib/pull/#12579))

### [2022-03-11T08:22:25+00:00](https://github.com/leanprover-community/mathlib/commit/1a581ede8b971306f5bc30a39bb7e92d66ac07ed)
refactor(group_theory/solvable): Golf proof ([#12552](https://github.com/leanprover-community/mathlib/pull/#12552))

This PR golfs the proof of insolvability of S_5, using the new commutator notation.

### [2022-03-11T08:22:24+00:00](https://github.com/leanprover-community/mathlib/commit/1326aa7cfc11fcaf5296b2a3fc15156cfa9a89d8)
feat(analysis/special_functions): limit of x^s * exp(-x) for s real ([#12540](https://github.com/leanprover-community/mathlib/pull/#12540))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2022-03-11T08:22:23+00:00](https://github.com/leanprover-community/mathlib/commit/e553f8ad650d9bcdcc607eb92d87307efcd9cb4c)
refactor(algebra/group/to_additive): monadic code cosmetics ([#12527](https://github.com/leanprover-community/mathlib/pull/#12527))

as suggested by @kmill and @eric-wieser, but the merge was faster

Also improve test file.

### [2022-03-11T08:22:22+00:00](https://github.com/leanprover-community/mathlib/commit/47b1ddf2951f62418a2ad7bb07ba23a07a1a16be)
feat(data/setoid/partition): Relate `setoid.is_partition` and `finpartition` ([#12459](https://github.com/leanprover-community/mathlib/pull/#12459))

Add two functions that relate `setoid.is_partition` and `finpartition`:
* `setoid.is_partition.partition` 
* `finpartition.is_partition_parts`
Meanwhile add some lemmas related to `finset.sup` and `finset.inf` in data/finset/lattice.


Co-authored-by: Antoine Chambert-Loir <antoine.chambert-loir@math.univ-paris-diderot.fr>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-11T06:44:16+00:00](https://github.com/leanprover-community/mathlib/commit/115f8c7ab221914bc38d7abaa327aefc980127a0)
fix(probability): remove unused argument from `cond_cond_eq_cond_inter` ([#12583](https://github.com/leanprover-community/mathlib/pull/#12583))

This was a property that we already derived within the proof itself from conditionable intersection (I think I forgot to remove this when I made the PR).

### [2022-03-11T06:44:15+00:00](https://github.com/leanprover-community/mathlib/commit/3061d18f6d06bdb0a1666de8f5951397fb3f6403)
feat(data/nat/{nth,prime}): add facts about primes ([#12560](https://github.com/leanprover-community/mathlib/pull/#12560))

Gives `{p | prime p}.infinite` as well as `infinite_of_not_bdd_above` lemma. Also gives simp lemmas for `prime_counting'`.

### [2022-03-11T06:44:14+00:00](https://github.com/leanprover-community/mathlib/commit/de4d14cb87e5f0e5294bb5a87a85eb0bbf6689cc)
feat(group_theory/commutator): Add some basic lemmas ([#12554](https://github.com/leanprover-community/mathlib/pull/#12554))

This PR adds lemmas adds some basic lemmas about when the commutator is trivial.

### [2022-03-11T06:12:11+00:00](https://github.com/leanprover-community/mathlib/commit/355472dcf4d58cc361f46bf079dae5b74e09f6ad)
refactor(group_theory/commutator): Golf proof of `commutator_mem_commutator` ([#12584](https://github.com/leanprover-community/mathlib/pull/#12584))

This PR golfs the proof of `commutator_mem_commutator`, and moves it earlier in the file so that it can be used earlier.

### [2022-03-11T02:38:57+00:00](https://github.com/leanprover-community/mathlib/commit/b5a26d0a829082e4e92edb056a67360128dba957)
feat(data/list/basic): Lists over empty type are `unique` ([#12582](https://github.com/leanprover-community/mathlib/pull/#12582))

Co-authored-by: Eric Wieser <@eric-wieser>

### [2022-03-10T23:44:36+00:00](https://github.com/leanprover-community/mathlib/commit/f0dd6e9b98a565074ba063b34b99d6d2323a8c74)
refactor(group_theory/commutator): Use commutators in `commutator_le` ([#12572](https://github.com/leanprover-community/mathlib/pull/#12572))

This PR golfs the proof of `commutator_le`, and uses the new commutator notation.

### [2022-03-10T23:12:24+00:00](https://github.com/leanprover-community/mathlib/commit/6c04fcf4932ec00b277c5bc24591f28b8d22f4ae)
refactor(group_theory/commutator): Use commutator notation in `commutator_normal` ([#12575](https://github.com/leanprover-community/mathlib/pull/#12575))

This PR uses the new commutator notation in the proof of `commutator_normal`.

### [2022-03-10T21:17:59+00:00](https://github.com/leanprover-community/mathlib/commit/84cbbc986431e150ee6f5ab98a734c16e10fe2ad)
feat(algebra/group/to_additive + a few more files): make `to_additive` convert `unit` to `add_unit` ([#12564](https://github.com/leanprover-community/mathlib/pull/#12564))

This likely involves removing names that match autogenerated names.



Co-authored-by: Alex J. Best <alex.j.best@gmail.com>

### [2022-03-10T19:33:06+00:00](https://github.com/leanprover-community/mathlib/commit/869ef84f2c268092528e2cdd27e51834a7cf453d)
feat(data/zmod/basic): some lemmas about coercions ([#12571](https://github.com/leanprover-community/mathlib/pull/#12571))

The names here are in line with `zmod.nat_coe_zmod_eq_zero_iff_dvd` and `zmod.int_coe_zmod_eq_zero_iff_dvd` a few lines above.

Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>

### [2022-03-10T19:33:05+00:00](https://github.com/leanprover-community/mathlib/commit/6fdb1d5df151a8e7ed94eaac9508d711b2fc1268)
chore(*): clear up some excessive by statements ([#12570](https://github.com/leanprover-community/mathlib/pull/#12570))

Delete some `by` (and similar commands that do nothing, such as
- `by by blah`
- `by begin blah end`
- `{ by blah }`
- `begin { blah } end`

Also clean up the proof of `monic.map` and `nat_degree_div_by_monic` a bit.

### [2022-03-10T19:33:04+00:00](https://github.com/leanprover-community/mathlib/commit/45c22c0d43c630d56d76ad268893df0003c88194)
feat(field_theory/is_alg_closed/basic): add `is_alg_closed.infinite` ([#12566](https://github.com/leanprover-community/mathlib/pull/#12566))

An algebraically closed field is infinite, because if it is finite then `x^(n+1) - 1` is a separable polynomial (where `n` is the cardinality of the field).

Co-authored-by: jlh <48520973+Jlh18@users.noreply.github.com>

### [2022-03-10T19:33:02+00:00](https://github.com/leanprover-community/mathlib/commit/0e93816c45d50c1071300475a90392e4e502c6ba)
feat(tactic/norm_num_command): add user command to run norm_num on an expression ([#12550](https://github.com/leanprover-community/mathlib/pull/#12550))

For example,
```
#norm_num 2^100 % 10
-- 6
```

### [2022-03-10T17:46:10+00:00](https://github.com/leanprover-community/mathlib/commit/f654a86abbda749e2c1e34443c5b140ab72d19b3)
chore(*): remove lines claiming to introduce variables ([#12569](https://github.com/leanprover-community/mathlib/pull/#12569))

They don't.



Co-authored-by: Alex J. Best <alex.j.best@gmail.com>

### [2022-03-10T15:58:20+00:00](https://github.com/leanprover-community/mathlib/commit/4a59a4d481c8bc371fdebd956ca0521461c88355)
chore(order/galois_connection): Make lifting instances reducible ([#12559](https://github.com/leanprover-community/mathlib/pull/#12559))

and provide `infi₂` and `supr₂` versions of the lemmas.

### [2022-03-10T15:28:09+00:00](https://github.com/leanprover-community/mathlib/commit/788ccf079201ad7090139a2414c419b0971498ae)
chore(cardinal_divisibility): tiny golf ([#12567](https://github.com/leanprover-community/mathlib/pull/#12567))

### [2022-03-10T13:16:05+00:00](https://github.com/leanprover-community/mathlib/commit/cd111e94f8cd79274c00637361782207f4aceb8d)
feat(data/equiv/mul_add): add to_additive attribute to `group.is_unit` ([#12563](https://github.com/leanprover-community/mathlib/pull/#12563))

Unless something breaks, this PR does nothing else!

### [2022-03-10T10:38:55+00:00](https://github.com/leanprover-community/mathlib/commit/41f5c1768e51254268c2774a1a95e1f8f498199c)
chore(set_theory/ordinal_arithmetic): Make auxiliary result private ([#12562](https://github.com/leanprover-community/mathlib/pull/#12562))

### [2022-03-10T10:08:31+00:00](https://github.com/leanprover-community/mathlib/commit/4048a9beb3f328ab99bd98e2ed4f2756f5e34d6f)
chore(measure_theory/function/convergence_in_measure): golf proof with Borel-Cantelli ([#12551](https://github.com/leanprover-community/mathlib/pull/#12551))

### [2022-03-10T09:02:58+00:00](https://github.com/leanprover-community/mathlib/commit/d56a9bc2b58df9ac7f5e349d5c8d897dbeebcf7c)
feat(set_theory/ordinal_arithmetic): `add_eq_zero_iff`, `mul_eq_zero_iff` ([#12561](https://github.com/leanprover-community/mathlib/pull/#12561))

### [2022-03-10T09:02:56+00:00](https://github.com/leanprover-community/mathlib/commit/1e560a673d0128e6e36fefdbb8f6d23bdd70b738)
refactor(group_theory/commutator): Generalize `map_commutator_element` ([#12555](https://github.com/leanprover-community/mathlib/pull/#12555))

This PR generalizes `map_commutator_element` from `monoid_hom_class F G G` to `monoid_hom_class F G G'`.

### [2022-03-10T07:37:11+00:00](https://github.com/leanprover-community/mathlib/commit/24e3b5f5a14ea70e6eeb9c10c028984fbe6636db)
refactor(topology/opens): Turn `opens.gi` into a Galois coinsertion ([#12547](https://github.com/leanprover-community/mathlib/pull/#12547))

`topological_space.opens.gi` is currently a `galois_insertion` between `order_dual (opens α)` and `order_dual (set α)`. This turns it into the sensible thing, namely a `galois_coinsertion` between `opens α` and `set α`.

### [2022-03-10T07:37:10+00:00](https://github.com/leanprover-community/mathlib/commit/0fd992949d1d71efeae94a696029d4a72539dba5)
feat(group_theory/double_cosets): definition of double cosets and some basic lemmas. ([#9490](https://github.com/leanprover-community/mathlib/pull/#9490))

This contains the definition of double cosets and some basic lemmas about them, such as "the whole group is the disjoint union of its double cosets" and relationship to usual group quotients.

### [2022-03-10T06:34:47+00:00](https://github.com/leanprover-community/mathlib/commit/750ca95657a27736f5617d6e8736f6a3cfa28ac1)
chore(linear_algebra/affine_space/affine_map): golf using the injective APIs ([#12543](https://github.com/leanprover-community/mathlib/pull/#12543))

The extra whitespace means this isn't actually any shorter by number of lines, but it does eliminate 12 trivial proofs.

Again, the `has_scalar` instance has been hoisted from lower down the file, so that we have the `nat` and `int` actions available when we create the `add_comm_group` structure. Previously we just built the same `has_scalar` structure three times.

### [2022-03-10T06:34:46+00:00](https://github.com/leanprover-community/mathlib/commit/8836a42da67aa6f4f2d806781cdc9a9c797123ee)
fix(linear_algebra/quadratic_form/basic): align diamonds in the nat- and int- action ([#12541](https://github.com/leanprover-community/mathlib/pull/#12541))

This also provides `fun_like` and `zero_hom_class` instances.

The `has_scalar` code has been moved unchanged from further down in the file.

This change makes `coe_fn_sub` eligible for `dsimp`, since it can now be proved by `rfl`.

### [2022-03-10T06:34:44+00:00](https://github.com/leanprover-community/mathlib/commit/9e288527503d92117ad4c9e4ebb9936f1ff22938)
feat(field_theory/krull_topology): added krull_topology_totally_disconnected ([#12398](https://github.com/leanprover-community/mathlib/pull/#12398))






Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Sebastian-Monnet <54352341+Sebastian-Monnet@users.noreply.github.com>

### [2022-03-10T05:29:37+00:00](https://github.com/leanprover-community/mathlib/commit/bab039fbb1d44d2e5a9907f293ccec8795cad507)
feat(topology/opens): The frame of opens of a topological space ([#12546](https://github.com/leanprover-community/mathlib/pull/#12546))

Provide the `frame` instance for `opens α` and strengthen `opens.comap` from `order_hom` to `frame_hom`.

### [2022-03-10T05:29:36+00:00](https://github.com/leanprover-community/mathlib/commit/9c2f6ebe98bdef3d07bec95baa0849d2db7cbd91)
feat(category_theory/abelian/exact): `exact g.op f.op` ([#12456](https://github.com/leanprover-community/mathlib/pull/#12456))


This pr is about `exact g.op f.op` from `exact f g` in an abelian category; this pr is taken from liquid tensor experiment. I believe the original author is @adamtopaz.

### [2022-03-10T04:56:21+00:00](https://github.com/leanprover-community/mathlib/commit/ef25c4ca8ef2ac21d8900243d8b9a0632fc45a30)
refactor(group_theory/commutator): Rename `commutator_containment` to `commutator_mem_commutator` ([#12553](https://github.com/leanprover-community/mathlib/pull/#12553))

This PR renames `commutator_containment` to `commutator_mem_commutator`, uses the new commutator notation, and makes the subgroups implicit.

### [2022-03-09T13:59:57+00:00](https://github.com/leanprover-community/mathlib/commit/9facd190ef13859e5b7a0677182d87e529e7d8f8)
doc(combinatorics/simple_graph/basic): fix typo ([#12544](https://github.com/leanprover-community/mathlib/pull/#12544))

### [2022-03-09T11:28:18+00:00](https://github.com/leanprover-community/mathlib/commit/0d6fb8a70085215c390caaf5344315ed36453ddd)
chore(analysis/complex/upper_half_plane): use `coe` instead of `coe_fn` ([#12532](https://github.com/leanprover-community/mathlib/pull/#12532))

This matches the approach used by other files working with `special_linear_group`.

### [2022-03-09T11:28:17+00:00](https://github.com/leanprover-community/mathlib/commit/c4a341365732cdefaebf0112315629bbf1aee4bf)
chore(data/polynomial): use dot notation for monic lemmas ([#12530](https://github.com/leanprover-community/mathlib/pull/#12530))

As discussed in [#12447](https://github.com/leanprover-community/mathlib/pull/#12447)
- Use the notation throughout the library
- Also deleted `ne_zero_of_monic` as it was a duplicate of `monic.ne_zero` it seems.
- Cleaned up a small proof here and there too.




Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Eric <ericrboidi@gmail.com>

### [2022-03-09T09:05:27+00:00](https://github.com/leanprover-community/mathlib/commit/55d1f3e8790b76bb37aa1e6f69e6e13f79793497)
chore(set_theory/cardinal): `min` → `Inf` ([#12517](https://github.com/leanprover-community/mathlib/pull/#12517))

Various definitions are awkwardly stated in terms of minima of subtypes. We instead rewrite them as infima and golf them. Further, we protect `cardinal.min` to avoid confusion with `linear_order.min`.

### [2022-03-09T05:46:45+00:00](https://github.com/leanprover-community/mathlib/commit/5d405e2a7028f87e962e7cc2133dc0cfc9c55f7d)
chore(linear_algebra/alternating): golf using injective APIs ([#12536](https://github.com/leanprover-community/mathlib/pull/#12536))

To do this, we have to move the has_scalar instance higher up in the file.

### [2022-03-09T05:46:44+00:00](https://github.com/leanprover-community/mathlib/commit/bc9dda83af8fb99c8f4d0a0aabd2cd1b9c1c3987)
chore(algebra/module/linear_map): golf using injective APIs ([#12535](https://github.com/leanprover-community/mathlib/pull/#12535))

To do this, we have to move the `has_scalar` instance higher up in the file.

### [2022-03-09T05:46:43+00:00](https://github.com/leanprover-community/mathlib/commit/94e9bb5529595284e6c6d064e7120336141f956a)
chore(data/{finsupp,dfinsupp}/basic): use the injective APIs ([#12534](https://github.com/leanprover-community/mathlib/pull/#12534))

This also fixes a scalar diamond in the `nat` and `int` actions on `dfinsupp`.
The diamond did not exist for `finsupp`.

### [2022-03-09T05:46:41+00:00](https://github.com/leanprover-community/mathlib/commit/b8d176e0995e243aa22da0a931adb57c2eb5a9de)
chore(real/cau_seq_completion): put class in Prop ([#12533](https://github.com/leanprover-community/mathlib/pull/#12533))

### [2022-03-09T04:04:18+00:00](https://github.com/leanprover-community/mathlib/commit/1f6a2e9d89bb8ca5ddcb63a113a14dce6bb0398f)
chore(scripts): update nolints.txt ([#12538](https://github.com/leanprover-community/mathlib/pull/#12538))

I am happy to remove some nolints for you!

### [2022-03-09T00:50:46+00:00](https://github.com/leanprover-community/mathlib/commit/2a3ecad041f0fdbc23d19bf10b7e6e1eaf77a58b)
feat(data/equiv/basic): lemmas about composition with equivalences ([#10693](https://github.com/leanprover-community/mathlib/pull/#10693))




Co-authored-by: antoinelab01 <66086247+antoinelab01@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-08T21:42:52+00:00](https://github.com/leanprover-community/mathlib/commit/d69cda1e1bd78cda646f61a983ed770881372cb0)
chore(order/well_founded_set): golf two proofs ([#12529](https://github.com/leanprover-community/mathlib/pull/#12529))

### [2022-03-08T21:42:51+00:00](https://github.com/leanprover-community/mathlib/commit/709a3b70151982c8568cd23da9172e839f215071)
feat(set_theory/cardinal_ordinal): `#(list α) ≤ max ω (#α)` ([#12519](https://github.com/leanprover-community/mathlib/pull/#12519))

### [2022-03-08T17:53:50+00:00](https://github.com/leanprover-community/mathlib/commit/feb24fb6813111f0f938ec4281d90fc95baa5018)
feat(topology/vector_bundle): direct sum of topological vector bundles ([#12512](https://github.com/leanprover-community/mathlib/pull/#12512))

### [2022-03-08T17:53:49+00:00](https://github.com/leanprover-community/mathlib/commit/1d67b07c9e848e1bd1da29198d6d90a617704bed)
feat(category_theory): cases in which (co)equalizers are split monos (epis) ([#12498](https://github.com/leanprover-community/mathlib/pull/#12498))

### [2022-03-08T17:53:47+00:00](https://github.com/leanprover-community/mathlib/commit/b4572d165b878081568e7ff247903c95397131e7)
feat(algebra/order/hom/ring): Ordered ring isomorphisms ([#12158](https://github.com/leanprover-community/mathlib/pull/#12158))

Define `order_ring_iso`, the type of ordered ring isomorphisms, along with its typeclass `order_ring_iso_class`.

### [2022-03-08T15:58:18+00:00](https://github.com/leanprover-community/mathlib/commit/4ad5c5a33891424f0807c4dc9aaa222deb6ce522)
feat(data/finset/noncomm_prod): add noncomm_prod_commute ([#12521](https://github.com/leanprover-community/mathlib/pull/#12521))

adding `list.prod_commute`, `multiset.noncomm_prod_commute` and
`finset.noncomm_prod_commute`.

### [2022-03-08T15:58:16+00:00](https://github.com/leanprover-community/mathlib/commit/fac5ffedbbe3871f6baa39862bd634540f69f68b)
feat(group_theory/subgroup/basic): disjoint_iff_mul_eq_one ([#12505](https://github.com/leanprover-community/mathlib/pull/#12505))

### [2022-03-08T15:58:15+00:00](https://github.com/leanprover-community/mathlib/commit/1597e9a2a4333c59e3e446636ce23a57723d8db6)
feat(set_theory/ordinal_arithmetic): prove `enum_ord_le_of_subset` ([#12199](https://github.com/leanprover-community/mathlib/pull/#12199))

I also used this as an excuse to remove a trivial theorem and some awkward dot notation.

### [2022-03-08T14:29:38+00:00](https://github.com/leanprover-community/mathlib/commit/ab6a892bd5caec0cf4c2b434037f3f6ad12d8bea)
feat(data/finset/noncomm_prod): add noncomm_prod_congr ([#12520](https://github.com/leanprover-community/mathlib/pull/#12520))

### [2022-03-08T14:29:36+00:00](https://github.com/leanprover-community/mathlib/commit/c0ba4d6945ef559c8e620a37d0c6cba600563c49)
feat(ring_theory/polynomial/eisenstein): add cyclotomic_comp_X_add_one_is_eisenstein_at ([#12447](https://github.com/leanprover-community/mathlib/pull/#12447))

We add `cyclotomic_comp_X_add_one_is_eisenstein_at`: `(cyclotomic p ℤ).comp (X + 1)` is Eisenstein at `p`.

From flt-regular

### [2022-03-08T12:44:00+00:00](https://github.com/leanprover-community/mathlib/commit/94cbfad7db41a100b0dd5912b70735bd0cd3ddf0)
chore(algebra/*): move some lemmas about is_unit from associated.lean ([#12526](https://github.com/leanprover-community/mathlib/pull/#12526))

There doesn't seem to be any reason for them to live there.

### [2022-03-08T12:43:59+00:00](https://github.com/leanprover-community/mathlib/commit/9c13d6296689c3953cc2618df0bb7da0c1dda19d)
feat(data/int/gcd): add gcd_pos_iff ([#12522](https://github.com/leanprover-community/mathlib/pull/#12522))

### [2022-03-08T12:43:58+00:00](https://github.com/leanprover-community/mathlib/commit/6dd324922718e53dd4eb7ffae2cacf97e910e573)
feat(set_theory/ordinal_arithmetic): `brange_const` ([#12483](https://github.com/leanprover-community/mathlib/pull/#12483))

This is the `brange` analog to `set.range_const`.

### [2022-03-08T10:54:20+00:00](https://github.com/leanprover-community/mathlib/commit/0798037604b2d91748f9b43925fb7570a5f3256c)
refactor(algebra/group/inj_surj): add npow and zpow to all definitions ([#12126](https://github.com/leanprover-community/mathlib/pull/#12126))

Currently, we have a small handful of helpers to construct algebraic structures via pushforwards and pullbacks that preserve `has_pow` and `has_scalar` instances (added in [#10152](https://github.com/leanprover-community/mathlib/pull/#10152) and [#10832](https://github.com/leanprover-community/mathlib/pull/#10832)):

* `function.{inj,surj}ective.add_monoid_smul`
* `function.{inj,surj}ective.monoid_pow`
* `function.{inj,surj}ective.sub_neg_monoid_smul`
* `function.{inj,surj}ective.div_inv_monoid_smul`
* `function.{inj,surj}ective.add_group_smul`
* `function.{inj,surj}ective.group_pow`

Predating these, we have a very large collection of helpers that construct new `has_pow` and `has_scalar` instances, for all the above and also for every other one-argument algebraic structure (`comm_monoid`, `ring`, `linear_ordered_field`, ...).

This puts the user in an awkward position; either:
1. They are unaware of the complexity here, and use `add_monoid_smul` and `add_comm_monoid` within the same file, which create two nonequal scalar instances.
2. They use only the large collection, and don't get definitional control of `has_scalar` and `has_pow`, which can cause typeclass diamonds with generic `has_scalar` instances.
3. They use only the small handful of helpers (which requires remembering which ones are safe to use), and have to remember to manually construct `add_comm_monoid` as `{..add_comm_semigroup, ..add_monoid}`. If they screw up and construct it as `{..add_comm_semigroup, ..add_zero_class}`, then they're in the same position as (1) without knowing it.

This change converts every helper in the large collection to _also_ preserve scalar and power instances; as a result, these pullback and pushforward helpers once again no longer construct any new data.
As a result, all these helpers now take `nsmul`, `zsmul`, `npow`, and `zpow` arguments as necessary, to indicate that these operations are preserved by the function in question.

As a result of this change, all existing callers are now expected to have a `has_pow` or `has_scalar` implementation available ahead of time. In many cases the `has_scalar` instances already exist as a more general case, and maybe just need reordering within the file. Sometimes the general case of `has_scalar` is stated in a way that isn't general enough to describe `int` and `nat`. In these cases and the `has_pow` cases, we define new instance manually. Grepping reveals a rough summary of the new instances:
```lean
instance : has_pow (A 0) ℕ
instance has_nsmul : has_scalar ℕ (C ⟶ D)
instance has_zsmul : has_scalar ℤ (C ⟶ D)
instance has_nsmul : has_scalar ℕ (M →ₗ⁅R,L⁆ N)
instance has_zsmul : has_scalar ℤ (M →ₗ⁅R,L⁆ N)
instance has_nsmul : has_scalar ℕ {x : α // 0 ≤ x}
instance has_pow : α // 0 ≤ x} ℕ
instance : has_scalar R (ι →ᵇᵃ[I₀] M)
instance has_nat_scalar : has_scalar ℕ (normed_group_hom V₁ V₂)
instance has_int_scalar : has_scalar ℤ (normed_group_hom V₁ V₂)
instance : has_pow ℕ+ ℕ
instance subfield.has_zpow : has_pow s ℤ
instance has_nat_scalar : has_scalar ℕ (left_invariant_derivation I G)
instance has_int_scalar : has_scalar ℤ (left_invariant_derivation I G)
instance add_subgroup.has_nsmul : has_scalar ℕ H
instance subgroup.has_npow : has_pow H ℕ
instance add_subgroup.has_zsmul : has_scalar ℤ H
instance subgroup.has_zpow : has_pow H ℤ
instance add_submonoid.has_nsmul : has_scalar ℕ S
instance submonoid.has_pow : has_pow S ℕ
instance : has_pow (special_linear_group n R) ℕ
instance : has_pow (α →ₘ[μ] γ) ℕ
instance has_int_pow : has_pow (α →ₘ[μ] γ) ℤ
instance : div_inv_monoid (α →ₘ[μ] γ)
instance has_nat_pow : has_pow (α →ₛ β) ℕ
instance has_int_pow : has_pow (α →ₛ β) ℤ
instance has_nat_pow : has_pow (germ l G) ℕ
instance has_int_pow : has_pow (germ l G) ℤ
instance : has_scalar ℕ (fractional_ideal S P)
instance has_nat_scalar : has_scalar ℕ (𝕎 R)
instance has_int_scalar : has_scalar ℤ (𝕎 R)
instance has_nat_pow : has_pow (𝕎 R) ℕ
instance has_nat_scalar : has_scalar ℕ (truncated_witt_vector p n R)
instance has_int_scalar : has_scalar ℤ (truncated_witt_vector p n R)
instance has_nat_pow : has_pow (truncated_witt_vector p n R) ℕ
instance has_nat_scalar : has_scalar ℕ (α →ᵇ β)
instance has_int_scalar : has_scalar ℤ (α →ᵇ β)
instance has_nat_pow : has_pow (α →ᵇ R) ℕ
```

### [2022-03-08T08:31:06+00:00](https://github.com/leanprover-community/mathlib/commit/b4a7ad6c708caa680b756d2642b3c872f1ba3690)
chore(field_theory/laurent): drop unused 'have'. ([#12516](https://github.com/leanprover-community/mathlib/pull/#12516))

### [2022-03-08T08:31:05+00:00](https://github.com/leanprover-community/mathlib/commit/dc093e911b7fbc91b20b87f393a1b526c21fbfb5)
chore(combinatorics/configuration): don't use classical.some in a proof ([#12515](https://github.com/leanprover-community/mathlib/pull/#12515))

### [2022-03-08T08:31:04+00:00](https://github.com/leanprover-community/mathlib/commit/ffa6e6d6305cb636727c818929bf549376c258f0)
feat(set_theory/cardinal): `sum_le_sup_lift` ([#12513](https://github.com/leanprover-community/mathlib/pull/#12513))

This is a universe-polymorphic version of `sum_le_sup`.

### [2022-03-08T08:31:03+00:00](https://github.com/leanprover-community/mathlib/commit/43cb3ffcba24484436984e652d0b1b21bea265ea)
fix(ring_theory/ideal/operations): fix a name and dot notation ([#12507](https://github.com/leanprover-community/mathlib/pull/#12507))

### [2022-03-08T08:31:02+00:00](https://github.com/leanprover-community/mathlib/commit/b2377ea2f08d78e382838d9c7945ca55ba1aabf9)
feat(measure_theory/measure/finite_measure_weak_convergence): generalize scalar action ([#12503](https://github.com/leanprover-community/mathlib/pull/#12503))

This means the smul lemmas also work for `nsmul`.

### [2022-03-08T08:31:00+00:00](https://github.com/leanprover-community/mathlib/commit/65095fe1a4b5ed15914ef4f7da071e700632374d)
doc(order/succ_pred/basic): fix typo ([#12501](https://github.com/leanprover-community/mathlib/pull/#12501))

### [2022-03-08T08:30:59+00:00](https://github.com/leanprover-community/mathlib/commit/47182da534c28fa237355e541b0b1bc471e2349e)
feat(algebra/group/to_additive): add to_additive doc string linter ([#12487](https://github.com/leanprover-community/mathlib/pull/#12487))

it is an easy mistake to add a docstring to a lemma with `to_additive`
without also passing a string to `to_additive`. This linter checks for
that, and suggests to add a doc string when needed.

### [2022-03-08T08:30:58+00:00](https://github.com/leanprover-community/mathlib/commit/ccdcce13090cc5b7d53a5e47e7d4d073bc292fee)
chore(set_theory/game/nim): General golfing ([#12471](https://github.com/leanprover-community/mathlib/pull/#12471))

We make use of various relatively new theorems on ordinals to simplify various proofs, or otherwise clean up the file.

### [2022-03-08T08:30:57+00:00](https://github.com/leanprover-community/mathlib/commit/b3fba033266f6354567af0217d7ffc21184e9c58)
feat(algebra/homology/homotopy) : `mk_coinductive` ([#12457](https://github.com/leanprover-community/mathlib/pull/#12457))


`mk_coinductive` is the dual version of `mk_inductive` in the same file. `mk_inductive` is to build homotopy of chain complexes inductively and `mk_coinductive` is to build homotopy of cochain complexes inductively.

### [2022-03-08T07:26:43+00:00](https://github.com/leanprover-community/mathlib/commit/14997d0edcbcd97c79436abf0172e9c6f24ef50a)
feat(analysis/normed_space): allow non-unital C^* rings ([#12327](https://github.com/leanprover-community/mathlib/pull/#12327))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-08T06:08:39+00:00](https://github.com/leanprover-community/mathlib/commit/74746bdebf5d0317088bf5acb33c47010d368c70)
chore(counterexamples/canonically_ordered_comm_semiring_two_mul): golf ([#12504](https://github.com/leanprover-community/mathlib/pull/#12504))

### [2022-03-07T22:59:51+00:00](https://github.com/leanprover-community/mathlib/commit/5f6d30ec86e57d432e73c6c6fbe94e9840618823)
chore(*): move `has_scalar` instances before `add_comm_monoid` instances ([#12502](https://github.com/leanprover-community/mathlib/pull/#12502))

This makes it easier for us to set `nsmul` and `zsmul` in future.

### [2022-03-07T21:31:06+00:00](https://github.com/leanprover-community/mathlib/commit/e409a9043689039e159ca1751ffef4ab8ba38a42)
feat(measure_theory/integral/periodic.lean): add lemma `function.periodic.tendsto_at_bot_interval_integral_of_pos'` ([#12500](https://github.com/leanprover-community/mathlib/pull/#12500))

Partner of `function.periodic.tendsto_at_top_interval_integral_of_pos'` (I probably should have included this in [#12488](https://github.com/leanprover-community/mathlib/pull/#12488))

Formalized as part of the Sphere Eversion project.

### [2022-03-07T21:31:04+00:00](https://github.com/leanprover-community/mathlib/commit/390554d25011f43591b5068a442a1f8df413e270)
feat(ring_theory/coprime/basic): lemmas about multiplying by units ([#12480](https://github.com/leanprover-community/mathlib/pull/#12480))

### [2022-03-07T21:31:03+00:00](https://github.com/leanprover-community/mathlib/commit/9728bd25b72b4bc3f7189ae1f213ac804ead31dc)
chore(number_theory/number_field): golf `int.not_is_field` ([#12451](https://github.com/leanprover-community/mathlib/pull/#12451))

Golfed proof of number_theory.number_field.int.not_is_field

Co-authored by: David Ang <dka31@cantab.ac.uk>
Co-authored by: Eric Rodriguez <ericrboidi@gmail.com>
Co-authored by: Violeta Hernández <vi.hdz.p@gmail.com>



Co-authored-by: Aresh-P <91763341+Aresh-P@users.noreply.github.com>

### [2022-03-07T19:47:38+00:00](https://github.com/leanprover-community/mathlib/commit/1b4ee53b3df5db827f8dc29f660bf613bfa2939e)
feat(algebra/associated): add pow_not_prime ([#12493](https://github.com/leanprover-community/mathlib/pull/#12493))

### [2022-03-07T19:47:36+00:00](https://github.com/leanprover-community/mathlib/commit/f28023e90b09defdfd2383d4c9116b93e78592f1)
feat(measure_theory/function/uniform_integrable): Uniform integrability and Vitali convergence theorem ([#12408](https://github.com/leanprover-community/mathlib/pull/#12408))

This PR defines uniform integrability (both in the measure theory sense as well as the probability theory sense) and proves the Vitali convergence theorem which establishes a relation between convergence in measure and uniform integrability with convergence in Lp.

### [2022-03-07T19:47:34+00:00](https://github.com/leanprover-community/mathlib/commit/1ee91a5c105ce14baf132dbc0491381eae391467)
feat(probability_theory/stopping): define progressively measurable processes ([#11350](https://github.com/leanprover-community/mathlib/pull/#11350))

* Define progressively measurable processes (`prog_measurable`), which is the correct strengthening of `adapted` to get that the stopped process is also progressively measurable.
* Prove that an adapted continuous process is progressively measurable.

For discrete time processes, progressively measurable is equivalent to `adapted` .

This PR also changes some measurable_space arguments in `measurable_space.lean` from typeclass arguments to implicit.



Co-authored-by: RemyDegenne <Remydegenne@gmail.com>

### [2022-03-07T18:31:04+00:00](https://github.com/leanprover-community/mathlib/commit/e871be2515f5d46ed9858bda801b17cd318b0b61)
feat(data/real/nnreal): floor_semiring instance ([#12495](https://github.com/leanprover-community/mathlib/pull/#12495))

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/.60nat.2Eceil.60.20on.20.60nnreal.60.20.3F/near/274353230)

### [2022-03-07T18:31:03+00:00](https://github.com/leanprover-community/mathlib/commit/8d2ffb8f735cddd18224e3c7623b16d40f54253d)
feat(category_theory): (co)kernels of biproduct projection and inclusion ([#12394](https://github.com/leanprover-community/mathlib/pull/#12394))

add kernels and cokernels of biproduct projections and inclusions

Co-authored-by: Markus Himmel <markus@himmel-villmar.de>



Co-authored-by: Markus Himmel <markus@himmel-villmar.de>

### [2022-03-07T18:01:16+00:00](https://github.com/leanprover-community/mathlib/commit/85a415e957033aa88810591e641dcec9bc567431)
docs(overview): Add overview of model theory ([#12496](https://github.com/leanprover-community/mathlib/pull/#12496))

Adds a subsection on model theory to the mathlib overview.

### [2022-03-07T16:01:41+00:00](https://github.com/leanprover-community/mathlib/commit/3c3c3bc182301b379a6427160fc670d0124e1060)
fix(tactic/interactive): use non-interactive admit tactic ([#12489](https://github.com/leanprover-community/mathlib/pull/#12489))

In a future release of Lean 3, the interactive admit tactic will take an additional argument.

### [2022-03-07T16:01:39+00:00](https://github.com/leanprover-community/mathlib/commit/5f2a6ac608db0063d5dc72538b098024b75152ce)
feat(measure_theory/integral/periodic): further properties of periodic integrals ([#12488](https://github.com/leanprover-community/mathlib/pull/#12488))

Formalized as part of the Sphere Eversion project.

### [2022-03-07T16:01:38+00:00](https://github.com/leanprover-community/mathlib/commit/c95ce52dd58f062277992a08c975f99a838def51)
fix(number_theory/modular): prefer `coe` over `coe_fn` in lemma statements ([#12445](https://github.com/leanprover-community/mathlib/pull/#12445))

This file is already full of `↑ₘ`s (aka coercions to matrix), we may as well use them uniformly.

### [2022-03-07T14:11:59+00:00](https://github.com/leanprover-community/mathlib/commit/f451e09a7e5f4ba59a238b04769701a8ca0bcc61)
chore(algebra/order/{group,monoid}): trivial lemma about arithmetic on `with_top` and `with_bot` ([#12491](https://github.com/leanprover-community/mathlib/pull/#12491))

### [2022-03-07T14:11:57+00:00](https://github.com/leanprover-community/mathlib/commit/65ac316c8bef7b7edd01dd648778de1974a2b3d4)
chore(algebra/order/nonneg): add `nonneg.coe_nat_cast` ([#12490](https://github.com/leanprover-community/mathlib/pull/#12490))

### [2022-03-07T14:11:56+00:00](https://github.com/leanprover-community/mathlib/commit/16b676611dd857d0920e4750281914152de4c867)
feat(analysis/normed_space): non-unital normed rings ([#12326](https://github.com/leanprover-community/mathlib/pull/#12326))

On the way to allowing non-unital C^*-algebras.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-07T14:11:55+00:00](https://github.com/leanprover-community/mathlib/commit/9ed4366659f4fcca0ee70310d26ac5518dcb6dd0)
feat(category_theory/limits): limit preservation properties of functor.left_op and similar ([#12168](https://github.com/leanprover-community/mathlib/pull/#12168))

### [2022-03-07T12:17:08+00:00](https://github.com/leanprover-community/mathlib/commit/900ce6fc29d8fbec86b765927041ce81d3ec37e3)
chore(data/equiv/basic): rename `involutive.to_equiv` to `to_perm` ([#12486](https://github.com/leanprover-community/mathlib/pull/#12486))

### [2022-03-07T10:15:48+00:00](https://github.com/leanprover-community/mathlib/commit/eb46e7e3cf98edd45bd1cce2227edb90d7e4426d)
feat(algebra/group/to_additive): let to_additive turn `pow` into `nsmul` ([#12477](https://github.com/leanprover-community/mathlib/pull/#12477))

The naming convention for `npow` in lemma names is `pow`, so let’s teach
`to_additive` about it.

A fair number of lemmas now no longer need an explicit additive name.

### [2022-03-07T10:15:47+00:00](https://github.com/leanprover-community/mathlib/commit/d704f27e93edcb0157f4e1b77f0508fd3ca85e9a)
refactor(set_theory/*): `o.out.r` → `<` ([#12468](https://github.com/leanprover-community/mathlib/pull/#12468))

We declare a `linear_order` instance on `o.out.α`, for `o : ordinal`, with `<` def-eq to `o.out.r`. This will improve code clarity and will allow us to state theorems about specific ordinals as ordered structures.

### [2022-03-07T10:15:46+00:00](https://github.com/leanprover-community/mathlib/commit/9dd8ec1e5fc3f40aa6b71633d18aadadd171b544)
feat(analysis/normed/group/hom): add a module instance ([#12465](https://github.com/leanprover-community/mathlib/pull/#12465))

### [2022-03-07T10:15:45+00:00](https://github.com/leanprover-community/mathlib/commit/0b86bb8d93790e4e281ee64fe49539bbf8bde2ad)
feat(measure_theory/group/arithmetic): actions by int and nat are measurable ([#12464](https://github.com/leanprover-community/mathlib/pull/#12464))

The `has_measurable_smul₂` proofs are essentially copied from the analogous proofs for `has_measurable_pow`, after golfing them.

### [2022-03-07T10:15:43+00:00](https://github.com/leanprover-community/mathlib/commit/3f353db23ad86e89ab01cbbdd2a8e8852e6684ff)
feat(data/nat/basic): add one_le_div_iff ([#12461](https://github.com/leanprover-community/mathlib/pull/#12461))

Couldn't find these.

### [2022-03-07T10:15:42+00:00](https://github.com/leanprover-community/mathlib/commit/2675b5c3b1482bf5260299b4d07ac4e11a23a4ea)
feat(measure_theory/constructions/polish): injective images of Borel sets in Polish spaces are Borel ([#12448](https://github.com/leanprover-community/mathlib/pull/#12448))

We prove several fundamental results on the Borel sigma-algebra in Polish spaces, notably:
* Lusin separation theorem: disjoint analytic sets can be separated via Borel sets
* Lusin-Souslin theorem: a continuous injective image of a Borel set in a Polish space is Borel
* An injective measurable map on a Polish space is a measurable embedding, i.e., it maps measurable sets to measurable sets

### [2022-03-07T10:15:41+00:00](https://github.com/leanprover-community/mathlib/commit/37783539844ceab9902b11a2fd95a298e9688eac)
feat(set_theory/ordinal_arithmetic): `enum_ord univ = id` ([#12391](https://github.com/leanprover-community/mathlib/pull/#12391))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-03-07T10:15:40+00:00](https://github.com/leanprover-community/mathlib/commit/313f40555a4939f01adb9a37730ac34c354b904b)
feat(category_theory/*): preserves biproducts implies additive ([#12014](https://github.com/leanprover-community/mathlib/pull/#12014))

### [2022-03-07T10:15:38+00:00](https://github.com/leanprover-community/mathlib/commit/f063d0c61dbdf45206b9b463175bc76625726558)
feat(geometry/manifold/tangent_bundle): the `tangent_bundle` is a `topological_vector_bundle` ([#8295](https://github.com/leanprover-community/mathlib/pull/#8295))



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2022-03-07T08:10:23+00:00](https://github.com/leanprover-community/mathlib/commit/a19f6c6f5732231a6b4ef2ebbcca3cd2c9a197ea)
doc(algebra/group/to_additive): `to_additive` and docstring interaction ([#12476](https://github.com/leanprover-community/mathlib/pull/#12476))

### [2022-03-06T21:54:59+00:00](https://github.com/leanprover-community/mathlib/commit/92ef3c513f193c2df983918ececd376c9c819eeb)
feat(ring_theory/graded_algebra/radical) : radical of homogeneous ideal is homogeneous ([#12277](https://github.com/leanprover-community/mathlib/pull/#12277))

This pr contains the following results about homogeneous ideals.

* `ideal.is_homogeneous.is_prime_iff`: for any `I : ideal A`, if `I` is homogeneous, then
   `I` is prime if and only if `I` is homogeneously prime, i.e. `I ≠ ⊤` and if `x, y` are
   homogeneous elements such that `x * y ∈ I`, then at least one of `x,y` is in `I`.
* `ideal.is_prime.homogeneous_core`: for any `I : ideal A`, if `I` is prime, then
   `I.homogeneous_core 𝒜` (i.e. the largest homogeneous ideal contained in `I`) is also prime.
* `ideal.is_homogeneous.radical`: for any `I : ideal A`, if `I` is homogeneous, then the
   radical of `I` is homogeneous as well.
* `homogeneous_ideal.radical`: for any `I : homogeneous_ideal 𝒜`, `I.radical` is the the
   radical of `I` as a `homogeneous_ideal 𝒜`



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-06T18:41:38+00:00](https://github.com/leanprover-community/mathlib/commit/40602e658206b371c2d3ce62c13178d8bc5f8c9e)
chore(set_theory/cardinal_divisibility): add instance unique (units cardinal) ([#12458](https://github.com/leanprover-community/mathlib/pull/#12458))

### [2022-03-06T15:36:29+00:00](https://github.com/leanprover-community/mathlib/commit/669618791f041d61d7d4f6160c99803bb4a6c4b1)
chore(set_theory/ordinal_arithmetic): Reorder theorems ([#12475](https://github.com/leanprover-community/mathlib/pull/#12475))

It makes more sense for `is_normal.bsup_eq` and `is_normal.blsub_eq` to be together.

### [2022-03-06T15:06:27+00:00](https://github.com/leanprover-community/mathlib/commit/0a6efe0f0b0fe4902ae45b3338d4a4eb1bff1e75)
feat(analysis/normed_space/star/spectrum): prove the spectral radius of a star normal element is its norm ([#12249](https://github.com/leanprover-community/mathlib/pull/#12249))

In a C⋆-algebra over ℂ, the spectral radius of any star normal element is its norm. This extends the corresponding result for selfadjoint elements.

- [x] depends on: [#12211](https://github.com/leanprover-community/mathlib/pull/#12211) 
- [x] depends on: [#11991](https://github.com/leanprover-community/mathlib/pull/#11991)

### [2022-03-06T11:52:53+00:00](https://github.com/leanprover-community/mathlib/commit/28c902d86d7904b662d6caf6c9b211b05c485728)
fix(algebra/group/pi): Fix apply-simp-lemmas for monoid_hom.single ([#12474](https://github.com/leanprover-community/mathlib/pull/#12474))

so that the simp-normal form really is `pi.mul_single`.

While adjusting related lemmas in `group_theory.subgroup.basic`, add a
few missing `to_additive` attributes.

### [2022-03-06T07:44:42+00:00](https://github.com/leanprover-community/mathlib/commit/64d953a1b52aabccfda92bcf2f8081d7a9c5ab19)
refactor(set_theory/ordinal): `enum_lt` → `enum_lt_enum` ([#12469](https://github.com/leanprover-community/mathlib/pull/#12469))

That way, the theorem name matches that of `enum_le_enum`, `typein_lt_typein`, and `typein_le_typein`.

### [2022-03-06T07:44:41+00:00](https://github.com/leanprover-community/mathlib/commit/d61ebab1cccc8abdc91c0a8f3467e39ff0cbc88c)
feat(category_theory/abelian): (co)kernels in terms of exact sequences ([#12460](https://github.com/leanprover-community/mathlib/pull/#12460))

### [2022-03-06T07:44:40+00:00](https://github.com/leanprover-community/mathlib/commit/b7808a992e282a562a57dced3f0320ea2c5ace7b)
chore(set_theory/ordinal_arithmetic): Golf `lsub_typein` and `blsub_id` ([#12203](https://github.com/leanprover-community/mathlib/pull/#12203))

### [2022-03-06T07:44:39+00:00](https://github.com/leanprover-community/mathlib/commit/b4d007fc4f92ce4b80fb14bd0eb6633d8c48353a)
feat(category_theory/limits): transport is_limit along F.left_op and similar ([#12166](https://github.com/leanprover-community/mathlib/pull/#12166))

### [2022-03-06T07:44:38+00:00](https://github.com/leanprover-community/mathlib/commit/371b48a02ea010b1d9b84aa4bb790f39ce2ee804)
feal(category_theory/bicategory/functor): define pseudofunctors ([#11992](https://github.com/leanprover-community/mathlib/pull/#11992))

This PR defines pseudofunctors between bicategories. 

We provide two constructors (`mk_of_oplax` and `mk_of_oplax'`) that construct pseudofunctors from oplax functors whose `map_id` and `map_comp` are isomorphisms. The constructor `mk_of_oplax` uses `iso` to describe isomorphisms, while `mk_of_oplax'` uses `is_iso`.



Co-authored-by: Scott Morrison <scott@tqft.net>

### [2022-03-06T07:11:07+00:00](https://github.com/leanprover-community/mathlib/commit/62e7d353a37364039d9465a7a8cb1a6125eb24ce)
feat(category_theory/limits): uniqueness of preadditive structures ([#12342](https://github.com/leanprover-community/mathlib/pull/#12342))

### [2022-03-05T17:38:12+00:00](https://github.com/leanprover-community/mathlib/commit/974d23c227e98c8f5d65abcbc16777f44192a34b)
feat(data/polynomial/monic): add monic_of_mul_monic_left/right ([#12446](https://github.com/leanprover-community/mathlib/pull/#12446))

Also clean up variables that are defined in the section.

From https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/.60geom_sum.20.28X.20.20n.29.60.20is.20monic/near/274130839

### [2022-03-05T16:13:55+00:00](https://github.com/leanprover-community/mathlib/commit/e542154b2cec968ce1171747cbf992aff4fa0fbb)
feat(category_theory/full_subcategory): full_subcategory.map and full_subcategory.lift ([#12335](https://github.com/leanprover-community/mathlib/pull/#12335))

### [2022-03-05T16:13:54+00:00](https://github.com/leanprover-community/mathlib/commit/51adf3a1f39317a3984c67528a7eca2c4cf3506f)
feat(model_theory/terms_and_formulas): Using a list encoding, bounds the number of terms ([#12276](https://github.com/leanprover-community/mathlib/pull/#12276))

Defines `term.list_encode` and `term.list_decode`, which turn terms into lists, and reads off lists as lists of terms.
Bounds the number of terms by the number of allowed symbols + omega.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2022-03-05T15:19:46+00:00](https://github.com/leanprover-community/mathlib/commit/92b27e12a7cf6721c30bffd62b2b520eddddc8f8)
feat(category_theory/discrete_category): generalize universes for comp_nat_iso_discrete ([#12340](https://github.com/leanprover-community/mathlib/pull/#12340))

### [2022-03-05T15:19:45+00:00](https://github.com/leanprover-community/mathlib/commit/4ecd92a958d626620a2d550c1ae840d648e213e7)
feat(category_theory/abelian): faithful functors reflect exact sequences ([#12071](https://github.com/leanprover-community/mathlib/pull/#12071))

### [2022-03-05T13:15:02+00:00](https://github.com/leanprover-community/mathlib/commit/fa6b16e13b10fa25c43e09783d91186b52b35370)
feat(data/nat/prime): add nat.eq_two_pow_or_exists_odd_prime_and_dvd ([#12395](https://github.com/leanprover-community/mathlib/pull/#12395))

### [2022-03-05T13:15:01+00:00](https://github.com/leanprover-community/mathlib/commit/8b9139029e33a3c5c7d74c1f748a1192aa2b51ca)
feat(order/hom/basic): add `order_iso.with_{top,bot}_congr` ([#12264](https://github.com/leanprover-community/mathlib/pull/#12264))

This adds:

* `with_bot.to_dual_top`
* `with_top.to_dual_bot`
* `order_iso.with_top_congr`
* `order_iso.with_bot_congr`

### [2022-03-05T12:17:39+00:00](https://github.com/leanprover-community/mathlib/commit/2840532e871f4d59b7cc5e55c8b2489ce288bf78)
doc(topology/uniform_space/cauchy): fix typo ([#12453](https://github.com/leanprover-community/mathlib/pull/#12453))

### [2022-03-05T10:56:08+00:00](https://github.com/leanprover-community/mathlib/commit/bda091dd5742def78cd9e6cf77f5363aa54f760e)
feat(measure_theory/card_measurable_space): cardinality of generated sigma-algebras ([#12422](https://github.com/leanprover-community/mathlib/pull/#12422))

If a sigma-algebra is generated by a set of sets `s` whose cardinality is at most the continuum,
then the sigma-algebra satisfies the same cardinality bound.



Co-authored-by: Violeta Hernández <vi.hdz.p@gmail.com>

### [2022-03-05T09:10:31+00:00](https://github.com/leanprover-community/mathlib/commit/93451afd07a96684716003dd6d823c74ea22e2fe)
feat(order/category/BoolAlg): The category of Boolean algebras ([#12452](https://github.com/leanprover-community/mathlib/pull/#12452))

Define `BoolAlg`, the category of Boolean algebras with bounded lattice homs.

### [2022-03-05T09:10:30+00:00](https://github.com/leanprover-community/mathlib/commit/f5b885b0a1a6271c108953144498ec30b451c292)
feat(linear_algebra/clifford_algebra/conjugation): reverse and involute are grade-preserving ([#12373](https://github.com/leanprover-community/mathlib/pull/#12373))

This shows that various submodules are preserved under `submodule.map` by `reverse` or `involute`.

### [2022-03-05T08:41:18+00:00](https://github.com/leanprover-community/mathlib/commit/ac28ddf709bbab69ee9a016352d3076e4cbbd901)
feat(data/nat/fib): add bit0/bit1 lemmas and fast_fib ([#12444](https://github.com/leanprover-community/mathlib/pull/#12444))

This provides lemmas that let `simp` calculate `fib` from the bit0/bit1 numeral representation. (This isn't intended to be for speed, although it does evaluate things reasonably quick.)

```lean
lemma foo : fib 64 = 10610209857723 :=
begin
  norm_num [fib_bit0, fib_bit1, fib_bit0_succ, fib_bit1_succ],
end
```

These are then used to show that `fast_fib` computes `fib`.

### [2022-03-05T06:05:25+00:00](https://github.com/leanprover-community/mathlib/commit/36a528d1aa5c2ebe73e9ee12afde71a3326fc5da)
feat(set_theory/ordinal_arithmetic): `add_le_of_forall_add_lt` ([#12315](https://github.com/leanprover-community/mathlib/pull/#12315))

### [2022-03-05T03:06:09+00:00](https://github.com/leanprover-community/mathlib/commit/b0d9462410bee0c352fcdc80ae2e2c610407290c)
feat(category_theory/preadditive/injective) : more basic properties and morphisms about injective objects ([#12450](https://github.com/leanprover-community/mathlib/pull/#12450))

This pr dualises the rest of `projective.lean`

### [2022-03-05T03:06:08+00:00](https://github.com/leanprover-community/mathlib/commit/fdf43f1c1393706165c95277ac4addbc6602011d)
feat(category_theory/closed): generalize some material from cartesian closed categories to closed monoidal categories ([#12386](https://github.com/leanprover-community/mathlib/pull/#12386))

No new content, just moving some trivially generalisable material about cartesian closed categories to closed monoidal categories.

I've defined `ihom` for internal hom, and made `exp` an abbreviation for it in the cartesian closed case.
A few other definitions similarly become abbreviations.

I've left the `⟹` arrow for the internal hom in the cartesian closed case, and added `⟶[C]` for the general internal hom.




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-05T01:51:47+00:00](https://github.com/leanprover-community/mathlib/commit/45d235e88b800c9aad583acc155b6c3d72c177af)
feat(analysis/normed_space/star/matrix): `entrywise_sup_norm_bound_of_unitary` ([#12255](https://github.com/leanprover-community/mathlib/pull/#12255))

The entrywise sup norm of a unitary matrix is at most 1.

I suspect there is a simpler proof!





Co-authored-by: Hans Parshall <hparshall@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-05T01:51:46+00:00](https://github.com/leanprover-community/mathlib/commit/1755911292c93f93eebed0c4b75c65051a31630a)
feat(topology/compacts): The types of clopens and of compact opens ([#11966](https://github.com/leanprover-community/mathlib/pull/#11966))

Define `clopens` and ` compact_opens`, the types of clopens and of compact open sets of a topological space.

### [2022-03-05T00:00:54+00:00](https://github.com/leanprover-community/mathlib/commit/8e1da4e68dd268dc676990e79af162d88e7423c3)
feat(ring_theory/adjoin/basic): if a set of elements of a subobject commute, its closure/adjoin is also commutative ([#12231](https://github.com/leanprover-community/mathlib/pull/#12231))

We show that if a set of elements of a subobject commute, its closure/adjoin is also commutative The subobjects include (additive) submonoids, (additive) subgroups, subsemirings, subrings, and subalgebras.



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2022-03-04T21:44:21+00:00](https://github.com/leanprover-community/mathlib/commit/3ac971befe49d90e717656f0a358d65743458955)
feat(order/category/Frame): The category of frames ([#12363](https://github.com/leanprover-community/mathlib/pull/#12363))

Define `Frame`, the category of frames with frame homomorphisms.

### [2022-03-04T21:44:20+00:00](https://github.com/leanprover-community/mathlib/commit/ee4be2dbe34ed131a88ebff2dd0a17150ec94abc)
feat(ring_theory/simple_module): Simple modules as simple objects in the Module category ([#11927](https://github.com/leanprover-community/mathlib/pull/#11927))

A simple module is a simple object in the Module category. 
From there it should be easy to write an alternative proof of Schur's lemma for modules using category theory (using the work already done in category_theory/preadditive/schur.lean).
The other direction (a simple object in the Module category is a simple module) hasn't been proved yet.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: pbazin <75327486+pbazin@users.noreply.github.com>

### [2022-03-04T21:44:19+00:00](https://github.com/leanprover-community/mathlib/commit/a07cf6bda6d65398fcd6938d91e340e36d7fa244)
feat(ring_theory/polynomial/homogeneous) : add lemma `homogeneous_component_homogeneous_polynomial` ([#10113](https://github.com/leanprover-community/mathlib/pull/#10113))

add the following lemma
```lean
lemma homogeneous_component_homogeneous_polynomial (m n : ℕ)
  (p : mv_polynomial σ R) (h : p ∈ homogeneous_submodule σ R n) :
  homogeneous_component m p = if m = n then p else 0
```


Co-authored-by: jjaassoonn <jujian.zhang1998@out.com>

### [2022-03-04T19:43:16+00:00](https://github.com/leanprover-community/mathlib/commit/34d8ff1dc399d0cd3770c0bb3665f89504ae6bfa)
feat(topology/algebra/weak_dual): generalize to weak topologies for arbitrary dualities ([#12284](https://github.com/leanprover-community/mathlib/pull/#12284))

### [2022-03-04T19:43:15+00:00](https://github.com/leanprover-community/mathlib/commit/89654c0faad888be9b9137e5e2f74ce92d97f1c7)
feat(data/equiv/{mul_add,ring}): Coercions to types of morphisms from their `_class` ([#12243](https://github.com/leanprover-community/mathlib/pull/#12243))

Add missing coercions to `α ≃+ β`, `α ≃* β`, `α ≃+* β` from `add_equiv_class`, `mul_equiv_class`, `ring_equiv_class`.

### [2022-03-04T17:34:12+00:00](https://github.com/leanprover-community/mathlib/commit/30d63cdb2428932a259dac54486ba8bb43894b55)
feat(field_theory/cardinality): a cardinal can have a field structure iff it is a prime power ([#12442](https://github.com/leanprover-community/mathlib/pull/#12442))





Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-03-04T17:34:11+00:00](https://github.com/leanprover-community/mathlib/commit/858002ba1778050fcbd39365c9434d7cd1c8352b)
feat(algebra/char_zero): cast(_pow)_eq_one ([#12429](https://github.com/leanprover-community/mathlib/pull/#12429))

### [2022-03-04T17:34:10+00:00](https://github.com/leanprover-community/mathlib/commit/a54dd9e33e50c6400f71d718bf352008b7b2e80c)
feat(order/category/BoundedDistribLattice): The category of bounded distributive lattices ([#12347](https://github.com/leanprover-community/mathlib/pull/#12347))

Define `BoundedDistribLattice`, the category of bounded distributive lattices with bounded lattice homomorphisms.

### [2022-03-04T17:34:09+00:00](https://github.com/leanprover-community/mathlib/commit/fab59cb86b59ae79ade8bc777823490c291da7c0)
feat(set_theory/cofinality): `cof_eq_Inf_lsub` ([#12314](https://github.com/leanprover-community/mathlib/pull/#12314))

This much nicer characterization of cofinality will allow us to prove various theorems relating it to `lsub` and `blsub`.

### [2022-03-04T17:34:07+00:00](https://github.com/leanprover-community/mathlib/commit/efd9a16a96689bef9e49dc63d00ae2e56e4c58fb)
refactor(group_theory/commutator): Define commutators of subgroups in terms of commutators of elements ([#12309](https://github.com/leanprover-community/mathlib/pull/#12309))

This PR defines commutators of elements of groups.

(This is one of the several orthogonal changes from https://github.com/leanprover-community/mathlib/pull/12134)

### [2022-03-04T17:34:06+00:00](https://github.com/leanprover-community/mathlib/commit/35b835a2ec0fcc9f1619bc39d31171558198cc98)
feat(data/set/sigma): Indexed sum of sets ([#12305](https://github.com/leanprover-community/mathlib/pull/#12305))

Define `set.sigma`, the sum of a family of sets indexed by a set.

### [2022-03-04T17:34:05+00:00](https://github.com/leanprover-community/mathlib/commit/ed633868afc7c333f289d313eb9d00fec808a224)
feat(category_theory/preadditive/injective) : definition of injective objects in a category ([#11921](https://github.com/leanprover-community/mathlib/pull/#11921))

This pr contains definition of injective objects and some useful instances.

### [2022-03-04T17:34:04+00:00](https://github.com/leanprover-community/mathlib/commit/a8629a591ccfe7aa27241e843ca13ed7ed7fd152)
refactor(tactic/interactive): use 1-indexing in work_on_goal ([#11813](https://github.com/leanprover-community/mathlib/pull/#11813))

Backporting the change in https://github.com/leanprover-community/mathlib4/pull/178 to make `work_on_goal` 1-indexed. See also: https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/.60work_on_goal.60.20vs.20.60swap.60



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-04T15:24:38+00:00](https://github.com/leanprover-community/mathlib/commit/0ec8e6a05e81ccd51cc04ad271653abfd42e222f)
feat(algebra/algebra/operations): more lemmas about `mul_opposite` ([#12441](https://github.com/leanprover-community/mathlib/pull/#12441))

Naturally the lemmas I left out of the previous PR, notably `map_unop_mul` and `map_unop_pow`, are the ones I actually needed.

This also improves the `simps` lemmas on `submodule.equiv_opposite`, which were previously garbage as `simps` didn't unfold `ring_equiv.symm` properly. At any rate, the only reason it was defined that way was because the lemmas in this PR were missing.

### [2022-03-04T15:24:37+00:00](https://github.com/leanprover-community/mathlib/commit/31cb3c164ef6821bade1919d5ea3c6e74b41a171)
chore(algebra/group_with_zero/basic): generalize `units.exists_iff_ne_zero` to arbitrary propositions ([#12439](https://github.com/leanprover-community/mathlib/pull/#12439))

This adds a more powerful version of this lemma that allows an existential to be replaced with one over the underlying group with zero.
The naming matches `subtype.exists` and `subtype.exists'`, while the trailing zero matches `units.mk0`.

### [2022-03-04T15:24:36+00:00](https://github.com/leanprover-community/mathlib/commit/6e94c53a2ba353b8cb93eb01c3573b680f8ca180)
feat(complex/basic): nnnorm coercions ([#12428](https://github.com/leanprover-community/mathlib/pull/#12428))





Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-03-04T15:24:34+00:00](https://github.com/leanprover-community/mathlib/commit/dc95d02e1207a78020b294e970d918379c1db0d0)
feat(order/filter/archimedean): add lemmas about convergence to ±∞ for archimedean rings / groups. ([#12427](https://github.com/leanprover-community/mathlib/pull/#12427))

Formalized as part of the Sphere Eversion project.

### [2022-03-04T15:24:33+00:00](https://github.com/leanprover-community/mathlib/commit/e41303d625930b3b08f5346a9ab75810e79b12d3)
feat(category_theory/limits/shapes): preserving (co)kernels ([#12419](https://github.com/leanprover-community/mathlib/pull/#12419))

This is work towards showing that homology is a lax monoidal functor.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-04T14:03:56+00:00](https://github.com/leanprover-community/mathlib/commit/2d6c52af794cf8fc7e328237a8319f1ebf2adf5e)
feat(topology/metric_space/polish): definition and basic properties of polish spaces ([#12437](https://github.com/leanprover-community/mathlib/pull/#12437))

A topological space is Polish if its topology is second-countable and there exists a compatible
complete metric. This is the class of spaces that is well-behaved with respect to measure theory.
In this PR, we establish basic (and not so basic) properties of Polish spaces.

### [2022-03-04T14:03:54+00:00](https://github.com/leanprover-community/mathlib/commit/0a3d1440228fe6fc43dbaeabdd9e1bd403af5c04)
chore(topology/algebra/uniform_mul_action): add `has_uniform_continuous_const_smul.op` ([#12434](https://github.com/leanprover-community/mathlib/pull/#12434))

This matches `has_continuous_const_smul.op` and other similar lemmas.

With this in place, we can state `is_central_scalar` on `completion`s.

### [2022-03-04T14:03:53+00:00](https://github.com/leanprover-community/mathlib/commit/cac9242e10112eb971b4084f47852afd9bb7889e)
chore(analysis/complex/basic): golf `norm_rat/int/int_of_nonneg` ([#12433](https://github.com/leanprover-community/mathlib/pull/#12433))

While looking at PR [#12428](https://github.com/leanprover-community/mathlib/pull/#12428), I found some easy golfing of some lemmas (featuring my first-ever use of `single_pass`! :smile: ).

### [2022-03-04T14:03:51+00:00](https://github.com/leanprover-community/mathlib/commit/173f161b4577fba319c3159befb3f24743c2babd)
feat(set_theory/ordinal_arithmetic): `bsup` / `blsub` of function composition ([#12381](https://github.com/leanprover-community/mathlib/pull/#12381))

### [2022-03-04T12:39:06+00:00](https://github.com/leanprover-community/mathlib/commit/a72170000ab66730fd9454ffef4824d8f44f94a6)
chore(algebra/algebra/operations): add missing `@[elab_as_eliminator]` on recursors ([#12440](https://github.com/leanprover-community/mathlib/pull/#12440))

`refine submodule.pow_induction_on' _ _ _ _ h` struggles without this attribute

### [2022-03-04T12:39:04+00:00](https://github.com/leanprover-community/mathlib/commit/4a416bc2094d81385fded62f2eee72f88a0d3d46)
feat(set_theory/ordinal_arithmetic): `is_normal.blsub_eq` ([#12379](https://github.com/leanprover-community/mathlib/pull/#12379))

### [2022-03-04T12:39:03+00:00](https://github.com/leanprover-community/mathlib/commit/b1444600eab450b650547d9f87f729b7381604ea)
feat(number_theory/cyclotomic/primitive_roots): generalize norm_eq_one ([#12359](https://github.com/leanprover-community/mathlib/pull/#12359))

We generalize `norm_eq_one`, that now computes the norm of any primitive `n`-th root of unity if `n ≠ 2`. We modify the assumption, that is still verified in the main case of interest `K = ℚ`.

From flt-regular

### [2022-03-04T12:39:02+00:00](https://github.com/leanprover-community/mathlib/commit/53dc7ca3e494ef5ef302a119211e7e975558cea0)
feat(linear_algebra/basic): some basic lemmas about dfinsupp.sum ([#12214](https://github.com/leanprover-community/mathlib/pull/#12214))

Two basic lemmas about dfinsupp.sum that could be useful (I needed them for another project)

### [2022-03-04T09:26:44+00:00](https://github.com/leanprover-community/mathlib/commit/052d027fe92028ab16956f2d973b22f666956e4d)
refactor(algebra/category/Group/basic): Avoid data shuffle in `mul_equiv.to_Group_iso` ([#12407](https://github.com/leanprover-community/mathlib/pull/#12407))

Change the definition of `mul_equiv.to_Group_iso` from `{X Y : Type*} [group X] [group Y] (e : X ≃* Y) : Group.of X ≅ Group.of Y` to `{X Y : Group} (e : X ≃* Y) : X ≅ Y`. Not making `X` and `Y` into `Group`s on the fly avoids rebundling them when they already are `Group`s, which breaks definitional equality.

### [2022-03-04T09:26:43+00:00](https://github.com/leanprover-community/mathlib/commit/0666dd5cb506e108c16ca9351a136369abb72716)
feat(order/bounded): The universal set is unbounded ([#12390](https://github.com/leanprover-community/mathlib/pull/#12390))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-04T09:26:42+00:00](https://github.com/leanprover-community/mathlib/commit/09c66fa1fddb71f207e76d9aeae864e387056945)
feat(counterexamples/seminorm_lattice_not_distrib): The lattice of seminorms is not distributive. ([#12099](https://github.com/leanprover-community/mathlib/pull/#12099))

A counterexample showing the lattice of seminorms is not distributive



Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>
Co-authored-by: pbazin <75327486+pbazin@users.noreply.github.com>
Co-authored-by: Patrick Massot <patrickmassot@free.fr>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-04T08:56:10+00:00](https://github.com/leanprover-community/mathlib/commit/82a142d158b1cf0bfca9090c48f1dcb610318d1d)
feat(algebra/category): Module R is monoidal closed for comm_ring R ([#12387](https://github.com/leanprover-community/mathlib/pull/#12387))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-04T07:06:13+00:00](https://github.com/leanprover-community/mathlib/commit/e96cf5e693dc14935c2cca01b091c09fd4bcc786)
feat(data/nat/gcd): add coprime_prod_left and coprime_prod_right ([#12268](https://github.com/leanprover-community/mathlib/pull/#12268))

### [2022-03-03T23:56:18+00:00](https://github.com/leanprover-community/mathlib/commit/40524f19d00567307d336f608a17f3f0642a36d8)
feat(algebra/star/self_adjoint): define normal elements of a star monoid ([#11991](https://github.com/leanprover-community/mathlib/pull/#11991))

In this PR, we define the normal elements of a star monoid, i.e. those elements `x`
that commute with `star x`. This is defined as the prop type class `is_star_normal`.

This was formalized as part of the semilinear maps paper.



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2022-03-03T23:15:44+00:00](https://github.com/leanprover-community/mathlib/commit/544f45bc84dba989cd69b73756c51984c0e052cc)
refactor(linear_algebra/bilinear_form): split off matrix part ([#12435](https://github.com/leanprover-community/mathlib/pull/#12435))

The bilinear form file is way too large. The part that concerns matrices is not depended on by the general theory, and belongs in its own file.

### [2022-03-03T21:32:01+00:00](https://github.com/leanprover-community/mathlib/commit/5371338f4af6b3f7362e8c8ffbcab8d1e928ab91)
feat(group_theory/torsion): all torsion monoids are groups ([#12432](https://github.com/leanprover-community/mathlib/pull/#12432))

Co-authored-by: Eric Rodriguez <ericrboidi@gmail.com>

### [2022-03-03T21:32:00+00:00](https://github.com/leanprover-community/mathlib/commit/1af53ff5dc13f8e13a78993b75398afe26d91cda)
feat(polynomial/cyclotomic): some divisibility results ([#12426](https://github.com/leanprover-community/mathlib/pull/#12426))





Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-03-03T21:31:59+00:00](https://github.com/leanprover-community/mathlib/commit/54c286dbd0e730e2e282ad1cb856a7a175d25a93)
feat(data/{nat,int,rat}/cast, algebra/star/basic): lemmas about `star` on casts ([#12418](https://github.com/leanprover-community/mathlib/pull/#12418))

This also includes lemmas about `mul_opposite` on casts which are used to prove the star lemmas. The new lemmas are:

* `star_nat_cast`
* `star_int_cast`
* `star_rat_cast`
* `op_nat_cast`
* `op_int_cast`
* `op_rat_cast`
* `unop_nat_cast`
* `unop_int_cast`
* `unop_rat_cast`

### [2022-03-03T21:31:57+00:00](https://github.com/leanprover-community/mathlib/commit/9deac65c9056a200a28e1f0e483905ce63fb7fa2)
feat(ring_theory/ideal): more lemmas on ideals multiplied with submodules ([#12401](https://github.com/leanprover-community/mathlib/pull/#12401))

These are, like [#12178](https://github.com/leanprover-community/mathlib/pull/#12178), split off from [#12287](https://github.com/leanprover-community/mathlib/pull/#12287)

### [2022-03-03T21:31:56+00:00](https://github.com/leanprover-community/mathlib/commit/2fc2d1b65a53dff374d0b70bcce0a7843c8f7c32)
feat(linear_algebra/clifford_algebra): lemmas about mapping submodules ([#12399](https://github.com/leanprover-community/mathlib/pull/#12399))

### [2022-03-03T21:31:55+00:00](https://github.com/leanprover-community/mathlib/commit/e84c1a964a93b8265a27d266e5012d624be28267)
chore(linear_algebra/general_linear_group): replace coe_fn with coe in lemma statements ([#12397](https://github.com/leanprover-community/mathlib/pull/#12397))

This way, all the lemmas are expressed in terms of `↑` and not `⇑`.
This matches the approach used in `special_linear_group`.

### [2022-03-03T21:31:54+00:00](https://github.com/leanprover-community/mathlib/commit/4503732aaacced636cdf063c8950f8223c06a213)
feat(field_theory/cardinality): cardinality of fields & localizations ([#12285](https://github.com/leanprover-community/mathlib/pull/#12285))




Co-authored-by: Junyan Xu <junyanxumath@gmail.com>
Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-03-03T21:31:52+00:00](https://github.com/leanprover-community/mathlib/commit/2c0fa8294c1bb0cf9b316d22afaef33c52277430)
feat(group_theory/free_product): the 🏓-lemma ([#12210](https://github.com/leanprover-community/mathlib/pull/#12210))

The Ping-Pong-Lemma.

If a group action of `G` on `X` so that the `H i` acts in a specific way on disjoint subsets
`X i` we can prove that `lift f` is injective, and thus the image of `lift f` is isomorphic to the free product of the `H i`.

Often the Ping-Pong-Lemma is stated with regard to subgroups `H i` that generate the whole group; we generalize to arbitrary group homomorphisms `f i : H i →* G` and do not require the group to be generated by the images.

Usually the Ping-Pong-Lemma requires that one group `H i` has at least three elements. This condition is only needed if `# ι = 2`, and we accept `3 ≤ # ι` as an alternative.

### [2022-03-03T21:31:51+00:00](https://github.com/leanprover-community/mathlib/commit/f549c1038593e85e65913a0a10cf59b083ee59e8)
feat(set_theory/cardinal_divisibility): add lemmas about divisibility in the cardinals ([#12197](https://github.com/leanprover-community/mathlib/pull/#12197))

### [2022-03-03T21:31:50+00:00](https://github.com/leanprover-community/mathlib/commit/2a05bb3a39d92fb5020f1ce450957c5da46ef8ca)
feat(ring_theory/witt_vector): classify 1d isocrystals ([#12041](https://github.com/leanprover-community/mathlib/pull/#12041))

To show an application of semilinear maps that are not linear or conjugate-linear, we formalized the one-dimensional version of a theorem by Dieudonné and Manin classifying the isocrystals over an algebraically closed field with positive characteristic. This work is described in a recent draft from @dupuisf , @hrmacbeth , and myself: https://arxiv.org/abs/2202.05360

Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2022-03-03T19:28:04+00:00](https://github.com/leanprover-community/mathlib/commit/066ffdb38834a77e60d128b15976aa9d78c46a60)
chore(algebra/*): provide `non_assoc_ring` instances ([#12414](https://github.com/leanprover-community/mathlib/pull/#12414))

### [2022-03-03T19:28:03+00:00](https://github.com/leanprover-community/mathlib/commit/5d0960b6dfee0c3f7d674a5cd2a27173f653d1eb)
feat(data/int/basic): add three lemmas about ints, nats and int_nat_abs ([#12380](https://github.com/leanprover-community/mathlib/pull/#12380))

[Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/int.2Eto_nat_eq_zero)

### [2022-03-03T19:28:02+00:00](https://github.com/leanprover-community/mathlib/commit/cdb69d5c8af275fbacda8f84f96b6262ac426058)
fix(data/set/function): do not use reducible ([#12377](https://github.com/leanprover-community/mathlib/pull/#12377))

Reducible should only be used if the definition if it occurs as an explicit argument in a type class and must reduce during type class search, or if it is a type that should inherit instances.  Propositions should only be reducible if they are trivial variants (`<` and `>` for example).

These reducible attributes here will cause issues in Lean 4.  In Lean 4, the simplifier unfold reducible definitions in simp lemmas.  This means that tagging an `inj_on`-theorem with `@[simp]` creates the simp lemma `?a = ?b` (i.e. match anything).

### [2022-03-03T19:28:00+00:00](https://github.com/leanprover-community/mathlib/commit/363b7cd90ec4994d7973a3296a75cb6fcb20e7d3)
feat(algebra/ring/basic): generalize lemmas about differences of squares to non-commutative rings ([#12366](https://github.com/leanprover-community/mathlib/pull/#12366))

This copies `mul_self_sub_mul_self` and `mul_self_eq_mul_self_iff` to the `commute` namespace, and reproves the existing lemmas in terms of the new commute lemmas.

As a result, the requirements on `mul_self_sub_one` and `mul_self_eq_one_iff` and `units.inv_eq_self_iff` can be weakened from `comm_ring` to `non_unital_non_assoc_ring` or `ring`.

This also replaces a few `is_domain`s with the weaker `no_zero_divisors`, since the lemmas are being moved anyway. In practice this just removes the nontriviality requirements.

### [2022-03-03T19:27:59+00:00](https://github.com/leanprover-community/mathlib/commit/e823109e05633d10bf3c9f6de6e2f6230720f15f)
chore(algebra/{group,group_with_zero}/basic): rename `div_mul_div` and `div_mul_comm` ([#12365](https://github.com/leanprover-community/mathlib/pull/#12365))

The new name, `div_mul_div_comm` is consistent with `mul_mul_mul_comm`.

Obviously this renames the additive versions too.

### [2022-03-03T19:27:58+00:00](https://github.com/leanprover-community/mathlib/commit/ca7346de63768c180cad3847fd42a428e9e5af7b)
feat(combinatorics/simple_graph/connectivity): add walk.darts ([#12360](https://github.com/leanprover-community/mathlib/pull/#12360))

Darts can be more convenient than edges when working with walks since they keep track of orientation. This adds the list of darts along a walk and uses this to define and prove things about edges along a walk.

### [2022-03-03T19:27:57+00:00](https://github.com/leanprover-community/mathlib/commit/3b0111b9da7a38a36fba8817000469f1c316c888)
feat(field_theory/minpoly): add minpoly_add_algebra_map and minpoly_sub_algebra_map ([#12357](https://github.com/leanprover-community/mathlib/pull/#12357))

We add minpoly_add_algebra_map and minpoly_sub_algebra_map: the minimal polynomial of x ± a.

From flt-regular

### [2022-03-03T19:27:56+00:00](https://github.com/leanprover-community/mathlib/commit/301a266fff353d7bd465dc3359086f69a052976b)
feat(number_theory/cyclotomic/primitive_roots): add is_primitive_root.sub_one_power_basis ([#12356](https://github.com/leanprover-community/mathlib/pull/#12356))

We add `is_primitive_root.sub_one_power_basis`,  the power basis of a cyclotomic extension given by `ζ - 1`, where `ζ ` is a primitive root of unity.

From flt-regular.

### [2022-03-03T19:27:55+00:00](https://github.com/leanprover-community/mathlib/commit/78b323bcadd58f0ef13ea4b2701fb0b0de319e11)
feat(analysis/special_functions/trigonometric): inequality `tan x  > x` ([#12352](https://github.com/leanprover-community/mathlib/pull/#12352))

### [2022-03-03T19:27:53+00:00](https://github.com/leanprover-community/mathlib/commit/d0816c0f483bb9a33b1769d7085f2ff8d6d8c40c)
feat(analysis/calculus): support and cont_diff ([#11976](https://github.com/leanprover-community/mathlib/pull/#11976))

* Add some lemmas about the support of the (f)derivative of a function
* Add some equivalences for `cont_diff`

### [2022-03-03T17:48:13+00:00](https://github.com/leanprover-community/mathlib/commit/16d48d7ed350fea30a1e072db9013c72534fd119)
feat(algebra/star/basic + analysis/normed_space/star/basic): add two eq_zero/ne_zero lemmas ([#12412](https://github.com/leanprover-community/mathlib/pull/#12412))

Added two lemmas about elements being zero or non-zero.

Golf a proof.

### [2022-03-03T17:48:12+00:00](https://github.com/leanprover-community/mathlib/commit/3fa09c27cac796f64311c3d78b79689d5918107e)
feat(algebra/homology/homotopy): compatibilities of null_homotopic_map with composition and additive functors ([#12392](https://github.com/leanprover-community/mathlib/pull/#12392))

### [2022-03-03T17:48:10+00:00](https://github.com/leanprover-community/mathlib/commit/0da2d1d9884f9488b8937f4e699ed369e0cbba09)
feat(ring_theory/polynomial/eisenstein): add mem_adjoin_of_smul_prime_pow_smul_of_minpoly_is_eiseinstein_at ([#12371](https://github.com/leanprover-community/mathlib/pull/#12371))

We add `mem_adjoin_of_smul_prime_pow_smul_of_minpoly_is_eiseinstein_at`: let `K` be the field of fraction of an integrally closed domain `R` and let `L` be a separable extension of `K`, generated by an integral power basis `B` such that the minimal polynomial of `B.gen` is Eisenstein at `p`. Given `z : L` integral over `R`, if `p ^ n • z ∈ adjoin R {B.gen}`, then `z ∈ adjoin R {B.gen}`. Together with `algebra.discr_mul_is_integral_mem_adjoin` this result often allows to compute the ring of integers of `L`.

From flt-regular

### [2022-03-03T17:48:08+00:00](https://github.com/leanprover-community/mathlib/commit/b0cf3d7345a19922e6411a4ef5b23c56c9ad9618)
feat(algebra/algebra/subalgebra): add a helper to promote submodules to subalgebras ([#12368](https://github.com/leanprover-community/mathlib/pull/#12368))

### [2022-03-03T17:48:05+00:00](https://github.com/leanprover-community/mathlib/commit/ba998da980d40c4bd4350b5fffb1e32c84ca25c3)
feat(algebra/order/monoid_lemmas_zero_lt): more lemmas using `pos_mul` and friends ([#12355](https://github.com/leanprover-community/mathlib/pull/#12355))

This PR continues the `order` refactor.  The added lemmas are the `\le` analogues of the `<` lemmas that are already present.

### [2022-03-03T17:48:03+00:00](https://github.com/leanprover-community/mathlib/commit/5159a8fb2232ddfc20d7804802ca2e676a3d6146)
feat(simplex_category): various epi/mono lemmas ([#11924](https://github.com/leanprover-community/mathlib/pull/#11924))




Co-authored-by: Joël Riou <37772949+joelriou@users.noreply.github.com>

### [2022-03-03T16:19:52+00:00](https://github.com/leanprover-community/mathlib/commit/f41897d94fe3d89113c7db4ad68b72e0693ff146)
feat(dynamics/fixed_points/basic): Fixed points are a subset of the range ([#12423](https://github.com/leanprover-community/mathlib/pull/#12423))

### [2022-03-03T16:19:50+00:00](https://github.com/leanprover-community/mathlib/commit/4edf36d1becfeae900d99f1ce6503ae7c0f67282)
feat(data/nat/fib): sum of initial fragment of the Fibonacci sequence is one less than a Fibonacci number ([#12416](https://github.com/leanprover-community/mathlib/pull/#12416))

### [2022-03-03T16:19:49+00:00](https://github.com/leanprover-community/mathlib/commit/59bf4540bbb125f7f2e1b46be299936a74846790)
refactor(measure_theory): enable dot notation for measure.map ([#12350](https://github.com/leanprover-community/mathlib/pull/#12350))

Refactor to allow for using dot notation with `measure.map` (was previously not possible because it was bundled as a linear map). Mirrors `measure.restrict` wrapper implementation for `measure.restrictₗ`.

### [2022-03-03T16:19:48+00:00](https://github.com/leanprover-community/mathlib/commit/c5045853ffbabe3a2a8aba0cb6436891b9521417)
fix(number_theory/number_field): make ring_of_integers_algebra not an instance ([#12331](https://github.com/leanprover-community/mathlib/pull/#12331))

This issue has caused problems for at least two of Kevin's PhD students; it is better to remove it for now or disable it temporarily.

c.f. https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond.20for.20monoid.20instance.20on.20ideals



Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-03-03T16:19:47+00:00](https://github.com/leanprover-community/mathlib/commit/0ac3f9d20efbebc2c166f31387fba624c460026e)
feat(category_theory/preadditive): the category of additive functors ([#12330](https://github.com/leanprover-community/mathlib/pull/#12330))

### [2022-03-03T16:19:46+00:00](https://github.com/leanprover-community/mathlib/commit/691722a604d9afa9939c457258f79ca80b62e509)
feat(set_theory/ordinal): `enum` is injective ([#12319](https://github.com/leanprover-community/mathlib/pull/#12319))

### [2022-03-03T16:19:45+00:00](https://github.com/leanprover-community/mathlib/commit/18f53db52e3a5718b5f5ae9a17475292597086d8)
feat(topology/metric_space/pi_nat): metric structure on product spaces ([#12220](https://github.com/leanprover-community/mathlib/pull/#12220))

We endow the spaces `Π (n : ℕ), E n` or `Π (i : ι), E i` with various distances (not registered as instances), and use these to show that these spaces retract on their closed subsets.

### [2022-03-03T14:50:37+00:00](https://github.com/leanprover-community/mathlib/commit/8053f56d9b3d3356b782cd2b4bc717acfc7596b5)
feat(ring_theory/dedekind_domain): strengthen `exist_integer_multiples` ([#12184](https://github.com/leanprover-community/mathlib/pull/#12184))

Let `J ≠ ⊤` be an ideal in a Dedekind domain `A`, and `f ≠ 0` a finite collection of elements of `K = Frac(A)`, then we can multiply the elements of `f` by some `a : K` to find a collection of elements of `A` that is not completely contained in `J`.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2022-03-03T14:50:36+00:00](https://github.com/leanprover-community/mathlib/commit/4dec7b50588417cab2c88987f10a0a1028dd28e3)
feat(ring_theory/ideal): `(I : ideal R) • (⊤ : submodule R M)` ([#12178](https://github.com/leanprover-community/mathlib/pull/#12178))

Two useful lemmas on the submodule spanned by `I`-scalar multiples.





Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2022-03-03T13:01:44+00:00](https://github.com/leanprover-community/mathlib/commit/26d9d38f32c59438b73e0627aa8fb25462a5a83d)
feat(number_theory): padic.complete_space instance ([#12424](https://github.com/leanprover-community/mathlib/pull/#12424))

### [2022-03-03T13:01:43+00:00](https://github.com/leanprover-community/mathlib/commit/bf203b9515adecea7000ef7980417de876620321)
docs(set_theory/cofinality): Fix cofinality definition ([#12421](https://github.com/leanprover-community/mathlib/pull/#12421))

The condition is `a ≤ b`, not `¬(b > a)`.

### [2022-03-03T13:01:42+00:00](https://github.com/leanprover-community/mathlib/commit/02cad2cd6dd69467e4b06713f13a01b2d233dbfc)
feat(data/complex/basic): add abs_hom ([#12409](https://github.com/leanprover-community/mathlib/pull/#12409))





Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-03-03T13:01:40+00:00](https://github.com/leanprover-community/mathlib/commit/bc35902cced82047f701ded020f2131bdeddaeae)
chore(algebra/group/hom): more generic `f x ≠ 1` lemmas ([#12404](https://github.com/leanprover-community/mathlib/pull/#12404))

 * `map_ne_{one,zero}_iff` is the `not_congr` version of `map_eq_one_iff`, which was previously only available for `mul_equiv_class`

 * `ne_{one,zero}_of_map` is one direction of `map_ne_{one,zero}_iff` that doesn't assume injectivity



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2022-03-03T13:01:39+00:00](https://github.com/leanprover-community/mathlib/commit/ca0ff3adad997181d7ab78b366f2cfdcd048f73a)
feat(algebra/algebra/spectrum): show the star and spectrum operations commute ([#12351](https://github.com/leanprover-community/mathlib/pull/#12351))

This establishes the identity `(σ a)⋆ = σ a⋆` for any `a : A` where `A` is a star ring and a star module over a star add monoid `R`.

### [2022-03-03T13:01:38+00:00](https://github.com/leanprover-community/mathlib/commit/f7a6fe9e090dd12fb01ba67216e90f4033672a7f)
feat(set_theory/cofinality): Prove simple theorems on regular cardinals ([#12328](https://github.com/leanprover-community/mathlib/pull/#12328))

### [2022-03-03T11:09:23+00:00](https://github.com/leanprover-community/mathlib/commit/16ad25c20cf5b8be24357cf9e45bcb76ddbbcae0)
chore(analysis/normed_space/star/basic): golf a proof ([#12420](https://github.com/leanprover-community/mathlib/pull/#12420))

Shorten a proof using ext.

### [2022-03-03T11:09:21+00:00](https://github.com/leanprover-community/mathlib/commit/228ab96a433308db3cd9368e460670e725e1dbfc)
feat(data/list/destutter): add `list.destutter` to remove chained duplicates ([#11934](https://github.com/leanprover-community/mathlib/pull/#11934))





Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-03T09:29:13+00:00](https://github.com/leanprover-community/mathlib/commit/46b9d057605a5f2c53246d610bbf1fe84301c5ec)
feat(data/part): Lemmas for get on binary function instances ([#12194](https://github.com/leanprover-community/mathlib/pull/#12194))


A variety of lemmas such as `mul_get_eq` for `part`.

### [2022-03-03T07:35:45+00:00](https://github.com/leanprover-community/mathlib/commit/9f721bab671209e1f0a5f5afd4291218cdf1ac98)
chore(logic/function/basic): add function.ne_iff ([#12288](https://github.com/leanprover-community/mathlib/pull/#12288))

### [2022-03-03T00:08:38+00:00](https://github.com/leanprover-community/mathlib/commit/9deeddb30afb27a369162a622c57312db9ebab0b)
feat(algebra/algebra/operations): `submodule.map_pow` and opposite lemmas ([#12374](https://github.com/leanprover-community/mathlib/pull/#12374))

To prove `map_pow`, we add `submodule.map_hom` to match the very-recently-added `ideal.map_hom`. 

The opposite lemmas can be used to extend these results for maps that reverse multiplication, by factoring them into an `alg_hom` into the opposite type composed with `mul_opposite.op`.

`(↑(op_linear_equiv R : A ≃ₗ[R] Aᵐᵒᵖ) : A →ₗ[R] Aᵐᵒᵖ)` is really a mouthful, but the elaborator can't seem to work out the type any other way, and `.to_linear_map` appears not to be the preferred form for `simp` lemmas.

### [2022-03-02T22:17:15+00:00](https://github.com/leanprover-community/mathlib/commit/6f74d3cc68b7b230d5281be58c357a286871f859)
chore(algebra/ring/basic): generalize lemmas to non-associative rings ([#12411](https://github.com/leanprover-community/mathlib/pull/#12411))

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-02T21:08:47+00:00](https://github.com/leanprover-community/mathlib/commit/ce26d75dd8a2101fee3572e717b34774fe9a78e0)
refactor(analysis/normed_space/basic): split into normed_space and ../normed/normed_field ([#12410](https://github.com/leanprover-community/mathlib/pull/#12410))

Splits off the sections about normed rings and fields of the file `analysis/normed_space/basic` into a new file `analysis/normed/normed_field`.

### [2022-03-02T20:03:20+00:00](https://github.com/leanprover-community/mathlib/commit/423328e04129ffef095f66860200faa7d4d7a1bd)
chore(probability/independence): change to set notation and `measurable_set` ([#12400](https://github.com/leanprover-community/mathlib/pull/#12400))

### [2022-03-02T18:33:51+00:00](https://github.com/leanprover-community/mathlib/commit/a283e17bd839e9d75fe977bb10389d708cdd3b4d)
feat(algebra/module/submodule_pointwise): pointwise negation ([#12405](https://github.com/leanprover-community/mathlib/pull/#12405))

We already have pointwise negation on `add_submonoid`s (from [#10451](https://github.com/leanprover-community/mathlib/pull/#10451)), this extends it to `submodules`.
The lemmas are all copies of the add_submonoid lemmas, except for two new lemmas:

* `submodule.neg_to_add_submonoid`
* `submodule.neg_eq_self`, which isn't true for `add_submonoid`s

Finally, we provide a `has_distrib_neg` instance; even though the negation is not cancellative, it does distribute over multiplication as expected.

### [2022-03-02T17:49:08+00:00](https://github.com/leanprover-community/mathlib/commit/90e2957ebf4bd208c27795dd16ced767f8466270)
chore(measure_theory/function/egorov): rename `uniform_integrability` file to `egorov` ([#12402](https://github.com/leanprover-community/mathlib/pull/#12402))

### [2022-03-02T14:31:45+00:00](https://github.com/leanprover-community/mathlib/commit/7959d9824b2a722d6ee8857bf6d1761d33d9ec7b)
feat(linear_algebra/matrix.determinant): add `matrix.det_neg` ([#12396](https://github.com/leanprover-community/mathlib/pull/#12396))

### [2022-03-02T14:31:43+00:00](https://github.com/leanprover-community/mathlib/commit/c96fb62bb449b5731c85f0d23902dd989fac3cea)
refactor(group_theory/*): Rename `general_commutator.lean` to `commutator.lean` ([#12388](https://github.com/leanprover-community/mathlib/pull/#12388))

Followup to [#12308](https://github.com/leanprover-community/mathlib/pull/#12308).

### [2022-03-02T14:31:41+00:00](https://github.com/leanprover-community/mathlib/commit/d00cbee329f48c6fc0839321c2735e69b2dd4b35)
feat(algebra/big_operators/basic): prod_dvd_prod_of_subset ([#12383](https://github.com/leanprover-community/mathlib/pull/#12383))

### [2022-03-02T14:31:40+00:00](https://github.com/leanprover-community/mathlib/commit/22ddf9a3b7b6eb79cfa25a202e6e51dde0c8a6b6)
feat(ring_theory/ideal): `map f (I^n) = (map f I)^n` ([#12370](https://github.com/leanprover-community/mathlib/pull/#12370))

### [2022-03-02T12:52:29+00:00](https://github.com/leanprover-community/mathlib/commit/4e8d8f271b3b5828ec660d9db5976f3052e2a8f2)
feat(ring_theory/unique_factorization_domain): factors of `p^k` ([#12369](https://github.com/leanprover-community/mathlib/pull/#12369))

This is a relatively trivial application of existing lemmas, but the result is a particularly nice shape that I felt worth to add to the library.





Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2022-03-02T12:52:28+00:00](https://github.com/leanprover-community/mathlib/commit/f191f521c8d7582da918e57215101729d6b1f16b)
chore(algebra/big_operators): generalize `map_prod` to `monoid_hom_class` ([#12354](https://github.com/leanprover-community/mathlib/pull/#12354))

This PR generalizes the following lemmas to `(add_)monoid_hom_class`:
 * `map_prod`, `map_sum`
 * `map_multiset_prod`, `map_multiset_sum`
 * `map_list_prod`, `map_list_sum`
 * `map_finsupp_prod`, `map_finsupp_sum`

I haven't removed any of the existing specialized, namespaced versions of these lemmas yet, but I have marked them as `protected` and added a docstring saying to use the generic version instead.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2022-03-02T10:22:02+00:00](https://github.com/leanprover-community/mathlib/commit/20d95410be184dd9fdc01e2038d4dc4f61062315)
chore(ring_theory/localization): `localization_map_bijective` rename & `field` instance version ([#12375](https://github.com/leanprover-community/mathlib/pull/#12375))

### [2022-03-02T09:30:27+00:00](https://github.com/leanprover-community/mathlib/commit/35086a11bdbe9fffc1903bad9869a1ea0c2a3a40)
feat(probability): define conditional probability and add basic related theorems ([#12344](https://github.com/leanprover-community/mathlib/pull/#12344))

Add the definition of conditional probability as a scaled restricted measure and prove Bayes' Theorem and other basic theorems.



Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2022-03-02T07:46:20+00:00](https://github.com/leanprover-community/mathlib/commit/1eebec51949363422dc4f31495138eacbb8587b4)
perf(data/fintype/basic): speed up mem_of_mem_perms_of_list ([#12389](https://github.com/leanprover-community/mathlib/pull/#12389))

This single theorem was taking twice as long as everything else in the file put together, and it was easy to fix.

### [2022-03-02T07:46:19+00:00](https://github.com/leanprover-community/mathlib/commit/9daa23384d034f1ff22f4b457069bca64a7c8db0)
doc(*): fix broken markdown links ([#12385](https://github.com/leanprover-community/mathlib/pull/#12385))

Some urls to nLab were also weird, so I replaced it with less weird ones.

The `MM91` reference was presumably intended to reference `MM92`.

### [2022-03-02T07:46:18+00:00](https://github.com/leanprover-community/mathlib/commit/b77ff23442cf9cf0387bf6c7391509189e641ec8)
feat(algebra/ring): add non-unital and non-associative rings ([#12300](https://github.com/leanprover-community/mathlib/pull/#12300))

Following up on [#11124](https://github.com/leanprover-community/mathlib/pull/#11124).

The longer term goal is to develop C^* algebras, where non-unital algebras are an essential part of the theory.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-02T06:23:49+00:00](https://github.com/leanprover-community/mathlib/commit/fefe359d48630c94826dfc387b17602518156a55)
feat(set_theory/principal): prove theorems about additive principal ordinals ([#11704](https://github.com/leanprover-community/mathlib/pull/#11704))

### [2022-03-02T04:09:19+00:00](https://github.com/leanprover-community/mathlib/commit/a9902d54bdad3a14607ec95ff300987398931354)
feat(algebra/divisibility): generalise basic facts to semigroups ([#12325](https://github.com/leanprover-community/mathlib/pull/#12325))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-02T02:44:42+00:00](https://github.com/leanprover-community/mathlib/commit/cc9de07ab35c004fe561321ca017ace6d8c7dab4)
feat(algebra/star): replace star_monoid with star_semigroup ([#12299](https://github.com/leanprover-community/mathlib/pull/#12299))

In preparation for allowing non-unital C^* algebras, replace star_monoid with star_semigroup.




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-03-01T23:58:42+00:00](https://github.com/leanprover-community/mathlib/commit/4ba9098e017db3764b1d9dc68871ab0c31ac2fe1)
feat(algebra/euclidean_domain,data/int/basic): dvd_div_of_mul_dvd ([#12382](https://github.com/leanprover-community/mathlib/pull/#12382))

We have a separate `int` and `euclidean_domain` version as `euclidean_domain` isn't pulled in by `int.basic`.

### [2022-03-01T22:20:43+00:00](https://github.com/leanprover-community/mathlib/commit/269280a195dd0a355dee490ca1b1d125ccbbb048)
feat(topology/bornology/basic): Define bornology ([#12036](https://github.com/leanprover-community/mathlib/pull/#12036))

This defines bornologies and provides the basic API. A bornology on a type is a filter consisting of cobounded sets which contains the cofinite sets; bounded sets are then complements of cobounded sets. This is equivalent to the usual formulation in terms of bounded sets, but provides access to mathlib's large filter library. We provide the relevant API for bounded sets.



Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-03-01T20:54:12+00:00](https://github.com/leanprover-community/mathlib/commit/5c2fa35ab5adb179f32dccd08fcda06056740172)
chore(topology/algebra/valuation): add universe ([#11962](https://github.com/leanprover-community/mathlib/pull/#11962))




Co-authored-by: Oliver Nash <github@olivernash.org>

### [2022-03-01T19:12:01+00:00](https://github.com/leanprover-community/mathlib/commit/818c81fc2279461036b41c567a445a65af15354a)
feat(ring_theory/integral_domain): finite integral domain is a field ([#12376](https://github.com/leanprover-community/mathlib/pull/#12376))

We don't yet have Wedderburn's little theorem (on my todo list), so adding some weaker versions to tide us over.

### [2022-03-01T19:11:59+00:00](https://github.com/leanprover-community/mathlib/commit/130e07d392cbae7db38019323ec309747f5a8abf)
chore(algebra/group/prod): `prod.swap` commutes with arithmetic ([#12367](https://github.com/leanprover-community/mathlib/pull/#12367))

This also adds some missing `div` lemmas using `to_additive`.

### [2022-03-01T17:25:51+00:00](https://github.com/leanprover-community/mathlib/commit/5e36e1213c246da906b002d4e608dc788871130c)
feat(category_theory/abelian/homology): Adds API for homology mimicking that of (co)kernels. ([#12171](https://github.com/leanprover-community/mathlib/pull/#12171))

### [2022-03-01T17:25:49+00:00](https://github.com/leanprover-community/mathlib/commit/b45657ffc0750357c2b0bf5c562e355126287f19)
feat(algebra/algebra/spectrum, analysis/normed_space/spectrum): prove the spectrum of any element in a complex Banach algebra is nonempty ([#12115](https://github.com/leanprover-community/mathlib/pull/#12115))

This establishes that the spectrum of any element in a (nontrivial) complex Banach algebra is nonempty. The nontrivial assumption is necessary, as otherwise the only element is invertible. In addition, we establish some properties of the resolvent function; in particular, it tends to zero at infinity.

- [x] depends on: [#12095](https://github.com/leanprover-community/mathlib/pull/#12095) 



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-03-01T17:25:48+00:00](https://github.com/leanprover-community/mathlib/commit/29c84f71d7b71dc3845a9329316f5040be2b6449)
feat(combinatorics/set_family/lym): Lubell-Yamamoto-Meshalkin inequalities ([#11248](https://github.com/leanprover-community/mathlib/pull/#11248))

This proves the two local LYM inequalities, the LYM inequality and Sperner's theorem.

Co-authored-by: Bhavik Mehta <bhavikmehta8@gmail.com>
Co-authored-by: Alena Gusakov @agusakov

### [2022-03-01T15:29:36+00:00](https://github.com/leanprover-community/mathlib/commit/3007f24ccfa0c1235e3ad6b355e331c2da88e07c)
chore(*): use `*_*_*_comm` where possible ([#12372](https://github.com/leanprover-community/mathlib/pull/#12372))

These lemmas are quite helpful when proving `map_add` type statements; hopefully people will remember them more if they see them used in a few more places.

### [2022-03-01T15:29:35+00:00](https://github.com/leanprover-community/mathlib/commit/3fb051dcd70dbf8b0f011045152c9e4fbc99685f)
feat(field_theory/krull_topology): added krull_topology_t2 ([#11973](https://github.com/leanprover-community/mathlib/pull/#11973))




Co-authored-by: Sebastian-Monnet <54352341+Sebastian-Monnet@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-03-01T14:22:58+00:00](https://github.com/leanprover-community/mathlib/commit/5a56e464f3e89333661c9b8199b37e00ace9988c)
chore(data/polynomial/monic): remove useless lemma ([#12364](https://github.com/leanprover-community/mathlib/pull/#12364))

There is a `nontrivial` version of this lemma (`ne_zero_of_monic`) which actually has uses in the library, unlike this deleted lemma. We also tidy the proof of the lemma below.

### [2022-03-01T14:22:57+00:00](https://github.com/leanprover-community/mathlib/commit/a4e936ca7d4a0d942604b48033132a825057187b)
chore(category_theory/idempotents) replaced "idempotence" by "idem" ([#12362](https://github.com/leanprover-community/mathlib/pull/#12362))

### [2022-03-01T10:36:01+00:00](https://github.com/leanprover-community/mathlib/commit/1f39ada741a090840aa891551d5fb6b3f1be6633)
feat(linear_algebra): generalize `linear_equiv.finrank_eq` to rings ([#12358](https://github.com/leanprover-community/mathlib/pull/#12358))

Since `finrank` doesn't assume the module is actually a vector space, neither should the statement that linear equivalences preserve it.

### [2022-03-01T07:35:56+00:00](https://github.com/leanprover-community/mathlib/commit/c223a81b93b263655c74ca7d8d9d997241e4e9f4)
feat(measure_theory/function/locally_integrable): define locally integrable ([#12216](https://github.com/leanprover-community/mathlib/pull/#12216))

* Define the locally integrable predicate
* Move all results about integrability on compact sets to a new file
* Rename some lemmas from `integrable_on_compact` -> `locally_integrable`, if appropriate.
* Weaken some type-class assumptions (also on `is_compact_interval`)
* Simplify proof of `continuous.integrable_of_has_compact_support`
* Rename variables in moved lemmas to sensible names

### [2022-03-01T02:55:33+00:00](https://github.com/leanprover-community/mathlib/commit/cd98967dfe04e8ade520f02136bd0af629d0b4e9)
feat(order/category/CompleteLattice): The category of complete lattices ([#12348](https://github.com/leanprover-community/mathlib/pull/#12348))

Define `CompleteLattice`, the category of complete lattices with complete lattice homomorphisms.

### [2022-03-01T02:55:33+00:00](https://github.com/leanprover-community/mathlib/commit/37885e8c3c320f446b00fef4051ef1cd9a725e6c)
feat(category_theory/idempotents): biproducts in idempotent completions ([#12333](https://github.com/leanprover-community/mathlib/pull/#12333))

### [2022-03-01T01:31:29+00:00](https://github.com/leanprover-community/mathlib/commit/73dd4b5411ec8fafb18a9d77c9c826907730af80)
refactor(category_theory/functor): a folder for concepts directly related to functors ([#12346](https://github.com/leanprover-community/mathlib/pull/#12346))

### [2022-02-28T16:08:55+00:00](https://github.com/leanprover-community/mathlib/commit/456898c78a673021294de10f0a6b53d609687765)
feat(data/finsupp/basic): Version of `finsupp.prod_add_index` with weaker premises ([#11353](https://github.com/leanprover-community/mathlib/pull/#11353))

A simpler proof of `finsupp.prod_add_index : (f + g).prod h = f.prod h * g.prod h` with weaker premises.

Specifically, this only requires:
* `[add_zero_class M]` rather than `[add_comm_monoid M]`
* `h_zero : ∀ a ∈ f.support ∪ g.support, h a 0 = 1` rather than `h_zero : ∀a, h a 0 = 1`.  
* `h_add : ∀ (a ∈ f.support ∪ g.support) b₁ b₂, h a (b₁ + b₂) = h a b₁ * h a b₂` rather than `h_add : ∀ a b₁ b₂, h a (b₁ + b₂) = h a b₁ * h a b₂` (thanks to Anne Baanen for spotting this weakening).

The original version has been retained and re-named to `finsupp.prod_add_index'`, since in some places this is more convenient to use.  (There was already a lemma called `prod_add_index'` which appears not to have been used anywhere.  This has been renamed to `prod_hom_add_index`.)

Discussed in this Zulip thread:
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Variant.20of.20finsupp.2Eprod_add_index.3F

### [2022-02-28T12:46:18+00:00](https://github.com/leanprover-community/mathlib/commit/1447c4016758526432625b1da4724f3605e5e673)
refactor(group_theory/general_commutator): Rename `general_commutator` to `subgroup.commutator` ([#12308](https://github.com/leanprover-community/mathlib/pull/#12308))

This PR renames `general_commutator` to `subgroup.commutator`.

I'll change the file name in a followup PR, so that this PR is easier to review.

(This is one of the several orthogonal changes from https://github.com/leanprover-community/mathlib/pull/12134)

### [2022-02-28T12:46:17+00:00](https://github.com/leanprover-community/mathlib/commit/92cbcc3245fa0ebf241cf85d014a26243b25c3d8)
chore(algebra): move star_ring structure on free_algebra ([#12297](https://github.com/leanprover-community/mathlib/pull/#12297))

There's no need to have `algebra.star.basic` imported transitively into pretty much everything, just to put the `star_ring` structure on `free_algebra`, so I've moved this construction to its own file.

(I was changing definitions in `algebra.star.basic` to allow for more non-unital structures, it recompiling was very painful because of this transitive dependence.)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-02-28T12:46:16+00:00](https://github.com/leanprover-community/mathlib/commit/9c71c0f04415401a14a504f3ac4ef00f8bc5adb1)
feat(algebra/monoid_algebra/basic): add monomial_hom ([#12283](https://github.com/leanprover-community/mathlib/pull/#12283))

Just adding one definition



Co-authored-by: Cedric Holle <cedricholle0@gmail.com>

### [2022-02-28T12:46:15+00:00](https://github.com/leanprover-community/mathlib/commit/c7498d082d6a3edd1846ad6366e9e68c685ecf04)
feat(algebra/{group/with_one,order/monoid}): equivs for `with_zero` and `with_one` ([#12275](https://github.com/leanprover-community/mathlib/pull/#12275))

This provides:

* `add_equiv.with_zero_congr : α ≃+ β → with_zero α ≃+ with_zero β`
* `mul_equiv.with_one_congr : α ≃* β → with_one α ≃* with_one β`
* `with_zero.to_mul_bot : with_zero (multiplicative α) ≃* multiplicative (with_bot α)`

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/with_zero.20.28multiplicative.20A.29.20.E2.89.83*.20multiplicative.20.28with_bot.20A.29/near/272980650)

### [2022-02-28T12:46:14+00:00](https://github.com/leanprover-community/mathlib/commit/474aecb9e4233f64767d0952d4d67c7e3fcf56fb)
doc(algebra,data/fun_like): small morphism documentation improvements ([#11642](https://github.com/leanprover-community/mathlib/pull/#11642))

 * The `fun_like` docs talked about a `to_fun` class, this doesn't exist (anymore).
 * Warn that `{one,mul,monoid,monoid_with_zero}_hom.{congr_fun,congr_arg,coe_inj,ext_iff}` has been superseded by `fun_like`.

Thanks to @YaelDillies for pointing out these issues.

### [2022-02-28T12:16:38+00:00](https://github.com/leanprover-community/mathlib/commit/33c0a1cb89f6283ce6cceb7b555f68b2feefcdb3)
feat(ring_theory/dedekind_domain/ideal): add height_one_spectrum ([#12244](https://github.com/leanprover-community/mathlib/pull/#12244))

### [2022-02-28T10:33:37+00:00](https://github.com/leanprover-community/mathlib/commit/200c2541d5563be01b2c9190abda4a220043b645)
feat(algebra/algebra,data/equiv/ring): `{ring,alg}_equiv.Pi_congr_right` ([#12289](https://github.com/leanprover-community/mathlib/pull/#12289))

We extend `{add,mul}_equiv.Pi_congr_right` to rings and algebras.

Zulip thread: https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/.60ring_equiv.2EPi_congr_right.60





Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2022-02-28T10:33:35+00:00](https://github.com/leanprover-community/mathlib/commit/e700d56107c3826ae7c865e3d9b0e70c32440ce9)
feat(ring_theory/polynomial/eisenstein): add a technical lemma ([#11839](https://github.com/leanprover-community/mathlib/pull/#11839))

A technical lemma about Eiseinstein minimal polynomials.

From flt-regular

### [2022-02-28T10:33:34+00:00](https://github.com/leanprover-community/mathlib/commit/770a7ce2015c925e47ae40a8d5cc23bea043f515)
feat(measure_theory/function/convergence_in_measure): Define convergence in measure ([#11774](https://github.com/leanprover-community/mathlib/pull/#11774))


This PR defines convergence in measure and proves some properties about them. 
In particular, we prove that 
- convergence a.e. in a finite measure space implies convergence in measure
- convergence in measure implies there exists a subsequence that converges a.e.
- convergence in Lp implies convergence in measure

Co-authored-by: Rémy Degenne <remydegenne@gmail.com>



Co-authored-by: RemyDegenne <Remydegenne@gmail.com>

### [2022-02-28T10:33:33+00:00](https://github.com/leanprover-community/mathlib/commit/b25bad7deef2ec83156824ea2a6663b2d0b96bbc)
feat(archive/100-theorems-list): Partition theorem ([#4259](https://github.com/leanprover-community/mathlib/pull/#4259))

A proof of Euler's partition theorem, from the Freek list.
The proof is sorry-free but currently unpleasant, and some parts don't belong in `archive/`, so WIP for now.

Co-authored-by: Ruben Van de Velde <ruben.vandevelde+github@gmail.com>
Co-authored-by: Aaron Anderson <awainverse@gmail.com>

Co-authored-by: Julian Berman <Julian@GrayVines.com>
Co-authored-by: Ruben Van de Velde <65514131+Ruben-VandeVelde@users.noreply.github.com>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2022-02-28T09:09:20+00:00](https://github.com/leanprover-community/mathlib/commit/dc72624e9f68a2f23bf3a872f8432e34566c5c6d)
chore(measure_theory/function/strongly_measurable): remove useless no_zero_divisors assumption ([#12353](https://github.com/leanprover-community/mathlib/pull/#12353))

### [2022-02-28T08:31:53+00:00](https://github.com/leanprover-community/mathlib/commit/58c20c198242dcc4c614f0443c6ab8d94c418c88)
feat(measure_theory/group): add measures invariant under inversion/negation ([#11954](https://github.com/leanprover-community/mathlib/pull/#11954))

* Define measures invariant under `inv` or `neg`
* Prove lemmas about measures invariant under `inv` similar to the lemmas about measures invariant under `mul`
* Also provide more `pi` instances in `arithmetic`.
* Rename some `integral_zero...` lemmas to `integral_eq_zero...`
* Reformulate `pi.is_mul_left_invariant_volume` using nondependent functions, so that type class inference can find it for `ι → ℝ`)
* Add some more integration lemmas, also for multiplication

### [2022-02-28T02:34:22+00:00](https://github.com/leanprover-community/mathlib/commit/f3a04edad2f7569b2ec277c64d41fca364441525)
feat(group_theory/subgroup/basic): Centralizer subgroup ([#11946](https://github.com/leanprover-community/mathlib/pull/#11946))

This PR defines the centralizer subgroup, and provides a few basic lemmas.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-02-27T23:09:46+00:00](https://github.com/leanprover-community/mathlib/commit/2f86b49738d36029f3bc64dec3a0aa7d9da7dabc)
doc(data/set_like/basic): tidy up docstring ([#12337](https://github.com/leanprover-community/mathlib/pull/#12337))

Hopefully this makes the docstring slightly clearer.

### [2022-02-27T23:09:45+00:00](https://github.com/leanprover-community/mathlib/commit/dfacfd3450bf573acca2609a1b026e3d91515b08)
chore(linear_algebra/basic): make `linear_map.id_coe` elegible for `dsimp` ([#12334](https://github.com/leanprover-community/mathlib/pull/#12334))

`dsimp` only considers lemmas which _are_ proved by `rfl`, not ones that just _could_ be.

### [2022-02-27T22:39:10+00:00](https://github.com/leanprover-community/mathlib/commit/f322fa0f3f56654a2b51d4f8344c7dbb9768ae23)
refactor(group_theory/solvable): Delete duplicate lemma ([#12307](https://github.com/leanprover-community/mathlib/pull/#12307))

`map_commutator_eq_commutator_map` is a duplicate of `map_general_commutator`.

(This is one of the several orthogonal changes from [#12134](https://github.com/leanprover-community/mathlib/pull/#12134))

### [2022-02-27T22:00:44+00:00](https://github.com/leanprover-community/mathlib/commit/7f52f94aa63b156ed02b267abe6bff099e488659)
feat(analysis/complex): maximum modulus principle ([#12050](https://github.com/leanprover-community/mathlib/pull/#12050))

### [2022-02-27T21:28:31+00:00](https://github.com/leanprover-community/mathlib/commit/b5faa34b20d9c64a8b31398d0c180b773eb1e664)
feat(analysis/complex/liouville): prove Liouville's theorem ([#12095](https://github.com/leanprover-community/mathlib/pull/#12095))

### [2022-02-27T20:07:58+00:00](https://github.com/leanprover-community/mathlib/commit/a5ffb9b0f754afd6cc34174fb8de9fc09328fe1f)
feat(analysis/special_functions): little o behaviour of exp/log at infinity ([#11840](https://github.com/leanprover-community/mathlib/pull/#11840))

from the unit-fractions project

### [2022-02-27T16:32:35+00:00](https://github.com/leanprover-community/mathlib/commit/c4cf451ae28c049edb9d68d9fecd2dd2b9bd6fb9)
fix(catgory_theory/limits): fix a typo ([#12341](https://github.com/leanprover-community/mathlib/pull/#12341))

### [2022-02-27T16:04:10+00:00](https://github.com/leanprover-community/mathlib/commit/8ef4331c1844f618c01345be01c0bcf66379fa7c)
feat(ring_theory/witt_vector): Witt vectors are a DVR ([#12213](https://github.com/leanprover-community/mathlib/pull/#12213))

This PR adds two connected files. `mul_coeff.lean` adds an auxiliary result that's used in a few places in [#12041](https://github.com/leanprover-community/mathlib/pull/#12041) . One of these places is in `discrete_valuation_ring.lean`, which shows that Witt vectors over a perfect field form a DVR.

Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-02-27T15:35:55+00:00](https://github.com/leanprover-community/mathlib/commit/1dfb38d0da036f58f02d7c4f7a3422f4293af62e)
doc(imo*,algebra/continued_fractions/computation): change \minus to - ([#12338](https://github.com/leanprover-community/mathlib/pull/#12338))

Change around 14 instances of a non-standard minus to `-`.

### [2022-02-27T14:12:55+00:00](https://github.com/leanprover-community/mathlib/commit/00a3d02e8133bdf99f68af2e40ed1672f16884d7)
feat(geometry/euclidean/oriented_angle): oriented angles with respect to an orientation ([#12236](https://github.com/leanprover-community/mathlib/pull/#12236))

Add definitions and lemmas for oriented angles defined to take an
orientation, instead of an orthonormal basis, as an argument.  These
are the versions intended to be used by most users when working with
oriented angles between vectors, instead of users needing to deal with
a choice of basis.

Apart from the last five lemmas that relate angles and rotations for
different orientations or relate them explicitly to the definitions
with respect to a basis, everything is deduced directly from the
corresponding lemma that takes an orthonormal basis as an argument.

### [2022-02-27T10:57:38+00:00](https://github.com/leanprover-community/mathlib/commit/77e76ee5bcac94fe8b67d64b72ee59176761ea77)
feat(data/list/basic): add last'_append and head'_append_of_ne_nil ([#12221](https://github.com/leanprover-community/mathlib/pull/#12221))

we already have `head'_append` and `last'_append_of_ne_nil`, and users
might expect a symmetric API.

### [2022-02-27T09:13:42+00:00](https://github.com/leanprover-community/mathlib/commit/b1c2d70ab50fdc3c67441703ecae4fbc64276d7b)
feat(logic/function/basic): not_surjective_Type ([#12311](https://github.com/leanprover-community/mathlib/pull/#12311))

### [2022-02-27T08:45:41+00:00](https://github.com/leanprover-community/mathlib/commit/7ae0b362685220f70ef4ff37dec07cecbdc19630)
chore(category_theory/idempotents): minor suggestions ([#12303](https://github.com/leanprover-community/mathlib/pull/#12303))

@joelriou, here are some minor suggestions on your earlier Karoubi envelope work (I wasn't around when the PR went through.)

The two separate suggestions are some typos, and dropping some unnecessary proofs.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-02-27T06:00:11+00:00](https://github.com/leanprover-community/mathlib/commit/07374a2748872fdfa82d4683b7150eb89afd50a7)
feat(set_theory/cardinal): add three_le ([#12225](https://github.com/leanprover-community/mathlib/pull/#12225))

### [2022-02-27T04:07:15+00:00](https://github.com/leanprover-community/mathlib/commit/86d686cc079d31c9a9f64017006125128ddca17e)
feat(category_theory/category/Groupoid): Add coercion to sort ([#12324](https://github.com/leanprover-community/mathlib/pull/#12324))

Use coercion to type instead of `.α`

### [2022-02-27T04:07:14+00:00](https://github.com/leanprover-community/mathlib/commit/907e5ba4b1b288e7a3d88240d521fa771cf0a337)
fix(set_theory/ordinal_arithmetic): Fix universes ([#12320](https://github.com/leanprover-community/mathlib/pull/#12320))

`lsub_le_of_range_subset` and `lsub_eq_of_range_eq` should have had 3 universes, but they had only two.

### [2022-02-27T04:07:13+00:00](https://github.com/leanprover-community/mathlib/commit/906a88bd55d315f98c956b6c98bc194e5929b11d)
feat(data/quot): primed quotient funcs on `mk` ([#12204](https://github.com/leanprover-community/mathlib/pull/#12204))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2022-02-27T02:45:05+00:00](https://github.com/leanprover-community/mathlib/commit/4afb8d29c450c3f928af51a5cb4b3fc80bbf41d7)
feat(set_theory/ordinal_arithmetic): Added missing theorems for `lsub` and `blsub` ([#12318](https://github.com/leanprover-community/mathlib/pull/#12318))

These are the analogs of `lt_sup` and `lt_bsup`, respectively.

### [2022-02-27T02:45:04+00:00](https://github.com/leanprover-community/mathlib/commit/bb9539cf4c452221cf2919959e3db10816c73b17)
chore(set_theory/ordinal): Minor golf in `card` ([#12298](https://github.com/leanprover-community/mathlib/pull/#12298))

This was suggested by @b-mehta.

### [2022-02-27T02:45:02+00:00](https://github.com/leanprover-community/mathlib/commit/b4f87d9935a2a685bc530626a2a8c91f34848021)
feat(analysis/normed_space): add `normed_space 𝕜 (uniform_space.completion E)` ([#12148](https://github.com/leanprover-community/mathlib/pull/#12148))

### [2022-02-27T01:14:05+00:00](https://github.com/leanprover-community/mathlib/commit/abf5dfcabc7e2a820ab41bba076de150433a9401)
refactor(category_theory/eq_to_hom): conjugation by eq_to_hom same as heq ([#12025](https://github.com/leanprover-community/mathlib/pull/#12025))

Xu Junyan provided this lemma for showing that `heq` gives the same as conjugation by `eq_to_hom` for equality of functor maps. I refactored `hext` using this result.

Then I added a bunch of lemmas for how `heq` interacts with composition of functors and `functor.map` applied to composition of morphisms

Co-authored-by: jlh <48520973+Jlh18@users.noreply.github.com>

### [2022-02-27T01:14:04+00:00](https://github.com/leanprover-community/mathlib/commit/1fe9708e6022a06a486030c89ed0fae0c41b596b)
feat(group_theory/nilpotent): is_nilpotent_of_product_of_sylow_group ([#11834](https://github.com/leanprover-community/mathlib/pull/#11834))

### [2022-02-26T23:31:58+00:00](https://github.com/leanprover-community/mathlib/commit/add068d1e16641d63b4900d8948e68b4a8092665)
chore(linear_algebra/orientation): split into 2 files ([#12302](https://github.com/leanprover-community/mathlib/pull/#12302))

Move parts that don't need multilinear maps to a new file.

### [2022-02-26T23:31:57+00:00](https://github.com/leanprover-community/mathlib/commit/188b371bb01d0b0791dfbc6fc227b45def448818)
feat(algebra/category/GroupWithZero): The category of groups with zero ([#12278](https://github.com/leanprover-community/mathlib/pull/#12278))

Define `GroupWithZero`, the category of groups with zero with monoid with zero homs.

### [2022-02-26T23:31:55+00:00](https://github.com/leanprover-community/mathlib/commit/163d1a6d98caf9f0431704169027e49c5c6c6cc0)
feat(category_theory/idempotents): idempotent completeness and functor categories ([#12270](https://github.com/leanprover-community/mathlib/pull/#12270))

### [2022-02-26T23:31:53+00:00](https://github.com/leanprover-community/mathlib/commit/817b4c4b50c90197b85114b68203b2e515e64c80)
feat(order/category/BoundedLattice): The category of bounded lattices ([#12257](https://github.com/leanprover-community/mathlib/pull/#12257))

Define `BoundedLattice`, the category of bounded lattices with bounded lattice homs.

### [2022-02-26T22:03:39+00:00](https://github.com/leanprover-community/mathlib/commit/3d8c22fd1eb8c9dafc09fca7e40d37d09268f5c5)
refactor(topology/compact_open): Remove `locally_compact_space` hypothesis in `continuous_map.t2_space` ([#12306](https://github.com/leanprover-community/mathlib/pull/#12306))

This PR removes the `locally_compact_space` hypothesis in `continuous_map.t2_space`, at the cost of a longer proof.

### [2022-02-26T20:55:45+00:00](https://github.com/leanprover-community/mathlib/commit/4cf0e6006963c542865a7c4815b1ca45eb0e6a1b)
feat(category_theory/limits): generalize has_biproduct.of_has_product  ([#12116](https://github.com/leanprover-community/mathlib/pull/#12116))

### [2022-02-26T20:55:44+00:00](https://github.com/leanprover-community/mathlib/commit/09ba5304ed740d647ba12e6d11807169083a33dc)
feat(category_theory/limits): biproducts are unique up to iso ([#12114](https://github.com/leanprover-community/mathlib/pull/#12114))

### [2022-02-26T20:23:50+00:00](https://github.com/leanprover-community/mathlib/commit/fe6ea3ec90f44b04cefccc49fad65b71eca4f0ae)
feat(analysis/convex/integral): strict Jensen's inequality ([#11552](https://github.com/leanprover-community/mathlib/pull/#11552))

### [2022-02-26T19:39:04+00:00](https://github.com/leanprover-community/mathlib/commit/c8150ccfa9799ce748a91f4e0b3b96c2742af65e)
feat(analysis/normed_space/add_torsor): `dist` and `line_map` ([#12265](https://github.com/leanprover-community/mathlib/pull/#12265))

Add a few lemmas about the distance between `line_map p₁ p₂ c₁` and
`line_map p₁ p₂ c₂`.

### [2022-02-26T16:53:59+00:00](https://github.com/leanprover-community/mathlib/commit/3b49fe2571afb13aaf65903fef28d1231edbc1a6)
feat(algebra/star/pointwise, algebra/star/basic): add pointwise star, and a few convenience lemmas ([#12290](https://github.com/leanprover-community/mathlib/pull/#12290))

This adds a star operation to sets in the pointwise locale and establishes the basic properties. The names and proofs were taken from the corresponding ones for `inv`. A few extras were added.

### [2022-02-26T16:18:11+00:00](https://github.com/leanprover-community/mathlib/commit/87fc3eaec4239e31d75087c6bd7da5aeaa256e9a)
feat(analysis/normed_space/star/spectrum): prove the spectrum of a unitary element in a C*-algebra is a subset of the unit sphere ([#12238](https://github.com/leanprover-community/mathlib/pull/#12238))

The spectrum of a unitary element in a C*-algebra is a subset of the unit sphere in the scalar field. This will be used to show that the spectrum of selfadjoint elements is real-valued.

### [2022-02-26T13:23:26+00:00](https://github.com/leanprover-community/mathlib/commit/0f1bc2c03a73301b720e8659753eca9df8f45597)
feat(topology,analysis): any function is continuous/differentiable on a subsingleton ([#12293](https://github.com/leanprover-community/mathlib/pull/#12293))

Also add supporting lemmas about `is_o`/`is_O` and the `pure` filter
and drop an unneeded assumption in `asymptotics.is_o_const_const_iff`.

### [2022-02-26T11:40:32+00:00](https://github.com/leanprover-community/mathlib/commit/bfc0584230e787fc8bb4b2386917c59e6a2db75a)
refactor(topology,analysis): use `maps_to` in lemmas like `continuous_on.comp` ([#12294](https://github.com/leanprover-community/mathlib/pull/#12294))

### [2022-02-26T11:03:49+00:00](https://github.com/leanprover-community/mathlib/commit/d2d6f1787af2eb2eaa8f1b668a2e18a784a97cb8)
feat(analysis/inner_product_space/spectrum): `has_eigenvalue_eigenvalues` ([#12304](https://github.com/leanprover-community/mathlib/pull/#12304))

similar to the existing `has_eigenvector_eigenvector_basis`

### [2022-02-26T03:29:04+00:00](https://github.com/leanprover-community/mathlib/commit/d6a8e5d7dc12a8d39dec34221009e244c141529c)
feat(topology/compact_open): `simp`-lemmas for `compact_open.gen` ([#12267](https://github.com/leanprover-community/mathlib/pull/#12267))

This PR adds some basic `simp`-lemmas for `compact_open.gen`.

### [2022-02-26T03:29:03+00:00](https://github.com/leanprover-community/mathlib/commit/7201c3b46e4cc95960ec0c1ba609268d234affc7)
feat(category_theory/limits): more opposite-related transformations of cones ([#12165](https://github.com/leanprover-community/mathlib/pull/#12165))

### [2022-02-26T02:44:14+00:00](https://github.com/leanprover-community/mathlib/commit/43fb516261d5d82dde3bd5cd381653888b212001)
doc(analysis/normed_space): fixed normed_star_monoid doc-string ([#12296](https://github.com/leanprover-community/mathlib/pull/#12296))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2022-02-25T22:23:16+00:00](https://github.com/leanprover-community/mathlib/commit/05d8188c5c661e3e7b3fad6bd71f440bba89dfe3)
feat(group_theory/torsion): define torsion groups ([#11850](https://github.com/leanprover-community/mathlib/pull/#11850))

I grepped for torsion group and didn't find anything -- hopefully adding this makes sense here.

### [2022-02-25T20:13:56+00:00](https://github.com/leanprover-community/mathlib/commit/3cc9ac40a612f24c14dc329a185d71a2472a0863)
feat(analysis/normed_space/finite_dimension): add a lemma about `inf_dist` ([#12282](https://github.com/leanprover-community/mathlib/pull/#12282))

Add a version of `exists_mem_frontier_inf_dist_compl_eq_dist` for a
compact set in a real normed space. This version does not assume that
the ambient space is finite dimensional.

### [2022-02-25T18:50:04+00:00](https://github.com/leanprover-community/mathlib/commit/c127fc36cddf552b044a43275a40304ebfc9443a)
chore(measure_theory/decomposition/lebesgue): tidy a proof ([#12274](https://github.com/leanprover-community/mathlib/pull/#12274))

There's no need to go through `set_integral_re_add_im` when all we need is `integral_re`.

### [2022-02-25T16:56:48+00:00](https://github.com/leanprover-community/mathlib/commit/6653544fafc6c2575ca776d3c0c339791affbf07)
feat(topology/algebra/order/extr): extr on closure ([#12281](https://github.com/leanprover-community/mathlib/pull/#12281))

Prove `is_max_on.closure` etc

### [2022-02-25T10:18:16+00:00](https://github.com/leanprover-community/mathlib/commit/8c485a4c1a3429bb518f62f7282b7582f2640eba)
feat(order/filter/extr): add `is_*_on.comp_maps_to` ([#12280](https://github.com/leanprover-community/mathlib/pull/#12280))

### [2022-02-25T07:39:47+00:00](https://github.com/leanprover-community/mathlib/commit/c1443d66f9f9c9f7cc463a065f7518997e1fd26d)
feat(ring_theory/localization): random lemmata for edge cases ([#12146](https://github.com/leanprover-community/mathlib/pull/#12146))

### [2022-02-25T07:07:50+00:00](https://github.com/leanprover-community/mathlib/commit/dae1dfe9a0a93ef46b762c53a6d58e3e7050b560)
feat(topology/spectral/hom): Spectral maps ([#12228](https://github.com/leanprover-community/mathlib/pull/#12228))

Define spectral maps in three ways:
* `is_spectral_map`, the unbundled predicate
* `spectral_map`, the bundled type
* `spectral_map_class`, the hom class

The design for `is_spectral_map` matches `continuous`. The design for `spectral_map` and `spectral_map_class` follows the hom refactor.

### [2022-02-25T05:25:18+00:00](https://github.com/leanprover-community/mathlib/commit/f2fdef6f1cb87793b2ffdeecd91c96e2c938af45)
feat(order/partition/equipartition): Equipartitions ([#12023](https://github.com/leanprover-community/mathlib/pull/#12023))

Define `finpartition.is_equipartition`, a predicate for saying that the parts of a `finpartition` of a `finset` are all the same size up to a difference of `1`.

Co-authored-by: Bhavik Mehta <bhavik.mehta8@gmail.com>

### [2022-02-25T03:05:10+00:00](https://github.com/leanprover-community/mathlib/commit/605ea9f3477150b698cb98a2878f04e98af31ba8)
feat(algebra/symmetrized): Define the symmetrization of a ring ([#11399](https://github.com/leanprover-community/mathlib/pull/#11399))

A commutative multiplication on a real or complex space can be constructed from any multiplication by
"symmetrisation" i.e
```
a∘b = 1/2(ab+ba).
```
The approach taken here is inspired by `algebra.opposites`.

Previously submitted as part of [#11073](https://github.com/leanprover-community/mathlib/pull/#11073).

Will be used in https://github.com/leanprover-community/mathlib/pull/11401



Co-authored-by: Christopher Hoskin <mans0954@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-02-24T20:01:42+00:00](https://github.com/leanprover-community/mathlib/commit/f7518dbe845e8ca9628426bee01bb1d259ce5b45)
chore(topology/continuous_function/bounded): add an is_central_scalar instance ([#12272](https://github.com/leanprover-community/mathlib/pull/#12272))

This is only possible very recently now that `𝕜ᵐᵒᵖ` has a metric space instance.

### [2022-02-24T20:01:41+00:00](https://github.com/leanprover-community/mathlib/commit/feb5473611a9f7b2880cbe928c1cdd1774675a5d)
chore(*): update to 3.40.0c ([#12212](https://github.com/leanprover-community/mathlib/pull/#12212))

### [2022-02-24T18:24:37+00:00](https://github.com/leanprover-community/mathlib/commit/d3d370176b2e3002b4ef20f48357dadc34843d4f)
feat(analysis/mean_inequalities): AM and GM are equal on a constant tuple ([#12179](https://github.com/leanprover-community/mathlib/pull/#12179))

The converse is also true, but I have not gotten around to proving it.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-02-24T16:20:33+00:00](https://github.com/leanprover-community/mathlib/commit/d620395dec272d0802380e06a8c208f5f6577cd7)
feat(topology/algebra/group): homeomorphisms for div ([#12251](https://github.com/leanprover-community/mathlib/pull/#12251))

### [2022-02-24T16:20:32+00:00](https://github.com/leanprover-community/mathlib/commit/ed9f73cad4d487443066792d38bd08ebc610c647)
feat(order/conditionally_complete_lattice.lean): two new lemmas ([#12250](https://github.com/leanprover-community/mathlib/pull/#12250))

### [2022-02-24T14:39:01+00:00](https://github.com/leanprover-community/mathlib/commit/084062933e2eb0250468adc517246267ac9d363c)
test(instance_diamonds): verify that restrict_scalars produces no diamonds on the complex numbers ([#12273](https://github.com/leanprover-community/mathlib/pull/#12273))

There is already a comment on `complex.module` that indicates an intentional solution to this diamond.

### [2022-02-24T14:38:59+00:00](https://github.com/leanprover-community/mathlib/commit/a0d2c4393cdceec7e46cd084b2ddb6bd435a4bf6)
feat(algebra/punit_instances): mul_semiring_action ([#12271](https://github.com/leanprover-community/mathlib/pull/#12271))

The timeouts mentioned in the file appear to no longer occur.



Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-02-24T14:38:57+00:00](https://github.com/leanprover-community/mathlib/commit/9dca6f42ffdd6a0b2cd767bdfff48f71d0e62a30)
feat(topology/metric_space/lipschitz): add `set.maps_to` lemmas ([#12266](https://github.com/leanprover-community/mathlib/pull/#12266))

### [2022-02-24T14:38:55+00:00](https://github.com/leanprover-community/mathlib/commit/d011bf207f91a490713d9761c0b7ecbc8dd3a902)
chore(measure_theory/function/uniform_integrable): replace `ℕ` by a type verifying enough assumptions ([#12242](https://github.com/leanprover-community/mathlib/pull/#12242))

This PR does not generalize the results of the `uniform_integrable` file much, but using a generic type instead of `ℕ` makes clear where we need assumptions like `encodable`.

### [2022-02-24T14:38:54+00:00](https://github.com/leanprover-community/mathlib/commit/34cfcd02aecc66275022d7b63c23c09c133b915a)
feat(probability/stopping): generalize `is_stopping_time.measurable_set_lt` and variants beyond `ℕ` ([#12240](https://github.com/leanprover-community/mathlib/pull/#12240))

The lemma `is_stopping_time.measurable_set_lt` and the similar results for gt, ge and eq were written for stopping times with value in nat. We generalize those results to linear orders with the order topology.

### [2022-02-24T12:56:59+00:00](https://github.com/leanprover-community/mathlib/commit/79887c967f7f0fe92b0707b2da7928dcc9c19d1f)
feat(measure_theory/group/prod): generalize topological groups to measurable groups ([#11933](https://github.com/leanprover-community/mathlib/pull/#11933))

* This fixes the gap in `[Halmos]` that I mentioned in `measure_theory.group.prod`
* Thanks to @sgouezel for giving me the proof to fill that gap.
* A text proof to fill the gap is [here](https://math.stackexchange.com/a/4387664/463377)

### [2022-02-24T12:56:58+00:00](https://github.com/leanprover-community/mathlib/commit/8429ec96a093804852e9eee452f7bf4eeebe037d)
feat(topology/vector_bundle): `topological_vector_prebundle` ([#8154](https://github.com/leanprover-community/mathlib/pull/#8154))

In this PR we implement a new standard construction for topological vector bundles: namely a structure that permits to define a vector bundle when trivializations are given as local equivalences but there is not yet a topology on the total space. The total space is hence given a topology in such a way that there is a vector bundle structure for which the local equivalences
are also local homeomorphism and hence local trivializations.

### [2022-02-24T11:57:32+00:00](https://github.com/leanprover-community/mathlib/commit/76b1e0127056b7bec6a6bc7022e0bbb94b033280)
feat(data/equiv/option): option_congr ([#12263](https://github.com/leanprover-community/mathlib/pull/#12263))

This is a universe-polymorphic version of the existing `equiv_functor.map_equiv option`.

### [2022-02-24T11:57:31+00:00](https://github.com/leanprover-community/mathlib/commit/b8b1b57831da76a39798761a0ae30d5481617972)
chore(geometry/euclidean): split repetitive proof ([#12209](https://github.com/leanprover-community/mathlib/pull/#12209))

This PR is part of the subobject refactor [#11545](https://github.com/leanprover-community/mathlib/pull/#11545), fixing a timeout caused by some expensive defeq checks.

I introduce a new definition `simplex.orthogonal_projection_span s := orthogonal_projection (affine_span ℝ (set.range s.points))`, and extract a couple of its properties from (repetitive) parts of proofs in `circumcenter.lean`, especially `eq_or_eq_reflection_of_dist_eq`. This makes the latter proof noticeably faster, especially after commit [#11750](https://github.com/leanprover-community/mathlib/pull/#11750).

### [2022-02-24T10:42:14+00:00](https://github.com/leanprover-community/mathlib/commit/3d97cfb18299d0979dc9679fd4933ddbfed23e06)
feat(ring_theory/ideal,dedekind_domain): lemmas on `I ≤ I^e` and `I < I^e` ([#12185](https://github.com/leanprover-community/mathlib/pull/#12185))

### [2022-02-24T08:26:23+00:00](https://github.com/leanprover-community/mathlib/commit/9eb78a331831877f8b5f53d8c6aad85268300378)
feat(measure_theory/function/ae_eq_fun): generalize scalar actions ([#12248](https://github.com/leanprover-community/mathlib/pull/#12248))

This provides a more general `has_scalar` instance, along with `mul_action`, `distrib_mul_action`, `module`, `is_scalar_tower`, `smul_comm_class`, and `is_central_scalar` instances.

### [2022-02-24T04:27:02+00:00](https://github.com/leanprover-community/mathlib/commit/f6a7ad9edcfa18769c402413e5550f7eb0f16acb)
feat(measure_theory/integral/average): define `measure_theory.average` ([#12128](https://github.com/leanprover-community/mathlib/pull/#12128))

And use it to formulate Jensen's inequality. Also add Jensen's inequality for concave functions.

### [2022-02-24T03:44:56+00:00](https://github.com/leanprover-community/mathlib/commit/f3ee4628e2dc737653af924c41fa681abc2a4f4a)
chore(category_theory/adjunction/opposites): Forgotten `category_theory` namespace ([#12256](https://github.com/leanprover-community/mathlib/pull/#12256))

The forgotten `category_theory` namespace means that dot notation doesn't work on `category_theory.adjunction`.

### [2022-02-24T02:51:27+00:00](https://github.com/leanprover-community/mathlib/commit/ed555939574049bcb50019ddabb8496370be1fb1)
feat(topology/metric_space/basic): add a few lemmas ([#12259](https://github.com/leanprover-community/mathlib/pull/#12259))

Add `ne_of_mem_sphere`, `subsingleton_closed_ball`, and `metric.subsingleton_sphere`.

### [2022-02-24T01:18:43+00:00](https://github.com/leanprover-community/mathlib/commit/158550d590a01cb1b54bf860ada853fe26c6a736)
feat(algebra/module/basic): add `smul_right_inj` ([#12252](https://github.com/leanprover-community/mathlib/pull/#12252))

Also golf the proof of `smul_right_injective` by reusing
`add_monoid_hom.injective_iff`.

### [2022-02-24T01:18:42+00:00](https://github.com/leanprover-community/mathlib/commit/2939c77d803d4fad590515b1dbe16f1ec5da83b1)
feat(topology/metric_space): multiplicative opposites inherit the same `(pseudo_?)(e?)metric` and `uniform_space` ([#12120](https://github.com/leanprover-community/mathlib/pull/#12120))

This puts the "obvious" metric on the opposite type such that `dist (op x) (op y) = dist x y`.

This also merges `subtype.pseudo_dist_eq` and `subtype.dist_eq` as the latter was a special case of the former.

### [2022-02-24T00:25:00+00:00](https://github.com/leanprover-community/mathlib/commit/890338d421399d5cd57cd328ff79397f2954758e)
feat(analysis/normed_space/basic): use weaker assumptions ([#12260](https://github.com/leanprover-community/mathlib/pull/#12260))

Assume `r ≠ 0` instead of `0 < r` in `interior_closed_ball` and `frontier_closed_ball`.

### [2022-02-24T00:24:57+00:00](https://github.com/leanprover-community/mathlib/commit/620af85adf5cd4282f962eb060e6e562e3e0c0ba)
refactor(topology/instances): put `ℕ`, `ℤ`, and `ℚ` in separate files ([#12207](https://github.com/leanprover-community/mathlib/pull/#12207))

The goal here is to make `metric_space ℕ` and `metric_space ℤ` available earlier, so that I can state `has_bounded_smul ℕ A` somewhere reasonable.

No lemmas have been added, deleted, or changed here - they've just been moved out of `topology/instances/real` and into 
`topology/instances/{nat,int,rat,real}`.

The resulting import structure is:
* `rat_lemmas` → `rat`
* `rat` → {`real`, `int`, `nat`}
* `real` → {`int`}
* `nat` → {`int`}

### [2022-02-23T22:56:45+00:00](https://github.com/leanprover-community/mathlib/commit/eae6ae374c51f6400ab0bac5ec2ada12908fb288)
feat(algebra/associated): add decidable instances ([#12230](https://github.com/leanprover-community/mathlib/pull/#12230))

Makes equality and divisibility decidable in `associates`, given that divisibility is decidable in the general case.



Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-02-23T21:42:45+00:00](https://github.com/leanprover-community/mathlib/commit/2c74921efecc52e74f039e0f33e1008f32e9b7f4)
feat(data/pfun): A new induction on pfun.fix ([#12109](https://github.com/leanprover-community/mathlib/pull/#12109))


A new lemma that lets you prove predicates given `b ∈ f.fix a` if `f` preserves the predicate, and it holds for values which `f` maps to `b`.

### [2022-02-23T20:58:29+00:00](https://github.com/leanprover-community/mathlib/commit/9b333b26c5294657de24cddc0c609e4319ae575a)
feat(topology/algebra/continuous_monoid_hom): `to_continuous_map` is a `closed_embedding` ([#12217](https://github.com/leanprover-community/mathlib/pull/#12217))

This PR proves that `to_continuous_map : continuous_monoid_hom A B → C(A, B)` is a `closed_embedding`. This will be useful for showing that the Pontryagin dual is locally compact.

### [2022-02-23T17:43:01+00:00](https://github.com/leanprover-community/mathlib/commit/f04ad9a19c662d1f0b2206422f774977092e958e)
feat(analysis/normed_space/star/spectrum): prove the spectral radius of a selfadjoint element in a C*-algebra is its norm. ([#12211](https://github.com/leanprover-community/mathlib/pull/#12211))

This establishes that the spectral radius of a selfadjoint element in a C*-algebra is its (nn)norm using the Gelfand formula for the spectral radius. The same theorem for normal elements can be proven using this once normal elements are defined in mathlib.

### [2022-02-23T16:03:57+00:00](https://github.com/leanprover-community/mathlib/commit/b72cca415c8f5a901bff1d5fc78d286703423a9a)
chore(geometry/manifold/algebra/smooth_functions): golf module instance ([#12247](https://github.com/leanprover-community/mathlib/pull/#12247))

### [2022-02-23T16:03:56+00:00](https://github.com/leanprover-community/mathlib/commit/3e2df830a0a62fe902b3e14f231a74c28f50832c)
docs(order/order_iso_nat): Added note on `exists_increasing_or_nonincreasing_subseq` ([#12239](https://github.com/leanprover-community/mathlib/pull/#12239))

### [2022-02-23T16:03:55+00:00](https://github.com/leanprover-community/mathlib/commit/162d060ce4c35aeae23b11bcf9cb7638f3850df6)
feat(measure_theory/function/strongly_measurable): more basic properties of `strongly_measurable` ([#12164](https://github.com/leanprover-community/mathlib/pull/#12164))

### [2022-02-23T16:03:54+00:00](https://github.com/leanprover-community/mathlib/commit/3fe20d40d147ef51f0e28da41e5c784762d26187)
feat(ring_theory/localization): add mk' lemmas ([#12081](https://github.com/leanprover-community/mathlib/pull/#12081))




Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2022-02-23T14:40:03+00:00](https://github.com/leanprover-community/mathlib/commit/0d5bed0ef787f8b2e8e9704400915fe9c274de92)
feat(ring_theory/graded_algebra): definitions and basic operations of homogeneous ideal ([#10784](https://github.com/leanprover-community/mathlib/pull/#10784))

This defines homogeneous ideals (`homogeneous_ideal`) of a graded algebra.



Co-authored-by: jjaassoonn <jujian.zhang1998@out.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-02-23T13:18:22+00:00](https://github.com/leanprover-community/mathlib/commit/e167efa1618ec54c1babfcc3d0a30c53098663e0)
chore(topology/instances/rat): rename to rat_lemmas ([#12246](https://github.com/leanprover-community/mathlib/pull/#12246))

This is to make room for the changes in [#12207](https://github.com/leanprover-community/mathlib/pull/#12207), which claim `topology.instances.rat` for more basic results. This has to be in a separate commit to keep the history reasonable.

### [2022-02-23T13:18:20+00:00](https://github.com/leanprover-community/mathlib/commit/c52678955be39d492fd66257eba9ed848512c2d1)
feat(set_theory/ordinal_arithmetic): `is_normal.eq_iff_zero_and_succ` ([#12222](https://github.com/leanprover-community/mathlib/pull/#12222))

Two normal functions are equal iff they're equal at `0` and successor ordinals. This is used for a few lemmas in [#12202](https://github.com/leanprover-community/mathlib/pull/#12202).

### [2022-02-23T13:18:19+00:00](https://github.com/leanprover-community/mathlib/commit/7de8137d75ffcf38ebf4be68583bff0cc5471711)
feat(topology/order/hom): Continuous order homomorphisms ([#12012](https://github.com/leanprover-community/mathlib/pull/#12012))

Define continuous monotone functions, aka continuous order homomorphisms, aka Priestley homomorphisms, with notation `α →Co β`.

### [2022-02-23T12:32:53+00:00](https://github.com/leanprover-community/mathlib/commit/b0fbd912bd5dbe760cbdaa94004a7e676c427e28)
feat(measure_theory/measure): generalize scalar actions ([#12187](https://github.com/leanprover-community/mathlib/pull/#12187))

As a result of this change, many smul lemmas now also apply to `nat` and `nnreal`, which allows some lemmas to be removed.

### [2022-02-23T12:32:52+00:00](https://github.com/leanprover-community/mathlib/commit/d01b55f18abda7bbe4c7da17a90df982d856f578)
split(analysis/functional/gauge): Split off `analysis.seminorm` ([#12054](https://github.com/leanprover-community/mathlib/pull/#12054))

Move the Minkowski functional to a new file `analysis.convex.gauge`.

### [2022-02-23T10:50:57+00:00](https://github.com/leanprover-community/mathlib/commit/6179707bc3bab6621eb5e3629c10062e50d925e7)
feat(ring_theory/unique_factorization_domain): add count_self ([#12074](https://github.com/leanprover-community/mathlib/pull/#12074))

### [2022-02-23T10:50:56+00:00](https://github.com/leanprover-community/mathlib/commit/6f1d90d336f55cd2fa74ce2a42353029cc71b792)
feat(algebra/order/monoid_lemmas_gt_zero): introduce the type of positive elements and prove some lemmas ([#11833](https://github.com/leanprover-community/mathlib/pull/#11833))

This PR continues the `order` refactor.  Here I start working with the type of positive elements of a type with zero and lt.  Combining `covariant_` and `contravariant_classes` where the "acting" type is the type of positive elements, we can formulate the condition that "multiplication by positive elements is monotone" and variants.

I also prove some initial lemmas, just to give a flavour of the API.

More such lemmas will come in subsequent PRs (see for instance [#11782](https://github.com/leanprover-community/mathlib/pull/#11782) for a few more lemmas).  After that, I will start simplifying existing lemmas, by weakening their assumptions.

### [2022-02-23T09:39:52+00:00](https://github.com/leanprover-community/mathlib/commit/3e77124c9e3b621c68067ba53d63cb1f9c12725f)
refactor(topology/{separation,subset_properties}): use `set.subsingleton` ([#12232](https://github.com/leanprover-community/mathlib/pull/#12232))

Use `set.subsingleton s` instead of `_root_.subsingleton s` in `is_preirreducible_iff_subsingleton` and `is_preirreducible_of_subsingleton`, rename the latter to `set.subsingleton.is_preirreducible`.

### [2022-02-23T09:39:50+00:00](https://github.com/leanprover-community/mathlib/commit/dc9b8bea464c763e672ca0a4c2c86a0ccd9093f0)
feat(analysis/normed_space/linear_isometry): add lemmas to `linear_isometry_equiv` ([#12218](https://github.com/leanprover-community/mathlib/pull/#12218))

Added two API lemmas to `linear_isometry_equiv` that I need elsewhere.

### [2022-02-23T09:39:49+00:00](https://github.com/leanprover-community/mathlib/commit/f44ed74a562f0919bc287e43a1d1ea5d4be03ac5)
feat(ring_theory/ideal/over): `S/p` is noetherian over `R/p` if `S` is over `R` ([#12183](https://github.com/leanprover-community/mathlib/pull/#12183))

### [2022-02-23T08:16:08+00:00](https://github.com/leanprover-community/mathlib/commit/515eefafd3c49f14fa83f5a06abaa6e21eac50ce)
fix(algebra/star/basic): more type classes that should be props ([#12235](https://github.com/leanprover-community/mathlib/pull/#12235))

### [2022-02-23T08:16:07+00:00](https://github.com/leanprover-community/mathlib/commit/98bcabb02fe4eae9252fa757e8a599960f02132e)
feat(group_theory/perm): add lemmas for cycles of permutations ([#11955](https://github.com/leanprover-community/mathlib/pull/#11955))

`nodup_powers_of_cycle_of` : shows that the the iterates of an element in the support give rise to a nodup list

`cycle_is_cycle_of` : asserts that a given cycle c in `f. cycle_factors_finset` is `f.cycle_of a` if c a \neq a

`equiv.perm.sign_of_cycle_type` : new formula for the sign of a permutations in terms of its cycle_type — It is simpler to use (just uses number of cycles and size of support) than the earlier lemma which is renamed as equiv.perm.sign_of_cycle_type'  (it could be deleted). I made one modification to make the file compile, but I need to check compatibility with the other ones.



Co-authored-by: Antoine Chambert-Loir <antoine.chambert-loir@math.univ-paris-diderot.fr>

### [2022-02-23T07:46:35+00:00](https://github.com/leanprover-community/mathlib/commit/0eed60e397689503092ef684a307add1e5bc4601)
feat(number_theory/cyclotomic/discriminant): discriminant of a p-th cyclotomic field ([#11804](https://github.com/leanprover-community/mathlib/pull/#11804))

We compute the discriminant of a p-th cyclotomic field.

From flt-regular.

- [x] depends on: [#11786](https://github.com/leanprover-community/mathlib/pull/#11786)



Co-authored-by: Eric <ericrboidi@gmail.com>
Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-02-23T05:24:19+00:00](https://github.com/leanprover-community/mathlib/commit/257bddff0b138f485cb3c2f515af8197007fa02f)
feat(algebra/algebra/spectrum): add spectral mapping for inverses ([#12219](https://github.com/leanprover-community/mathlib/pull/#12219))

Given a unit `a` in an algebra `A` over a field `𝕜`, the equality `(spectrum 𝕜 a)⁻¹ = spectrum 𝕜 a⁻¹` holds.

### [2022-02-23T04:31:26+00:00](https://github.com/leanprover-community/mathlib/commit/e77675d2e8b6c64c9f1a193bd059125a686059d3)
fix(analysis/normed_space/star/basic): make prop type classes props ([#12233](https://github.com/leanprover-community/mathlib/pull/#12233))

The type classes `normed_star_monoid` and `cstar_ring` are now properly declared as prop.

### [2022-02-23T04:01:36+00:00](https://github.com/leanprover-community/mathlib/commit/264dd7ff01e02df1b1c8cb0fe58e02325edd3ef8)
feat(model_theory/basic): Language operations ([#12129](https://github.com/leanprover-community/mathlib/pull/#12129))

Defines language homomorphisms with `first_order.language.Lhom`
Defines the sum of two languages with `first_order.language.sum`
Defines `first_order.language.with_constants`, a language with added constants, abbreviated `L[[A]]`.
Defines a `L[[A]].Structure` on `M` when `A : set M`.

(Some of this code comes from the Flypitch project)

### [2022-02-23T00:45:57+00:00](https://github.com/leanprover-community/mathlib/commit/7cc4eb9d1489bb0b28a97d149287585687647fd7)
doc(number_theory/padics/*): typo in references ([#12229](https://github.com/leanprover-community/mathlib/pull/#12229))

Fix typos in a reference.

### [2022-02-23T00:45:56+00:00](https://github.com/leanprover-community/mathlib/commit/42388681c029105cc7d8572c511628e7472325a9)
chore(analysis): rename times_cont_diff ([#12227](https://github.com/leanprover-community/mathlib/pull/#12227))

This replaces `times_cont_diff` by `cont_diff` everywhere, and the same for `times_cont_mdiff`. There is no change at all in content.

See https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/times_cont_diff.20name



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-02-23T00:45:54+00:00](https://github.com/leanprover-community/mathlib/commit/541a1a0289c9a366aa8664929196aaf59b199f51)
refactor(combinatorics/simple_graph/{basic,degree_sum}): move darts from degree_sum to basic ([#12195](https://github.com/leanprover-community/mathlib/pull/#12195))

This also changes `simple_graph.dart` to extend `prod`, so that darts are even closer to being an ordered pair.

Since this touches the module docstrings, they are updated to use fully qualified names.

### [2022-02-23T00:45:53+00:00](https://github.com/leanprover-community/mathlib/commit/f6ec999fc4e68f7c81f1dd5e06e30a4d3a4c15d5)
feat(ring_theory/localization): add a fintype instance ([#12150](https://github.com/leanprover-community/mathlib/pull/#12150))

### [2022-02-22T22:49:03+00:00](https://github.com/leanprover-community/mathlib/commit/e89222a6a0808600bb02645c0a9202b7a90dd17d)
feat(algebra/module,linear_algebra): some `restrict_scalars` lemmas ([#12181](https://github.com/leanprover-community/mathlib/pull/#12181))

 * add `linear_map.coe_restrict_scalars` (demoting `linear_map.restrict_scalars_apply` from `simp` lemma)
 * add `submodule.restrict_scalars_eq_top_iff`



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2022-02-22T22:49:02+00:00](https://github.com/leanprover-community/mathlib/commit/2ab3e2fa63866e12a4b2cab481b3ce6e9c35c6c2)
feat(algebra/group/{hom,prod}): has_mul and mul_hom.prod ([#12110](https://github.com/leanprover-community/mathlib/pull/#12110))

Ported over from `monoid_hom`.

### [2022-02-22T22:49:01+00:00](https://github.com/leanprover-community/mathlib/commit/18d1bdfc43c0c4c25b9b14a6c614f4d2d5b1806c)
feat(topology/algebra/group): add subgroup lemmas ([#12026](https://github.com/leanprover-community/mathlib/pull/#12026))

### [2022-02-22T22:49:00+00:00](https://github.com/leanprover-community/mathlib/commit/b60b7904f3ea4fed45fef72143513143aed6e612)
feat(topology/algebra/group): add continuity lemmas ([#11975](https://github.com/leanprover-community/mathlib/pull/#11975))




Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-02-22T21:10:39+00:00](https://github.com/leanprover-community/mathlib/commit/64c8d2176b612f967f5d1b4e412c2bca8ce43dd2)
feat(set_theory/ordinal): `Inf_empty` ([#12226](https://github.com/leanprover-community/mathlib/pull/#12226))

The docs mention that `Inf Ø` is defined as `0`. We prove that this is indeed the case.

### [2022-02-22T21:10:38+00:00](https://github.com/leanprover-community/mathlib/commit/d990681cea5631f4d399afa4f98f17f398490578)
docs(set_theory/ordinal): Remove mention of `omin` from docs ([#12224](https://github.com/leanprover-community/mathlib/pull/#12224))

[#11867](https://github.com/leanprover-community/mathlib/pull/#11867) replaced `omin` by `Inf`. We remove all mentions of it from the docs.

### [2022-02-22T21:10:37+00:00](https://github.com/leanprover-community/mathlib/commit/f7b6f4217bff1b82404d746221a670aaa0640020)
feat(set_theory/ordinal_arithmetic): `out_nonempty_iff_ne_zero` ([#12223](https://github.com/leanprover-community/mathlib/pull/#12223))

### [2022-02-22T21:10:36+00:00](https://github.com/leanprover-community/mathlib/commit/e50ebde5fbb45198559615a770d16a2e3e407e72)
chore(analysis/specific_limits): simplify proof of `cauchy_series_of_le_geometric` ([#12215](https://github.com/leanprover-community/mathlib/pull/#12215))

This lemma is identical to the one above except over `range (n + 1)`
instead of `range n`. Perhaps it could be removed entirely? I'm not sure what the policy is on breaking changes.

### [2022-02-22T21:10:34+00:00](https://github.com/leanprover-community/mathlib/commit/48ddfd55814ee3116fbbc6d0464e29d1200856c8)
chore(linear_algebra/basic): golf `linear_equiv.smul_of_unit` ([#12190](https://github.com/leanprover-community/mathlib/pull/#12190))

This already exists more generally as `distrib_mul_action.to_linear_equiv`.

The name is probably more discoverable and it needs fewer arguments, so I've left it around for now.

### [2022-02-22T20:21:17+00:00](https://github.com/leanprover-community/mathlib/commit/6bb8f229464279fc43ca8bb16edf59db1510f3b4)
refactor(model_theory/terms_and_formulas): Improvements to basics of first-order formulas ([#12091](https://github.com/leanprover-community/mathlib/pull/#12091))

Improves the simp set of lemmas related to `realize_bounded_formula` and `realize_formula`, so that they simplify higher-level definitions directly, and keep bounded formulas and formulas separate.
Generalizes relabelling of bounded formulas.
Defines `close_with_exists` and `close_with_forall` to quantify bounded formulas into closed formulas.
Defines `bd_iff` and `iff`.

### [2022-02-22T18:15:35+00:00](https://github.com/leanprover-community/mathlib/commit/d054fcae0fb1e0362943eaed22d9a5ab63e0c7e1)
feat(/analysis/inner_product_space/pi_L2): `inner_matrix_row_row` ([#12177](https://github.com/leanprover-community/mathlib/pull/#12177))

The inner product between rows/columns of matrices.

### [2022-02-22T18:15:34+00:00](https://github.com/leanprover-community/mathlib/commit/d0c37a11f85fb466ef90fd39700fd8b551f2853f)
feat(analysis/inner_product_space/adjoint): is_self_adjoint_iff_inner… ([#12113](https://github.com/leanprover-community/mathlib/pull/#12113))

…_map_self_real

A linear operator on a complex inner product space is self-adjoint
precisely when ⟪T v, v⟫ is real for all v.  I am interested in learning
style improvements!





Co-authored-by: Hans Parshall <hparshall@users.noreply.github.com>

### [2022-02-22T18:15:32+00:00](https://github.com/leanprover-community/mathlib/commit/8f16001837e0fcf72ff1ed9c3738a88afc06e53e)
chore(*): rename `erase_dup` to `dedup` ([#12057](https://github.com/leanprover-community/mathlib/pull/#12057))

### [2022-02-22T18:15:31+00:00](https://github.com/leanprover-community/mathlib/commit/35ef770017543d722e47daf1c483ed6b3fda25a9)
refactor(topology/compacts): Turn into structures, use `set_like`, cleanup ([#12035](https://github.com/leanprover-community/mathlib/pull/#12035))

* Change `closeds`, `compacts`, `nonempty_compacts`, `positive_compacts` from `subtype` to `structure`
* Use `set_like`
* Add missing instances
  * the `lattice` and `bounded_order` instances for `closeds`
  * the `bounded_order` instance for `compacts`
  * the `semilattice_sup` and `order_top` instances for `nonempty_compacts` 
  * the `inhabited`, `semilattice_sup` and `order_top` instances for `positive_compacts`
* kill `positive_compacts_univ` in favor of `⊤` using the new `order_top` instance
* rename `nonempty_positive_compacts` to `positive_compacts.nonempty`
* sectioning the file

### [2022-02-22T15:16:21+00:00](https://github.com/leanprover-community/mathlib/commit/71da192cb5143862756874f134c3777f562f2f84)
chore(ring_theory/graded_algebra/basic): remove commutativity requirement ([#12208](https://github.com/leanprover-community/mathlib/pull/#12208))

This wasn't used

### [2022-02-22T15:16:20+00:00](https://github.com/leanprover-community/mathlib/commit/f0401b9110462e5e9a3566c03fe36fd1155095ad)
chore(ring_theory): split `localization.lean` and `dedekind_domain.lean` ([#12206](https://github.com/leanprover-community/mathlib/pull/#12206))

These files were rather long and had hundreds-deep dependency graphs. I split them into smaller files with less imports, so that they are easier to build and modify.

Proof nothing was lost:
```bash
$ cat src/ring_theory/localization/*.lean | sort | comm -23 <(sort src/ring_theory/localization.lean) - | grep -E 'lemma|theorem|def|instance|class'
$ cat src/ring_theory/dedekind_domain/*.lean | sort | comm -23 <(sort src/ring_theory/dedekind_domain.lean) - | grep -E 'lemma|theorem|def|instance|class'
giving three equivalent definitions (TODO: and shows that they are equivalent).
```

Zulip thread: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting.20.60localization.2Elean.60.20and.20.60dedekind_domain.2Elean

### [2022-02-22T15:16:19+00:00](https://github.com/leanprover-community/mathlib/commit/deb5046b069efc2bc7dbca4b38b6c18e9c1f4056)
feat(mv_polynomial/basic): monomial_eq_monomial_iff ([#12198](https://github.com/leanprover-community/mathlib/pull/#12198))

### [2022-02-22T15:16:18+00:00](https://github.com/leanprover-community/mathlib/commit/8b09b0ecb5a48e6b643dce00f61ed56457f26afa)
feat(measure_theory/group/arithmetic): add `has_measurable_smul.op` and `has_measurable_smul₂.op` ([#12196](https://github.com/leanprover-community/mathlib/pull/#12196))

This matches the naming of `has_continuous_smul.op`.

### [2022-02-22T15:16:17+00:00](https://github.com/leanprover-community/mathlib/commit/79c5de9a0e27ad542316c896fe75f9a8972dfb1f)
feat(ring_theory/ideal/operations): remove unneeded assumptions from `smul_induction_on` ([#12193](https://github.com/leanprover-community/mathlib/pull/#12193))

### [2022-02-22T15:16:15+00:00](https://github.com/leanprover-community/mathlib/commit/f6d397fc67ca5c4c5056d1912c5ece324455bfbf)
feat(order/hom/basic): `order_iso_class` ([#12157](https://github.com/leanprover-community/mathlib/pull/#12157))

Define `order_iso_class`, following the hom refactor. Also add a few missing lemmas.

### [2022-02-22T15:16:14+00:00](https://github.com/leanprover-community/mathlib/commit/4c6b0de08adabcff9e07b68b34f33f83166d17a0)
feat(topology/bases): disjoint unions of second-countable spaces are second-countable ([#12061](https://github.com/leanprover-community/mathlib/pull/#12061))

### [2022-02-22T13:18:00+00:00](https://github.com/leanprover-community/mathlib/commit/8413f078fa019c70d94c820bdaee499735d2860a)
feat(topology/support): define topological support and compactly supported functions ([#11923](https://github.com/leanprover-community/mathlib/pull/#11923))

* Also add some variants of the extreme value theorem.

### [2022-02-22T10:50:40+00:00](https://github.com/leanprover-community/mathlib/commit/80591d65c0caf2a1bde0fb1c0cf36c955cab05ec)
feat(order/hom/lattice): Finitary join-/meet-preserving maps ([#12149](https://github.com/leanprover-community/mathlib/pull/#12149))

Define `sup_bot_hom`, `inf_top_hom` and their associated class.

### [2022-02-22T10:50:39+00:00](https://github.com/leanprover-community/mathlib/commit/68efb10c0ae316ee2aad1d0f5dce8c77e4533d9d)
refactor(topology/*): Hom classes for continuous maps/homs ([#11909](https://github.com/leanprover-community/mathlib/pull/#11909))

Add
* `continuous_map_class`
* `bounded_continuous_map_class`
* `continuous_monoid_hom_class`
* `continuous_add_monoid_hom_class`
* `continuous_map.homotopy_class`

to follow the `fun_like` design. Deprecate lemmas accordingly.

Also rename a few fields to match the convention in the rest of the library.

### [2022-02-22T10:50:38+00:00](https://github.com/leanprover-community/mathlib/commit/247943a90e58eca38455e58d8af40cb5e4744cb9)
feat(analysis/seminorm): add inf ([#11791](https://github.com/leanprover-community/mathlib/pull/#11791))

Define the infimum of seminorms.



Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>
Co-authored-by: pbazin <75327486+pbazin@users.noreply.github.com>
Co-authored-by: Patrick Massot <patrickmassot@free.fr>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-02-22T10:10:32+00:00](https://github.com/leanprover-community/mathlib/commit/9a7ed8cb1d2518e6110e12de15e652768ef680f0)
chore(algebra/lie/engel): speed up proof of Engel's theorem slightly ([#12205](https://github.com/leanprover-community/mathlib/pull/#12205))

Local measurements using `set_option profiler true` are noisy but indicate
that this speeds up elaboration of `lie_algebra.is_engelian_of_is_noetherian`
by about 20% from about 10s to about 8s.

### [2022-02-22T03:09:07+00:00](https://github.com/leanprover-community/mathlib/commit/cb45da26fe1c2436e3935b97a27dde0446ab16c3)
feat(category_theory/limits): is_bilimit ([#12108](https://github.com/leanprover-community/mathlib/pull/#12108))

### [2022-02-22T00:37:45+00:00](https://github.com/leanprover-community/mathlib/commit/e16e093e901bd188443eab8731db5e01b51bfc05)
feat(analysis/specific_limits): dirichlet and alternating series tests  ([#11908](https://github.com/leanprover-community/mathlib/pull/#11908))

Adds [Dirichlet's test](https://en.wikipedia.org/wiki/Dirichlet%27s_test) along with the [alternating series test](https://en.wikipedia.org/wiki/Alternating_series_test) as a special case of the former. For the curious, [Nick Bingham's course notes](https://www.ma.imperial.ac.uk/~bin06/M2PM3-Complex-Analysis/m2pm3abeldir.pdf) give some more context on Dirichlet's test. It's somewhat obscure.



Co-authored-by: Patrick Massot <patrickmassot@free.fr>
Co-authored-by: Oliver Nash <github@olivernash.org>

### [2022-02-21T23:46:54+00:00](https://github.com/leanprover-community/mathlib/commit/d77e91f832f44be6f68f68474d5a0d7ae31abefe)
perf(geometry/euclidean): speed up proof on the edge of timing out ([#12191](https://github.com/leanprover-community/mathlib/pull/#12191))




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2022-02-21T23:46:53+00:00](https://github.com/leanprover-community/mathlib/commit/22464cf6be7c6199fbf37ee95b2dff8d91eb9709)
feat(analysis/normed_space/basic): `norm_matrix_lt_iff` ([#12151](https://github.com/leanprover-community/mathlib/pull/#12151))

A strict variant of `norm_matrix_le_iff`, using `pi_norm_lt_iff`

### [2022-02-21T22:53:11+00:00](https://github.com/leanprover-community/mathlib/commit/eb5c5ed5a31d0cb136d5b944934ed54993e69802)
feat(measure_theory/integral/set_integral): Bochner integral with respect to a measure with density ([#12123](https://github.com/leanprover-community/mathlib/pull/#12123))

This PR shows that `∫ a, g a ∂(μ.with_density (λ x, f x)) = ∫ a, f a • g a ∂μ`. (This fact is already available for the Lebesgue integral, not for the Bochner integral.)

### [2022-02-21T22:24:46+00:00](https://github.com/leanprover-community/mathlib/commit/8aa26b27a684186fb627b1dc0dccba7be88b7640)
feat(tactic/linear_combination): improve error messages and degenerate case ([#12062](https://github.com/leanprover-community/mathlib/pull/#12062))

This threads the expected type of the combination from the target throughout the tactic call.
If no hypotheses are given to combine, the behavior is effectively to just call the normalization tactic.

closes [#11990](https://github.com/leanprover-community/mathlib/pull/#11990)





Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2022-02-21T21:06:38+00:00](https://github.com/leanprover-community/mathlib/commit/2971f3dc900276c9bcf9b52503b7ce5513dcea00)
feat(algebra/star/self_adjoint): remove commutativity hypothesis from `has_pow (self_adjoint R)` ([#12188](https://github.com/leanprover-community/mathlib/pull/#12188))

This was put in the wrong section. Powers of selfadjoint elements are still selfadjoint.

### [2022-02-21T21:06:37+00:00](https://github.com/leanprover-community/mathlib/commit/a6078202d1c614baf1c3dfcff3222d7b79b05817)
feat(category_theory/equivalence): if two functors F and G are isomorphic, F is an equivalence iff G is ([#12162](https://github.com/leanprover-community/mathlib/pull/#12162))



Co-authored-by: Joël Riou <37772949+joelriou@users.noreply.github.com>

### [2022-02-21T21:06:35+00:00](https://github.com/leanprover-community/mathlib/commit/9a17b5562fd64e5ea531a2fd67d4fa05ae1fc0b2)
feat(analysis/normed_space/basic): `norm_entry_le_entrywise_sup_norm` ([#12159](https://github.com/leanprover-community/mathlib/pull/#12159))

The entries of a matrix are at most the entrywise sup norm.


Co-authored-by: Hans Parshall <hparshall@users.noreply.github.com>

### [2022-02-21T19:14:30+00:00](https://github.com/leanprover-community/mathlib/commit/1cfbcc636e022d50f669351e97141c77da00ece1)
feat(algebra/ring/ulift): add a `field` instance ([#12141](https://github.com/leanprover-community/mathlib/pull/#12141))

### [2022-02-21T16:41:40+00:00](https://github.com/leanprover-community/mathlib/commit/e3d36811ea404ab6f009e3d5648741e144ff77ba)
feat(analysis/inner_product_space/spectrum): `pos_nonneg_eigenvalues` ([#12161](https://github.com/leanprover-community/mathlib/pull/#12161))

If T is a positive self-adjoint operator, then its eigenvalues are
nonnegative.  Maybe there should be a definition of "positive operator",
and maybe this should be generalized.  Guidance appreciated!

Co-authored-by: Daniel Packer



Co-authored-by: Hans Parshall <hparshall@users.noreply.github.com>
Co-authored-by: Jireh Loreaux <loreaujy@gmail.com>

### [2022-02-21T15:30:08+00:00](https://github.com/leanprover-community/mathlib/commit/02dc6f25b6f7c2fdfdd87ff3291f66d4b612e906)
feat(probability/stopping): filtrations are a complete lattice ([#12169](https://github.com/leanprover-community/mathlib/pull/#12169))




Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2022-02-21T15:30:07+00:00](https://github.com/leanprover-community/mathlib/commit/9ed717968660be6523b6daad9e6b4248f2f6adf1)
refactor(*): move normed field lemmas into root namespace ([#12163](https://github.com/leanprover-community/mathlib/pull/#12163))

This takes the normed field lemmas given in `analysis.normed_space.basic` and moves them from the `normed_field` namespace into the root namespace.

This PR moves these lemmas and definitions: `norm_mul`, `nnnorm_mul`, `norm_hom`, `nnnorm_hom`, `norm_pow`, `nnnorm_pow`, `norm_prod`, `nnnorm_prod`, `norm_div`, `nnnorm_div`, `norm_inv`, `nnnorm_inv`, `norm_zpow`, `nnnorm_zpow`.

### [2022-02-21T15:30:06+00:00](https://github.com/leanprover-community/mathlib/commit/95d22b526639e401f7c6cc318f56dbcd0e320a2e)
feat(geometry/euclidean/oriented_angle): oriented angles and rotations ([#12106](https://github.com/leanprover-community/mathlib/pull/#12106))

Define oriented angles and rotations in a real inner product space,
with respect to a choice of orthonormal basis indexed by `fin 2`, and
prove various lemmas about them, including that the definition depends
only on the orientation associated with the basis, and geometrical
results such as pons asinorum, "angle at center of a circle equals
twice angle at circumference" and "angles in same segment are equal" /
"opposite angles of a cyclic quadrilateral add to π" (these last two
being the same result for oriented angles mod π).

### [2022-02-21T15:30:04+00:00](https://github.com/leanprover-community/mathlib/commit/6db15773a59381c4102a41d7dbad8ec1b1609482)
feat(category_theory/preadditive): separators in preadditive categories ([#11884](https://github.com/leanprover-community/mathlib/pull/#11884))

### [2022-02-21T13:33:45+00:00](https://github.com/leanprover-community/mathlib/commit/3ad7395178ef7ff820bfeb4ac26f45dfe848bc4b)
chore(topology/algebra/infinite_sum): reference Cauchy criterion in docs ([#12172](https://github.com/leanprover-community/mathlib/pull/#12172))

### [2022-02-21T13:33:44+00:00](https://github.com/leanprover-community/mathlib/commit/634dfc8a4792c6b3a1a15a3c5f2eaf697a922d0d)
feat(order/*): Missing order lifting instances ([#12154](https://github.com/leanprover-community/mathlib/pull/#12154))

Add a few missing pullbacks of order instances.

### [2022-02-21T13:33:43+00:00](https://github.com/leanprover-community/mathlib/commit/2f33463f72bebd519908fd774c8ccc551b0ee92d)
feat(group_theory/free_product): is_free_group_free_product_of_is_free_group ([#12125](https://github.com/leanprover-community/mathlib/pull/#12125))

### [2022-02-21T11:38:07+00:00](https://github.com/leanprover-community/mathlib/commit/7c6678ad7639a7b49b8fd04c158c0759efdfb08a)
doc(topology/dense_embedding): fix markdown ([#12180](https://github.com/leanprover-community/mathlib/pull/#12180))

Right now it just renders as "γ -f→ α g↓ ↓e δ -h→ β"

### [2022-02-21T11:38:06+00:00](https://github.com/leanprover-community/mathlib/commit/f66a5ddbc2f86eba8ea2149aaf2ed0e503ab7fc4)
chore(data/set/basic): add a few lemmas and a `@[simp]` attribute ([#12176](https://github.com/leanprover-community/mathlib/pull/#12176))

* rename `set.exists_eq_singleton_iff_nonempty_unique_mem` to `set.exists_eq_singleton_iff_nonempty_subsingleton`, use `set.subsingleton` in the statement;
* add `@[simp]` to `set.subset_compl_singleton_iff`;
* add `set.diff_diff_right_self`.

### [2022-02-21T11:38:05+00:00](https://github.com/leanprover-community/mathlib/commit/0eb5e2d119720204c9c42070c962cae0c65c77e7)
feat(topology/algebra): if a subobject is commutative, then so is its topological closure ([#12170](https://github.com/leanprover-community/mathlib/pull/#12170))

We prove that if a submonoid (or subgroup, subsemiring, subring, subalgebra, and the additive versions where applicable) is commutative, then so is its topological closure.

### [2022-02-21T11:38:04+00:00](https://github.com/leanprover-community/mathlib/commit/56dbb60446798c4b040799697e178c81f6c2d15b)
feat(category_theory/opposites): nat_trans.remove_unop ([#12147](https://github.com/leanprover-community/mathlib/pull/#12147))

### [2022-02-21T11:38:02+00:00](https://github.com/leanprover-community/mathlib/commit/b3b5e3552feaf9b5dc6e917dfa79b426f4b4ffad)
chore(data/nat/prime): slightly golf proof of mem_factors ([#12143](https://github.com/leanprover-community/mathlib/pull/#12143))

### [2022-02-21T11:38:01+00:00](https://github.com/leanprover-community/mathlib/commit/afcc7e747fbef6317b2e96307ea8a5c0d1ec0fed)
feat(data/nat/prime): move nat.prime_iff_prime_int; add int.prime_two/three ([#12133](https://github.com/leanprover-community/mathlib/pull/#12133))

I found it useful to have these results with somewhat lighter imports.

### [2022-02-21T11:38:00+00:00](https://github.com/leanprover-community/mathlib/commit/37019db9ee5c94278ff1cfbe39b90df068f4bc61)
feat(topology/algebra/{group,monoid}): nat and int scalar multiplication is continuous ([#12124](https://github.com/leanprover-community/mathlib/pull/#12124))

These instances allow a diamond to appear in the scalar action on `continuous_affine_map`s, which we fix at the same time.

### [2022-02-21T11:37:58+00:00](https://github.com/leanprover-community/mathlib/commit/72252b3c1b37aa0b4f9e79e86623d4d69a9dc72f)
feat(analysis/inner_product_space/projection): norm_sq_eq_sum_norm_sq… ([#12096](https://github.com/leanprover-community/mathlib/pull/#12096))

…_projection

The Pythagorean theorem for an orthogonal projection onto a submodule S.
I am sure that there are some style changes that could/should be made!

Co-authored-by: Daniel Packer



Co-authored-by: Hans Parshall <hparshall@users.noreply.github.com>

### [2022-02-21T11:37:57+00:00](https://github.com/leanprover-community/mathlib/commit/271c32376154060a2ce23f9a9bf726744b32aad2)
feat(order/filter): prod_assoc ([#12002](https://github.com/leanprover-community/mathlib/pull/#12002))

map (prod_assoc α β γ) ((f ×ᶠ g) ×ᶠ h) = f ×ᶠ (g ×ᶠ h)
with two tiny supporting lemmas

### [2022-02-21T11:37:56+00:00](https://github.com/leanprover-community/mathlib/commit/d8d2f543498c81e8399e761ea3ef7291bce3983c)
feat(group_theory/nilpotent): n-ary products of nilpotent group ([#11829](https://github.com/leanprover-community/mathlib/pull/#11829))




Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2022-02-21T10:14:55+00:00](https://github.com/leanprover-community/mathlib/commit/e966efc8e97c1c5339775747e9a41a394caa89cc)
chore(topology/constructions): golf a proof ([#12174](https://github.com/leanprover-community/mathlib/pull/#12174))

### [2022-02-21T10:14:54+00:00](https://github.com/leanprover-community/mathlib/commit/d0fa7a8e36176773bdd5b7929db5cb76c7707d0f)
chore(category_theory/limits): make fin_category_opposite an instance ([#12153](https://github.com/leanprover-community/mathlib/pull/#12153))

### [2022-02-21T09:47:15+00:00](https://github.com/leanprover-community/mathlib/commit/b04851fee007cac41154e3fabdedb092de972785)
chore(tactic): fix tactic doc tags ([#12131](https://github.com/leanprover-community/mathlib/pull/#12131))




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2022-02-21T08:48:32+00:00](https://github.com/leanprover-community/mathlib/commit/8b93d3a5431b67c3346064e168729c5b2d98b942)
feat(measure_theory/function/lp_space): generalize some `integrable` lemmas to `mem_ℒp` ([#11231](https://github.com/leanprover-community/mathlib/pull/#11231))

I would like to define integrable as `mem_ℒp` for `p = 1` and remove the `has_finite_integral` prop. But first we need to generalize everything we have about `integrable` to `mem_ℒp`. This is one step towards that goal.

### [2022-02-21T08:00:52+00:00](https://github.com/leanprover-community/mathlib/commit/e60e1f22b63250dfeb18220aac2b0f27339c6acb)
feat(data/real/pointwise): mul distributes over `infi` and `supr` ([#12105](https://github.com/leanprover-community/mathlib/pull/#12105))

### [2022-02-21T00:51:52+00:00](https://github.com/leanprover-community/mathlib/commit/6298a431db36e71ed76d6b6b421c4cec91ead16b)
feat(analysis/seminorm): smul_sup ([#12103](https://github.com/leanprover-community/mathlib/pull/#12103))

The `have : real.smul_max` local proof doesn't feel very general, so I've left it as a `have` rather than promoting it to a lemma.

### [2022-02-21T00:51:51+00:00](https://github.com/leanprover-community/mathlib/commit/6ecd7ab8c9771d0ea033ba787c8c959d1ade200e)
feat(topology/continuous_function/bounded): generalize scalar action ([#12098](https://github.com/leanprover-community/mathlib/pull/#12098))

This also makes the scalar action computable

### [2022-02-20T23:53:46+00:00](https://github.com/leanprover-community/mathlib/commit/6ae1b7026a8632a49dad448dff5a7fd066d01612)
feat(topology/uniform_space/cauchy): add `cauchy_seq.comp_injective` ([#11986](https://github.com/leanprover-community/mathlib/pull/#11986))

API changes:

- add `filter.at_top_le_cofinite`;
- add `function.injective.nat_tendsto_at_top`;
- add `cauchy_seq.comp_injective`, `function.bijective.cauchy_seq_comp_iff`.



Co-authored-by: Mark Andrew Gerads <MarkAndrewGerads.Nazgand@Gmail.Com>

### [2022-02-20T22:01:51+00:00](https://github.com/leanprover-community/mathlib/commit/7e1ef9f8ef8a3c3bedf377168902c8688ee7cb19)
feat(ring_theory/witt_vector): assorted facts about Witt vectors over char p rings ([#12093](https://github.com/leanprover-community/mathlib/pull/#12093))

Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2022-02-20T14:25:15+00:00](https://github.com/leanprover-community/mathlib/commit/334fb89d90831934321ee7f20b9c40b32d0fa284)
feat(algebra/order/ring): add three_ne_zero and four_ne_zero ([#12142](https://github.com/leanprover-community/mathlib/pull/#12142))

### [2022-02-20T09:43:13+00:00](https://github.com/leanprover-community/mathlib/commit/6c6e142e54c67b088933c373c6697ea6851d0348)
chore(data/nat/factorization): Reorder lemmas and some minor golfing ([#12144](https://github.com/leanprover-community/mathlib/pull/#12144))

Some minor housework on this file, reordering and regrouping lemmas, adding and editing a few docstrings and section headers, and golfing a few proofs.

### [2022-02-20T01:22:26+00:00](https://github.com/leanprover-community/mathlib/commit/55c9cff756c83c2542b9a7017518a3c4de52e039)
chore(data/nat/prime): slightly weaken assumption in nat.exists_prime_and_dvd ([#12156](https://github.com/leanprover-community/mathlib/pull/#12156))

It is vacuously true for zero, as everything divides zero.

### [2022-02-20T00:00:55+00:00](https://github.com/leanprover-community/mathlib/commit/fa603fed69297c19985f5bb0d4a0b11c3ed39e6e)
feat(order/category/FinPartialOrder): The category of finite partial orders ([#11997](https://github.com/leanprover-community/mathlib/pull/#11997))

Define `FinPartialOrder`, the category of finite partial orders with monotone functions.

### [2022-02-19T22:26:11+00:00](https://github.com/leanprover-community/mathlib/commit/56115334804e203c0cdfc3a0e64c5f8525d0f31e)
feat(analysis/normed_space/star/complex): real and imaginary part of an element of a star module ([#11811](https://github.com/leanprover-community/mathlib/pull/#11811))

We introduce the real and imaginary parts of an element of a star module, and show that elements of the type can be decomposed into these two parts in the obvious way.



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2022-02-19T21:14:08+00:00](https://github.com/leanprover-community/mathlib/commit/37775438bca273dca8909aefc91b76dd2798941f)
feat(category_theory/isomorphism): two lemmas is_iso.of_iso_comp_left/right on isomorphisms ([#12056](https://github.com/leanprover-community/mathlib/pull/#12056))

### [2022-02-19T19:27:37+00:00](https://github.com/leanprover-community/mathlib/commit/bc63071c3db604c2e4bd358211c79a7afcb4d398)
feat(algebra/is_prime_pow): dot notation for nat.prime ([#12145](https://github.com/leanprover-community/mathlib/pull/#12145))

### [2022-02-19T19:27:36+00:00](https://github.com/leanprover-community/mathlib/commit/628e8fbfabf30517978edc60d87180aa2a241a9e)
doc(group_theory/coset): Mention "Lagrange's theorem" ([#12137](https://github.com/leanprover-community/mathlib/pull/#12137))

Suggested here: https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/.E2.9C.94.20Lagrange's.20Theorem.20.28Group.20theory.29/near/272469211



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-02-19T18:23:35+00:00](https://github.com/leanprover-community/mathlib/commit/e88badbfc172c98a0c1a16bb4696b6a77eb2b5c2)
feat(analysis/inner_product_space/pi_L2): Orthonormal basis ([#12060](https://github.com/leanprover-community/mathlib/pull/#12060))

Added the structure orthonormal_basis and basic associated API
Renamed the previous definition orthonormal_basis in analysis/inner_product_space/projection to std_orthonormal_basis



Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2022-02-19T07:54:42+00:00](https://github.com/leanprover-community/mathlib/commit/518b5d25c0dc227a0d1d230d055d1da5c5bef46e)
chore(topology/bases): golf a proof ([#12127](https://github.com/leanprover-community/mathlib/pull/#12127))

Also add `function.injective_iff_pairwise_ne`.

### [2022-02-18T21:46:45+00:00](https://github.com/leanprover-community/mathlib/commit/213e2ed70129fb145dadb94b130f144d8a3355a4)
feat(algebra/group/pi): add pi.nsmul_apply ([#12122](https://github.com/leanprover-community/mathlib/pull/#12122))

via to_additive

### [2022-02-18T21:46:43+00:00](https://github.com/leanprover-community/mathlib/commit/b3d0944867b430bb5557ba6391ca9c7749a16cbb)
feat(tactic/swap_var): name juggling, a weaker wlog ([#12006](https://github.com/leanprover-community/mathlib/pull/#12006))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>
Co-authored-by: Yakov Pechersky <ypechersky@treeline.bio>

### [2022-02-18T19:52:47+00:00](https://github.com/leanprover-community/mathlib/commit/5f46dd09952da7085b8d3e778cd3ca6c29c0a7cd)
fix(category_theory/limits): improve inaccurate docstrings ([#12130](https://github.com/leanprover-community/mathlib/pull/#12130))

### [2022-02-18T19:52:46+00:00](https://github.com/leanprover-community/mathlib/commit/7b6c4072cbb1b504e35b8ee0c294630115e81829)
feat(number_theory/divisors): add `prod_div_divisors` and `sum_div_divisors` ([#12087](https://github.com/leanprover-community/mathlib/pull/#12087))

Adds lemma `prod_div_divisors : ∏ d in n.divisors, f (n/d) = n.divisors.prod f` and `sum_div_divisors`.

Also proves `image_div_divisors_eq_divisors : image (λ (x : ℕ), n / x) n.divisors = n.divisors`
and `div_eq_iff_eq_of_dvd_dvd : n / x = n / y ↔ x = y` (where `n ≠ 0` and `x ∣ n` and `y ∣ n`)

### [2022-02-18T19:52:44+00:00](https://github.com/leanprover-community/mathlib/commit/33179f7eb4c95f6f23924a07db1c06fee93d0859)
refactor(topology/metric_space/completion): change namespace ([#12077](https://github.com/leanprover-community/mathlib/pull/#12077))

Move lemmas about metric on `uniform_space.completion` from `metric.completion` namespace to `uniform_space.completion`.

### [2022-02-18T19:52:43+00:00](https://github.com/leanprover-community/mathlib/commit/18c3e3f0df9c6b062bcf627013632dbdec028a78)
feat(data/nat/fib): add that `fib` is sum of `nat.choose` along antidiagonal ([#12063](https://github.com/leanprover-community/mathlib/pull/#12063))

### [2022-02-18T19:21:11+00:00](https://github.com/leanprover-community/mathlib/commit/ffc2bdfbae694c3a457694531fa75e412e2b10e9)
refactor(group_theory/abelianization): Define `commutator` in terms of `general_commutator` ([#11949](https://github.com/leanprover-community/mathlib/pull/#11949))

It seems reasonable to define `commutator` in terms of `general_commutator`.

### [2022-02-18T18:09:38+00:00](https://github.com/leanprover-community/mathlib/commit/018c7289bec1e67b69fa8b4ec13a9d6257e89f19)
refactor(ring_theory/fractional_ideal): rename lemmas for dot notation, add coe_pow ([#12080](https://github.com/leanprover-community/mathlib/pull/#12080))

This replaces `fractional_ideal.fractional_mul` with `is_fractional.mul` and likewise for the other operations. The bundling was a distraction for the content of the lemmas anyway.

### [2022-02-18T18:09:37+00:00](https://github.com/leanprover-community/mathlib/commit/bcf8a6ed79880e4f1eed2ca240316635ad2ca1ec)
feat(ring_theory/fractional_ideal): add coe_ideal lemmas ([#12073](https://github.com/leanprover-community/mathlib/pull/#12073))

### [2022-02-18T16:58:17+00:00](https://github.com/leanprover-community/mathlib/commit/98643bcaba266ef36a040f5a16a4f805fca709fc)
feat(algebra/big_operators/intervals): summation by parts ([#11814](https://github.com/leanprover-community/mathlib/pull/#11814))

Add the "summation by parts" identity over intervals of natural numbers, as well as some helper lemmas.

### [2022-02-18T15:07:45+00:00](https://github.com/leanprover-community/mathlib/commit/3ca16d0abdbacdddce1c72ea43e00636607b091e)
feat(data/equiv): define `ring_equiv_class` ([#11977](https://github.com/leanprover-community/mathlib/pull/#11977))

This PR applies the morphism class pattern to `ring_equiv`, producing a new `ring_equiv_class` extending `mul_equiv_class` and `add_equiv_class`. It also provides a `ring_equiv_class` instance for `alg_equiv`s.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2022-02-18T14:37:42+00:00](https://github.com/leanprover-community/mathlib/commit/223f1496de5e90022a18c1adbdc6e69a68697487)
chore(algebra/star/self_adjoint): extract a lemma from `has_scalar` ([#12121](https://github.com/leanprover-community/mathlib/pull/#12121))

### [2022-02-18T13:41:21+00:00](https://github.com/leanprover-community/mathlib/commit/aed97e032cb544fa12f2a5faaffba4d62b472cf2)
doc(analysis/normed/group/basic): add docstring explaining the "insert" name ([#12100](https://github.com/leanprover-community/mathlib/pull/#12100))

### [2022-02-18T12:57:33+00:00](https://github.com/leanprover-community/mathlib/commit/3e6439cd7e04a883c6f71605e3eb333d7623af07)
fix(category_theory/limits/shapes/images): make class a Prop ([#12119](https://github.com/leanprover-community/mathlib/pull/#12119))

### [2022-02-18T11:05:58+00:00](https://github.com/leanprover-community/mathlib/commit/33b4e739a12468a9e2711fada3e4c6f51a37871d)
refactor(topology/algebra): reorder imports ([#12089](https://github.com/leanprover-community/mathlib/pull/#12089))

* move `mul_opposite.topological_space` and `units.topological_space` to a new file;
* import `mul_action` in `monoid`, not vice versa.

With this order of imports, we can reuse results about `has_continuous_smul` in lemmas about topological monoids.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-02-18T07:37:58+00:00](https://github.com/leanprover-community/mathlib/commit/77f264f1e284611379e29c5d0feeec82ddf24152)
feat(data/finset/basic): add lemma `filter_eq_empty_iff` ([#12104](https://github.com/leanprover-community/mathlib/pull/#12104))

Add `filter_eq_empty_iff : (s.filter p = ∅) ↔ ∀ x ∈ s, ¬ p x`

We already have the right-to-left direction of this in `filter_false_of_mem`.

### [2022-02-18T05:49:20+00:00](https://github.com/leanprover-community/mathlib/commit/bb1b56c76712c8aa9239c686c88ab5052e296dac)
feat(algebra/indicator_function): smul lemmas for functions ([#12059](https://github.com/leanprover-community/mathlib/pull/#12059))

And a few basic lemmas in `set/basic`.

### [2022-02-18T04:52:16+00:00](https://github.com/leanprover-community/mathlib/commit/17b3357baa47f48697ca9c243e300eb8cdd16a15)
feat(topology/algebra): generalize `has_continuous_smul` arguments to `has_continuous_const_smul` ([#11999](https://github.com/leanprover-community/mathlib/pull/#11999))

This changes the majority of the downstream call-sites of the `const_smul` lemmas to only need the weaker typeclass.

### [2022-02-18T02:05:51+00:00](https://github.com/leanprover-community/mathlib/commit/b75720616d3423efb3f991db49bee49b58f61154)
feat(linear_algebra/finite_dimensional): finrank_range_of_inj ([#12067](https://github.com/leanprover-community/mathlib/pull/#12067))

The dimensions of the domain and range of an injective linear map are
equal.





Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2022-02-18T00:52:54+00:00](https://github.com/leanprover-community/mathlib/commit/59a183a18829a4e4774ebb6c927297101acad19e)
feat(data/finset/locally_finite): add Ico_subset_Ico_union_Ico ([#11710](https://github.com/leanprover-community/mathlib/pull/#11710))


This lemma extends the result for `set`s to `finset`s.

### [2022-02-17T22:59:24+00:00](https://github.com/leanprover-community/mathlib/commit/e93996cf7e6cdfb77af2ddf04121663a7c395f8d)
feat(topology/instances/discrete): instances for the discrete topology ([#11349](https://github.com/leanprover-community/mathlib/pull/#11349))

Prove `first_countable_topology`, `second_countable_topology` and `order_topology` for the discrete topology under appropriate conditions like `encodable`, or being a linear order with `pred` and `succ`. These instances give in particular `second_countable_topology ℕ` and `order_topology ℕ`



Co-authored-by: RemyDegenne <remydegenne@gmail.com>
Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2022-02-17T21:50:25+00:00](https://github.com/leanprover-community/mathlib/commit/6089f08a8bd7eef3fce3f965382023fda04e761f)
feat(data/nat/totient): add Euler's product formula for totient function ([#11332](https://github.com/leanprover-community/mathlib/pull/#11332))

Proving four versions of Euler's product formula for the totient function `φ`:
* `totient_eq_prod_factorization :  φ n = n.factorization.prod (λ p k, p ^ (k - 1) * (p - 1))`
* `totient_mul_prod_factors : φ n * ∏ p in n.factors.to_finset, p = n * ∏ p in n.factors.to_finset, (p - 1)`
* `totient_eq_div_factors_mul : φ n = n / (∏ p in n.factors.to_finset, p) * (∏ p in n.factors.to_finset, (p - 1))`
* `totient_eq_mul_prod_factors : (φ n : ℚ) = n * ∏ p in n.factors.to_finset, (1 - p⁻¹)`

### [2022-02-17T21:06:46+00:00](https://github.com/leanprover-community/mathlib/commit/19534b293505f3c23a01314e7c7fe4c11d06875c)
feat(analysis/inner_product_space/basic) : `inner_map_self_eq_zero` ([#12065](https://github.com/leanprover-community/mathlib/pull/#12065))

The main result here is:  If ⟪T x, x⟫_C = 0 for all x, then T = 0.
The proof uses a polarization identity.  Note that this is false
with R in place of C.  I am confident that my use of ring_nf is
not optimal, but I hope to learn from the cleanup process!

Co-authored-by: Daniel Packer



Co-authored-by: Hans Parshall <hparshall@users.noreply.github.com>

### [2022-02-17T22:00:06+01:00](https://github.com/leanprover-community/mathlib/commit/8b6901b678479ceef41fb7e4e863e8c4e38e29fd)
Revert "feat(category_theory/limits): is_bilimit"

This reverts commit 8edfa75d79ad70c88dbae01ab6166dd8b1fd2ba0.

### [2022-02-17T21:56:42+01:00](https://github.com/leanprover-community/mathlib/commit/8edfa75d79ad70c88dbae01ab6166dd8b1fd2ba0)
feat(category_theory/limits): is_bilimit

### [2022-02-17T19:35:15+00:00](https://github.com/leanprover-community/mathlib/commit/aacc36c5e998b1e3a36ec240f071d9f0105b82f4)
feat(group_theory/commensurable): Definition and lemmas about commensurability. ([#9545](https://github.com/leanprover-community/mathlib/pull/#9545))

This defines commensurability for subgroups, proves this defines a transitive relation and then defines the commensurator subgroup. In doing so it also needs some lemmas about indices of subgroups and the definition of the conjugate of a subgroup by an element of the parent group.



Co-authored-by: CBirkbeck <56166236+CBirkbeck@users.noreply.github.com>

### [2022-02-17T18:46:15+00:00](https://github.com/leanprover-community/mathlib/commit/8575f592a0001d2d7c11a3eb7a8f3c90d80f8831)
feat(category_theory/limits): preservation of zero morphisms ([#12068](https://github.com/leanprover-community/mathlib/pull/#12068))

### [2022-02-17T17:02:32+00:00](https://github.com/leanprover-community/mathlib/commit/c9e8c6477ca55a796529b884bba07b964b17fd3d)
chore(*): update to lean 3.39.2c ([#12102](https://github.com/leanprover-community/mathlib/pull/#12102))

### [2022-02-17T17:02:31+00:00](https://github.com/leanprover-community/mathlib/commit/dcb28262de821ab5d3274dbcf823aece7e28c252)
feat(order/filter/basic): add eventually_eq.(smul/const_smul/sup/inf) ([#12101](https://github.com/leanprover-community/mathlib/pull/#12101))

### [2022-02-17T15:34:44+00:00](https://github.com/leanprover-community/mathlib/commit/307711e2f9363c4da13d48f18381400be7393f48)
feat(group_theory/general_commutator): subgroup.pi commutes with the general_commutator ([#11825](https://github.com/leanprover-community/mathlib/pull/#11825))



Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2022-02-17T13:10:49+00:00](https://github.com/leanprover-community/mathlib/commit/b54f44f0b4335b1ff4f80b21a522fd97dba58b65)
feat(data/matrix/notation): expansions of matrix multiplication for 2x2 and 3x3 ([#12088](https://github.com/leanprover-community/mathlib/pull/#12088))

A clever way to generalize this would be to make a recursivedefinition of `mul` and `one` that's defeq to the desired `![...]` result and prove that's equal to the usual definition, but that doesn't help with actually writing the lemma statement, which is the tedious bit.

### [2022-02-17T12:16:09+00:00](https://github.com/leanprover-community/mathlib/commit/eb8d58d613043f9a37c20458ebf574ba4eef8652)
fix(topology/algebra/basic): remove duplicate lemma ([#12097](https://github.com/leanprover-community/mathlib/pull/#12097))

This lemma duplicates the lemma of the same name in the root namespace, and should not be in this namespace in the first place.

The other half of [#12072](https://github.com/leanprover-community/mathlib/pull/#12072), now that the dependent PR is merged.

### [2022-02-17T12:16:07+00:00](https://github.com/leanprover-community/mathlib/commit/4afd667f42411ecdcdaf09402f844db94575b3dd)
feat(measure_theory/integral): add `integral_sum_measure` ([#12090](https://github.com/leanprover-community/mathlib/pull/#12090))

Also add supporting lemmas about finite and infinite sums of measures.

### [2022-02-17T11:20:26+00:00](https://github.com/leanprover-community/mathlib/commit/20cf3ca051c6f34ec2e89058b50f747cbada503e)
feat(ring_theory/discriminant): add discr_eq_discr_of_to_matrix_coeff_is_integral ([#11994](https://github.com/leanprover-community/mathlib/pull/#11994))

We add `discr_eq_discr_of_to_matrix_coeff_is_integral`: if `b` and `b'` are `ℚ`-basis of a number field `K` such that
`∀ i j, is_integral ℤ (b.to_matrix b' i j)` and `∀ i j, is_integral ℤ (b'.to_matrix b i j` then
`discr ℚ b = discr ℚ b'`.

### [2022-02-17T10:43:57+00:00](https://github.com/leanprover-community/mathlib/commit/614758eba45fe410832a5c3d658f094a1ee703b0)
feat(order/category/DistribLattice): The category of distributive lattices ([#12092](https://github.com/leanprover-community/mathlib/pull/#12092))

Define `DistribLattice`, the category of distributive lattices.

### [2022-02-17T10:00:32+00:00](https://github.com/leanprover-community/mathlib/commit/58a37203f03ee0b78e48373df2852292328b75d8)
feat(analysis/inner_product_space/pi_L2): `complex.isometry_of_orthonormal` ([#11970](https://github.com/leanprover-community/mathlib/pull/#11970))

Add a definition for the isometry between `ℂ` and a two-dimensional
real inner product space given by a basis, and an associated `simp`
lemma for how this relates to `basis.map`.

This definition is just the composition of two existing definitions,
`complex.isometry_euclidean` and (the inverse of)
`basis.isometry_euclidean_of_orthonormal`.  However, it's still useful
to have it as a single definition when using it to define and prove
basic properties of oriented angles (in an oriented two-dimensional
real inner product space), to keep definitions and terms in proofs
simpler and to avoid tactics such as `simp` or `rw` rearranging things
inside this definition when not wanted (almost everything just needs
to use some isometry between these two spaces without caring about the
details of how it's defined, so it seems best to use a single `def`
for this isometry, and on the rare occasions where the details of how
it's defined matter, prove specific lemmas about the required
properties).

### [2022-02-17T07:43:58+00:00](https://github.com/leanprover-community/mathlib/commit/a355d88c93b506fe971acda2431b389e37c3d34b)
feat(topology/metric_space/gluing): metric space structure on sigma types ([#11965](https://github.com/leanprover-community/mathlib/pull/#11965))

We define a (noncanonical) metric space structure on sigma types (aka arbitrary disjoint unions), as follows. Each piece is isometrically embedded in the union, while for `x` and `y` in different pieces their distance is `dist x x0 + 1 + dist y0 y`, where `x0` and `y0` are basepoints in the respective parts. This is *not* registered as an instance.

This definition was already there for sum types (aka disjoint union of two pieces). We also fix this existing definition to avoid `inhabited` assumptions.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-02-17T06:05:54+00:00](https://github.com/leanprover-community/mathlib/commit/09960ea11787da0e3f8d6cf7eb596fe5e4c6905a)
feat(algebra/group_power/basic): `two_zsmul` ([#12094](https://github.com/leanprover-community/mathlib/pull/#12094))

Mark `zpow_two` with `@[to_additive two_zsmul]`.  I see no apparent
reason for this result not to use `to_additive`, and I found I had a
use for the additive version.

### [2022-02-17T05:32:27+00:00](https://github.com/leanprover-community/mathlib/commit/1831d852d2920d6602730dd01214ee35768e9b55)
feat(category_theory/limits): Preserves epi of preserves pushout. ([#12084](https://github.com/leanprover-community/mathlib/pull/#12084))

### [2022-02-17T00:34:41+00:00](https://github.com/leanprover-community/mathlib/commit/84f12be1492da63a1d7dd0dce8771aa3e15b8c36)
chore(algebra/star/self_adjoint): improve definitional unfolding of pow and div ([#12085](https://github.com/leanprover-community/mathlib/pull/#12085))

### [2022-02-17T00:34:40+00:00](https://github.com/leanprover-community/mathlib/commit/834fd30b49bd2108010f6954d780e2983845a0cc)
feat(topology/continuous_function/algebra): generalize algebra instances ([#12055](https://github.com/leanprover-community/mathlib/pull/#12055))

This adds:
* some missing instances in the algebra hierarchy (`comm_semigroup`, `mul_one_class`, `mul_zero_class`, `monoid_with_zero`, `comm_monoid_with_zero`, `comm_semiring`).
* finer-grained scalar action instances, notably none of which require `topological_space R` any more, as they only need `has_continuous_const_smul R M` instead of `has_continuous_smul R M`.
* continuity lemmas about `zpow` on groups and `zsmul` on additive groups (copied directly from the lemmas about `pow` on monoids), which are used to avoid diamonds in the int-action. In order to make room for these, the lemmas about `zpow` on groups with zero have been renamed to `zpow₀`, which is consistent with how the similar clash with `inv` is solved.
* a few lemmas about `mk_of_compact` since an existing proof was broken by `refl` closing the goal earlier than before.

### [2022-02-17T00:34:39+00:00](https://github.com/leanprover-community/mathlib/commit/27df8a0de571f52c83d3c8f0c0e16d23e97d2c67)
feat(topology/instances/rat): some facts about topology on `rat` ([#11832](https://github.com/leanprover-community/mathlib/pull/#11832))

* `ℚ` is a totally disconnected space;
* `cocompact  ℚ` is not a countably generated filter;
* hence, `alexandroff  ℚ` is not a first countable topological space.

### [2022-02-16T22:44:23+00:00](https://github.com/leanprover-community/mathlib/commit/7dae87fe5bf7b016672379cfc4bd59f5c40c4fe0)
feat(topology/metric_space/basic): ext lemmas for metric spaces ([#12070](https://github.com/leanprover-community/mathlib/pull/#12070))

Also add a few results in `metric_space.basic`:
* A decreasing intersection of closed sets with diameter tending to `0` is nonempty in a complete space
* new constructions of metric spaces by pulling back structures (and adjusting definitional equalities)
* fixing `metric_space empty` and `metric_space punit` to make sure the uniform structure is definitionally the right one.


Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-02-16T22:44:22+00:00](https://github.com/leanprover-community/mathlib/commit/5db1ae4c682458d35a3f4dad29e1b2ba40e0573b)
feat(analysis/specific_limits): useful specializations of some lemmas ([#12069](https://github.com/leanprover-community/mathlib/pull/#12069))

### [2022-02-16T22:44:21+00:00](https://github.com/leanprover-community/mathlib/commit/1bf418176448d43df9f82b1fc2a9b1cffb41be9d)
feat(data/equiv/{basic,mul_equiv)}: add Pi_subsingleton ([#12040](https://github.com/leanprover-community/mathlib/pull/#12040))

### [2022-02-16T22:44:20+00:00](https://github.com/leanprover-community/mathlib/commit/b2aaece0d97be6b5f494c021b3bebfadbe8ecad9)
feat(field_theory/is_alg_closed): alg closed and char p implies perfect ([#12037](https://github.com/leanprover-community/mathlib/pull/#12037))

Co-authored-by: Johan Commelin <johan@commelin.net>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Adam Topaz <github@adamtopaz.com>

### [2022-02-16T21:09:23+00:00](https://github.com/leanprover-community/mathlib/commit/bd67e852217e4c2ea749b933159c96a0b454adfa)
feat(algebra/char_p/basic): add ring_char_of_prime_eq_zero ([#12024](https://github.com/leanprover-community/mathlib/pull/#12024))

The characteristic of a ring is `p` if `p` is a prime and `p = 0` in the ring.

Co-authored-by: jlh <48520973+Jlh18@users.noreply.github.com>

### [2022-02-16T21:09:22+00:00](https://github.com/leanprover-community/mathlib/commit/0fe91d0dc3d11d637659690b2970720893ee7d22)
feat(data/part): Instance lemmas ([#12001](https://github.com/leanprover-community/mathlib/pull/#12001))


Lemmas about `part` instances, proved by `tidy`



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-02-16T19:16:09+00:00](https://github.com/leanprover-community/mathlib/commit/b395a6711992f7993cb8f5f2ef75d2ac4d399460)
chore(data/finsupp/pointwise): golf using injective lemmas ([#12086](https://github.com/leanprover-community/mathlib/pull/#12086))

### [2022-02-16T19:16:08+00:00](https://github.com/leanprover-community/mathlib/commit/0ab9b5f38695e372d9073101bfb063d97592a4f3)
chore(topology/continuous_function/bounded): golf algebra instances ([#12082](https://github.com/leanprover-community/mathlib/pull/#12082))

Using the `function.injective.*` lemmas saves a lot of proofs.

This also adds a few missing lemmas about `one` that were already present for `zero`.

### [2022-02-16T19:16:06+00:00](https://github.com/leanprover-community/mathlib/commit/d86ce0271c16ebb8fb53b14bc09b84b33db81437)
chore(ring_theory/fractional_ideal): golf ([#12076](https://github.com/leanprover-community/mathlib/pull/#12076))

### [2022-02-16T19:16:04+00:00](https://github.com/leanprover-community/mathlib/commit/15c6eee7ea7349c62bcc97f5d7fb24f607821648)
feat(logic/basic): Better congruence lemmas for `or`, `or_or_or_comm` ([#12004](https://github.com/leanprover-community/mathlib/pull/#12004))

Prove `or_congr_left` and `or_congr_right` and rename the existing `or_congr_left`/`or_congr_right` to `or_congr_left'`/`or_congr_right'` to match the `and` lemmas. Also prove `or_rotate`, `or.rotate`, `or_or_or_comm` based on `and` again.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-02-16T19:16:03+00:00](https://github.com/leanprover-community/mathlib/commit/5e3d465c6b82e249d535085cd28d005a26569dc4)
feat(category_theory/category/PartialFun): The category of types with partial functions ([#11866](https://github.com/leanprover-community/mathlib/pull/#11866))

Define `PartialFun`, the category of types with partial functions, and show its equivalence with `Pointed`.

### [2022-02-16T17:16:29+00:00](https://github.com/leanprover-community/mathlib/commit/3c78d00aee83fd330b29d2f1772e5b15b1172267)
docs(group_theory/semidirect_product): fix typo in module docs ([#12083](https://github.com/leanprover-community/mathlib/pull/#12083))

### [2022-02-16T17:16:27+00:00](https://github.com/leanprover-community/mathlib/commit/3107a8314b6dc2deac0d3aab5bd2b7e06c422ba0)
feat(algebra/char_p/basic): Generalize `frobenius_inj`. ([#12079](https://github.com/leanprover-community/mathlib/pull/#12079))

### [2022-02-16T17:16:26+00:00](https://github.com/leanprover-community/mathlib/commit/0eb160a50157f6b786c449a93610ac2aa0e76491)
feat(data/finset/basic): When `insert` is injective and other lemmas ([#11982](https://github.com/leanprover-community/mathlib/pull/#11982))

* `insert`/`cons` lemmas for `finset` and `multiset`
* `has_ssubset` instance for `multiset`
* `finset.sdiff_nonempty`
* `disjoint.of_image_finset`, `finset.disjoint_image`, `finset.disjoint_map`
* `finset.exists_eq_insert_iff`
* `mem` lemmas
* change `pred` to `- 1` into the statement of `finset.card_erase_of_mem`

### [2022-02-16T17:16:25+00:00](https://github.com/leanprover-community/mathlib/commit/6bcb12c1ecbf061f5b8f1616cc089be4817164a3)
feat(order/antisymmetrization): Turning a preorder into a partial order ([#11728](https://github.com/leanprover-community/mathlib/pull/#11728))

Define `antisymmetrization`, the quotient of a preorder by the "less than both ways" relation. This effectively turns a preorder into a partial order, and this operation is functorial as shown by the new `Preorder_to_PartialOrder`.

### [2022-02-16T16:11:48+00:00](https://github.com/leanprover-community/mathlib/commit/8a286af6e972afb8aaa36786edeb6dd5676f7b53)
chore(topology/algebra/mul_action): rename type variables ([#12020](https://github.com/leanprover-community/mathlib/pull/#12020))

### [2022-02-16T14:23:54+00:00](https://github.com/leanprover-community/mathlib/commit/e8156757a593ee186861ed584be63a550a7563ac)
chore(topology/algebra/module/basic): remove two duplicate lemmas ([#12072](https://github.com/leanprover-community/mathlib/pull/#12072))

`continuous_linear_map.continuous_nsmul` is nothing to do with `continuous_linear_map`s, and is the same as `continuous_nsmul`, but the latter doesn't require commutativity. There is no reason to keep the former.

This lemma was added in [#7084](https://github.com/leanprover-community/mathlib/pull/#7084), but probably got missed due to how large that PR had to be.

We can't remove `continuous_linear_map.continuous_zsmul` until [#12055](https://github.com/leanprover-community/mathlib/pull/#12055) is merged, as there is currently no `continuous_zsmul` in the root namespace.

### [2022-02-16T14:23:53+00:00](https://github.com/leanprover-community/mathlib/commit/a26d17fcd679e43d380d0583b33c9eca5359d41e)
feat(mv_polynomial/supported): restrict_to_vars ([#12043](https://github.com/leanprover-community/mathlib/pull/#12043))




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2022-02-16T14:23:52+00:00](https://github.com/leanprover-community/mathlib/commit/62297cf0a399bc01a1fe3333822267b297176e41)
feat(analysis/complex/cauchy_integral, analysis/analytic/basic): entire functions have power series with infinite radius of convergence ([#11948](https://github.com/leanprover-community/mathlib/pull/#11948))

This proves that a formal multilinear series `p` which represents a function `f : 𝕜 → E` on a ball of every positive radius, then `p` represents `f` on a ball of infinite radius. Consequently, it is shown that if `f : ℂ → E` is differentiable everywhere, then `cauchy_power_series f z R` represents `f` as a power series centered at `z` in the entirety of `ℂ`, regardless of `R` (assuming `0 < R`).

- [x] depends on: [#11896](https://github.com/leanprover-community/mathlib/pull/#11896) 



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-02-16T13:36:23+00:00](https://github.com/leanprover-community/mathlib/commit/22fdf47e7d577cedc5cbd60da8b9458d2f8e868a)
chore(linear_algebra/affine_space/affine_map,topology/algebra/continuous_affine_map): generalized scalar instances ([#11978](https://github.com/leanprover-community/mathlib/pull/#11978))

The main result here is that `distrib_mul_action`s are available on affine maps to a module, inherited from their codomain.

This fixes a diamond in the `int`-action that was already present for `int`-affine maps, and prevents the new `nat`-action introducing a diamond.

This also removes the requirement for `R` to be a `topological_space` in the scalar action for `continuous_affine_map` by using `has_continuous_const_smul` instead of `has_continuous_smul`.

### [2022-02-16T11:53:41+00:00](https://github.com/leanprover-community/mathlib/commit/32beebbcea3e399f8d30c8e247d9243f04204452)
feat(algebra/order/monoid): add simp lemmas ([#12030](https://github.com/leanprover-community/mathlib/pull/#12030))

### [2022-02-16T11:53:40+00:00](https://github.com/leanprover-community/mathlib/commit/7542119889ed47284142bb699843618ca31a8658)
refactor(algebra/group/basic): add extra typeclasses for negation ([#11960](https://github.com/leanprover-community/mathlib/pull/#11960))

The new typeclasses are:
* `has_involutive_inv R`, stating that `(r⁻¹)⁻¹ = r`  
  (instances: `group`, `group_with_zero`, `ennreal`, `set`, `submonoid`)
* `has_involutive_neg R`, stating that `- -r = r`
  (instances: `add_group`, `ereal`, `module.ray`, `ray_vector`, `set`, `add_submonoid`, `jordan_decomposition`)
* `has_distrib_neg R`, stating that `-a * b = a * -b = -(a * b)`
  (instances: `ring`, `units`, `unitary`, `special_linear_group`, `GL_pos`)

While the original motivation only concerned the two `neg` typeclasses, the `to_additive` machinery forced the introduction of `has_involutive_inv`, which turned out to be used in more places than expected.

Adding these typeclases removes a large number of specialized `units R` lemmas as the lemmas about `R` now match themselves. A surprising number of lemmas elsewhere in the library can also be removed. The removed lemmas are:
* Lemmas about `units` (replaced by `units.has_distrib_neg`):
  * `units.neg_one_pow_eq_or`
  * `units.neg_pow`
  * `units.neg_pow_bit0`
  * `units.neg_pow_bit1`
  * `units.neg_sq`
  * `units.neg_inv` (now `inv_neg'` for arbitrary groups with distributive negation)
  * `units.neg_neg`
  * `units.neg_mul`
  * `units.mul_neg`
  * `units.neg_mul_eq_neg_mul`
  * `units.neg_mul_eq_mul_neg`
  * `units.neg_mul_neg`
  * `units.neg_eq_neg_one_mul`
  * `units.mul_neg_one`
  * `units.neg_one_mul`
  * `semiconj_by.units_neg_right`
  * `semiconj_by.units_neg_right_iff`
  * `semiconj_by.units_neg_left`
  * `semiconj_by.units_neg_left_iff`
  * `semiconj_by.units_neg_one_right`
  * `semiconj_by.units_neg_one_left`
  * `commute.units_neg_right`
  * `commute.units_neg_right_iff`
  * `commute.units_neg_left`
  * `commute.units_neg_left_iff`
  * `commute.units_neg_one_right`
  * `commute.units_neg_one_left`
* Lemmas about groups with zero (replaced by `group_with_zero.to_has_involutive_neg`):
  * `inv_inv₀`
  * `inv_involutive₀`
  * `inv_injective₀`
  * `inv_eq_iff` (now shared with the `inv_eq_iff_inv_eq` group lemma)
  * `eq_inv_iff` (now shared with the `eq_inv_iff_eq_inv` group lemma)
  * `equiv.inv₀`
  * `measurable_equiv.inv₀`
* Lemmas about `ereal` (replaced by `ereal.has_involutive_neg`):
  * `ereal.neg_neg`
  * `ereal.neg_inj`
  * `ereal.neg_eq_neg_iff`
  * `ereal.neg_eq_iff_neg_eq`
* Lemmas about `ennreal` (replaced by `ennreal.has_involutive_inv`):
  * `ereal.inv_inv`
  * `ereal.inv_involutive`
  * `ereal.inv_bijective`
  * `ereal.inv_eq_inv`
* Other lemmas:
  * `ray_vector.neg_neg`
  * `module.ray.neg_neg`
  * `module.ray.neg_involutive`
  * `module.ray.eq_neg_iff_eq_neg`
  * `set.inv_inv`
  * `set.neg_neg`
  * `submonoid.inv_inv`
  * `add_submonoid.neg_neg`

As a bonus, this provides the group `unitary R`  with a negation operator and all the lemmas listed for `units` above.

For now this doesn't attempt to unify `units.neg_smul` and `neg_smul`.

### [2022-02-16T11:53:38+00:00](https://github.com/leanprover-community/mathlib/commit/d24792c6ea10a4063007dc7bf8dca0f0daf858dd)
feat(model_theory/terms_and_formulas): Define satisfiability and semantic equivalence of formulas ([#11928](https://github.com/leanprover-community/mathlib/pull/#11928))

Defines satisfiability of theories
Provides a default model of a satisfiable theory
Defines semantic (logical) equivalence of formulas

### [2022-02-16T11:19:27+00:00](https://github.com/leanprover-community/mathlib/commit/6dfb24cfd5c974a405d3b24d0e0c240c98f3d81a)
feat(algebra/star/self_adjoint): define skew-adjoint elements of a star additive group ([#12013](https://github.com/leanprover-community/mathlib/pull/#12013))

This defines the skew-adjoint elements of a star additive group, as the additive subgroup that satisfies `star x = -x`. The development is analogous to that of `self_adjoint`.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-02-16T09:30:11+00:00](https://github.com/leanprover-community/mathlib/commit/06e6b35d12ebfda104f75735b15b844dc5816f55)
feat(analysis/special_functions/trigonometric/angle): `coe_pi_add_coe_pi` ([#12064](https://github.com/leanprover-community/mathlib/pull/#12064))

Add another `simp` lemma to those expressing in different ways that 2π
is zero as a `real.angle`.

### [2022-02-16T07:45:37+00:00](https://github.com/leanprover-community/mathlib/commit/daf2989acfe0e8d1de283bdc1d913b033df0e2a2)
feat(algebra/big_operators): formula for product of sums to n+1 ([#12042](https://github.com/leanprover-community/mathlib/pull/#12042))




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2022-02-16T07:16:02+00:00](https://github.com/leanprover-community/mathlib/commit/6a09cd0657f8d99b10e887ff30d43a2ee43b40dc)
chore(topology/uniform_space): use weaker TC assumptions ([#12066](https://github.com/leanprover-community/mathlib/pull/#12066))

We don't need `[uniform_space β]` to prove
`uniform_space.completion.ext`.

### [2022-02-15T20:57:33+00:00](https://github.com/leanprover-community/mathlib/commit/eeb29569624dc993f1e3549f81cbe62228347f0d)
feat(topology/algebra): relax some `Type*` assumptions to `Sort*` ([#12058](https://github.com/leanprover-community/mathlib/pull/#12058))

When working on [#11720](https://github.com/leanprover-community/mathlib/pull/#11720) I forgot that we have to deal with Prop-indexed infimums quite often, so this PR fixes that.

### [2022-02-15T19:34:16+00:00](https://github.com/leanprover-community/mathlib/commit/b0fe97230b653862c49567b121dc8a12d7a9ee40)
feat (analysis/normed_space/spectrum): prove Gelfand's formula for the spectral radius ([#11916](https://github.com/leanprover-community/mathlib/pull/#11916))

This establishes Gelfand's formula for the spectral radius in a complex Banach algebra `A`, namely that the sequence of n-th roots of the norms of n-th powers of any element tends to its spectral radius. Some results which hold in more generality concerning the function `z ↦ ring.inverse (1 - z • a)` are also given. In particular, this function is differentiable on the disk with radius the reciprocal of the spectral radius, and it has a power series on the ball with radius equal to the reciprocal of the norm of `a : A`.

Currently, the version of Gelfand's formula which appears here includes an assumption that `A` is second countable, which won't hold in general unless `A` is separable. This is not a true (i.e., mathematical) limitation, but a consequence of the current implementation of Bochner integrals in mathlib (which are an essential feature in the proof of Gelfand's formula because of its use of the Cauchy integral formula). When Bochner integrals are refactored, this type class assumption can be dropped.

- [x] depends on: [#11869](https://github.com/leanprover-community/mathlib/pull/#11869)
- [x] depends on: [#11896](https://github.com/leanprover-community/mathlib/pull/#11896) 
- [x] depends on: [#11915](https://github.com/leanprover-community/mathlib/pull/#11915)

### [2022-02-15T19:34:15+00:00](https://github.com/leanprover-community/mathlib/commit/d76ac2e0f7a3aaba0bc0460ffb858616e27c1786)
feat(category_theory): separators and detectors ([#11880](https://github.com/leanprover-community/mathlib/pull/#11880))

### [2022-02-15T19:04:10+00:00](https://github.com/leanprover-community/mathlib/commit/ff2c9dc3d5d4a02eabc86c117783bb55b2a11b99)
feat(combinatorics/simple_graph/connectivity): add functions to split walks and to create paths ([#11095](https://github.com/leanprover-community/mathlib/pull/#11095))

This is chunk 3 of [#8737](https://github.com/leanprover-community/mathlib/pull/#8737). Introduces `take_until` and `drop_until` to split walks at a vertex, `rotate` to rotate cycles, and `to_path` to remove internal redundancy from a walk to create a path with the same endpoints.

This also defines a bundled `path` type for `is_path` since `G.path u v` is a useful type.

### [2022-02-15T17:47:31+00:00](https://github.com/leanprover-community/mathlib/commit/5027b283fbc329ed4bdc8e0cb732ab93fc5bd601)
move(data/nat/choose/bounds): Move from `combinatorics.choose.bounds` ([#12051](https://github.com/leanprover-community/mathlib/pull/#12051))

This file fits better with all other files about `nat.choose`. My bad for originally proposing it goes alone under `combinatorics`.

### [2022-02-15T17:47:30+00:00](https://github.com/leanprover-community/mathlib/commit/52aaf17383caf3129abab9c090e0b7c6ffabc1ea)
feat(data/{list,multiset,finset}/nat_antidiagonal): add lemmas to remove elements from head and tail of antidiagonal ([#12028](https://github.com/leanprover-community/mathlib/pull/#12028))

Also lowered `finset.nat.map_swap_antidiagonal` down to `list` through `multiset`.

### [2022-02-15T15:53:29+00:00](https://github.com/leanprover-community/mathlib/commit/c0c673ab57c1cd3def72372082dbe19cc702b1c4)
feat(data/equiv,logic/embedding): add `can_lift` instances ([#12049](https://github.com/leanprover-community/mathlib/pull/#12049))

### [2022-02-15T15:52:59+00:00](https://github.com/leanprover-community/mathlib/commit/c686fcc118233a280b2ba74adc9057a87480eef4)
feat(analysis/specific_limits): add `tendsto_zero_smul_of_tendsto_zero_of_bounded` ([#12039](https://github.com/leanprover-community/mathlib/pull/#12039))

Co-authored-by: Patrick Massot <patrickmassot@free.fr>
Co-authored-by: Anatole Dedecker <anatolededecker@gmail.com>

### [2022-02-15T15:52:56+00:00](https://github.com/leanprover-community/mathlib/commit/6e64492df059cec3553ded357be31877bc39a42c)
feat(ring_theory/multiplicity): Equality of `factorization`, `multiplicity`, and `padic_val_nat` ([#12033](https://github.com/leanprover-community/mathlib/pull/#12033))

Proves `multiplicity_eq_factorization : multiplicity p n = n.factorization p` for prime `p` and `n ≠ 0` and uses this to golf the proof of `padic_val_nat_eq_factorization : padic_val_nat p n = n.factorization p`.

### [2022-02-15T15:52:53+00:00](https://github.com/leanprover-community/mathlib/commit/9307f5b439e0a1d37f87532c6350c9a8a7d02faa)
feat(topology/order/lattice): add a consequence of the continuity of sup/inf ([#12003](https://github.com/leanprover-community/mathlib/pull/#12003))

Prove this lemma and its `inf` counterpart:
```lean
lemma filter.tendsto.sup_right_nhds {ι β} [topological_space β] [has_sup β] [has_continuous_sup β]
  {l : filter ι} {f g : ι → β} {x y : β} (hf : tendsto f l (𝓝 x)) (hg : tendsto g l (𝓝 y)) :
  tendsto (f ⊔ g) l (𝓝 (x ⊔ y))
```
The name is `sup_right_nhds` because `sup` already exists, and is about a supremum over the filters on the left in the tendsto.

The proofs of `tendsto_prod_iff'` and `prod.tendsto_iff` were written by  Patrick Massot.



Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2022-02-15T15:52:52+00:00](https://github.com/leanprover-community/mathlib/commit/60b77a76a25a0d0ccb9f96c0f9e03e361dfaffc4)
feat(analysis/special_functions/complex/circle): `real.angle.exp_map_circle` lemmas ([#11969](https://github.com/leanprover-community/mathlib/pull/#11969))

Add four more `simp` lemmas about `real.angle.exp_map_circle`:
`exp_map_circle_zero`, `exp_map_circle_neg`, `exp_map_circle_add` and
`arg_exp_map_circle`.

### [2022-02-15T15:52:49+00:00](https://github.com/leanprover-community/mathlib/commit/0c33309c35b6b6ce6dac3d04fdcdb7c223062821)
feat(number_theory/zsqrtd/basic): add some lemmas ([#11964](https://github.com/leanprover-community/mathlib/pull/#11964))

### [2022-02-15T15:52:48+00:00](https://github.com/leanprover-community/mathlib/commit/3d1354ce8f26972464f2294c9d9eb95ea49f4546)
feat(set_theory/ordinal_arithmetic): Suprema of functions with the same range are equal ([#11910](https://github.com/leanprover-community/mathlib/pull/#11910))

### [2022-02-15T15:52:46+00:00](https://github.com/leanprover-community/mathlib/commit/721bace885c06c67b97304db64ac198edca7a9f0)
refactor(set_theory/ordinal_arithmetic): `omin` → `Inf` ([#11867](https://github.com/leanprover-community/mathlib/pull/#11867))

We remove the redundant `omin` in favor of `Inf`. We also introduce a `conditionally_complete_linear_order_bot` instance on `cardinals`, and golf a particularly messy proof.

### [2022-02-15T15:52:45+00:00](https://github.com/leanprover-community/mathlib/commit/9acc1d40cbe54b5a92ddca8113048911cb7834c4)
feat(model_theory/finitely_generated): Finitely generated and countably generated (sub)structures ([#11857](https://github.com/leanprover-community/mathlib/pull/#11857))

Defines `substructure.fg` and `Structure.fg` to indicate when (sub)structures are finitely generated
Defines `substructure.cg` and `Structure.cg` to indicate when (sub)structures are countably generated

### [2022-02-15T15:52:44+00:00](https://github.com/leanprover-community/mathlib/commit/41dd6d8a1db2072709140f3af2d0b1e0d1491459)
feat(data/nat/modeq): add modeq and dvd lemmas from Apostol Chapter 5 ([#11787](https://github.com/leanprover-community/mathlib/pull/#11787))

Various lemmas about `modeq` from Chapter 5 of Apostol (1976) Introduction to Analytic Number Theory:

* `mul_left_iff` and `mul_right_iff`: Apostol, Theorem 5.3
* `dvd_iff_of_modeq_of_dvd`: Apostol, Theorem 5.5
* `gcd_eq_of_modeq`: Apostol, Theorem 5.6
* `eq_of_modeq_of_abs_lt`: Apostol, Theorem 5.7
* `modeq_cancel_left_div_gcd`: Apostol, Theorem 5.4; plus other cancellation lemmas following from this.

### [2022-02-15T14:39:56+00:00](https://github.com/leanprover-community/mathlib/commit/b0508f3c8fc7d5ba7b2d4bb3309891a49a2740b8)
feat(topology/uniform/uniform_embedding): a sum of two complete spaces is complete ([#11971](https://github.com/leanprover-community/mathlib/pull/#11971))




Co-authored-by: Markus Himmel <markus@himmel-villmar.de>

### [2022-02-15T14:39:55+00:00](https://github.com/leanprover-community/mathlib/commit/77ca1ed347337ecbafa9d9f4a55e330e44e9f9f8)
feat(order/category/Lattice): The category of lattices ([#11968](https://github.com/leanprover-community/mathlib/pull/#11968))

Define `Lattice`, the category of lattices with lattice homs.

### [2022-02-15T12:59:13+00:00](https://github.com/leanprover-community/mathlib/commit/5bcffd96308b8578ca0e899cf2ccde4e5a339989)
feat(number_theory/cyclotomic/zeta): add lemmas ([#11786](https://github.com/leanprover-community/mathlib/pull/#11786))

Lemmas about the norm of `ζ - 1`.

From flt-regular.

- [x] depends on: [#11941](https://github.com/leanprover-community/mathlib/pull/#11941)



Co-authored-by: Eric <ericrboidi@gmail.com>
Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-02-15T12:59:12+00:00](https://github.com/leanprover-community/mathlib/commit/a2d7b55aa2f53d724792c2c1b55cb7e51104f4bf)
feat(order/complete_boolean_algebra): Frames ([#11709](https://github.com/leanprover-community/mathlib/pull/#11709))

Define the order theoretic `order.frame` and `order.coframe` and insert them between `complete_lattice` and `complete_distrib_lattice`.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-02-15T12:30:09+00:00](https://github.com/leanprover-community/mathlib/commit/440e6b3b609b444c50fc68db2752f6dd1c1ea0eb)
feat(topology/algebra/module/locally_convex): define locally convex spaces ([#11859](https://github.com/leanprover-community/mathlib/pull/#11859))

### [2022-02-15T11:12:39+00:00](https://github.com/leanprover-community/mathlib/commit/c5578f91be8d7f8b9296d3dca77b424aa28dbd73)
feat(group_theory/nilpotent): products of nilpotent groups ([#11827](https://github.com/leanprover-community/mathlib/pull/#11827))

### [2022-02-15T08:27:11+00:00](https://github.com/leanprover-community/mathlib/commit/f12b3d91df945d2f5accff9fd96639bdb61661f3)
feat(topology/algebra): weaken typeclasses to only require `has_continuous_const_smul` ([#11995](https://github.com/leanprover-community/mathlib/pull/#11995))

This changes all the continuity-based `const_smul` lemmas to only require `has_continuous_const_smul` rather than `has_continuous_smul`. It does not attempt to  propagate the changes out of this file.

Four new instances are added in `const_mul_action.lean` for `has_continuous_const_smul`: `mul_opposite`, `prod`, `pi`, and `units`; all copied from the corresponding `has_continuous_smul` instance in `mul_action.lean`.

Presumably these lemmas existed before this typeclass did.

At any rate, the connection was less obvious until the rename a few days ago in [#11940](https://github.com/leanprover-community/mathlib/pull/#11940).





Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-02-15T06:34:35+00:00](https://github.com/leanprover-community/mathlib/commit/f1334b95ed1ac9b3bda18bf6644255c6a63484d8)
chore(category_theory/triangulated/rotate): optimizing some proofs ([#12031](https://github.com/leanprover-community/mathlib/pull/#12031))

Removes some non-terminal `simp`s; replaces some `simp`s by `simp only [...]` and `rw`.

Compilation time dropped from 1m40s to 1m05s on my machine.

### [2022-02-15T05:21:51+00:00](https://github.com/leanprover-community/mathlib/commit/4c76eac9953114e72fbdbbffd084936cd721fea8)
chore(probability_theory/*): Rename folder  ([#11989](https://github.com/leanprover-community/mathlib/pull/#11989))

Rename `probability_theory` to `probability`.

### [2022-02-15T02:51:23+00:00](https://github.com/leanprover-community/mathlib/commit/430faa98e37e402b29d7af08c519ee73c9d0825c)
chore(scripts): update nolints.txt ([#12048](https://github.com/leanprover-community/mathlib/pull/#12048))

I am happy to remove some nolints for you!

### [2022-02-15T02:21:36+00:00](https://github.com/leanprover-community/mathlib/commit/a1283d0b5980b71144e3ff555edf2106c33aaf6b)
feat(analysis/inner_product_space/adjoint): `is_self_adjoint_iff_eq_a… ([#12047](https://github.com/leanprover-community/mathlib/pull/#12047))

…djoint`

A self-adjoint linear map is equal to its adjoint.

### [2022-02-15T01:27:49+00:00](https://github.com/leanprover-community/mathlib/commit/92ac8ff8914d53f9e8db37b55611e6897ff4342a)
feat(analysis/special_functions/complex/arg): `arg_coe_angle_eq_iff` ([#12017](https://github.com/leanprover-community/mathlib/pull/#12017))

Add a lemma that `arg` of two numbers coerced to `real.angle` is equal
if and only if `arg` is equal.

### [2022-02-14T23:41:27+00:00](https://github.com/leanprover-community/mathlib/commit/5dc720d1cc240335082a80d60f49eee8d2256b0e)
chore(number_theory/padics/padic_norm): golf `prod_pow_prime_padic_val_nat` ([#12034](https://github.com/leanprover-community/mathlib/pull/#12034))

A todo comment said "this proof can probably be golfed with `factorization` stuff"; it turns out that indeed it can be. :)



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2022-02-14T21:58:15+00:00](https://github.com/leanprover-community/mathlib/commit/f9bac45c705911cc376c7b37d64ab6c65393dc56)
chore(category_theory/linear/yoneda): Removing some slow uses of `obviously` ([#11979](https://github.com/leanprover-community/mathlib/pull/#11979))

Providing explicit proofs for `map_id'` and `map_comp'` rather than leaving them for `obviously` (and hence `tidy`) to fill in.
Suggested by Kevin Buzzard in [this Zulip comment](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60tidy.60.20in.20mathlib.20proofs/near/271474418).

Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>

(These are temporary changes until `obviously` can be tweaked to do this more quickly)

### [2022-02-14T21:58:14+00:00](https://github.com/leanprover-community/mathlib/commit/efdce09497f2895e62e8656f0a2cfb99520b3300)
refactor(topology/constructions): turn `cofinite_topology` into a type synonym ([#11967](https://github.com/leanprover-community/mathlib/pull/#11967))

Instead of `cofinite_topology α : topological_space α`, define
`cofinite_topology α := α` with an instance
`topological_space (cofinite_topology α) := (old definition)`.

This way we can talk about cofinite topology without using `@` all
over the place.

Also move `homeo_of_equiv_compact_to_t2.t1_counterexample` to
`topology.alexandroff` and prove it for `alexandroff ℕ` and
`cofinite_topology (alexandroff ℕ)`.

### [2022-02-14T21:58:13+00:00](https://github.com/leanprover-community/mathlib/commit/ec11e5f57b4602fd5db51c2aa63dbc3a4ac9e9a1)
feat(algebra/covariant_and_contravariant): covariance and monotonicity ([#11815](https://github.com/leanprover-community/mathlib/pull/#11815))

Some simple lemmas about monotonicity and covariant operators. Proves things like `monotone f → monotone (λ n, f (3 + n))` by library search.

### [2022-02-14T20:17:46+00:00](https://github.com/leanprover-community/mathlib/commit/4ba83349454f426a278bff5861a0a32764345778)
doc(number_theory/cyclotomic/gal): fix typo ([#12038](https://github.com/leanprover-community/mathlib/pull/#12038))

### [2022-02-14T20:17:44+00:00](https://github.com/leanprover-community/mathlib/commit/263833cfe6857bf51021c86b1290d34d28e79e5e)
feat(data/nat/factorization): add `le_of_mem_factorization` ([#12032](https://github.com/leanprover-community/mathlib/pull/#12032))

`le_of_mem_factors`: every factor of `n` is `≤ n`
`le_of_mem_factorization`: everything in `n.factorization.support` is `≤ n`

### [2022-02-14T20:17:42+00:00](https://github.com/leanprover-community/mathlib/commit/1a3c06969798a4830d0b6c01141201703da84cfb)
chore(data/equiv/set): more lemmas about prod ([#12022](https://github.com/leanprover-community/mathlib/pull/#12022))

Note we don't need the `symm` lemmas for `prod.comm`, since `prod.comm` is involutive

### [2022-02-14T18:40:35+00:00](https://github.com/leanprover-community/mathlib/commit/583ea58a1796a6ccb26cb59d07941ba81f03ffdd)
feat(data/list/big_operators): add `list.prod_map_mul` ([#12029](https://github.com/leanprover-community/mathlib/pull/#12029))

This is an analogue of the corresponding lemma `multiset.prod_map_mul`.

### [2022-02-14T14:46:55+00:00](https://github.com/leanprover-community/mathlib/commit/199e8ca8f03a76351168456183a9a25cd851b272)
feat(algebra/star/self_adjoint): generalize scalar action instances ([#12021](https://github.com/leanprover-community/mathlib/pull/#12021))

The `distrib_mul_action` instance did not require the underlying space to be a module.

### [2022-02-14T14:46:54+00:00](https://github.com/leanprover-community/mathlib/commit/5166aaabfbcf9fae884d4a105040d95f520b3ed8)
feat(analysis/normed_space/linear_isometry): `trans_one`, `one_trans`, `refl_mul`, `mul_refl` ([#12016](https://github.com/leanprover-community/mathlib/pull/#12016))

Add variants of the `linear_isometry_equiv.trans_refl` and
`linear_isometry_equiv.refl_trans` `simp` lemmas where `refl` is given
as `1`.  (`one_def` isn't a `simp` lemma in either direction, since
either `refl` or `1` could be the appropriate simplest form depending
on the context, but it seems clear these expressions involving `trans`
with `1` are still appropriate to simplify.)

Also add corresponding `refl_mul` and `mul_refl`.

### [2022-02-14T12:13:11+00:00](https://github.com/leanprover-community/mathlib/commit/d33792e62e12792af260cd2100ed0b1fae176888)
feat(data/nat/factorization): add lemma `factorization_gcd` ([#11605](https://github.com/leanprover-community/mathlib/pull/#11605))

For positive `a` and `b`, `(gcd a b).factorization = a.factorization ⊓ b.factorization`; i.e. the power of prime `p` in `gcd a b` is the minimum of its powers in `a` and `b`.  This is Theorem 1.12 in Apostol (1976) Introduction to Analytic Number Theory.

### [2022-02-14T10:22:27+00:00](https://github.com/leanprover-community/mathlib/commit/132ea0510de53cc05a05d582476cfff8d06d27ff)
docs(computability/partrec_code): add docs ([#11929](https://github.com/leanprover-community/mathlib/pull/#11929))

### [2022-02-14T10:22:26+00:00](https://github.com/leanprover-community/mathlib/commit/dce5dd4c1211ff311c3b1595848ae9adb36a2169)
feat(order/well_founded, set_theory/ordinal_arithmetic): `eq_strict_mono_iff_eq_range` ([#11882](https://github.com/leanprover-community/mathlib/pull/#11882))

Two strict monotonic functions with well-founded domains are equal iff their ranges are. We use this to golf `eq_enum_ord`.

### [2022-02-14T08:41:45+00:00](https://github.com/leanprover-community/mathlib/commit/a87d431bdc183596c09e805e1ad76bf015df83e5)
feat(topology/algebra): add `@[to_additive]` to some lemmas ([#12018](https://github.com/leanprover-community/mathlib/pull/#12018))

* rename `embed_product` to `units.embed_product`, add `add_units.embed_product`;
* add additive versions to lemmas about topology on `units M`;
* add `add_opposite.topological_space` and `add_opposite.has_continuous_add`;
* move `continuous_op` and `continuous_unop` to the `mul_opposite` namespace, add additive versions.

### [2022-02-14T08:04:35+00:00](https://github.com/leanprover-community/mathlib/commit/2ceacc1a0cc785d35225405d90c2a4ff35e8db4f)
feat(measure_theory/measure): more lemmas about `null_measurable_set`s ([#12019](https://github.com/leanprover-community/mathlib/pull/#12019))

### [2022-02-14T07:20:08+00:00](https://github.com/leanprover-community/mathlib/commit/25ebf4197ec2ff1fd7ec4b27d818dc34dcac5865)
chore(analysis): move some code ([#12008](https://github.com/leanprover-community/mathlib/pull/#12008))

Move the code that doesn't rely on `normed_space` from
`analysis.normed_space.add_torsor` to
`analysis.normed.group.add_torsor`.

### [2022-02-14T06:18:50+00:00](https://github.com/leanprover-community/mathlib/commit/26fd61c5ba014ee8fcd46f428dca794d1b7d2e37)
feat(analysis/complex/isometry): `rotation_trans` ([#12015](https://github.com/leanprover-community/mathlib/pull/#12015))

Add a `simp` lemma about the composition of two rotations.

### [2022-02-14T06:18:49+00:00](https://github.com/leanprover-community/mathlib/commit/77dfac2eede8c10deb048cca9c3a2e25378bbf61)
feat(order/filter/bases): basis of infimum of filters ([#11855](https://github.com/leanprover-community/mathlib/pull/#11855))

### [2022-02-14T04:42:39+00:00](https://github.com/leanprover-community/mathlib/commit/6550cbac800de77653c5b6cd08b2b47a7aba6c38)
feat(order/partition/finpartition): Finite partitions ([#9795](https://github.com/leanprover-community/mathlib/pull/#9795))

This defines finite partitions along with quite a few constructions,

Co-authored-by: Bhavik Mehta <bhavikmehta8@gmail.com> 



Co-authored-by: Bhavik Mehta <bhavikmehta8@gmail.com>

### [2022-02-13T20:36:13+00:00](https://github.com/leanprover-community/mathlib/commit/f91a32d1d70112ac316b0d8fce33e6fb36ca26ad)
feat(data/nat/factorization): add lemma `prod_prime_factors_dvd` ([#11572](https://github.com/leanprover-community/mathlib/pull/#11572))

For all `n : ℕ`, the product of the set of prime factors of `n` divides `n`, 
i.e. `(∏ (p : ℕ) in n.factors.to_finset, p) ∣ n`

### [2022-02-13T17:37:37+00:00](https://github.com/leanprover-community/mathlib/commit/b08dc174cff77ddd9295a35dcdaf2044c147ef40)
chore(number_theory/dioph): fix docs ([#12011](https://github.com/leanprover-community/mathlib/pull/#12011))

### [2022-02-12T22:55:33+00:00](https://github.com/leanprover-community/mathlib/commit/af1355c45e452f15644e0f0f7c5010c7f47b7ff2)
chore(measure_theory/integral/lebesgue): use to_additive when declaring instances and basic lemmas about simple functions ([#12000](https://github.com/leanprover-community/mathlib/pull/#12000))

I also grouped similar lemmas together and added one or two missing ones.

### [2022-02-12T21:57:51+00:00](https://github.com/leanprover-community/mathlib/commit/4b217ea74bc9c3012ba57d7b4e48351cf2441207)
chore(topology/algebra): rename file to match renamed lemmas ([#11996](https://github.com/leanprover-community/mathlib/pull/#11996))

[#11940](https://github.com/leanprover-community/mathlib/pull/#11940) renamed the lemmas from `continuous_smul₂` to `continuous_const_smul`, so this renames the file from `mul_action2` to `const_mul_action` accordingly.

### [2022-02-12T19:33:32+00:00](https://github.com/leanprover-community/mathlib/commit/4a4a3a90a45f8149af9e9990e77d780f967b7077)
chore(data/finset/basic): Golf and compress ([#11987](https://github.com/leanprover-community/mathlib/pull/#11987))

* Move the `lattice` instance earlier so that it can be used to prove lemmas
* Golf proofs
* Compress statements within the style guidelines

### [2022-02-12T18:45:31+00:00](https://github.com/leanprover-community/mathlib/commit/5f70cd95e9797d171453652c4c1b913951deae26)
chore(measure_theory/function/ae_eq_fun): replace topological assumptions by measurability assumptions ([#11981](https://github.com/leanprover-community/mathlib/pull/#11981))

Since the introduction of the `has_measurable_*` typeclasses, the topological assumptions in that file are only used to derive the measurability assumptions. This PR removes that step.



Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2022-02-12T17:23:47+00:00](https://github.com/leanprover-community/mathlib/commit/b72300f3455ae73c3ab9ed40fc1f80bbb9c85ba4)
feat(group_theory/sylow): all max groups normal imply sylow normal ([#11841](https://github.com/leanprover-community/mathlib/pull/#11841))



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-02-12T16:17:52+00:00](https://github.com/leanprover-community/mathlib/commit/06e7f7679704473c0b9ed94ed07354f0dabbf57b)
feat(analysis/analytic/basic): add uniqueness results for power series ([#11896](https://github.com/leanprover-community/mathlib/pull/#11896))

This establishes that if a function has two power series representations on balls of positive radius, then the corresponding formal multilinear series are equal; this is only for the one-dimensional case (i.e., for functions from the scalar field). Consequently, one may exchange the radius of convergence between these power series.

### [2022-02-12T09:20:49+00:00](https://github.com/leanprover-community/mathlib/commit/91cc4ae6b842a99b44843b1dc4d45c766cc41d19)
feat(order/category/BoundedOrder): The category of bounded orders ([#11961](https://github.com/leanprover-community/mathlib/pull/#11961))

Define `BoundedOrder`, the category of bounded orders with bounded order homs along with its forgetful functors to `PartialOrder` and `Bipointed`.

### [2022-02-12T08:07:28+00:00](https://github.com/leanprover-community/mathlib/commit/1b5f8c2882886c4eb304a22dae6db13ba49ecba8)
chore(topology/algebra/ordered/*): Rename folder ([#11988](https://github.com/leanprover-community/mathlib/pull/#11988))

Rename `topology.algebra.ordered` to `topology.algebra.order` to match `order`, `algebra.order`, `topology.order`.

### [2022-02-12T08:07:27+00:00](https://github.com/leanprover-community/mathlib/commit/7bebee66e2eae99ad515dd944cb9862b28603768)
chore(category_theory/monad/equiv_mon): Removing some slow uses of `obviously` ([#11980](https://github.com/leanprover-community/mathlib/pull/#11980))

Providing explicit proofs for various fields rather than leaving them for `obviously` (and hence `tidy`) to fill in.
Follow-up to this suggestion by Kevin Buzzard in [this Zulip comment](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60tidy.60.20in.20mathlib.20proofs/near/271474418).

(These are temporary changes until `obviously` can be tweaked to do this more quickly)

### [2022-02-12T08:07:25+00:00](https://github.com/leanprover-community/mathlib/commit/71e90063a0530c0fd1d9dc23acec037fb90ae75f)
chore(topology/algebra/module/multilinear): relax typeclass arguments ([#11972](https://github.com/leanprover-community/mathlib/pull/#11972))

Previously `module R' (continuous_multilinear_map A M₁ M₂)` required `algebra R' A`, but now it only requires `smul_comm_class A R' M₂`.

The old instance required (modulo argument reordering):
```lean
def continuous_multilinear_map.module {ι : Type v} {M₁ : ι → Type w₁} {M₂ : Type w₂} [decidable_eq ι]
  [Π i, add_comm_monoid (M₁ i)] [add_comm_monoid M₂] [Π i, topological_space (M₁ i)]
  [topological_space M₂] [has_continuous_add M₂] 
  {R' : Type u_1} {A : Type u_2} [comm_semiring R'] [semiring A] [topological_space R']
  [Π i, module A (M₁ i)]  [module A M₂] [module R' M₂] [has_continuous_smul R' M₂]
  [algebra R' A] [is_scalar_tower R' A M₂] :
    module R' (continuous_multilinear_map A M₁ M₂)
```
while the new one requires
```lean
def continuous_multilinear_map.module {ι : Type v} {M₁ : ι → Type w₁} {M₂ : Type w₂} [decidable_eq ι]
  [Π i, add_comm_monoid (M₁ i)] [add_comm_monoid M₂] [Π i, topological_space (M₁ i)]
  [topological_space M₂] [has_continuous_add M₂]
  {R' : Type u_1} {A : Type u_2} [semiring R'] [semiring A] [topological_space R']  -- note: `R'` not commutative any more
  [Π i, module A (M₁ i)] [module A M₂] [module R' M₂] [has_continuous_smul R' M₂]
  [smul_comm_class A R' M₂] :  -- note: `R'` needs no action at all on `A`
    module R' (continuous_multilinear_map A M₁ M₂)
```

This change also adds intermediate `mul_action` and `distrib_mul_action` instances which apply in weaker situations.

As a result of this weakening, the typeclass arguments to `continuous_multilinear_map.to_normed_space` can also be weakened, and a weird instance workaround can be removed.

### [2022-02-12T08:07:23+00:00](https://github.com/leanprover-community/mathlib/commit/822244f7f7ea4596700632bcb08e79b6dcb52369)
refactor(measure_theory/group/basic): rename and split ([#11952](https://github.com/leanprover-community/mathlib/pull/#11952))

* Rename `measure_theory/group/basic` -> `measure_theory/group/measure`. It was not the bottom file in this folder in the import hierarchy (arithmetic is below it).
* Split off some results to `measure_theory/group/integration`. This reduces imports in some files, and makes the organization more clear. Furthermore, I will add some integrability results and more integrals in a follow-up PR.
* Prove a general instance `pi.is_mul_left_invariant`
* Remove lemmas specifically about `volume` on `real` in favor on the general lemmas.
```lean
real.map_volume_add_left -> map_add_left_eq_self
real.map_volume_pi_add_left -> map_add_left_eq_self
real.volume_preimage_add_left -> measure_preimage_add
real.volume_pi_preimage_add_left -> measure_preimage_add
real.map_volume_add_right -> map_add_right_eq_self 
real.volume_preimage_add_right -> measure_preimage_add_right
```

### [2022-02-12T07:11:55+00:00](https://github.com/leanprover-community/mathlib/commit/60d323376c6ae74562ff9b99abb2abae66efaab0)
feat(topology/instances/real): metric space structure on nat ([#11963](https://github.com/leanprover-community/mathlib/pull/#11963))

Mostly copied from the already existing int version.

### [2022-02-12T02:46:24+00:00](https://github.com/leanprover-community/mathlib/commit/dff8393cf1d1fc152d148e13fe57452fc37d4852)
feat(tactic/lint): add unprintable tactic linter ([#11725](https://github.com/leanprover-community/mathlib/pull/#11725))

This linter will banish the recurring issue of tactics for which `param_desc` fails, leaving a nasty error message in hovers.

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2022-02-12T00:03:02+00:00](https://github.com/leanprover-community/mathlib/commit/227293b543e79dd0f794d1c77cab8fdc3ba378d5)
feat(category_theory/category/Twop): The category of two-pointed types ([#11844](https://github.com/leanprover-community/mathlib/pull/#11844))

Define `Twop`, the category of two-pointed types. Also add `Pointed_to_Bipointed` and remove the erroneous TODOs.

### [2022-02-11T21:25:20+00:00](https://github.com/leanprover-community/mathlib/commit/788240cf869ff1a2277c974603eda5f95e215bca)
chore(order/cover): Rename `covers` to `covby` ([#11984](https://github.com/leanprover-community/mathlib/pull/#11984))

This matches the way it is written. `a ⋖ b` means that `b` covers `a`, that is `a` is covered by `b`.

### [2022-02-11T19:49:06+00:00](https://github.com/leanprover-community/mathlib/commit/3fcb7380afe9e95bd70e1a89d2a842069b7755d2)
doc(data/finset/basic): correct some function names ([#11983](https://github.com/leanprover-community/mathlib/pull/#11983))

### [2022-02-11T19:49:04+00:00](https://github.com/leanprover-community/mathlib/commit/515ce7974dc2cfd1a355510172b1e825c60e6ad5)
refactor(data/nat/factorization): Use factorization instead of factors.count ([#11384](https://github.com/leanprover-community/mathlib/pull/#11384))

Refactor to use `factorization` over `factors.count`, and adjust lemmas to be stated in terms of the former instead.



Co-authored-by: Eric <ericrboidi@gmail.com>
Co-authored-by: Eric Rodriguez <ericrboidi@gmail.com>
Co-authored-by: Stuart Presnell <stuart.presnell@gmail.com>

### [2022-02-11T18:25:43+00:00](https://github.com/leanprover-community/mathlib/commit/da76d218e03ee4810a9856225dd29d10f0a5d96a)
feat(measure_theory/measure/haar_quotient): Pushforward of Haar measure is Haar ([#11593](https://github.com/leanprover-community/mathlib/pull/#11593))

For `G` a topological group with discrete subgroup `Γ`, the pushforward to the coset space `G ⧸ Γ` of the restriction of a both left- and right-invariant measure on `G` to a fundamental domain `𝓕` is a `G`-invariant measure on `G ⧸ Γ`. When `Γ` is normal (and under other certain suitable conditions), we show that this measure is the Haar measure on the quotient group `G ⧸ Γ`.

Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>



Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored-by: Eric <ericrboidi@gmail.com>

### [2022-02-11T15:45:40+00:00](https://github.com/leanprover-community/mathlib/commit/edefc1168cdda8e7e552b840ec923a607b3da261)
feat(number_theory/number_field/basic) : the ring of integers of a number field is not a field  ([#11956](https://github.com/leanprover-community/mathlib/pull/#11956))

### [2022-02-11T13:10:47+00:00](https://github.com/leanprover-community/mathlib/commit/1b78b4d178e8c2f3e2401f4ce41f6b4e454587be)
feat(measure_theory/function/ae_eq_of_integral): remove a few unnecessary `@` ([#11974](https://github.com/leanprover-community/mathlib/pull/#11974))

Those `@` were necessary at the time, but `measurable_set.inter` changed and they can now be removed.

### [2022-02-11T13:10:46+00:00](https://github.com/leanprover-community/mathlib/commit/114752ca9f9c8fd0374dee9a178119407ce7a2c0)
fix(algebra/monoid_algebra/basic): remove an instance that forms a diamond ([#11918](https://github.com/leanprover-community/mathlib/pull/#11918))

This turns `monoid_algebra.comap_distrib_mul_action_self` from an instance to a def.

This also adds some tests to prove that this diamond exists.
Note that this diamond is not just non-defeq, it's also just plain not equal.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schur's.20lemma/near/270990004)

### [2022-02-11T11:23:57+00:00](https://github.com/leanprover-community/mathlib/commit/492393b0e55e3b7ce0be511344b575183e668c41)
feat(model_theory/direct_limit): Direct limits of first-order structures ([#11789](https://github.com/leanprover-community/mathlib/pull/#11789))

Constructs the direct limit of a directed system of first-order embeddings

### [2022-02-11T07:37:33+00:00](https://github.com/leanprover-community/mathlib/commit/024aef0bfd346863ad81efae4426c2ed161c8d69)
feat(data/pi): provide `pi.mul_single` ([#11849](https://github.com/leanprover-community/mathlib/pull/#11849))

the additive version was previously called `pi.single`, to this requires refactoring existing code.



Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2022-02-11T03:15:15+00:00](https://github.com/leanprover-community/mathlib/commit/8c60a9270b26c63b1492845d39cd8258418fa64a)
fix(ring_theory/algebraic): prove a diamond exists and remove the instances ([#11935](https://github.com/leanprover-community/mathlib/pull/#11935))

It seems nothing used these instances anyway.

### [2022-02-11T01:36:55+00:00](https://github.com/leanprover-community/mathlib/commit/fbfdff7ed58dc35d0f2eefd3a8cd30a7eba704de)
chore(data/real/ennreal, topology/instances/ennreal): change name of the order isomorphism for `inv` ([#11959](https://github.com/leanprover-community/mathlib/pull/#11959))

On [Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming.20defs/near/271228611) it was decided that the name should be changed from `ennreal.inv_order_iso` to `order_iso.inv_ennreal` in order to better accord with the rest of the library.

### [2022-02-11T01:36:54+00:00](https://github.com/leanprover-community/mathlib/commit/ae14f6ad8c6f096b695296a4f8f4f7bcc72a8e5f)
chore(algebra/star): generalize star_bit0, add star_inv_of ([#11951](https://github.com/leanprover-community/mathlib/pull/#11951))

### [2022-02-11T01:36:53+00:00](https://github.com/leanprover-community/mathlib/commit/0227820c7b1834c476f48bd5c39737869288ed9f)
feat(topology/algebra/group): added (right/left)_coset_(open/closed) ([#11876](https://github.com/leanprover-community/mathlib/pull/#11876))

Added lemmas saying that, in a topological group, cosets of an open (resp. closed) set are open (resp. closed).

### [2022-02-11T01:36:52+00:00](https://github.com/leanprover-community/mathlib/commit/73513580b970e93e06ab76e6f7ce16315ffdd30b)
refactor(order/well_founded, set_theory/ordinal_arithmetic): Fix namespace in `self_le_of_strict_mono` ([#11871](https://github.com/leanprover-community/mathlib/pull/#11871))

This places `self_le_of_strict_mono` in the `well_founded` namespace. We also rename `is_normal.le_self` to `is_normal.self_le` .

### [2022-02-10T23:42:58+00:00](https://github.com/leanprover-community/mathlib/commit/4a5728fe0d7987c5bf39204b7e82d8f2e12e6ece)
chore(number_theory/cyclotomic/zeta): generalize to primitive roots ([#11941](https://github.com/leanprover-community/mathlib/pull/#11941))

This was done as `(zeta p ℤ ℤ[ζₚ] : ℚ(ζₚ)) = zeta p ℚ ℚ(ζₚ)` is independent of Lean's type theory. Allows far more flexibility with results.



Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-02-10T23:42:56+00:00](https://github.com/leanprover-community/mathlib/commit/d487230dcca774dc9744038122f25f5566d806a7)
feat(algebra/big_operators): add prod_multiset_count_of_subset ([#11919](https://github.com/leanprover-community/mathlib/pull/#11919))

Inspired by [#4259](https://github.com/leanprover-community/mathlib/pull/#4259).

Co-Authored-By: Bhavik Mehta <bhavikmehta8@gmail.com>

### [2022-02-10T20:44:00+00:00](https://github.com/leanprover-community/mathlib/commit/fb41da97816e716c002c723f7f08e103874d9f50)
feat(algebra/module/basic): turn implications into iffs ([#11937](https://github.com/leanprover-community/mathlib/pull/#11937))

* Turn the following implications into `iff`, rename them accordingly, and make the type arguments explicit (`M` has to be explicit when using it in `rw`, otherwise one will have unsolved type-class arguments)
```
eq_zero_of_two_nsmul_eq_zero -> two_nsmul_eq_zero
eq_zero_of_eq_neg -> self_eq_neg
ne_neg_of_ne_zero -> self_ne_neg
```
* Also add two variants
* Generalize `ne_neg_iff_ne_zero` to work in modules over a ring

### [2022-02-10T20:43:58+00:00](https://github.com/leanprover-community/mathlib/commit/092938747c173e5c6e165402296e578932848bd2)
feat(group_theory/group_action/defs): add ext attributes ([#11936](https://github.com/leanprover-community/mathlib/pull/#11936))

This adds `ext` attributes to `has_scalar`, `mul_action`, `distrib_mul_action`, `mul_distrib_mul_action`, and `module`.

The `ext` and `ext_iff` lemmas were eventually generated by `category_theory/preadditive/schur.lean` anyway - we may as well generate them much earlier.

The generated lemmas are slightly uglier than the `module_ext` we already have, but it doesn't really seem worth the trouble of writing out the "nice" versions when the `ext` tactic cleans up the mess for us anyway.

### [2022-02-10T20:43:57+00:00](https://github.com/leanprover-community/mathlib/commit/007d6602fef10ac436ecafca9eae6aa214c932ff)
feat(analysis/inner_product_space/pi_L2): `map_isometry_euclidean_of_orthonormal` ([#11907](https://github.com/leanprover-community/mathlib/pull/#11907))

Add a lemma giving the result of `isometry_euclidean_of_orthonormal`
when applied to an orthonormal basis obtained from another orthonormal
basis with `basis.map`.

### [2022-02-10T20:43:56+00:00](https://github.com/leanprover-community/mathlib/commit/923923f138d5c3b354801fe68e2bd2f6de929e96)
feat(analysis/special_functions/complex/arg): `arg_mul`, `arg_div` lemmas ([#11903](https://github.com/leanprover-community/mathlib/pull/#11903))

Add lemmas about `(arg (x * y) : real.angle)` and `(arg (x / y) : real.angle)`,
along with preparatory lemmas that are like those such as
`arg_mul_cos_add_sin_mul_I` but either don't require the real argument
to be in `Ioc (-π) π` or that take a `real.angle` argument.

I didn't add any lemmas about `arg (x * y)` or `arg (x / y)` as a
real; if such lemmas prove useful in future, it might make sense to
deduce them from the `real.angle` versions.

### [2022-02-10T20:43:55+00:00](https://github.com/leanprover-community/mathlib/commit/1141703e946477c81ee590a0254811c43a1e8ede)
feat(group_theory/group_action/sub_mul_action): orbit and stabilizer lemmas ([#11899](https://github.com/leanprover-community/mathlib/pull/#11899))

Feat: add lemmas for stabilizer and orbit for sub_mul_action



Co-authored-by: Antoine Chambert-Loir <antoine.chambert-loir@math.univ-paris-diderot.fr>

### [2022-02-10T18:46:21+00:00](https://github.com/leanprover-community/mathlib/commit/de707225a4d18e8f10e2630fee759e9c63a2e2aa)
chore(algebra/punit_instances): all actions on punit are central ([#11953](https://github.com/leanprover-community/mathlib/pull/#11953))

### [2022-02-10T18:46:20+00:00](https://github.com/leanprover-community/mathlib/commit/779d8363895d96ae1f43bfb9fc78b7804843c6ab)
feat(category_theory): variants of Yoneda are fully faithful ([#11950](https://github.com/leanprover-community/mathlib/pull/#11950))

### [2022-02-10T18:46:19+00:00](https://github.com/leanprover-community/mathlib/commit/80124455637432715cfb359604d58e0ef0d0c69f)
feat(group_theory/subgroup/basic): `subgroup.map_le_map_iff_of_injective` ([#11947](https://github.com/leanprover-community/mathlib/pull/#11947))

If `f` is injective, then `H.map f ≤ K.map f ↔ H ≤ K`.

### [2022-02-10T18:46:18+00:00](https://github.com/leanprover-community/mathlib/commit/c28dc84ab8177ad9cdc91ae6f216632c8cacf7ac)
feat(topology/subset_properties): more facts about compact sets ([#11939](https://github.com/leanprover-community/mathlib/pull/#11939))


* add `tendsto.is_compact_insert_range_of_cocompact`, `tendsto.is_compact_insert_range_of_cofinite`, and `tendsto.is_compact_insert_range`;
* reuse the former in `alexandroff.compact_space`;
* rename `finite_of_is_compact_of_discrete` to `is_compact.finite_of_discrete`, add `is_compact_iff_finite`;
* add `cocompact_le_cofinite`, `cocompact_eq_cofinite`;
* add `int.cofinite_eq`, add `@[simp]` to `nat.cofinite_eq`;
* add `set.insert_none_range_some`;
* move `is_compact.image_of_continuous_on` and `is_compact_image` up;

### [2022-02-10T17:14:10+00:00](https://github.com/leanprover-community/mathlib/commit/45ab382cbf72041ef8d30ea40aee707a6426c3da)
chore(field_theory/galois): make `intermediate_field.fixing_subgroup_equiv` computable ([#11938](https://github.com/leanprover-community/mathlib/pull/#11938))

This also golfs and generalizes some results to reuse infrastructure from elsewhere.

In particular, this generalizes:

* `intermediate_field.fixed_field` to `fixed_points.intermediate_field`, where the latter matches the API of `fixed_points.subfield`
* `intermediate_field.fixing_subgroup` to `fixing_subgroup` and `fixing_submonoid`

This removes `open_locale classical` in favor of ensuring the lemmas take in the necessary decidable / fintype arguments.

### [2022-02-10T13:11:46+00:00](https://github.com/leanprover-community/mathlib/commit/a86277a2d64d51b5d46874b4fd453c1392350b0c)
feat(category_theory/limits): epi equalizer implies equal ([#11873](https://github.com/leanprover-community/mathlib/pull/#11873))

### [2022-02-10T13:11:45+00:00](https://github.com/leanprover-community/mathlib/commit/20ef9097198a78a6a8d27a4b2d23545d1b68c66e)
feat(data/part): add instances ([#11868](https://github.com/leanprover-community/mathlib/pull/#11868))


Add common instances for `part \alpha` to be inherited from `\alpha`. Spun off of [#11046](https://github.com/leanprover-community/mathlib/pull/#11046)



Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-02-10T13:11:42+00:00](https://github.com/leanprover-community/mathlib/commit/3b9dc08207c9291a96124d0250fa1a7e566dfc8b)
feat(analysis/complex): add the Cauchy-Goursat theorem for an annulus ([#11864](https://github.com/leanprover-community/mathlib/pull/#11864))

### [2022-02-10T13:11:41+00:00](https://github.com/leanprover-community/mathlib/commit/efa31576069e238a75ecb4951bc9dda09caa0a74)
feat(order/conditionally_complete_lattice): `cInf_le` variant without redundant assumption ([#11863](https://github.com/leanprover-community/mathlib/pull/#11863))

We prove `cInf_le'` on a `conditionally_complete_linear_order_bot`. We no longer need the boundedness assumption.

### [2022-02-10T13:11:40+00:00](https://github.com/leanprover-community/mathlib/commit/66d9cc1c423b2cd26da6925b350536045ecd2127)
feat(number_theory/cyclotomic/gal): the Galois group of K(ζₙ) ([#11808](https://github.com/leanprover-community/mathlib/pull/#11808))

from flt-regular!

### [2022-02-10T13:11:39+00:00](https://github.com/leanprover-community/mathlib/commit/1373d5481c27ef377ad0a6d4e317dd016e1530eb)
feat(group_theory/nilpotent): add nilpotent implies normalizer condition ([#11586](https://github.com/leanprover-community/mathlib/pull/#11586))

### [2022-02-10T13:11:37+00:00](https://github.com/leanprover-community/mathlib/commit/c3f6fce782db7ac63a71e7abe17c9e09ed575346)
feat(algebra/group_power/basic): add lemmas about pow and neg on units ([#11447](https://github.com/leanprover-community/mathlib/pull/#11447))

In future we might want to add a typeclass for monoids with a well-behaved negation operator to avoid needing to repeat these lemmas. Such a typeclass would also apply to the `unitary` submonoid too.

### [2022-02-10T13:11:36+00:00](https://github.com/leanprover-community/mathlib/commit/c3d878242ffc4ccdeea64d9c2cad78662fd32a9a)
feat(category_theory/bicategory/functor_bicategory): bicategory structure on oplax functors ([#11405](https://github.com/leanprover-community/mathlib/pull/#11405))

This PR defines a bicategory structure on the oplax functors between bicategories.

### [2022-02-10T10:46:35+00:00](https://github.com/leanprover-community/mathlib/commit/da164c6b72b4cf9e9f7d059dd6ec6dca9bbf2ddf)
feat (category_theory/karoubi_karoubi) : idempotence of karoubi ([#11931](https://github.com/leanprover-community/mathlib/pull/#11931))

In this file, we construct the equivalence of categories
`karoubi_karoubi.equivalence C : karoubi C ≌ karoubi (karoubi C)` for any category `C`.



Co-authored-by: Joël Riou <37772949+joelriou@users.noreply.github.com>

### [2022-02-10T10:46:34+00:00](https://github.com/leanprover-community/mathlib/commit/04909776d167307fc6c3d7e47b7b3c82db1ee013)
feat(algebra/lie/engel): add proof of Engel's theorem ([#11922](https://github.com/leanprover-community/mathlib/pull/#11922))

### [2022-02-10T10:46:32+00:00](https://github.com/leanprover-community/mathlib/commit/f32fda7ce912e01c5fc285c23533d18d59629b57)
feat(set_theory/ordinal_arithmetic): More `lsub` and `blsub` lemmas ([#11848](https://github.com/leanprover-community/mathlib/pull/#11848))

We prove variants of `sup_typein`, which serve as analogs for `blsub_id`. We also prove `sup_eq_lsub_or_sup_succ_eq_lsub`, which combines `sup_le_lsub` and `lsub_le_sup_succ`.

### [2022-02-10T10:46:31+00:00](https://github.com/leanprover-community/mathlib/commit/b7360f94ebd5156ee54b4f79aa872602414e5b52)
feat(group_theory/general_commutator): subgroup.prod commutes with the general_commutator ([#11818](https://github.com/leanprover-community/mathlib/pull/#11818))

### [2022-02-10T10:46:28+00:00](https://github.com/leanprover-community/mathlib/commit/6afaf36d0ca6ad26cfcb5effd8963c508afb8bc2)
feat(algebra/order/hom/ring): Ordered semiring/ring homomorphisms ([#11634](https://github.com/leanprover-community/mathlib/pull/#11634))

Define `order_ring_hom` with notation `→+*o` along with its hom class.

### [2022-02-10T09:27:23+00:00](https://github.com/leanprover-community/mathlib/commit/8f5fd269a2d293ef5317e80cce2484f2248eb734)
feat(data/nat/factorization): bijection between positive nats and finsupps over primes ([#11440](https://github.com/leanprover-community/mathlib/pull/#11440))

Proof that for any finsupp `f : ℕ →₀ ℕ` whose support is in the primes, `f = (f.prod pow).factorization`, and hence that the positive natural numbers are bijective with finsupps `ℕ →₀ ℕ` with support in the primes.

### [2022-02-10T09:27:22+00:00](https://github.com/leanprover-community/mathlib/commit/0aa0bc8fe697f662fe30a6dc0c9d2291dee5be45)
feat(set_theory/ordinal_arithmetic): The derivative of addition ([#11270](https://github.com/leanprover-community/mathlib/pull/#11270))

We prove that the derivative of `(+) a` evaluated at `b` is given by `a * ω + b`.

### [2022-02-10T08:34:06+00:00](https://github.com/leanprover-community/mathlib/commit/e60ca6b4605f3e13e46f7c3466e164451979e338)
feat(data/real/ennreal): `inv` is an `order_iso` to the order dual and lemmas for `supr, infi` ([#11869](https://github.com/leanprover-community/mathlib/pull/#11869))

Establishes that `inv` is an order isomorphism to the order dual. We then provide some convenience lemmas which guarantee that `inv` switches `supr` and `infi` and hence also switches `limsup` and `liminf`.

### [2022-02-10T08:34:05+00:00](https://github.com/leanprover-community/mathlib/commit/b7e72ea4ea3af8edea8204496c3ea53164b9b7f9)
feat(measure_theory/probability_mass_function): Measure calculations for additional pmf constructions ([#11858](https://github.com/leanprover-community/mathlib/pull/#11858))

This PR adds calculations of the measures of sets under various `pmf` constructions.

### [2022-02-10T08:04:04+00:00](https://github.com/leanprover-community/mathlib/commit/e9a18930f6c649434fa51913deecc9fb68a83a0e)
chore(tactic/default): import `linear_combination` ([#11942](https://github.com/leanprover-community/mathlib/pull/#11942))

### [2022-02-10T03:40:32+00:00](https://github.com/leanprover-community/mathlib/commit/ea0e4589dc1fcdf8b2312af10a074088be44655e)
refactor(topology/algebra/mul_action2): rename type classes ([#11940](https://github.com/leanprover-community/mathlib/pull/#11940))

Rename `has_continuous_smul₂` and `has_continuous_vadd₂` to
`has_continuous_const_smul` and `has_continuous_const_vadd`,
respectively.

### [2022-02-09T23:10:35+00:00](https://github.com/leanprover-community/mathlib/commit/4e8d8faaf9603b4a136921053db5046c60ef186e)
feat(order/hom/bounded): Bounded order homomorphisms ([#11806](https://github.com/leanprover-community/mathlib/pull/#11806))

Define `bounded_order_hom` in `order.hom.bounded` and move `top_hom`, `bot_hom` there.

### [2022-02-09T21:35:24+00:00](https://github.com/leanprover-community/mathlib/commit/46911598ad7725ec6b47c808a109a31e3bef0378)
doc(algebra/group/hom_instances): Fix spellings ([#11943](https://github.com/leanprover-community/mathlib/pull/#11943))

Fixes spelling mistakes introduced by [#11843](https://github.com/leanprover-community/mathlib/pull/#11843)

### [2022-02-09T20:38:41+00:00](https://github.com/leanprover-community/mathlib/commit/352e06424adc5b5de32cff69c12e3acddfc192c1)
feat(topology/uniform_space/cauchy): add a few lemmas ([#11912](https://github.com/leanprover-community/mathlib/pull/#11912))

### [2022-02-09T18:57:12+00:00](https://github.com/leanprover-community/mathlib/commit/2b9aca75e6c1a1dc6b5b1b80734b05b3e07d193f)
feat(topology): a few more results about compact sets ([#11905](https://github.com/leanprover-community/mathlib/pull/#11905))

* Also a few lemmas about sets and `mul_support`.

### [2022-02-09T18:57:10+00:00](https://github.com/leanprover-community/mathlib/commit/b8fb8e5b4b0eb56a714d29a9c8ae9d77cbfddd6e)
feat(set_theory/ordinal_arithmetic): `le_one_iff` ([#11847](https://github.com/leanprover-community/mathlib/pull/#11847))

### [2022-02-09T18:57:09+00:00](https://github.com/leanprover-community/mathlib/commit/2726e2389a223b2d8a303c72800da386cbbd7885)
feat(algebra.group.hom_instances): Define left and right multiplication operators ([#11843](https://github.com/leanprover-community/mathlib/pull/#11843))

Defines left and right multiplication operators on non unital, non associative semirings.

Suggested by @ocfnash for [#11073](https://github.com/leanprover-community/mathlib/pull/#11073)



Co-authored-by: Christopher Hoskin <mans0954@users.noreply.github.com>

### [2022-02-09T17:14:15+00:00](https://github.com/leanprover-community/mathlib/commit/5008de8b345903c89dd98fb6a870ff5e231e72da)
feat(order): some properties about monotone predicates ([#11904](https://github.com/leanprover-community/mathlib/pull/#11904))

* We prove that some predicates are monotone/antitone w.r.t. some order. The proofs are all trivial.
* We prove 2 `iff` statements depending on the hypothesis that a certain predicate is (anti)mono: `exists_ge_and_iff_exists` and `filter.exists_mem_and_iff`)
* The former is used to prove `bdd_above_iff_exists_ge`, the latter will be used in a later PR.

### [2022-02-09T17:14:14+00:00](https://github.com/leanprover-community/mathlib/commit/d3cdcd83a53b0d74cd8aa6cd6dba0920849d8a35)
feat(order/filter/basic): add lemma `le_prod_map_fst_snd` ([#11901](https://github.com/leanprover-community/mathlib/pull/#11901))

A lemma relating filters on products and the filter-product of the projections. This lemma is particularly useful when proving the continuity of a function on a product space using filters.

Discussion: https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Some.20missing.20prod.20stuff

### [2022-02-09T17:14:12+00:00](https://github.com/leanprover-community/mathlib/commit/9648ce299ff3be4b57094cccb8daa8d0fabf2814)
chore(data/pi): add pi.prod and use elsewhere ([#11877](https://github.com/leanprover-community/mathlib/pull/#11877))

`pi.prod` is the function that underlies `add_monoid_hom.prod`, `linear_map.prod`, etc.

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Some.20missing.20prod.20stuff/near/270851797)

### [2022-02-09T15:50:47+00:00](https://github.com/leanprover-community/mathlib/commit/ca2450fe5decefce4bee05e727622e32f2c985ad)
feat(order/atoms): finite orders are (co)atomic ([#11930](https://github.com/leanprover-community/mathlib/pull/#11930))

### [2022-02-09T14:10:33+00:00](https://github.com/leanprover-community/mathlib/commit/c8827532ef864bf72b1b7c3b931f7c16337e1a25)
chore(algebra/tropical/basic): remove 3 instances ([#11920](https://github.com/leanprover-community/mathlib/pull/#11920))

The three removed instances are

* `covariant_swap_add` (exists since addition is commutative and the non-swapped version is proved);
* `covariant_add_lt` (as is, this is a copy of `covariant_add` -- judging from the name, it could have been intended to have a `(<)`, but with `(<)` it is false, see below);
* `covariant_swap_add_lt` (exists since addition is commutative and the non-swapped version is proved).

Here is a proof that the second instance with `(<)` is false:

```lean
lemma not_cov_lt : ¬ covariant_class (tropical ℕ) (tropical ℕ) (+) (<) :=
begin
  refine λ h, (lt_irrefl (trop 0) _),
  cases h,
  have : trop 0 < trop 1 := show 0 < 1, from zero_lt_one,
  calc trop 0 = trop 0 + trop 0 : (trop 0).add_self.symm
          ... < trop 0 + trop 1 : h _ this
          ... = trop 0          : add_eq_left this.le,
end
```

### [2022-02-09T11:36:35+00:00](https://github.com/leanprover-community/mathlib/commit/fea68aac7b23b5bf6e049a0e10b47fce5176a99d)
chore(data/fintype/basic): documenting elaboration bug ([#11247](https://github.com/leanprover-community/mathlib/pull/#11247))

Simplifying an expression and documenting an elaboration bug that it was avoiding.

### [2022-02-09T09:56:15+00:00](https://github.com/leanprover-community/mathlib/commit/3aa5b8a9ed7a7cabd36e6e1d022c9858ab8a8c2d)
refactor(algebra/ring/basic): rename lemmas about `a*(-b)` and `(-a)*b` ([#11925](https://github.com/leanprover-community/mathlib/pull/#11925))

This renames:

* `(- a) * b = - (a * b)` from `neg_mul_eq_neg_mul_symm` to `neg_mul`
* `a * (-b) = - (a * b)` from `mul_neg_eq_neg_mul_symm` to `mul_neg`

The new names are much easier to find when compared with `sub_mul`, `mul_sub` etc, and match the existing namespaced names under `units` and `matrix`.
This also replaces rewrites by `← neg_mul_eq_neg_mul` with `neg_mul` and rewrites by `← neg_mul_eq_mul_neg` with `mul_neg`.
To avoid clashes, the names in the `matrix` namespace are now `protected`.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/mul_neg.2C.20neg_mul/near/233638226)

### [2022-02-09T08:51:48+00:00](https://github.com/leanprover-community/mathlib/commit/4e17e081f2289e57707a9d5bfda94011caa7258a)
feat(data/complex/basic): re-im set product ([#11770](https://github.com/leanprover-community/mathlib/pull/#11770))

`set.re_im_prod s t` (notation: `s ×ℂ t`) is the product of a set on the real axis and a set on the
imaginary axis of the complex plane.

### [2022-02-09T07:16:44+00:00](https://github.com/leanprover-community/mathlib/commit/78c397526553c364691388fabe75d3b98ceba145)
feat(category_theory/pseudoabelian/basic): basic facts and contructions about pseudoabelian categories ([#11817](https://github.com/leanprover-community/mathlib/pull/#11817))





Co-authored-by: Joël Riou <37772949+joelriou@users.noreply.github.com>

### [2022-02-08T22:14:40+00:00](https://github.com/leanprover-community/mathlib/commit/56db7ed0ba5ecb3a5b1abc15d9b8d40cd7ac37b7)
feat(analysis/normed_space/basic): add lemmas `nnnorm_mul_le` and `nnnorm_pow_succ_le` ([#11915](https://github.com/leanprover-community/mathlib/pull/#11915))

Adds two convenience lemmas for `nnnorm`, submultiplicativity of `nnnorm` for semi-normed rings and the corresponding extension to powers. We only allow successors so as not to incur the `norm_one_class` type class constraint.

### [2022-02-08T21:07:37+00:00](https://github.com/leanprover-community/mathlib/commit/a3d6b43cc8b7c20231f6a001f600c965636ece91)
feat(topology/algebra/uniform_group): `cauchy_seq.const_mul` and friends ([#11917](https://github.com/leanprover-community/mathlib/pull/#11917))

A Cauchy sequence multiplied by a constant (including `-1`) remains a Cauchy sequence.

### [2022-02-08T19:01:57+00:00](https://github.com/leanprover-community/mathlib/commit/4545e31e411734f0625571484ddae08394a1f623)
feat(model_theory/substructures): More operations on substructures ([#11906](https://github.com/leanprover-community/mathlib/pull/#11906))

Defines the substructure `first_order.language.hom.range`.
Defines the homomorphisms `first_order.language.hom.dom_restrict` and `first_order.language.hom.cod_restrict`, and the embeddings `first_order.language.embedding.dom_restrict`, `first_order.language.embedding.cod_restrict` which restrict the domain or codomain of a first-order hom or embedding to a substructure.
Defines the embedding `first_order.language.substructure.inclusion` between nested substructures.

### [2022-02-08T17:19:13+00:00](https://github.com/leanprover-community/mathlib/commit/1ae830491d95911da90a435dabec654d10fe9632)
chore(*): update to lean 3.39.1c ([#11926](https://github.com/leanprover-community/mathlib/pull/#11926))

### [2022-02-08T13:50:04+00:00](https://github.com/leanprover-community/mathlib/commit/b1269b0da05d1c84442a99af2a8b518d467b3cb9)
chore(algebra/order/ring): add a few aliases ([#11911](https://github.com/leanprover-community/mathlib/pull/#11911))

Add aliases `one_pos`, `two_pos`, `three_pos`, and `four_pos`.

We used to have (some of) these lemmas. They were removed during one of cleanups but it doesn't hurt to have aliases.

### [2022-02-08T12:43:42+00:00](https://github.com/leanprover-community/mathlib/commit/85d9f2189d9489f9983c0d01536575b0233bd305)
feat(*): localized `R[X]` notation for `polynomial R` ([#11895](https://github.com/leanprover-community/mathlib/pull/#11895))

I did not change `polynomial (complex_term_here taking args)` in many places because I thought it would be more confusing. Also, in some files that prove things about polynomials incidentally, I also did not include the notation and change the files.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-02-08T09:20:10+00:00](https://github.com/leanprover-community/mathlib/commit/593258146ce547ed29cb53d8cfb80e2f6769c892)
feat(group_theory/submonoid/operations): prod_le_iff and le_prod_iff, also for groups and modules ([#11898](https://github.com/leanprover-community/mathlib/pull/#11898))

### [2022-02-08T08:51:03+00:00](https://github.com/leanprover-community/mathlib/commit/2b68801b7f7f2c25c7583a8f57fb4c5999ab8e65)
refactor(number_theory/bernoulli_polynomials): improve names ([#11805](https://github.com/leanprover-community/mathlib/pull/#11805))

Cleanup the bernoulli_polynomials file



Co-authored-by: Riccardo Brasca <riccardo.brasca@gmail.com>

### [2022-02-08T04:53:51+00:00](https://github.com/leanprover-community/mathlib/commit/1077eb3c8e3712774084e2ef8b8b730315a7e334)
feat(analysis/complex): a few lemmas about `dist` and `conj` ([#11913](https://github.com/leanprover-community/mathlib/pull/#11913))

### [2022-02-07T20:25:46+00:00](https://github.com/leanprover-community/mathlib/commit/36d3b688258412faf9359e92734db6a7507fccdf)
feat(linear_algebra/basis): `basis.map_equiv_fun` ([#11888](https://github.com/leanprover-community/mathlib/pull/#11888))

Add a `simp` lemma about the effect of `equiv_fun` for a basis
obtained with `basis.map`.

### [2022-02-07T19:33:57+00:00](https://github.com/leanprover-community/mathlib/commit/f94b0b3117d7b6ee51f487968c2e38df0d7cc5fc)
style(analysis/special_functions/trigonometric/angle): make types of `sin` and `cos` explicit ([#11902](https://github.com/leanprover-community/mathlib/pull/#11902))

Give the types of the results of `real.angle.sin` and `real.angle.cos`
explicitly, as requested by @eric-wieser in [#11887](https://github.com/leanprover-community/mathlib/pull/#11887).

### [2022-02-07T19:33:56+00:00](https://github.com/leanprover-community/mathlib/commit/9ceb3c2adefc3dc614ed12bd6c63d2574abff1f5)
feat(topology/sheaf_condition): connect sheaves on sites and on spaces without has_products ([#11706](https://github.com/leanprover-community/mathlib/pull/#11706))

As an application of [#11692](https://github.com/leanprover-community/mathlib/pull/#11692), show that the is_sheaf_opens_le_cover sheaf condition on spaces is equivalent to is_sheaf on sites, thereby connecting sheaves on sites and on spaces without the value category has_products for the first time. (@justus-springer: you might want to take a look so as to determine whether and which of your work in [#9609](https://github.com/leanprover-community/mathlib/pull/#9609) should be deprecated.) This could be seen as a step towards refactoring sheaves on spaces through sheaves on sites.

- [x] depends on: [#11692](https://github.com/leanprover-community/mathlib/pull/#11692)



Co-authored-by: Junyan Xu <junyanxu.math@gmail.com>

### [2022-02-07T17:28:22+00:00](https://github.com/leanprover-community/mathlib/commit/436966c1267ce2ec4334e78f917e0957e751adc1)
chore(data/finsupp/basic): generalize comap_mul_action ([#11900](https://github.com/leanprover-community/mathlib/pull/#11900))

This new definition is propoitionally equal to the old one in the presence of `[group G]` (all the previous `lemma`s continue to apply), but generalizes to `[monoid G]`.

This also removes `finsupp.comap_distrib_mul_action_self` as there is no need to have this as a separate definition.

### [2022-02-07T17:28:21+00:00](https://github.com/leanprover-community/mathlib/commit/7b91f0083336e30edbf5aee6ff5a0678224b7803)
feat(algebra/big_operators/basic): add multiset.prod_sum ([#11885](https://github.com/leanprover-community/mathlib/pull/#11885))

### [2022-02-07T15:42:07+00:00](https://github.com/leanprover-community/mathlib/commit/02c9d69d382f19235eae8ef99ffb46f07ce34c73)
feat(analysis/inner_product_space/basic): `orthonormal.map_linear_isometry_equiv` ([#11893](https://github.com/leanprover-community/mathlib/pull/#11893))

Add a variant of `orthonormal.comp_linear_isometry_equiv` for the case
of an orthonormal basis mapped with `basis.map`.

If in future we get a bundled type of orthonormal bases with its own
`map` operation, this would no longer be a separate lemma, but until
then it's useful.

### [2022-02-07T15:42:06+00:00](https://github.com/leanprover-community/mathlib/commit/c61ea33b0ab9672aba71189591d6b5b318c8d36f)
feat(analysis/complex/isometry): `rotation_symm` ([#11891](https://github.com/leanprover-community/mathlib/pull/#11891))

Add a `simp` lemma that the inverse of `rotation` is rotation by the
inverse angle.

### [2022-02-07T15:42:04+00:00](https://github.com/leanprover-community/mathlib/commit/2364a0918bfc481030974b138813a3881675c186)
feat(analysis/complex/circle): `exp_map_circle_neg` ([#11889](https://github.com/leanprover-community/mathlib/pull/#11889))

Add the lemma `exp_map_circle_neg`, similar to other lemmas for
`exp_map_circle` that are already present.

### [2022-02-07T15:42:03+00:00](https://github.com/leanprover-community/mathlib/commit/99215e3d41ce13e7e6eae85b7d3a4a6ee8b8a6f6)
feat(analysis/special_functions/trigonometric/angle): `sin`, `cos` ([#11887](https://github.com/leanprover-community/mathlib/pull/#11887))

Add definitions of `sin` and `cos` that act on a `real.angle`.

### [2022-02-07T15:42:01+00:00](https://github.com/leanprover-community/mathlib/commit/98ef84ef23f971babfbb557aef3a39456fa2b821)
feat(analysis/special_functions/trigonometric/angle): `induction_on` ([#11886](https://github.com/leanprover-community/mathlib/pull/#11886))

Add `real.angle.induction_on`, for use in deducing results for
`real.angle` from those for `ℝ`.

### [2022-02-07T15:42:00+00:00](https://github.com/leanprover-community/mathlib/commit/26179ccd805ef395f084b7e09fbbda349949cb38)
feat(data/list): add some lemmas. ([#11879](https://github.com/leanprover-community/mathlib/pull/#11879))

### [2022-02-07T15:41:58+00:00](https://github.com/leanprover-community/mathlib/commit/dcbb59c437ad25fc766173ae394dee3a48a26b3c)
feat(category_theory/limits): is_limit.exists_unique ([#11875](https://github.com/leanprover-community/mathlib/pull/#11875))

Yet another restatement of the limit property which is occasionally useful.

### [2022-02-07T15:41:57+00:00](https://github.com/leanprover-community/mathlib/commit/556483f49352737f2ea8fcc3ea7f645a36a9b8c7)
feat(category_theory/limits): (co)equalizers in the opposite category ([#11874](https://github.com/leanprover-community/mathlib/pull/#11874))

### [2022-02-07T15:41:55+00:00](https://github.com/leanprover-community/mathlib/commit/7a2a546813e54b3ff10f3dc635b62451d94ddba9)
feat(data/set/opposite): the opposite of a set ([#11860](https://github.com/leanprover-community/mathlib/pull/#11860))

### [2022-02-07T15:41:54+00:00](https://github.com/leanprover-community/mathlib/commit/0354e56f8fc4c6d9437d265a0c2b2dd20314f9bc)
feat(order/complete_lattice): infi_le_iff ([#11810](https://github.com/leanprover-community/mathlib/pull/#11810))

Add missing lemma `infi_le_iff {s : ι → α} : infi s ≤ a ↔ (∀ b, (∀ i, b ≤ s i) → b ≤ a)`

Also take the opportunity to restate `Inf_le_iff` to restore consistency with `le_Sup_iff` that was broken in [#10607](https://github.com/leanprover-community/mathlib/pull/#10607) and move `le_supr_iff` close to `le_Sup_iff` and remove a couple of unneeded parentheses.

### [2022-02-07T14:32:55+00:00](https://github.com/leanprover-community/mathlib/commit/a2f3f55e9e14c6f4128a2783994c3b9f6b166a7c)
chore(algebra/monoid_algebra): generalize lift_nc ([#11881](https://github.com/leanprover-community/mathlib/pull/#11881))

The g argument does not need to be a bundled morphism here in the definition.
Instead, we require it be a bundled morphism only in the downstream lemmas, using the new typeclass machinery

### [2022-02-07T12:33:08+00:00](https://github.com/leanprover-community/mathlib/commit/04b9d28106dd0a78508ea15bf438c478009b4a5e)
feat(data/pfun): Composition of partial functions ([#11865](https://github.com/leanprover-community/mathlib/pull/#11865))

Define
* `pfun.id`: The identity as a partial function
* `pfun.comp`: Composition of partial functions
* `pfun.to_subtype`: Restrict the codomain of a function to a subtype and make it partial

### [2022-02-07T11:17:01+00:00](https://github.com/leanprover-community/mathlib/commit/00908913992a21b073a035c4c0c5c90971560cab)
chore(model_theory/*): Split up model_theory/basic ([#11846](https://github.com/leanprover-community/mathlib/pull/#11846))

Splits model_theory/basic into separate files: basic, substructures, terms_and_formulas, definability, quotients
Improves documentation throughout

### [2022-02-07T10:17:41+00:00](https://github.com/leanprover-community/mathlib/commit/3c70566a9f16de07c5145258ee1619d20eb51695)
feat(analysis/normed_space/linear_isometry): `symm_trans` ([#11892](https://github.com/leanprover-community/mathlib/pull/#11892))

Add a `simp` lemma `linear_isometry_equiv.symm_trans`, like
`coe_symm_trans` but without a coercion involved.  `coe_symm_trans`
can then be proved by `simp`, so stops being a `simp` lemma itself.

### [2022-02-07T08:33:33+00:00](https://github.com/leanprover-community/mathlib/commit/b1b09eb33cc683668970905c049be33b6e4006f5)
refactor(data/quot): Make more `setoid` arguments implicit ([#11824](https://github.com/leanprover-community/mathlib/pull/#11824))

Currently, not all of the `quotient` API can be used with non-instance setoids. This fixes it by making a few `setoid` arguments explicit rather than instances.

### [2022-02-07T03:57:45+00:00](https://github.com/leanprover-community/mathlib/commit/25297ecf1efe4de773f8914ededd1cf9f0b9b760)
feat(analysis/complex/basic): `conj_lie_symm` ([#11890](https://github.com/leanprover-community/mathlib/pull/#11890))

Add a `simp` lemma that the inverse of `conj_lie` is `conj_lie`.

### [2022-02-06T19:03:43+00:00](https://github.com/leanprover-community/mathlib/commit/e18972b33c65f9cba770aea91a160899ef0e860c)
feat(set_theory/ordinal_arithmetic): Suprema of empty families ([#11872](https://github.com/leanprover-community/mathlib/pull/#11872))

### [2022-02-06T07:25:14+00:00](https://github.com/leanprover-community/mathlib/commit/24ebc5cd89c5088aff39278e1af5ef4d3f51eb34)
feat(group_theory/sylow): the cardinality of a sylow group ([#11776](https://github.com/leanprover-community/mathlib/pull/#11776))

Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-02-06T01:53:58+00:00](https://github.com/leanprover-community/mathlib/commit/4148990d32e3bc843b6c7d37da0af7ae64141282)
feat(set_theory/ordinal_arithmetic): Suprema and least strict upper bounds of constant families ([#11862](https://github.com/leanprover-community/mathlib/pull/#11862))

### [2022-02-05T21:22:39+00:00](https://github.com/leanprover-community/mathlib/commit/6787a8d926ff7fb3f287a4957e21bc93a321d8d4)
feat(category_theory): a hierarchy of balanced categories ([#11856](https://github.com/leanprover-community/mathlib/pull/#11856))

### [2022-02-05T19:40:29+00:00](https://github.com/leanprover-community/mathlib/commit/0f9c1538de1e162299ae77256de1a109c65f5912)
feat(algebra/cubic_discriminant): basics of cubic polynomials and their discriminants ([#11483](https://github.com/leanprover-community/mathlib/pull/#11483))




Co-authored-by: Multramate <dka316@ic.ac.uk>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-02-05T17:59:51+00:00](https://github.com/leanprover-community/mathlib/commit/39b12623d5da87333211e8edb22f20cfa2764bc7)
feat(algebra/lie/nilpotent): nilpotency of Lie modules depends only on the Lie subalgebra of linear endomorphisms ([#11853](https://github.com/leanprover-community/mathlib/pull/#11853))

### [2022-02-05T17:59:49+00:00](https://github.com/leanprover-community/mathlib/commit/b9d19ed37f0af577940d2d38b291371aaaf745e0)
feat(algebra/lie/nilpotent): nilpotency of Lie modules is preserved under surjective morphisms ([#11852](https://github.com/leanprover-community/mathlib/pull/#11852))

### [2022-02-05T17:59:47+00:00](https://github.com/leanprover-community/mathlib/commit/9fcd1f24030be4e9b3b69fb8a67fca805282d9e6)
feat(algebra/lie/nilpotent): add lemma `lie_module.coe_lower_central_series_ideal_le` ([#11851](https://github.com/leanprover-community/mathlib/pull/#11851))

### [2022-02-05T17:31:04+00:00](https://github.com/leanprover-community/mathlib/commit/df7c217f723f8692c86d50759a19103a4da4eee4)
feat(algebra/lie/nilpotent): add definition `lie_ideal.lcs` ([#11854](https://github.com/leanprover-community/mathlib/pull/#11854))

This is extremely useful when proving a generalised version of Engel's lemma.

### [2022-02-05T09:52:03+00:00](https://github.com/leanprover-community/mathlib/commit/99693218f4dd662f369915a3884f0152ce19aeb9)
feat(measure_theory/probability_mass_function): Lemmas connecting `pmf.support` and `pmf.to_measure` ([#11842](https://github.com/leanprover-community/mathlib/pull/#11842))

Add lemmas relating the support of a `pmf` to the measures of sets under the induced measure.

### [2022-02-05T09:52:01+00:00](https://github.com/leanprover-community/mathlib/commit/612ca40a5261c9103ed7761d9e7175a105507c7b)
feat(data/finset): erase is empty iff ([#11838](https://github.com/leanprover-community/mathlib/pull/#11838))

### [2022-02-05T09:52:00+00:00](https://github.com/leanprover-community/mathlib/commit/31f5688a80b8b52ab2b1503b7a30edbd16f497ac)
refactor(ring_theory/valuation/basic): `fun_like` design for `valuation` ([#11830](https://github.com/leanprover-community/mathlib/pull/#11830))

Introduce `valuation_class`, the companion typeclass to `valuation`. Deprecate lemmas. Rename the field from `map_add'` to `map_add_le_max'` to avoid confusion with the eponymous field from `add_hom`.

### [2022-02-05T09:51:59+00:00](https://github.com/leanprover-community/mathlib/commit/e78563c0ef864bcb3f102f46726adf925cc90353)
feat(ring_theory/power_series): reindex trunc of a power series to truncate below index n ([#10891](https://github.com/leanprover-community/mathlib/pull/#10891))

Currently the definition of truncation of a univariate and multivariate power series truncates above the index, that is if we truncate a power series $\sum a_i x^i$ at index `n` the term $a_n x^n$ is included.
This makes it impossible to truncate the first monomial $x^0$ away as it is included with the smallest possible value of n, which causes some issues in applications (imagine if you could only pop elements of lists if the result was non-empty!).



Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-02-05T08:16:33+00:00](https://github.com/leanprover-community/mathlib/commit/6b4e2691b5270d93f2cbadb2ac1ae6bd91e793e4)
chore(data/fintype/basic): rename some instances ([#11845](https://github.com/leanprover-community/mathlib/pull/#11845))

Rename instances from `infinite.multiset.infinite` etc to
`multiset.infinite` etc; rename `infinite.set.infinite` to
`infinite.set` to avoid name clash.

Also add `option.infinite`.

### [2022-02-05T05:19:33+00:00](https://github.com/leanprover-community/mathlib/commit/b0d9761b42ce5b6335dd85cd1da315b1d2d04ee7)
feat(ring_theory/hahn_series): add a map to power series and dickson's lemma ([#11836](https://github.com/leanprover-community/mathlib/pull/#11836))

Add a ring equivalence between `hahn_series` and `mv_power_series` as discussed in https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/induction.20on.20an.20index.20type/near/269463528.
This required adding some partially well ordered lemmas that it seems go under the name Dickson's lemma.
This may be independently useful, a constructive version of this has been used in other provers, especially in connection to Grobner basis and commutative algebra type material.

### [2022-02-04T23:34:38+00:00](https://github.com/leanprover-community/mathlib/commit/bd7d034b005c5ef9f8d7ff0f501d641946f21fca)
feat(ring_theory/nilpotent): add lemma `module.End.is_nilpotent_mapq` ([#11831](https://github.com/leanprover-community/mathlib/pull/#11831))

Together with the other lemmas necessary for its proof.

### [2022-02-04T22:50:46+00:00](https://github.com/leanprover-community/mathlib/commit/b905eb6611f7ef692455ddecdf4cc417dae6ff8e)
fix(group_theory/nilpotent): don’t unnecessarily `open_locale classical` ([#11779](https://github.com/leanprover-community/mathlib/pull/#11779))

h/t @pechersky for noticing

### [2022-02-04T21:12:18+00:00](https://github.com/leanprover-community/mathlib/commit/b3b32c8742daf717ef07f197fbfe1a46e5e72724)
feat(algebra/lie/quotient): first isomorphism theorem for morphisms of Lie algebras ([#11826](https://github.com/leanprover-community/mathlib/pull/#11826))

### [2022-02-04T21:12:17+00:00](https://github.com/leanprover-community/mathlib/commit/292bf34d72d419cfb328e27921e24eea7b625425)
feat(algebra/lie/ideal_operations): add lemma `lie_ideal_oper_eq_linear_span'` ([#11823](https://github.com/leanprover-community/mathlib/pull/#11823))

It is useful to have this alternate form in situations where we have a hypothesis like `h : I = J` since we can then rewrite using `h` after applying this lemma.

An (admittedly brief) scan of the existing applications of `lie_ideal_oper_eq_linear_span` indicates that it's worth keeping both forms for convenience but I'm happy to dig deeper into this if requested.

### [2022-02-04T21:12:16+00:00](https://github.com/leanprover-community/mathlib/commit/fa20482011bc99cfa051a627f140a29ed1fb9334)
feat(linear_algebra/basic): add minor lemmas, tweak `simp` attributes ([#11822](https://github.com/leanprover-community/mathlib/pull/#11822))

### [2022-02-04T21:12:15+00:00](https://github.com/leanprover-community/mathlib/commit/247504c8ff6f2bb4805b1eb29130a45a84a0229d)
feat(algebra/lie/cartan_subalgebra): add lemma `lie_subalgebra.exists_nested_lie_ideal_of_le_normalizer` ([#11820](https://github.com/leanprover-community/mathlib/pull/#11820))

### [2022-02-04T21:12:13+00:00](https://github.com/leanprover-community/mathlib/commit/a2fd0bd52e4995172512702c6df018e5967657d7)
feat(algebra/lie/basic): define pull back of a Lie module along a morphism of Lie algebras. ([#11819](https://github.com/leanprover-community/mathlib/pull/#11819))

### [2022-02-04T21:12:12+00:00](https://github.com/leanprover-community/mathlib/commit/2e7efe99d95905523cd91e8ded415250780c9d5f)
refactor(set_theory/ordinal_arithmetic): Change `α → Prop` to `set α` ([#11816](https://github.com/leanprover-community/mathlib/pull/#11816))

### [2022-02-04T21:12:11+00:00](https://github.com/leanprover-community/mathlib/commit/a7415855b6d035d0e8286990930107186f7f1a00)
chore(algebra/group): make `coe_norm_subgroup` and `submodule.norm_coe` consistent ([#11427](https://github.com/leanprover-community/mathlib/pull/#11427))

The `simp` lemmas for norms in a subgroup and in a submodule disagreed: the first inserted a coercion to the larger group, the second deleted the coercion. Currently this is not a big deal, but it will become a real issue when defining `add_subgroup_class`. I want to make them consistent by pointing them in the same direction. The consensus in the [Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp.20normal.20form.3A.20coe_norm_subgroup.2C.20submodule.2Enorm_coe) suggests `simp` should insert a coercion here, so I went with that.

After making the changes, a few places need extra `simp [submodule.coe_norm]` on the local hypotheses, but nothing major.

### [2022-02-04T20:39:46+00:00](https://github.com/leanprover-community/mathlib/commit/c3273aa229c3eb608641d521bcbd6cbda72d3688)
feat(algebra/lie/subalgebra): add `lie_subalgebra.equiv_of_le` and `lie_subalgebra.equiv_range_of_injective` ([#11828](https://github.com/leanprover-community/mathlib/pull/#11828))

### [2022-02-04T18:53:26+00:00](https://github.com/leanprover-community/mathlib/commit/3c00e5d786f6ada66888a9224abea2a5aabbb992)
fix(algebra/Module/colimits): Change `comm_ring` to `ring`. ([#11837](https://github.com/leanprover-community/mathlib/pull/#11837))

... despite the well-known fact that all rings are commutative.

### [2022-02-04T18:53:25+00:00](https://github.com/leanprover-community/mathlib/commit/5b3cd4a92a1f49db5656b753ab678f6fdcff3d14)
refactor(analysis/normed_space/add_torsor): Kill `seminormed_add_torsor` ([#11795](https://github.com/leanprover-community/mathlib/pull/#11795))

Delete `normed_add_torsor` in favor of the equivalent `seminormed_add_torsor` and rename `seminormed_add_torsor` to `normed_add_torsor`.

### [2022-02-04T18:53:24+00:00](https://github.com/leanprover-community/mathlib/commit/aaaeeaedee44b4df4860b31865f1a6cc114210cc)
feat(category_theory/category/{Pointed,Bipointed}): The categories of pointed/bipointed types ([#11777](https://github.com/leanprover-community/mathlib/pull/#11777))

Define
* `Pointed`, the category of pointed types
* `Bipointed`, the category of bipointed types
* the forgetful functors from `Bipointed` to `Pointed` and from `Pointed` to `Type*`
* `Type_to_Pointed`, the functor from `Type*` to `Pointed` induced by `option`
* `Bipointed.swap_equiv` the equivalence between `Bipointed` and itself induced by `prod.swap` both ways.

### [2022-02-04T17:10:26+00:00](https://github.com/leanprover-community/mathlib/commit/cedcf0737c9999c78e6319d8b016c6de30a3fd4c)
chore(*): update to lean 3.39.0c ([#11821](https://github.com/leanprover-community/mathlib/pull/#11821))

### [2022-02-04T08:58:31+00:00](https://github.com/leanprover-community/mathlib/commit/049a1b2bb070c2b115dea3263ba9ca59e7d89eb8)
feat(group_theory/subgroup/basic): add pi subgroups ([#11801](https://github.com/leanprover-community/mathlib/pull/#11801))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-02-04T06:54:32+00:00](https://github.com/leanprover-community/mathlib/commit/46c48d7f9ac5086d8a5e1d3e658fa1e40fd4e005)
feat(logic/basic): add projection notation for iff ([#11803](https://github.com/leanprover-community/mathlib/pull/#11803))

### [2022-02-04T02:33:18+00:00](https://github.com/leanprover-community/mathlib/commit/553cb9cc76728153c757d28b409162a1cfa98ddd)
fix(algebra/category/Module/colimits): Add some additional instances with permuted universe parameters ([#11812](https://github.com/leanprover-community/mathlib/pull/#11812))

### [2022-02-04T02:33:17+00:00](https://github.com/leanprover-community/mathlib/commit/4cfc30e317caad46858393f1a7a33f609296cc30)
chore(*): use le_rfl instead of le_refl _ ([#11797](https://github.com/leanprover-community/mathlib/pull/#11797))

### [2022-02-04T02:03:42+00:00](https://github.com/leanprover-community/mathlib/commit/6dcad02178ff012c14b3ef6d854c01bdbcdf23f0)
feat(linear_algebra/lagrange): Add recurrence formula for Lagrange polynomials ([#11762](https://github.com/leanprover-community/mathlib/pull/#11762))

I have also changed `interpolate` to take in a function `f : F → F` instead of `f : s → F`, since this makes the statement of the theorem nicer.

### [2022-02-03T23:36:11+00:00](https://github.com/leanprover-community/mathlib/commit/853192cee0e554df83e48e06e72fb72ebfeee6af)
feat(topology/algebra): Inf and inducing preserve compatibility with algebraic structure ([#11720](https://github.com/leanprover-community/mathlib/pull/#11720))

This partly duplicates @mariainesdff 's work on group topologies, but I'm using an unbundled approach which avoids defining a new `X_topology` structure for each interesting X.

### [2022-02-03T18:39:52+00:00](https://github.com/leanprover-community/mathlib/commit/30a731ca565b92955e40274652f4c2b6f4db79f4)
fix(algebra/category/Module/colimits): generalize universes ([#11802](https://github.com/leanprover-community/mathlib/pull/#11802))

### [2022-02-03T18:39:51+00:00](https://github.com/leanprover-community/mathlib/commit/f2be0d2284a02915b59bedb3acc73febf8f1947d)
feat(polynomial/cyclotomic): irreducible cyclotomic polynomials are minimal polynomials ([#11796](https://github.com/leanprover-community/mathlib/pull/#11796))

from flt-regular



Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-02-03T16:59:03+00:00](https://github.com/leanprover-community/mathlib/commit/2c5f36c451ab32af520d837103d60ae94dc23f57)
feat(data/finset/sort): an order embedding from fin ([#11800](https://github.com/leanprover-community/mathlib/pull/#11800))

Given a set `s` of at least `k` element in a linear order, there is an order embedding from `fin k` whose image is contained in `s`.

### [2022-02-03T16:59:01+00:00](https://github.com/leanprover-community/mathlib/commit/25f0406de673af3756063da03bf5967e1eebf1da)
fix(topology/connected): typos in docstrings ([#11798](https://github.com/leanprover-community/mathlib/pull/#11798))

As pointed out by @YaelDillies

### [2022-02-03T15:03:19+00:00](https://github.com/leanprover-community/mathlib/commit/a4d9581e2dc5a32067578513818ae16c8042eafd)
feat(algebra/group_power/order): add pow_bit0_pos_iff ([#11785](https://github.com/leanprover-community/mathlib/pull/#11785))

### [2022-02-03T14:17:31+00:00](https://github.com/leanprover-community/mathlib/commit/324d845a33bc3847a26e4bd0e49823f13e4d1fb3)
feat(field_theory/krull_topology): defined Krull topology on Galois groups ([#11780](https://github.com/leanprover-community/mathlib/pull/#11780))






Co-authored-by: Sebastian-Monnet <54352341+Sebastian-Monnet@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-02-03T12:53:15+00:00](https://github.com/leanprover-community/mathlib/commit/d6e1c554daf338ecc92029e7e8ba2d8cd28535cf)
chore(data/polynomial/monic): dedup `degree_map` ([#11792](https://github.com/leanprover-community/mathlib/pull/#11792))

### [2022-02-03T12:53:14+00:00](https://github.com/leanprover-community/mathlib/commit/2f4f8ad486c1a11d01afc913eed035d67e7cf28b)
feat(set_theory/principal): Principal ordinals are unbounded ([#11755](https://github.com/leanprover-community/mathlib/pull/#11755))

Amazingly, this theorem requires no conditions on the operation.



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2022-02-03T12:12:38+00:00](https://github.com/leanprover-community/mathlib/commit/50ee3d5619afce47bc0eff59031c44b97da391c7)
feat(ring_theory/roots_of_unity): coe_injective ([#11793](https://github.com/leanprover-community/mathlib/pull/#11793))

from flt-regular

### [2022-02-03T11:20:19+00:00](https://github.com/leanprover-community/mathlib/commit/934f18288f2370cc2a051e37c923a12348a8abda)
feat(field_theory/is_alg_closed/classification): Classify algebraically closed fields ([#9370](https://github.com/leanprover-community/mathlib/pull/#9370))

The main results here are that two algebraically closed fields with the same characteristic and the same cardinality of transcendence basis are isomorphic. The consequence of this is that two uncountable algebraically closed fields of the same cardinality and characteristic are isomorphic. This has applications in model theory, in particular the Lefschetz principle https://proofwiki.org/wiki/Lefschetz_Principle_(First-Order)



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2022-02-03T10:20:39+00:00](https://github.com/leanprover-community/mathlib/commit/e39f617cf66ddccbf4d234ede445ef27e7cec62b)
feat(category_theory/linear): compatibility of linear Yoneda ([#11784](https://github.com/leanprover-community/mathlib/pull/#11784))

### [2022-02-03T10:20:38+00:00](https://github.com/leanprover-community/mathlib/commit/e61ce5dcd148ecdc14b325675184088d2fb83eb8)
chore(category_theory/limits): dualize strong_epi ([#11783](https://github.com/leanprover-community/mathlib/pull/#11783))

### [2022-02-03T10:20:37+00:00](https://github.com/leanprover-community/mathlib/commit/93f2bdc8015f7d82c564508679be6166d35a1668)
feat(topology/algebra/ordered/monotone_convergence): add `antitone.{ge,le}_of_tendsto` ([#11754](https://github.com/leanprover-community/mathlib/pull/#11754))

### [2022-02-03T09:25:26+00:00](https://github.com/leanprover-community/mathlib/commit/a4831583189ad9791889a785c530712b5d6721f9)
feat(topology/algebra/group): continuity of action of a group on its own coset space ([#11772](https://github.com/leanprover-community/mathlib/pull/#11772))

Given a subgroup `Γ` of a topological group `G`, there is an induced scalar action of `G` on the coset space `G ⧸ Γ`, and there is also an induced topology on `G ⧸ Γ`.  We prove that this action is continuous in each variable, and, if the group `G` is locally compact, also jointly continuous.

Co-authored-by: Alex Kontorovich <58564076+AlexKontorovich@users.noreply.github.com>

### [2022-02-03T04:55:55+00:00](https://github.com/leanprover-community/mathlib/commit/18163786dde2e8b9c510319712fe789726e7f19d)
chore(*): golf `by_contra, push_neg` to `by_contra'` ([#11768](https://github.com/leanprover-community/mathlib/pull/#11768))

### [2022-02-03T04:21:08+00:00](https://github.com/leanprover-community/mathlib/commit/89a3c072aabd201453dc84d05b94d75f982b6d93)
feat(field_theory/laurent): Laurent expansions of rational functions ([#11199](https://github.com/leanprover-community/mathlib/pull/#11199))

Also provide more API for `ratfunc`, lifting homomorphisms of (polynomial to polynomial) to (ratfunc to ratfunc).



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>
Co-authored-by: Yakov Pechersky <ypechersky@treeline.bio>

### [2022-02-02T21:05:56+00:00](https://github.com/leanprover-community/mathlib/commit/7f3590b4184c03b0ddccc7b5ff7d0a8c88d9f2ac)
feat(field_theory/minpoly): add a nontriviality lemma ([#11781](https://github.com/leanprover-community/mathlib/pull/#11781))

### [2022-02-02T20:04:39+00:00](https://github.com/leanprover-community/mathlib/commit/cdad11046d5b66138327423c101147dc4119e252)
feat(tactic/equiv_rw): enhancing 'equiv_rw' ([#11730](https://github.com/leanprover-community/mathlib/pull/#11730))

Expands the `equiv_rw` API by:
* Making it accept a list of equivalences instead of a single one, if intended
* Allowing multiple targets (closes [#2891](https://github.com/leanprover-community/mathlib/pull/#2891))

Extra: some optimizations.

### [2022-02-02T16:48:16+00:00](https://github.com/leanprover-community/mathlib/commit/41811cdd82492ce0d1118114023ed4028d5953af)
feat(number_theory): von Mangoldt function ([#11727](https://github.com/leanprover-community/mathlib/pull/#11727))

Defines the von Mangoldt function

### [2022-02-02T16:48:15+00:00](https://github.com/leanprover-community/mathlib/commit/c235c612d4defefa7f4d8bc803739a307dcd6985)
refactor(set_theory/ordinal_arithmetic): Simpler `bsup` definition ([#11386](https://github.com/leanprover-community/mathlib/pull/#11386))

We also simplify some existing proofs.

### [2022-02-02T16:48:14+00:00](https://github.com/leanprover-community/mathlib/commit/4d0b398349ddd916bdd864f7b56d1a7bc71965ac)
feat(topology/connected): Connectedness of unions of sets ([#10005](https://github.com/leanprover-community/mathlib/pull/#10005))

* Add multiple results about when unions of sets are (pre)connected. In particular, the union of connected sets indexed by `ℕ` such that each set intersects the next is connected.
* Remove some `set.` prefixes in the file
* There are two minor fixes in other files, presumably caused by the fact that they now import `order.succ_pred`
* Co-authored by Floris van Doorn fpvdoorn@gmail.com



Co-authored-by: Antoine Chambert-Loir <antoine.chambert-loir@math.univ-paris-diderot.fr>
Co-authored-by: Patrick Massot <patrickmassot@free.fr>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2022-02-02T14:51:44+00:00](https://github.com/leanprover-community/mathlib/commit/d6c002c7fd7386a52be1a5a1b23250e9fd5d1c16)
feat(group_theory/p_group): finite p-groups with different p have coprime orders ([#11775](https://github.com/leanprover-community/mathlib/pull/#11775))

### [2022-02-02T14:51:43+00:00](https://github.com/leanprover-community/mathlib/commit/307a456fcd377b0890609bab7537cab45cf1ab5d)
refactor(set_theory/ordinal): Add `covariant_class` instances for ordinal addition and multiplication ([#11678](https://github.com/leanprover-community/mathlib/pull/#11678))

This replaces the old `add_le_add_left`, `add_le_add_right`, `mul_le_mul_left`, `mul_le_mul_right` theorems.

### [2022-02-02T14:51:42+00:00](https://github.com/leanprover-community/mathlib/commit/cd1d839a23ff06ca552e0ec8c44c107cf942a0b7)
feat(order/rel_classes): Unbundled typeclass to state that two relations are the non strict and strict versions ([#11381](https://github.com/leanprover-community/mathlib/pull/#11381))

This defines a Prop-valued mixin `is_nonstrict_strict_order α r s` to state `s a b ↔ r a b ∧ ¬ r b a`.

The idea is to allow dot notation for lemmas about the interaction of `⊆` and `⊂` (which currently do not have a `preorder`-like typeclass). Dot notation on each of them is already possible thanks to unbundled relation classes (which allow to state lemmas for both `set` and `finset`).

### [2022-02-02T13:59:38+00:00](https://github.com/leanprover-community/mathlib/commit/d00276917944c101dbd8146b7342b9eb00b77f57)
refactor(ring_theory): clean up `algebraic_iff_integral` ([#11773](https://github.com/leanprover-community/mathlib/pull/#11773))

The definitions `is_algebraic_iff_integral`, `is_algebraic_iff_integral'` and `algebra.is_algebraic_of_finite` have always been annoying me, so I decided to fix that:
 * The name `is_algebraic_iff_integral'` doesn't explain how it differs from `is_algebraic_iff_integral` (namely that the whole algebra is algebraic, rather than one element), so I renamed it to `algebra.is_algebraic_iff_integral`.
 * The two `is_algebraic_iff_integral` lemmas have an unnecessarily explicit parameter `K`, so I made that implicit
 * `is_algebraic_of_finite` has no explicit parameters (so we always have to use type ascriptions), so I made them explicit
 * Half of the usages of `is_algebraic_of_finite` are of the form `is_algebraic_iff_integral.mp is_algebraic_of_finite`, even though `is_algebraic_of_finite` is proved as `is_algebraic_iff_integral.mpr (some_proof_that_it_is_integral)`, so I split it up into a part showing it is integral, that we can use directly.

As a result, I was able to golf a few proofs.

### [2022-02-02T13:59:37+00:00](https://github.com/leanprover-community/mathlib/commit/07d6d173bc1be7aa14dd3687487127786d7ffc62)
refactor(field_theory/is_alg_closed/basic): Generalize alg closures to commutative rings ([#11703](https://github.com/leanprover-community/mathlib/pull/#11703))



Co-authored-by: chughes <christopher.hughes@inria.fr>
Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2022-02-02T12:30:43+00:00](https://github.com/leanprover-community/mathlib/commit/4db1f9641d8f8d143dabe1504476b0793273e578)
chore(algebra/ne_zero): revert transitivity changes ([#11760](https://github.com/leanprover-community/mathlib/pull/#11760))

The `trans` methods were a disaster for `flt-regular` - this reverts them unless a better solution can be found.

### [2022-02-02T12:30:42+00:00](https://github.com/leanprover-community/mathlib/commit/6c6fbe66709bcf679a52f39800add38d77423e10)
feat(group_theory/subgroup/basic): normalizer condition implies max subgroups normal ([#11597](https://github.com/leanprover-community/mathlib/pull/#11597))

### [2022-02-02T10:56:10+00:00](https://github.com/leanprover-community/mathlib/commit/1ed19a9d4bd5cc4a444f7e7793f7d12ebf116472)
feat(group_theory/nilpotent): p-groups are nilpotent ([#11726](https://github.com/leanprover-community/mathlib/pull/#11726))

### [2022-02-02T10:56:09+00:00](https://github.com/leanprover-community/mathlib/commit/c1d28601406831c1b5fea76291925b6d255c6dbc)
feat(measure_theory/probability_mass_function): Measures of sets under `pmf` monad operations ([#11613](https://github.com/leanprover-community/mathlib/pull/#11613))

This PR adds explicit formulas for the measures of sets under `pmf.pure`, `pmf.bind`, and `pmf.bind_on_support`.

### [2022-02-02T10:56:08+00:00](https://github.com/leanprover-community/mathlib/commit/a687cbfb16dc5379c237f18ded88312c08fc1dae)
feat(field_theory/intermediate_field, ring_theory/.., algebra/algebra… ([#11168](https://github.com/leanprover-community/mathlib/pull/#11168))

If `E` is an subsemiring/subring/subalgebra/intermediate_field and e is an equivalence of the larger semiring/ring/algebra/field, then e induces an equivalence from E to E.map e. We define this equivalence. 





Co-authored-by: Sebastian-Monnet <54352341+Sebastian-Monnet@users.noreply.github.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-02-02T08:53:09+00:00](https://github.com/leanprover-community/mathlib/commit/d5d57849a842021ae4992bd95e92760595008219)
chore(ring_theory/power_basis): add `simps` ([#11766](https://github.com/leanprover-community/mathlib/pull/#11766))

for flt-regular

### [2022-02-02T08:53:07+00:00](https://github.com/leanprover-community/mathlib/commit/2fdc151014d62817cf3039d1f523020953a06823)
refactor(power_series/basic): generalize order to semirings ([#11765](https://github.com/leanprover-community/mathlib/pull/#11765))

There are still some TODOs about generalizing statements downstream of this file.

### [2022-02-02T08:53:06+00:00](https://github.com/leanprover-community/mathlib/commit/a32b0d373cc2235ca418b8832ac6d1e563903e40)
feat(group_theory/p_group): p-groups with different p are disjoint ([#11752](https://github.com/leanprover-community/mathlib/pull/#11752))

### [2022-02-02T08:53:04+00:00](https://github.com/leanprover-community/mathlib/commit/664b5bed63751160ab2d908119be173e333dc197)
feat(group_theory/subgroup/basic): add commute_of_normal_of_disjoint ([#11751](https://github.com/leanprover-community/mathlib/pull/#11751))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-02-02T08:53:03+00:00](https://github.com/leanprover-community/mathlib/commit/a6d70aa72a25797b01a51e894643113e79f0ff11)
feat(order/category/*): `order_dual` as an equivalence of categories ([#11743](https://github.com/leanprover-community/mathlib/pull/#11743))

For `whatever` a category of orders, define
* `whatever.iso_of_order_iso`: Turns an order isomorphism into an equivalence of objects inside `whatever`
* `whatever.to_dual`: `order_dual` as a functor from `whatever` to itself
* `whatever.dual_equiv`: The equivalence of categories between `whatever` and itself induced by `order_dual` both ways
* `order_iso.dual_dual`: The order isomorphism between `α` and `order_dual (order_dual α)`

### [2022-02-02T07:21:06+00:00](https://github.com/leanprover-community/mathlib/commit/400dbb3a2ae5d8749dddf227692b683e5008e300)
refactor(ring_theory/non_zero_divisors): use fun_like ([#11764](https://github.com/leanprover-community/mathlib/pull/#11764))

### [2022-02-02T07:21:05+00:00](https://github.com/leanprover-community/mathlib/commit/c8fd7e33f386360d0ada8ee13fafa71a56c4661d)
chore(measure_theory/covering/besicovitch): Weaker import ([#11763](https://github.com/leanprover-community/mathlib/pull/#11763))

We relax the `set_theory.cardinal_ordinal` import to the weaker `set_theory.ordinal_arithmetic` import. We also fix some trivial spacing issues in the docs.

### [2022-02-02T07:21:04+00:00](https://github.com/leanprover-community/mathlib/commit/a18680a6122e880ef6f7e285ba846d8c523efed6)
chore(topology/continuous_function/ordered): split from `continuous_function/basic` ([#11761](https://github.com/leanprover-community/mathlib/pull/#11761))

Split material about orders out from `continuous_function/basic`, to move that file lower down the import hierarchy.

### [2022-02-02T07:21:03+00:00](https://github.com/leanprover-community/mathlib/commit/366fd9b19ceede17db2c7f836bb268cf26b0130a)
feat(analysis/special_functions): show (2 / π) * x ≤ sin x ([#11724](https://github.com/leanprover-community/mathlib/pull/#11724))

I wasn't entirely sure where to put this - trigonometric/basic is too high on the import graph but here seems to work. 
This is a fairly weak inequality but it can sometimes turn out to be useful, and is important enough to be named!

### [2022-02-02T07:21:01+00:00](https://github.com/leanprover-community/mathlib/commit/5c4c1c088aa5b4d58766fb1a91fb6e258b82bb65)
feat(topology/homotopy): Fundamental groupoid preserves products ([#11459](https://github.com/leanprover-community/mathlib/pull/#11459))

### [2022-02-02T06:20:40+00:00](https://github.com/leanprover-community/mathlib/commit/fa8637064172fd27d2b4c41d3827fada55d64091)
chore(*): Golfed some random theorems ([#11769](https://github.com/leanprover-community/mathlib/pull/#11769))

### [2022-02-02T05:25:14+00:00](https://github.com/leanprover-community/mathlib/commit/8ef783b41c3e75899d60b6a737f695eb3d593bb6)
feat(measure_theory/measure): drop more `measurable_set` args ([#11547](https://github.com/leanprover-community/mathlib/pull/#11547))

Most notably, in `measure_Union_eq_supr`.

### [2022-02-02T02:57:46+00:00](https://github.com/leanprover-community/mathlib/commit/d68b48084c05d5d73b81db1c7cf7561fd25e5711)
chore(linear_algebra): remove `bilinear_map` from imports in `pi` ([#11767](https://github.com/leanprover-community/mathlib/pull/#11767))

Remove `bilinear_map` from imports in `pi`

### [2022-02-01T20:41:27+00:00](https://github.com/leanprover-community/mathlib/commit/343cbd9867860506f5daded9173cc1a3bc064906)
feat(sites/sheaf): simple sheaf condition in terms of limit ([#11692](https://github.com/leanprover-community/mathlib/pull/#11692))

+ Given a presheaf on a site, construct a simple cone for each sieve. The sheaf condition is equivalent to all these cones being limit cones for all covering sieves of the Grothendieck topology. This is made possible by a series of work that mostly removed universe restrictions on limits.

+ Given a sieve over X : C, the diagram of its associated cone is a functor from the full subcategory of the over category C/X consisting of the arrows in the sieve, constructed from the canonical cocone over `forget : over X ⥤ C` with cone point X, which is only now added to mathlib. This cone is simpler than the multifork cone in [`is_sheaf_iff_multifork`](https://leanprover-community.github.io/mathlib_docs/category_theory/sites/sheaf.html#category_theory.presheaf.is_sheaf_iff_multifork). The underlying type of this full subcategory is equivalent to [`grothendieck_topology.cover.arrow`](https://leanprover-community.github.io/mathlib_docs/category_theory/sites/grothendieck.html#category_theory.grothendieck_topology.cover.arrow).

+ This limit sheaf condition might be more convenient to use to do sheafification, which has been done by @adamtopaz using the multifork cone before universes are sufficiently generalized for limits, though I haven't thought about it in detail. It may not be worth refactoring sheafification in terms of this sheaf condition, but we might consider using this if we ever want to do sheafification for more general (e.g. non-concrete) value categories. [#11706](https://github.com/leanprover-community/mathlib/pull/#11706) is another application.

This is based on a [Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/universe.20restriction.20on.20limit/near/260732627) with @adamtopaz.

### [2022-02-01T18:24:10+00:00](https://github.com/leanprover-community/mathlib/commit/ec61182178f58e9de85abbaa2cfb0dc9d224919a)
feat(algebra/group_power): relate square equality and absolute value equality ([#11683](https://github.com/leanprover-community/mathlib/pull/#11683))

### [2022-02-01T12:46:25+00:00](https://github.com/leanprover-community/mathlib/commit/23e0e290f2045457163559b99aebd212d78f0ef2)
chore(*): register global fact instances ([#11749](https://github.com/leanprover-community/mathlib/pull/#11749))

We register globally some fact instances which are necessary for integration or euclidean spaces. And also the fact that 2 and 3 are prime. See https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/euclidean_space.20error/near/269992165

### [2022-02-01T11:04:30+00:00](https://github.com/leanprover-community/mathlib/commit/2508cbd91ae67fdb3f6f089e01de4df83ee4c8b8)
feat(model_theory/basic.lean): Elementary embeddings and elementary substructures ([#11089](https://github.com/leanprover-community/mathlib/pull/#11089))

Defines elementary embeddings between structures
Defines when substructures are elementary
Provides lemmas about preservation of realizations of terms and formulas under various maps

### [2022-02-01T10:02:45+00:00](https://github.com/leanprover-community/mathlib/commit/94a700f330de1f19563bcbab5fde7c39fdf326af)
chore(set_theory/ordinal_arithmetic): Remove redundant explicit argument ([#11757](https://github.com/leanprover-community/mathlib/pull/#11757))

### [2022-02-01T10:02:44+00:00](https://github.com/leanprover-community/mathlib/commit/ca2a99ddde1e4f949924326472d461052be6418c)
feat(set_theory/ordinal_arithmetic): Normal functions evaluated at `ω` ([#11687](https://github.com/leanprover-community/mathlib/pull/#11687))

### [2022-02-01T09:01:20+00:00](https://github.com/leanprover-community/mathlib/commit/cbad62c59418a266bbdde8b0fc18c2199b240b84)
feat(set_theory/{ordinal_arithmetic, cardinal_ordinal}): Ordinals aren't a small type ([#11756](https://github.com/leanprover-community/mathlib/pull/#11756))

We substantially golf and extend some results previously in `cardinal_ordinal.lean`.

### [2022-02-01T08:32:51+00:00](https://github.com/leanprover-community/mathlib/commit/30dcd70e31a5e18abf6f20d14c8d078338b3beaf)
feat(number_theory/cyclotomic/zeta): add lemmas ([#11753](https://github.com/leanprover-community/mathlib/pull/#11753))

Various lemmas about `zeta`.

From flt-regular.



Co-authored-by: Eric <ericrboidi@gmail.com>

### [2022-02-01T07:42:44+00:00](https://github.com/leanprover-community/mathlib/commit/350ba8dbbe83d6c24cb6f7fb95cc22cf42fef725)
feat(data/two_pointing): Two pointings of a type ([#11648](https://github.com/leanprover-community/mathlib/pull/#11648))

Define `two_pointing α` as the type of two pointings of `α`. This is a Type-valued structure version of `nontrivial`.

### [2022-02-01T06:40:21+00:00](https://github.com/leanprover-community/mathlib/commit/5582d84facf235d251092e1e74598f781574fc1c)
feat(ring_theory/localization): fraction rings of algebraic extensions are algebraic ([#11717](https://github.com/leanprover-community/mathlib/pull/#11717))




Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2022-02-01T02:13:10+00:00](https://github.com/leanprover-community/mathlib/commit/4b9f048232d59ebb086198d50dc37d1b58873d41)
feat(set_theory/principal): Define `principal` ordinals ([#11679](https://github.com/leanprover-community/mathlib/pull/#11679))

An ordinal `o` is said to be principal or indecomposable under an operation when the set of ordinals less than it is closed under that operation. In standard mathematical usage, this term is almost exclusively used for additive and multiplicative principal ordinals.

For simplicity, we break usual convention and regard 0 as principal.

### [2022-02-01T00:59:42+00:00](https://github.com/leanprover-community/mathlib/commit/e37daad5a168786e066050a8fe1d7f065f652c90)
feat(linear_algebra/sesquilinear_form): Add orthogonality properties ([#10992](https://github.com/leanprover-community/mathlib/pull/#10992))

Generalize lemmas about orthogonality from bilinear forms to sesquilinear forms.

### [2022-02-01T00:08:19+00:00](https://github.com/leanprover-community/mathlib/commit/b52cb02c0e896c9214613bd823c007018cd75bee)
feat(analysis/special_functions/{log, pow}): add log_base ([#11246](https://github.com/leanprover-community/mathlib/pull/#11246))

Adds `real.logb`, the log base `b` of `x`, defined as `log x / log b`. Proves that this is related to `real.rpow`.

### [2022-01-31T22:22:23+00:00](https://github.com/leanprover-community/mathlib/commit/731d93b3ec5dff94a763e196f1eb64005832f44e)
feat(group_theory/sylow): the normalizer is self-normalizing ([#11638](https://github.com/leanprover-community/mathlib/pull/#11638))

with hat tip to Thomas Browning for a proof on Zuplip.

### [2022-01-31T22:22:22+00:00](https://github.com/leanprover-community/mathlib/commit/59643439d4821e2ce2e7898a1f3b9e50fbf447b5)
feat(data/equiv): define `mul_equiv_class` ([#10760](https://github.com/leanprover-community/mathlib/pull/#10760))

This PR defines a class of types of multiplicative (additive) equivalences, along the lines of [#9888](https://github.com/leanprover-community/mathlib/pull/#9888).



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2022-01-31T20:42:48+00:00](https://github.com/leanprover-community/mathlib/commit/a0bb6ea92e201bcaee4c86d48babd3648d682bc6)
feat(algebraic_geometry): Open covers of the fibred product. ([#11733](https://github.com/leanprover-community/mathlib/pull/#11733))




Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2022-01-31T20:42:46+00:00](https://github.com/leanprover-community/mathlib/commit/6130e5713d15828aa385639ab3138b0821caafb2)
feat(topology/metric_space/basic): add some lemmas about spheres ([#11719](https://github.com/leanprover-community/mathlib/pull/#11719))

### [2022-01-31T20:42:45+00:00](https://github.com/leanprover-community/mathlib/commit/ca17a18177d30cc53a774992141bd5b57f54e52b)
feat(algebra/pointwise): introduce `canonically_ordered_comm_semiring` on `set_semiring` ... ([#11580](https://github.com/leanprover-community/mathlib/pull/#11580))

... assuming multiplication is commutative (there is no `canonically_ordered_`~~comm~~`_semiring` structure).

Also prove the relevant `no_zero_divisors` and `covariant_class` properties of addition and multiplication.



Co-authored-by: Damiano Testa <maskal@CLD-E854D68C.ads.warwick.ac.uk>
Co-authored-by: Eric Rodriguez <ericrboidi@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-01-31T20:42:43+00:00](https://github.com/leanprover-community/mathlib/commit/719b7b065bc1dfbd767da62055c7ca400e9b249c)
feat(set_theory/ordinal_arithmetic, set_theory/cardinal_ordinal): `deriv` and `aleph` are enumerators ([#10987](https://github.com/leanprover-community/mathlib/pull/#10987))

We prove `deriv_eq_enum_fp`, `ord_aleph'_eq_enum_card`, and `ord_aleph_eq_enum_card`.

### [2022-01-31T19:55:53+00:00](https://github.com/leanprover-community/mathlib/commit/750f53c88373aecd6109592d716dddcae4fcbd05)
feat(analysis/seminorm): define the topology induced by a family of seminorms ([#11604](https://github.com/leanprover-community/mathlib/pull/#11604))

Define the topology induced by a single seminorm and by a family of seminorms and show that boundedness of linear maps implies continuity.

### [2022-01-31T15:42:13+00:00](https://github.com/leanprover-community/mathlib/commit/ccbb84878130b1ebb3b5dc4f7283fdd8fc9ec0a7)
feat(set_theory/ordinal_arithmetic): `lt_add_of_limit` ([#11748](https://github.com/leanprover-community/mathlib/pull/#11748))

Both `lt_mul_of_limit` and `lt_opow_of_limit` already existed, so this exclusion is odd to say the least.

### [2022-01-31T15:42:12+00:00](https://github.com/leanprover-community/mathlib/commit/c0be8dcbac2b4608f40505d05332b7bd3e515823)
feat(model_theory/basic): define quotient structures ([#11747](https://github.com/leanprover-community/mathlib/pull/#11747))

Defines prestructures and quotient structures

### [2022-01-31T15:42:10+00:00](https://github.com/leanprover-community/mathlib/commit/792d3e56b188d40e481de8ce030708f43821ed3e)
feat(group_theory/order_of_element): pow_eq_pow_iff_modeq ([#11737](https://github.com/leanprover-community/mathlib/pull/#11737))

From flt-regular.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-01-31T15:42:09+00:00](https://github.com/leanprover-community/mathlib/commit/76b2a0ec79fbe3d19003833596a4486a6501ca28)
feat(group_theory/nilpotent): abelian iff nilpotency class ≤ 1 ([#11718](https://github.com/leanprover-community/mathlib/pull/#11718))

### [2022-01-31T15:42:08+00:00](https://github.com/leanprover-community/mathlib/commit/ff027743248c9c91fdffa18a3ad573a28d20e0d0)
feat(algebra/squarefree): norm_num extension for squarefree ([#11666](https://github.com/leanprover-community/mathlib/pull/#11666))

Adds two methods for computing `squarefree`: an improved algorithm for VM computation of squarefreedom via the `min_sq_fac` function, and a proof procedure which follows the same evaluation strategy as a `norm_num` extension.

### [2022-01-31T15:42:06+00:00](https://github.com/leanprover-community/mathlib/commit/c04daaf40beb43dacb1680fd4ea7be5363dca0cf)
feat(measure_theory): typeclass for measures positive on nonempty opens ([#11652](https://github.com/leanprover-community/mathlib/pull/#11652))

Add a typeclass for measures positive on nonempty opens, migrate `is(_add?)_haar_measure` to this API.



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2022-01-31T15:42:05+00:00](https://github.com/leanprover-community/mathlib/commit/d6440a84bd989c8743433eb09dac17b9dfea62d4)
feat(group_theory/nilpotent): add lemmas about `G / center G` ([#11592](https://github.com/leanprover-community/mathlib/pull/#11592))

in particular its nilpotency class and an induction principle based on
that.

### [2022-01-31T15:42:04+00:00](https://github.com/leanprover-community/mathlib/commit/06bb5b66abf2af0f67d2d35e993915942f1db836)
feat(topology/nhds_set): define neighborhoods of a set ([#11520](https://github.com/leanprover-community/mathlib/pull/#11520))

* Co-authored by @PatrickMassot
* From the sphere eversion project

### [2022-01-31T15:42:02+00:00](https://github.com/leanprover-community/mathlib/commit/366d13ef4281f9a7b45eb69d557a2de744cc8873)
feat(scripts/lint_style): Add a check for unfreeze_local_instances ([#11509](https://github.com/leanprover-community/mathlib/pull/#11509))



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2022-01-31T14:14:34+00:00](https://github.com/leanprover-community/mathlib/commit/ada43f00e9b9a3f4d6b1eecf2784383816a29cf4)
feat(order/hom/complete_lattice): Complete lattice homomorphisms ([#11741](https://github.com/leanprover-community/mathlib/pull/#11741))

Define frame homs and complete lattice homs using the `fun_like` along with weaker homomorphisms that only preserve `Sup`, `Inf`.

### [2022-01-31T14:14:32+00:00](https://github.com/leanprover-community/mathlib/commit/08fed82d697467bc4b9592fbf40e426006960564)
feat(category_theory/preadditive): the Yoneda embedding for preadditive categories ([#11740](https://github.com/leanprover-community/mathlib/pull/#11740))

### [2022-01-31T14:14:30+00:00](https://github.com/leanprover-community/mathlib/commit/323287e662eeb0795358e4479cdf7db86d77ee28)
feat(data/polynomial/reverse): lemmas about evaluating reversed polynomials ([#11705](https://github.com/leanprover-community/mathlib/pull/#11705))

### [2022-01-31T14:14:27+00:00](https://github.com/leanprover-community/mathlib/commit/bb2b58ed59877f6940ecbf10051da141ba8b8887)
feat(data/{nat,int}/parity): add division lemmas ([#11570](https://github.com/leanprover-community/mathlib/pull/#11570))

Add lemmas of the form `even n → n / 2 * 2 = n` and `odd n → n / 2 * 2 + 1 = n`

### [2022-01-31T14:14:26+00:00](https://github.com/leanprover-community/mathlib/commit/6e016d212e539d00f5893a71b57407c1e648f5a4)
feat(linear_algebra/{tensor,exterior,clifford}_algebra): these algebras are graded by powers of the submodules of their generators ([#11542](https://github.com/leanprover-community/mathlib/pull/#11542))

This shows that:

* The tensor and exterior algebras are `nat`-graded algebras, with each grade `n` corresponding to the submodule `(ι R).range ^ n`
* The clifford algebra is a superalgebra (`zmod 2`-graded algebra), with even and odd grades corresponding to even and odd powers of the submodule `(ι Q).range`

Eventually we'll also want to show that the tensor algebra is also graded with pieces in `pi_tensor_prod`, but that's a job for another time.

### [2022-01-31T12:36:17+00:00](https://github.com/leanprover-community/mathlib/commit/45cfb2541181414af81f663ec0e3ce79e7f40931)
refactor(order/bounded_order): Use `is_min`/`is_max` ([#11408](https://github.com/leanprover-community/mathlib/pull/#11408))

Golf `order.bounded_order` and `data.set.basic` using `is_min`/`is_max`.

### [2022-01-31T11:21:34+00:00](https://github.com/leanprover-community/mathlib/commit/2e1d8d67a0f3593adf4a7f15c318c9a3cd6d65e7)
feat(ring_theory/roots_of_unity): `fun_like` support ([#11735](https://github.com/leanprover-community/mathlib/pull/#11735))

- feat(ring_theory/roots_of_unity): ring_hom_class
- oops these could've been monoid homs from the start

### [2022-01-31T11:21:33+00:00](https://github.com/leanprover-community/mathlib/commit/406719e90bfe528a3f8613df1a87879f48677460)
feat(order/hom/lattice): Composition of lattice homs ([#11676](https://github.com/leanprover-community/mathlib/pull/#11676))

Define `top_hom.comp`, `bot_hom.comp`, `sup_hom.comp`, `inf_hom.comp`, `lattice_hom.comp`, `bounded_lattice_hom.comp`, `order_hom.to_lattice_hom`.

### [2022-01-31T09:46:30+00:00](https://github.com/leanprover-community/mathlib/commit/16274f60b628ea317b24424730b8bda44527a295)
chore(analysis/inner_product_space/lax_milgram): docs fixes ([#11745](https://github.com/leanprover-community/mathlib/pull/#11745))

A couple of corrections, and a couple of additions of namespaces to docstrings so that they get hyperlinks when docgen is run.

### [2022-01-31T09:46:29+00:00](https://github.com/leanprover-community/mathlib/commit/43887435b6445eccd2d73c9711391c164b457496)
feat(algebra/algebra/basic): add 1-related lemmas for `aut` ([#11738](https://github.com/leanprover-community/mathlib/pull/#11738))

from flt-regular

### [2022-01-31T09:46:28+00:00](https://github.com/leanprover-community/mathlib/commit/7468d8dd05bd06c4bd2219ce468a2c42ed9391e4)
feat(measure_theory/integral/lebesgue): weaken assumptions for with_density lemmas ([#11711](https://github.com/leanprover-community/mathlib/pull/#11711))

We state more precise versions of some lemmas about the measure `μ.with_density f`, making it possible to remove some assumptions down the road. For instance, the lemma
```lean
  integrable g (μ.with_density f) ↔ integrable (λ x, g x * (f x).to_real) μ
```
currently requires the measurability of `g`, while we can completely remove it with the new lemmas.

We also make `lintegral` irreducible.

### [2022-01-31T09:46:27+00:00](https://github.com/leanprover-community/mathlib/commit/0c0ab69d68929501cf2f88f8400470fcc5fa5ef7)
feat(topology/algebra/continuous_monoid_hom): Add `topological_group` instance ([#11707](https://github.com/leanprover-community/mathlib/pull/#11707))

This PR proves that continuous monoid homs form a topological group.

### [2022-01-31T09:46:26+00:00](https://github.com/leanprover-community/mathlib/commit/b3ad3f2a23e7eb16f1c83dff2679cac9ab78dc37)
feat(data/set/lattice): review ([#11672](https://github.com/leanprover-community/mathlib/pull/#11672))

* generalize `set.Union_coe_set` and `set.Inter_coe_set` to dependent functions;
* add `bInter_Union`, `sUnion_Union`;
* drop `sUnion_bUnion`, `sInter_bUnion`.

### [2022-01-31T09:17:53+00:00](https://github.com/leanprover-community/mathlib/commit/6319a2382d6a31b4ffef73d4c2d461997ce9cc36)
feat(number_theory/cyclotomic): simplify `ne_zero`s ([#11715](https://github.com/leanprover-community/mathlib/pull/#11715))

For flt-regular.

### [2022-01-31T07:25:05+00:00](https://github.com/leanprover-community/mathlib/commit/8a67cf51f3370b875fc190393ba53f9ed71908e2)
feat(ring_theory/roots_of_unity): turn `is_primitive_root` into a member of `roots_of_unity` ([#11739](https://github.com/leanprover-community/mathlib/pull/#11739))

from flt-regular



Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-01-31T00:40:09+00:00](https://github.com/leanprover-community/mathlib/commit/50cdb957e5ad541b6af15b999fd69722f7128ad9)
fix(tactic/suggest): make `library_search` aware of definition of `ne` ([#11742](https://github.com/leanprover-community/mathlib/pull/#11742))

`library_search` wasn't including results like `¬ a = b` to solve goals like `a ≠ b` and vice-versa.

Closes [#3428](https://github.com/leanprover-community/mathlib/pull/#3428)

### [2022-01-30T23:01:38+00:00](https://github.com/leanprover-community/mathlib/commit/07735b8a1cd9614a941277779cae035166310aa1)
fix(tactic/squeeze_simp): "match failed" when `simp` works ([#11659](https://github.com/leanprover-community/mathlib/pull/#11659))

Closes [#11196](https://github.com/leanprover-community/mathlib/pull/#11196).

Co-authored-by: Arthur Paulino <arthurleonardo.ap@gmail.com>



Co-authored-by: Arthur Paulino <arthurleonardo.ap@gmail.com>
Co-authored-by: Eric Rodriguez <37984851+ericrbg@users.noreply.github.com>

### [2022-01-30T18:57:22+00:00](https://github.com/leanprover-community/mathlib/commit/b0fc10a14059ad99b2349c3870e6a91e527ebcbd)
chore(ring_theory/polynomial/chebyshev): simplify argument using new `linear_combination` tactic ([#11736](https://github.com/leanprover-community/mathlib/pull/#11736))

cc @agoldb10 @robertylewis

### [2022-01-30T15:41:10+00:00](https://github.com/leanprover-community/mathlib/commit/97f61dfdf79f6c4b9b39852659c67c598b13a016)
feat(group_theory/sylow): preimages of sylow groups ([#11722](https://github.com/leanprover-community/mathlib/pull/#11722))

Co-authored-by: tb65536 <tb65536@uw.edu>

### [2022-01-30T14:09:00+00:00](https://github.com/leanprover-community/mathlib/commit/02c720eec07654e254b39a2ab293af5f1c97a0be)
chore(*): Rename `prod_dvd_prod` ([#11734](https://github.com/leanprover-community/mathlib/pull/#11734))

In [#11693](https://github.com/leanprover-community/mathlib/pull/#11693) I introduced the counterpart for `multiset` of `finset.prod_dvd_prod`.  It makes sense for these to have the same name, but there's already a different lemma called `multiset.prod_dvd_prod`, so the new lemma was named `multiset.prod_dvd_prod_of_dvd` instead.  As discussed with @riccardobrasca and @ericrbg at [#11693](https://github.com/leanprover-community/mathlib/pull/#11693), this PR brings the names of the two counterpart lemmas into alignment, and also renames `multiset.prod_dvd_prod` to something more informative.

Renaming as follows:
`multiset.prod_dvd_prod` to `multiset.prod_dvd_prod_of_le`
`finset.prod_dvd_prod` to `finset.prod_dvd_prod_of_dvd`

### [2022-01-30T11:14:54+00:00](https://github.com/leanprover-community/mathlib/commit/a248befb6538718bf86bd9347b54d90a5c664f28)
feat(data/pnat/basic): 0 < n as a fact ([#11729](https://github.com/leanprover-community/mathlib/pull/#11729))

### [2022-01-30T10:31:37+00:00](https://github.com/leanprover-community/mathlib/commit/dde904e09da2a6d2153e49b76c5c88f254400f63)
chore(ring_theory/localization) weaken hypothesis from field to comm_ring ([#11713](https://github.com/leanprover-community/mathlib/pull/#11713))

also making `B` an explicit argument





Co-authored-by: chughes <christopher.hughes@inria.fr>

### [2022-01-30T09:39:36+00:00](https://github.com/leanprover-community/mathlib/commit/1ea49d0f3d09626202f4f17074f36323ea9b5d92)
feat(tactic/linear_combination): add tactic for combining equations ([#11646](https://github.com/leanprover-community/mathlib/pull/#11646))

This new tactic attempts to prove a target equation by creating a linear combination of a list of equalities.  The name of this tactic is currently `linear_combination`, but I am open to other possible names.

An example of how to use this tactic is shown below:

```
example (x y : ℤ) (h1 : x*y + 2*x = 1) (h2 : x = y) :
  x*y = -2*y + 1 :=
by linear_combination (h1, 1) (h2, -2)
```



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2022-01-30T07:28:22+00:00](https://github.com/leanprover-community/mathlib/commit/73e45c62cfa63a945d595f93da1950b718108227)
chore(analysis/normed_space/star): create new folder for normed star rings ([#11732](https://github.com/leanprover-community/mathlib/pull/#11732))

This PR moves the file `analysis/normed_space/star.lean` to the new folder `analysis/normed_space/star` (where it of course becomes `basic.lean`).

I expect a lot of material about C*-algebras to land in this folder in the (hopefully) near future.

### [2022-01-30T05:38:03+00:00](https://github.com/leanprover-community/mathlib/commit/09d4f48512ad521e28620361764e91df1641993c)
chore(measure_theory/function/conditional_expectation): fix typo ([#11731](https://github.com/leanprover-community/mathlib/pull/#11731))

### [2022-01-30T00:12:37+00:00](https://github.com/leanprover-community/mathlib/commit/af1290cb2ad71a48c622d57858ce1a831b96242b)
feat(field_theory/ratfunc): rational functions as Laurent series ([#11276](https://github.com/leanprover-community/mathlib/pull/#11276))

### [2022-01-29T21:10:10+00:00](https://github.com/leanprover-community/mathlib/commit/ff352187794adee2d60c759f57f6627ef456826e)
feat(analysis/convex/topology): add lemmas ([#11615](https://github.com/leanprover-community/mathlib/pull/#11615))

### [2022-01-29T20:28:18+00:00](https://github.com/leanprover-community/mathlib/commit/4085363dfadc3429ecc611428ff1b077d03f511e)
feat(number_theory/prime_counting): The prime counting function ([#9080](https://github.com/leanprover-community/mathlib/pull/#9080))

With an eye to implementing [this proof](https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.238002/near/251178921), I am adding a file to define the prime counting function and prove a simple upper bound on it.



Co-authored-by: Vladimir Goryachev <gor050299@gmail.com>
Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: YaelDillies <yael.dillies@gmail.com>
Co-authored-by: Kyle Miller <kmill31415@gmail.com>
Co-authored-by: Eric <ericrboidi@gmail.com>

### [2022-01-29T19:47:13+00:00](https://github.com/leanprover-community/mathlib/commit/74250a0a1fa9ccb369bddcccd185d38dcbbb1aab)
chore(representation_theory/maschke): remove recover ([#11721](https://github.com/leanprover-community/mathlib/pull/#11721))

### [2022-01-29T14:01:52+00:00](https://github.com/leanprover-community/mathlib/commit/49b8b91a05c759907875481b85576c103c53a99a)
feat(data/fintype/order): `bool` is a boolean algebra ([#11694](https://github.com/leanprover-community/mathlib/pull/#11694))

Provide the `boolean_algebra` instance for `bool` and use the machinery from `data.fintype.order` to deduce `complete_boolean_algebra bool` and `complete_linear_order bool`.

### [2022-01-29T03:47:21+00:00](https://github.com/leanprover-community/mathlib/commit/fc4e471b1466eafbdb1649ce6be7ecef887fffcb)
feat(measure_theory/group/basic): make is_[add|mul]_[left|right]_invariant classes ([#11655](https://github.com/leanprover-community/mathlib/pull/#11655))

* Simplify the definitions of these classes
* Generalize many results about topological groups to measurable groups (still to do in `group/prod`)
* Simplify some proofs
* Make function argument of `integral_mul_[left|right]_eq_self` explicit (otherwise it is hard to apply this lemma in case the function is not a variable)



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-01-29T01:17:00+00:00](https://github.com/leanprover-community/mathlib/commit/44105f844202555645b90056efc921128e996ddb)
feat(analysis/inner_product_space): proof of the Lax Milgram theorem ([#11491](https://github.com/leanprover-community/mathlib/pull/#11491))

My work on the Lax Milgram theorem, as suggested by @hrmacbeth. Done following the [slides from Peter Howard (Texas A&M University)](https://www.math.tamu.edu/~phoward/m612/s20/elliptic2.pdf).

Closes [#10213](https://github.com/leanprover-community/mathlib/pull/#10213).

### [2022-01-29T00:33:42+00:00](https://github.com/leanprover-community/mathlib/commit/f51d6bfd59f628f9cbe48f2336be0e4785c912dc)
chore(ring_theory/polynomial/tower): weaken comm_semiring hypothesis to semiring ([#11712](https://github.com/leanprover-community/mathlib/pull/#11712))

…to semiring

### [2022-01-29T00:04:55+00:00](https://github.com/leanprover-community/mathlib/commit/601ea91402d8a1a535e2f12f49dce917f672fa8a)
feat(data/nat/mul_ind): generalise rec_on_prime to assume positivity ([#11714](https://github.com/leanprover-community/mathlib/pull/#11714))

This makes the multiplicative induction principles slightly stronger, as the coprimality part can assume the given values are positive.

### [2022-01-28T16:51:38+00:00](https://github.com/leanprover-community/mathlib/commit/d58ce5ac3348d327c8bfa583a68365fc36a824ee)
feat(number_theory/cyclotomic/zeta): add is_cyclotomic_extension.zeta ([#11695](https://github.com/leanprover-community/mathlib/pull/#11695))

We add `is_cyclotomic_extension.zeta n A B`: any primitive `n`-th root of unity in a cyclotomic extension.

From flt-regular.

### [2022-01-28T16:51:36+00:00](https://github.com/leanprover-community/mathlib/commit/02c31460b0092c948243d98e75d56e807af9c062)
feat(analysis/complex): removable singularity theorem ([#11686](https://github.com/leanprover-community/mathlib/pull/#11686))

### [2022-01-28T16:51:34+00:00](https://github.com/leanprover-community/mathlib/commit/7e8cb757df04d0b6e413ef18784dff73c72e01a1)
refactor(algebra/linear_ordered_comm_group_with_zero, *): mostly take advantage of the new classes for `linear_ordered_comm_group_with_zero` ([#7645](https://github.com/leanprover-community/mathlib/pull/#7645))

This PR continues the refactor of the `ordered` hierarchy, begun in [#7371](https://github.com/leanprover-community/mathlib/pull/#7371).

In this iteration, I weakened the assumptions of the lemmas in `ordered_group`.  The bulk of the changes are in the two files

* `algebra/ordered_monoid_lemmas`
* `algebra/ordered_group`

while the remaining files have been edited mostly to accommodate for name/assumption changes.

I have tried to be careful to maintain the **exact** assumptions of each one of the `norm_num` and `linarith` lemmas.  For this reason, some lemmas have a proof that is simply an application of a lemma with weaker assumptions.  The end result is that no lemma whose proof involved a call to `norm_num` or `linarith` broke.

### [2022-01-28T15:19:21+00:00](https://github.com/leanprover-community/mathlib/commit/dddf6ebe413b066f0af72367d0ef762c577cb39c)
feat(data/fintype/order): More and better instances ([#11702](https://github.com/leanprover-community/mathlib/pull/#11702))

In a fintype, this allows to promote 
* `distrib_lattice` to `complete_distrib_lattice`
* `boolean_algebra` to `complete_boolean_algebra`

Also strengthen
* `fintype.to_order_bot`
* `fintype.to_order_top`
* `fintype.to_bounded_order`
* `complete_linear_order.to_conditionally_complete_linear_order_bot`

### [2022-01-28T15:19:20+00:00](https://github.com/leanprover-community/mathlib/commit/6ca08e81f0323bdec6ffbb93b6ae092c6f220228)
feat(algebra/ne_zero): add `coe_trans` instance ([#11700](https://github.com/leanprover-community/mathlib/pull/#11700))

This is super-useful for `flt_regular`, meaning we don't have to write all of our lemmata as `ne_zero ((n : ℕ) : R)`.

### [2022-01-28T15:19:19+00:00](https://github.com/leanprover-community/mathlib/commit/de27bfc8645987fd0563700dae2a08e915f40c92)
feat(algebra/big_operators/{basic,multiset}): two `multiset.prod` lemmas ([#11693](https://github.com/leanprover-community/mathlib/pull/#11693))

Two lemmas suggested by Riccardo Brasca on [#11572](https://github.com/leanprover-community/mathlib/pull/#11572):

`to_finset_prod_dvd_prod`: `S.to_finset.prod id ∣ S.prod`

`prod_dvd_prod_of_dvd`: For any `S : multiset α`, if `∀ a ∈ S, g1 a ∣ g2 a` then `S.prod g1 ∣ S.prod g2` (a counterpart to `finset.prod_dvd_prod`)

### [2022-01-28T15:19:17+00:00](https://github.com/leanprover-community/mathlib/commit/c50a60de8e0e5123f3fac58c4922c25ac87a86a2)
feat(analysis/convex/specific_functions): sin is strictly concave ([#11688](https://github.com/leanprover-community/mathlib/pull/#11688))

### [2022-01-28T15:19:16+00:00](https://github.com/leanprover-community/mathlib/commit/92c64c4502e84f5e8f87c37877373d7b7f2fe765)
feat(group_theory/nilpotent): add upper_central_series_eq_top_iff_nilpotency_class_le ([#11670](https://github.com/leanprover-community/mathlib/pull/#11670))

and the analogue for the lower central series.

### [2022-01-28T15:19:15+00:00](https://github.com/leanprover-community/mathlib/commit/7a485b1be4687b98c620a93dfd628d98213c2c4c)
feat(topology/continuous_function/algebra): `C(α, β)` is a topological group ([#11665](https://github.com/leanprover-community/mathlib/pull/#11665))

This PR proves that `C(α, β)` is a topological group. I had to borrow the fix from [#11229](https://github.com/leanprover-community/mathlib/pull/#11229) to avoid a diamond.

### [2022-01-28T15:19:14+00:00](https://github.com/leanprover-community/mathlib/commit/113ab32ff2491a539b6fe9d6b51ba4a675f0efb6)
feat(ring_theory/power_series/basic): API about inv ([#11617](https://github.com/leanprover-community/mathlib/pull/#11617))

Also rename protected lemmas
`mul_inv`  to `mul_inv_cancel`
`inv_mul` to `inv_mul_cancel`

### [2022-01-28T15:19:13+00:00](https://github.com/leanprover-community/mathlib/commit/36dd6a66e6121cd7d82362b40c5a4756fb1e6f11)
feat(algebra/squarefree): squarefree iff no square irreducible divisors ([#11544](https://github.com/leanprover-community/mathlib/pull/#11544))

### [2022-01-28T15:19:11+00:00](https://github.com/leanprover-community/mathlib/commit/fb9c5d308fb3e365eefde97ef653c6bc56fa1d15)
feat(cyclotomic/basic): diverse roots of unity lemmas ([#11473](https://github.com/leanprover-community/mathlib/pull/#11473))

From flt-regular.

### [2022-01-28T15:19:10+00:00](https://github.com/leanprover-community/mathlib/commit/91a1afb4d2275660d0cd2b3e00c814b2d4f93ae2)
feat(algebraic_geometry): The function field is the fraction field of stalks ([#11129](https://github.com/leanprover-community/mathlib/pull/#11129))



Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2022-01-28T15:19:08+00:00](https://github.com/leanprover-community/mathlib/commit/0b6330dee24159cb705af4cfa223874b17fc1926)
feat(data/finsupp/interval): Finitely supported functions to a locally finite order are locally finite ([#10930](https://github.com/leanprover-community/mathlib/pull/#10930))

... when the codomain itself is locally finite.

This allows getting rid of `finsupp.Iic_finset`.

### [2022-01-28T13:31:09+00:00](https://github.com/leanprover-community/mathlib/commit/445be96ef166ec79685997878a1d6ca049f8aaf2)
fix(tactic/squeeze): `squeeze_simp` providing invalid suggestions ([#11696](https://github.com/leanprover-community/mathlib/pull/#11696))

`squeeze_simp` was previously permuting the lemmas passed to `simp`, which caused failures in cases where the lemma order mattered. The fix is to ensure that `squeeze_simp` does not change the order of passed lemmas.

Closes [#3097](https://github.com/leanprover-community/mathlib/pull/#3097)

### [2022-01-28T13:31:08+00:00](https://github.com/leanprover-community/mathlib/commit/3837abcbd56e2b1c116b10a88767499699945de1)
feat(data/list/*): subperm_singleton_iff ([#11680](https://github.com/leanprover-community/mathlib/pull/#11680))

### [2022-01-28T13:31:06+00:00](https://github.com/leanprover-community/mathlib/commit/1e44add0993b3b620c7dec7a74eaba73b398e998)
feat(order/filter/countable_Inter): review ([#11673](https://github.com/leanprover-community/mathlib/pull/#11673))

- drop `_sets` in more names;
- add `filter.of_countable_Inter` and instances for
  `filter.map`/`filter.comap`;
- add docs.

### [2022-01-28T13:31:05+00:00](https://github.com/leanprover-community/mathlib/commit/680733c3ce2edd22b79926c009697bcabf224586)
feat(order/hom/basic): `compl` as a dual order isomorphism ([#11630](https://github.com/leanprover-community/mathlib/pull/#11630))

### [2022-01-28T13:31:04+00:00](https://github.com/leanprover-community/mathlib/commit/ff241e13db128ffeca044652894a062bc358942a)
feat(order/max): Predicate for minimal/maximal elements, typeclass for orders without bottoms ([#11618](https://github.com/leanprover-community/mathlib/pull/#11618))

This defines

* `is_min`: Predicate for a minimal element
* `is_max`: Predicate for a maximal element
* `no_bot_order`: Predicate for an order without bottoms
* `no_top_order`: Predicate for an order without tops

### [2022-01-28T13:31:02+00:00](https://github.com/leanprover-community/mathlib/commit/2fa59776f4c2390b6b93ee03cd1e4df4400803b2)
feat(category_theory/bicategory/natural_transformation): define oplax natural transformations ([#11404](https://github.com/leanprover-community/mathlib/pull/#11404))

This PR define oplax natural transformations between oplax functors.

We give a composition and a category structure on oplax natural transformations.

### [2022-01-28T13:31:00+00:00](https://github.com/leanprover-community/mathlib/commit/b9db169666fd3b3b3ceaf37a12ed0e7f4f6d4209)
chore(order/locally_finite): fill in finset interval API ([#11338](https://github.com/leanprover-community/mathlib/pull/#11338))

A bunch of statements about finset intervals, mimicking the set interval API and mostly proved using it. `simp` attributes are  chosen as they were for sets. Also some golf.



Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-01-28T13:03:39+00:00](https://github.com/leanprover-community/mathlib/commit/924aab1533f65e008c77335acbfdeaf8ad818e31)
feat(ring_theory/polynomial/eisenstein): add miscellaneous results about Eisenstein polynomials ([#11697](https://github.com/leanprover-community/mathlib/pull/#11697))

Miscellaneous results about Eisenstein polynomials

From flt-regular.

### [2022-01-28T11:11:22+00:00](https://github.com/leanprover-community/mathlib/commit/e290b29c6f516516bc4d9179282aa4a794c01565)
feat(data/quot): add subsingleton instances ([#11668](https://github.com/leanprover-community/mathlib/pull/#11668))

### [2022-01-28T08:38:09+00:00](https://github.com/leanprover-community/mathlib/commit/bf347f9cfd404e0380b61c4a32e8fbb25465d0e6)
feat(algebraic_geometry): Fiber products of schemes ([#10605](https://github.com/leanprover-community/mathlib/pull/#10605))




Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2022-01-28T07:26:07+00:00](https://github.com/leanprover-community/mathlib/commit/67dcdef25397eedde255db0876b9c55eab2a62a2)
feat(data/mv_polynomial/derivation): derivations of `mv_polynomial`s ([#9145](https://github.com/leanprover-community/mathlib/pull/#9145))



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-01-28T06:58:36+00:00](https://github.com/leanprover-community/mathlib/commit/6687cf1581f7d3ad7e3c0bf072b96d7ebcda233f)
feat(group_theory/sylow): `fintype (sylow p H)` from `fintype (sylow p G)` ([#11664](https://github.com/leanprover-community/mathlib/pull/#11664))

If the number of Sylow `p`-subgroups of `G` is finite, then the number of Sylow `p`-subgroups of `H` is finite.

### [2022-01-28T03:07:32+00:00](https://github.com/leanprover-community/mathlib/commit/f5d63f9fc09fed3e7d904ea7cf720abadeabf825)
feat(topology/category/Compactum): forget creates limits ([#11690](https://github.com/leanprover-community/mathlib/pull/#11690))

Will likely be used in LTE.

### [2022-01-28T00:40:24+00:00](https://github.com/leanprover-community/mathlib/commit/24cfb88370116b22e3df48277c78ef66d7c976af)
chore(set_theory/ordinal_arithmetic): Golf some instances of `lt_irrefl _ h` down to `h.false` ([#11699](https://github.com/leanprover-community/mathlib/pull/#11699))

### [2022-01-28T00:40:23+00:00](https://github.com/leanprover-community/mathlib/commit/bac0f55eb94e500cb4f6c24f3b09664a31e67409)
chore(order/conditionally_complete_lattice): move code to a new file ([#11698](https://github.com/leanprover-community/mathlib/pull/#11698))

This is the first step towards adding a `complete_lattice` instance for `Icc`/`interval`.

### [2022-01-27T23:05:41+00:00](https://github.com/leanprover-community/mathlib/commit/21cea47af4b2ac5ae43d1158cb31eb3477311d6b)
feat(analysis/special_functions/log): log of natural power ([#11685](https://github.com/leanprover-community/mathlib/pull/#11685))

The rpow versions are already present, but the natural/integer versions can also be very helpful (eg for squares).

### [2022-01-27T23:05:40+00:00](https://github.com/leanprover-community/mathlib/commit/79e6cb09d7bf9434dcb48487c9eb47cbce8d15f9)
feat(order/succ_pred/relation): `succ`/`pred` inductions on relations ([#11518](https://github.com/leanprover-community/mathlib/pull/#11518))

* Rename file `order.succ_pred` -> `order.succ_pred.basic`
* Generalize induction principles `succ.rec` and `pred.rec`, make the argument order more "induction-like" and add the attribute `@[elab_as_eliminator]`
* Proof properties about `refl_trans_gen` and `trans_gen` in a `is_succ_archimedean` order.
* Proof some monotonicity properties of closure operations.

### [2022-01-27T23:05:38+00:00](https://github.com/leanprover-community/mathlib/commit/0a721cccacf25301032f9c5dcfdcd68c3b4da3b8)
feat(data/nat): a predicate for prime powers ([#11313](https://github.com/leanprover-community/mathlib/pull/#11313))

Adds a predicate for prime powers, in preparation for defining the von Mangoldt function.

cc @stuart-presnell since you might be needing this material soon, and @jcommelin if you have thoughts about generalising this to rings/UFDs?



Co-authored-by: Eric Rodriguez <ericrboidi@gmail.com>

### [2022-01-27T22:03:42+00:00](https://github.com/leanprover-community/mathlib/commit/74584760a4f4b7189471d735d4a4676365ddbf11)
chore(set_theory/ordinal_arithmetic): golf proof into term mode ([#11691](https://github.com/leanprover-community/mathlib/pull/#11691))

### [2022-01-27T20:16:32+00:00](https://github.com/leanprover-community/mathlib/commit/02c08d9bf507e47af46565058fe4b4aef8552374)
doc(polynomial/eval): why map_ring_hom can't replace map ([#11537](https://github.com/leanprover-community/mathlib/pull/#11537))

### [2022-01-27T10:01:14+00:00](https://github.com/leanprover-community/mathlib/commit/05e1845cb0fc52c9d112634b3d0b2e49bec35903)
feat(archive/100-theorems-list): add proof of the solution of the cubic ([#11635](https://github.com/leanprover-community/mathlib/pull/#11635))

Gives solution to the cubic equation, based on the cardano's formula. The base field should have cube root of unity and characteristic neither 2 nor 3.



Co-authored-by: Kyle Miller <kmill31415@gmail.com>

### [2022-01-27T05:30:47+00:00](https://github.com/leanprover-community/mathlib/commit/0844597135ad093835064a3cbb9043c19ddd98c1)
feat(set_theory/ordinal_arithmetic): Update header ([#11681](https://github.com/leanprover-community/mathlib/pull/#11681))

Added definitions from my previous PRs, and made myself an author.

### [2022-01-27T01:40:11+00:00](https://github.com/leanprover-community/mathlib/commit/a6ace8c1d27bcd5c27f34499e83ef5c9781f51d1)
feat(set_theory/ordinal_arithmetic): Proved `sup_eq_lsub_iff_lt_sup` ([#11660](https://github.com/leanprover-community/mathlib/pull/#11660))



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2022-01-26T23:35:18+00:00](https://github.com/leanprover-community/mathlib/commit/92ee748e3319f65d6676459b747034e9416f49d3)
chore(analysis/complex/cauchy_integral): use `dslope` to golf a proof ([#11675](https://github.com/leanprover-community/mathlib/pull/#11675))

### [2022-01-26T23:35:16+00:00](https://github.com/leanprover-community/mathlib/commit/a1e1ffd165f1b39e0f2d9011e0e468d4d9019d37)
feat(order/filter): +1 version of `mem_inf_principal` ([#11674](https://github.com/leanprover-community/mathlib/pull/#11674))

### [2022-01-26T23:35:15+00:00](https://github.com/leanprover-community/mathlib/commit/52e9fd523d37eea4a989b22ecec7343458361ab4)
chore(*): don't use tactic internal lemmas in proofs ([#11641](https://github.com/leanprover-community/mathlib/pull/#11641))

Some lemmas that are intended as internals to a tactic get picked up by library search and end up in proofs.
We replace a few of these tactic lemma uses with actual library lemmas which should be more maintainable, de-coupling tactic internals from the actual library.

### [2022-01-26T22:45:31+00:00](https://github.com/leanprover-community/mathlib/commit/577e3a2287a0ee64a3205e72f1e52c7418d407d4)
chore(topology/algebra/uniform_group): Remove newline after docstring ([#11671](https://github.com/leanprover-community/mathlib/pull/#11671))

Yael pointed out that [#11662](https://github.com/leanprover-community/mathlib/pull/#11662) added an erroneous newline after a docstring. This PR removes that newline.

### [2022-01-26T20:52:57+00:00](https://github.com/leanprover-community/mathlib/commit/946454a830b7a6354635e2c4256147d739b08bfb)
feat(data/nat/factorization): various theorems on factorization and division ([#11663](https://github.com/leanprover-community/mathlib/pull/#11663))

### [2022-01-26T20:14:54+00:00](https://github.com/leanprover-community/mathlib/commit/97e01cda6c74fb9b98e56e4c7d33265ecaa6e51e)
feat(group_theory/free_abelian_group_finsupp): various equiv.of_free_*_group lemmas ([#11469](https://github.com/leanprover-community/mathlib/pull/#11469))

Namely `equiv.of_free_abelian_group_linear_equiv`,
`equiv.of_free_abelian_group_equiv` and `equiv.of_free_group_equiv`
    
Co-authored-by: Adam Topaz <github@adamtopaz.com>

### [2022-01-26T17:10:48+00:00](https://github.com/leanprover-community/mathlib/commit/8fbc009a3123d60d9382e32832c609dca564a5b6)
feat(data/{dfinsupp,finsupp}/basic): `fun_like` instances for `Π₀ i, α i` and `ι →₀ α` ([#11667](https://github.com/leanprover-community/mathlib/pull/#11667))

This provides the `fun_like` instances for `finsupp` and `dfinsupp` and deprecates the lemmas that are now provided by the `fun_like` API.

### [2022-01-26T17:10:46+00:00](https://github.com/leanprover-community/mathlib/commit/c447a31cdfd6dbb0061955b34af710b9197bcd1a)
feat(algebraic_geometry): Stalk is localization of affine open.  ([#11640](https://github.com/leanprover-community/mathlib/pull/#11640))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2022-01-26T15:22:43+00:00](https://github.com/leanprover-community/mathlib/commit/b8fcac5151221557817b9fa8932b55ad1cceaf18)
feat(data/nat/basic): three small `dvd_iff...` lemmas ([#11669](https://github.com/leanprover-community/mathlib/pull/#11669))

Three biconditionals for proving `d ∣ n`

### [2022-01-26T13:30:01+00:00](https://github.com/leanprover-community/mathlib/commit/c5a8a8187407f0241ba3db4c2ee5db4d3c562bdf)
refactor(topology/algebra/uniform_group): Use `to_additive`. ([#11662](https://github.com/leanprover-community/mathlib/pull/#11662))

This PR refactors `topology/algebra/uniform_group` to use `to_additive`.

### [2022-01-26T13:30:00+00:00](https://github.com/leanprover-community/mathlib/commit/5472f0a7b72e0cbff4bb971dda7e7490ff1007ca)
feat(group_theory/subgroup/basic): add lemmas related to map, comap, normalizer ([#11637](https://github.com/leanprover-community/mathlib/pull/#11637))

which are useful when `H < K < G` and one needs to move from `subgroup
G` to `subgroup K`

### [2022-01-26T13:29:59+00:00](https://github.com/leanprover-community/mathlib/commit/2b25723018fc3ab3ab21b5c256f4211e7293786d)
feat(group_theory/sylow): add characteristic_of_normal ([#11636](https://github.com/leanprover-community/mathlib/pull/#11636))

A normal sylow subgroup is characteristic.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-01-26T13:29:58+00:00](https://github.com/leanprover-community/mathlib/commit/1a72f88727a65454dc47ea04b7a52f93e0bc8a65)
feat(analysis/inner_product_space/basic): isometries and orthonormal families ([#11631](https://github.com/leanprover-community/mathlib/pull/#11631))

Add various lemmas and definitions about the action of isometries on
orthonormal families of vectors.  An isometry preserves the property
of being orthonormal; a linear map sending an orthonormal basis to an
orthonormal family is a linear isometry, and a linear equiv sending an
orthonormal basis to an orthonormal family is a linear isometry equiv.
A definition `orthonormal.equiv` is provided that uses `basis.equiv`
to provide a linear isometry equiv mapping a given orthonormal basis
to another given orthonormal basis, and lemmas are provided analogous
to those for `basis.equiv` (`orthonormal.map_equiv` isn't a `simp`
lemma because `simp` can prove it).

### [2022-01-26T13:29:57+00:00](https://github.com/leanprover-community/mathlib/commit/631f3394c754d2298d3865df3a71fecc7e426fee)
feat(measure_theory/measure/haar_lebesgue): a density point for closed balls is a density point for rescalings of arbitrary sets ([#11620](https://github.com/leanprover-community/mathlib/pull/#11620))

Consider a point `x` in a finite-dimensional real vector space with a Haar measure, at which a set `s` has density one, with respect to closed balls (i.e., a Lebesgue density point of `s`). Then `s` has also density one at `x` with respect to any measurable set `t`: the proportion of points in `s` belonging to a rescaled copy `{x} + r • t` of `t` tends to one as `r` tends to zero. In particular, `s ∩ ({x} + r • t)` is nonempty for small enough `r`.

### [2022-01-26T13:29:54+00:00](https://github.com/leanprover-community/mathlib/commit/590b5eb4a3f3a67a35f04a6713c0f53930adf12d)
feat(analysis/seminorm): The norm as a seminorm, balanced and absorbent lemmas ([#11487](https://github.com/leanprover-community/mathlib/pull/#11487))

This
* defines `norm_seminorm`, the norm as a seminorm. This is useful to translate seminorm lemmas to norm lemmas
* proves many lemmas about `balanced`, `absorbs`, `absorbent`
* generalizes many lemmas about the aforementioned predicates. In particular, `one_le_gauge_of_not_mem` now takes `(star_convex ℝ 0 s) (absorbs ℝ s {x})` instead of `(convex ℝ s) ((0 : E) ∈ s) (is_open s)`. The new `star_convex` lemmas justify that it's a generalization.
* proves `star_convex_zero_iff`
* proves `ne_zero_of_norm_ne_zero` and friends
* makes `x` implicit in `convex.star_convex`
* renames `balanced.univ` to `balanced_univ`

### [2022-01-26T13:29:53+00:00](https://github.com/leanprover-community/mathlib/commit/573ca8361f9f735fedcab2a5e26a5aa7a8587126)
feat(analysis/seminorm): add some lemmas for seminorm balls ([#11471](https://github.com/leanprover-community/mathlib/pull/#11471))

Add some lemmas for seminorm balls.

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-01-26T13:29:52+00:00](https://github.com/leanprover-community/mathlib/commit/07d8ca6da1891fa08116f585cf2be0450f62b9f1)
feat(combinatorics/configuration): Formula for cardinality of a projective plane ([#11462](https://github.com/leanprover-community/mathlib/pull/#11462))

This PR proves the formula for the cardinality of a projective plane in terms of the order.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-01-26T11:53:03+00:00](https://github.com/leanprover-community/mathlib/commit/7f0f3f192daeae781d4ff8aa87181f3d17e92ae4)
feat(algebra/order/hom/monoid): Ordered monoid/group homomorphisms ([#11633](https://github.com/leanprover-community/mathlib/pull/#11633))

Define
* `order_add_monoid_hom` with notation `→+o`
* `order_monoid_hom` with notation `→*o`
* `order_monoid_with_zero_hom` with notation `→*₀o`

and their corresponding hom classes.

Also add a few missing API lemmas in `algebra.group.hom` and `order.hom.basic`.

### [2022-01-26T11:25:56+00:00](https://github.com/leanprover-community/mathlib/commit/20aae835795c0def247c0160318fb99b43773077)
feat(order/hom/lattice): Lattice homomorphisms ([#11610](https://github.com/leanprover-community/mathlib/pull/#11610))

This defines (bounded) lattice homomorphisms using the `fun_like` along with weaker homomorphisms that only preserve `sup`, `inf`, `top`, `bot`.

### [2022-01-26T10:04:22+00:00](https://github.com/leanprover-community/mathlib/commit/09c6ce81b6a30c71f8180dda51dfb31b82a02758)
feat(group_theory/subgroup/basic): add normalizer_condition definition ([#11587](https://github.com/leanprover-community/mathlib/pull/#11587))

and an equivalent formula that is a bit easier to work with.

### [2022-01-26T09:10:25+00:00](https://github.com/leanprover-community/mathlib/commit/c294e4bbc41e92a20faa04ed49a0ee7119c93dda)
feat(topology/*): replace some `a < b` assumptions with `a ≠ b` ([#11650](https://github.com/leanprover-community/mathlib/pull/#11650))

### [2022-01-25T23:46:56+00:00](https://github.com/leanprover-community/mathlib/commit/20a461f37f8edc7c289980197905f23c558a8259)
feat(algebra/big_operators/order): The size of a finset of disjoint finsets is less than the size of its union ([#11654](https://github.com/leanprover-community/mathlib/pull/#11654))

Prove `card_le_card_bUnion`, its corollary `card_le_card_bUnion_add_card_fiber` where we drop the nonemptiness condition in exchange of a `+` card of the fiber of `∅` on the RHS, and its useful special case `card_le_card_bUnion_add_one`.

### [2022-01-25T22:24:52+00:00](https://github.com/leanprover-community/mathlib/commit/b237af52e1b2f43fc3d839bec5fdeeb048b7ba48)
refactor(set_theory/ordinal_arithmetic): Rename `lsub_le_iff_lt` to `lsub_le` ([#11661](https://github.com/leanprover-community/mathlib/pull/#11661))

This way, it directly corresponds to `sup_le`. Ditto for `blsub_le_iff_lt`.

### [2022-01-25T22:24:51+00:00](https://github.com/leanprover-community/mathlib/commit/b0a1812433e4d79c0000e7f1feffe46ef0dfd522)
chore(data/buffer/parser/numeral): fix backticks ([#11658](https://github.com/leanprover-community/mathlib/pull/#11658))

### [2022-01-25T22:24:50+00:00](https://github.com/leanprover-community/mathlib/commit/033dd3c5e333337f1c23faff79eefd5d366fcda7)
feat(analysis/special_functions/complex/circle): `real.angle.exp_map_circle` ([#11627](https://github.com/leanprover-community/mathlib/pull/#11627))

Add a version of `exp_map_circle` that applies to a `real.angle`
argument.

### [2022-01-25T22:24:49+00:00](https://github.com/leanprover-community/mathlib/commit/f5b11ad587c593c3a35e61a97c81fa4438c691c3)
feat(algebra/lie/{nilpotent,of_associative}): a representation of an associative algebra gives a representation of a Lie algebra ([#11558](https://github.com/leanprover-community/mathlib/pull/#11558))

The lemma `lie_algebra.non_trivial_center_of_is_nilpotent` is unrelated.

### [2022-01-25T20:59:08+00:00](https://github.com/leanprover-community/mathlib/commit/99608cc67384c2333e63eec500e83e3ce46fac1a)
feat(group_theory/sub{monoid,group}, linear_algebra/basic): add `supr_induction` for `submonoid`, `add_submonoid`, `subgroup`, `add_subgroup`, and `submodule` ([#11556](https://github.com/leanprover-community/mathlib/pull/#11556))

This also adds dependent versions, which match the style of the dependent versions of `submodule.span_induction` and `submonoid.closure_induction` in [#11555](https://github.com/leanprover-community/mathlib/pull/#11555).

Primarily it's the group and module versions that are useful here, as they remove the inv and smul obligations that would appear if using `closure_induction` or `span_induction`.

### [2022-01-25T20:59:07+00:00](https://github.com/leanprover-community/mathlib/commit/25d1341bbea801d6f58992180c9f75adb587e044)
feat(group_theory/sub{monoid,group}, linear_algebra/basic): remove specialization to subtypes from dependent recursors ([#11555](https://github.com/leanprover-community/mathlib/pull/#11555))

The following recursors (the first of which was added in [#4984](https://github.com/leanprover-community/mathlib/pull/#4984)) are more generally applicable than to subtypes alone:

* `submonoid.closure_induction'`
* `add_submonoid.closure_induction'`
* `subgroup.closure_induction'`
* `add_subgroup.closure_induction'`
* `submodule.span_induction'`

Now that these live right next to their non-dependent version, there is little need to repeat the docstring.

### [2022-01-25T20:59:06+00:00](https://github.com/leanprover-community/mathlib/commit/7e0982724be704cd3163bc6fa0e57be53b924f69)
feat(analysis/inner_product_space/adjoint): matrix and linear map adjoints agree ([#11551](https://github.com/leanprover-community/mathlib/pull/#11551))

### [2022-01-25T20:59:04+00:00](https://github.com/leanprover-community/mathlib/commit/84f2e93420cea018ddd8b90a0207f4c061136ea9)
feat(group_theory/free_abelian_group): add free_abelian_group.basis ([#11465](https://github.com/leanprover-community/mathlib/pull/#11465))

Although a statement about `free_abelian_group`, it lives in
`free_abelian_group_finsupp` because it uses the isomorphism between
`free_abelian_group X` and `X →₀ ℤ`

Co-authored-by: Adam Topaz <github@adamtopaz.com>

### [2022-01-25T19:51:28+00:00](https://github.com/leanprover-community/mathlib/commit/009cec03ecf8014a144e0aa88926d8c7de383933)
feat(set_theory/cardinal_ordinal): Aleph is positive ([#11657](https://github.com/leanprover-community/mathlib/pull/#11657))

### [2022-01-25T17:30:28+00:00](https://github.com/leanprover-community/mathlib/commit/6184db11b20f6620f2e61d186321115447bb3c26)
feat(topology/algebra/mul_action2): quotient by a properly discontinuous group action is t2 ([#10465](https://github.com/leanprover-community/mathlib/pull/#10465))

We prove that the quotient of a Hausdorff (t2) locally compact space by a properly discontinuous group action is itself Hausdorff.

Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>



Co-authored-by: Eric <ericrboidi@gmail.com>
Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2022-01-25T13:19:58+00:00](https://github.com/leanprover-community/mathlib/commit/4d761f44bd797e1210e33604263ad3ba91a614ef)
feat(algebra/group/hom): Notation for `monoid_with_zero_hom` ([#11632](https://github.com/leanprover-community/mathlib/pull/#11632))

Introduce notation `→*₀` for `monoid_with_zero_hom` and use it everywhere.

### [2022-01-25T12:25:39+00:00](https://github.com/leanprover-community/mathlib/commit/1b3da83173c7b6aef3c775bdfbc2a93bcc15df37)
feat(combinatorics/simple_graph/coloring): add inequalities from embeddings ([#11548](https://github.com/leanprover-community/mathlib/pull/#11548))

Also add a lemma that the chromatic number of an infinite complete graph is zero (i.e., it needs infinitely many colors), as suggested by @arthurpaulino.

### [2022-01-25T12:25:38+00:00](https://github.com/leanprover-community/mathlib/commit/158c0eafe108fbd1195b86b007d391341a5b4df5)
feat(group_theory/abelianization): add abelianization_of_comm_group ([#11467](https://github.com/leanprover-community/mathlib/pull/#11467))

Co-authored-by: Oliver Nash <github@olivernash.org>

### [2022-01-25T10:49:34+00:00](https://github.com/leanprover-community/mathlib/commit/494f7199ba5bd28ace0bdfecab9bd623f30d3d5b)
feat(data/fun_like): define `embedding_like` and `equiv_like` ([#10759](https://github.com/leanprover-community/mathlib/pull/#10759))

These extend `fun_like` with a proof of injectivity resp. an inverse.

The number of new generic lemmas is quite low at the moment, so their use is more in defining derived classes such as `mul_equiv_class`.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2022-01-25T10:04:17+00:00](https://github.com/leanprover-community/mathlib/commit/6b322417dbc413ae434df4219bd19fa46bf2e4e7)
feat(model_theory/basic): Terms, formulas, and definable sets ([#11067](https://github.com/leanprover-community/mathlib/pull/#11067))

Defines first-order terms, formulas, sentences and theories
Defines the boolean algebra of definable sets
(Several of these definitions are based on those from the flypitch project.)

### [2022-01-25T08:35:58+00:00](https://github.com/leanprover-community/mathlib/commit/4883d11c1085d4ca272a80ce19c9088f79642519)
feat(README.md): add Kyle Miller as new maintainer ([#11653](https://github.com/leanprover-community/mathlib/pull/#11653))

### [2022-01-25T07:42:56+00:00](https://github.com/leanprover-community/mathlib/commit/bf71feb0fa741d0df3f997d2d5592e121f26fe4d)
feat(number_theory/quadratic_reciprocity): generalise legendre_sym to allow integer first argument ([#11573](https://github.com/leanprover-community/mathlib/pull/#11573))

Talking about the legendre symbol of -1 mod p is quite natural, so we generalize to include this case.
So far in a minimal way without changing any existing lemmas

### [2022-01-25T07:15:51+00:00](https://github.com/leanprover-community/mathlib/commit/f7a597adeccf7251c0a4662d0ea5b9c005cb6cf1)
feat(group_theory/nilpotent): add nilpotency_class inequalities ([#11585](https://github.com/leanprover-community/mathlib/pull/#11585))

Every theorem that proves `nilpotency G'` (e.g. for subgroups, images,
preimages) should be accompanied by a lemma relating their
`nilpotency_class`, so add thse lmmeas for subgroups and preimages.

Also add nilpotency lemmas for surjective homomorphisms and quotions,
including nilpotency_class lemmas.

### [2022-01-25T06:08:03+00:00](https://github.com/leanprover-community/mathlib/commit/f27866393a9301654949e9318ee5319bc69b3cc9)
feat(README.md): add Frédéric Dupuis as new maintainer ([#11651](https://github.com/leanprover-community/mathlib/pull/#11651))

### [2022-01-25T05:11:24+00:00](https://github.com/leanprover-community/mathlib/commit/b3cd0e6d69de8db8a211ffb97f6627a0deaf5e77)
chore(order/filter, *): enhancing `filter_upwards` tactic ([#11624](https://github.com/leanprover-community/mathlib/pull/#11624))

### [2022-01-25T03:33:34+00:00](https://github.com/leanprover-community/mathlib/commit/8cc2ff4c5e6e56861b8394c7364d623a3e83ab9d)
refactor(order/{bounded, rel_classes}): Moved `bounded` into the `set` namespace ([#11594](https://github.com/leanprover-community/mathlib/pull/#11594))

As per the [Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bounded.2Emono). Closes [#11589](https://github.com/leanprover-community/mathlib/pull/#11589).

### [2022-01-25T03:33:32+00:00](https://github.com/leanprover-community/mathlib/commit/b834415b45d0b4986059ea23625fd38e4cf47111)
chore(topology/metric_space/gromov_hausdorff): Golf some theorems ([#11591](https://github.com/leanprover-community/mathlib/pull/#11591))

### [2022-01-25T03:33:31+00:00](https://github.com/leanprover-community/mathlib/commit/88479be0b45fd5ae7dc6e21f5780d37d4aeaa897)
feat(algebra/big_operators/basic): add lemma `finset.prod_dvd_prod` ([#11521](https://github.com/leanprover-community/mathlib/pull/#11521))

For any `S : finset α`, if `∀ a ∈ S, g1 a ∣ g2 a` then `S.prod g1 ∣ S.prod g2`.

### [2022-01-25T01:56:07+00:00](https://github.com/leanprover-community/mathlib/commit/4f5d6acf2b98d9dcfc5fc21a21ea33ac11087f48)
refactor(tactic/interactive): rename tactic.interactive.triv to tactic.interactive.trivial' ([#11643](https://github.com/leanprover-community/mathlib/pull/#11643))

The difference between `tactic.interactive.trivial` and `tactic.interactive.triv` is that the latter expands only reducible constants; the first uses `tactic.triv` and the latter uses `tactic.triv'`. This name change is to improve consistency.

Also (slipping in a new feature) add `tactic.interactive.triv`, which is the old `tactic.interactive.triv` but does not run `contradiction`. This is useful for teaching.

### [2022-01-24T22:53:51+00:00](https://github.com/leanprover-community/mathlib/commit/0d172bac81ccac6a4ebe857b6a1a786546e87750)
feat(README.md): add Riccardo Brasca as new maintainer ([#11647](https://github.com/leanprover-community/mathlib/pull/#11647))

Add myself as new maintainer and test my superpowers :)

### [2022-01-24T22:53:50+00:00](https://github.com/leanprover-community/mathlib/commit/12fde093f5db89d0b78e9364e12e45be1f28e149)
feat(data/finset/finsupp): Finitely supported product of finsets ([#11639](https://github.com/leanprover-community/mathlib/pull/#11639))

Define
* `finsupp.indicator`: Similar to `finsupp.on_finset` except that it only requires a partially defined function. This is more compatible with `finset.pi`.
* `finset.finsupp : finset ι → (ι → finset α) → finset (ι →₀ α)`: Finitely supported product of finsets.
* `finsupp.pi : (ι →₀ finset α) → finset (ι →₀ α)`: The set of finitely supported functions whose `i`-th value lies in the `i`-th of a given `finset`-valued `finsupp`.

### [2022-01-24T21:01:29+00:00](https://github.com/leanprover-community/mathlib/commit/32052b8617e315c29bfe2121ec884e3892edaeea)
chore(ci): remove working directory on self-hosted ([#11645](https://github.com/leanprover-community/mathlib/pull/#11645))

Mathlib now takes several gigabytes to build.  This addresses some of the space issues on the CI machines.

### [2022-01-24T21:01:26+00:00](https://github.com/leanprover-community/mathlib/commit/511aa358260e1a6a4e1ebc5d0038d9e34ea0435c)
feat(algebra/pointwise): add partial order to `set_semiring` ([#11567](https://github.com/leanprover-community/mathlib/pull/#11567))

This PR introduces the natural inclusion order on sets on `set_semiring`.

[Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Ordered.20semirings)



Co-authored-by: Damiano Testa <maskal@CLD-E854D68C.ads.warwick.ac.uk>
Co-authored-by: Eric Rodriguez <ericrboidi@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-01-24T21:01:25+00:00](https://github.com/leanprover-community/mathlib/commit/9e799a088aeb51a692f7b1db139d698c96639a94)
feat(algebra/pointwise): Scalar multiplication lemmas ([#11486](https://github.com/leanprover-community/mathlib/pull/#11486))

This proves a bunch of lemmas about pointwise scalar multiplication of sets, moves `has_vsub` to `algebra.group.defs` and pointwise `vsub` lemmas to `algebra.pointwise`.

I'm also adding a few sections because having `{s t : set α}` is nice for multiplication but not for scalar multiplication.

### [2022-01-24T20:18:07+00:00](https://github.com/leanprover-community/mathlib/commit/6aea8acc5b679a3eca42a8688d77156ed378c313)
chore(probability_theory/stopping): fix names in documentation ([#11644](https://github.com/leanprover-community/mathlib/pull/#11644))

### [2022-01-24T18:04:16+00:00](https://github.com/leanprover-community/mathlib/commit/1bbed96894bcef02aa8680d6e1cae520e99877c1)
doc(tactic/interactive): mention triv uses contradiction ([#11502](https://github.com/leanprover-community/mathlib/pull/#11502))

Adding the fact that `triv` tries `contradiction` to the docstring for `triv`.

### [2022-01-24T16:03:59+00:00](https://github.com/leanprover-community/mathlib/commit/eccd8dd1f8745fc53522721f573accb4675e415e)
feat(algebra/lie/nilpotent): generalise lower central series to start with given Lie submodule ([#11625](https://github.com/leanprover-community/mathlib/pull/#11625))

The advantage of this approach is that we can regard the terms of the lower central series of a Lie submodule as Lie submodules of the enclosing Lie module.

In particular, this is useful when considering the lower central series of a Lie ideal.

### [2022-01-24T16:03:56+00:00](https://github.com/leanprover-community/mathlib/commit/a6318391f1121c1a66df383f1d7040cab635b888)
feat(analysis/special_functions/pow): add nnreal variant of rpow_pos ([#11619](https://github.com/leanprover-community/mathlib/pull/#11619))

This matches the lemma for ennreal.

### [2022-01-24T16:03:55+00:00](https://github.com/leanprover-community/mathlib/commit/155c330963c319eccb4a26479212de00c3fb96f0)
feat(analysis/convex/{basic,function}): add lemmas, golf ([#11608](https://github.com/leanprover-community/mathlib/pull/#11608))

* add `segment_subset_iff`, `open_segment_subset_iff`, use them to golf some proofs;
* add `mem_segment_iff_div`, `mem_open_segment_iff_div`, use the
  former in the proof of `convex_iff_div`;
* move the proof of `mpr` in `convex_on_iff_convex_epigraph` to a new
  lemma;
* prove that the strict epigraph of a convex function include the open
  segment provided that one of the endpoints is in the strong epigraph
  and the other is in the epigraph; use it in the proof of
  `convex_on.convex_strict_epigraph`.

### [2022-01-24T16:03:53+00:00](https://github.com/leanprover-community/mathlib/commit/a52ce83ec6465c37b2e3cd2d40085abfa8e77552)
feat(combinatorics/configuration): The order of a projective plane is at least 2 ([#11550](https://github.com/leanprover-community/mathlib/pull/#11550))

This PR proves that the order of a projective plane is strictly larger than 1.

### [2022-01-24T16:03:52+00:00](https://github.com/leanprover-community/mathlib/commit/9150268ca507f48bfe44e1cb0d4857064598b575)
feat (algebraic_geometry): Constructions of fibred products of schemes ([#11450](https://github.com/leanprover-community/mathlib/pull/#11450))

This is the first half of the PRs about constructing fibred products of schemes, where we
construct all the relevant schemes and morphisms but yet to show that they are actually
fibred products. 



Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2022-01-24T14:20:36+00:00](https://github.com/leanprover-community/mathlib/commit/4a6709bcfcd9ebb306b25af2a4de781d99b8332d)
feat(data/{int,nat}/gcd): add `nat.gcd_greatest` ([#11611](https://github.com/leanprover-community/mathlib/pull/#11611))

Add lemma characterising `gcd` in `ℕ`, counterpart of `int.gcd_greatest`.  Also add shorter proof of `int.gcd_greatest`.

### [2022-01-24T14:20:33+00:00](https://github.com/leanprover-community/mathlib/commit/bc2f73f7e9f00c7b9bd7ba37d36fd595166e3f97)
feat(topology/uniform_space/uniform_convergence): Product of `tendsto_uniformly` ([#11562](https://github.com/leanprover-community/mathlib/pull/#11562))

This PR adds lemmas `tendsto_uniformly_on.prod` and `tendsto_uniformly.prod`.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-01-24T12:47:20+00:00](https://github.com/leanprover-community/mathlib/commit/f99af7da35d1f52405e28de99b810e68243b11c0)
chore(data/set/lattice): Generalize more `⋃`/`⋂` lemmas to dependent families ([#11516](https://github.com/leanprover-community/mathlib/pull/#11516))

The "bounded union" and "bounded intersection" are both instances of nested `⋃`/`⋂`. But they only apply when the inner one runs over a predicate `p : ι → Prop`, and the resulting set couldn't depend on `p`. This generalizes to `κ : ι → Sort*` and allows dependence on `κ i`.

The lemmas are renamed from `bUnion`/`bInter` to `Union₂`/`Inter₂` to show that they are more general. Some generalizations lead to unification problems, so I've kept the `b` version around.

Some lemmas were missing between `⋃` and `⋂` or between `⋃`/`⋂` and nested `⋃`/`⋂`, so I'm adding them as well.

Renames

### [2022-01-24T12:18:54+00:00](https://github.com/leanprover-community/mathlib/commit/ee36571eafb8d603b18fb5db1313bb71ded3a29c)
feat(algebra/lie/cartan_subalgebra): add self-normalizing characterisation for Lie subalgebra ([#11598](https://github.com/leanprover-community/mathlib/pull/#11598))

### [2022-01-24T11:34:45+00:00](https://github.com/leanprover-community/mathlib/commit/dac4f4055bdfc3e8c3af3066c3930e374349c7c9)
feat(analysis/normed_space/linear_isometry): `to_linear_equiv_trans` ([#11628](https://github.com/leanprover-community/mathlib/pull/#11628))

Add a lemma relating `trans` for `linear_isometry_equiv` and
`linear_equiv`.

### [2022-01-24T11:34:44+00:00](https://github.com/leanprover-community/mathlib/commit/ed903019c29579dbca70fe7d6c392df189affdc4)
feat(group_theory/commuting_probability): Commuting probability inequalities ([#11564](https://github.com/leanprover-community/mathlib/pull/#11564))

This PR adds some inequalities for the commuting probability.

### [2022-01-24T10:02:38+00:00](https://github.com/leanprover-community/mathlib/commit/9ef7f6bdc1c104a2cbbc5e58aa2b2775a9538843)
feat(linear_algebra/orientation): `eq_neg_iff_eq_neg` ([#11629](https://github.com/leanprover-community/mathlib/pull/#11629))

Add two more `module.ray` lemmas about negation.

### [2022-01-24T10:02:37+00:00](https://github.com/leanprover-community/mathlib/commit/7ddb9a3ca33f8b8b6593df878bccf3ab26b280b0)
refactor(order/ideal): Generalize definition and lemmas ([#11421](https://github.com/leanprover-community/mathlib/pull/#11421))

* Generalize the `order_top` instance to `[nonempty P] [is_directed P (≤)]`.
* Delete `order.ideal.ideal_inter_nonempty` in favor of the equivalent condition `is_directed P (swap (≤))`.
* Delete `order.ideal.sup`/`order.ideal.inf` in favor of a direct instance declaration.
* Generalize defs/lemmas from `preorder` to `has_le` or `partial_order` to `preorder`.
* Two more `is_directed` lemmas and instances for `order_bot` and `order_top`.

### [2022-01-24T10:02:36+00:00](https://github.com/leanprover-community/mathlib/commit/9becbc7cf48e3dbcc803b07275d0ffc3a98735d6)
feat(algebra/order/rearrangement) : Rearrangement Inequality ([#10861](https://github.com/leanprover-community/mathlib/pull/#10861))

A range of variants of the rearrangement inequality.

This is stated with scalar multiplication of a linear ring over an additive linear group, rather than having everything be in a linear ring. We couldn't find general statements of the rearrangement inequality in the literature, but this very much seems like an improvement.



Co-authored-by: YaelDillies <yael.dillies@gmail.com>
Co-authored-by: Mantas Bakšys <39908973+MantasBaksys@users.noreply.github.com>

### [2022-01-24T07:24:57+00:00](https://github.com/leanprover-community/mathlib/commit/8c64be0b8d08ceb44aee9d933f7085bf6573f1b7)
chore(category_theory/abelian): Moved more stuff into `pseudoelement` locale ([#11621](https://github.com/leanprover-community/mathlib/pull/#11621))

The `ext` lemma triggers unwantedly in lots of places.

### [2022-01-24T05:54:29+00:00](https://github.com/leanprover-community/mathlib/commit/8f73b079c74fb19708f0f491e54750db349ccb46)
feat(set_theory/surreal/dyadic): define add_monoid_hom structure on dyadic map ([#11052](https://github.com/leanprover-community/mathlib/pull/#11052))

The proof is mechanical and mostly requires unraveling definitions.

The above map cannot be extended to ring morphism as so far there's not multiplication structure on surreal numbers.

### [2022-01-24T03:52:26+00:00](https://github.com/leanprover-community/mathlib/commit/32cd27879f81e108b4537c4f2ca64701f765dc83)
feat(analysis/asymptotics): add a few lemmas ([#11623](https://github.com/leanprover-community/mathlib/pull/#11623))

* rename `is_o.tendsto_0` to `is_o.tendsto_div_nhds_zero`, add `is_o.tendsto_inv_smul_nhds_zero`;
* add `is_o_const_left` and `filter.is_bounded_under.is_o_sub_self_inv`.

### [2022-01-24T02:18:18+00:00](https://github.com/leanprover-community/mathlib/commit/095c46c284eb3e8e4d19768142fc16c99f89a8bd)
feat(linear_algebra/basis): `reindex_refl` ([#11626](https://github.com/leanprover-community/mathlib/pull/#11626))

Add a `simp` lemma about applying `basis.reindex` with `equiv.refl`.

### [2022-01-23T15:43:45+00:00](https://github.com/leanprover-community/mathlib/commit/5449ffa41754812c780e2d976d278ccb92c551ed)
feat(data/nat/prime): factors of non-prime powers ([#11546](https://github.com/leanprover-community/mathlib/pull/#11546))

Adds the result `pow_factors_to_finset`, fills in `factors_mul_to_finset_of_coprime` for the sake of completion, and adjusts statements to take `ne_zero` rather than pos assumptions.



Co-authored-by: Eric <ericrboidi@gmail.com>
Co-authored-by: Eric Rodriguez <ericrboidi@gmail.com>

### [2022-01-23T13:55:13+00:00](https://github.com/leanprover-community/mathlib/commit/59ef8ce5535f70e82d96030424ea975c391d6180)
feat(measure_theory/measure): assorted lemmas ([#11612](https://github.com/leanprover-community/mathlib/pull/#11612))

* add `ae_disjoint_compl_left/right`;
* deduce `restrict_to_measurable` and `restrict_to_measurable_of_sigma_finite` from @sgouezel 's lemmas about measures of intersections;
* add `ae_restrict_mem₀`;
* add `ae_eq_univ`.

### [2022-01-23T10:59:21+00:00](https://github.com/leanprover-community/mathlib/commit/d0f392e105ffd2a63e6aacabb0496a32fb140282)
feat(analysis/calculus/inverse): a map which approximates a linear map on a set admits a nice global extension ([#11568](https://github.com/leanprover-community/mathlib/pull/#11568))

And several other results on maps that are well approximated by linear maps on some subset of the space (not necessarily open).

### [2022-01-23T07:44:41+00:00](https://github.com/leanprover-community/mathlib/commit/b1ad3012c18c73851b3a84dd148aefbb10a7286d)
feat(number_theory/cyclotomic/basic): add missing lemmas ([#11451](https://github.com/leanprover-community/mathlib/pull/#11451))

We add some missing lemmas about cyclotomic extensions.

From flt-regular.

### [2022-01-23T03:26:11+00:00](https://github.com/leanprover-community/mathlib/commit/9a517cf0c195600f4427e4cb50c0da11a4d9564b)
chore(analysis/normed/group/completion): fix attribution ([#11614](https://github.com/leanprover-community/mathlib/pull/#11614))

This code was written by @jcommelin in [#6189](https://github.com/leanprover-community/mathlib/pull/#6189) but somehow acquired my name during a refactor ([#10055](https://github.com/leanprover-community/mathlib/pull/#10055)).  I don't think I've ever touched it!

### [2022-01-23T02:45:45+00:00](https://github.com/leanprover-community/mathlib/commit/2babfeb006f1d6e33f0d7df3d5bedc16b8d753f6)
chore(data/complex/is_R_or_C): squeeze simps ([#11251](https://github.com/leanprover-community/mathlib/pull/#11251))

This PR squeezes most of the simps in `is_R_or_C`, and updates the module docstring.



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2022-01-22T23:39:48+00:00](https://github.com/leanprover-community/mathlib/commit/84dbe7ba1194ebf21af77107f1264cdac0fe7ce4)
feat(measure_theory/covering): Lebesgue density points ([#11554](https://github.com/leanprover-community/mathlib/pull/#11554))

We show in the general context of differentiation of measures that `μ (s ∩ a) / μ a` converges, when `a` shrinks towards a point `x`, to `1` for almost every `x` in `s`, and to `0` for almost every point outside of `s`. In other words, almost every point of `s` is a Lebesgue density points of `s`. Of course, this requires assumptions on allowed sets `a`. We state this in the general context of Vitali families. We also give easier to use versions in spaces with the Besicovitch property (e.g., final dimensional real vector spaces), where one can take for `a` the closed balls centered at `x`.

### [2022-01-22T22:28:56+00:00](https://github.com/leanprover-community/mathlib/commit/a196f9be0ac1a88f63c875c93e6e75e0ce85ee18)
chore(measure_theory/probability_mass_function): Move pmf monad operations into a seperate file ([#11579](https://github.com/leanprover-community/mathlib/pull/#11579))

This PR moves the `pure`, `bind`, and `bind_on_support` operations on `pmf` into a new `probability_mass_function/monad.lean` file.

### [2022-01-22T22:28:55+00:00](https://github.com/leanprover-community/mathlib/commit/31db25b4aeec34f78968607c9b041e926345788e)
feat(topology/instances/ennreal): continuity of subtraction on ennreal ([#11527](https://github.com/leanprover-community/mathlib/pull/#11527))

### [2022-01-22T20:53:55+00:00](https://github.com/leanprover-community/mathlib/commit/159d9acaebf49c93a4ce052e27f700369bb8b94e)
split(order/max): Split off `order.basic` ([#11603](https://github.com/leanprover-community/mathlib/pull/#11603))

This moves `is_bot`, `is_top`, `no_min_order`, `no_max_order` to a new file `order.max`.

### [2022-01-22T20:00:08+00:00](https://github.com/leanprover-community/mathlib/commit/5080d64db4f6abb310b6db40dc7e18152e8b3b64)
feat(topology): add a few lemmas ([#11607](https://github.com/leanprover-community/mathlib/pull/#11607))

* add `homeomorph.preimage_interior`, `homeomorph.image_interior`,
  reorder lemmas;
* add `is_open.smul₀` and `interior_smul₀`.

### [2022-01-22T18:38:06+00:00](https://github.com/leanprover-community/mathlib/commit/bd3b892f8669edc750e627fecfe55f8201c9f602)
move(order/hom/order): Move from `order.hom.lattice` ([#11601](https://github.com/leanprover-community/mathlib/pull/#11601))

Rename `order.hom.lattice` into `order.hom.order` to make space for lattice homomorphisms, as opposed to the lattice of order homomorphisms.

### [2022-01-22T18:38:05+00:00](https://github.com/leanprover-community/mathlib/commit/206b56ec98df4ac3a3d9d5eaade7cf393be773f0)
doc(group_theory.quotient_group): Fix typos in main statement list ([#11581](https://github.com/leanprover-community/mathlib/pull/#11581))

This now matches the docstring for the declaration in question.

### [2022-01-22T18:38:03+00:00](https://github.com/leanprover-community/mathlib/commit/155cf1df0b1b9d5ab1519b0bc4e915ad9c17bf7a)
feat(group_theory/abelianization): add mul_equiv.abelianization_congr ([#11466](https://github.com/leanprover-community/mathlib/pull/#11466))

Co-authored-by: Adam Topaz <github@adamtopaz.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-01-22T18:05:24+00:00](https://github.com/leanprover-community/mathlib/commit/7ba08d3c27bfaa30e1463741e76647e0acc59cbc)
fix(category_theory/triangulated): Fix definition of pretriangulated ([#11596](https://github.com/leanprover-community/mathlib/pull/#11596))

The original definition unfolds to `(T₁ : triangle C) (T₁ ∈ distinguished_triangles) (T₂ : triangle C) (T₁ : triangle C) (e : T₁ ≅ T₂)`, where the two `T₁` are referring to different triangles.

### [2022-01-22T17:00:41+00:00](https://github.com/leanprover-community/mathlib/commit/d1b51655f728d9cc1b3986d669af23c880f2444a)
chore(group_theory/nilpotent): golf some proofs ([#11599](https://github.com/leanprover-community/mathlib/pull/#11599))

### [2022-01-22T16:18:02+00:00](https://github.com/leanprover-community/mathlib/commit/fbf3c64330b01da3b5542ba633d4b85157d7c68b)
chore(analysis/normed_space/star): golf some lemmas ([#11600](https://github.com/leanprover-community/mathlib/pull/#11600))

### [2022-01-22T13:06:18+00:00](https://github.com/leanprover-community/mathlib/commit/504e1f60dd4954a96c15fff9d74ae2ddb327062f)
feat(group_theory.nilpotent): add *_central_series_one G 1 = … simp lemmas ([#11584](https://github.com/leanprover-community/mathlib/pull/#11584))

analogously to the existing `_zero` lemmas

### [2022-01-22T13:06:17+00:00](https://github.com/leanprover-community/mathlib/commit/b630b8cda8e1b70087c91dcf9b177cdf42ff486f)
feat(order/antichain): Strong antichains ([#11400](https://github.com/leanprover-community/mathlib/pull/#11400))

This introduces a predicate `is_strong_antichain` to state that a set is a strong antichain with respect to a relation.

`s` is a strong (upward) antichain wrt `r` if for all `a ≠ b` in `s` there is some `c` such that `¬ r a c` or `¬ r b c`. A strong downward antichain of the swapped relation.

### [2022-01-22T12:01:38+00:00](https://github.com/leanprover-community/mathlib/commit/0ca77959c6b9b61fe4f1564d0c91008fc04a5027)
feat(algebra/algebra/operations): remove two hypotheses from `submodule.mul_induction_on` ([#11533](https://github.com/leanprover-community/mathlib/pull/#11533))

`h0 : C 0` followed trivially from `hm 0 _ 0 _`.
`hs : ∀ (r : R) x, C x → C (r • x)` follows nontrivially from an analogy to the `add_submonoid` case.

This also adds:
* a `pow_induction` variant.
* primed variants for when the motive depends on the proof term (such as the proof field in a subtype)

### [2022-01-21T23:07:46+00:00](https://github.com/leanprover-community/mathlib/commit/5e9c0a56ae4de254c60ee08a5ed84bf7bf4c7730)
feat(group_theory/subgroup/basic): add center_le_normalizer ([#11590](https://github.com/leanprover-community/mathlib/pull/#11590))

Co-authored-by: Oliver Nash <github@olivernash.org>



Co-authored-by: Oliver Nash <github@olivernash.org>

### [2022-01-21T22:19:47+00:00](https://github.com/leanprover-community/mathlib/commit/d99f2fd79acbfefec00ef3c7c76d123f6172531c)
chore(analysis/normed/group/basic): merge `norm` and `semi_norm` lemmas on `prod` and `pi` ([#11492](https://github.com/leanprover-community/mathlib/pull/#11492))

`norm` and `semi_norm` are the same operator, so there is no need to have two sets of lemmas.

As a result the elaborator needs a few hints for some applications of the `pi` lemmas, but this is par for the course for pi typeclass instances anyway.

### [2022-01-21T21:34:00+00:00](https://github.com/leanprover-community/mathlib/commit/0653975e3611d2479649f765a0bd76d1d5d15408)
chore(category_theory/sites): Generalize universes for the comparison lemma. ([#11588](https://github.com/leanprover-community/mathlib/pull/#11588))

### [2022-01-21T19:30:19+00:00](https://github.com/leanprover-community/mathlib/commit/049d2aca32a7f79293f077760b09b113d4dc2131)
feat(analysis/fourier): Fourier series for functions in L2; Parseval's identity ([#11320](https://github.com/leanprover-community/mathlib/pull/#11320))

### [2022-01-21T15:40:51+00:00](https://github.com/leanprover-community/mathlib/commit/9c39019f05579b5d0792661515c1d91636a180e4)
refactor(src/order/bounded): Invert iff direction ([#11582](https://github.com/leanprover-community/mathlib/pull/#11582))

That way, `unbounded_gt_iff_unbounded_ge` corresponds to `unbounded_lt_iff_unbounded_le`.

### [2022-01-21T10:54:30+00:00](https://github.com/leanprover-community/mathlib/commit/ca795135b0cbc2a8a1c3da8896365378348b1f08)
feat(order/bounded): Proved many lemmas about bounded and unbounded sets ([#11179](https://github.com/leanprover-community/mathlib/pull/#11179))

These include more convenient characterizations of unboundedness in preorders and linear orders, and many results about bounded intervals and initial segments.

### [2022-01-21T04:46:35+00:00](https://github.com/leanprover-community/mathlib/commit/884d8137d27dea37d2471cb05fb4e8ca27e3ffbd)
chore(analysis/inner_product_space/dual): remove unneeded `complete_space` assumption in four lemmas ([#11578](https://github.com/leanprover-community/mathlib/pull/#11578))

We remove the `[complete_space E]` assumption in four lemmas.

### [2022-01-21T03:07:37+00:00](https://github.com/leanprover-community/mathlib/commit/80e072ec60b48ec9df20e5f26b588af24462335c)
feat(data/finset/basic): random golf ([#11576](https://github.com/leanprover-community/mathlib/pull/#11576))

### [2022-01-21T00:16:10+00:00](https://github.com/leanprover-community/mathlib/commit/d71cab9f9eddacaf387adee45723884203cd98aa)
feat(analysis/seminorm): add composition with linear maps ([#11477](https://github.com/leanprover-community/mathlib/pull/#11477))

This PR defines the composition of seminorms with linear maps and shows that composition is monotone and calculates the seminorm ball of the composition.

### [2022-01-20T22:45:37+00:00](https://github.com/leanprover-community/mathlib/commit/6c97821d3874dcd2b187ac69c31402ca916e7c52)
feat(group_theory/submonoid/pointwise): add pointwise multiplication to `add_submonoid`s ([#11522](https://github.com/leanprover-community/mathlib/pull/#11522))

### [2022-01-20T19:35:50+00:00](https://github.com/leanprover-community/mathlib/commit/adadd4af5cdc604f2b74c4e5848b55237357e0f7)
feat(measure_theory/function/lp_space): some variations of Markov's inequality formulated using `snorm` ([#11478](https://github.com/leanprover-community/mathlib/pull/#11478))

### [2022-01-20T18:13:27+00:00](https://github.com/leanprover-community/mathlib/commit/8c9074f8992abd297e62612d9b7afd4583afdbb3)
chore(*): Remove tactic.unfreeze_local_instances ([#11507](https://github.com/leanprover-community/mathlib/pull/#11507))




Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-01-20T17:46:05+00:00](https://github.com/leanprover-community/mathlib/commit/dfca2b0fb95497099e2edd0b4b19f281beb680b7)
feat(data/sym/sym2): add lemma that eq from distinct common members ([#11563](https://github.com/leanprover-community/mathlib/pull/#11563))

Two terms of type `sym2 a` are equal if one can find two distinct elements of type `a` that are members of both.

### [2022-01-20T16:52:21+00:00](https://github.com/leanprover-community/mathlib/commit/b87449abc3000ee93f631d551f4ca1c78fe5f102)
feat(group_theory/nilpotent): Add equality theorems for nilpotency class ([#11540](https://github.com/leanprover-community/mathlib/pull/#11540))

the nilpotency class can be defined as the length of the
upper central series, the lower central series, or as the shortest
length across all ascending or descending series.

In order to use the equivalence proofs between the various definition
of nilpotency in these lemmas, I had to reorder them to put the `∃n` in
front.

### [2022-01-20T16:01:23+00:00](https://github.com/leanprover-community/mathlib/commit/b5e542d35d664c18f8f0d41c27cef6ed90d4f35c)
feat(measure_theory/measurable_space): defining a measurable function on countably many pieces ([#11532](https://github.com/leanprover-community/mathlib/pull/#11532))

Also, remove `open_locale classical` in this file and add decidability assumptions where needed. And add a few isolated useful lemmas.

### [2022-01-20T15:29:30+00:00](https://github.com/leanprover-community/mathlib/commit/1d762c7e5e151a3c0f9ac15b7318747b16b0ce0a)
feat(ring_theory/{norm.lean, trace.lean}): improve two statements. ([#11569](https://github.com/leanprover-community/mathlib/pull/#11569))

These statement are more precise.

From flt-regular.

### [2022-01-20T11:33:03+00:00](https://github.com/leanprover-community/mathlib/commit/447928c9110e3749155aecdcc5ad86a9f26aba55)
feat(topology/uniform_space/uniform_convergence): Composition on the left ([#11560](https://github.com/leanprover-community/mathlib/pull/#11560))

Composing on the left by a uniformly continuous function preserves uniform convergence.

### [2022-01-20T10:32:33+00:00](https://github.com/leanprover-community/mathlib/commit/5a40c33fe9f039e9294f956efe00d388b6d47a04)
feat(analysis/inner_product_space/l2): a Hilbert space is isometrically isomorphic to `ℓ²` ([#11255](https://github.com/leanprover-community/mathlib/pull/#11255))

Define `orthogonal_family.linear_isometry_equiv`: the isometric isomorphism of a Hilbert space `E` with a Hilbert sum of a family of Hilbert spaces `G i`, induced by individual isometries of each `G i` into `E` whose images are orthogonal and span a dense subset of `E`.

Define a Hilbert basis of `E` to be an isometric isomorphism of `E` with `ℓ²(ι, 𝕜)`, the Hilbert sum of `ι` copies of `𝕜`.  Prove that an orthonormal family of vectors in `E` whose span is dense in `E` has an associated Hilbert basis.

Prove that every Hilbert space admit a Hilbert basis.

Delete three lemmas `maximal_orthonormal_iff_dense_span`, `exists_subset_is_orthonormal_dense_span`, `exists_is_orthonormal_dense_span` which previously expressed this existence theorem in a more awkward way (before the definition `ℓ²(ι, 𝕜)` was available).

### [2022-01-20T08:57:41+00:00](https://github.com/leanprover-community/mathlib/commit/53650a008900b562e678cc140fa1667f4f641d18)
feat(*): lemmas about `disjoint` on `set`s and `filter`s ([#11549](https://github.com/leanprover-community/mathlib/pull/#11549))

### [2022-01-20T07:43:43+00:00](https://github.com/leanprover-community/mathlib/commit/e96e55d82c877e6ef8ee15e3dadbe6916385ae0f)
feat(analysis/normed_space/finite_dimension): extending partially defined Lipschitz functions ([#11530](https://github.com/leanprover-community/mathlib/pull/#11530))

Any Lipschitz function on a subset of a metric space, into a finite-dimensional real vector space, can be extended to a globally defined Lipschitz function (up to worsening slightly the Lipschitz constant).

### [2022-01-20T02:36:41+00:00](https://github.com/leanprover-community/mathlib/commit/0a8848acf657ef83f04cc0bbb3e0907eed00b058)
chore(topology/uniform_space/uniform_convergence): Golf some proofs ([#11561](https://github.com/leanprover-community/mathlib/pull/#11561))

This PR golfs a couple proofs.

### [2022-01-20T00:11:03+00:00](https://github.com/leanprover-community/mathlib/commit/656372c4983d1c745f6cb894da150faf2dcd2b93)
doc(group_theory/free_group): fix linkify ([#11565](https://github.com/leanprover-community/mathlib/pull/#11565))

### [2022-01-19T22:49:35+00:00](https://github.com/leanprover-community/mathlib/commit/0bb427255fcba6e72ffdcc44f2523e04d722e646)
chore(*): to_additive related cleanup ([#11559](https://github.com/leanprover-community/mathlib/pull/#11559))

A few to_additive related cleanups
* Move measurability before to_additive to avoid having to manually do it later (or forget).
* Ensure anything tagged to_additive, mono has the additive version also mono'd
* Move simp before to_additive

### [2022-01-19T19:16:21+00:00](https://github.com/leanprover-community/mathlib/commit/7ee41aabc307b43fefe65b9a8a3dda265731dea8)
feat(data/finsupp/basic): lemmas about map domain with only inj_on hypotheses ([#11484](https://github.com/leanprover-community/mathlib/pull/#11484))

Also a lemma `sum_update_add` expressing the sum of an update in a monoid in terms of the original sum and the value of the update.
And golf `map_domain_smul`.

From flt-regular.

### [2022-01-19T17:41:05+00:00](https://github.com/leanprover-community/mathlib/commit/bbd0f769462bc7330cb001c7788dbd61a5fefaea)
chore(*): clean up comment strings in docstrings ([#11557](https://github.com/leanprover-community/mathlib/pull/#11557))

The syntax for these was wrong and showed up in doc-gen output unintentionally e.g.
https://leanprover-community.github.io/mathlib_docs/algebra/group/opposite.html#add_monoid_hom.op

### [2022-01-19T16:05:57+00:00](https://github.com/leanprover-community/mathlib/commit/a90f9692d06effaac57537aaea8850ca09872848)
feat(data/finset/slice): More `finset.slice` and antichain lemmas ([#11397](https://github.com/leanprover-community/mathlib/pull/#11397))

Also move `finset.coe_bUnion` to a more sensible location.

### [2022-01-19T15:39:30+00:00](https://github.com/leanprover-community/mathlib/commit/c72e709eaffaab6b377f28be9fc07ec7914bae00)
feat(data/sum/interval): The disjoint sum of two locally finite orders is locally finite ([#11351](https://github.com/leanprover-community/mathlib/pull/#11351))

This proves `locally_finite_order (α ⊕ β)` where `α` and `β` are locally finite themselves.

### [2022-01-19T13:06:48+00:00](https://github.com/leanprover-community/mathlib/commit/dbf59ba15ed70777fd0c65055586d62825e44dd6)
feat(algebra/roots_of_unity): basic constructor ([#11504](https://github.com/leanprover-community/mathlib/pull/#11504))

from flt-regular



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2022-01-19T11:58:04+00:00](https://github.com/leanprover-community/mathlib/commit/7ddaf104ae921ffdc3203e899d3fedf7036c639f)
chore(algebra/algebra): algebra_map_int_eq ([#11474](https://github.com/leanprover-community/mathlib/pull/#11474))

from flt-regular



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2022-01-19T10:24:24+00:00](https://github.com/leanprover-community/mathlib/commit/4ad74aedbcb0f0424dd8199d13ea39f5725ddcc4)
chore(algebra/order/sub): Generalize to `preorder` and `add_comm_semigroup` ([#11463](https://github.com/leanprover-community/mathlib/pull/#11463))

This generalizes a bunch of lemmas from `partial_order` to `preorder` and from `add_comm_monoid` to `add_comm_semigroup`.

It also adds `tsub_tsub_le_tsub_add : a - (b - c) ≤ a - b + c`.

### [2022-01-19T06:53:49+00:00](https://github.com/leanprover-community/mathlib/commit/1cfb97d5d3284898b762521f503f9dc72e9fe6aa)
feat(analysis/normed/group/pointwise): the closed thickening of a compact set is the addition of a closed ball. ([#11528](https://github.com/leanprover-community/mathlib/pull/#11528))

### [2022-01-19T06:53:48+00:00](https://github.com/leanprover-community/mathlib/commit/ff9b757439a8f048e4a69cb54cdc6580801284f8)
feat(category_theory/bicategory/locally_discrete): define locally discrete bicategory ([#11402](https://github.com/leanprover-community/mathlib/pull/#11402))

This PR defines the locally discrete bicategory on a category.

### [2022-01-18T21:06:28+00:00](https://github.com/leanprover-community/mathlib/commit/6dd65257e4526784e12a4d3958a8010c6c20990d)
feat(measure_theory/measure/measure_space): better definition of to_measurable ([#11529](https://github.com/leanprover-community/mathlib/pull/#11529))

Currently, `to_measurable μ t` picks a measurable superset of `t` with the same measure. When the measure of `t` is infinite, it is most often useless. This PR adjusts the definition so that, in the case of sigma-finite spaces, `to_measurable μ t` has good properties even when `t` has infinite measure.

### [2022-01-18T20:38:47+00:00](https://github.com/leanprover-community/mathlib/commit/de53f9c4c8da43e368f493cf28a936741d7d7313)
feat(data/nat/factorization): add two convenience lemmas ([#11543](https://github.com/leanprover-community/mathlib/pull/#11543))

Adds convenience lemmas `prime_of_mem_factorization` and `pos_of_mem_factorization`.

Also adds a different proof of `factorization_prod_pow_eq_self` that doesn't depend on `multiplicative_factorization` and so can appear earlier in the file.

### [2022-01-18T17:08:36+00:00](https://github.com/leanprover-community/mathlib/commit/5a1cbe362c17318315a7c3d1cfc9d694ec15ef12)
feat(linear_algebra,algebra,group_theory): miscellaneous lemmas linking some additive monoid and module operations ([#11525](https://github.com/leanprover-community/mathlib/pull/#11525))

This adds:
* `submodule.map_to_add_submonoid`
* `submodule.sup_to_add_submonoid`
* `submodule.supr_to_add_submonoid`

As well as some missing `add_submonoid` lemmas copied from the `submodule` API:
* `add_submonoid.closure_singleton_le_iff_mem`
* `add_submonoid.mem_supr`
* `add_submonoid.supr_eq_closure`

Finally, it generalizes some indices in `supr` and `infi` lemmas from `Type*` to `Sort*`.

This is pre-work for removing a redundant hypothesis from `submodule.mul_induction_on`.

### [2022-01-18T16:08:17+00:00](https://github.com/leanprover-community/mathlib/commit/a0ff65dff76bf70e0d953cc265c0dce6439adce7)
feat(ring_theory/norm): add is_integral_norm ([#11489](https://github.com/leanprover-community/mathlib/pull/#11489))

We add `is_integral_norm`.

From flt-regular

### [2022-01-18T15:13:28+00:00](https://github.com/leanprover-community/mathlib/commit/6f23973add886a64f1f17e58d78ffb1770bc4f87)
feat(ring_theory/graded_algebra/basic): add a helper for construction from an alg hom ([#11541](https://github.com/leanprover-community/mathlib/pull/#11541))

Most graded algebras are already equipped with some kind of universal property which gives an easy way to build such an `alg_hom`.
This lemma makes it easier to discharge the associated proof obligations to show that this alg hom forms a decomposition.

This also relaxes a `ring` argument to `semiring`.

### [2022-01-18T12:22:37+00:00](https://github.com/leanprover-community/mathlib/commit/496a744e7812b1e132602f9175fa263398ecd42d)
feat(measure_theory): generalize `null_of_locally_null` to `outer_measure`, add versions ([#11535](https://github.com/leanprover-community/mathlib/pull/#11535))

* generalize `null_of_locally_null`;
* don't intersect with `s` twice;
* add a contraposed version;
* golf.

### [2022-01-18T12:22:35+00:00](https://github.com/leanprover-community/mathlib/commit/be9a5dec62d156961985b49e09a2fd3d16529974)
feat(topology/separation): add `t1_space_tfae` ([#11534](https://github.com/leanprover-community/mathlib/pull/#11534))

Also add some lemmas about `filter.disjoint`.

### [2022-01-18T12:22:34+00:00](https://github.com/leanprover-community/mathlib/commit/135a92d13e74be8e3a43e6c6ae3aa11bef5b8db5)
feat(data/set): two simple lemmas ([#11531](https://github.com/leanprover-community/mathlib/pull/#11531))

### [2022-01-18T12:22:32+00:00](https://github.com/leanprover-community/mathlib/commit/5bbc187ef918b9b18bbf1109e82832b3abf2afae)
feat(algebra/lie/nilpotent): a non-trivial nilpotent Lie module has non-trivial maximal trivial submodule ([#11515](https://github.com/leanprover-community/mathlib/pull/#11515))

The main result is `lie_module.nontrivial_max_triv_of_is_nilpotent`

### [2022-01-18T10:53:40+00:00](https://github.com/leanprover-community/mathlib/commit/a0da4f1f4853d516021a79ed74ad48bf65abbecd)
feat(algebra/big_operators/basic): Reindexing a product with a permutation ([#11344](https://github.com/leanprover-community/mathlib/pull/#11344))

This proves `(∏ x in s, f (σ x)) = ∏ x in s, f x` for a permutation `σ`.

### [2022-01-18T09:14:43+00:00](https://github.com/leanprover-community/mathlib/commit/8d5caba3f53cebe616d70f37f49b6acc6d11c355)
chore(order/bounded_order): golf ([#11538](https://github.com/leanprover-community/mathlib/pull/#11538))

### [2022-01-18T09:14:41+00:00](https://github.com/leanprover-community/mathlib/commit/a217b9c33f992270d4d643bffed75e2de74e2089)
feat(measure_theory): drop some `measurable_set` assumptions ([#11536](https://github.com/leanprover-community/mathlib/pull/#11536))

* make `exists_subordinate_pairwise_disjoint` work for `null_measurable_set`s;
* use `ae_disjoint` in `measure_Union₀`, drop `measure_Union_of_null_inter`;
* prove `measure_inter_add_diff` for `null_measurable_set`s;
* drop some `measurable_set` assumptions in `measure_union`, `measure_diff`, etc;
* golf.

### [2022-01-18T09:14:39+00:00](https://github.com/leanprover-community/mathlib/commit/f23c00f293d796605122bb8fae58dbe3c2381496)
chore(algebra/order/ring): move lemmas about invertible into a new file ([#11511](https://github.com/leanprover-community/mathlib/pull/#11511))

The motivation here is to eventually be able to use the `one_pow` lemma in `algebra.group.units`. This is one very small step in that direction.

### [2022-01-18T07:45:51+00:00](https://github.com/leanprover-community/mathlib/commit/01fa7f5261740a676cb3ccccd9f3acb7a71105d3)
feat(data/fintype/basic): `one_lt_card_iff` and `two_lt_card_iff` ([#11524](https://github.com/leanprover-community/mathlib/pull/#11524))

This PR adds `one_lt_card_iff` and `two_lt_card_iff`.

### [2022-01-18T07:09:41+00:00](https://github.com/leanprover-community/mathlib/commit/e895c8fa5ff8c265cbe24a5ce80030bf0da6ff66)
chore(cone_category): generalize universes ([#11539](https://github.com/leanprover-community/mathlib/pull/#11539))

### [2022-01-18T03:54:41+00:00](https://github.com/leanprover-community/mathlib/commit/813a191df011bff08bd81169acb93a8e634797e7)
chore(logic/basic): Make higher `forall_congr`/`exists_congr` lemmas dependent ([#11490](https://github.com/leanprover-community/mathlib/pull/#11490))

Currently, `forall₂_congr` and friends take as arguments non dependent propositions like `p q : α → β → Prop`. This prevents them being useful virtually anywhere as most often foralls are nested like `∀ a, a ∈ s → ...` and `a ∈ s` depends on `a`.
This PR turns them into `Π a, β a → Prop` (and similar for higher arities).

As a bonus, it adds the `5`-ary version and golfs all occurrences of nested `forall_congr`s.

### [2022-01-18T00:10:59+00:00](https://github.com/leanprover-community/mathlib/commit/99e90364660fc3b2aa8c6d053ece1156fbf6c16b)
chore(algebra/algebra/subalgebra): lemmas about top and injectivity ([#11514](https://github.com/leanprover-community/mathlib/pull/#11514))

### [2022-01-17T23:42:43+00:00](https://github.com/leanprover-community/mathlib/commit/1e4da8d51ac538f2d62759ddfb93e0dde4d89783)
refactor(linear_algebra/{tensor,exterior}_algebra): convert to a directory ([#11513](https://github.com/leanprover-community/mathlib/pull/#11513))

These files can be quite slow, so it's useful to be able to add new definitions and lemmas in standalone files, rather than in the same file.
There are a number of open PRs of mine that make this move as part of a new feature, so let's just move them pre-emptively.

### [2022-01-17T22:39:19+00:00](https://github.com/leanprover-community/mathlib/commit/5b36c868a1947a1ad17245be6fd280c9b91b1f6c)
feat(analysis/normed_space/finite_dimension): the determinant is continuous on the space of continuous linear maps ([#11526](https://github.com/leanprover-community/mathlib/pull/#11526))

### [2022-01-17T22:11:44+00:00](https://github.com/leanprover-community/mathlib/commit/407251222a57fe35565dadc3a14a467ac76225c7)
feat(src/group_theory/nilpotent): solvable_of_nilpotent ([#11512](https://github.com/leanprover-community/mathlib/pull/#11512))

following the proof on
<https://groupprops.subwiki.org/wiki/Nilpotent_implies_solvable>

### [2022-01-17T21:04:13+00:00](https://github.com/leanprover-community/mathlib/commit/274b5309271d1c825fb331a95d99fba51295bfd1)
feat(data/equiv/basic): add `add_equiv.to_int_linear_equiv` ([#11456](https://github.com/leanprover-community/mathlib/pull/#11456))

as written by @adamtopaz on [zulip](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/injections.20to.20equiv/near/268038978)

Co-authored-by: Adam Topaz <github@adamtopaz.com>

### [2022-01-17T19:54:14+00:00](https://github.com/leanprover-community/mathlib/commit/1fbef63a22da696c8fa7a2b5a5cbc42321131702)
feat(order/filter): add two lemmas ([#11519](https://github.com/leanprover-community/mathlib/pull/#11519))

Two easy lemmas (from the sphere eversion project) and some minor style changes.

### [2022-01-17T19:54:13+00:00](https://github.com/leanprover-community/mathlib/commit/e096b99ae217ff542cfea59bdbb81791277f853e)
refactor(set_theory/ordinal_arithmetic): Rename `power` to `opow` ([#11279](https://github.com/leanprover-community/mathlib/pull/#11279))

### [2022-01-17T19:08:49+00:00](https://github.com/leanprover-community/mathlib/commit/2a8a01bce81216c3c791ee4f8f0e4533e271d05f)
chore(measure_theory/integral/bochner): use set_to_fun lemmas to prove integral properties ([#10717](https://github.com/leanprover-community/mathlib/pull/#10717))

### [2022-01-17T15:56:24+00:00](https://github.com/leanprover-community/mathlib/commit/905871f43427fcc62c95b768f676774a7a8bb47d)
feat(analysis/normed_space/spectrum): an algebra homomorphism into the base field is bounded ([#11494](https://github.com/leanprover-community/mathlib/pull/#11494))

We prove basic facts about `φ : A →ₐ[𝕜] 𝕜` when `A` is a Banach algebra, namely that `φ` maps elements of `A` to their spectrum, and that `φ` is bounded.



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2022-01-17T15:10:20+00:00](https://github.com/leanprover-community/mathlib/commit/4e31396936a5c02fe2d2647c4967e2176e9d5c4f)
feat(measure_theory/measure): define `ae_disjoint` ([#11500](https://github.com/leanprover-community/mathlib/pull/#11500))

I am going to migrate most `disjoint` assumptions to `ae_disjoint`.

### [2022-01-17T14:43:23+00:00](https://github.com/leanprover-community/mathlib/commit/50bdb2974a3166f0ed47139fdc1cfdddbca18169)
feat(analysis/complex/cauchy_integral): review docs, add versions without `off_countable` ([#11417](https://github.com/leanprover-community/mathlib/pull/#11417))

### [2022-01-17T11:46:31+00:00](https://github.com/leanprover-community/mathlib/commit/391bd215c6b4807ea216e337a3b2737455605db0)
doc(src/data/equiv/transfer_instances): nontrivial, not nonzero ([#11508](https://github.com/leanprover-community/mathlib/pull/#11508))

small docs typo, it seems.

### [2022-01-17T10:14:51+00:00](https://github.com/leanprover-community/mathlib/commit/6b475a413ce1d9e4ff85f040b1ef0d10094ad78a)
feat(data/finset/basic): `finset.two_lt_card` ([#11505](https://github.com/leanprover-community/mathlib/pull/#11505))

This PR adds lemmas `finset.two_lt_card` and `finset.two_lt_card_iff`, similar to `finset.one_lt_card` and `finset.one_lt_card_iff`.

These lemmas are also similar to `finset.card_eq_three`.

### [2022-01-17T10:14:50+00:00](https://github.com/leanprover-community/mathlib/commit/079fb166344398cf5e66eb5ddd329f747a6e4698)
feat(analysis/special_functions/complex/arg): `arg_neg` lemmas ([#11503](https://github.com/leanprover-community/mathlib/pull/#11503))

Add lemmas about the value of `arg (-x)`: one each for positive and
negative sign of `x.im`, two `iff` lemmas saying exactly when it's
equal to `arg x - π` or `arg x + π`, and a simpler lemma giving the
value of `(arg (-x) : real.angle)` for any nonzero `x`.

These replace the previous lemmas
`arg_eq_arg_neg_add_pi_of_im_nonneg_of_re_neg` and
`arg_eq_arg_neg_sub_pi_of_im_neg_of_re_neg`, which are strictly less
general (they have a hypothesis `x.re < 0` that's not needed unless
the imaginary part is 0).  Those two lemmas are unused in current
mathlib (they were used in the proof of `cos_arg` before the golfing
in [#10365](https://github.com/leanprover-community/mathlib/pull/#10365)) and it seems reasonable to me to replace them with the more
general lemmas.

### [2022-01-17T10:14:49+00:00](https://github.com/leanprover-community/mathlib/commit/1c56a8de7cbb31a04ff0a52fd5339541d565a9bc)
feat(order/well_founded_set): Antichains in a partial well order are finite ([#11286](https://github.com/leanprover-community/mathlib/pull/#11286))

and when the relation is reflexive and symmetric, it's actually an equivalent condition.

### [2022-01-17T08:42:46+00:00](https://github.com/leanprover-community/mathlib/commit/0d5bfd7bc80c24b3a0abcdc1a5b4aeb2baa3023c)
feat(*): add a few lemmas about `function.extend` ([#11498](https://github.com/leanprover-community/mathlib/pull/#11498))

I'm going to use `function.extend` as another way to get from
`[encodable ι] (s : ι → set α)` to `t : ℕ → set α` in measure theory.

### [2022-01-17T08:42:45+00:00](https://github.com/leanprover-community/mathlib/commit/9b70cc6121a94790188467b10b07f1178738c058)
feat(data/equiv/encodable): add a few lemmas ([#11497](https://github.com/leanprover-community/mathlib/pull/#11497))

* add `simp` lemmas `encodable.encode_inj` and
  `encodable.decode₂_encode`;
* add `encodable.decode₂_eq_some`;
* avoid non-final `simp` in the proof of `encodable.Union_decode₂_disjoint_on`.

### [2022-01-17T08:42:44+00:00](https://github.com/leanprover-community/mathlib/commit/ac76eb3743a2da7f91a6697572a1e7a2d903f6a3)
feat(algebra/star/unitary): lemmas about group_with_zero ([#11493](https://github.com/leanprover-community/mathlib/pull/#11493))

### [2022-01-17T08:42:43+00:00](https://github.com/leanprover-community/mathlib/commit/a88ae0c43e5ba2ba6ec14155ee7a88d8ea07f1c0)
refactor(data/set/lattice): Generalize `mem_bUnion_iff` and `mem_bInter_iff` to dependent families ([#11485](https://github.com/leanprover-community/mathlib/pull/#11485))

They're now called `mem_Union₂` and `mem_Inter₂`.

### [2022-01-17T07:55:11+00:00](https://github.com/leanprover-community/mathlib/commit/83eff323bed0971161dc1c12f87f34a0934bf581)
feat(topology/metric_space): more lemmas about disjoint balls ([#11506](https://github.com/leanprover-community/mathlib/pull/#11506))

* drop unused lemmas `metric.ball_disjoint` and
  `metric.ball_disjoint_same`; the former was a duplicate of
  `metric.ball_disjoint_ball`;
* add `metric.closed_ball_disjoint_ball`, `metric.closed_ball_disjoint_closed_ball`.

### [2022-01-17T07:55:09+00:00](https://github.com/leanprover-community/mathlib/commit/2f342b807d74247aca09d593955257e53386ad2c)
feat(measure_theory): generalize some lemmas to `outer_measure` ([#11501](https://github.com/leanprover-community/mathlib/pull/#11501))

### [2022-01-17T07:20:57+00:00](https://github.com/leanprover-community/mathlib/commit/43bbaee8a1a4deaa3d8503dc14f410a864799cd5)
feat(measure_theory/measure): add lemmas, drop `measurable_set` assumptions ([#11499](https://github.com/leanprover-community/mathlib/pull/#11499))

* `restrict_eq_self` no longer requires measurability of either set;
* `restrict_apply_self` no longer requires measurability of the set;
* add `restrict_apply_superset` and `restrict_restrict_of_subset` ;
* add `restrict_restrict'` that assumes measurability of the other
  set, drop one `measurable_set` assumption in `restrict_comm`;
* drop measurability assumptions in `restrict_congr_mono`.

### [2022-01-17T00:42:46+00:00](https://github.com/leanprover-community/mathlib/commit/6d19ebaa7d6aa473101c70d197b743065d98772a)
feat(*): add to_sub* lemmas for `map`, `fg` ([#11480](https://github.com/leanprover-community/mathlib/pull/#11480))

From flt-regular.



Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2022-01-16T23:52:06+00:00](https://github.com/leanprover-community/mathlib/commit/4ed731683cecb4f317b07e9c923d05bab292fee1)
feat(analysis/special_functions/pow): tendsto rpow lemma for ennreals ([#11475](https://github.com/leanprover-community/mathlib/pull/#11475))

### [2022-01-16T23:11:56+00:00](https://github.com/leanprover-community/mathlib/commit/2c2338e70550704fcad4c16cd149fbeb9864b6e1)
chore(data/complex/basic): add of_real_eq_one ([#11496](https://github.com/leanprover-community/mathlib/pull/#11496))

### [2022-01-16T23:11:54+00:00](https://github.com/leanprover-community/mathlib/commit/1f6bbf9e0ca8bc6600dd15b8264d80a9ab35bc72)
feat(analysis/special_functions/complex/arg): `arg_conj`, `arg_inv` lemmas ([#11479](https://github.com/leanprover-community/mathlib/pull/#11479))

Add lemmas giving the values of `arg (conj x)` and `arg x⁻¹`, both for
`arg` as a real number and `arg` coerced to `real.angle` (the latter
function being better behaved because it avoids case distinctions
around getting a result into the interval (-π, π]).

### [2022-01-16T22:44:43+00:00](https://github.com/leanprover-community/mathlib/commit/f4b93c8c14da58eac47b5cc9ce45c1d5319a6275)
feat(analysis/special_functions/trigonometric/angle): more 2π = 0 lemmas ([#11482](https://github.com/leanprover-community/mathlib/pull/#11482))

Add some more lemmas useful for manipulation of `real.angle` expressions.

### [2022-01-16T22:07:26+00:00](https://github.com/leanprover-community/mathlib/commit/ed57bdd38c5af6bffe794d06b57db60592f9268f)
feat(number_field): notation for 𝓞 K, an algebra & ∈ 𝓞 K iff ([#11476](https://github.com/leanprover-community/mathlib/pull/#11476))

From flt-regular.

### [2022-01-16T21:15:07+00:00](https://github.com/leanprover-community/mathlib/commit/5f5bcd85dead1b6df231cdf1b6e4e34b23187631)
feat(order/filter/ultrafilter): add some comap_inf_principal lemmas ([#11495](https://github.com/leanprover-community/mathlib/pull/#11495))

...in the setting of ultrafilters

These lemmas are useful to prove e.g. that the continuous image of a
compact set is compact in the setting of convergence spaces.


Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2022-01-16T15:00:06+00:00](https://github.com/leanprover-community/mathlib/commit/d7f8f580c8b90f7cc50d7c831dbea89d0c47a449)
feat(algebra/star/unitary): (re)define unitary elements of a star monoid ([#11457](https://github.com/leanprover-community/mathlib/pull/#11457))

This PR defines `unitary R` for a star monoid `R` as the submonoid containing the elements that satisfy both `star U * U = 1` and `U * star U = 1`. We show basic properties (i.e. that this forms a group) and show that they
preserve the norm when `R` is a C* ring.

Note that this replaces `unitary_submonoid`, which only included the condition `star U * U = 1` -- see [the discussion](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/unitary.20submonoid) on Zulip.



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>
Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2022-01-16T15:00:04+00:00](https://github.com/leanprover-community/mathlib/commit/1d1f3841c122231a2f0ff28f973ae17f45b9f62b)
feat(analysis/calculus/dslope): define dslope ([#11432](https://github.com/leanprover-community/mathlib/pull/#11432))

### [2022-01-16T13:30:27+00:00](https://github.com/leanprover-community/mathlib/commit/1aee8a8deb2557cb3ce44512184c8b475d115f3b)
chore(*): Put `simp` attribute before `to_additive` ([#11488](https://github.com/leanprover-community/mathlib/pull/#11488))

A few lemmas were tagged in the wrong order. As tags are applied from left to right, `@[to_additive, simp]` only marks the multiplicative lemma as `simp`. The correct order is thus `@[simp, to_additive]`.

### [2022-01-16T13:30:25+00:00](https://github.com/leanprover-community/mathlib/commit/02a4775ac88b3817828fce742d9744249cfcdea6)
refactor(analysis/normed_space): merge `normed_space` and `semi_normed_space` ([#8218](https://github.com/leanprover-community/mathlib/pull/#8218))

There are no theorems which are true for `[normed_group M] [normed_space R M]` but not `[normed_group M] [semi_normed_space R M]`; so there is about as much value to the `semi_normed_space` / `normed_space` distinction as there was between `module` / `semimodule`. Since we eliminated `semimodule`, we should eliminte `semi_normed_space` too.

This relaxes the typeclass arguments of `normed_space` to make it a drop-in replacement for `semi_normed_space`; or viewed another way, this removes `normed_space` and renames `semi_normed_space` to replace it.

This does the same thing to `normed_algebra` and `seminormed_algebra`, but these are hardly used anyway.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/semi_normed_space.20vs.20normed_space/near/245089933)

As with any typeclass refactor, this randomly breaks elaboration in a few places; presumably, it was able to unify arguments from one particular typeclass path, but not from another. To fix this, some type ascriptions have to be added where previously none were needed. In a few rare cases, the elaborator gets so confused that we have to enter tactic mode to produce a term.

This isn't really a new problem - this PR just makes these issues all visible at once, whereas normally we'd only run into one or two at a time. Optimistically Lean 4 will fix all this, but we won't really know until we try.

### [2022-01-16T13:03:59+00:00](https://github.com/leanprover-community/mathlib/commit/d60541cce8bd861d389c48df5bd40d0035bf9faf)
feat(analysis/seminorm): Add `has_add` and `has_scalar nnreal` ([#11414](https://github.com/leanprover-community/mathlib/pull/#11414))

Add instances of `has_add` and `has_scalar nnreal` type classes for `seminorm`.

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-01-16T09:33:17+00:00](https://github.com/leanprover-community/mathlib/commit/3fb5b82e47a822150a3b6592312661c717225fc3)
feat(algebra/star/basic): change `star_ring_aut` (notably, complex conjugation) from `ring_equiv` to `ring_hom` and make type argument explicit ([#11418](https://github.com/leanprover-community/mathlib/pull/#11418))

Change the underlying object notated by `conj` from
```lean
def star_ring_aut [comm_semiring R] [star_ring R] : ring_aut R :=
```
to
```lean
def star_ring_end [comm_semiring R] [star_ring R] : R →+* R :=
```
and also make the `R` argument explicit.  These two changes allow the notation for conjugate-linear maps, `E →ₗ⋆[R] F` and variants, to pretty-print, see
https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Pretty.20printer.20omits.20notation

This is a partial reversion of [#9640](https://github.com/leanprover-community/mathlib/pull/#9640), in which complex conjugation was upgraded from `ring_hom` to `ring_equiv`.

### [2022-01-15T21:32:40+00:00](https://github.com/leanprover-community/mathlib/commit/1a29adc4774a1591013dd674ac084e8b9e8d406d)
feat(measure_theory/integral): weaker assumptions on Ioi integrability ([#11090](https://github.com/leanprover-community/mathlib/pull/#11090))

To show a function is integrable given an `ae_cover` it suffices to show boundedness along a filter, not necessarily convergence. This PR adds these generalisations, and uses them to show the older convergence versions.

### [2022-01-15T20:09:30+00:00](https://github.com/leanprover-community/mathlib/commit/1f266d6206fbf07e66d56efce46e755ce40a8262)
feat(data/pnat/basic): `succ_nat_pred` ([#11455](https://github.com/leanprover-community/mathlib/pull/#11455))





Co-authored-by: Eric <37984851+ericrbg@users.noreply.github.com>

### [2022-01-15T18:38:48+00:00](https://github.com/leanprover-community/mathlib/commit/0b4f07f116270e6384157bd099c4436084e98e4a)
feat(data/set/basic): add singleton_injective ([#11464](https://github.com/leanprover-community/mathlib/pull/#11464))

### [2022-01-15T17:32:48+00:00](https://github.com/leanprover-community/mathlib/commit/37cf695a59ffd06edabebb86134708ed5d177563)
feat(measure_theory/integral/set_to_l1): monotonicity properties of set_to_fun ([#10714](https://github.com/leanprover-community/mathlib/pull/#10714))

We prove that in a `normed_lattice_add_comm_group`, if `T` is such that `0 ≤ T s x` for `0 ≤ x`,  then `set_to_fun μ T` verifies
- `set_to_fun_mono_left (h : ∀ s x, T' s x ≤ T'' s x) : set_to_fun μ T' hT' f ≤ set_to_fun μ T'' hT'' f`
- `set_to_fun_nonneg (hf : 0 ≤ᵐ[μ] f) : 0 ≤ set_to_fun μ T hT f`
- `set_to_fun_mono (hfg : f ≤ᵐ[μ] g) : set_to_fun μ T hT f ≤ set_to_fun μ T hT g`

### [2022-01-15T15:30:16+00:00](https://github.com/leanprover-community/mathlib/commit/51c5a40e8dabe65e47f5599b44c446a2877f42c8)
feat(analysis/special_functions/trigonometric/angle): `neg_coe_pi` ([#11460](https://github.com/leanprover-community/mathlib/pull/#11460))

Add the lemma that `-π` and `π` are the same `real.angle` (angle mod 2π).

### [2022-01-15T14:19:28+00:00](https://github.com/leanprover-community/mathlib/commit/ce62dbc3acae70664ba51dead0921a1ffb83e8ef)
feat(algebra/star/self_adjoint): module instance on self-adjoint elements of a star algebra ([#11322](https://github.com/leanprover-community/mathlib/pull/#11322))

We put a module instance on `self_adjoint A`, where `A` is a `[star_module R A]` and `R` has a trivial star operation. A new typeclass `[has_trivial_star R]` is created for this purpose with an instance on `ℝ`. This allows us to express the fact that e.g. the space of complex Hermitian matrices is a real vector space.

### [2022-01-15T10:42:41+00:00](https://github.com/leanprover-community/mathlib/commit/0d1d4c955991d4372447c2b406b146a5fe29bc1f)
feat(data/finset/basic): strengthen `finset.nonempty.cons_induction` ([#11452](https://github.com/leanprover-community/mathlib/pull/#11452))

This change makes it strong enough to be used in three other lemmas.

### [2022-01-15T09:16:04+00:00](https://github.com/leanprover-community/mathlib/commit/ff19c951ae39a618881e7200aefd8d033a3d61e1)
chore(algebra/group_power/basic): collect together ring lemmas ([#11446](https://github.com/leanprover-community/mathlib/pull/#11446))

This reorders the lemmas so that all the ring and comm_ring lemmas can be put in a single section.

### [2022-01-15T07:39:52+00:00](https://github.com/leanprover-community/mathlib/commit/df2d70d67999da49fecfaaaf64ac107642619b09)
refactor(analysis/inner_product_space/basic): generalize `orthogonal_family` from submodules to maps ([#11254](https://github.com/leanprover-community/mathlib/pull/#11254))

The old definition of `orthogonal_family` was a predicate on `V : ι → submodule 𝕜 E`, a family of submodules of an inner product space `E`; the new definition is a predicate on 
```lean
{G : ι → Type*} [Π i, inner_product_space 𝕜 (G i)] (V : Π i, G i →ₗᵢ[𝕜] E)
```
a family of inner product spaces and (injective, generally not surjective) isometries of these inner product spaces into `E`.

The new definition subsumes the old definition, but also applies more cleanly to orthonormal sets of vectors.  An orthonormal set `{v : ι → E}` of vectors in `E` induces an `orthogonal_family` of the new style with `G i` chosen to be `𝕜`, for each `i`, and `V i : G i →ₗᵢ[𝕜] E` the map from `𝕜` to the span of `v i` in `E`.

In [#11255](https://github.com/leanprover-community/mathlib/pull/#11255) we write down the induced isometry from the l2 space `lp G 2` into `E` induced by "summing" all the isometries in an orthogonal family.  This works for either the old definition or the new definition.  But with the old definition, an orthonormal set of vectors induces an isometry from the weird l2 space `lp (λ i, span 𝕜 (v i)) 2` into `E`, whereas with the new definition it induces an isometry from the standard l2 space `lp (λ i, 𝕜) 2` into `E`.  This is much more elegant!

### [2022-01-15T02:46:13+00:00](https://github.com/leanprover-community/mathlib/commit/fa41b7aab909e436b1299bc383d1822b04b99aab)
feat(topology/algebra/uniform_group): Condition for uniform convergence ([#11391](https://github.com/leanprover-community/mathlib/pull/#11391))

This PR adds a lemma regarding uniform convergence on a topological group `G`, placed right after the construction of the `uniform_space` structure on `G`.

### [2022-01-14T21:29:54+00:00](https://github.com/leanprover-community/mathlib/commit/323e388c2f26fbb1ff402b49755a211cdf48465d)
feat(algebraic_geometry): More lemmas about affine schemes and basic open sets ([#11449](https://github.com/leanprover-community/mathlib/pull/#11449))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2022-01-14T19:02:35+00:00](https://github.com/leanprover-community/mathlib/commit/f770d6efdf8c0cbaca54cf413c9693f1b8823d0b)
feat(topology/separation): generalize two lemmas ([#11454](https://github.com/leanprover-community/mathlib/pull/#11454))

### [2022-01-14T19:02:34+00:00](https://github.com/leanprover-community/mathlib/commit/d54375ea9dfe44787b7c6d65f049eb9531486dbd)
feat(data/nat/totient): `totient_even` ([#11436](https://github.com/leanprover-community/mathlib/pull/#11436))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-01-14T17:47:21+00:00](https://github.com/leanprover-community/mathlib/commit/49079c14227a7d586d29b2e3484f24357789eac3)
feat(data/finsupp/basic): add `finset_sum_apply` and `coe_fn_add_hom` ([#11423](https://github.com/leanprover-community/mathlib/pull/#11423))

`finset_sum_apply`: Given a family of functions `f i : α → ℕ` indexed over `S : finset ι`, the sum of this family over `S` is a function `α → ℕ` whose value at `p : α` is `∑ (i : ι) in S, (f i) p`

`coe_fn_add_monoid_hom`: Coercion from a `finsupp` to a function type is an `add_monoid_hom`. Proved by Alex J. Best

Co-authored-by: Alex J. Best <alex.j.best@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-01-14T17:47:19+00:00](https://github.com/leanprover-community/mathlib/commit/757eaf4ffef9f10b7cbf670c1649da978d73de0b)
chore(analysis/calculus/{deriv,mean_value}): use `slope` ([#11419](https://github.com/leanprover-community/mathlib/pull/#11419))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-01-14T17:47:18+00:00](https://github.com/leanprover-community/mathlib/commit/653fe45e40f2881f22a135cd6a3ec60c718d2d28)
feat(analysis/seminorm): `semilattice_sup` on seminorms and lemmas about `ball` ([#11329](https://github.com/leanprover-community/mathlib/pull/#11329))

Define `bot` and the the binary `sup` on seminorms, and some lemmas about the supremum of a finite number of seminorms.
Shows that the unit ball of the supremum is given by the intersection of the unit balls.


Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-01-14T16:49:58+00:00](https://github.com/leanprover-community/mathlib/commit/2ce607e4d50a49f40551d96224e02538fadf8095)
Docs typo in set_theory/cardinal: Wrong type product symbol ([#11453](https://github.com/leanprover-community/mathlib/pull/#11453))

### [2022-01-14T15:12:25+00:00](https://github.com/leanprover-community/mathlib/commit/d8aed79b319345833134b7dd9086f147d508d022)
chore(analysis/inner_product_space/projection): Speedup `linear_isometry_equiv.reflections_generate_dim_aux` ([#11443](https://github.com/leanprover-community/mathlib/pull/#11443))

This takes it from around 17s to around 6s on my machine.

IMO using `e * f` instead of `f.trans e` makes this proof a little easier to follow, as then we don't have to translate between the two different spellings mid proof (and `prod` uses the `*` spelling internally)

### [2022-01-14T15:12:24+00:00](https://github.com/leanprover-community/mathlib/commit/22a9f2ebb50d9e6d4d85c6b31eae800093a5af1d)
feat(algebra/field/basic): `div_neg_self`, `neg_div_self` ([#11438](https://github.com/leanprover-community/mathlib/pull/#11438))

I think these two lemmas are useful as `simp` lemmas, but they don't
seem to be there already.

### [2022-01-14T14:12:17+00:00](https://github.com/leanprover-community/mathlib/commit/201aeaa3fd98e7dd6945bf38236af4449be2275f)
chore(algebra/char_p): ring_char.eq is better in the other direction, with instances, and explicit arguments ([#11439](https://github.com/leanprover-community/mathlib/pull/#11439))

### [2022-01-14T13:04:30+00:00](https://github.com/leanprover-community/mathlib/commit/011a59982f9611046615ca8a7525f03eab44db4c)
feat(algebraic_geometry): Gluing morphisms from an open cover. ([#11441](https://github.com/leanprover-community/mathlib/pull/#11441))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2022-01-14T10:58:50+00:00](https://github.com/leanprover-community/mathlib/commit/44351a9f1c9892de81461a92ade9c4bde0eb4614)
chore(analysis/complex/circle): add to_units and golf ([#11435](https://github.com/leanprover-community/mathlib/pull/#11435))

### [2022-01-14T10:58:49+00:00](https://github.com/leanprover-community/mathlib/commit/38eb719f0cc3f63cb9ba3a6ecf712819fa3ebfb1)
feat(data/matrix/notation): relax typeclass assumptions ([#11429](https://github.com/leanprover-community/mathlib/pull/#11429))

### [2022-01-14T10:58:47+00:00](https://github.com/leanprover-community/mathlib/commit/a86183915ae48a7620b0b06f2fa82e53e5782847)
feat(ring_theory/discriminant): add discr_mul_is_integral_mem_adjoin ([#11396](https://github.com/leanprover-community/mathlib/pull/#11396))

We add `discr_mul_is_integral_mem_adjoin`: let `K` be the fraction field of an integrally closed domain `R` and let `L` be a finite
separable extension of `K`. Let `B : power_basis K L` be such that `is_integral R B.gen`. Then for all `z : L` that are integral over `R`, we have `(discr K B.basis) • z ∈ adjoin R ({B.gen} : set L)`.

From flt-regular.

### [2022-01-14T10:07:46+00:00](https://github.com/leanprover-community/mathlib/commit/5a6c13bc797a83abde723ceebb4e0f3681406427)
feat(algebraic_geometry/open_immersion): Operations on open covers.  ([#11442](https://github.com/leanprover-community/mathlib/pull/#11442))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2022-01-14T10:07:44+00:00](https://github.com/leanprover-community/mathlib/commit/e28601297b587cf8700d922eb1947eb490c7285f)
feat(algebra/ne_zero): `pos_of_ne_zero_coe` ([#11437](https://github.com/leanprover-community/mathlib/pull/#11437))

### [2022-01-14T10:07:43+00:00](https://github.com/leanprover-community/mathlib/commit/021baaee2bf6da495062bc55e7163a2e0e8de738)
feat(analysis/normed_space/linear_isometry): coercion injectivity lemmas and add_monoid_hom_class ([#11434](https://github.com/leanprover-community/mathlib/pull/#11434))

This also registers `linear_isometry` and `linear_isometry_equiv` with `add_monoid_hom_class`.

I found myself wanting one of these while squeezing a simp, so may as well have all of them now.

### [2022-01-14T10:07:42+00:00](https://github.com/leanprover-community/mathlib/commit/61054f7010e6af81c91aa97778b41a55d714947e)
feat(topology): some improvements ([#11424](https://github.com/leanprover-community/mathlib/pull/#11424))

* Prove a better version of `continuous_on.comp_fract`. Rename `continuous_on.comp_fract` -> `continuous_on.comp_fract''`.
* Rename `finset.closure_Union` -> `finset.closure_bUnion`
* Add `continuous.congr` and `continuous.subtype_coe`

### [2022-01-14T08:37:20+00:00](https://github.com/leanprover-community/mathlib/commit/3c1740acfd2d108247d93da31262b2b6ea53c36a)
feat(combinatorics/configuration): Define the order of a projective plane ([#11430](https://github.com/leanprover-community/mathlib/pull/#11430))

This PR defines the order of a projective plane, and proves a couple lemmas.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2022-01-14T08:37:18+00:00](https://github.com/leanprover-community/mathlib/commit/5a3abca1ad79eb035d55c5214790367e9425037b)
feat(topology/subset_properties): some compactness properties ([#11425](https://github.com/leanprover-community/mathlib/pull/#11425))

* Add some lemmas about the existence of compact sets
* Add `is_compact.eventually_forall_of_forall_eventually`
* Some cleanup in `topology/subset_properties` and `topology/separation`

### [2022-01-14T08:37:17+00:00](https://github.com/leanprover-community/mathlib/commit/feaf6f5ee7e3bca441ab5b6d3590f49dc235c4db)
feat(algebraic_geometry): lemmas about basic opens in schemes ([#11393](https://github.com/leanprover-community/mathlib/pull/#11393))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2022-01-14T08:37:16+00:00](https://github.com/leanprover-community/mathlib/commit/85accb8a2d661e09b5a8abbbc8a5e716096f9c14)
feat(data/{multiset,finset}/sum): Disjoint sum of multisets/finsets ([#11355](https://github.com/leanprover-community/mathlib/pull/#11355))

This defines the disjoint union of two multisets/finsets as `multiset (α ⊕ β)`/`finset (α ⊕ β)`.

### [2022-01-14T08:37:15+00:00](https://github.com/leanprover-community/mathlib/commit/9a9499364464446f83a101c32889ccfa43f54118)
feat(analysis/inner_product_space/l2): Inner product space structure on `l2` ([#11315](https://github.com/leanprover-community/mathlib/pull/#11315))




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2022-01-14T08:37:14+00:00](https://github.com/leanprover-community/mathlib/commit/fb2b1a0113c6ecdf75267d3b7da3b569a275cc81)
fix(algebra/star/basic): redefine `star_ordered_ring` ([#11213](https://github.com/leanprover-community/mathlib/pull/#11213))

This PR redefines `star_ordered_ring` to remove the `ordered_semiring` assumption, which includes undesirable axioms such as `∀ (a b c : α), a < b → 0 < c → c * a < c * b`. See the discussion on Zulip [here](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Star.20ordered.20ring).

### [2022-01-14T06:59:50+00:00](https://github.com/leanprover-community/mathlib/commit/60c77d494eb7bc756604eff6c1721800069c39ce)
feat(tactic/lint): include linter name in github output ([#11413](https://github.com/leanprover-community/mathlib/pull/#11413))




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2022-01-14T06:28:53+00:00](https://github.com/leanprover-community/mathlib/commit/d2484474362d94ed2c00ae8abccd438b7e360b34)
feat(algebraic_geometry): Gluing schemes ([#11431](https://github.com/leanprover-community/mathlib/pull/#11431))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2022-01-13T23:16:00+00:00](https://github.com/leanprover-community/mathlib/commit/48fd9f2589e1bac31896a82d5989df892902179f)
chore(data/list/big_operators): rename vars, reorder lemmas ([#11433](https://github.com/leanprover-community/mathlib/pull/#11433))

* use better variable names;
* move lemmas to proper sections;
* relax `[comm_semiring R]` to `[semiring R]` in `dvd_sum`.

### [2022-01-13T21:10:22+00:00](https://github.com/leanprover-community/mathlib/commit/e830348b3b63226ec7bebfcf6aadb7f051fd71ff)
feat(set_theory/ordinal_arithmetic): Families of ordinals ([#11278](https://github.com/leanprover-community/mathlib/pull/#11278))

This PR introduces some API to convert from `ι → β` indexed families to `Π o < b, β` indexed families. This simplifies and contextualizes some existing results.

### [2022-01-13T20:16:58+00:00](https://github.com/leanprover-community/mathlib/commit/6fa2e46e0782599bdfb06efb98a9a77d7ddc949e)
feat(algebra/lie/nilpotent): central extensions of nilpotent Lie modules / algebras are nilpotent ([#11422](https://github.com/leanprover-community/mathlib/pull/#11422))

The main result is `lie_algebra.nilpotent_of_nilpotent_quotient`.

### [2022-01-13T19:34:18+00:00](https://github.com/leanprover-community/mathlib/commit/432e85efe3c0371c06fab5230de6a95842903951)
feat(analysis/normed_space/linear_isometry): add congr_arg and congr_fun ([#11428](https://github.com/leanprover-community/mathlib/pull/#11428))

Two trivial lemmas that are missing from this bundled morphism but present on most others.

Turns out I didn't actually need these in the branch I created them in, but we should have them anyway.

### [2022-01-13T19:34:17+00:00](https://github.com/leanprover-community/mathlib/commit/8a13846e87e9ce7673c81f5beb4c909282f98d6f)
feat(analysis/mean_inequalities): Hölder's inequality for infinite sums ([#11314](https://github.com/leanprover-community/mathlib/pull/#11314))

State a few versions of Hölder's inequality for infinite sums.

The specific forms of the inequality chosen are parallel to those for Minkowski's inequality in [#10984](https://github.com/leanprover-community/mathlib/pull/#10984).

### [2022-01-13T17:57:13+00:00](https://github.com/leanprover-community/mathlib/commit/050442552b6a2f9461f2cb15bb5df3d871799bde)
feat(analysis/inner_product_space/basic): criterion for summability ([#11224](https://github.com/leanprover-community/mathlib/pull/#11224))

In a complete inner product space `E`, a family `f` of mutually-orthogonal elements of `E` is summable, if and only if
`(λ i, ∥f i∥ ^ 2)` is summable.

### [2022-01-13T17:19:26+00:00](https://github.com/leanprover-community/mathlib/commit/6446ba8fc4cf7b176808a447ddd16aa8c3061f06)
feat(ring_theory/{trace,norm}): add trace_gen_eq_next_coeff_minpoly and norm_gen_eq_coeff_zero_minpoly  ([#11420](https://github.com/leanprover-community/mathlib/pull/#11420))

We add `trace_gen_eq_next_coeff_minpoly` and `norm_gen_eq_coeff_zero_minpoly`.

From flt-regular.

### [2022-01-13T16:52:43+00:00](https://github.com/leanprover-community/mathlib/commit/ea9f964bd0eb137b1ce54c6beb3fe19ed586093a)
fix(analysis/calculus/fderiv_symmetric): speed up tactic block from 3.6s to 180ms ([#11426](https://github.com/leanprover-community/mathlib/pull/#11426))

The timings are measured for the single small begin/end block. The proof as a whole is still around 7.6s, down from 11s.

The fault here was likely the `convert`, which presumably spent a lot of time trying to unify typeclass arguments.

### [2022-01-13T16:52:42+00:00](https://github.com/leanprover-community/mathlib/commit/0f79668fe3b3e99809f32d1f36e5bea994b6cb65)
feat(measure_theory/function/uniform_integrable): Egorov's theorem ([#11328](https://github.com/leanprover-community/mathlib/pull/#11328))


This PR proves Egorov's theorem which is necessary for the Vitali convergence theorem which is vital for the martingale convergence theorems.

### [2022-01-13T15:18:51+00:00](https://github.com/leanprover-community/mathlib/commit/a16a5b5b2707674313ebc4d1cdd56b2bae3e74c1)
chore(order/lattice_intervals): review ([#11416](https://github.com/leanprover-community/mathlib/pull/#11416))

* use `@[reducible] protected def`;
* add `is_least.order_bot` and `is_greatest.order_top`, use them;
* weaken TC assumptions on `set.Ici.bounded_order` and `set.Iic.bounded_order`.

### [2022-01-13T12:25:21+00:00](https://github.com/leanprover-community/mathlib/commit/cd4f5c408f8a61f37733c50433565558044627bb)
feat(linear_algebra/{cross_product,vectors}): cross product ([#11181](https://github.com/leanprover-community/mathlib/pull/#11181))

Defines the cross product for R^3 and gives localized notation for that and the dot product.

Was https://github.com/leanprover-community/mathlib/pull/10959

Co-authored-by: Kyle Miller <kmill31415@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>



Co-authored-by: Martin Dvořák <martin.dvorak@matfyz.cz>

### [2022-01-13T12:25:20+00:00](https://github.com/leanprover-community/mathlib/commit/799cdbb216b15bc3471e5e33e3bec8f9ee27b850)
feat(data/nat/periodic): periodic functions for nat ([#10888](https://github.com/leanprover-community/mathlib/pull/#10888))

Adds a lemma saying that the cardinality of an Ico of length `a` filtered over a periodic predicate of period `a` is the same as the cardinality of `range a` filtered over that predicate.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-01-13T12:25:18+00:00](https://github.com/leanprover-community/mathlib/commit/6609204bc2a5b2cfb231c6e202f8a4e24b69ad4e)
feat(algebraic_geometry): Gluing presheafed spaces ([#10269](https://github.com/leanprover-community/mathlib/pull/#10269))




Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>

### [2022-01-13T07:08:20+00:00](https://github.com/leanprover-community/mathlib/commit/e6db245763689a7750fa0b14a5c29adc8007cf19)
chore(ring_theory/roots_of_unity): change argument order ([#11415](https://github.com/leanprover-community/mathlib/pull/#11415))

this is for easier dot notation in situations such as `refine`.

### [2022-01-13T07:08:19+00:00](https://github.com/leanprover-community/mathlib/commit/0c8445669ea0055d78d8bad0284be2360c22706f)
feat(order,data/set/intervals): lemmas about `is_bot`/`is_top` ([#11412](https://github.com/leanprover-community/mathlib/pull/#11412))

* add `is_top.Iic_eq`, `is_bot.Ici_eq`, `is_top.Ioi_eq`,
  `is_bot.Iio_eq`, `set.Ioi_top`, `set.Iio_bot`;
* rename `set.Ici_singleton_of_top` and `set.Iic_singleton_of_bot` to
  `is_top.Ici_eq` and `is_bot.Iic_eq`;
* add `is_top_or_exists_gt`, `is_bot_or_exists_lt`, `is_top_top`, and
  `is_bot_bot`;
* add `is_top.to_dual` and `is_bot.to_dual`;
* add `set.empty_ssubset`.

### [2022-01-13T07:08:17+00:00](https://github.com/leanprover-community/mathlib/commit/3f1ac6c5487fe9038d9b7771e1aed7c82e636e46)
doc(number_theory/cyclotomic/basic): fix docstrings ([#11411](https://github.com/leanprover-community/mathlib/pull/#11411))

### [2022-01-13T07:08:16+00:00](https://github.com/leanprover-community/mathlib/commit/e839c9ae820b636aec23986f75c0aaac93637e81)
feat(combinatorics/configuration): Cardinality results for projective plane. ([#11406](https://github.com/leanprover-community/mathlib/pull/#11406))

This PR proves several cardinality results for projective planes (e.g., number of points = number of lines, number of points on given line = number of lines on given point).

It looks like the `exists_config` (whose sole purpose is to rule out [the 7th example here](https://en.wikipedia.org/wiki/Projective_plane#Degenerate_planes)) can be weakened slightly.

### [2022-01-13T06:20:13+00:00](https://github.com/leanprover-community/mathlib/commit/12b6b9934acbaa35f11df4fb8eb886b770657ff0)
refactor(linear_algebra/affine_space): move def of `slope` to a new file ([#11361](https://github.com/leanprover-community/mathlib/pull/#11361))

Also add a few trivial lemmas.

### [2022-01-13T01:42:28+00:00](https://github.com/leanprover-community/mathlib/commit/3fed75a295edcc145605eb25e4179c88bedf2215)
doc(data/pfun): fix a typo ([#11410](https://github.com/leanprover-community/mathlib/pull/#11410))

### [2022-01-13T01:42:26+00:00](https://github.com/leanprover-community/mathlib/commit/dfad4c6b24ca00dc04d7f9fedb46e09c477da06d)
fix(data/equiv/set): Fix doc comment syntax ([#11409](https://github.com/leanprover-community/mathlib/pull/#11409))

### [2022-01-13T01:42:25+00:00](https://github.com/leanprover-community/mathlib/commit/1f370bb4aa3c49479af3085db337b187d72969d5)
feat(linear_algebra/pi): linear_map.vec_cons and friends ([#11343](https://github.com/leanprover-community/mathlib/pull/#11343))

The idea of these definitions is to be able to define a map as `x ↦ ![f₁ x, f₂ x, f₃ x]`, where
`f₁ f₂ f₃` are already linear maps, as `f₁.vec_cons $ f₂.vec_cons $ f₃.vec_cons $ vec_empty`.
This adds the same thing for bilinear maps as `x y ↦ ![f₁ x y, f₂ x y, f₃ x y]`.

While the same thing could be achieved using `linear_map.pi ![f₁, f₂, f₃]`, this is not
definitionally equal to the result using `linear_map.vec_cons`, as `fin.cases` and function
application do not commute definitionally.

Versions for when `f₁ f₂ f₃` are bilinear maps are also provided.

### [2022-01-12T22:49:45+00:00](https://github.com/leanprover-community/mathlib/commit/e6fab1dc073396d45da082c644642c4f8bff2264)
refactor(order/directed): Make `is_directed` a Prop mixin ([#11238](https://github.com/leanprover-community/mathlib/pull/#11238))

This turns `directed_order` into a Prop-valued mixin `is_directed`. The design follows the unbundled relation classes found in core Lean.

The current design created obscure problems when showing that a `semilattice_sup` is directed and we couldn't even state that `semilattice_inf` is codirected. Further, it was kind of already used as a mixin, because there was no point inserting it in the hierarchy.

### [2022-01-12T20:51:38+00:00](https://github.com/leanprover-community/mathlib/commit/2a3809769cd6d1b28d045f2f1697981f4002cdab)
feat(combinatorics/configuration): Define projective planes ([#11390](https://github.com/leanprover-community/mathlib/pull/#11390))

This PR defines abstract projective planes and their duals. More will be PRed later.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-01-12T17:52:39+00:00](https://github.com/leanprover-community/mathlib/commit/5e48b217a1a9ac804a4020984cd59cf366a13df7)
feat(number_theory/cyclotomic/basic): add cyclotomic_field and cyclotomic_ring ([#11383](https://github.com/leanprover-community/mathlib/pull/#11383))

We add `cyclotomic_field` and `cyclotomic_ring`, that provide an explicit cyclotomic extension of a given field/ring.

From flt-regular

### [2022-01-12T17:52:38+00:00](https://github.com/leanprover-community/mathlib/commit/fa9d2bf345eb6903481313841ffa1330a2e2cdd1)
feat(data/mv_polynomial/variables): add mv_polynomial.total_deg_finset_sum ([#11375](https://github.com/leanprover-community/mathlib/pull/#11375))

Total degree of a sum of mv_polynomials is less than or equal to the maximum of all their degrees.



Co-authored-by: jlh <48520973+Jlh18@users.noreply.github.com>

### [2022-01-12T17:52:37+00:00](https://github.com/leanprover-community/mathlib/commit/258686f9192477646920b02097d775994adc28bf)
fix(order/complete_lattice): fix diamond in sup vs max and min vs inf ([#11309](https://github.com/leanprover-community/mathlib/pull/#11309))

`complete_linear_order` has separate `max` and `sup` fields. There is no need to have both, so this removes one of them by telling the structure compiler to merge the two fields. The same is true of `inf` and `min`.

As well as diamonds being possible in the abstract case, a handful of concrete example of this diamond existed.
`linear_order` instances with default-populated fields were usually to blame.

### [2022-01-12T16:25:20+00:00](https://github.com/leanprover-community/mathlib/commit/975031d53f2bc795fc4f71b196693c44345769bb)
feat(data/nat/factorization): add lemma `factorization_prod` ([#11395](https://github.com/leanprover-community/mathlib/pull/#11395))

For any `p : ℕ` and any function `g : α → ℕ` that's non-zero on `S : finset α`, the power of `p` in `S.prod g` equals the sum over `x ∈ S` of the powers of `p` in `g x`.

Generalises `factorization_mul`, which is the special case where `S.card = 2` and `g = id`.

### [2022-01-12T16:25:17+00:00](https://github.com/leanprover-community/mathlib/commit/67593dcd461b2876fd303132e4f52b64383f26b8)
fix(tactic/ring_exp): fix normalization proof of unchanged subexpressions ([#11394](https://github.com/leanprover-community/mathlib/pull/#11394))

When trying to simplify a goal (instead of proving equalities), `ring_exp` will rewrite subexpressions to a normal form, then simplify this normal form by removing extraneous `+ 0`s and `* 1`s. Both steps return a new expression and a proof that the *step*'s input expression equals the output expression.

In some cases where the normal form and simplified form coincide, `ex.simplify` would instead output a proof that *ring_exp*'s input expression equals the output expression, so we'd get a type error in trying to compose a proof that `a = b` with a proof that `a = b`.

This PR fixes that bug by returning instead a proof that `b = b`, as expected.

### [2022-01-12T13:36:56+00:00](https://github.com/leanprover-community/mathlib/commit/aece00a2aa48f0b5ca267c71d77aa5c7177d1dc7)
feat(data/sigma/interval): A disjoint sum of locally finite orders is locally finite ([#10929](https://github.com/leanprover-community/mathlib/pull/#10929))

This provides `locally_finite_order (Σ i, α i)` in a new file `data.sigma.interval`. This also makes `<` a primitive on `Σ i, α i`.

### [2022-01-12T11:08:51+00:00](https://github.com/leanprover-community/mathlib/commit/e8eb7d96a14e174fb2f994dd5fc8b07ba18acd61)
feat(order/cover): `f a` covers `f b` iff `a` covers `b`  ([#11392](https://github.com/leanprover-community/mathlib/pull/#11392))

... for order isomorphisms, and also weaker statements.

Co-authored-by: Vladimir Ivanov <@astOwOlfo>

### [2022-01-12T10:06:13+00:00](https://github.com/leanprover-community/mathlib/commit/912c47d3c0c1cc30fd9837aca0e9cb0fc7d9c736)
feat(topology/algebra/continuous_monoid_hom): New file ([#11304](https://github.com/leanprover-community/mathlib/pull/#11304))

This PR defines continuous monoid homs.

### [2022-01-12T07:31:06+00:00](https://github.com/leanprover-community/mathlib/commit/c1f3f1afc123c5bbfecc9e56d14cbb086b948944)
feat(analysis/complex/basic): determinant of `conj_lie` ([#11389](https://github.com/leanprover-community/mathlib/pull/#11389))

Add lemmas giving the determinant of `conj_lie`, as a linear map and
as a linear equiv, deduced from the corresponding lemmas for `conj_ae`
which is used to define `conj_lie`.  This completes the basic lemmas
about determinants of linear isometries of `ℂ` (which can thus be used
to talk about how those isometries affect orientations), since we also
have `linear_isometry_complex` describing all such isometries in terms
of `rotation` and `conj_lie`.

### [2022-01-12T07:31:04+00:00](https://github.com/leanprover-community/mathlib/commit/72c86c3f66b2688cbe5cdf7bd0bd8e5061a84cba)
chore(algebra/ring/basic): generalize `is_domain.to_cancel_monoid_with_zero` to `no_zero_divisors` ([#11387](https://github.com/leanprover-community/mathlib/pull/#11387))

This generalization doesn't work for typeclass search as `cancel_monoid_with_zero` implies `no_zero_divisors` which would form a loop, but it can be useful for a `letI` in another proof.

Independent of whether this turns out to be useful, it's nice to show that nontriviality doesn't affect the fact that rings with no zero divisors are cancellative.

### [2022-01-12T07:31:03+00:00](https://github.com/leanprover-community/mathlib/commit/cb1b6d97b5f0f28d521e46f172f9e202e1969d72)
feat(algebra/order/floor): adds some missing floor API ([#11336](https://github.com/leanprover-community/mathlib/pull/#11336))

### [2022-01-12T07:31:02+00:00](https://github.com/leanprover-community/mathlib/commit/bfe9515896c3e88f2e523abc5cd7258a01fd7e0c)
feat(data/multiset/basic): add map_count_true_eq_filter_card ([#11306](https://github.com/leanprover-community/mathlib/pull/#11306))


Add a lemma about counting over a map. Spun off of [#10888](https://github.com/leanprover-community/mathlib/pull/#10888).

### [2022-01-12T07:31:00+00:00](https://github.com/leanprover-community/mathlib/commit/9fd03e1d524279378da509ffca53ffc170ab30c5)
chore(order/lexicographic): cleanup ([#11299](https://github.com/leanprover-community/mathlib/pull/#11299))

Changes include:
* factoring out `prod.lex.trans` from the proof of `le_trans` in `prod.lex.has_le`, and similarly for `antisymm` and `is_total`
* adding some missing `to_lex` annotations in the `prod.lex.{le,lt}_def` lemmas
* avoiding reproving decidability of `prod.lex`
* replacing some proofs with pattern matching to avoid getting type-incorrect goals where `prod.lex.has_le` appears comparing terms that are not of type `lex`.

### [2022-01-12T07:30:59+00:00](https://github.com/leanprover-community/mathlib/commit/deac58aaee32697d49038f83f932153cb407b8a7)
feat(topology/uniform_space/compact_convergence): when the domain is locally compact, compact convergence is just locally uniform convergence ([#11292](https://github.com/leanprover-community/mathlib/pull/#11292))

Also, locally uniform convergence is just uniform convergence when the domain is compact.

### [2022-01-12T07:30:58+00:00](https://github.com/leanprover-community/mathlib/commit/20997252ef8da11327a4de1019d7873cf4302876)
feat(topology/homotopy/product): Product of homotopic paths ([#11153](https://github.com/leanprover-community/mathlib/pull/#11153))

Specialize homotopy products to paths and prove some theorems about the product of paths.



Co-authored-by: prakol16 <prakol16@users.noreply.github.com>

### [2022-01-12T05:04:58+00:00](https://github.com/leanprover-community/mathlib/commit/15b5e24e5fd3098a273a9e8009555355a846eb53)
feat(data/polynomial/taylor): taylor's formula ([#11139](https://github.com/leanprover-community/mathlib/pull/#11139))

Via proofs about `hasse_deriv`.
Added some monomial API too.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>
Co-authored-by: Yakov Pechersky <ypechersky@treeline.bio>
Co-authored-by: adomani <adomani@gmail.com>
Co-authored-by: damiano <adomani@gmail.com>

### [2022-01-12T04:02:53+00:00](https://github.com/leanprover-community/mathlib/commit/af074c841073ea42683978ec7a2c76070337a8da)
feat(analysis/normed_space/lp_space): API for `lp.single` ([#11307](https://github.com/leanprover-community/mathlib/pull/#11307))

Definition and basic properties for `lp.single`, an element of `lp` space supported at one point.

### [2022-01-12T02:31:11+00:00](https://github.com/leanprover-community/mathlib/commit/cdd44cd76e4316c61298cf734d88b9bb7b75e1ce)
refactor(topology/algebra/uniform_group): Use `to_additive` ([#11366](https://github.com/leanprover-community/mathlib/pull/#11366))

This PR replace the definition
`def topological_add_group.to_uniform_space : uniform_space G :=`
with the definition
`@[to_additive] def topological_group.to_uniform_space : uniform_space G :=`

### [2022-01-12T00:08:22+00:00](https://github.com/leanprover-community/mathlib/commit/89f4786ebfd24cf26d40a58b5279135e1e6174b1)
feat(analysis/special_functions/pow): norm_num extension for rpow ([#11382](https://github.com/leanprover-community/mathlib/pull/#11382))

Fixes [#11374](https://github.com/leanprover-community/mathlib/pull/#11374)

### [2022-01-12T00:08:21+00:00](https://github.com/leanprover-community/mathlib/commit/647598bdfc7ba423d3868c952fa025a959944345)
feat(data/nat/factorization): add lemma `factorization_le_iff_dvd` ([#11377](https://github.com/leanprover-community/mathlib/pull/#11377))

For non-zero `d n : ℕ`, `d.factorization ≤ n.factorization ↔ d ∣ n`

### [2022-01-11T20:49:16+00:00](https://github.com/leanprover-community/mathlib/commit/a5f7909086f709dc13e118223a88731e92a81c22)
fix(algebra/tropical/basic): provide explicit min and max ([#11380](https://github.com/leanprover-community/mathlib/pull/#11380))

This also renames `tropical.add` to `tropical.has_add`, since this matches how we normally do this, and it makes unfolding easier.

Without this change, we have a diamond where `linear_order.min` is not defeq to `lattice.inf`.

### [2022-01-11T20:49:15+00:00](https://github.com/leanprover-community/mathlib/commit/73847ff328262b9249eaef6053fdf8e230d7f397)
feat(algebra/indicator_function): add primed version for `mul_indicator_mul` and `indicator_sub` ([#11379](https://github.com/leanprover-community/mathlib/pull/#11379))

### [2022-01-11T20:49:14+00:00](https://github.com/leanprover-community/mathlib/commit/d1c496167c257cd709257af8a9960a3e28a762ac)
feat(data/real/ennreal): add ennreal lemma for `a / 3 + a / 3 + a / 3 = a`  ([#11378](https://github.com/leanprover-community/mathlib/pull/#11378))

### [2022-01-11T20:49:13+00:00](https://github.com/leanprover-community/mathlib/commit/57a8933b1f61c454dae7953a0ac8fde9cedda0fc)
feat(group_theory/free_group): promote free_group_congr to a mul_equiv ([#11373](https://github.com/leanprover-community/mathlib/pull/#11373))

Also some various golfs and cleanups

### [2022-01-11T20:49:12+00:00](https://github.com/leanprover-community/mathlib/commit/8db96a8feb571d1fed70a9ecd62764fd0fd48758)
feat(combinatorics/double_counting): Double-counting the edges of a bipartite graph ([#11372](https://github.com/leanprover-community/mathlib/pull/#11372))

This proves a classic of double-counting arguments: If each element of the `|α|` elements on the left is connected to at least `m` elements on the right and each of the `|β|` elements on the right is connected to at most `n` elements on the left, then `|α| * m ≤ |β| * n` because the LHS is less than the number of edges which is less than the RHS.

This is put in a new file `combinatorics.double_counting` with the idea that we could gather double counting arguments here, much as is done with `combinatorics.pigeonhole`.

### [2022-01-11T20:49:11+00:00](https://github.com/leanprover-community/mathlib/commit/93e774123ec765362728d007db80637006bd253c)
feat(ring_theory/witt_vector): Witt vectors over a domain are a domain ([#11346](https://github.com/leanprover-community/mathlib/pull/#11346))




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2022-01-11T20:49:09+00:00](https://github.com/leanprover-community/mathlib/commit/83b0355774986c2fce632ab1192bba62d175b053)
feat(analysis/complex/isometry): `rotation` matrix representation and determinant ([#11339](https://github.com/leanprover-community/mathlib/pull/#11339))

Add lemmas giving the matrix representation of `rotation` (with
respect to `basis_one_I`), and its determinant (both as a linear map
and as a linear equiv).  This is preparation for doing things about
how isometries affect orientations.

### [2022-01-11T20:49:08+00:00](https://github.com/leanprover-community/mathlib/commit/e4a41e6f5c68eaf6744d9bcdf773d4617b286f03)
feat(data/complex/module,data/complex/determinant): `conj_ae` matrix representation and determinant ([#11337](https://github.com/leanprover-community/mathlib/pull/#11337))

Add lemmas giving the matrix representation of `conj_ae` (with respect
to `basis_one_I`), and its determinant (both as a linear map and as a
linear equiv).  This is preparation for doing things about how
isometries affect orientations (so it's actually `conj_lie` I'm
interested in, but `conj_lie` is defined in terms of `conj_ae` so
proving things first for `conj_ae` seems appropriate).

### [2022-01-11T20:49:07+00:00](https://github.com/leanprover-community/mathlib/commit/aa7a439d1915a5591062fcb98badd182cc577433)
feat(algebra/*): injective hom into kernel `map_eq_*_iff` ([#11275](https://github.com/leanprover-community/mathlib/pull/#11275))

### [2022-01-11T20:49:06+00:00](https://github.com/leanprover-community/mathlib/commit/94fd004d1af06aa810acd91db07193c7e6c70c50)
feat(order/minimal): Subset of minimal/maximal elements ([#11268](https://github.com/leanprover-community/mathlib/pull/#11268))

This defines `minimals r s`/`maximals r s` the minimal/maximal elements of `s` with respect to relation `r`.

### [2022-01-11T20:49:04+00:00](https://github.com/leanprover-community/mathlib/commit/490847ee2589e218d31fafc295f951c12ebcdb83)
feat(data/polynomial/degree/lemmas): add induction principle for non-constant polynomials ([#8463](https://github.com/leanprover-community/mathlib/pull/#8463))

This PR introduces an induction principle to prove that a property holds for non-constant polynomials.  It suffices to check that the property holds for
* the sum of a constant polynomial and any polynomial for which the property holds;
* the sum of any two polynomials for which the property holds;
* for non-constant monomials.

I plan to use this to show that polynomials with coefficients in `ℕ` are monotone.

### [2022-01-11T17:36:45+00:00](https://github.com/leanprover-community/mathlib/commit/b71077179fac7179e3a342ff319392ad8dcb773c)
chore(*): update to 3.38.0c ([#11371](https://github.com/leanprover-community/mathlib/pull/#11371))

### [2022-01-11T13:55:35+00:00](https://github.com/leanprover-community/mathlib/commit/b8d2affd74d91e6cd4a83bd13010d823bbe2ff64)
refactor(ring_theory/discriminant): refactor discr_not_zero_of_linear_independent ([#11370](https://github.com/leanprover-community/mathlib/pull/#11370))

`(hcard : fintype.card ι = finite_dimensional.finrank K L) (hli : linear_independent K b)` is better expressed as `b : basis ι K L`.

### [2022-01-11T13:55:34+00:00](https://github.com/leanprover-community/mathlib/commit/380e28e9fada7bc2d276574a5b9c4045cc32be3f)
chore(set_theory/ordinal_arithmetic): Golfed some proofs ([#11369](https://github.com/leanprover-community/mathlib/pull/#11369))

### [2022-01-11T13:55:33+00:00](https://github.com/leanprover-community/mathlib/commit/2963d7ce4b84e3629418d600aa1f5f4bde6257a5)
feat(analysis/asymptotics/asymptotics): add `is_bounded_under.is_O_const` ([#11367](https://github.com/leanprover-community/mathlib/pull/#11367))

### [2022-01-11T13:55:32+00:00](https://github.com/leanprover-community/mathlib/commit/8f5303aec4eaf6902a1bd36b556da6660abd4ff6)
refactor(topology/connected): drop `local attribute [instance] connected_component_setoid` ([#11365](https://github.com/leanprover-community/mathlib/pull/#11365))

Add a coercion from `X` to `connected_components X` instead.

### [2022-01-11T13:55:30+00:00](https://github.com/leanprover-community/mathlib/commit/c1c0fa4a9b4b64ff8077052f7f7d293bd9c31894)
feat(analysis/calculus/{f,}deriv): add some `iff` lemmas ([#11363](https://github.com/leanprover-community/mathlib/pull/#11363))

### [2022-01-11T13:55:28+00:00](https://github.com/leanprover-community/mathlib/commit/02181c769224bb6401ed90cd26a3b2d31bbd63bf)
feat(algebra/group/conj): `conj_classes.map` preserves surjectivity ([#11362](https://github.com/leanprover-community/mathlib/pull/#11362))

If `f : α →* β` is surjective, then so is `conj_classes.map f : conj_classes α → conj_classes β`.

### [2022-01-11T13:55:13+00:00](https://github.com/leanprover-community/mathlib/commit/c94a17c7a11658b637f531b52d6cb913599e1ce7)
feat(topology): a few simple lemmas ([#11360](https://github.com/leanprover-community/mathlib/pull/#11360))

### [2022-01-11T13:55:12+00:00](https://github.com/leanprover-community/mathlib/commit/56d6a91516faa04c0599f829a9e4f1e2e4f0bccc)
chore(order/basic): Rename `no_bot_order`/`no_top_order` to `no_min_order`/`no_max_order` ([#11357](https://github.com/leanprover-community/mathlib/pull/#11357))

because that's really what they are.

`∀ a, ∃ b, b < a` precisely means that every `a` is not a minimal element. The correct statement for an order without bottom elements is `∀ a, ∃ b, ¬ a ≤ b`, which is a weaker condition in general. Both conditions are equivalent over a linear order.

Renames
* `no_bot_order` -> `no_min_order`
* `no_top_order` -> `no_max_order`
* `no_bot` -> `exists_lt`
* `no_top` -> `exists_gt`

### [2022-01-11T13:55:09+00:00](https://github.com/leanprover-community/mathlib/commit/be4c5aa4152b5cbbf22c3760bbee9e13d85c0479)
feat(scripts/lint_mathlib): implement github annotations for mathlib linters ([#11345](https://github.com/leanprover-community/mathlib/pull/#11345))

Resolves the last part of [#5863](https://github.com/leanprover-community/mathlib/pull/#5863)

This causes `lean --run lint_mathlib --github` to produce error messages understood by github actions, which will tag the lines causing linter failures with annotations in the files changed tab

### [2022-01-11T13:55:08+00:00](https://github.com/leanprover-community/mathlib/commit/e138d3bb96ee64966b2ed3166f1c528367477958)
feat(algebra/big_operators/finprod): `finprod_eq_one_of_forall_eq_one` ([#11335](https://github.com/leanprover-community/mathlib/pull/#11335))





Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2022-01-11T13:55:07+00:00](https://github.com/leanprover-community/mathlib/commit/eb9c15255488f96ecb3dbac6eb06caddca2ac264)
feat(algebra/order/field): lemmas relating `a / b` and `a` when `1 ≤ b` and `1 < b` ([#11333](https://github.com/leanprover-community/mathlib/pull/#11333))

This PR is a collection of items that https://github.com/leanprover-community/mathlib/pull/7891 adds in and that aren't declared on `master` yet. Please let me know if I overlooked something.

After merging it, https://github.com/leanprover-community/mathlib/pull/7891 can theoretically be closed.



Co-authored-by: Benjamin Davidson <68528197+benjamindavidson@users.noreply.github.com>

### [2022-01-11T13:55:05+00:00](https://github.com/leanprover-community/mathlib/commit/2865d8c2278c865db9b17a1fc6dc4ffda818c297)
refactor(data/set/prod): add notation class for set-like product ([#11300](https://github.com/leanprover-community/mathlib/pull/#11300))

This PR adds notation class `has_set_prod` for product of sets and subobjects. I also add an instance for `set`s. Later I want to migrate `finset`s and `sub*` product to this notation class.

### [2022-01-11T13:55:04+00:00](https://github.com/leanprover-community/mathlib/commit/3cd9088bb87c100af275f4e27b71155952200255)
feat(ring_theory/polynomial/cyclotomic/basic): add lemmas  ([#11266](https://github.com/leanprover-community/mathlib/pull/#11266))

From flt-regular.



Co-authored-by: Eric Rodriguez <ericrboidi@gmail.com>

### [2022-01-11T13:55:02+00:00](https://github.com/leanprover-community/mathlib/commit/4ac13d92638fa3abd6213c201dfa11ace7e8d6e6)
feat(data/dfinsupp/interval): Finitely supported dependent functions to locally finite orders are locally finite ([#11175](https://github.com/leanprover-community/mathlib/pull/#11175))

This provides the ` locally_finite_order` instance for `Π₀ i, α i` in a new file `data.dfinsupp.interval`.

### [2022-01-11T11:13:20+00:00](https://github.com/leanprover-community/mathlib/commit/40b6b45c052e188122ec9a25e8aedf00232e4633)
feat(category_theory): `Cat` is a strict bicategory ([#11348](https://github.com/leanprover-community/mathlib/pull/#11348))

This PR defines a bicategory structure on `Cat`. This also introduces the propositional type class `bicategory.strict`, and proves that `Cat` is an instance of this class.

### [2022-01-11T11:13:19+00:00](https://github.com/leanprover-community/mathlib/commit/a4052f900a767940099ed8a714ac409590113bb4)
feat(ring_theory/hahn_series): order_pow ([#11334](https://github.com/leanprover-community/mathlib/pull/#11334))

Generalize to have `no_zero_divisors (hahn_series Γ R)`,
which generalizes `order_mul`.
Also provide `coeff_eq_zero_of_lt_order`.

### [2022-01-11T11:13:18+00:00](https://github.com/leanprover-community/mathlib/commit/90ba05412d20f417249b25c8d5b243c58317d72c)
feat(algebraic_geometry): Define the category of `AffineScheme`s ([#11326](https://github.com/leanprover-community/mathlib/pull/#11326))

### [2022-01-11T11:13:17+00:00](https://github.com/leanprover-community/mathlib/commit/c03bd3287efd840268e748a46418416b501e6d22)
feat(analysis/normed_space/star): add lemmas about continuity and norm of identity ([#11324](https://github.com/leanprover-community/mathlib/pull/#11324))

### [2022-01-11T11:13:16+00:00](https://github.com/leanprover-community/mathlib/commit/ebbc973bfb7296325a73012556b75e61d51af86d)
feat(data/mv_polynomial): assorted mv_polynomial and finsupp lemmas ([#11319](https://github.com/leanprover-community/mathlib/pull/#11319))

Mostly around total degree, supports and homogeneous components.

From flt-regular.

### [2022-01-11T11:13:15+00:00](https://github.com/leanprover-community/mathlib/commit/c500b99f3c067cec4f83263f15fdfd19674fd87e)
feat(ring_theory/laurent): coe from R[[x]] to R((x)) ([#11318](https://github.com/leanprover-community/mathlib/pull/#11318))

And actually the changes reported in [#11295](https://github.com/leanprover-community/mathlib/pull/#11295)
Generalize `power_series.coeff_smul`



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-01-11T11:13:14+00:00](https://github.com/leanprover-community/mathlib/commit/be594eb4ca76306410a5ecdb02999e7e35b77b68)
feat(linear_algebra/finite_dimensional): Define rank of set of vectors ([#11290](https://github.com/leanprover-community/mathlib/pull/#11290))

Added in the definition of "rank of a set of vectors" and a useful lemma about the rank when one set is a subset of the other.

Read the zulip stream here: https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/First.20Time.20Contributing



Co-authored-by: ccn <callum.cassidynolan@mail.utoronto.ca>

### [2022-01-11T11:13:13+00:00](https://github.com/leanprover-community/mathlib/commit/b7f8f725434b04f0ab663020eef2d91acba265f1)
feat(category_theory/bicategory/functor): define oplax functors and their composition ([#11277](https://github.com/leanprover-community/mathlib/pull/#11277))

This PR defines oplax functors between bicategories and their composition.

### [2022-01-11T11:13:11+00:00](https://github.com/leanprover-community/mathlib/commit/624cb70721117af7d0bb3da887ea9b8f3e572bb0)
feat(set_theory/ordinal_arithmetic): Extra lemmas about suprema ([#11178](https://github.com/leanprover-community/mathlib/pull/#11178))

Proved lemmas pertaining to when suprema or least strict upper bounds are zero.

### [2022-01-11T08:13:33+00:00](https://github.com/leanprover-community/mathlib/commit/de9944b17982913a54d9097f9b7812007274d7e8)
refactor(analysis/complex/circle): The circle group is commutative ([#11368](https://github.com/leanprover-community/mathlib/pull/#11368))

This PR upgrades the `group circle` instance to a `comm_group circle` instance.

### [2022-01-11T08:13:31+00:00](https://github.com/leanprover-community/mathlib/commit/e8839a30b446b83721b10f70665d95ebdad3148d)
refactor(logic/small, *): Infer `f : α → β` when followed by a simple condition on `f` ([#11037](https://github.com/leanprover-community/mathlib/pull/#11037))



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-01-11T02:45:39+00:00](https://github.com/leanprover-community/mathlib/commit/89bff5e7d43550b1663fb0288193c59d6bd89815)
feat(algebra/big_operators): add product versions of some sum lemmas ([#11358](https://github.com/leanprover-community/mathlib/pull/#11358))

and to_additive to get the old ones back

### [2022-01-11T02:45:38+00:00](https://github.com/leanprover-community/mathlib/commit/d8a75bd0cfc5c6f13ad8638e9dba100cf6fa2d44)
chore(simple_graph/basic): Fix typo in docstring: adjacent vertices, not edges ([#11356](https://github.com/leanprover-community/mathlib/pull/#11356))

### [2022-01-10T23:30:59+00:00](https://github.com/leanprover-community/mathlib/commit/8910f6d9f394d0a8397169ca0a94ee5586c016c0)
feat(ring_theory/discriminant): remove an assumption ([#11359](https://github.com/leanprover-community/mathlib/pull/#11359))

We remove a `nonempty` assumption.

### [2022-01-10T23:30:58+00:00](https://github.com/leanprover-community/mathlib/commit/fd51bda5dd5faeda20a15da03a4e719b501e4540)
feat(analysis/normed_space/linear_isometry): basis ext lemmas ([#11331](https://github.com/leanprover-community/mathlib/pull/#11331))

Add lemmas that two linear isometries / linear isometric equivalences
are equal if they are equal on basis vectors, similar to such lemmas
for equality on basis vectors of other kinds of maps.

### [2022-01-10T23:30:57+00:00](https://github.com/leanprover-community/mathlib/commit/3b55b94857df2d8909e2c1f256eb9318b7a2c84d)
feat(analysis/inner_product_space/basic): inner products of linear combinations of orthonormal vectors ([#11323](https://github.com/leanprover-community/mathlib/pull/#11323))

There are some lemmas about the inner product of a linear combination
of orthonormal vectors with one vector from that orthonormal family.
Add similar lemmas where both sides of the inner product are linear
combinations.

### [2022-01-10T23:30:55+00:00](https://github.com/leanprover-community/mathlib/commit/fd5248100b83b30a1a3c6d8eef3715014559e9a9)
feat(group_theory/abelianization): Add fintype instance ([#11302](https://github.com/leanprover-community/mathlib/pull/#11302))

Adds `fintype` instance for `abelianization`.

### [2022-01-10T23:30:54+00:00](https://github.com/leanprover-community/mathlib/commit/2642c89b4b5ec03b77a4a29100514b0a74518c47)
feat(analysis/inner_product_space/orientation): orientations of real inner product spaces ([#11269](https://github.com/leanprover-community/mathlib/pull/#11269))

Add definitions and lemmas relating to orientations of real inner
product spaces, in particular constructing an orthonormal basis with a
given orientation in finite positive dimension.

This is in a new file since nothing else about inner product spaces
needs to depend on orientations.

### [2022-01-10T23:30:52+00:00](https://github.com/leanprover-community/mathlib/commit/4e7e5a6e756d15c07e9eda778f0b2699f6e262ad)
feat(set_theory/ordinal_arithmetic): Enumerating unbounded sets of ordinals with ordinals ([#10979](https://github.com/leanprover-community/mathlib/pull/#10979))

This PR introduces `enum_ord`, which enumerates an unbounded set of ordinals using ordinals. This is used to build an explicit order isomorphism `enum_ord.order_iso`.

### [2022-01-10T23:30:51+00:00](https://github.com/leanprover-community/mathlib/commit/8e92af1dffad1768a1e6433f2169bd5b2f125084)
feat(algebra/associated): add lemmas to split [#9345](https://github.com/leanprover-community/mathlib/pull/#9345) ([#10941](https://github.com/leanprover-community/mathlib/pull/#10941))

This PR contains lemmas from PR [[#9345](https://github.com/leanprover-community/mathlib/pull/#9345)](https://github.com/leanprover-community/mathlib/pull/9345), which was starting to get quite lengthy. 

Co-authored-by: Anne Baanen.

### [2022-01-10T23:30:50+00:00](https://github.com/leanprover-community/mathlib/commit/4bf48590845b142999eb435f027923ee860916e1)
feat(data/finsupp/pointwise): add a definition of the pointwise action of functions on finsupps ([#10933](https://github.com/leanprover-community/mathlib/pull/#10933))

I couldn't find this, and it seems like quite a natural way to talk about multiplying functions with finsupps.
I'm not sure what additional lemmas would be useful yet, as I don't have a particular application in mind at present so suggestions/additions are welcome

### [2022-01-10T19:54:28+00:00](https://github.com/leanprover-community/mathlib/commit/2e003c9a7fff62c7f71ff4efda94571fe449fb8d)
feat(data/set/basic): add decidable instances for boolean operations ([#11354](https://github.com/leanprover-community/mathlib/pull/#11354))

Add decidability instances for `a ∈ s ∩ t`, etc.

### [2022-01-10T19:54:26+00:00](https://github.com/leanprover-community/mathlib/commit/427e5b59b39319af0f2793a486e475bfbb7cedf6)
feat(data/nat/factorization): Evaluating a multiplicative function over prime power divisors ([#11167](https://github.com/leanprover-community/mathlib/pull/#11167))

For any multiplicative function `f` with `f 1 = 1` and any `n > 0`, we can evaluate `f n` by evaluating `f` at `p ^ k` over the factorization of `n`.

Also provides an alternative version that swaps the `0 < n` condition for an extra `f 0 = 1` condition, as suggested by @ericrbg. 

This allows a very simple proof that `n.factorization.prod pow = n`

### [2022-01-10T16:17:20+00:00](https://github.com/leanprover-community/mathlib/commit/dc3cbb7d7d31191be71a6a52015e03a7578ff961)
feat(data/polynomial/erase_lead): introduce two lemmas to compute `nat_degree`s under certain maps ([#11265](https://github.com/leanprover-community/mathlib/pull/#11265))

This PR is a step in the direction of simplifying [#11139](https://github.com/leanprover-community/mathlib/pull/#11139).

It contains a proof of the helper lemmas `map_nat_degree_eq_sub` and `map_nat_degree_eq_nat_degree` to shorten the proof of `nat_degree_hasse_deriv` and `nat_degree_taylor`.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.2311139.20taylor.20sum.20and.20nat_degree_taylor)

### [2022-01-10T16:17:19+00:00](https://github.com/leanprover-community/mathlib/commit/168ad7fc5d8173ad38be9767a22d50b8ecf1cd00)
feat(data/nat/cast): generalize to `fun_like` ([#11128](https://github.com/leanprover-community/mathlib/pull/#11128))

### [2022-01-10T13:08:00+00:00](https://github.com/leanprover-community/mathlib/commit/1533f158f7788de1a295f39b9cd2e5a4d720f279)
feat(logic/basic): add eq_true_eq_id ([#11341](https://github.com/leanprover-community/mathlib/pull/#11341))


Adds the simp lemma `eq_true_eq_id : eq true = id`, a sort of curried version of `eq_true : (a = true) = a` in core.

### [2022-01-10T13:07:59+00:00](https://github.com/leanprover-community/mathlib/commit/fabc5101713f087e01ac66b6f2ae41b0a3357dfa)
feat(linear_algebra/determinant): `linear_equiv.det_conj` ([#11340](https://github.com/leanprover-community/mathlib/pull/#11340))

Add a version of the `linear_map.det_conj` lemma for `linear_equiv.det`.

### [2022-01-10T13:07:57+00:00](https://github.com/leanprover-community/mathlib/commit/48b21e51f9ade29c814c1e0acaa8ed24cc48bb1f)
feat(probability_theory/martingale): one direction of the optional stopping theorem ([#11007](https://github.com/leanprover-community/mathlib/pull/#11007))

### [2022-01-10T10:18:16+00:00](https://github.com/leanprover-community/mathlib/commit/7782157164780f05f50cb4dcde79267fd5877072)
feat (data/finset/lattice): add more finset induction lemmas ([#10889](https://github.com/leanprover-community/mathlib/pull/#10889))

2 more finset induction lemmas based on the order imposed by a function.



Co-authored-by: Mantas Bakšys <39908973+MantasBaksys@users.noreply.github.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2022-01-10T01:23:46+00:00](https://github.com/leanprover-community/mathlib/commit/99fe7acbf797b71f9374d109bc3761eab09d1a0f)
chore(data/set/function): move inv_fun_on out of `logic/function/basic` ([#11330](https://github.com/leanprover-community/mathlib/pull/#11330))

This removes `function.inv_fun_on_eq'` as it is a duplicate of `inj_on.left_inv_on_inv_fun_on`.

### [2022-01-09T23:15:30+00:00](https://github.com/leanprover-community/mathlib/commit/6a1093970ab41a193642f06b0de0e28f2918f54e)
fix(docs/references.bib): syntax error ([#11342](https://github.com/leanprover-community/mathlib/pull/#11342))

This broke the docs build.

### [2022-01-09T21:08:06+00:00](https://github.com/leanprover-community/mathlib/commit/ce17b657926068f969a8e0bf0cc1352f0f00f587)
feat(topology/algebra/monoid): to_additivize some lemmas ([#11310](https://github.com/leanprover-community/mathlib/pull/#11310))

Uncomment a commented out to additive line that looks like its been there
for 3 years (since
https://github.com/leanprover-community/mathlib/commit/581cf19bf1885ef874c39c9902a93f579bc8c22d)
The changes to to_additive in the past few years now make the
generated lemma useful.

Also to_additivize a bunch of other lemmas in this file.

### [2022-01-09T18:06:11+00:00](https://github.com/leanprover-community/mathlib/commit/d13b3a4a392ea7273dfa4727dbd1892e26cfd518)
chore(*): update to 3.37.0c ([#11325](https://github.com/leanprover-community/mathlib/pull/#11325))

the major breaking change this version is making `default`'s parameters
implicit, as opposed to explicit. there was also some slight "free"
golfing due to the better `out_param` simp support.

### [2022-01-09T18:06:09+00:00](https://github.com/leanprover-community/mathlib/commit/47a8d5a63cd90d13a9280fdb5f0fce3a7536d5b4)
refactor(data/{sigma,psigma}/order): Use `lex` synonym and new notation ([#11235](https://github.com/leanprover-community/mathlib/pull/#11235))

This introduces notations `Σₗ i, α i` and `Σₗ' i, α i` for `lex (Σ i, α i)` and `lex (Σ' i, α i)` and use them instead of the instance switch with locale `lex`.

### [2022-01-09T16:18:25+00:00](https://github.com/leanprover-community/mathlib/commit/2bb25f05603d7fb79704fe705b3e25ff47a5e674)
feat(algebra/periodic): lifting to function on quotient group ([#11321](https://github.com/leanprover-community/mathlib/pull/#11321))

I want to make more use of the type `real.angle` in
`analysis.special_functions.trigonometric.angle`, including defining
functions from this type in terms of periodic functions from `ℝ`.  To
support defining such functions, add a definition `periodic.lift` that
lifts a periodic function from `α` to a function from
`α ⧸ (add_subgroup.zmultiples c)`, along with a lemma
`periodic.lift_coe` about the values of the resulting function.

### [2022-01-09T16:18:24+00:00](https://github.com/leanprover-community/mathlib/commit/49ba33e552ebe03482bd613e8264d88dbec2b040)
feat(vscode): add a snippet for inserting a module docstring template ([#11312](https://github.com/leanprover-community/mathlib/pull/#11312))

We already have a vscode snippet for adding copyright headers, this PR adds a similar one to generate a default module docstring with many of the common sections stubbed out.

By default it takes the filename, converts underscores to spaces and capitalizes each word to create the title, as this seems a sensible default. But otherwise all text is a static default example following the documentation style page to make it easier to remember the various recommended secitons.

To test do `ctrl+shift+p` to open the command pallette, type insert snippet, enter, and type module and it should show up.

See also [#3186](https://github.com/leanprover-community/mathlib/pull/#3186)

### [2022-01-09T16:18:23+00:00](https://github.com/leanprover-community/mathlib/commit/fadbd9599176e9076e477b0843dd3adb93c6a568)
feat(field_theory/ratfunc): ratfunc.lift_on without is_domain ([#11227](https://github.com/leanprover-community/mathlib/pull/#11227))

We might want to state results about rational functions without assuming
that the base ring is an integral domain.

Cf. Misconceptions about $K_X$, Kleiman, Steven; Stacks01X1



Co-authored-by: Yakov Pechersky <ypechersky@treeline.bio>

### [2022-01-09T13:09:57+00:00](https://github.com/leanprover-community/mathlib/commit/9c224ff6747a08ce8093289f4243ff2513072c21)
split(data/set/functor): Split off `data.set.lattice` ([#11327](https://github.com/leanprover-community/mathlib/pull/#11327))

This moves the functor structure of `set` in a new file `data.set.functor`.

Also adds `alternative set` because it's quick and easy.

### [2022-01-09T07:58:15+00:00](https://github.com/leanprover-community/mathlib/commit/ad4ea53813e6895892ddca0b9ede7a5e47e0b836)
chore(*): miscellaneous to_additive related cleanup ([#11316](https://github.com/leanprover-community/mathlib/pull/#11316))

A few cleanup changes related to to_additive:
* After https://github.com/leanprover-community/lean/pull/618 was merged, we no longer need to add namespaces manually in filtered_colimits and open subgroup
* to_additive can now generate some more lemmas in big_operators/fin
* to_additive now handles a proof in measure/haar better than it used to
  so remove a workaround there

### [2022-01-09T06:06:07+00:00](https://github.com/leanprover-community/mathlib/commit/ca5e55ccca174a096a8126d7053b0918a569214c)
feat(linear_algebra/basis): `basis.ext`, `basis.ext'` for semilinear maps ([#11317](https://github.com/leanprover-community/mathlib/pull/#11317))

Extend `basis.ext` and `basis.ext'` to apply to the general
(semilinear) case of `linear_map` and `linear_equiv`.

### [2022-01-09T03:54:54+00:00](https://github.com/leanprover-community/mathlib/commit/a58553d58d4019ea4a6815a25b964d2963ed0928)
feat(data/nat/factorization): Add lemmas on factorizations of pairs of coprime numbers ([#10850](https://github.com/leanprover-community/mathlib/pull/#10850))

### [2022-01-09T01:21:32+00:00](https://github.com/leanprover-community/mathlib/commit/d4846b32a88c9f0e6a5000da901b07e56f5ae7ac)
chore(ring_theory/fractional_ideal): fix typo ([#11311](https://github.com/leanprover-community/mathlib/pull/#11311))

### [2022-01-08T23:10:53+00:00](https://github.com/leanprover-community/mathlib/commit/22ff4ebc9bd521cc075fb5f87d55d6d029997e73)
feat(combinatorics/simple_graph/matchings): even_card_vertices_of_perfect_matching ([#11083](https://github.com/leanprover-community/mathlib/pull/#11083))




Co-authored-by: YaelDillies <yael.dillies@gmail.com>

### [2022-01-08T21:54:48+00:00](https://github.com/leanprover-community/mathlib/commit/0a75fdfb102a8a00f5a81fc97aad330d1ba444bd)
feat(linear_algebra/eigenspace): prove eigenvalues are exactly elements of the spectrum when the space is finite dimensional ([#10961](https://github.com/leanprover-community/mathlib/pull/#10961))

This adds `has_eigenvalue_iff_mem_spectrum` and then uses it to golf `exists_eigenvalue`

- [x] depends on: [#10912](https://github.com/leanprover-community/mathlib/pull/#10912) 
- [x] depends on: [#10919](https://github.com/leanprover-community/mathlib/pull/#10919) 



Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2022-01-08T18:36:59+00:00](https://github.com/leanprover-community/mathlib/commit/ee136d903b12de0474236113577b7ab001a1c7f0)
chore(set_theory/game/domineering): extract repeated goal into lemma and golf ([#11298](https://github.com/leanprover-community/mathlib/pull/#11298))

`fst_pred_mem_erase_of_mem_right` and `snd_pred_mem_erase_of_mem_left` were common subgoals that appeared in two lemmas each.

### [2022-01-08T18:36:57+00:00](https://github.com/leanprover-community/mathlib/commit/84dbe31db27f908325b3f302ec5f5f2e145b2c2a)
feat(topology/basic): add explicit definition of continuous_at ([#11296](https://github.com/leanprover-community/mathlib/pull/#11296))

This was convenient in a demo.

### [2022-01-08T18:36:56+00:00](https://github.com/leanprover-community/mathlib/commit/25704cac29f50cd0e92c2c5a0a9cabc7d9f86f18)
docs(algebra/covariant_and_contravariant): minor typos ([#11293](https://github.com/leanprover-community/mathlib/pull/#11293))

### [2022-01-08T18:36:54+00:00](https://github.com/leanprover-community/mathlib/commit/09f698902747299a650bdb94546f14ee7b7b3b26)
chore(analysis/normed_space/banach): move more to the `continuous_linear_map` NS ([#11263](https://github.com/leanprover-community/mathlib/pull/#11263))

## Rename

* `open_mapping` → `continuous_linear_map.is_open_map`;
* `open_mapping_affine` → `affine_map.is_open_map`;

### New lemmas

* `continuous_linear_map.quotient_map`,
* `continuous_linear_map.interior_preimage`,
* `continuous_linear_map.closure_preimage`,
* `continuous_linear_map.frontier_preimage`.

### [2022-01-08T18:36:52+00:00](https://github.com/leanprover-community/mathlib/commit/60e279ba2bfe69f937b5f69b110a440538b8f6a5)
chore(*): update to lean 3.36.0 ([#11253](https://github.com/leanprover-community/mathlib/pull/#11253))

The main breaking change is the change in elaboration of double membership binders into x hx y hy, from x y hx hy.




Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-01-08T16:29:06+00:00](https://github.com/leanprover-community/mathlib/commit/dd1242d2aec84561c8f8651721ea1c1d8d25007a)
feat(algebra/associated): generalize nat.prime.pow_dvd_of_dvd_mul_{left,right} ([#11301](https://github.com/leanprover-community/mathlib/pull/#11301))

### [2022-01-08T16:29:05+00:00](https://github.com/leanprover-community/mathlib/commit/c76e11366b91541c43f547f693f444e510a5d444)
feat(ring_theory/laurent): coercion of R[x] to R((x)) lemmas ([#11295](https://github.com/leanprover-community/mathlib/pull/#11295))

Make the coercion be `simp`-normal as opposed to `(algebra_map _ _)`.
Also generalize `of_power_series Γ R (power_series.C R r) = hahn_series.C r` and similarly for `X` to be true for any `[ordered semiring Γ]`, not just `ℤ`.

### [2022-01-08T16:29:04+00:00](https://github.com/leanprover-community/mathlib/commit/116250977f0b8d9d42fde47709faa3a61d2b833d)
chore(data/fin/vec_notation): generalize smul_cons ([#11285](https://github.com/leanprover-community/mathlib/pull/#11285))

### [2022-01-08T16:29:01+00:00](https://github.com/leanprover-community/mathlib/commit/56f021a94c4bc52b567abb3b4bae4718896e0d0c)
feat(data/polynomial/{erase_lead + denoms_clearable}): strengthen a lemma ([#11257](https://github.com/leanprover-community/mathlib/pull/#11257))

This PR is a step in the direction of simplifying [#11139](https://github.com/leanprover-community/mathlib/pull/#11139) .

It strengthens lemma `induction_with_nat_degree_le` by showing that restriction can be strengthened on one of the assumptions.

~~It proves a lemma computing the `nat_degree` under functions on polynomials that include the shift of a variable.~~
EDIT: the lemma was moved to the later PR [#11265](https://github.com/leanprover-community/mathlib/pull/#11265).

It fixes the unique use of lemma `induction_with_nat_degree_le`.

[Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.2311139.20taylor.20sum.20and.20nat_degree_taylor)

### [2022-01-08T16:28:59+00:00](https://github.com/leanprover-community/mathlib/commit/b181a12035a565e4162372a414d0bc793c8e6bfb)
refactor(combinatorics/quiver): split into several files ([#11006](https://github.com/leanprover-community/mathlib/pull/#11006))

This PR splits `combinatorics/quiver.lean` into several files. The main reason for this is to ensure that the category theory library only imports the necessary definitions (and not for example the stuff on arborescences).

Also adds some more documentation, and fixes a bug in the definition of weakly connected components.

### [2022-01-08T16:28:58+00:00](https://github.com/leanprover-community/mathlib/commit/9b3fec5511f0c545e06e315051a4379dcbe3fa8a)
feat(algebraic_geometry): Gamma-Spec adjunction ([#9802](https://github.com/leanprover-community/mathlib/pull/#9802))


Define the adjunction between the functors Gamma (global sections) and Spec (to LocallyRingedSpace).

I'm currently working on a more general version in http://arxiv.org/pdf/1103.2139.pdf (Theorem 2), which may require refactoring `structure_sheaf` and `Spec`.



Co-authored-by: erd1 <the.erd.one@gmail.com>

### [2022-01-08T15:04:37+00:00](https://github.com/leanprover-community/mathlib/commit/b1955dcaac4bd7ce126c3466b251fd13557ece1d)
feat(data/matrix/basic): infix notation for matrix.dot_product in locale matrix ([#11289](https://github.com/leanprover-community/mathlib/pull/#11289))

I created an infix notation for `matrix.dot_product` in locale `matrix`. The notation was consulted with @eric-wieser in [#11181](https://github.com/leanprover-community/mathlib/pull/#11181).



Co-authored-by: Martin Dvořák <martin.dvorak@matfyz.cz>

### [2022-01-08T15:04:36+00:00](https://github.com/leanprover-community/mathlib/commit/43041277d34b62a15c8cf53a27832fd8cd3151e1)
feat(ring_theory/power_series): teach simp to simplify more coercions of polynomials  to power series ([#11287](https://github.com/leanprover-community/mathlib/pull/#11287))

So that simp can prove that the polynomial `5 * X^2 + X + 1` coerced to a power series is the same thing with the power series generator `X`. Likewise for `mv_power_series`.

### [2022-01-08T15:04:35+00:00](https://github.com/leanprover-community/mathlib/commit/e8713864f6265686bc33f41d368a6cc32887a1e6)
feat(number_theory/cyclotomic/basic): add lemmas ([#11264](https://github.com/leanprover-community/mathlib/pull/#11264))

From flt-regular.

### [2022-01-08T15:04:33+00:00](https://github.com/leanprover-community/mathlib/commit/c7fa66eac25cfdb52638a590cfcf372dd2c18415)
feat(data/nat/prime): power to factor count divides natural ([#11226](https://github.com/leanprover-community/mathlib/pull/#11226))

### [2022-01-08T15:04:32+00:00](https://github.com/leanprover-community/mathlib/commit/4d79d5fe60257cd44669db5a0e7c910101fb92cf)
chore(measure_theory/group/arithmetic): use implicit argument for measurable_space ([#11205](https://github.com/leanprover-community/mathlib/pull/#11205))

The `measurable_space` argument is inferred from other arguments (like `measurable f` or a measure for example) instead of being a type class. This ensures that the lemmas are usable without `@` when several measurable space structures are used for the same type.

Also use more `variables`.

### [2022-01-08T14:24:00+00:00](https://github.com/leanprover-community/mathlib/commit/22311732a26f101b6db8157cfea22becdffab464)
feat(group_theory/commuting_probability): New file ([#11243](https://github.com/leanprover-community/mathlib/pull/#11243))

This PR introduces commuting probabilities of finite groups.

### [2022-01-08T07:22:54+00:00](https://github.com/leanprover-community/mathlib/commit/07f9b8e1e71cfbba2ea1fa7f02eb7b9201fcebb6)
feat(data/sum/order): Linear and disjoint sums of orders ([#11157](https://github.com/leanprover-community/mathlib/pull/#11157))

This defines the disjoint sum of two orders on `α ⊕ β` and the linear (aka lexicographic) sum of two orders on `α ⊕ₗ β` (a type synonym of `α ⊕ β`) in a new file `data.sum.order`.

### [2022-01-08T00:14:42+00:00](https://github.com/leanprover-community/mathlib/commit/303e77c8c0bfb81ee91b997fcc426e13701a9756)
feat(topology/metric_space/hausdorff_distance): make iffs ([#11288](https://github.com/leanprover-community/mathlib/pull/#11288))

* Make `exists_edist_lt_of_inf_edist_lt` and `exists_dist_lt_of_inf_edist_lt` iffs. Rename to `inf_[e]dist_lt_iff`.
* Simplify some proofs

### [2022-01-07T18:21:53+00:00](https://github.com/leanprover-community/mathlib/commit/5cbfddd3cb801f853bc840f9c353fdcd3b717623)
feat(data/finset/sym): Symmetric powers of a finset ([#11142](https://github.com/leanprover-community/mathlib/pull/#11142))

This defines `finset.sym` and `finset.sym2`, which are the `finset` analogs of `sym` and `sym2`, in a new file `data.finset.sym`.

### [2022-01-07T18:21:52+00:00](https://github.com/leanprover-community/mathlib/commit/a8d37c1d1a8c91a42a68715fc760f5136dcf980f)
feat(data/nat/factorization): Defining `factorization` ([#10540](https://github.com/leanprover-community/mathlib/pull/#10540))

Defining `factorization` as a `finsupp`, as discussed in
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Prime.20factorizations
and 
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Proof.20of.20Euler's.20product.20formula.20for.20totient

This is the first of a series of PRs to build up the infrastructure needed for the proof of Euler's product formula for the totient function.

### [2022-01-07T18:21:50+00:00](https://github.com/leanprover-community/mathlib/commit/3b02ad77937a52a017612f76a6ee686d24c2ae0b)
feat(topology/homotopy/equiv): Add homotopy equivalences between topological spaces ([#10529](https://github.com/leanprover-community/mathlib/pull/#10529))

### [2022-01-07T16:25:53+00:00](https://github.com/leanprover-community/mathlib/commit/13e99c70cb53e79b25605752f4f73438927d98d5)
feat(algebra,linear_algebra,ring_theory): more is_central_scalar instances ([#11297](https://github.com/leanprover-community/mathlib/pull/#11297))

This provides new transitive scalar actions:
* on `lie_submodule R L M` that match the actions on `submodule R M`
* on quotients by `lie_submodule R L M` that match the actions on quotients by `submodule R M`

The rest of the instances in this PR live in `Prop` so do not define any further actions.

This also fixes some overly verbose instance names.

### [2022-01-07T16:25:52+00:00](https://github.com/leanprover-community/mathlib/commit/b8f5d0acd62e251bc393da0a2054b50ddf6df2c4)
chore(category_theory/abelian/basic): abelian categories have finite limits and finite colimits. ([#11271](https://github.com/leanprover-community/mathlib/pull/#11271))

### [2022-01-07T14:24:20+00:00](https://github.com/leanprover-community/mathlib/commit/b430316847d7aa4ff239f09f8436a310a8b7aabe)
chore(topology/algebra/module/basic): add continuous_linear_map.is_central_scalar ([#11291](https://github.com/leanprover-community/mathlib/pull/#11291))

### [2022-01-07T14:24:17+00:00](https://github.com/leanprover-community/mathlib/commit/3b7a783fc66c7e5c55b244ccb2c3d7d64bd8ec19)
feat(topology/*): Gluing topological spaces ([#9864](https://github.com/leanprover-community/mathlib/pull/#9864))



Co-authored-by: erdOne <36414270+erdOne@users.noreply.github.com>
Co-authored-by: Adam Topaz <github@adamtopaz.com>

### [2022-01-07T12:43:41+00:00](https://github.com/leanprover-community/mathlib/commit/6fb638b3e0e8d5c37319e9a6a71c08bf8b397120)
feat(*): add lemmas, golf ([#11294](https://github.com/leanprover-community/mathlib/pull/#11294))

### New lemmas

* `function.mul_support_nonempty_iff` and `function.support_nonempty_iff`;
* `set.infinite_union`;
* `nat.exists_subseq_of_forall_mem_union` (to be used in an upcoming mass golfing of `is_pwo`/`is_wf`);
* `hahn_series.coeff_inj`, `hahn_series.coeff_injective`, `hahn_series.coeff_fun_eq_zero_iff`, `hahn_series.support_eq_empty_iff`;
* `nat.coe_order_embedding_of_set` (`simp` + `rfl`);
* `nat.subtype.of_nat_range`, `nat.subtype.coe_comp_of_nat_range`.

### Golfed proofs

* `set.countable.prod`;
*  `nat.order_embedding_of_set_range`;
*  `hahn-series.support_nonempty_iff`;

### Renamed

* `set.finite.union_iff` → `set.finite_union`, add `@[simp]` attr;
* `set.finite.diff` → `set.finite.of_diff`, drop 1 arg;

### [2022-01-06T19:34:08+00:00](https://github.com/leanprover-community/mathlib/commit/0b9663036339f050000277c99fab463b2e610f58)
feat(algebra/{monoid_algebra/basic,free_non_unital_non_assoc_algebra,lie/free}): generalize typeclasses ([#11283](https://github.com/leanprover-community/mathlib/pull/#11283))

This fixes a number of missing or problematic typeclasses:

* The smul typeclasses on `monoid_algebra` had overly strong assumptions
* `add_comm_group (monoid_algebra k G)` was missing.
* `monoid_algebra` had diamonds in its int-module structures, which were different between the one inferred from `ring` and `add_group`.
* `monoid_algebra` was missing an instance of the new `non_unital_non_assoc_ring`.
* `free_non_unital_non_assoc_algebra` was missing a lot of smul typeclasses and transitive module structures that it should inherit from `monoid_algebra`. Since every instance should just be inherited, we change `free_non_unital_non_assoc_algebra` to an abbreviation.
* `free_lie_algebra` had diamonds in its int-module and nat-module structures.
* `free_lie_algebra` was missing transitive module structures.

This also golfs some proofs about `free_non_unital_non_assoc_algebra`, and removes the `irreducible` attributes since these just make some obvious proofs more awkward.

### [2022-01-06T17:51:55+00:00](https://github.com/leanprover-community/mathlib/commit/d0bf8bd244afa0d8d89732d35a04bd64b67e8e63)
feat(set_theory/ordinal): `ordinal` is a successor order ([#11284](https://github.com/leanprover-community/mathlib/pull/#11284))

This provides the `succ_order` instance for `ordinal`.

### [2022-01-06T17:51:52+00:00](https://github.com/leanprover-community/mathlib/commit/5893fbfc0cd0218acc6362628c093d25f043abad)
feat(data/polynomial/monic): add two lemmas on degrees of monic polynomials ([#11259](https://github.com/leanprover-community/mathlib/pull/#11259))

This PR is a step in the direction of simplifying [#11139](https://github.com/leanprover-community/mathlib/pull/#11139).

The two lemmas involve computing the degree of a power of monic polynomials.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.2311139.20taylor.20sum.20and.20nat_degree_taylor)

### [2022-01-06T14:41:11+00:00](https://github.com/leanprover-community/mathlib/commit/9b39ab2a29fa9e81aef5c2fb228f4b19689d5cf8)
feat(algebra/group/freiman): Freiman homomorphisms ([#10497](https://github.com/leanprover-community/mathlib/pull/#10497))

This defines Freiman homomorphisms, which are maps preserving products of `n` elements (but only in the codomain. One can never get back to the domain).

This is useful in additive combinatorics.

### [2022-01-06T12:39:56+00:00](https://github.com/leanprover-community/mathlib/commit/d2428fae765f16ca2d044c6402b3c7755110f4d9)
feat(ring_theory/localization): Localization is the localization of localization. ([#11145](https://github.com/leanprover-community/mathlib/pull/#11145))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-01-06T10:39:24+00:00](https://github.com/leanprover-community/mathlib/commit/54c2567d817c19ecc2d018c0b1676df8b1d6cfea)
feat(category_theory/sites): The pushforward pullback adjunction ([#11273](https://github.com/leanprover-community/mathlib/pull/#11273))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2022-01-06T10:39:23+00:00](https://github.com/leanprover-community/mathlib/commit/7af5e86c7b8ecec06057f7b6da46606f790e2f6c)
feat(algebra/big_operators/multiset): Multiset product under some usual maps ([#10907](https://github.com/leanprover-community/mathlib/pull/#10907))

Product of the image of a multiset under `λ a, (f a)⁻¹`, `λ a, f a / g a`, `λ a, f a ^ n` (for `n` in `ℕ` and `ℤ`).

### [2022-01-06T09:57:30+00:00](https://github.com/leanprover-community/mathlib/commit/c391512eeb819045ccf03edc07d471bef758ebd9)
feat(topology/metric_space/kuratowski): make the Kuratowski embedding have codomain the "true" ℓ^∞(ℕ) ([#11280](https://github.com/leanprover-community/mathlib/pull/#11280))

(Previously, we didn't have the "true" ℓ^∞(ℕ), so we used the space of bounded continuous functions on `ℕ` equipped with the discrete topology.)

### [2022-01-06T07:55:41+00:00](https://github.com/leanprover-community/mathlib/commit/f07f87e9d56081e84ff7130f3623fdd093a6eafe)
feat(ring_theory/power_series/basic): algebra, solving TODOs ([#11267](https://github.com/leanprover-community/mathlib/pull/#11267))

`algebra (mv_polynomial σ R) (mv_power_series σ A)`
`algebra (mv_power_series σ R) (mv_power_series σ A)`
`algebra (polynomial R) (power_series A)`
`algebra (power_series R) (power_series A)`
`coe_to_mv_power_series.alg_hom`
`coe_to_power_series.alg_hom`
And API about the injectivity of coercions

### [2022-01-06T07:55:40+00:00](https://github.com/leanprover-community/mathlib/commit/6952172934a8da662daa08d90753be596cdc98a1)
feat(data/nat/digits): digits_len ([#11187](https://github.com/leanprover-community/mathlib/pull/#11187))

Via a new `data.nat.log` import.
Also unprivate `digits_eq_cons_digits_div`.

The file needs a refactor to make the names more mathlib-like,
otherwise I would have named it `length_digits`.

### [2022-01-06T07:05:28+00:00](https://github.com/leanprover-community/mathlib/commit/b3260f37e534430ea20630d2a7130e33a010a152)
feat(measure_theory/constructions/borel_space): new lemma tendsto_measure_cthickening ([#11009](https://github.com/leanprover-community/mathlib/pull/#11009))

Prove that, when `r` tends to `0`, the measure of the `r`-thickening of a set `s` tends to the measure of `s`.

### [2022-01-05T23:45:35+00:00](https://github.com/leanprover-community/mathlib/commit/9f28b5d4deaba1f87b1b8f50a380570d5578c6fb)
chore(ci): update some workflows to use custom bot token ([#11274](https://github.com/leanprover-community/mathlib/pull/#11274))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2022-01-05T23:45:33+00:00](https://github.com/leanprover-community/mathlib/commit/e7189651b50ecb21c63e96ffacfd20c8fee1102c)
feat(topology/uniform_space/compact_convergence): when the domain is compact, compact convergence is just uniform convergence ([#11262](https://github.com/leanprover-community/mathlib/pull/#11262))

### [2022-01-05T23:45:32+00:00](https://github.com/leanprover-community/mathlib/commit/a7611b2ce9c9f9617a8c8cea60027c605d464ddb)
chore(*): notation for `units` ([#11236](https://github.com/leanprover-community/mathlib/pull/#11236))

### [2022-01-05T23:45:31+00:00](https://github.com/leanprover-community/mathlib/commit/cac4e196cd120396caf5b2faaf32ab3d5fb1ef08)
feat(set_theory/ordinal_arithmetic): Proved characterization of `log` ([#11192](https://github.com/leanprover-community/mathlib/pull/#11192))

As well as a few simple missing lemmas.

### [2022-01-05T23:45:29+00:00](https://github.com/leanprover-community/mathlib/commit/b67857e7892dfab8150aade5f65ca3532a568f5a)
refactor(set_theory/ordinal_arithmetic): Reworked `sup` and `bsup` API ([#11048](https://github.com/leanprover-community/mathlib/pull/#11048))

This PR does two things:

- It reworks and matches, for the most part, the API for `ordinal.sup` and `ordinal.bsup`.
- It introduces `ordinal.lsub` and `ordinal.blsub` for (bounded) least strict upper bounds, and proves the expected results.

### [2022-01-05T22:31:56+00:00](https://github.com/leanprover-community/mathlib/commit/771d1449047288217cbfb845630f1bc943e5a83c)
feat(analysis/normed_space/lp_space): completeness of the lp space on `Π i, E i` ([#11094](https://github.com/leanprover-community/mathlib/pull/#11094))

### [2022-01-05T19:08:16+00:00](https://github.com/leanprover-community/mathlib/commit/8b2d181557c31eb2c7cf9f16ca8634bef82f12f1)
feat(ring_theory/laurent_series): laurent_series is_fraction_ring over power_series ([#11220](https://github.com/leanprover-community/mathlib/pull/#11220))





Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Yakov Pechersky <ypechersky@treeline.bio>

### [2022-01-05T17:28:18+00:00](https://github.com/leanprover-community/mathlib/commit/f6dfea6747135a0766aff67ded336b8556b8165e)
feat(measure_theory/integral): Cauchy integral formula for a circle ([#10000](https://github.com/leanprover-community/mathlib/pull/#10000))

### [2022-01-05T16:16:53+00:00](https://github.com/leanprover-community/mathlib/commit/6bf904185616c3c3dfe21a916704724ba76c417c)
doc(analysis/normed/group/basic): show notation in the typeclass docstring ([#11260](https://github.com/leanprover-community/mathlib/pull/#11260))

### [2022-01-05T16:16:51+00:00](https://github.com/leanprover-community/mathlib/commit/3ab1c1cb53b5a2ceb6d209bad77dc9d4f5c744ee)
feat(algebra/polynomial/big_operators): lemmas about polynomial degree of products ([#11258](https://github.com/leanprover-community/mathlib/pull/#11258))

These already existed for `nat_degree` but `degree` versions seemed missing.

from flt-regular

### [2022-01-05T16:16:50+00:00](https://github.com/leanprover-community/mathlib/commit/a1f4ac35b18328d81e4b5bf9324b133a9e932a7e)
chore(topology): move 3 files to `topology/algebra/module/` ([#11242](https://github.com/leanprover-community/mathlib/pull/#11242))

### [2022-01-05T14:15:46+00:00](https://github.com/leanprover-community/mathlib/commit/9fd7a02d03ba2ea9786eea4bf547b2c51e56ed6a)
feat(category_theory/sites/left_exact): Sheafification is left exact. ([#11252](https://github.com/leanprover-community/mathlib/pull/#11252))

### [2022-01-05T14:15:44+00:00](https://github.com/leanprover-community/mathlib/commit/a580727103b75288890a37f68f8cb61613e4fddb)
chore(topology/omega_complete_partial_order): golf ([#11250](https://github.com/leanprover-community/mathlib/pull/#11250))

### [2022-01-05T14:15:40+00:00](https://github.com/leanprover-community/mathlib/commit/802f23cf22b2b504ab7fc1fb495df00ef4444d88)
feat(data/fintype/basic): `set_fintype_card_eq_univ_iff` ([#11244](https://github.com/leanprover-community/mathlib/pull/#11244))

Adds companion lemma to `set_fintype_card_le_univ`. This PR also moves several `set.to_finset` lemmas earlier in the file.

### [2022-01-05T14:15:39+00:00](https://github.com/leanprover-community/mathlib/commit/b27e33a0b2e32d9991e43cb6b2c47033e2f61988)
feat(data/{fin/vec_notation, matrix/notation}): `cons_{add,sub,dot_product}_cons` ([#11241](https://github.com/leanprover-community/mathlib/pull/#11241))

While these can be proved by `simp`, they are not rejected by the simp linter.

### [2022-01-05T14:15:38+00:00](https://github.com/leanprover-community/mathlib/commit/98b64f49f75d09f02f22138b72638198a64850be)
feat(linear_algebra/orientation): bases from orientations ([#11234](https://github.com/leanprover-community/mathlib/pull/#11234))

Add a lemma giving the orientation of a basis constructed with
`units_smul`, and thus definitions and lemmas to construct a basis
from an orientation.

### [2022-01-05T14:15:37+00:00](https://github.com/leanprover-community/mathlib/commit/33b5d264b1c842fcb2149c72c7a21ee263d1af48)
feat(analysis/complex): `re`, `im`, and `closure`/`interior`/`frontier` ([#11215](https://github.com/leanprover-community/mathlib/pull/#11215))

### [2022-01-05T14:15:35+00:00](https://github.com/leanprover-community/mathlib/commit/3115ced1ab3ff7610e55a9d4c52309fd09b251df)
feat(ring_theory/non_zero_divisors): mul_{left,right}_cancel API ([#11211](https://github.com/leanprover-community/mathlib/pull/#11211))

Not all `monoid_with_zero` are `cancel_monoid_with_zero`,
so we can't use `mul_right_cancel₀` everywhere. However, by definition,
multiplication by non-zero-divisors is 0 iff the multiplicand is 0.
In the context of a ring, that allows us to `mul_cancel_right`



Co-authored-by: Yakov Pechersky <ypechersky@treeline.bio>

### [2022-01-05T14:15:34+00:00](https://github.com/leanprover-community/mathlib/commit/3bd2044b1a23157374a81d1f561c0c7991ddad3a)
chore(data/nat/prime): reuse a result from algebra.big_operators.associated ([#11143](https://github.com/leanprover-community/mathlib/pull/#11143))

### [2022-01-05T14:15:33+00:00](https://github.com/leanprover-community/mathlib/commit/57a9f8beef9f565ca7ffdca58452394f866b239f)
chore(group_theory/sub{monoid,group}, linear_algebra/basic): rename equivalences to mapped subobjects ([#11075](https://github.com/leanprover-community/mathlib/pull/#11075))

This makes the names shorter and more uniform:

* `add_equiv.map_add_submonoid`
* `add_equiv.map_add_subgroup`
* `linear_equiv.map_submodule`

### [2022-01-05T14:15:32+00:00](https://github.com/leanprover-community/mathlib/commit/7e5eebd709744ab0ba21bf585cec6c356daa1e69)
feat(linear_algebra/clifford_algebra/equivs): There is a clifford algebra isomorphic to the dual numbers ([#10730](https://github.com/leanprover-community/mathlib/pull/#10730))

This adds a brief file on the dual numbers, and then shows that they are equivalent to the clifford algebra with `Q = (0 : quadratic_form R R)`.

### [2022-01-05T12:21:49+00:00](https://github.com/leanprover-community/mathlib/commit/cef325863d264a4673799f391d5ca2d24269e897)
chore(group_theory/group_action/defs): add instances to copy statements about left actions to right actions when the two are equal ([#10949](https://github.com/leanprover-community/mathlib/pull/#10949))

While these instances are usually available elsewhere, these shortcuts can reduce the number of typeclass assumptions other lemmas needs.
Since the instances carry no data, the only harm they can cause is performance.

There were some typeclass loops brought on by some bad instance unification, similar to the ones removed by @Vierkantor in 9ee2a50aa439d092c8dea16c1f82f7f8e1f1ea2c. We turn these into `lemma`s and  duplicate the docstring explaining the problem. That commit has a much longer explanation of the problem.

### [2022-01-05T11:32:02+00:00](https://github.com/leanprover-community/mathlib/commit/8d5830e62bc64643b055930055bf800722f8afa8)
chore(measure_theory/measurable_space): use implicit measurable_space argument ([#11230](https://github.com/leanprover-community/mathlib/pull/#11230))

The `measurable_space` argument is inferred from other arguments (like `measurable f` or a measure for example) instead of being a type class. This ensures that the lemmas are usable without `@` when several measurable space structures are used for the same type.



Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2022-01-05T08:10:47+00:00](https://github.com/leanprover-community/mathlib/commit/4912740a5e08fd88caf25988be5bdb562323b8fb)
chore(analysis/inner_product_space/basic): extract common `variables` ([#11214](https://github.com/leanprover-community/mathlib/pull/#11214))



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-01-05T08:10:46+00:00](https://github.com/leanprover-community/mathlib/commit/b72d2ab218183aabf5d219bfc1d7742f3fffc73f)
feat(algebra/ring/basic): Introduce non-unital, non-associative rings ([#11124](https://github.com/leanprover-community/mathlib/pull/#11124))

Adds the class `non_unital_non_assoc_ring` to `algebra.ring.basic` to represent rings which are not assumed to be unital or associative and shows that (unital, associative) rings are instances of `non_unital_non_assoc_ring`.

Needed by [#11073](https://github.com/leanprover-community/mathlib/pull/#11073).



Co-authored-by: Christopher Hoskin <mans0954@users.noreply.github.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2022-01-05T06:18:07+00:00](https://github.com/leanprover-community/mathlib/commit/58b1429a0ef2390cae0d10afc060049badcd0718)
chore(algebra/group/pi): `pow_apply` can be `rfl` ([#11249](https://github.com/leanprover-community/mathlib/pull/#11249))

### [2022-01-05T01:44:24+00:00](https://github.com/leanprover-community/mathlib/commit/4093834bfa35d40c0ee2a7d7336b9fe54ff66e5c)
feat(measure_theory/measure/finite_measure_weak_convergence): add definition and lemmas of pairing measures with nonnegative continuous test functions. ([#9430](https://github.com/leanprover-community/mathlib/pull/#9430))

Add definition and lemmas about pairing of `finite_measure`s and `probability_measure`s with nonnegative continuous test functions. These pairings will be used in the definition of the topology of weak convergence (convergence in distribution): the topology will be defined as an induced topology based on them.



Co-authored-by: kkytola <39528102+kkytola@users.noreply.github.com>

### [2022-01-04T23:41:45+00:00](https://github.com/leanprover-community/mathlib/commit/5c8243f97bc2ac12f156138d264877d75e1065ee)
fix(algebra/group/type_tags): resolve an instance diamond caused by over-eager unfolding ([#11240](https://github.com/leanprover-community/mathlib/pull/#11240))

By setting the `one` and `zero` fields manually, we ensure that they are syntactically equal to the ones found via `has_one` and `has_zero`, rather than potentially having typeclass arguments resolved in a different way.
This seems to fix the failing test.

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Diamond.20in.20multiplicative.20nat/near/266824443)

### [2022-01-04T22:10:13+00:00](https://github.com/leanprover-community/mathlib/commit/862854edb99451c0cd82ad48abc322b6d011f00f)
chore(ring_theory/localization): fix typo in module docstring ([#11245](https://github.com/leanprover-community/mathlib/pull/#11245))

There was a mismatch in the module docstring to the decl name later.

### [2022-01-04T18:47:59+00:00](https://github.com/leanprover-community/mathlib/commit/dc352a643987975c75815a63adb9e6dfe2415ddb)
chore(.github): include co-author attributions in PR template ([#11239](https://github.com/leanprover-community/mathlib/pull/#11239))

### [2022-01-04T18:47:58+00:00](https://github.com/leanprover-community/mathlib/commit/692b6b7c8ebcfb5aff4cd1a7039d112e33bf46b4)
chore(analysis/inner_product_space/basic): adjust decidability assumptions ([#11212](https://github.com/leanprover-community/mathlib/pull/#11212))

Eliminate the `open_locale classical` in `inner_product_space.basic` and replace by specific decidability assumptions.

### [2022-01-04T18:47:57+00:00](https://github.com/leanprover-community/mathlib/commit/49cbce22fae12b2441a4ffacc2d1dbdb65774430)
chore(data/fintype/basic): set.to_finset_univ generalization ([#11174](https://github.com/leanprover-community/mathlib/pull/#11174))

### [2022-01-04T18:47:56+00:00](https://github.com/leanprover-community/mathlib/commit/037147eca296c628b1029963747ffcb3874aeee5)
feat(probability_theory/stopping): define stopped process ([#10851](https://github.com/leanprover-community/mathlib/pull/#10851))




Co-authored-by: RemyDegenne <Remydegenne@gmail.com>

### [2022-01-04T16:45:27+00:00](https://github.com/leanprover-community/mathlib/commit/5df2e7bb77a6e565cbb3ea550d85cd9634a2801c)
chore(data/polynomial, data/finset/lattice): basic lemmas ([#11237](https://github.com/leanprover-community/mathlib/pull/#11237))

Co-authored-by: Iván Sadofschi Costa <isadofschi@users.noreply.github.com>

### [2022-01-04T16:45:25+00:00](https://github.com/leanprover-community/mathlib/commit/5f3f01f9ce0e993f40131cdf5fefb84340c7799a)
feat(set_theory/ordinal_arithmetic): Proved `add_log_le_log_mul` ([#11228](https://github.com/leanprover-community/mathlib/pull/#11228))

That is, `log b u + log b v ≤ log b (u * v)`. The other direction holds only when `b ≠ 2` and `b` is principal multiplicative, and will be added at a much later PR.

### [2022-01-04T16:45:24+00:00](https://github.com/leanprover-community/mathlib/commit/18330f63dc0288d4568341754177412f419ba6b7)
feat(tactic/abel): support 0 in group expressions ([#11201](https://github.com/leanprover-community/mathlib/pull/#11201))

[As reported on Zulip.](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60abel.60.20not.20rewriting.20with.20.60sub_zero.60/near/266645648)

fixes [#11200](https://github.com/leanprover-community/mathlib/pull/#11200)

### [2022-01-04T16:45:23+00:00](https://github.com/leanprover-community/mathlib/commit/b0f2f559c4030caa1b380585197f0bfdf6790afe)
feat(set_theory/ordinal_arithmetic): Proved `dvd_iff_mod_eq_zero` ([#11195](https://github.com/leanprover-community/mathlib/pull/#11195))

### [2022-01-04T16:45:22+00:00](https://github.com/leanprover-community/mathlib/commit/7f244cfe068bbac2b7c6907073452eac8c8e0f79)
feat(category_theory/limits/filtered_colimits_commute_with_finite_limits): A curried variant of the fact that filtered colimits commute with finite limits. ([#11154](https://github.com/leanprover-community/mathlib/pull/#11154))

### [2022-01-04T16:45:20+00:00](https://github.com/leanprover-community/mathlib/commit/06c3ab2b89e1a10420ee3a3bc64be23943e6d1cd)
feat(ring_theory/discriminant): add of_power_basis_eq_norm ([#11149](https://github.com/leanprover-community/mathlib/pull/#11149))

From flt-regular.

### [2022-01-04T16:45:19+00:00](https://github.com/leanprover-community/mathlib/commit/4a0e844b90150c47fd792617586ad41b650a7863)
feat(data/finset): to_finset empty iff ([#11088](https://github.com/leanprover-community/mathlib/pull/#11088))

### [2022-01-04T16:45:18+00:00](https://github.com/leanprover-community/mathlib/commit/68d2d213b04bd7083020dfea6614292840c0bb9d)
feat(testing/slim_check): teach slim_check about `finsupp`s ([#10916](https://github.com/leanprover-community/mathlib/pull/#10916))

We add some instances so that `slim_check` can generate `finsupp`s and hence try to provide counterexamples for them.
As the way the original slim_check for functions works is to generate a finite list of random values and pick a default for the rest of the values these `total_functions` are quite close to finsupps already, we just have to map the default value to zero, and prove various things about the support.
There might be conceptually nicer ways of building this instance but this seems functional enough.

Seeing as many finsupp defs are classical (and noncomputable) this isn't quite as useful for generating counterexamples as I originally hoped.

See the test at `test/slim_check.lean` for a basic example of usage

I wrote this while working on flt-regular but it is hopefully useful outside of that




Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2022-01-04T16:45:16+00:00](https://github.com/leanprover-community/mathlib/commit/7d42deda9f5bc0d58d746d8f0538557128377559)
chore(*): Rename instances ([#9200](https://github.com/leanprover-community/mathlib/pull/#9200))

Rename
* `lattice_of_linear_order` -> `linear_order.to_lattice`
* `distrib_lattice_of_linear_order` -> `linear_order.to_distrib_lattice`

to follow the naming convention (well, it's currently not explicitly written there, but autogenerated names follow that).

### [2022-01-04T15:37:18+00:00](https://github.com/leanprover-community/mathlib/commit/b99a98e3ca0eb5c0af9dc14c9fa59d3ec6dd7a32)
doc(category_theory/limits/shapes/pullbacks): fix doc ([#11225](https://github.com/leanprover-community/mathlib/pull/#11225))

the link doesn't work with the full stop

### [2022-01-04T13:36:42+00:00](https://github.com/leanprover-community/mathlib/commit/a30375e0d803c78f8f1f61a8ca0f5945b43518ec)
feat(topology/fiber_bundle): a topological fiber bundle is a quotient map ([#11194](https://github.com/leanprover-community/mathlib/pull/#11194))

* The projection map of a topological fiber bundle (pre)trivialization
  is surjective onto its base set.

* The projection map of a topological fiber bundle with a nonempty
  fiber is surjective. Since it is also a continuous open map, it is a
  quotient map.

* Golf a few proofs.

### [2022-01-04T13:36:33+00:00](https://github.com/leanprover-community/mathlib/commit/aa82ba00e69064d3446b310810b6b1a0a521eb4f)
feat(algebra/opposites): add `add_opposite` ([#11080](https://github.com/leanprover-community/mathlib/pull/#11080))

Add `add_opposite`, add `to_additive` here and there. More `to_additive` can be added as needed later.

### [2022-01-04T13:36:24+00:00](https://github.com/leanprover-community/mathlib/commit/a7aa2c874082de938a2afbed70e0741d3b0ce220)
feat(data/finset/sigma): A way to lift `finset`-valued functions to a sigma type ([#10958](https://github.com/leanprover-community/mathlib/pull/#10958))

This defines `finset.sigma_lift : (Π i, α i → β i → finset (γ i)) → Σ i, α i → Σ i, β i → finset (Σ i, γ i)` as the function which returns the finset corresponding to the first coordinate of `a b : Σ i, α i` if they have the same, or the empty set else.



Co-authored-by: Bhavik Mehta <bhavikmehta8@gmail.com>

### [2022-01-04T13:36:16+00:00](https://github.com/leanprover-community/mathlib/commit/8bd205985db14dc1f238d6566920d6c01ef34be9)
feat(data/finset/slice): `r`-sets and slice ([#10685](https://github.com/leanprover-community/mathlib/pull/#10685))

Two simple nonetheless useful definitions about set families. A family of `r`-sets is a set of finsets of cardinality `r`. The slice of a set family is its subset of `r`-sets.

### [2022-01-04T12:08:44+00:00](https://github.com/leanprover-community/mathlib/commit/1aec9a19b500cc8bcc38df5e141d131d89396d3e)
feat(analysis/inner_product_space/dual,adjoint): add some lemmas about extensionality with respect to a basis ([#11176](https://github.com/leanprover-community/mathlib/pull/#11176))

This PR adds some lemmas about extensionality in inner product spaces with respect to a basis.

### [2022-01-04T09:44:51+00:00](https://github.com/leanprover-community/mathlib/commit/03872fdd77e090bb9b609e0b65ed4648d9789403)
feat(*): Prerequisites for the Spec gamma adjunction ([#11209](https://github.com/leanprover-community/mathlib/pull/#11209))




Co-authored-by: Junyan Xu <junyanxumath@gmail.com>

### [2022-01-04T09:44:50+00:00](https://github.com/leanprover-community/mathlib/commit/9a8e9fa5b9303f03015eff7646b1a9f66f403033)
chore(category_theory/limits): Generalize universes for `preserves/shapes/pullback.lean` ([#10780](https://github.com/leanprover-community/mathlib/pull/#10780))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2022-01-04T07:46:59+00:00](https://github.com/leanprover-community/mathlib/commit/044c1defc8f71c8ac1a8800e59b68603d3b66c8f)
feat(analysis/special_functions/trigonometric): a few lemmas ([#11217](https://github.com/leanprover-community/mathlib/pull/#11217))

Add a few trivial lemmas about `arcsin`/`arccos`.

### [2022-01-04T07:46:58+00:00](https://github.com/leanprover-community/mathlib/commit/3045014d8446ea800b9aafb437ff892313080ac0)
feat(algebra/order/ring): turn `mul_self_pos` into an `iff` ([#11216](https://github.com/leanprover-community/mathlib/pull/#11216))

### [2022-01-04T07:46:57+00:00](https://github.com/leanprover-community/mathlib/commit/85784b052c795103c833c260a9d712e43ad4be0c)
feat(linear_algebra/determinant): `det_units_smul` and `det_is_unit_smul` ([#11206](https://github.com/leanprover-community/mathlib/pull/#11206))

Add lemmas giving the determinant of a basis constructed with
`units_smul` or `is_unit_smul` with respect to the original basis.

### [2022-01-04T07:46:56+00:00](https://github.com/leanprover-community/mathlib/commit/1fc7a93cb224108c99287b41bdb45c87c5b71586)
chore(topology/metric_space/hausdorff_distance): slightly tidy some proofs ([#11203](https://github.com/leanprover-community/mathlib/pull/#11203))

### [2022-01-04T07:46:55+00:00](https://github.com/leanprover-community/mathlib/commit/9d1503a63fb9217f0ff6296d464ff570b26e0630)
feat(field_theory.intermediate_field): add intermediate_field.map_map ([#11020](https://github.com/leanprover-community/mathlib/pull/#11020))




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-01-04T06:31:42+00:00](https://github.com/leanprover-community/mathlib/commit/71dc1eab8e279f5100fa841b8472d9d479160a96)
feat(topology/maps): preimage of closure/frontier under an open map ([#11189](https://github.com/leanprover-community/mathlib/pull/#11189))

We had lemmas about `interior`. Add versions about `frontier` and `closure`.

### [2022-01-04T03:53:12+00:00](https://github.com/leanprover-community/mathlib/commit/8f391aa552ca7056691e679a6bc016f6fcaee0e2)
chore(algebra/module/submodule): switch `subtype_eq_val` to `coe_subtype` ([#11210](https://github.com/leanprover-community/mathlib/pull/#11210))

Change the name and form of a lemma, from
```lean
lemma subtype_eq_val : ((submodule.subtype p) : p → M) = subtype.val := rfl
```
to
```lean
lemma coe_subtype : ((submodule.subtype p) : p → M) = coe := rfl
```
The latter is the simp-normal form so I claim it should be preferred.

### [2022-01-04T01:48:54+00:00](https://github.com/leanprover-community/mathlib/commit/4daaff06058cbee078dc667a2c753c1d33bdc074)
feat(data/nat/prime): factors sublist of product ([#11104](https://github.com/leanprover-community/mathlib/pull/#11104))

This PR changes the existing `factors_subset_right` to give a stronger sublist conclusion (which trivially can be used to reproduce the subst version).

### [2022-01-03T20:30:05+00:00](https://github.com/leanprover-community/mathlib/commit/62d814a4f9f6fa650ce0598e02dcd3a018a0796f)
refactor(order/lexicographic): Change the `lex` synonym ([#10926](https://github.com/leanprover-community/mathlib/pull/#10926))

At least five types have a natural lexicographic order, namely:
* `α ⊕ β` where everything on the left is smaller than everything on the right
* `Σ i, α i` where things are first ordered following `ι`, then following `α i`
* `Σ' i, α i` where things are first ordered following `ι`, then following `α i`
* `α × β` where things are first ordered following `α`, then following `β`
* `finset α`, which is in a specific sene the dual of `finset.colex`.

And we could even add `Π i, α i`, `ι →₀ α`, `Π₀ i, α i`, etc... although those haven't come up yet in practice.

Hence, we generalize the `lex` synonym away from `prod` to make it a general purpose synonym to equip a type with its lexicographical order. What was `lex α β` now is `α ×ₗ β`.

Note that this PR doesn't add any of the aforementioned instances.

### [2022-01-03T18:55:41+00:00](https://github.com/leanprover-community/mathlib/commit/9d0fd52315f399d390b2d5a727972cb551c0a16f)
feat(measure_theory/function/lp_space): use has_measurable_add2 instead of second_countable_topology ([#11202](https://github.com/leanprover-community/mathlib/pull/#11202))

Use the weaker assumption `[has_measurable_add₂ E]` instead of `[second_countable_topology E]` in 4 lemmas.

### [2022-01-03T16:25:35+00:00](https://github.com/leanprover-community/mathlib/commit/724989582f9efd7210e4abd56da4b12aac3095cb)
feat(analysis/inner_product_space/basic): negating orthonormal vectors ([#11208](https://github.com/leanprover-community/mathlib/pull/#11208))

Add a lemma that, given an orthonormal family, negating some of the
vectors in it produces another orthonormal family.

### [2022-01-03T15:26:28+00:00](https://github.com/leanprover-community/mathlib/commit/83f40364c6329eb42bcb659f53a6e803004f0133)
feat(*/cyclotomic): update is_root_cyclotomic_iff to use ne_zero ([#11071](https://github.com/leanprover-community/mathlib/pull/#11071))



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-01-03T14:30:17+00:00](https://github.com/leanprover-community/mathlib/commit/236d978daf8ce20b0d7bad7a4a60985b65f0f04d)
feat(linear_algebra/matrix/basis): `to_matrix_units_smul` and `to_matrix_is_unit_smul` ([#11191](https://github.com/leanprover-community/mathlib/pull/#11191))

Add lemmas that applying `to_matrix` to a basis constructed with
`units_smul` or `is_unit_smul` produces the corresponding diagonal
matrix.

### [2022-01-03T12:49:02+00:00](https://github.com/leanprover-community/mathlib/commit/4b3198b9453e8b09da042eea0d872dfd0d3dbea2)
feat(combinatorics/configuration): `has_lines` implies `has_points`, and vice versa ([#11170](https://github.com/leanprover-community/mathlib/pull/#11170))

If `|P| = |L|`, then `has_lines` and `has_points` are equivalent!

### [2022-01-03T11:27:40+00:00](https://github.com/leanprover-community/mathlib/commit/a10cb2f395b8d002cfca01aca3a98a5736e28006)
feat(algebra/big_operators/associated): `dvd_prod_iff` for `finset` and `finsupp` ([#10675](https://github.com/leanprover-community/mathlib/pull/#10675))

Adding the counterparts of `dvd_prod_iff` (in [#10624](https://github.com/leanprover-community/mathlib/pull/#10624)) for `finset` and `finsupp`.

### [2022-01-03T10:32:11+00:00](https://github.com/leanprover-community/mathlib/commit/a813cf5c732ac4cc2d7b430e6ff733c68a451655)
chore(algebra/algebra/spectrum): move `exists_spectrum_of_is_alg_closed_of_finite_dimensional` ([#10919](https://github.com/leanprover-community/mathlib/pull/#10919))

Move a lemma from `field_theory/is_alg_closed/basic` into `algebra/algebra/spectrum` which belongs in this relatively new file. Also, rename (now in `spectrum` namespace) and refactor it slightly; and update the two references to it accordingly.

- [x] depends on: [#10783](https://github.com/leanprover-community/mathlib/pull/#10783) 



Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2022-01-03T07:35:22+00:00](https://github.com/leanprover-community/mathlib/commit/49bf3d3ef8dae581bf25f207c07092c9a7597cdb)
feat(data/polynomial/taylor): taylor_mul ([#11193](https://github.com/leanprover-community/mathlib/pull/#11193))





Co-authored-by: Johan Commelin <johan@commelin.net>

### [2022-01-03T07:35:21+00:00](https://github.com/leanprover-community/mathlib/commit/a49ee49b4bfa72c04c3db02288e420a21dae0692)
feat(data/finset/functor): Functor structures for `finset` ([#10980](https://github.com/leanprover-community/mathlib/pull/#10980))

This defines the monad, the commutative applicative and the (almost) traversable functor structures on `finset`.
It all goes in a new file `data.finset.functor` and picks up the `functor` instance that was stranded in `data.finset.basic` by Scott in [#2997](https://github.com/leanprover-community/mathlib/pull/#2997).

### [2022-01-03T06:54:39+00:00](https://github.com/leanprover-community/mathlib/commit/138c61fce58aef579c1bc052066a9a5829774583)
chore(field_theory/ratfunc): comm_ring (ratfunc K) ([#11188](https://github.com/leanprover-community/mathlib/pull/#11188))

Previously, the file only gave a `field (ratfunc K)` instance,
requiring `comm_ring K` and `is_domain K`.
In fact, `ratfunc K` is a `comm_ring` regardless of the `is_domain`.
The upstream instance is proven first, with a generalized tactic.

### [2022-01-02T23:55:46+00:00](https://github.com/leanprover-community/mathlib/commit/03a54829aed1f79e696b7a3b1847fcc521de6398)
chore(topology/continuous_on): fix a typo ([#11190](https://github.com/leanprover-community/mathlib/pull/#11190))

`eventually_nhds_with_of_forall` → `eventually_nhds_within_of_forall`

### [2022-01-02T17:21:44+00:00](https://github.com/leanprover-community/mathlib/commit/3f7776136e1bf0310cb01c299d23b106ef2e2016)
feat(ring_theory/algebraic): algebraic functions ([#11156](https://github.com/leanprover-community/mathlib/pull/#11156))

Accessible via a new `algebra (polynomial R) (R → R)`
and a generalization that gives `algebra (polynomial R) (S → S)` when `[algebra R S]`.

### [2022-01-01T20:23:07+00:00](https://github.com/leanprover-community/mathlib/commit/ebdbe6b00344560e39edec913f63ddb1f6546bdf)
feat(topology/algebra/ordered): new lemmas, update ([#11184](https://github.com/leanprover-community/mathlib/pull/#11184))

* In `exists_seq_strict_mono_tendsto'` and `exists_seq_strict_anti_tendsto'`, prove that `u n` belongs to the corresponding open interval.
* Add `exists_seq_strict_anti_strict_mono_tendsto`.
* Rename `is_lub_of_tendsto` to `is_lub_of_tendsto_at_top`, rename `is_glb_of_tendsto` to `is_glb_of_tendsto_at_bot`.
* Add `is_lub_of_tendsto_at_bot`, `is_glb_of_tendsto_at_top`.

### [2022-01-01T19:07:15+00:00](https://github.com/leanprover-community/mathlib/commit/02d02dfc2767d5211f58d4d7e8e426dc63a21de4)
chore(measure_theory): fix TC assumptions in 2 lemmas ([#11185](https://github.com/leanprover-community/mathlib/pull/#11185))

With new assumptions, these lemmas work, e.g., for `β = ι → ℝ`.

### [2022-01-01T19:07:13+00:00](https://github.com/leanprover-community/mathlib/commit/c1b1041703932ae68c5622e33ef97399d6e94e2d)
feat(topology/metric_space/basic): add `fin.dist_insert_nth_insert_nth` ([#11183](https://github.com/leanprover-community/mathlib/pull/#11183))

### [2022-01-01T17:09:52+00:00](https://github.com/leanprover-community/mathlib/commit/6486e9b34092e78f876619038814d3a7fb58fb77)
chore(order/rel_classes): Removed unnecessary `classical` ([#11180](https://github.com/leanprover-community/mathlib/pull/#11180))

Not sure what that was doing here.

### [2022-01-01T15:44:59+00:00](https://github.com/leanprover-community/mathlib/commit/93cf56c59ad9645fc79d7d8caa37f185e8bad7ff)
feat(algebraic_geometry/*): The map `F.stalk y ⟶ F.stalk x` for `x ⤳ y` ([#11144](https://github.com/leanprover-community/mathlib/pull/#11144))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2022-01-01T14:44:14+00:00](https://github.com/leanprover-community/mathlib/commit/892d465a22dbaa12fa7003cc732fb27ba4a4dbee)
feat(linear_algebra/multilinear/basic): the space of multilinear maps is finite-dimensional when the components are finite-dimensional ([#10504](https://github.com/leanprover-community/mathlib/pull/#10504))

Formalized as part of the Sphere Eversion project.

### [2022-01-01T13:55:32+00:00](https://github.com/leanprover-community/mathlib/commit/53533697265b23a58f41816a841b23083db915a7)
feat(combinatorics/configuration): Line count equals point count ([#11169](https://github.com/leanprover-community/mathlib/pull/#11169))

In a configuration satisfying `has_lines` or `has_points`, if the number of points equals the number of lines, then the number of lines through a given point equals the number of points on a given line.

### [2022-01-01T13:55:31+00:00](https://github.com/leanprover-community/mathlib/commit/a6c82afb13e6ba417985e238f845d3d65f72e32f)
feat(group_theory/specific_groups/*): computes the exponents of the dihedral and generalised quaternion groups ([#11166](https://github.com/leanprover-community/mathlib/pull/#11166))

This PR shows that the exponent of the dihedral group of order `2n` is equal to `lcm n 2` and that the exponent of the generalised quaternion group of order `4n` is `2 * lcm n 2`



Co-authored-by: Eric Rodriguez <ericrboidi@gmail.com>
Co-authored-by: Julian-Kuelshammer <68201724+Julian-Kuelshammer@users.noreply.github.com>

### [2022-01-01T13:55:30+00:00](https://github.com/leanprover-community/mathlib/commit/ad76a5eee59757353c583279570b4801ed43ee4e)
feat(data/nat/log): log_mul, log_div ([#11164](https://github.com/leanprover-community/mathlib/pull/#11164))

Even with division over natural, the log "spec" holds.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2022-01-01T11:59:04+00:00](https://github.com/leanprover-community/mathlib/commit/23b01cc447875bb7e8604fc18408108db9fb0454)
feat(algebraic_geometry): The function field of an integral scheme ([#11147](https://github.com/leanprover-community/mathlib/pull/#11147))




Co-authored-by: Andrew Yang <36414270+erdOne@users.noreply.github.com>

### [2022-01-01T02:32:45+00:00](https://github.com/leanprover-community/mathlib/commit/1594b0ca22ea5041befb6a62bdd266d1a6cd471b)
feat(normed_space/lp_space): Lp space for `Π i, E i` ([#11015](https://github.com/leanprover-community/mathlib/pull/#11015))

For a family `Π i, E i` of normed spaces, define the subgroup with finite lp norm, and prove it is a `normed_group`.  Many parts adapted from the development of `measure_theory.Lp` by @RemyDegenne.

https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lp.20space

### [2022-01-01T00:20:37+00:00](https://github.com/leanprover-community/mathlib/commit/742ec88c19df53531dc6f0f690bcd1ac6cec22a8)
feat(data/set/*): lemmas about `monotone`/`antitone` and sets/intervals ([#11173](https://github.com/leanprover-community/mathlib/pull/#11173))

* Rename `set.monotone_inter` and `set.monotone_union` to
  `monotone.inter` and `monotone.union`.
* Add `antitone` versions of some `monotone` lemmas.
* Specialize `Union_Inter_of_monotone` for `set.pi`.
* Add lemmas about `⋃ x, Ioi (f x)`, `⋃ x, Iio (f x)`, and `⋃ x, Ioo (f x) (g x)`.
* Add dot notation lemmas `monotone.Ixx` and `antitone.Ixx`.

### [2022-01-01T00:20:36+00:00](https://github.com/leanprover-community/mathlib/commit/979f2e729f58892a232d4ec8696bc23f655457c7)
fix(order/filter/ultrafilter): dedup instance names ([#11171](https://github.com/leanprover-community/mathlib/pull/#11171))

### [2022-01-01T00:20:35+00:00](https://github.com/leanprover-community/mathlib/commit/da54388a50b504a5f2e8f25bdf991a737e818624)
feat(combinatorics/simple_graph/srg): is_SRG_with for complete graphs, edgeless graphs, and complements ([#5698](https://github.com/leanprover-community/mathlib/pull/#5698))

We add the definition of a strongly regular graph and prove some useful lemmas about them. 



Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>