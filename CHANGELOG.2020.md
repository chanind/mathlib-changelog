### [2020-12-31T19:17:29+00:00](https://github.com/leanprover-community/mathlib/commit/54bf708debfbbe982490f601085e7b57b8dd5a1c)
feat(logic/basic): exists_unique_false simp lemma ([#5544](https://github.com/leanprover-community/mathlib/pull/#5544))

### [2020-12-31T16:30:28+00:00](https://github.com/leanprover-community/mathlib/commit/0830bfd44ab1234510700793626ed4eda77a5085)
refactor(analysis/analytic/basic): redefine `formal_multilinear_series.radius` ([#5349](https://github.com/leanprover-community/mathlib/pull/#5349))

With the new definition, (a) some proofs get much shorter; (b) we
don't need `rpow` in `analytic/basic`.

### [2020-12-31T10:07:03+00:00](https://github.com/leanprover-community/mathlib/commit/10f6c151e5abd7711c1cb06e720cc98f86234803)
chore(analysis/normed_space/inner_product): notation for orthogonal complement ([#5536](https://github.com/leanprover-community/mathlib/pull/#5536))

Notation for `submodule.orthogonal`, so that one can write `Kᗮ` instead of `K.orthogonal`.

Simultaneous PR
https://github.com/leanprover/vscode-lean/pull/246
adds `\perp` as vscode shorthand for this symbol.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/New.20linear.20algebra.20notation)

### [2020-12-31T08:49:08+00:00](https://github.com/leanprover-community/mathlib/commit/cca63650df660f3eee2d43c2ab178243556e9594)
feat(field_theory/galois): is_galois.tfae ([#5542](https://github.com/leanprover-community/mathlib/pull/#5542))

This is a TFAE theorem for is_galois



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2020-12-31T06:04:17+00:00](https://github.com/leanprover-community/mathlib/commit/b04aeb5e19faa21c2ae76158fc8454bb236f5f4f)
chore(algebra): move lemmas from ring_theory.algebra_tower to algebra.algebra.tower ([#5506](https://github.com/leanprover-community/mathlib/pull/#5506))

Moved some basic lemmas from `ring_theory.algebra_tower` to `algebra.algebra.tower`.

### [2020-12-31T02:53:26+00:00](https://github.com/leanprover-community/mathlib/commit/a40f31fb6c5687a455ab74827de7ffa67d56597a)
feat(data/tprod): finite products of types ([#5385](https://github.com/leanprover-community/mathlib/pull/#5385))

This PR defined `list.tprod` as a finite product of types to transfer results from binary products to finitary products.
See module doc for more info.

### [2020-12-31T01:37:37+00:00](https://github.com/leanprover-community/mathlib/commit/611b73eb3831f13e4c8cddca616940809b1fe5a8)
chore(scripts): update nolints.txt ([#5540](https://github.com/leanprover-community/mathlib/pull/#5540))

I am happy to remove some nolints for you!

### [2020-12-30T23:15:52+00:00](https://github.com/leanprover-community/mathlib/commit/9c46cadc733478b4040ba1d2331513bdff5c60ac)
feat(field_theory/algebraic_closure): algebraically closed fields have no nontrivial algebraic extensions ([#5537](https://github.com/leanprover-community/mathlib/pull/#5537))

### [2020-12-30T20:43:17+00:00](https://github.com/leanprover-community/mathlib/commit/6e0d0fa4dbab12f29e8f677dd4b336d90f18cd06)
chore(algebra/field): use `K` as a type variable ([#5535](https://github.com/leanprover-community/mathlib/pull/#5535))

### [2020-12-30T20:43:15+00:00](https://github.com/leanprover-community/mathlib/commit/99881936bd94a466473e41ad9e5ce6d973651ea1)
feat(measure_theory): various additions ([#5389](https://github.com/leanprover-community/mathlib/pull/#5389))

Some computations of measures on non-measurable sets
Some more measurability lemmas for pi-types
Cleanup in `measure_space`

### [2020-12-30T19:29:20+00:00](https://github.com/leanprover-community/mathlib/commit/f1d2bc608ac43ad0aedf06ea4890491426302b7b)
feat(order/lattice_intervals): lattice structures on intervals in lattices ([#5496](https://github.com/leanprover-community/mathlib/pull/#5496))

Defines (semi-)lattice structures on intervals in lattices

### [2020-12-30T17:33:54+00:00](https://github.com/leanprover-community/mathlib/commit/16320e2eb61fe3a1bcbf4e4b756df1d70f944bbb)
chore(topology/algebra/infinite_sum): refactor `tsum_mul_left/right` ([#5533](https://github.com/leanprover-community/mathlib/pull/#5533))

* move old lemmas to `summable` namespace;
* add new `tsum_mul_left` and `tsum_mul_right` that work in a `division_ring` without a `summable` assumption.

### [2020-12-30T17:33:52+00:00](https://github.com/leanprover-community/mathlib/commit/958c407acc5def86ffea1b244d0f8c87e523cfd1)
chore(analysis/normed_space/basic): a few lemmas about `nnnorm` ([#5532](https://github.com/leanprover-community/mathlib/pull/#5532))

### [2020-12-30T15:51:17+00:00](https://github.com/leanprover-community/mathlib/commit/b15bb06eb9af30e40be3d35b9d735ef5decf70d2)
feat(topology/instances/ennreal): a sufficient condition for `f : (Σ i, β i) → ℝ` to be summable ([#5531](https://github.com/leanprover-community/mathlib/pull/#5531))

### [2020-12-30T15:51:13+00:00](https://github.com/leanprover-community/mathlib/commit/38ba6ba285fa9a7035c983ca8412cd0218d01ee9)
chore(data/real/{e,}nnreal): a few lemmas ([#5530](https://github.com/leanprover-community/mathlib/pull/#5530))

* Rename `nnreal.le_of_forall_lt_one_mul_lt` to
  `nnreal.le_of_forall_lt_one_mul_le`, and similarly for `ennreal`.
* Move the proof of the latter lemma to `topology/instances/ennreal`,
  prove it using continuity of multiplication.
* Add `ennreal.le_of_forall_nnreal_lt`, `nnreal.lt_div_iff`, and
  `nnreal.mul_lt_of_lt_div`.

### [2020-12-30T15:51:11+00:00](https://github.com/leanprover-community/mathlib/commit/c82be35dd3c17ae06653b4e08c05e7cbc71708c6)
feat(analysis/normed_space/inner_product): orthogonal complement lemmas ([#5474](https://github.com/leanprover-community/mathlib/pull/#5474))

The orthogonal complement of a subspace is closed.  The orthogonal complement of the orthogonal complement of a complete subspace is itself.

### [2020-12-30T13:05:48+00:00](https://github.com/leanprover-community/mathlib/commit/7a0317180db43a4156360ce70a3835ba37e44b12)
chore(order/rel_iso): add some missing lemmas ([#5492](https://github.com/leanprover-community/mathlib/pull/#5492))

Also define `order_iso.trans`.

### [2020-12-30T13:05:46+00:00](https://github.com/leanprover-community/mathlib/commit/8545aa60e07482995be1f75a4ee4a0502ee61e29)
chore(topology/algebra/ordered): move code, add missing lemmas ([#5481](https://github.com/leanprover-community/mathlib/pull/#5481))

* merge two sections about `linear_ordered_add_comm_group`;
* add missing lemmas about limits of `f * g` when one of `f`, `g` tends to `-∞`, and another tends to a positive or negative constant;
* drop `neg_preimage_closure` in favor of the new `neg_closure` in `topology/algebra/group`.

### [2020-12-30T10:07:47+00:00](https://github.com/leanprover-community/mathlib/commit/5e86589d87c28eafe44f057944b6d94a79b4e558)
chore(data/nat/enat): some useful lemmas ([#5517](https://github.com/leanprover-community/mathlib/pull/#5517))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-12-30T08:01:01+00:00](https://github.com/leanprover-community/mathlib/commit/1c110ada755c36960afe8235915bde56c6d88ab5)
fix(tactic/linarith): elaborate and insert arguments before destructing hypotheses ([#5501](https://github.com/leanprover-community/mathlib/pull/#5501))

closes [#5480](https://github.com/leanprover-community/mathlib/pull/#5480)

Arguments to `linarith` can depend on hypotheses (e.g. conjunctions) that get destructed during preprocessing, after which the arguments will no longer elaborate or typecheck. This just moves the elaboration earlier and adds these arguments as hypotheses themselves.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-12-30T01:38:14+00:00](https://github.com/leanprover-community/mathlib/commit/7c6020f18f861c64881c937e1d4778b55b73d39e)
chore(scripts): update nolints.txt ([#5526](https://github.com/leanprover-community/mathlib/pull/#5526))

I am happy to remove some nolints for you!

### [2020-12-29T19:06:07+00:00](https://github.com/leanprover-community/mathlib/commit/abffbaa39550b4bd8b162bcf0eda8799e8c4d35d)
feat(analysis/convex/specific_functions): log is concave ([#5508](https://github.com/leanprover-community/mathlib/pull/#5508))

This PR proves that the real log is concave on `Ioi 0` and `Iio 0`, and adds lemmas about concavity of functions along the way.




Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2020-12-29T07:47:35+00:00](https://github.com/leanprover-community/mathlib/commit/8e413ebbf6b90467b16dd6825a53a52a4892c887)
feat(order/bounded_lattice): define atoms, coatoms, and simple lattices ([#5471](https://github.com/leanprover-community/mathlib/pull/#5471))

Defines `is_atom`, `is_coatom`, and `is_simple_lattice`
Refactors `ideal.is_maximal` to use `is_coatom`, the new definition is definitionally equal to the old one



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-12-29T03:00:40+00:00](https://github.com/leanprover-community/mathlib/commit/15ff865354febd1d528efafc578d13b86a0a61b0)
doc(localized): update documentation ([#5519](https://github.com/leanprover-community/mathlib/pull/#5519))

remove old warning
remove duplicated documentation
rename notation namespace to locale

### [2020-12-29T01:33:07+00:00](https://github.com/leanprover-community/mathlib/commit/297d97ea843fa6c2b735cc4acf65b862c60c3e3c)
chore(scripts): update nolints.txt ([#5522](https://github.com/leanprover-community/mathlib/pull/#5522))

I am happy to remove some nolints for you!

### [2020-12-28T17:36:18+00:00](https://github.com/leanprover-community/mathlib/commit/41bad637e46f130f05b466dc36518c7fd7f19f05)
feat(polynomial/degree/definitions): nat_degree_X_pow ([#5512](https://github.com/leanprover-community/mathlib/pull/#5512))

Companion to degree_X_pow

### [2020-12-28T15:03:21+00:00](https://github.com/leanprover-community/mathlib/commit/d245c4e03c2fcc6d5207f3fb6e2e313dabbc49e6)
feat(polynomial/algebra_map): aeval_comp ([#5511](https://github.com/leanprover-community/mathlib/pull/#5511))

Basic lemma about aeval

### [2020-12-28T13:55:13+00:00](https://github.com/leanprover-community/mathlib/commit/f1f2ca685383730dcfce9ec3c781dcc2da3a0c31)
feat(category_theory/limits): preserves limits of equivalent shape ([#5515](https://github.com/leanprover-community/mathlib/pull/#5515))

### [2020-12-28T03:40:12+00:00](https://github.com/leanprover-community/mathlib/commit/6d1d4c13909d7044fb7e2bcc67df63d4b2ef7602)
chore(scripts): update nolints.txt ([#5514](https://github.com/leanprover-community/mathlib/pull/#5514))

I am happy to remove some nolints for you!

### [2020-12-28T00:38:46+00:00](https://github.com/leanprover-community/mathlib/commit/6d0b415edde8841b1ad7a15a809e46770521b3f9)
feat(data/list/basic): nth_zero ([#5513](https://github.com/leanprover-community/mathlib/pull/#5513))

### [2020-12-27T16:40:59+00:00](https://github.com/leanprover-community/mathlib/commit/5c8c122226776201eba48f45a991e86084d77375)
chore(analysis/analytic/basic): speed up slow lemmas ([#5507](https://github.com/leanprover-community/mathlib/pull/#5507))

Removes slow `tidy`s from `formal_multilinear_series.change_origin_radius` and `formal_multilinear_series.change_origin_has_sum`

### [2020-12-27T04:21:55+00:00](https://github.com/leanprover-community/mathlib/commit/1e75453f39e492b8c273215f357cca133904fbf3)
feat(data/list/basic): filter_map retains prefix ([#5453](https://github.com/leanprover-community/mathlib/pull/#5453))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2020-12-26T22:54:39+00:00](https://github.com/leanprover-community/mathlib/commit/f7e728ad8a6ebf90291df2a4d2f9255a6576b529)
feat(data/list/range): enum is a zip ([#5457](https://github.com/leanprover-community/mathlib/pull/#5457))

### [2020-12-26T20:38:16+00:00](https://github.com/leanprover-community/mathlib/commit/ae60bb96662a6db6c1f6296547f171ef79ff0ef3)
chore(topology/algebra/order): add `continuous_on.surj_on_of_tendsto` ([#5502](https://github.com/leanprover-community/mathlib/pull/#5502))

* rename `surjective_of_continuous` to `continuous.surjective` and `surjective_of_continuous'` to `continuous.surjective'`;
* add `continuous_on.surj_on_of_tendsto` and `continuous_on.surj_on_of_tendsto'`

### [2020-12-26T09:47:44+00:00](https://github.com/leanprover-community/mathlib/commit/add100aaa4ed44342dee6cb993043fb670389671)
feat(ring_theory/perfection): perfection.map ([#5503](https://github.com/leanprover-community/mathlib/pull/#5503))

### [2020-12-26T01:31:06+00:00](https://github.com/leanprover-community/mathlib/commit/768497cd30cdcfcffefb6b5dd0e23faa1bb920d5)
chore(scripts): update nolints.txt ([#5505](https://github.com/leanprover-community/mathlib/pull/#5505))

I am happy to remove some nolints for you!

### [2020-12-25T21:29:27+00:00](https://github.com/leanprover-community/mathlib/commit/666035fa9bb1800a6316ad64e97b016537161131)
fix(algebra/big_operators/basic): add docstrings for `sum_bij` and `sum_bij'` ([#5497](https://github.com/leanprover-community/mathlib/pull/#5497))

They don't seem to be there.

### [2020-12-25T21:29:26+00:00](https://github.com/leanprover-community/mathlib/commit/1a526b312dd13963483bdc0c60d0dd261b158133)
chore(topology/homeomorph): a few more lemmas, golf ([#5467](https://github.com/leanprover-community/mathlib/pull/#5467))

### [2020-12-25T18:38:51+00:00](https://github.com/leanprover-community/mathlib/commit/726b7bfd37322fa113d69b49941e76dd126a9ed6)
feat(analysis/specific_limits): a `tfae` about "`f` grows exponentially slower than `R ^ n`" ([#5488](https://github.com/leanprover-community/mathlib/pull/#5488))

Also add supporting lemmas here and there.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-12-25T17:10:05+00:00](https://github.com/leanprover-community/mathlib/commit/d968a61d4689322ef2ee6cb01c70dc3c2651b8bf)
feat(category_theory/limits): yoneda reflects limits ([#5447](https://github.com/leanprover-community/mathlib/pull/#5447))

yoneda and coyoneda jointly reflect limits

### [2020-12-25T13:57:08+00:00](https://github.com/leanprover-community/mathlib/commit/f60fd0808ffad981a35563b4626e968e6ea669ba)
chore(logic/basic): +2 simp lemmas ([#5500](https://github.com/leanprover-community/mathlib/pull/#5500))

* simplify `a ∨ b ↔ a` to `b → a`;
* simplify `a ∨ b ↔ b` to `a → b`.

### [2020-12-25T01:42:05+00:00](https://github.com/leanprover-community/mathlib/commit/1f0231dfae27d9d59d1e2c412269ddfeba26cdcb)
chore(scripts): update nolints.txt ([#5498](https://github.com/leanprover-community/mathlib/pull/#5498))

I am happy to remove some nolints for you!

### [2020-12-24T19:51:27+00:00](https://github.com/leanprover-community/mathlib/commit/feced76746a2d10bbbb2d733aeb2664a976a34ab)
feat(algebra/*): Noncomputable `group` structures from `is_unit` ([#5427](https://github.com/leanprover-community/mathlib/pull/#5427))

Noncomputably defines the following group structures given that all (nonzero) elements are units:
- `monoid` -> `group`
- `comm_monoid` -> `comm_group`
- `monoid_with_zero` -> `comm_group_with_zero`
- `comm_monoid_with_zero` -> `comm_group_with_zero`
- `ring` -> `division_ring`
- `comm_ring` -> `field`



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2020-12-24T16:50:39+00:00](https://github.com/leanprover-community/mathlib/commit/f300c759e0cd0f8af18046d01386e2a96720883c)
feat(data/list/basic): lemmas about reduce_option ([#5450](https://github.com/leanprover-community/mathlib/pull/#5450))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2020-12-24T14:52:22+00:00](https://github.com/leanprover-community/mathlib/commit/3046436cc35b83a21645f5c8ca7abb76d038d3a0)
chore(linear_algebra/linear_independent): make a binding explicit in ne_zero ([#5494](https://github.com/leanprover-community/mathlib/pull/#5494))

Resubmitting [#5479](https://github.com/leanprover-community/mathlib/pull/#5479) from within the mathlib repo.

### [2020-12-24T08:35:35+00:00](https://github.com/leanprover-community/mathlib/commit/46614b0291a84914f8bcdf493cf0dae7cd1ab891)
chore(ring_theory/power_series/well_known): generalize ([#5491](https://github.com/leanprover-community/mathlib/pull/#5491))

* generalize `power_series.exp`, `power_series.cos`, and `power_series.sin` to a `ℚ`-algebra;
* define `alg_hom.mk'`;
* rename `alg_hom_nat` to `ring_hom.to_nat_alg_hom`;
* drop `alg_hom_int` (was equal to `ring_hom.to_int_alg_hom`);
* add `ring_hom.to_rat_alg_hom`.

### [2020-12-24T08:35:33+00:00](https://github.com/leanprover-community/mathlib/commit/8a038398bd5d393e1066083d814f80709648b479)
chore(scripts): update nolints.txt ([#5490](https://github.com/leanprover-community/mathlib/pull/#5490))

I am happy to remove some nolints for you!

### [2020-12-24T07:17:34+00:00](https://github.com/leanprover-community/mathlib/commit/2ae61be9bca8178f0ab60e96e8bbc4b052827a64)
feat(field_theory/galois): is_galois.self ([#5486](https://github.com/leanprover-community/mathlib/pull/#5486))

Some basic lemmas about is_separable, normal, and is_galois.

### [2020-12-23T22:08:09+00:00](https://github.com/leanprover-community/mathlib/commit/63070edca916f20d7534ec6d6e9de2746ef943cb)
feat(data/list/chain): relate chain to refl trans gen ([#5437](https://github.com/leanprover-community/mathlib/pull/#5437))

Some golf and a new lemma to convert a list chain to a refl trans gen

### [2020-12-23T22:08:07+00:00](https://github.com/leanprover-community/mathlib/commit/ceae529631d39ddf7461bc1027f1bfe49c165293)
chore(group_theory/coset): Make `quotient_group.mk` an abbreviation ([#5377](https://github.com/leanprover-community/mathlib/pull/#5377))

This allows simp lemmas about `quotient.mk'` to apply here, which currently do not apply.

The definition doesn't seem interesting enough to be semireducible.

### [2020-12-23T18:58:44+00:00](https://github.com/leanprover-community/mathlib/commit/2a5a0b0e0566ea5f3f7868590248bcfbebd7b7b8)
feat(group_theory/*): mark some lemmas as ext (about homs out of free constructions) ([#5484](https://github.com/leanprover-community/mathlib/pull/#5484))



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2020-12-23T18:58:42+00:00](https://github.com/leanprover-community/mathlib/commit/e2edba53986cd292c9dcc8726f552180d6261400)
chore(order/filter/basic): make `filter.univ_mem_sets` a `simp` lemma ([#5464](https://github.com/leanprover-community/mathlib/pull/#5464))

### [2020-12-23T18:58:38+00:00](https://github.com/leanprover-community/mathlib/commit/d3a5e067224cfcf6ea4dcb987fa7693edf37349f)
feat(data/dlist/basic): dlist singleton and of_list simp lemmas ([#5461](https://github.com/leanprover-community/mathlib/pull/#5461))

### [2020-12-23T16:10:29+00:00](https://github.com/leanprover-community/mathlib/commit/fd9268cbadae911120b1e3f61d845134b3aa30f9)
feat(data/list/basic): lemmas about scanl ([#5454](https://github.com/leanprover-community/mathlib/pull/#5454))




Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-12-23T12:11:42+00:00](https://github.com/leanprover-community/mathlib/commit/eb5cf252d8d65153146fe6a25168069ad26e2578)
chore(analysis/asymptotics): a few more lemmas ([#5482](https://github.com/leanprover-community/mathlib/pull/#5482))

* golf some proofs;
* `x ^ n = o (y ^ n)` as `n → ∞` provided that `0 ≤ x < y`;
* lemmas about `is_O _ _ ⊤` etc;
* if `is_O f g cofinite`, then for some `C>0` and any `x` such that `g x ≠ 0` we have `∥f x∥≤C*∥g x∥`.

### [2020-12-23T09:41:22+00:00](https://github.com/leanprover-community/mathlib/commit/435b97ac6bf80f20a006aa79454cb7f09b30166b)
feat(ring_theory/witt_vector): the comparison between W(F_p) and Z_p ([#5164](https://github.com/leanprover-community/mathlib/pull/#5164))

This PR is the culmination of the Witt vector project. We prove that the
ring of Witt vectors over `zmod p` is isomorphic to the ring of `p`-adic
numbers.


Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-12-23T04:12:18+00:00](https://github.com/leanprover-community/mathlib/commit/d5adbde115f06f3fd0039869cc95847c32904468)
feat(data/list/basic): prefix simplifying iff lemmas ([#5452](https://github.com/leanprover-community/mathlib/pull/#5452))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2020-12-23T01:30:34+00:00](https://github.com/leanprover-community/mathlib/commit/24f71d7ba8ecce5436759c25b12010afd9a67d23)
chore(scripts): update nolints.txt ([#5483](https://github.com/leanprover-community/mathlib/pull/#5483))

I am happy to remove some nolints for you!

### [2020-12-22T20:56:38+00:00](https://github.com/leanprover-community/mathlib/commit/eba2a79649144a8e1922bab3d5fe988955c82397)
feat(data/list/zip): length of zip_with, nth_le of zip ([#5455](https://github.com/leanprover-community/mathlib/pull/#5455))

### [2020-12-22T17:05:18+00:00](https://github.com/leanprover-community/mathlib/commit/3fc60fc74c987ad3d2f99f103b4879f873bac5e5)
fix(number_theory/bernoulli): fix docstring ([#5478](https://github.com/leanprover-community/mathlib/pull/#5478))

### [2020-12-22T17:05:16+00:00](https://github.com/leanprover-community/mathlib/commit/0f1362e1f2283f04f15245f115a6a778878ddc73)
chore(analysis/calculus/mean_value): use `𝓝[Ici x] x` instead of `𝓝[Ioi x] x` ([#5472](https://github.com/leanprover-community/mathlib/pull/#5472))

In many parts of the library we prefer `𝓝[Ici x] x` to `𝓝[Ioi x]
x` (e.g., in assumptions line `continuous_within_at`). Fix MVT and
Gronwall's inequality to use it if possible.

Motivated by [#4945](https://github.com/leanprover-community/mathlib/pull/#4945)

### [2020-12-22T17:05:14+00:00](https://github.com/leanprover-community/mathlib/commit/fb99440ad004130e4a02a145b47970384907478b)
feat(data/complex/is_R_or_C): register some instances ([#5466](https://github.com/leanprover-community/mathlib/pull/#5466))

Register a couple of facts which were previously known for `ℝ` and `ℂ` individually, but not for the typeclass `[is_R_or_C K]`:
- such a field `K` is finite-dimensional as a vector space over `ℝ`
- finite-dimensional normed spaces over `K` are proper.

https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Instances.20for.20is_R_or_C



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-12-22T17:05:12+00:00](https://github.com/leanprover-community/mathlib/commit/7c2f16631978c8cd956490aaa68de0b9b81ee283)
chore(analysis/special_functions/trigonometric): review continuity of `tan` ([#5429](https://github.com/leanprover-community/mathlib/pull/#5429))

* prove that `tan` is discontinuous at `x` whenever `cos x = 0`;
* turn `continuous_at_tan` and `differentiable_at_tan` into `iff` lemmas;
* reformulate various lemmas in terms of `cos x = 0` instead of `∃ k, x = ...`;



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2020-12-22T17:05:09+00:00](https://github.com/leanprover-community/mathlib/commit/d569d6342aab21530c5a5604ec6ad9f122ccf338)
refactor(analysis/inner_product_space, geometry/euclidean) range of orthogonal projection ([#5408](https://github.com/leanprover-community/mathlib/pull/#5408))

Previously, the orthogonal projection was defined for all subspaces of an inner product space, with the junk value `id` if the space was not complete; then all nontrivial lemmas required a hypothesis of completeness (and nonemptiness for the affine orthogonal projection).  Change this to a definition only for subspaces `K` satisfying `[complete_space K]` (and `[nonempty K]` for the affine orthogonal projection).

Previously, the orthogonal projection was a linear map from `E` to `E`.  Redefine it to be a linear map from `E` to `K`.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Orthogonal.20projection)

### [2020-12-22T17:05:07+00:00](https://github.com/leanprover-community/mathlib/commit/0ff90682f5bbb7230025c9080277f46b2a5ce0ab)
feat(data/finset/basic, topology/separation): add induction_on_union, separate, and separate_finset_of_t2 ([#5332](https://github.com/leanprover-community/mathlib/pull/#5332))

prove lemma disjoint_finsets_opens_of_t2 showing that in a t2_space disjoint finsets have disjoint open neighbourhoods, using auxiliary lemma not_mem_finset_opens_of_t2.

### [2020-12-22T13:47:43+00:00](https://github.com/leanprover-community/mathlib/commit/02ab90cc7908e0d402278a1c07fed8c8ed5e01a8)
chore(*): split some long lines ([#5470](https://github.com/leanprover-community/mathlib/pull/#5470))

### [2020-12-22T07:50:26+00:00](https://github.com/leanprover-community/mathlib/commit/4ddae3dbe08acb00f2213f99a1a6e8abadcf8450)
feat(ring_theory/power_series): define power series for `exp`, `sin`, `cos`, and `1 / (u - x)`. ([#5432](https://github.com/leanprover-community/mathlib/pull/#5432))

This PR defines `power_series.exp` etc to be formal power series for the corresponding functions. Once we have a bridge to `is_analytic`, we should redefine `complex.exp` etc using these power series.

### [2020-12-22T03:10:44+00:00](https://github.com/leanprover-community/mathlib/commit/92dfdbcc2e01a00184f2802e1039127ffba3ed70)
chore(scripts): update nolints.txt ([#5469](https://github.com/leanprover-community/mathlib/pull/#5469))

I am happy to remove some nolints for you!

### [2020-12-22T03:10:42+00:00](https://github.com/leanprover-community/mathlib/commit/3c7394fe69e8fa2ac1df988b72a5fab81cd0559c)
fix(group_theory/*, algebra/group): [to_additive, simp] doesn't work ([#5468](https://github.com/leanprover-community/mathlib/pull/#5468))

As explained in `algebra/group/to_additive`, `@[to_additive, simp]` doesn't work (it doesn't attach a `simp` attribute to the additive lemma), but conversely `@[simps, to_additive]` is also wrong.

Along the way I also noticed that some `right_inv` (as in an inverse function) lemmas were being changed to `right_neg` by to_additive :D

### [2020-12-21T23:51:24+00:00](https://github.com/leanprover-community/mathlib/commit/9ec2778ff382739bcd7eeef6998008e80f4cf10d)
chore(data/{equiv,set}/basic): image_preimage ([#5465](https://github.com/leanprover-community/mathlib/pull/#5465))

* `equiv.symm_image_image`: add `@[simp]`;
* `equiv.image_preimage`, `equiv.preimage_image`: new `simp` lemmas;
* `set.image_preimage_eq`, `set.preimage_image_eq`: make `s : set _` an explicit argument;
* `function.injective.preimage_image`, `function.surjective.image_preimage`: new aliases for `set.preimage_image_eq`
  and `set.image_preimage_eq` with arguments reversed

Also golf a proof about `separated`.

### [2020-12-21T20:56:39+00:00](https://github.com/leanprover-community/mathlib/commit/d2ae43f6ad54e3a929448c10fbd2060d9d8bf346)
feat(data/list/basic): lemmas about nth of take and append ([#5449](https://github.com/leanprover-community/mathlib/pull/#5449))

### [2020-12-21T20:56:37+00:00](https://github.com/leanprover-community/mathlib/commit/3b9cbdfe0f7180a2a2f5c7116f3d74c8225a0416)
feat(data/ordmap): Ordered maps (like rb_map but better) ([#5353](https://github.com/leanprover-community/mathlib/pull/#5353))

This cleans up an old mathlib branch from 2 years ago, so it probably isn't in very modern style, but it would be best to get it merged and kept up to date rather than leaving it to rot.

It is an implementation of size balanced ordered maps based on Haskell's `Data.Map.Strict`. The `ordnode` structure can be used directly if one is only interested in using it for programming purposes, and the `ordset` structure bundles the proofs so that you can prove theorems about inserting and deleting doing what you expect.

### [2020-12-21T17:48:50+00:00](https://github.com/leanprover-community/mathlib/commit/bc3ad25a92f73c6cbdad6eb97a398e526214ad2c)
feat(linear_algebra/tensor_algebra): Add missing lemmas about subtraction ([#5428](https://github.com/leanprover-community/mathlib/pull/#5428))

### [2020-12-21T17:48:49+00:00](https://github.com/leanprover-community/mathlib/commit/34d5750f21bb33b79fc62044c0ed5c7c6196c58c)
feat(data/option/basic): lemmas on map of none and congr ([#5424](https://github.com/leanprover-community/mathlib/pull/#5424))

### [2020-12-21T16:45:47+00:00](https://github.com/leanprover-community/mathlib/commit/0ed425fa8d8884078f601cfb9656dd206c96d8d5)
feat(ring_theory/perfection): define characteristic predicate of perfection ([#5386](https://github.com/leanprover-community/mathlib/pull/#5386))

Name changes:
- `perfect_field` --> `perfect_ring` (generalization)
- `semiring.perfection` --> `ring.perfection`
- Original `ring.perfection` deleted.

### [2020-12-21T15:29:49+00:00](https://github.com/leanprover-community/mathlib/commit/96a2aa1daf29a69bc3961603344ed5b837ed4e5c)
feat(ring_theory/roots_of_unity): add minimal_polynomial_eq_pow ([#5444](https://github.com/leanprover-community/mathlib/pull/#5444))

This is the main result about minimal polynomial of primitive roots of unity: `μ` and `μ ^ p` have the same minimal polynomial.

The proof is a little long, but I don't see how I can split it: it is entirely by contradiction, so any lemma extracted from it would start with a false assumption and at the end it would be used only in this proof.


Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-12-21T14:00:44+00:00](https://github.com/leanprover-community/mathlib/commit/c5c02ec8e3a368fc493cb923cb28e31478754020)
feat(category_theory/yoneda): add iso_comp_punit ([#5448](https://github.com/leanprover-community/mathlib/pull/#5448))

A presheaf P : C^{op} -> Type v is isomorphic to the composition of P with the coyoneda functor Type v -> Type v associated to `punit`.

[This is useful for developing the theory of sheaves taking values in a general category]

### [2020-12-21T09:07:54+00:00](https://github.com/leanprover-community/mathlib/commit/c98d5bb0c6108f9b30299d5c42b82ebd8fe92916)
feat(category_theory/limits): yoneda preserves limits ([#5439](https://github.com/leanprover-community/mathlib/pull/#5439))

yoneda and coyoneda preserve limits

### [2020-12-21T07:48:53+00:00](https://github.com/leanprover-community/mathlib/commit/4778e1657bea5ef6cec01dad1627e1298ccecbfa)
chore(category_theory/sites/sheaf): rename sheaf to sheaf_of_types ([#5458](https://github.com/leanprover-community/mathlib/pull/#5458))

I wanted to add sheaves with values in general categories, so I moved sheaf.lean to sheaf_of_types.lean and then added a new file sheaf.lean. Github then produced an incomprehensible diff file because sheaf.lean had completely changed. Hence I propose first moving `sheaf.lean` to `sheaf_of_types.lean` and then adding a new `sheaf.lean` later. As well as moving the file, I also slightly change it.

### [2020-12-21T01:32:14+00:00](https://github.com/leanprover-community/mathlib/commit/ca2e536fdaa6b345eb1c2ee1deba008d4008bbdd)
chore(scripts): update nolints.txt ([#5459](https://github.com/leanprover-community/mathlib/pull/#5459))

I am happy to remove some nolints for you!

### [2020-12-20T11:33:02+00:00](https://github.com/leanprover-community/mathlib/commit/d79105ef77f241213e8acbf6a5ad948693a73fce)
feat(tactic/field_simp): let field_simp use norm_num to prove numerals are nonzero ([#5418](https://github.com/leanprover-community/mathlib/pull/#5418))

As suggested by @robertylewis in https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Solving.20simple.20%28in%29equalities.20gets.20frustrating/near/220278546, change the discharger in `field_simp` to try `assumption` on  goals `x ≠ 0` and `norm_num1` on these goals when `x` is a numeral.

### [2020-12-20T09:21:32+00:00](https://github.com/leanprover-community/mathlib/commit/5010738379fc7d002aa38293448e9e7c191dd688)
feat(topology/algebra/ordered): continuity of `abs` ([#5412](https://github.com/leanprover-community/mathlib/pull/#5412))

### [2020-12-20T01:39:55+00:00](https://github.com/leanprover-community/mathlib/commit/a9fb069baa9e7c6816995feb9e93657b94539e4e)
chore(scripts): update nolints.txt ([#5441](https://github.com/leanprover-community/mathlib/pull/#5441))

I am happy to remove some nolints for you!

### [2020-12-19T20:45:22+00:00](https://github.com/leanprover-community/mathlib/commit/1cb972752a4265927889aa71fabec08fe4cdc89f)
feat(field_theory/galois): Separable splitting field is Galois ([#5347](https://github.com/leanprover-community/mathlib/pull/#5347))

Proves that a splitting field of a separable polynomial is Galois by showing that it has lots of automorphisms.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2020-12-19T17:55:35+00:00](https://github.com/leanprover-community/mathlib/commit/e22fb94eb258298af7bf78f01d898fe4c358678d)
chore(data/nat/cast,algebra/ordered_group): 2 trivial lemmas ([#5436](https://github.com/leanprover-community/mathlib/pull/#5436))

### [2020-12-19T17:55:33+00:00](https://github.com/leanprover-community/mathlib/commit/5de67573851998e67a8f2f7fb99791d98ae64db4)
chore(algebra/ordered_group): deduplicate ([#5403](https://github.com/leanprover-community/mathlib/pull/#5403))

I deleted many `a_of_b` lemmas for which `a_iff_b` existed, then restored (most? all?) of them using `alias` command.

### [2020-12-19T17:55:30+00:00](https://github.com/leanprover-community/mathlib/commit/63e7fc96457786a4f9b91d393e3845c921cff597)
feat(topology/algebra/ordered): a linear ordered additive group with order topology is a topological group ([#5402](https://github.com/leanprover-community/mathlib/pull/#5402))

### [2020-12-19T17:55:28+00:00](https://github.com/leanprover-community/mathlib/commit/154a0242995951069042f712eec9938fa74e99ae)
feat(measure_theory/lp_space): add lemmas about the monotonicity of the Lp seminorm ([#5395](https://github.com/leanprover-community/mathlib/pull/#5395))

Also add a lemma mem_Lp.const_smul for a normed space.



Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2020-12-19T17:55:27+00:00](https://github.com/leanprover-community/mathlib/commit/ce385a0539aec5e064b952cfe627fae0b885a3ca)
feat(ring_theory/roots_of_unity): lemmas about minimal polynomial ([#5393](https://github.com/leanprover-community/mathlib/pull/#5393))

Three results about the minimal polynomial of `μ` and `μ ^ p`, where `μ` is a primitive root of unity. These are preparatory lemmas to prove that the two minimal polynomials are equal.

### [2020-12-19T16:17:17+00:00](https://github.com/leanprover-community/mathlib/commit/c55721d695bf959887da1143e994b44e65f5af3a)
chore(analysis/calculus/{fderiv,deriv}): `f x ≠ f a` for `x ≈ a`, `x ≠ a` if `∥z∥ ≤ C * ∥f' z∥` ([#5420](https://github.com/leanprover-community/mathlib/pull/#5420))

### [2020-12-19T14:59:26+00:00](https://github.com/leanprover-community/mathlib/commit/ff830d7eeb7f5bce8fe459dbe5fc0ef1d7213f43)
feat(ring_theory/witt_vector): redefine subtraction using witt_sub polynomial ([#5405](https://github.com/leanprover-community/mathlib/pull/#5405))

### [2020-12-19T11:05:52+00:00](https://github.com/leanprover-community/mathlib/commit/656b1bb55fce8c4c825cd35d63b0e104c439d903)
feat(category_theory): essential image of a functor ([#5352](https://github.com/leanprover-community/mathlib/pull/#5352))

Define essential image of a functor as a predicate and use it to re-express essential surjectivity.
Construct the essential image as a subcategory of the target and use it to factorise an arbitrary functor into a fully faithful functor and an essentially surjective functor.
Also shuffles the import hierarchy a little so that essential image can import full subcategories.

### [2020-12-19T08:21:41+00:00](https://github.com/leanprover-community/mathlib/commit/0bb665cc64bedc6e5c81a82afce42abb50b1f3ff)
chore(ring_theory/power_series): review, golf ([#5431](https://github.com/leanprover-community/mathlib/pull/#5431))

### [2020-12-19T02:24:58+00:00](https://github.com/leanprover-community/mathlib/commit/53354e7dcf7a75cfde3f5be5696d24321f1fd8cc)
chore(scripts): update nolints.txt ([#5433](https://github.com/leanprover-community/mathlib/pull/#5433))

I am happy to remove some nolints for you!

### [2020-12-19T02:24:56+00:00](https://github.com/leanprover-community/mathlib/commit/ec1b70eb743cb60950466e77058c7d8477a4f06c)
chore(linear_algebra/multilinear): Add map_update_zero ([#5417](https://github.com/leanprover-community/mathlib/pull/#5417))

`map_coord_zero` isn't in a form that can be used by simp, so this introduces a form which can.

### [2020-12-19T02:24:54+00:00](https://github.com/leanprover-community/mathlib/commit/5e057c948aa908e02dfd5122ddbfe3bc7f3116f8)
feat(data/fin): trans and id lemmas for fin.cast ([#5415](https://github.com/leanprover-community/mathlib/pull/#5415))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2020-12-18T23:34:58+00:00](https://github.com/leanprover-community/mathlib/commit/0e9a77cc53feab61a1f4c784f382908aad4b9821)
feat(data/nat/basic): succ_lt_succ_iff ([#5422](https://github.com/leanprover-community/mathlib/pull/#5422))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2020-12-18T20:57:15+00:00](https://github.com/leanprover-community/mathlib/commit/33483a3de6d91066e0fb9efd6aa4c0275d7ac44c)
chore(analysis/special_functions/trigonometric): golf a few more proofs ([#5423](https://github.com/leanprover-community/mathlib/pull/#5423))

### [2020-12-18T17:40:37+00:00](https://github.com/leanprover-community/mathlib/commit/0d140b15fde49322d798406cdfb4ee829a28fd75)
feat(data/set/basic): nonempty instances for subtypes ([#5409](https://github.com/leanprover-community/mathlib/pull/#5409))

In [#5408](https://github.com/leanprover-community/mathlib/pull/#5408), it is useful to be able to track the nonemptiness of a subset by typeclass inference.  These constructions allow one to do this.

### [2020-12-18T15:15:14+00:00](https://github.com/leanprover-community/mathlib/commit/775edc615ecec631d65b6180dbcc7bc26c3abc26)
feat(linear_algebra/tensor_product): Inherit smul through is_scalar_tower ([#5317](https://github.com/leanprover-community/mathlib/pull/#5317))

Most notably, this now means that the lemmas about `smul` and `tmul` can be used to prove `∀ z : Z, (z • a) ⊗ₜ[R] b = z • (a ⊗ₜ[R] b)`.

Hopefully these instances aren't dangerous - in particular, there's now a risk of a non-defeq-but-eq diamond for the `ℤ`- and `ℕ`-module structure.

However:
* this diamond already exists in other places anyway
* the diamond if it comes up can be solved with `subsingleton.elim`, since we have a proof that all Z-module and N-module structures must be equivalent.

### [2020-12-18T12:03:56+00:00](https://github.com/leanprover-community/mathlib/commit/74b583978d2e0dcd8f5f8b13dfcccb71f3ddc9de)
chore(topology/algebra/ordered): generalize `tendsto_at_top_add_left` etc ([#5398](https://github.com/leanprover-community/mathlib/pull/#5398))

* generalize some lemmas from `linear_ordered_ring` to
  `linear_ordered_add_comm_group`;
* rename them to allow dot notation; the new names are
  `filter.tendsto.add_at_*` and `filter.tendsto.at_*_add`, where `*` is
  `top` or `bot`;
* generalize `infi_unit` and `supr_unit` to
  `conditionally_complete_lattice`, add `[unique α]` versions;
* in a `subsingleton`, both `at_top` and `at_bot` are equal to `⊤`;
  these lemmas are useful for the `nontriviality` tactic.

### [2020-12-18T09:12:03+00:00](https://github.com/leanprover-community/mathlib/commit/c4f673cb926382ef726182bf66d69a6a727ed0cb)
chore(analysis/normed_space/basic): `continuous_at.norm` etc ([#5411](https://github.com/leanprover-community/mathlib/pull/#5411))

Add variants of the lemma that the norm is continuous.  Also rewrite a few proofs, and rename three lemmas:

* `lim_norm` -> `tendsto_norm_sub_self`
* `lim_norm_zero` -> `tendsto_norm_zero`
* `lim_norm_zero'` -> `tendsto_norm_zero'`



Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored-by: hrmacbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2020-12-18T01:44:51+00:00](https://github.com/leanprover-community/mathlib/commit/a4dd9e18370d5e1c1fbf4ff202028c11e2fb200a)
chore(scripts): update nolints.txt ([#5413](https://github.com/leanprover-community/mathlib/pull/#5413))

I am happy to remove some nolints for you!

### [2020-12-18T01:44:49+00:00](https://github.com/leanprover-community/mathlib/commit/b1218f8b6b075420c27f6bc91b3a04544705e749)
chore(analysis/special_functions/trigonometric): review, golf ([#5392](https://github.com/leanprover-community/mathlib/pull/#5392))

### [2020-12-17T16:32:00+00:00](https://github.com/leanprover-community/mathlib/commit/35f2789ce4f76259b9b50a125eb06c2b256bfc5d)
chore(algebra/module/basic): add `subsingleton (semimodule ℕ M)` ([#5396](https://github.com/leanprover-community/mathlib/pull/#5396))

This can be used to resolve diamonds between different `semimodule ℕ` instances.
The implementation is copied from the `subsingleton (module ℤ M)` instance.

### [2020-12-17T13:27:40+00:00](https://github.com/leanprover-community/mathlib/commit/6f1351f31934ad297618757949e123e95dd9fb67)
chore(algebra/{group,ring}): more on pushing/pulling groups/rings along morphisms ([#5406](https://github.com/leanprover-community/mathlib/pull/#5406))



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2020-12-17T13:27:39+00:00](https://github.com/leanprover-community/mathlib/commit/ff716d242562fa563483ef49566775e3c8697dd3)
chore(order/bounds): golf ([#5401](https://github.com/leanprover-community/mathlib/pull/#5401))

### [2020-12-17T13:27:36+00:00](https://github.com/leanprover-community/mathlib/commit/3685146a9f9723f8ee52ce16a705fe721148b7be)
chore(topology/algebra/ordered): deduplicate ([#5399](https://github.com/leanprover-community/mathlib/pull/#5399))

* Drop `mem_nhds_unbounded` in favor of
  `mem_nhds_iff_exists_Ioo_subset'`.
* Use `(h : ∃ l, l < a)` instead of `{l} (hl : l < a)` in
  `mem_nhds_iff_exists_Ioo_subset'`. This way we can `apply` the
  theorem without generating non-`Prop` goals and we can get the
  arguments directly from `no_bot` / `no_top`.
* add `nhds_basis_Ioo'` and `nhds_basis_Ioo`.

### [2020-12-17T13:27:34+00:00](https://github.com/leanprover-community/mathlib/commit/35a16a945dde2119dc01e0f75f73f4ff45cbef5c)
feat(algebra/module/basic): Add symmetric smul_comm_class instances for int and nat ([#5369](https://github.com/leanprover-community/mathlib/pull/#5369))

These can't be added globally for all types as they cause instance resolution loops, but are safe here as these definitions do not depend on an existing `smul_comm_class`.

Note that these instances already exist via `is_scalar_tower.to_smul_comm_class'` for algebras - this just makes sure the instances are still available in the presence of weaker typeclasses. There's no diamond concern here, as `smul_comm_class` is in `Prop`.

### [2020-12-17T10:49:30+00:00](https://github.com/leanprover-community/mathlib/commit/ee6969c304f12a705a69f8ababb4547ee5f70094)
chore(linear_algebra/{alternating,multilinear}): Add a handful of trivial lemmas ([#5380](https://github.com/leanprover-community/mathlib/pull/#5380))

Some of these are needed for a WIP PR, and some seem like generally nice things to have.

### [2020-12-17T08:03:51+00:00](https://github.com/leanprover-community/mathlib/commit/6a99e9e80eb28a0633d7194aa3f3237d634eb961)
chore(analysis/calculus/deriv): add `iff` versions of `differentiable_const_add` etc ([#5390](https://github.com/leanprover-community/mathlib/pull/#5390))

Also drop some unneeded `differentiable` assumptions in lemmas like `deriv_const_add`.

### [2020-12-17T01:31:27+00:00](https://github.com/leanprover-community/mathlib/commit/e8fc373a9684cad9e7a3ad6667cb9ed4d1db1bdc)
chore(scripts): update nolints.txt ([#5400](https://github.com/leanprover-community/mathlib/pull/#5400))

I am happy to remove some nolints for you!

### [2020-12-16T21:52:40+00:00](https://github.com/leanprover-community/mathlib/commit/01a77adca92bc89480bdcc66563e10b4d9fed85c)
chore(analysis/analytic/basic.lean): fix latex in doc ([#5397](https://github.com/leanprover-community/mathlib/pull/#5397))

Doc in the file `analytic/basic.lean` is broken, since I used a latex command `\choose` which doesn't exist. Replace it with `\binom`.

### [2020-12-16T21:52:38+00:00](https://github.com/leanprover-community/mathlib/commit/8fa10afc3fdad425a771ac067870bf3990898f35)
feat(ring_theory/algebra_tower): alg_hom_equiv_sigma ([#5345](https://github.com/leanprover-community/mathlib/pull/#5345))

Proves that algebra homomorphisms from the top of an is_scalar_tower are the same as a pair of algebra homomorphisms.

This is useful for counting algebra homomorphisms.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2020-12-16T18:35:22+00:00](https://github.com/leanprover-community/mathlib/commit/c5a2ff4cc91abe4b5c60ef03056a94208ce667ba)
chore(script/copy-mod-doc) Specify an encoding for files when opening ([#5394](https://github.com/leanprover-community/mathlib/pull/#5394))

This was necessary for the script to run locally on windows.

### [2020-12-16T18:35:20+00:00](https://github.com/leanprover-community/mathlib/commit/9282f6cd1077c8bd4a1bfa6fdf3e8453d2b1727c)
feat(finset): two simple lemmas ([#5387](https://github.com/leanprover-community/mathlib/pull/#5387))

also open function namespace




Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-12-16T15:31:36+00:00](https://github.com/leanprover-community/mathlib/commit/39ecd1abaabede897b2e5367efc2af8cdcadcc5b)
chore(group_theory/group_action/basic): Add a simp lemma about smul on quotient groups ([#5374](https://github.com/leanprover-community/mathlib/pull/#5374))

By pushing `mk` to the outside, this increases the chance they can cancel with an outer `lift`

### [2020-12-16T15:31:34+00:00](https://github.com/leanprover-community/mathlib/commit/1221ab6b7dcc392e83b8d1bfbd9620d4373a8569)
chore(*): add a `div`/`sub` field to (`add_`)`group`(`_with_zero`) ([#5303](https://github.com/leanprover-community/mathlib/pull/#5303))

This PR is intended to fix the following kind of diamonds:
Let `foo X` be a type with a `∀ X, has_div (foo X)` instance but no `∀ X, has_inv (foo X)`, e.g. when `foo X` is a `euclidean_domain`. Suppose we also have an instance `∀ X [cromulent X], group_with_zero (foo X)`. Then the `(/)` coming from `group_with_zero_has_div` cannot be defeq to the `(/)` coming from `foo.has_div`.

As a consequence of making the `has_div` instances defeq, we can no longer assume that `(div_eq_mul_inv a b : a / b = a * b⁻¹) = rfl` for all groups. The previous preparation PR [#5302](https://github.com/leanprover-community/mathlib/pull/#5302) should have changed all places in mathlib that assumed defeqness, to rewrite explicitly instead.



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2020-12-16T13:55:21+00:00](https://github.com/leanprover-community/mathlib/commit/461865b23259ca8a8f5b322ebfc6ecea854cd9b7)
refactor(data/real): move `real.sqrt` to `data.real.sqrt`, more dependencies ([#5359](https://github.com/leanprover-community/mathlib/pull/#5359))

* define `nnreal.sqrt`;
* use general theory to prove that the inverse exists, and is an `order_iso`;
* deduce continuity of `sqrt` from continuity of `order_iso`.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-12-16T13:55:19+00:00](https://github.com/leanprover-community/mathlib/commit/1b010684c4eb6c26ef5ba6e58cbe874fd048b3d9)
feat(ring_theory/witt_vector): Witt vectors are proj. limit of truncated Witt vectors ([#5163](https://github.com/leanprover-community/mathlib/pull/#5163))

Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-12-16T10:00:13+00:00](https://github.com/leanprover-community/mathlib/commit/6548be43c353eadb4df18d3f200034bb14374c07)
chore(data/quot): Add missing simp lemmas ([#5372](https://github.com/leanprover-community/mathlib/pull/#5372))

These are called `lift_on'_beta` for consistency with `lift_on_beta`; even though we also have `map_mk'` etc in the same file.

### [2020-12-16T07:31:15+00:00](https://github.com/leanprover-community/mathlib/commit/78940f462f30179d3119957487e23e7d0e6e7eac)
chore(*): use notation `ℝ≥0`  ([#5391](https://github.com/leanprover-community/mathlib/pull/#5391))

### [2020-12-16T07:31:13+00:00](https://github.com/leanprover-community/mathlib/commit/47b3c4b4b2ddccc399ad8d620bb44780e7e842a6)
feat(algebra/lie/basic): nilpotent and solvable Lie algebras ([#5382](https://github.com/leanprover-community/mathlib/pull/#5382))

### [2020-12-16T04:20:19+00:00](https://github.com/leanprover-community/mathlib/commit/79e9aeed20e852129a81dd34b4ff37f0feee502d)
feat(equiv/basic): add true_arrow_equiv ([#5388](https://github.com/leanprover-community/mathlib/pull/#5388))

### [2020-12-16T01:15:14+00:00](https://github.com/leanprover-community/mathlib/commit/26f8b288d7b8b08265e13e66b369a9fa54f88d07)
chore(scripts): update nolints.txt ([#5384](https://github.com/leanprover-community/mathlib/pull/#5384))

I am happy to remove some nolints for you!

### [2020-12-16T01:15:12+00:00](https://github.com/leanprover-community/mathlib/commit/e264e5f42afb58d819c0f3cebd41e983f0afcd9a)
feat(tactic/ext): `ext?` displays applied lemmas ([#5375](https://github.com/leanprover-community/mathlib/pull/#5375))

refactor using `state_t` instead of state passing style

### [2020-12-15T22:23:52+00:00](https://github.com/leanprover-community/mathlib/commit/2ee0f1ef920b932c50db705b43d22d366ad2f846)
feat(category_theory/isomorphism): is_iso versions ([#5355](https://github.com/leanprover-community/mathlib/pull/#5355))

add `is_iso` versions of some existing `iso` lemmas

### [2020-12-15T22:23:50+00:00](https://github.com/leanprover-community/mathlib/commit/dbb6b04325e8ad469c60095a0aa1592ee5ef452d)
feat(topology/separation): add lemma connected_component_eq_clopen_Inter ([#5335](https://github.com/leanprover-community/mathlib/pull/#5335))

Prove the lemma that in a t2 and compact space, the connected component of a point equals the intersection of all its clopen neighbourhoods. Will be useful for work on Profinite sets. The proof that a Profinite set is a limit of finite discrete spaces found at: https://stacks.math.columbia.edu/tag/08ZY uses this lemma. Also some proofs that the category Profinite is reflective in CompactHausdorff uses this lemma.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-12-15T21:09:34+00:00](https://github.com/leanprover-community/mathlib/commit/66eddd8b14322c43c05ec383e200f5c156e8a3d8)
chore(algebra/category/Module/monoidal): Speed up the elaboration ([#5383](https://github.com/leanprover-community/mathlib/pull/#5383))

This takes the elaboration time from ~5s to ~2.5s for associator_naturality, from ~90s to 5s for pentagon, and from ~14s to ~8s for `triangle`.

### [2020-12-15T21:09:32+00:00](https://github.com/leanprover-community/mathlib/commit/b7024088e0264d1a4fe447658bb3236886d99436)
feat(ring_theory/roots_of_unity): add squarefreeness mod p of minimal polynomial ([#5381](https://github.com/leanprover-community/mathlib/pull/#5381))

Two easy results about the reduction `mod p` of the minimal polynomial over `ℤ` of a primitive root of unity: it is separable and hence squarefree.

### [2020-12-15T17:57:30+00:00](https://github.com/leanprover-community/mathlib/commit/78e48c028ef46146a67d2f6a8b4c1bd4c5b8c18c)
ci(lint-copy-mod-doc.py): add reserved notation and set_option linters, enable small_alpha_vrachy_check linter ([#5330](https://github.com/leanprover-community/mathlib/pull/#5330))

[As requested on Zulip](https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/the.20word.20.22to.22/near/219370843), the reserved notation linter checks for `reserve` or `precedence` at the start of a non-comment, non-string literal line in any file other than `tactic.core`.

The new set_option linter disallows `set_option pp`, `set_option profiler` and `set_option trace` at the start of a non-comment, non-string literal line.

I also noticed that the `small_alpha_vrachy_check` linter added in [#4802](https://github.com/leanprover-community/mathlib/pull/#4802) wasn't actually called, so I added it to the main `lint` function.

### [2020-12-15T16:43:44+00:00](https://github.com/leanprover-community/mathlib/commit/c208a651ed758cfe8e5d26c857a97bb1ae91471f)
feat(analysis/mean_inequalities): add Minkowski's inequality for the Lebesgue integral of ennreal functions ([#5379](https://github.com/leanprover-community/mathlib/pull/#5379))

### [2020-12-15T13:31:21+00:00](https://github.com/leanprover-community/mathlib/commit/3a997b1d82ffb27b7627520270bdb912d0a2456d)
fix(group_theory/subgroup): Fix doubly-namespaced instance ([#5378](https://github.com/leanprover-community/mathlib/pull/#5378))

Not sure why the linter missed this.

### [2020-12-15T13:31:19+00:00](https://github.com/leanprover-community/mathlib/commit/75130b390655d80130c5de69a6460509737dd9d5)
feat(data/set/basic): nonempty set of nonempty subtype ([#5373](https://github.com/leanprover-community/mathlib/pull/#5373))

### [2020-12-15T13:31:17+00:00](https://github.com/leanprover-community/mathlib/commit/d21d17b1092cf495316e68cf285c0a561de5157e)
feat(ring_theory/roots_of_unity): minimal polynomial of primitive roots ([#5322](https://github.com/leanprover-community/mathlib/pull/#5322))

I've added some simple results about the minimal polynomial of a primitive root of unity. The next step will be to prove that any two primitive roots have the same minimal polynomial.

### [2020-12-15T10:30:21+00:00](https://github.com/leanprover-community/mathlib/commit/0f4ac1bfd95253b33edad896b0eca881f2fdb7b8)
feat(category_theory/limits): product comparison simp lemmas ([#5351](https://github.com/leanprover-community/mathlib/pull/#5351))

This adds two new simp lemmas to reduce the prod comparison morphism and uses them to golf some proofs

### [2020-12-15T10:30:19+00:00](https://github.com/leanprover-community/mathlib/commit/9ba9a983c94789606943ecacc87cc421e76b81ca)
chore(category_theory/sites): improve naming ([#5350](https://github.com/leanprover-community/mathlib/pull/#5350))

- Improve naming of some lemmas to be more descriptive
- Golf some proofs
- Add some convenience deconstructors which are useful in practice

### [2020-12-15T10:30:17+00:00](https://github.com/leanprover-community/mathlib/commit/dd72a981e5b32737895e62d173b829178d9a5cd3)
feat(group_theory/perm/basic): Bundle sigma_congr_right and sum_congr into monoid_homs ([#5301](https://github.com/leanprover-community/mathlib/pull/#5301))

This makes the corresponding subgroups available as `monoid_hom.range`.

As a result, the old subgroup definitions can be removed.

This also adds injectivity and cardinality lemmas.

### [2020-12-15T10:30:14+00:00](https://github.com/leanprover-community/mathlib/commit/8041945fd7f8174e6194d84a320d6b87ef04d50b)
feat(category_theory/monad): monadicity theorems ([#5137](https://github.com/leanprover-community/mathlib/pull/#5137))

This is a proof of the reflexive (or crude) monadicity theorem along with a complete proof of Beck's monadicity theorem.
Also renames the prefix for special monad coequalizers to `free_coequalizer` rather than `coequalizer`, to avoid name-clashes when both `monad` and `limits` are imported.

### [2020-12-15T10:30:11+00:00](https://github.com/leanprover-community/mathlib/commit/407d1386227aa9df240c73509bb85b9f1f75136a)
chore(category_theory/equivalence): weaken essential surjectivity ([#3821](https://github.com/leanprover-community/mathlib/pull/#3821))

Weaken essential surjectivity to be a Prop, rather than the data of the inverse.

### [2020-12-15T07:29:57+00:00](https://github.com/leanprover-community/mathlib/commit/a1aa5110df112333ed27dc56f278328386642ed1)
feat(simps): interaction between simps and to_additive ([#5331](https://github.com/leanprover-community/mathlib/pull/#5331))

If a definition is both marked `to_additive` and `simps` (in that order), `simps` will from also apply the `to_additive` attribute to its generated lemmas (which creates the additive counterparts of the simp-lemmas).
This also generalizes `set_attribute` to use the default parameter if possible.

This implements half of [#1639](https://github.com/leanprover-community/mathlib/pull/#1639).

### [2020-12-15T03:52:57+00:00](https://github.com/leanprover-community/mathlib/commit/a959718e33ebb02ff61ca19220d2d33e0baae314)
chore(algebra/quadratic_discriminant): golf proofs using limits ([#5339](https://github.com/leanprover-community/mathlib/pull/#5339))

### [2020-12-15T01:31:40+00:00](https://github.com/leanprover-community/mathlib/commit/ff13cdeb50679d299177986acd2d1447d435944e)
chore(scripts): update nolints.txt ([#5376](https://github.com/leanprover-community/mathlib/pull/#5376))

I am happy to remove some nolints for you!

### [2020-12-15T01:31:38+00:00](https://github.com/leanprover-community/mathlib/commit/cadaa44aead70b0e7abe59b5b5d6261b3c645a50)
feat(group_theory/subgroup): Add decidable_mem_range ([#5371](https://github.com/leanprover-community/mathlib/pull/#5371))

This means that `fintype (quotient_group.quotient f.range)` can be found by type-class resolution.

### [2020-12-15T01:31:36+00:00](https://github.com/leanprover-community/mathlib/commit/b2ab94f8f2e36d014d04150066a0a8d5c33083eb)
fix(group_theory): Remove a duplicate fintype instance on quotient_group.quotient ([#5368](https://github.com/leanprover-community/mathlib/pull/#5368))

This noncomputable instance was annoying, and can easy be recovered by passing in a classical decidable_pred instance instead.

### [2020-12-15T01:31:34+00:00](https://github.com/leanprover-community/mathlib/commit/b364d3370610bbf0d2c3961f271fc808a1cdfb57)
chore(topology/instances/ennreal): remove summability assumption in tendsto_sum_nat_add ([#5366](https://github.com/leanprover-community/mathlib/pull/#5366))

We have currently
```lean
lemma tendsto_sum_nat_add (f : ℕ → ℝ≥0) (hf : summable f) : tendsto (λ i, ∑' k, f (k + i)) at_top (𝓝 0)
```
However, the summability assumption is not necessary as otherwise all sums are zero, and the statement still holds. The PR removes the assumption.

### [2020-12-15T01:31:32+00:00](https://github.com/leanprover-community/mathlib/commit/4dbb3e23bd6bdbdfa2c6df8fb90627000f44c03f)
chore(data/finsupp/basic): more lemmas about `α →₀ ℕ` ([#5362](https://github.com/leanprover-community/mathlib/pull/#5362))

* define `canonically_ordered_add_monoid` instance;
* add a few simp lemmas;
* more lemmas about product over `finsupp.antidiagonal n`;
* define `finsupp.Iic_finset`, use it for `finite_le_nat`.

### [2020-12-15T01:31:30+00:00](https://github.com/leanprover-community/mathlib/commit/8de08f7239ee94c6b7c6d439b1e8a3447172df83)
chore(order/iterate): generalize lemmas about inequalities and iterations ([#5357](https://github.com/leanprover-community/mathlib/pull/#5357))

If `f : α → α` is a monotone function and `x y : ℕ → α` are two
sequences such that `x 0 ≤ y 0`, `x (n + 1) ≤ f (x n)`, and
`f (y n) ≤ y (n + 1)`, then `x n ≤ y n`. This lemma (and its versions
for `<`) generalize `geom_le` as well as `iterate_le_of_map_le`.

### [2020-12-14T23:07:26+00:00](https://github.com/leanprover-community/mathlib/commit/d1904fcefd91257829a4209966320cc64b9a71a9)
refactor(measure_theory/lp_space): move most of the proof of mem_Lp.add to a new lemma in analysis/mean_inequalities ([#5370](https://github.com/leanprover-community/mathlib/pull/#5370))

### [2020-12-14T23:07:24+00:00](https://github.com/leanprover-community/mathlib/commit/dc719a9d8546d3668a4c24c4b9131e960871283d)
feat(algebra/lie/basic): define ideal operations for Lie modules ([#5337](https://github.com/leanprover-community/mathlib/pull/#5337))



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-12-14T21:52:23+00:00](https://github.com/leanprover-community/mathlib/commit/a649c59ab8f0a44aa6ea39df5e1baebd4227f10e)
feat(field_theory/intermediate_field): lift2_alg_equiv ([#5344](https://github.com/leanprover-community/mathlib/pull/#5344))

Proves that lift2 is isomorphic as an algebra over the base field



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2020-12-14T19:54:21+00:00](https://github.com/leanprover-community/mathlib/commit/4415dc0edab637fcd98ed7133dc70ecfc1394199)
feat(algebra/algebra/basic): arrow_congr for alg_equiv ([#5346](https://github.com/leanprover-community/mathlib/pull/#5346))

This is a copy of equiv.arrow_congr



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2020-12-14T16:39:30+00:00](https://github.com/leanprover-community/mathlib/commit/07b5618a3382bd08837863f71b14a6afa90367b7)
chore(linear_algebra/{multilinear,alternating}): Generalize smul and neg instance ([#5364](https://github.com/leanprover-community/mathlib/pull/#5364))

This brings the generality in line with that of `linear_map`. Notably:

* `has_neg` now exists when only the codomain has negation
* `has_scalar` now exists for the weaker condition of `smul_comm_class` rather than `has_scalar_tower`

### [2020-12-14T16:39:28+00:00](https://github.com/leanprover-community/mathlib/commit/b1c56b1b26f2b85877c747fa59b63d21e3e2f862)
feat(field_theory.minimal_polynomial): add results for GCD domains ([#5336](https://github.com/leanprover-community/mathlib/pull/#5336))

I have added `gcd_domain_dvd`: for GCD domains, the minimal polynomial divides any primitive polynomial that has the integral
element as root.

For `gcd_domain_eq_field_fractions` and `gcd_domain_dvd` I have also added explicit versions for `ℤ`. Unfortunately, it seems impossible (to me at least) to apply the general lemmas and I had to redo the proofs, see [Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal.20polynomial.20over.20.E2.84.9A.20vs.20over.20.E2.84.A4) for more details. (The basic reason seems to be that it's hard to convince lean that `is_scalar_tower ℤ ℚ α` holds using the localization map).

### [2020-12-14T16:39:26+00:00](https://github.com/leanprover-community/mathlib/commit/f443792f73f892e2899fc466e67056ed35028bfb)
feat(topology/subset_properties): add instances for totally_disconnected_spaces ([#5334](https://github.com/leanprover-community/mathlib/pull/#5334))

Add the instances subtype.totally_disconnected_space and pi.totally_disconnected_space.

### [2020-12-14T16:39:24+00:00](https://github.com/leanprover-community/mathlib/commit/d36af184d154f2e99f60fec5cd71bb3e53899d5c)
feat(tactic/induction): add induction'/cases'/eliminate_hyp/eliminate_expr tactics ([#5027](https://github.com/leanprover-community/mathlib/pull/#5027))

This PR adds interactive tactics `induction'` and `cases'` as well as
non-interactive variants `eliminate_hyp` and `eliminate_expr`. The tactics are
similar to standard `induction` and `cases`, but they feature several
improvements:

- `induction'` performs 'dependent induction', which means it takes the indices
  of indexed inductive types fully into account. This is convenient, for example,
  for programming language or logic formalisations, which tend to rely heavily on
  indexed types.
- `induction'` by default generalises everything that can be generalised. This
  is to support beginners, who often struggle to identify that a proof requires
  a generalised induction hypothesis. In cases where this feature hinders more
  than it helps, it can easily be turned off.
- `induction'` and `cases'` generate much more human-friendly names than their
  standard counterparts. This is, again, mostly to support beginners. Experts
  should usually supply explicit names to make proof scripts more robust.
- `cases'` works for some rare goals which `cases` does not support, but should
  otherwise be mostly a drop-in replacement (except for the generated names).

### [2020-12-14T13:16:21+00:00](https://github.com/leanprover-community/mathlib/commit/a65de99481f4e83a6e6721c5847a9d133a760a03)
feat(data/equiv): Add `congr_arg`, `congr_fun`, and `ext_iff` lemmas to equivs ([#5367](https://github.com/leanprover-community/mathlib/pull/#5367))

These members already exist on the corresponding homs

### [2020-12-14T13:16:18+00:00](https://github.com/leanprover-community/mathlib/commit/dad88d8c135ad4f25aacf5476e24953f47c61c37)
feat(field_theory/splitting_field): add splits_X theorem ([#5343](https://github.com/leanprover-community/mathlib/pull/#5343))

This is a handy result and isn't definitionally a special case of splits_X_sub_C

### [2020-12-14T13:16:15+00:00](https://github.com/leanprover-community/mathlib/commit/cf7377ac8e7e93c0dfa0b014cecd591834620184)
chore(field_theory/adjoin): move dim/findim lemmas ([#5342](https://github.com/leanprover-community/mathlib/pull/#5342))

adjoin.lean has some dim/findim lemmas, some of which could be moved to intermediate_field.lean

### [2020-12-14T13:16:14+00:00](https://github.com/leanprover-community/mathlib/commit/0d7ddf1ffd2b69d702182ff024d86022d24698b9)
chore(order/filter/at_top_bot): add/rename lemmas about limits like `±∞*c` ([#5333](https://github.com/leanprover-community/mathlib/pull/#5333))

### New lemmas

* `filter.tendsto.nsmul_at_top` and `filter.tendsto.nsmul_at_bot`;
* `filter.tendsto_mul_self_at_top`;
* `filter.tendsto.at_top_mul_at_bot`, `filter.tendsto.at_bot_mul_at_top`,
  `filter.tendsto.at_bot_mul_at_bot`;
* `filter.tendsto.at_top_of_const_mul`, `filter.tendsto.at_top_of_mul_const`;
* `filter.tendsto.at_top_div_const`, `filter.tendsto.neg_const_mul_at_top`,
  `filter.tendsto.at_top_mul_neg_const`, `filter.tendsto.const_mul_at_bot`,
  `filter.tendsto.at_bot_mul_const`, `filer.tendsto.at_bot_div_const`,
  `filter.tendsto.neg_const_mul_at_bot`, `filter.tendsto.at_bot_mul_neg_const`.

### Renamed lemmas

* `tendsto_pow_at_top` → `filter.tendsto_pow_at_top`;
* `tendsto_at_top_mul_left` → `filter.tendsto.const_mul_at_top'`;
* `tendsto_at_top_mul_right` → `filter.tendsto.at_top_mul_const'`;
* `tendsto_at_top_mul_left'` → `filter.tendsto.const_mul_at_top`;
* `tendsto_at_top_mul_right'` → `filer.tendsto.at_top_mul_const`;
* `tendsto_mul_at_top` → `filter.tendsto.at_top_mul`;
* `tendsto_mul_at_bot` → `filter.tendsto.at_top_mul_neg`;
* `tendsto_at_top_mul_at_top` → `filter.tendsto.at_top_mul_at_top`.

### [2020-12-14T13:16:12+00:00](https://github.com/leanprover-community/mathlib/commit/1d37ff18e67c272debb225be9ee4fbe99b21a6ba)
feat(analysis/mean_inequalities): add weighted generalized mean inequality for ennreal ([#5316](https://github.com/leanprover-community/mathlib/pull/#5316))

### [2020-12-14T13:16:10+00:00](https://github.com/leanprover-community/mathlib/commit/cecab59d8eb8a96f74b4ae37d4030bce5f28a11a)
feat(group_theory/congruence): Add inv and neg ([#5304](https://github.com/leanprover-community/mathlib/pull/#5304))

### [2020-12-14T13:16:08+00:00](https://github.com/leanprover-community/mathlib/commit/6dc50004fdb7c26110cd426d93e165b8c94b7621)
feat(computability/language): define formal languages ([#5291](https://github.com/leanprover-community/mathlib/pull/#5291))

Lifted from [#5036](https://github.com/leanprover-community/mathlib/pull/#5036) in order to include in [#5038](https://github.com/leanprover-community/mathlib/pull/#5038) as well.



Co-authored-by: foxthomson <11833933+foxthomson@users.noreply.github.com>

### [2020-12-14T13:16:05+00:00](https://github.com/leanprover-community/mathlib/commit/67b5ff6f12d308977ad760ee638452a19dfa423d)
feat(algebra/direct_sum): constructor for morphisms into direct sums ([#5204](https://github.com/leanprover-community/mathlib/pull/#5204))

### [2020-12-14T11:45:59+00:00](https://github.com/leanprover-community/mathlib/commit/c722b967980e29ffbf6ef8db4ed200d22de75c9f)
feat (topology/instances/ennreal): summability from finite sum control ([#5363](https://github.com/leanprover-community/mathlib/pull/#5363))

### [2020-12-14T10:02:51+00:00](https://github.com/leanprover-community/mathlib/commit/91e5b8a75e70f87d844597f6249f8dab2a969c9e)
chore(analysis/normed_space/ordered): minor golfing ([#5356](https://github.com/leanprover-community/mathlib/pull/#5356))

### [2020-12-14T10:02:48+00:00](https://github.com/leanprover-community/mathlib/commit/2245cfb6fc4e8eb7d7fb26e9ff16b64a04846926)
feat(measurable_space): infix notation for measurable_equiv ([#5329](https://github.com/leanprover-community/mathlib/pull/#5329))

We use `≃ᵐ` as notation. Note: `≃ₘ` is already used for diffeomorphisms.

### [2020-12-14T08:35:30+00:00](https://github.com/leanprover-community/mathlib/commit/6f69741b555c0191208a3065a014fc6b5bdc98e7)
chore(analysis/calculus/*): rename `*.of_local_homeomorph` to `local_homeomorph.*_symm` ([#5358](https://github.com/leanprover-community/mathlib/pull/#5358))

Rename some lemmas, and make `(f : local_homeomorph _ _)` an explicit argument:

* `has_fderiv_at.of_local_homeomorph` → `local_homeomorph.has_fderiv_at_symm`;
* `times_cont_diff_at.of_local_homeomorph` → `local_homeomorph.times_cont_diff_at_symm`.

If we want to apply one of these lemmas to prove smoothness of, e.g., `arctan`, `log`, or `arcsin`, then the goal
has no `local_homeomorph.symm`, and we need to explicitly supply a `local_homeomorph` with an appropriate `inv_fun`.

Also add some lemmas that help to prove that the inverse function is **not** differentiable at a point.

### [2020-12-14T02:41:32+00:00](https://github.com/leanprover-community/mathlib/commit/714bc15f14e39e66619fc01a234c61c5de27c522)
feat(category_theory/adjunction): adjoint lifting theorems ([#5118](https://github.com/leanprover-community/mathlib/pull/#5118))

Proves the [adjoint lifting theorem](https://ncatlab.org/nlab/show/adjoint+lifting+theorem) and the [adjoint triangle theorem](https://ncatlab.org/nlab/show/adjoint+triangle+theorem).
The intent here is for all but the last four statements in the file to be implementation.

### [2020-12-14T01:26:51+00:00](https://github.com/leanprover-community/mathlib/commit/b7a9615adc9d2dc95afa6c8b4512318339735e99)
chore(scripts): update nolints.txt ([#5360](https://github.com/leanprover-community/mathlib/pull/#5360))

I am happy to remove some nolints for you!

### [2020-12-13T09:58:12+00:00](https://github.com/leanprover-community/mathlib/commit/88fb7cabb8d8861bc953c8c8752eae4eb100368e)
chore(analysis/calculus): move the definition of `formal_multilinear_series` to a new file ([#5348](https://github.com/leanprover-community/mathlib/pull/#5348))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-12-13T01:29:56+00:00](https://github.com/leanprover-community/mathlib/commit/36eec1a98f22df82eaccd354a758ef8576af2a7f)
chore(scripts): update nolints.txt ([#5341](https://github.com/leanprover-community/mathlib/pull/#5341))

I am happy to remove some nolints for you!

### [2020-12-12T23:59:14+00:00](https://github.com/leanprover-community/mathlib/commit/eb9164bda8f29af3b51807c8a2023e8017a8a4a9)
feat(category_theory/sites): naming and attributes ([#5340](https://github.com/leanprover-community/mathlib/pull/#5340))

Adds simps projections for sieve arrows and makes the names consistent (some used `mem_` and others used `_apply`, now they only use the latter).

### [2020-12-12T22:41:29+00:00](https://github.com/leanprover-community/mathlib/commit/68818b3afe069821e5a44531f7e1173f02355450)
feat(field_theory/galois): Is_galois iff is_galois top ([#5285](https://github.com/leanprover-community/mathlib/pull/#5285))

Proves that E/F is Galois iff top/F is Galois.



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2020-12-12T17:17:36+00:00](https://github.com/leanprover-community/mathlib/commit/5ced4ddeb243485fcf2ee67a6bb337071b1801a6)
feat(ring_theory/finiteness): add iff_quotient_mv_polynomial ([#5321](https://github.com/leanprover-community/mathlib/pull/#5321))

Add characterizations of finite type algebra as quotient of polynomials rings. There are three version of the same lemma, using a `finset`, a `fintype` and `fin n`.

### [2020-12-12T09:03:27+00:00](https://github.com/leanprover-community/mathlib/commit/3afdf41fbbe6eb77bce52ea733d1386184552aed)
chore(*): generalize some lemmas from `linear_ordered_semiring` to `ordered_semiring` ([#5327](https://github.com/leanprover-community/mathlib/pull/#5327))

API changes:

* Many lemmas now have weaker typeclass assumptions. Sometimes this means that `@myname _ _ _` needs one more `_`.
* Drop `eq_one_of_mul_self_left_cancel` etc in favor of the new `mul_eq_left_iff` etc.
* A few new lemmas that state `monotone` or `strict_mono_incr_on`.

### [2020-12-12T07:17:02+00:00](https://github.com/leanprover-community/mathlib/commit/dad5aabe1521d02ea0ffd87b0c61948f93f62121)
refactor(ring_theory/polynomial/homogeneous): redefine `mv_polynomial.homogeneous_component` ([#5294](https://github.com/leanprover-community/mathlib/pull/#5294))

* redefine `homogeneous_component` using `finsupp.restrict_dom`,
  “upgrade” it to a `linear_map`;

* add `coeff_homogeneous_component` and use it to golf some proofs.

### [2020-12-12T07:17:00+00:00](https://github.com/leanprover-community/mathlib/commit/9cc8835b78b9286bd50cce987f685234bc68103e)
feat(group_theory/perm/subgroup): Add some simple subgroups of permutations ([#5279](https://github.com/leanprover-community/mathlib/pull/#5279))

### [2020-12-12T07:16:58+00:00](https://github.com/leanprover-community/mathlib/commit/84f99388bec302209eaf0dc70bfd1358d2a0ff46)
feat(category_theory/sites): sheaves on types ([#5259](https://github.com/leanprover-community/mathlib/pull/#5259))

### [2020-12-12T07:16:56+00:00](https://github.com/leanprover-community/mathlib/commit/0344aeed039e0cf38a30a39a47fbae32cdf8ba2e)
feat(ring_theory/*): various lemmas about quotients, localizations, and polynomials ([#5249](https://github.com/leanprover-community/mathlib/pull/#5249))



Co-authored-by: Devon Tuma <dtumad@gmail.com>

### [2020-12-12T07:16:53+00:00](https://github.com/leanprover-community/mathlib/commit/d03238049b6b4282ffe7a56e0c7e28c1cadc4c22)
feat(field_theory/normal): normal_of_alg_equiv ([#5225](https://github.com/leanprover-community/mathlib/pull/#5225))

Proves that normal is preserved by an alg_equiv

### [2020-12-12T04:38:13+00:00](https://github.com/leanprover-community/mathlib/commit/f51fe7b632c191511fb606dfa9852478a58bf8cf)
chore(data/fin): Improve docstrings, rename `coe_sub_nat`, add `nat_add_zero` ([#5290](https://github.com/leanprover-community/mathlib/pull/#5290))

These are cherry-picked from the tuple PR, [#4406](https://github.com/leanprover-community/mathlib/pull/#4406).

`coe_sub_nat` was previously named `sub_nat_coe`, but this didn't match `coe_nat_add` and `coe_add_nat`.

### [2020-12-12T01:48:20+00:00](https://github.com/leanprover-community/mathlib/commit/2609428d2c730465767ad54d950f66e24b0304a2)
chore(scripts): update nolints.txt ([#5328](https://github.com/leanprover-community/mathlib/pull/#5328))

I am happy to remove some nolints for you!

### [2020-12-12T01:48:18+00:00](https://github.com/leanprover-community/mathlib/commit/b02c529a4d25502a574e8b6b01b006a35f42c873)
feat(category_theory/limits): strengthen simp lemma ([#5326](https://github.com/leanprover-community/mathlib/pull/#5326))

Makes a simp lemma slightly stronger

### [2020-12-12T01:48:17+00:00](https://github.com/leanprover-community/mathlib/commit/e7ca8016330c55706b644ec5e94dcfba0516b89a)
feat(data/list/chain): induction up the chain ([#5325](https://github.com/leanprover-community/mathlib/pull/#5325))

Slightly strengthen statements that were there before

### [2020-12-12T01:48:13+00:00](https://github.com/leanprover-community/mathlib/commit/f0c8a15deb491adab98198157ca2cd80344a29ec)
chore(algebra/ordered_ring): golf some proofs using `strict_mono_incr_on` ([#5323](https://github.com/leanprover-community/mathlib/pull/#5323))

### [2020-12-12T01:48:10+00:00](https://github.com/leanprover-community/mathlib/commit/01746f84fcf7c4a4b35ff4cfd41d504627f6e8fd)
feat(outer_measure): define bounded_by ([#5314](https://github.com/leanprover-community/mathlib/pull/#5314))

`bounded_by` wrapper around `of_function` that drops the condition that `m ∅ = 0`. 
Refactor `Inf_gen` to use `bounded_by`.
I am also planning to use `bounded_by` for finitary products of measures.

Also add some complete lattice lemmas

### [2020-12-12T01:48:08+00:00](https://github.com/leanprover-community/mathlib/commit/3782acf1fe29c3f503a4cfb6ecc0984d01ed83d9)
feat(topology/algebra/*): Criterion to ensure topological monoids and groups ([#5284](https://github.com/leanprover-community/mathlib/pull/#5284))

This is old stuff from the perfectoid project that was never PRed and is useful for the liquid tensor experiment.

### [2020-12-11T22:54:52+00:00](https://github.com/leanprover-community/mathlib/commit/846ee3f48cadf8a7def15e33c7859b6818209163)
feat(data/equiv): symm_symm_apply ([#5324](https://github.com/leanprover-community/mathlib/pull/#5324))

A little dsimp lemma that's often helpful

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-12-11T20:26:08+00:00](https://github.com/leanprover-community/mathlib/commit/63e1ad43af3b5cc5b93caf36d07a2ed75ddb7bb1)
chore(group_theory/perm/basic): Add missing lemmas ([#5320](https://github.com/leanprover-community/mathlib/pull/#5320))

These lemmas existed for left multiplication but not right multiplication

### [2020-12-11T20:26:06+00:00](https://github.com/leanprover-community/mathlib/commit/90aa66bf1f0d66d83deacb43f0a48d564be716cd)
chore(algebra/big_operators/basic): Rename hypotheses for clarity ([#5318](https://github.com/leanprover-community/mathlib/pull/#5318))

This makes them somewhat more consistent with `prod_bij`

### [2020-12-11T16:44:08+00:00](https://github.com/leanprover-community/mathlib/commit/3a88a9ea0d1e14e1fa2b67a39e62668a32d54bbd)
chore(data/subtype): Add coind_bijective and map_involutive ([#5319](https://github.com/leanprover-community/mathlib/pull/#5319))

### [2020-12-11T16:44:06+00:00](https://github.com/leanprover-community/mathlib/commit/029b2587d7ef6afee2fbcd616279dbb9a587899d)
chore(linear_algebra/tensor_product): Actually relax the requirements for add_comm_group ([#5315](https://github.com/leanprover-community/mathlib/pull/#5315))

A previous commit ([#5305](https://github.com/leanprover-community/mathlib/pull/#5305)) changed the definition to not need these, but forgot to actually change these.

### [2020-12-11T16:44:04+00:00](https://github.com/leanprover-community/mathlib/commit/db712d59f00d527e9d4e84afd7e141e833bff8ee)
chore(*): simp lemmas for `tendsto`, `Ixx`, and `coe` ([#5296](https://github.com/leanprover-community/mathlib/pull/#5296))

* For `(f : α → β) (l : filter β)`, simplify `tendsto (λ a : Ixx*, f x) at_top l`
  to `tendsto f _ l`, and similarly for `at_bot`.

* For `(f : α → Ixx*) (l : filter α)`, simplify
  `tendsto f l at_top` to `tendsto (λ x, (f x : β)) l _`, and
  similarly for `at_bot`.

Here `Ixx*` is one of the intervals `Ici a`, `Ioi a`, `Ioo a b` etc,
and `_` is a filter that depends on the choice of `Ixx` and
`at_top`/`at_bot`.

* Drop some “nontriviality” assumptions like `no_top_order` for lemmas
about `Ioi a`.

### [2020-12-11T13:45:51+00:00](https://github.com/leanprover-community/mathlib/commit/a372dfce1f660bf6590ff29a32f9aa2a141a81ad)
chore(*): don't assume `sub_eq_add_neg` and `div_eq_mul_inv` are defeq ([#5302](https://github.com/leanprover-community/mathlib/pull/#5302))

This PR prepares for a follow-up PR ([#5303](https://github.com/leanprover-community/mathlib/pull/#5303)) that adds `div` and `sub` fields to (`add_`)`group`(`_with_zero`). That follow-up PR is intended to fix the following kind of diamonds:
Let `foo X` be a type with a `∀ X, has_div (foo X)` instance but no `∀ X, has_inv (foo X)`, e.g. when `foo X` is a `euclidean_domain`. Suppose we also have an instance `∀ X [cromulent X], group_with_zero (foo X)`. Then the `(/)` coming from `group_with_zero_has_div` cannot be defeq to the `(/)` coming from `foo.has_div`.

As a consequence of making the `has_div` instances defeq, we can no longer assume that `(div_eq_mul_inv a b : a / b = a * b⁻¹) = rfl` for all groups. This preparation PR should have changed all places in mathlib that assumed defeqness, to rewrite explicitly instead.

Zulip thread: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60div.60.20as.20a.20field.20in.20.60group(_with_zero).60



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-12-11T12:35:50+00:00](https://github.com/leanprover-community/mathlib/commit/d2ae4e25daf610822c1c03616149bad1b75be4e7)
feat(ring_theory/witt_vector): truncated Witt vectors, definition and ring structure ([#5162](https://github.com/leanprover-community/mathlib/pull/#5162))

Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-12-11T10:57:57+00:00](https://github.com/leanprover-community/mathlib/commit/6288eedaf2aee19f6a42795d44fabba7614e9974)
feat(linear_algebra/alternating): Add alternatization of multilinear_map ([#5187](https://github.com/leanprover-community/mathlib/pull/#5187))

This adds:

* `def multilinear_map.alternatize`
* `lemma alternating_map.to_multilinear_map_alternize`

### [2020-12-11T01:46:47+00:00](https://github.com/leanprover-community/mathlib/commit/dbdba55504459f815deed7b950b8bdb3d6482dba)
chore(scripts): update nolints.txt ([#5313](https://github.com/leanprover-community/mathlib/pull/#5313))

I am happy to remove some nolints for you!

### [2020-12-11T01:46:45+00:00](https://github.com/leanprover-community/mathlib/commit/8817c3ea725c1cc87251cae3eb2639ac9b86574a)
chore(linear_algebra/tensor_product): Relax the ring requirement to semiring for the group instance ([#5305](https://github.com/leanprover-community/mathlib/pull/#5305))

### [2020-12-11T01:46:44+00:00](https://github.com/leanprover-community/mathlib/commit/9e550f2d29fa3fcc5300c0d7cd1255ecd1a4e54a)
feat(topology/separation): finite t1 spaces are discrete ([#5298](https://github.com/leanprover-community/mathlib/pull/#5298))

These lemmas should simplify the arguments of [#4301](https://github.com/leanprover-community/mathlib/pull/#4301)

Zulip discussion: https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/discrete_topology/near/218932564 
<!--
put comments you want to keep out of the PR commit here.
If this PR depends on other PRs, please list them below this comment,
using the following format:
- [ ] depends on: #abc [optional extra text]
- [ ] depends on: #xyz [optional extra text]
-->


Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-12-11T01:46:41+00:00](https://github.com/leanprover-community/mathlib/commit/2c0b43d9eac5bb95139895692aa1210b7f393289)
feat(combinatorics/simple_graph/degree_sum): degree-sum formula and handshake lemma ([#5263](https://github.com/leanprover-community/mathlib/pull/#5263))

Adds the theorem that the sum of the degrees of the vertices of a simple graph is twice the number of edges.  Also adds corollaries like the handshake lemma, which is that the number of odd-degree vertices is even.

The corollary `exists_ne_odd_degree_if_exists_odd` is in anticipation of Sperner's lemma.

Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>
Co-authored-by: Kyle Miller <kmill31415@gmail.com>

### [2020-12-10T23:19:05+00:00](https://github.com/leanprover-community/mathlib/commit/918d5a954c9412d55ff57f56cce6ea4b6da61489)
chore(data/finsupp/basic): redefine `finsupp.filter` ([#5310](https://github.com/leanprover-community/mathlib/pull/#5310))

Also use lemmas about `indicator_function` and `function.update` to
golf some proofs about `finsupp.single`.

### [2020-12-10T23:19:03+00:00](https://github.com/leanprover-community/mathlib/commit/c29587367d58c999bfb2b7fdfeab545e79afdd1c)
feat(algebra/module/basic): {nat,int}_smul_apply ([#5308](https://github.com/leanprover-community/mathlib/pull/#5308))

### [2020-12-10T21:44:19+00:00](https://github.com/leanprover-community/mathlib/commit/c9793b5273140df2d0d0c35f16e63d640ba87193)
chore(data/mv_polynomial): delete stray comments ([#5312](https://github.com/leanprover-community/mathlib/pull/#5312))

### [2020-12-10T21:44:16+00:00](https://github.com/leanprover-community/mathlib/commit/f72734a332af0ca1afcd57303571092adc050dff)
chore(data/complex/exponential): add `inv_one_add_tan_sq` etc ([#5299](https://github.com/leanprover-community/mathlib/pull/#5299))

* mark `cos_sq_add_sin_sq` and `sin_sq_add_cos_sq` as `@[simp]`;
* add lemmas representing `sin x` and `cos x` as functions of `tan x`.

### [2020-12-10T21:44:14+00:00](https://github.com/leanprover-community/mathlib/commit/32b2e3059dc645d3bfbc97120e20bfa85604b874)
feat(category_theory/monad): special coequalizers for a monad ([#5239](https://github.com/leanprover-community/mathlib/pull/#5239))

Two important coequalizer diagrams related to a monad

### [2020-12-10T18:39:41+00:00](https://github.com/leanprover-community/mathlib/commit/4e8486b807bec6f7e6f9d353e71ffaae630e8a9e)
feat(algebra/group/hom): add_monoid_hom.sub_apply ([#5307](https://github.com/leanprover-community/mathlib/pull/#5307))

### [2020-12-10T18:39:39+00:00](https://github.com/leanprover-community/mathlib/commit/be6c37ce06d0cc9059828a357e0bec9081b1396a)
feat(algebra/big_operators/finsupp): rename variables, and move to top of file ([#5306](https://github.com/leanprover-community/mathlib/pull/#5306))

### [2020-12-10T17:02:36+00:00](https://github.com/leanprover-community/mathlib/commit/f3c9d204ca7b02f44eec99dcb9d26a753c337c25)
chore(linear_algebra/determinant): Golf a proof ([#5309](https://github.com/leanprover-community/mathlib/pull/#5309))

### [2020-12-10T17:02:33+00:00](https://github.com/leanprover-community/mathlib/commit/cdb13984c07c6c90483670c9ef83eebde02e96f6)
feat(category_theory/limits): any functor preserves split coequalizers ([#5246](https://github.com/leanprover-community/mathlib/pull/#5246))

Once [#5230](https://github.com/leanprover-community/mathlib/pull/#5230) merges, the only diff in this PR should be in `src/category_theory/limits/preserves/shapes/equalizers.lean`

### [2020-12-10T13:59:01+00:00](https://github.com/leanprover-community/mathlib/commit/12d097e310081f545c954a5ff0feb64a961b8fc8)
feat(category_theory/sites/sieves): change presieve operation defs ([#5295](https://github.com/leanprover-community/mathlib/pull/#5295))

change the definitions of operations on presieves to avoid `eq_to_hom` and use inductive types instead, which makes proofs a lot nicer

### [2020-12-10T13:58:58+00:00](https://github.com/leanprover-community/mathlib/commit/3f42fb48924cdbe9027d488f7d3fdf991e52b914)
feat(group_theory/perm/sign): Add sign_sum_congr ([#5266](https://github.com/leanprover-community/mathlib/pull/#5266))

### [2020-12-10T13:58:56+00:00](https://github.com/leanprover-community/mathlib/commit/90755c36b657fd680a457fbee69dbe643f0f820c)
refactor(order/filter/ultrafilter): drop `filter.is_ultrafilter` ([#5264](https://github.com/leanprover-community/mathlib/pull/#5264))

Use bundled `ultrafilter`s instead.

### [2020-12-10T13:58:54+00:00](https://github.com/leanprover-community/mathlib/commit/2bf0c2e71518f76747cacb6809af021d4938ae2b)
feat(group_theory/group_action/sub_mul_action): add a has_zero instance ([#5216](https://github.com/leanprover-community/mathlib/pull/#5216))

### [2020-12-10T10:51:03+00:00](https://github.com/leanprover-community/mathlib/commit/702b1e8c778d6b18444cc57858c636c8ae2ad700)
refactor(data/finsupp/basic): merge `finsupp.of_multiset` and `multiset.to_finsupp` ([#5237](https://github.com/leanprover-community/mathlib/pull/#5237))

* redefine `finsupp.to_multiset` as an `add_equiv`;
* drop `finsupp.equiv_multiset` and `finsupp.of_multiset`;
* define `multiset.to_finsupp` as `finsupp.to_multiset.symm`.

### [2020-12-10T08:44:55+00:00](https://github.com/leanprover-community/mathlib/commit/ac669c7498d21b16b988ae04c33c1cf723995b9e)
chore(category_theory/limits/preserves): cleanup ([#4163](https://github.com/leanprover-community/mathlib/pull/#4163))

(edited to update).

This PR entirely re-does the construction of limits from products and equalizers in a shorter way. With the new preserves limits machinery this new construction also shows that a functor which preserves products and equalizers preserves all limits, which previously was *really* annoying to do

### [2020-12-10T07:39:19+00:00](https://github.com/leanprover-community/mathlib/commit/e68d2d7863c34e321ac710be5545e83780baae6a)
feat(category_theory/sites): category of sheaves ([#5255](https://github.com/leanprover-community/mathlib/pull/#5255))

Category of sheaves on a grothendieck topology

(cc: @kckennylau)

### [2020-12-10T01:25:50+00:00](https://github.com/leanprover-community/mathlib/commit/ba568a615628735b1fe9dc2334d500bc6b5cd605)
chore(scripts): update nolints.txt ([#5297](https://github.com/leanprover-community/mathlib/pull/#5297))

I am happy to remove some nolints for you!

### [2020-12-09T19:09:52+00:00](https://github.com/leanprover-community/mathlib/commit/84c0132edb164db0685ce05e5f12fafc97f8d468)
chore(data/indicator_function): a few more `simp` lemmas ([#5293](https://github.com/leanprover-community/mathlib/pull/#5293))

* drop `indicator_of_support_subset` in favor of the new `indicator_eq_self`;

* add a few more lemmas: `indicator_apply_eq_self`,
 `indicator_apply_eq_zero`, `indicator_eq_zero`, `indicator_eq_zero'`

### [2020-12-09T17:36:09+00:00](https://github.com/leanprover-community/mathlib/commit/bf25d26fd1b61db0dca3281a6fd3e5cf369c1713)
chore(data/set/intervals/proj_Icc): add `strict_mono_incr_on` ([#5292](https://github.com/leanprover-community/mathlib/pull/#5292))

* rename `set.Icc_extend_monotone` to `monotone.Icc_extend`;
* add `set.strict_mono_incr_on_proj_Icc` and `strict_mono.strict_mono_incr_on_Icc_extend`.

### [2020-12-09T17:36:06+00:00](https://github.com/leanprover-community/mathlib/commit/efe18d5d8b0cf36d27634dd6b78820e88adfaee0)
feat(measure_theory/interval_integral): continuous implies interval_integrable ([#5288](https://github.com/leanprover-community/mathlib/pull/#5288))

### [2020-12-09T17:36:04+00:00](https://github.com/leanprover-community/mathlib/commit/e357a338132043fb13e55d32ce9bb8c8e6e53255)
chore(linear_algebra/multilinear): Add `linear_map.comp_multilinear_map_dom_dom_congr` ([#5270](https://github.com/leanprover-community/mathlib/pull/#5270))

### [2020-12-09T17:36:02+00:00](https://github.com/leanprover-community/mathlib/commit/698d6b7643caed69d829e49678810882207cf646)
ci(.github/workflows/dependent-issues.yml): automation for "blocked-by-other-PR" label ([#5261](https://github.com/leanprover-community/mathlib/pull/#5261))

When a PR or issue is updated, the [dependent-issues](https://github.com/z0al/dependent-issues) action will do the following on all PRs which are marked as dependent on it (with the text `- [ ] depends on: #blah` that we're already using):
- add / remove the "blocked-by-other-PR" label
- post / edit a comment with the current status of its dependencies (this is slightly redundant, given that we have another action which checks off the dependent PRs in the PR comments, but the extra notifications might be useful).
- it also adds a new status check which is pending (yellow) until all dependencies are closed.

### [2020-12-09T16:13:00+00:00](https://github.com/leanprover-community/mathlib/commit/a87f62bc3a1ec0342fbb8141e6de59272bd4ce4f)
feat(category_theory/limits/preserves): preserving binary products ([#5061](https://github.com/leanprover-community/mathlib/pull/#5061))

This moves and re-does my old file about preserving binary products to match the new API and framework for preservation of special shapes, and also cleans up some existing API. 
(I can split this up if necessary but they're all pretty minor changes, so hope this is okay!)

### [2020-12-09T09:24:04+00:00](https://github.com/leanprover-community/mathlib/commit/d12a7319934516253eb85a7f90cc47fc20621cdb)
chore(data/mv_polynomial): mark `mv_polynomial.ext` as `@[ext]` ([#5289](https://github.com/leanprover-community/mathlib/pull/#5289))

### [2020-12-09T04:36:44+00:00](https://github.com/leanprover-community/mathlib/commit/1f309c52c472a6cd37e41c580a470033e63d4720)
feat(analysis/special_functions): `real.log` is infinitely smooth away from zero ([#5116](https://github.com/leanprover-community/mathlib/pull/#5116))

Also redefine it using `order_iso.to_homeomorph` and prove more lemmas about limits of `exp`/`log`.

### [2020-12-09T01:42:58+00:00](https://github.com/leanprover-community/mathlib/commit/2032f7ba0fa7104aacf294ca6a4199dfd92296a9)
chore(scripts): update nolints.txt ([#5287](https://github.com/leanprover-community/mathlib/pull/#5287))

I am happy to remove some nolints for you!

### [2020-12-09T01:42:56+00:00](https://github.com/leanprover-community/mathlib/commit/7ae11651fbe484a95acbef8f172a1e1a68f50cf7)
chore(data/pi): Express `single` in terms of `function.update` ([#5283](https://github.com/leanprover-community/mathlib/pull/#5283))

These were originally introduced in [#3513](https://github.com/leanprover-community/mathlib/pull/#3513).
Perhaps `function.update` wasn't as well developed back then.

### [2020-12-08T22:41:41+00:00](https://github.com/leanprover-community/mathlib/commit/1e3447b8cf0cedb66a48a21f7fa43ca5030384ce)
chore(data/equiv/mul_add): Split out the group structure on automorphisms ([#5281](https://github.com/leanprover-community/mathlib/pull/#5281))

This prevents `group_theory.perm.basic` being imported into lots of files that don't care about permutations.

The argument here is that `add_aut` is to `add_equiv` as `perm` is to `equiv`: `perm` gets its group structure in a separate file to where `equiv` is defined, so `add_aut`, `mul_aut`, and `ring_aut` should too.

This adds back imports of `group_theory.perm.basic` to downstream files that inherited them through `data.equiv.mul_add`.

### [2020-12-08T18:18:54+00:00](https://github.com/leanprover-community/mathlib/commit/4c9499fc33291dd696853cebc8884d4b60be7971)
chore(algebra/group/pi): Split into multiple files ([#5280](https://github.com/leanprover-community/mathlib/pull/#5280))

This allows files that appear before `ordered_group` to still use `pi.monoid` etc.

### [2020-12-08T16:34:05+00:00](https://github.com/leanprover-community/mathlib/commit/b5ab2f773d8e6f3779285a093b783a8c4be48301)
feat(topology/algebra/ordered): add lemmas about `map coe at_top/at_bot` ([#5238](https://github.com/leanprover-community/mathlib/pull/#5238))

### [2020-12-08T15:28:08+00:00](https://github.com/leanprover-community/mathlib/commit/7f5a5ddd0d5d813b8e0d8e0836c9fe1fc8b58b9c)
feat(category_theory/limits): split coequalizers ([#5230](https://github.com/leanprover-community/mathlib/pull/#5230))

Define what it means for a triple of morphisms `f g : X ⟶ Y`, `π : Y ⟶ Z` to be a split coequalizer, and show that every split coequalizer is a coequalizer and absolute.

Define split pairs and `G`-split pairs.
These definitions and constructions are useful in particular for the monadicity theorems.

### [2020-12-08T13:47:48+00:00](https://github.com/leanprover-community/mathlib/commit/64ddb126bb5245f464a9189d54a79e5636040fe3)
feat(analysis/mean_inequalities): add Hölder's inequality for the Lebesgue integral of ennreal and nnreal functions ([#5267](https://github.com/leanprover-community/mathlib/pull/#5267))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-12-08T10:43:05+00:00](https://github.com/leanprover-community/mathlib/commit/3996bd428d1758fa6f790a2453bd679e10ad1897)
chore(logic/basic): add a few `simp` lemmas ([#5278](https://github.com/leanprover-community/mathlib/pull/#5278))

Also add `fintype.prod_eq_single`.

### [2020-12-08T10:43:02+00:00](https://github.com/leanprover-community/mathlib/commit/d3bbaeb98593017e882bd5ee5f7b1f14fa755542)
chore(combinatorics/composition): use `order_embedding` ([#5276](https://github.com/leanprover-community/mathlib/pull/#5276))

* use `order_embedding` for `composition.boundary`
* use `order_embedding` for `composition.embedding`
* add `max_eq_right_iff` etc
* golf some proofs

### [2020-12-08T10:43:00+00:00](https://github.com/leanprover-community/mathlib/commit/51f5ca3efbca6cc86530cd6eb950bb31b771e16b)
chore(group_theory/perm): Add alternate formulation of (sum|sigma)_congr lemmas ([#5260](https://github.com/leanprover-community/mathlib/pull/#5260))

These lemmas existed already for `equiv`, but not for `perm` or for `perm` via group structures.

### [2020-12-08T07:36:20+00:00](https://github.com/leanprover-community/mathlib/commit/ac6fc38e84b3fb7bc2ff723cb926f88e0097a875)
chore(*): move/add lemmas about `disjoint` ([#5277](https://github.com/leanprover-community/mathlib/pull/#5277))

* `set.disjoint_compl_left` and `set.disjoint_compl_right`:
  - generalize to any `boolean_algebra`,
  - move to `order/boolean_algebra`,
  - drop `set.` prefix,
  - make the argument implicit to follow the style of other lemmas in `order/boolean_algebra`
* add `set.disjoint_empty` and `set.empty_disjoint`
* add `disjoint_top` and `top_disjoint`, use in `set.disjoint_univ`and `set.univ_disjoint`.

### [2020-12-08T07:36:17+00:00](https://github.com/leanprover-community/mathlib/commit/ef377a9235d780f1e37e71d6cd479cdc8e04bafa)
chore(data/list/sort): docs, add a few lemmas ([#5274](https://github.com/leanprover-community/mathlib/pull/#5274))

 * Add a module docstring and section headers.

* Rename `list.eq_of_sorted_of_perm` to `list.eq_of_perm_of_sorted`;
  the new name reflects the order of arguments.

* Add a few lemmas.

### [2020-12-08T07:36:15+00:00](https://github.com/leanprover-community/mathlib/commit/aec64b17de8916adc131956db52afbbcd512dd27)
feat(category_theory/monad): generalise algebra colimits ([#5234](https://github.com/leanprover-community/mathlib/pull/#5234))

Assumption generalisations and universe generalisations

### [2020-12-08T07:36:13+00:00](https://github.com/leanprover-community/mathlib/commit/73601789670e89359a58b94be94a8b7e9db1878a)
feat(category_theory/closed/types): presheaf category is cartesian closed ([#4897](https://github.com/leanprover-community/mathlib/pull/#4897))

### [2020-12-08T05:05:55+00:00](https://github.com/leanprover-community/mathlib/commit/8f42d73de22e1cde9a40fa5ffefc569e6131becb)
chore(data/list/pairwise): add `list.pairwise_pmap` and `list.pairwise.pmap` ([#5273](https://github.com/leanprover-community/mathlib/pull/#5273))

Also add `list.pairwise.tail` and use it in the proof of `list.sorted.tail`.

### [2020-12-08T03:20:13+00:00](https://github.com/leanprover-community/mathlib/commit/3f4829cd433647988ab6d1f068742b5d9f54f9fd)
chore(data/support): zero function has empty support ([#5275](https://github.com/leanprover-community/mathlib/pull/#5275))

### [2020-12-08T01:21:19+00:00](https://github.com/leanprover-community/mathlib/commit/35f08626808b2e7e58cf9c025ba6fc7307fdbd1c)
chore(scripts): update nolints.txt ([#5272](https://github.com/leanprover-community/mathlib/pull/#5272))

I am happy to remove some nolints for you!

### [2020-12-07T20:04:10+00:00](https://github.com/leanprover-community/mathlib/commit/b173925a8fad3b4a7509438bf893654d42e3948e)
refactor(data/fin): use `order_embedding` for many maps ([#5251](https://github.com/leanprover-community/mathlib/pull/#5251))

Also swap `data.fin` with `order.rel_iso` in the import tree.

### [2020-12-07T20:04:08+00:00](https://github.com/leanprover-community/mathlib/commit/b9689bdc44c91ca728277df99388819a643ad478)
feat(topology/algebra/infinite_sum): add lemmas about continuous linear maps ([#5243](https://github.com/leanprover-community/mathlib/pull/#5243))



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2020-12-07T17:05:50+00:00](https://github.com/leanprover-community/mathlib/commit/f73013743563baee8409e6ef9798f2f362fb1b53)
chore(logic/basic): add `and.congr_left_iff` and `@[simp]` attrs ([#5268](https://github.com/leanprover-community/mathlib/pull/#5268))

### [2020-12-07T10:37:13+00:00](https://github.com/leanprover-community/mathlib/commit/44400c995cc2d05af149832c694ef7bd097ec636)
feat(dynamics/circle/rotation_number): translation numbers define a group action up to a semiconjugacy ([#5138](https://github.com/leanprover-community/mathlib/pull/#5138))

Formalize a theorem by Étienne Ghys: given two lifts `f₁`, `f₂` of
actions of a group `G` on the circle by orientation preserving
homeomorphisms to the real line, assume that for each `g : G` the
translation numbers of `f₁ g` and `f₂ g` are equal. Then the actions
are semiconjugate by a (possibly discontinuous) circle map.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-12-07T08:45:14+00:00](https://github.com/leanprover-community/mathlib/commit/f0ceb6bb4c296049d8430720d88f1898add89311)
feat(analysis/mean_inequalities): add young_inequality for nnreal and ennreal with real exponents ([#5242](https://github.com/leanprover-community/mathlib/pull/#5242))

The existing young_inequality for nnreal has nnreal exponents. This adds a version with real exponents with the is_conjugate_exponent property, and a similar version for ennreal with real exponents.



Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2020-12-07T06:49:09+00:00](https://github.com/leanprover-community/mathlib/commit/914d2b13efdee0d06540bb750104f14ec0db27a4)
chore(topology/category/Profinite): Fix docstring ([#5265](https://github.com/leanprover-community/mathlib/pull/#5265))

### [2020-12-07T03:33:52+00:00](https://github.com/leanprover-community/mathlib/commit/b2427d53da2cdd89af35610f09c49fcd73c8db52)
feat(order/filter/ultrafilter): Restriction of ultrafilters along large embeddings ([#5195](https://github.com/leanprover-community/mathlib/pull/#5195))

This PR adds the fact that the `comap` of an ultrafilter along a "large" embedding (meaning the image is large w.r.t. the ultrafilter) is again an ultrafilter.



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-12-07T01:24:27+00:00](https://github.com/leanprover-community/mathlib/commit/67eb675c16f43306950e7dfc2e12b3c50723eb2b)
chore(scripts): update nolints.txt ([#5262](https://github.com/leanprover-community/mathlib/pull/#5262))

I am happy to remove some nolints for you!

### [2020-12-06T20:08:34+00:00](https://github.com/leanprover-community/mathlib/commit/8d54d527825dd8cd92e2ede52c8e368050504f8f)
chore(topology/algebra/ordered): generalize `intermediate_value_Icc` etc ([#5235](https://github.com/leanprover-community/mathlib/pull/#5235))

Several lemmas assumed that the codomain is a conditionally complete
linear order while actually the statements are true for a linear
order. Also introduce `mem_range_of_exists_le_of_exists_ge` and use it
in `surjective_of_continuous`.

### [2020-12-06T20:08:32+00:00](https://github.com/leanprover-community/mathlib/commit/9cb27c940a3e6f6581b49fed28c56af2a0881d0d)
chore(ring_theory/algebra_tower): generalize `is_scalar_tower.right` ([#5224](https://github.com/leanprover-community/mathlib/pull/#5224))

The old instance for `[is_scalar_tower R S S]` assumed
[comm_semiring S]` instead of `[semiring S]`.

### [2020-12-06T20:08:30+00:00](https://github.com/leanprover-community/mathlib/commit/128b316c696269e3759fa61320aeacd24797782d)
feat(number_theory/primes_congruent_one): infinitely many primes congruent to 1 ([#5217](https://github.com/leanprover-community/mathlib/pull/#5217))

I prove that, for any positive `k : ℕ`, there are infinitely many primes `p` such that `p ≡ 1 [MOD k]`.

 I am not sure that `p ≡ 1 [MOD k]` is the recommended way of stating this in mathlib (instead of using `nat.cast_ring_hom `), I can change it if needed. Also, I don't know if it is appropriate to create a new file, but I didn't see any reasonable location.

### [2020-12-06T18:56:25+00:00](https://github.com/leanprover-community/mathlib/commit/b3aa052422ebf62a22f700199400e2843c73b25c)
feat(combinatorics/simple_graph/basic): introduce incidence sets, graph construction from relation ([#5191](https://github.com/leanprover-community/mathlib/pull/#5191))

Add incidence sets and some lemmas, including a proof of equivalence between the neighbor set of a vertex and its incidence set. Add a graph construction from a given relation.

Definitions and lemmas adapted from [simple_graphs2](https://github.com/leanprover-community/mathlib/blob/simple_graphs2/src/combinatorics/simple_graph/basic.lean#L317)



Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>

### [2020-12-06T11:43:56+00:00](https://github.com/leanprover-community/mathlib/commit/c88e8f35e8ef487defcaec8d6d08ca5dbdf21fe1)
refactor(*): drop `topology/instances/complex` ([#5208](https://github.com/leanprover-community/mathlib/pull/#5208))

* drop `topology/instances/complex`, deduce topology from `normed_space` instead;
* generalize continuity of `polynomial.eval` to any `topological_ring`; add versions for `eval₂` and `aeval`;
* replace `polynomial.tendsto_infinity` with `tendsto_abv_at_top`, add versions for `eval₂`, `aeval`, as well as `norm` instead of `abv`.
* generalize `complex.exists_forall_abs_polynomial_eval_le` to any `[normed_ring R] [proper_space R]` such that norm
  is multiplicative, rename to `polynomial.exists_forall_norm_le`.

### [2020-12-06T10:31:29+00:00](https://github.com/leanprover-community/mathlib/commit/29a1731a3275fd5b41d9468e664605908d0c7760)
feat(ring_theory/witt_vector): common identities between operators on Witt vectors ([#5161](https://github.com/leanprover-community/mathlib/pull/#5161))

Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-12-06T07:55:26+00:00](https://github.com/leanprover-community/mathlib/commit/339bd9a94171ba9a8b64d412a930549baffcbb2e)
chore(*): clean up several unnecessary let statements ([#5257](https://github.com/leanprover-community/mathlib/pull/#5257))

Cleans up a few `let`s and `letI`s and a `have` and a `set` that have made it into some proofs in the library but do not seem to do anything for the proof.

### [2020-12-06T07:55:24+00:00](https://github.com/leanprover-community/mathlib/commit/12a8361f3a2da460860e8fe02504a02727f85ab4)
feat(data/polynomial): simp lemmas about polynomial derivatives ([#5256](https://github.com/leanprover-community/mathlib/pull/#5256))

Add simp lemmas derivative_bit0 derivative_bit1 and derivative_X_pow

### [2020-12-06T07:55:21+00:00](https://github.com/leanprover-community/mathlib/commit/c6de6e4f5160a048ccce5c3e86481d0fff08ff37)
chore(algebra/group_power): mark `map_pow` etc as `@[simp]` ([#5253](https://github.com/leanprover-community/mathlib/pull/#5253))

### [2020-12-06T04:52:54+00:00](https://github.com/leanprover-community/mathlib/commit/8538071204edf98f4199d66846404ca5f9b3bbbd)
doc(data/list): fix `erasep` doc string ([#5254](https://github.com/leanprover-community/mathlib/pull/#5254))

closes [#5252](https://github.com/leanprover-community/mathlib/pull/#5252)

### [2020-12-06T01:24:31+00:00](https://github.com/leanprover-community/mathlib/commit/065bd5fc1c5a5c65e56162360e9e0647155b6069)
chore(scripts): update nolints.txt ([#5250](https://github.com/leanprover-community/mathlib/pull/#5250))

I am happy to remove some nolints for you!

### [2020-12-05T20:21:10+00:00](https://github.com/leanprover-community/mathlib/commit/7e8e174b53e668153a66924648feafb463481e62)
style(combinatorics/simple_graph/basic): edit proof of lemma to match style guidelines ([#5245](https://github.com/leanprover-community/mathlib/pull/#5245))

Rewrite proof of `adj_iff_exists_edge` to match style guidelines.



Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>

### [2020-12-05T20:21:06+00:00](https://github.com/leanprover-community/mathlib/commit/ae99c76df4dfd4603cf446ad78b30296943503db)
feat(field_theory/galois): Is_galois iff is_galois bot ([#5231](https://github.com/leanprover-community/mathlib/pull/#5231))

Proves that E/F is Galois iff E/bot is Galois.

This is useful in Galois theory because it gives a new way of showing that E/F is Galois:
1) Show that bot is the fixed field of some subgroup
2) Apply `is_galois.of_fixed_field`
3) Apply `is_galois_iff_is_galois_bot`

More to be added later (once [#5225](https://github.com/leanprover-community/mathlib/pull/#5225) is merged): Galois is preserved by alg_equiv, is_galois_iff_galois_top



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2020-12-05T20:21:04+00:00](https://github.com/leanprover-community/mathlib/commit/ddfba423c3129f89bf51eb2dda127ad7047afd3d)
chore(data/multiset/basic): make `card` a bundled `add_monoid_hom` ([#5228](https://github.com/leanprover-community/mathlib/pull/#5228))

Other changes:

* use `/-! ###` in section headers;
* move `add_monoid` section above `card`;
* fix docstrings of `multiset.choose_x` and `multiset.choose`.

### [2020-12-05T20:21:02+00:00](https://github.com/leanprover-community/mathlib/commit/1f64814127ed866b7db82b0b6118a2923e0cf459)
chore(data/equiv/ring): add `symm_symm` and `coe_symm_mk` ([#5227](https://github.com/leanprover-community/mathlib/pull/#5227))

Also generalize `map_mul` and `map_add` to `[has_mul R] [has_add R]`
instead of `[semiring R]`.

### [2020-12-05T18:53:49+00:00](https://github.com/leanprover-community/mathlib/commit/d4bd4cdaabcfddfb4215dca26b317aa32030bf79)
fix(topology/algebra/infinite_sum): fix docstring typos and add example ([#5159](https://github.com/leanprover-community/mathlib/pull/#5159))



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-12-05T16:59:01+00:00](https://github.com/leanprover-community/mathlib/commit/83b13d1c25e19564e698632944ac4957b3d41943)
feat(category_theory/limits): morphisms to equalizer ([#5233](https://github.com/leanprover-community/mathlib/pull/#5233))

The natural bijection for morphisms to an equalizer and the dual.

### [2020-12-05T16:58:59+00:00](https://github.com/leanprover-community/mathlib/commit/dd11498725a60104dc347eceba58aa53599da7ee)
chore(linear_algebra/basic): redefine `restrict` ([#5229](https://github.com/leanprover-community/mathlib/pull/#5229))

Use `dom_restrict` and `cod_restrict`

### [2020-12-05T13:48:51+00:00](https://github.com/leanprover-community/mathlib/commit/481f5e09803c9a8df3223b92c4a487277295bebc)
chore(data/prod): `prod.swap` is `bijective` ([#5226](https://github.com/leanprover-community/mathlib/pull/#5226))

### [2020-12-05T09:58:53+00:00](https://github.com/leanprover-community/mathlib/commit/c5009dd7140cf6ae53bf4ddeb57992eb10053b0b)
chore(data/equiv/basic): Add missing refl/trans/symm simp lemmas ([#5223](https://github.com/leanprover-community/mathlib/pull/#5223))

### [2020-12-05T07:50:28+00:00](https://github.com/leanprover-community/mathlib/commit/3972da8a9aeeaa092f0aa0134d32b32941e59329)
chore(category_theory/limits/preserves): make names consistent ([#5240](https://github.com/leanprover-community/mathlib/pull/#5240))

adjusted names and namespaces to match [#5044](https://github.com/leanprover-community/mathlib/pull/#5044)

### [2020-12-05T07:50:26+00:00](https://github.com/leanprover-community/mathlib/commit/39a3b58b72b4ac20cc8b76b7c8d050c5f38125dc)
feat(order/filter/at_top_bot): `order_iso` maps `at_top` to `at_top` ([#5236](https://github.com/leanprover-community/mathlib/pull/#5236))

### [2020-12-05T07:50:24+00:00](https://github.com/leanprover-community/mathlib/commit/147a81a253d7572a032f7a2a4969dfcc64502918)
chore(category_theory/limits): preserving coequalizers ([#5212](https://github.com/leanprover-community/mathlib/pull/#5212))

dualise stuff from before

### [2020-12-05T07:50:22+00:00](https://github.com/leanprover-community/mathlib/commit/b82eb7a5ff842cd410da954a8308a9af7878ab71)
refactor(combinatorics/simple_graph/matching): change definition of matching ([#5210](https://github.com/leanprover-community/mathlib/pull/#5210))

Refactored definition of matching per @eric-wieser's [suggestion](https://github.com/leanprover-community/mathlib/pull/5156#discussion_r535102524) and @kmill's [suggestion](https://github.com/leanprover-community/mathlib/pull/5156#discussion_r535745112), for the purpose of using `matching.sub_edges` instead of `matching.prop.sub_edges`



Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>

### [2020-12-05T07:50:19+00:00](https://github.com/leanprover-community/mathlib/commit/dc08f4d47c49c8a147ddfc79569dcf29183b7472)
feat(analysis): define asymptotic equivalence of two functions ([#4979](https://github.com/leanprover-community/mathlib/pull/#4979))

This defines the relation `is_equivalent u v l`, which means that `u-v` is little o of
`v` along the filter `l`. It is required to state, for example, Stirling's formula, or the prime number theorem

### [2020-12-05T04:54:08+00:00](https://github.com/leanprover-community/mathlib/commit/de7dbbbdd7d6ac4aac0385aaee41b621bb0a2bfd)
feat(algebra/group): composition of monoid homs as "bilinear" monoid hom ([#5202](https://github.com/leanprover-community/mathlib/pull/#5202))

### [2020-12-05T01:27:37+00:00](https://github.com/leanprover-community/mathlib/commit/56c4e73291da1dd729249506e7d1e88011d5519a)
chore(scripts): update nolints.txt ([#5232](https://github.com/leanprover-community/mathlib/pull/#5232))

I am happy to remove some nolints for you!

### [2020-12-04T21:26:40+00:00](https://github.com/leanprover-community/mathlib/commit/0afd3a0fd03076b9705d5df0a35cc87d5bcbf7fc)
chore(data/finsupp/basic): Add single_of_single_apply ([#5219](https://github.com/leanprover-community/mathlib/pull/#5219))

### [2020-12-04T21:26:38+00:00](https://github.com/leanprover-community/mathlib/commit/8a9a5d35e70ef904282dd2eff718038b8d67040b)
feat(dynamics): (semi-)flows, omega limits ([#4843](https://github.com/leanprover-community/mathlib/pull/#4843))

This code has gone through a couple of iterations since it was first written in summer, when the ambition was 'Morse decompositions in Lean' rather than 'mildly generalise some results from a first course in differential equations'. Nevertheless there's much in here I'm not confident about & would appreciate help with.

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-12-04T15:57:38+00:00](https://github.com/leanprover-community/mathlib/commit/5f430798db36c627dffaf31c96aca7fabdd74650)
doc(data/quot): Fix typo ([#5221](https://github.com/leanprover-community/mathlib/pull/#5221))

### [2020-12-04T15:57:35+00:00](https://github.com/leanprover-community/mathlib/commit/4ea2e68da25359dd80dea329df51c9d1c26a01d8)
chore(algebra/big_operators/basic): Split prod_cancels_of_partition_cancels in two and add a docstring ([#5218](https://github.com/leanprover-community/mathlib/pull/#5218))

### [2020-12-04T15:57:31+00:00](https://github.com/leanprover-community/mathlib/commit/5ea96f9a8f8d6b5eb7d63062a2a66b3d42557907)
feat(linear_algebra/multilinear): Add `multilinear_map.coprod` ([#5182](https://github.com/leanprover-community/mathlib/pull/#5182))

### [2020-12-04T15:57:29+00:00](https://github.com/leanprover-community/mathlib/commit/cb7effa89fdf9dae95295dc22c4fadf1a822579f)
feat(ring_theory/discrete_valuation_ring): add additive valuation ([#5094](https://github.com/leanprover-community/mathlib/pull/#5094))

Following the approach used for p-adic numbers, we define an additive valuation on a DVR R as a bare function v: R -> nat, with the convention that v(0)=0 instead of +infinity for convenience. Note that we have no `hom` structure (like `monoid_hom` or `add_monoid_hom`) for v(a*b)=v(a)+v(b) and anyway this doesn't even hold if ab=0. We prove all the usual axioms.

### [2020-12-04T14:48:23+00:00](https://github.com/leanprover-community/mathlib/commit/f1d30f6e79e04e9ac462c964ba578973e637bcd9)
doc(data/typevec): Fix broken markdown rendering ([#5220](https://github.com/leanprover-community/mathlib/pull/#5220))

### [2020-12-04T13:34:38+00:00](https://github.com/leanprover-community/mathlib/commit/54c13bd8de75730c9f2edf31a636910b07e569e2)
docs(data/fp): Move title comment so that it appears in the markdown ([#5222](https://github.com/leanprover-community/mathlib/pull/#5222))

### [2020-12-04T10:35:26+00:00](https://github.com/leanprover-community/mathlib/commit/30467f4b492d5832176bde4de07e465b63f20903)
feat(field_theory/adjoin): induction on adjoin ([#5173](https://github.com/leanprover-community/mathlib/pull/#5173))

This is another adjoin induction lemma that will be used in an upcoming PR.

### [2020-12-04T07:43:02+00:00](https://github.com/leanprover-community/mathlib/commit/7e307bcc4388824d84c42c19291d3e466ebc5278)
chore(algebra/ring): delete a duplicate instance ([#5215](https://github.com/leanprover-community/mathlib/pull/#5215))

In [#3303](https://github.com/leanprover-community/mathlib/pull/#3303) and [#3296](https://github.com/leanprover-community/mathlib/pull/#3296) which were merged 1 day apart two versions of the instance comm_monoid_with_zero from a comm_semiring were added 5 lines apart in the file, delete one.

### [2020-12-04T07:43:00+00:00](https://github.com/leanprover-community/mathlib/commit/2d00ba48a5306710bcac3de65bbdfe44d76d5b2f)
feat(category_theory/limits): cleanup equalizers ([#5214](https://github.com/leanprover-community/mathlib/pull/#5214))

golf and make simp more powerful

### [2020-12-04T07:42:59+00:00](https://github.com/leanprover-community/mathlib/commit/b2f8c4c025079b2d1edbbf70a15f8d74c37f3620)
feat(category_theory/limits): reflects limit if reflects iso and preserves ([#5213](https://github.com/leanprover-community/mathlib/pull/#5213))

### [2020-12-04T07:42:57+00:00](https://github.com/leanprover-community/mathlib/commit/cfd01f9dcf8ec33525bb22a62a13ca1e846db39b)
chore(topology/continuous_on): change type of `continuous_on.comp_continuous` ([#5209](https://github.com/leanprover-community/mathlib/pull/#5209))

Use `∀ x, f x ∈ s` instead of `range f ⊆ s`.

### [2020-12-04T07:42:55+00:00](https://github.com/leanprover-community/mathlib/commit/ad25cacf1d2625d0a145e32a4b2a8cb4f7db8342)
refactor(data/polynomial/derivative): change `polynomial.derivative` to be a `linear_map` ([#5198](https://github.com/leanprover-community/mathlib/pull/#5198))

Refactors polynomial.derivative to be a linear_map by default

### [2020-12-04T07:42:52+00:00](https://github.com/leanprover-community/mathlib/commit/240f6eb91b8211b7caee84e069941a42f886fe4e)
feat(category_theory/monad): cleanups in monad algebra ([#5193](https://github.com/leanprover-community/mathlib/pull/#5193))

- Converts the simp normal form for composition of algebra homs to use category notation. 
- Adds simps where appropriate
- Golfs proofs, remove some erw and nonterminal simps
- Remove some redundant brackets

### [2020-12-04T07:42:50+00:00](https://github.com/leanprover-community/mathlib/commit/c10d1b1f38acf69a84845e315235221556b61a50)
feat(ring_theory/polynomial/cyclotomic):  add  order_of_root_cyclotomic ([#5151](https://github.com/leanprover-community/mathlib/pull/#5151))

Two lemmas about roots of cyclotomic polynomials modulo `p`.

`order_of_root_cyclotomic` is the main algebraic tool to prove the existence of infinitely many primes congruent to `1` modulo `n`.


Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-12-04T07:42:48+00:00](https://github.com/leanprover-community/mathlib/commit/c939c9e49830c59575c76ef3a048f9a583ea6485)
feat(category_theory/limits/preserves): preserving terminal objects ([#5060](https://github.com/leanprover-community/mathlib/pull/#5060))

Another part of [#4716](https://github.com/leanprover-community/mathlib/pull/#4716).

### [2020-12-04T06:35:18+00:00](https://github.com/leanprover-community/mathlib/commit/4f5046dd1d082337028778f54d36e8a05426291a)
feat(ring_theory/polynomial/cyclotomic): Möbius inversion formula for cyclotomic polynomials ([#5192](https://github.com/leanprover-community/mathlib/pull/#5192))

Proves Möbius inversion for functions to a `comm_group_with_zero`
Proves the Möbius inversion formula for cyclotomic polynomials

### [2020-12-04T01:20:37+00:00](https://github.com/leanprover-community/mathlib/commit/57dd302dedf33b4aec8b9ae0f2790458dbdd84bc)
chore(scripts): update nolints.txt ([#5211](https://github.com/leanprover-community/mathlib/pull/#5211))

I am happy to remove some nolints for you!

### [2020-12-03T22:25:01+00:00](https://github.com/leanprover-community/mathlib/commit/20cc59d9ae2af22d63a31fd10c23fc5425f77b1f)
feat(algebra/lie/basic): define missing inclusion maps ([#5207](https://github.com/leanprover-community/mathlib/pull/#5207))

### [2020-12-03T22:24:59+00:00](https://github.com/leanprover-community/mathlib/commit/ec839ef065ee8887bf9f56520fbb1b0f8e452d8c)
feat(topology/algebra/order): continuity of monotone functions ([#5199](https://github.com/leanprover-community/mathlib/pull/#5199))

Add local versions of `order_iso.continuous`.

### [2020-12-03T19:30:25+00:00](https://github.com/leanprover-community/mathlib/commit/3894503e816e11c029d95821f76d491adad9b71d)
doc(tactic/library_search): use more detailed doc string in docs ([#5206](https://github.com/leanprover-community/mathlib/pull/#5206))

The doc string for `tactic.interactive.library_search` is better than the tactic doc entry.
The latter is missing details like `library_search!`




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-12-03T19:30:23+00:00](https://github.com/leanprover-community/mathlib/commit/d416ad697f6a4add211cdce18ae299efb95f40ed)
feat(topology/category/Profinite): add category of profinite top. spaces ([#5147](https://github.com/leanprover-community/mathlib/pull/#5147))

### [2020-12-03T19:30:20+00:00](https://github.com/leanprover-community/mathlib/commit/6f38a50dcda873fa9c443360466537ae473c9e79)
feat(field_theory/minimal_polynomial): add algebra_map_inj ([#5062](https://github.com/leanprover-community/mathlib/pull/#5062))

I have added `algebra_map_inj` that computes the minimal polynomial of an element of the base ring. It generalizes `algebra_map` that assumes the base ring to be a field. I left `algebra_map` since I think it is reasonable to have a lemma that works without proving explicitly that the algebra map is injective.

### [2020-12-03T16:31:34+00:00](https://github.com/leanprover-community/mathlib/commit/986cabf3a1feb808fc3fab6bf8cd689bda0623ee)
fix(linear_algebra/multilinear): Fix incorrect type constraints on `dom_dom_congr` ([#5203](https://github.com/leanprover-community/mathlib/pull/#5203))

In the last PR, I accidentally put this in a section with `[comm_semiring R]`, but this only actually requires `[semiring R]`

### [2020-12-03T16:31:32+00:00](https://github.com/leanprover-community/mathlib/commit/52697178d84be1c86e533171f31f0fb59f9fc5cf)
chore(linear_algebra/determinant): Move some lemmas about swaps to better files ([#5201](https://github.com/leanprover-community/mathlib/pull/#5201))

These lemmas are not specific to determinants, and I need them in another file imported by `determinant`.

### [2020-12-03T16:31:30+00:00](https://github.com/leanprover-community/mathlib/commit/8ff9c0e6d227770f642147dd756e1ead7d3752fb)
feat(group_theory/order_of_element): add is_cyclic_of_prime_card ([#5172](https://github.com/leanprover-community/mathlib/pull/#5172))

Add `is_cyclic_of_prime_card`, which says if a group has prime order, then it is cyclic. I also added `eq_top_of_card_eq` which says a subgroup is `top` when it has the same size as the group, not sure where that should be in the file.

### [2020-12-03T14:04:40+00:00](https://github.com/leanprover-community/mathlib/commit/f1b387f8c8f96793f5cea18c1c1441c59aac9925)
feat(algebra/module/basic): Add smul_comm_class instances ([#5205](https://github.com/leanprover-community/mathlib/pull/#5205))

### [2020-12-03T14:04:38+00:00](https://github.com/leanprover-community/mathlib/commit/a4b6c418e724622969c026b4ec6ce8bef222d66a)
feat(field_theory/separable): is_separable_of_alg_hom_is_separable ([#5175](https://github.com/leanprover-community/mathlib/pull/#5175))

Proves that is_separable pulls back along an alg_hom



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2020-12-03T14:04:36+00:00](https://github.com/leanprover-community/mathlib/commit/b978f366f0d84d5c1d6a869569ce3d017e9541ff)
refactor(field_theory/fixed): Generalize alg_hom lemmas ([#5174](https://github.com/leanprover-community/mathlib/pull/#5174))

This PR generalizes some alg_hom lemmas to not require equality of the domain and codomain.

### [2020-12-03T14:04:33+00:00](https://github.com/leanprover-community/mathlib/commit/e7c2bba14014d654b0e930b8b854345e184e7456)
feat(ring_theory/witt_vector/frobenius): the frobenius endomorphism of witt vectors ([#4838](https://github.com/leanprover-community/mathlib/pull/#4838))

Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-12-03T12:03:20+00:00](https://github.com/leanprover-community/mathlib/commit/f1531ea563eafef8e363e92b27416a0d2ebd6e72)
feat(ring_theory/witt_vector): witt_sub, a demonstration of is_poly techniques ([#5165](https://github.com/leanprover-community/mathlib/pull/#5165))

Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-12-03T12:03:18+00:00](https://github.com/leanprover-community/mathlib/commit/f6273d4d33198e7175824fcc83ee238bf6bc1f1f)
feat(group_theory/group_action/sub_mul_action): Add an object for bundled sets closed under a mul action ([#4996](https://github.com/leanprover-community/mathlib/pull/#4996))

This adds `sub_mul_action` as a base class for `submodule`, and copies across the relevant lemmas.

This also weakens the type class requires for `A →[R] B`, to allow it to be used when only `has_scalar` is available.

### [2020-12-03T10:55:59+00:00](https://github.com/leanprover-community/mathlib/commit/98a20c25ade1d49ace6be232bbdb623c772c07ad)
feat(combinatorics/simple_graph/matching): introduce matchings and perfect matchings of graphs ([#5156](https://github.com/leanprover-community/mathlib/pull/#5156))

Introduce definitions of matchings and perfect matchings of graphs. This is with the goal of eventually proving Hall's Marriage Theorem and Tutte's Theorem.



Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>

### [2020-12-03T02:41:41+00:00](https://github.com/leanprover-community/mathlib/commit/61e76c42054a081ee5e8d58500eab948c3c3ac33)
chore(scripts): update nolints.txt ([#5197](https://github.com/leanprover-community/mathlib/pull/#5197))

I am happy to remove some nolints for you!

### [2020-12-03T01:03:53+00:00](https://github.com/leanprover-community/mathlib/commit/d9a7d05dc60caf825959b961bba11f327565111f)
chore(topology/algebra/ordered): add `order_iso.to_homeomorph` ([#5111](https://github.com/leanprover-community/mathlib/pull/#5111))

* Replace `homeomorph_of_strict_mono_surjective` with `order_iso.to_homeomorph` and `order_iso.continuous`.
* Drop `continuous_at_of_strict_mono_surjective` in favor of `order_iso.to_homeomorph`.
* Use notation for `nhds_within` here and there.

### [2020-12-02T21:22:19+00:00](https://github.com/leanprover-community/mathlib/commit/3f61e5490a759416c49004250b108f2cf837b243)
feat(category_theory/monad): mark monad lemmas as reassoc ([#5190](https://github.com/leanprover-community/mathlib/pull/#5190))

### [2020-12-02T21:22:16+00:00](https://github.com/leanprover-community/mathlib/commit/a84d7a710858d8f34350f6bc4e9e85977d8565f2)
feat(category_theory/adjunction): adjunction to equivalence ([#5189](https://github.com/leanprover-community/mathlib/pull/#5189))

Raise an adjunction to an equivalence

### [2020-12-02T21:22:13+00:00](https://github.com/leanprover-community/mathlib/commit/ed6eab01944a418dc4d1596c58e14763e7c688ff)
feat(category_theory/adjunction): simp adjunction defs ([#5188](https://github.com/leanprover-community/mathlib/pull/#5188))

Mark adjunction defs as `simps` and use the new lemmas to simplify some proofs

### [2020-12-02T21:22:11+00:00](https://github.com/leanprover-community/mathlib/commit/9be829e9a1bfe5558200a3d700e21aa564436b01)
feat(order/bounds): add basic lemmas about bdd_below ([#5186](https://github.com/leanprover-community/mathlib/pull/#5186))

Lemmas for bounded intervals (`Icc`, `Ico`, `Ioc` and `Ioo`). There were lemmas for `bdd_above` but the ones for `bdd_below` were missing.

### [2020-12-02T21:22:09+00:00](https://github.com/leanprover-community/mathlib/commit/e5befed7b632cb68cd0d35b8327ccf55a90bf2dd)
chore(data/polynomial/degree): golf some proofs, add simple lemmas ([#5185](https://github.com/leanprover-community/mathlib/pull/#5185))

* drop `polynomial.nat_degree_C_mul_X_pow_of_nonzero`; was a duplicate
  of `polynomial.nat_degree_C_mul_X_pow`;
* golf the proof of `nat_degree_C_mul_X_pow_le`;
* add more `simp` lemmas.

### [2020-12-02T21:22:07+00:00](https://github.com/leanprover-community/mathlib/commit/64fd9f8c661eb42af9ebccab4d928ab62f876a5e)
feat(order/rel_iso): preimages of intervals under an `order_iso` ([#5183](https://github.com/leanprover-community/mathlib/pull/#5183))

### [2020-12-02T21:22:05+00:00](https://github.com/leanprover-community/mathlib/commit/725fb8bcdf584d982cf3970bb03bbb9bc419ed83)
feat(algebra/lie/basic): define `map` and `comap` for Lie ideals, submodules ([#5181](https://github.com/leanprover-community/mathlib/pull/#5181))

### [2020-12-02T21:22:03+00:00](https://github.com/leanprover-community/mathlib/commit/5e93545f85cd5c8b2a50f04d5d27ceafc5ab04ac)
feat(linear_algebra/multilinear): Generalize dom_dom_congr for equivalences between types ([#5180](https://github.com/leanprover-community/mathlib/pull/#5180))

This also bundles the operation into an equivalence.

### [2020-12-02T21:22:01+00:00](https://github.com/leanprover-community/mathlib/commit/8da5f23f54c9aff4fd9686df2af3c7f337a13e14)
feat(data/set/function): Extend `update_comp` lemmas to work on dependent functions ([#5178](https://github.com/leanprover-community/mathlib/pull/#5178))

Also extends them to `Sort`

### [2020-12-02T21:21:58+00:00](https://github.com/leanprover-community/mathlib/commit/2189c7ab68c18d374bfc8d9ff70807e4665ef65a)
feat(data/option/basic): map_map functor-like lemmas ([#5030](https://github.com/leanprover-community/mathlib/pull/#5030))

New lemmas:
`map_eq_map`
`map_map`
`comp_map`
`map_comp_map`

### [2020-12-02T19:13:28+00:00](https://github.com/leanprover-community/mathlib/commit/0bb880946dbeaad10e25904617c9901f9828186e)
feat(category_theory/limits): left adjoint if preserves colimits ([#4942](https://github.com/leanprover-community/mathlib/pull/#4942))

A slight generalisation of a construction from before. Maybe this is the dual version you were talking about @jcommelin - if so my mistake! I think the advantage of doing it this way is that you definitionally get the old version but also the new version too.

### [2020-12-02T17:38:03+00:00](https://github.com/leanprover-community/mathlib/commit/e5ea2000f5781e7070055b067d5e688a61853354)
chore(analysis/normed_space): golf 2 proofs ([#5184](https://github.com/leanprover-community/mathlib/pull/#5184))

### [2020-12-02T15:07:43+00:00](https://github.com/leanprover-community/mathlib/commit/a8ddd7b2c795ae7219ad785480571f655652bb64)
feat(algebra/module/basic): generalize `is_scalar_tower` instances ([#5135](https://github.com/leanprover-community/mathlib/pull/#5135))



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2020-12-02T13:32:27+00:00](https://github.com/leanprover-community/mathlib/commit/d6241cb0d7b8efb18475aa7a42b1b9192ca6a841)
feat(linear_algebra/*): Use alternating maps for wedge and determinant ([#5124](https://github.com/leanprover-community/mathlib/pull/#5124))

This :

* Adds `exterior_algebra.ι_multi`, where `ι_multi ![a, b ,c]` = `ι a * ι b * ι c`
* Makes `det_row_multilinear` an `alternating_map`
* Makes `is_basis.det` an `alternating_map`

### [2020-12-02T07:25:31+00:00](https://github.com/leanprover-community/mathlib/commit/61f63649166658dad1931c4de51e1122a1a852e8)
feat(number_theory/arithmetic_function): Möbius inversion for `add_comm_group`s, `comm_group`s ([#5115](https://github.com/leanprover-community/mathlib/pull/#5115))

Adds scalar multiplication for `arithmetic_function`s
Generalizes Möbius inversion to work with `(add_)comm_group`s



Co-authored-by: jalex-stark <alexmaplegm@gmail.com>

### [2020-12-02T02:00:39+00:00](https://github.com/leanprover-community/mathlib/commit/f7e1806d78a184d647e67281312eafc78632d2e5)
chore(scripts): update nolints.txt ([#5176](https://github.com/leanprover-community/mathlib/pull/#5176))

I am happy to remove some nolints for you!

### [2020-12-01T23:23:57+00:00](https://github.com/leanprover-community/mathlib/commit/c2c7afe9abb318b915442ac7dc28a5f67a6d6398)
feat(data/nat/sqrt): add simple inequality lemmas and "no middle square" ([#5155](https://github.com/leanprover-community/mathlib/pull/#5155))

The first two theorems are useful when one needs the biggest perfect square strictly less than a number, whereas `no_middle_square` can be used to easily prove that a given number is not a square.



Co-authored-by: Adrián Doña Mateo <43966663+AdrianDoM@users.noreply.github.com>

### [2020-12-01T23:23:54+00:00](https://github.com/leanprover-community/mathlib/commit/9a4ed2aa598f3b311bbbdf13887dd2cf7655435e)
refactor(*): Add `_injective` alongside `_inj` lemmas ([#5150](https://github.com/leanprover-community/mathlib/pull/#5150))

This adds four new `injective` lemmas:

* `list.append_right_injective`
* `list.append_left_injective`
* `sub_right_injective`
* `sub_left_injective`

It also replaces as many `*_inj` lemmas as possible with an implementation of `*_injective.eq_iff`, to make it clear that the lemmas are just aliases of each other.

### [2020-12-01T23:23:52+00:00](https://github.com/leanprover-community/mathlib/commit/c2b7d237ade3898eec3f5041c78d617f86fca034)
chore(category_theory/limits): separate regular and normal monos ([#5149](https://github.com/leanprover-community/mathlib/pull/#5149))

This separates the file `regular_mono` into `regular_mono` and `normal_mono`: mostly this simplifies the import graph, but also this has the advantage that to use things about kernel pairs it's no longer necessary to import things about zero objects (I kept changing equalizers and using the changes in a file about monads which imported kernel pairs, and it was very slow because of zero objects)

### [2020-12-01T20:05:02+00:00](https://github.com/leanprover-community/mathlib/commit/6c456e356a610efe7ab18c635c25fe4be133010f)
feat(linear_algebra/multilinear): Add dom_dom_congr ([#5136](https://github.com/leanprover-community/mathlib/pull/#5136))

### [2020-12-01T20:05:00+00:00](https://github.com/leanprover-community/mathlib/commit/41e0903f1c5e4841e50fa45a3165c03bad068aa6)
feat(category_theory/limits/preserves): preserving equalizers ([#5044](https://github.com/leanprover-community/mathlib/pull/#5044))

Constructions and lemmas about preserving equalizers

### [2020-12-01T16:14:24+00:00](https://github.com/leanprover-community/mathlib/commit/2a6847746b22ff702ffade1d83de0a57dfe15ae7)
chore(algebra/group/basic): Add eq_one_iff_eq_one_of_mul_eq_one ([#5169](https://github.com/leanprover-community/mathlib/pull/#5169))

### [2020-12-01T16:14:22+00:00](https://github.com/leanprover-community/mathlib/commit/24596cae48a3db03d347b8cff898cefe1190c1cf)
feat(tactic/ring_exp): handle `nat.succ p` as `p + 1` ([#5166](https://github.com/leanprover-community/mathlib/pull/#5166))

Fixes: [#5157](https://github.com/leanprover-community/mathlib/pull/#5157) 

This PR adds a `rewrite` operation to `ring_exp`, which takes a normalized `p' : ex sum` and a proof that `p = p'.orig`, and shows `p` also normalizes to `p'.pretty`. The only use currently is `nat.succ`. If we still had `nat.has_pow`, the same function could have handled rewriting from `nat.has_pow` to `monoid.has_pow`.

### [2020-12-01T16:14:20+00:00](https://github.com/leanprover-community/mathlib/commit/9e78823c7e5d754aa9e20a34f33b54440a8cfe90)
feat(ring_theory/perfection): perfection and tilt ([#5032](https://github.com/leanprover-community/mathlib/pull/#5032))

- [x] depends on: [#5132](https://github.com/leanprover-community/mathlib/pull/#5132)

### [2020-12-01T13:25:41+00:00](https://github.com/leanprover-community/mathlib/commit/b7649bcd2d4db889ae2651637e2c8969c89f4c1f)
doc(linear_algebra/determinant): Add a reference to is_basis.det ([#5167](https://github.com/leanprover-community/mathlib/pull/#5167))

### [2020-12-01T13:25:39+00:00](https://github.com/leanprover-community/mathlib/commit/c088f657a688a58120d2cf11b4cecd6691fc4bb8)
chore(data/equiv/perm): Move around lemmas about perm and swap ([#5153](https://github.com/leanprover-community/mathlib/pull/#5153))

Only a very small fraction of `data/equiv/basic` needs knowledge of groups, moving out `perm_group` lets us cut the dependency.

The new `perm_group` file is then a good place for some of the lemmas in `group_theory/perm/sign`, especially those which just restate `equiv` lemmas in terms of `*` and `⁻¹` instead of `.trans` and `.symm`.

This moves a few lemmas about swap out of the `equiv.perm` namespace and into `equiv`, since `equiv.swap` is also in that namespace.

### [2020-12-01T13:25:37+00:00](https://github.com/leanprover-community/mathlib/commit/7188eae5289c9b3ebbcbcfda181f26d408083f90)
feat(linear_algebra): Add alternating multilinear maps ([#5102](https://github.com/leanprover-community/mathlib/pull/#5102))



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2020-12-01T10:59:06+00:00](https://github.com/leanprover-community/mathlib/commit/ca3351f66232b26bb6826ace57c86fd9f88299f6)
feat(rat/{basic,floor}) add floor lemmas ([#5148](https://github.com/leanprover-community/mathlib/pull/#5148))

### [2020-12-01T08:49:42+00:00](https://github.com/leanprover-community/mathlib/commit/2b074bea9b6cf61d7eefbc7131b9274c133c7819)
feat(algebra/lie/basic): Define lattice structure for `lie_submodule`s ([#5146](https://github.com/leanprover-community/mathlib/pull/#5146))

### [2020-12-01T05:46:04+00:00](https://github.com/leanprover-community/mathlib/commit/a8831524f75d5a8fd27b506c0a32167a6300257a)
doc(data/mv_polynomial/basic): Fix documentation of mv_polynomial.monomial ([#5160](https://github.com/leanprover-community/mathlib/pull/#5160))

The documenting comment for this function was obviously lifted from the single variable polynomial version, and did not make sense.

I'm not sure if this is the right comment, but it is at least better to what it was before.

### [2020-12-01T01:20:08+00:00](https://github.com/leanprover-community/mathlib/commit/b846aa5209f8e3cb68f98b8a6cac565658c019b5)
chore(scripts): update nolints.txt ([#5158](https://github.com/leanprover-community/mathlib/pull/#5158))

I am happy to remove some nolints for you!

### [2020-11-30T18:13:09+00:00](https://github.com/leanprover-community/mathlib/commit/c3f4d1b8bf781c5ba55b0bb3d4588174d1a00d38)
refactor(combinatorics/simple_graph): move simple graph files to their own folder ([#5154](https://github.com/leanprover-community/mathlib/pull/#5154))

Move the files into one folder with the goal of integrating material from the branch [simple_graphs2](https://github.com/leanprover-community/mathlib/tree/simple_graphs2)

### [2020-11-30T12:04:56+00:00](https://github.com/leanprover-community/mathlib/commit/e3a699ed0a0c856029703cdb9d8c9396e50743e9)
feat(linear_algebra/determinant): Show that the determinant is a multilinear map ([#5142](https://github.com/leanprover-community/mathlib/pull/#5142))

### [2020-11-30T10:52:36+00:00](https://github.com/leanprover-community/mathlib/commit/9f955fe5401bf9944550561d5e58ea1100408136)
feat(ring_theory/integral_closure): Cleanup interface for ring_hom.is_integral ([#5144](https://github.com/leanprover-community/mathlib/pull/#5144))

### [2020-11-29T02:33:01+00:00](https://github.com/leanprover-community/mathlib/commit/1f1ba587f272d203a40801c6b21af453f7de6ee3)
feat(category_theory/limits): reflexive coequalizers ([#5123](https://github.com/leanprover-community/mathlib/pull/#5123))

Adds reflexive coequalizers. These are useful for [#5118](https://github.com/leanprover-community/mathlib/pull/#5118) as well as for some monadicity theorems and other results.

### [2020-11-29T01:19:16+00:00](https://github.com/leanprover-community/mathlib/commit/5866812cb45bd5643a1bdd45be6d52d8d0a7497d)
chore(scripts): update nolints.txt ([#5143](https://github.com/leanprover-community/mathlib/pull/#5143))

I am happy to remove some nolints for you!

### [2020-11-28T21:16:44+00:00](https://github.com/leanprover-community/mathlib/commit/fe7b407fd033a78e3fc5226960f10b85886f72f1)
feat(tactic/explode): display exploded proofs as widgets ([#4718](https://github.com/leanprover-community/mathlib/pull/#4718))

[#4094](https://github.com/leanprover-community/mathlib/pull/#4094). This is a more advanced version of the expandable `#explode` diagram implemented in the [Mathematica-Lean Link](http://robertylewis.com/leanmm/lean_mm.pdf). The widget adds features such as jumping to definitions and exploding constants occurring in a proof term subsequently. Note that right now the [\<details\>](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/details) tag simply hides the information. "Exploding on request" requires a bit more refactoring on `#explode` itself and is still on the way. 

Example usage:`#explode_widget iff_true_intro`. 

![explode_widget](https://user-images.githubusercontent.com/22624072/96630999-7cb62780-1361-11eb-977d-3eb34039ab41.png)

### [2020-11-28T19:38:23+00:00](https://github.com/leanprover-community/mathlib/commit/ec822277b5d9b0bf7149367297c131c9077dbfc6)
chore(group_theory/perm/sign): Add swap_mul_involutive ([#5141](https://github.com/leanprover-community/mathlib/pull/#5141))

This is just a bundled version of swap_mul_self_mul

### [2020-11-28T17:42:18+00:00](https://github.com/leanprover-community/mathlib/commit/916bf74a7bb7df91ca28e678f58cce40291786bc)
feat(category_theory/limits): images, equalizers and pullbacks imply functorial images ([#5140](https://github.com/leanprover-community/mathlib/pull/#5140))

### [2020-11-28T17:42:16+00:00](https://github.com/leanprover-community/mathlib/commit/b1d8b89766c4df538a3acdc07ca5d132da39906a)
chore(algebra/char_p): refactor char_p ([#5132](https://github.com/leanprover-community/mathlib/pull/#5132))

### [2020-11-28T16:26:44+00:00](https://github.com/leanprover-community/mathlib/commit/137163a8a8174e5f1a7d51d63c4676df4a3c41a6)
feat(analysis/normed_space/dual): Fréchet-Riesz representation for the dual of a Hilbert space ([#4379](https://github.com/leanprover-community/mathlib/pull/#4379))

This PR defines `to_dual` which maps an element `x` of an inner product space to `λ y, ⟪x, y⟫`. We also give the Fréchet-Riesz representation, which states that every element of the dual of a Hilbert space `E` has the form `λ u, ⟪x, u⟫` for some `x : E`.



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2020-11-28T01:26:41+00:00](https://github.com/leanprover-community/mathlib/commit/801dea942a57af8d083ff60fa7a89707aec81063)
chore(scripts): update nolints.txt ([#5139](https://github.com/leanprover-community/mathlib/pull/#5139))

I am happy to remove some nolints for you!

### [2020-11-27T23:09:55+00:00](https://github.com/leanprover-community/mathlib/commit/ba43f6f1fce1887b589619c96c9dbb940268d5a3)
doc(field_theory/finite/basic): update doc-strings ([#5134](https://github.com/leanprover-community/mathlib/pull/#5134))

The documentation mentions `finite_field.is_cyclic` that does not exist (probably replaced by `subgroup_units_cyclic` in `ring_theory.integral_domain`).

### [2020-11-27T23:09:53+00:00](https://github.com/leanprover-community/mathlib/commit/b6f23099bea754f8a3ccbdcc8a1139fc4b7b6d92)
chore({ring,group}_theory/free_*): Add of_injective ([#5131](https://github.com/leanprover-community/mathlib/pull/#5131))

This adds:

* `free_abelian_group.of_injective`
* `free_ring.of_injective`
* `free_comm_ring.of_injective`
* `free_algebra.of_injective`

following up from dcbec39a5bf9af5c6e065eea185f8776ac537d3b

Co-authored-by: Kenny Lau <kc_kennylau@yahoo.com.hk>

### [2020-11-27T21:26:04+00:00](https://github.com/leanprover-community/mathlib/commit/4a153ed98d0a41afa2247c0d4022e1480df9eb92)
feat(ring_theory/polynomials/cyclotomic): add lemmas about cyclotomic polynomials ([#5122](https://github.com/leanprover-community/mathlib/pull/#5122))

Two lemmas about cyclotomic polynomials:
`cyclotomic_of_prime` is the explicit formula for `cyclotomic p R` when `p` is prime;
`cyclotomic_coeff_zero` shows that the constant term of `cyclotomic n R` is `1` if `2 ≤ n`. I will use this to prove that there are infinitely many prime congruent to `1` modulo `n`, for all `n`.

### [2020-11-27T21:26:02+00:00](https://github.com/leanprover-community/mathlib/commit/14f2096093b3ffc86be66877b2bf9b81343308bc)
feat(ring_theory/jacobson): generalized nullstellensatz - polynomials over a Jacobson ring are Jacobson ([#4962](https://github.com/leanprover-community/mathlib/pull/#4962))

The main statements are `is_jacobson_polynomial_iff_is_jacobson ` and `is_jacobson_mv_polynomial`, saying that `polynomial` and `mv_polynomial` both preserve jacobson property of rings. 

This second statement is in some sense a general form of the classical nullstellensatz, since in a Jacobson ring the intersection of maximal ideals containing an ideal will be exactly the radical of that ideal (and so I(V(I)) = I.radical).



Co-authored-by: Devon Tuma <dtumad@gmail.com>

### [2020-11-27T18:30:26+00:00](https://github.com/leanprover-community/mathlib/commit/8d3e93fb767748184e240d1af83557c378eec497)
chore(category_theory/limits): golf a proof ([#5133](https://github.com/leanprover-community/mathlib/pull/#5133))

### [2020-11-27T18:30:24+00:00](https://github.com/leanprover-community/mathlib/commit/fb70419741b031657cc5ed0a1ed158f6120ca05f)
feat(algebra/group/basic): simplify composed assoc ops ([#5031](https://github.com/leanprover-community/mathlib/pull/#5031))

New lemmas:
`comp_assoc_left`
`comp_assoc_right`
`comp_mul_left`
`comp_add_left`
`comp_mul_right`
`comp_add_right`



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2020-11-27T18:30:22+00:00](https://github.com/leanprover-community/mathlib/commit/73a2fd3af1f44e2b8a313642945e5496d26683b7)
feat(ring_theory/witt_vector/init_tail): adding disjoint witt vectors ([#4835](https://github.com/leanprover-community/mathlib/pull/#4835))

Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-11-27T15:35:32+00:00](https://github.com/leanprover-community/mathlib/commit/396487f94e5aa52c763f94fdf269e881bb3c4022)
feat(topology/separation): Adds t2_space instances for disjoint unions (sums and sigma types). ([#5113](https://github.com/leanprover-community/mathlib/pull/#5113))



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2020-11-27T14:25:59+00:00](https://github.com/leanprover-community/mathlib/commit/876481ef9a490a514b25c005e1c3433126dba005)
feat(field_theory/separable): add separable_of_X_pow_sub_C and squarefree_of_X_pow_sub_C ([#5052](https://github.com/leanprover-community/mathlib/pull/#5052))

I've added that `X ^ n - a` is separable, and so `squarefree`.

### [2020-11-27T14:25:57+00:00](https://github.com/leanprover-community/mathlib/commit/c82b70820707c013a79c2a12436e238f5de2fdf0)
feat(category_theory/sites): the canonical topology on a category ([#4928](https://github.com/leanprover-community/mathlib/pull/#4928))

Explicitly construct the finest topology for which the given presheaves are sheaves, and specialise to construct the canonical topology. 

Also one or two tiny changes which should have been there before

### [2020-11-27T11:58:59+00:00](https://github.com/leanprover-community/mathlib/commit/0ac414aff5cb39f286ff34787fd650b7eb5dc135)
feat(data/fin): Add pred_{le,lt}_pred_iff ([#5121](https://github.com/leanprover-community/mathlib/pull/#5121))

### [2020-11-27T11:58:57+00:00](https://github.com/leanprover-community/mathlib/commit/8acd296e9ee29976d777db4646cdcc13ce9ba8d3)
chore(topology/path_connected): move `proj_Icc` to a separate file ([#5120](https://github.com/leanprover-community/mathlib/pull/#5120))

Also use `min` and `max` in the definition to make, e.g., the proof of the continuity trivial.

### [2020-11-27T09:16:37+00:00](https://github.com/leanprover-community/mathlib/commit/238c58c3c51ea8415966a4f098336e072b1f1492)
chore(category_theory/limits): golf a proof ([#5130](https://github.com/leanprover-community/mathlib/pull/#5130))

### [2020-11-27T09:16:35+00:00](https://github.com/leanprover-community/mathlib/commit/ff2aeae9fd4fcc6a104568400fd43417a34f281a)
feat(logic/relation): trans_gen closure ([#5129](https://github.com/leanprover-community/mathlib/pull/#5129))

Mechanical conversion of `refl_trans_gen` lemmas for just `trans_gen`.

### [2020-11-27T09:16:33+00:00](https://github.com/leanprover-community/mathlib/commit/af7ba87a281026898cb2ca40f57c756205a7c49a)
feat(data/polynomial/eval): eval₂ f x (p * X) = eval₂ f x p * x ([#5110](https://github.com/leanprover-community/mathlib/pull/#5110))

Also generalize `polynomial.eval₂_mul_noncomm` and
`polynomial.eval₂_list_prod_noncomm`.

This PR uses `add_monoid_algebra.lift_nc` to golf some proofs about
`eval₂`. I'm not ready to replace the definition of `eval₂` yet (e.g.,
because it breaks dot notation everywhere), so I added
a lemma `eval₂_eq_lift_nc` instead.

### [2020-11-27T09:16:31+00:00](https://github.com/leanprover-community/mathlib/commit/8e09111fe0ff2e3e129d40df742897ce8fba158c)
chore(order/basic): add `strict_mono_??cr_on.dual` and `dual_right` ([#5107](https://github.com/leanprover-community/mathlib/pull/#5107))

We can use these to avoid `@strict_mono_??cr_on (order_dual α) (order_dual β)`.

### [2020-11-27T09:16:29+00:00](https://github.com/leanprover-community/mathlib/commit/a106102a6948b17a12dedeba1cee4691f5b12e50)
chore(category_theory/iso): golf and name consistency ([#5096](https://github.com/leanprover-community/mathlib/pull/#5096))

Minor changes: makes the names consistent and simplifies proofs

### [2020-11-27T09:16:27+00:00](https://github.com/leanprover-community/mathlib/commit/d0789503ce5126c12986a6239474e5fb705d0d7e)
feat(linear_algebra/bilinear_form): equivalence with matrices, given a basis ([#5095](https://github.com/leanprover-community/mathlib/pull/#5095))

This PR defines the equivalence between bilinear forms on an arbitrary module and matrices, given a basis of that module. It updates the existing equivalence between bilinear forms on `n → R` so that the overall structure of the file matches that of `linear_algebra.matrix`, i.e. there are two pairs of equivs, one for `n → R` and one for any `M` with a basis.

Changes:
 - `bilin_form_equiv_matrix`, `bilin_form.to_matrix` and `matrix.to_bilin_form` have been consolidated as linear equivs `bilin_form.to_matrix'` and `matrix.to_bilin'`. Other declarations have been renamed accordingly.
 - `quadratic_form.to_matrix` and `matrix.to_quadratic_form` are renamed by analogy to `quadratic_form.to_matrix'` and `matrix.to_quadratic_form'`
 - replaced some `classical.decidable_eq` in lemma statements with instance parameters, because otherwise we have to use `congr` to apply these lemmas when a `decidable_eq` instance is available

Additions:
 - `bilin_form.to_matrix` and `matrix.to_bilin`: given a basis, the equivalences between bilinear forms on any module and matrices
 - lemmas from `to_matrix'` and `to_bilin'` have been ported to `to_matrix` and `to_bilin`
 - `bilin_form.congr`, a dependency of `bilin_form.to_matrix`, states that `bilin_form R M` and `bilin_form R M'` are linearly equivalent if `M` and `M'` are
 - assorted lemmas involving `std_basis`

Deletions:
 - `bilin_form.to_matrix_smul`: use `linear_equiv.map_smul` instead



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2020-11-27T09:16:24+00:00](https://github.com/leanprover-community/mathlib/commit/c06c6169931efd30fc87391ebd590056c9eeb05b)
feat(number_theory/arithmetic_function): Moebius inversion ([#5047](https://github.com/leanprover-community/mathlib/pull/#5047))

Changes the way that zeta works with coercion
Proves Möbius inversion for functions to a general `comm_ring`



Co-authored-by: jalex-stark <alexmaplegm@gmail.com>

### [2020-11-27T09:16:21+00:00](https://github.com/leanprover-community/mathlib/commit/2bda184a75ef375b630d03f56d23ac156731e8e1)
feat(field_theory): Prove the Galois correspondence ([#4786](https://github.com/leanprover-community/mathlib/pull/#4786))

The proof leverages existing results from field_theory/fixed.lean and field_theory/primitive_element.lean.
We define Galois as normal + separable. Proving the various equivalent characterizations of Galois extensions is yet to be done.

### [2020-11-27T06:39:09+00:00](https://github.com/leanprover-community/mathlib/commit/2f939e93e0ad9be603ba7c070395a7e5a7ba066d)
chore(data/equiv/basic): redefine `set.bij_on.equiv` ([#5128](https://github.com/leanprover-community/mathlib/pull/#5128))

Now `set.bij_on.equiv` works for any `h : set.bij_on f s t`. The old
behaviour can be achieved using `(equiv.set_univ _).symm.trans _`.

### [2020-11-27T06:39:07+00:00](https://github.com/leanprover-community/mathlib/commit/4715d992a0f89de32c0c8c9f72b6276ca6abe8a4)
chore(data/set/function): add 3 trivial lemmas ([#5127](https://github.com/leanprover-community/mathlib/pull/#5127))

### [2020-11-27T06:39:04+00:00](https://github.com/leanprover-community/mathlib/commit/c1edbdda7581726ea09cfdb0e5fc74b5a0a8e80b)
chore(data/complex/exponential): golf 2 proofs ([#5126](https://github.com/leanprover-community/mathlib/pull/#5126))

### [2020-11-27T06:39:02+00:00](https://github.com/leanprover-community/mathlib/commit/cb9e5cf9db6f11df53259459474f10258c864e9c)
doc(data/equiv/basic): improve docstring of `equiv.sum_equiv_sigma_bool` ([#5119](https://github.com/leanprover-community/mathlib/pull/#5119))

Also slightly improve defeq of the `to_fun` field by using `sum.elim` instead of a custom `match`.

### [2020-11-27T06:39:00+00:00](https://github.com/leanprover-community/mathlib/commit/d3cc9935375ee54a59d9b2a1769b677a1d2139c9)
chore(data/pprod): Add pprod.mk.eta ([#5114](https://github.com/leanprover-community/mathlib/pull/#5114))

This is exactly the same as prod.mk.eta

### [2020-11-27T04:12:29+00:00](https://github.com/leanprover-community/mathlib/commit/2c5d4a3c9f6134cc58298fc3d70ea19054a90303)
chore(order/rel_iso): add a few lemmas ([#5106](https://github.com/leanprover-community/mathlib/pull/#5106))

* add lemmas `order_iso.apply_eq_iff_eq` etc;
* define `order_iso.symm`.

### [2020-11-27T01:21:04+00:00](https://github.com/leanprover-community/mathlib/commit/1a8089e9cdb2a5ef5cd8bb446fd6bb186a47198c)
chore(scripts): update nolints.txt ([#5125](https://github.com/leanprover-community/mathlib/pull/#5125))

I am happy to remove some nolints for you!

### [2020-11-26T17:19:04+00:00](https://github.com/leanprover-community/mathlib/commit/59717d684a4d97d00fce32c26cf59510d432da54)
chore(data/sum): Add trivial simp lemmas ([#5112](https://github.com/leanprover-community/mathlib/pull/#5112))

### [2020-11-26T09:59:56+00:00](https://github.com/leanprover-community/mathlib/commit/2d476e0ec80ab436485f8c1351f5d63d62787f93)
chore(data/equiv/basic): Add comp_swap_eq_update ([#5091](https://github.com/leanprover-community/mathlib/pull/#5091))

### [2020-11-26T01:18:53+00:00](https://github.com/leanprover-community/mathlib/commit/98ebe5a6739fbe254f9ee9d401882d4388f91035)
chore(scripts): update nolints.txt ([#5117](https://github.com/leanprover-community/mathlib/pull/#5117))

I am happy to remove some nolints for you!

### [2020-11-25T16:13:58+00:00](https://github.com/leanprover-community/mathlib/commit/6e301c7526d22b76f6347828cc4a59b80aeca89d)
chore(logic/function/basic): Add function.update_apply ([#5093](https://github.com/leanprover-community/mathlib/pull/#5093))

This makes it easier to eliminate `dite`s in simple situations when only `ite` is needed.

### [2020-11-25T15:09:50+00:00](https://github.com/leanprover-community/mathlib/commit/81207e091bf54fd5dda2237292a81013d1acc65f)
feat(algebra/triv_sq_zero_ext): trivial square-zero extension ([#5109](https://github.com/leanprover-community/mathlib/pull/#5109))

### [2020-11-25T11:39:21+00:00](https://github.com/leanprover-community/mathlib/commit/4265f2c9d38538ecc38c181e26f10a44a3dc6785)
chore(data/int/basic): Add int.units_mul_self ([#5101](https://github.com/leanprover-community/mathlib/pull/#5101))

### [2020-11-25T06:48:00+00:00](https://github.com/leanprover-community/mathlib/commit/0324935caba94d3ba1f6cdfbf830399cf977bfa9)
chore(data/equiv/basic): Add trivial simp lemma ([#5100](https://github.com/leanprover-community/mathlib/pull/#5100))

With this in place, `⇑1 ∘ f` simplifies to `⇑f`

### [2020-11-25T03:17:58+00:00](https://github.com/leanprover-community/mathlib/commit/00200778d534c631c0196f84eb4cdcb76c35247d)
fix(algebra/ordered_group): remove workaround ([#5103](https://github.com/leanprover-community/mathlib/pull/#5103))

The problem mentioned in the TODO has been solved so the workaround is no longer needed.

### [2020-11-25T01:28:51+00:00](https://github.com/leanprover-community/mathlib/commit/83f293e2824dc1e450353c496cd5dfd9ecf0304b)
chore(scripts): update nolints.txt ([#5105](https://github.com/leanprover-community/mathlib/pull/#5105))

I am happy to remove some nolints for you!

### [2020-11-24T19:48:35+00:00](https://github.com/leanprover-community/mathlib/commit/7e66984cb1cd5b4262d8dd0ee775cd212e56c9e7)
fix(algebra/group_with_zero/power): remove duplicate lemmas ([#5083](https://github.com/leanprover-community/mathlib/pull/#5083))

`pow_eq_zero` and `pow_eq_zero'` are syntactically equal, as are `pow_ne_zero` and `pow_ne_zero'`.

### [2020-11-24T13:18:42+00:00](https://github.com/leanprover-community/mathlib/commit/2ed48468dfe80f6ba5fe874027e477af8588c4cb)
chore(linear_algebra/multilinear_map): Add boring coercion lemmas copied from ring_hom ([#5099](https://github.com/leanprover-community/mathlib/pull/#5099))

### [2020-11-24T11:42:00+00:00](https://github.com/leanprover-community/mathlib/commit/943b129458b95178bd39ee29bc941719aca358c3)
feat(analysis/special_functions/trigonometric): sin, cos, sinh, and cosh are infinitely smooth ([#5090](https://github.com/leanprover-community/mathlib/pull/#5090))

### [2020-11-24T09:15:42+00:00](https://github.com/leanprover-community/mathlib/commit/fe4abe004bea9017fc1ad9a27fcf291ee78785ae)
chore(algebra/lie/skew_adjoint): move logic for Lie algebras of skew-adjoint endomorphisms to own file ([#5098](https://github.com/leanprover-community/mathlib/pull/#5098))

### [2020-11-24T02:14:31+00:00](https://github.com/leanprover-community/mathlib/commit/51e71e9de591904e6dae13b41a1b1c326a711f3b)
chore(scripts): update nolints.txt ([#5097](https://github.com/leanprover-community/mathlib/pull/#5097))

I am happy to remove some nolints for you!

### [2020-11-23T23:33:18+00:00](https://github.com/leanprover-community/mathlib/commit/64b3e52b6c2469c1004675e35683477e30264731)
feat(data/finset/basic): Finset subset induction ([#5087](https://github.com/leanprover-community/mathlib/pull/#5087))

Induction on subsets of a given finset.

### [2020-11-23T22:04:03+00:00](https://github.com/leanprover-community/mathlib/commit/434a34de77dd6c2fa12bb28c87cf084011a69364)
feat(group_theory/perm/sign): Add swap_induction_on' ([#5092](https://github.com/leanprover-community/mathlib/pull/#5092))

This also adds a docstring for swap_induction_on

### [2020-11-23T22:04:01+00:00](https://github.com/leanprover-community/mathlib/commit/2a49f4e5aeea023b87c4c2030c25cacd3f908257)
feat(algebra/lie/direct_sum): direct sums of Lie modules ([#5063](https://github.com/leanprover-community/mathlib/pull/#5063))

There are three things happening here:
  1. introduction of definitions of direct sums for Lie modules,
  2. introduction of definitions of morphisms, equivs for Lie modules,
  3. splitting out extant definition of direct sums for Lie algebras
     into a new file.

### [2020-11-23T19:56:57+00:00](https://github.com/leanprover-community/mathlib/commit/fee93e961d7b74a4b0ce9e454b8a960e48acc3b2)
feat(ring_theory/*): Various lemmas about ideals, quotients, and localizations ([#5046](https://github.com/leanprover-community/mathlib/pull/#5046))

Lemmas needed for the proof that is_jacobson is preserved under taking polynomials.



Co-authored-by: Devon Tuma <dtumad@gmail.com>

### [2020-11-23T17:02:17+00:00](https://github.com/leanprover-community/mathlib/commit/96a20388edb84fbf87c122ac622423c3dbec8525)
chore(linear_algebra/bilinear_form): cleanup ([#5049](https://github.com/leanprover-community/mathlib/pull/#5049))

- Generalize some defs and lemmas to semimodules over semirings
- Define the equiv between `bilin_form` and `linear_map` analogously to `linear_map.to_matrix / matrix.to_lin`
- Mark appropriate lemmas as `simp`
- Fix overlong lines, match style guide in other places too
- Make use of variables consistent throughout the file

### [2020-11-23T15:20:48+00:00](https://github.com/leanprover-community/mathlib/commit/270fc310115590e0f7299f9879d72288625161c6)
fix(ring_theory/discrete_valuation_ring): docstring typos ([#5085](https://github.com/leanprover-community/mathlib/pull/#5085))

Clarify one docstring and fix two others.

### [2020-11-23T13:47:52+00:00](https://github.com/leanprover-community/mathlib/commit/e8c8ce914f4fbf23bfe25b4ae5083bdd8b6642fe)
chore(category_theory/limits): move product isomorphisms ([#5057](https://github.com/leanprover-community/mathlib/pull/#5057))

This PR moves some constructions and lemmas from `monoidal/of_has_finite_products` (back) to `limits/shapes/binary_products`. 

This reverts some changes made in https://github.com/leanprover-community/mathlib/commit/18246ac427c62348e7ff854965998cd9878c7692#diff-95871ea16bec862dfc4359f812b624a7a98e87b8c31c034e8a6e792332edb646. In particular, the purpose of that PR was to minimise imports in particular relating to `finite_limits`, but moving these particular definitions back doesn't make the imports any worse in that sense - other than that `binary_products` now imports `terminal` which I think doesn't make the import graph much worse.  On the other hand, these definitions are useful outside of the context of monoidal categories so I think they do genuinely belong in `limits/`.

I also changed some proofs from `tidy` to `simp` or a term-mode proof, and removed a `simp` attribute from a lemma which was already provable by `simp`.

### [2020-11-23T13:47:50+00:00](https://github.com/leanprover-community/mathlib/commit/a71901f22ad0a6025159d5b2702730d1d988fa0f)
feat(category_theory/limits): explicit binary product functor in Type ([#5043](https://github.com/leanprover-community/mathlib/pull/#5043))

Adds `binary_product_functor`, the explicit product functor in Type, and `binary_product_iso_prod` which shows it is isomorphic to the one picked by choice (this is helpful eg to show Type is cartesian closed).

I also edited the definitions a little to use existing machinery instead - this seems to make `simp` and `tidy` stronger when working with the explicit product cone; but they're definitionally the same as the old ones.

### [2020-11-23T13:47:48+00:00](https://github.com/leanprover-community/mathlib/commit/562be707c1d44d121dffa701135c7a9d231c19e1)
feat(field_theory/separable): a separable polynomial is squarefree ([#5039](https://github.com/leanprover-community/mathlib/pull/#5039))

I prove that a separable polynomial is squarefree.

### [2020-11-23T13:47:44+00:00](https://github.com/leanprover-community/mathlib/commit/3c1cf6031b3c1208bb9180e53cd6165ec17cb94a)
feat(category_theory/sigma): disjoint union of categories ([#5020](https://github.com/leanprover-community/mathlib/pull/#5020))

### [2020-11-23T13:47:42+00:00](https://github.com/leanprover-community/mathlib/commit/13b9478e34cad90baf36bd05a30a4780dd6f1c25)
feat(combinatorics/colex): introduce colexicographical order ([#4858](https://github.com/leanprover-community/mathlib/pull/#4858))

We define the colex ordering for finite sets, and give a couple of important lemmas and properties relating to it.

Part of [#2770](https://github.com/leanprover-community/mathlib/pull/#2770), in order to prove the Kruskal-Katona theorem.



Co-authored-by: Alena Gusakov <agusakov@udel.edu>

### [2020-11-23T12:40:48+00:00](https://github.com/leanprover-community/mathlib/commit/83ec6e06cb7523275fcef99404db53982f5cd2f1)
feat(analysis/normed_space/inner_product): inner product is infinitely smooth ([#5089](https://github.com/leanprover-community/mathlib/pull/#5089))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-11-23T10:07:38+00:00](https://github.com/leanprover-community/mathlib/commit/fdabe9c3989bd01dd556d77688921ef5b981af8d)
feat(data/padics/padic_norm): add a little more API ([#5082](https://github.com/leanprover-community/mathlib/pull/#5082))

A little more API for `padic_val_rat` and `padic_val_nat`.

### [2020-11-23T09:03:09+00:00](https://github.com/leanprover-community/mathlib/commit/2f516593b8e3219be4d07e2793e2755382d04cab)
feat(analysis/special_functions/exp_log): `exp` is infinitely smooth ([#5086](https://github.com/leanprover-community/mathlib/pull/#5086))

* Prove that `complex.exp` and `real.exp` are infinitely smooth.
* Generalize lemmas about `exp ∘ f` to `f : E → ℂ` or `f : E → ℝ`
  instead of `f : ℂ → ℂ` or `f : ℝ → ℝ`.

### [2020-11-23T03:24:34+00:00](https://github.com/leanprover-community/mathlib/commit/b9bd4a57570ecaccd3c53384915849770d810840)
chore(scripts): update nolints.txt ([#5088](https://github.com/leanprover-community/mathlib/pull/#5088))

I am happy to remove some nolints for you!

### [2020-11-23T01:00:25+00:00](https://github.com/leanprover-community/mathlib/commit/ce0498e69fc301b4fbc9cb449369170c3a1f9f9c)
feat(data/nat/basic): add injectivity and divisibility lemmas ([#5068](https://github.com/leanprover-community/mathlib/pull/#5068))

Multiplication by a non-zero natural is injective. Also a simple criterion for non-divisibility which I couldn't find (0<b<a implies a doesn't divide b).

### [2020-11-22T22:06:40+00:00](https://github.com/leanprover-community/mathlib/commit/2252c3a0b487c648ccfb219812e7557088e57866)
chore(data/list/basic): Add pmap_map ([#5081](https://github.com/leanprover-community/mathlib/pull/#5081))

Co-authored-by: zhangir-azerbayev <zazerbayev@gmail.com>

### [2020-11-22T22:06:38+00:00](https://github.com/leanprover-community/mathlib/commit/7f4286c94da9c1da83e133d118bd79fd3708b3d7)
chore(order/basic): add `le_update_iff` and `update_le_iff`  ([#5080](https://github.com/leanprover-community/mathlib/pull/#5080))

Other changes:

* add `update_eq_iff`, `eq_update_iff` and a more general lemma `rel_update_iff`;
* remove `@[simps]` attributes on `pi.*_lattice` instances.

### [2020-11-22T22:06:36+00:00](https://github.com/leanprover-community/mathlib/commit/c4132e9ae950e8b28eafc964062311ff21fe4d08)
chore(logic/unique): add `fin.inhabited` ([#5077](https://github.com/leanprover-community/mathlib/pull/#5077))

### [2020-11-22T22:06:34+00:00](https://github.com/leanprover-community/mathlib/commit/204445173fc2cf965dc13ecc5a7f92da2140dfed)
chore(data/real/ennreal): add a few lemmas ([#5071](https://github.com/leanprover-community/mathlib/pull/#5071))

Also swap LHS with RHS in `to_real_mul_to_real` and rename it to `to_real_mul`.

### [2020-11-22T22:06:32+00:00](https://github.com/leanprover-community/mathlib/commit/f627d765aad8d20982a3125cab3e82b0b91b5378)
chore(data/set/basic): more simp lemmas ([#5070](https://github.com/leanprover-community/mathlib/pull/#5070))

Motivated by [#4843](https://github.com/leanprover-community/mathlib/pull/#4843)

Co-authored-by: Jean Lo <jeaaaan.lo@gmail.com>

### [2020-11-22T22:06:30+00:00](https://github.com/leanprover-community/mathlib/commit/f5b967ac925980eac4315fd84b3aba672341ce8b)
feat(finset/basic): Add forall_mem_union ([#5064](https://github.com/leanprover-community/mathlib/pull/#5064))

Part of [[#4943](https://github.com/leanprover-community/mathlib/pull/#4943)](https://github.com/leanprover-community/mathlib/pull/4943), in order to prove theorems about antichains.

Lemma and proof supplied by [eric-wieser](https://github.com/eric-wieser)



Co-authored-by: Alena Gusakov <agusakov@udel.edu>

### [2020-11-22T22:06:27+00:00](https://github.com/leanprover-community/mathlib/commit/17a6f6dafca2c80d3c5fce64def22f8648d3d77f)
refactor(analysis/normed_space/hahn_banach): use is_R_or_C instead of specific typeclass ([#5009](https://github.com/leanprover-community/mathlib/pull/#5009))

In the current version, the proof of Hahn-Banach theorem is given over the reals, then over the complexes, and then to state the consequences uniformly a custom typeclass is defined. The proof over the complexes in fact works directly over any `is_R_or_C` field (i.e., reals or complexes), so we reformulate the proof in these terms, avoiding the custom typeclass.

It doesn't bring any new theorem to mathlib, but it may be helpful in the future (to prove results uniformly over reals and complexes using `is_R_or_C`) if we have Hahn-Banach readily available for this typeclass.

### [2020-11-22T19:31:23+00:00](https://github.com/leanprover-community/mathlib/commit/2a876b658f3d7a023d1390b336cb6ec03740c503)
chore(algebra/ordered_group): move monoid stuff to ordered_monoid.lean ([#5066](https://github.com/leanprover-community/mathlib/pull/#5066))

Replace one 2000 line file with two 1000 line files: ordered group stuff in one, and ordered monoid stuff in the other.

### [2020-11-22T14:51:30+00:00](https://github.com/leanprover-community/mathlib/commit/8d71ec995b05751b7aa8e7324ece8713bfb551d2)
chore(data/fin): a few more lemmas about `fin.insert_nth` ([#5079](https://github.com/leanprover-community/mathlib/pull/#5079))

### [2020-11-22T14:51:28+00:00](https://github.com/leanprover-community/mathlib/commit/c4587245d14356a695bd5207233297b60298517b)
chore(topology/metric_space/isometry): add a missing simp lemma ([#5078](https://github.com/leanprover-community/mathlib/pull/#5078))

### [2020-11-22T14:51:26+00:00](https://github.com/leanprover-community/mathlib/commit/a9b6b362c5f82817e1c3b7773f341803b0cc8438)
chore(algebra/big_operators): add `finset.abs_prod` ([#5076](https://github.com/leanprover-community/mathlib/pull/#5076))

### [2020-11-22T14:51:24+00:00](https://github.com/leanprover-community/mathlib/commit/2ba930ebb92b640a3a719c9603fbccc1ee39dc6b)
chore(measure_theory/borel_space): add some `simp` attrs ([#5075](https://github.com/leanprover-community/mathlib/pull/#5075))

### [2020-11-22T14:51:21+00:00](https://github.com/leanprover-community/mathlib/commit/c59dbf3d4d7f350d15f7fb972cae3c0d285ee08d)
chore(topology/basic): add `cluster_pt.map`, rename `mem_closure` ([#5065](https://github.com/leanprover-community/mathlib/pull/#5065))

* add `filter.prod_pure`, `filter.pure_prod`, `cluster_pt.map`, and `set.maps_to.closure`;
* rename `mem_closure` to `map_mem_closure`;
* rename `mem_closure2` to `map_mem_closure2`.

### [2020-11-22T12:03:14+00:00](https://github.com/leanprover-community/mathlib/commit/a64985169ea134c7c6057c4535c7bea4065b12f7)
chore(analysis/complex/basic): add `times_cont_diff.real_of_complex` ([#5073](https://github.com/leanprover-community/mathlib/pull/#5073))

Also rename `has_deriv_at_real_of_complex` to `has_deriv_at.real_of_complex`.

### [2020-11-22T12:03:12+00:00](https://github.com/leanprover-community/mathlib/commit/87439b98d7720d34bc8d99f6e394a5cdebc1842e)
chore(logic/basic): add `forall_apply_eq_imp_iff₂` ([#5072](https://github.com/leanprover-community/mathlib/pull/#5072))

Other lemmas simplify `∀ y ∈ f '' s, p y` to the LHS of this lemma.

### [2020-11-22T10:15:37+00:00](https://github.com/leanprover-community/mathlib/commit/198f3e544f38188b95c4448dcad3ebb2cd7fb56d)
chore(topology/homeomorph): add more simp lemmas ([#5069](https://github.com/leanprover-community/mathlib/pull/#5069))

Also use implicit arguments in some `iff` lemmas.

### [2020-11-22T01:09:23+00:00](https://github.com/leanprover-community/mathlib/commit/8525aa98ae408400e7c7205ef23c07d7b4870c0e)
chore(scripts): update nolints.txt ([#5067](https://github.com/leanprover-community/mathlib/pull/#5067))

I am happy to remove some nolints for you!

### [2020-11-21T21:24:19+00:00](https://github.com/leanprover-community/mathlib/commit/79cd7204bed50249f63a2e425606dadb203c1e09)
feat(data/complex/is_R_or_C): Create a proper coercion from ℝ ([#4824](https://github.com/leanprover-community/mathlib/pull/#4824))

This PR creates a proper coercion `ℝ → 𝕜` for `[is_R_or_C 𝕜]`, modelled on the code in `data/nat/cast`, as per the discussion [here](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Hilbert.20space.20is.20isometric.20to.20its.20dual).



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2020-11-21T20:09:32+00:00](https://github.com/leanprover-community/mathlib/commit/556a7255369ce255b934edcb8f7d3cfe144fa3b8)
feat(data/nat/parity): lemmas about (-1)^n ([#5056](https://github.com/leanprover-community/mathlib/pull/#5056))

I needed these twice recently, for two independent reasons, so I thought they were worth a PR.

### [2020-11-21T17:37:55+00:00](https://github.com/leanprover-community/mathlib/commit/aff4669b2bd92267335a4cc3db3e96ef1e0e61ec)
feat(group_theory/subgroup): add closure_eq_bot_iff ([#5055](https://github.com/leanprover-community/mathlib/pull/#5055))

Add missing lemma

### [2020-11-21T01:13:36+00:00](https://github.com/leanprover-community/mathlib/commit/cff497f8b8604d1e378a64a270dfc04c357922c5)
chore(scripts): update nolints.txt ([#5058](https://github.com/leanprover-community/mathlib/pull/#5058))

I am happy to remove some nolints for you!

### [2020-11-20T19:18:02+00:00](https://github.com/leanprover-community/mathlib/commit/006f84ecf9882ed96e84e03962522c8e49209253)
feat(algebra/group_power/basic): add add le_of_pow_le_pow ([#5054](https://github.com/leanprover-community/mathlib/pull/#5054))

add a random missing lemma

### [2020-11-20T16:41:58+00:00](https://github.com/leanprover-community/mathlib/commit/1fbdf771e2f6400ee332b7d7079a9093e9c18dba)
fix(linear_algebra/quadratic_form): nondegenerate -> anisotropic ([#5050](https://github.com/leanprover-community/mathlib/pull/#5050))

I made a mistake by merging a PR that defined `nondegenerate`
but should have used the terminology `anisotropic` instead.

### [2020-11-20T12:39:29+00:00](https://github.com/leanprover-community/mathlib/commit/498d4977b303840673cd1a4b2775dba48f66ea5c)
feat(measure_theory/lp_space): prove that neg and add are in Lp ([#5014](https://github.com/leanprover-community/mathlib/pull/#5014))

For f and g in Lp, (-f) and (f+g) are also in Lp.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-11-20T09:40:27+00:00](https://github.com/leanprover-community/mathlib/commit/32d1dfcbb10f02ef3ffebf73388f907bd010407a)
feat(linear_algebra/quadratic_form): nondegenerate quadratic forms ([#5045](https://github.com/leanprover-community/mathlib/pull/#5045))

No real lemmas about these, but `nondegenerate Q` is easier to read than `∀ x, Q x = 0 → x = 0`

### [2020-11-20T07:52:25+00:00](https://github.com/leanprover-community/mathlib/commit/8d40e8d026894b969684c8e93de9577d5d97942b)
feat(analysis/special_functions/pow): add ennreal.to_nnreal_rpow ([#5042](https://github.com/leanprover-community/mathlib/pull/#5042))

cut ennreal.to_real_rpow into two lemmas: to_nnreal_rpow and to_real_rpow

### [2020-11-20T06:44:00+00:00](https://github.com/leanprover-community/mathlib/commit/de76acdcaec6ea5c4add62beeca9f02f1a8ffabe)
feat(number_theory/arithmetic_function): moebius is the inverse of zeta ([#5001](https://github.com/leanprover-community/mathlib/pull/#5001))

Proves the most basic version of moebius inversion: that the moebius function is the inverse of the zeta function



Co-authored-by: jalex-stark <alexmaplegm@gmail.com>

### [2020-11-20T01:04:58+00:00](https://github.com/leanprover-community/mathlib/commit/0e976d951a0a765d9dbca4b947b64547f6c66651)
chore(scripts): update nolints.txt ([#5048](https://github.com/leanprover-community/mathlib/pull/#5048))

I am happy to remove some nolints for you!

### [2020-11-19T15:34:57+00:00](https://github.com/leanprover-community/mathlib/commit/47542a04408a5565467f68aa23d1f0b3294492b4)
feat(ring_theory/witt_vector/verschiebung): verschiebung of witt vectors ([#4836](https://github.com/leanprover-community/mathlib/pull/#4836))

Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-11-19T13:00:19+00:00](https://github.com/leanprover-community/mathlib/commit/33265106b807d7f76461e05f37153115809c6ac7)
chore(field_theory/minimal_polynomial): generalize irreducible ([#5006](https://github.com/leanprover-community/mathlib/pull/#5006))

I have removed the assumption that the base ring is a field for a minimal polynomial to be irreducible.

The proof is simple but long, it should be possible to use `wlog` to shorten it, but I do not understand how to do it...

### [2020-11-19T13:00:17+00:00](https://github.com/leanprover-community/mathlib/commit/b479d3bbece3adeed357b763ecf92d56064e6c35)
feat(algebra/*): star_ring instances on free_algebra, free_monoid, ring_quot, and quaternion ([#4902](https://github.com/leanprover-community/mathlib/pull/#4902))



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2020-11-19T10:10:26+00:00](https://github.com/leanprover-community/mathlib/commit/700d5761d288e0498b141818c6482f01d9c02f1a)
chore(algebra/group/defs): Remove shortcut instance definitions ([#4955](https://github.com/leanprover-community/mathlib/pull/#4955))

This means that `group.to_left_cancel_semigroup` is now spelt `group.to_cancel_monoid.to_left_cancel_monoid.to_left_cancel_semigroup`.
The longer spelling shouldn't actually matter because type inference will do it anyway.

I don't know whether this matters, but this should slightly reduce the number of connections that instance resolution must check.

This shortcut wasn't added deliberately, it seems it just got added accidentally when [#3688](https://github.com/leanprover-community/mathlib/pull/#3688) was introduced.

### [2020-11-19T06:43:23+00:00](https://github.com/leanprover-community/mathlib/commit/123c52212c5f15cc7ebf38cbe8d3045477867748)
feat(category_theory/limits): terminal comparison morphism ([#5025](https://github.com/leanprover-community/mathlib/pull/#5025))

### [2020-11-19T03:06:00+00:00](https://github.com/leanprover-community/mathlib/commit/b848b5b52ff05791f9ddde746ca25110faa7cd91)
feat(algebra/squarefree): a squarefree element of a UFM divides a power iff it divides ([#5037](https://github.com/leanprover-community/mathlib/pull/#5037))

Proves that if `x, y` are elements of a UFM such that `squarefree x`, then `x | y ^ n` iff `x | y`.

### [2020-11-19T01:49:38+00:00](https://github.com/leanprover-community/mathlib/commit/87a6d95b2e086f0672530cbdc4f2c8442bb55e32)
chore(scripts): update nolints.txt ([#5041](https://github.com/leanprover-community/mathlib/pull/#5041))

I am happy to remove some nolints for you!

### [2020-11-19T01:49:36+00:00](https://github.com/leanprover-community/mathlib/commit/68adaba31d941ab0801317d993f81921667db0b3)
chore(field_theory/separable): spell-check "seperable" to "separable" ([#5040](https://github.com/leanprover-community/mathlib/pull/#5040))

Replacing instances of "seperable" with "separable"

### [2020-11-18T23:23:59+00:00](https://github.com/leanprover-community/mathlib/commit/dcbec39a5bf9af5c6e065eea185f8776ac537d3b)
feat(algebra/*): Add of_injective lemmas ([#5034](https://github.com/leanprover-community/mathlib/pull/#5034))

This adds `free_monoid.of_injective`, `monoid_algebra.of_injective`, `add_monoid_algebra.of_injective`, and renames and restates `free_group.of.inj` to match these lemmas.

`function.injective (free_abelian_group.of)` is probably also true, but I wasn't able to prove it.

### [2020-11-18T23:23:57+00:00](https://github.com/leanprover-community/mathlib/commit/2de8db422b99f3bf665474ac04d292fbd4f9c57c)
feat(analysis/special_functions/pow): prove measurability of rpow for ennreal ([#5026](https://github.com/leanprover-community/mathlib/pull/#5026))

Prove measurability of rpow for an ennreal argument.
Also shorten the proof in the real case.



Co-authored-by: Rémy Degenne <remydegenne@gmail.com>

### [2020-11-18T21:10:00+00:00](https://github.com/leanprover-community/mathlib/commit/abb0b678b265ca5f9753296d72a2b5a15329f2fa)
refactor(*): make continuous a structure ([#5035](https://github.com/leanprover-community/mathlib/pull/#5035))

Turn `continuous` into a structure, to make sure it is not unfolded too much by Lean.

After the change, inferring some types is harder to Lean (as it can not unfold further to find more information), so some help is needed at places. Especially, for `hf : continuous f` and `hg : continuous g`, I had to replace `hf.prod_mk hg` with `(hf.prod_mk hg : _)` a lot of times.

For `hf : continuous f` and `hs : is_open s`, the fact that `f^(-1) s` is open used to be `hf s hs`. Now, it is `hs.preimage hf`, just like it is for closed sets.

### [2020-11-18T16:28:13+00:00](https://github.com/leanprover-community/mathlib/commit/38d2b53a42e296a28a0db7fbe331d356900528e4)
feat(algebra/free_algebra): Add a nontrivial instance ([#5033](https://github.com/leanprover-community/mathlib/pull/#5033))

### [2020-11-18T14:27:12+00:00](https://github.com/leanprover-community/mathlib/commit/0e09ada8dc371799905cf26e0919e1453e587adc)
feat(category_theory/is_connected): zigzag lemmas ([#5024](https://github.com/leanprover-community/mathlib/pull/#5024))

A few basic lemmas about connected categories and the zigzag relation

### [2020-11-18T12:44:52+00:00](https://github.com/leanprover-community/mathlib/commit/aff7727008e59b8ea7ea30ccfae49282787ba0f4)
chore(data/complex/is_R_or_C): Remove two unnecessary axioms ([#5017](https://github.com/leanprover-community/mathlib/pull/#5017))

`of_real` and `smul_coe_mul_ax` are already implied by the algebra structure.

The addition of `noncomputable` does not matter here, as both instances of `is_R_or_C` are marked non-computable anyway.

### [2020-11-18T09:32:12+00:00](https://github.com/leanprover-community/mathlib/commit/d22a878e214b3962bb86335da03cb2a4de77d58a)
doc(algebra/module/linear_map): Explain where the ring instance is ([#5023](https://github.com/leanprover-community/mathlib/pull/#5023))



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-11-18T09:32:10+00:00](https://github.com/leanprover-community/mathlib/commit/dfdad99f45094495af5072384e06cec31420be86)
feat(category_theory): constant functor is faithful ([#5022](https://github.com/leanprover-community/mathlib/pull/#5022))

### [2020-11-18T09:32:06+00:00](https://github.com/leanprover-community/mathlib/commit/dab2ae389b986715a29d81294d884d654ddb80bf)
feat(category_theory/is_connected): transfer across equivalence ([#5021](https://github.com/leanprover-community/mathlib/pull/#5021))

Also renames some universes to match usual conventions

### [2020-11-18T09:31:55+00:00](https://github.com/leanprover-community/mathlib/commit/a44b46c33e28653ee2199a8be658167fceb119ad)
chore(*/sub*): Use the simp normal form for has_coe_to_sort ([#5019](https://github.com/leanprover-community/mathlib/pull/#5019))

This reduces the need to start proofs on subtypes by applying `mem_coe`.

### [2020-11-18T09:31:53+00:00](https://github.com/leanprover-community/mathlib/commit/0d3092b693a9f78551d744cfea76f28be2f64128)
feat(number_theory/arithmetic_function): defining several more `arithmetic_function`s ([#4998](https://github.com/leanprover-community/mathlib/pull/#4998))

Defines arithmetic functions `card_factors`, `card_distinct_factors`, and `moebius`



Co-authored-by: jalex-stark <alexmaplegm@gmail.com>

### [2020-11-18T09:31:50+00:00](https://github.com/leanprover-community/mathlib/commit/7cc6b53f45a4bbf5c50bb3a2f4aa8580788ea284)
feat(category_theory/sites): sheaves on a grothendieck topology ([#4608](https://github.com/leanprover-community/mathlib/pull/#4608))

Broken off from [#4577](https://github.com/leanprover-community/mathlib/pull/#4577).

### [2020-11-18T07:06:12+00:00](https://github.com/leanprover-community/mathlib/commit/fec1a59f3b27367e34b7153c1962f2470e6b9ac2)
feat(data/list): map lemmas paralleling functor ([#5028](https://github.com/leanprover-community/mathlib/pull/#5028))

Adding `comp_map` and `map_comp_map`.
Docstrings done to match docstrings for equivalent `prod.map_comp_map`.



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2020-11-18T01:08:16+00:00](https://github.com/leanprover-community/mathlib/commit/19e3302bb63f891129636386eeed184c5f3ffdcd)
chore(scripts): update nolints.txt ([#5029](https://github.com/leanprover-community/mathlib/pull/#5029))

I am happy to remove some nolints for you!

### [2020-11-17T17:53:52+00:00](https://github.com/leanprover-community/mathlib/commit/e92b5acd962092d899dcfbf7266a33b9e89143d1)
feat(algebra/opposites): Provide semimodule instances and op_linear_equiv ([#4954](https://github.com/leanprover-community/mathlib/pull/#4954))

We already have a `has_scalar` definition via an `algebra` definition.

The definition used there satisfies a handful of other typeclasses too, and also allows for `op_add_equiv` to be stated more strongly as `op_linear_equiv`.

This also cuts back the imports a little on `algebra.module.basic`, which means formerly-transitive imports have to be added to downstream files.

### [2020-11-17T15:27:56+00:00](https://github.com/leanprover-community/mathlib/commit/97fc8ce14815e2016504e758533be25d66f589d3)
refactor(algebra/lie/basic): unbundle the action in `lie_module` ([#4959](https://github.com/leanprover-community/mathlib/pull/#4959))

### [2020-11-17T12:21:38+00:00](https://github.com/leanprover-community/mathlib/commit/47476efa86821b85e7afd533816137d40932e177)
docs(references.bib): adds Samuel's Théorie Algébrique des Nombres ([#5018](https://github.com/leanprover-community/mathlib/pull/#5018))

Added Samuel's Théorie Algébrique des Nombres

### [2020-11-17T12:21:36+00:00](https://github.com/leanprover-community/mathlib/commit/a59e76b5c777512a84356f8f636f626e74fade04)
feat(ring_theory/noetherian): add two lemmas on products of prime ideals ([#5013](https://github.com/leanprover-community/mathlib/pull/#5013))

Add two lemmas saying that in a noetherian ring (resp. _integral domain)_ every (_nonzero_) ideal contains a (_nonzero_) product of prime ideals.



Co-authored-by: faenuccio <65080144+faenuccio@users.noreply.github.com>

### [2020-11-17T12:21:33+00:00](https://github.com/leanprover-community/mathlib/commit/86b09715d2e29fe3e33120ec90f1b9f6314dbfcb)
feat(algebra/group_with_zero): Bundled `monoid_with_zero_hom` ([#4995](https://github.com/leanprover-community/mathlib/pull/#4995))

This adds, without notation, `monoid_with_zero_hom` as a variant of `A →* B` that also satisfies `f 0 = 0`.

As part of this, this change:

* Splits up `group_with_zero` into multiple files, so that the definitions can be used in the bundled homs before any of the lemmas start pulling in dependencies
* Adds `monoid_with_zero_hom` as a base class of `ring_hom`
* Changes some `monoid_hom` objects into `monoid_with_zero_hom` objects.
* Moves some lemmas about `valuation` into `monoid_hom`, since they apply more generally
* Add automatic coercions between `monoid_with_zero_hom` and `monoid_hom`

### [2020-11-17T12:21:30+00:00](https://github.com/leanprover-community/mathlib/commit/7a7076463c779967e3d49b39e18b8e2ab78d20d2)
feat(ring_theory/fractional_ideal): helper lemmas for Dedekind domains ([#4994](https://github.com/leanprover-community/mathlib/pull/#4994))

An assortment of lemmas and refactoring related to `fractional_ideal`s, used in the Dedekind domain project.
    
The motivation for creating this PR is that we are planning to remove the general `has_inv` instance on `fractional_ideal` (reserving it only for Dedekind domains), and we don't want to do the resulting refactoring twice. So we make sure everything is in the master branch, do the refactoring there, then merge the changes back into the work in progress branch.

Overview of the changes in `localization.lean`:
 * more `is_integer` lemmas
 * a localization of a noetherian ring is noetherian
 * generalize a few lemmas from integral domains to nontrivial `comm_ring`s
 * `algebra A (fraction_ring A)` instance

Overview of the changes in `fractional_ideal.lean`:
 * generalize many lemmas from integral domains to (nontrivial) `comm_ring`s (now `R` is notation for a `comm_ring` and `R₁` for an integral domain) 
 * `is_fractional_of_le`, `is_fractional_span_iff` and `is_fractional_of_fg`
 * many `simp` and `norm_cast` results involving `coe : ideal -> fractional_ideal` and `coe : fractional_ideal -> submodule`: now should be complete for `0`, `1`, `+`, `*`, `/` and `≤`.
 * use `1 : submodule` as `simp` normal form instead of `coe_submodule (1 : ideal)`
 * make the multiplication operation irreducible
 * port `submodule.has_mul` lemmas to `fractional_ideal.has_mul`
 * `simp` lemmas for `canonical_equiv`, `span_singleton`
 * many ways to prove `is_noetherian`

Co-Authored-By: Ashvni <ashvni.n@gmail.com>
Co-Authored-By: faenuccio <filippo.nuccio@univ-st-etienne.fr>



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2020-11-17T11:18:37+00:00](https://github.com/leanprover-community/mathlib/commit/ad286fbfdb0620bab474f0e0851f07ad0b75f7fd)
feat(tactic/fresh_names): add tactics for giving hyps fresh names ([#4987](https://github.com/leanprover-community/mathlib/pull/#4987))

This commit adds a variant of `rename` which guarantees that the renamed
hypotheses receive fresh names. To implement this, we also add more flexible
variants of `get_unused_name`, `intro_fresh` and `intro_lst_fresh`.

### [2020-11-17T02:15:30+00:00](https://github.com/leanprover-community/mathlib/commit/a2f3399a50c7cae7cc4cdfcd9c92ee18f44180f0)
chore(scripts): update nolints.txt ([#5016](https://github.com/leanprover-community/mathlib/pull/#5016))

I am happy to remove some nolints for you!

### [2020-11-16T23:47:31+00:00](https://github.com/leanprover-community/mathlib/commit/53f71f8dac5252afb27052a6c0e2057e7f35684c)
feat(data/list): list last lemmas ([#5015](https://github.com/leanprover-community/mathlib/pull/#5015))

list last lemmas letting lean learn little logical links

### [2020-11-16T14:15:33+00:00](https://github.com/leanprover-community/mathlib/commit/b588fc4c4eaf77031ad82b5712bef458389e92b9)
chore(*) Unused have statements in term mode ([#5012](https://github.com/leanprover-community/mathlib/pull/#5012))

Remove unneeded have statements.

### [2020-11-16T09:03:03+00:00](https://github.com/leanprover-community/mathlib/commit/90fa510d8339244c5772b3bfdd080edabe3c7766)
feat(analysis/special_functions/pow): rpow is measurable ([#5008](https://github.com/leanprover-community/mathlib/pull/#5008))

Prove the measurability of rpow in two cases: real and nnreal.

### [2020-11-16T01:22:58+00:00](https://github.com/leanprover-community/mathlib/commit/4cd24385d09c3659b6fa70d442b25dab31e16513)
chore(scripts): update nolints.txt ([#5011](https://github.com/leanprover-community/mathlib/pull/#5011))

I am happy to remove some nolints for you!

### [2020-11-16T00:17:12+00:00](https://github.com/leanprover-community/mathlib/commit/470ac77cdacf4f6b54234d73cf45bf833ed6922c)
feat(category_theory/monad): monadic functor really creates limits ([#4931](https://github.com/leanprover-community/mathlib/pull/#4931))

Show that a monadic functor `creates_limits`, and a partial result for colimits.

### [2020-11-15T14:10:11+00:00](https://github.com/leanprover-community/mathlib/commit/96315941799f46c002c3eaeb4b80f9bccbd2548e)
feat(algebra/star): star monoids, rings and algebras ([#4886](https://github.com/leanprover-community/mathlib/pull/#4886))



Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2020-11-15T04:56:07+00:00](https://github.com/leanprover-community/mathlib/commit/9dd9b6b07c27e971c8d24413d4fdb653fc7b3a67)
refactor(archive/imo/imo1969_q1): prove `infinite` statement, cleanup ([#4391](https://github.com/leanprover-community/mathlib/pull/#4391))

The previous formalization didn't quite prove that there were infinitely many natural numbers with the desired property, but rather that for any natural number there's a larger one with the property. This PR changes the ending to prove that the set of integers described in the problem statement is `infinite`.

### [2020-11-15T01:46:16+00:00](https://github.com/leanprover-community/mathlib/commit/7e27d941fce62dbf9e60174c5422d53d9e47531e)
chore(scripts): update nolints.txt ([#5007](https://github.com/leanprover-community/mathlib/pull/#5007))

I am happy to remove some nolints for you!

### [2020-11-15T01:46:14+00:00](https://github.com/leanprover-community/mathlib/commit/447b18f5a8222e7dad3209ab05a2ed4efd801080)
chore(data/polynomial/degree): consolidate all `polynomial.degree` files in one folder ([#5005](https://github.com/leanprover-community/mathlib/pull/#5005))

Moves `data/polynomial/degree.lean` to `data/polynomial/degree`, which already exists, renames it `lemmas.lean`
Renames `data/polynomial/degree/basic.lean` to `definitions.lean`
Adds `data/polynomial/degree/default.lean`, which just imports `lemmas.lean`

### [2020-11-15T01:46:12+00:00](https://github.com/leanprover-community/mathlib/commit/fca7ebaf7ac446e5ff937f708e47b7899f9143bc)
chore(analysis/calculus/deriv): composition of `g : 𝕜 → 𝕜` with `f : E → 𝕜` ([#4871](https://github.com/leanprover-community/mathlib/pull/#4871))

### [2020-11-15T00:37:55+00:00](https://github.com/leanprover-community/mathlib/commit/e6e827554c7fe74603a8000f17e37c38da610ecc)
chore(linear_algebra/char_poly): put everything `char_poly` in one folder ([#5004](https://github.com/leanprover-community/mathlib/pull/#5004))

Moves `char_poly` to `char_poly.basic`, because the folder already exists

### [2020-11-14T23:13:25+00:00](https://github.com/leanprover-community/mathlib/commit/6544244404e808523e261805d3e3d6c604e21a16)
feat(data/polynomial) small refactor and golf ([#5002](https://github.com/leanprover-community/mathlib/pull/#5002))

Factor out the lemma that roots of the normalization equal the roots of a polynomial and golf a proof a tiny bit.

### [2020-11-14T22:08:14+00:00](https://github.com/leanprover-community/mathlib/commit/05822370d30681539303982541e7ba82d52a6cf2)
feat(analysis): seminorms and local convexity ([#4827](https://github.com/leanprover-community/mathlib/pull/#4827))

### [2020-11-14T19:46:53+00:00](https://github.com/leanprover-community/mathlib/commit/633c2a63af8d8668b5b269d622d902bc2ef98f0f)
feat(ring_theory/gauss_lemma): two primitive polynomials divide iff they do in a fraction field ([#5003](https://github.com/leanprover-community/mathlib/pull/#5003))

Shows `polynomial.is_primitive.dvd_iff_fraction_map_dvd_fraction_map`, that two primitive polynomials divide iff they do over a fraction field.
Shows `polynomial.is_primitive.int.dvd_iff_map_cast_dvd_map_cast`, the version for integers and rationals.

### [2020-11-14T19:46:51+00:00](https://github.com/leanprover-community/mathlib/commit/009241460ddddd6324e12bf5c5c2b7989f0d1518)
feat(data/nat/choose/sum): alternating binomial coefficient sums ([#4997](https://github.com/leanprover-community/mathlib/pull/#4997))

Evaluates some sums related to binomial coefficients with alternating signs

### [2020-11-14T18:20:15+00:00](https://github.com/leanprover-community/mathlib/commit/9b887d51ec7f2a2bc3ad8d0f8f1db2aeabdbcde0)
feat(measure_theory/lp_space): Define Lp spaces ([#4993](https://github.com/leanprover-community/mathlib/pull/#4993))

Define the space Lp of functions for which the norm raised to the power p has finite integral.
Define the seminorm on that space (without proof that it is a seminorm, for now).

Add three lemmas to analysis/special_functions/pow.lean about ennreal.rpow
<!--
put comments you want to keep out of the PR commit here.
If this PR depends on other PRs, please list them below this comment,
using the following format:
- [ ] depends on: #abc [optional extra text]
- [ ] depends on: #xyz [optional extra text]
-->

### [2020-11-14T12:34:53+00:00](https://github.com/leanprover-community/mathlib/commit/70ca6fd89dbdd4ad2634fb8b3dbf788349834bd8)
feat(ring_theory/power_basis): `equiv`s between algebras with the same power basis ([#4986](https://github.com/leanprover-community/mathlib/pull/#4986))

`power_basis.lift` and `power_basis.equiv` use the power basis structure to define `alg_hom`s and `alg_equiv`s.
    
The main application in this PR is `power_basis.equiv_adjoin_simple`, which states that adjoining an element of a power basis of `L : K` gives `L` itself.

### [2020-11-14T12:34:51+00:00](https://github.com/leanprover-community/mathlib/commit/6bac899260d2179822fd50160dc921ce40aaa938)
feat(category_theory/limits/preserves): functor product preserves colims ([#4941](https://github.com/leanprover-community/mathlib/pull/#4941))

### [2020-11-14T12:34:49+00:00](https://github.com/leanprover-community/mathlib/commit/154d73dc6ac247a57d1b8e683a4592142b27b929)
feat(category_theory/equivalence): equivalence of functor categories ([#4940](https://github.com/leanprover-community/mathlib/pull/#4940))

### [2020-11-14T12:34:46+00:00](https://github.com/leanprover-community/mathlib/commit/a0341a894b53400638e067f02fb8ca6346e3d01b)
feat(category_theory/limits/creates): transfer creating limits through nat iso ([#4938](https://github.com/leanprover-community/mathlib/pull/#4938))

`creates` version of [#4934](https://github.com/leanprover-community/mathlib/pull/#4934)

### [2020-11-14T12:34:45+00:00](https://github.com/leanprover-community/mathlib/commit/ccc1431cebd2c170caa3118bd679df41dac15350)
feat(ring_theory/ideal_operations): prime avoidance ([#773](https://github.com/leanprover-community/mathlib/pull/#773))

```lean
/-- Prime avoidance. Atiyah-Macdonald 1.11, Eisenbud 3.3, Stacks 10.14.2 (00DS), Matsumura Ex.1.6. -/
theorem subset_union_prime {s : finset ι} {f : ι → ideal R} (a b : ι)
  (hp : ∀ i ∈ s, i ≠ a → i ≠ b → is_prime (f i)) {I : ideal R} :
  (I : set R) ⊆ (⋃ i ∈ (↑s : set ι), f i) ↔ ∃ i ∈ s, I ≤ f i :=
```

Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>
Co-authored-by: Ms2ger <Ms2ger@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-11-14T11:02:55+00:00](https://github.com/leanprover-community/mathlib/commit/5f151043ea58e75e15b2ec39f20986f5a6c4f379)
feat(algebra/squarefree): Defines squarefreeness, proves several equivalences ([#4981](https://github.com/leanprover-community/mathlib/pull/#4981))

Defines when a monoid element is `squarefree`
Proves basic lemmas to determine squarefreeness
Proves squarefreeness criteria in terms of `multiplicity`, `unique_factorization_monoid.factors`, and `nat.factors`

### [2020-11-14T01:13:48+00:00](https://github.com/leanprover-community/mathlib/commit/4db26afe75b85312caed15bd2b74cc38ca1cd529)
chore(scripts): update nolints.txt ([#4999](https://github.com/leanprover-community/mathlib/pull/#4999))

I am happy to remove some nolints for you!

### [2020-11-13T22:06:40+00:00](https://github.com/leanprover-community/mathlib/commit/9ed9e0f87d89548cebd8c8535b879f459580b16f)
feat(tactic/has_variable_names): add tactic for type-based naming ([#4988](https://github.com/leanprover-community/mathlib/pull/#4988))

When we name hypotheses or variables, we often do so in a type-directed fashion:
a hypothesis of type `ℕ` is called `n` or `m`; a hypothesis of type `list ℕ` is
called `ns`; etc. This commits adds a tactic which looks up typical variable
names for a given type. Typical variable names are registered by giving an
instance of the new type class `has_variable_names`. We also give instances of
this type class for many core types.

### [2020-11-13T19:42:11+00:00](https://github.com/leanprover-community/mathlib/commit/050b83704d6d6ccc8360ea32bd0ab8a207a6198a)
feat(field_theory/adjoin): Adjoin integral element ([#4831](https://github.com/leanprover-community/mathlib/pull/#4831))




Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2020-11-13T17:59:05+00:00](https://github.com/leanprover-community/mathlib/commit/eeb205751ac91eaa185278689740f73ddade4e2e)
feat(ring_theory/unique_factorization_domain): connecting `multiplicity` to `unique_factorization_domain.factors` ([#4980](https://github.com/leanprover-community/mathlib/pull/#4980))

Connects multiplicity of an irreducible to the multiset of irreducible factors



Co-authored-by: jalex-stark <alexmaplegm@gmail.com>

### [2020-11-13T11:15:04+00:00](https://github.com/leanprover-community/mathlib/commit/1a233e0e7b0f7a8e1a065c06f182891f55556f53)
feat(analysis/calculus): derivative is measurable ([#4974](https://github.com/leanprover-community/mathlib/pull/#4974))

### [2020-11-13T01:25:28+00:00](https://github.com/leanprover-community/mathlib/commit/140d8b42dc8167a2b3b3de61d65b07b85c3dc47d)
chore(scripts): update nolints.txt ([#4992](https://github.com/leanprover-community/mathlib/pull/#4992))

I am happy to remove some nolints for you!

### [2020-11-12T23:23:14+00:00](https://github.com/leanprover-community/mathlib/commit/6b3a2d1d07abe083e281b3617f376cabc6043e66)
feat(archive/imo): formalize IMO 1964 problem 1 ([#4935](https://github.com/leanprover-community/mathlib/pull/#4935))

This is an alternative approach to [#4369](https://github.com/leanprover-community/mathlib/pull/#4369), where progress seems to have stalled. I avoid integers completely by working with `nat.modeq`, and deal with the cases of n mod 3 by simply breaking into three cases.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-11-12T16:36:44+00:00](https://github.com/leanprover-community/mathlib/commit/6e64df5fa734b5ea72478e4ebf70ed38dd1a48db)
chore(deprecated/group): Do not import `deprecated` from `equiv/mul_add` ([#4989](https://github.com/leanprover-community/mathlib/pull/#4989))

This swaps the direction of the import, which makes the deprecated instances for `mul_equiv` be in the same place as the instances for `monoid_hom`.

### [2020-11-12T16:36:42+00:00](https://github.com/leanprover-community/mathlib/commit/97a7f577508deb2b2ec0bb32f19b8931c3e868c0)
chore(algebra/direct_limit): Use bundled morphisms ([#4964](https://github.com/leanprover-community/mathlib/pull/#4964))

This introduced some ugliness in the form of `(λ i j h, f i j h)`, which is a little unfortunate

### [2020-11-12T14:19:46+00:00](https://github.com/leanprover-community/mathlib/commit/34215fc95e5bbbf900ea39054828b6948fbb32ea)
feat(group_theory/sub{monoid,group}): Add `closure_induction'` for subtypes ([#4984](https://github.com/leanprover-community/mathlib/pull/#4984))

### [2020-11-12T12:14:35+00:00](https://github.com/leanprover-community/mathlib/commit/7404f0eaf71abb4a216c74f7b00bb4338ca28f59)
feat(algebra/pointwise): lemmas relating to submonoids ([#4960](https://github.com/leanprover-community/mathlib/pull/#4960))

### [2020-11-12T08:28:56+00:00](https://github.com/leanprover-community/mathlib/commit/593013df98b119518c29077419e347aa36ac3e14)
feat(algebra/quandle): Bundle `rack.to_envel_group.map` into an equiv ([#4978](https://github.com/leanprover-community/mathlib/pull/#4978))

This also cleans up some non-terminal simp tactics

### [2020-11-12T04:06:42+00:00](https://github.com/leanprover-community/mathlib/commit/3f575d7249d73aa32d038681dcbd5559f695f562)
feat(group_theory/subgroup) top is a normal subgroup ([#4982](https://github.com/leanprover-community/mathlib/pull/#4982))

### [2020-11-12T02:51:51+00:00](https://github.com/leanprover-community/mathlib/commit/509a2242eafcffb57e037a4871839dc92fc77116)
chore(scripts): update nolints.txt ([#4983](https://github.com/leanprover-community/mathlib/pull/#4983))

I am happy to remove some nolints for you!

### [2020-11-12T00:24:20+00:00](https://github.com/leanprover-community/mathlib/commit/f6c8d81c6ced41c1546136e8114e3a4b843c1afe)
feat(algebra/group/with_one): Use an equiv for `lift` ([#4975](https://github.com/leanprover-community/mathlib/pull/#4975))

### [2020-11-12T00:24:16+00:00](https://github.com/leanprover-community/mathlib/commit/49cf28fe980b0ce8008d4713d8b8e64f6d49f13c)
feat(data/matrix): little lemmas on `map` ([#4874](https://github.com/leanprover-community/mathlib/pull/#4874))

I had a couple of expressions involving mapping matrices, that the simplifier didn't `simp` away. It turns out the missing lemmas already existed, just not with the correct form / hypotheses. So here they are.




Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2020-11-11T22:13:41+00:00](https://github.com/leanprover-community/mathlib/commit/67309a44cc58af0496b3d5a7fcf80e887f7d58c9)
refactor(group_theory/group_action): Break the file into three pieces ([#4936](https://github.com/leanprover-community/mathlib/pull/#4936))

I found myself fighting import cycles when trying to define `has_scalar` instances in files that are early in the import tree.
By creating a separate `defs` file with minimal dependencies, this ought to become easier.

This also adds documentation.

None of the proofs or lemma statements have been touched.

### [2020-11-11T19:36:52+00:00](https://github.com/leanprover-community/mathlib/commit/743a10473805ffa0dc114144843cf92935fb21c4)
chore(algebra): trivial lemmas on powers ([#4977](https://github.com/leanprover-community/mathlib/pull/#4977))

### [2020-11-11T18:01:44+00:00](https://github.com/leanprover-community/mathlib/commit/5f098cfda6515e513c2465be159fc1af9625ab95)
chore(topology): 2 trivial lemmas ([#4968](https://github.com/leanprover-community/mathlib/pull/#4968))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-11-11T15:13:36+00:00](https://github.com/leanprover-community/mathlib/commit/d4aabf990714a2e43acafaa90844a227761e9a5c)
doc(type_classes): Explain the use of {} instance arguments ([#4976](https://github.com/leanprover-community/mathlib/pull/#4976))

Closes gh-4660

### [2020-11-11T13:39:21+00:00](https://github.com/leanprover-community/mathlib/commit/60234d181f5a45c74fbcd2ce10d55dd1ce04d913)
chore(algebra/archimedean): add `exists_pow_lt_of_lt_1` ([#4970](https://github.com/leanprover-community/mathlib/pull/#4970))




Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-11-11T13:39:18+00:00](https://github.com/leanprover-community/mathlib/commit/4bf7ae47590fd468d8f38da96cb3fa05569b6f02)
refactor(analysis/normed_space): use `lt` in rescale_to_shell, DRY ([#4969](https://github.com/leanprover-community/mathlib/pull/#4969))

* Use strict inequality for the upper bound in `rescale_to_shell`.
* Deduplicate some proofs about operator norm.
* Add `linear_map.bound_of_shell`, `continuous_linear_map.op_norm_le_of_shell`, and `continuous_linear_map.op_norm_le_of_shell'`.

### [2020-11-11T13:39:16+00:00](https://github.com/leanprover-community/mathlib/commit/e1560a31c8b629bcfc4eeadd38217731efd87088)
feat(measure_theory/borel_space): continuity set of a function is measurable ([#4967](https://github.com/leanprover-community/mathlib/pull/#4967))

* Move the definition of `is_Gδ` and basic lemmas to a separate file.
* Prove that `{x | continuous_at f x}` is a Gδ set provided that the
  codomain is a uniform space with countable basis of the uniformity
  filter (e.g., an `emetric_space`). In particular, this set is
  measurable.
* Rename `nhds_le_uniformity` to `supr_nhds_le_uniformity`.
* Add new `nhds_le_uniformity` without `⨆` in the statement.
* Add `uniform.continuous_at_iff_prod`.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-11-11T10:50:27+00:00](https://github.com/leanprover-community/mathlib/commit/02cdc33fbb88ce6fc12fa0b7ae647605f64c81f7)
chore(algebra/group/hom): Add missing simp lemmas ([#4958](https://github.com/leanprover-community/mathlib/pull/#4958))

These are named in the same pattern as `linear_map.to_add_monoid_hom_coe`

### [2020-11-11T10:50:25+00:00](https://github.com/leanprover-community/mathlib/commit/3d6291ea14b4ad1e270e8b5e5f5788c2cf327d26)
chore(algebra/group/with_one): Use bundled morphisms ([#4957](https://github.com/leanprover-community/mathlib/pull/#4957))

The comment "We have no bundled semigroup homomorphisms" has become false, these exist as `mul_hom`.

This also adds `with_one.coe_mul_hom` and `with_zero.coe_add_hom`

### [2020-11-11T08:22:46+00:00](https://github.com/leanprover-community/mathlib/commit/f30200e5b17a3265b638103e7d47f8e4c83d6b07)
refactor(algebra/free_algebra): Make `lift` an equiv ([#4908](https://github.com/leanprover-community/mathlib/pull/#4908))

This can probably lead to some API cleanup down the line

### [2020-11-11T01:33:41+00:00](https://github.com/leanprover-community/mathlib/commit/c20ecef04d076ab64c101c8ead826861e1976879)
chore(scripts): update nolints.txt ([#4965](https://github.com/leanprover-community/mathlib/pull/#4965))

I am happy to remove some nolints for you!

### [2020-11-10T23:30:00+00:00](https://github.com/leanprover-community/mathlib/commit/5c9e3ef8c8011d8574ae3c3b9ffc98718afd90cd)
feat(ring_theory/adjoin_root): Dimension of adjoin_root ([#4830](https://github.com/leanprover-community/mathlib/pull/#4830))

Adds `adjoin_root.degree_lt_linear_equiv`, the restriction of `adjoin_root.mk f`
to the polynomials of degree less than `f`, viewed as a isomorphism between
vector spaces over `K` and uses it to prove that `adjoin_root f` has dimension
`f.nat_degree`. Also renames `adjoin_root.alg_hom` to `adjoin_root.lift_hom`.



Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2020-11-10T20:04:41+00:00](https://github.com/leanprover-community/mathlib/commit/19bcf65c7357306641edec0b9194e0d6a56ccc76)
chore(data/set/basic): Simp `(⊤ : set α)` to `set.univ` ([#4963](https://github.com/leanprover-community/mathlib/pull/#4963))

### [2020-11-10T11:25:41+00:00](https://github.com/leanprover-community/mathlib/commit/d3fff8a054f671e405ce5dd28ee6f1572e4336db)
feat(data/fin): define `fin.insert_nth` ([#4947](https://github.com/leanprover-community/mathlib/pull/#4947))

Also rename `fin.succ_above_descend` to `fin.succ_above_pred_above`.

### [2020-11-10T11:25:39+00:00](https://github.com/leanprover-community/mathlib/commit/ecbcd3826fe75f66dd643f5c76bb2de9d2fadf7a)
feat(category_theory/closed): cartesian closed category with zero object is trivial ([#4924](https://github.com/leanprover-community/mathlib/pull/#4924))

### [2020-11-10T10:21:55+00:00](https://github.com/leanprover-community/mathlib/commit/55a28c1620eeae2cca055c665ce1af9e52af0f62)
feat(ring_theory/witt_vector/mul_p): multiplication by p as operation on witt vectors ([#4837](https://github.com/leanprover-community/mathlib/pull/#4837))

Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-11-10T08:10:37+00:00](https://github.com/leanprover-community/mathlib/commit/34b7361b07c09068696b0a3fc8d002b8573e9bf3)
feat(algebra/*): Add ring instances to clifford_algebra and exterior_algebra ([#4916](https://github.com/leanprover-community/mathlib/pull/#4916))

To do this, this removes the `irreducible` attributes.

These attributes were present to try and "insulate" the quotient / generator based definitions, and force downstream proofs to use the universal property.

Unfortunately, this irreducibility created massive headaches in typeclass resolution, and the tradeoff for neatness vs usability just isn't worth it.

If someone wants to add back the `irreducible` attributes in future, they now have test-cases that force them not to break the `ring` instances when doing so.

### [2020-11-10T01:07:17+00:00](https://github.com/leanprover-community/mathlib/commit/1ada09b092e8b6fd50d99cd34f9993159587b652)
chore(scripts): update nolints.txt ([#4961](https://github.com/leanprover-community/mathlib/pull/#4961))

I am happy to remove some nolints for you!

### [2020-11-09T22:52:35+00:00](https://github.com/leanprover-community/mathlib/commit/e8758ae0f34528d212dd5779e4df45623520f201)
feat(measure_theory/*): a few lemmas about `(is_)measurable` in `Π i, π i` ([#4948](https://github.com/leanprover-community/mathlib/pull/#4948))

### [2020-11-09T13:01:10+00:00](https://github.com/leanprover-community/mathlib/commit/09afb0465df681c12c2e53d8fb88e7c6ff7e807f)
feat(ring_theory/polynomial/content): Gauss's Lemma (irreducibility criterion) ([#4861](https://github.com/leanprover-community/mathlib/pull/#4861))

Proves that a primitive polynomial is irreducible iff it is irreducible over the fraction field

### [2020-11-09T10:48:50+00:00](https://github.com/leanprover-community/mathlib/commit/fdbfe755b7174f727f084379d16c7c75f3abfc0a)
chore(group_theory/group_action): Rename some group_action lemmas ([#4946](https://github.com/leanprover-community/mathlib/pull/#4946))

This renames
* These lemmas about `group α`, for consistency with `smul_neg` etc, which are in the global scope:
  * `mul_action.inv_smul_smul` → `inv_smul_smul`
  * `mul_action.smul_inv_smul` → `smul_inv_smul`
  * `mul_action.inv_smul_eq_iff` → `inv_smul_eq_iff`
  * `mul_action.eq_inv_smul_iff` → `eq_inv_smul_iff`
* These lemmas about `group_with_zero α`, for consistency with `smul_inv_smul'` etc, which have trailing `'`s (and were added in [#2693](https://github.com/leanprover-community/mathlib/pull/#2693), while the `'`-less ones were added later):
  * `inv_smul_eq_iff` → `inv_smul_eq_iff'`
  * `eq_inv_smul_iff` → `eq_inv_smul_iff'`

### [2020-11-09T05:45:56+00:00](https://github.com/leanprover-community/mathlib/commit/22b61b2676efa993a9380a637373da1e6c5d85bb)
feat(topology/subset_properties): separated of discrete ([#4952](https://github.com/leanprover-community/mathlib/pull/#4952))

As [requested on Zulip](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/totally.20disconnected.20of.20discrete/near/216021581).

### [2020-11-09T03:25:54+00:00](https://github.com/leanprover-community/mathlib/commit/e1c333dcced1edb08ed05de3ab09f3bd29184fb8)
chore(data/finset/basic): remove inter_eq_sdiff_sdiff ([#4953](https://github.com/leanprover-community/mathlib/pull/#4953))

This is a duplicate of sdiff_sdiff_self_left

### [2020-11-09T00:48:26+00:00](https://github.com/leanprover-community/mathlib/commit/40f673ee5962d4e99573b8a8fa2a89afad573f84)
feat(data/set/intervals/pi): lemmas about intervals in `Π i, π i` ([#4951](https://github.com/leanprover-community/mathlib/pull/#4951))

Also add missing lemmas `Ixx_mem_nhds` and lemmas `pi_Ixx_mem_nhds`.
For each `pi_Ixx_mem_nhds` I add a non-dependent version
`pi_Ixx_mem_nhds'` because sometimes Lean fails to unify different
instances while trying to apply the dependent version to `ι → ℝ`.

### [2020-11-08T18:51:05+00:00](https://github.com/leanprover-community/mathlib/commit/dcb8576b553e2b36c61435e5a63b3862ce5e853f)
chore(data/finset/basic): trivial simp lemmas ([#4950](https://github.com/leanprover-community/mathlib/pull/#4950))

### [2020-11-08T18:51:03+00:00](https://github.com/leanprover-community/mathlib/commit/de2f1b2a918679841553e558091d569600f878e1)
feat(data/set/intervals/basic): collection of lemmas of the form I??_of_I?? ([#4918](https://github.com/leanprover-community/mathlib/pull/#4918))

Some propositions about intervals that I thought may be useful (despite their simplicity).

### [2020-11-08T16:26:23+00:00](https://github.com/leanprover-community/mathlib/commit/14a7c39d2a2f519203075305f8955e0ed5daab34)
chore(data/finset/basic): use `has_coe_t` for coercion of `finset` to `set` ([#4917](https://github.com/leanprover-community/mathlib/pull/#4917))

### [2020-11-08T01:11:01+00:00](https://github.com/leanprover-community/mathlib/commit/26e4f15f67fee3883aabe217790f8bbdf7460566)
chore(scripts): update nolints.txt ([#4944](https://github.com/leanprover-community/mathlib/pull/#4944))

I am happy to remove some nolints for you!

### [2020-11-07T21:27:41+00:00](https://github.com/leanprover-community/mathlib/commit/e7d40ef376fb0168b790c39c313916d07d63c760)
refactor(*): Move an instance to a more appropriate file ([#4939](https://github.com/leanprover-community/mathlib/pull/#4939))

In its former location, this instance related neither to the section it was the sole resident of, nor even to the file.

### [2020-11-07T20:15:40+00:00](https://github.com/leanprover-community/mathlib/commit/5fed35bf65c9595c695f5d17c88411ccab52efd3)
chore(docs/100): fix typo ([#4937](https://github.com/leanprover-community/mathlib/pull/#4937))

### [2020-11-07T20:15:38+00:00](https://github.com/leanprover-community/mathlib/commit/c2ab384fd82b647bd0c7b77cd6316a6849482056)
feat(category_theory/limits/preserves): convenience defs for things already there ([#4933](https://github.com/leanprover-community/mathlib/pull/#4933))

### [2020-11-07T19:06:12+00:00](https://github.com/leanprover-community/mathlib/commit/9a0ba0824c762deab3b5cbea55057b9db7c649df)
feat(category_theory/limits/preserves): transfer preserving limits through nat iso ([#4932](https://github.com/leanprover-community/mathlib/pull/#4932))

- Move two defs higher in the file
- Shorten some proofs using newer lemmas
- Show that we can transfer preservation of limits through natural isomorphism in the functor.

### [2020-11-07T19:06:10+00:00](https://github.com/leanprover-community/mathlib/commit/c494db5c730f3b68f662317811f6e328053f105c)
feat(category_theory/limits/shapes/equalizers): equalizer comparison map ([#4927](https://github.com/leanprover-community/mathlib/pull/#4927))

### [2020-11-07T18:00:08+00:00](https://github.com/leanprover-community/mathlib/commit/11368e1b50d2c8ebb40c43637feca1c7a53c94ea)
feat(category_theory/limits/preserves): transfer reflecting limits through nat iso ([#4934](https://github.com/leanprover-community/mathlib/pull/#4934))

### [2020-11-07T08:45:59+00:00](https://github.com/leanprover-community/mathlib/commit/655b617197c44416182e912016847c7d1eaefeea)
feat(category_theory/limits/preserves/shapes/products): preserve products ([#4857](https://github.com/leanprover-community/mathlib/pull/#4857))

A smaller part of [#4716](https://github.com/leanprover-community/mathlib/pull/#4716), for just products.

This also renames the file `preserves/shapes.lean` to `preserves/shapes/products.lean`, since I want a similar API for other special shapes and it'd get too big otherwise. 

Of the declarations which were already present: `preserves_products_iso`, `preserves_products_iso_hom_π`, `map_lift_comp_preserves_products_iso_hom`, the first is still there but with weaker assumptions, and the other two are now provable by simp (under weaker assumptions again).

### [2020-11-07T01:11:14+00:00](https://github.com/leanprover-community/mathlib/commit/c4e8d748cf723d98b7c6b7696f166501391a290f)
chore(scripts): update nolints.txt ([#4926](https://github.com/leanprover-community/mathlib/pull/#4926))

I am happy to remove some nolints for you!

### [2020-11-06T20:34:51+00:00](https://github.com/leanprover-community/mathlib/commit/8ba0ddef90b348b0fdc4ff2cfdb2dd787affb128)
chore(data/polynomial/monic): speedup next_coeff_mul ([#4920](https://github.com/leanprover-community/mathlib/pull/#4920))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-11-06T20:34:49+00:00](https://github.com/leanprover-community/mathlib/commit/e0cf0d37e19c56f2950f8078a21febb5057f0f5f)
fix(meta/expr): adjust is_likely_generated_binder_name to lean[#490](https://github.com/leanprover-community/mathlib/pull/#490) ([#4915](https://github.com/leanprover-community/mathlib/pull/#4915))

Lean PR 490 changed Lean's strategy for generating binder names. This PR adapts
`name.is_likely_generated_binder_name`, which checks whether a binder name was
likely generated by Lean (rather than given by the user).

### [2020-11-06T19:17:20+00:00](https://github.com/leanprover-community/mathlib/commit/b6b41c10f2db12e1b2ab270b6469293397222ca6)
feat(category_theory/limits/creates): composition creates limits ([#4922](https://github.com/leanprover-community/mathlib/pull/#4922))

### [2020-11-06T19:17:18+00:00](https://github.com/leanprover-community/mathlib/commit/4f673bde961e1ef73a131cc7f0ca67d4812d8bf3)
feat(category_theory/limits/preserves): instances for composition preserving limits ([#4921](https://github.com/leanprover-community/mathlib/pull/#4921))

A couple of quick instances. I'm pretty sure these instances don't cause clashes since they're for subsingleton classes, and they shouldn't cause loops since they're just other versions of instances already there.

### [2020-11-06T16:08:51+00:00](https://github.com/leanprover-community/mathlib/commit/bddc5c9e6f3edde1e1fe58c154518eefccce5b4e)
feat(category_theory/limits): equivalence creates colimits ([#4923](https://github.com/leanprover-community/mathlib/pull/#4923))

Dualises and tidy proofs already there

### [2020-11-06T14:57:51+00:00](https://github.com/leanprover-community/mathlib/commit/91f8e687831067585e6f1e368a1bc30281df3f47)
feat(src/ring_theory/polynomial/cyclotomic): cyclotomic polynomials ([#4914](https://github.com/leanprover-community/mathlib/pull/#4914))

I have added some basic results about cyclotomic polynomials. I defined them as the polynomial, with integer coefficients, that lifts the complex polynomial ∏ μ in primitive_roots n ℂ, (X - C μ). I proved that the degree of cyclotomic n is totient n and the product formula for X ^ n - 1. I plan to prove the irreducibility in the near future.

This was in [4869](https://github.com/leanprover-community/mathlib/pull/4869) before I splitted that PR. Compared to it, I added the definition of `cyclotomic n R` for any ring `R` (still using the polynomial with coefficients in `ℤ`) and some easy lemmas, especially `cyclotomic_of_ring_hom`, `cyclotomic'_eq_X_pow_sub_one_div` `cyclotomic_eq_X_pow_sub_one_div`, and `cycl_eq_cycl'`.

### [2020-11-06T10:17:40+00:00](https://github.com/leanprover-community/mathlib/commit/747aaae9fe61e7c5c9eab1f7cf4649714668f5b2)
chore(algebra/lie/basic): Add some missing simp lemmas about A →ₗ⁅R⁆ B ([#4912](https://github.com/leanprover-community/mathlib/pull/#4912))

These are mostly inspired by lemmas in linear_map. All the proofs are either `rfl` or copied from a proof for `linear_map`.

### [2020-11-06T01:10:55+00:00](https://github.com/leanprover-community/mathlib/commit/fd3212c39d39dab1174fada57c7de6bf32b98bc8)
chore(scripts): update nolints.txt ([#4919](https://github.com/leanprover-community/mathlib/pull/#4919))

I am happy to remove some nolints for you!

### [2020-11-05T18:57:18+00:00](https://github.com/leanprover-community/mathlib/commit/a12d6772184ba9c1bf770198a905259868aebc29)
feat(ring_theory): define a `power_basis` structure ([#4905](https://github.com/leanprover-community/mathlib/pull/#4905))

This PR defines a structure `power_basis`. If `S` is an `R`-algebra, `pb : power_basis R S` states that `S` (as `R`-module) has basis `1`, `pb.gen`, ..., `pb.gen ^ (pb.dim - 1)`. Since there are multiple possible choices, I decided to not make it a typeclass.

Three constructors for `power_basis` are included: `algebra.adjoin`, `intermediate_field.adjoin` and `adjoin_root`. Each of these is of the form `power_basis K _` with `K` a field, at least until `minimal_polynomial` gets better support for rings.

### [2020-11-05T17:06:55+00:00](https://github.com/leanprover-community/mathlib/commit/246df99f6659620a5a050c5cf3df3b40303e0a82)
feat(category_theory/limits): Any small complete category is a preorder ([#4907](https://github.com/leanprover-community/mathlib/pull/#4907))

Show that any small complete category has subsingleton homsets.

Not sure if this is useful for anything - maybe it shouldn't be an instance

### [2020-11-05T17:06:53+00:00](https://github.com/leanprover-community/mathlib/commit/40245977061f5f79f5688fc788a0d6c7772216d2)
feat(category_theory/limits/presheaf): left adjoint if preserves colimits ([#4896](https://github.com/leanprover-community/mathlib/pull/#4896))

### [2020-11-05T17:06:51+00:00](https://github.com/leanprover-community/mathlib/commit/6a1ce57b11f0ef208cd72a043fb42fea3bd32124)
chore(algebra/module/linear_map): Derive linear_map from mul_action_hom ([#4888](https://github.com/leanprover-community/mathlib/pull/#4888))


Note that this required some stuff about polynomials to move to cut import cycles.

### [2020-11-05T15:43:26+00:00](https://github.com/leanprover-community/mathlib/commit/2f07ff21e6b3d6c6fa80dabdfc0e7ffbd9f337e2)
chore(topology/metric_space): more `norm_cast` lemmas, golf proofs ([#4911](https://github.com/leanprover-community/mathlib/pull/#4911))

### [2020-11-05T01:07:58+00:00](https://github.com/leanprover-community/mathlib/commit/834d491dd7c0aa0ed423bf1253d6d56182f6aa6e)
chore(scripts): update nolints.txt ([#4910](https://github.com/leanprover-community/mathlib/pull/#4910))

I am happy to remove some nolints for you!

### [2020-11-04T21:59:56+00:00](https://github.com/leanprover-community/mathlib/commit/189063b1104958237274a0b5f4167fb5b39a85ea)
chore(data/W): rename `W` to `W_type` ([#4909](https://github.com/leanprover-community/mathlib/pull/#4909))

Having a single character identifier in the root namespace is inconvenient.

closes leanprover-community/doc-gen[#83](https://github.com/leanprover-community/mathlib/pull/#83)



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-11-04T18:37:41+00:00](https://github.com/leanprover-community/mathlib/commit/5a61ef1981738b829ff712cab18e63a675108c40)
feat(ring_theory/witt_vector/teichmuller): Teichmuller representatives ([#4690](https://github.com/leanprover-community/mathlib/pull/#4690))

Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>




Co-authored-by: Vierkantor <vierkantor@vierkantor.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-11-04T16:04:42+00:00](https://github.com/leanprover-community/mathlib/commit/211b0c05eb53538225a8087a774575efe818c204)
feat(logic/basic): forall2_congr lemmas ([#4904](https://github.com/leanprover-community/mathlib/pull/#4904))

Some helpful lemmas for working with quantifiers, just other versions of what's already there.

### [2020-11-04T16:04:40+00:00](https://github.com/leanprover-community/mathlib/commit/0081a5a43c3d2727509e92e7bc3691d8ba9bfa44)
feat(ring_theory/algebraic): if `L / K` is algebraic, then the subalgebras are fields ([#4903](https://github.com/leanprover-community/mathlib/pull/#4903))

### [2020-11-04T14:06:15+00:00](https://github.com/leanprover-community/mathlib/commit/e303a7d9fd709bbe9e3c5615ee73e6ba9dd6f09e)
feat(linear_algebra/tensor_product): tensoring linear maps with modules ([#4771](https://github.com/leanprover-community/mathlib/pull/#4771))

### [2020-11-04T08:09:46+00:00](https://github.com/leanprover-community/mathlib/commit/6f72c22858cf892bc89041a0649d4f1af42580f3)
chore(data/finset): add a few lemmas ([#4901](https://github.com/leanprover-community/mathlib/pull/#4901))

### [2020-11-04T08:09:42+00:00](https://github.com/leanprover-community/mathlib/commit/08770779de2d61186a62d20a9324bdd7b52f79ac)
chore(analysis/calculus/times_cont_diff): a few missing lemmas ([#4900](https://github.com/leanprover-community/mathlib/pull/#4900))

* add `times_cont_diff_within_at_iff_forall_nat_le` and `times_cont_diff_on_iff_forall_nat_le`;
* add `times_cont_diff_on_all_iff_nat` and `times_cont_diff_all_iff_nat`;
* rename `times_cont_diff_at.differentiable` to `times_cont_diff_at.differentiable_at`;
* add `times_cont_diff.div_const`;
* add `times_cont_diff_succ_iff_deriv`
* move some `of_le` lemmas up to support minor golfing of proofs.

### [2020-11-04T08:09:40+00:00](https://github.com/leanprover-community/mathlib/commit/beb6831f7be3a1dabe37f08f1f9aabd966f6721d)
feat(analysis/calculus/times_cont_diff): add `restrict_scalars` ([#4899](https://github.com/leanprover-community/mathlib/pull/#4899))

Add `restrict_scalars` lemmas to `has_ftaylor_series_up_to_on`,
`times_cont_diff_within_at`, `times_cont_diff_on`,
`times_cont_diff_at`, and `times_cont_diff`.

### [2020-11-04T08:09:38+00:00](https://github.com/leanprover-community/mathlib/commit/b7991c0a7f984031d6cdb4a7f27fbf0868cc0d9b)
feat(category_theory/limits/cones): map_cone and postcompose lemmas ([#4894](https://github.com/leanprover-community/mathlib/pull/#4894))

### [2020-11-04T08:09:36+00:00](https://github.com/leanprover-community/mathlib/commit/7d6f37dc07f3553b6761dcb12adfe99f57acbe97)
feat(category_theory/closed/cartesian): product preserves colimits ([#4893](https://github.com/leanprover-community/mathlib/pull/#4893))

### [2020-11-04T08:09:35+00:00](https://github.com/leanprover-community/mathlib/commit/e1d60fdabcec1f4afb96e0b7777a57a64a3d1ca0)
feat(data/equiv): exists unique congr ([#4890](https://github.com/leanprover-community/mathlib/pull/#4890))

### [2020-11-04T08:09:31+00:00](https://github.com/leanprover-community/mathlib/commit/d88042c173585f58ffc953dd5c76f1272e0280a6)
feat(order/filter/at_top_bot): lemmas about `map/comap` of `at_top`/`at_bot` ([#4878](https://github.com/leanprover-community/mathlib/pull/#4878))

* Redefine `at_top`/`at_bot` using `Ici`/`Iic`.
* Add lemmas about `map`/`comap` of `at_top`/`at_bot` under `coe : s → α`, where `s` is one of `Ici a`, `Iic a`, `Ioi a`, `Iio a`.

### [2020-11-04T05:43:18+00:00](https://github.com/leanprover-community/mathlib/commit/7ab3ca854defd58cf5852161f55d13aedad5bf99)
feat(data/quaternion): define quaternions and prove some basic properties ([#2339](https://github.com/leanprover-community/mathlib/pull/#2339))

### [2020-11-04T01:36:53+00:00](https://github.com/leanprover-community/mathlib/commit/16e38718f184cdb9e724bb6dc4792c89378f72ec)
chore(scripts): update nolints.txt ([#4898](https://github.com/leanprover-community/mathlib/pull/#4898))

I am happy to remove some nolints for you!

### [2020-11-04T00:20:10+00:00](https://github.com/leanprover-community/mathlib/commit/23a2767d2dfaea1e134a1fc3a282955644ed0482)
feat(category_theory/yoneda): type level yoneda equivalence ([#4889](https://github.com/leanprover-community/mathlib/pull/#4889))

Broken off from [#4608](https://github.com/leanprover-community/mathlib/pull/#4608).

### [2020-11-03T21:30:18+00:00](https://github.com/leanprover-community/mathlib/commit/505097f4e857f0eea35ffe1a650a36aa928b3a6a)
feat(order): countable categoricity of dense linear orders ([#2860](https://github.com/leanprover-community/mathlib/pull/#2860))

We construct an order isomorphism between any two countable, nonempty, dense linear orders without endpoints, using the back-and-forth method.

### [2020-11-03T20:37:43+00:00](https://github.com/leanprover-community/mathlib/commit/712a0b7508cd64244c88a2f2d4268328028df2d4)
chore(algebra/lie): adjoint rep of lie algebra uses lowercase `ad` ([#4891](https://github.com/leanprover-community/mathlib/pull/#4891))

The uppercase is for Lie groups




Co-authored-by: Oliver Nash <oliver.nash@gmail.com>

### [2020-11-03T17:56:57+00:00](https://github.com/leanprover-community/mathlib/commit/e88a5bb5a2658285ed05dbb37a98e0801851b8d8)
feat(*): assorted prereqs for cyclotomic polynomials ([#4887](https://github.com/leanprover-community/mathlib/pull/#4887))

This is hopefully my last preparatory PR for cyclotomic polynomials. It was in [4869](https://github.com/leanprover-community/mathlib/pull/4869) .


Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-11-03T17:56:54+00:00](https://github.com/leanprover-community/mathlib/commit/b37d4a3dc94fdd81dd211febbc8526cf7f61586b)
feat(category_theory/limits/types): ext iff lemma ([#4883](https://github.com/leanprover-community/mathlib/pull/#4883))

A little lemma which sometimes makes it easier to work with limits in type.

### [2020-11-03T17:56:52+00:00](https://github.com/leanprover-community/mathlib/commit/6bed7d4f09271e195b44fa90a1b5e8d48d7bdb22)
fix(tactic/interactive): issue where long term tooltips break layout ([#4882](https://github.com/leanprover-community/mathlib/pull/#4882))

For issue description see https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget.20v.20long.20term.20names

Basically the problem is that if the little 'argument pills' in the tooltip are too long, then there is a fight between the expression linebreaking algorithm and the pill linebreaking algorithm and something gets messed up.

A first attempt to fix this is to use flexbox for laying out the pills.
Still some issues with expressions linebreaking weirdly to sort out before this should be pulled.
Need to find a mwe that I can put in a file without a huge dependency tree.

### [2020-11-03T17:56:50+00:00](https://github.com/leanprover-community/mathlib/commit/4f8c490fa3c3086f55427f664db7742ecf88b852)
feat(tactic/mk_iff_of_inductive_prop): mk_iff attribute ([#4863](https://github.com/leanprover-community/mathlib/pull/#4863))

This attribute should make `mk_iff_of_inductive_prop` easier to use.

### [2020-11-03T15:50:10+00:00](https://github.com/leanprover-community/mathlib/commit/918e28ca70920301bed9c14a023a0b147a1e13c7)
feat(category_theory/limits/types): explicit description of equalizers in Type ([#4880](https://github.com/leanprover-community/mathlib/pull/#4880))

Cf https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/concrete.20limits.20in.20Type.

Adds equivalent conditions for a fork in Type to be a equalizer, and a proof that the subtype is an equalizer.

(cc: @adamtopaz @kbuzzard)

### [2020-11-03T15:50:08+00:00](https://github.com/leanprover-community/mathlib/commit/34c3668e556496da77f163ae7d162aa5ed729de4)
chore(data/set/intervals/ord_connected): make it more useful as a typeclass ([#4879](https://github.com/leanprover-community/mathlib/pull/#4879))

* Add `protected lemma set.Icc_subset` that looks for
  `ord_connected s` instance.
* Add `instance` versions to more lemmas.
* Add `ord_connected_pi`.

### [2020-11-03T15:50:06+00:00](https://github.com/leanprover-community/mathlib/commit/9851a8865e7e401d1e6eb52d3413f0e1722f9384)
feat(*/multilinear): define `(continuous_)multilinear_map.restrict_scalars` ([#4872](https://github.com/leanprover-community/mathlib/pull/#4872))

I'm going to use these definitions to prove
`times_cont_diff_at.restrict_scalars` etc.

### [2020-11-03T15:50:04+00:00](https://github.com/leanprover-community/mathlib/commit/63d109fe2ebbbe98424bc09158aac6d37bc334cc)
chore(category_theory/limits): Use `lim_map` over `lim.map` ([#4856](https://github.com/leanprover-community/mathlib/pull/#4856))

Modify the simp-normal form for `lim.map` to be `lim_map` instead, and express lemmas in terms of `lim_map` instead, as well as use it in special shapes so that the assumptions can be weakened.

### [2020-11-03T15:50:02+00:00](https://github.com/leanprover-community/mathlib/commit/b26fc59f3e3aeee454b4a475452e01ce8ad7a494)
feat(category_theory/limits/shapes/products): pi comparison morphism ([#4855](https://github.com/leanprover-community/mathlib/pull/#4855))

### [2020-11-03T14:17:25+00:00](https://github.com/leanprover-community/mathlib/commit/5275628128e5ce84ba4fa3e51ae72f4b719d5163)
feat(algebra/operations): add three lemmas ([#4864](https://github.com/leanprover-community/mathlib/pull/#4864))

Add lemmas `one_le_inv`, `self_le_self_inv` and `self_inv_le_one`



Co-authored-by: faenuccio <65080144+faenuccio@users.noreply.github.com>

### [2020-11-03T09:26:45+00:00](https://github.com/leanprover-community/mathlib/commit/c2b6220ca501ec3544de0cbb34c1fed8ad603fd6)
feat(linear_algebra/matrix): `det (reindex e e A) = det A` ([#4875](https://github.com/leanprover-community/mathlib/pull/#4875))

This PR includes four flavours of this lemma: `det_reindex_self'` is the `simp` lemma that doesn't include the actual term `reindex` as a subexpression (because that would be already `simp`ed away by `reindex_apply`). `det_reindex_self`, `det_reindex_linear_equiv_self` and `det_reindex_alg_equiv` include their respective function in the lemma statement.




Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2020-11-03T01:06:41+00:00](https://github.com/leanprover-community/mathlib/commit/57ee216245aa666ce7d0e18f7fb4cb3ff1ae5391)
chore(scripts): update nolints.txt ([#4884](https://github.com/leanprover-community/mathlib/pull/#4884))

I am happy to remove some nolints for you!

### [2020-11-02T22:24:06+00:00](https://github.com/leanprover-community/mathlib/commit/0e4f8f4191a56453d10f955bb421b1ff6ccc81db)
chore(scripts): typo in yaml_check ([#4881](https://github.com/leanprover-community/mathlib/pull/#4881))

### [2020-11-02T22:24:05+00:00](https://github.com/leanprover-community/mathlib/commit/dae87bcd3b5257b5afa010f5bb17d2670c4ca05c)
chore(data/finsupp/basic): Remove finsupp.leval which duplicates finsupp.lapply ([#4876](https://github.com/leanprover-community/mathlib/pull/#4876))

### [2020-11-02T20:27:42+00:00](https://github.com/leanprover-community/mathlib/commit/5334f48b355b5e8111a87cdc5ca5ff18d00885f1)
chore(data/fintype/card): add a few lemmas ([#4877](https://github.com/leanprover-community/mathlib/pull/#4877))

Prove a few versions of `(∏ i in s, f i) * (∏ i in sᶜ, f i) = ∏ i, f i`

### [2020-11-02T18:45:02+00:00](https://github.com/leanprover-community/mathlib/commit/13a104d9f0dae261dc52c75065f91de9a8d54ea1)
chore({data,linear_algebra}/dfinsupp): Move linear_algebra stuff to its own file ([#4873](https://github.com/leanprover-community/mathlib/pull/#4873))

This makes the layout of files about `dfinsupp` resemble those of `finsupp` a little better.

This also:
* Renames type arguments to match the names of those in finsupp
* Adjusts argument explicitness to match those in finsupp
* Adds `dfinsupp.lapply` to match `finsupp.lapply`

### [2020-11-02T17:17:23+00:00](https://github.com/leanprover-community/mathlib/commit/6587e8409c30abc3fae1be5b1f48aeea78f20ba0)
feat(algebra/algebra/subalgebra): subalgebras, when seen as submodules, are idempotent ([#4854](https://github.com/leanprover-community/mathlib/pull/#4854))

### [2020-11-02T14:44:02+00:00](https://github.com/leanprover-community/mathlib/commit/0aa6aed99743ca5c58c7dda085a71328fafa7175)
chore(order/basic): move `strict_mono_coe`to `subtype` NS ([#4870](https://github.com/leanprover-community/mathlib/pull/#4870))

Also add `subtype.mono_coe`

### [2020-11-02T04:55:03+00:00](https://github.com/leanprover-community/mathlib/commit/309df10afd7ebbb4acf723627f611b2bee7a48b1)
refactor(data/list/basic,...): more explicit args ([#4866](https://github.com/leanprover-community/mathlib/pull/#4866))

This makes the `p` in most lemmas involving the following functions explicit, following the usual explicitness conventions:
- `list.filter`,
- `list.countp`,
- `list.take_while`,
- `multiset.filter`,
- `multiset.countp`,
- `finset.filter`

### [2020-11-02T04:55:01+00:00](https://github.com/leanprover-community/mathlib/commit/556079b4514c6ca9b45cd2cc11869c6f96b915b3)
feat(ring_theory/polynomial/content): monic polynomials are primitive ([#4862](https://github.com/leanprover-community/mathlib/pull/#4862))

Adds the lemma `monic.is_primitive`.

### [2020-11-02T02:10:46+00:00](https://github.com/leanprover-community/mathlib/commit/ecdc319768997697d687fc4381fc47b8ce4b04fa)
fix(tactic/simpa): reflect more simp errors ([#4865](https://github.com/leanprover-community/mathlib/pull/#4865))

fixes [#2061](https://github.com/leanprover-community/mathlib/pull/#2061)

### [2020-11-02T01:12:55+00:00](https://github.com/leanprover-community/mathlib/commit/7c8868d8cd6bd734e203f7cc2311fb2840bb6e74)
chore(scripts): update nolints.txt ([#4868](https://github.com/leanprover-community/mathlib/pull/#4868))

I am happy to remove some nolints for you!

### [2020-11-01T17:55:51+00:00](https://github.com/leanprover-community/mathlib/commit/4aa087aa4b424a64a4673cee7fbf670aac04470a)
doc(*): work around markdown2 bug for now ([#4842](https://github.com/leanprover-community/mathlib/pull/#4842))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-11-01T01:07:16+00:00](https://github.com/leanprover-community/mathlib/commit/7a624b8892acbef485e3ad041398c77967ca5f64)
chore(scripts): update nolints.txt ([#4860](https://github.com/leanprover-community/mathlib/pull/#4860))

I am happy to remove some nolints for you!

### [2020-10-31T22:44:12+00:00](https://github.com/leanprover-community/mathlib/commit/6f7c53944fc28ee54bddd4f5049a0ae269b4c23e)
docs(order/complete_lattice): make two docstrings more detailed ([#4859](https://github.com/leanprover-community/mathlib/pull/#4859))

Following [discussion](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Constructing.20a.20complete.20lattice), clarify information about how to construct a complete lattice while preserving good definitional equalities.

### [2020-10-31T20:22:31+00:00](https://github.com/leanprover-community/mathlib/commit/51cbb836d87f1502d2efdbb1eff251ffe27addae)
refactor(tactic/norm_num): move norm_num extensions ([#4822](https://github.com/leanprover-community/mathlib/pull/#4822))

[#4820](https://github.com/leanprover-community/mathlib/pull/#4820) adds the long awaited ability for `norm_num` to be extended in other files. There are two norm_num extensions currently in mathlib: `norm_digits`, which was previously exposed as a standalone tactic, and `eval_prime`, which was a part of `norm_num` and so caused `tactic.norm_num` to depend on `data.nat.prime`. This PR turns both of these into norm_num extensions, and changes the dependencies so that `data.nat.prime` can import `norm_num` rather than the other way around (which required splitting `pnat` primality and gcd facts to their own file).



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-10-31T17:41:26+00:00](https://github.com/leanprover-community/mathlib/commit/be161d119ac3ee06db86b7429201e4ea281e13f2)
feat(category_theory/sites): functor inclusion constructions ([#4845](https://github.com/leanprover-community/mathlib/pull/#4845))

### [2020-10-31T17:41:24+00:00](https://github.com/leanprover-community/mathlib/commit/d91c8785d418f74c80e3bbfbc4ad9ca165eed8f4)
chore(group_theory/group_action): introduce `smul_comm_class` ([#4770](https://github.com/leanprover-community/mathlib/pull/#4770))

### [2020-10-31T15:07:49+00:00](https://github.com/leanprover-community/mathlib/commit/9a03bdf1c52ad2a370128df3870ffa09ad217f84)
chore(algebra/ordered_group): use implicit args, add `add_eq_coe` ([#4853](https://github.com/leanprover-community/mathlib/pull/#4853))

* Use implicit arguments in various `iff` lemmas about `with_top`.
* Add `add_eq_coe`.
* Rewrite `with_top.ordered_add_comm_monoid` moving `begin .. end` blocks inside the structure.

This way we don't depend on the fact that `refine` doesn't introduce any `id`s and it's easier to see right away which block proves which statement.

### [2020-10-31T13:30:44+00:00](https://github.com/leanprover-community/mathlib/commit/e14c37827456fc6707f31b4d1d16f1f3a3205e91)
refactor(order/filter): move some proofs to `bases` ([#3478](https://github.com/leanprover-community/mathlib/pull/#3478))

Move some proofs to `order/filter/bases` and add `filter.has_basis` versions.

Non-bc API changes:

* `filter.inf_ne_bot_iff`; change `∀ {U V}, U ∈ f → V ∈ g → ...` to `∀ ⦃U⦄, U ∈ f → ∀ ⦃V⦄, V ∈ g → ...`
  so that `simp` lemmas about `∀ U ∈ f` can further simplify the result;
* `filter.inf_eq_bot_iff`: similarly, change `∃ U V, ...` to `∃ (U ∈ f) (V ∈ g), ...`
* `cluster_pt_iff`: similarly, change `∀ {U V : set α}, U ∈ 𝓝 x → V ∈ F → ...` to
  `∀ ⦃U : set α⦄ (hU : U ∈ 𝓝 x) ⦃V⦄ (hV : V ∈ F), ...`

### [2020-10-31T08:44:02+00:00](https://github.com/leanprover-community/mathlib/commit/f9c8abe373079b775d8681e6d21c7f6554f5346a)
chore(data/finset/basic): a few lemmas about `finset.piecewise` ([#4852](https://github.com/leanprover-community/mathlib/pull/#4852))

### [2020-10-31T08:44:00+00:00](https://github.com/leanprover-community/mathlib/commit/7756265e6f2d336b1d711b9a854d81a6b74cabb1)
chore(linear_algebra/affine_space/ordered): compare endpoints to midpoint ([#4851](https://github.com/leanprover-community/mathlib/pull/#4851))

### [2020-10-31T08:43:59+00:00](https://github.com/leanprover-community/mathlib/commit/1f6162140f1d138087341c9698828553d123b49a)
feat(linear_algebra/affine_space/affine_map): add `affine_map.proj` ([#4850](https://github.com/leanprover-community/mathlib/pull/#4850))

### [2020-10-31T08:43:57+00:00](https://github.com/leanprover-community/mathlib/commit/6a449305ac203bb6644f38a831217ea7ef1cb27b)
refactor(data/pnat): move data.pnat.prime ([#4839](https://github.com/leanprover-community/mathlib/pull/#4839))

Remove the dependency `data.pnat.basic -> data.nat.prime`. Needed for [#4822](https://github.com/leanprover-community/mathlib/pull/#4822).

### [2020-10-31T08:43:55+00:00](https://github.com/leanprover-community/mathlib/commit/3b2c97f90eab6cc96171e8e130ab1e0d2048bac6)
feat(data/dfinsupp): Port `finsupp.lsum` and lemmas about `lift_add_hom` ([#4833](https://github.com/leanprover-community/mathlib/pull/#4833))

This then removes the proofs of any `direct_sum` lemmas which become equivalent to the `lift_add_hom` lemmas

### [2020-10-31T08:43:53+00:00](https://github.com/leanprover-community/mathlib/commit/17697a6019c78b58cc6f59f0d03df197a69faa28)
feat(data/dfinsupp): Add dfinsupp.single_eq_single_iff, and subtype.heq_iff_coe_eq ([#4810](https://github.com/leanprover-community/mathlib/pull/#4810))

This ought to make working with dfinsupps over subtypes easier

### [2020-10-31T06:18:28+00:00](https://github.com/leanprover-community/mathlib/commit/67c2b5a0283c231fe92aabe7d9bd069509330199)
feat(analysis/normed_space/add_torsor): distance to midpoint ([#4849](https://github.com/leanprover-community/mathlib/pull/#4849))

### [2020-10-31T06:18:25+00:00](https://github.com/leanprover-community/mathlib/commit/1521da6821681bd1d916b4f894f9a73ebc3a4e78)
feat(order/conditionally_complete_lattice): nested intervals lemma ([#4848](https://github.com/leanprover-community/mathlib/pull/#4848))

* Add a few versions of the nested intervals lemma.
* Add `pi`-instance for `conditionally_complete_lattice`.

### [2020-10-31T06:18:24+00:00](https://github.com/leanprover-community/mathlib/commit/f5fd2186113f21d158503e7a6b167b92d96386f8)
feat(algebra/module/ordered): add pi instance ([#4847](https://github.com/leanprover-community/mathlib/pull/#4847))

### [2020-10-31T06:18:21+00:00](https://github.com/leanprover-community/mathlib/commit/6fc351758e04b3ba07140c96c8a557ebf18cd636)
feat(category_theory/sites): generate lemmas ([#4840](https://github.com/leanprover-community/mathlib/pull/#4840))

A couple of simple lemmas about the sieve generated by certain presieves.

### [2020-10-31T06:18:19+00:00](https://github.com/leanprover-community/mathlib/commit/517f0b5c5bcb134199bf8cadfd66ba55d1cab90c)
feat(ring_theory/polynomial/basic): prerequisites for galois_definition ([#4829](https://github.com/leanprover-community/mathlib/pull/#4829))



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-31T06:18:16+00:00](https://github.com/leanprover-community/mathlib/commit/0f39d7adf3ba92e193d6648ddec4be1ca531b26a)
feat(data/prod): comp_map ([#4826](https://github.com/leanprover-community/mathlib/pull/#4826))




Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2020-10-31T04:53:40+00:00](https://github.com/leanprover-community/mathlib/commit/2283cf06b2bfd410d5945fb4d63288dc99250cae)
chore(order/filter/bases): golf a proof ([#4834](https://github.com/leanprover-community/mathlib/pull/#4834))

* rename `filter.has_basis.forall_nonempty_iff_ne_bot` to
  `filter.has_basis.ne_bot_iff`, swap LHS with RHS;
* add `filter.has_basis.eq_bot_iff`;
* golf the proof of `filter.has_basis.ne_bot` using `filter.has_basis.forall_iff`.

### [2020-10-31T02:07:09+00:00](https://github.com/leanprover-community/mathlib/commit/94fa905873e3113bab4b0ef02da9239f783cbcb3)
feat(analysis/calculus/times_cont_diff): differentiability of field inverse ([#4795](https://github.com/leanprover-community/mathlib/pull/#4795))

### [2020-10-31T00:58:01+00:00](https://github.com/leanprover-community/mathlib/commit/d5650a7f96ffaaf6416e08f66d0c9cc2ee220ec6)
chore(scripts): update nolints.txt ([#4844](https://github.com/leanprover-community/mathlib/pull/#4844))

I am happy to remove some nolints for you!

### [2020-10-30T18:58:08+00:00](https://github.com/leanprover-community/mathlib/commit/cc7f06bd567a6a33603fc8ff0e247097d70f5d70)
feat(data/polynomial/lifts): polynomials that lift ([#4796](https://github.com/leanprover-community/mathlib/pull/#4796))

Given semirings `R` and `S` with a morphism `f : R →+* S`, a polynomial with coefficients in `S` lifts if there exist `q : polynomial R` such that `map f p = q`. I proved some basic results about polynomials that lifts, for example concerning the sum etc.

Almost all the proof are trivial (and essentially identical), fell free to comment just the first ones, I will do the changes in all the relevant lemmas.

The proofs of `lifts_iff_lifts_deg` (a polynomial that lifts can be lifted to a polynomial of the same degree) and of `lifts_iff_lifts_deg_monic` (the same for monic polynomials) are quite painful, but this are the shortest proofs I found... I think that at least these two results deserve to be in mathlib (I'm using them to prove that the cyclotomic polynomial lift to `\Z`).

### [2020-10-30T14:20:39+00:00](https://github.com/leanprover-community/mathlib/commit/bfadf0576cd0d0e369f3c9fa61b81a041ef1a199)
feat(algebra, logic): Pi instances for nontrivial and monoid_with_zero ([#4766](https://github.com/leanprover-community/mathlib/pull/#4766))



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-10-30T11:09:12+00:00](https://github.com/leanprover-community/mathlib/commit/58f8817e6aff0abdf7bc294ef72c3e441db151ab)
feat(number_theory/fermat4): The n=4 case of fermat ([#4720](https://github.com/leanprover-community/mathlib/pull/#4720))

Fermat's last theorem for n=4.

Co-authored-by: paulvanwamelen <30371019+paulvanwamelen@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-30T11:09:05+00:00](https://github.com/leanprover-community/mathlib/commit/d28e3d10c96a4b9787964eb32a2e2cbdb079521a)
feat(ring_theory/witt_vector/is_poly): supporting ghost calculations ([#4691](https://github.com/leanprover-community/mathlib/pull/#4691))

Most operations on Witt vectors can be described/defined
by evaluating integral polynomials on the coefficients of Witt vectors.

One can prove identities between combinations of such operations
by applying the non-injective ghost map,
and continuing to prove the resulting identity of ghost components.
Such a calculation is called a ghost calculation.

This file provides the theoretical justification for why
applying the non-injective ghost map is a legal move,
and it provides tactics that aid in applying this step
to the point that it is almost transparent.



Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>




Co-authored-by: Vierkantor <vierkantor@vierkantor.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-10-30T08:20:23+00:00](https://github.com/leanprover-community/mathlib/commit/3aac0287d32d4c8d2b592acf1d441734fa1febda)
feat(field_theory/intermediate_field): equalities from inclusions and dimension bounds ([#4828](https://github.com/leanprover-community/mathlib/pull/#4828))



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2020-10-30T08:20:21+00:00](https://github.com/leanprover-community/mathlib/commit/6ec7aece58f61fefe38426fc85b11aef56518817)
feat(data/polynomial): ext lemmas for homomorphisms from `polynomial R` ([#4823](https://github.com/leanprover-community/mathlib/pull/#4823))

### [2020-10-30T08:20:19+00:00](https://github.com/leanprover-community/mathlib/commit/03a477c4a46a02f3c33f2b1b6daeee72ec04a9e2)
feat(data/dfinsupp): Port over the `finsupp.lift_add_hom` API ([#4821](https://github.com/leanprover-community/mathlib/pull/#4821))

These lemmas are mostly copied with minimal translation from `finsupp`.
A few proofs are taken from `direct_sum`.
The API of `direct_sum` is deliberately unchanged in this PR.

### [2020-10-30T08:20:18+00:00](https://github.com/leanprover-community/mathlib/commit/5ae192eb9d80b9d42d17fb9273b4c528c3aeea74)
feat(data/equiv, algebra/*): Add simps projections to many equivs and homs ([#4818](https://github.com/leanprover-community/mathlib/pull/#4818))

This doesn't actually change any existing lemmas to use these projections.

### [2020-10-30T08:20:16+00:00](https://github.com/leanprover-community/mathlib/commit/d46d0c273ce35c06f8ab21b3794c5296caf25dea)
chore(topology/basic): the set of cluster pts of a filter is a closed set ([#4815](https://github.com/leanprover-community/mathlib/pull/#4815))

### [2020-10-30T08:20:14+00:00](https://github.com/leanprover-community/mathlib/commit/072cfc55d54d5c4ee9c28cb42072b6cd04ea5ec0)
chore(data/dfinsupp): Provide dfinsupp with a semimodule instance ([#4801](https://github.com/leanprover-community/mathlib/pull/#4801))

finsupp already has one, it seems pointless to hide the one for dfinsupp behind a def.

### [2020-10-30T08:20:09+00:00](https://github.com/leanprover-community/mathlib/commit/63c0dac6cff2e948ef19e4e03a90db9fcbd4dfb5)
refactor(module/ordered): make ordered_semimodule a mixin ([#4719](https://github.com/leanprover-community/mathlib/pull/#4719))

Per @urkud's suggestion at [#4683](https://github.com/leanprover-community/mathlib/pull/#4683). This should avoid having to introduce a separate `ordered_algebra` class.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-10-30T05:28:30+00:00](https://github.com/leanprover-community/mathlib/commit/4003b3eeff91ca7661d407560183f9ceb2ecd9a6)
feat(*): a, switch to lean 3.23 ([#4802](https://github.com/leanprover-community/mathlib/pull/#4802))

There are three changes affecting mathlib:

1. `ℕ → ℕ` is now elaborated as `∀ ᾰ : ℕ, ℕ`.  This means that `intro` introduces assumptions with names like `ᾰ_1`, etc.  These names should not be used, and instead provided explicitly to `intro` (and other tactics).
2. The heuristic to determine the definition name for `instance : foo bar` has been changed.
3. `by_contra` now uses classical logic, and defaults to the hypothesis name `h`.
4. adds a few new simp-lemmas in `data/typevec`

### [2020-10-30T02:02:16+00:00](https://github.com/leanprover-community/mathlib/commit/581b2af3eb36e4eb460cce3e3d7842e32e7a3349)
feat(analysis/asymptotics): Equivalent definitions for `is_[oO] u v l` looking like `u = φ * v` for some `φ` ([#4646](https://github.com/leanprover-community/mathlib/pull/#4646))

The advantage of these statements over `u/v` tendsto 0 / is bounded is they do not require any nonvanishing assumptions about `v`



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-10-30T01:08:49+00:00](https://github.com/leanprover-community/mathlib/commit/f510728af3b5c0b9f93bf6ad93115f0dec556f15)
chore(scripts): update nolints.txt ([#4825](https://github.com/leanprover-community/mathlib/pull/#4825))

I am happy to remove some nolints for you!

### [2020-10-29T22:37:58+00:00](https://github.com/leanprover-community/mathlib/commit/fc307f9b2f4d04cb7f75c5a6878bdc51298ca4a9)
feat(tactic/norm_num): make norm_num extensible ([#4820](https://github.com/leanprover-community/mathlib/pull/#4820))

This allows you to extend `norm_num` by defining additional tactics of type `expr → tactic (expr × expr)` with the `@[norm_num]` attribute. It still requires some tactic proficiency to use correctly, but it at least allows us to move all the possible norm_num extensions to their own files instead of the current dependency cycle problem.

This could potentially become a performance problem if too many things are marked `@[norm_num]`, as they are simply looked through in linear order. It could be improved by having extensions register a finite set of constants that they wish to evaluate, and dispatch to the right extension tactic using a `name_map`.

```lean
def foo : ℕ := 1

@[norm_num] meta def eval_foo : expr → tactic (expr × expr)
| `(foo) := pure (`(1:ℕ), `(eq.refl 1))
| _ := tactic.failed

example : foo = 1 := by norm_num
```

### [2020-10-29T19:28:13+00:00](https://github.com/leanprover-community/mathlib/commit/2c7efdfc064135252c1dbd36c15731e1cecf3d3a)
feat(category_theory/sites): Grothendieck topology on a space ([#4819](https://github.com/leanprover-community/mathlib/pull/#4819))

The grothendieck topology associated to a topological space.

I also changed a definition I meant to change in [#4816](https://github.com/leanprover-community/mathlib/pull/#4816), and updated the TODOs of some docstrings; I can split these into separate PRs if needed but I think all the changes are quite minor



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-29T19:28:10+00:00](https://github.com/leanprover-community/mathlib/commit/92af9fa8950b81c75975d50787acbb756e1a39f6)
feat(category_theory/limits/pullbacks): pullback self is id iff mono ([#4813](https://github.com/leanprover-community/mathlib/pull/#4813))

### [2020-10-29T19:28:07+00:00](https://github.com/leanprover-community/mathlib/commit/78811e0a4bf64230ffad5e8b56c6775435e6fd5e)
feat(ring_theory/unique_factorization_domain): `unique_factorization_monoid` structure on polynomials over ufd ([#4774](https://github.com/leanprover-community/mathlib/pull/#4774))

Provides the `unique_factorization_monoid` structure on polynomials over a UFD

### [2020-10-29T19:28:03+00:00](https://github.com/leanprover-community/mathlib/commit/856381c14d652fb06987dd8fd25484eb9b006dc2)
chore(data/equiv/basic): arrow_congr preserves properties of binary operators ([#4759](https://github.com/leanprover-community/mathlib/pull/#4759))



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-10-29T19:28:00+00:00](https://github.com/leanprover-community/mathlib/commit/ccc98d0a738c988c2e6ec37ba79be075175c9569)
refactor(*): `midpoint`, `point_reflection`, and Mazur-Ulam in affine spaces ([#4752](https://github.com/leanprover-community/mathlib/pull/#4752))

* redefine `midpoint` for points in an affine space;
* redefine `point_reflection` for affine spaces (as `equiv`,
  `affine_equiv`, and `isometric`);
* define `const_vsub` as `equiv`, `affine_equiv`, and `isometric`;
* define `affine_map.of_map_midpoint`;
* fully migrate the proof of Mazur-Ulam theorem to affine spaces;

### [2020-10-29T19:27:56+00:00](https://github.com/leanprover-community/mathlib/commit/4d19191edb64c3e12099d407aefee70250317470)
feat(algebra/monoid_algebra): Add an equivalence between `add_monoid_algebra` and `monoid_algebra` in terms of `multiplicative` ([#4402](https://github.com/leanprover-community/mathlib/pull/#4402))



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-29T18:26:22+00:00](https://github.com/leanprover-community/mathlib/commit/d709ed6fefc5ad73255fe504ff8911112eaa75fc)
feat(algebra/direct_sum*): relax a lot of constraints to add_comm_monoid ([#3537](https://github.com/leanprover-community/mathlib/pull/#3537))



Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2020-10-29T15:42:46+00:00](https://github.com/leanprover-community/mathlib/commit/f83468d33baa8265661f5b168d7798db014f7352)
feat(category_theory/functor_category): monos in the functor category ([#4811](https://github.com/leanprover-community/mathlib/pull/#4811))

### [2020-10-29T14:18:55+00:00](https://github.com/leanprover-community/mathlib/commit/7d7e850b6b11a2bf175297c817350c043f23ae6d)
chore(category_theory/sites): nicer names ([#4816](https://github.com/leanprover-community/mathlib/pull/#4816))

Changes the name `arrows_with_codomain` to `presieve` which is more suggestive and shorter, and changes `singleton_arrow` to `singleton`, since it's in the presieve namespace anyway.

### [2020-10-29T13:24:15+00:00](https://github.com/leanprover-community/mathlib/commit/8b858d0b22105cedeb41f1748fbc177875d809ad)
feat(data/dfinsupp): Relax requirements of semimodule conversion to add_comm_monoid ([#3490](https://github.com/leanprover-community/mathlib/pull/#3490))

The extra `_`s required to make this still build are unfortunate, but hopefully someone else can work out how to remove them in a later PR.



Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2020-10-29T09:49:53+00:00](https://github.com/leanprover-community/mathlib/commit/d510a637b9d1d1cb72acb1f847694281f0c61051)
feat(linear_algebra/finite_dimensional): finite dimensional algebra_hom of fields is bijective ([#4793](https://github.com/leanprover-community/mathlib/pull/#4793))

Changes to finite_dimensional.lean from [#4786](https://github.com/leanprover-community/mathlib/pull/#4786)



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2020-10-29T07:30:22+00:00](https://github.com/leanprover-community/mathlib/commit/1baf7017c5f1df0fba709e30bf52267b723f06cf)
feat(category_theory/Fintype): Adds the category of finite types and its "standard" skeleton. ([#4809](https://github.com/leanprover-community/mathlib/pull/#4809))

This PR adds the category `Fintype` of finite types, as well as its "standard" skeleton whose objects are `fin n`.



Co-authored-by: Bhavik Mehta <bhavikmehta8@gmail.com>

### [2020-10-29T01:05:47+00:00](https://github.com/leanprover-community/mathlib/commit/d9c82152cb9036038916d25bf0143a8535654500)
chore(scripts): update nolints.txt ([#4814](https://github.com/leanprover-community/mathlib/pull/#4814))

I am happy to remove some nolints for you!

### [2020-10-28T20:49:21+00:00](https://github.com/leanprover-community/mathlib/commit/69d41da561036d9dab5ded4b8a7113413540a2e6)
feat(tactic/dependencies): add tactics to compute (reverse) dependencies ([#4602](https://github.com/leanprover-community/mathlib/pull/#4602))

These are the beginnings of an API about dependencies between expressions. For
now, we only deal with dependencies and reverse dependencies of hypotheses,
which are easy to compute.

Breaking change: `tactic.revert_deps` is renamed to
`tactic.revert_reverse_dependencies_of_hyp` for consistency. Its implementation
is completely new, but should be equivalent to the old one except for the order
in which hypotheses are reverted. (But the old implementation made no particular
guarantees about this order anyway.)

### [2020-10-28T18:09:43+00:00](https://github.com/leanprover-community/mathlib/commit/d75da1a2f83dd71837f53535d263b737a73d2ddc)
feat(topology/algebra/group_with_zero): introduce `has_continuous_inv'` ([#4804](https://github.com/leanprover-community/mathlib/pull/#4804))

Move lemmas about continuity of division from `normed_field`, add a few new lemmas, and introduce a new typeclass. Also use it for `nnreal`s.

### [2020-10-28T18:09:41+00:00](https://github.com/leanprover-community/mathlib/commit/80ffad0c19b5c8b81215d330c6fffec826dceb37)
chore(data/dfinsupp): Make some lemma arguments explicit ([#4803](https://github.com/leanprover-community/mathlib/pull/#4803))

This file is long and this is not exhaustive, but this hits most of the simpler ones

### [2020-10-28T18:09:39+00:00](https://github.com/leanprover-community/mathlib/commit/7a37dd4ef874511d9baecbcae49e24bec48adf28)
feat(algebra/monoid_algebra): Bundle lift_nc_mul and lift_nc_one into a ring_hom and alg_hom ([#4789](https://github.com/leanprover-community/mathlib/pull/#4789))

### [2020-10-28T18:09:37+00:00](https://github.com/leanprover-community/mathlib/commit/28cc74f8995b88ca2c1b742804affc7df54a01b8)
feat(ring_theory/unique_factorization_domain): a `normalization_monoid` structure for ufms ([#4772](https://github.com/leanprover-community/mathlib/pull/#4772))

Provides a default `normalization_monoid` structure on a `unique_factorization_monoid`

### [2020-10-28T18:09:35+00:00](https://github.com/leanprover-community/mathlib/commit/25df26717b779d3c5663d86eaa66fe03660747f0)
feat(category_theory/limits/presheaf): free cocompletion ([#4740](https://github.com/leanprover-community/mathlib/pull/#4740))

Fill in the missing part of [#4401](https://github.com/leanprover-community/mathlib/pull/#4401), showing that the yoneda extension is unique. Also adds some basic API around [#4401](https://github.com/leanprover-community/mathlib/pull/#4401).

### [2020-10-28T18:09:33+00:00](https://github.com/leanprover-community/mathlib/commit/dfa85b54bbba02433e0cb924547808ff5120f78c)
feat(archive/imo): formalize IMO 1981 problem Q3 ([#4599](https://github.com/leanprover-community/mathlib/pull/#4599))

Determine the maximum value of `m ^ 2 + n ^ 2`, where `m` and `n` are integers in
`{1, 2, ..., 1981}` and `(n ^ 2 - m * n - m ^ 2) ^ 2 = 1`.



Co-authored-by: Mario Carneiro <di.gama@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-28T15:21:10+00:00](https://github.com/leanprover-community/mathlib/commit/40da087f75b542cffa5d2116b522e57c1a7a66b1)
feat(equiv/basic): use @[simps] ([#4652](https://github.com/leanprover-community/mathlib/pull/#4652))

Use the `@[simps]` attribute to automatically generate equation lemmas for equivalences.
The names `foo_apply` and `foo_symm_apply` are used for the projection lemmas of `foo`.

### [2020-10-28T10:34:25+00:00](https://github.com/leanprover-community/mathlib/commit/e8f8de6780f6301b8cbe6e295bcfd9bbd08fcd0f)
feat(ring_theory/valuation): ring of integers ([#4729](https://github.com/leanprover-community/mathlib/pull/#4729))

### [2020-10-28T09:18:54+00:00](https://github.com/leanprover-community/mathlib/commit/216cbc4928d23455ae9156ac31dda5f1f7c8308c)
feat(analysis/special_functions/trigonometric): simp attributes for trig values ([#4806](https://github.com/leanprover-community/mathlib/pull/#4806))

simp attributes for the trig values that didn't already have them

### [2020-10-28T07:49:32+00:00](https://github.com/leanprover-community/mathlib/commit/6dfa952c109bf331015ff766004f19a90b0daa4e)
refactor(order/filter): make `filter.has_mem semireducible ([#4807](https://github.com/leanprover-community/mathlib/pull/#4807))

This way `simp only []` does not simplify `s ∈ f` to `s ∈ f.sets`.

* Add protected simp lemmas `filter.mem_mk` and `filter.mem_sets`.
* Use implicit argument in `filter.mem_generate_iff`.
* Use `∃ t, s ∈ ...` instead of `s ∈ ⋃ t, ...` in
  `filter.mem_infi_finite` and `filter.mem_infi_finite'`.
* Use an implicit argument in `(non/ne_)empty_of_mem_ultrafilter`.

### [2020-10-28T06:06:38+00:00](https://github.com/leanprover-community/mathlib/commit/7807f3d37b8c86f4e80cd31fa5acbd2632ef82c1)
chore(linear_algebra/affine_space/basic): split ([#4767](https://github.com/leanprover-community/mathlib/pull/#4767))

* Split `linear_algebra/affine_space/basic` into two files: `affine_map` and `affine_subspace`.
* Move notation `affine_space` to the bottom of `algebra/add_torsor`.

### [2020-10-28T01:11:30+00:00](https://github.com/leanprover-community/mathlib/commit/4d1da5485d9c39e7be2e9c7d4ca4af8f77376742)
chore(scripts): update nolints.txt ([#4808](https://github.com/leanprover-community/mathlib/pull/#4808))

I am happy to remove some nolints for you!

### [2020-10-27T22:22:51+00:00](https://github.com/leanprover-community/mathlib/commit/c7379968a522c30efc81221e5e7792fd6a218767)
feat(algebra/algebra/subalgebra): algebra equalizer ([#4791](https://github.com/leanprover-community/mathlib/pull/#4791))

Changes to subalgebra.lean from [#4786](https://github.com/leanprover-community/mathlib/pull/#4786)



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2020-10-27T22:22:50+00:00](https://github.com/leanprover-community/mathlib/commit/2a7e2158d5b592c02b8257282805db6bb2c92a27)
feat(data/vector2): scanl and associated lemmas ([#4613](https://github.com/leanprover-community/mathlib/pull/#4613))

### [2020-10-27T19:53:05+00:00](https://github.com/leanprover-community/mathlib/commit/51e12c0098a374a7f09992f80f1d59bfe2e06fc3)
chore(ring_theory/fractional_ideal): change exists_eq_span_singleton_mul ([#4800](https://github.com/leanprover-community/mathlib/pull/#4800))

Replace assumption `(a : K)` with `(a : R)`
Add result `a \ne 0` 
Change `span_singleton` a to `span singleton (g.to_map a)^-1`
.. in the statement of lemma `exists_eq_span_singleton_mul`
Adapt dependences



Co-authored-by: faenuccio <65080144+faenuccio@users.noreply.github.com>

### [2020-10-27T19:53:03+00:00](https://github.com/leanprover-community/mathlib/commit/97065dbffb127a0ec5a2564c42f6961501f16634)
refactor(data/polynomial): use `linear_map` for `monomial`, review `degree` ([#4784](https://github.com/leanprover-community/mathlib/pull/#4784))



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-10-27T19:53:01+00:00](https://github.com/leanprover-community/mathlib/commit/a1ab984cc9a5208cb9963c3b36a473a14d06f4ff)
feat(data/finset/lattice,order/basic): add lemmas in order_dual, prove dual order exchanges max' and min' ([#4715](https://github.com/leanprover-community/mathlib/pull/#4715))

Introduce functionality to work with order duals and monotone decreasing maps.  The pretty part of the code is by Johan Commelin, the ugly part is my own addition!



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-27T17:20:51+00:00](https://github.com/leanprover-community/mathlib/commit/1efbf13aafd28ac174b6cbcd92bfb15115c52d1a)
feat(data/vector2): add lemma map_id ([#4799](https://github.com/leanprover-community/mathlib/pull/#4799))

`map_id` proves that a vector is unchanged when mapped under the `id` function. This is similar to `list.map_id`. This lemma was marked with the `simp` attribute to make it available to the simplifier.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-27T17:20:47+00:00](https://github.com/leanprover-community/mathlib/commit/40e514cbb06a4ded64b0caf02d090fc4a387b9e9)
feat(algebra/monoid_algebra): formula for `lift_nc f g (c • φ)` ([#4782](https://github.com/leanprover-community/mathlib/pull/#4782))

### [2020-10-27T17:20:45+00:00](https://github.com/leanprover-community/mathlib/commit/99acfda033be3c4a3d19fef1470364d168734669)
feat(category_theory/sites): pretopology ([#4648](https://github.com/leanprover-community/mathlib/pull/#4648))

Adds pretopologies.

### [2020-10-27T14:39:13+00:00](https://github.com/leanprover-community/mathlib/commit/a027a37bfbd2805fa8b1cc6890b6edbcbb6648f7)
feat(tactic/simps): user-provided names for projections ([#4663](https://github.com/leanprover-community/mathlib/pull/#4663))

Adds the functionality to specify custom projection names, like this:
```lean
initialize_simps_projections equiv (to_fun → apply, inv_fun → symm_apply)
```
These names will always be used and cannot (yet) be manually overridden. 

Implement this for embeddings: `initialize_simps_projections embedding (to_fun → apply)`.

Rename `fixed_points.to_alg_hom_apply -> fixed_points.to_alg_hom_apply_apply`, since `@[simps]` now generates the name `to_alg_hom_apply` instead of `to_alg_hom_to_fun`.

### [2020-10-27T11:55:33+00:00](https://github.com/leanprover-community/mathlib/commit/e0b153b27d633561c2a23e1b306a0b7b4002fda5)
refactor(*): drop `decidable_linear_order`, switch to Lean 3.22.0 ([#4762](https://github.com/leanprover-community/mathlib/pull/#4762))

The main non-bc change in Lean 3.22.0 is leanprover-community/lean[#484](https://github.com/leanprover-community/mathlib/pull/#484) which merges `linear_order`
with `decidable_linear_order`. This is the `mathlib` part of this PR.

## List of API changes

* All `*linear_order*` typeclasses now imply decidability of `(≤)`, `(<)`, and `(=)`.
* Drop `classical.DLO`.
* Drop `discrete_linear_ordered_field`, use `linear_ordered_field` instead.
* Drop `decidable_linear_ordered_semiring`, use `linear_ordered_semiring` instead.
* Drop `decidable_linear_ordered_comm_ring`, use `linear_ordered_comm_ring` instead;
* Rename `decidable_linear_ordered_cancel_add_comm_monoid` to `linear_ordered_cancel_add_comm_monoid`.
* Rename `decidable_linear_ordered_add_comm_group` to `linear_ordered_add_comm_group`.
* Modify some lemmas to use weaker typeclass assumptions.
* Add more lemmas about `ordering.compares`, including `linear_order_of_compares` which
  constructs a `linear_order` instance from `cmp` function.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-27T01:56:15+00:00](https://github.com/leanprover-community/mathlib/commit/69db7a330df86247f47a84fab0f52ab9274ca29b)
chore(scripts): update nolints.txt ([#4797](https://github.com/leanprover-community/mathlib/pull/#4797))

I am happy to remove some nolints for you!

### [2020-10-26T23:04:21+00:00](https://github.com/leanprover-community/mathlib/commit/6e2980ce55234f1086532928a887f1fee6b4f94b)
chore(*): reflow some long lines ([#4794](https://github.com/leanprover-community/mathlib/pull/#4794))

### [2020-10-26T23:04:19+00:00](https://github.com/leanprover-community/mathlib/commit/8746f0833f3a7d84bb2a7b7a6ebc67772cea07c3)
feat(data/equiv/basic): equiv.set.powerset ([#4790](https://github.com/leanprover-community/mathlib/pull/#4790))

### [2020-10-26T21:30:45+00:00](https://github.com/leanprover-community/mathlib/commit/c76c3c5c72e6fc4ba636353363acddeb659e79f1)
feat(degree/basic.lean): degree_lt_iff_coeff_zero ([#4792](https://github.com/leanprover-community/mathlib/pull/#4792))

Changes to degree/basic.lean from [#4786](https://github.com/leanprover-community/mathlib/pull/#4786)



Co-authored-by: tb65536 <tb65536@users.noreply.github.com>

### [2020-10-26T18:39:32+00:00](https://github.com/leanprover-community/mathlib/commit/95b3add2ff992c3b1afc009ef1ea703b35b0189e)
fix(tactic/derive_fintype): add support for props ([#4777](https://github.com/leanprover-community/mathlib/pull/#4777))

This adds support for propositional arguments in inductive constructors.
It was previously not handled, and while it *almost* works without
change, we have to use `Sigma' (a:A) (b:B) (c:C), unit` to tuple up the
arguments instead of `Sigma' (a:A) (b:B), C` because it would cause problems
in the unary case where there is only one propositional field.

### [2020-10-26T18:39:30+00:00](https://github.com/leanprover-community/mathlib/commit/94285983dbc7779f17d06db3e1a0d61dee481756)
feat(tactic/rcases): add `rintro (x y : t)` support ([#4722](https://github.com/leanprover-community/mathlib/pull/#4722))

As requested on Zulip: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rintros/near/213999254

### [2020-10-26T18:39:29+00:00](https://github.com/leanprover-community/mathlib/commit/877a20e3077486497381000cd49509260296083d)
feat(ring_theory/finiteness): some finiteness notions in commutative algebra ([#4634](https://github.com/leanprover-community/mathlib/pull/#4634))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>
Co-authored-by: Scott Morrison <scott@tqft.net>

### [2020-10-26T18:39:27+00:00](https://github.com/leanprover-community/mathlib/commit/61c095f25f6f0c473c8f719314549451d0946c99)
chore(algebra/module,linear_algebra): split off a `linear_map` file ([#4476](https://github.com/leanprover-community/mathlib/pull/#4476))

In order to make `algebra/module/basic.lean` and `linear_algebra/basic.lean` a bit more manageable, move the basic facts about `linear_map`s and `linear_equiv`s into a separate file. `linear_algebra/basic.lean` still needs to be split a bit more.

### [2020-10-26T16:13:21+00:00](https://github.com/leanprover-community/mathlib/commit/83edb50616f7e45d332568d7d09ea122d0a78525)
feat(simps): improve error messages ([#4653](https://github.com/leanprover-community/mathlib/pull/#4653))

If a custom projection has a different type than the expected projection, then it will show a more specific error message.
Also reflow most long lines
Also add some tests

### [2020-10-26T14:18:36+00:00](https://github.com/leanprover-community/mathlib/commit/ba5594a61fd69a4381e310b3fc5cc09d0311830d)
feat(data/dfinsupp): Add missing to_additive lemmas ([#4788](https://github.com/leanprover-community/mathlib/pull/#4788))

### [2020-10-26T13:22:48+00:00](https://github.com/leanprover-community/mathlib/commit/2e90c6000b78dcd15410ff7624654501b858a284)
feat(ring_theory/witt_vector/basic): verifying the ring axioms ([#4694](https://github.com/leanprover-community/mathlib/pull/#4694))

Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-10-26T05:21:12+00:00](https://github.com/leanprover-community/mathlib/commit/7be82f9430a577bc2712bf7ddbe4bcada513df68)
chore(scripts): update nolints.txt ([#4785](https://github.com/leanprover-community/mathlib/pull/#4785))

I am happy to remove some nolints for you!

### [2020-10-26T05:21:10+00:00](https://github.com/leanprover-community/mathlib/commit/b2b39edd45446ed129536b07816348aa66481829)
chore(order/galois_connection): define `with_bot.gi_get_or_else_bot` ([#4781](https://github.com/leanprover-community/mathlib/pull/#4781))

This Galois insertion can be used to golf proofs about
`polynomial.degree` vs `polynomial.nat_degree`.

### [2020-10-26T05:21:08+00:00](https://github.com/leanprover-community/mathlib/commit/121c9a49ad79f4e3dd6dd80beba190e7896f612e)
chore(algebra/group/hom): use `coe_comp` in `simp` lemmas ([#4780](https://github.com/leanprover-community/mathlib/pull/#4780))

This way Lean will simplify `⇑(f.comp g)` even if it is not applied to
an element.

### [2020-10-26T05:21:06+00:00](https://github.com/leanprover-community/mathlib/commit/6e4fe98c68bda771189807a2f5d66df3a448b615)
chore(data/polynomial/{degree/basic, eval}): Some trivial lemmas about polynomials ([#4768](https://github.com/leanprover-community/mathlib/pull/#4768))

I have added the lemma `supp_card_le_succ_nat_degree` about the cardinality of the support of a polynomial and removed the useless commutativity assumptio in `map_sum` and `map_neg`.


Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-10-26T04:25:05+00:00](https://github.com/leanprover-community/mathlib/commit/4036212231d22c77f5480ce7e53c1d8f066e11f0)
feat(algebra/big_operators/nat_antidiagonal): a few more lemmas ([#4783](https://github.com/leanprover-community/mathlib/pull/#4783))

### [2020-10-25T21:53:20+00:00](https://github.com/leanprover-community/mathlib/commit/a9d3ce8e5fb19c1b9054901dac71566d24f205a1)
feat(analysis/normed_space/add_torsor): continuity of `vadd`/`vsub` ([#4751](https://github.com/leanprover-community/mathlib/pull/#4751))

Prove that `vadd`/`vsub` are Lipschitz continuous, hence uniform
continuous and continuous.

### [2020-10-25T18:29:34+00:00](https://github.com/leanprover-community/mathlib/commit/e7a4b12cd9ad4f328553aefe634aaa07558364a6)
fix(tactic/core): fix infinite loop in emit_code_here ([#4746](https://github.com/leanprover-community/mathlib/pull/#4746))

Previously `emit_code_here "\n"` would go into an infinite loop because the `command_like` parser consumes nothing, but the string is not yet empty. Now we recurse on the length of the string to ensure termination.

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-25T16:45:20+00:00](https://github.com/leanprover-community/mathlib/commit/151f0dd2b8378d5cb9d721fbfffeb5f464e09d1e)
chore(linear_algebra/tensor_product): missing simp lemmas ([#4769](https://github.com/leanprover-community/mathlib/pull/#4769))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-25T16:45:18+00:00](https://github.com/leanprover-community/mathlib/commit/69f550cba12a16110fc77b1618a77e541014b8f5)
chore(ring_theory/unique_factorization_domain): fix some lemma names ([#4765](https://github.com/leanprover-community/mathlib/pull/#4765))

Fixes names of some lemmas that were erroneously renamed with find-and-replace
Changes some constructor names to use dot notation

Names replaced:
`exists_prime_of_factor` -> `exists_prime_factors`
`wf_dvd_monoid_of_exists_prime_of_factor` -> `wf_dvd_monoid.of_exists_prime_factors`
`irreducible_iff_prime_of_exists_prime_of_factor` -> `irreducible_iff_prime_of_exists_prime_factors`
`unique_factorization_monoid_of_exists_prime_of_factor` -> `unique_factorization_monoid.of_exists_prime_factors`
`unique_factorization_monoid_iff_exists_prime_of_factor` -> `unique_factorization_monoid.iff_exists_prime_factors`
`irreducible_iff_prime_of_exists_unique_irreducible_of_factor` -> `irreducible_iff_prime_of_exists_unique_irreducible_factors`
`unique_factorization_monoid.of_exists_unique_irreducible_of_factor` -> `unique_factorization_monoid.of_exists_unique_irreducible_factors`
`no_factors_of_no_prime_of_factor` -> `no_factors_of_no_prime_factors`
`dvd_of_dvd_mul_left_of_no_prime_of_factor` -> `dvd_of_dvd_mul_left_of_no_prime_factors`
`dvd_of_dvd_mul_right_of_no_prime_of_factor` -> `dvd_of_dvd_mul_right_of_no_prime_factors`

### [2020-10-25T14:56:50+00:00](https://github.com/leanprover-community/mathlib/commit/14cff9ac7fd068499606514ed0aa44225d355d3d)
chore(algebra/group/pi): add `pi.has_div` ([#4776](https://github.com/leanprover-community/mathlib/pull/#4776))

Motivated by [#4646](https://github.com/leanprover-community/mathlib/pull/#4646)

### [2020-10-24T22:07:59+00:00](https://github.com/leanprover-community/mathlib/commit/f056468f8dbc68aac3cb3d56807f10d2bee247ff)
chore(analysis/normed_space): add 2 `@[simp]` attrs ([#4775](https://github.com/leanprover-community/mathlib/pull/#4775))

Add `@[simp]` to `norm_pos_iff` and `norm_le_zero_iff`

### [2020-10-24T11:48:11+00:00](https://github.com/leanprover-community/mathlib/commit/cae77dc794ad18c1bc6ed361b7902aa9b1fb2fda)
feat(algebra/direct_sum): Fix two todos about generalizing over unique types ([#4764](https://github.com/leanprover-community/mathlib/pull/#4764))

Also promotes `id` to a `≃+`, and prefers coercion over direct use of `subtype.val`.

### [2020-10-24T05:36:36+00:00](https://github.com/leanprover-community/mathlib/commit/de6a9d419dc190e34a51fc55aff6576dfed8b82f)
feat(ring_theory/polynomial/content): `gcd_monoid` instance on polynomials over gcd domain ([#4760](https://github.com/leanprover-community/mathlib/pull/#4760))

Refactors `ring_theory/polynomial/content` a bit to introduce `prim_part`
Provides a `gcd_monoid` instance on polynomials over a gcd domain

### [2020-10-24T05:36:34+00:00](https://github.com/leanprover-community/mathlib/commit/570c293af03db2fba90013d5b8c18ae4d66175e9)
feat(data/polynomial/ring_division): Two easy lemmas about polynomials ([#4742](https://github.com/leanprover-community/mathlib/pull/#4742))

Two easy lemmas from my previous, now splitted, PR.


Co-authored-by: jalex-stark <alexmaplegm@gmail.com>

### [2020-10-24T05:36:32+00:00](https://github.com/leanprover-community/mathlib/commit/b9a94d693d37cab21a893e3287f0b5451991bcf1)
feat(linear_algebra/nonsingular_inverse): add stronger form of Cramer's rule ([#4737](https://github.com/leanprover-community/mathlib/pull/#4737))

Also renaming `cramer_transpose_eq_adjugate_mul_vec` --> `cramer_eq_adjugate_mul_vec` after the transpose was rendered redundant.

### [2020-10-24T03:10:11+00:00](https://github.com/leanprover-community/mathlib/commit/2987a496e49bbe8ecff83226eb886ccdf37ec055)
fix(tactic/core): use eval_pexpr in run_parser_cmd ([#4761](https://github.com/leanprover-community/mathlib/pull/#4761))

Continuation of [#4745](https://github.com/leanprover-community/mathlib/pull/#4745), see https://github.com/leanprover-community/mathlib/pull/4745#discussion_r510771137

Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2020-10-24T01:02:28+00:00](https://github.com/leanprover-community/mathlib/commit/8255507eda5e56ad9369d510619abe92c43a4b22)
feat(data/pnat/basic): Add strong induction on pnat ([#4736](https://github.com/leanprover-community/mathlib/pull/#4736))

I added strong induction on `pnat`. (This was from a previous PR that I am splitting.)

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-23T22:12:51+00:00](https://github.com/leanprover-community/mathlib/commit/c141eed87cebd3318a07dcf6597033635d104af8)
feat(data/list/basic): Add prod_reverse_noncomm ([#4757](https://github.com/leanprover-community/mathlib/pull/#4757))

### [2020-10-23T22:12:50+00:00](https://github.com/leanprover-community/mathlib/commit/4ec88dbeef787f02572bdb31c99c2a15af0c1a1c)
feat(algebra/direct_sum): Bundle the homomorphisms ([#4754](https://github.com/leanprover-community/mathlib/pull/#4754))

### [2020-10-23T22:12:48+00:00](https://github.com/leanprover-community/mathlib/commit/aa5903971fb54352c9c30eb7829a20a33e5a3546)
feat(category_theory): presheaf is colimit of representables ([#4401](https://github.com/leanprover-community/mathlib/pull/#4401))

Show every presheaf (on a small category) is a colimit of representables, and some related results. 
Suggestions for better names more than welcome.

### [2020-10-23T20:04:40+00:00](https://github.com/leanprover-community/mathlib/commit/5afeb9b9a8a69d530cd77612696b8be004b72891)
chore(*): a few more type-specific ext lemmas ([#4741](https://github.com/leanprover-community/mathlib/pull/#4741))

* mark lemmas about homs from `multiplicative nat` and `multiplicative int` as `@[ext]`;
* add a special case lemma about linear maps from the base semiring;
* ext lemmas for ring homs from `(add_)monoid_algebra`;
* ext lemmas for multiplicative homs from `multiplicative (α →₀ M)`;
* make sure that Lean can chain ext lemmas by using hom equalities in lemmas about `finsupp`/`(add_)monoid_algebra`.

### [2020-10-23T17:42:40+00:00](https://github.com/leanprover-community/mathlib/commit/0bbf3e294852b20e4387a3b38e9e6baeeb804564)
fix(deprecated/group): Correct the name of `is_add_group_hom has_neg.neg` ([#4755](https://github.com/leanprover-community/mathlib/pull/#4755))

Rename `inv.is_add_group_hom` to `neg.is_add_group_hom`.

### [2020-10-23T13:03:43+00:00](https://github.com/leanprover-community/mathlib/commit/588696146ee2957c3a2bd2ade86e39f9c0a9029a)
feat(data/{nat,list}/basic): Add some trivial lemmas ([#4738](https://github.com/leanprover-community/mathlib/pull/#4738))



Co-authored-by: Anne Baanen <Vierkantor@users.noreply.github.com>

### [2020-10-23T10:15:32+00:00](https://github.com/leanprover-community/mathlib/commit/b651c6f605334a2fc63023e41d6d22ae361b6129)
feat(tactic/core): add `run_parser` user command ([#4745](https://github.com/leanprover-community/mathlib/pull/#4745))

Allows for writing things like:
```lean
import tactic.core

run_parser emit_code_here "def foo := 1"
```
Relevant Zulip conversation: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes/near/214229509

### [2020-10-23T10:15:30+00:00](https://github.com/leanprover-community/mathlib/commit/fb4aee0dc6e464324bf9523231dc80986f6528cd)
fix(deprecated/*): remove instances ([#4735](https://github.com/leanprover-community/mathlib/pull/#4735))

Remove all instances constructing structures from `is_*` predicates, like for example:
```lean
instance subset.ring {S : set R} [is_subring S] : ring S :=
...
```

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>



Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2020-10-23T10:15:28+00:00](https://github.com/leanprover-community/mathlib/commit/70b14cee912e3f7d4a86f8fd8085797c9e694523)
refactor(*): use is_scalar_tower instead of restrict_scalars ([#4733](https://github.com/leanprover-community/mathlib/pull/#4733))

- rename `semimodule.restrict_scalars` to `restrict_scalars`
- rename `restrict_scalars` to `subspace.restrict_scalars`
- use `is_scalar_tower` wherever possible
- add warnings to docstrings about `restrict_scalars` to encourage `is_scalar_tower` instead

### [2020-10-23T10:15:26+00:00](https://github.com/leanprover-community/mathlib/commit/82b4843c6417b3309fe12664d1c6a964aeb6f584)
feat(ring_theory/roots_of_unity): Roots of unity as union of primitive roots ([#4644](https://github.com/leanprover-community/mathlib/pull/#4644))

I have added some lemmas about roots of unity, especially `root_of_unity_eq_uniun_prim` that says that, if there is a primitive `n`-th root of unity in `R`, then the set of `n`-th roots of unity is equal to the union of `primitive_roots i R` for `i | n`.

I will use this lemma in to develop the theory of cyclotomic polynomials.

### [2020-10-23T10:15:24+00:00](https://github.com/leanprover-community/mathlib/commit/278a14b3d8cdaf6850a75391d1a39e71dc35760a)
feat(analysis/p_series): prove the p-series convergence test ([#4360](https://github.com/leanprover-community/mathlib/pull/#4360))

### [2020-10-23T10:15:21+00:00](https://github.com/leanprover-community/mathlib/commit/04b55727f59169878f0281bd459a198caeb74b35)
feat(ring_theory/witt_vector/defs): type of witt vectors + ring operations ([#4332](https://github.com/leanprover-community/mathlib/pull/#4332))

Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-10-23T07:42:45+00:00](https://github.com/leanprover-community/mathlib/commit/9e4ef8549d1c5eee0f7c0028082afcdeae7b0359)
feat(linear_algebra/affine_space): define `affine_equiv.mk'` ([#4750](https://github.com/leanprover-community/mathlib/pull/#4750))

Similarly to `affine_map.mk'`, this constructor checks that the map
agrees with its linear part only for one base point.

### [2020-10-23T07:42:43+00:00](https://github.com/leanprover-community/mathlib/commit/468c01c879404fcc55346f63ad79dc1d9917abc2)
chore(topology/*): add two missing simp coe lemmas ([#4748](https://github.com/leanprover-community/mathlib/pull/#4748))

### [2020-10-23T07:42:40+00:00](https://github.com/leanprover-community/mathlib/commit/458c833e3de93ef491193256c1543aac9ea6087c)
chore(algebra/group/basic): Mark inv_involutive simp ([#4744](https://github.com/leanprover-community/mathlib/pull/#4744))

This means expressions like `has_inv.inv ∘ has_inv.inv` can be simplified

### [2020-10-23T05:47:36+00:00](https://github.com/leanprover-community/mathlib/commit/bb52355bc1a02202926bdc9db3f8c87f00df30d7)
feat(linear_algebra/basic): define `linear_equiv.neg` ([#4749](https://github.com/leanprover-community/mathlib/pull/#4749))

Also weaken requirements for `has_neg (M →ₗ[R] M₂)` from
`[add_comm_group M]` `[add_comm_group M₂]` to `[add_comm_monoid M]`
`[add_comm_group M₂]`.

### [2020-10-23T05:47:34+00:00](https://github.com/leanprover-community/mathlib/commit/dc4ad812238515a30d7a2f2c6de27a5d0530bd37)
refactor(*): lmul is an algebra hom ([#4724](https://github.com/leanprover-community/mathlib/pull/#4724))

also, make some arguments implicit, and add simp lemmas

### [2020-10-23T05:47:32+00:00](https://github.com/leanprover-community/mathlib/commit/ff711a3103fbfcc820afa1c4fda945edc313abc0)
feat(measure_theory/measure_space): Added lemmas for commuting restrict for outer measures and measures ([#4673](https://github.com/leanprover-community/mathlib/pull/#4673))

This also adds `of_function_apply` and `Inf_apply` (for `outer_measure`). I had some difficulty getting
these functions to expand (as represented by the length of `Inf_apply`) in a clean way.
I also think `Inf_apply` is instructive in terms of making it clear what the definition of `Inf` is. Once `Inf` is rewritten,
then the large set of operations available for `infi_le` and `le_infi` (and `ennreal.tsum_le_tsum`) can be used.

`measure.restrict_Inf_eq_Inf_restrict` will be helpful in getting more results about the subtraction of measures,
specifically writing down the result of `(a - b)` when `a` is not less than or equal to `b` and `b` is not less than
or equal to `a`.



Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>

### [2020-10-23T04:31:09+00:00](https://github.com/leanprover-community/mathlib/commit/f27931328db6014e9b7bb6cae566792aea4c0e62)
feat(category_theory/yoneda): better simp lemmas for small yoneda ([#4743](https://github.com/leanprover-community/mathlib/pull/#4743))

Gives nicer (d)simp lemmas for yoneda_sections_small.

### [2020-10-23T01:10:33+00:00](https://github.com/leanprover-community/mathlib/commit/8bd1df59081b42cad783b640d8b7a535d6898f76)
chore(scripts): update nolints.txt ([#4747](https://github.com/leanprover-community/mathlib/pull/#4747))

I am happy to remove some nolints for you!

### [2020-10-22T17:33:36+00:00](https://github.com/leanprover-community/mathlib/commit/de12036be3da9e51782b660752e37b7899fe4691)
chore(data/polynomial): remove monomial_one_eq_X_pow ([#4734](https://github.com/leanprover-community/mathlib/pull/#4734))

monomial_one_eq_X_pow was a duplicate of X_pow_eq_monomial



Co-authored-by: faenuccio <65080144+faenuccio@users.noreply.github.com>

### [2020-10-22T14:57:55+00:00](https://github.com/leanprover-community/mathlib/commit/6eb5564187423c797b16376b4d376eb90621f2d7)
chore(data/equiv/basic): Add a simp lemma perm.coe_mul ([#4723](https://github.com/leanprover-community/mathlib/pull/#4723))

This mirrors `equiv.coe_trans`

### [2020-10-22T07:48:25+00:00](https://github.com/leanprover-community/mathlib/commit/add50960bb7c1c154d38257622d92ddd2644a64c)
chore(*): 3 unrelated small changes ([#4732](https://github.com/leanprover-community/mathlib/pull/#4732))

* fix universe levels in `equiv.set.compl`: by default Lean uses some
`max` universes both for `α` and `β`, and it backfires when one tries
to apply it.

* add `nat.mul_factorial_pred`;

* add instance `fixed_points.decidable`.

Part of [#4731](https://github.com/leanprover-community/mathlib/pull/#4731)

### [2020-10-22T07:48:23+00:00](https://github.com/leanprover-community/mathlib/commit/aba31c938d3243cc671be7091b28a1e0814647ee)
feat(algebra/monoid_algebra): define a non-commutative version of `lift` ([#4725](https://github.com/leanprover-community/mathlib/pull/#4725))

* [X] define `monoid_algebra.lift_c` and `add_monoid_algebra.lift_nc` to be generalizations of `(mv_)polynomial.eval₂` to `(add_)monoid_algebra`s.
* [X] use `to_additive` in many proofs about `add_monoid_algebra`;
* [X] define `finsupp.nontrivial`, use it for `(add_)monoid_algebra.nontrivial`;
* [X] copy more lemmas about `lift` from `monoid_algebra` to `add_monoid_algebra`;
* [X] use `@[ext]` on more powerful type-specific lemmas;
* [x] fix docstrings of `(add_)monoid_algebra.lift₂`;
* [x] fix compile failures.

### [2020-10-22T07:48:21+00:00](https://github.com/leanprover-community/mathlib/commit/fb5ef2b93a79cb2624ada605de944a0b0051e3cd)
feat(linear_algebra/nonsingular_inverse): state Cramer's rule explicitly ([#4700](https://github.com/leanprover-community/mathlib/pull/#4700))

Mostly so that we can add an entry to the Freek 100.




Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2020-10-22T06:38:42+00:00](https://github.com/leanprover-community/mathlib/commit/03f0285d7edf0888969e31d1a520e986ff82b217)
refactor(algebra/add_torsor): define pointwise `-ᵥ` and `+ᵥ` on sets ([#4710](https://github.com/leanprover-community/mathlib/pull/#4710))

This seems more natural than `vsub_set` to me.

### [2020-10-22T05:15:46+00:00](https://github.com/leanprover-community/mathlib/commit/4c4d47c22ea6b040101c0c5b39400d415ff6f2f4)
feat(algebra/gcd_monoid): noncomputably defines `gcd_monoid` structures from partial information ([#4664](https://github.com/leanprover-community/mathlib/pull/#4664))

Adds the following 4 noncomputable functions which define `gcd_monoid` instances.
`gcd_monoid_of_gcd` takes as input a `gcd` function and a few of its properties
`gcd_monoid_of_lcm` takes as input a `lcm` function and a few of its properties
`gcd_monoid_of_exists_gcd` takes as input the prop that every two elements have a `gcd`
`gcd_monoid_of_exists_lcm` takes as input the prop that every two elements have an `lcm`



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2020-10-22T01:14:08+00:00](https://github.com/leanprover-community/mathlib/commit/fca876eacac0130a9418f433a8d57afe1fb7dbf0)
chore(scripts): update nolints.txt ([#4730](https://github.com/leanprover-community/mathlib/pull/#4730))

I am happy to remove some nolints for you!

### [2020-10-21T15:31:43+00:00](https://github.com/leanprover-community/mathlib/commit/df4500242eb6aa6ee20b315b185b0f97a9b359c5)
feat(archive): formalize compiler correctness by McCarthy and Painter ([#4702](https://github.com/leanprover-community/mathlib/pull/#4702))

Add a formalization of the correctness of a compiler from arithmetic expressions to machine language described by McCarthy and Painter, which is considered the first proof of compiler correctness.

### [2020-10-21T15:31:40+00:00](https://github.com/leanprover-community/mathlib/commit/1b4e7694a51c809892804f44414117d274e29cd9)
feat(linear_algebra/affine_space): define `affine_equiv` ([#2909](https://github.com/leanprover-community/mathlib/pull/#2909))

Define

* [X] `affine_equiv` to be an invertible affine map (e.g., extend both `affine_map` and `equiv`);
* [X] conversion to `linear_equiv`;
* [X] `group` structure on affine automorphisms;
* [X] prove standard lemmas for equivalences (`apply_symm_apply`, `symm_apply_eq` etc).

API changes

* make `G` implicit in `equiv.vadd_const`.

### [2020-10-21T13:35:00+00:00](https://github.com/leanprover-community/mathlib/commit/75316cada60fe1ed9c907f302d7745bb1404f0ae)
chore(linear_algebra/basic): a few simp lemmas ([#4727](https://github.com/leanprover-community/mathlib/pull/#4727))

* add `submodule.nonempty`;
* add `@[simp]` to `submodule.map_id`;
* add `submodule.neg_coe`, `protected submodule.map_neg`, and `submodule.span_neg`.

### [2020-10-21T01:39:35+00:00](https://github.com/leanprover-community/mathlib/commit/01c1e6fb62418cf562512da606350f6f6a1f24d5)
chore(scripts): update nolints.txt ([#4721](https://github.com/leanprover-community/mathlib/pull/#4721))

I am happy to remove some nolints for you!

### [2020-10-21T01:39:33+00:00](https://github.com/leanprover-community/mathlib/commit/3a860cc4609ac3dbc8083ce55389ce295c1049fd)
fixup(category_theory/sites): add arrow sets that aren't sieves  ([#4703](https://github.com/leanprover-community/mathlib/pull/#4703))

Broken off from [#4648](https://github.com/leanprover-community/mathlib/pull/#4648).

- I realised that by creating a type `arrows_with_codomain` I can avoid using `set (over X)` entirely (the bit I was missing was that `derive complete_lattice` works on the new type even though it wasn't inferred on the pi-type), so I changed sieves to use that instead. 
- I added constructors for special arrow sets. The definitions of `singleton_arrow` and `pullback_arrows` look a bit dubious because of the equality and `eq_to_hom` stuff; I don't love that either so if there's a suggestion on how to achieve the same things (in particular stating (1) and (3) from: https://stacks.math.columbia.edu/tag/00VH, as well as a complete lattice structure) I'd be happy to consider.
- I added a coercion so we can write `S f` instead of `S.arrows f` for sieves.

### [2020-10-21T00:42:57+00:00](https://github.com/leanprover-community/mathlib/commit/857cbd527da1b2994f26ddf3532da90a872790c7)
chore(category_theory/limits/preserves): split up files and remove redundant defs ([#4717](https://github.com/leanprover-community/mathlib/pull/#4717))

Broken off from [#4163](https://github.com/leanprover-community/mathlib/pull/#4163) and [#4716](https://github.com/leanprover-community/mathlib/pull/#4716).
While the diff of this PR is quite big, it actually doesn't do very much: 

- I removed the definitions of `preserves_(co)limits_iso` from `preserves/basic`, since there's already a version in `preserves/shapes` which has lemmas about it. (I didn't keep them in `preserves/basic` since that file is already getting quite big, so I chose to instead put them into the smaller file.
- I split up `preserves/shapes` into two files: `preserves/limits` and `preserves/shapes`. From my other PRs my plan is for `shapes` to contain isomorphisms and constructions for special shapes, eg `fan.mk` and `fork`s, some of which aren't already present, and `limits` to have things for the general case. In this PR I don't change the situation for special shapes (other than simplifying some proofs), other than moving it into a separate file for clarity.

### [2020-10-20T13:15:11+00:00](https://github.com/leanprover-community/mathlib/commit/8489972a4689ca4df8f40d7fca7b9d8c3a0236b6)
feat(data/complex/module): ![1, I] is a basis of C over R ([#4713](https://github.com/leanprover-community/mathlib/pull/#4713))



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-20T10:23:27+00:00](https://github.com/leanprover-community/mathlib/commit/cf551ee3a6de248ccb49ad33227baa264cfe9433)
chore(*): review some lemmas about injectivity of coercions ([#4711](https://github.com/leanprover-community/mathlib/pull/#4711))

API changes:

* rename `linear_map.coe_fn_congr` to `protected
  linear_map.congr_arg`;
* rename `linear_map.lcongr_fun` to `protected linear_map.congr_fun`;
* rename `enorm.coe_fn_injective` to `enorm.injective_coe_fn`, add
  `enorm.coe_inj`;
* rename `equiv.coe_fn_injective` to `equiv.injective_coe_fn`,
  reformulate in terms of `function.injective`;
* add `equiv.coe_inj`;
* add `affine_map.injective_coe_fn`, `protected affine_map.congr_arg`,
  and `protected affine_map.congr_fun`;
* rename `linear_equiv.to_equiv_injective` to
  `linear_equiv.injective_to_equiv`, add `linear_equiv.to_equiv_inj`;
* rename `linear_equiv.eq_of_linear_map_eq` to
  `linear_equiv.injective_to_linear_map`, formulate as `injective
  coe`;
* add `linear_equiv.to_linear_map_inj`;
* rename `outer_measure.coe_fn_injective` to
  `outer_measure.injective_coe_fn`;
* rename `rel_iso.to_equiv_injective` to `rel_iso.injective_to_equiv`;
* rename `rel_iso.coe_fn_injective` to `rel_iso.injective_coe_fn`;
* rename `continuous_linear_map.coe_fn_injective` to
  `injective_coe_fn`.

### [2020-10-20T10:23:25+00:00](https://github.com/leanprover-community/mathlib/commit/5d52ea42f7516d35164e858577457b1d17c28d75)
chore(.gitignore): gitignore for emacs temp files ([#4699](https://github.com/leanprover-community/mathlib/pull/#4699))

Emacs backup files end in `~`, and you don't want them in the repo. Just makes things mildly easier for emacs users if that pattern is in the gitignore.

### [2020-10-20T08:10:53+00:00](https://github.com/leanprover-community/mathlib/commit/8131349c70e38268d05d1d1f35c35cd6093ca096)
fix(tactic/norm_num): remove one_div from simp set ([#4705](https://github.com/leanprover-community/mathlib/pull/#4705))

fixes [#4701](https://github.com/leanprover-community/mathlib/pull/#4701)

### [2020-10-20T08:10:51+00:00](https://github.com/leanprover-community/mathlib/commit/617e8295d7bbe7322ba3f2877cc9fdfffc6a551c)
feat(linear_algebra/affine_space/ordered): define `slope` ([#4669](https://github.com/leanprover-community/mathlib/pull/#4669))

* Review API of `ordered_semimodule`:
  - replace `lt_of_smul_lt_smul_of_nonneg` with `lt_of_smul_lt_smul_of_pos`;
    it's equivalent but is easier to prove;
  - add more lemmas;
  - add a constructor for the special case of an ordered semimodule over
	a linearly ordered field; in this case it suffices to verify only
	`a < b → 0 < c → c • a ≤ c • b`;
  - use the new constructor in `analysis/convex/cone`;
* Define `units.smul_perm_hom`, reroute `mul_action.to_perm` through it;
* Add a few more lemmas unfolding `affine_map.line_map` in special cases;
* Define `slope f a b = (b - a)⁻¹ • (f b -ᵥ f a)` and prove a handful
  of monotonicity properties.

### [2020-10-20T05:38:10+00:00](https://github.com/leanprover-community/mathlib/commit/b46190f94becaca992c3a21012044e524a0c6ca3)
chore(data/finsupp): minor review ([#4712](https://github.com/leanprover-community/mathlib/pull/#4712))

* add a few lemmas about injectivity of `coe_fn` etc;
* simplify definition of `finsupp.on_finset`;
* replace the proof of `support_on_finset` by `rfl`;
* make `finsupp.mem_support_on_finset` a `simp` lemma.

### [2020-10-20T05:38:08+00:00](https://github.com/leanprover-community/mathlib/commit/288802b60d60cc9fd798de67bcdf650c1c8d8ede)
chore(data/polynomial): slightly generalize `map_eq_zero` and `map_ne_zero` ([#4708](https://github.com/leanprover-community/mathlib/pull/#4708))

We don't need the codomain to be a field.

### [2020-10-20T05:38:07+00:00](https://github.com/leanprover-community/mathlib/commit/21415c8cb21f9d0345da99f2960945a7d89e81b3)
chore(topology/algebra/ordered): drop section vars, golf 2 proofs ([#4706](https://github.com/leanprover-community/mathlib/pull/#4706))

* Explicitly specify explicit arguments instead of using section
  variables;
* Add `continuous_min` and `continuous_max`;
* Use them for `tendsto.min` and `tendsto.max`

### [2020-10-20T05:38:04+00:00](https://github.com/leanprover-community/mathlib/commit/0cf8a98bb47decbbab8566a28723c87347cf1452)
chore(data/set): a few more lemmas about `image2` ([#4695](https://github.com/leanprover-community/mathlib/pull/#4695))

Also add `@[simp]` to `set.image2_singleton_left` and `set.image2_singleton_rigt`.

### [2020-10-20T05:38:01+00:00](https://github.com/leanprover-community/mathlib/commit/050b5a1bb7402c9251080e2aea16fe64c23452e6)
feat(data/real/pi): Leibniz's series for pi ([#4228](https://github.com/leanprover-community/mathlib/pull/#4228))

Freek No. 26 
<!-- put comments you want to keep out of the PR commit here -->


Co-authored-by: Benjamin Davidson <68528197+benjamindavidson@users.noreply.github.com>

### [2020-10-20T03:17:38+00:00](https://github.com/leanprover-community/mathlib/commit/cd884eb852fa6b68ff65f2f36d8e0f6ba5749f28)
feat(measure_theory): finite_spanning_sets_in ([#4668](https://github.com/leanprover-community/mathlib/pull/#4668))

* We define a new Type-valued structure `finite_spanning_sets_in` which consists of a countable sequence of sets that span the type, have finite measure, and live in a specified collection of sets, 
* `sigma_finite` is redefined in terms of `finite_spanning_sets_in`
* One of the ext lemmas is now conveniently formulated in terms of `finite_spanning_sets_in`
* `finite_spanning_sets_in` is also used to remove a little bit of code duplication in `prod` (which occurred because `sigma_finite` was a `Prop`, and forgot the actual construction)
* Define a predicate `is_countably_spanning` which states that a collection of sets has a countable spanning subset. This is useful for one particular lemma in `prod`.
* Generalize some lemmas about products in the case that the σ-algebras are generated by a collection of sets. This can be used to reason about iterated products.
* Prove `prod_assoc_prod`.
* Cleanup in `measurable_space` and somewhat in `measure_space`.
* Rename `measurable.sum_rec -> measurable.sum_elim` (and give a different but definitionally equal statement)

### [2020-10-20T01:14:13+00:00](https://github.com/leanprover-community/mathlib/commit/9755ae3c48774bd78bebfc1a4804e6c032c7f752)
chore(scripts): update nolints.txt ([#4704](https://github.com/leanprover-community/mathlib/pull/#4704))

I am happy to remove some nolints for you!

### [2020-10-19T22:45:26+00:00](https://github.com/leanprover-community/mathlib/commit/accc50ed7d35172a6a9ec4f947eee1cadcd132a7)
chore(data/finsupp): `to_additive` on `on_finset_sum` ([#4698](https://github.com/leanprover-community/mathlib/pull/#4698))

### [2020-10-19T22:45:23+00:00](https://github.com/leanprover-community/mathlib/commit/706b484152a01c2a3deab9b52db05d26e60b657e)
chore(data/multiset): add a few lemmas ([#4697](https://github.com/leanprover-community/mathlib/pull/#4697))

### [2020-10-19T22:45:21+00:00](https://github.com/leanprover-community/mathlib/commit/b707e989e10b0b41a66c4b6f2e6c10233ba79616)
refactor(ring_theory/witt_vector): move lemmas to separate file ([#4693](https://github.com/leanprover-community/mathlib/pull/#4693))

This new file has almost no module docstring.
This is on purpose, it is a refactor PR.
A follow-up PR will add a module docstring and more definitions.



Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-10-19T22:45:19+00:00](https://github.com/leanprover-community/mathlib/commit/b3003023ea0eb5f0ae5a2c8425395635ae7875c3)
feat(algebra/free_algebra): Add a ring instance ([#4692](https://github.com/leanprover-community/mathlib/pull/#4692))

This also adds a ring instance to `tensor_algebra`.

The approach here does not work for `exterior_algebra` and `clifford_algebra`, and produces weird errors.
Those will be easier to investigate when their foundations are in mathlib.

### [2020-10-19T22:45:17+00:00](https://github.com/leanprover-community/mathlib/commit/cc6594a5e73b8d97982d46bcb430acfe0ab0b49b)
doc(algebra/algebra/basic): Fixes some documentation about `R`-algebras ([#4689](https://github.com/leanprover-community/mathlib/pull/#4689))

See the associated zulip discussion:
https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/The.20Type.20of.20R-algebras/near/213722713

### [2020-10-19T22:45:15+00:00](https://github.com/leanprover-community/mathlib/commit/86d65f8d6086aad04cf7a939e6900f1a654b08c0)
chore(topology/instances/ennreal): prove `nnreal.not_summable_iff_tendsto_nat_at_top` ([#4670](https://github.com/leanprover-community/mathlib/pull/#4670))

* use `ℝ≥0` notation in `data/real/ennreal`;

* add `ennreal.forall_ne_top`, `ennreal.exists_ne_top`,
  `ennreal.ne_top_equiv_nnreal`, `ennreal.cinfi_ne_top`,
  `ennreal.infi_ne_top`, `ennreal.csupr_ne_top`, `ennreal.sup_ne_top`,
  `ennreal.supr_ennreal`;

* add `nnreal.injective_coe`, add `@[simp, norm_cast]` to
  `nnreal.tendsto_coe`, and add `nnreal.tendsto_coe_at_top`; move
  `nnreal.infi_real_pos_eq_infi_nnreal_pos` from `ennreal` to `nnreal`;

* use `function.injective` instead of an unfolded definition in `filter.comap_map`;

* add `ennreal.nhds_top'`, `ennreal.tendsto_nhds_top_iff_nnreal`,
  `ennreal.tendsto_nhds_top_iff_nat`;
  
* upgrade `ennreal.tendsto_coe_nnreal_nhds_top` to an `iff`, rename to
  `ennreal.tendsto_coe_nhds_top`;

* `nnreal.has_sum_iff_tendsto_nat` now takes  `r` as an implicit argument;

* add `nnreal.not_summable_iff_tendsto_nat_at_top` and
  `not_summable_iff_tendsto_nat_at_top_of_nonneg`.

### [2020-10-19T22:45:12+00:00](https://github.com/leanprover-community/mathlib/commit/30195815db5170facd63ea81f03776e10dd17b34)
feat({field,ring}_theory/adjoin): generalize `induction_on_adjoin` ([#4647](https://github.com/leanprover-community/mathlib/pull/#4647))

We can prove `induction_on_adjoin` for both `algebra.adjoin` and `intermediate_field.adjoin` in a very similar way, if we add a couple of small lemmas. The extra lemmas I introduced for `algebra.adjoin` shorten the proof of `intermediate_field.adjoin` noticeably.

### [2020-10-19T22:45:10+00:00](https://github.com/leanprover-community/mathlib/commit/006b2e708d00febf3d1d31d3cff33b62c528efe8)
feat(data/polynomial/reverse): define `reverse f`, prove that `reverse` is a multiplicative monoid homomorphism ([#4598](https://github.com/leanprover-community/mathlib/pull/#4598))

### [2020-10-19T22:45:07+00:00](https://github.com/leanprover-community/mathlib/commit/0c70cf3093b75a56ebbbadd25d1c505c540194dc)
feat(tactic/unify_equations): add unify_equations tactic ([#4515](https://github.com/leanprover-community/mathlib/pull/#4515))

`unify_equations` is a first-order unification tactic for propositional
equalities. It implements the algorithm that `cases` uses to simplify
indices of inductive types, with one extension: `unify_equations` can
derive a contradiction from 'cyclic' equations like `n = n + 1`.

`unify_equations` is unlikely to be particularly useful on its own, but
I'll use it as part of my new `induction` tactic.

### [2020-10-19T22:45:05+00:00](https://github.com/leanprover-community/mathlib/commit/a249c9a4ee252ad64171fa779883d48c3a0fe93a)
feat(archive/imo): formalize IMO 1998 problem 2 ([#4502](https://github.com/leanprover-community/mathlib/pull/#4502))

### [2020-10-19T22:45:03+00:00](https://github.com/leanprover-community/mathlib/commit/5065471e347388280b82830e1ed7a223b071c460)
feat(data/monoid_algebra): add missing has_coe_to_fun ([#4315](https://github.com/leanprover-community/mathlib/pull/#4315))

Also does the same for the additive version `semimodule k (add_monoid_algebra k G)`.

### [2020-10-19T20:01:36+00:00](https://github.com/leanprover-community/mathlib/commit/0523b61de45332f439a59bff056a36c4423a45ac)
chore(logic/function): `simp`lify applications of `(un)curry` ([#4696](https://github.com/leanprover-community/mathlib/pull/#4696))

### [2020-10-19T15:37:07-04:00](https://github.com/leanprover-community/mathlib/commit/a1f17706fd263e95028cf4444a22c4f9e9e81a38)
Revert "chore(data/multiset): add a few lemmas"

This reverts commit 45caa4f392fe4f7622fef576cf3811b9ff6fd307.

### [2020-10-19T15:30:42-04:00](https://github.com/leanprover-community/mathlib/commit/45caa4f392fe4f7622fef576cf3811b9ff6fd307)
chore(data/multiset): add a few lemmas

### [2020-10-19T15:11:45+00:00](https://github.com/leanprover-community/mathlib/commit/cacc297ca1c3fd8c8ab780f197139a0898ffe395)
fix(tactic/norm_num): remove unnecessary argument to rat.cast_zero ([#4682](https://github.com/leanprover-community/mathlib/pull/#4682))

See [Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60norm_num.60.20error.20message).

### [2020-10-19T11:39:07+00:00](https://github.com/leanprover-community/mathlib/commit/0f1bc68ff23aefc7efa0fae679bae4aace648509)
feat(ring_theory/witt_vector/structure_polynomial): examples and basic properties ([#4467](https://github.com/leanprover-community/mathlib/pull/#4467))

This is the 4th and final PR in a series on a fundamental theorem about Witt polynomials.


Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-10-19T11:39:05+00:00](https://github.com/leanprover-community/mathlib/commit/4140f789a3e92f91de8c3d467c497e91472ce799)
feat(algebra/ordered_semiring): relax 0 < 1 to 0 ≤ 1 ([#4363](https://github.com/leanprover-community/mathlib/pull/#4363))

Per [discussion](https://github.com/leanprover-community/mathlib/pull/4296#issuecomment-701953077) in [#4296](https://github.com/leanprover-community/mathlib/pull/#4296).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-10-19T10:38:52+00:00](https://github.com/leanprover-community/mathlib/commit/ef9d00f7ad096d7fd86116cd52fe38a000484215)
feat(linear_algebra/matrix): multiplying `is_basis.to_matrix` and `linear_map.to_matrix` ([#4650](https://github.com/leanprover-community/mathlib/pull/#4650))

This basically tells us that `is_basis.to_matrix` is indeed a basis change matrix.

### [2020-10-19T10:38:50+00:00](https://github.com/leanprover-community/mathlib/commit/47dcecd2c6562fefc49f211f60bc2b7f7f8b7a56)
feat(data/complex/exponential): bounds on exp ([#4432](https://github.com/leanprover-community/mathlib/pull/#4432))

Define `real.exp_bound` using `complex.exp_bound`.  Deduce numerical
bounds on `exp 1` analogous to those we have for pi.



Co-authored-by: Mario Carneiro <di.gama@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-19T10:38:48+00:00](https://github.com/leanprover-community/mathlib/commit/c38d128c9d0f36ee9b57ea0a0e931bc04973f886)
feat(ring_theory/polynomial/chebyshev): chebyshev polynomials of the first kind ([#4267](https://github.com/leanprover-community/mathlib/pull/#4267))

If T_n denotes the n-th Chebyshev polynomial of the first kind, then the
polynomials 2*T_n(X/2) form a Lambda structure on Z[X].

I call these polynomials the lambdashev polynomials, because, as far as I
am aware they don't have a name in the literature.

We show that they commute, and that the p-th polynomial is congruent to X^p
mod p. In other words: a Lambda structure.





Co-authored-by: Jujian Zhang <jujian.zhang1998@outlook.com>
Co-authored-by: Reid Barton <rwbarton@gmail.com>
Co-authored-by: none <none>
Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-10-19T07:13:04+00:00](https://github.com/leanprover-community/mathlib/commit/f75dbd3d6bdc768473db0ba19dfb38803b9aeee8)
feat(algebra/*): some simp lemmas, and changing binders ([#4681](https://github.com/leanprover-community/mathlib/pull/#4681))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-10-19T07:13:01+00:00](https://github.com/leanprover-community/mathlib/commit/41c227a13ffcaf7b5a14826a664eb26ea03c99dc)
feat(algebra/infinite_sum): make tsum irreducible ([#4679](https://github.com/leanprover-community/mathlib/pull/#4679))

See https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming-.2F.20tactics/topic/congr'.20is.20slow

### [2020-10-19T07:12:58+00:00](https://github.com/leanprover-community/mathlib/commit/7601a7a5ac72d47a94945be5f0ca50a2cd1cf604)
feat(ring_theory/adjoin): adjoin_singleton_one ([#4633](https://github.com/leanprover-community/mathlib/pull/#4633))

### [2020-10-19T04:45:06+00:00](https://github.com/leanprover-community/mathlib/commit/4b890a24252d62cf094e1fe3ef02220b97852fcd)
feat(*): make int.nonneg irreducible ([#4601](https://github.com/leanprover-community/mathlib/pull/#4601))

In [#4474](https://github.com/leanprover-community/mathlib/pull/#4474), `int.lt` was made irreducible. We make `int.nonneg` irreducible, which is stronger as `int.lt` is expressed in terms of `int.nonneg`.

### [2020-10-19T01:25:23+00:00](https://github.com/leanprover-community/mathlib/commit/d174295c0d3eda6018b9ee2ba1fad30946e1313f)
chore(scripts): update nolints.txt ([#4680](https://github.com/leanprover-community/mathlib/pull/#4680))

I am happy to remove some nolints for you!

### [2020-10-19T01:25:21+00:00](https://github.com/leanprover-community/mathlib/commit/9d1bbd1038364c5637751867b522ae0693547615)
fix(data/equiv): nolint typo ([#4677](https://github.com/leanprover-community/mathlib/pull/#4677))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-19T01:25:19+00:00](https://github.com/leanprover-community/mathlib/commit/49bb5dd977148079e4f5517b4ee7f2b0d350d3cf)
refactor(tactic/norm_num): define prove_ne_zero using prove_ne ([#4626](https://github.com/leanprover-community/mathlib/pull/#4626))

This is trickier than it sounds because of a cyclic dependency. As a result we
now have two versions of `prove_ne_zero` and `prove_clear_denom` is
generic over them. One version proves ne using an order relation on the
target, while the other uses `uncast` lemmas to reduce to `rat` and
then uses the first `prove_ne_zero`. (This is why we actually want two versions -
we can't solve this with a large mutual def, because it would
result in an infinite recursion.)

### [2020-10-18T23:06:55+00:00](https://github.com/leanprover-community/mathlib/commit/1ac5d822d3b2ce32a6ecfc87b1ff4b9a551d7c5e)
fix(logic/nontrivial): change tactic doc entry tag to more common "type class" ([#4676](https://github.com/leanprover-community/mathlib/pull/#4676))

### [2020-10-18T21:34:51+00:00](https://github.com/leanprover-community/mathlib/commit/61e1111d5d3a3420c68f2d7c69bfb5ffcd1091f4)
chore(linear_algebra/affine_space): introduce notation for `affine_map` ([#4675](https://github.com/leanprover-community/mathlib/pull/#4675))

### [2020-10-18T21:34:49+00:00](https://github.com/leanprover-community/mathlib/commit/4faf2e21e35ddebd3bb0274eb29b8e5010c630be)
chore(order/filter): use implicit arguments in `tendsto_at_top` etc ([#4672](https://github.com/leanprover-community/mathlib/pull/#4672))

Also weaken some assumptions from a decidable linear order to a linear order.

### [2020-10-18T21:34:47+00:00](https://github.com/leanprover-community/mathlib/commit/392d52c2f2c41c992398578437500ae2c0818c20)
chore(order/filter): run `dsimp only [set.mem_set_of_eq]` in `filter_upwards` ([#4671](https://github.com/leanprover-community/mathlib/pull/#4671))

### [2020-10-18T19:21:09+00:00](https://github.com/leanprover-community/mathlib/commit/93b7e6358c89cf17e74895aa4393dd2bf8e58d2b)
feat(analysis/special_functions/trigonometric): range_{exp,cos,sin} ([#4595](https://github.com/leanprover-community/mathlib/pull/#4595))



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2020-10-18T16:02:22+00:00](https://github.com/leanprover-community/mathlib/commit/fee2dfaadadd9f77c8837ac6a068e4aa9002e28d)
chore(analysis/calculus/fderiv): golf a lemma using new `nontriviality` ([#4584](https://github.com/leanprover-community/mathlib/pull/#4584))




Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored-by: hrmacbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2020-10-18T09:59:52+00:00](https://github.com/leanprover-community/mathlib/commit/e21dc7a9d82e35bc79fba60e71d28cbea5a430e9)
feat(topology/subset_properties): define `filter.cocompact` ([#4666](https://github.com/leanprover-community/mathlib/pull/#4666))

The filter of complements to compact subsets.

### [2020-10-18T05:51:33+00:00](https://github.com/leanprover-community/mathlib/commit/cc32876dea72bfe929916613d09a0e46d66d4f29)
chore(analysis/normed_space/basic): add `continuous_at.inv'`, `continuous.div` etc ([#4667](https://github.com/leanprover-community/mathlib/pull/#4667))

Also add `continuous_on_(cos/sin)`.

### [2020-10-18T04:29:30+00:00](https://github.com/leanprover-community/mathlib/commit/db06b677ab13815a9b3bf79d32fdbc2b76e9641b)
feat(measure_theory/prod): product measures and Fubini's theorem ([#4590](https://github.com/leanprover-community/mathlib/pull/#4590))

* Define the product measure of two σ-finite measures.
* Prove Tonelli's theorem.
* Prove Fubini's theorem.

### [2020-10-18T01:46:58+00:00](https://github.com/leanprover-community/mathlib/commit/c7782bb1f7e9f04754c5f7e762c8a4f0f07b7d5f)
chore(scripts): update nolints.txt ([#4665](https://github.com/leanprover-community/mathlib/pull/#4665))

I am happy to remove some nolints for you!

### [2020-10-18T01:46:56+00:00](https://github.com/leanprover-community/mathlib/commit/77dc67949d9847db15dc90876d26843a78461092)
chore(data/set/intervals): more lemmas ([#4662](https://github.com/leanprover-community/mathlib/pull/#4662))

### [2020-10-18T01:46:53+00:00](https://github.com/leanprover-community/mathlib/commit/958521076ebf8e3197d760a5308a4c2af761e74e)
chore(order/filter): add a few lemmas ([#4661](https://github.com/leanprover-community/mathlib/pull/#4661))

### [2020-10-18T01:46:51+00:00](https://github.com/leanprover-community/mathlib/commit/f9908388e534c14da23253416b02dfcb60f3fc10)
chore(data/finsupp/basic): rename type variables ([#4624](https://github.com/leanprover-community/mathlib/pull/#4624))

Use `M`, `N`, `P` for types with `has_zero`, `add_monoid`, or
`add_comm_monoid` structure, and `R`, `S` for types with at least
a `semiring` instance.

API change: `single_add_erase` and `erase_add_single` now use explicit arguments.



Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-18T01:46:49+00:00](https://github.com/leanprover-community/mathlib/commit/ebd2b7f260e07cc0054aae7dccc7be8b1152e92f)
feat(logic/nontrivial): make `nontriviality` work for more goals ([#4574](https://github.com/leanprover-community/mathlib/pull/#4574))

The goal is to make `nontriviality` work for the following goals:

* [x] `nontriviality α` if the goal is `is_open s`, `s : set α`;
* [x] `nontriviality E` if the goal is `is_O f g` or `is_o f g`, where `f : α → E`;
* [x] `nontriviality R` if the goal is `linear_independent R _`;
* [ ] `nontriviality R` if the goal is `is_O f g` or `is_o f g`, where `f : α → E`, `[semimodule R E]`;
  in this case `nontriviality` should add a local instance `semimodule.subsingleton R`.

The last case was never needed in `mathlib`, and there is a workaround: run `nontriviality E`, then deduce `nontrivial R` from `nontrivial E`.

Misc feature:

* [x] make `nontriviality` accept an optional list of additional `simp` lemmas.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-10-18T01:46:47+00:00](https://github.com/leanprover-community/mathlib/commit/b977dbac0f7b2a5e479ff3dac0c5d175c02bef0c)
fix(solve_by_elim): handle multiple goals with different hypotheses ([#4519](https://github.com/leanprover-community/mathlib/pull/#4519))

Previously `solve_by_elim*` would operate on multiple goals (only succeeding if it could close all of them, and performing backtracking across goals), however it would incorrectly only use the local context from the main goal. If other goals had different sets of hypotheses, ... various bad things could happen!

This PR arranges so that `solve_by_elim*` inspects the local context later, so it picks up the correct hypotheses.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-10-17T23:24:37+00:00](https://github.com/leanprover-community/mathlib/commit/13cd192e65ca6cc381bb2cde4fc74ab29a8e05be)
feat(measure_theory/measure_space): added sub for measure_theory.measure ([#4639](https://github.com/leanprover-community/mathlib/pull/#4639))

This definition is useful for proving the Lebesgue-Radon-Nikodym theorem for non-negative measures.



Co-authored-by: mzinkevi <41597957+mzinkevi@users.noreply.github.com>

### [2020-10-17T23:24:35+00:00](https://github.com/leanprover-community/mathlib/commit/e83458cb23a6322c2eb4a59cbf647128d5f906f9)
feat(algebra/group_power): Add mul/add variants of powers_hom and friends ([#4636](https://github.com/leanprover-community/mathlib/pull/#4636))

### [2020-10-17T23:24:33+00:00](https://github.com/leanprover-community/mathlib/commit/c83c28a1ef16790f62c893379b75f77d30ab068e)
feat(archive/imo): add IMO 2019 problem 4 ([#4482](https://github.com/leanprover-community/mathlib/pull/#4482))

### [2020-10-17T20:50:45+00:00](https://github.com/leanprover-community/mathlib/commit/95d33ee9c9498dd187e4af6ec854dd082a2a314c)
refactor(algebra/quadratic_discriminant): drop linearity condition; cleanup ([#4656](https://github.com/leanprover-community/mathlib/pull/#4656))

Renames:

- `discriminant_le_zero` to `discrim_le_zero`
- `discriminant_lt_zero` to `discrim_lt_zero`

### [2020-10-17T20:50:43+00:00](https://github.com/leanprover-community/mathlib/commit/03674679293131adc7a56ad00bf99829b88af186)
chore(group/type_tags): Add missing simp lemmas ([#4651](https://github.com/leanprover-community/mathlib/pull/#4651))

### [2020-10-17T20:50:41+00:00](https://github.com/leanprover-community/mathlib/commit/0b9afe1853b508b2d15052a320ac12711aaad039)
chore(linear_algebra/affine_space): redefine `line_map`, add `to_affine_subspace` ([#4643](https://github.com/leanprover-community/mathlib/pull/#4643))

* now `line_map` takes two points on the line, not a point and a
  direction, update/review lemmas;
* add `submodule.to_affine_subspace`;
* add `affine_map.fst` and `affine_map.snd`;
* prove that an affine map `ℝ → ℝ` sends an unordered interval to an unordered interval.

### [2020-10-17T18:26:05+00:00](https://github.com/leanprover-community/mathlib/commit/589ebf59e52600de746a7f50218da033555f581a)
chore(algebra/*): add a few `prod.*` instances ([#4659](https://github.com/leanprover-community/mathlib/pull/#4659))

* `prod.left_cancel_semigroup`;
* `prod_right_cancel_semigroup`;
* `prod.ordered_cancel_comm_monoid`;
* `ordered_comm_group`.

### [2020-10-17T18:26:02+00:00](https://github.com/leanprover-community/mathlib/commit/6e5b6cc0421db971f9d5331f2926ff964e8519e2)
feat(algebra/gcd_monoid, polynomial/field_division): generalizing `normalization_monoid` on polynomials ([#4655](https://github.com/leanprover-community/mathlib/pull/#4655))

Defines a `normalization_monoid` instance on any `comm_group_with_zero`, including fields
Defines a `normalization_monoid` instance on `polynomial R` when `R` has a `normalization_monoid` instance



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-17T18:26:00+00:00](https://github.com/leanprover-community/mathlib/commit/edddb3b25727df814c8574b0f220f2baab5eb86d)
feat(finsupp/basic): Add a variant of `prod_map_domain_index` for when f is injective ([#4645](https://github.com/leanprover-community/mathlib/pull/#4645))

This puts much weaker restrictions on `h`, making this easier to apply in some situations

### [2020-10-17T18:25:58+00:00](https://github.com/leanprover-community/mathlib/commit/85eb12df403f7f1ef1db5363f465b340fa6d6d6c)
feat(algebra/algebra/basic): product of two algebras ([#4632](https://github.com/leanprover-community/mathlib/pull/#4632))

### [2020-10-17T18:25:57+00:00](https://github.com/leanprover-community/mathlib/commit/82ff1e561b6018ed5b6cb5cda6d3a76fb99c174f)
feat(algebra/algebra/subalgebra): subalgebra.subsingleton ([#4631](https://github.com/leanprover-community/mathlib/pull/#4631))

### [2020-10-17T18:25:55+00:00](https://github.com/leanprover-community/mathlib/commit/688157f8ffc9907497b5bd1135db488a3187dcd8)
feat(ring_theory/polynomial/content): definition of content + proof that it is multiplicative ([#4393](https://github.com/leanprover-community/mathlib/pull/#4393))

Defines `polynomial.content` to be the `gcd` of the coefficients of a polynomial
Says a polynomial `is_primitive` if its content is 1
Proves that `(p * q).content = p.content * q.content

### [2020-10-17T16:08:01+00:00](https://github.com/leanprover-community/mathlib/commit/b145c36fdce63f4a4772da3e9a9a3c32f41bc434)
feat(archive/imo): variant solution to IMO 1962 problem 4 ([#4640](https://github.com/leanprover-community/mathlib/pull/#4640))

Continuation of a discussion at [#4518](https://github.com/leanprover-community/mathlib/pull/#4518)

### [2020-10-17T13:41:26+00:00](https://github.com/leanprover-community/mathlib/commit/25d83437b19a118aa47db6ead941a4edcee1481a)
feat(topology/sheaves): an equivalent sheaf condition ([#4538](https://github.com/leanprover-community/mathlib/pull/#4538))

Another condition equivalent to the sheaf condition: for every open cover `U`, `F.obj (supr U)` is the limit point of the diagram consisting of all the `F.obj V`, where `V ≤ U i` for some `i`.

This condition is particularly straightforward to state, and makes some proofs easier (however we don't do this here: just prove the equivalence with the "official" definition). It's particularly nice because there is no case splitting (depending on whether you're looking at single or double intersections) when checking the sheaf condition.

This is the statement Lurie uses in Spectral Algebraic Geometry.

Later I may propose that we make this the official definition, but I'll wait to see how it pans out in actual use, first. For now it's just provided as yet another equivalent version of the sheaf condition.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-10-17T01:11:20+00:00](https://github.com/leanprover-community/mathlib/commit/ca2e6f4262e9d0192a562f050e643f4ba1513a17)
chore(scripts): update nolints.txt ([#4654](https://github.com/leanprover-community/mathlib/pull/#4654))

I am happy to remove some nolints for you!

### [2020-10-16T21:43:46+00:00](https://github.com/leanprover-community/mathlib/commit/7b9acd9e3847bb9fc771d02a310a94e6e89093c9)
chore(measure_theory/*): reflow long lines ([#4642](https://github.com/leanprover-community/mathlib/pull/#4642))

Also do some minor golfing.

### [2020-10-16T19:41:32+00:00](https://github.com/leanprover-community/mathlib/commit/189e53865e2c7679c64e08790ed09b4e2cc8b3e7)
feat(geometry/manifold): stab at diffeomorphisms ([#4351](https://github.com/leanprover-community/mathlib/pull/#4351))

### [2020-10-16T18:01:28+00:00](https://github.com/leanprover-community/mathlib/commit/86b298f2075e8b3fbb2c51b58c0c87fb3407626a)
feat(category_theory/sites): grothendieck topologies ([#4577](https://github.com/leanprover-community/mathlib/pull/#4577))

### [2020-10-16T16:28:29+00:00](https://github.com/leanprover-community/mathlib/commit/0d9227f8afce790efd9e73dbc0e55768b83d4a7d)
feat(category_theory/monad/kleisli): add Kleisli category of a monad ([#4542](https://github.com/leanprover-community/mathlib/pull/#4542))

Adds the Kleisli category of a monad, and shows the Kleisli category for a lawful control monad is equivalent to the Kleisli category of its category-theoretic version.

Following discussion at https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/kleisli.20vs.20kleisli.

I'd appreciate suggestions for names more sensible than the ones already there.

### [2020-10-16T07:43:42+00:00](https://github.com/leanprover-community/mathlib/commit/f675a0060472ca9f6c78cefea4ad2ccbb272193e)
chore(set_theory/zfc): split long lines ([#4641](https://github.com/leanprover-community/mathlib/pull/#4641))

Also add `Set.subset_def` and rewrite `Set.mem_pair_sep` in tactic mode

### [2020-10-16T05:34:17+00:00](https://github.com/leanprover-community/mathlib/commit/1cce606476558fe535384b4172fbe44a039d61b9)
feat(analysis/special_functions/trigonometric): some lemmas ([#4638](https://github.com/leanprover-community/mathlib/pull/#4638))

The following changes:
- `sin_sub_sin` and friends (sum-to-product lemmas) moved from `trigonometric` to the earlier file `exponential`.  (I think the distinction between the files is that `trigonometric` collects the facts that require either differentiation or the definition `pi`, whereas purely algebraic facts about trigonometry go in `exponential`?  For example the double-angle formula is in `exponential`).
- rewrite proof of `cos_lt_cos_of_nonneg_of_le_pi_div_two` to avoid dependence on `cos_eq_one_iff_of_lt_of_lt` (but not sure if the result is actually simpler, feel free to propose this be reverted)
- some new explicit values of trig functions, `cos (π / 3)` and similar
- correct a series of lemmas in the `complex` namespace that were stated for real arguments (presumably the author copy-pasted but forgot to rewrite)
- lemmas `sin_eq_zero_iff`, `cos_eq_cos_iff`, `sin_eq_sin_iff`

### [2020-10-16T05:34:15+00:00](https://github.com/leanprover-community/mathlib/commit/e7b8421e0fe5153b53e1ace828d5a15e56725c8b)
chore(linear_algebra/finsupp): turn `finsupp.lsum` into `add_equiv` ([#4597](https://github.com/leanprover-community/mathlib/pull/#4597))

### [2020-10-16T03:25:42+00:00](https://github.com/leanprover-community/mathlib/commit/8280190f1816b59ebf98235790edcf15e39c1f45)
chore(scripts): update nolints.txt ([#4637](https://github.com/leanprover-community/mathlib/pull/#4637))

I am happy to remove some nolints for you!

### [2020-10-16T03:25:39+00:00](https://github.com/leanprover-community/mathlib/commit/cc14658a0ea2546b5b696f9ca8f9a98743119ba1)
chore(algebra/group_powers): Add missing lemmas ([#4635](https://github.com/leanprover-community/mathlib/pull/#4635))

This part of the file defines four equivalences, but goes on to state lemmas about only one of them.
This provides the lemmas for the other three.

### [2020-10-16T00:56:13+00:00](https://github.com/leanprover-community/mathlib/commit/dca1393efc490921fe8e9289a3130aba52ee11ea)
feat(data/equiv/basic): add `equiv.set.compl` ([#4630](https://github.com/leanprover-community/mathlib/pull/#4630))

Given an equivalence between two sets `e₀ : s ≃ t`, the set of
`e : α ≃ β` that agree with `e₀` on `s` is equivalent to `sᶜ ≃ tᶜ`.

Also add a bunch of lemmas to `data/set/function`; some of them are
used in the definition of `equiv.set.compl`.

Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2020-10-16T00:56:11+00:00](https://github.com/leanprover-community/mathlib/commit/b0b61e6f9850482016ed30a8ef4a4920fefd7c43)
feat(order/category/omega-complete): omega-complete partial orders form a complete category ([#4397](https://github.com/leanprover-community/mathlib/pull/#4397))

as discussed in [#4348](https://github.com/leanprover-community/mathlib/pull/#4348).

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-15T23:48:19+00:00](https://github.com/leanprover-community/mathlib/commit/3e12a7b955af6855213cb0ccf9e2e72468bf09da)
chore(category_theory/limits/binary_products): fixup binary product lemmas ([#4376](https://github.com/leanprover-community/mathlib/pull/#4376))

The main changes in here are:
- `prod.map` is now a def, not an abbreviation. I think this is an important change because oftentimes `simp` will reduce it to `lim.map` and then get stuck, which is tough to debug and usually the wrong step to take. Instead, the `prod.map_fst` and `snd` lemmas are proved directly rather than with simp, and these are used to get everything else.
- I added a couple of new simp lemmas and rewrote a few others: the overall guide here is that more things can be proved by `rw` or `simp` *without using ext*. The idea of this is that when you're dealing with a chain of compositions containing product morphisms, it's much nicer to be able to rewrite (or simp) the parts you want rather than needing to do an auxiliary `have` and use `ext` in there, then rewrite using this lemma inside your big chain. In this file at least I managed to get rid of a bunch of uses of `ext` (and also convert `tidy` to `simp`) so I'm pretty sure these changes were positive.
- Moved around some definitions and lemmas. No big changes here, mostly just putting things which work similarly closer.
- Weakened typeclass assumptions: in particular for `prod_comparison`.
- Renamed some `prod_` lemmas to `prod.`, since there used to be a mix between the two; so I've made the usage consistent.

+ dual versions of all the above.

### [2020-10-15T22:31:38+00:00](https://github.com/leanprover-community/mathlib/commit/b7d176e549eecc1e6dfc0c17efad3ff309e83159)
feat(category_theory/cones): some isomorphisms relating operations ([#4536](https://github.com/leanprover-community/mathlib/pull/#4536))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-10-15T20:34:24+00:00](https://github.com/leanprover-community/mathlib/commit/8985e395a54ec30f1ee5acb782e15948ffd2281e)
feat(archive/100-theorems-list/70_perfect_numbers): Perfect Number Theorem, Direction 2 ([#4621](https://github.com/leanprover-community/mathlib/pull/#4621))

Adds a few extra lemmas about `divisors`, `proper_divisors` and sums of proper divisors
Proves Euler's direction of the Perfect Number theorem, finishing Freek 70

### [2020-10-15T16:29:11+00:00](https://github.com/leanprover-community/mathlib/commit/d47351768d568e1c0435147ba45edbbb7d978ee8)
chore(algebra/group/hom): add `monoid_hom.eval` ([#4629](https://github.com/leanprover-community/mathlib/pull/#4629))

### [2020-10-15T16:29:09+00:00](https://github.com/leanprover-community/mathlib/commit/38a5f5d6bb0988bdd4db48ac364de40d384e6c84)
chore(data/equiv/mul_add): add `monoid_hom.to_mul_equiv` ([#4628](https://github.com/leanprover-community/mathlib/pull/#4628))

### [2020-10-15T16:29:07+00:00](https://github.com/leanprover-community/mathlib/commit/46b0528b086cc021714d3af8ba0709fc5c9558b8)
refactor(data/polynomial): Move some lemmas to `monoid_algebra` ([#4627](https://github.com/leanprover-community/mathlib/pull/#4627))

The `add_monoid_algebra.mul_apply_antidiagonal` lemma is copied verbatim from `monoid_algebra.mul_apply_antidiagonal`.

### [2020-10-15T16:29:05+00:00](https://github.com/leanprover-community/mathlib/commit/abaf3c29004f06ed75a85e3215a116a5fe963f44)
feat(algebra/category/Algebra/basic): Add free/forget adjunction. ([#4620](https://github.com/leanprover-community/mathlib/pull/#4620))

This PR adds the usual free/forget adjunction for the category of `R`-algebras.



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2020-10-15T16:29:03+00:00](https://github.com/leanprover-community/mathlib/commit/07ee11e78186a4308483239fe942a0bf60c97c37)
feat(algebra/algebra/basic): Add `map_finsupp_(sum|prod)` to `alg_(hom|equiv)` ([#4603](https://github.com/leanprover-community/mathlib/pull/#4603))

Also copies some lemmas from `alg_hom` to `alg_equiv` that were missing

### [2020-10-15T16:29:00+00:00](https://github.com/leanprover-community/mathlib/commit/bb1f5492ddf999ab3b4fbff027803b81d90aeb1d)
feat(algebra/gcd_monoid): in a gcd_domain a coprime factor of a power is a power ([#4589](https://github.com/leanprover-community/mathlib/pull/#4589))

The main result is:
```
theorem associated_pow_of_mul_eq_pow {a b c : α} (ha : a ≠ 0) (hb : b ≠ 0)
  (hab : gcd a b = 1) {k : ℕ} (h : a * b = c ^ k) :
  ∃ (d : α), associated (d ^ k) a
```

Co-authored-by: paulvanwamelen <30371019+paulvanwamelen@users.noreply.github.com>

### [2020-10-15T16:28:58+00:00](https://github.com/leanprover-community/mathlib/commit/b01ca81085e540f611944b252cae85b53c926e4e)
feat(data/matrix/notation): simp lemmas for constant-indexed elements ([#4491](https://github.com/leanprover-community/mathlib/pull/#4491))

If you use the `![]` vector notation to define a vector, then `simp`
can extract elements `0` and `1` from that vector, but not element `2`
or subsequent elements.  (This shows up in particular in geometry if
defining a triangle with a concrete vector of vertices and then
subsequently doing things that need to extract a particular vertex.)
Add `bit0` and `bit1` `simp` lemmas to allow any element indexed by a
numeral to be extracted (even when the numeral is larger than the
length of the list, such numerals in `fin n` being interpreted mod
`n`).

This ends up quite long; `bit0` and `bit1` semantics mean extracting
alternate elements of the vector in a way that can wrap around to the
start of the vector when the numeral is `n` or larger, so the lemmas
need to deal with constructing such a vector of alternate elements.
As I've implemented it, some definitions also need an extra hypothesis
as an argument to control definitional equalities for the vector
lengths, to avoid problems with non-defeq types when stating
subsequent lemmas.  However, even the example added to
`test/matrix.lean` of extracting element `123456789` of a 5-element
vector is processed quite quickly, so this seems efficient enough.

Note also that there are two `@[simp]` lemmas whose proofs are just
`by simp`, but that are in fact needed for `simp` to complete
extracting some elements and that the `simp` linter does not (at least
when used with `#lint` for this single file) complain about.  I'm not
sure what's going on there, since I didn't think a lemma that `simp`
can prove should normally need to be marked as `@[simp]`.

### [2020-10-15T15:01:02+00:00](https://github.com/leanprover-community/mathlib/commit/85d4b57496f10a7a22261e8f67f9df3282a958f5)
feat(data/polynomial/eval): bit0_comp, bit1_comp ([#4617](https://github.com/leanprover-community/mathlib/pull/#4617))

### [2020-10-15T14:04:18+00:00](https://github.com/leanprover-community/mathlib/commit/1444fa52f7a93c4d1ffade3aa0dd05d029e94928)
fix(haar_measure): minor changes ([#4623](https://github.com/leanprover-community/mathlib/pull/#4623))

There were some mistakes in the doc, which made it sound like `chaar` and `haar_outer_measure` coincide on compact sets, which is not generally true. 
Also cleanup various proofs.

### [2020-10-15T08:51:18+00:00](https://github.com/leanprover-community/mathlib/commit/7559d1c8797485c95bab68d0f1d897a17ce60b2e)
lint(data/num/*): add docs and remove some [has_zero] requirements ([#4604](https://github.com/leanprover-community/mathlib/pull/#4604))

### [2020-10-15T07:30:22+00:00](https://github.com/leanprover-community/mathlib/commit/fa652828c968dc33b4af5485f640b1588ca0ae58)
chore(category_theory/monoidal): fix typo in docstrings ([#4625](https://github.com/leanprover-community/mathlib/pull/#4625))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-15T01:11:53+00:00](https://github.com/leanprover-community/mathlib/commit/2e1129ebfb35d7071afd328948fd90616fa94b95)
chore(scripts): update nolints.txt ([#4622](https://github.com/leanprover-community/mathlib/pull/#4622))

I am happy to remove some nolints for you!

### [2020-10-14T18:39:39+00:00](https://github.com/leanprover-community/mathlib/commit/084b7e7df3417820b27de021278d96069dff2753)
chore(algebra/order,data/set/intervals): a few more trivial lemmas ([#4611](https://github.com/leanprover-community/mathlib/pull/#4611))

* a few more lemmas for `has_le.le` and `has_lt.lt` namespaces;
* a few lemmas about intersections of intervals;
* fix section header in `topology/algebra/module`.

### [2020-10-14T18:39:37+00:00](https://github.com/leanprover-community/mathlib/commit/d11eb847e906b181191d986791e425a5e4602fd3)
fix(tactic/suggest): properly remove "Try this: exact " prefix from library_search hole command ([#4609](https://github.com/leanprover-community/mathlib/pull/#4609))

[See Zulip](https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/mechanisms.20to.20search.20through.20mathlilb/near/213223321)

### [2020-10-14T17:31:01+00:00](https://github.com/leanprover-community/mathlib/commit/40844f01193958aeeb289198cf941cc243fdf529)
doc(category_theory/comma): Fix markdown rendering in docs ([#4618](https://github.com/leanprover-community/mathlib/pull/#4618))

### [2020-10-14T14:46:32+00:00](https://github.com/leanprover-community/mathlib/commit/de46349366376fe12530dc56a99244a7ca405cae)
feat(data/set/intervals): more lemmas about `unordered_interval` ([#4607](https://github.com/leanprover-community/mathlib/pull/#4607))

Add images/preimages of unordered intervals under common arithmetic operations.

### [2020-10-14T14:46:30+00:00](https://github.com/leanprover-community/mathlib/commit/442ef2261ef6491faf3ef6b875811c7c4320f6f0)
feat(linear_algebra/clifford_algebra): Add a definition derived from exterior_algebra.lean ([#4430](https://github.com/leanprover-community/mathlib/pull/#4430))

### [2020-10-14T15:36:40+02:00](https://github.com/leanprover-community/mathlib/commit/1a1655c014bc414802169c12ea2180b893841eec)
doc(docs/100): link to actual triangle inequality ([#4614](https://github.com/leanprover-community/mathlib/pull/#4614))

### [2020-10-14T09:45:28+00:00](https://github.com/leanprover-community/mathlib/commit/f7edbca4a7fe1e1e32e7de21ab5f9643e6789795)
feat(algebra/char_zero): char_zero.infinite ([#4593](https://github.com/leanprover-community/mathlib/pull/#4593))

### [2020-10-14T09:45:26+00:00](https://github.com/leanprover-community/mathlib/commit/6f5ccc1eee40424c3f4d392df92d4b5c1d97ee4b)
chore(linear_algebra/linear_independent): review API ([#4567](https://github.com/leanprover-community/mathlib/pull/#4567))

### API changes

#### New definitions and lemmas

* `subalgebra.to_submodule_equiv`: a linear equivalence between a subalgebra and its coercion
  to a submodule;
* `algebra.to_submodule_bot`: coercion of `⊥ : subalgebra R A` to `submodule R A` is
  `submodule.span {1}`;
* `submodule.disjoint_def'`: one more expansion of `disjoint` for submodules;
* `submodule.is_compl_range_inl_inr`: ranges of `inl` and `inr` are complement submodules;
* `finsupp.supported_inter`, `finsupp.disjojint_supported_supported`,
  `finsupp.disjoint_supported_supported_iff` : more lemmas about `finsupp.supported`;
* `finsupp.total_unique`: formula for `finsupp.total` on a `unique` type;
* `linear_independent_iff_injective_total`, `linear_independent.injective_total` :
  relate `linear_independent R v` to `injective (finsupp.total ι M R v)`;
* `fintype.linear_independent_iff`: a simplified test for
  `linear_independent R v` if the domain of `v` is a `fintype`;
* `linear_independent.map'`: an injective linear map sends linearly
  independent families of vectors to linearly independent families of
  vectors;
* `linear_map.linear_independent_iff`: if `f` is an injective linear
  map, then `f ∘ v` is linearly independent iff `v` is linearly
  independent;
* `linear_independent.disjoint_span_image`: if `v` is a linearly
  independent family of vectors, then the submodules spanned by
  disjoint subfamilies of `v` are disjoint;
* `linear_independent_sum`: a test for linear independence of a
  disjoint union of two families of vectors;
* `linear_independent.sum_type`: `iff.mpr` from `linear_independent_sum`;
* `linear_independent_unique_iff`, `linear_independent_unique`: a test
  for linear independence of a single-vector family;
* `linear_independent_option'`, `linear_independent_option`, `linear_independent.option`:
  test for linear independence of a family indexed by `option ι`;
* `linear_independent_pair`: test for independence of `{v₁, v₂}`;
* `linear_independent_fin_cons`, `linear_independent.fin_cons`,
  `linear_independent_fin_succ`, `linear_independent_fin2`: tests for
  linear independence of families indexed by `i : fin n`.

#### Rename

* `_root_.disjoint_span_singleton` → `submodule.disjoint_span_singleton'`;
* `linear_independent.image` → `linear_independent.map`
* `linear_independent_of_comp` → `linear_independent.of_comp`;

#### Changes in type signature

* `is_basis.to_dual`, `is_basis.to_dual_flip`, `is_basis.to_dual_equiv`: take `B` as an explicit
  argument to improve readability of the pretty-printed output;

### [2020-10-14T08:24:05+00:00](https://github.com/leanprover-community/mathlib/commit/851172945d232e58bdced4ce7dd93dd09662cda8)
refactor(data/int/gcd,ring_theory/int/basic): collect integer divisibility results from various files ([#4572](https://github.com/leanprover-community/mathlib/pull/#4572))

Applying comments from PR [#4384](https://github.com/leanprover-community/mathlib/pull/#4384). In particular:
1) Move the gcd and lcm results from gcd_monoid to `data/int/gcd.lean` with new proofs (for a few lcm results) that do not need ring theory.
2) Try to collect applications of ring theory to ℕ and ℤ into a new file `ring_theory/int/basic.lean`. 

Co-authored-by: paulvanwamelen <30371019+paulvanwamelen@users.noreply.github.com>

### [2020-10-14T08:24:03+00:00](https://github.com/leanprover-community/mathlib/commit/20006f1042a11c2654a487b71be18bbeebbf7c00)
feat(data/polynomial/field_division, field_theory/splitting_field): Splits if enough roots ([#4557](https://github.com/leanprover-community/mathlib/pull/#4557))

I have added some lemmas about polynomials that split. In particular the fact that if `p` has as many roots as its degree than it can be written as a product of `(X - a)` and so it splits.

The proof of this for monic polynomial, in `eq_prod_of_card_roots_monic`, is rather messy and can probably be improved a lot.

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-14T01:06:37+00:00](https://github.com/leanprover-community/mathlib/commit/1c12bd95feb89b5e1077cb9d82f58e4355dc2fbd)
chore(scripts): update nolints.txt ([#4610](https://github.com/leanprover-community/mathlib/pull/#4610))

I am happy to remove some nolints for you!

### [2020-10-13T23:51:13+00:00](https://github.com/leanprover-community/mathlib/commit/e2dd1c678173975c8764957e4032515c8cebf11f)
feat(analysis/normed_space): unconditionally convergent series in `R^n` is absolutely convergent ([#4551](https://github.com/leanprover-community/mathlib/pull/#4551))

### [2020-10-13T21:59:53+00:00](https://github.com/leanprover-community/mathlib/commit/2543b6885a2b1a8174b98cf3d2330869614c6392)
refactor(*): migrate to `dense` API ([#4447](https://github.com/leanprover-community/mathlib/pull/#4447))

@PatrickMassot introduced `dense` in [#4399](https://github.com/leanprover-community/mathlib/pull/#4399). In this PR I review the API and migrate many definitions and lemmas
to use `dense s` instead of `closure s = univ`. I also generalize `second_countable_of_separable` to a `uniform_space`
with a countably generated uniformity filter.

## API changes

### Use `dense` or `dense_range` instead of `closure _ = univ`

#### Lemmas

- `has_fderiv_within_at.unique_diff_within_at`;
- `exists_dense_seq`;
- `dense_Inter_of_open_nat`;
- `dense_sInter_of_open`;
- `dense_bInter_of_open`;
- `dense_Inter_of_open`;
- `dense_sInter_of_Gδ`;
- `dense_bInter_of_Gδ`;
- `eventually_residual`;
- `mem_residual`;
- `dense_bUnion_interior_of_closed`;
- `dense_sUnion_interior_of_closed`;
- `dense_Union_interior_of_closed`;
- `Kuratowski_embeddinng.embedding_of_subset_isometry`;
- `continuous_extend_from`;

#### Definitions

- `unique_diff_within_at`;
- `residual`;

### Rename

- `submodule.linear_eq_on` → `linear_map.eq_on_span`, `linear_map.eq_on_span'`;
- `submodule.linear_map.ext_on` → `linear_map.ext_on_range`;
- `filter.is_countably_generated.has_antimono_basis` →
  `filter.is_countably_generated.exists_antimono_basis`;
- `exists_countable_closure_eq_univ` → `exists_countable_dense`, use `dense`;
- `dense_seq_dense` → `dense_range_dense_seq`, use `dense`;
- `dense_range.separable_space` is now `protected`;
- `dense_of_subset_dense` → `dense.mono`;
- `dense_inter_of_open_left` → `dense.inter_of_open_left`;
- `dense_inter_of_open_right` → `dense.inter_of_open_right`;
- `continuous.dense_image_of_dense_range` → `dense_range.dense_image`;
- `dense_range.inhabited`, `dense_range.nonempty`: changed API, TODO;
- `quotient_dense_of_dense` → `dense.quotient`, use `dense`;
- `dense_inducing.separable` → `dense_inducing.separable_space`, add `protected`;
- `dense_embedding.separable` → `dense_embedding.separable_space`, add `protected`;
- `dense_inter_of_Gδ` → `dense.inter_of_Gδ`;
- `stone_cech_unit_dense` → `dense_range_stone_cech_unit`;
- `abstract_completion.dense'` → `abstract_completion.closure_range`;
- `Cauchy.pure_cauchy_dense` → `Cauchy.dense_range_pure_cauchy`;
- `completion.dense` → `completion.dense_range_coe`;
- `completion.dense₂` → `completion.dense_range_coe₂`;
- `completion.dense₃` → `completion.dense_range_coe₃`;

### New

- `has_fderiv_within_at.unique_on` : if `f'` and `f₁'` are two derivatives of `f`
  within `s` at `x`, then they are equal on the tangent cone to `s` at `x`;
- `local_homeomorph.mdifferentiable.mfderiv_bijective`,
  `local_homeomorph.mdifferentiable.mfderiv_surjective`
- `continuous_linear_map.eq_on_closure_span`: if two continuous linear maps are equal on `s`,
  then they are equal on `closure (submodule.span s)`;
- `continuous_linear_map.ext_on`: if two continuous linear maps are equal on a set `s` such that
  `submodule.span s` is dense, then they are equal;
- `dense_closure`: `closure s` is dense iff `s` is dense;
- `dense.of_closure`, `dense.closure`: aliases for `dense_closure.mp` and `dense_closure.mpr`;
- `dense_univ`: `univ` is dense;
- `dense.inter_open_nonempty`: alias for `dense_iff_inter_open.mp`;
- `dense.nonempty_iff`: if `s : set α` is a dense set, then `s` is nonempty iff `α` is nonempty;
- `dense.nonempty`: a dense set in a nonempty type is nonempty;
- `dense_range.some`: given a function with `dense_range` and a point in the codomain, returns a point in the domain;
- `function.surjective.dense_range`: a surjective function has dense range;
- `continuous.range_subset_closure_image_dense`: closure of the image of a dense set under
  a continuous function includes the range of this function;
- `dense_range.dense_of_maps_to`: if a function with dense range maps a dense set `s` to `t`, then
  `t` is dense in the codomain;
- `dense_range.quotient`;
- `dense.prod`: product of two dense sets is dense in the product;
- `set.eq_on.closure`;
- `continuous.ext_on`;
- `linear_map.ext_on`



Co-authored-by: Patrick Massot <patrickmassot@free.fr>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-10-13T19:48:34+00:00](https://github.com/leanprover-community/mathlib/commit/fde3d78cadeec5ef827b16ae55664ef115e66f57)
chore(multiset): dedicated notation for multiset.cons ([#4600](https://github.com/leanprover-community/mathlib/pull/#4600))

### [2020-10-13T18:44:25+00:00](https://github.com/leanprover-community/mathlib/commit/7368d7190b2be57e282a946dd3622469bceb09ab)
chore(number_theory/arithmetic_function): Define in terms of zero_hom ([#4606](https://github.com/leanprover-community/mathlib/pull/#4606))

No need to write these proofs in two places

### [2020-10-13T16:46:02+00:00](https://github.com/leanprover-community/mathlib/commit/b1c1033fdbc4fa32908077c6af7a34cef4895203)
feat(analysis/normed_space/operator_norm): construct a continuous_linear_equiv from a linear_equiv and bounds in both directions ([#4583](https://github.com/leanprover-community/mathlib/pull/#4583))

### [2020-10-13T16:46:00+00:00](https://github.com/leanprover-community/mathlib/commit/7cff82509cc24ce50f832a70ad8812b08fad68db)
feat(data/vector2): induction principle, define last, and some lemmas (blocked by [#4578](https://github.com/leanprover-community/mathlib/pull/#4578)) ([#4554](https://github.com/leanprover-community/mathlib/pull/#4554))



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-13T15:24:50+00:00](https://github.com/leanprover-community/mathlib/commit/71bb9f23c1a3280dc1c9a428ddec5da1df6613b7)
chore(linear_algebra/finsupp): Implement lsingle in terms of single_add_hom ([#4605](https://github.com/leanprover-community/mathlib/pull/#4605))

While not shorter, this makes it easier to relate the two definitions

### [2020-10-13T14:02:34+00:00](https://github.com/leanprover-community/mathlib/commit/ca6af1c4842a75d73bbf58530cc01a2369e6712d)
chore(algebra/monoid_algebra): Replace `algebra_map'` with `single_(zero|one)_ring_hom` ([#4582](https://github.com/leanprover-community/mathlib/pull/#4582))

`algebra_map'` is now trivially equal to `single_(zero|one)_ring_hom.comp`, so is no longer needed.

### [2020-10-13T11:12:28+00:00](https://github.com/leanprover-community/mathlib/commit/9f9344d3820ddc85afd90f98da79ecdf4b91649d)
feat(algebra/char_p): fields with a hom between them have same char ([#4594](https://github.com/leanprover-community/mathlib/pull/#4594))

### [2020-10-13T09:47:17+00:00](https://github.com/leanprover-community/mathlib/commit/dd8bf2c56943efcdec768e519f1c79e48a622600)
feat(data/polynomial/eval): easy lemmas + speedup ([#4596](https://github.com/leanprover-community/mathlib/pull/#4596))

### [2020-10-13T06:30:22+00:00](https://github.com/leanprover-community/mathlib/commit/7fff35f5e9e282dc2931899807e9ed636f3153b7)
chore(algebra/pointwise): remove `@[simp]` from `singleton_one`/`singleton_zero` ([#4592](https://github.com/leanprover-community/mathlib/pull/#4592))

This lemma simplified `{1}` and `{0}` to `1` and `0` making them unusable for other `singleton` lemmas.

### [2020-10-13T06:30:20+00:00](https://github.com/leanprover-community/mathlib/commit/c9ae9e6719482b395a06d4ef71ec23a0b5cdde90)
chore(linear_algebra/dimension): more same-universe versions of `is_basis.mk_eq_dim` ([#4591](https://github.com/leanprover-community/mathlib/pull/#4591))

While all the `lift` magic is good for general theory, it is not that convenient for the case when everything is in `Type`.

* add `mk_eq_mk_of_basis'`: same-universe version of `mk_eq_mk_of_basis`;
* generalize `is_basis.mk_eq_dim''` to any index type in the same universe as `V`, not necessarily `s : set V`;
* reorder lemmas to optimize the total length of the proofs;
* drop one `finite_dimensional` assumption in `findim_of_infinite_dimensional`.

### [2020-10-13T04:39:56+00:00](https://github.com/leanprover-community/mathlib/commit/766d860d8456085e9ae4ab9651c2aa4ac73e2c8d)
fix(big_operators): fix imports ([#4588](https://github.com/leanprover-community/mathlib/pull/#4588))

Previously `algebra.big_operators.pi` imported `algebra.big_operators.default`. That import direction is now reversed.

### [2020-10-13T03:48:58+00:00](https://github.com/leanprover-community/mathlib/commit/505b969cc09be67a7b7257d30014bd45a36477e4)
feat(archive/imo): formalize IMO 1962 problem Q1 ([#4450](https://github.com/leanprover-community/mathlib/pull/#4450))

The problem statement:

Find the smallest natural number $n$ which has the following properties:
(a) Its decimal representation has 6 as the last digit.
(b) If the last digit 6 is erased and placed in front of the remaining digits,
the resulting number is four times as large as the original number $n$.

This is a proof that 153846 is the smallest member of the set satisfying these conditions.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-13T02:01:14+00:00](https://github.com/leanprover-community/mathlib/commit/e9572699ec1a5357906fc17a27385b362749baf6)
chore(scripts): update nolints.txt ([#4587](https://github.com/leanprover-community/mathlib/pull/#4587))

I am happy to remove some nolints for you!

### [2020-10-13T02:01:12+00:00](https://github.com/leanprover-community/mathlib/commit/9eb341a15182b0b39dc987e10e9e45eb6b997100)
feat(mv_polynomial): minor simplification in coeff_mul ([#4586](https://github.com/leanprover-community/mathlib/pull/#4586))

The proof was already golfed in [#4472](https://github.com/leanprover-community/mathlib/pull/#4472).
Use `×` instead of `sigma`.
Shorten one line over 100 chars.

### [2020-10-13T02:01:09+00:00](https://github.com/leanprover-community/mathlib/commit/7dcaee1cca9e0a15e73d5499663b51c1dccaa7a1)
feat(archive/imo): formalize IMO 1962 problem 4 ([#4518](https://github.com/leanprover-community/mathlib/pull/#4518))

The problem statement: Solve the equation `cos x ^ 2 + cos (2 * x) ^ 2 + cos (3 * x) ^ 2 = 1`.

There are a bunch of trig formulas I proved along the way; there are sort of an infinite number of trig formulas so I'm open to feedback on whether some should go in the core libraries. Also possibly some of them have a shorter proof that would render the lemma unnecessary.

For what it's worth, the actual method of solution is not how a human would do it; a more intuitive human method is to simplify in terms of `cos x` and then solve, but I think this is simpler in Lean because it doesn't rely on solving `cos x = y` for several different `y`.

Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2020-10-13T02:01:07+00:00](https://github.com/leanprover-community/mathlib/commit/b231d8e71fdb6c502e50b0c595f9836a7c75bec3)
feat(archive/imo): formalize IMO 1960 problem 1 ([#4366](https://github.com/leanprover-community/mathlib/pull/#4366))

The problem:
Determine all three-digit numbers $N$ having the property that $N$ is divisible by 11, and
$\dfrac{N}{11}$ is equal to the sum of the squares of the digits of $N$.

Art of Problem Solving offers three solutions to this problem - https://artofproblemsolving.com/wiki/index.php/1960_IMO_Problems/Problem_1 - but they all involve a fairly large amount of bashing through cases and solving basic algebra. This proof is also essentially bashing through cases, using the `iterate` tactic and calls to `norm_num`.

### [2020-10-12T23:17:41+00:00](https://github.com/leanprover-community/mathlib/commit/a6d445db688d6504b13328bd1f7ecdb954c76cce)
feat(data/finsupp): Add `map_finsupp_prod` to homs ([#4585](https://github.com/leanprover-community/mathlib/pull/#4585))

This is a convenience alias for `map_prod`, which is awkward to use.

### [2020-10-12T23:17:40+00:00](https://github.com/leanprover-community/mathlib/commit/d1bb5ea604ca1bc607d265a0d9022170ac1898cf)
feat(topology/category/Compactum): Compact Hausdorff spaces ([#4555](https://github.com/leanprover-community/mathlib/pull/#4555))

This PR provides the equivalence between the category of compact Hausdorff topological spaces and the category of algebras for the ultrafilter monad.

## Notation
1. `Compactum` is the category of algebras for the ultrafilter monad. It's a wrapper around `monad.algebra (of_type_functor $ ultrafilter)`.
2. `CompHaus` is the full subcategory of `Top` consisting of topological spaces which are compact and Hausdorff.

### [2020-10-12T23:17:37+00:00](https://github.com/leanprover-community/mathlib/commit/bc77a23ec014c45abdfdd4715d0cb032f8c6c6a0)
feat(data/list/*): add left- and right-biased versions of map₂ and zip ([#4512](https://github.com/leanprover-community/mathlib/pull/#4512))

When given lists of different lengths, `map₂` and `zip` truncate the output to
the length of the shorter input list. This commit adds variations on `map₂` and
`zip` whose output is always as long as the left/right input.

### [2020-10-12T20:50:13+00:00](https://github.com/leanprover-community/mathlib/commit/d3d70f1f58b1452f77e2bd2179c1cd31e8843e1c)
chore(algebra/order*): move `abs`/`min`/`max`, review ([#4581](https://github.com/leanprover-community/mathlib/pull/#4581))

* make `algebra.ordered_group` import `algebra.order_functions`, not vice versa;
* move some proofs from `algebra.ordered_functions` to `algebra.ordered_group` and `algebra.ordered_ring`;
* deduplicate API;
* golf some proofs.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-12T20:50:11+00:00](https://github.com/leanprover-community/mathlib/commit/6ea620083f23bc4a6c9b9591f66a0fa1d294a268)
feat(tactic/rcases): rcases_many ([#4569](https://github.com/leanprover-community/mathlib/pull/#4569))

This allows you to pattern match many variables at once, using the
syntax `obtain ⟨a|b, c|d⟩ := ⟨x, y⟩`. This doesn't require any change
to the front end documentation, as it is in some sense the obvious thing,
but this doesn't break any existing uses because this could never work
before (since the expected type of the tuple expression is not known).

### [2020-10-12T20:50:09+00:00](https://github.com/leanprover-community/mathlib/commit/9bed45675f03a6962138ec672f67c699f41aedbf)
feta(data/fin): induction principle on fin (n + 1) ([#4546](https://github.com/leanprover-community/mathlib/pull/#4546))

### [2020-10-12T20:50:06+00:00](https://github.com/leanprover-community/mathlib/commit/8ccfb0ad8cfed894dd1e70af1108f7373d5e031e)
chore(control/functor): linting ([#4496](https://github.com/leanprover-community/mathlib/pull/#4496))

### [2020-10-12T18:08:56+00:00](https://github.com/leanprover-community/mathlib/commit/9713e960088deff88d7604a0584115db7c6f53c0)
chore(*): update to Lean 3.21.0c ([#4578](https://github.com/leanprover-community/mathlib/pull/#4578))

The only real change is the removal of notation for `vector.cons`.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-12T18:08:53+00:00](https://github.com/leanprover-community/mathlib/commit/6816b835acd56ba5be933b436da189afe455ab68)
feat(archive/100-theorems-list/70_perfect_numbers): Direction 1 of the Perfect Number Theorem ([#4544](https://github.com/leanprover-community/mathlib/pull/#4544))

Proves Euclid's half of the Euclid-Euler Theorem that if `2 ^ (k + 1) - 1` is prime, then `2 ^ k * (2 ^ (k + 1) - 1)` is an (even) perfect number.

### [2020-10-12T17:14:21+00:00](https://github.com/leanprover-community/mathlib/commit/9379050719fa9f2605289bd85a0fb29100084eb3)
chore(data/hash_map): linting ([#4498](https://github.com/leanprover-community/mathlib/pull/#4498))

### [2020-10-12T14:57:35+00:00](https://github.com/leanprover-community/mathlib/commit/266895fbf8226f18a67fc9528566b3ad5904f847)
fix(algebra/ordered_group): use `add_neg` in autogenerated lemma name ([#4580](https://github.com/leanprover-community/mathlib/pull/#4580))

Explicitly add `sub_le_sub_iff` with `a - b`.

### [2020-10-12T14:57:33+00:00](https://github.com/leanprover-community/mathlib/commit/b3ce8837df45634a6fad55d41a2f27a4f6a71d66)
feat(algebra/*_power): simplify `(-a)^(bit0 _)` and `(-a)^(bit1 _)` ([#4573](https://github.com/leanprover-community/mathlib/pull/#4573))

Works for `pow` and `fpow`. Also simplify powers of `I : ℂ`.

### [2020-10-12T14:57:31+00:00](https://github.com/leanprover-community/mathlib/commit/38e9ed32e812c4741b1f1c8f9c7b8d93bcb44591)
feat(archive/imo): IMO 2020 Q2 ([#4565](https://github.com/leanprover-community/mathlib/pull/#4565))

Add a proof of IMO 2020 Q2 (directly following one of the official
solutions; there are many very similar approaches possible).

In support of this solution, add `geom_mean_le_arith_mean4_weighted`
to `analysis.mean_inequalities`, for both `real` and `nnreal`,
analogous to the versions for two and three numbers (and also add
`geom_mean_le_arith_mean3_weighted` for `real` as it was only present
for `nnreal`).




Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-12T14:57:28+00:00](https://github.com/leanprover-community/mathlib/commit/5022425ae9bfbd4416e01f831498d02a5ecba52b)
feat(algebra/free_algebra): Add an inductive principle ([#4335](https://github.com/leanprover-community/mathlib/pull/#4335))

### [2020-10-12T14:57:26+00:00](https://github.com/leanprover-community/mathlib/commit/3d1f16aaf3f74a3ab09d8640a290dba9e40aea31)
feat(analysis/normed_space/multilinear): define `mk_pi_algebra` ([#4316](https://github.com/leanprover-community/mathlib/pull/#4316))

I'm going to use this definition for converting `(mv_)power_series` to `formal_multilinear_series`.

### [2020-10-12T12:21:50+00:00](https://github.com/leanprover-community/mathlib/commit/1362701b6036169b069fa0adf4abd4da8e32bee6)
refactor(field_theory): Adjoin intermediate field ([#4468](https://github.com/leanprover-community/mathlib/pull/#4468))

Refactor adjoin to be an intermediate field rather than a subalgebra.



Co-authored-by: Patrick Lutz <pglutz@berkeley.edu>

### [2020-10-12T10:16:23+00:00](https://github.com/leanprover-community/mathlib/commit/8fa91251af1373786a3a2eb282428197b122bc2e)
feat(data/polynomial/degree/erase_lead): definition and basic lemmas ([#4527](https://github.com/leanprover-community/mathlib/pull/#4527))

erase_lead serves as the reduction step in an induction, breaking off one monomial from a polynomial.  It is used in a later PR to prove that reverse is a multiplicative monoid map on polynomials.



Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-10-12T08:30:01+00:00](https://github.com/leanprover-community/mathlib/commit/0bfc68fcabfca3ea05d144479145d3ac8ba4fa91)
feat(ring_theory/witt_vector/structure_polynomial): witt_structure_int_prop ([#4466](https://github.com/leanprover-community/mathlib/pull/#4466))

This is the 3rd PR in a series on a fundamental theorem about Witt polynomials.


Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-10-12T06:33:28+00:00](https://github.com/leanprover-community/mathlib/commit/b95371770ab38f16e122b089d5f0b29d066d0865)
feat(set_theory/cardinal): cardinality of powerset ([#4576](https://github.com/leanprover-community/mathlib/pull/#4576))

adds a lemma for cardinality of powerset

### [2020-10-12T01:08:24+00:00](https://github.com/leanprover-community/mathlib/commit/81b8123d2330137f80c12cb0ca613206359d888b)
chore(scripts): update nolints.txt ([#4575](https://github.com/leanprover-community/mathlib/pull/#4575))

I am happy to remove some nolints for you!

### [2020-10-11T21:16:36+00:00](https://github.com/leanprover-community/mathlib/commit/665cc13c0f0a094d08bcfe4086f19fa92e00b94b)
chore(topology/algebra/group): review ([#4570](https://github.com/leanprover-community/mathlib/pull/#4570))

* Ensure that we don't use `[topological_group G]` when it suffices to ask for, e.g., `[has_continuous_mul G]`.
* Introduce `[has_continuous_sub]`, add an instance for `nnreal`.

### [2020-10-11T20:09:45+00:00](https://github.com/leanprover-community/mathlib/commit/952a407c2ea89c154d718aa1f92fd988f2b5d338)
feat(data/nat/digits): add norm_digits tactic ([#4452](https://github.com/leanprover-community/mathlib/pull/#4452))

This adds a basic tactic for normalizing expressions of the form `nat.digits a b = l`. As requested on Zulip: https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/simplifying.20nat.2Edigits/near/212152395

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-11T20:09:43+00:00](https://github.com/leanprover-community/mathlib/commit/b1ca33e010f9268a9462a68c6d470cc79fe40316)
feat(analysis/calculus/times_cont_diff, analysis/calculus/inverse): smooth inverse function theorem ([#4407](https://github.com/leanprover-community/mathlib/pull/#4407))

The inverse function theorem, in the C^k and smooth categories.

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-10-11T18:49:02+00:00](https://github.com/leanprover-community/mathlib/commit/b48b4ff0d6a8d1f5c19b80cf921c3befc7e43524)
feat(analysis/normed_space/inner_product): Cauchy-Schwarz equality case and other lemmas ([#4571](https://github.com/leanprover-community/mathlib/pull/#4571))



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2020-10-11T18:49:00+00:00](https://github.com/leanprover-community/mathlib/commit/0f085b98e5d684a7410cb23f1b8b233704830c09)
chore(linear_algebra/finite_dimensional): rename `of_finite_basis` ([#4562](https://github.com/leanprover-community/mathlib/pull/#4562))

* rename `of_finite_basis` to `of_fintype_basis`;
* add new `of_finite_basis` assuming that the domain the basis is a
  `finite` set;
* allow `s : finset ι` and any function `s → V` in `of_finset_basis`.

### [2020-10-11T16:27:35+00:00](https://github.com/leanprover-community/mathlib/commit/14dcfe0c441434edb4d6587a12194e6e6f493902)
chore(*): assorted lemmas ([#4566](https://github.com/leanprover-community/mathlib/pull/#4566))

Non-bc changes:

* make some lemmas use `coe` instead of `subtype.val`;
* make the arguments of `range_comp` explicit, reorder them.

### [2020-10-11T16:27:33+00:00](https://github.com/leanprover-community/mathlib/commit/918e5d8238ae0cd9dce0703b6ebdde613fbb5c3c)
chore(data/finsupp): replace `eq_zero_of_zero_eq_one` with `finsupp.unique_of_right` ([#4563](https://github.com/leanprover-community/mathlib/pull/#4563))

Also add a lemma `semimodule.subsingleton`: if `R` is a subsingleton semiring, then any semimodule over `R` is a subsingleton.

### [2020-10-11T15:12:38+00:00](https://github.com/leanprover-community/mathlib/commit/33f7870a49d7cc06d2f3036e22543e6ec5046e68)
chore(measure_theory/measurable_space): add `finset.is_measurable_bUnion` etc ([#4553](https://github.com/leanprover-community/mathlib/pull/#4553))

I always forget how to convert `finset` or `set.finite` to `set.countable. Also `finset.is_measurable_bUnion` uses `finset`'s `has_mem`, not coercion to `set`.

Also replace `tendsto_at_top_supr_nat` etc with slightly more general versions using a `[semilattice_sup β] [nonempty β]` instead of `nat`.

### [2020-10-11T12:30:22+00:00](https://github.com/leanprover-community/mathlib/commit/99130d84aca51c688ff0280d0c95135806a5447a)
chore(algebra/monoid_algebra): Reorder lemmas, name some sections for clarity ([#4535](https://github.com/leanprover-community/mathlib/pull/#4535))

This also reduces the scope of `local attribute [reducible] add_monoid_algebra` to the sections which actually need it.

### [2020-10-11T10:42:23+00:00](https://github.com/leanprover-community/mathlib/commit/0487a1d260bd512dd640a03f0da9e7a4dc932ef1)
chore(algebra/algebra/basic): fix definition of `ring_hom.to_algebra` ([#4561](https://github.com/leanprover-community/mathlib/pull/#4561))

The new definition uses `to_ring_hom := i` instead of `.. i` to get
defeq `algebra_map R S = i`, and adds it as a lemma.

### [2020-10-11T04:06:05+00:00](https://github.com/leanprover-community/mathlib/commit/2c53e5ee1ccd32d559a90cce35f26125a7d0a87f)
chore(order/well_founded): move to a file ([#4568](https://github.com/leanprover-community/mathlib/pull/#4568))

I want to use `order/rel_classes` before `data/set/basic`.

### [2020-10-11T03:06:27+00:00](https://github.com/leanprover-community/mathlib/commit/4dbebe3bc598d77e494efd8c0755eb0219ba57f1)
chore(scripts): update nolints.txt ([#4564](https://github.com/leanprover-community/mathlib/pull/#4564))

I am happy to remove some nolints for you!

### [2020-10-11T01:02:23+00:00](https://github.com/leanprover-community/mathlib/commit/d8d6e18c1e3124f14f44f1174a75d4d0e74e2609)
feat(data/finset/basic): equivalence of finsets from equivalence of types ([#4560](https://github.com/leanprover-community/mathlib/pull/#4560))

Broken off from [#4259](https://github.com/leanprover-community/mathlib/pull/#4259).
Given an equivalence `α` to `β`, produce an equivalence between `finset α` and `finset β`, and simp lemmas about it.

### [2020-10-10T23:06:12+00:00](https://github.com/leanprover-community/mathlib/commit/df5adc5c1eeb8bacbbc5263e8fada651f4b7626f)
chore(topology/*): golf some proofs ([#4528](https://github.com/leanprover-community/mathlib/pull/#4528))

* move `exists_nhds_split` to `topology/algebra/monoid`, rename to `exists_nhds_one_split`;
* add a version `exists_open_nhds_one_split`;
* move `exists_nhds_split4` to `topology/algebra/monoid`, rename to `exists_nhds_one_split4`;
* move `one_open_separated_mul` to `topology/algebra/monoid`, rename to `exists_open_nhds_one_mul_subset`;
* add `mem_prod_nhds_iff`;
* golf some proofs.

### [2020-10-10T20:25:23+00:00](https://github.com/leanprover-community/mathlib/commit/c726898e72f8f764941bd9143aed897eade6498e)
feat(data/equiv/basic): equivalence on functions from bool ([#4559](https://github.com/leanprover-community/mathlib/pull/#4559))

An equivalence of functions from bool and pairs, together with some simp lemmas about it.
Broken off from [#4259](https://github.com/leanprover-community/mathlib/pull/#4259).

### [2020-10-10T18:28:05+00:00](https://github.com/leanprover-community/mathlib/commit/f91e0c684e850c89bc0988a1c4c8af7d1ad20d08)
feat(data/finset/pi): pi singleton lemmas ([#4558](https://github.com/leanprover-community/mathlib/pull/#4558))

Broken off from [#4259](https://github.com/leanprover-community/mathlib/pull/#4259). 
Two lemmas to reduce `finset.pi` on singletons.

### [2020-10-10T15:18:44+00:00](https://github.com/leanprover-community/mathlib/commit/c8738cb621626d1c79fd1d79e9a3acf4629c486e)
feat(topology/uniform_space/cauchy): generalize `second_countable_of_separable` to uniform spaces ([#4530](https://github.com/leanprover-community/mathlib/pull/#4530))

Also generalize `is_countably_generated.has_antimono_basis` to `is_countably_generated.exists_antimono_subbasis` and add a few lemmas about bases of the uniformity filter.

### [2020-10-10T09:40:05+00:00](https://github.com/leanprover-community/mathlib/commit/6676917e40e111d831385416e63a34a4b536b709)
feat(analysis/special_functions/*): a few more simp lemmas ([#4550](https://github.com/leanprover-community/mathlib/pull/#4550))

Add more lemmas for simplifying inequalities with `exp`, `log`, and
`rpow`. Lemmas that generate more than one inequality are not marked
as `simp`.

### [2020-10-10T01:04:50+00:00](https://github.com/leanprover-community/mathlib/commit/b084a0682ce32afe9afcc5529c0d8f548d802d09)
chore(scripts): update nolints.txt ([#4556](https://github.com/leanprover-community/mathlib/pull/#4556))

I am happy to remove some nolints for you!

### [2020-10-09T19:22:53+00:00](https://github.com/leanprover-community/mathlib/commit/40b55c0bd636e4f772aeaaacd0e3a46ea6bf0556)
feat(measure_theory): additions ([#4324](https://github.com/leanprover-community/mathlib/pull/#4324))

Many additional lemmas. 
Notable addition: sequential limits of measurable functions into a metric space are measurable.
Rename `integral_map_measure` -> `integral_map` (to be consistent with the version for `lintegral`)
Fix the precedence of all notations for integrals. From now on `∫ x, abs ∥f x∥ ∂μ` will be parsed
correctly (previously it gave a parse error).
Some cleanup (moving lemmas, and some nicer presentation by opening locales and namespaces).

### [2020-10-09T18:15:49+00:00](https://github.com/leanprover-community/mathlib/commit/d533e1ce46f452bf848d3e7b20920b65eb732578)
feat(ring_theory/power_series): inverse lemmas ([#4552](https://github.com/leanprover-community/mathlib/pull/#4552))

Broken off from [#4259](https://github.com/leanprover-community/mathlib/pull/#4259).

### [2020-10-09T15:44:20+00:00](https://github.com/leanprover-community/mathlib/commit/b167809acffed9aee17d1fb9331cd328912552da)
feat(topology/basic): Lim_spec etc. cleanup ([#4545](https://github.com/leanprover-community/mathlib/pull/#4545))

Fixes [#4543](https://github.com/leanprover-community/mathlib/pull/#4543)
See [Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/More.20point.20set.20topology.20questions/near/212757136)



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-10-09T13:16:06+00:00](https://github.com/leanprover-community/mathlib/commit/fcaf6e91803a594efbfb2c4157ee1bcbe09340b1)
feat(meta/expr): add parser for generated binder names ([#4540](https://github.com/leanprover-community/mathlib/pull/#4540))

During elaboration, Lean generates a name for anonymous Π binders. This commit
adds a parser that recognises such names.

### [2020-10-09T13:16:04+00:00](https://github.com/leanprover-community/mathlib/commit/306dc8a069f849acea7707ce17f4c91bf558b00f)
chore(algebra/big_operators/basic): add lemma prod_multiset_count' that generalize prod_multiset_count to consider a function to a monoid ([#4534](https://github.com/leanprover-community/mathlib/pull/#4534))

I have added `prod_multiset_count'` that is very similar to `prod_multiset_count` but takes into account a function `f : \a \r M` where `M` is a commutative monoid. The proof is essentially the same (I didn't try to prove it using `prod_multiset_count` because maybe we can remove it and just keep the more general version). 

Co-authored-by: riccardobrasca <32490532+riccardobrasca@users.noreply.github.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-09T11:06:01+00:00](https://github.com/leanprover-community/mathlib/commit/656ef0a575c07304cac18819a775346dfa5c80d2)
chore(topology/instances/nnreal): use notation ([#4548](https://github.com/leanprover-community/mathlib/pull/#4548))

### [2020-10-09T11:05:59+00:00](https://github.com/leanprover-community/mathlib/commit/d0f45f525b41b4b92f781ce9c0dc636cbaa3f629)
lint(various): nolint has_inhabited_instance for injective functions ([#4541](https://github.com/leanprover-community/mathlib/pull/#4541))

`function.embedding`, `homeomorph`, `isometric` represent injective/bijective functions, so it's silly to expect them to be inhabited.

### [2020-10-09T08:54:38+00:00](https://github.com/leanprover-community/mathlib/commit/cc75e4ef2d627e6300feca3a3abaeb9945a85894)
chore(data/nat/cast): a few `simp`/`norm_cast` lemmas ([#4549](https://github.com/leanprover-community/mathlib/pull/#4549))

### [2020-10-09T01:44:31+00:00](https://github.com/leanprover-community/mathlib/commit/f6836c16fac2d8ac32834ba4927b3d5b58ac08c7)
chore(scripts): update nolints.txt ([#4547](https://github.com/leanprover-community/mathlib/pull/#4547))

I am happy to remove some nolints for you!

### [2020-10-08T23:44:06+00:00](https://github.com/leanprover-community/mathlib/commit/8004fb68aad47e60e99a8d52da171237e3a47075)
chore(topology/algebra/group): move a lemma to `group_theory/coset` ([#4522](https://github.com/leanprover-community/mathlib/pull/#4522))

`quotient_group_saturate` didn't use any topology. Move it to
`group_theory/coset` and rename to
`quotient_group.preimage_image_coe`.

Also rename `quotient_group.open_coe` to `quotient_group.is_open_map_coe`

### [2020-10-08T22:15:42+00:00](https://github.com/leanprover-community/mathlib/commit/ce999a8942453ee16136ac357180885a7f85a9d2)
feat(topology/basic): add `is_open_iff_ultrafilter` ([#4529](https://github.com/leanprover-community/mathlib/pull/#4529))

Requested on [Zulip](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F)
by Adam Topaz

### [2020-10-08T18:04:05+00:00](https://github.com/leanprover-community/mathlib/commit/a912455148de1a83f9809707262fab3b50f27bcd)
fix(bors.toml, build.yml): check for new linter, rename linter to "Lint style" ([#4539](https://github.com/leanprover-community/mathlib/pull/#4539))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-08T15:41:18+00:00](https://github.com/leanprover-community/mathlib/commit/73f119e04c35a4ab10eae68345472d78e5c4f6c7)
refactor(category_theory/pairwise): change direction of morphisms in the category of pairwise intersections ([#4537](https://github.com/leanprover-community/mathlib/pull/#4537))

Even though this makes some proofs slightly more awkward, this is the more natural definition.

In a subsequent PR about another equivalent sheaf condition, it also makes proofs less awkward, too!



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-10-08T15:41:16+00:00](https://github.com/leanprover-community/mathlib/commit/0ae4a3d5ec95852e3710b19e015f93ee17f7baf9)
fix(update-copy-mod-doc-exceptions.sh): cleanup, sort properly ([#4533](https://github.com/leanprover-community/mathlib/pull/#4533))

Followup to [#4513](https://github.com/leanprover-community/mathlib/pull/#4513).

### [2020-10-08T15:41:14+00:00](https://github.com/leanprover-community/mathlib/commit/427564e0c64bf9ac480124f215d95f24aa22ae00)
chore(algebra/monoid_algebra): Fix TODO about unwanted unfolding ([#4532](https://github.com/leanprover-community/mathlib/pull/#4532))

For whatever reason, supplying `zero` and `add` explicitly makes the proofs work inline.

This TODO was added by @johoelzl in f09abb1c47a846c33c0e996ffa9bf12951b40b15.

### [2020-10-08T15:41:12+00:00](https://github.com/leanprover-community/mathlib/commit/0c18d9682eeac274497505db3f384603812c88fc)
chore(data/padics/*): linting + squeeze_simp speedup ([#4531](https://github.com/leanprover-community/mathlib/pull/#4531))

### [2020-10-08T15:41:08+00:00](https://github.com/leanprover-community/mathlib/commit/60be8ed5cf6c622880f7cadb071a73f9b08c9610)
feat(data/equiv/*): to_monoid_hom_injective and to_ring_hom_injective ([#4525](https://github.com/leanprover-community/mathlib/pull/#4525))

### [2020-10-08T15:41:06+00:00](https://github.com/leanprover-community/mathlib/commit/253f2252de7426fa3a76711815d4667aff5a81e6)
lint(computability/halting): docstrings ([#4524](https://github.com/leanprover-community/mathlib/pull/#4524))

Adds docstrings in `computability/halting.lean`

### [2020-10-08T15:41:04+00:00](https://github.com/leanprover-community/mathlib/commit/e74bd261b5573ae5b809a2df701229cf488959c8)
chore(*): add a few more `unique` instances ([#4511](https://github.com/leanprover-community/mathlib/pull/#4511))

* `linear_map.unique_of_left`, `linear_map.unique_of_right`,
  `continuous_linear_map.unique_of_left`,
  `continuous_linear_map.unique_of_right`: if either `M` or `M₂` is a
  `subsingleton`, then both `M →ₗ[R] M₂` and `M →L[R] M₂` are
  `unique`;
* `pi.unique`: if each `β a` is `unique`, then `Π a, β a` is `unique`;
* rename `function.injective.comap_subsingleton` to
  `function.injective.subsingleton`;
* add `unique.mk'` and `function.injective.unique`;
* add a few `simp` lemmas for `default`;
* drop `nonempty_unique_or_exists_ne` and `subsingleton_or_exists_ne`;
* rename `linear_map.coe_inj` to `coe_injective` and `continuous_linear_map.coe_inj` to `coe_fn_injective`,
  make them use `function.injective`.

Motivated by [#4407](https://github.com/leanprover-community/mathlib/pull/#4407)

### [2020-10-08T15:41:02+00:00](https://github.com/leanprover-community/mathlib/commit/7b42c714290204e781dc907c5d8a94ea5de4166c)
feat(archive/imo): revive @kbuzzard's imo2019_q1 ([#4377](https://github.com/leanprover-community/mathlib/pull/#4377))

Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>
Co-authored-by: Yury Kudryashov <urkud@urkud.name>



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-10-08T15:40:59+00:00](https://github.com/leanprover-community/mathlib/commit/9b0d30c0ac277baca638372e318dd2b4c0656f47)
feat(number_theory/arithmetic_function): define `is_multiplicative` on `arithmetic_function`s, provides examples ([#4312](https://github.com/leanprover-community/mathlib/pull/#4312))

Provides a few basic examples of important arithmetic functions
Defines what it means for an arithmetic function to be multiplicative



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-08T13:27:56+00:00](https://github.com/leanprover-community/mathlib/commit/5a01549fbbd0f735f7099cdd416f9efb19e27590)
lint(multiset/pi): remove unused instance ([#4526](https://github.com/leanprover-community/mathlib/pull/#4526))

Removes an unused instance from `multiset/pi`



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-08T13:27:54+00:00](https://github.com/leanprover-community/mathlib/commit/48a36046d3ecf72e397a2e73d4053872d0123519)
feat(logic/nontrivial): a tactic to summon nontrivial instances ([#4374](https://github.com/leanprover-community/mathlib/pull/#4374))

```
Given a goal `a = b` or `a ≤ b` in a type `α`, generates an additional hypothesis `nontrivial α`
(as otherwise `α` is a subsingleton and the goal is trivial).

Alternatively, given a hypothesis `a ≠ b` or `a < b` in a type `α`, tries to generate a `nontrivial α`
hypothesis from existing hypotheses using `nontrivial_of_ne` and `nontrivial_of_lt`.
```



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-10-08T10:23:23+00:00](https://github.com/leanprover-community/mathlib/commit/43f52dd71e362aa5b8312d873e054e7fac3c5927)
chore(algebra/char_zero): rename vars, add `with_top` instance ([#4523](https://github.com/leanprover-community/mathlib/pull/#4523))

Motivated by [#3135](https://github.com/leanprover-community/mathlib/pull/#3135).

* Use `R` as a `Type*` variable;
* Add `add_monoid_hom.map_nat_cast` and `with_top.coe_add_hom`;
* Drop versions of `char_zero_of_inj_zero`, use `[add_left_cancel_monoid R]` instead.

### [2020-10-08T05:32:06+00:00](https://github.com/leanprover-community/mathlib/commit/34a44717c02600e3404223c2dd082c1126c9a0b6)
chore(data/quot): `quot.mk` etc are surjective ([#4517](https://github.com/leanprover-community/mathlib/pull/#4517))

### [2020-10-08T05:32:04+00:00](https://github.com/leanprover-community/mathlib/commit/4f75760089a9a13cdeeca4a26353f93340e0e987)
chore(*/hom,equiv): Split `monoid_hom` into more fundamental structures, and reuse them elsewhere ([#4423](https://github.com/leanprover-community/mathlib/pull/#4423))

Notably this adds `add_hom` and `mul_hom`, which become base classes of `add_equiv`, `mul_equiv`, `linear_map`, and `linear_equiv`.

Primarily to avoid breaking assumptions of field order in `monoid_hom` and `add_monoid_hom`, this also adds `one_hom` and `zero_hom`.

A massive number of lemmas here are totally uninteresting and hold for pretty much all objects that define `coe_to_fun`.
This PR translates all those lemmas, but doesn't bother attempting to generalize later ones.

### [2020-10-08T04:37:20+00:00](https://github.com/leanprover-community/mathlib/commit/b4dc91289f6a6223b2d34d1fd02139e9281f09a4)
ci(*): run style lint in parallel job, fix update-copy-mod-doc-exceptions.sh ([#4513](https://github.com/leanprover-community/mathlib/pull/#4513))

Followup to [#4486](https://github.com/leanprover-community/mathlib/pull/#4486):
- run the linter in a separate parallel job, per request
- the update-*.sh script now correctly generates a full exceptions file
- add some more comments to the shell scripts

### [2020-10-08T04:37:18+00:00](https://github.com/leanprover-community/mathlib/commit/3d1d4fbe9fb4b781cc37549e2161e370c8fda74a)
feat(data/polynomial/degree/trailing_degree): fixed formatting and streamlined a couple of proofs ([#4509](https://github.com/leanprover-community/mathlib/pull/#4509))

### [2020-10-08T03:44:56+00:00](https://github.com/leanprover-community/mathlib/commit/7a7155457a28d7c7739ab64576a8796b5a75a7a0)
doc(tactic/slim_check): improve advice in error message ([#4520](https://github.com/leanprover-community/mathlib/pull/#4520))

The error message in `slim_check` suggests to look for `testable` and it now specifies which namespace to find `testable` in.

### [2020-10-08T01:08:47+00:00](https://github.com/leanprover-community/mathlib/commit/e9d1dc47d5ab655b3a6459ac0bc244a8fa99d40b)
chore(scripts): update nolints.txt ([#4521](https://github.com/leanprover-community/mathlib/pull/#4521))

I am happy to remove some nolints for you!

### [2020-10-07T23:27:32+00:00](https://github.com/leanprover-community/mathlib/commit/a5b0376c2684b2837237a7c2bc85ee59c7df3180)
chore(topology/algebra/monoid,group): rename variables ([#4516](https://github.com/leanprover-community/mathlib/pull/#4516))

Use `M`, `N` for monoids, `G`, `H` for groups.

### [2020-10-07T21:39:17+00:00](https://github.com/leanprover-community/mathlib/commit/d67062f407fb34426d7ad70fd1e3b108fb37ab2d)
chore(algebra/pointwise): add `###` here and there ([#4514](https://github.com/leanprover-community/mathlib/pull/#4514))

### [2020-10-07T21:39:15+00:00](https://github.com/leanprover-community/mathlib/commit/fa8b7ba2f0ad179bbb81c58ac256ce041d8c9269)
chore(topology/*): use dot notation for `is_open.prod` and `is_closed.prod` ([#4510](https://github.com/leanprover-community/mathlib/pull/#4510))

### [2020-10-07T20:25:40+00:00](https://github.com/leanprover-community/mathlib/commit/2b89d59b9bcd6bcf01c66fb1c55053c1e2397673)
chore(ring_theory/coprime): weaken assumptions of finset.prod_dvd_of_coprime ([#4506](https://github.com/leanprover-community/mathlib/pull/#4506))

### [2020-10-07T18:09:31+00:00](https://github.com/leanprover-community/mathlib/commit/4635aee78977160accf95ec1f9b1daa36993e351)
chore(algebra/continuous_functions): `coninuous` -> `continuous` ([#4508](https://github.com/leanprover-community/mathlib/pull/#4508))

### [2020-10-07T18:09:28+00:00](https://github.com/leanprover-community/mathlib/commit/4e8427ec947a77a83b043b3f457f51fdf3a7100e)
fix(data/list/defs): remove map_head; rename map_last to modify_last ([#4507](https://github.com/leanprover-community/mathlib/pull/#4507))

`map_head` is removed in favour of the equivalent `modify_head`.
`map_last` is renamed to `modify_last` for consistency with the other
`modify_*` functions.

### [2020-10-07T18:09:25+00:00](https://github.com/leanprover-community/mathlib/commit/a4a20ac3c239a19216256da1d5e20ec5997f3eed)
doc(data/num/basic): added doc-strings to most defs ([#4439](https://github.com/leanprover-community/mathlib/pull/#4439))

### [2020-10-07T16:08:11+00:00](https://github.com/leanprover-community/mathlib/commit/8f9c10fcfc04714b17c8615fcaaaf74aa72ef62a)
feat(data/matrix): add `matrix.mul_sub` and `matrix.sub_mul` ([#4505](https://github.com/leanprover-community/mathlib/pull/#4505))

I was quite surprised that we didn't have this yet, but I guess they weren't needed when `sub_eq_add_neg` was still `@[simp]`.

### [2020-10-07T16:08:08+00:00](https://github.com/leanprover-community/mathlib/commit/2d34e94a759eddabb6ee1c2f4990e59d56648097)
chore(*big_operators*): line length ([#4504](https://github.com/leanprover-community/mathlib/pull/#4504))

### [2020-10-07T16:08:05+00:00](https://github.com/leanprover-community/mathlib/commit/6b50fb99e557ce66825cbaf3021648fc98ae15a1)
fix(tactic/ring): use int_sub_hack to avoid defeq blowup ([#4503](https://github.com/leanprover-community/mathlib/pull/#4503))

### [2020-10-07T14:27:03+00:00](https://github.com/leanprover-community/mathlib/commit/4db1c72f83943be7dd96f6eb08547010436592fe)
ci(scripts/*): linting for copyright, imports, module docstrings, line length ([#4486](https://github.com/leanprover-community/mathlib/pull/#4486))

This PR adds some scripts to check the `.lean` files in `src/` and `archive/` for the following issues (which are out of scope for the current linter):
- Malformed or missing copyright header
- More than one file imported per line
- Module docstring missing, or too late
- Lines of length > 100 (unless they contain `http`)

The scripts are run at the end of our "tests" job since the "lint" job usually takes longer to run. (This isn't a big deal though, since they're quick.)

Current problems are saved in the file `scripts/copy-mod-doc-exceptions.txt` and ignored so that we don't have to fix everything up front. Over time, this should get shorter as we fix things!

Separately, this also fixes some warnings in our GitHub actions workflow (see [this blog post](https://github.blog/changelog/2020-10-01-github-actions-deprecating-set-env-and-add-path-commands/)).

Co-authored-by: Johan Commelin <johan@commelin.net>



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: damiano <adomani@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Joseph Myers <jsm@polyomino.org.uk>
Co-authored-by: hrmacbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored-by: Aaron Anderson <awainverse@gmail.com>
Co-authored-by: Kyle Miller <kmill31415@gmail.com>
Co-authored-by: leanprover-community-bot <leanprover.community@gmail.com>

### [2020-10-07T14:26:58+00:00](https://github.com/leanprover-community/mathlib/commit/c9d4567e283c624137aa11cfe59d5f75982ac4b9)
lint(data/matrix/basic): add definition docstrings ([#4478](https://github.com/leanprover-community/mathlib/pull/#4478))

### [2020-10-07T10:12:05+00:00](https://github.com/leanprover-community/mathlib/commit/6a852793326182a6030a270663ae60c74e261db2)
fix(tactic/doc_commands): do not construct json by hand ([#4501](https://github.com/leanprover-community/mathlib/pull/#4501))

Fixes three lines going over the 100 character limit.

The first one was a hand-rolled JSON serializer, I took the liberty to migrate it to the new `json` API.

### [2020-10-07T10:12:04+00:00](https://github.com/leanprover-community/mathlib/commit/0386adaf8ee6e9fb22d1b61e97caa8cb9b80a2e0)
chore(data/tree): linting ([#4499](https://github.com/leanprover-community/mathlib/pull/#4499))

### [2020-10-07T10:12:02+00:00](https://github.com/leanprover-community/mathlib/commit/cbbc123e16f83f9ceedaecb5df3892514bf7ed80)
lint(category_theory/equivalence): docstring and a module doc ([#4495](https://github.com/leanprover-community/mathlib/pull/#4495))

### [2020-10-07T10:12:00+00:00](https://github.com/leanprover-community/mathlib/commit/8a4b491c2d17c071b2f1980fe92bb7476ef0f0ed)
feat(ring_theory/witt_vector/structure_polynomial): {map_}witt_structure_int ([#4465](https://github.com/leanprover-community/mathlib/pull/#4465))

This is the second PR in a series on a fundamental theorem about Witt polynomials.



Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-10-07T07:56:34+00:00](https://github.com/leanprover-community/mathlib/commit/e5ce9d3d10effd5a280098ee55dfc580f23fd664)
chore(data/quot): linting ([#4500](https://github.com/leanprover-community/mathlib/pull/#4500))

### [2020-10-07T07:56:32+00:00](https://github.com/leanprover-community/mathlib/commit/ed9ef1b46f9626f2c8567eacef8b31484dbbae08)
chore(*): normalise copyright headers ([#4497](https://github.com/leanprover-community/mathlib/pull/#4497))

This diff makes sure that all files start with a copyright header
of the following shape

```
/-
Copyright ...
... Apache ...
Author...
-/
```

Some files used to have a short description of the contents
in the same comment block.
Such comments have *not* been turned into module docstrings,
but simply moved to a regular comment block below the copyright header.
Turning these comments into good module docstrings is an
effort that should be undertaken in future PRs.

### [2020-10-07T06:23:11+00:00](https://github.com/leanprover-community/mathlib/commit/3c7552731c93bfd329a10e6a6f3edf90ea47532f)
lint(group_theory/*): docstrings and an inhabited instance ([#4493](https://github.com/leanprover-community/mathlib/pull/#4493))

An inhabited instance for `presented_group`
Docstrings in `group_theory/abelianization` and `group_theory/congruence`.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-10-07T04:25:17+00:00](https://github.com/leanprover-community/mathlib/commit/8c528b9a590fefe40c83ef97266f63e07aa144b0)
lint(group_theory/perm/*): docstrings ([#4492](https://github.com/leanprover-community/mathlib/pull/#4492))

Adds missing docstrings in `group_theory/perm/cycles` and `group_theory/perm/sign`.

### [2020-10-07T01:06:50+00:00](https://github.com/leanprover-community/mathlib/commit/cb3118d50ef3396e7d3730a9a135d29f682f61af)
chore(scripts): update nolints.txt ([#4490](https://github.com/leanprover-community/mathlib/pull/#4490))

I am happy to remove some nolints for you!

### [2020-10-07T01:06:47+00:00](https://github.com/leanprover-community/mathlib/commit/2e77ef6a8e9dc87563a8bb871894c413a572530b)
lint(order/lexographic, pilex): docstrings ([#4489](https://github.com/leanprover-community/mathlib/pull/#4489))

Docstrings in `order/lexographic` and `order/pilex`

### [2020-10-07T01:06:45+00:00](https://github.com/leanprover-community/mathlib/commit/afffab1df9eac746937a00910aec97462e23ee9d)
lint(order/order_iso_nat): docstrings ([#4488](https://github.com/leanprover-community/mathlib/pull/#4488))

Adds docstrings to `rel_embedding.nat_lt` and `rel_embedding.nat_gt`

### [2020-10-07T01:06:42+00:00](https://github.com/leanprover-community/mathlib/commit/93cdc3a5331ce65d50f8e883368ae2b260012df1)
feat(control/traversable/basic): composition of applicative transformations ([#4487](https://github.com/leanprover-community/mathlib/pull/#4487))

Added composition law for applicative transformations, added rest of interface for coercion of applicative transformations to functions (lifted from `monoid_hom`), and proved composition was associative and has an identity.  Also corrected some documentation.

### [2020-10-07T01:06:41+00:00](https://github.com/leanprover-community/mathlib/commit/fe8b6315419f77d175c57cbbe3ae34bb814b3822)
lint(ring_theory/*): docstrings ([#4485](https://github.com/leanprover-community/mathlib/pull/#4485))

Docstrings in `ring_theory/ideal/operations`, `ring_theory/multiplicity`, and `ring_theory/ring_invo`.

### [2020-10-06T22:45:54+00:00](https://github.com/leanprover-community/mathlib/commit/7488f8ef595f05a6d4a9f76895d5a19417f5fe37)
lint(order/bounded_lattice): docstring ([#4484](https://github.com/leanprover-community/mathlib/pull/#4484))

### [2020-10-06T22:45:52+00:00](https://github.com/leanprover-community/mathlib/commit/f4ccbdf5e5b4abb1c83d6741f60dd7be70287161)
feat(data/nat/basic): add_succ_lt_add ([#4483](https://github.com/leanprover-community/mathlib/pull/#4483))

Add the lemma that, for natural numbers, if `a < b` and `c < d` then
`a + c + 1 < b + d` (i.e. a stronger version of `add_lt_add` for the
natural number case).  `library_search` did not find this in mathlib.

### [2020-10-06T22:45:50+00:00](https://github.com/leanprover-community/mathlib/commit/f88234d13ce840626802e68c6c1e8bf431e12fff)
feat(measure_theory): integral of a non-negative function is >0 iff μ(support f) > 0 ([#4410](https://github.com/leanprover-community/mathlib/pull/#4410))

Also add a few supporting lemmas

### [2020-10-06T21:23:34+00:00](https://github.com/leanprover-community/mathlib/commit/5192fd943421db84830b6b3f745b0c6e02551b52)
feat(data/polynomial/degree/basic): add lemmas dealing with monomials, their support and their nat_degrees ([#4475](https://github.com/leanprover-community/mathlib/pull/#4475))

### [2020-10-06T21:23:32+00:00](https://github.com/leanprover-community/mathlib/commit/d768e46fcd22873e940df4fe3c8373b1efaf8d0e)
feat(ring_theory/witt_vector/structure_polynomial): witt_structure_rat{_prop} ([#4464](https://github.com/leanprover-community/mathlib/pull/#4464))

This is the first PR in a series on a fundamental theorem for Witt polynomials.


Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-10-06T19:36:49+00:00](https://github.com/leanprover-community/mathlib/commit/7948b5a20032b387d6188cf449e8822567ad7767)
chore(*): fix authorship for split files ([#4480](https://github.com/leanprover-community/mathlib/pull/#4480))

A few files with missing copyright headers in [#4477](https://github.com/leanprover-community/mathlib/pull/#4477) came from splitting up older files, so the attribution was incorrect:
- `data/setoid/partition.lean` was split from `data/setoid.lean` in [#2853](https://github.com/leanprover-community/mathlib/pull/#2853).
- `data/finset/order.lean` was split from `algebra/big_operators.lean` in [#3495](https://github.com/leanprover-community/mathlib/pull/#3495).
- `group_theory/submonoid/operations.lean` was split from `group_theory/submonoid.lean` in  [#3058](https://github.com/leanprover-community/mathlib/pull/#3058).

### [2020-10-06T17:40:04+00:00](https://github.com/leanprover-community/mathlib/commit/ac058890df4ed6ffd40230292349c71f1b2d5748)
chore(topology/list): one import per line ([#4479](https://github.com/leanprover-community/mathlib/pull/#4479))

This one seems to have slipped through previous efforts

### [2020-10-06T15:23:11+00:00](https://github.com/leanprover-community/mathlib/commit/e559ca987041fe1b52394ba9770a50aed1d000cb)
chore(*): add copyright headers ([#4477](https://github.com/leanprover-community/mathlib/pull/#4477))

### [2020-10-06T15:23:09+00:00](https://github.com/leanprover-community/mathlib/commit/7416127746bb3c7b51865eccd783ac850d957dff)
feat(data/polynomial/ring_division): add multiplicity of sum of polynomials is at least minimum of multiplicities ([#4442](https://github.com/leanprover-community/mathlib/pull/#4442))

I've added the lemma `root_multiplicity_add` inside `data/polynomial/ring_division` that says that the multiplicity of a root in a sum of two polynomials is at least the minimum of the multiplicities.

Co-authored-by: riccardobrasca <32490532+riccardobrasca@users.noreply.github.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-06T12:41:50+00:00](https://github.com/leanprover-community/mathlib/commit/8d199395b0b1348ef7c6668d387a5c43b3c353db)
feat(*): make `int.le` irreducible ([#4474](https://github.com/leanprover-community/mathlib/pull/#4474))

There's very rarely a reason to unfold `int.le` and it can create trouble: https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/deep.20recursion.20was.20detected.20at.20'replace'



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-10-06T12:41:47+00:00](https://github.com/leanprover-community/mathlib/commit/99e308d3ff7de07b6c278cc9c9e87b37575de728)
chore(parity): even and odd in semiring ([#4473](https://github.com/leanprover-community/mathlib/pull/#4473))

Replaces the ad-hoc `nat.even`, `nat.odd`, `int.even` and `int.odd` by definitions that make sense in semirings and get that `odd` can be `rintros`/`rcases`'ed. This requires almost no change except that `even` is not longer usable as a dot notation (which I see as a feature since I find `even n` to be more readable than `n.even`).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-10-06T12:41:45+00:00](https://github.com/leanprover-community/mathlib/commit/1d1a0415279d05cb67c913e8cda52ecde245f372)
chore(data/mv_polynomial/basic): coeff_mul, more golfing and speedup ([#4472](https://github.com/leanprover-community/mathlib/pull/#4472))

### [2020-10-06T12:41:43+00:00](https://github.com/leanprover-community/mathlib/commit/8cebd2b1cece34c5a84131f6a5cd20274d02e3a6)
chore(algebra/algebra): Split subalgebras into their own file ([#4471](https://github.com/leanprover-community/mathlib/pull/#4471))

This matches how `subring` and `submonoid` both have their own files.

This also remove `noncomputable theory` which is unnecessary for almost all the definitions

### [2020-10-06T12:41:42+00:00](https://github.com/leanprover-community/mathlib/commit/94bc31d31412deda7b2ff03fe5591cdb24fea547)
lint(logic/unique): module doc, docstring ([#4461](https://github.com/leanprover-community/mathlib/pull/#4461))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-10-06T12:41:40+00:00](https://github.com/leanprover-community/mathlib/commit/2fc65980eeaf902a0ab841594a64b57aa08877ea)
lint(group_theory/eckmann_hilton): docs, module docs, unused argument ([#4459](https://github.com/leanprover-community/mathlib/pull/#4459))

### [2020-10-06T12:41:38+00:00](https://github.com/leanprover-community/mathlib/commit/f4207aa2531144775a3d753e84848db2cd61dc30)
feat(data/*): lemmas about lists and finsets ([#4457](https://github.com/leanprover-community/mathlib/pull/#4457))

A part of [#4316](https://github.com/leanprover-community/mathlib/pull/#4316)

### [2020-10-06T12:41:36+00:00](https://github.com/leanprover-community/mathlib/commit/1fa07c2c65d83245f04b6ad30f62df6f2969221a)
chore(category_theory/monoidal): add module docs ([#4454](https://github.com/leanprover-community/mathlib/pull/#4454))

### [2020-10-06T12:41:33+00:00](https://github.com/leanprover-community/mathlib/commit/4d9406e25c93a32d690e9d71f346397324e2e651)
feat(geometry/euclidean/monge_point): orthocentric systems ([#4448](https://github.com/leanprover-community/mathlib/pull/#4448))

Define orthocentric systems of points, and prove some basic properties
of them.  In particular, if we say that an orthocentric system
consists of four points, one of which is the orthocenter of the
triangle formed by the other three, then each of the points is the
orthocenter of the triangle formed by the other three, and all four
triangles have the same circumradius.

### [2020-10-06T10:22:31+00:00](https://github.com/leanprover-community/mathlib/commit/e9b43b6a88962cc8a581a4d4f81e7ec9b871b5f4)
lint(data/equiv/ring): docstrings, inhabited ([#4460](https://github.com/leanprover-community/mathlib/pull/#4460))

### [2020-10-06T10:22:29+00:00](https://github.com/leanprover-community/mathlib/commit/58a54d342135cfb2ac9c31d7bcab11c9752a13a4)
chore(category_theory/*): doc-strings ([#4453](https://github.com/leanprover-community/mathlib/pull/#4453))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-10-06T10:22:27+00:00](https://github.com/leanprover-community/mathlib/commit/6b59725cbc87e6fe3ff2d52d765557334b299c51)
chore(control/traversable/{basic,equiv,instances,lemmas}): linting ([#4444](https://github.com/leanprover-community/mathlib/pull/#4444))

The `nolint`s in `instances.lean` are there because all the arguments need to be there for `is_lawful_traversable`.  In the same file, I moved `traverse_map` because it does not need the `is_lawful_applicative` instances.

### [2020-10-06T10:22:25+00:00](https://github.com/leanprover-community/mathlib/commit/372d2949f4bd8661af0cc882e1ba05bbdfc01f17)
feat(data/finsupp): lift a collection of `add_monoid_hom`s to an `add_monoid_hom` on `α →₀ β` ([#4395](https://github.com/leanprover-community/mathlib/pull/#4395))

### [2020-10-06T09:02:45+00:00](https://github.com/leanprover-community/mathlib/commit/b1d3ef9aefa68d4fc76df7d9ff74cbae238705f7)
chore(data/mv_polynomial/basic): speedup coeff_mul ([#4469](https://github.com/leanprover-community/mathlib/pull/#4469))

### [2020-10-06T09:02:43+00:00](https://github.com/leanprover-community/mathlib/commit/c08a868666b8fc70894ff8d37091d2a68d732612)
feat(trailing_degree): added two lemmas support_X, support_X_empty computing the support of X, simplified a couple of lemmas ([#4294](https://github.com/leanprover-community/mathlib/pull/#4294))



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-06T09:02:41+00:00](https://github.com/leanprover-community/mathlib/commit/fc7e943e7584ac54f3043caa66ec6a441e3907fc)
feat(normed_space/basic): remove localized notation ([#4246](https://github.com/leanprover-community/mathlib/pull/#4246))

Remove notation for `tendsto` in `nhds`. 
Also make `is_bounded_linear_map.tendsto` protected.

### [2020-10-06T07:07:40+00:00](https://github.com/leanprover-community/mathlib/commit/32b5b68de75b63c95e38115d3d9f97c49ef86638)
chore(topology/compacts): inhabit instances ([#4462](https://github.com/leanprover-community/mathlib/pull/#4462))

### [2020-10-06T07:07:38+00:00](https://github.com/leanprover-community/mathlib/commit/d3b1d65d62bb92dec35d43ddb94da91a82d273a5)
lint(measure_theory): docstrings and style ([#4455](https://github.com/leanprover-community/mathlib/pull/#4455))

### [2020-10-06T02:54:28+00:00](https://github.com/leanprover-community/mathlib/commit/523bddb4f0cbfdc401b3b2f943ca6eba92ad90cc)
doc(data/nat/prime, data/int/basic, data/int/modeq): docstrings ([#4445](https://github.com/leanprover-community/mathlib/pull/#4445))

Filling in docstrings on `data/nat/prime`, `data/int/basic`, `data/int/modeq`.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2020-10-06T02:54:26+00:00](https://github.com/leanprover-community/mathlib/commit/cd785998e93d7674819caf81acaa212a155cb5fd)
lint(category_theory/monad): doc-strings ([#4428](https://github.com/leanprover-community/mathlib/pull/#4428))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-10-06T02:04:28+00:00](https://github.com/leanprover-community/mathlib/commit/a228af6a9c0e71dcf2b883968d00e5235a9e1788)
chore(scripts): update nolints.txt ([#4456](https://github.com/leanprover-community/mathlib/pull/#4456))

I am happy to remove some nolints for you!

### [2020-10-06T00:55:20+00:00](https://github.com/leanprover-community/mathlib/commit/27b6c239068e32a04e18ac8227cbbb3f8fea4f49)
lint(category_theory/limits): docstrings and inhabited instances ([#4435](https://github.com/leanprover-community/mathlib/pull/#4435))

### [2020-10-06T00:09:52+00:00](https://github.com/leanprover-community/mathlib/commit/37879aa632196bb5997059359685871834431adb)
feat(undergrad): minimal polynomial ([#4308](https://github.com/leanprover-community/mathlib/pull/#4308))

Adds minimal polynomial of endomorphisms to the undergrad list, although its use will be hard to guess for undergrads.

### [2020-10-05T23:18:37+00:00](https://github.com/leanprover-community/mathlib/commit/432da5f802eb1b8b4e762596f8e182d8dd8234f7)
feat(measure_theory/integration): add lintegral_with_density_eq_lintegral_mul ([#4350](https://github.com/leanprover-community/mathlib/pull/#4350))

This is Exercise 1.2.1 from Terence Tao's "An Epsilon of Room"



Co-authored-by: mzinkevi <41597957+mzinkevi@users.noreply.github.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-10-05T22:01:48+00:00](https://github.com/leanprover-community/mathlib/commit/97c444e00450be2c5ac1044070016499877814e1)
lint(topology/algebra): docstrings ([#4446](https://github.com/leanprover-community/mathlib/pull/#4446))



Co-authored-by: hrmacbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2020-10-05T19:45:24+00:00](https://github.com/leanprover-community/mathlib/commit/21158c43d69936b1e7fe6de5052f163cf80403ce)
lint(data/pnat): Docstrings and an unused argument in `pnat.basic`, `pnat.factors` ([#4443](https://github.com/leanprover-community/mathlib/pull/#4443))

Adds docstrings
Changes `div_exact` from having one unused input of type `k | m` to `div_exact m k`.



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2020-10-05T19:45:21+00:00](https://github.com/leanprover-community/mathlib/commit/45347f930f936249b69eddf3554e79dec8c9c906)
lint(src/order/rel_iso): docstrings and inhabited ([#4441](https://github.com/leanprover-community/mathlib/pull/#4441))

### [2020-10-05T19:45:19+00:00](https://github.com/leanprover-community/mathlib/commit/2127165960791b496b74ddf19f0b504b3ef7b83b)
chore(linear_algebra/basis): split off `linear_independent.lean` ([#4440](https://github.com/leanprover-community/mathlib/pull/#4440))

The file `basis.lean` was getting rather long (1500 lines), so I decided to split it into two not as long files at a natural point: everything using `linear_independent` but not `basis` can go into a new file `linear_independent.lean`. As a result, we can import `basis.lean` a bit later in the `ring_theory` hierarchy.

### [2020-10-05T19:45:18+00:00](https://github.com/leanprover-community/mathlib/commit/88c76ab930455033d767e79312cfe7c5a6cde3b0)
feat(order/filter/ultrafilter): Add variant of `exists_ultrafilter`. ([#4436](https://github.com/leanprover-community/mathlib/pull/#4436))

The lemma `exists_ultrafilter` tells us that any proper filter can be extended to an ultrafilter (using Zorn's lemma). This PR adds a variant, called `exists_ultrafilter_of_finite_inter_nonempty` which says that any collection of sets `S` can be extended to an ultrafilter whenever it satisfies the property that the intersection of any finite subcollection `T` is nonempty.



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2020-10-05T19:45:15+00:00](https://github.com/leanprover-community/mathlib/commit/915153206804628288353be812f0b7f8aaaaf6b2)
lint(order/conditionally_complete_lattice): docstrings ([#4434](https://github.com/leanprover-community/mathlib/pull/#4434))

### [2020-10-05T19:45:13+00:00](https://github.com/leanprover-community/mathlib/commit/221ec606133b565e8469c4a3cf9b8e7297860cb2)
feat(ring_theory/ideal): ideals in product rings ([#4431](https://github.com/leanprover-community/mathlib/pull/#4431))

### [2020-10-05T19:45:10+00:00](https://github.com/leanprover-community/mathlib/commit/f9e3779b4f79c1ddc9936c06871f68b107a538da)
lint(category_theory/whiskering): add doc-strings ([#4417](https://github.com/leanprover-community/mathlib/pull/#4417))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-10-05T19:45:08+00:00](https://github.com/leanprover-community/mathlib/commit/d2140efb6abb2aa2bfb0272122f27c9559652a96)
feat(algebra/gcd_monoid): `gcd_mul_dvd_mul_gcd` ([#4386](https://github.com/leanprover-community/mathlib/pull/#4386))

Adds a `gcd_monoid` version of `nat.gcd_mul_dvd_mul_gcd`



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2020-10-05T17:20:44+00:00](https://github.com/leanprover-community/mathlib/commit/c58c4e628a6f358dc587a2ba005cf17b9355e824)
docs(tactic/{fin_cases,lift}): lint ([#4421](https://github.com/leanprover-community/mathlib/pull/#4421))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-10-05T17:20:42+00:00](https://github.com/leanprover-community/mathlib/commit/e89d0edd4bdab766d946ec41409f3c529c4d640e)
chore(*/multilinear): generalize `comp_linear_map` to a family of linear maps ([#4408](https://github.com/leanprover-community/mathlib/pull/#4408))

Together with [#4316](https://github.com/leanprover-community/mathlib/pull/#4316) this will give us multilinear maps corresponding to monomials.

### [2020-10-05T15:18:22+00:00](https://github.com/leanprover-community/mathlib/commit/7f74e6b35f6bac86b9218250e83441ac3e17264c)
feat(data/mv_polynomial/basic): map_map_range_eq_iff ([#4438](https://github.com/leanprover-community/mathlib/pull/#4438))

Split off from [#4268](https://github.com/leanprover-community/mathlib/pull/#4268)

### [2020-10-05T15:18:20+00:00](https://github.com/leanprover-community/mathlib/commit/39f5d6b6d4ab77e265d44f413d562b408d0f0166)
feat(data/rat/basic): denom_eq_one_iff ([#4437](https://github.com/leanprover-community/mathlib/pull/#4437))

Split off from [#4268](https://github.com/leanprover-community/mathlib/pull/#4268)

### [2020-10-05T15:18:18+00:00](https://github.com/leanprover-community/mathlib/commit/22398f3efaa8101b25a7d96df9e88c58855e8222)
chore(src/linear_algebra): linting ([#4427](https://github.com/leanprover-community/mathlib/pull/#4427))



Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-10-05T11:39:07+00:00](https://github.com/leanprover-community/mathlib/commit/ca269b4431cd9cd005014692c53284a0029989fe)
feat(linear_algebra/affine_space/finite_dimensional): collinearity ([#4433](https://github.com/leanprover-community/mathlib/pull/#4433))

Define collinearity of a set of points in an affine space for a vector
space (as meaning the `vector_span` has dimension at most 1), and
prove some basic lemmas about it, leading to three points being
collinear if and only if they are not affinely independent.

### [2020-10-05T11:39:05+00:00](https://github.com/leanprover-community/mathlib/commit/b0fe280bb607f9c025d4a58ad352e44f6f42fbfd)
chore(category_theory/yoneda): doc-strings ([#4429](https://github.com/leanprover-community/mathlib/pull/#4429))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-10-05T11:39:03+00:00](https://github.com/leanprover-community/mathlib/commit/1501bf6fef34d667826097f250be2550860ef121)
chore(data/fin2): linting ([#4426](https://github.com/leanprover-community/mathlib/pull/#4426))

### [2020-10-05T11:39:01+00:00](https://github.com/leanprover-community/mathlib/commit/dd73dd2acd863a91ccee1718abfd97024ae7db6b)
chore(linear_algebra/finsupp*): linting ([#4425](https://github.com/leanprover-community/mathlib/pull/#4425))



Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-10-05T11:38:58+00:00](https://github.com/leanprover-community/mathlib/commit/c058524cdaef25511fa1fe8bff8a184a5c689b0f)
chore(data/fintype/basic): linting ([#4424](https://github.com/leanprover-community/mathlib/pull/#4424))

### [2020-10-05T11:38:56+00:00](https://github.com/leanprover-community/mathlib/commit/70b8e828b7e527e2c1957ed2a2da772fac38aac8)
data(data/dlist/{basic,instances}): linting ([#4422](https://github.com/leanprover-community/mathlib/pull/#4422))

### [2020-10-05T11:38:54+00:00](https://github.com/leanprover-community/mathlib/commit/da1265c52b52e96a57edfbc785b3dd650d438059)
chore(data/buffer/basic): linting ([#4420](https://github.com/leanprover-community/mathlib/pull/#4420))

### [2020-10-05T11:38:52+00:00](https://github.com/leanprover-community/mathlib/commit/768ff7682cd4a909ee6ee2a094b18a7cca062d09)
chore(data/array/lemmas): linting ([#4419](https://github.com/leanprover-community/mathlib/pull/#4419))

### [2020-10-05T11:38:50+00:00](https://github.com/leanprover-community/mathlib/commit/c370bd067ebe7476690d30b3682efa6ae859ee11)
chore(data/W): linting ([#4418](https://github.com/leanprover-community/mathlib/pull/#4418))

### [2020-10-05T11:38:48+00:00](https://github.com/leanprover-community/mathlib/commit/6a4fd24af5a95777ae0b89e377ea7b837926cb02)
lint(category_theory/adjunction): add doc-strings ([#4415](https://github.com/leanprover-community/mathlib/pull/#4415))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-10-05T11:38:46+00:00](https://github.com/leanprover-community/mathlib/commit/17b607f7aa5f797601ed0935ee1b78a6bf9171b6)
chore(algebra/direct_sum): linting ([#4412](https://github.com/leanprover-community/mathlib/pull/#4412))

### [2020-10-05T11:38:43+00:00](https://github.com/leanprover-community/mathlib/commit/b44e927e0ee71620313cee407bdac63b16e1e88a)
feat(data/finsupp): Make `finsupp.dom_congr` a `≃+` ([#4398](https://github.com/leanprover-community/mathlib/pull/#4398))

Since this has additional structure, it may as well be part of the type

### [2020-10-05T11:38:41+00:00](https://github.com/leanprover-community/mathlib/commit/54a2c6b645f00df6044629e200bf1536a9120fc1)
chore(algebra/group/with_one): prove `group_with_zero` earlier, drop custom lemmas ([#4385](https://github.com/leanprover-community/mathlib/pull/#4385))

### [2020-10-05T11:38:39+00:00](https://github.com/leanprover-community/mathlib/commit/723608457f61ab86560470ff7ef115dec15846c9)
refactor(linear_algebra/matrix): consistent naming ([#4345](https://github.com/leanprover-community/mathlib/pull/#4345))

The naming of the maps between `linear_map` and `matrix` was a mess. This PR proposes to clean it up by standardising on two forms:

 * `linear_map.to_matrix` and `matrix.to_linear_map` are the equivalences (in the respective direction) between `M₁ →ₗ[R] M₂` and `matrix m n R`, given bases for `M₁` and `M₂`.
 * `linear_map.to_matrix'` and `matrix.to_lin'` are the equivalences between `((n → R) →ₗ[R] (m → R))` and `matrix m n R` in the respective directions

The following declarations are renamed:

 * `comp_to_matrix_mul` -> `linear_map.to_matrix'_comp`
 * `linear_equiv_matrix` -> `linear_map.to_matrix`
 * `linear_equiv_matrix_{apply,comp,id,mul,range}` -> `linear_map.to_matrix_{apply,comp,id,mul,range}`
 * `linear_equiv_matrix_symm_{apply,mul,one}` -> `matrix.to_lin_{apply,mul,one}`
 * `linear_equiv_matrix'` -> `linear_map.to_matrix'`
 * `linear_map.to_matrix_id` ->`linear_map.to_matrix'_id`
 * `matrix.mul_to_lin` -> `matrix.to_lin'_mul`
 * `matrix.to_lin` -> `matrix.mul_vec_lin` (which should get simplified to `matrix.to_lin'`)
 * `matrix.to_lin_apply` -> `matrix.to_lin'_apply`
 * `matrix.to_lin_one` -> `matrix.to_lin'_one`
 * `to_lin_to_matrix` -> `matrix.to_lin'_to_matrix'`
 * `to_matrix_to_lin` -> `linear_map.to_matrix'_to_lin'`

The following declarations are deleted as unnecessary:

 * `linear_equiv_matrix_apply'` (use `linear_map.to_matrix_apply` instead)
 * `linear_equiv_matrix'_apply` (the original `linear_map.to_matrix` doesn't exist any more)
 * `linear_equiv_matrix'_symm_apply` (the original `matrix.to_lin` doesn't exist any more)
 * `linear_map.to_matrixₗ` (use `linear_map.to_matrix'` instead)
 * `linear_map.to_matrix` (use `linear_map.to_matrix'` instead)
 * `linear_map.to_matrix_of_equiv` (use `linear_map.to_matrix'_apply` instead)
 * `matrix.eval` (use `matrix.to_lin'` instead)
 * `matrix.to_lin.is_add_monoid_hom` (use `linear_equiv.to_add_monoid_hom` instead)
 * `matrix.to_lin_{add,zero,neg}` (use `linear_equiv.map_{add,zero,neg} matrix.to_lin'` instead)
 * `matrix.to_lin_of_equiv` (use `matrix.to_lin'_apply` instead)

Zulip thread: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Refactoring.20.60linear_map.20.3C-.3E.20matrix.60



Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-10-05T08:49:57+00:00](https://github.com/leanprover-community/mathlib/commit/67b312c28b895b351215ecb711c77fa4415a9db7)
chore(logic/relation): linting ([#4414](https://github.com/leanprover-community/mathlib/pull/#4414))

### [2020-10-05T08:49:55+00:00](https://github.com/leanprover-community/mathlib/commit/186660c0088e8d1e0fa74b9fbab7c260c6f5639c)
feat(*): assorted `simp` lemmas for IMO 2019 q1 ([#4383](https://github.com/leanprover-community/mathlib/pull/#4383))

* mark some lemmas about cancelling in expressions with `(-)` as `simp`;
* simplify `a * b = a * c` to `b = c ∨ a = 0`, and similarly for
  `a * c = b * c;
* change `priority` of `monoid.has_pow` and `group.has_pow` to the
  default priority.
* simplify `monoid.pow` and `group.gpow` to `has_pow.pow`.

### [2020-10-05T08:49:53+00:00](https://github.com/leanprover-community/mathlib/commit/8f4475b46aa489eab1f0a2e5cbdc5000def53b9d)
feat(combinatorics/partitions): Add partitions ([#4303](https://github.com/leanprover-community/mathlib/pull/#4303))

### [2020-10-05T07:39:36+00:00](https://github.com/leanprover-community/mathlib/commit/ca679acad147870b2c5087d90fe3550f107dea49)
chore(algebra/direct_limit): linting ([#4411](https://github.com/leanprover-community/mathlib/pull/#4411))

### [2020-10-05T07:39:32+00:00](https://github.com/leanprover-community/mathlib/commit/581b1415e93ab4cb208487ec4b6ddb11d03d5a20)
feat(data/complex): norm_cast lemmas ([#4405](https://github.com/leanprover-community/mathlib/pull/#4405))

Mark various existing lemmas such as `abs_of_real` and `of_real_exp`
as `norm_cast` lemmas so that `norm_cast` and related tactics can
handle expressions involving those functions, and add lemmas
`of_real_prod` and `of_real_sum` to allow those tactics to work with
sums and products involving coercions from real to complex.

### [2020-10-05T07:39:30+00:00](https://github.com/leanprover-community/mathlib/commit/1c8bb4221af630aef34c9966293f5bfd5b889e35)
feat(linear_algebra/affine_space/finite_dimensional): more lemmas ([#4389](https://github.com/leanprover-community/mathlib/pull/#4389))

Add more lemmas concerning dimensions of affine spans of finite
families of points.  In particular, various forms of the lemma that `n + 1`
points are affinely independent if and only if their `vector_span` has
dimension `n` (or equivalently, at least `n`).  With suitable
definitions, this is equivalent to saying that three points are
affinely independent or collinear, four are affinely independent or
coplanar, etc., thus preparing for giving a definition of `collinear`
(for any set of points in an affine space for a vector space) in terms
of dimension and proving some basic properties of it including
relating it to affine independence.

### [2020-10-05T07:39:28+00:00](https://github.com/leanprover-community/mathlib/commit/565e961dfe8f4d245287e63d9f39344f5784a25d)
feat(number_theory/arithmetic_function): Define arithmetic functions/the Dirichlet ring ([#4352](https://github.com/leanprover-community/mathlib/pull/#4352))

Defines a type `arithmetic_function A` of functions from `nat` to `A` sending 0 to 0
Defines the Dirichlet ring structure on `arithmetic_function A`



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2020-10-05T05:24:10+00:00](https://github.com/leanprover-community/mathlib/commit/9ab7f0555a48c176695c69ed3808d10ce43f7851)
feat(category_theory/limits/terminal): limit of a diagram with initial object ([#4404](https://github.com/leanprover-community/mathlib/pull/#4404))

If the index category for a functor has an initial object, the image of the functor is a limit.

### [2020-10-05T05:24:08+00:00](https://github.com/leanprover-community/mathlib/commit/91d9e963251446ea94c1781158d88396c4620889)
chore(algebra/ring/basic): docs, simps ([#4375](https://github.com/leanprover-community/mathlib/pull/#4375))

* add docstrings to all typeclasses in `algebra/ring/basic`;

* add `ring_hom.inhabited := ⟨id α⟩` to make linter happy;

* given `f : α →+* β`, simplify `f.to_monoid_hom` and
`f.to_add_monoid_hom` to coercions;

* add `simp` lemmas for coercions of `ring_hom.mk f _ _ _ _` to
`monoid_hom` and `add_monoid_hom`.

### [2020-10-05T05:24:06+00:00](https://github.com/leanprover-community/mathlib/commit/08cdf37c78d61796c109693d5290add3084138ce)
feat(analysis/complex/roots_of_unity): complex (primitive) roots of unity ([#4330](https://github.com/leanprover-community/mathlib/pull/#4330))

### [2020-10-05T04:08:17+00:00](https://github.com/leanprover-community/mathlib/commit/bf998892015ea9781a0e2e635ca08d683263dd9c)
feat(category_theory/limits): lift self limit ([#4403](https://github.com/leanprover-community/mathlib/pull/#4403))

A couple of little lemmas to simplify lift of a limit cone.

### [2020-10-05T02:16:27+00:00](https://github.com/leanprover-community/mathlib/commit/916b5d3af5e49a3e45ee6c4d78656b16226a6f2f)
feat(topology): completion of separable space is separable ([#4399](https://github.com/leanprover-community/mathlib/pull/#4399))

API change:

* `dense` renamed to `exists_between`;
* new `dense (s : set α)` means `∀ x, x ∈ closure s`.

### [2020-10-05T01:18:46+00:00](https://github.com/leanprover-community/mathlib/commit/fc09dbae0618686fcdea44d64ed2ba0a5c0d5220)
feat(analysis/special_functions/pow): exp_mul ([#4409](https://github.com/leanprover-community/mathlib/pull/#4409))

Add the lemma that `exp (x * y) = (exp x) ^ y`, for real `x` and `y`.

### [2020-10-04T20:49:23+00:00](https://github.com/leanprover-community/mathlib/commit/d13d21baab5ddc33723dbb24722e2e553974345d)
feat(algebra/big_operators/order): bounding finite fibration cardinalities from below ([#4396](https://github.com/leanprover-community/mathlib/pull/#4396))

Also including unrelated change `finset.inter_eq_sdiff_sdiff`.

### [2020-10-04T19:18:31+00:00](https://github.com/leanprover-community/mathlib/commit/f437365a3cac09cd06c8a29a616075182ab52c20)
feat(linear_algebra/dimension): one-dimensional spaces ([#4400](https://github.com/leanprover-community/mathlib/pull/#4400))

Add some lemmas about the vectors in spaces and subspaces of dimension
at most 1.

### [2020-10-04T15:27:55+00:00](https://github.com/leanprover-community/mathlib/commit/8f536768e0e7510aa8e192589bbec2483ed4f55d)
feat(data/nat): Slightly strengthen nat.coprime_of_dvd/nat.coprime_of_dvd' ([#4368](https://github.com/leanprover-community/mathlib/pull/#4368))

It is sufficient to consider prime factors.

The theorems now depend on nat.prime (data/nat/prime.lean), which depends on
data/nat/gcd.lean, so I moved them to prime.lean.

### [2020-10-04T11:10:48+00:00](https://github.com/leanprover-community/mathlib/commit/729b60a22e12a476a178d02c53b7ff7f911208f9)
feat(data/set/basic): subsingleton_coe ([#4388](https://github.com/leanprover-community/mathlib/pull/#4388))

Add a lemma relating a set being a subsingleton set to its coercion to
a type being a subsingleton type.

### [2020-10-04T11:10:45+00:00](https://github.com/leanprover-community/mathlib/commit/e8b65e688120cfc725c843327baf7d11eda98284)
feat(data/set/basic): eq_singleton_iff_unique_mem ([#4387](https://github.com/leanprover-community/mathlib/pull/#4387))

We have this lemma for `finset`.  Add a version for `set` (with the
same name).

### [2020-10-04T11:10:43+00:00](https://github.com/leanprover-community/mathlib/commit/e1b1d17a1b8779826b4f4e745320d12ac417bb03)
feat(algebra/group): construct `add_monoid_hom` from `map_sub` ([#4382](https://github.com/leanprover-community/mathlib/pull/#4382))

### [2020-10-04T11:10:41+00:00](https://github.com/leanprover-community/mathlib/commit/231271d3b4c40209bc6de816c5cda800dad3d563)
chore(data/equiv/mul_add): add more `equiv` lemmas to `mul_equiv` namespace ([#4380](https://github.com/leanprover-community/mathlib/pull/#4380))

Also make `apply_eq_iff_eq` and `apply_eq_iff_eq_symm_apply` use
implicit arguments.

### [2020-10-04T11:10:39+00:00](https://github.com/leanprover-community/mathlib/commit/5d35b9ad9f65e2b53cd646204a005db327b38c3a)
feat(algebra/gcd_monoid, data/*set/gcd): a few lemmas about gcds ([#4354](https://github.com/leanprover-community/mathlib/pull/#4354))

Adds lemmas about gcds useful for proving Gauss's Lemma

### [2020-10-04T09:48:24+00:00](https://github.com/leanprover-community/mathlib/commit/509dd9ea97fce0073401753cdc9a5f21d1c9059e)
feat(linear_algebra/basic): span_singleton smul lemmas ([#4394](https://github.com/leanprover-community/mathlib/pull/#4394))

Add two submodule lemmas relating `span R ({r • x})` and `span R {x}`.

### [2020-10-04T06:59:45+00:00](https://github.com/leanprover-community/mathlib/commit/c3d08357326c73fa7f1e3c5a703c585f3dce7f07)
chore(data/mv_polynomial): rename `pderivative` to `pderiv` ([#4381](https://github.com/leanprover-community/mathlib/pull/#4381))

This name matches `fderiv` and `deriv` we have in `analysis/`.

### [2020-10-04T05:39:03+00:00](https://github.com/leanprover-community/mathlib/commit/e902cae5604847e283b4863957f83604e7eb8cfb)
feat(category_theory/limits/cofinal): better API for cofinal functors ([#4276](https://github.com/leanprover-community/mathlib/pull/#4276))

This PR

1. Proves that `F : C ⥤ D` being cofinal is equivalent to `colimit (F ⋙ G) ≅ colimit G` for all `G : D ⥤ E`. (Previously we just had the implication.)
2. Proves that if `F` is cofinal then `limit (F.op ⋙ H) ≅ limit H` for all `H: Dᵒᵖ ⥤ E`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Bhavik Mehta <bhavikmehta8@gmail.com>

### [2020-10-04T03:45:24+00:00](https://github.com/leanprover-community/mathlib/commit/e738e90511d0d0ffbe82dddbbc0b1c56c6d1d769)
feat(algebra/group_power/identities): named ring identities ([#4390](https://github.com/leanprover-community/mathlib/pull/#4390))

This PR adds a new file containing some "named" ring identities provable by `ring`.

### [2020-10-04T01:55:07+00:00](https://github.com/leanprover-community/mathlib/commit/f2044a57a2e7347a84c53c0a076355be56e04e9a)
chore(scripts): update nolints.txt ([#4392](https://github.com/leanprover-community/mathlib/pull/#4392))

I am happy to remove some nolints for you!

### [2020-10-03T23:52:40+00:00](https://github.com/leanprover-community/mathlib/commit/333c2164103c939e7df9dc6edd362c55d4d3551e)
chore(algebra/group/type_tags): Use ≃ instead of → ([#4346](https://github.com/leanprover-community/mathlib/pull/#4346))

These functions are all equivalences, so we may as well expose that in their type

This also fills in some conversions that were missing.

Unfortunately this requires some type ascriptions in a handful of places.
It might be possible to remove these somehow.
This zulip thread contains a mwe: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Type.20inference.20on.20.60.E2.86.92.60.20vs.20.60.E2.89.83.60/near/211922501.

### [2020-10-03T20:51:17+00:00](https://github.com/leanprover-community/mathlib/commit/a0ba5e7dc64370d4612579a0623b873c67c42e30)
doc(data/real/*): add a few docstrings, `ereal.has_zero`, and `ereal.inhabited` ([#4378](https://github.com/leanprover-community/mathlib/pull/#4378))

### [2020-10-03T20:51:15+00:00](https://github.com/leanprover-community/mathlib/commit/e593ffa64ab2a4bc8b376e3fc005a2fcde2c3799)
feat(algebra/ordered*): more simp lemmas ([#4359](https://github.com/leanprover-community/mathlib/pull/#4359))

Simplify expressions like `0 < a * b`, `0 < a / b`, `a / b < 1` etc. to FOL formulas of inequalities on `a`, `b`.

### [2020-10-03T18:56:38+00:00](https://github.com/leanprover-community/mathlib/commit/b790b27d1765170eef0e6c3b353f81d7c1a00ec5)
feat(slim_check): sampleable instance for generating functions and injective functions ([#3967](https://github.com/leanprover-community/mathlib/pull/#3967))

This also adds `printable_prop` to trace why propositions hold or don't hold and `sampleable_ext` to allow the data structure generated and shrunken by `slim_check` to have a different type from the type we are looking for.

### [2020-10-03T15:26:49+00:00](https://github.com/leanprover-community/mathlib/commit/c39170e400dff940105a3b76a6c8c32c997cf8c3)
doc(*): add a few short module docstrings ([#4370](https://github.com/leanprover-community/mathlib/pull/#4370))

### [2020-10-03T10:25:54+00:00](https://github.com/leanprover-community/mathlib/commit/946ab0266cfda673ed9c66815256091250d1ab84)
chore(.github/workflows): github action for crossing off PR dependencies ([#4367](https://github.com/leanprover-community/mathlib/pull/#4367))



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-03T05:00:16+00:00](https://github.com/leanprover-community/mathlib/commit/069952b850463682e01521d2fcb6a4fc6e2112a4)
chore(category_theory/limits/binary_products): weaken assumptions ([#4373](https://github.com/leanprover-community/mathlib/pull/#4373))

weakens the assumptions on which limits need to exist for these constructions

not much of a change but the assumptions I used were too strong so just a small fix

### [2020-10-03T05:00:15+00:00](https://github.com/leanprover-community/mathlib/commit/9e455c158aa5d670cf1fa669dc159da85b2a0320)
feat(data/monoid_algebra): Allow R ≠ k in semimodule R (monoid_algebra k G) ([#4365](https://github.com/leanprover-community/mathlib/pull/#4365))

Also does the same for the additive version `semimodule R (add_monoid_algebra k G)`.

### [2020-10-03T04:08:49+00:00](https://github.com/leanprover-community/mathlib/commit/6ab3eb7c8036ee136cc83a8284f626588783655e)
chore(category_theory/limits/equalizers): some equalizer fixups ([#4372](https://github.com/leanprover-community/mathlib/pull/#4372))

A couple of minor changes for equalizers:
- Add some `simps` attributes
- Removes some redundant brackets
- Simplify the construction of an iso between cones (+dual)
- Show the equalizer fork is a limit (+dual)

### [2020-10-03T01:06:52+00:00](https://github.com/leanprover-community/mathlib/commit/6a5240039bee0795154d721a55669730c293ca53)
chore(scripts): update nolints.txt ([#4371](https://github.com/leanprover-community/mathlib/pull/#4371))

I am happy to remove some nolints for you!

### [2020-10-02T20:49:45+00:00](https://github.com/leanprover-community/mathlib/commit/da24addb74fe40009254cadce1e41593e876c82a)
feat(data/multiset): ordered sum lemmas ([#4305](https://github.com/leanprover-community/mathlib/pull/#4305))

Add some lemmas about products in ordered monoids and sums in ordered add monoids, and a multiset count filter lemma (and a rename of a count filter lemma)

### [2020-10-02T18:01:52+00:00](https://github.com/leanprover-community/mathlib/commit/2634c1b540648d35178d068fa5521f13576fd385)
feat(category_theory/cones): map_cone_inv as an equivalence ([#4253](https://github.com/leanprover-community/mathlib/pull/#4253))

When `G` is an equivalence, we have `G.map_cone_inv : cone (F ⋙ G) → cone F`, and that this is an inverse to `G.map_cone`, but not quite that these constitute an equivalence of categories. This PR fixes that.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-10-02T13:06:24+00:00](https://github.com/leanprover-community/mathlib/commit/2ce359b9577badb2c8b007f6dbcd8595abadbfeb)
feat(data/nat/parity,data/int/parity): odd numbers ([#4357](https://github.com/leanprover-community/mathlib/pull/#4357))

As discussed at
<https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/formalizing.20IMO.20problems>,
define `nat.odd` and `int.odd` to allow a more literal expression
(outside of mathlib; for example, in formal olympiad problem
statements) of results whose informal statement refers to odd numbers.
These definitions are not expected to be used in mathlib beyond the
`simp` lemmas added here that translate them back to `¬ even`.  This
is similar to how `>` is defined but almost all mathlib results are
expected to use `<` instead.

It's likely that expressing olympiad problem statements literally in
Lean will end up using some other such definitions, where avoiding API
duplication means almost everything relevant in mathlib is developed
in terms of the expansion of the definition.

### [2020-10-02T12:12:21+00:00](https://github.com/leanprover-community/mathlib/commit/53570c0eccc4f5f72e250fb3583381a3da89312f)
chore(README): add zulip badge ([#4362](https://github.com/leanprover-community/mathlib/pull/#4362))

### [2020-10-02T10:14:33+00:00](https://github.com/leanprover-community/mathlib/commit/eeb9bb6a2e1806e9b5baadd5fa40f8a8d802291e)
feat(data/polynomial/coeff): single-variate `C_dvd_iff_dvd_coeff` ([#4355](https://github.com/leanprover-community/mathlib/pull/#4355))

Adds a single-variate version of the lemma `mv_polynomial.C_dvd_iff_dvd_coeff`
(Useful for Gauss's Lemma)

### [2020-10-02T10:14:31+00:00](https://github.com/leanprover-community/mathlib/commit/8876ba25b2d0d5502a74ceb3e4cf2a19e579aade)
feat(ring_theory/roots_of_unity): (primitive) roots of unity ([#4260](https://github.com/leanprover-community/mathlib/pull/#4260))

### [2020-10-02T08:35:04+00:00](https://github.com/leanprover-community/mathlib/commit/d631126a7d5928607ecbff66918cdfc4cd411723)
chore(algebra): move algebra and monoid algebra to algebra/ ([#4298](https://github.com/leanprover-community/mathlib/pull/#4298))

On the basis that all the basic definitions of algebraic gadgets are otherwise in `src/algebra/`, I'd like to move `ring_theory/algebra.lean`, `ring_theory/algebra_operations.lean`, and `data/monoid_algebra.lean` there too.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-10-02T07:19:29+00:00](https://github.com/leanprover-community/mathlib/commit/1f91d93b267920353814ea5b66d1492eabf3f729)
chore(ring_theory/power_series): rename variables ([#4361](https://github.com/leanprover-community/mathlib/pull/#4361))

Use `R`, `S`, `T` for (semi)rings and `k` for a field.

### [2020-10-02T05:57:43+00:00](https://github.com/leanprover-community/mathlib/commit/140db109f7e778c180664c5eb0e447286dd32bc9)
chore(data/monoid_algebra): Make the style in `lift` consistent ([#4347](https://github.com/leanprover-community/mathlib/pull/#4347))

This continues from a06c87ed28989d062aa3d5324e880e62edf4a2f8, which changed add_monoid_algebra.lift but not monoid_algebra.lift.
Note only the additive proof needs `erw` (to unfold `multiplicative`).

### [2020-10-02T01:04:21+00:00](https://github.com/leanprover-community/mathlib/commit/d41f38636a66b12da1f94e5bb774a7859d5f9547)
chore(scripts): update nolints.txt ([#4358](https://github.com/leanprover-community/mathlib/pull/#4358))

I am happy to remove some nolints for you!

### [2020-10-01T20:40:02+00:00](https://github.com/leanprover-community/mathlib/commit/4ef680b1696cd6c2323cfdb3dd9c41a747e18dde)
feat(group_theory): subgroups of real numbers ([#4334](https://github.com/leanprover-community/mathlib/pull/#4334))

This fills the last hole in the "Topology of R" section of our undergrad curriculum: additive subgroups of real numbers are either dense or cyclic. Most of this PR is supporting material about ordered abelian groups. 

Co-Authored-By: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>



Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored-by: hrmacbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2020-10-01T18:43:08+00:00](https://github.com/leanprover-community/mathlib/commit/485185781cacdf140e18c1b02f8b628b7af621e1)
chore(analysis/normed_space): define `norm_one_class` ([#4323](https://github.com/leanprover-community/mathlib/pull/#4323))

Many normed rings have `∥1⊫1`. Add a typeclass mixin for this property.

API changes:

* drop `normed_field.norm_one`, use `norm_one` instead;
* same with `normed_field.nnnorm_one`;
* new typeclass `norm_one_class` for `∥1∥ = 1`;
* add `list.norm_prod_le`, `list.norm_prod_le`, `finset.norm_prod_le`, `finset.norm_prod_le'`:
  norm of the product of finitely many elements is less than or equal to the product of their norms;
  versions with prime assume that a `list` or a `finset` is nonempty, while the other versions
  assume `[norm_one_class]`;
* rename `norm_pow_le` to `norm_pow_le'`, new `norm_pow_le` assumes `[norm_one_class]` instead
  of `0 < n`;
* add a few supporting lemmas about `list`s and `finset`s.

### [2020-10-01T17:37:36+00:00](https://github.com/leanprover-community/mathlib/commit/d5834ee3ed65c59496ded59b4ec66161b2260121)
feat(data/real/irrational): add a lemma to deduce nat_degree from irrational root ([#4349](https://github.com/leanprover-community/mathlib/pull/#4349))

This PR is splitted from [#4301](https://github.com/leanprover-community/mathlib/pull/#4301) .



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-01T17:37:34+00:00](https://github.com/leanprover-community/mathlib/commit/ddaa325e87bf883a605180591457a2f08c4c5ad8)
feat(archive/imo): formalize IMO 1969 problem 1 ([#4261](https://github.com/leanprover-community/mathlib/pull/#4261))

This is a formalization of the problem and solution for the first problem on the 1969 IMO:

Prove that there are infinitely many natural numbers $a$ with the following property: the number $z = n^4 + a$ is not prime for any natural number $n$

### [2020-10-01T16:43:25+00:00](https://github.com/leanprover-community/mathlib/commit/7767ef8bf07538a7732776f01501814f0a3ddfd3)
feat(number_theory/divisors): defines the finsets of divisors/proper divisors, perfect numbers, etc. ([#4310](https://github.com/leanprover-community/mathlib/pull/#4310))

Defines `nat.divisors n` to be the set of divisors of `n`, and `nat.proper_divisors` to be the set of divisors of `n` other than `n`.
Defines `nat.divisors_antidiagonal` in analogy to other `antidiagonal`s used to define convolutions
Defines `nat.perfect`, the predicate for perfect numbers



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2020-10-01T14:28:11+00:00](https://github.com/leanprover-community/mathlib/commit/f10dda05fb7d374bece92396c4321343c54e5592)
feat(data/nat/basic): simp-lemmas for bit0 and bit1 mod two ([#4343](https://github.com/leanprover-community/mathlib/pull/#4343))

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

### [2020-10-01T14:28:07+00:00](https://github.com/leanprover-community/mathlib/commit/0fc7b29eb4fe0117f17ab315d2a6554948470e2b)
feat(data/mv_polynomial): stub on invertible elements ([#4320](https://github.com/leanprover-community/mathlib/pull/#4320))

More from the Witt vector branch.

Co-authored-by: Johan Commelin <johan@commelin.net>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-10-01T14:28:01+00:00](https://github.com/leanprover-community/mathlib/commit/3d58fce571a01791d04a3469744cdf71be37546c)
feat(linear_algebra): determinant of `matrix.block_diagonal` ([#4300](https://github.com/leanprover-community/mathlib/pull/#4300))

This PR shows the determinant of `matrix.block_diagonal` is the product of the determinant of each subblock.

The only contributing permutations in the expansion of the determinant are those which map each block to the same block. Each of those permutations has the form `equiv.prod_congr_left σ`. Using `equiv.perm.extend` and `equiv.prod_congr_right`, we can compute the sign of `equiv.prod_congr_left σ`, and with a bit of algebraic manipulation we reach the conclusion.

### [2020-10-01T14:27:59+00:00](https://github.com/leanprover-community/mathlib/commit/13e9cc4acf0ba7327e244d1eda8818a808013ec4)
feat(linear_algebra/exterior_algebra): Add an exterior algebra ([#4297](https://github.com/leanprover-community/mathlib/pull/#4297))

This adds the basic exterior algebra definitions using a very similar approach to `universal_enveloping_algebra`.
It's based off the `exterior_algebra` branch, dropping the `wedge` stuff for now as development in multilinear maps is happening elsewhere.

Co-authored-by: Adam Topaz <github@adamtopaz.com>
Co-authored-by: Zhangir Azerbayev <zazerbayev@gmail.com>

### [2020-10-01T14:27:57+00:00](https://github.com/leanprover-community/mathlib/commit/268073ae17d2aee51fc086b9532cd850c787256f)
feat(geometry/manifold): derivative of the zero section of the tangent bundle ([#4292](https://github.com/leanprover-community/mathlib/pull/#4292))

We show that the zero section of the tangent bundle to a smooth manifold is smooth, and compute its derivative.

Along the way, some streamlining of supporting material.

### [2020-10-01T14:27:55+00:00](https://github.com/leanprover-community/mathlib/commit/11cdc8cf3d38479bee1b547431d3b460595db75b)
feat(data/polynomial/*) : as_sum_support  ([#4286](https://github.com/leanprover-community/mathlib/pull/#4286))

### [2020-10-01T12:28:37+00:00](https://github.com/leanprover-community/mathlib/commit/0ccc157373c9261eaf7462e3422e93f2545cab81)
feat(data/nat/fact, analysis/specific_limits): rename nat.fact, add few lemmas about its behaviour along at_top ([#4309](https://github.com/leanprover-community/mathlib/pull/#4309))

Main content : 
- Rename `nat.fact` to `nat.factorial`, and add notation `n!` in locale `factorial`. This fixes [#2786](https://github.com/leanprover-community/mathlib/pull/#2786)
- Generalize `prod_inv_distrib` to `comm_group_with_zero` *without any nonzero assumptions*
- `factorial_tendsto_at_top` : n! --> infinity as n--> infinity
- `tendsto_factorial_div_pow_self_at_top` : n!/(n^n) --> 0 as n --> infinity

### [2020-10-01T09:16:51+00:00](https://github.com/leanprover-community/mathlib/commit/9c241b0d9abb11b9d279801f957d77e5d3363a86)
feat(*): a few more tests for `summable`, docstrings ([#4325](https://github.com/leanprover-community/mathlib/pull/#4325))

### Important new theorems:

* `summable_geometric_iff_norm_lt_1`: a geometric series in a normed field is summable iff the norm of the common ratio is less than 1;
* `summable.tendsto_cofinite_zero`: divergence test: if `f` is a `summable` function, then `f x` tends to zero along `cofinite`;

### API change

* rename `cauchy_seq_of_tendsto_nhds` to `filter.tendsto.cauchy_seq` to enable dot syntax.

### [2020-10-01T09:16:49+00:00](https://github.com/leanprover-community/mathlib/commit/fb2b1de05740f23e25c6b18ee09aa4e0f1d50f86)
feat(algebra/ordered_ring): ask for 0 < 1 earlier. ([#4296](https://github.com/leanprover-community/mathlib/pull/#4296))

It used to be that `linear_ordered_semiring` asked for `0 < 1`, while `ordered_semiring` didn't.

I'd prefer that `ordered_semiring` asks for this already:
1. because lots of interesting examples (e.g. rings of operators) satisfy this property
2. because the rest of mathlib doesn't care



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-10-01T07:41:14+00:00](https://github.com/leanprover-community/mathlib/commit/9ceb1141fab68a2cd3ec27621018539bf1139d87)
feat(analysis/normed_space/inner_product): Define the inner product based on `is_R_or_C` ([#4057](https://github.com/leanprover-community/mathlib/pull/#4057))

### [2020-10-01T02:57:05+00:00](https://github.com/leanprover-community/mathlib/commit/1b9732630e746939aa7fe15b58a30c16d9f813a7)
feat(data/fintype): pigeonhole principles ([#4096](https://github.com/leanprover-community/mathlib/pull/#4096))

Add pigeonhole principles for finitely and infinitely many pigeons in finitely many holes. There are also strong versions of these, which say that there is a hole containing at least as many pigeons as the average number of pigeons per hole. Fixes [#2272](https://github.com/leanprover-community/mathlib/pull/#2272).



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-10-01T01:07:36+00:00](https://github.com/leanprover-community/mathlib/commit/af994169a80e8762be7142bb1a1e779789d0853a)
chore(scripts): update nolints.txt ([#4341](https://github.com/leanprover-community/mathlib/pull/#4341))

I am happy to remove some nolints for you!

### [2020-09-30T20:29:32+00:00](https://github.com/leanprover-community/mathlib/commit/bcc7c024e7d995bb5be981f95f710cd7a84b8d4f)
feat(geometry/manifold): smooth bundled maps ([#3641](https://github.com/leanprover-community/mathlib/pull/#3641))

### [2020-09-30T19:43:08+00:00](https://github.com/leanprover-community/mathlib/commit/c04e3398e18210817e2ac106f45cc1a917572f32)
feat(archive/imo): formalize IMO 1959 problem 1 ([#4340](https://github.com/leanprover-community/mathlib/pull/#4340))

This is a formalization of the problem and solution for the first problem on the 1959 IMO:

Prove that the fraction (21n+4)/(14n+3) is irreducible for every natural number n.

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-09-30T18:14:45+00:00](https://github.com/leanprover-community/mathlib/commit/23b04b0f779dd1334e3b985edbc27753e5c43eed)
chore(ring_theory/algebra): Mark algebra.mem_top as simp ([#4339](https://github.com/leanprover-community/mathlib/pull/#4339))

This is consistent with `subsemiring.mem_top` and `submonoid.mem_top`, both of which are marked simp.

### [2020-09-30T18:14:43+00:00](https://github.com/leanprover-community/mathlib/commit/decd67c4059f3c6b9344754adb201f80d0c68e25)
feat(analysis/convex): slope_mono_adjacent ([#4307](https://github.com/leanprover-community/mathlib/pull/#4307))



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-09-30T16:47:25+00:00](https://github.com/leanprover-community/mathlib/commit/a06c87ed28989d062aa3d5324e880e62edf4a2f8)
chore(*): Tidy some proofs and variables ([#4338](https://github.com/leanprover-community/mathlib/pull/#4338))

### [2020-09-30T16:47:23+00:00](https://github.com/leanprover-community/mathlib/commit/9921fe7110117e6e76c2168a54772ed492eefcb5)
fix(ring_theory/algebra): Fix typo "algbera" ([#4337](https://github.com/leanprover-community/mathlib/pull/#4337))

Introduced in e57fc3d6c142835dc8566aa28e812f7688f14512

### [2020-09-30T14:42:25+00:00](https://github.com/leanprover-community/mathlib/commit/05038da027eba64c2e7c41e9fe78a6de2031a008)
feat(ring_theory/algebra): some lemmas about numerals in algebras ([#4327](https://github.com/leanprover-community/mathlib/pull/#4327))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-09-30T09:51:53+00:00](https://github.com/leanprover-community/mathlib/commit/5fd2037ef291b942180b3189d6404355c825b5a7)
chore(*): rename is_unit_pow to is_unit.pow ([#4329](https://github.com/leanprover-community/mathlib/pull/#4329))

enable dot notation by renaming
is_unit_pow to is_unit.pow

### [2020-09-30T09:51:51+00:00](https://github.com/leanprover-community/mathlib/commit/ac797ad5cdccd6de3c92c673591790e43159f3ab)
feat(topology/bounded_continuous_function): normed_comm_ring structure on bounded continuous functions ([#4326](https://github.com/leanprover-community/mathlib/pull/#4326))

An instance of the new ([#4291](https://github.com/leanprover-community/mathlib/pull/#4291)) class `normed_comm_ring`.

### [2020-09-30T09:51:49+00:00](https://github.com/leanprover-community/mathlib/commit/e53aa870cd0e2397f1bbf69eb460e29acbd732f7)
feat(order/basic): lemmas about `strict_mono_incr_on` ([#4313](https://github.com/leanprover-community/mathlib/pull/#4313))

Also move the section about `order_dual` up to use it in the proofs.

Non-BC API changes:

* Now `strict_mono_incr_on` and `strict_mono_decr_on` take `x` and `y` as `⦃⦄` args.

### [2020-09-30T09:51:46+00:00](https://github.com/leanprover-community/mathlib/commit/e1c0b0a992ccdacd0e3c71399b83fc94a4593503)
feat(ring_theory/jacobson): Integral extension of Jacobson rings are Jacobson ([#4304](https://github.com/leanprover-community/mathlib/pull/#4304))

Main statement given by `is_jacobson_of_is_integral `

### [2020-09-30T09:51:44+00:00](https://github.com/leanprover-community/mathlib/commit/ff66d924928479a5ab9086a45ce1d25771b9371f)
chore(category_theory/limits): facts about opposites of limit cones ([#4250](https://github.com/leanprover-community/mathlib/pull/#4250))

Simple facts about limit cones and opposite categories.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-30T07:56:48+00:00](https://github.com/leanprover-community/mathlib/commit/da66bb81bf0466335bae82077f0c335dfe53aeb3)
feat(*): preparations for roots of unity ([#4322](https://github.com/leanprover-community/mathlib/pull/#4322))

### [2020-09-29T14:16:59+00:00](https://github.com/leanprover-community/mathlib/commit/743f82ca17c1690fead4ce0f882c590b37cb2842)
feat(algebra/pointwise): Add missing to_additive on finset lemmas ([#4306](https://github.com/leanprover-community/mathlib/pull/#4306))

### [2020-09-29T12:11:48+00:00](https://github.com/leanprover-community/mathlib/commit/669a34992a8cf1c39b8df2ebe054291a1c6606ca)
feat(data/prod): mk injective lemmas ([#4319](https://github.com/leanprover-community/mathlib/pull/#4319))

More scattered lemmmas from the Witt vector branch.

Co-authored by: Johan Commelin <johan@commelin.net>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-09-29T12:11:45+00:00](https://github.com/leanprover-community/mathlib/commit/d301d431feb4c68cf7f3a0993018a706c01e9b9c)
feat(algebra/invertible): invertible.copy ([#4318](https://github.com/leanprover-community/mathlib/pull/#4318))

A useful gadget from the Witt vector project.

Co-authored by: Johan Commelin <johan@commelin.net>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-09-29T12:11:43+00:00](https://github.com/leanprover-community/mathlib/commit/fa09f4933b17ff640797dd5accd44735689a1156)
feat(analysis/special_functions/*): prove that `exp` etc are measurable ([#4314](https://github.com/leanprover-community/mathlib/pull/#4314))

The modifications in `measure_theory/borel_space` are a part of the
proof of measurability of `x^y`, `x : ennreal`, `y : ℝ`, but this
proof depends on a refactoring of `arcsin` I'm going to PR soon.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-09-29T12:11:41+00:00](https://github.com/leanprover-community/mathlib/commit/744e0675b0a633109ca62fc00b37e346859a8f25)
feat(linear_algebra/dual): transpose of linear maps ([#4302](https://github.com/leanprover-community/mathlib/pull/#4302))

This is filling an easy hole from the undergrad curriculum page: the transpose of a linear map. We don't prove much about it but at least we make contact with matrix transpose.

Co-authored-by: Anne Baanen t.baanen@vu.nl and Johan Commelin  johan@commelin.net



Co-authored-by: Vierkantor <vierkantor@vierkantor.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-09-29T10:59:46+00:00](https://github.com/leanprover-community/mathlib/commit/a5a7a75333de822a9777977b9ec078d0d3a0df68)
feat(analysis/normed_space): define `normed_comm_ring` ([#4291](https://github.com/leanprover-community/mathlib/pull/#4291))

Also use section `variables`.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-09-29T09:53:22+00:00](https://github.com/leanprover-community/mathlib/commit/9962bfa7740330923efe39e9285b2218f7609935)
doc(data/monoid_algebra): fix typo ([#4317](https://github.com/leanprover-community/mathlib/pull/#4317))

### [2020-09-29T07:37:23+00:00](https://github.com/leanprover-community/mathlib/commit/22d034c14f7bf2bd75119ce683c6cc08ccf8697a)
feat(algebra/quandle): racks and quandles ([#4247](https://github.com/leanprover-community/mathlib/pull/#4247))

This adds the algebraic structures of racks and quandles, defines a few examples, and provides the universal enveloping group of a rack.

A rack is a set that acts on itself bijectively, and sort of the point is that the action `act : α → (α ≃ α)` satisfies
```
act (x ◃ y) = act x * act y * (act x)⁻¹
```
where `x ◃ y` is the usual rack/quandle notation for `act x y`.  (Note: racks do not use `has_scalar` because it's convenient having `x ◃⁻¹ y` for the inverse action of `x` on `y`.  Plus, associative racks have a trivial action.)

In knot theory, the universal enveloping group of the fundamental quandle is isomorphic to the fundamental group of the knot complement.  For oriented knots up to orientation-reversed mirror image, the fundamental quandle is a complete invariant, unlike the fundamental group, which fails to distinguish non-prime knots with chiral summands.

### [2020-09-29T04:58:27+00:00](https://github.com/leanprover-community/mathlib/commit/0bb5e5d94d688bdbde8615d924742315cbe19def)
feat(ring_theory/algebra_tower): Artin--Tate lemma ([#4282](https://github.com/leanprover-community/mathlib/pull/#4282))



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-09-29T03:32:06+00:00](https://github.com/leanprover-community/mathlib/commit/88187ba93ae789c783d5efae706640f6ee8cea27)
chore(topology/algebra/ordered): golf a proof ([#4311](https://github.com/leanprover-community/mathlib/pull/#4311))

* generalize `continuous_within_at_Ioi_iff_Ici` from `linear_order α`
  to `partial_order α`;
* base the proof on a more general fact:
  `continuous_within_at f (s \ {x}) x ↔ continuous_within_at f s x`.

### [2020-09-28T17:22:18+00:00](https://github.com/leanprover-community/mathlib/commit/89d8cc371944af963ac85816334b6c4491fc44de)
refactor(data/nat/basic): review API of `nat.find_greatest` ([#4274](https://github.com/leanprover-community/mathlib/pull/#4274))

Other changes:

* add `nat.find_eq_iff`;
* use weaker assumptions in `measurable_to_encodable` and `measurable_to_nat`;
* add `measurable_find`.

### [2020-09-28T15:25:45+00:00](https://github.com/leanprover-community/mathlib/commit/50dbce949c19d3b83763ce4f9d0b493843236ed2)
fix(data/list/basic): Ensure that ball_cons actually works as a simp lemma ([#4281](https://github.com/leanprover-community/mathlib/pull/#4281))

The LHS of the simp lemma `list.ball_cons` (aka `list.forall_mem_cons`) is not in simp-normal form, as `list.mem_cons_iff` rewrites it.
This adds a new simp lemma which is the form that `list.mem_cons_iff` rewrites it to.

### [2020-09-28T15:25:43+00:00](https://github.com/leanprover-community/mathlib/commit/40fb70176e9038f10465865b492be3bb3081dd87)
feat(data/mv_polynomial): some lemmas on constant_coeff and rename ([#4231](https://github.com/leanprover-community/mathlib/pull/#4231))

Snippet from the Witt project

Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-09-28T14:08:44+00:00](https://github.com/leanprover-community/mathlib/commit/8461a7d35ea38eec6cbe3e56b9ba34594aefbaa2)
feat(geometry/euclidean/monge_point): lemmas on altitudes and orthocenter ([#4179](https://github.com/leanprover-community/mathlib/pull/#4179))

Add more lemmas about altitudes of a simplex and the orthocenter of a
triangle.  Some of these are just building out basic API that's
mathematically trivial (e.g. showing that the altitude as defined is a
one-dimensional affine subspace and providing an explicit form of its
direction), while the results on the orthocenter have some geometrical
content that's part of the preparation for defining and proving basic
properties of orthocentric systems.

### [2020-09-28T11:21:24+00:00](https://github.com/leanprover-community/mathlib/commit/7bbb759f1058cf71676c51ad7803bd4d20659f40)
chore(algebra/free_algebra): Make the second type argument to lift and ι implicit ([#4299](https://github.com/leanprover-community/mathlib/pull/#4299))

These can always be inferred by the context, and just make things longer.
This is consistent with how the type argument for `id` is implicit.

The changes are applied to downstream uses too.

### [2020-09-28T11:21:22+00:00](https://github.com/leanprover-community/mathlib/commit/ad680c24c6a3a757da58a8ca278faa77839eeecf)
chore(algebra/ordered_ring): remove duplicate lemma ([#4295](https://github.com/leanprover-community/mathlib/pull/#4295))

`ordered_ring.two_pos` and `ordered_ring.zero_lt_two` had ended up identical. I kept `zero_lt_two`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-28T05:25:33+00:00](https://github.com/leanprover-community/mathlib/commit/3986e978fd3b370f0d280de6e0390d3ec0e051fc)
chore(algebra/lie): group Lie algebra files together in their own directory ([#4288](https://github.com/leanprover-community/mathlib/pull/#4288))

### [2020-09-28T05:25:30+00:00](https://github.com/leanprover-community/mathlib/commit/d77ac51cb84c1887c255f411cc9fe512e686aecf)
chore(data/fintype/card): review API ([#4287](https://github.com/leanprover-community/mathlib/pull/#4287))

API changes:

* `finset.filter_mem_eq_inter` now takes `[Π i, decidable (i ∈ t)]`; this way it works better
  with `classical`;
* add `finset.mem_compl` and `finset.coe_compl`;
* [DRY] drop `finset.prod_range_eq_prod_fin` and `finset.sum_range_eq_sum_fin`:
  use `fin.prod_univ_eq_prod_range` and `fin.sum_univ_eq_sum_range` instead;
* rename `finset.prod_equiv` to `equiv.prod_comp` to enable dot notation;
* add `fintype.prod_dite`: a specialized version of `finset.prod_dite`.

Also golf a proof in `analysis/normed_space/multilinear`

### [2020-09-28T05:25:28+00:00](https://github.com/leanprover-community/mathlib/commit/66c87c0d44f5495b9559df31c22d0a080c6dbf19)
feat(data/*/gcd): adds gcd, lcm of finsets and multisets ([#4217](https://github.com/leanprover-community/mathlib/pull/#4217))

Defines `finset.gcd`, `finset.lcm`, `multiset.gcd`, `multiset.lcm`
Proves some basic facts about those, analogous to those in `data.multiset.lattice` and `data.finset.lattice`




Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2020-09-28T04:20:18+00:00](https://github.com/leanprover-community/mathlib/commit/17618222368d4ea9ad757727ea3b4346e307a865)
chore(category_theory/limits): some limit lemmas ([#4238](https://github.com/leanprover-community/mathlib/pull/#4238))

A couple of lemmas characterising definitions which are already there (the first part of [#4163](https://github.com/leanprover-community/mathlib/pull/#4163))

### [2020-09-28T01:45:45+00:00](https://github.com/leanprover-community/mathlib/commit/d8726bf3a6ea1a6b3c211ee815803e814ecdb9e0)
feat(ring_theory/integral_closure): Explicitly define integral extensions ([#4164](https://github.com/leanprover-community/mathlib/pull/#4164))

* Defined `ring_hom.is_integral_elem` as a generalization of `is_integral` that takes a ring homomorphism rather than an algebra. The old version is is redefined to be `(algebra_map R A).is_integral_elem x`.

* Create predicates `ring_hom.is_integral` and `algebra.is_integral` representing when the entire extension is integral over the base ring.



Co-authored-by: Devon Tuma <dtumad@gmail.com>

### [2020-09-28T00:59:38+00:00](https://github.com/leanprover-community/mathlib/commit/2fa1bc6255dced87a62dbbf7e8b82f285f5b36d0)
chore(scripts): update nolints.txt ([#4293](https://github.com/leanprover-community/mathlib/pull/#4293))

I am happy to remove some nolints for you!

### [2020-09-27T20:45:01+00:00](https://github.com/leanprover-community/mathlib/commit/38977584f012d473343b583da870cdf21c099928)
feat(measure_theory): prove that more functions are measurable ([#4266](https://github.com/leanprover-community/mathlib/pull/#4266))

Mostly additions to `borel_space`.
Generalize `measurable_bsupr` and `measurable_binfi` to countable sets (instead of encodable underlying types). Use the lemma `countable_encodable` to get the original behavior.
Some cleanup in `borel_space`: more instances are in `variables`, and lemmas with the same instances a bit more.
One downside: there is a big import bump in `borel_space`, it currently imports `hahn_banach`. This is (only) used in `measurable_smul_const`. If someone has a proof sketch (in math) of `measurable_smul_const` that doesn't involve Hahn Banach (and that maybe generalizes `real` to a topological field or something), please let me know.

### [2020-09-27T18:31:22+00:00](https://github.com/leanprover-community/mathlib/commit/c322471067019f336b152203579343936c9bb888)
feat(undergrad.yaml): missing items ([#4290](https://github.com/leanprover-community/mathlib/pull/#4290))

### [2020-09-27T16:34:03+00:00](https://github.com/leanprover-community/mathlib/commit/2516d7d6d7ddda1f538eae6b4244f72b80a77ee8)
feat(topology): various additions ([#4264](https://github.com/leanprover-community/mathlib/pull/#4264))

Some if it is used for Fubini, but some of the results were rabbit holes I went into, which I never ended up using, but that still seem useful.

### [2020-09-27T08:58:36+00:00](https://github.com/leanprover-community/mathlib/commit/b6ce982d21eb3c536a11ac19f06e9fcaf10faf55)
refactor(*): create directory field_theory/finite ([#4212](https://github.com/leanprover-community/mathlib/pull/#4212))

facts on finite fields needed facts on polynomials
facts on polynomials wanted to use things about finite fields

this PR reorganises some of the imports

at the moment it also contributes a bit of new stuff,
and depends on two other PRs that add new stuff.

### [2020-09-27T07:48:56+00:00](https://github.com/leanprover-community/mathlib/commit/95ab6ac99a749f22020a382629617a6981ec00ae)
docs(overview): expand analysis ([#4284](https://github.com/leanprover-community/mathlib/pull/#4284))

A few additions to the "normed spaces", "convexity", "special functions" and "manifolds" sections of the overview.

### [2020-09-27T05:22:34+00:00](https://github.com/leanprover-community/mathlib/commit/a7e3435799345aa0b94e1ac6e67e1e507e6c6948)
chore(data/option): swap sides in `ne_none_iff_exists` ([#4285](https://github.com/leanprover-community/mathlib/pull/#4285))

* swap lhs and rhs of the equality in `option.ne_none_iff_exists`; the new order matches, e.g., the definition of `set.range` and `can_lift.prf`;
* the same in `with_one.ne_one_iff_exists` and `with_zero.ne_zero_iff_exists`;
* remove `option.ne_none_iff_exists'`;
* restore the original `option.ne_none_iff_exists` as `option.ne_none_iff_exists'`

### [2020-09-27T01:39:14+00:00](https://github.com/leanprover-community/mathlib/commit/5f6b07f83ca6530c1c71baf90f660d252f050e65)
chore(scripts): update nolints.txt ([#4283](https://github.com/leanprover-community/mathlib/pull/#4283))

I am happy to remove some nolints for you!

### [2020-09-27T00:33:40+00:00](https://github.com/leanprover-community/mathlib/commit/5c957ec8b74ec01bad07c0f0455c31aa1795bc9f)
feat(analysis/convex/integral): Jensen's inequality for integrals ([#4225](https://github.com/leanprover-community/mathlib/pull/#4225))

### [2020-09-26T20:43:15+00:00](https://github.com/leanprover-community/mathlib/commit/8600cb0827af7d7faa380f63676d8f1c424d258f)
feat(measure_space): define sigma finite measures ([#4265](https://github.com/leanprover-community/mathlib/pull/#4265))

They are defined as a `Prop`. The noncomputable "eliminator" is called `spanning_sets`, and satisfies monotonicity, even though that is not required to give a `sigma_finite` instance.

I define a helper function `accumulate s := ⋃ y ≤ x, s y`. This is helpful, to separate out some monotonicity proofs. It is in its own file purely for import reasons (there is no good file to put it that imports both `set.lattice` and `finset.basic`, the latter is used in 1 lemma).

### [2020-09-26T19:15:53+00:00](https://github.com/leanprover-community/mathlib/commit/253b120d59045b6eaec35781711be1d756f02fb3)
feat(field_theory): prove primitive element theorem ([#4153](https://github.com/leanprover-community/mathlib/pull/#4153))

Proof of the primitive element theorem. The main proof is in `field_theory/primitive_element.lean`. Some lemmas we used have been added to other files. We have also changed the notation for adjoining an element to a field to be easier to use.

Co-authored-by: Patrick Lutz <pglutz@berkeley.edu>

### [2020-09-26T19:15:50+00:00](https://github.com/leanprover-community/mathlib/commit/d0b594766906c0e3ca9082228fffd8c9e0ff5435)
feat(algebra/universal_enveloping_algebra): construction of universal enveloping algebra and its universal property ([#4041](https://github.com/leanprover-community/mathlib/pull/#4041))

## Main definitions

  * `universal_enveloping_algebra`
  * `universal_enveloping_algebra.algebra`
  * `universal_enveloping_algebra.lift`
  * `universal_enveloping_algebra.ι_comp_lift`
  * `universal_enveloping_algebra.lift_unique`
  * `universal_enveloping_algebra.hom_ext`

Co-authored-by: Eric Wieser <wieser.eric@gmail.com>

### [2020-09-26T17:53:17+00:00](https://github.com/leanprover-community/mathlib/commit/3ebee15fb7894baaaa71f7da021a39230cd877f8)
feat(src/data/polynomial/ring_division.lean): eq_zero_of_infinite_is_root ([#4280](https://github.com/leanprover-community/mathlib/pull/#4280))

add a lemma stating that a polynomial is zero if it has infinitely many roots.

### [2020-09-26T17:53:15+00:00](https://github.com/leanprover-community/mathlib/commit/376ab30ff146e1555fee3da27d9e5aa234f23868)
feat(data/nat/unique_factorization): a `unique_factorization_monoid` instance on N ([#4194](https://github.com/leanprover-community/mathlib/pull/#4194))

Provides a `unique_factorization_monoid` instance on `nat`
Shows its equivalence to `nat.factors`, which is list-valued



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2020-09-26T15:49:19+00:00](https://github.com/leanprover-community/mathlib/commit/88e198a1ec98f2c5810fc1789ec4a130962b73d1)
feat(data/multiset): count repeat lemma ([#4278](https://github.com/leanprover-community/mathlib/pull/#4278))

A small lemma and renaming (of `count_repeat` to `count_repeat_self`) to count elements in a `multiset.repeat`. One part of [#4259](https://github.com/leanprover-community/mathlib/pull/#4259).

### [2020-09-26T15:49:16+00:00](https://github.com/leanprover-community/mathlib/commit/8e8380581db15b0629cd559954cd4a8b1549d644)
chore(analysis/special_functions/pow): +2 lemmas about `nnreal.rpow` ([#4272](https://github.com/leanprover-community/mathlib/pull/#4272))

`λ x, x^y` is continuous in more cases than `λ p, p.1^p.2`.

### [2020-09-26T15:49:14+00:00](https://github.com/leanprover-community/mathlib/commit/31774933dccd807e27d95677ea0a9aeba0586745)
feat(ring_theory/algebra, algebra/module): Add add_comm_monoid_to_add_comm_group and semiring_to_ring ([#4252](https://github.com/leanprover-community/mathlib/pull/#4252))

### [2020-09-26T15:49:13+00:00](https://github.com/leanprover-community/mathlib/commit/7c0c16ca1eb178261263d9e4527c3d13ce696f87)
feat(data/list/basic): Add lemmas about inits and tails ([#4222](https://github.com/leanprover-community/mathlib/pull/#4222))

### [2020-09-26T13:57:50+00:00](https://github.com/leanprover-community/mathlib/commit/bc3a6cfab662c3409f04af51ca2047999bc0b338)
chore(data/list/basic): Make it clear that `forall_mem_cons` and `ball_cons` are synonyms ([#4279](https://github.com/leanprover-community/mathlib/pull/#4279))

### [2020-09-26T12:12:06+00:00](https://github.com/leanprover-community/mathlib/commit/9b09f906701734a8d5dfa7c062209646d912c72f)
feat(ennreal): some lemmas about ennreal ([#4262](https://github.com/leanprover-community/mathlib/pull/#4262))

Also some lemmas about norms in (e)nnreal.

### [2020-09-26T10:16:14+00:00](https://github.com/leanprover-community/mathlib/commit/280a42e15f3a4fce87d084bd16dd01722c27c51a)
chore(topology/instances/nnreal): reuse `order_topology_of_ord_connected` ([#4277](https://github.com/leanprover-community/mathlib/pull/#4277))

### [2020-09-26T10:16:12+00:00](https://github.com/leanprover-community/mathlib/commit/b8b6f5ddac9aaa8d78fe54e0c1f20ff3d26e2574)
chore(order/filter/archimedean): move&generalize a few lemmas ([#4275](https://github.com/leanprover-community/mathlib/pull/#4275))

* `tendsto_coe_nat_real_at_top_iff`: `tendsto_coe_nat_at_top_iff`,
  generalize to a linear ordered archimedean semiring;
* `tendsto_coe_nat_real_at_top_at_top`: `tendsto_coe_nat_at_top_at_top`,
  generalize to a linear ordered archimedean semiring;
* `tendsto_coe_int_real_at_top_iff`: `tendsto_coe_int_at_top_iff`,
  generalize to a linear ordered archimedean ring;
* `tendsto_coe_int_real_at_top_at_top`: `tendsto_coe_int_at_top_at_top`,
  generalize to a linear ordered archimedean ring;
* add versions for `ℚ`;
* golf the proof of `tendsto_at_top_embedding`.

### [2020-09-26T10:16:10+00:00](https://github.com/leanprover-community/mathlib/commit/aa11589ac92ef5c805188ab73d1b826a2828873d)
feat(algebra/homology, category_theory/abelian): expand API on exactness ([#4256](https://github.com/leanprover-community/mathlib/pull/#4256))

### [2020-09-26T10:16:08+00:00](https://github.com/leanprover-community/mathlib/commit/61897aefb9e59ea74b9173a32da1db04c83be021)
feat(data/set/intervals/infinite): intervals are infinite ([#4241](https://github.com/leanprover-community/mathlib/pull/#4241))

### [2020-09-26T10:16:06+00:00](https://github.com/leanprover-community/mathlib/commit/e3cc06e0ba3378d6b47d1aca7c33f0b4dda561e7)
feat(algebraic_geometry/presheafed_space): gluing presheaves ([#4198](https://github.com/leanprover-community/mathlib/pull/#4198))

#### `PresheafedSpace C` has colimits.

If `C` has limits, then the category `PresheafedSpace C` has colimits,
and the forgetful functor to `Top` preserves these colimits.

When restricted to a diagram where the underlying continuous maps are open embeddings,
this says that we can glue presheaved spaces.

Given a diagram `F : J ⥤ PresheafedSpace C`,
we first build the colimit of the underlying topological spaces,
as `colimit (F ⋙ PresheafedSpace.forget C)`. Call that colimit space `X`.

Our strategy is to push each of the presheaves `F.obj j`
forward along the continuous map `colimit.ι (F ⋙ PresheafedSpace.forget C) j` to `X`.
Since pushforward is functorial, we obtain a diagram `J ⥤ (presheaf C X)ᵒᵖ`
of presheaves on a single space `X`.
(Note that the arrows now point the other direction,
because this is the way `PresheafedSpace C` is set up.)

The limit of this diagram then constitutes the colimit presheaf.




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-26T07:58:50+00:00](https://github.com/leanprover-community/mathlib/commit/c2f896fec2dea503c961f87d82a92d6e1976a815)
feat(data/set): add some lemmas ([#4263](https://github.com/leanprover-community/mathlib/pull/#4263))

Some lemmas about sets, mostly involving disjointness
I also sneaked in the lemma `(λ x : α, y) = const α y` which is useful to rewrite with.

### [2020-09-26T07:58:48+00:00](https://github.com/leanprover-community/mathlib/commit/18927246c1498f258ff499bea8017850fee0f414)
feat(data/matrix): definition of `block_diagonal` ([#4257](https://github.com/leanprover-community/mathlib/pull/#4257))

This PR defines `matrix.block_diagonal : (o -> matrix m n R) -> matrix (m × o) (n × o) R`. The choice to put `o` on the right hand side of the product will help with relating this to `is_basis.smul`, but it won't be a huge hassle to write `matrix (o × m) (o × m) R` instead if you prefer.

I also tried making `m` and `n` depend on `o`, giving `block_diagonal M : matrix (Σ k : o, m k) (Σ k : o, n k) R`, but that turned out to be a shotcut to `eq.rec` hell.

### [2020-09-26T06:09:45+00:00](https://github.com/leanprover-community/mathlib/commit/7aef15059ff748da30fecb36c712761674333fc7)
feat(category_theory): sieves ([#3909](https://github.com/leanprover-community/mathlib/pull/#3909))

Define sieves, from my topos project. Co-authored by @EdAyers. 

These definitions and lemmas have been battle-tested quite a bit so I'm reasonably confident they're workable.

### [2020-09-26T02:31:08+00:00](https://github.com/leanprover-community/mathlib/commit/6289adfc602e3c0fa0606449f275fd7c9cba6b56)
fix(order/bounded_lattice): fix some misleading theorem names ([#4271](https://github.com/leanprover-community/mathlib/pull/#4271))

### [2020-09-26T01:49:24+00:00](https://github.com/leanprover-community/mathlib/commit/d76f19f3f7e81f4d7478fb2cfa55a73011677572)
feat(overview): expand measure theory ([#4258](https://github.com/leanprover-community/mathlib/pull/#4258))

### [2020-09-26T00:58:04+00:00](https://github.com/leanprover-community/mathlib/commit/4b3570f34c8961407361bc7db36dd3bf4d2a6e9a)
chore(scripts): update nolints.txt ([#4270](https://github.com/leanprover-community/mathlib/pull/#4270))

I am happy to remove some nolints for you!

### [2020-09-25T19:15:25+00:00](https://github.com/leanprover-community/mathlib/commit/85bbf8a5e84dfe26bf9ef48e5124c38a0c43abe7)
feat(data/fin): `zero_eq_one_iff` and `one_eq_zero_iff` ([#4255](https://github.com/leanprover-community/mathlib/pull/#4255))

Just a pair of little lemmas that were handy to me. The main benefit is that `simp` can now prove `if (0 : fin 2) = 1 then 1 else 0 = 0`, which should help with calculations using `data.matrix.notation`.

### [2020-09-25T16:57:57+00:00](https://github.com/leanprover-community/mathlib/commit/3a591e8b693886dd48106faadbeac1136e92cd77)
chore(data/list/defs): mark pairwise.nil simp to match chain.nil ([#4254](https://github.com/leanprover-community/mathlib/pull/#4254))

### [2020-09-25T16:57:55+00:00](https://github.com/leanprover-community/mathlib/commit/5e8d5274eebe3aac1a5e5e1ec59cbd5da7e5fe11)
feat(ring_theory/witt_vector/witt_polynomial): definition and basic properties ([#4236](https://github.com/leanprover-community/mathlib/pull/#4236))

From the Witt vector project

This is the first of a dozen of files on Witt vectors. This file contains
the definition of the so-called Witt polynomials.

Follow-up PRs will contain:

* An important structural result on the Witt polynomials
* The definition of the ring of Witt vectors (including the ring structure)
* Several common operations on Witt vectors
* Identities between thes operations
* A comparison isomorphism between the ring of Witt vectors over F_p and
the ring of p-adic integers Z_p.

Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-09-25T14:53:58+00:00](https://github.com/leanprover-community/mathlib/commit/565efec29c97cd6d523fb959379de8e41cfcec04)
chore(data/real/ennreal): 3 lemmas stating `∞ / b = ∞` ([#4248](https://github.com/leanprover-community/mathlib/pull/#4248))

### [2020-09-25T14:53:56+00:00](https://github.com/leanprover-community/mathlib/commit/10299743be83622b578ad4dc0e772be404460e35)
feat(*): finite rings with char = card = n are isomorphic to zmod n ([#4234](https://github.com/leanprover-community/mathlib/pull/#4234))

From the Witt vector project

I've made use of the opportunity to remove some unused arguments,
and to clean up some code by using namespacing and such.

Co-authored-by: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-09-25T14:53:54+00:00](https://github.com/leanprover-community/mathlib/commit/aee16bd6713ad5a47f465e28b91e4aacca408d63)
feat(data/mv_polynomial/basic): counit ([#4205](https://github.com/leanprover-community/mathlib/pull/#4205))

From the Witt vector project

### [2020-09-25T14:53:52+00:00](https://github.com/leanprover-community/mathlib/commit/5deb96d564cb1a3dba8f309828c0b14b83c057a4)
feat(data/mv_polynomial/funext): function extensionality for polynomials ([#4196](https://github.com/leanprover-community/mathlib/pull/#4196))

over infinite integral domains

### [2020-09-25T12:54:20+00:00](https://github.com/leanprover-community/mathlib/commit/680f877108074901a88bcb5b7cf595f2c7951448)
feat(data/rat/basic): coe_int_div, coe_nat_div ([#4233](https://github.com/leanprover-community/mathlib/pull/#4233))

Snippet from the Witt project

### [2020-09-25T12:54:18+00:00](https://github.com/leanprover-community/mathlib/commit/9591d4372964e9cb27ff04adeb1a9bc784430ee5)
feat(data/*): lemmas on division of polynomials by constant polynomials ([#4206](https://github.com/leanprover-community/mathlib/pull/#4206))

From the Witt vector project
We provide a specialized version for polynomials over zmod n,
which turns out to be convenient in practice.


Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-09-25T12:54:16+00:00](https://github.com/leanprover-community/mathlib/commit/c7d818cdbbeaacf9f094ebc23431541efe46ad31)
feat(data/mv_polynomial/variables): vars_bind₁ and friends ([#4204](https://github.com/leanprover-community/mathlib/pull/#4204))

From the Witt vector project

Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-09-25T10:07:16+00:00](https://github.com/leanprover-community/mathlib/commit/2313602e1476ba4171f765bae30386b039a9ae48)
feat(order/bounded_lattice): custom recursors for with_bot/with_top ([#4245](https://github.com/leanprover-community/mathlib/pull/#4245))

### [2020-09-25T10:07:14+00:00](https://github.com/leanprover-community/mathlib/commit/f43bd45eb44999328f6abcf249f8e86f13ef964c)
fix(tactic/lint/simp): only head-beta reduce, don't whnf ([#4237](https://github.com/leanprover-community/mathlib/pull/#4237))

This is necessary to accept simp lemmas like `injective reverse`.

### [2020-09-25T10:07:12+00:00](https://github.com/leanprover-community/mathlib/commit/5da451b4c96b4c2e122c0325a7fce17d62ee46c6)
feat(data/mv_polynomial/expand): replace variables by a power ([#4197](https://github.com/leanprover-community/mathlib/pull/#4197))

From the Witt vectors project.

Co-authored-by: Robert. Y. Lewis <rob.y.lewis@gmail.com>

### [2020-09-25T09:07:07+00:00](https://github.com/leanprover-community/mathlib/commit/b6154d901cf60a36d95ed93de2464bc3e63cc8b9)
feat(category_theory/limits): small lemmas ([#4251](https://github.com/leanprover-community/mathlib/pull/#4251))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-25T08:21:16+00:00](https://github.com/leanprover-community/mathlib/commit/40f137097daf5540c046ea02337b62a44b7df74b)
chore(measure_theory/bochner_integration): rename/add lemmas, fix docstring ([#4249](https://github.com/leanprover-community/mathlib/pull/#4249))

* add `integral_nonneg` assuming `0 ≤ f`;
* rename `integral_nonpos_of_nonpos_ae` to `integral_nonpos_of_ae`;
* add `integral_nonpos` assuming `f ≤ 0`;
* rename `integral_mono` to `integral_mono_ae`;
* add `integral_mono` assuming `f ≤ g`;
* (partially?) fix module docstring.

### [2020-09-25T06:57:20+00:00](https://github.com/leanprover-community/mathlib/commit/143c074c069c8f071f49809b32df62275bc3b3ce)
feat(category_theory/cofinal): cofinal functors ([#4218](https://github.com/leanprover-community/mathlib/pull/#4218))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-25T05:46:05+00:00](https://github.com/leanprover-community/mathlib/commit/dda82fcda052d511fa4ba4c4ca67438147a9bc1b)
chore(*): add missing copyright, cleanup imports ([#4229](https://github.com/leanprover-community/mathlib/pull/#4229))

Add missing copyright, avoid use of `import tactic`, and put each `import` statement on a separate line, for easier analysis via grep.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-25T00:12:04+00:00](https://github.com/leanprover-community/mathlib/commit/f9a667d32f4d769eb21b3a2febb288ca504af8dd)
refactor(algebra/group_power, data/nat/basic): remove redundant lemmas ([#4243](https://github.com/leanprover-community/mathlib/pull/#4243))

This removes lemmas about `pow` on `nat` which are redundant
with more general versions in the root namespace.
One notable removal is `nat.pow_succ`; use `pow_succ'` instead.

In order that the general versions are available already in `data.nat.basic`,
many lemmas from `algebra.group_power.lemmas` have been moved to
`algebra.group_power.basic` (basically as many as possible without adding imports).

### [2020-09-24T22:51:18+00:00](https://github.com/leanprover-community/mathlib/commit/46bf8ca0d58f920ea2470da1fa8e6cf4fc87b2c0)
fix(topology/path_connected): avoid a slow use of `continuity` ([#4244](https://github.com/leanprover-community/mathlib/pull/#4244))

This corrects the timeout experienced by @Nicknamen in [#3641](https://github.com/leanprover-community/mathlib/pull/#3641). See https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.233641/near/211107487

### [2020-09-24T20:51:05+00:00](https://github.com/leanprover-community/mathlib/commit/675f5d47509772fe311c5a0953e4f5dbb498c2d2)
feat(algebra/char_p): nontrivial_of_char_ne_one ([#4232](https://github.com/leanprover-community/mathlib/pull/#4232))

Also renames `false_of_nonzero_of_char_one` to `false_of_nontrivial_of_char_one`

Snippet from the Witt project

Co-authored-by: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-09-24T19:43:34+00:00](https://github.com/leanprover-community/mathlib/commit/5eedf3275e3a61d272105a306609a26416051a62)
docs(data/complex/exponential): docstring for de Moivre ([#4242](https://github.com/leanprover-community/mathlib/pull/#4242))

### [2020-09-24T17:38:37+00:00](https://github.com/leanprover-community/mathlib/commit/02ca5e28d937294173b801bee0e11afa3434ecb1)
fix(.github/workflows/add_label_from_review.yml): fix label removal ([#4240](https://github.com/leanprover-community/mathlib/pull/#4240))

The API calls were referencing the wrong field, see for example https://github.com/leanprover-community/mathlib/runs/1161014126?check_suite_focus=true#step:7:3

### [2020-09-24T17:38:35+00:00](https://github.com/leanprover-community/mathlib/commit/d6707462a34c1b56aaae0d342b81adcff9ff1d82)
feat(category_theory/monad/algebra): Add faithful instances.  ([#4227](https://github.com/leanprover-community/mathlib/pull/#4227))

Adds a `faithful` instance for the forgetful functors from the Eilenberg Moore category associated to a (co)monad.

### [2020-09-24T17:38:32+00:00](https://github.com/leanprover-community/mathlib/commit/5c31dea270c6730470eba2466cf5a0a51ffb7ec4)
feat(field_theory): intermediate fields ([#4181](https://github.com/leanprover-community/mathlib/pull/#4181))

Define `intermediate_field K L` as a structure extending `subalgebra K L` and `subfield L`.

This definition required some changes in `subalgebra`, which I added in [#4180](https://github.com/leanprover-community/mathlib/pull/#4180).



Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-09-24T17:38:30+00:00](https://github.com/leanprover-community/mathlib/commit/e23b97e52755aae1f380b3b89d1eb6ba32179599)
feat(ring_theory/polynomial): decomposing the kernel of an endomorphism polynomial ([#4174](https://github.com/leanprover-community/mathlib/pull/#4174))

### [2020-09-24T16:49:35+00:00](https://github.com/leanprover-community/mathlib/commit/03894dff30847d0abff35807dcfbb62124a12548)
feat(category_theory/limits/creates): Add has_(co)limit defs ([#4239](https://github.com/leanprover-community/mathlib/pull/#4239))

This PR adds four `def`s:
1. `has_limits_of_shape_of_has_limits_of_shape_creates_limits_of_shape` 
2. `has_limits_of_has_limits_creates_limits`
3. `has_colimits_of_shape_of_has_colimits_of_shape_creates_colimits_of_shape`
4. `has_colimits_of_has_colimits_creates_colimits`

These show that a category `C` has (co)limits (of a given shape) given a functor `F : C ⥤ D` which creates (co)limits (of the given shape) where `D` has (co)limits (of the given shape).

See the associated zulip discussion: 
https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/has_limits.20of.20has_limits.20and.20creates_limits/near/211083395

### [2020-09-24T14:02:39+00:00](https://github.com/leanprover-community/mathlib/commit/03775fbb7031e6b6c8ae492a105ffdb0762e6b7a)
chore(data/mv_polynomial): aeval_rename -> aeval_id_rename ([#4230](https://github.com/leanprover-community/mathlib/pull/#4230))

`aeval_rename` was not general enough, so it is renamed to
`aeval_id_rename`.

Also: state and prove the more general version of `aeval_rename`.

### [2020-09-24T10:39:14+00:00](https://github.com/leanprover-community/mathlib/commit/3484e8be95a53036a8c2d12410ca8f8963e1c48e)
fix(data/mv_polynomial): fix doc strings ([#4219](https://github.com/leanprover-community/mathlib/pull/#4219))

### [2020-09-24T10:39:13+00:00](https://github.com/leanprover-community/mathlib/commit/f0713cb9dc8bfd3f77ad3d7dc2d3b7c841d7e995)
refactor(measure_theory/simple_func_dense): split monolithic proof ([#4199](https://github.com/leanprover-community/mathlib/pull/#4199))

In the new proof the sequence of approximating functions has a simpler description: `N`-th function
sends `x` to the point `e k` which is the nearest to `f x` among the points `e 0`, ..., `e N`, where `e n`
is a dense sequence such that `e 0 = 0`.

### [2020-09-24T08:37:51+00:00](https://github.com/leanprover-community/mathlib/commit/ba8fa0f12526a8b84b1dcd61f1302c0c77b532c1)
feat(logic/embedding): use simps ([#4169](https://github.com/leanprover-community/mathlib/pull/#4169))

Some lemmas are slightly reformulated, and have a worse name. But they are (almost) never typed explicitly, since they are simp lemmas (even the occurrences in other files probably came from `squeeze_simp`).



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-09-24T06:54:53+00:00](https://github.com/leanprover-community/mathlib/commit/5e934cd913e1917f7462544fa8d6d6073a0b0dbc)
chore(*): cleanup imports, split off data/finset/preimage from data/set/finite ([#4221](https://github.com/leanprover-community/mathlib/pull/#4221))

Mostly this consists of moving some content from `data.set.finite` to `data.finset.preimage`, in order to reduce imports in `data.set.finite`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-24T05:52:22+00:00](https://github.com/leanprover-community/mathlib/commit/ed07cac5a23d891355eb2280781aba3a436d713b)
feat(data/mv_polynomial/rename): coeff_rename ([#4203](https://github.com/leanprover-community/mathlib/pull/#4203))

Also, use the opportunity to use R as variable for the coefficient ring
throughout the file.

### [2020-09-24T03:33:52+00:00](https://github.com/leanprover-community/mathlib/commit/ef18740b7b57fbd1d017ef9276d0cc05af57dfbd)
feat(linear_algebra/eigenspace): generalized eigenvectors span the entire space ([#4111](https://github.com/leanprover-community/mathlib/pull/#4111))

### [2020-09-24T02:35:58+00:00](https://github.com/leanprover-community/mathlib/commit/4e414458e4b36361c31ec162e9e2b149e39c50c8)
chore(scripts): update nolints.txt ([#4226](https://github.com/leanprover-community/mathlib/pull/#4226))

I am happy to remove some nolints for you!

### [2020-09-24T02:35:57+00:00](https://github.com/leanprover-community/mathlib/commit/6b35819bea644955315455874d3d81ef706644b0)
refactor(category_theory): make `has_image` and friends a Prop ([#4195](https://github.com/leanprover-community/mathlib/pull/#4195))

This is an obious follow-up to [#3995](https://github.com/leanprover-community/mathlib/pull/#3995). It changes the following declarations to a `Prop`:
* `arrow.has_lift`
* `strong_epi`
* `has_image`/`has_images`
* `has_strong_epi_mono_factorisations`
* `has_image_map`/`has_image_maps`

The big win is that there is now precisely one notion of exactness in every category with kernels and images, not a (different but provably equal) notion of exactness per `has_kernels` and `has_images` instance like in the pre-[#3995](https://github.com/leanprover-community/mathlib/pull/#3995) era.

### [2020-09-24T00:15:43+00:00](https://github.com/leanprover-community/mathlib/commit/96e81faa5b8b30efac9fe2431c0d4f3a07274e9d)
feat(data/(lazy_)list): various lemmas and definitions ([#4172](https://github.com/leanprover-community/mathlib/pull/#4172))

### [2020-09-23T20:55:39+00:00](https://github.com/leanprover-community/mathlib/commit/69279580f193b8b2ce1b44e972e41c5063ff93c7)
feat(data/real/irrational): add a different formulation for irrationality ([#4213](https://github.com/leanprover-community/mathlib/pull/#4213))



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-09-23T20:55:36+00:00](https://github.com/leanprover-community/mathlib/commit/9aeffa83a7f8cfad0df6b7179e937d95f37c338e)
feat(geometry/manifold): bundled smooth map ([#3904](https://github.com/leanprover-community/mathlib/pull/#3904))

### [2020-09-23T18:48:10+00:00](https://github.com/leanprover-community/mathlib/commit/72e5b9fc04c3eef1bac2ba66bb54b3f2f69890ee)
feat(measure_theory): ext lemmas for measures ([#3895](https://github.com/leanprover-community/mathlib/pull/#3895))

Add class `sigma_finite`.
Also some cleanup.
Rename `measurable_space.is_measurable` -> `measurable_space.is_measurable'`. This is to avoid name clash with `_root_.is_measurable`, which should almost always be used instead.
define `is_pi_system`.

### [2020-09-23T16:56:11+00:00](https://github.com/leanprover-community/mathlib/commit/7cf8fa629b389ac6e6615f0361225c515272fe98)
fix(archive/100-thms): update link to 100.yaml in README ([#4224](https://github.com/leanprover-community/mathlib/pull/#4224))

### [2020-09-23T11:10:37+00:00](https://github.com/leanprover-community/mathlib/commit/ecd889a5da92e63e56436b2276c1f686378a8f1d)
feat(data/polynomial/*): higher order derivative ([#4187](https://github.com/leanprover-community/mathlib/pull/#4187))

### [2020-09-23T09:47:01+00:00](https://github.com/leanprover-community/mathlib/commit/5ab7eb0f2ff79a69ad60cac4abcf0853936d5522)
feat(analysis/special_functions/trigonometric): continuity and differentiability of arctan ([#4138](https://github.com/leanprover-community/mathlib/pull/#4138))

Added lemmas for continuity and differentiability of arctan, as well as various supporting limit lemmas.



Co-authored-by: Benjamin Davidson <68528197+benjamindavidson@users.noreply.github.com>
Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2020-09-23T07:33:15+00:00](https://github.com/leanprover-community/mathlib/commit/d7aada16d651b33bdafd3a50fe8ab1302fbeabdb)
doc(data/list/tfae): Add skeletal docstring ([#4220](https://github.com/leanprover-community/mathlib/pull/#4220))

### [2020-09-23T01:02:05+00:00](https://github.com/leanprover-community/mathlib/commit/937199ade74881a91de34a467618e85be6930465)
chore(scripts): update nolints.txt ([#4216](https://github.com/leanprover-community/mathlib/pull/#4216))

I am happy to remove some nolints for you!

### [2020-09-22T19:08:32+00:00](https://github.com/leanprover-community/mathlib/commit/392d3e376b44265ef2dedbd92231d3177acc1fd0)
feat(archive/imo/*): add IMO 1972 B2, move IMOs to a subdirectory ([#4209](https://github.com/leanprover-community/mathlib/pull/#4209))


Co-authored-by: Ruben Van de Velde.



Co-authored-by: Stanislas Polu <spolu@openai.com>

### [2020-09-22T17:01:30+00:00](https://github.com/leanprover-community/mathlib/commit/994c31d02ffbd3d09aab6455f15f3e2e215d77a1)
feat(ring_theory/ideal/basic): mem_bot ([#4211](https://github.com/leanprover-community/mathlib/pull/#4211))

Snippet from the Witt project

Co-Authored-By: Rob Y. Lewis <rob.y.lewis@gmail.com>

### [2020-09-22T14:52:30+00:00](https://github.com/leanprover-community/mathlib/commit/f2458d6fcf170fd42567f93c96d1fc436ac754de)
chore(data/mv_polynomial): Rename variables ([#4208](https://github.com/leanprover-community/mathlib/pull/#4208))

I renamed `α` to `R` throughout. I also changed the `\sigma` to `σ` in `basic.lean`, see leanprover-community/doc-gen[#62](https://github.com/leanprover-community/mathlib/pull/#62)

### [2020-09-22T12:57:23+00:00](https://github.com/leanprover-community/mathlib/commit/516b0dfdc60cf9bfae51df47145b62cdfd23324c)
refactor(ring_theory/algebra): re-bundle `subalgebra` ([#4180](https://github.com/leanprover-community/mathlib/pull/#4180))

This PR makes `subalgebra` extend `subsemiring` instead of using `subsemiring` as a field in its definition. The refactor is needed because `intermediate_field` should simultaneously extend `subalgebra` and `subfield`, and so the type of the `carrier` fields should match.

I added some copies of definitions that use `subring` instead of `is_subring` if I needed to change these definitions anyway.

### [2020-09-22T11:28:53+00:00](https://github.com/leanprover-community/mathlib/commit/d09ef4ab5946f29c090ca345b2ea71bd4ae50ae4)
feat(category_theory/monoidal): transport monoidal structure along an equivalence ([#4123](https://github.com/leanprover-community/mathlib/pull/#4123))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-22T11:28:51+00:00](https://github.com/leanprover-community/mathlib/commit/caffd024976b1fa42fa475aac5685eb396efc886)
feat(data/polynomial/degree/trailing_degree): basic definitions and properties ([#4113](https://github.com/leanprover-community/mathlib/pull/#4113))

Adds trailing_degree, trailing_nat_degree, trailing_coeff and various lemmas add functionality to work with trailing coefficients



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-09-22T10:04:16+00:00](https://github.com/leanprover-community/mathlib/commit/58d0bfcc8bdac043a0ed57bd19e748220ad7f788)
feat(topology/sheaves): alternate formulation of the sheaf condition ([#4190](https://github.com/leanprover-community/mathlib/pull/#4190))

Currently the sheaf condition is stated as it often is in textbooks, e.g. 
https://stacks.math.columbia.edu/tag/0072. That is, it is about an equalizer of the two maps `∏ F.obj (U i) ⟶ ∏ F.obj (U i) ⊓ (U j)`.

This PR adds an equivalent formulation, saying that `F.obj (supr U)` (with its natural projection maps) is the limit of the diagram consisting of the `F.obj (U i)` and the `F.obj (U i ⊓ U j)`. 

I'd like to add further reformulations in subsequent PRs, in particular the nice one I saw in Lurie's SAG, just saying that `F.obj (supr U)` is the limit over the diagram of all `F.obj V` where `V` is an open subset of *some* `U i`. This version is actually much nicer to formalise, and I'm hoping we can translate over quite a lot of what we've already done about the sheaf condition to that version 

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-22T08:41:20+00:00](https://github.com/leanprover-community/mathlib/commit/b4641efe629771968e0fe99000c3b708376f62f7)
feat(l1_space): add measurability to integrable ([#4170](https://github.com/leanprover-community/mathlib/pull/#4170))

This PR defines `integrable` such that `integrable` implies `measurable`. The old version is called `has_finite_integral`.

This allows us to drop *many* measurability conditions from lemmas that also require integrability.
There are some lemmas that have extra measurability conditions, if it has `integrable` as conclusion without corresponding `measurable` hypothesis.
There are many results that require an additional `[measurable_space E]` hypothesis, and some that require `[borel_space E]` or `[second_countable_space E]` (usually when using that addition is measurable).

### [2020-09-22T06:16:42+00:00](https://github.com/leanprover-community/mathlib/commit/2ae199f10b4aba9018287833425efb25bb5a75c8)
refactor(ring_theory/unique_factorization_domain): completes the refactor of `unique_factorization_domain` ([#4156](https://github.com/leanprover-community/mathlib/pull/#4156))

Refactors `unique_factorization_domain` to `unique_factorization_monoid`
`unique_factorization_monoid` is a predicate
`unique_factorization_monoid` now requires no additive/subtractive structure




Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2020-09-22T00:54:05+00:00](https://github.com/leanprover-community/mathlib/commit/480c92cdfe1cf3c2d083abded87e82162e8814f4)
chore(scripts): update nolints.txt ([#4207](https://github.com/leanprover-community/mathlib/pull/#4207))

I am happy to remove some nolints for you!

### [2020-09-21T18:45:31+00:00](https://github.com/leanprover-community/mathlib/commit/b91df5512bae9b7cb54840478c5d1b8827cc7505)
chore(topology/algebra/module): make `topological_module` an abbreviation ([#4200](https://github.com/leanprover-community/mathlib/pull/#4200))

Also prove that a `topological_semiring` is a `topological_semimodule`.

### [2020-09-21T16:27:12+00:00](https://github.com/leanprover-community/mathlib/commit/92c012574081ec932b7e4f0bf7678612110ce6a6)
chore(data/nat/digits): use nat namespace ([#4201](https://github.com/leanprover-community/mathlib/pull/#4201))



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-09-21T13:06:58+00:00](https://github.com/leanprover-community/mathlib/commit/4a8c38e466819a47573ac40ef02edf393fa1ae0d)
chore(category_theory/limits/lattice): cleanup ([#4191](https://github.com/leanprover-community/mathlib/pull/#4191))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-21T10:21:23+00:00](https://github.com/leanprover-community/mathlib/commit/cd4a91f7f099f701855c6535e991d666962ffff2)
fix(scripts/mk_all): macOS compatibility fix ([#4148](https://github.com/leanprover-community/mathlib/pull/#4148))

`readlink -f` doesn't work macOS unfortunately - there are alternatives but I think it's probably safe to remove it altogether? This assumes `mk_all.sh` isn't a symlink but I can't think of a reason why it should be - and `rm_all.sh` uses `dirname "${BASH_SOURCE[0]}"` directly 🙂

### [2020-09-21T08:37:54+00:00](https://github.com/leanprover-community/mathlib/commit/e483298ae582a05eeb2dd8c855ec10b5129fb71d)
feat(ring_theory/unique_factorization_domain): API for coprime, coprime factor of a power is a power ([#4049](https://github.com/leanprover-community/mathlib/pull/#4049))



Co-authored-by: paulvanwamelen <30371019+paulvanwamelen@users.noreply.github.com>

### [2020-09-21T06:08:33+00:00](https://github.com/leanprover-community/mathlib/commit/40f582b9a81564621b9d3b5224c227d7360a3e1a)
feat(data/*/nat_antidiagonal): induction lemmas about antidiagonals ([#4193](https://github.com/leanprover-community/mathlib/pull/#4193))

Adds a `nat.antidiagonal_succ` lemma for `list`, `multiset`, and `finset`, useful for proving facts about power series derivatives



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2020-09-21T03:23:12+00:00](https://github.com/leanprover-community/mathlib/commit/d8e7bb5668034cc8743a8a7baf2028e536d0d96e)
feat(tactic/tauto): optional closer tactic for `tauto` ([#4189](https://github.com/leanprover-community/mathlib/pull/#4189))

`tauto` sometimes fails on easy subgoals; instead of backtracking
and discarding the work, the user can now supply a closer tactic
to the remaining goals, such as `cc`, `simp`, or `linarith`.

this also wraps `tauto` in a `focus1`, which allows for better
error messages.




Co-authored-by: Jesse Michael Han <39395247+jesse-michael-han@users.noreply.github.com>

### [2020-09-20T23:55:02+00:00](https://github.com/leanprover-community/mathlib/commit/f77d5d6fb942ce3bfc67a79b380884ce5e048cc5)
feat(data/finset): add lemma for empty filter ([#4188](https://github.com/leanprover-community/mathlib/pull/#4188))

A little lemma, analogous to `filter_true_of_mem` to make it convenient to reduce a filter which always fails.

### [2020-09-20T21:53:36+00:00](https://github.com/leanprover-community/mathlib/commit/db9842c80c004d49280616d945b3276093f8225c)
feat(analysis/calculus/times_cont_diff): inversion of continuous linear maps is smooth ([#4185](https://github.com/leanprover-community/mathlib/pull/#4185))

- Introduce an `inverse` function on the space of continuous linear maps between two Banach spaces, which is the inverse if the map is a continuous linear equivalence and zero otherwise.

- Prove that this function is `times_cont_diff_at` each `continuous_linear_equiv`.

- Some of the constructions used had been introduced in [#3282](https://github.com/leanprover-community/mathlib/pull/#3282) and placed in `analysis.normed_space.operator_norm` (normed spaces); they are moved to the earlier file `topology.algebra.module` (topological vector spaces).

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-09-20T21:53:34+00:00](https://github.com/leanprover-community/mathlib/commit/d774ef687c6227652469a1799029878d58d81c5e)
feat(topology/path_connected): add lemmas about paths and continuous families of paths ([#4063](https://github.com/leanprover-community/mathlib/pull/#4063))

From the sphere eversion project (see https://github.com/leanprover-community/sphere-eversion/pull/12)



Co-authored-by: Anatole <anatolededecker@gmail.com>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Anatole Dedecker <48656793+ADedecker@users.noreply.github.com>

### [2020-09-20T20:05:32+00:00](https://github.com/leanprover-community/mathlib/commit/884e90be34839fb272b1bf033c69a5432da84704)
feat(measure_theory): Borel-Cantelli ([#4166](https://github.com/leanprover-community/mathlib/pull/#4166))

```lean
lemma measure_limsup_eq_zero {s : ℕ → set α} (hs : ∀ i, is_measurable (s i))
  (hs' : (∑' i, μ (s i)) ≠ ⊤) : μ (limsup at_top s) = 0
```

There is a converse statement that is also called Borel-Cantelli, but we can't state it yet, because we don't know what independent events are.

### [2020-09-20T16:28:24+00:00](https://github.com/leanprover-community/mathlib/commit/2c9b063480f19bf308b42e299887240eb51b7271)
feat(algebra/big_operators): add prod boole lemma ([#4192](https://github.com/leanprover-community/mathlib/pull/#4192))

A small lemma to simplify products of indicator functions

### [2020-09-20T00:47:20+00:00](https://github.com/leanprover-community/mathlib/commit/44667ba6154005978ec5a806ba573c5f992f7e44)
feat(ring_theory/power_series): power series lemmas ([#4171](https://github.com/leanprover-community/mathlib/pull/#4171))

A couple of little lemmas for multiplication and coefficients

### [2020-09-20T00:00:33+00:00](https://github.com/leanprover-community/mathlib/commit/9232032b47e0d19f97df16af6065725180c394c8)
refactor(linear_algebra/tensor_algebra): build as a quotient of a free algebra ([#4079](https://github.com/leanprover-community/mathlib/pull/#4079))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-19T23:11:09+00:00](https://github.com/leanprover-community/mathlib/commit/7013e5b7c9aba9a165023c1f20cd8d238d58f433)
feat(category_theory/internal): commutative monoid objects ([#4186](https://github.com/leanprover-community/mathlib/pull/#4186))

This reprises a series of our recent PRs on monoid objects in monoidal categories, developing the same material for commutative monoid objects in braided categories.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-19T20:26:57+00:00](https://github.com/leanprover-community/mathlib/commit/5b143ff15669b05b01e6777bd36313078c1fa2a6)
feat(data/set/basic): a few lemmas ([#4184](https://github.com/leanprover-community/mathlib/pull/#4184))



Co-authored-by: mzinkevi <41597957+mzinkevi@users.noreply.github.com>

### [2020-09-19T19:45:22+00:00](https://github.com/leanprover-community/mathlib/commit/640ba6c8265b902744345de49685bf4772a16d6e)
feat(geometry/euclidean): cospherical points ([#4178](https://github.com/leanprover-community/mathlib/pull/#4178))

Define cospherical points in a Euclidean space (the general-dimension
version of the two-dimensional concept of a set of points being
concyclic) and prove some very basic lemmas about them.

### [2020-09-19T19:03:21+00:00](https://github.com/leanprover-community/mathlib/commit/02b492abbba980910958fd4eb97077a1efb4ff4b)
feat(category_theory/Mon): Mon_ C has limits when C does ([#4133](https://github.com/leanprover-community/mathlib/pull/#4133))

If `C` has limits, so does `Mon_ C`.

(This could potentially replace many individual constructions for concrete categories,
in particular `Mon`, `SemiRing`, `Ring`, and `Algebra R`.)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-19T04:51:22+00:00](https://github.com/leanprover-community/mathlib/commit/567954fa470fa145f9442c0aafb0141dc21d85fb)
feat(category_theory): `lim : (J ⥤ C) ⥤ C` is lax monoidal when `C` is monoidal ([#4132](https://github.com/leanprover-community/mathlib/pull/#4132))

A step towards constructing limits in `Mon_ C` (and thence towards sheaves of modules as internal objects).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-19T03:33:07+00:00](https://github.com/leanprover-community/mathlib/commit/04fe4b6d2540443f62427ca24a46a56d08b838d2)
feat(algebra/ring_quot): quotients of noncommutative rings ([#4078](https://github.com/leanprover-community/mathlib/pull/#4078))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-18T21:57:43+00:00](https://github.com/leanprover-community/mathlib/commit/bf7a2ed3c8a6c93a0b67141ad09f6794aa2fdc3f)
fix(conditionally_complete_lattice): add instance ([#4183](https://github.com/leanprover-community/mathlib/pull/#4183))

there was no instance from `conditionally_complete_linear_order_bot` to `conditionally_complete_linear_order`. It is added by this change.

### [2020-09-18T21:57:41+00:00](https://github.com/leanprover-community/mathlib/commit/c2ae6c0ec2fe749f15368e2a7ee8a315d6be5afc)
doc(simps): explain short_name ([#4182](https://github.com/leanprover-community/mathlib/pull/#4182))

### [2020-09-18T21:57:39+00:00](https://github.com/leanprover-community/mathlib/commit/0269a76e1d68436c2e8a93f1640dfbbecad48836)
feat(integration): integral commutes with continuous linear maps ([#4167](https://github.com/leanprover-community/mathlib/pull/#4167))

from the sphere eversion project. Main result:
```lean
continuous_linear_map.integral_apply_comm {α : Type*} [measurable_space α] {μ : measure α} 
  {E : Type*} [normed_group E]  [second_countable_topology E] [normed_space ℝ E] [complete_space E]
  [measurable_space E] [borel_space E] {F : Type*} [normed_group F]
  [second_countable_topology F] [normed_space ℝ F] [complete_space F]
  [measurable_space F] [borel_space F] 
  {φ : α → E} (L : E →L[ℝ] F) (φ_meas : measurable φ) (φ_int : integrable φ μ) :
  ∫ a, L (φ a) ∂μ = L (∫ a, φ a ∂μ)
```

### [2020-09-18T20:21:39+00:00](https://github.com/leanprover-community/mathlib/commit/4e3729b8ccd1a63e3dc23b28d075e6c1ad1c1d20)
feat(geometry/euclidean/basic): intersections of circles ([#4088](https://github.com/leanprover-community/mathlib/pull/#4088))

Add two versions of the statement that two circles in two-dimensional
space intersect in at most two points, along with some lemmas involved
in the proof (some of which can be interpreted in terms of
intersections of circles or spheres and lines).

### [2020-09-18T17:25:27+00:00](https://github.com/leanprover-community/mathlib/commit/9051aa73c123b66f84862af5c8cbe691e33dd1b8)
feat(polynomial): prepare for transcendence of e by adding small lemmas ([#4175](https://github.com/leanprover-community/mathlib/pull/#4175))

This will be a series of pull request to prepare for the proof of transcendence of e by adding lots of small lemmas.




Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-09-18T11:37:08+00:00](https://github.com/leanprover-community/mathlib/commit/ae72826a13a0ce58bf75cc58c0c2219b567df2fa)
feat(data/mv_polynomial): define comap ([#4161](https://github.com/leanprover-community/mathlib/pull/#4161))

More from the Witt vector branch.

Co-authored by: Johan Commelin <johan@commelin.net>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-09-18T09:43:35+00:00](https://github.com/leanprover-community/mathlib/commit/953a5dc05b36d91eee3ef88839c9ee23ddd319d4)
feat(category_theory/monoidal): monoid objects are just lax monoidal functors from punit ([#4121](https://github.com/leanprover-community/mathlib/pull/#4121))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-18T08:44:32+00:00](https://github.com/leanprover-community/mathlib/commit/c158ce85879a4c6a628796d2ff5ec214aa319403)
feat(analysis/calculus): converse mean value inequality  ([#4173](https://github.com/leanprover-community/mathlib/pull/#4173))

Also restate mean value inequality in terms of `lipschitz_on_with`.

From the sphere eversion project.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-09-18T08:44:30+00:00](https://github.com/leanprover-community/mathlib/commit/f68c936c5749f04fb21b5467b658c44fc70ad457)
feat(analysis/normed_space/real_inner_product): orthogonal subspace lemmas ([#4152](https://github.com/leanprover-community/mathlib/pull/#4152))

Add a few more lemmas about `submodule.orthogonal`.

### [2020-09-18T08:44:28+00:00](https://github.com/leanprover-community/mathlib/commit/b00b01f2d98d67ff8cb9adbc7618710102961b46)
feat(linear_algebra/affine_space): more lemmas ([#4127](https://github.com/leanprover-community/mathlib/pull/#4127))

Add another batch of lemmas relating to affine spaces.  These include
factoring out `vector_span_mono` as a combination of two other lemmas
that's used several times, and additional variants of lemmas relating
to finite-dimensional subspaces.

### [2020-09-18T07:44:06+00:00](https://github.com/leanprover-community/mathlib/commit/43ff7dca9641ddc87bf3e81cf698d59387c3cd55)
feat(topology/algebra/ordered): generalize two lemmas ([#4177](https://github.com/leanprover-community/mathlib/pull/#4177))

they hold for conditionally complete linear orders, not just for complete linear orders

### [2020-09-18T05:39:35+00:00](https://github.com/leanprover-community/mathlib/commit/58883e3edbe14ac8db6104438a40e6edf5ebfe19)
feat(topology/ωCPO): define Scott topology in connection with ω-complete partial orders ([#4037](https://github.com/leanprover-community/mathlib/pull/#4037))



Co-authored-by: Aaron Anderson <awainverse@gmail.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-09-18T00:57:16+00:00](https://github.com/leanprover-community/mathlib/commit/52d4b921f19df500107bf8ea1e74007d325d4c96)
chore(scripts): update nolints.txt ([#4176](https://github.com/leanprover-community/mathlib/pull/#4176))

I am happy to remove some nolints for you!

### [2020-09-17T15:33:38+00:00](https://github.com/leanprover-community/mathlib/commit/5a2e7d7b520818dd76a9ef5ad1e534dc3742e16b)
refactor(field-theory/subfield): bundled subfields ([#4159](https://github.com/leanprover-community/mathlib/pull/#4159))

Define bundled subfields. The contents of the new `subfield` file are basically a copy of `subring.lean` with the replacement `subring` -> `subfield`, and the proofs repaired as necessary.

As with the other bundled subobject refactors, other files depending on unbundled subfields now import `deprecated.subfield`.



Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-09-17T15:33:35+00:00](https://github.com/leanprover-community/mathlib/commit/34ebade1b050a56d534018dac13178ff18ab691b)
feat(algebra/free_algebra): free (noncommutative) algebras ([#4077](https://github.com/leanprover-community/mathlib/pull/#4077))

Previously, @adamtopaz constructed the tensor algebra of an `R`-module via a direct construction of a quotient of a free algebra.

This uses essentially the same construction to build a free algebra (on a type) directly. In a PR coming shortly, I'll refactor his development of the tensor algebra to use this construction.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-17T14:29:36+00:00](https://github.com/leanprover-community/mathlib/commit/b62dd2895af6d476ea1a1fdcdd065277c4d78d7a)
feat(linear_algebra/eigenspace): beginning to relate minimal polynomials to eigenvalues ([#4165](https://github.com/leanprover-community/mathlib/pull/#4165))

rephrases some lemmas in `linear_algebra` to use `aeval` instead of `eval2` and `algebra_map`
shows that an eigenvalue of a linear transformation is a root of its minimal polynomial, and vice versa

### [2020-09-17T05:26:28+00:00](https://github.com/leanprover-community/mathlib/commit/265c587e0d416bf9d6dc7bf50f5d5da5351f485e)
doc(meta/converter/interactive): Add tactic documentation for a subset of `conv` tactics ([#4144](https://github.com/leanprover-community/mathlib/pull/#4144))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-09-16T18:50:15+00:00](https://github.com/leanprover-community/mathlib/commit/7db9e13b9cd8c59639190ce967607f13c19d0120)
feat(data/monoid_algebra): ext lemma ([#4162](https://github.com/leanprover-community/mathlib/pull/#4162))

A small lemma that was useful in the Witt vector project.

Co-authored by: Johan Commelin <johan@commelin.net>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-09-16T15:49:12+00:00](https://github.com/leanprover-community/mathlib/commit/9f9a8c06f277b1da125a6f5796724a4322e55188)
feat(readme): add @hrmacbeth to maintainers list ([#4168](https://github.com/leanprover-community/mathlib/pull/#4168))

### [2020-09-16T11:42:42+00:00](https://github.com/leanprover-community/mathlib/commit/623c8462f92547e03b74aa7f4fc358c65e729c62)
feat(data/mv_polynomial/variables): add facts about vars and mul ([#4149](https://github.com/leanprover-community/mathlib/pull/#4149))

More from the Witt vectors branch.

Co-authored by: Johan Commelin <johan@commelin.net>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-09-16T09:39:46+00:00](https://github.com/leanprover-community/mathlib/commit/6603c6da12b6b60be34a38c8818d174a123b08ed)
fix(simps): use coercion for algebra morphisms ([#4155](https://github.com/leanprover-community/mathlib/pull/#4155))

Previously it tried to apply whnf on an open expression, which failed, so it wouldn't find the coercion. Now it applied whnf before opening the expression.

Also use `simps` for `fixed_points.to_alg_hom`. The generated lemmas are
```lean
fixed_points.to_alg_hom_to_fun : ∀ (G : Type u) (F : Type v) [_inst_4 : group G] [_inst_5 : field F]
[_inst_6 : faithful_mul_semiring_action G F],
  ⇑(to_alg_hom G F) =
    λ (g : G),
      {to_fun := (mul_semiring_action.to_semiring_hom G F g).to_fun,
       map_one' := _,
       map_mul' := _,
       map_zero' := _,
       map_add' := _,
       commutes' := _}
```

### [2020-09-16T08:03:28+00:00](https://github.com/leanprover-community/mathlib/commit/9a11efbcadb49f0b13405f23cc81028c1c0f1c6d)
feat(metric_space): add lipschitz_on_with ([#4151](https://github.com/leanprover-community/mathlib/pull/#4151))

The order of the explicit arguments in this definition is open for negotiation.

From the sphere eversion project.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-09-16T08:03:26+00:00](https://github.com/leanprover-community/mathlib/commit/4c9d3a5837cb2532cec5b2235f9c1b3907a1f2fd)
feat(operator_norm): smul_right lemmas ([#4150](https://github.com/leanprover-community/mathlib/pull/#4150))

from the sphere eversion project

We need a version of `continuous_linear_map.smul_right` that is itself a continuous linear map from a normed space to a space of continuous linear maps. 

breaking changes:
* rename `smul_right_norm` to `norm_smul_right_apply`
* in `homothety_norm` remove useless sign assumption and switch from assuming positive dimension to `nontrivial`

### [2020-09-16T06:06:09+00:00](https://github.com/leanprover-community/mathlib/commit/f585ce543be23524a0b545f2ec3f38017e32f951)
feat(category_theory): monoidal natural transformations and discrete monoidal categories ([#4112](https://github.com/leanprover-community/mathlib/pull/#4112))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-15T20:10:38+00:00](https://github.com/leanprover-community/mathlib/commit/4c896c5f0a11b66ad0d82325f20dd1a43f5e4ff9)
chore(undergrad.yaml): updates ([#4160](https://github.com/leanprover-community/mathlib/pull/#4160))

Added a bunch of things to `undergrad.yaml`: generalized eigenspaces, conjugacy classes in a group, the orthogonal complement, continuity of monotone functions and their inverses, inverse hyperbolic trig functions, radius of convergence.  Also changed (hopefully improved) some translations.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2020-09-15T12:59:56+00:00](https://github.com/leanprover-community/mathlib/commit/d3a171962185262b0a2d2e67b4b5204b3c1ff9da)
feat(category_theory/is_connected): make `is_connected` a Prop ([#4136](https://github.com/leanprover-community/mathlib/pull/#4136))

Also renames `connected` to `is_connected`, and relies on `classical.arbitrary` slightly less.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-15T11:43:08+00:00](https://github.com/leanprover-community/mathlib/commit/427d4141ebbdab30d479d5b8c73abff52ad2c9b2)
feat(data/enat): some API and a module docstring ([#4103](https://github.com/leanprover-community/mathlib/pull/#4103))

### [2020-09-15T01:03:57+00:00](https://github.com/leanprover-community/mathlib/commit/7c321f8094d7acf1e706372ec2e51e06c1e6fa30)
chore(scripts): update nolints.txt ([#4157](https://github.com/leanprover-community/mathlib/pull/#4157))

I am happy to remove some nolints for you!

### [2020-09-14T23:27:33+00:00](https://github.com/leanprover-community/mathlib/commit/b83362e45b1ff3d4940153cc50d0d9ff5b4d7699)
fix(order/ocpo): remove trace option ([#4154](https://github.com/leanprover-community/mathlib/pull/#4154))

(it did not produce any output)

### [2020-09-14T23:27:32+00:00](https://github.com/leanprover-community/mathlib/commit/a0adcc045e1535d93c98ca5f16eed0105cf33696)
chore(category_theory/zero): lemmas for has_zero_morphisms.comp_zero|zero_comp ([#4142](https://github.com/leanprover-community/mathlib/pull/#4142))

The axioms of `has_zero_morphisms` never had lemmas written for them, so everyone has been using the typeclass fields directly.




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-14T23:27:30+00:00](https://github.com/leanprover-community/mathlib/commit/3d73bd861073717c6dc5e330d982fbfe24d82023)
feat(topology/algebra/ordered): monotone continuous function is homeomorphism, relative version ([#4043](https://github.com/leanprover-community/mathlib/pull/#4043))

A function `f : α → β` restricts to a homeomorphism `(Ioo a b) → β`, if it (1) is order-preserving within the interval; (2) is `continuous_on` the interval; (3) tends to positive infinity at the right endpoint; and (4) tends to negative infinity at the left endpoint. The orders `α`, `β` are required to be conditionally complete, and the order on `α` must also be dense.

### [2020-09-14T21:25:17+00:00](https://github.com/leanprover-community/mathlib/commit/ff2639dc3c055e724c93ad547d59b467b7ccc1a1)
feat(tactic/pretty_cases): provide a skeleton for a proof by induction / cases ([#4093](https://github.com/leanprover-community/mathlib/pull/#4093))

### [2020-09-14T19:35:47+00:00](https://github.com/leanprover-community/mathlib/commit/218ef40a6acee1726efa2c0e944e19ef27a8dd54)
feat(measure_theory): image of Lebesgue measure under shift/rescale ([#3760](https://github.com/leanprover-community/mathlib/pull/#3760))

### [2020-09-14T16:35:45+00:00](https://github.com/leanprover-community/mathlib/commit/a18be379f0f2d21a985874bae1f852f8d32f87d4)
feat(ring_theory/ideal/over): Going up theorem for integral extensions ([#4064](https://github.com/leanprover-community/mathlib/pull/#4064))

The main statement is `exists_ideal_over_prime_of_is_integral` which shows that for an integral extension, every prime ideal of the original ring lies under some prime ideal of the extension ring.

`is_field_of_is_integral_of_is_field` is a brute force proof that if `R → S` is an integral extension, and `S` is a field, then `R` is also a field (using the somewhat new `is_field` proposition). `is_maximal_comap_of_is_integral_of_is_maximal` Gives essentially the same statement in terms of maximal ideals.

`disjoint_compl` has also been replaced with `disjoint_compl_left` and `disjoint_compl_right` variants.



Co-authored-by: Devon Tuma <dtumad@gmail.com>

### [2020-09-14T15:36:04+00:00](https://github.com/leanprover-community/mathlib/commit/6babb557413ddd4c164109dd9d53ea05ec63d430)
fix(normed_space): fixed a typo from [#4099](https://github.com/leanprover-community/mathlib/pull/#4099) ([#4147](https://github.com/leanprover-community/mathlib/pull/#4147))

This lemma was less general that it should be because migrating it to its
mathlib place messed up the typeclass assumptions.

### [2020-09-14T15:36:02+00:00](https://github.com/leanprover-community/mathlib/commit/8877606bc674631ee1cfbf9061e00ce500969f94)
chore(ci): teach bors and GitHub about new labels ([#4146](https://github.com/leanprover-community/mathlib/pull/#4146))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-09-14T15:35:59+00:00](https://github.com/leanprover-community/mathlib/commit/49fc7edd2f33a1599b54d37dbc845742eaed6b90)
feat(measure_theory): assorted integration lemmas ([#4145](https://github.com/leanprover-community/mathlib/pull/#4145))

from the sphere eversion project

This is still preparations for differentiation of integals depending on a parameter.

### [2020-09-14T15:35:57+00:00](https://github.com/leanprover-community/mathlib/commit/5f45c0c66a8a7b47b3fdb4eb5d0f806fa8169310)
feat(linear_algebra/finite_dimensional): finite-dimensional submodule lemmas / instances ([#4128](https://github.com/leanprover-community/mathlib/pull/#4128))

Add the lemma that a submodule contained in a finite-dimensional
submodule is finite-dimensional, and instances that allow type class
inference to show some infs and sups involving finite-dimensional
submodules are finite-dimensional.  These are all useful when working
with finite-dimensional submodules in a space that may not be
finite-dimensional itself.

Given the new instances, `dim_sup_add_dim_inf_eq` gets its type class
requirements relaxed to require only the submodules to be
finite-dimensional rather than the whole space.

`linear_independent_iff_card_eq_findim_span` is added as a variant of
`linear_independent_of_span_eq_top_of_card_eq_findim` for vectors not
necessarily spanning the whole space (implemented as an `iff` lemma
using `findim_span_eq_card` for the other direction).

### [2020-09-14T14:48:27+00:00](https://github.com/leanprover-community/mathlib/commit/d5c58eb8c92d19a91506bd780eef546ddba68ef7)
chore(category_theory/*): make all forgetful functors use explicit arguments ([#4139](https://github.com/leanprover-community/mathlib/pull/#4139))

As suggested as https://github.com/leanprover-community/mathlib/pull/4131#discussion_r487527599, for the sake of more uniform API.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-14T12:41:02+00:00](https://github.com/leanprover-community/mathlib/commit/a998fd104e7157cdaa4b6d5baa402250b0bf0ecb)
feat(algebra/category/Module): the monoidal category of R-modules is symmetric ([#4140](https://github.com/leanprover-community/mathlib/pull/#4140))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-14T12:41:00+00:00](https://github.com/leanprover-community/mathlib/commit/e35e287bd80fd556b9029a78be2fc69b776fbe4c)
refactor(data/nat/*): cleanup data.nat.basic, split data.nat.choose ([#4135](https://github.com/leanprover-community/mathlib/pull/#4135))

This PR rearranges `data.nat.basic` so the lemmas are now in (hopefully appropriately-named) markdown sections. It also moves several sections (mostly ones that introduced new `def`s) into new files:
- `data.nat.fact`
- `data.nat.psub` (maybe this could be named `data.nat.partial`?)
- `data.nat.log`
- `data.nat.with_bot`

`data.nat.choose` has been split into a directory:
- The definition of `nat.choose` and basic lemmas about it have been moved from `data.nat.basic` into `data.nat.choose.basic`
- The binomial theorem and related lemmas involving sums are now in `data.nat.choose.sum`; the following lemmas are now in the `nat` namespace:
  - `sum_range_choose`
  - `sum_range_choose_halfway`
  - `choose_middle_le_pow`
- Divisibility properties of binomial coefficients are now in `data.nat.choose.dvd`.

Other changes:
- added `nat.pow_two_sub_pow_two` to `data.nat.basic`.
- module docs & doc strings for `data.nat.sqrt`



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-09-14T11:13:26+00:00](https://github.com/leanprover-community/mathlib/commit/39962b7c442d064d06855880abd43a3a8f2342b4)
chore(data/polynomial/derivative): golf proof of mem_support_derivative ([#4134](https://github.com/leanprover-community/mathlib/pull/#4134))

Golfed proof to be similar to what it was like prior to the refactor.

### [2020-09-14T10:24:38+00:00](https://github.com/leanprover-community/mathlib/commit/6756d47cd53daea2a4aad29a85a14c609b8859d7)
feat(category_theory): Mon_.forget reflects isos ([#4131](https://github.com/leanprover-community/mathlib/pull/#4131))

A step along the way to `sheaf X (Mon_ C) ~ Mon_ (sheaf X C)`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-14T09:42:31+00:00](https://github.com/leanprover-community/mathlib/commit/bbfeff38e628142f9eda5a5feffbd26a9fa24ef2)
feat(data/mv_polynomial/monad): mv_polynomial is a monad in two different ways ([#4080](https://github.com/leanprover-community/mathlib/pull/#4080))

These definitions and lemmas significantly decrease the pain in several computations in the Witt project.

Co-authored-by: Robert Y. Lewis <Rob.y.lewis@gmail.com>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-09-14T09:42:28+00:00](https://github.com/leanprover-community/mathlib/commit/ed71b2df285f7a1254e40e54c146a032f592e00d)
feat(computability/tm_computable): define computable (in polytime) for TMs, prove id is computable in constant time  ([#4048](https://github.com/leanprover-community/mathlib/pull/#4048))

We define computability in polynomial time to be used in our future PR on P and NP.
We also prove that id is computable in constant time.

<!-- put comments you want to keep out of the PR commit here -->


Co-authored-by: Pim <spelier.pim@gmail.com>

### [2020-09-14T08:03:38+00:00](https://github.com/leanprover-community/mathlib/commit/dce6b3731e502c1c82f851581a73c60c56942099)
chore(algebra/homology): cleanup instances post [#3995](https://github.com/leanprover-community/mathlib/pull/#3995) ([#4137](https://github.com/leanprover-community/mathlib/pull/#4137))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-14T08:03:36+00:00](https://github.com/leanprover-community/mathlib/commit/1c2ddbcf800b070afddf1886e6329e400073b764)
feat(field_theory/fixed): dimension over fixed field is order of group ([#4125](https://github.com/leanprover-community/mathlib/pull/#4125))

```lean
theorem dim_fixed_points (G : Type u) (F : Type v) [group G] [field F]
  [fintype G] [faithful_mul_semiring_action G F] :
  findim (fixed_points G F) F = fintype.card G
````

### [2020-09-14T08:03:35+00:00](https://github.com/leanprover-community/mathlib/commit/b1e5a6b61a122f2080eb189bd21a21a614103043)
doc(measure_theory): docstrings for continuity from above and below ([#4122](https://github.com/leanprover-community/mathlib/pull/#4122))

### [2020-09-14T08:03:33+00:00](https://github.com/leanprover-community/mathlib/commit/5a478f0d985555b0f50b1ab231476802175cb16d)
doc(category_theory/natural_isomorphism): documentation and cleanup ([#4120](https://github.com/leanprover-community/mathlib/pull/#4120))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-14T08:03:31+00:00](https://github.com/leanprover-community/mathlib/commit/51608f4a07ee9eb2f145c64b73b066b42ad1fd90)
feat(linear_algebra/affine_space,geometry/euclidean): simplex centers and order of points ([#4116](https://github.com/leanprover-community/mathlib/pull/#4116))

Add lemmas that the centroid of an injective indexed family of points
does not depend on the indices of those points, only on the set of
points in their image, and likewise that the centroid, circumcenter
and Monge point of a simplex and thus the orthocenter of a triangle do
not depend on the order in which the vertices are indexed by `fin (n + 1)`,
only on the set of vertices.

### [2020-09-14T08:03:29+00:00](https://github.com/leanprover-community/mathlib/commit/b19fbd79ef9ee03c249344ac29b7c6b51707cf3f)
feat(ring_theory/algebra_tower): coefficients for a basis in an algebra tower ([#4114](https://github.com/leanprover-community/mathlib/pull/#4114))

This PR gives an expression for `(is_basis.smul hb hc).repr` in terms of `hb.repr` and `hc.repr`, useful if you have a field extension `L / K`, and `x y : L`, and want to write `y` in terms of the power basis of `K(x)`.



Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-09-14T06:53:07+00:00](https://github.com/leanprover-community/mathlib/commit/e355933513ae5ea4751692e58130298f4402d3f3)
chore(category_theory/limits): remove unnecessary typeclass arguments ([#4141](https://github.com/leanprover-community/mathlib/pull/#4141))

Ongoing cleanup post [#3995](https://github.com/leanprover-community/mathlib/pull/#3995).

Previously we couldn't construct things like `instance : has_kernel (0 : X \hom Y)`, because it wouldn't have agreed definitionally with more general instances. Now we can.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-14T00:14:59+00:00](https://github.com/leanprover-community/mathlib/commit/bd385fbfdc0d56ebaf7923a374ac484dcae15b3a)
chore(category_theory/limits/functor_category): shuffle limits in functor cats ([#4124](https://github.com/leanprover-community/mathlib/pull/#4124))

Give `is_limit` versions for statements about limits in the functor category, and write the `has_limit` versions in terms of those.
This also generalises the universes a little.
As usual, suggestions for better docstrings or better names appreciated!

### [2020-09-13T08:21:22+00:00](https://github.com/leanprover-community/mathlib/commit/5d35e626086c4e1639e49cd7cf574bc48592f554)
feat(algebraic_geometry/*): Gamma the global sections functor ([#4126](https://github.com/leanprover-community/mathlib/pull/#4126))

### [2020-09-13T03:55:56+00:00](https://github.com/leanprover-community/mathlib/commit/f403a8be57c4a89dd0b8aaf51a9ba27fef355e5d)
feat(category_theory/limits/types): is_limit versions of limits in type ([#4130](https://github.com/leanprover-community/mathlib/pull/#4130))

`is_limit` versions for definitions and lemmas about limits in `Type u`.

### [2020-09-13T01:01:54+00:00](https://github.com/leanprover-community/mathlib/commit/dd43823c00c0814d676fd3b90fbf790d81a15cfd)
chore(scripts): update nolints.txt ([#4129](https://github.com/leanprover-community/mathlib/pull/#4129))

I am happy to remove some nolints for you!

### [2020-09-12T18:30:15+00:00](https://github.com/leanprover-community/mathlib/commit/f3326db148b8a08addb9c860016a8cb910a17342)
feat(normed_space): second countability for linear maps ([#4099](https://github.com/leanprover-community/mathlib/pull/#4099))

From the sphere eversion project, various lemmas about continuous linear maps and a theorem: if E is finite dimensional and F is second countable then the space of continuous linear maps from E to F is second countable.

### [2020-09-12T16:34:13+00:00](https://github.com/leanprover-community/mathlib/commit/c8771b6bbec0fb5a427bd58c52a305a1015c15a8)
fix(algebra/ring/basic): delete mul_self_sub_mul_self_eq ([#4119](https://github.com/leanprover-community/mathlib/pull/#4119))

It's redundant with `mul_self_sub_mul_self`.

Also renamed `mul_self_sub_one_eq` to `mul_self_sub_one`.

### [2020-09-12T15:49:53+00:00](https://github.com/leanprover-community/mathlib/commit/169384a704dab4f116ae9b81cb0973fe66a8b209)
feat(slim_check): add test cases ([#4100](https://github.com/leanprover-community/mathlib/pull/#4100))

### [2020-09-12T09:38:07+00:00](https://github.com/leanprover-community/mathlib/commit/c3a6a6990d620c3fadf11631038b38dd7fd50b39)
doc(group_theory/subgroup): fix links in module doc ([#4115](https://github.com/leanprover-community/mathlib/pull/#4115))

### [2020-09-12T09:38:05+00:00](https://github.com/leanprover-community/mathlib/commit/88dd01b70eee48860d9e76bc462b97065e1273fe)
chore(category_theory): minor cleanups ([#4110](https://github.com/leanprover-community/mathlib/pull/#4110))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-12T07:45:55+00:00](https://github.com/leanprover-community/mathlib/commit/b1a210ec44e196a1a937310ed15364bb4a00089c)
feat(logic/basic): Add more simp lemmas for forall ([#4117](https://github.com/leanprover-community/mathlib/pull/#4117))

### [2020-09-12T06:00:57+00:00](https://github.com/leanprover-community/mathlib/commit/3419986967dad05d9f89b9c2b13011ee4313575c)
feat(category_theory/limits): make has_limit a Prop ([#3995](https://github.com/leanprover-community/mathlib/pull/#3995))

We change `has_limit` so that it is only an existential statement that limit data exists, and in particular lives in `Prop`.

This means we can safely have multiple `has_limit` classes for the same functor, because proof irrelevance ensures Lean sees them all as the same.

We still have access to the API which lets us pretend we have consistently chosen limits, but now these limits are provided by the axiom of choice and hence are definitionally opaque.



Co-authored-by: Markus Himmel <markus@himmel-villmar.de>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Simon Hudon <simon.hudon@gmail.com>

### [2020-09-12T01:05:19+00:00](https://github.com/leanprover-community/mathlib/commit/f6a65cff191f14b6e2bf06a9c4b3206ffa097dbb)
chore(scripts): update nolints.txt ([#4118](https://github.com/leanprover-community/mathlib/pull/#4118))

I am happy to remove some nolints for you!

### [2020-09-11T17:48:45+00:00](https://github.com/leanprover-community/mathlib/commit/7bade58b65efc4fe7c2af798ed18157dd799049c)
feat(logic/basic): Add forall_apply_eq_imp_iff ([#4109](https://github.com/leanprover-community/mathlib/pull/#4109))

Also adds forall_apply_eq_imp_iff' for swapped forall arguments

This means that `forall_range_iff` can now be solved by `simp`.

This requires changes in data/pfun and measure_theory/borel_space, where non-terminal `simp`s broke.

### [2020-09-11T17:48:43+00:00](https://github.com/leanprover-community/mathlib/commit/17a5807251fa022128741205d7c9d7bdf238a37c)
feat(category_theory/limits/fubini): another formulation for limits commuting ([#4034](https://github.com/leanprover-community/mathlib/pull/#4034))

The statement that you can swap limits, rather than just combine into a single limit as we had before.

(This just uses two copies of the previous isomorphism.)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-11T17:48:40+00:00](https://github.com/leanprover-community/mathlib/commit/045619ea8f37db9a43daf90d5cca27cab492c1dc)
feat(topology/sheaves): sheafification ([#3937](https://github.com/leanprover-community/mathlib/pull/#3937))

# Sheafification of `Type` valued presheaves

We construct the sheafification of a `Type` valued presheaf,
as the subsheaf of dependent functions into the stalks
consisting of functions which are locally germs.

We show that the stalks of the sheafification are isomorphic to the original stalks,
via `stalk_to_fiber` which evaluates a germ of a dependent function at a point.

We construct a morphism `to_sheafify` from a presheaf to (the underlying presheaf of)
its sheafification, given by sending a section to its collection of germs.

## Future work
Show that the map induced on stalks by `to_sheafify` is the inverse of `stalk_to_fiber`.

Show sheafification is a functor from presheaves to sheaves,
and that it is the left adjoint of the forgetful functor.



Co-authored-by: Reid Barton <rwbarton@gmail.com>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-11T17:48:37+00:00](https://github.com/leanprover-community/mathlib/commit/5509a30ac9bd31073e0b360a3e6f54532b55deeb)
feat(category_theory/skeleton): add skeletal categories and construct a special case ([#3929](https://github.com/leanprover-community/mathlib/pull/#3929))

I'm interested in the quotient construction of the skeleton for a thin category in particular for topos and sheafification PRs, but of course the general construction is useful too, so I've marked that as TODO and I'll make a followup PR so that this one doesn't get too big.
The advantage of handling this special case separately is that the skeleton of a thin category is a partial order, and so lattice constructions can be used (which is needed for my application), and also there are nice definitional equalities.

### [2020-09-11T15:53:17+00:00](https://github.com/leanprover-community/mathlib/commit/847f87eed0e296519e5b828b9d00528240044187)
feat(geometry/euclidean/circumcenter): lemmas on orthogonal projection and reflection ([#4087](https://github.com/leanprover-community/mathlib/pull/#4087))

Add more lemmas about orthogonal projection and the circumcenter of a
simplex (so substantially simplifying the proof of
`orthogonal_projection_circumcenter`).  Then prove a lemma
`eq_or_eq_reflection_of_dist_eq` that if we fix a distance a point has
to all the vertices of a simplex, any two possible positions of that
point in one dimension higher than the simplex are equal or
reflections of each other in the subspace of the simplex.

### [2020-09-11T15:53:15+00:00](https://github.com/leanprover-community/mathlib/commit/872a37e4f99b337f7750c858accaf35a4ad4ded5)
cleanup(group_theory/presented_group): () -> [], and remove some FIXMEs ([#4076](https://github.com/leanprover-community/mathlib/pull/#4076))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-11T15:53:13+00:00](https://github.com/leanprover-community/mathlib/commit/377c7c919dfadc93bb0ebca195b6fadb2328653c)
feat(category_theory/braided): braiding and unitors ([#4075](https://github.com/leanprover-community/mathlib/pull/#4075))

The interaction between braidings and unitors in a braided category.

Requested by @cipher1024 for some work he's doing on monads.

I've changed the statements of some `@[simp]` lemmas, in particular `left_unitor_tensor`, `left_unitor_tensor_inv`, `right_unitor_tensor`, `right_unitor_tensor_inv`. The new theory is that the components of a unitor indexed by a tensor product object are "more complicated" than other unitors. (We already follow the same principle for simplifying associators using the pentagon equation.)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-11T15:53:11+00:00](https://github.com/leanprover-community/mathlib/commit/a1cbe88abe7b7613ea9ebf7a6db5dac97afe1e51)
feat(logic/basic, logic/function/basic): involute ite  ([#4074](https://github.com/leanprover-community/mathlib/pull/#4074))

Some lemmas about `ite`:
- `(d)ite_not`: exchanges the branches of an `(d)ite`
  when negating the given prop.
- `involutive.ite_not`: applying an involutive function to an `ite`
  negates the prop

Other changes:
Generalize the arguments for `(d)ite_apply` and `apply_(d)ite(2)`
to `Sort*` over `Type*`.

Co-authored-by: Alex J Best <alex.j.best@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2020-09-11T15:53:09+00:00](https://github.com/leanprover-community/mathlib/commit/832acd63919d7cb5ef99d0ccb170adfa39fd77c3)
feat(data/{sym2,sym}) decidable version of sym2.mem.other, filling out some of sym API ([#4008](https://github.com/leanprover-community/mathlib/pull/#4008))

Removes `sym2.vmem` and replaces it with `sym2.mem.other'`, which can get the other element of a pair in the presence of decidable equality. Writing `sym2.mem.other'` was beyond my abilities when I created `sym2.vmem`, and seeing that vmem is extremely specialized and has no immediate use, it's probably best to remove it.

Adds some assorted simp lemmas, and also an additional lemma that `sym2.mem.other` is, in some sense, an involution.

Adds to the API for `sym`.  This is from taking some of the interface for multisets.  (I was exploring whether `sym2 α` should be re-implemented as `sym α 2` and trying to add enough to `sym` to pull it off, but it doesn't seem to be worth it in the end.)

(I'm not committing a recursor for `sym α n`, which lets you represent elements by vectors of length `n`.  It needs some cleanup.)

### [2020-09-11T14:46:51+00:00](https://github.com/leanprover-community/mathlib/commit/7886c27bb01475b326d041554fdd80659e27fe37)
feat(category_theory/monoidal): lax monoidal functors take monoids to monoids ([#4108](https://github.com/leanprover-community/mathlib/pull/#4108))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-11T14:46:48+00:00](https://github.com/leanprover-community/mathlib/commit/bd74baa1952b1851d8d036ff6767b83872534e6b)
feat(algebra/homology/exact): lemmas about exactness ([#4106](https://github.com/leanprover-community/mathlib/pull/#4106))

These are a few lemmas on the way to showing how `exact` changes under isomorphisms applied to the objects. It's not everthing one might want; I'm salvaging this from an old branch and unlikely to do more in the near future, but hopefully this is mergeable progress as is.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-11T14:46:45+00:00](https://github.com/leanprover-community/mathlib/commit/233a802c8997cb164697f6079e32c8268ff66cce)
feat(algebraic_geometry/Scheme): Spec as Scheme ([#4104](https://github.com/leanprover-community/mathlib/pull/#4104))

```lean
def Spec (R : CommRing) : Scheme
```

### [2020-09-11T14:46:44+00:00](https://github.com/leanprover-community/mathlib/commit/34e0f3131b371343545753041ad4fdbd60dfac25)
feat(nnreal): absolute value ([#4098](https://github.com/leanprover-community/mathlib/pull/#4098))



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-09-11T13:30:01+00:00](https://github.com/leanprover-community/mathlib/commit/842a3246c5fca1f181929fa65dc31ada73180871)
feat(category_theory): the Grothendieck construction ([#3896](https://github.com/leanprover-community/mathlib/pull/#3896))

Given a functor `F : C ⥤ Cat`, 
the objects of `grothendieck F` consist of dependent pairs `(b, f)`, where `b : C` and `f : F.obj c`,
and a morphism `(b, f) ⟶ (b', f')` is a pair `β : b ⟶ b'` in `C`, and `φ : (F.map β).obj f ⟶ f'`.

(This is only a special case of the real thing: we should treat `Cat` as a 2-category and allow `F` to be a 2-functor / pseudofunctor.)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-11T11:35:29+00:00](https://github.com/leanprover-community/mathlib/commit/0c57b2da3c4e821fb2e1e351409e61e039fd7ea6)
doc(category_theory): add doc-strings and links to the stacks project ([#4107](https://github.com/leanprover-community/mathlib/pull/#4107))

We'd been discussing adding a `@[stacks "007B"]` tag to add cross-references to the stacks project (and possibly include links back again -- they say they're keen).

I'm not certain that we actually have the documentation maintenance enthusiasm to make this viable, so this PR is a more lightweight solution: adding lots of links to the stacks project from doc-strings. I'd be very happy to switch back to the attribute approach later.

This is pretty close to exhaustive for the "category theory preliminaries" chapter of the stacks project, but doesn't attempt to go beyond that. I've only included links where we formalise all, or almost all (in which case I've usually left a note), of the corresponding tag.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-11T11:35:27+00:00](https://github.com/leanprover-community/mathlib/commit/3965e063e5a1146e51d9cb9908b1013cb4f02780)
chore(*): use new `extends_priority` default of 100, part 2 ([#4101](https://github.com/leanprover-community/mathlib/pull/#4101))

This completes the changes started in [#4066](https://github.com/leanprover-community/mathlib/pull/#4066).

### [2020-09-11T11:35:25+00:00](https://github.com/leanprover-community/mathlib/commit/bc78621a77b5a8ee1bb16ecc4237afc4bf5533b9)
feat(geometry/euclidean/monge_point): reflection of circumcenter ([#4062](https://github.com/leanprover-community/mathlib/pull/#4062))

Show that the distance from the orthocenter of a triangle to the
reflection of the circumcenter in a side equals the circumradius (a
key fact for proving various standard properties of orthocentric
systems).

### [2020-09-11T11:35:23+00:00](https://github.com/leanprover-community/mathlib/commit/4ce27a5d01c3e065152805c59170888b7e45dc78)
feat(category_theory/limits): filtered colimits commute with finite limits (in Type) ([#4046](https://github.com/leanprover-community/mathlib/pull/#4046))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-11T06:18:46+00:00](https://github.com/leanprover-community/mathlib/commit/80a9e4f4ac105ef15681408b9584fbb58573e1cb)
refactor(data/mv_polynomial/pderivative): make pderivative a linear map ([#4095](https://github.com/leanprover-community/mathlib/pull/#4095))

Make `pderivative i` a linear map as suggested at https://github.com/leanprover-community/mathlib/pull/4083#issuecomment-689712833

### [2020-09-11T00:47:31+00:00](https://github.com/leanprover-community/mathlib/commit/9a24f689077e11bad630eeb74d6cdd0977b40ab9)
chore(scripts): update nolints.txt ([#4105](https://github.com/leanprover-community/mathlib/pull/#4105))

I am happy to remove some nolints for you!

### [2020-09-10T18:33:51+00:00](https://github.com/leanprover-community/mathlib/commit/7d88b3147e51435ee1bebbc0ae14958e580827ca)
feat(ring_theory/algebra_operations): add le_div_iff_mul_le ([#4102](https://github.com/leanprover-community/mathlib/pull/#4102))

### [2020-09-10T16:46:37+00:00](https://github.com/leanprover-community/mathlib/commit/e33a777d834c71f8f56adb9a03ff552b232606f9)
feat(data/fin): iffs about succ_above ordering ([#4092](https://github.com/leanprover-community/mathlib/pull/#4092))

New lemmas:
`succ_above_lt_iff`
`lt_succ_above_iff`

These help avoid needing to do case analysis when faced with
inequalities about `succ_above`.

### [2020-09-10T14:56:55+00:00](https://github.com/leanprover-community/mathlib/commit/38d1715b92fbe74ca071593b521cab2283f7e968)
chore(*): update to Lean 3.20.0c, account for nat.pow removal from core ([#3985](https://github.com/leanprover-community/mathlib/pull/#3985))

Outline:
* `nat.pow` has been removed from the core library.
  We now use the instance `monoid.pow` to provide `has_pow ℕ ℕ`.

* To accomodate this, `algebra.group_power` has been split into a directory.
  `algebra.group_power.basic` contains the definitions of `monoid.pow` and `nsmul`
  and whatever lemmas can be stated with very few imports. It is imported in `data.nat.basic`.
  The rest of `algebra.group_power` has moved to `algebra.group_power.lemmas`.

* The new `has_pow ℕ ℕ` now satisfies a different definitional equality:
  `a^(n+1) = a * a^n` (rather than `a^(n+1) = a^n * a`).
  As a temporary measure, the lemma `nat.pow_succ` provides the old equality
  but I plan to deprecate it in favor of the more general `pow_succ'`.
  The lemma `nat.pow_eq_pow` is gone--the two sides are now the same in all respects
  so it can be deleted wherever it was used.

* The lemmas from core that mention `nat.pow` have been moved into `data.nat.lemmas`
  and their proofs adjusted as needed to take into account the new definition.

* The module `data.bitvec` from core has moved to `data.bitvec.core` in mathlib.

Future plans:
* Remove `nat.` lemmas redundant with general `group_power` ones, like `nat.pow_add`.
  This will be easier after further shuffling of modules.




Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-09-10T13:02:29+00:00](https://github.com/leanprover-community/mathlib/commit/d5be9f388a19f891daed609add98153b3024c100)
refactor(data/mv_polynomial): move `smul` lemmas into basic.lean ([#4097](https://github.com/leanprover-community/mathlib/pull/#4097))

`C_mul'`, `smul_eq_C_mul` and `smul_eval` seemed a bit out of place in `comm_ring.lean`, since they only need `comm_semiring α`. So I moved them to `basic.lean` where they probably fit in a bit better?

I've also golfed the proof of `smul_eq_C_mul`.

### [2020-09-10T13:02:28+00:00](https://github.com/leanprover-community/mathlib/commit/19b9ae6ea3937a3fe5f296ce39f817986c1f837f)
feat(data/mv_polynomial): a few facts about `constant_coeff` and `aeval` ([#4085](https://github.com/leanprover-community/mathlib/pull/#4085))

A few additional facts about `constant_coeff_map` and `aeval` from the witt vector branch.

Co-authored by: Johan Commelin <johan@commelin.net>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-09-10T13:02:25+00:00](https://github.com/leanprover-community/mathlib/commit/d857def3766824b8b30c20c2817da1f54adbface)
feat(slim_check): make `shrink` recursive ([#4038](https://github.com/leanprover-community/mathlib/pull/#4038))

Make example shrinking recursive to make it faster and more reliable. It now acts more like a binary search and less like a linear search.

### [2020-09-10T11:22:25+00:00](https://github.com/leanprover-community/mathlib/commit/55cab6c057005b41b4da2f0514701b9b41291b0d)
feat(data/{int,nat}/cast): dvd cast lemmas ([#4086](https://github.com/leanprover-community/mathlib/pull/#4086))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-09-10T08:56:58+00:00](https://github.com/leanprover-community/mathlib/commit/49bb92dccefc81b635c6d6ee9912b51f68d6c2ec)
feat(ring_theory/dedekind_domain): definitions ([#4000](https://github.com/leanprover-community/mathlib/pull/#4000))

Defines `is_dedekind_domain` in three variants:

1.  `is_dedekind_domain`: Noetherian, Integrally closed, Krull dimension 1, thanks to @Vierkantor 
2. `is_dedekind_domain_dvr`: Noetherian, localization at every nonzero prime is a DVR
3. `is_dedekind_domain_inv`: Every nonzero ideal is invertible.

TODO: prove that these definitions are equivalent.

This PR also includes some misc. lemmas required to show the definitions are independent of choice of fraction field.

Co-Authored-By: mushokunosora <knaka3435@gmail.com>
Co-Authored-By: faenuccio <filippo.nuccio@univ-st-etienne.fr>
Co-Authored-By: Vierkantor <vierkantor@vierkantor.com>



Co-authored-by: Anne Baanen <t.baanen@vu.nl>
Co-authored-by: mushokunosora <38799099+mushokunosora@users.noreply.github.com>
Co-authored-by: Vierkantor <vierkantor@vierkantor.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-09-10T07:43:56+00:00](https://github.com/leanprover-community/mathlib/commit/8e9b1f0f10980d683c005ddfb60a34488944762f)
feat(linear_algebra): add `restrict` for endomorphisms ([#4053](https://github.com/leanprover-community/mathlib/pull/#4053))

Add a `restrict` function for endomorphisms. Add some lemmas about the new function, including one about generalized eigenspaces. Add some additional lemmas about `linear_map.comp` that I do not use in the final proof, but still consider useful.

### [2020-09-10T05:42:47+00:00](https://github.com/leanprover-community/mathlib/commit/47264da13aa8f075022d9a43edf56753d74a2193)
feat(linear_algebra): tiny missing pieces ([#4089](https://github.com/leanprover-community/mathlib/pull/#4089))

From the sphere eversion project.

### [2020-09-10T01:34:24+00:00](https://github.com/leanprover-community/mathlib/commit/9f55ed7054dcf01bf8a3a69afc03a1ceebcfc09c)
feat(data/polynomial/ring_division): make `polynomial.roots` a multiset ([#4061](https://github.com/leanprover-community/mathlib/pull/#4061))

The original definition of `polynomial.roots` was basically "while ∃ x, p.is_root x { finset.insert x polynomial.roots }", so it was not
too hard to replace this with `multiset.cons`.

I tried to refactor most usages of `polynomial.roots` to talk about the multiset instead of coercing it to a finset, since that should give a bit more power to the results.

### [2020-09-09T23:56:32+00:00](https://github.com/leanprover-community/mathlib/commit/660a6c4922ef77bb5a9a3e1eec1ceb739c7ed447)
feat(topology): misc topological lemmas ([#4091](https://github.com/leanprover-community/mathlib/pull/#4091))

From the sphere eversion project.

### [2020-09-09T23:56:30+00:00](https://github.com/leanprover-community/mathlib/commit/9da39cf900cc6ed8296983884eade91388fd5dd3)
feat(ordered_field): missing inequality lemmas ([#4090](https://github.com/leanprover-community/mathlib/pull/#4090))

From the sphere eversion project.

### [2020-09-09T22:00:53+00:00](https://github.com/leanprover-community/mathlib/commit/0967f841ea3f62878184148c863b661eb1801b43)
doc(*): add some docstrings ([#4073](https://github.com/leanprover-community/mathlib/pull/#4073))

### [2020-09-09T16:00:30+00:00](https://github.com/leanprover-community/mathlib/commit/44d356c43c81b47ef32d64405c15bea339b5038f)
feat(tactic/explode): correctly indent long statements ([#4084](https://github.com/leanprover-community/mathlib/pull/#4084))

`#explode` didn't indent long statements in the proof, such as in this lemma:
```lean
import tactic.explode

variables (p q r : ℕ → Prop)

lemma ex (h : ∃ x, ∀ y, ∃ z, p x ∧ q y ∧ r z) :
              ∃ z, ∀ y, ∃ x, p x ∧ q y ∧ r z :=
Exists.rec_on h $ λ x h',
Exists.rec_on (h' 0) $ λ z h'',
⟨z, λ y,
  Exists.rec_on (h' y) $ λ w h''',
  ⟨x, h''.1, h'''.2.1, h''.2.2⟩⟩

#explode ex
```

### [2020-09-09T16:00:28+00:00](https://github.com/leanprover-community/mathlib/commit/11e62b0b8ec795327f594622d793362407c806ac)
fix(data/mv_polynomial/pderivative): rename variables and file, make it universe polymorphic ([#4083](https://github.com/leanprover-community/mathlib/pull/#4083))

This file originally used different variable names to the rest of `mv_polynomial`. I've changed it to now use the same conventions as the other files.

I also renamed the file to `pderivative.lean` to be consistent with `derivative.lean` for polynomials.

The types of the coefficient ring and the indexing variables are now universe polymorphic.

The diff shows it as new files, but the only changes are fixing the statements and proofs.

### [2020-09-09T14:54:02+00:00](https://github.com/leanprover-community/mathlib/commit/98061d12deb386df47bc9f566c3d9006fdcb286b)
fix(tactic/linarith): treat powers like multiplication ([#4082](https://github.com/leanprover-community/mathlib/pull/#4082))

`ring` understands that natural number exponents are repeated multiplication, so it's safe for `linarith` to do the same. This is unlikely to affect anything except `nlinarith` calls, which are now slightly more powerful.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-09-09T13:02:22+00:00](https://github.com/leanprover-community/mathlib/commit/d6e7ee07d9e6a1697b6828362de817370880f8bc)
doc(ring_theory/localization): fix docstring typo ([#4081](https://github.com/leanprover-community/mathlib/pull/#4081))

### [2020-09-09T13:02:19+00:00](https://github.com/leanprover-community/mathlib/commit/297a14e42e381f8da40d6968c4067ad0f58a9cc4)
feat(linear_algebra/affine_space): more lemmas ([#4055](https://github.com/leanprover-community/mathlib/pull/#4055))

Add some more lemmas about affine spaces.  One,
`affine_span_insert_affine_span`, is extracted from the proof of
`exists_unique_dist_eq_of_affine_independent` as it turned out to be
useful elsewhere.

### [2020-09-09T13:02:17+00:00](https://github.com/leanprover-community/mathlib/commit/40de35aa550ef2347fcea22ef7ad704ee3a0e3ab)
feat(order/conditionally_complete_lattice, topology/algebra/ordered): inherited order properties for `ord_connected` subset ([#3991](https://github.com/leanprover-community/mathlib/pull/#3991))

If `α` is `densely_ordered`, then so is the subtype `s`, for any `ord_connected` subset `s` of `α`.

Same result for `order_topology`.

Same result for `conditionally_complete_linear_order`, under the hypothesis `inhabited s`.

### [2020-09-09T11:11:47+00:00](https://github.com/leanprover-community/mathlib/commit/2ab31f911c04a45ae4c155e0a4172424665f4a50)
chore(*): use new `extends_priority` default of 100 ([#4066](https://github.com/leanprover-community/mathlib/pull/#4066))

This is the first of (most likely) two PRs which remove the use of
`set_option default_priority 100` in favor of per-instance priority
attributes, taking advantage of Lean 3.19c's new default priority
of 100 on instances produced by `extends`.

### [2020-09-09T08:45:23+00:00](https://github.com/leanprover-community/mathlib/commit/77c8415b3f5b330b57c04b04d8d14549ef058c15)
refactor(data/mv_polynomial): split into multiple files ([#4070](https://github.com/leanprover-community/mathlib/pull/#4070))

`mv_polynomial.lean` was getting massive and hard to explore. This breaks it into (somewhat arbitrary) pieces. While `basic.lean` is still fairly long, there are a lot of basics about multivariate polynomials, and I think it's reasonable.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-09-09T04:32:30+00:00](https://github.com/leanprover-community/mathlib/commit/d5580f44f6af9af2c3ae4c9de6468d867069fa90)
feat(data/equiv/basic): add ext_iff for perm ([#4067](https://github.com/leanprover-community/mathlib/pull/#4067))

### [2020-09-08T21:33:25+00:00](https://github.com/leanprover-community/mathlib/commit/f5ee84c9afa27476bad58421d502e019f442e998)
feat(analysis/special_functions/pow): Added lemmas bounding rpow in ennreal ([#4039](https://github.com/leanprover-community/mathlib/pull/#4039))

Continuation of [#3715](https://github.com/leanprover-community/mathlib/pull/#3715). Added lemmas in `ennreal` corresponding to the `real` and `nnreal` lemmas added in that PR

### [2020-09-08T20:35:35+00:00](https://github.com/leanprover-community/mathlib/commit/7354042332b4e11f3082bc137f00be47a09f1b25)
fix(topology/metric_space): free universe ([#4072](https://github.com/leanprover-community/mathlib/pull/#4072))

Removes an unneeded and painful universe restriction

### [2020-09-08T18:11:23+00:00](https://github.com/leanprover-community/mathlib/commit/dde8bad72f481af34d86c960a459273ab8881c97)
doc(*): add docstrings ([#4071](https://github.com/leanprover-community/mathlib/pull/#4071))


Minor docstring fixes

### [2020-09-08T12:40:23+00:00](https://github.com/leanprover-community/mathlib/commit/b2ec2b0cf3cd8a61ebf4465dceb92ffac72b3bca)
chore(data/padics): fix bad markdown in doc string ([#4068](https://github.com/leanprover-community/mathlib/pull/#4068))

Just noticed this in the docs

### [2020-09-08T12:40:21+00:00](https://github.com/leanprover-community/mathlib/commit/4f1399deca1f3adbdd336a402d5c50975e105961)
feat(geometry/euclidean/basic): reflection lemmas ([#4056](https://github.com/leanprover-community/mathlib/pull/#4056))

Add more lemmas about reflections of points in subspaces.

### [2020-09-08T12:40:19+00:00](https://github.com/leanprover-community/mathlib/commit/445e883e13b74841d0b4fc0167229d677cd06039)
feat(function): has_uncurry ([#3694](https://github.com/leanprover-community/mathlib/pull/#3694))

By Gabriel Ebner, from the sphere eversion project. See discussion at 
https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/recursive.20uncurry

Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2020-09-08T10:47:42+00:00](https://github.com/leanprover-community/mathlib/commit/1c53f91208ac2194a54d2baf0a8c8de84678bebd)
doc(tactic/lean_core_docs): congr understands subsingletons ([#4060](https://github.com/leanprover-community/mathlib/pull/#4060))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-09-08T00:47:47+00:00](https://github.com/leanprover-community/mathlib/commit/a16112d3eac76496b5783e0ea49246d8c0c07377)
doc(algebra/group/to_additive): order of to_additive relative to other attributes ([#4065](https://github.com/leanprover-community/mathlib/pull/#4065))

### [2020-09-07T19:41:48+00:00](https://github.com/leanprover-community/mathlib/commit/c7d6a8e753bff02e8998b959f392a9da46c8f587)
feat(ring_theory/unique_factorization_domain): descending chain condition for divisibility ([#4031](https://github.com/leanprover-community/mathlib/pull/#4031))

Defines the strict divisibility relation `dvd_not_unit`
Defines class `wf_dvd_monoid`, indicating that `dvd_not_unit` is well-founded
Provides instances of `wf_dvd_monoid`
Prepares to refactor `unique_factorization_domain` as a predicate extending `wf_dvd_monoid`



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>
Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2020-09-07T17:54:54+00:00](https://github.com/leanprover-community/mathlib/commit/851e83ec1ed4d097a9e0b035caff240443279352)
feat(category_theory): colimits for pi categories ([#4054](https://github.com/leanprover-community/mathlib/pull/#4054))

### [2020-09-07T13:36:36+00:00](https://github.com/leanprover-community/mathlib/commit/c259305a515ce5c5d54772e730a1b3538172b932)
feat(topology/algebra/floor_ring): add basic topological facts about `floor`, `ceil` and `fract` ([#4042](https://github.com/leanprover-community/mathlib/pull/#4042))

From the sphere eversion project

### [2020-09-07T07:49:55+00:00](https://github.com/leanprover-community/mathlib/commit/f253fa06f1853fa91215e5ba0069e1805af698cb)
feat(logic/basic): apply_dite2, apply_ite2 ([#4050](https://github.com/leanprover-community/mathlib/pull/#4050))

Add variants of `apply_dite` and `apply_ite` for two-argument
functions (in the case where I wanted `apply_ite`, the function was
addition).  I don't think there is any need for corresponding versions
of `dite_apply` or `ite_apply`, as two-argument versions of those
would be exactly the same as applying the one-argument version twice,
whereas that's not the case with `apply_dite2` and `apply_ite2`.

### [2020-09-07T05:46:33+00:00](https://github.com/leanprover-community/mathlib/commit/94b96cff7665a86d9ea806ecb62eb60849d798a9)
feat(algebraic_geometry/structure_sheaf): stalk_iso ([#4047](https://github.com/leanprover-community/mathlib/pull/#4047))

Given a ring `R` and a prime ideal `p`, construct an isomorphism of rings between the stalk of the structure sheaf of `R` at `p` and the localization of `R` at `p`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-09-07T00:51:55+00:00](https://github.com/leanprover-community/mathlib/commit/2e198b4a028749e05beae44b56c7943c7e7742d9)
chore(scripts): update nolints.txt ([#4058](https://github.com/leanprover-community/mathlib/pull/#4058))

I am happy to remove some nolints for you!

### [2020-09-06T23:47:49+00:00](https://github.com/leanprover-community/mathlib/commit/4662b2038b0a3593b2d2d772f92bb5ff098e770a)
feat(category_theory): definition of `diag` in `binary_products` ([#4051](https://github.com/leanprover-community/mathlib/pull/#4051))

### [2020-09-06T23:08:44+00:00](https://github.com/leanprover-community/mathlib/commit/4945c778ddcc5560abe0bce31c4d6c0d4b26d69a)
cleanup(ring_theory/ring_invo): update old module doc, add ring_invo.involution with cleaner statement ([#4052](https://github.com/leanprover-community/mathlib/pull/#4052))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-06T12:14:42+00:00](https://github.com/leanprover-community/mathlib/commit/de03e1916f93bf157ad4f46e47243b08a98a8a9e)
feat(analysis/normed_space/real_inner_product): linear independence of orthogonal vectors ([#4045](https://github.com/leanprover-community/mathlib/pull/#4045))

Add the lemma that an indexed family of nonzero, pairwise orthogonal
vectors is linearly independent.

### [2020-09-06T12:14:40+00:00](https://github.com/leanprover-community/mathlib/commit/1117ae79ad703cc313c9f8b62d906b43a2d18bf8)
feat(linear_algebra): Add lemmas about powers of endomorphisms ([#4036](https://github.com/leanprover-community/mathlib/pull/#4036))

Add lemmas about powers of endomorphisms and the corollary that every generalized eigenvector is a generalized eigenvector for exponent `findim K V`.

### [2020-09-06T11:28:33+00:00](https://github.com/leanprover-community/mathlib/commit/fabf34f466ea271bee448aaa1ddef931adc02855)
feat(analysis/special_functions/trigonometric): Added lemmas for deriv of tan ([#3746](https://github.com/leanprover-community/mathlib/pull/#3746))

I added lemmas for the derivative of the tangent function in both the complex and real namespaces. I also corrected two typos in comment lines.
<!-- put comments you want to keep out of the PR commit here -->

### [2020-09-06T06:48:30+00:00](https://github.com/leanprover-community/mathlib/commit/629638618f4af03b051bf81bc7a376e9fdbcdce3)
feat(data/mv_polynomial): fill in API for vars ([#4018](https://github.com/leanprover-community/mathlib/pull/#4018))

`mv_polynomial.vars` was missing a lot of API. This doesn't cover everything, but it fleshes out the theory quite a bit. There's probably more coming eventually -- this is what we have now.

Co-authored by: Johan Commelin <johan@commelin.net>



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-09-06T05:07:42+00:00](https://github.com/leanprover-community/mathlib/commit/7b3c653b75ec442afcee22306280ea8c3186bf67)
chore(data/finset/lattice): remove unneeded assumptions ([#4020](https://github.com/leanprover-community/mathlib/pull/#4020))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-09-05T13:51:33+00:00](https://github.com/leanprover-community/mathlib/commit/815a2f970617941cb39f1d948fc89984cde3cb58)
feat(computability/encoding): define encoding of basic data types ([#3976](https://github.com/leanprover-community/mathlib/pull/#3976))

We define the encoding of natural numbers and booleans to strings for Turing machines to be used in our future PR on polynomial time computation on Turing machines.



Co-authored-by: Pim <spelier.pim@gmail.com>
Co-authored-by: Pim Spelier <spelier.pim@gmail.com>

### [2020-09-05T09:19:56+00:00](https://github.com/leanprover-community/mathlib/commit/364d5d4c7daea8e95ed71c6a936ec0397406a028)
feat(linear_algebra/char_poly): rephrase Cayley-Hamilton with `aeval', define `matrix.min_poly` ([#4040](https://github.com/leanprover-community/mathlib/pull/#4040))

Rephrases the Cayley-Hamilton theorem to use `aeval`, renames it `aeval_self_char_poly`
Defines `matrix.min_poly`, the minimal polynomial of a matrix, which divides `char_poly`

### [2020-09-05T00:55:56+00:00](https://github.com/leanprover-community/mathlib/commit/ccd502afa100a16739c7119ee427b33b625e6ec8)
chore(scripts): update nolints.txt ([#4044](https://github.com/leanprover-community/mathlib/pull/#4044))

I am happy to remove some nolints for you!

### [2020-09-04T11:49:24+00:00](https://github.com/leanprover-community/mathlib/commit/7c9a86d4750a2c86132c9fc69400646c88817fdb)
refactor(geometry/manifold): use a sigma type for the total space of the tangent bundle ([#3966](https://github.com/leanprover-community/mathlib/pull/#3966))

Redefine the total space of the tangent bundle to be a sigma type instead of a product type. Before
```
have p : tangent_bundle I M := sorry,
rcases p with ⟨x, v⟩,
-- x: M
-- v: E
```
After
```
have p : tangent_bundle I M := sorry,
rcases p with ⟨x, v⟩,
-- x: M
-- v: tangent_space I x
```
This seems more natural, and is probably needed to do Riemannian manifolds right. The drawback is that we can not abuse identifications any more between the tangent bundle to a vector space and a product space (but we can still identify the tangent space with the vector space itself, which is the most important thing). 


Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-09-04T00:52:11+00:00](https://github.com/leanprover-community/mathlib/commit/ecf18c69e11819bb0ddf5911b8e7271efbd6571a)
refactor(field_theory/minimal_polynomial, *): make `aeval`, `is_integral`, and `minimal_polynomial` noncommutative ([#4001](https://github.com/leanprover-community/mathlib/pull/#4001))

Makes `aeval`, `is_integral`, and `minimal_polynomial` compatible with noncommutative algebras
Renames `eval₂_ring_hom_noncomm` to `eval₂_ring_hom'`

### [2020-09-03T21:00:06+00:00](https://github.com/leanprover-community/mathlib/commit/e3057ba4c8f148e39f5d5fe00a7e403fa4494291)
doc(slim_check): add suggestion ([#4024](https://github.com/leanprover-community/mathlib/pull/#4024))

### [2020-09-03T19:18:55+00:00](https://github.com/leanprover-community/mathlib/commit/a056ccbbced74400632aff5c6ea0bb09a105ab95)
feat(slim_check): subtype instances for `le` `lt` and `list.perm` ([#4027](https://github.com/leanprover-community/mathlib/pull/#4027))

### [2020-09-03T17:36:08+00:00](https://github.com/leanprover-community/mathlib/commit/2d40d9c69c9f73dd548a054f9b1fd7e683297925)
feat(data/padics): universal property of Z_p ([#3950](https://github.com/leanprover-community/mathlib/pull/#3950))

We establish the universal property of $\mathbb{Z}_p$ as a projective limit. Given a family of compatible ring homs $f_k : R \to \mathbb{Z}/p^n\mathbb{Z}$, there is a unique limit $R \to \mathbb{Z}_p$.

In addition, we:
* split `padic_integers.lean` into two files, creating `ring_homs.lean`
* renamings: `padic_norm_z.*` -> `padic_int.norm_*`


Co-authored-by: Johan Commelin <johan@commelin.net>



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-09-03T16:43:52+00:00](https://github.com/leanprover-community/mathlib/commit/49173c00fd6ccdfb2c0b9f703f44df4224056adf)
ci(scripts/detect_errors.py): enforce silent builds ([#4025](https://github.com/leanprover-community/mathlib/pull/#4025))

Refactor of [#3989](https://github.com/leanprover-community/mathlib/pull/#3989). 

This changes the GitHub Actions workflow so that the main build step and the test step run `lean` with `--json`. The JSON output is piped to `detect_errors.py` which now exits at the end of the build if there is any output and also writes a file `src/.noisy_files` with the names of the noisy Lean files. This file is now included in the olean caches uploaded to Azure.

The "try to find olean cache" step now uses `src/.noisy_files` to delete all of the `.olean` files corresponding to the noisy Lean files, thus making the results of CI idempotent (hopefully).



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-09-03T14:47:30+00:00](https://github.com/leanprover-community/mathlib/commit/8b277a9561a81eb50f068173eca6aad6ab19c9ed)
feat(category_theory/filtered): finite diagrams in filtered categories admit cocones ([#4026](https://github.com/leanprover-community/mathlib/pull/#4026))

This is only step towards eventual results about filtered colimits commuting with finite limits, `forget CommRing` preserving filtered colimits, and applications to `Scheme`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-03T11:22:52+00:00](https://github.com/leanprover-community/mathlib/commit/fa6485a5263e6c27922719ed053247a245a639ac)
feat(category_theory/limits/concrete): simp lemmas ([#3973](https://github.com/leanprover-community/mathlib/pull/#3973))

Some specialisations of simp lemmas about (co)limits for concrete categories, where the equation in morphisms has been applied to an element.

This isn't exhaustive; just the things I've wanted recently.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-03T04:04:29+00:00](https://github.com/leanprover-community/mathlib/commit/dd633c287dfaea3b008c608e6c436f0c2f4285f3)
feat(geometry/euclidean/circumcenter): more lemmas ([#4028](https://github.com/leanprover-community/mathlib/pull/#4028))

Add some more basic lemmas about `circumcenter` and `circumradius`.

### [2020-09-03T01:52:48+00:00](https://github.com/leanprover-community/mathlib/commit/c86359f7e43faa9ea21176b75cd279fc9128988d)
chore(scripts): update nolints.txt ([#4030](https://github.com/leanprover-community/mathlib/pull/#4030))

I am happy to remove some nolints for you!

### [2020-09-03T01:52:46+00:00](https://github.com/leanprover-community/mathlib/commit/ca5703d56a12c0b891c53b06978e7aae184aaa15)
fix(docs/100.yaml): fix indentation in 100 list ([#4029](https://github.com/leanprover-community/mathlib/pull/#4029))

### [2020-09-03T00:15:49+00:00](https://github.com/leanprover-community/mathlib/commit/7b9db99c4e4f17c4d9da42b6462aac3179d5ec1e)
fix(test/*): make sure tests produce no output ([#3947](https://github.com/leanprover-community/mathlib/pull/#3947))

Modify tests so that they produce no output. This also means removing all uses of `sorry`/`admit`.
Replace `#eval` by `run_cmd` consistently.
Tests that produced output before are modified so that it is checked that they roughly produce the right output
Add a trace option to the `#simp` command that turns the message of only if the expression is simplified to `true`. All tests are modified so that they simplify to `true`.
The randomized tests can produce output when they find a false positive, but that should basically never happen.
Add some docstings to `src/tactic/interactive`.

### [2020-09-02T19:38:06+00:00](https://github.com/leanprover-community/mathlib/commit/9d42f6c6a0a2329b944ab03502c56ab6c2549180)
feat(order/rel_iso): define `rel_hom` (relation-preserving maps) ([#3946](https://github.com/leanprover-community/mathlib/pull/#3946))

Creates a typeclass for (unidirectionally) relation-preserving maps that are not necessarily injective
(In the case of <= relations, this is essentially a bundled monotone map)
Proves that these transfer well-foundedness between relations

### [2020-09-02T15:51:17+00:00](https://github.com/leanprover-community/mathlib/commit/57463fa4a648d15b59ded0eeacfe18dbacdf5ba4)
feat(linear_algebra/affine_space): more lemmas ([#3990](https://github.com/leanprover-community/mathlib/pull/#3990))

Add another batch of lemmas about affine spaces.  These lemmas mostly
relate to manipulating centroids and the relations between centroids
of points given by different subsets of the index type.

### [2020-09-02T15:11:55+00:00](https://github.com/leanprover-community/mathlib/commit/71ef45e2e2305988fe714c45f747c834b91e4fd4)
chore(topology/sheaves): depend less on rfl ([#3994](https://github.com/leanprover-community/mathlib/pull/#3994))

Another backport from the `prop_limits` branch.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-02T13:19:05+00:00](https://github.com/leanprover-community/mathlib/commit/895f6ee76e79b9374e4dc4f468c0325dddfd88e3)
chore(algebra/category/CommRing/limits): don't use deprecated.subring ([#4010](https://github.com/leanprover-community/mathlib/pull/#4010))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-02T13:19:01+00:00](https://github.com/leanprover-community/mathlib/commit/ddbdfeb5c13c4cc3cc539adba7a129d63b196b37)
chore(data/fin): succ_above defn compares fin terms instead of values ([#3999](https://github.com/leanprover-community/mathlib/pull/#3999))

`fin.succ_above` is redefined to use a comparison between two `fin (n + 1)` instead of their coerced values in `nat`. This should delay any "escape" from `fin` into `nat` until necessary. Lemmas are added regarding `fin.succ_above`. Some proofs for existing lemmas reworked for new definition and simplified. Additionally, docstrings are added for related lemmas.

New lemmas:
Comparison after embedding:
`succ_above_lt_ge`
`succ_above_lt_gt`

Injectivity lemmas:
`succ_above_right_inj`
`succ_above_right_injective`
`succ_above_left_inj`
`succ_above_left_injective`

finset lemma:
`fin.univ_succ_above`

prod and sum lemmas:
`fin.prod_univ_succ_above`



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2020-09-02T13:18:59+00:00](https://github.com/leanprover-community/mathlib/commit/96c80e2414732170bd8e725c6a62a01b7ec9be7e)
feat(ring_theory/localization): Localizations of integral extensions ([#3942](https://github.com/leanprover-community/mathlib/pull/#3942))

The main definition is the algebra induced by localization at an algebra. Given an algebra `R → S` and a submonoid `M` of `R`, as well as localization maps `f : R → Rₘ` and `g : S → Sₘ`, there is a natural algebra `Rₘ → Sₘ` that makes the entire square commute, and this is defined as `localization_algebra`. 

The two main theorems are similar but distinct statements about integral elements and localizations:
* `is_integral_localization_at_leading_coeff` says that if an element `x` is algebraic over `algebra R S`, then if we localize to a submonoid containing the leading coefficient the image of `x` will be integral.
* `is_integral_localization` says that if `R → S` is an integral extension, then the algebra induced by localizing at any particular submonoid will be an integral extension.


Co-authored-by: Devon Tuma <dtumad@gmail.com>

### [2020-09-02T11:43:54+00:00](https://github.com/leanprover-community/mathlib/commit/cd36773a5a41fac297d4cbef572090258c1e2cc4)
feat(linear_algebra/eigenspace): add generalized eigenspaces ([#4015](https://github.com/leanprover-community/mathlib/pull/#4015))

Add the definition of generalized eigenspaces, eigenvectors and eigenvalues. Add some basic lemmas about them.

Another step towards [#3864](https://github.com/leanprover-community/mathlib/pull/#3864).

### [2020-09-02T08:30:45+00:00](https://github.com/leanprover-community/mathlib/commit/7310eab9fa8c1b1229dca42682f1fa6bfb7dbbf9)
feat(field_theory/adjoin): adjoining elements to fields ([#3913](https://github.com/leanprover-community/mathlib/pull/#3913))

Defines adjoining elements to fields




Co-authored-by: tb65536 <tb65536@users.noreply.github.com>
Co-authored-by: Patrick Lutz <pglutz@berkeley.edu>

### [2020-09-02T06:01:22+00:00](https://github.com/leanprover-community/mathlib/commit/8026ea8aac8fd66a75fa6c98a2361bd787a477c9)
feat(ring_theory/localization): localization away from an element ([#4019](https://github.com/leanprover-community/mathlib/pull/#4019))

### [2020-09-02T00:37:30+00:00](https://github.com/leanprover-community/mathlib/commit/0b4444ca1870767f085b439903676f7cbfe0fbf8)
feat(pfun/recursion): unbounded recursion ([#3778](https://github.com/leanprover-community/mathlib/pull/#3778))



Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2020-09-01T23:53:35+00:00](https://github.com/leanprover-community/mathlib/commit/d94643c52e3ea1a2cc1e7cdc72425ff43d968e0c)
doc(slim_check): improve documentation, swap instances ([#4023](https://github.com/leanprover-community/mathlib/pull/#4023))

### [2020-09-01T23:53:33+00:00](https://github.com/leanprover-community/mathlib/commit/ef22a33f88133cccb0b7f218b016ca815e2a3511)
feat(slim_check/errors): improve error messages and add useful instances ([#4022](https://github.com/leanprover-community/mathlib/pull/#4022))

### [2020-09-01T18:54:03+00:00](https://github.com/leanprover-community/mathlib/commit/0c2e77c9ab2b570d41cde514b7ba74c7748ef3c9)
feat(testing): property based testing (basics) ([#3915](https://github.com/leanprover-community/mathlib/pull/#3915))

Add `gen` monad, `sampleable` and `testable` type classes

### [2020-09-01T12:58:32+00:00](https://github.com/leanprover-community/mathlib/commit/329393a78d910d4e347d2abe0905bd72bda9c2bf)
feat(analysis/calculus/times_cont_diff): iterated smoothness in terms of deriv ([#4017](https://github.com/leanprover-community/mathlib/pull/#4017))


Currently, iterated smoothness is only formulated in terms of the Fréchet derivative. For one-dimensional functions, it is more handy to use the one-dimensional derivative `deriv`. This PR provides a basic interface in this direction.

### [2020-09-01T12:58:30+00:00](https://github.com/leanprover-community/mathlib/commit/849a5f9b1fe04f2a4ac3a821a761840d8b445f98)
feat(docs,ci): move overview, undergrad, and 100 theorems lists from website ([#4016](https://github.com/leanprover-community/mathlib/pull/#4016))

See conversation at https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/website.20overview/near/208659351

We'll store these lists in mathlib so that we can catch breakage as soon as it happens, rather than continually repairing the website build. This PR adds the lists and a CI step that checks that every declaration name appearing in the lists actually exists in the library.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-09-01T12:18:06+00:00](https://github.com/leanprover-community/mathlib/commit/6a5241f2bf5e9a027b4295fcfae2cd2b32740465)
refactor(algebra/category/*, category_theory/concrete_category): generalize universes for concrete categories ([#3687](https://github.com/leanprover-community/mathlib/pull/#3687))

Currently, concrete categories need to be `large_category`s. In particular, if objects live in `Type u`, then morphisms live in `Type (u + 1)`. For the category of modules over some ring R, this is not necessarily true, because we have to take the universe of R into account. One way to deal with this problem is to just force the universe of the ring to be the same as the universe of the module. This [sounds like it shouldn't be much of an issue](https://github.com/leanprover-community/mathlib/pull/1420#discussion_r322607455), but unfortunately, [it is](https://github.com/leanprover-community/mathlib/pull/3621#issue-458293664).

This PR
* removes the constraint that a concrete category must be a `large_category`,
* generalizes `Module R` and `Algebra R` to accept a universe parameter for the module/algebra and
* adds a ton of universe annotations which become neccesary because of the change

As a reward, we get `abelian AddCommGroup.{u}` for arbitrary `u` without any (additional) work.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-01T09:54:45+00:00](https://github.com/leanprover-community/mathlib/commit/a97d71b5f24e8507627926460d2c02e25c3a1edb)
feat(data/mv_polynomial): assorted lemmas ([#4002](https://github.com/leanprover-community/mathlib/pull/#4002))

Assorted additions to `mv_polynomial`. This is more from the Witt vector development. Nothing too deep here, just scattered lemmas and the `constant_coeff` ring hom.

Coauthored by: Johan Commelin <johan@commelin.net>


<!-- put comments you want to keep out of the PR commit here -->

Hopefully this builds -- it's split off from a branch with a lot of other changes. I think it shouldn't have dependencies!

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-09-01T06:48:21+00:00](https://github.com/leanprover-community/mathlib/commit/2688d42b3e1b8f65a48e5cfc77f6db3c11e00ccf)
feat(archive/100-theorems-list): friendship theorem (nr 83) ([#3970](https://github.com/leanprover-community/mathlib/pull/#3970))

defines friendship graphs
proves the friendship theorem (freek [#83](https://github.com/leanprover-community/mathlib/pull/#83))




Co-authored-by: Aaron Anderson <awainverse@gmail.com>

### [2020-09-01T04:51:03+00:00](https://github.com/leanprover-community/mathlib/commit/12763eccda459667de01749bb2f1f8ec22d66c93)
chore(*): more use of bundled ring homs ([#4012](https://github.com/leanprover-community/mathlib/pull/#4012))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-09-01T04:51:01+00:00](https://github.com/leanprover-community/mathlib/commit/51546d29f8be1edfd66893ae09fab986c0fbe785)
chore(ring_theory/free_ring): use bundled ring homs ([#4011](https://github.com/leanprover-community/mathlib/pull/#4011))

Use bundled ring homs in `free_ring` and `free_comm_ring`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-01T04:50:59+00:00](https://github.com/leanprover-community/mathlib/commit/93468fee1888f18382c68bbbca2bc054db7ee2fb)
chore(algebraic_geometry/Spec): reduce imports ([#4007](https://github.com/leanprover-community/mathlib/pull/#4007))

The main change is to remove some `example`s from `topology.category.TopCommRing`, so that we don't need to know about the real and complex numbers on the way to defining a `Scheme`.

While I was staring at `leanproject import-graph --to algebraic_geometry.Scheme`, I also removed a bunch of redundant or unused imports elsewhere.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-09-01T04:50:57+00:00](https://github.com/leanprover-community/mathlib/commit/551cf8e215a7d5194a77b906a197429717f919e8)
refactor(algebra/associates): unite `associates.prime` with `prime` ([#3988](https://github.com/leanprover-community/mathlib/pull/#3988))

deletes `associates.prime`, replaces it with the existing `prime`

### [2020-09-01T04:50:54+00:00](https://github.com/leanprover-community/mathlib/commit/7cd67b56bedf7c96b41ed28f9bd0c5aad9b0e611)
feat(category_theory/limits/shapes/terminal): is_terminal object ([#3957](https://github.com/leanprover-community/mathlib/pull/#3957))

Add language to talk about when an object is terminal, and generalise some results to use this

### [2020-09-01T03:18:29+00:00](https://github.com/leanprover-community/mathlib/commit/fc57cf49b6c4020aeb149d2972f8afd256433553)
feat(data/{finset,finsupp,multiset}): more assorted lemmas ([#4006](https://github.com/leanprover-community/mathlib/pull/#4006))

Another grab bag of facts from the Witt vector branch.

Coauthored by: Johan Commelin <johan@commelin.net>

<!-- put comments you want to keep out of the PR commit here -->


Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-09-01T01:12:55+00:00](https://github.com/leanprover-community/mathlib/commit/c33b41b08c350766d498811ebb1a59656460e849)
chore(scripts): update nolints.txt ([#4009](https://github.com/leanprover-community/mathlib/pull/#4009))

I am happy to remove some nolints for you!

### [2020-09-01T00:04:06+00:00](https://github.com/leanprover-community/mathlib/commit/e053bdabb651901a0d40996e5179c910ad576fda)
feat(category_theory/monoidal/internal): Mon_ (Module R) ≌ Algebra R ([#3695](https://github.com/leanprover-community/mathlib/pull/#3695))

The category of internal monoid objects in `Module R`
is equivalent to the category of "native" bundled `R`-algebras.

Moreover, this equivalence is compatible with the forgetful functors to `Module R`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-31T22:41:43+00:00](https://github.com/leanprover-community/mathlib/commit/036527ae41ff0f863c91be8a547b5c2284cb16d7)
feat(linear_algebra/finite_dimensional): eq_of_le_of_findim_eq ([#4005](https://github.com/leanprover-community/mathlib/pull/#4005))

Add a variant of `eq_top_of_findim_eq`, where instead of proving a
submodule equal to `⊤`, it's shown equal to another finite-dimensional
submodule with the same dimension that contains it.  The two lemmas
are related by the `comap_subtype` lemmas, so the proof is short, but
it still seems useful to have this form.

### [2020-08-31T22:11:18+00:00](https://github.com/leanprover-community/mathlib/commit/be3b1758112d104d4684de4ae96be827946a06d3)
feat(analysis/normed_space/real_inner_product): inner_add_sub_eq_zero_iff ([#4004](https://github.com/leanprover-community/mathlib/pull/#4004))

Add a lemma that the sum and difference of two vectors are orthogonal
if and only if they have the same norm.  (This can be interpreted
geometrically as saying e.g. that a median of a triangle from a vertex
is orthogonal to the opposite edge if and only if the triangle is
isosceles at that vertex.)

### [2020-08-31T19:25:35+00:00](https://github.com/leanprover-community/mathlib/commit/d0a8cc4b453a8049284858fb8a977fd949dbaab9)
feat(analysis/special_functions/trigonometric): ranges of `real.sin` and `real.cos` ([#3998](https://github.com/leanprover-community/mathlib/pull/#3998))



Co-authored-by: Anatole Dedecker <48656793+ADedecker@users.noreply.github.com>

### [2020-08-31T17:07:43+00:00](https://github.com/leanprover-community/mathlib/commit/d4484a4e6300e02947d3940d9f40dbab9e0e1582)
fix(widget): workaround for webview rendering bug ([#3997](https://github.com/leanprover-community/mathlib/pull/#3997))

See https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extension.20performance
The bug seems to go away if we collapse the extra nested spans made by `block` in to one span.

Still should do some tests to make sure this doesn't break anything else.

Minimal breaking example is:

```
import tactic.interactive_expr

example :
0+1+2+3+4+5+6+7+8+9 +
0+1+2+3+4+5+6+7+8+9 =
0+1+2+3+4+5+6+7+8+9 :=
by skip
```




Co-authored-by: Ed Ayers <EdAyers@users.noreply.github.com>

### [2020-08-31T15:32:01+00:00](https://github.com/leanprover-community/mathlib/commit/d2b18a18f6c8e7eca9919316722d4f92fd0f2f98)
feat(algebra/field, ring_theory/ideal/basic): an ideal is maximal iff the quotient is a field ([#3986](https://github.com/leanprover-community/mathlib/pull/#3986))

One half of the theorem was already proven (the implication maximal
ideal implies that the quotient is a field), but the other half was not,
mainly because it was missing a necessary predicate.
I added the predicate is_field that can be used to tell Lean that the
usual ring structure on the quotient extends to a field. The predicate
along with proofs to move between is_field and field were provided by
Kevin Buzzard. I also added a lemma that the inverse is unique in
is_field.
At the end I also added the iff statement of the theorem.




Co-authored-by: AlexandruBosinta <32337238+AlexandruBosinta@users.noreply.github.com>

### [2020-08-31T14:45:05+00:00](https://github.com/leanprover-community/mathlib/commit/8089f5060a14c9a24a5ad082848f2ae36eee175b)
chore(category_theory/limits): some simp lemmas ([#3993](https://github.com/leanprover-community/mathlib/pull/#3993))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-31T13:17:44+00:00](https://github.com/leanprover-community/mathlib/commit/9e9e318c78c8aecbc3fcb0223e6f3d3aeba762c5)
feat(data/fin): simplify fin.mk ([#3996](https://github.com/leanprover-community/mathlib/pull/#3996))

After the recent changes to make `fin n` a subtype, expressions
involving `fin.mk` were not getting simplified as they used to be,
since the `simp` lemmas are for the anonymous constructor, which is
`subtype.mk` not `fin.mk`.  Add a `simp` lemma converting `fin.mk` to
the anonymous constructor.

In particular, unsimplified expressions involving `fin.mk` were coming
out of `fin_cases` (I think this comes from `fin_range` in
`data/list/range.lean` using `fin.mk`).  I don't know if that should
be avoiding creating the `fin.mk` expressions in the first place, but
simplifying them seems a good idea in any case.

### [2020-08-31T08:47:27+00:00](https://github.com/leanprover-community/mathlib/commit/10ebb71808d8c6b4c9793aca2788ff266e6234d8)
feat(measure_theory): induction principles in measure theory ([#3978](https://github.com/leanprover-community/mathlib/pull/#3978))

This commit adds three induction principles for measure theory
* To prove something for arbitrary simple functions
* To prove something for arbitrary measurable functions into `ennreal`
* To prove something for arbitrary measurable + integrable functions.

This also adds some basic lemmas to various files. Not all of them are used in this PR, some will be used by near-future PRs.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-08-31T08:11:24+00:00](https://github.com/leanprover-community/mathlib/commit/bf7487b5b9c294b6d3b5b513d250729f98698d71)
fix(algebraic_geometry/Spec): inline TeX in heading ([#3992](https://github.com/leanprover-community/mathlib/pull/#3992))

### [2020-08-31T05:09:37+00:00](https://github.com/leanprover-community/mathlib/commit/b79fc0379ae786153fc22ce5ee6751505e36a3d9)
feature(algebraic_geometry/Scheme): the category of schemes ([#3961](https://github.com/leanprover-community/mathlib/pull/#3961))

The definition of a `Scheme`, and the category of schemes as the full subcategory of locally ringed spaces.

Co-authored-by: Johan Commelin <johan@commelin.net>



Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Ashvni <ashvni.n@gmail.com>

### [2020-08-30T23:20:13+00:00](https://github.com/leanprover-community/mathlib/commit/e88843ca30f8528899ef04aa0846604e078fdeb0)
feat(data/finset/sort): range_mono_of_fin ([#3987](https://github.com/leanprover-community/mathlib/pull/#3987))

Add a `simp` lemma giving the range of `mono_of_fin`.

### [2020-08-30T18:40:35+00:00](https://github.com/leanprover-community/mathlib/commit/861f182160b900e97013df7e8fa992d386e1556d)
feat(widget): add go to definition button. ([#3982](https://github.com/leanprover-community/mathlib/pull/#3982))

Now you can hit a new button in the tooltip and it will reveal the definition location in the editor!

Co-authored-by: Ed Ayers <EdAyers@users.noreply.github.com>

### [2020-08-30T17:12:27+00:00](https://github.com/leanprover-community/mathlib/commit/f9ee4166082b0a6c8a7f60a60b1d57ca2444af64)
feat(topology/tactic): optionally make `continuity` verbose with `?` ([#3962](https://github.com/leanprover-community/mathlib/pull/#3962))

### [2020-08-30T15:37:08+00:00](https://github.com/leanprover-community/mathlib/commit/1073204e9437c13c71b191d1b795c89082f1d5b3)
feat(logic/nontrivial): function.injective.exists_ne ([#3983](https://github.com/leanprover-community/mathlib/pull/#3983))

Add a lemma that an injective function from a nontrivial type has an
argument at which it does not take a given value.

### [2020-08-30T11:24:28+00:00](https://github.com/leanprover-community/mathlib/commit/942c779dbf550f0e6f5ea19fab748360d0e394a3)
feat(meta/widget): Add css classes for indentation as required by group and nest. ([#3764](https://github.com/leanprover-community/mathlib/pull/#3764))

this is a transplant of https://github.com/leanprover-community/lean/pull/439

the relevant css section looks more or less like this:
```css
        .indent-code {
            text-indent: calc(var(--indent-level) * -1ch);
            padding-left: calc(var(--indent-level) * 1ch);
        }
```

For details, one can play around here: https://jsfiddle.net/xbzhL60m/45/


Co-authored-by: Ed Ayers <EdAyers@users.noreply.github.com>
Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: E.W.Ayers <E.W.Ayers@maths.cam.ac.uk>

### [2020-08-30T05:38:17+00:00](https://github.com/leanprover-community/mathlib/commit/ffce8f67cbdb3ed53e3db5d351b6844693eb8931)
feat(data/complex/is_R_or_C): add typeclass for real or complex ([#3934](https://github.com/leanprover-community/mathlib/pull/#3934))



Co-authored-by: jalex-stark <alexmaplegm@gmail.com>
Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2020-08-30T04:53:26+00:00](https://github.com/leanprover-community/mathlib/commit/a18f142d831860e6dd0efdf6117a91700764eee7)
feat(set_theory/game): computation of grundy_value (nim n + nim m) ([#3977](https://github.com/leanprover-community/mathlib/pull/#3977))

### [2020-08-30T01:59:33+00:00](https://github.com/leanprover-community/mathlib/commit/dfdb38ab4c18155c21d24c4e60c302d9b00000c9)
feat(data/fin): nontrivial instance ([#3979](https://github.com/leanprover-community/mathlib/pull/#3979))

Add an instance `nontrivial (fin (n + 2))`.

### [2020-08-29T17:36:23+00:00](https://github.com/leanprover-community/mathlib/commit/14e7fe83aec976c37de482d6b443b8ccafb4e2d2)
feat(linear_algebra/char_poly/coeff,*): prerequisites for friendship theorem ([#3953](https://github.com/leanprover-community/mathlib/pull/#3953))

adds several assorted lemmas about matrices and `zmod p`
proves that if `M` is a square matrix with entries in `zmod p`, then `tr M^p = tr M`, needed for friendship theorem




Co-authored-by: Aaron Anderson <awainverse@gmail.com>

### [2020-08-29T17:36:21+00:00](https://github.com/leanprover-community/mathlib/commit/4c4243c50ef5a956f14e426d8023749823ce2445)
feat(linear_algebra): determinant of vectors in a basis ([#3919](https://github.com/leanprover-community/mathlib/pull/#3919))

From the sphere eversion project, define the determinant of a family of vectors with respects to a basis. 

The main result is `is_basis.iff_det` asserting a family of vectors is a basis iff its determinant in some basis is invertible.

Also renames `equiv_fun_basis` to `is_basis.equiv_fun` and `equiv_fun_basis_symm_apply` to `is_basis.equiv_fun_symm_apply`, in order to use dot notation.

Co-authored-by: Anne Baanen t.baanen@vu.nl



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-08-29T15:59:15+00:00](https://github.com/leanprover-community/mathlib/commit/94b1292f9e2ba82ca3db8b47443d6c33aa4256f7)
doc(topology/sheaves): update module docs ([#3971](https://github.com/leanprover-community/mathlib/pull/#3971))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-29T15:59:13+00:00](https://github.com/leanprover-community/mathlib/commit/ba41f0a4a497f30648af0f82e652926c64327d97)
feat(data/nat): API for test_bit and bitwise operations ([#3964](https://github.com/leanprover-community/mathlib/pull/#3964))

### [2020-08-29T14:16:16+00:00](https://github.com/leanprover-community/mathlib/commit/faf1df487879826e4a46cd0f52c79e72ab41952c)
chore(topology/sheaves/sheaf_of_functions): rely less on defeq ([#3972](https://github.com/leanprover-community/mathlib/pull/#3972))

This backports some changes from the `prop_limits` branch.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-29T14:16:14+00:00](https://github.com/leanprover-community/mathlib/commit/fd4628f11983ed10448991504e6638353ac77ed8)
chore(*): bump to lean 3.19.0c, fin is now a subtype ([#3955](https://github.com/leanprover-community/mathlib/pull/#3955))

* Some `decidable.*` order theorems have been moved to core.

* `fin` is now a subtype. 
This means that the whnf of `fin n` is now `{i // i < n}`.
Also, the coercion `fin n → nat` is now preferred over `subtype.val`.
The entire library has been refactored accordingly. (Although I probably missed some cases.)

* `in_current_file'` was removed since the bug in 
`in_current_file` was fixed in core.

* The syntax of `guard_hyp` in core was changed from
`guard_hyp h := t` to `guard_hyp h : t`, so the syntax
for the related `guard_hyp'`, `match_hyp` and
`guard_hyp_strict` tactics in `tactic.interactive` was changed as well.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-08-29T13:43:16+00:00](https://github.com/leanprover-community/mathlib/commit/17c4651c593391462d55f7f990dc05e54ec8ee39)
feat(algebraic_geometry): structure sheaf on Spec R ([#3907](https://github.com/leanprover-community/mathlib/pull/#3907))

This defines the structure sheaf on Spec R, following Hartshorne, as a sheaf in `CommRing` on `prime_spectrum R`.

We still need to show at the stalk at a point is just the localization; this is another page of Hartshorne, and will come in a subsequent PR.



Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Ashvni <ashvni.n@gmail.com>

### [2020-08-29T11:21:31+00:00](https://github.com/leanprover-community/mathlib/commit/84d47a0f73c4d8470878394470ca24dca4f4104e)
refactor(set_theory/game): make impartial a class ([#3974](https://github.com/leanprover-community/mathlib/pull/#3974))

* Misc. style cleanups and code golf
* Changed naming and namespace to adhere more closely to the naming convention
* Changed `impartial` to be a `class`. I am aware that @semorrison explicitly requested not to make `impartial` a class in the [#3855](https://github.com/leanprover-community/mathlib/pull/#3855), but after working with the definition a bit I concluded that making it a class is worth it, simply because writing `impartial_add (nim_impartial _) (nim_impartial _)` gets annoying quite quickly, but also because you tend to get goal states of the form `Grundy_value _ = Grundy_value _`. By making `impartial` a class and making the game argument explicit, these goal states look like `grundy_value G = grundy_value H`, which is much nicer to work with.

### [2020-08-29T04:30:09+00:00](https://github.com/leanprover-community/mathlib/commit/ea177c2ac97e144699a584b8acd368b50bc2f4be)
feat(analysis/convex): add correspondence between convex cones and ordered semimodules ([#3931](https://github.com/leanprover-community/mathlib/pull/#3931))

This shows that a convex cone defines an ordered semimodule and vice-versa.


Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2020-08-29T02:58:36+00:00](https://github.com/leanprover-community/mathlib/commit/53275f49937009c7ee5ec27616e4151fcc0e245e)
chore(algebra/group_with_zero): adjust some instance priorities ([#3968](https://github.com/leanprover-community/mathlib/pull/#3968))

Use priority 100 for these `extends` instances.

### [2020-08-29T00:44:57+00:00](https://github.com/leanprover-community/mathlib/commit/2d3530d5aafa54a0a86c852392124040114406cf)
chore(scripts): update nolints.txt ([#3969](https://github.com/leanprover-community/mathlib/pull/#3969))

I am happy to remove some nolints for you!

### [2020-08-28T16:07:49+00:00](https://github.com/leanprover-community/mathlib/commit/4ccbb5143047063bab89691bf987e09cda82bac0)
feat(linear_algebra): eigenspaces of linear maps ([#3927](https://github.com/leanprover-community/mathlib/pull/#3927))

Add eigenspaces and eigenvalues of linear maps. Add lemma that in a
finite-dimensional vector space over an algebraically closed field,
eigenvalues exist. Add lemma that eigenvectors belonging to distinct
eigenvalues are linearly independent.

This is a rework of [#3864](https://github.com/leanprover-community/mathlib/pull/#3864), following Cyril's suggestion. Generalized
eigenspaces will come in a subsequent PR.

### [2020-08-28T15:21:57+00:00](https://github.com/leanprover-community/mathlib/commit/1353b7e76cb4e27e68ce3439a80bc485bb15365b)
chore(group_theory/perm/sign): speed up proofs ([#3963](https://github.com/leanprover-community/mathlib/pull/#3963))

fixes [#3958](https://github.com/leanprover-community/mathlib/pull/#3958) 

based on my completely unscientific test methods, this went from 40 seconds to ~~19~~ 17 seconds (on my laptop).

What I've done here is just `squeeze_simp`, but further speedup is definitely possible. Suggestions for what to do with `simp [*, eq_inv_iff_eq] at * <|> cc` are welcome, and should speed this file up a bit more.

### [2020-08-28T14:46:42+00:00](https://github.com/leanprover-community/mathlib/commit/d77798a42955610e495f14bcdbfdf1961f5c9b1d)
doc(representation_theory/maschke): fix latex ([#3965](https://github.com/leanprover-community/mathlib/pull/#3965))

### [2020-08-28T14:11:16+00:00](https://github.com/leanprover-community/mathlib/commit/31db0bddf31d736670d12c672c58176eeecd388a)
feat(category_theory/limits): add kernel pairs ([#3925](https://github.com/leanprover-community/mathlib/pull/#3925))

Add a subsingleton data structure expressing that a parallel pair of morphisms is a kernel pair of a given morphism.

Another PR from my topos project. A pretty minimal API since I didn't need much there - I also didn't introduce anything like `has_kernel_pairs` largely because I didn't need it, but also because I don't know that it's useful for anyone, and it might conflict with ideas in the prop-limits branch.

### [2020-08-28T10:25:09+00:00](https://github.com/leanprover-community/mathlib/commit/a08fb2f74e1767bd6338504c4ee29a0fe1866a48)
feat(tactic/congr): additions to the congr' tactic ([#3936](https://github.com/leanprover-community/mathlib/pull/#3936))

This PR gives a way to apply `ext` after `congr'`.
`congr' 3 with x y : 2` is a new notation for `congr' 3; ext x y : 2`.
New tactic `rcongr` that recursively keeps applying `congr'` and `ext`.
Move `congr'` and every tactic depending on it from `tactic/interactive` to a new file `tactic/congr`.
The original `tactic.interactive.congr'` is now best called as `tactic.congr'`. 
Other than the tactics `congr'` and `rcongr` no tactics have been (essentially) changed.

### [2020-08-28T07:24:16+00:00](https://github.com/leanprover-community/mathlib/commit/ceacf54101b35b5246a4aea9e17164371c56b30f)
feat(category_theory/filtered): filtered categories, and filtered colimits in `Type` ([#3960](https://github.com/leanprover-community/mathlib/pull/#3960))

This is some work @rwbarton did last year. I've merged master, written some comments, and satisfied the linter.



Co-authored-by: Reid Barton <rwbarton@gmail.com>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-28T05:18:40+00:00](https://github.com/leanprover-community/mathlib/commit/513f7407f5ab75f00c7c3c60d5c0492f6598b88b)
feat(topology/sheaves): checking the sheaf condition under a forgetful functor ([#3609](https://github.com/leanprover-community/mathlib/pull/#3609))

# Checking the sheaf condition on the underlying presheaf of types.

If `G : C ⥤ D` is a functor which reflects isomorphisms and preserves limits
(we assume all limits exist in both `C` and `D`),
then checking the sheaf condition for a presheaf `F : presheaf C X`
is equivalent to checking the sheaf condition for `F ⋙ G`.

The important special case is when
`C` is a concrete category with a forgetful functor
that preserves limits and reflects isomorphisms.
Then to check the sheaf condition it suffices
to check it on the underlying sheaf of types.

## References
* https://stacks.math.columbia.edu/tag/0073



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-28T03:16:37+00:00](https://github.com/leanprover-community/mathlib/commit/7e6393f86b8736a9d7eb4e1c9b70e42233a1651b)
feat(topology/sheaves): the sheaf condition for functions satisfying a local predicate ([#3906](https://github.com/leanprover-community/mathlib/pull/#3906))

Functions satisfying a local predicate form a sheaf.

This sheaf has a natural map from the stalk to the original fiber, and we give conditions for this map to be injective or surjective.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-27T20:30:40+00:00](https://github.com/leanprover-community/mathlib/commit/eaaac992d0a564071242d08fadffeee3043f91d7)
feat(geometry/euclidean/basic): reflection ([#3932](https://github.com/leanprover-community/mathlib/pull/#3932))

Define the reflection of a point in an affine subspace, as a bundled
isometry, in terms of the orthogonal projection onto that subspace,
and prove some basic lemmas about it.

### [2020-08-27T18:31:26+00:00](https://github.com/leanprover-community/mathlib/commit/359261ef2fcefde16b6fe2918401923bd1aac719)
feat(data/nat): commutativity of bitwise operations ([#3956](https://github.com/leanprover-community/mathlib/pull/#3956))

### [2020-08-27T14:44:42+00:00](https://github.com/leanprover-community/mathlib/commit/6b556cf19da78b122d2c3a5f2103f744c85e310f)
feat(combinatorics/adjacency_matrix): defines adjacency matrices of simple graphs ([#3672](https://github.com/leanprover-community/mathlib/pull/#3672))

defines the adjacency matrix of a simple graph
proves lemmas about adjacency matrix that will form the bulk of the proof of the friendship theorem (freek 83)



Co-authored-by: Aaron Anderson <awainverse@gmail.com>

### [2020-08-27T06:25:31+00:00](https://github.com/leanprover-community/mathlib/commit/ea9bf31ef56ab2ca928c1dc11c5fa80374b20d51)
refactor(analysis/normed_space/real_inner_product,geometry/euclidean): orthogonal projection hypotheses ([#3952](https://github.com/leanprover-community/mathlib/pull/#3952))

As advised by Patrick in [#3932](https://github.com/leanprover-community/mathlib/pull/#3932), define `orthogonal_projection` (for
both real inner product spaces and Euclidean affine spaces) without
taking hypotheses of the subspace being nonempty and complete,
defaulting to the identity map if those conditions are not satisfied,
so making `orthogonal_projection` more convenient to use with those
properties only being needed on lemmas but not simply to refer to the
orthogonal projection at all.

The hypotheses are removed from lemmas that don't need them because
they are still true with the identity map.  Some `nonempty` hypotheses
are also removed where they follow from another hypothesis that gives
a point or a nonempty set of points in the subspace.

The unbundled `orthogonal_projection_fn` that's used only to prove
properties needed to define a bundled linear or affine map still takes
the original hypotheses, then a bundled map taking those hypotheses is
defined under a new name, then that map is used to define plain
`orthogonal_projection` which does not take any of those hypotheses
and is the version expected to be used in all lemmas after it has been
defined.

### [2020-08-27T00:47:46+00:00](https://github.com/leanprover-community/mathlib/commit/5627aed77f33243b7637fd79644275eebc9933fe)
chore(scripts): update nolints.txt ([#3954](https://github.com/leanprover-community/mathlib/pull/#3954))

I am happy to remove some nolints for you!

### [2020-08-26T20:24:56+00:00](https://github.com/leanprover-community/mathlib/commit/c14789485c73f7f9d0349eba64b289f3018c932b)
feat(data/fin): flesh out API for fin ([#3769](https://github.com/leanprover-community/mathlib/pull/#3769))

Provide more API for `fin n`. Lemma names chosen to match equivalent lemmas in `nat`. Does not develop docstrings for the lemmas.

New lemmas:
iff lemmas for comparison
`ne_iff_vne`
`eq_mk_iff_coe_eq`
`succ_le_succ_iff`
`succ_lt_succ_iff`

lemmas about explicit numerals
`val_zero'`
`mk_zero`
`mk_one`
`mk_bit0`
`mk_bit1`
`cast_succ_zero`
`succ_zero_eq_one`
`zero_ne_one`
`pred_one`

lemmas about order
`zero_le`
`succ_pos`
`mk_succ_pos`
`one_pos`
`one_lt_succ_succ`
`succ_succ_ne_one`
`pred_mk_succ`
`cast_succ_lt_last`
`cast_succ_lt_succ`
`lt_succ`
`last_pos`
`le_coe_last`

coe lemmas:
`coe_eq_cast_succ`
`coe_succ_eq_succ`
`coe_nat_eq_last`

succ_above API:
`succ_above_below`
`succ_above_zero`
`succ_above_last`
`succ_above_above`
`succ_above_pos`

addition API:
`add_one_pos`
`pred_add_one`

Co-authored by: Yury Kudryashov urkud@ya.ru



Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>

### [2020-08-26T18:55:44+00:00](https://github.com/leanprover-community/mathlib/commit/26dfea59d19039645797f4ea230500c77c44dc40)
feat(algebra/big_operators): sum of two products ([#3944](https://github.com/leanprover-community/mathlib/pull/#3944))

### [2020-08-26T18:55:42+00:00](https://github.com/leanprover-community/mathlib/commit/64aad5b84fa0a942768994e619ffeb17ebbf4c48)
feat(category_theory/adjunction): uniqueness of adjunctions ([#3940](https://github.com/leanprover-community/mathlib/pull/#3940))

Co-authored by @thjread

### [2020-08-26T18:55:40+00:00](https://github.com/leanprover-community/mathlib/commit/080746fd18626dd93a842eecc2e028087b0ec78f)
feat(algebra/category/*/limits): don't rely on definitions ([#3873](https://github.com/leanprover-community/mathlib/pull/#3873))

This is a second attempt (which works **much** better) at [#3860](https://github.com/leanprover-community/mathlib/pull/#3860), after @TwoFX explained how to do it properly.

This PR takes the constructions of limits in the concrete categories `(Add)(Comm)[Mon|Group]`, `(Comm)(Semi)Ring`, `Module R`, and `Algebra R`, and makes sure that they never rely on the actual definitions of limits in "prior" categories.

Of course, at this stage the `has_limit` typeclasses still contain data, so it's hard to judge whether we're really not relying on the definitions. I've marked all the `has_limits` instances in these files as irreducible, but the real proof is just that this same code is working over on the `prop_limits` branch.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-26T17:53:30+00:00](https://github.com/leanprover-community/mathlib/commit/2d9ab6111d150c563b40fa230dbfc5723ee4d410)
feat(ring_theory/ideal/basic): R/I is an ID iff I is prime ([#3951](https://github.com/leanprover-community/mathlib/pull/#3951))

`is_integral_domain_iff_prime (I : ideal α) : is_integral_domain I.quotient ↔ I.is_prime`

### [2020-08-26T16:20:07+00:00](https://github.com/leanprover-community/mathlib/commit/2b6924d52a22a8ca5ae033fc828379a7cf014c70)
feat(topology/algebra/ordered): conditions for a strictly monotone function to be a homeomorphism ([#3843](https://github.com/leanprover-community/mathlib/pull/#3843))

If a strictly monotone function between linear orders is surjective, it is a homeomorphism.

If a strictly monotone function between conditionally complete linear orders is continuous, and tends to `+∞` at `+∞` and to `-∞` at `-∞`, then it is a homeomorphism.

[Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Order.20topology)

Co-authored by: Yury Kudryashov <urkud@ya.ru>



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-08-26T14:45:52+00:00](https://github.com/leanprover-community/mathlib/commit/f4f0854c0232143ae018fa29294512ecdb358846)
feat(ring_theory/bundled_subring): add bundled subrings ([#3886](https://github.com/leanprover-community/mathlib/pull/#3886))

Co-authored-by: Ashvni Narayanan <ashvni.n@gmail.com>



Co-authored-by: Ashvni <ashvni.n@gmail.com>
Co-authored-by: laughinggas <58670661+laughinggas@users.noreply.github.com>

### [2020-08-26T14:45:50+00:00](https://github.com/leanprover-community/mathlib/commit/0d67a02db761fc86b9121c659c31943f051d5f4e)
feat(ring_theory/noetherian): maximal among set iff Noetherian ([#3846](https://github.com/leanprover-community/mathlib/pull/#3846))

Main theorem is `set_has_maximal_iff_noetherian,` which relates well foundedness of `<` to being noetherian.
Most notably a result of
`well_founded.well_founded_iff_has_max'` provides the fact that on a partial ordering, `well_founded >` is equivalent to each nonempty set having a maximal element.
`well_founded.well_founded_iff_has_min` provides an analogous fact for `well_founded <`.

Some other miscellaneous lemmas are as follows
`localization_map.integral_domain_of_local_at_prime` is the localization of an integral domain at a prime's complement is an integral domain
`ideal.mul_eq_bot` is the fact that in an integral domain if I*J = 0, then at least one is 0.
`submodule.nonzero_mem_of_gt_bot` is that if ⊥ < J, then J has a nonzero member.
`lt_add_iff_not_mem` is that b is not a member of J iff J < J+(b).
`bot_prime` states that 0 is a prime ideal of an integral domain.



Co-authored-by: mushokunosora <knaka3435@gmail.com>
Co-authored-by: mushokunosora <38799099+mushokunosora@users.noreply.github.com>
Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2020-08-26T13:12:40+00:00](https://github.com/leanprover-community/mathlib/commit/187bfa5255c51db9602d1a032b0c36799c0bd47b)
feat(set/basic): additions to prod ([#3943](https://github.com/leanprover-community/mathlib/pull/#3943))

Also add one lemma about `Inter`.

### [2020-08-26T13:12:38+00:00](https://github.com/leanprover-community/mathlib/commit/fb6046ede53ef809e1a937bfa3d6bb6066d70b6c)
feat(*/category/*): add coe_of simp lemmas ([#3938](https://github.com/leanprover-community/mathlib/pull/#3938))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-26T11:39:01+00:00](https://github.com/leanprover-community/mathlib/commit/206673e712d948e9accb8edb4adcb7a539ce8d2d)
chore(*): trivial golfing using dec_trivial tactic ([#3949](https://github.com/leanprover-community/mathlib/pull/#3949))

### [2020-08-26T10:32:55+00:00](https://github.com/leanprover-community/mathlib/commit/dd742dc866faa1379b30087044055c435418ba6f)
feat(finsupp/basic): add hom_ext ([#3941](https://github.com/leanprover-community/mathlib/pull/#3941))

Two R-module homs from finsupp X R which agree on `single x 1` agree everywhere.
```
lemma hom_ext [semiring β] [add_comm_monoid γ] [semimodule β γ] (φ ψ : (α →₀ β) →ₗ[β] γ)
  (h : ∀ a : α, φ (single a 1) = ψ (single a 1)) : φ = ψ
```

### [2020-08-26T09:56:27+00:00](https://github.com/leanprover-community/mathlib/commit/a31096de982e9463bbc8f405b4154fe9b989d828)
fix(set_theory/game): remove stray #lint introduced in [#3939](https://github.com/leanprover-community/mathlib/pull/#3939) ([#3948](https://github.com/leanprover-community/mathlib/pull/#3948))

### [2020-08-26T00:44:38+00:00](https://github.com/leanprover-community/mathlib/commit/da47548435056a88d3647bf3232bc7f63f06b612)
chore(scripts): update nolints.txt ([#3945](https://github.com/leanprover-community/mathlib/pull/#3945))

I am happy to remove some nolints for you!

### [2020-08-25T19:52:43+00:00](https://github.com/leanprover-community/mathlib/commit/666a2e2ed1dc3ab6304ad9612a03b1d977fa0a9b)
feat(algebra/group/with_one): more API for with_zero ([#3716](https://github.com/leanprover-community/mathlib/pull/#3716))

### [2020-08-25T16:55:18+00:00](https://github.com/leanprover-community/mathlib/commit/447871938dea6992b18cd9bc43cd8470ce0d5045)
feat(data/padic/padic_integers): homs to zmod(p ^ n) ([#3882](https://github.com/leanprover-community/mathlib/pull/#3882))

This is the next PR in a series of PRs on the padic numbers/integers that should culminate in a proof that Z_p is isomorphic to the ring of Witt vectors of zmod p.

In this PR we build ring homs from Z_p to zmod (p ^ n).

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-08-25T14:36:42+00:00](https://github.com/leanprover-community/mathlib/commit/b03ce616c0aa1eb18f64213a74e3b0c3b7d90bdb)
chore(set_theory/game): various cleanup and code golf ([#3939](https://github.com/leanprover-community/mathlib/pull/#3939))

### [2020-08-25T14:36:40+00:00](https://github.com/leanprover-community/mathlib/commit/878c44f1fe3faae0d05b90b67248904a67a99693)
feat(category_theory/adjunction): restrict adjunction to full subcategory ([#3924](https://github.com/leanprover-community/mathlib/pull/#3924))

Blocked by [#3923](https://github.com/leanprover-community/mathlib/pull/#3923).

### [2020-08-25T13:04:30+00:00](https://github.com/leanprover-community/mathlib/commit/a5a9858779606fa3c8b5c3bcd58c81d3e14e6c49)
feat(data/sigma/basic): cleanup ([#3933](https://github.com/leanprover-community/mathlib/pull/#3933))

Use namespaces
Add `sigma.ext_iff`, `psigma.ext` and `sigma.ext_iff`

### [2020-08-25T12:10:39+00:00](https://github.com/leanprover-community/mathlib/commit/3409388079cf8840e791238471b4dd6e9d0deef1)
doc(ring_theory/*): add some module docstrings ([#3880](https://github.com/leanprover-community/mathlib/pull/#3880))

### [2020-08-24T23:25:19+00:00](https://github.com/leanprover-community/mathlib/commit/d4d33deaa14500c982022408ad94b4979b7e337f)
feat(combinatorics): define simple graphs ([#3458](https://github.com/leanprover-community/mathlib/pull/#3458))

adds basic definition of `simple_graph`s



Co-authored-by: Aaron Anderson <awainverse@gmail.com>

### [2020-08-24T19:17:49+00:00](https://github.com/leanprover-community/mathlib/commit/8af157974e449b99807156c7ac43696300b04281)
refactor(geometry/euclidean): split up file ([#3926](https://github.com/leanprover-community/mathlib/pull/#3926))

Split up `geometry/euclidean.lean` into four smaller files in
`geometry/euclidean`.  There should be no changes to any of the
individual definitions, or to the set of definitions present, but
module doc strings have been expanded.

Various definitions in `geometry/euclidean/basic.lean` are not used by
all the other files, so it would be possible to split it up further,
but that doesn't seem necessary for now, and more of those things may
be used by more other files in future.  (For example,
`geometry/euclidean/circumcenter.lean` doesn't make any use of angles
at present.  But a version of the law of sines involving the
circumradius would naturally go in
`geometry/euclidean/circumcenter.lean`, and would introduce such a
dependency.)

### [2020-08-24T16:57:27+00:00](https://github.com/leanprover-community/mathlib/commit/1404ad8339cb4596d673dc2305d6ab8fda331341)
feat(algebra/add_torsor): vsub_vadd_comm ([#3928](https://github.com/leanprover-community/mathlib/pull/#3928))

Add another (commutative) `add_torsor` rearrangement lemma.

### [2020-08-24T16:23:09+00:00](https://github.com/leanprover-community/mathlib/commit/96b559c7ac9bbc5d0fddee0dfc021a0969eaa79c)
feat(set_theory/game): grundy number of single-heap nim ([#3930](https://github.com/leanprover-community/mathlib/pull/#3930))

### [2020-08-24T01:55:42+00:00](https://github.com/leanprover-community/mathlib/commit/1ccdbb9c58ac7053cd672d813ed92a8c372a4dcd)
feat(category_theory/images): unique image ([#3921](https://github.com/leanprover-community/mathlib/pull/#3921))

Show that the strong-epi mono factorisation of a morphism is unique.

### [2020-08-24T01:55:40+00:00](https://github.com/leanprover-community/mathlib/commit/685d9dd3c6b1f89a6da2353eb493ab7feed695f5)
feat(category_theory): cancel fully faithful functor ([#3920](https://github.com/leanprover-community/mathlib/pull/#3920))

Construct the natural isomorphism between `F` and `G` given a natural iso between `F ⋙ H` and `G ⋙ H` for a fully faithful `H`. 

Co-authored-by: Thomas Read <thjread@gmail.com>

### [2020-08-24T01:00:11+00:00](https://github.com/leanprover-community/mathlib/commit/ebd3351b5962e54637a9230d1bd31006a734b78e)
chore(category_theory/conj): add a new simp lemma ([#3922](https://github.com/leanprover-community/mathlib/pull/#3922))

Mark a new simp lemma which I think is helpful and simplify some proofs using it.

### [2020-08-24T01:00:09+00:00](https://github.com/leanprover-community/mathlib/commit/f2304096ac8aa4f89d9a82b6e50b0b03cd99546c)
feat(category_theory/adjunction): opposite adjunctions ([#3899](https://github.com/leanprover-community/mathlib/pull/#3899))

Add two constructions for adjoints for opposite functors.

### [2020-08-24T01:00:07+00:00](https://github.com/leanprover-community/mathlib/commit/bfc8c66b5e545bceb2a71b4b3997af88e40d6dee)
feat(category_theory/limits/shapes/finite*): finite limits from limits ([#3800](https://github.com/leanprover-community/mathlib/pull/#3800))

Add some missing derivations in the new has_limits hierarchy

### [2020-08-23T23:56:34+00:00](https://github.com/leanprover-community/mathlib/commit/bf6cd285222275f2893164dccc236d35c121eb8d)
feat(category_theory/fully_faithful): equivalence of homsets ([#3923](https://github.com/leanprover-community/mathlib/pull/#3923))

I was *so sure* I'd already made this PR but I can't find it nor this construction, so here it is.

### [2020-08-23T16:22:06+00:00](https://github.com/leanprover-community/mathlib/commit/7d4f7730739bebd9e1d7edae0bb8f46933eb786f)
feat(ring_theory/jacobson): Proof that if a ring is a Jacobson Ring then so is its localization at a single element ([#3651](https://github.com/leanprover-community/mathlib/pull/#3651))

The main result here is that the localization of a Jacobson ring to a single element is also a Jacobson ring, which is one of the things needed for the proof that `R` is Jacobson if and only if `R[x]` is Jacobson.

Two characterization of Jacobson rings in terms of their quotient rings are also included, again needed to prove `R[x]` is Jacobson.

Co-authored-by: Devon Tuma <dtumad@gmail.com>

### [2020-08-23T15:35:50+00:00](https://github.com/leanprover-community/mathlib/commit/e21675586b974322f8221ee42b384a6932d75440)
feat(linear_algebra/affine_space): more lemmas ([#3918](https://github.com/leanprover-community/mathlib/pull/#3918))

Add some more affine space lemmas.  In particular, this includes
lemmas about the dimension of the span of a finite affinely
independent family.

### [2020-08-23T14:51:36+00:00](https://github.com/leanprover-community/mathlib/commit/d80f3ef345eb09043daece6edf5d8c3a65f44268)
feat(geometry/euclidean): Monge point and orthocenter ([#3872](https://github.com/leanprover-community/mathlib/pull/#3872))

The main purpose of this PR is to define the orthocenter of a
triangle.

Simplices in more than two dimensions do not in general have an
orthocenter: the altitudes are not necessarily concurrent.  However,
there is a n-dimensional generalization of the orthocenter in the form
of the Monge point of a simplex.  Define a Monge plane to be an
(n-1)-dimensional subspace that passes through the centroid of an
(n-2)-dimensional face of the simplex and is orthogonal to the
opposite edge.  Then the Monge planes of a simplex are always
concurrent, and their point of concurrence is known as the Monge point
of the simplex.  Furthermore, the circumcenter O, centroid G and Monge
point M are collinear in that order on the Euler line, with OG : GM =
(n-1) : 2.

Here, we use that ratio as a convenient way to define the Monge point
in terms of the existing definitions of the circumcenter and the
centroid.  First we set up some infrastructure for dealing with affine
combinations of the vertices of a simplex together with its
circumcenter, which can be convenient for computations rather than
dealing with combinations of the vertices alone; the use of an
inductive type `points_with_circumcenter_index` seemed to be more
convenient than other options for how to index such combinations.
Then, a straightforward calculation using `inner_weighted_vsub` shows
that the point defined in terms of the circumcenter and the centroid
does indeed lie in the Monge planes, so justifying the definition as
being a definition of the Monge point.  It is then shown to be the
only point in that intersection (in fact, the only point in the
intersection of all the Monge planes where one of the two vertices
needed to specify a Monge plane is fixed).

The altitudes of a simplex are then defined.  In the case of a
triangle, the orthocenter is defined to be the Monge point, the
altitudes are shown to equal the Monge planes (mathematically trivial,
but involves quite a bit of fiddling around with `fin 3`) and thus the
orthocenter is shown to lie in the altitudes and to be the unique
point lying in any two of them (again, involves various fiddling
around with `fin 3` to link up with the previous lemmas).  Because of
the definition chosen for the Monge point, the position of the
orthocenter on the Euler line of the triangle comes for free (not
quite `rfl`, but two rewrites of `rfl` lemmas plus `norm_num`).

### [2020-08-23T13:21:25+00:00](https://github.com/leanprover-community/mathlib/commit/588e46c60379c1f81bcf6f5dc831ababf32b79a9)
feat(tactic/*,meta/expr): refactor and extend binder matching functions ([#3830](https://github.com/leanprover-community/mathlib/pull/#3830))

This PR deals with meta functions that deconstruct expressions starting
with pi or lambda binders. Core defines `mk_local_pis` to deconstruct pi
binders and `tactic.core` used to contain some ad-hoc variations of its
functionality. This PR unifies all these variations and adds several
more, for both pi and lambda binders. Specifically:

- We remove `mk_local_pis_whnf`. Use `whnf e md >>= mk_local_pis` instead.
  Note: we reuse the name for another function with different semantics;
  see below.
- We add `mk_{meta,local}_{pis,lambdas}`, `mk_{meta,local}_{pis,lambdas}n`,
  `mk_{meta,local}_{pis,lambdas}_whnf`, `mk_{meta,local}_{pis,lambdas}n_whnf`.
  These can all be used to 'open' a pi or lambda binder. The binder is
  instantiated with a fresh local for the `local` variants and a fresh
  metavariable for the `meta` variants. The `whnf` variants normalise
  the input expression before checking for leading binders. The
  `{pis,lambdas}n` variants match a given number of leading binders.
  Some of these functions were already defined, but we now implement
  them in terms of a new function, `mk_binders`, which abstracts over
  the common functionality.
- We rename `get_pi_binders_dep` to `get_pi_binders_nondep`. This function returns
  the nondependent binders, so the old name was misleading.
- We add `expr.match_<C>` for every constructor `C` of `expr`. `match_pi`
  and `match_lam` are needed to implement the `mk_*` functions; the
  other functions are added for completeness.
- (Bonus) We add `get_app_fn_args_whnf` and `get_app_fn_whnf`. These are variants
  of `get_app_fn_args` and `get_app_fn`, respectively, which normalise the input
  expression as necessary.

The refactoring might be a slight performance regression because the new
implementation adds some indirection. But the affected functions aren't
widely used anyway and I suspect that the performance loss is very
minor, so having clearer and more concise code is probably worth it.

### [2020-08-23T12:27:41+00:00](https://github.com/leanprover-community/mathlib/commit/ffd86262f5b0a85eb0cb945889430b8382e340bb)
refactor(linear_algebra/affine_space/basic): make more arguments of smul_vsub_vadd_mem implicit ([#3917](https://github.com/leanprover-community/mathlib/pull/#3917))

Came up in [#3872](https://github.com/leanprover-community/mathlib/pull/#3872).

### [2020-08-23T06:36:27+00:00](https://github.com/leanprover-community/mathlib/commit/7d88a30acc714e2941ec12384a6263a28c7a6e90)
fix(data/sigma/basic): rename `ext` to `sigma.ext` ([#3916](https://github.com/leanprover-community/mathlib/pull/#3916))

### [2020-08-23T05:18:43+00:00](https://github.com/leanprover-community/mathlib/commit/ff970553fe9c1486bea180514334fa0f749c2945)
feat(data/finset/basic): insert_singleton_comm ([#3914](https://github.com/leanprover-community/mathlib/pull/#3914))

Add the result that `({a, b} : finset α) = {b, a}`.  This came up in
[#3872](https://github.com/leanprover-community/mathlib/pull/#3872), and `library_search` does not show it as already present.

### [2020-08-23T02:34:47+00:00](https://github.com/leanprover-community/mathlib/commit/7ac7246e13d5064806c6dfdce5b23316d68e7759)
feat(linear_algebra/finite_dimensional): Add `linear_equiv.of_inj_endo` and related lemmas ([#3878](https://github.com/leanprover-community/mathlib/pull/#3878))

This PR prepares [#3864](https://github.com/leanprover-community/mathlib/pull/#3864).

* Move the section `zero_dim` up.
* Add several lemmas about finite dimensional vector spaces. The only new definition is `linear_equiv.of_injective_endo`, which produces a linear equivalence from an injective endomorphism.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-08-22T18:09:38+00:00](https://github.com/leanprover-community/mathlib/commit/abe445953094508608c4932dfe0394cfe9e07a41)
feat(analysis/convex): define concavity of functions ([#3849](https://github.com/leanprover-community/mathlib/pull/#3849))



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2020-08-22T15:14:00+00:00](https://github.com/leanprover-community/mathlib/commit/9e9b3801d0bd2c3cb98fda2040ddd20b284fb589)
doc(algebra/linear_recurrence): fix a mistake in module docstring ([#3911](https://github.com/leanprover-community/mathlib/pull/#3911))

### [2020-08-22T15:13:58+00:00](https://github.com/leanprover-community/mathlib/commit/65ceb009fe97bf90c94dc679aeb5758936eb2e9a)
fix(topology): simplify proof of Heine-Cantor ([#3910](https://github.com/leanprover-community/mathlib/pull/#3910))

### [2020-08-22T14:33:36+00:00](https://github.com/leanprover-community/mathlib/commit/6a852789659443d7fda520d3386f08b54703ae1e)
feat(data/polynomial/eval): eval_finset.prod ([#3903](https://github.com/leanprover-community/mathlib/pull/#3903))

Evaluating commutes with finset.prod; useful in a variety of situations in numerical analysis.

### [2020-08-22T13:26:57+00:00](https://github.com/leanprover-community/mathlib/commit/aca785a7094e7fe84f104725e040c12cb388b728)
feat(linear_algebra): linear_equiv_matrix lemmas ([#3898](https://github.com/leanprover-community/mathlib/pull/#3898))

From the sphere eversion project, with help by Anne for the crucial `linear_equiv_matrix_apply`.

Co-authored-by: Anne Baanen <t.baanen@vu.nl>

### [2020-08-22T12:32:20+00:00](https://github.com/leanprover-community/mathlib/commit/e9d10674ff7de6fef58d4a7eceb47557cbdf5fab)
feat(category_theory/opposites): isomorphism of opposite functor ([#3901](https://github.com/leanprover-community/mathlib/pull/#3901))

Get some lemmas generated by `simps` and add two isomorphisms for opposite functors.

### [2020-08-22T10:07:23+00:00](https://github.com/leanprover-community/mathlib/commit/011a2622a83ba086a7c7e1cc3b0ad57eae2a2c41)
feat(set_theory/game): impartial games and the Sprague-Grundy theorem ([#3855](https://github.com/leanprover-community/mathlib/pull/#3855))



Co-authored-by: foxthomson <11833933+foxthomson@users.noreply.github.com>

### [2020-08-22T09:35:08+00:00](https://github.com/leanprover-community/mathlib/commit/e546e9467c579babe665d082695300f042588196)
fix(data/equiv/transfer_instance): remove stray #lint ([#3908](https://github.com/leanprover-community/mathlib/pull/#3908))

### [2020-08-22T06:31:00+00:00](https://github.com/leanprover-community/mathlib/commit/13881d7a4086e038e49e116066b379a043d13d34)
feat(tactic/dec_trivial): make dec_trivial easier to use ([#3875](https://github.com/leanprover-community/mathlib/pull/#3875))

### [2020-08-22T04:56:48+00:00](https://github.com/leanprover-community/mathlib/commit/83db96b2cd9f12518a2beae50a8e5d336aef0ea8)
feat(algebra/group/with_one): make with_one and with_zero irreducible. ([#3883](https://github.com/leanprover-community/mathlib/pull/#3883))

### [2020-08-22T01:22:48+00:00](https://github.com/leanprover-community/mathlib/commit/4b241664d9a78e5dff4188dab562b56efdc0d9a1)
chore(scripts): update nolints.txt ([#3905](https://github.com/leanprover-community/mathlib/pull/#3905))

I am happy to remove some nolints for you!

### [2020-08-22T00:21:09+00:00](https://github.com/leanprover-community/mathlib/commit/278f5120de8e8a3dd9c5a638f8f15f5ac6116dbb)
feat(data/real): define the golden ratio and its conjugate, prove irrationality of both and Binet's formula ([#3885](https://github.com/leanprover-community/mathlib/pull/#3885))

Co-authored by @alreadydone and @monadius through their solutions to the corresponding Codewars Kata.

### [2020-08-21T22:13:24+00:00](https://github.com/leanprover-community/mathlib/commit/9998bee71734fd9c191b038b6f80d628a1fec5bf)
chore(measure_theory/*): remove some `measurable f` arguments ([#3902](https://github.com/leanprover-community/mathlib/pull/#3902))

### [2020-08-21T20:49:40+00:00](https://github.com/leanprover-community/mathlib/commit/4c04f0bba1a4487abad16ba573e940e9d4b720ba)
feat(topology/algebra/ordered): sum of functions with limits at_top and cst ([#3833](https://github.com/leanprover-community/mathlib/pull/#3833))

Two functions which tend to `at_top` have sum tending to `at_top`.  Likewise if one tends to `at_top` and one tends to a constant.

Also made a couple of edits relating to [this conversation](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Ordered.20groups.20have.20no.20top.20element) about `no_top` for algebraic structures:

### [2020-08-21T19:07:51+00:00](https://github.com/leanprover-community/mathlib/commit/1db32c598d73ea615850d7b6caa59275eb9c6997)
feat(set/basic): some results about `set.pi` ([#3894](https://github.com/leanprover-community/mathlib/pull/#3894))

New definition: `function.eval`
Also some changes in `set.basic`
Name changes:
```
pi_empty_index -> empty_pi
pi_insert_index -> insert_pi
pi_singleton_index -> singleton_pi
set.push_pull -> image_inter_preimage
set.push_pull' -> image_preimage_inter
```

### [2020-08-21T18:31:42+00:00](https://github.com/leanprover-community/mathlib/commit/0c7ac8356de786b2cb07cfb8471e8aa5345e6664)
feat(measure_theory/bochner_integration): add `integral_smul_measure` ([#3900](https://github.com/leanprover-community/mathlib/pull/#3900))

Also add `integral_dirac`

### [2020-08-21T16:04:55+00:00](https://github.com/leanprover-community/mathlib/commit/ac5679020e4d2c158b0abebe0e6595011075d822)
feat(order/rel_iso): a new definition of order_iso, using preorder instances ([#3838](https://github.com/leanprover-community/mathlib/pull/#3838))

defines (new) `order_embedding` and `order_iso`, which map both < and <=
replaces existing `rel_embedding` and `rel_iso` instances preserving < or <= with the new abbreviations

### [2020-08-21T13:01:05+00:00](https://github.com/leanprover-community/mathlib/commit/e3409c6c0b15068ff5ff743e4d1f16b128fed10e)
feat(data/zmod/basic): morphisms to zmod are surjective (deps: [#3888](https://github.com/leanprover-community/mathlib/pull/#3888)) ([#3889](https://github.com/leanprover-community/mathlib/pull/#3889))

... and determined by their kernel

### [2020-08-21T11:41:54+00:00](https://github.com/leanprover-community/mathlib/commit/4921be9d1c27d8b1449026e7fce537dd78dc31cd)
feat(analysis/special_functions/arsinh): inverse hyperbolic sine function ([#3801](https://github.com/leanprover-community/mathlib/pull/#3801))

Added the following lemmas and definitions:
`cosh_def`
`sinh_def`
`cosh_pos`
`sinh_strict_mono`
`sinh_injective`
`sinh_surjective`
`sinh_bijective`
`real.cosh_sq_sub_sinh_sq`
`sqrt_one_add_sinh_sq`
`sinh_arsinh`
`arsinh_sin`

This is from the list of UG not in lean. `cosh` coming soon.

### [2020-08-21T10:07:49+00:00](https://github.com/leanprover-community/mathlib/commit/7a48761e1439447ef421355d3e715db30afac0d6)
feat(logic/function): left/right inverse iff ([#3897](https://github.com/leanprover-community/mathlib/pull/#3897))

From the sphere eversion project.

### [2020-08-21T10:07:47+00:00](https://github.com/leanprover-community/mathlib/commit/de20a3943257d203dff1fad335ce52b3a8f1d525)
feat(group_theory/subroup,ring_theory/ideal/operations): lift_of_surjective ([#3888](https://github.com/leanprover-community/mathlib/pull/#3888))

Surjective homomorphisms behave like quotient maps

### [2020-08-21T10:07:46+00:00](https://github.com/leanprover-community/mathlib/commit/045b6c7f4d31cf96033b64f8fc6872be243726c8)
chore(topology/basic): use dot notation ([#3861](https://github.com/leanprover-community/mathlib/pull/#3861))

## API changes

* add `set.range_sigma_mk`, `finset.sigma_preimage_mk`, `finset.sigma_preimage_mk_of_subset`,
  `finset.sigma_image_fst_preimage_mk`, `finset.prod_preimage'`;
* rename `filter.monotone.tendsto_at_top_finset` to `filter.tendsto_at_top_finset_of_monotone`,
  add alias `monotone.tendsto_at_top_finset`;
* add `filter.tendsto_finset_preimage_at_top_at_top`;
* add `filter.tendsto.frequently`;
* add `cluster_pt_principal_iff_frequently`, `mem_closure_iff_frequently`, `filter.frequently.mem_closure`,
  `filter.frequently.mem_of_closed`, `is_closed.mem_of_frequently_of_tendsto`;
* rename `mem_of_closed_of_tendsto` to `is_closed.mem_of_tendsto`;
* delete `mem_of_closed_of_tendsto'`; use new `is_closed.mem_of_frequently_of_tendsto` instead;

### [2020-08-21T10:07:44+00:00](https://github.com/leanprover-community/mathlib/commit/d8cde2aaf634884a9a3f8db4873c52b301880aa3)
feat(measure_theory/interval_integral): more versions of FTC-1 ([#3709](https://github.com/leanprover-community/mathlib/pull/#3709))

Left/right derivative, strict derivative, differentiability in both endpoints.

Other changes:

* rename `filter.tendsto_le_left` and `filter.tendsto_le_right` to `filter.tendsto.mono_left` and `filter.tendsto.mono_right`, swap arguments;
* rename `order_top.tendsto_at_top` to `order_top.tendsto_at_top_nhds`;
* introduce `tendsto_Ixx_class` instead of `is_interval_generated`.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-08-21T08:35:09+00:00](https://github.com/leanprover-community/mathlib/commit/bc3e8356fdc71cf819d34c977c3a936c69d1c86b)
feat(tactic/rcases): clear pattern `-` in rcases ([#3868](https://github.com/leanprover-community/mathlib/pull/#3868))

This allows you to write:
```lean
example (h : ∃ x : ℕ, true) : true :=
begin
  rcases h with ⟨x, -⟩,
  -- x : ℕ |- true
end
```
to clear unwanted hypotheses. Note that dependents are also cleared,
meaning that you can get into trouble if you try to keep matching when a
variable later in the pattern is deleted. The `_` pattern will match
a hypothesis even if it has been deleted, so this is the recommended way
to match on variables dependent on a deleted hypothesis.
You can use `-` if you prefer, but watch out for unintended variables
getting deleted if there are duplicate names!

### [2020-08-21T07:33:42+00:00](https://github.com/leanprover-community/mathlib/commit/da6cd551cbabd3c3ef175936a24b2bf019c17536)
feat(determinant): towards multilinearity ([#3887](https://github.com/leanprover-community/mathlib/pull/#3887))

From the sphere eversion project. In a PR coming soon, this will be used to prove that the determinant of a family of vectors in a given basis is multi-linear (see [here](https://github.com/leanprover-community/sphere-eversion/blob/2c776f6a92c0f9babb521a02ab0cc341a06d3f3c/src/vec_det.lean) for a preview if needed).

### [2020-08-21T05:29:48+00:00](https://github.com/leanprover-community/mathlib/commit/23749aa078b90510ab467136eb936d9d5adb7206)
chore(measure_theory/*): use `_measure` instead of `_meas` ([#3892](https://github.com/leanprover-community/mathlib/pull/#3892))

### [2020-08-21T03:53:31+00:00](https://github.com/leanprover-community/mathlib/commit/31cd6dd2ebc0eed7a65db225b256b077f09d2771)
chore(order/bounded_lattice): use `⦃⦄` in `disjoint.symm` ([#3893](https://github.com/leanprover-community/mathlib/pull/#3893))

### [2020-08-21T02:24:33+00:00](https://github.com/leanprover-community/mathlib/commit/17190352a5f03a8bc34957510a74fe82e17df58f)
feat(category_theory/monad/*): Add category of bundled (co)monads; prove equivalence of monads with monoid objects ([#3762](https://github.com/leanprover-community/mathlib/pull/#3762))

This PR constructs bundled monads, and proves the "usual" equivalence between the category of monads and the category of monoid objects in the endomorphism category.

It also includes a definition of morphisms of unbundled monads, and proves some necessary small lemmas in the following two files:
1. `category_theory.functor_category`
2. `category_theory.monoidal.internal`

Given any isomorphism in `Cat`, we construct a corresponding equivalence of categories in `Cat.equiv_of_iso`.



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>

### [2020-08-21T01:44:02+00:00](https://github.com/leanprover-community/mathlib/commit/7271f74f32f2719d36d7513b71a2df9ccc0bf551)
chore(scripts): update nolints.txt ([#3891](https://github.com/leanprover-community/mathlib/pull/#3891))

I am happy to remove some nolints for you!

### [2020-08-21T00:08:35+00:00](https://github.com/leanprover-community/mathlib/commit/0a48f0a2632a4ea2dfd70d3422dcb52569648b42)
feat(system/random): a monad for (pseudo-)randomized computations ([#3742](https://github.com/leanprover-community/mathlib/pull/#3742))

### [2020-08-20T23:05:44+00:00](https://github.com/leanprover-community/mathlib/commit/36386fc7bf88fcc2424e1759af8ccf805dd98fa3)
feat(linear_algebra): some easy linear map/equiv lemmas ([#3890](https://github.com/leanprover-community/mathlib/pull/#3890))

From the sphere eversion project.

### [2020-08-20T21:33:51+00:00](https://github.com/leanprover-community/mathlib/commit/c9704ff50725111b44012a80f9fc7067ae37b52b)
chore(data/matrix, linear_algebra): generalize universe parameters ([#3879](https://github.com/leanprover-community/mathlib/pull/#3879))

@PatrickMassot was complaining that `matrix m n R` often doesn't work when the parameters are declared as `m n : Type*` because the universe parameters were equal. This PR makes the universe parameters of `m` and `n` distinct where possible, also generalizing some other linear algebra definitions.

The types of `col` and `row` used to be `matrix n punit` but are now `matrix n unit`, otherwise the elaborator can't figure out the universe. This doesn't seem to break anything except for the cases where `punit.{n}` was explicitly written down.

There were some breakages, but the total amount of changes is not too big.




Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-08-20T21:33:49+00:00](https://github.com/leanprover-community/mathlib/commit/901c5bcaea1237fe9f8501b7b89638eb8e1d14c6)
feat(ring_theory/separable): a separable polynomial splits into a product of unique `X - C a` ([#3877](https://github.com/leanprover-community/mathlib/pull/#3877))

Bonus result: the degree of a separable polynomial is the number of roots
in the field where it splits.




Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-08-20T21:33:47+00:00](https://github.com/leanprover-community/mathlib/commit/9f525c7425ad6c3b58127bb4f73f7d9599d171dc)
chore(category_theory/limits/types): cleanup ([#3871](https://github.com/leanprover-community/mathlib/pull/#3871))

Backporting some cleaning up work from `prop_limits`, while it rumbles onwards.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-20T16:50:10+00:00](https://github.com/leanprover-community/mathlib/commit/7a93d87c661e8e1af6bebaa5c4fa3bb92f88167e)
doc(src/ring_theory/integral_domain.lean): add module docstring ([#3881](https://github.com/leanprover-community/mathlib/pull/#3881))

### [2020-08-20T11:47:20+00:00](https://github.com/leanprover-community/mathlib/commit/46310185e272732c561921b285f79ed0c6936eb1)
feat(data/polynomial): Add polynomial/eval lemmas ([#3876](https://github.com/leanprover-community/mathlib/pull/#3876))

Add some lemmas about `polynomial`. In particular, add lemmas about
`eval2` for the case that the ring `S` that we evaluate into is
non-commutative.




Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-08-20T08:43:40+00:00](https://github.com/leanprover-community/mathlib/commit/e174f42ce6b25d58689328753952313140d0e9a7)
feat(equiv/transfer_instances): other algebraic structures ([#3870](https://github.com/leanprover-community/mathlib/pull/#3870))

Some updates to `data.equiv.transfer_instances`.

1. Use `@[to_additive]`
2. Add algebraic equivalences between the original and transferred instances.
3. Transfer modules and algebras.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-20T08:43:38+00:00](https://github.com/leanprover-community/mathlib/commit/d7621b930bdbca957bbb5909e4327e9927f3ea3f)
feat(data/list/basic): lemmas about foldr/foldl ([#3865](https://github.com/leanprover-community/mathlib/pull/#3865))

This PR prepares [#3864](https://github.com/leanprover-community/mathlib/pull/#3864).

* Move lemmas about `foldr`/`foldl` into the appropriate section.
* Add variants of the `foldl_map`/`foldr_map` lemmas.
* Add lemmas stating that a fold over a list of injective functions is injective.

### [2020-08-20T08:00:59+00:00](https://github.com/leanprover-community/mathlib/commit/ba06edc122398cefa9d8fd73f7241700e9d33081)
chore(data/complex/module): move `linear_map.{re,im,of_real}` from `analysis` ([#3874](https://github.com/leanprover-community/mathlib/pull/#3874))

I'm going to use these `def`s in `analysis/convex/basic`, and I don't
want to `import analysis.normed_space.basic` there.

### [2020-08-20T06:10:17+00:00](https://github.com/leanprover-community/mathlib/commit/34db3c34d668c543cfc01f197f3fcb6051cc68c6)
feat(order/category): various categories of ordered types ([#3841](https://github.com/leanprover-community/mathlib/pull/#3841))

This is a first step towards the category of simplicial sets (which are presheaves on the category of nonempty finite linear orders).

### [2020-08-20T03:32:46+00:00](https://github.com/leanprover-community/mathlib/commit/436479881b6fa333231a15835e2eef473da90db2)
fix(data/fin): better defeqs in fin.has_le instance ([#3869](https://github.com/leanprover-community/mathlib/pull/#3869))

This ensures that the instances from `fin.decidable_linear_order` match
the direct instances. They were defeq before but not at instance reducibility.

### [2020-08-19T22:20:42+00:00](https://github.com/leanprover-community/mathlib/commit/9a8e504aa5a3ec72cf25bc00d56ebefee084c938)
feat(linear_algebra/affine_space/basic): more direction lemmas ([#3867](https://github.com/leanprover-community/mathlib/pull/#3867))

Add a few more lemmas about the directions of affine subspaces.

### [2020-08-19T21:38:08+00:00](https://github.com/leanprover-community/mathlib/commit/7e6b8a9d53fa59ab3a134ad758c2f49134d5f6f3)
feat(linear_algebra/affine_space/basic): more vector_span lemmas ([#3866](https://github.com/leanprover-community/mathlib/pull/#3866))

Add more lemmas relating `vector_span` to the `submodule.span` of
particular subtractions of points.  The new lemmas fix one of the
points in the subtraction and exclude that point, or its index in the
case of an indexed family of points rather than a set, from being on
the other side of the subtraction (whereas the previous lemmas don't
exclude the trivial subtraction of a point from itself).

### [2020-08-19T17:44:57+00:00](https://github.com/leanprover-community/mathlib/commit/bd5552a304e11187f44b5c5b9c005eabe40e136b)
feat(ring_theory/polynomial/basic): Isomorphism between polynomials over a quotient and quotient over polynomials ([#3847](https://github.com/leanprover-community/mathlib/pull/#3847))

The main statement is `polynomial_quotient_equiv_quotient_polynomial`, which gives that If `I` is an ideal of `R`, then the ring polynomials over the quotient ring `I.quotient` is isomorphic to the quotient of `polynomial R` by the ideal `map C I`.

Also, `mem_map_C_iff` shows that `map C I` contains exactly the polynomials whose coefficients all lie in `I`

### [2020-08-19T13:32:50+00:00](https://github.com/leanprover-community/mathlib/commit/15cacf0ea137bb0ad9120a4489ead0cf13c0a81d)
feat(analysis/normed_space/real_inner_product): orthogonal subspace order ([#3863](https://github.com/leanprover-community/mathlib/pull/#3863))

Define the Galois connection between `submodule ℝ α` and its
`order_dual` given by `submodule.orthogonal`.  Thus, deduce that the
inf of orthogonal subspaces is the subspace orthogonal to the sup (for
three different forms of inf), as well as replacing the proof of
`submodule.le_orthogonal_orthogonal` by a use of
`galois_connection.le_u_l`.

### [2020-08-19T13:32:45+00:00](https://github.com/leanprover-community/mathlib/commit/d963213bcda803a0c6b6ec463d7a98f3bc452186)
refactor(algebra/add_torsor,linear_algebra/affine_space/basic): vsub_set ([#3858](https://github.com/leanprover-community/mathlib/pull/#3858))

The definition of `vsub_set` in `algebra/add_torsor` does something
similar to `set.image2`, but expressed directly with `∃` inside
`{...}`.  Various lemmas in `linear_algebra/affine_space/basic`
likewise express such sets of subtractions with a given point on one
side directly rather than using `set.image`.  These direct forms can
be inconvenient to use with lemmas about `set.image2`, `set.image` and
`set.range`; in particular, they have the equality inside the binders
expressed the other way round, leading to constructs such as `conv_lhs
{ congr, congr, funext, conv { congr, funext, rw eq_comm } }` when
it's necessary to convert one form to the other.

The form of `vsub_set` was suggested in review of [#2720](https://github.com/leanprover-community/mathlib/pull/#2720), the original
`add_torsor` addition, based on what was then used in
`algebra/pointwise`.  Since then, `image2` has been added to mathlib
and `algebra/pointwise` now uses `image2`.

Thus, convert these definitions to using `image2` or `''` as
appropriate, so simplifying various proofs.

This PR deliberately only addresses `vsub_set` and related definitions
for such sets of subtractions; it does not attempt to change any other
definitions in `linear_algebra/affine_space/basic` that might also be
able to use `image2` or `''` but are not such sets of subtractions,
and does not change the formulations of lemmas not involving such sets
even if a rearrangement of equalities and existential quantifiers in
some such lemmas might bring them closer to the formulations about
images of sets.

### [2020-08-19T11:58:06+00:00](https://github.com/leanprover-community/mathlib/commit/1e677e6601b8829ec8506efcfc5446f30d88d1d0)
chore(data/finset/basic): use `finset.map` in `sigma_eq_bind` ([#3857](https://github.com/leanprover-community/mathlib/pull/#3857))

### [2020-08-19T11:22:59+00:00](https://github.com/leanprover-community/mathlib/commit/a1003964f6821957500128040b82815345cd0f50)
doc(linear_algebra/sesquilinear_form): add missing backtick ([#3862](https://github.com/leanprover-community/mathlib/pull/#3862))

### [2020-08-19T03:25:09+00:00](https://github.com/leanprover-community/mathlib/commit/8579a5f7aaa3aa132a026ce3777e65db7890f04b)
fix(test/norm_cast): fix(?) test ([#3859](https://github.com/leanprover-community/mathlib/pull/#3859))

### [2020-08-18T21:50:05+00:00](https://github.com/leanprover-community/mathlib/commit/425aee91dfe8d542ecc39e354228f3f661af4b26)
feat(analysis/calculus) : L'Hôpital's rule, 0/0 case ([#3740](https://github.com/leanprover-community/mathlib/pull/#3740))

This proves several forms of L'Hôpital's rule for computing 0/0 indeterminate forms, based on the proof given here : [Wikibooks](https://en.wikibooks.org/wiki/Calculus/L%27H%C3%B4pital%27s_Rule). See module docstring for more details.

### [2020-08-18T20:22:26+00:00](https://github.com/leanprover-community/mathlib/commit/5d2256da224ed7dfc5c20eb64cffb417d19377c5)
feat(miu_language): a formalisation of the MIU language described by D. Hofstadter in "Gödel, Escher, Bach". ([#3739](https://github.com/leanprover-community/mathlib/pull/#3739))

We define an inductive type `derivable` so that `derivable x`  represents the notion that the MIU string `x` is derivable in the MIU language. We show `derivable x` is equivalent to `decstr x`, viz. the condition that `x` begins with an `M`, has no `M` in its tail, and for which `count I` is congruent to 1 or 2 modulo 3.

By showing `decidable_pred decstr`, we deduce that `derivable` is decidable.

### [2020-08-18T17:14:51+00:00](https://github.com/leanprover-community/mathlib/commit/0854e83902e708017de154fe6cbd756619ab84d7)
chore(algebra/euclidean_domain): docstrings ([#3816](https://github.com/leanprover-community/mathlib/pull/#3816))



Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2020-08-18T15:37:53+00:00](https://github.com/leanprover-community/mathlib/commit/78770333450cfad926eed77d2f85f0f72e8e3155)
chore(logic/basic): `and_iff_left/right_iff_imp`, `or.right_comm` ([#3854](https://github.com/leanprover-community/mathlib/pull/#3854))

Also add `@[simp]` to `forall_bool` and `exists_bool`

### [2020-08-18T15:37:47+00:00](https://github.com/leanprover-community/mathlib/commit/cb4a5a24f6c0139585bfaf0d30747222a5a27b71)
doc(field_theory/tower): correct docstring ([#3853](https://github.com/leanprover-community/mathlib/pull/#3853))

### [2020-08-18T14:01:34+00:00](https://github.com/leanprover-community/mathlib/commit/9a705331a202816ec7b7fff398d38dcfaf3669db)
feat(data/option/basic): add ne_none_iff_exists ([#3856](https://github.com/leanprover-community/mathlib/pull/#3856))

### [2020-08-18T10:28:42+00:00](https://github.com/leanprover-community/mathlib/commit/67549d93c9833d95edb0e5632cac0cba6299f389)
feat(order/filter/at_top_bot): add `at_bot` versions for (almost) all `at_top` lemmas ([#3845](https://github.com/leanprover-community/mathlib/pull/#3845))

There are a few lemmas I ignored, either because I thought a `at_bot` version wouldn't be useful (e.g subsequence lemmas), because there is no "order inversing" equivalent of `monotone` (I think ?), or because I just didn't understand the statement so I was unable to tell if it was useful or not. 



Co-authored-by: Anatole Dedecker <48656793+ADedecker@users.noreply.github.com>

### [2020-08-18T08:45:02+00:00](https://github.com/leanprover-community/mathlib/commit/67e0019bede6582ca2022e569f4e6055ced92da0)
refactor(topology/metric_space/baire): use choose! in Baire theorem ([#3852](https://github.com/leanprover-community/mathlib/pull/#3852))

Use `choose!` in the proof of Baire theorem.

### [2020-08-18T08:45:00+00:00](https://github.com/leanprover-community/mathlib/commit/65382743506b84d6077ac9a84d44e76727beee32)
chore(data/set/finite): explicit `f` in `finset.preimage s f hf` ([#3851](https://github.com/leanprover-community/mathlib/pull/#3851))

Otherwise pretty printer shows just `finset.preimage s _`.

### [2020-08-18T08:44:58+00:00](https://github.com/leanprover-community/mathlib/commit/c35614896d4b6c4ba760edd33754fe8f0a862bb5)
feat(category_theory/abelian): pseudoelements and a four lemma ([#3803](https://github.com/leanprover-community/mathlib/pull/#3803))

### [2020-08-18T07:06:45+00:00](https://github.com/leanprover-community/mathlib/commit/04948074df00347129dbb8f3f5ab89561f0caf6f)
feat(algebra/ordered_*): cleanup and projection notation ([#3850](https://github.com/leanprover-community/mathlib/pull/#3850))

Also add a few new projection notations.

### [2020-08-18T00:46:41+00:00](https://github.com/leanprover-community/mathlib/commit/cd7c228795aaeb80c5795b2ee69f65504386e361)
chore(scripts): update nolints.txt ([#3848](https://github.com/leanprover-community/mathlib/pull/#3848))

I am happy to remove some nolints for you!

### [2020-08-17T21:27:17+00:00](https://github.com/leanprover-community/mathlib/commit/b68702e697c883fee5785918a55c21b8187db344)
chore(field_theory/tower): generalize tower law to modules ([#3844](https://github.com/leanprover-community/mathlib/pull/#3844))

### [2020-08-17T21:27:15+00:00](https://github.com/leanprover-community/mathlib/commit/3ea8e2806ff8e05eaa0dc6c90427d7ec923e9d10)
feat(tactic/choose): derive local nonempty instances ([#3842](https://github.com/leanprover-community/mathlib/pull/#3842))

This allows `choose!` to work even in cases like `{A : Type} (p : A -> Prop) (h : ∀ x : A, p x → ∃ y : A, p y)`, where we don't know that `A` is nonempty because it is generic, but it can be derived from the inhabitance of other variables in the context of the `∃ y : A` statement. As requested on zulip: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non.20dependent.20chooser/near/207126587

### [2020-08-17T21:27:14+00:00](https://github.com/leanprover-community/mathlib/commit/f77530e91fe07e7db81b1cbd7fdefa2d587db2c5)
feat(ring_theory/localization): Generalize theorems about localization over an integral domain ([#3780](https://github.com/leanprover-community/mathlib/pull/#3780))

A number of theorems about the `fraction_map` from an integral domain to its field of fractions can be generalized to apply to any `localization_map` that were the localization set doesn't contain any zero divisors. The main use for this is to show that localizing an integral domain at any set of non-zero elements is an integral domain, were previously this was only proven for the field of fractions.

I made `le_non_zero_divisors` a class so that the integral domain instance can be synthesized automatically once you show that zero isn't in the localization set, but it could be left as just a proposition instead if that seems unnecessary.

### [2020-08-17T20:43:24+00:00](https://github.com/leanprover-community/mathlib/commit/f818acbe14884912f6ede3eeeca2990048d7c7e4)
feat(analysis/normed_space): generalize corollaries of Hahn-Banach ([#3658](https://github.com/leanprover-community/mathlib/pull/#3658))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-08-17T17:33:37+00:00](https://github.com/leanprover-community/mathlib/commit/f8bf0016222a0ce7b0ab5b7c41b78862c20cca0b)
fix(ring_theory/localization): remove coe_submodule instance ([#3832](https://github.com/leanprover-community/mathlib/pull/#3832))

This coe can loop. See zulip discussion at https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Unknown.20error.20while.20type-checking.20with.20.60use.60/near/207089095

### [2020-08-17T16:59:15+00:00](https://github.com/leanprover-community/mathlib/commit/472251b0e713e9f0b5f18bfa2f9aaa1879e41f98)
feat(algebra): define linear recurrences and prove basic lemmas about them ([#3829](https://github.com/leanprover-community/mathlib/pull/#3829))

We define "linear recurrences", i.e assertions of the form `∀ n : ℕ, u (n + d) = a 0 * u n + a 1 * u (n+1) + ... + a (d-1) * u (n+d-1)`, and we introduce basic related lemmas and definitions (solution space, auxiliary polynomial). Currently, the most advanced theorem is : `q ^ n` is a solution iff `q` is a root of the auxiliary polynomial.

### [2020-08-17T15:28:54+00:00](https://github.com/leanprover-community/mathlib/commit/3edf2b27f111be379537386ea69f8f7aacdd124c)
feat(ring_theory/DVR,padics/padic_integers): characterize ideals of DVRs, apply to `Z_p` ([#3827](https://github.com/leanprover-community/mathlib/pull/#3827))

Also introduce the p-adic valuation on `Z_p`, stolen from the perfectoid project.

Coauthored by: Johan Commelin <johan@commelin.net>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-08-17T15:28:52+00:00](https://github.com/leanprover-community/mathlib/commit/d4cb237286556dec6de22090a299adc05dcbcf1a)
feat(algebra/module): define ordered semimodules and generalize convexity of functions ([#3728](https://github.com/leanprover-community/mathlib/pull/#3728))



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2020-08-17T13:59:04+00:00](https://github.com/leanprover-community/mathlib/commit/bc72d9035a130cbf8d47f7398a6fa53196c40880)
refactor(logic/basic): classical -> root, root -> decidable ([#3812](https://github.com/leanprover-community/mathlib/pull/#3812))

This moves all logic lemmas with `decidable` instances into the `decidable` namespace, and moves or adds classical versions of these to the root namespace. This change hits a lot of files, mostly to remove the `classical.` prefix on explicit references to classical lemmas.

### [2020-08-17T12:15:00+00:00](https://github.com/leanprover-community/mathlib/commit/1a8f6bf9f60ad61f57d769f1717d014a3683ab0a)
feat(lint): improved ge_or_gt linter ([#3810](https://github.com/leanprover-community/mathlib/pull/#3810))

The linter will now correctly accepts occurrences of `f (≥)` and `∃ x ≥ t, b`
The linter will still raise a false positive on `∃ x y ≥ t, b` (with 2+ bound variables in a single binder that involves `>/≥`)
In contrast to the previous version of the linter, this one *does* check hypotheses.
This should reduce the `@[nolint ge_or_gt]` attributes from ~160 to ~10.

### [2020-08-17T10:46:14+00:00](https://github.com/leanprover-community/mathlib/commit/2a8d7f3e1e79646b2cc914c477f060123d871a25)
chore(analysis/normed_space/banach): correct typo ([#3840](https://github.com/leanprover-community/mathlib/pull/#3840))

Correct a typo from an old global replace.

### [2020-08-17T09:54:31+00:00](https://github.com/leanprover-community/mathlib/commit/41cbfdc342ea423faf84415d80476c8cadc4443d)
chore(analysis/hofer): use  the new choose! ([#3839](https://github.com/leanprover-community/mathlib/pull/#3839))

### [2020-08-17T09:11:02+00:00](https://github.com/leanprover-community/mathlib/commit/626de4751f174b4d8d5ffc8c86ca415ae45bda68)
feat(linear_algebra/affine_space/combination): centroid ([#3825](https://github.com/leanprover-community/mathlib/pull/#3825))

Define the centroid of points in an affine space (given by an indexed
family with a `finset` of the index type), when the underlying ring
`k` is a division ring, and prove a few lemmas about cases where this
does not involve division by zero.  For example, the centroid of a
triangle or simplex, although none of the definitions and lemmas here
require affine independence so they are all stated more generally.
(The sort of things that would be appropriate to state specifically
for the case of a simplex would be e.g. defining medians and showing
that the centroid is the intersection of any two medians.)

### [2020-08-17T04:44:59+00:00](https://github.com/leanprover-community/mathlib/commit/6773f5264f4cbcdd51f4317b6e20aa6c3079b8dc)
feat(category_theory): limits in the category of indexed families ([#3737](https://github.com/leanprover-community/mathlib/pull/#3737))

A continuation of [#3735](https://github.com/leanprover-community/mathlib/pull/#3735), hopefully useful in [#3638](https://github.com/leanprover-community/mathlib/pull/#3638).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-17T04:10:13+00:00](https://github.com/leanprover-community/mathlib/commit/b0b5cd4587cc9bf3660fb4e76bbd0a31e6f0805a)
feat(geometry/euclidean): circumradius simp lemmas ([#3834](https://github.com/leanprover-community/mathlib/pull/#3834))

Mark `dist_circumcenter_eq_circumradius` as a `simp` lemma.  Also add
a variant of that lemma where the distance is the other way round so
`simp` can work with both forms.

### [2020-08-17T03:03:18+00:00](https://github.com/leanprover-community/mathlib/commit/43337f7e9e68d436898ca09be985e5d2809a8fd5)
chore(data/nat/digits): refactor proof of `last_digit_ne_zero` ([#3836](https://github.com/leanprover-community/mathlib/pull/#3836))

I thoroughly misunderstood why my prior attempts for [#3544](https://github.com/leanprover-community/mathlib/pull/#3544) weren't working. I've refactored the proof so the `private` lemma is no longer necessary.

### [2020-08-17T01:29:28+00:00](https://github.com/leanprover-community/mathlib/commit/c1fece37d125d4e409c32b7406d445e90558c641)
fix(tactic/refine_struct): accept synonyms for `structure` types ([#3828](https://github.com/leanprover-community/mathlib/pull/#3828))

### [2020-08-17T00:44:50+00:00](https://github.com/leanprover-community/mathlib/commit/56ed455afa05f6c5e27e39ce0fc77a93cf6381b5)
chore(scripts): update nolints.txt ([#3835](https://github.com/leanprover-community/mathlib/pull/#3835))

I am happy to remove some nolints for you!

### [2020-08-16T20:46:14+00:00](https://github.com/leanprover-community/mathlib/commit/40214fcbc84e71868429c5e7cc8b70548773efb8)
feat(ring_theory/derivations): stab on derivations ([#3688](https://github.com/leanprover-community/mathlib/pull/#3688))

### [2020-08-16T18:48:55+00:00](https://github.com/leanprover-community/mathlib/commit/4f2c9585a1fe95b51e6be320192ace2366f214a2)
feat(tactic/interactive/choose): nondependent choose ([#3806](https://github.com/leanprover-community/mathlib/pull/#3806))

Now you can write `choose!` to eliminate propositional arguments from the chosen functions.
```
example (h : ∀n m : ℕ, n < m → ∃i j, m = n + i ∨ m + j = n) : true :=
begin
  choose! i j h using h,
  guard_hyp i := ℕ → ℕ → ℕ,
  guard_hyp j := ℕ → ℕ → ℕ,
  guard_hyp h := ∀ (n m : ℕ), n < m → m = n + i n m ∨ m + j n m = n,
  trivial
end
```

### [2020-08-16T17:15:55+00:00](https://github.com/leanprover-community/mathlib/commit/3d4f085e8fd6e5ae91663f1b579c1088f42c8c88)
chore(ring_theory/ideal): docstring for Krull's theorem and a special case ([#3831](https://github.com/leanprover-community/mathlib/pull/#3831))

### [2020-08-16T13:39:50+00:00](https://github.com/leanprover-community/mathlib/commit/ee74e7f6c768523bd78cfb6b10a6e98f5513fcb2)
feat(analysis/special_functions/exp_log): `tendsto real.log at_top at_top` ([#3826](https://github.com/leanprover-community/mathlib/pull/#3826))

### [2020-08-16T12:41:57+00:00](https://github.com/leanprover-community/mathlib/commit/863bf79323abf99c8cce9c1608aa93e91818d28d)
feat(data/padics): more valuations, facts about norms ([#3790](https://github.com/leanprover-community/mathlib/pull/#3790))

Assorted lemmas about the `p`-adics. @jcommelin and I are adding algebraic structure here as part of the Witt vector development.

Some of these declarations are stolen shamelessly from the perfectoid project.

Coauthored by: Johan Commelin <johan@commelin.net>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-08-16T11:27:24+00:00](https://github.com/leanprover-community/mathlib/commit/a6f6434307d76da9e8ffbaf33294beca2d0b99b5)
feat(data/fin): bundled embedding ([#3822](https://github.com/leanprover-community/mathlib/pull/#3822))

Add the coercion from `fin n` to `ℕ` as a bundled embedding, an
equivalent of `function.embedding.subtype`.  Once leanprover-community/lean[#359](https://github.com/leanprover-community/mathlib/pull/#359) is fixed
(making `fin n` a subtype), this can go away as a duplicate, but until
then it is useful.

### [2020-08-16T10:08:53+00:00](https://github.com/leanprover-community/mathlib/commit/dda2dcd59e3a71cb34407b04ecde61fdc3dc4424)
chore(data/*): doc strings on some definitions ([#3791](https://github.com/leanprover-community/mathlib/pull/#3791))

Doc strings on definitions in `data.` which I could figure out what it does.

### [2020-08-16T08:37:23+00:00](https://github.com/leanprover-community/mathlib/commit/8f030356c4bdc5b4ccdd06c0b916144c565f5a89)
chore(algebra/with_one): docstrings ([#3817](https://github.com/leanprover-community/mathlib/pull/#3817))

### [2020-08-16T07:20:48+00:00](https://github.com/leanprover-community/mathlib/commit/20fe4a16723d81224fb21c1a568f62bed4a4b54a)
feat(algebra/euclidean_domain): some cleanup ([#3752](https://github.com/leanprover-community/mathlib/pull/#3752))

Lower the priority of simp-lemmas which have an equivalent version in `group_with_zero`, so that the version of `group_with_zero` is found by `squeeze_simp` for types that have both structures.
Add docstrings
Remove outdated comment

### [2020-08-16T06:05:27+00:00](https://github.com/leanprover-community/mathlib/commit/490d3cef2c44c81c59a0021c9bde2bdad715cdbe)
refactor(data/list/palindrome): use decidable_of_iff' ([#3823](https://github.com/leanprover-community/mathlib/pull/#3823))

Follow-up to [#3729](https://github.com/leanprover-community/mathlib/pull/#3729).

`decidable_of_iff'` allows for omitting the `eq.symm`.

### [2020-08-16T06:05:25+00:00](https://github.com/leanprover-community/mathlib/commit/62374f74d7542b9761dc4a2f9790ccf9e2fd6524)
doc(data/real/card): docs and cleanup ([#3815](https://github.com/leanprover-community/mathlib/pull/#3815))

### [2020-08-16T06:05:24+00:00](https://github.com/leanprover-community/mathlib/commit/8325cf6b4e20ec82f2746c0c4447d330a4e3c0f1)
feat(*): reorder implicit arguments in tsum, supr, infi ([#3809](https://github.com/leanprover-community/mathlib/pull/#3809))

This is helpful for a future version of the `ge_or_gt` linter to recognize binders: the binding type is the (implicit) argument directly before the binding body.

### [2020-08-16T06:05:21+00:00](https://github.com/leanprover-community/mathlib/commit/dba30189ecdc8ba41a37bb7e49e19964a744a0ef)
feat(category_theory): the category of indexed families of objects ([#3735](https://github.com/leanprover-community/mathlib/pull/#3735))

Pulling out a definition from [#3638](https://github.com/leanprover-community/mathlib/pull/#3638), and add some associated basic material.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-16T06:05:19+00:00](https://github.com/leanprover-community/mathlib/commit/3c2ed2ae0a17909ad33c68d52bb8c3609502817d)
feat(topology/sheaves): construct sheaves of functions ([#3608](https://github.com/leanprover-community/mathlib/pull/#3608))

# Sheaf conditions for presheaves of (continuous) functions.

We show that
* `Top.sheaf_condition.to_Type`: not-necessarily-continuous functions into a type form a sheaf
* `Top.sheaf_condition.to_Types`: in fact, these may be dependent functions into a type family
* `Top.sheaf_condition.to_Top`: continuous functions into a topological space form a sheaf

Co-authored-by: Johan Commelin <johan@commelin.net>



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-16T06:05:17+00:00](https://github.com/leanprover-community/mathlib/commit/765e460571ccc85695002c9de6da9913f2a7e28f)
feat(ring_theory/polynomial/homogeneous): definition and basic props ([#3223](https://github.com/leanprover-community/mathlib/pull/#3223))

This PR also move ring_theory/polynomial.lean to
ring_theory/polynomial/basic.lean

This PR is part of bringing symmetric polynomials to mathlib,
and besided that, I also expect to add binomial polynomials
and Chebyshev polynomials in the future.
Altogether, this motivates the starting of a ring_theory/polynomial
directory.
The file basic.lean may need cleaning or splitting at some point.




Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-08-16T04:46:02+00:00](https://github.com/leanprover-community/mathlib/commit/b1e7fb2d421ffe3225f888a8ac82a922e2b9cb33)
feat (category_theory/over): composition of `over.map` ([#3798](https://github.com/leanprover-community/mathlib/pull/#3798))

Filtering in some defs from the topos project.
~~Depends on [#3797](https://github.com/leanprover-community/mathlib/pull/#3797).~~

### [2020-08-16T04:46:00+00:00](https://github.com/leanprover-community/mathlib/commit/1037a3a781928fc61122e74c912c535ecce975db)
feat(algebra/homology, category_theory/abelian, algebra/category/Module): exactness ([#3784](https://github.com/leanprover-community/mathlib/pull/#3784))

We define what it means for two maps `f` and `g` to be exact and show that for R-modules, this is the case if and only if `range f = ker g`.

### [2020-08-16T04:45:58+00:00](https://github.com/leanprover-community/mathlib/commit/2c930a378143f4f4969691bf9b79bffc4615ef36)
refactor(algebra/gcd_monoid, ring_theory/multiplicity): generalize normalization_domain, gcd_domain, multiplicity ([#3779](https://github.com/leanprover-community/mathlib/pull/#3779))

* generalize `normalization_domain`, `gcd_domain`, `multiplicity` to not reference addition and subtraction
* make `gcd_monoid` and `normalization_monoid` into mixins
* add instances of `normalization_monoid` for `nat`, `associates`

### [2020-08-16T03:16:51+00:00](https://github.com/leanprover-community/mathlib/commit/ae8abf370ba7566edfd39c1c69e7f5d649fc8b85)
chore(order/rel_iso): rename order_iso and order_embedding to rel_iso and rel_embedding ([#3750](https://github.com/leanprover-community/mathlib/pull/#3750))

renames `order_iso` and `order_embedding`, to make it clear they apply to all binary relations
makes room for a new definition of `order_embedding` that will deal with order instances

### [2020-08-16T01:06:39+00:00](https://github.com/leanprover-community/mathlib/commit/55d06a94ce8718943ee8f5c7bc9751b8aff6273e)
chore(scripts): update nolints.txt ([#3820](https://github.com/leanprover-community/mathlib/pull/#3820))

I am happy to remove some nolints for you!

### [2020-08-16T01:06:37+00:00](https://github.com/leanprover-community/mathlib/commit/bf51f82aab48ca8b65520ec5cb71040b10e18db2)
feat(ring_theory/integral_closure): Rings lying within an integral extension are integral extensions ([#3781](https://github.com/leanprover-community/mathlib/pull/#3781))

Proofs that if an algebra tower is integral then so are the two extensions making up the tower. I needed these for another proof I'm working on, but it seemed reasonable to create a smaller PR now since they are basically self contained.

Co-authored-by: Devon Tuma <dtumad@gmail.com>

### [2020-08-16T01:06:35+00:00](https://github.com/leanprover-community/mathlib/commit/a991854f3fd7e4b2686113cc2523b132d5cf4287)
feat(category_theory/limits): a Fubini theorem ([#3732](https://github.com/leanprover-community/mathlib/pull/#3732))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-15T23:34:47+00:00](https://github.com/leanprover-community/mathlib/commit/ad8c7e55320cf45be6f6ab71895b52a7240dc20d)
chore(algebra/group/defs): docstrings ([#3819](https://github.com/leanprover-community/mathlib/pull/#3819))

### [2020-08-15T23:34:45+00:00](https://github.com/leanprover-community/mathlib/commit/ad8dcaf30979eeac2c33a5513ee8da2b7756f6ae)
chore(algebra/field): docstrings ([#3814](https://github.com/leanprover-community/mathlib/pull/#3814))

### [2020-08-15T23:34:43+00:00](https://github.com/leanprover-community/mathlib/commit/598c0912dbbdbeec0697f3c0cc85219c2601f256)
chore(tactic/squeeze): format `simp only []` as `simp only` ([#3811](https://github.com/leanprover-community/mathlib/pull/#3811))

fixes [#3150](https://github.com/leanprover-community/mathlib/pull/#3150)

### [2020-08-15T23:34:42+00:00](https://github.com/leanprover-community/mathlib/commit/e75ada7f3db0c351787a1f1be6e76b36509ed237)
docs(category_theory/limits/cones): cones documentation and equivalence fixup ([#3795](https://github.com/leanprover-community/mathlib/pull/#3795))

Mostly adding documentation in `ct.limits.cones`, but also shortened a couple of proofs. I also adjusted a couple of statements for `is_equivalence` to match the `is_equivalence` projections which are meant to be used (these statements were only used for cones anyway).

### [2020-08-15T23:34:40+00:00](https://github.com/leanprover-community/mathlib/commit/db99f674c102348eb0f33339cb8b1c6d0004c400)
docs(category_theory/adjunction): document convenience constructors for adjunctions ([#3788](https://github.com/leanprover-community/mathlib/pull/#3788))

As mentioned here: https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/monoid.20object/near/204930460

### [2020-08-15T22:44:14+00:00](https://github.com/leanprover-community/mathlib/commit/cd1c00d54e4c84a58b80868229d6cb4c7baa58cd)
chore(algebra/associated): docstrings ([#3813](https://github.com/leanprover-community/mathlib/pull/#3813))



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-08-15T22:09:09+00:00](https://github.com/leanprover-community/mathlib/commit/8f75f96381240118c7db8c34ebbf73c24018586d)
feat(geometry/euclidean): circumcenter and circumradius ([#3693](https://github.com/leanprover-community/mathlib/pull/#3693))

Show that every simplex in a Euclidean affine space has a unique
circumcenter (in the affine subspace spanned by that simplex) and
circumradius.  There are four main pieces, which all seem closely
enough related to put them all together in the same PR.  Both (b) and
(c) have quite long proofs, but I don't see obvious pieces to extract
from them.

(a) Various lemmas about `orthogonal_projection` in relation to points
equidistant from families of points.

(b) The induction step for the existence and uniqueness of the
(circumcenter, circumradius) pair, `exists_unique_dist_eq_of_insert`
(this is actually slightly more general than is needed for the
induction; it includes going from a set of points that has a unique
circumcenter and circumradius despite being infinite or not affine
independent, to such a unique circumcenter and circumradius when
another point is added outside their affine subspace).  This is
essentially just a calculation using an explicit expression for the
distance of the circumcenter of the new set of points from its
orthogonal projection, but still involves quite a lot of manipulation
to get things down to a form `field_simp, ring` can handle.

(c) The actual induction
`exists_unique_dist_eq_of_affine_independent`, giving a unique
(circumcenter, circumradius) pair for for any affine independent
family indexed by a `fintype`, by induction on the cardinality of that
`fintype` and using the result from (b).  Given (b), this is
essentially a lot of manipulation of trivialities.

(d) Extracting definitions and basic properties of `circumcenter` and
`circumradius` from the previous result.

### [2020-08-15T20:42:02+00:00](https://github.com/leanprover-community/mathlib/commit/b97b08b741892deba931c36b6619c9afc480e139)
fix(*): remove usages of ge/gt ([#3808](https://github.com/leanprover-community/mathlib/pull/#3808))

These were not caught by the old `ge_or_gt` linter, but they will be caught by the new (upcoming) `ge_or_gt` linter.
The `nolint` flags are not yet removed, this will happen in a later PR.
Renamings:
```
char_is_prime_of_ge_two -> char_is_prime_of_two_le
dist_eq_sub_of_ge -> dist_eq_sub_of_le_right
gt_of_mul_lt_mul_neg_right -> lt_of_mul_lt_mul_neg_right
```

### [2020-08-15T20:42:00+00:00](https://github.com/leanprover-community/mathlib/commit/36ced83a66127aafeb58b4c910ae09d154ef0f1f)
chore(linear_algebra/matrix): format doc using markdown ([#3807](https://github.com/leanprover-community/mathlib/pull/#3807))

### [2020-08-15T20:41:57+00:00](https://github.com/leanprover-community/mathlib/commit/26f2d4ecddceed6949b5b0492a826d0c6d5ca729)
docs(data/sum): fix typo in sum.is_right docs ([#3805](https://github.com/leanprover-community/mathlib/pull/#3805))

### [2020-08-15T20:41:56+00:00](https://github.com/leanprover-community/mathlib/commit/9339a3459cac8d7e295305ffc471009cb5f3b467)
chore(data/list/defs): docstring ([#3804](https://github.com/leanprover-community/mathlib/pull/#3804))

### [2020-08-15T20:41:54+00:00](https://github.com/leanprover-community/mathlib/commit/7f1a48932fa42477c271748b2d284c56baee919f)
fix(algebra/order): restore choiceless theorems ([#3799](https://github.com/leanprover-community/mathlib/pull/#3799))

The classical_decidable linter commit made these choiceless proofs use choice
again, making them duplicates of other theorems not in the `decidable.`
namespace.

### [2020-08-15T20:41:52+00:00](https://github.com/leanprover-community/mathlib/commit/2e890e61ac6f93d9da21876aee3641fd0036fc49)
feat(category_theory/comma): constructing isos in the comma,over,under cats ([#3797](https://github.com/leanprover-community/mathlib/pull/#3797))

Constructors to give isomorphisms in comma, over and under categories - essentially these just let you omit checking one of the commuting squares using the fact that the components are iso and the other square works.

### [2020-08-15T20:41:50+00:00](https://github.com/leanprover-community/mathlib/commit/c9bf6f24d242756e705b3d01e23767176255ea52)
feat(linear_algebra/affine_space/independent): affinely independent sets ([#3794](https://github.com/leanprover-community/mathlib/pull/#3794))

Prove variants of `affine_independent_iff_linear_independent_vsub`
that relate affine independence for a set of points (as opposed to an
indexed family of points) to linear independence for a set of vectors,
so facilitating linking to results such as `exists_subset_is_basis`
expressed in terms of linearly independent sets of vectors.  There are
two variants, depending on which of the set of points or the set of
vectors is given as a hypothesis.

Thus, applying `exists_subset_is_basis`, deduce that if `k` is a
field, any affinely independent set of points can be extended to such
a set that spans the whole space.

Zulip discussion:
https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear.20suffering

### [2020-08-15T20:41:48+00:00](https://github.com/leanprover-community/mathlib/commit/ef3ba8bf41f3c122b1dcb66530a24defcdcd132d)
docs(category_theory/adjunction): lint some adjunction defs ([#3793](https://github.com/leanprover-community/mathlib/pull/#3793))

### [2020-08-15T20:41:45+00:00](https://github.com/leanprover-community/mathlib/commit/d40c06f077a2ff96a7e671bbcb501dd127a74b94)
feat(algebra/ordered_field): rewrite and cleanup ([#3751](https://github.com/leanprover-community/mathlib/pull/#3751))

Group similar lemmas in a more intuitive way
Add docstrings, module doc and section headers
Simplify some proofs
Remove some implications if they had a corresponding `iff` lemma.
Add some more variants of some lemmas
Rename some lemmas for consistency
List of name changes (the lemma on the right might be a bi-implication, if the original version was an implication):
`add_midpoint` -> `add_sub_div_two_lt`
`le_div_of_mul_le`, `mul_le_of_le_div` -> `le_div_iff`
`lt_div_of_mul_lt`, `mul_lt_of_lt_div` -> `lt_div_iff`
`div_le_of_le_mul` -> `div_le_iff'`
`le_mul_of_div_le` -> `div_le_iff`
`div_lt_of_pos_of_lt_mul` -> `div_lt_iff'`
`mul_le_of_neg_of_div_le`, `div_le_of_neg_of_mul_le` -> `div_le_iff_of_neg`
`mul_lt_of_neg_of_div_lt`, `div_lt_of_neg_of_mul_lt` -> `div_lt_iff_of_neg`
`div_le_div_of_pos_of_le` -> `div_le_div_of_le`
`div_le_div_of_neg_of_le` -> `div_le_div_of_nonpos_of_le`
`div_lt_div_of_pos_of_lt` -> `div_lt_div_of_lt`
`div_mul_le_div_mul_of_div_le_div_nonneg` -> `div_mul_le_div_mul_of_div_le_div`
`one_le_div_of_le`, `le_of_one_le_div`, `one_le_div_iff_le` -> `one_le_div`
`one_lt_div_of_lt`, `lt_of_one_lt_div`, `one_lt_div_iff_lt` -> `one_lt_div`
`div_le_one_iff_le` -> `div_le_one`
`div_lt_one_iff_lt` -> `div_lt_one`
`one_div_le_of_pos_of_one_div_le` -> `one_div_le`
`one_div_le_of_neg_of_one_div_le` -> `one_div_le_of_neg`
`div_lt_div_of_pos_of_lt_of_pos` -> `div_lt_div_of_lt_left`

One regression I noticed in some other files: when using `div_le_iff`, and the argument is proven by some lemma about `linear_ordered_semiring` then Lean gives a type mismatch. Presumably this happens because the instance chain `ordered_field -> has_le` doesn't go via `ordered_semiring`. The fix is to give the type explicitly, for example using `div_le_iff (t : (0 : ℝ) < _)`

### [2020-08-15T20:41:42+00:00](https://github.com/leanprover-community/mathlib/commit/f953a9d1153249b957ac1f15e43642990e7d0c66)
feat(category_theory/limits/shapes/types): duals ([#3738](https://github.com/leanprover-community/mathlib/pull/#3738))

Just dualising some existing material.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-15T19:14:07+00:00](https://github.com/leanprover-community/mathlib/commit/8ce00af676f0eead15a58e1febea14a22b1cd87a)
feat(data/set/basic): pairwise_on for equality ([#3802](https://github.com/leanprover-community/mathlib/pull/#3802))

Add another lemma about `pairwise_on`: if and only if `f` takes
pairwise equal values on `s`, there is some value it takes everywhere
on `s`.  This arose from discussion in [#3693](https://github.com/leanprover-community/mathlib/pull/#3693).

### [2020-08-15T19:14:05+00:00](https://github.com/leanprover-community/mathlib/commit/78354e149db96f4ce29d2dfbf6f76eeb5e68e315)
feat(tactic/linarith): support case splits in preprocessing (including `ne` hypotheses) ([#3786](https://github.com/leanprover-community/mathlib/pull/#3786))

This adds an API for `linarith` preprocessors to branch. Each branch results in a separate call to `linarith`, so this can be exponentially bad. Use responsibly.

Given that the functionality is there, and I needed a way to test it, I've added a feature that people have been begging for that I've resisted: you can now call `linarith {split_ne := tt}` to handle `a ≠ b` hypotheses. Again: 2^n `linarith` calls for `n` disequalities in your context.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2020-08-15T17:58:55+00:00](https://github.com/leanprover-community/mathlib/commit/050728b083107f7a39c8152b7778959c2427f517)
feat(data/fintype/basic): card lemma and finset bool alg ([#3796](https://github.com/leanprover-community/mathlib/pull/#3796))

Adds the card lemma
```
finset.card_le_univ [fintype α] (s : finset α) : s.card ≤ fintype.card α
```
which I expected to see in mathlib, and upgrade the bounded_distrib_lattice instance on finset in the presence of fintype to a boolean algebra instance.

### [2020-08-15T17:58:53+00:00](https://github.com/leanprover-community/mathlib/commit/44010bc632d170f32044d0d7b831ca2bc875b373)
refactor(linear_algebra/affine_space/combination): bundled affine_combination ([#3789](https://github.com/leanprover-community/mathlib/pull/#3789))

When `weighted_vsub_of_point` and `weighted_vsub` became bundled
`linear_map`s on the weights, `affine_combination` was left as an
unbundled function with different argument order from the other two
related operations.  Make it into a bundled `affine_map` on the
weights, so making it more consistent with the other two operations
and allowing general results on `affine_map`s to be used on
`affine_combination` (as illustrated by the changed proofs of
`weighted_vsub_vadd_affine_combination` and
`affine_combination_vsub`).

### [2020-08-15T17:58:51+00:00](https://github.com/leanprover-community/mathlib/commit/9216dd7d54c6ca91f9ffa2c674529a414dac7230)
chore(ring_theory): delete `is_algebra_tower` ([#3785](https://github.com/leanprover-community/mathlib/pull/#3785))

Delete the abbreviation `is_algebra_tower` for `is_scalar_tower`, and replace all references (including the usages of the `is_algebra_tower` namespace) with `is_scalar_tower`. Documentation should also have been updated accordingly.

This change was requested in a comment on [#3717](https://github.com/leanprover-community/mathlib/pull/#3717).




Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-08-15T16:25:49+00:00](https://github.com/leanprover-community/mathlib/commit/9451f8de877e3c41d0ec6ed2878c5ca1572b36af)
feat(data/sum): add sum.{get_left, get_right, is_left, is_right} ([#3792](https://github.com/leanprover-community/mathlib/pull/#3792))

### [2020-08-15T14:12:32+00:00](https://github.com/leanprover-community/mathlib/commit/daafd6f76d79263c767bcbe0240bf78b5e28d001)
chore(number_theory/pythagorean_triples): added doc-strings ([#3787](https://github.com/leanprover-community/mathlib/pull/#3787))

Added docstrings to:

`pythagorean_triple_comm`
`pythagorean_triple.zero`
`mul`
`mul_iff`



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-08-15T14:12:30+00:00](https://github.com/leanprover-community/mathlib/commit/10d4811e916531c29809cf7d9ee6bf1e5c41f380)
feat(algebra/add_torsor): injectivity lemmas ([#3767](https://github.com/leanprover-community/mathlib/pull/#3767))

Add variants of the `add_action` and `add_torsor` cancellation lemmas
whose conclusion is stated in terms of `function.injective`.

### [2020-08-15T12:43:48+00:00](https://github.com/leanprover-community/mathlib/commit/5c13693f857c223f393806334bc6238e775adeba)
chore(algebra/classical_lie_algebras): fix some doc strings ([#3776](https://github.com/leanprover-community/mathlib/pull/#3776))

### [2020-08-15T12:43:45+00:00](https://github.com/leanprover-community/mathlib/commit/9ac6e8ad3ac98751d1479071f300a5fb6820e853)
refactor(set_theory/pgame): rename pgame lemma ([#3775](https://github.com/leanprover-community/mathlib/pull/#3775))

Renamed `move_left_right_moves_neg_symm` to `move_left_left_moves_neg_symm` to make it consistent with the other 3 related lemmas

### [2020-08-15T12:43:43+00:00](https://github.com/leanprover-community/mathlib/commit/658cd387f78821e4a231a67047e5741427bfa77c)
feat(tactic/derive_fintype): derive fintype instances ([#3772](https://github.com/leanprover-community/mathlib/pull/#3772))

This adds a `@[derive fintype]` implementation, like so:
```
@[derive fintype]
inductive foo (α : Type)
| A : α → foo
| B : α → α → foo
| C : α × α → foo
| D : foo
```

### [2020-08-15T12:43:41+00:00](https://github.com/leanprover-community/mathlib/commit/18746ef67f6ff9f1f2ed7cb132857623e3fb4e38)
feat(analysis/special_functions/pow): Added lemmas for rpow of neg exponent ([#3715](https://github.com/leanprover-community/mathlib/pull/#3715))

I noticed that the library was missing some lemmas regarding the bounds of rpow of a negative exponent so I added them. I cleaned up the other similar preexisting lemmas for consistency. I then repeated the process for nnreal lemmas.

### [2020-08-15T12:43:39+00:00](https://github.com/leanprover-community/mathlib/commit/099f070f41867bb6bd0f6494307873a126e3c4ad)
feat(topology/sheaves): the sheaf condition ([#3605](https://github.com/leanprover-community/mathlib/pull/#3605))

Johan and I have been working with this, and it's at least minimally viable.

In follow-up PRs we have finished:
* constructing the sheaf of dependent functions to a type family
* constructing the sheaf of continuous functions to a fixed topological space
* checking the sheaf condition under forgetful functors that reflect isos and preserve limits (https://stacks.math.columbia.edu/tag/0073)

Obviously there's more we'd like to see before being confident that a design for sheaves is workable, but we'd like to get started!



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-15T12:06:09+00:00](https://github.com/leanprover-community/mathlib/commit/36b4a1e32169ccca757d6d5ba6934f28fa6e954b)
refactor(algebra/add_torsor): use `out_param` ([#3727](https://github.com/leanprover-community/mathlib/pull/#3727))



Co-authored-by: Joseph Myers <jsm@polyomino.org.uk>

### [2020-08-15T10:36:54+00:00](https://github.com/leanprover-community/mathlib/commit/2b8ece6488420387414f46d21f75fb6feef07cbb)
feat(data/nat/basic): one mod two or higher is one ([#3763](https://github.com/leanprover-community/mathlib/pull/#3763))

### [2020-08-15T10:09:19+00:00](https://github.com/leanprover-community/mathlib/commit/c444a005b6ff56478cea019ba273e9ee7ce8a52e)
Revert "chore(ring_theory): delete `is_algebra_tower`"

This reverts commit c956ce1516ccfb3139ae3ebde7ede9c678d81968.

### [2020-08-15T10:05:13+00:00](https://github.com/leanprover-community/mathlib/commit/c956ce1516ccfb3139ae3ebde7ede9c678d81968)
chore(ring_theory): delete `is_algebra_tower`

Delete the abbreviation `is_algebra_tower` for `is_scalar_tower`,
and replace all references (including the usages of the `is_algebra_tower`
namespace) with `is_scalar_tower`. Documentation should also have been
updated accordingly.

This change was requested in a comment on [#3717](https://github.com/leanprover-community/mathlib/pull/#3717).

### [2020-08-15T08:45:27+00:00](https://github.com/leanprover-community/mathlib/commit/67dad7f377f23e68e24ac5238479b4c31c1a7bdd)
feat(control/equiv_functor): fintype instance ([#3783](https://github.com/leanprover-community/mathlib/pull/#3783))

Requested at https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/fintype.2Eequiv_congr/near/206773279



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-15T07:22:35+00:00](https://github.com/leanprover-community/mathlib/commit/b670212ca7d2b9d835a047baea150b27873437e4)
fix(tactic/apply): fix ordering of goals produced by `apply` ([#3777](https://github.com/leanprover-community/mathlib/pull/#3777))

### [2020-08-15T07:22:33+00:00](https://github.com/leanprover-community/mathlib/commit/c1a5283b6f082f17287d72b273049b5b18c7fc1e)
refactor(data/list/tfae): tfae.out ([#3774](https://github.com/leanprover-community/mathlib/pull/#3774))

This version of `tfae.out` has slightly better automatic reduction behavior: if `h : [a, b, c].tfae` then the original of `h.out 1 2` proves `[a, b, c].nth_le 1 _ <-> [a, b, c].nth_le 2 _` while the new version of `h.out 1 2` proves `b <-> c`. These are the same, of course, and you can mostly use them interchangeably, but the second one is a bit nicer to look at (and possibly works better with e.g. subsequent rewrites).

### [2020-08-15T06:35:10+00:00](https://github.com/leanprover-community/mathlib/commit/55f492655642c32788c25d35da66641d2a002a8b)
fix(algebra/archimedean): switch to a more natural and general condition in exists_nat_pow_near ([#3782](https://github.com/leanprover-community/mathlib/pull/#3782))

per discussion at https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Starting.20to.20contribute.20to.20mathlib/near/206945824

Co-authored-by: Junyan Xu <junyanxu.math@gmail.com>

### [2020-08-14T17:00:08+00:00](https://github.com/leanprover-community/mathlib/commit/3ae44bd110eaee0c20f39a818d17c9205ad8d182)
fix(tactic/equiv_rw): fix problem with stuck universe metavariables ([#3773](https://github.com/leanprover-community/mathlib/pull/#3773))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-14T15:47:08+00:00](https://github.com/leanprover-community/mathlib/commit/c25280031da754d1731b31e81426ab2f8fe218d0)
chore(*): use notation for `filter.prod` ([#3768](https://github.com/leanprover-community/mathlib/pull/#3768))

Also change from `∀ v w ∈ V` to `∀ (v ∈ V) (w ∈ V)` in `exists_nhds_split_inv`, `exists_nhds_half_neg`, `add_group_with_zero_nhd.exists_Z_half`.

### [2020-08-14T12:28:48+00:00](https://github.com/leanprover-community/mathlib/commit/0e5f44b078b085c0bb3a999b6adbe7b8997877ba)
chore(*): assorted lemmas for FTC-1 ([#3755](https://github.com/leanprover-community/mathlib/pull/#3755))

Lemmas from FTC-1 (`has_strict_deriv` version) [#3709](https://github.com/leanprover-community/mathlib/pull/#3709)

### [2020-08-14T00:40:06+00:00](https://github.com/leanprover-community/mathlib/commit/b611c5fa11c7b249e2f3c2db693d425def8c73f2)
chore(scripts): update nolints.txt ([#3771](https://github.com/leanprover-community/mathlib/pull/#3771))

I am happy to remove some nolints for you!

### [2020-08-13T19:36:34+00:00](https://github.com/leanprover-community/mathlib/commit/32c6a73ee617b2b8c2bc71e9200f5e705f12b517)
feat(ci): auto label merge conflicts, try 2 ([#3766](https://github.com/leanprover-community/mathlib/pull/#3766))

### [2020-08-13T19:36:32+00:00](https://github.com/leanprover-community/mathlib/commit/627b431796b1675db4864c6f4186298dae43efc8)
feat(tactic/find_unused): find the dead code in a module ([#3701](https://github.com/leanprover-community/mathlib/pull/#3701))

### [2020-08-13T19:36:30+00:00](https://github.com/leanprover-community/mathlib/commit/28dfad8c9533346bcf4b6a7e3cac9bc509116db7)
feat(ideals,submonoids,subgroups): mem_sup(r) and mem_inf(i) lemmas ([#3697](https://github.com/leanprover-community/mathlib/pull/#3697))



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-08-13T18:09:00+00:00](https://github.com/leanprover-community/mathlib/commit/4cc094bcc101c25bdc9bcbaaa8c7c8e2b683f20a)
chore(data/int/basic): norm_cast attribute on int.coe_nat_mod ([#3765](https://github.com/leanprover-community/mathlib/pull/#3765))

### [2020-08-13T14:29:54+00:00](https://github.com/leanprover-community/mathlib/commit/c66ecd3f6d1602c08197c0971a36d1abd62deb50)
feat(intervals/image_preimage): preimage under multiplication ([#3757](https://github.com/leanprover-community/mathlib/pull/#3757))

Add lemmas `preimage_mul_const_Ixx` and `preimage_const_mul_Ixx`.
Also generalize `equiv.mul_left` and `equiv.mul_right` to `units`.

### [2020-08-13T12:59:37+00:00](https://github.com/leanprover-community/mathlib/commit/f912f1881df79560a27c71ffcaed0edf1b2c44c0)
feat(ci): auto label merge conflicts ([#3761](https://github.com/leanprover-community/mathlib/pull/#3761))

### [2020-08-13T12:59:35+00:00](https://github.com/leanprover-community/mathlib/commit/34352c2d0a95255f51c1a489e7f29a01cf6537bc)
refactor(algebra/associated): change several instances from [integral_domain] to [comm_cancel_monoid_with_zero] ([#3744](https://github.com/leanprover-community/mathlib/pull/#3744))

defines `comm_cancel_monoid_with_zero`
replaces some `integral_domain` instances with `comm_cancel_monoid_with_zero`
prepares the API for refactoring `normalization_domain`, `gcd_domain`, and `unique_factorization_domain` to monoids



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2020-08-13T12:59:33+00:00](https://github.com/leanprover-community/mathlib/commit/2c4300b4c5a9d057f8b04cb01a06f71a7f2f5858)
feat(data/polynomial): adds map_comp ([#3736](https://github.com/leanprover-community/mathlib/pull/#3736))

Adds lemma saying that the map of the composition of two polynomials is the composition of the maps, as mentioned [here](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Polynomial.20composition.20and.20map.20commute).

Co-authored-by: Thomas Browning tb65536@uw.edu

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-08-13T11:32:00+00:00](https://github.com/leanprover-community/mathlib/commit/ac2f01186c5f44fccf1af2349a348bc0f2556ff2)
feat(data/*): Add sizeof lemmas. ([#3745](https://github.com/leanprover-community/mathlib/pull/#3745))



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-08-13T11:01:00+00:00](https://github.com/leanprover-community/mathlib/commit/b1e56a21337e08dab0473d66aac8d53ef278aa56)
feat(analysis/special_functions/trigonometric): Added lemma cos_ne_zero_iff ([#3743](https://github.com/leanprover-community/mathlib/pull/#3743))

I added the theorem `cos_ne_zero_iff`, a corollary to the preexisting theorem `cos_eq_zero_iff`
<!-- put comments you want to keep out of the PR commit here -->

### [2020-08-13T09:23:02+00:00](https://github.com/leanprover-community/mathlib/commit/ced74696ec45e83e9e8a393d098dca43603e0682)
chore(data/finset/order): use `[nonempty]` in `directed.finset_le` ([#3759](https://github.com/leanprover-community/mathlib/pull/#3759))

### [2020-08-13T09:23:00+00:00](https://github.com/leanprover-community/mathlib/commit/4c24a09121e12c1f9c9d1154cf798744886a7968)
chore(data/fintype/card): add `prod_bool` ([#3758](https://github.com/leanprover-community/mathlib/pull/#3758))

### [2020-08-13T09:22:58+00:00](https://github.com/leanprover-community/mathlib/commit/31a0258b79a4f5ec51e693eef920415ef1dd30e5)
chore(data/fintype/card): DRY using `@... (multiplicative _)` ([#3756](https://github.com/leanprover-community/mathlib/pull/#3756))

### [2020-08-13T09:22:56+00:00](https://github.com/leanprover-community/mathlib/commit/cc6528e72ad675d978d36c3044829bc389b39340)
feat(analysis/calculus/fderiv): multiplication by a complex respects real differentiability ([#3731](https://github.com/leanprover-community/mathlib/pull/#3731))

If `f` takes values in a complex vector space and is real-differentiable, then `c f` is also real-differentiable when `c` is a complex number. This PR proves this fact and the obvious variations, in the general case of two fields where one is a normed algebra over the other one.

Along the way, some material on `module.restrict_scalars` is added, notably in a normed space context.

### [2020-08-13T09:22:52+00:00](https://github.com/leanprover-community/mathlib/commit/cfcbea6e1e0e8c14697813d6e4c182527d17ad37)
feat(data/list/palindrome): define palindromes ([#3729](https://github.com/leanprover-community/mathlib/pull/#3729))

This introduces an inductive type `palindrome`, with conversions to and from the proposition `reverse l = l`.

Review of this PR indicates two things: (1) maybe the name `is_palindrome` is better, especially if we define the subtype of palindromic lists; (2) maybe defining palindrome by `reverse l = l` is simpler. We note these for future development.



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-08-13T07:52:35+00:00](https://github.com/leanprover-community/mathlib/commit/c503b7afdc2860f8cd765149c9a0b197ca651aff)
feat(algebra/order): more lemmas for projection notation ([#3753](https://github.com/leanprover-community/mathlib/pull/#3753))

Also import `tactic.lint` and ensure that the linter passes
Move `ge_of_eq` to this file

### [2020-08-13T06:22:20+00:00](https://github.com/leanprover-community/mathlib/commit/6c8b2cd61361601db10f8d9bb13cf01a0096cd3b)
fix(algebra/field) remove `one_div_eq_inv` ([#3749](https://github.com/leanprover-community/mathlib/pull/#3749))

It already existed as `one_div` for `group_with_zero`
Also make `one_div` a `simp` lemma and renamed `nnreal.one_div_eq_inv` to `nnreal.one_div`.

### [2020-08-13T01:10:43+00:00](https://github.com/leanprover-community/mathlib/commit/d6ffc1adf0a801cf2549f778145937342810cec3)
feat(tactic/clear_value): preserve order and naming ([#3700](https://github.com/leanprover-community/mathlib/pull/#3700))

### [2020-08-13T00:42:53+00:00](https://github.com/leanprover-community/mathlib/commit/cacb54ec3769859db730b4d68e4b0e4eca0194a3)
chore(scripts): update nolints.txt ([#3754](https://github.com/leanprover-community/mathlib/pull/#3754))

I am happy to remove some nolints for you!

### [2020-08-12T23:09:20+00:00](https://github.com/leanprover-community/mathlib/commit/486830b04b4e4fc82e3bd094e3ed4c3d57e8c990)
feat(tactic/choose): `choose` can now decompose conjunctions ([#3699](https://github.com/leanprover-community/mathlib/pull/#3699))

### [2020-08-12T20:04:21+00:00](https://github.com/leanprover-community/mathlib/commit/f8c813518d1b82796ddee465be03f964a0255867)
feat(tactic/rcases): type ascriptions in rcases ([#3730](https://github.com/leanprover-community/mathlib/pull/#3730))

This is a general rewrite of the `rcases` tactic, with the primary intent of adding support for type ascriptions in `rcases` patterns but it also includes a bunch more documentation, as well as making the grammar simpler, avoiding the strict tuple/alts alternations required by the previous `many` constructor (and the need for `rcases_patt_inverted` for whether the constructor means `tuple` of `alts` or `alts` of `tuple`).

From a user perspective, it should not be noticeably different, except:

* You can now use parentheses freely in patterns, so things like `a | (b | c)` work
* You can use type ascriptions

The new `rcases` is backward compatible with the old one, except that `rcases e with a` (where `a` is a name) no longer does any cases and is basically just another way to write `have a := e`; to get the same effect as `cases e with a` you have to write `rcases e with ⟨a⟩` instead.

### [2020-08-12T16:33:24+00:00](https://github.com/leanprover-community/mathlib/commit/4324778f62a42d4d0cba64680f2362f41b4a8a73)
feat(.): add code of conduct ([#3747](https://github.com/leanprover-community/mathlib/pull/#3747))

### [2020-08-12T15:04:27+00:00](https://github.com/leanprover-community/mathlib/commit/eb4b2a05384b2c8e096c8c2d61f6e949a031493f)
feat(field_theory/algebraic_closure): algebraic closure ([#3733](https://github.com/leanprover-community/mathlib/pull/#3733))

```lean
instance : is_alg_closed (algebraic_closure k) :=
```

TODO: Show that any algebraic extension embeds into any algebraically closed extension (via Zorn's lemma).



Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2020-08-12T10:41:14+00:00](https://github.com/leanprover-community/mathlib/commit/bfcf640034261e0b0ef829a37a0694ae4899f4bd)
feat(topology/opens): open_embedding_of_le ([#3597](https://github.com/leanprover-community/mathlib/pull/#3597))

Add `lemma open_embedding_of_le {U V : opens α} (i : U ≤ V) : open_embedding (set.inclusion i)`.

Also, I was finding it quite inconvenient to have `x ∈ U` for `U : opens X` being unrelated to `x ∈ (U : set X)`. I propose we just add the simp lemmas in this PR that unfold to the set-level membership operation.

(I'd be happy to go the other way if someone has a strong opinion here; just that we pick a simp normal form for talking about membership and inclusion of opens.)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-11T15:31:36+00:00](https://github.com/leanprover-community/mathlib/commit/06e140527a794f82f70012fb668c8ef4fb775362)
docs(category/default): Fix typo for monomorphism ([#3741](https://github.com/leanprover-community/mathlib/pull/#3741))

### [2020-08-11T09:57:43+00:00](https://github.com/leanprover-community/mathlib/commit/f92fd0d19459ca991f3090b4ced2e931fc7deceb)
refactor(algebra/divisibility, associated): generalize instances in divisibility, associated ([#3714](https://github.com/leanprover-community/mathlib/pull/#3714))

generalizes the divisibility relation to noncommutative monoids
adds missing headers to algebra/divisibility
generalizes the instances in many of the lemmas in algebra/associated
reunites (some of the) divisibility API for ordinals with general monoids



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2020-08-11T07:24:07+00:00](https://github.com/leanprover-community/mathlib/commit/57df7f5a9a80fea0e62795243c0a264782c035b7)
feat(haar_measure): define the Haar measure ([#3542](https://github.com/leanprover-community/mathlib/pull/#3542))

Define the Haar measure on a locally compact Hausdorff group.
Some additions and simplifications to outer_measure and content.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-08-11T00:42:24+00:00](https://github.com/leanprover-community/mathlib/commit/43ceb3e01ef133d5c39a1f2793f092751a573ce9)
chore(scripts): update nolints.txt ([#3734](https://github.com/leanprover-community/mathlib/pull/#3734))

I am happy to remove some nolints for you!

### [2020-08-10T19:28:55+00:00](https://github.com/leanprover-community/mathlib/commit/9e0399567f6f5cf60b74866290a1740ee97a3472)
chore(algebra/ordered_field): cleanup ([#3723](https://github.com/leanprover-community/mathlib/pull/#3723))

* drop `mul_zero_lt_mul_inv_of_pos` and `mul_zero_lt_mul_inv_of_neg`;
* add `iff` lemmas `one_div_pos/neg/nonneg/nonpos` replacing old
  implications;
* some lemmas now assume `≤` instead of `<`;
* rename `mul_lt_of_gt_div_of_neg` to `mul_lt_of_neg_of_div_lt`
  replacing `>` by `<`.
* add `mul_sub_mul_div_mul_neg_iff` and `mul_sub_mul_div_mul_nonpos_iff`,
  generate implications using `alias`;
* drop `div_pos_of_pos_of_pos` (use `div_pos`) and
  `div_nonneg_of_nonneg_of_pos` (use `div_nonneg`);
* replace `div_nonpos_of_nonpos_of_pos` with
  `div_nonpos_of_nonpos_of_nonneg`;
* replace `div_nonpos_of_nonneg_of_neg` with
  `div_nonpos_of_nonneg_of_nonpos`;
* replace `div_mul_le_div_mul_of_div_le_div_pos` and
  `div_mul_le_div_mul_of_div_le_div_pos'` with
  `div_mul_le_div_mul_of_div_le_div_nonneg`; I failed to find
  in the history why we had two equivalent lemmas.
* merge `le_mul_of_ge_one_right` and `le_mul_of_one_le_right'` into
  `le_mul_of_one_le_right`, rename old `le_mul_of_one_le_right` to
  `le_mul_of_one_le_right'`;
* ditto with `le_mul_of_ge_one_left`, `le_mul_of_one_le_left`, and
  `le_mul_of_one_le_left'`;
* ditto with `lt_mul_of_gt_one_right`, `lt_mul_of_one_lt_right`, and
  `lt_mul_of_one_lt_right'`;
* rename `div_lt_of_mul_lt_of_pos` to `div_lt_of_pos_of_lt_mul`;
* rename `div_lt_of_mul_gt_of_neg` to `div_lt_of_neg_of_mul_lt`;
* rename `mul_le_of_div_le_of_neg` to `mul_le_of_neg_of_div_le`;
* rename `div_le_of_mul_le_of_neg` to `div_le_of_neg_of_mul_le`;
* rename `div_lt_div_of_lt_of_pos` to `div_lt_div_of_pos_of_lt`, swap
  arguments;
* rename `div_le_div_of_le_of_pos` to `div_le_div_of_pos_of_le`, swap
  arguments;
* rename `div_lt_div_of_lt_of_neg` to `div_lt_div_of_neg_of_lt`, swap
  arguments;
* rename `div_le_div_of_le_of_neg` to `div_le_div_of_neg_of_le`, swap
  arguments;
* rename `one_div_lt_one_div_of_lt_of_neg` to
  `one_div_lt_one_div_of_neg_of_lt`;
* rename `one_div_le_one_div_of_le_of_neg` to
  `one_div_le_one_div_of_neg_of_le`;
* rename `le_of_one_div_le_one_div_of_neg` to
  `le_of_neg_of_one_div_le_one_div`;
* rename `lt_of_one_div_lt_one_div_of_neg` to
  `lt_of_neg_of_one_div_lt_one_div`;
* rename `one_div_le_of_one_div_le_of_pos` to
  `one_div_le_of_pos_of_one_div_le`;
* rename `one_div_le_of_one_div_le_of_neg` to
  `one_div_le_of_neg_of_one_div_le`.

### [2020-08-10T19:28:53+00:00](https://github.com/leanprover-community/mathlib/commit/4a75df921075566800ea591ef76cfafda3d80ccd)
feat(group_theory/group_action): generalize `is_algebra_tower` ([#3717](https://github.com/leanprover-community/mathlib/pull/#3717))

This PR introduces a new typeclass `is_scalar_tower R M N` stating that scalar multiplications between the three types are compatible: `smul_assoc : ((x : R) • (y : M)) • (z : N) = x • (y • z)`.
This typeclass is the general form of `is_algebra_tower`. It also generalizes some of the existing instances of `is_algebra_tower`. I didn't try very hard though, so I might have missed some instances.

Related Zulip discussions:
 * https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Effect.20of.20changing.20the.20base.20field.20on.20span
 * https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/pull.20back.20an.20R.20module.20along.20.60S.20-.3E.2B*.20R.60

### [2020-08-10T17:55:47+00:00](https://github.com/leanprover-community/mathlib/commit/37e97b53e502cd6cd50bee0dbf42bcf9f19e6252)
feat(tactic): fix two bugs with generalize' ([#3710](https://github.com/leanprover-community/mathlib/pull/#3710))

The name generated by `generalize'` will be exactly the given name, even if the name already occurs in the context.
There was a bug with `generalize' h : e = x` if `e` occurred in the goal.

### [2020-08-10T15:19:08+00:00](https://github.com/leanprover-community/mathlib/commit/478613630d1e9afa8e06c63666e4c0a7f1bb4e57)
feat(category_theory/limits): explicit isomorphisms between preserved limits ([#3602](https://github.com/leanprover-community/mathlib/pull/#3602))

When `G` preserves limits, it's nice to be able to quickly obtain the iso `G.obj (pi_obj f) ≅ pi_obj (λ j, G.obj (f j))`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-10T12:46:02+00:00](https://github.com/leanprover-community/mathlib/commit/5680428f3f2d98cbd7f2100ebc78d2244acf57c9)
chore(category_theory/limits): minor changes in equalizers and products ([#3603](https://github.com/leanprover-community/mathlib/pull/#3603))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-09T01:11:07+00:00](https://github.com/leanprover-community/mathlib/commit/17ef529d8da31ee2b738afafb5faa4de52463e1a)
refactor(linear_algebra/affine_space): split up file ([#3726](https://github.com/leanprover-community/mathlib/pull/#3726))

`linear_algebra/affine_space.lean` was the 10th largest `.lean` file
in mathlib.  Move it to `linear_algebra/affine_space/basic.lean` and
split out some pieces into separate files, so reducing its size to
41st largest as well as reducing dependencies for users not needing
all those files.

More pieces could also be split out (for example, splitting out
`homothety` would eliminate the dependence of
`linear_algebra.affine_space.basic` on
`linear_algebra.tensor_product`), but this split seems a reasonable
starting point.

This split is intended to preserve the exact set of definitions
present and their namespaces, just moving some of them to different
files, even if the existing namespaces aren't very consistent
(e.g. some definitions relating to affine combinations are in the
`finset` namespace, so allowing dot notation to be used for such
combinations, but others are in the `affine_space` namespace, and
there may not be a consistent rule for the division between the two).

### [2020-08-08T14:34:18+00:00](https://github.com/leanprover-community/mathlib/commit/f23fe9a324f3b6e12c1279ad573a6bfc2e941d02)
doc(tactic/lean_core_docs): by_cases is classical ([#3718](https://github.com/leanprover-community/mathlib/pull/#3718))

`by_cases` was changed to use classical reasoning (leanprover-community/mathlib[#3354](https://github.com/leanprover-community/mathlib/pull/#3354), leanprover-community/lean[#409](https://github.com/leanprover-community/mathlib/pull/#409)), but the documentation hasn't been updated yet.

I leave `by_contra` alone as it still uses `decidable`.

### [2020-08-08T13:01:43+00:00](https://github.com/leanprover-community/mathlib/commit/d27ddb498c9faccd5bbe115abfcd7c7d8b2fdee8)
chore(linear_algebra/basic): rewrite `p.comap q.subtype` to `comap q.subtype p` ([#3725](https://github.com/leanprover-community/mathlib/pull/#3725))

@PatrickMassot requested this change in the review of [#3720](https://github.com/leanprover-community/mathlib/pull/#3720):

> I find this statement very difficult to read. I think this is a bad use of dot notation, it really feels like `p` is pulling back `q.subtype` instead of the other way around (and even the docstring is suggesting that!). The same problem happens with filter.(co)map and always try to avoid it.
> I would open submodule and then write `comap q.subtype p ≃ₗ[R] p`.

### [2020-08-08T10:16:01+00:00](https://github.com/leanprover-community/mathlib/commit/1675dc405969680f795a691295e20a04dd534f66)
chore(order/complete_lattice): use `order_dual` ([#3724](https://github.com/leanprover-community/mathlib/pull/#3724))

### [2020-08-08T09:22:19+00:00](https://github.com/leanprover-community/mathlib/commit/bf1c7b75c1dc2ec62ac1885d8f3ff0f658c5f0da)
feat(linear_algebra/finite_dimensional): finite dimensional `is_basis` helpers ([#3720](https://github.com/leanprover-community/mathlib/pull/#3720))

If we have a family of vectors in `V` with cardinality equal to the (finite) dimension of `V` over a field `K`, they span the whole space iff they are linearly independent.
This PR proves those two facts (in the form that either of the conditions of `is_basis K b` suffices to prove `is_basis K b` if `b` has the right cardinality).

We don't need to assume that `V` is finite dimensional, because the case that `findim K V = 0` will generally lead to a contradiction. We do sometimes need to assume that the family is nonempty, which seems like a much nicer condition.

### [2020-08-07T21:33:16+00:00](https://github.com/leanprover-community/mathlib/commit/d61bd4ae29222280e1b6dec421c840fb83c30438)
feat(algebra/classical_lie_algebras): add lie_algebra.orthogonal.mem_so ([#3711](https://github.com/leanprover-community/mathlib/pull/#3711))

Also unrelated change to use new notation for direct_sum

### [2020-08-07T19:53:30+00:00](https://github.com/leanprover-community/mathlib/commit/1cd74b11d8079f291b8bb15e5f017705f13e5a10)
fix(linear_algebra/finite_dimensional): universe generalize cardinal_mk_le_findim_of_linear_independent ([#3721](https://github.com/leanprover-community/mathlib/pull/#3721))

### [2020-08-07T18:26:21+00:00](https://github.com/leanprover-community/mathlib/commit/00e4c04e099730fc288600f247741bef53ff27ff)
doc(linear_algebra/affine_space): expand module doc string ([#3719](https://github.com/leanprover-community/mathlib/pull/#3719))

Make module doc string discuss the main definitions relating to affine
spaces.




Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-08-07T18:26:19+00:00](https://github.com/leanprover-community/mathlib/commit/4e24f4cfac6b1785aaec313cf61c661657456df2)
feat(data/list/*): add indexed versions of some list functions ([#2191](https://github.com/leanprover-community/mathlib/pull/#2191))

Add `foldr_with_index`, `foldl_with_index`, `mfoldr_with_index`, `mfoldl_with_index`, `mmap_with_index` and `mmap_with_index'`. The new functions are proven correct by relating them to their non-indexed counterparts.

Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-08-07T16:49:27+00:00](https://github.com/leanprover-community/mathlib/commit/aacd757501217c92b7830e682389859f0e2c6e17)
feat(measurable_space): more properties of measurable sets in a product ([#3703](https://github.com/leanprover-community/mathlib/pull/#3703))

Add multiple lemmas about `prod` to `set.basic`
Some cleanup in `set.basic`
Fix the name of the instance `measure_space ℝ`
Cleanup and a couple of additions to the `prod` section of `measurable_space`.
Rename: `prod_singleton_singleton` -> `singleton_prod_singleton`
Use `prod.swap` in the statement of `image_swap_prod`.

### [2020-08-07T00:44:48+00:00](https://github.com/leanprover-community/mathlib/commit/49ba4c478073e5624e2c6f2ad2a5c94f1e69279c)
chore(scripts): update nolints.txt ([#3712](https://github.com/leanprover-community/mathlib/pull/#3712))

I am happy to remove some nolints for you!

### [2020-08-06T16:42:35+00:00](https://github.com/leanprover-community/mathlib/commit/1930601cb39d7e3e1895f32c8f1915e35d7036be)
feat(algebra/group_power): lemmas relating pow in `multiplicative int` with multiplication in `int` ([#3706](https://github.com/leanprover-community/mathlib/pull/#3706))






Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-08-06T16:42:33+00:00](https://github.com/leanprover-community/mathlib/commit/35ecc7baf9c96797d83a76c8b2ef5087e13e4812)
feat(analysis/calculus): Rolle's and Cauchy's mean value theorems with weaker assumptions (deps : 3590) ([#3681](https://github.com/leanprover-community/mathlib/pull/#3681))

This introduces stronger versions of Rolle's theorem and Cauchy's mean value theorem, essentially by encapsulating an extension by continuity using the newly introduced `extend_from` of [#3590](https://github.com/leanprover-community/mathlib/pull/#3590) 


Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2020-08-06T16:42:31+00:00](https://github.com/leanprover-community/mathlib/commit/e57fc3d6c142835dc8566aa28e812f7688f14512)
feat(field_theory/splitting_field): splitting field unique ([#3654](https://github.com/leanprover-community/mathlib/pull/#3654))

Main theorem:
```lean
polynomial.is_splitting_field.alg_equiv {α} (β) [field α] [field β] [algebra α β]
  (f : polynomial α) [is_splitting_field α β f] : β ≃ₐ[α] splitting_field f
````



Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-08-06T15:42:26+00:00](https://github.com/leanprover-community/mathlib/commit/bc2bcac7d101e92cafbce2326270d29f5534fbed)
chore(algebra/module): Move submodule to its own file ([#3696](https://github.com/leanprover-community/mathlib/pull/#3696))

### [2020-08-06T14:19:33+00:00](https://github.com/leanprover-community/mathlib/commit/224e0f8857dc36c35c67200095d258cc25950ac1)
docs(tactic/interactive): Add tag `debugging` and doc `mwe` for `extract_goal` ([#3708](https://github.com/leanprover-community/mathlib/pull/#3708))

Requested by @kbuzzard on [Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Being.20stuck.20-.3E.20MWE/near/206124861).

x-ref: leanprover-community/leanprover-community.github.io[#105](https://github.com/leanprover-community/mathlib/pull/#105) 



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-08-06T09:35:08+00:00](https://github.com/leanprover-community/mathlib/commit/ee7bb12ca87b7b52894fa194b847fa8680199565)
chore(ring_theory/ideal): Move ideal modules into a single folder ([#3707](https://github.com/leanprover-community/mathlib/pull/#3707))

The main motivation is to fix the odd inconsistency of `ideals` being plural, while most other files have singular names.
Besides that, there seems to be precedent for grouping together such files

### [2020-08-06T06:58:32+00:00](https://github.com/leanprover-community/mathlib/commit/3eea1091c50b77fa8ad720eec7387da511822cd0)
feat(measure_theory/interval_integral): introduce `∫ x in a..b, f x`, prove FTC-1 ([#3640](https://github.com/leanprover-community/mathlib/pull/#3640))

Define `∫ x in a..b, f x ∂μ` as `∫ x in Ioc a b, f x ∂μ - ∫ x in Ioc b a, f x ∂μ`. With this definition for a probability measure `μ` we have `F_μ(b)-F_μ(a)=∫ x in a..b, f x ∂μ`, where `F_μ` is the cumulative distribution function.

### [2020-08-06T03:47:24+00:00](https://github.com/leanprover-community/mathlib/commit/5cba21d8526dd6d9045cd2d2882b89c9838a7a99)
chore(*): swap order of [fintype A] [decidable_eq A] ([#3705](https://github.com/leanprover-community/mathlib/pull/#3705))

@fpvandoorn  suggested in [#3603](https://github.com/leanprover-community/mathlib/pull/#3603) swapping the order of some `[fintype A] [decidable_eq A]` arguments to solve a linter problem with slow typeclass lookup.

The reasoning is that Lean solves typeclass search problems from right to left, and 
* it's "less likely" that a type is a `fintype` than it has `decidable_eq`, so we can fail earlier if `fintype` comes second
* typeclass search for `[decidable_eq]` can already be slow, so it's better to avoid it.

This PR applies this suggestion across the library.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-06T00:42:41+00:00](https://github.com/leanprover-community/mathlib/commit/f8fd0c38d0a95ed0d46fc0c90be8f86b3a5ba1a1)
chore(scripts): update nolints.txt ([#3704](https://github.com/leanprover-community/mathlib/pull/#3704))

I am happy to remove some nolints for you!

### [2020-08-05T22:44:03+00:00](https://github.com/leanprover-community/mathlib/commit/9d3c709d9fb42e1ed137d8404113637b89267da5)
chore(algebra/module): Reuse proofs from subgroup ([#3631](https://github.com/leanprover-community/mathlib/pull/#3631))

Confusingly these have opposite names - someone can always fix the names later though.

### [2020-08-05T22:44:01+00:00](https://github.com/leanprover-community/mathlib/commit/2918b00b3a429d337cc2a7c0085b66653a0f517b)
feat(topology): define `extend_from`, add lemmas about extension by continuity on sets and intervals and continuity gluing ([#3590](https://github.com/leanprover-community/mathlib/pull/#3590))

#### Add a new file `topology/extend_from_subset` (mostly by @PatrickMassot )

Define `extend_from A f` (where `f : X → Y` and `A : set X`) to be a function `g : X → Y` which maps any
`x₀ : X` to the limit of `f` as `x` tends to `x₀`, if such a limit exists. Although this is not really an extension, it maps with the classical meaning of extending a function *defined on a set*, hence the name. In some way it is analogous to `dense_inducing.extend`, but in `set` world.

The main theorem about this is `continuous_on_extend_from` about extension by continuity

#### Corollaries for extending functions defined on intervals

A few lemmas of the form : if `f` is continuous on `Ioo a b`, then `extend_from (Ioo a b) f` is continuous on `I[cc/co/oc] a b`, provided some assumptions about limits on the boundary (and has some other properties, e.g it is equal to `f` on `Ioo a b`)

#### More general continuity gluing

Lemmas `continuous_on_if'` and its corollaries `continuous_on_if` and `continuous_if'`, and a few other continuity lemmas



Co-authored-by: Anatole Dedecker <48656793+ADedecker@users.noreply.github.com>

### [2020-08-05T21:26:53+00:00](https://github.com/leanprover-community/mathlib/commit/89ada87cf6c1815ccc4261b0a77460efb06acfec)
chore(algebra, data/pnat): refactoring comm_semiring_has_dvd into comm_monoid_has_dvd ([#3702](https://github.com/leanprover-community/mathlib/pull/#3702))

changes the instance comm_semiring_has_dvd to apply to any comm_monoid
cleans up the pnat API to use this new definition

### [2020-08-05T19:30:40+00:00](https://github.com/leanprover-community/mathlib/commit/13d4fbee422375a3ec0fe0926c5fea76f762d547)
feat(tactic/interactive_attr): `@[interactive]` attribute to export interactive tactics ([#3698](https://github.com/leanprover-community/mathlib/pull/#3698))

Allows one to write 

```lean
@[interactive]
meta def my_tactic := ...
```

instead of

```lean
meta def my_tactic := ...

run_cmd add_interactive [``my_tactic]
```

### [2020-08-05T16:34:55+00:00](https://github.com/leanprover-community/mathlib/commit/5fc628150cd797eedcfb5ff98bc0447af3541fcc)
chore(data/matrix/basic): rename _val lemmas to _apply ([#3297](https://github.com/leanprover-community/mathlib/pull/#3297))

We use `_apply` for lemmas about applications of functions to arguments. Arguably "picking out the entries of a matrix" could warrant a different name, but as we treat matrices just as functions all over, I think it's better to use the usual names.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-08-05T15:41:26+00:00](https://github.com/leanprover-community/mathlib/commit/d952e8bf036e76062cdc9267cc032c72bfb3f846)
chore(topology/category/Top/opens): module-doc, cleanup, and construct some morphisms ([#3601](https://github.com/leanprover-community/mathlib/pull/#3601))






Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-05T11:37:40+00:00](https://github.com/leanprover-community/mathlib/commit/c63dad10f242dc7bc6cae151f2e276bddc5d9aea)
chore(ring_theory/ideals): Move the definition of ideals out of algebra/module ([#3692](https://github.com/leanprover-community/mathlib/pull/#3692))

Neatness was the main motivation - it makes it easier to reason about what would need doing in [#3635](https://github.com/leanprover-community/mathlib/pull/#3635).
It also results in somewhere sensible for the docs about ideals. Also adds a very minimal docstring to `ring_theory/ideals.lean`.

### [2020-08-05T11:37:36+00:00](https://github.com/leanprover-community/mathlib/commit/4a82e8493df67709505908ffe4c576f09ea949a9)
feat(algebra/*/ulift): algebraic instances for ulift ([#3675](https://github.com/leanprover-community/mathlib/pull/#3675))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-05T10:42:04+00:00](https://github.com/leanprover-community/mathlib/commit/2b9ac6977f8c53f29359f273dbcf258869853978)
feat(linear_algebra/affine_space): faces of simplices ([#3691](https://github.com/leanprover-community/mathlib/pull/#3691))

Define a `face` of an `affine_space.simplex` with any given nonempty
subset of the vertices, using `finset.mono_of_fin`.

### [2020-08-05T10:42:02+00:00](https://github.com/leanprover-community/mathlib/commit/ecb5c5f599f2912573a28ccfc1691d3a406fe058)
docs(algebra/module): Remove completed TODO ([#3690](https://github.com/leanprover-community/mathlib/pull/#3690))

Today, submodule _does_ extend `add_submonoid`, which is I assume what this TODO was about

### [2020-08-05T10:42:00+00:00](https://github.com/leanprover-community/mathlib/commit/0531cb0c3b8c58806fd89f9d82d843155d5af6ae)
feat(algebra/classical_lie_algebras): add definitions of missing classical Lie algebras ([#3661](https://github.com/leanprover-community/mathlib/pull/#3661))

Copying from the comments I have added at the top of `classical_lie_algebras.lean`:
## Main definitions

  * `lie_algebra.symplectic.sp`
  * `lie_algebra.orthogonal.so`
  * `lie_algebra.orthogonal.so'`
  * `lie_algebra.orthogonal.so_indefinite_equiv`
  * `lie_algebra.orthogonal.type_D`
  * `lie_algebra.orthogonal.type_B`
  * `lie_algebra.orthogonal.type_D_equiv_so'`
  * `lie_algebra.orthogonal.type_B_equiv_so'`

### [2020-08-05T09:56:01+00:00](https://github.com/leanprover-community/mathlib/commit/37119b416e06f6afef641da7f826d0b08ac7f84b)
feat(topology): normed spaces are (locally) path connected ([#3689](https://github.com/leanprover-community/mathlib/pull/#3689))

### [2020-08-05T09:09:06+00:00](https://github.com/leanprover-community/mathlib/commit/545186ca49a574ea01df6b65892c76b4c3142ad5)
refactor(*): add a notation for `nhds_within` ([#3683](https://github.com/leanprover-community/mathlib/pull/#3683))

The definition is still there and can be used too.

### [2020-08-05T08:29:26+00:00](https://github.com/leanprover-community/mathlib/commit/3b268785f49b73ea8dbd41f6c7448d6b8f47e158)
feat(linear_algebra/affine_space): more lemmas ([#3615](https://github.com/leanprover-community/mathlib/pull/#3615))

Add further lemmas on affine spaces.  This is the last piece of
preparation needed on the affine space side for my definitions of
`circumcenter` and `circumradius` for a simplex in a Euclidean affine
space.




Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-08-04T18:21:00+00:00](https://github.com/leanprover-community/mathlib/commit/84b450d42995e8d9ebf8a337525b6a5b862fb278)
feat(topology): path connected spaces ([#3627](https://github.com/leanprover-community/mathlib/pull/#3627))

From the sphere eversion project.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-08-04T16:33:38+00:00](https://github.com/leanprover-community/mathlib/commit/f4b2790d7c3c1cd91c0402ba87d3f62ab7b0af70)
feat(data/list/defs): add monadic versions of list.{find,any,all,bor,band} ([#3679](https://github.com/leanprover-community/mathlib/pull/#3679))

Also universe-generalise `mfind` while I'm at it.

### [2020-08-04T13:40:24+00:00](https://github.com/leanprover-community/mathlib/commit/3ae6cea58848dbb244d75a9e54d5139327733418)
feat(group_theory/submonoid/operations): transfer galois connection/insertion lemmas ([#3657](https://github.com/leanprover-community/mathlib/pull/#3657))



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-08-04T10:47:06+00:00](https://github.com/leanprover-community/mathlib/commit/78fe862a47155bed094d353a0000edfd7140fcb6)
chore(measure_theory/lebesgue_measure): review ([#3686](https://github.com/leanprover-community/mathlib/pull/#3686))

* use `ennreal.of_real` instead of `coe ∘ nnreal.of_real`;
* avoid some non-finishing `simp`s;
* simplify proofs of `lebesgue_outer_Ico/Ioc/Ioo`;
* add `instance : locally_finite_measure (volume : measure ℝ)`
  instead of `real.volume_lt_top_of_bounded` and
  `real.volume_lt_top_of_compact`.

### [2020-08-04T10:47:04+00:00](https://github.com/leanprover-community/mathlib/commit/8f02ad2fdea05e6c27ea62f8a20a26c0e748e342)
feat(geometry/euclidean): orthogonal projection ([#3662](https://github.com/leanprover-community/mathlib/pull/#3662))

Define orthogonal projection onto an affine subspace of a Euclidean
affine space, and prove some basic lemmas about it.



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-08-04T09:49:04+00:00](https://github.com/leanprover-community/mathlib/commit/14d206b38d9e370726c0ae569a35f1ec6c36bcbc)
feat(order/filter/interval): define class `filter.is_interval_generated` ([#3663](https://github.com/leanprover-community/mathlib/pull/#3663))

### [2020-08-04T09:49:02+00:00](https://github.com/leanprover-community/mathlib/commit/ed377e132017035a5c896de5d5aab409834320a3)
feat(analysis/convex): a local minimum of a convex function is a global minimum ([#3613](https://github.com/leanprover-community/mathlib/pull/#3613))



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>
Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2020-08-04T09:09:02+00:00](https://github.com/leanprover-community/mathlib/commit/b4a6651f25ea367f965eb72487e9d69a3e89f362)
chore(order/filter/at_top_bot): golf three proofs ([#3684](https://github.com/leanprover-community/mathlib/pull/#3684))

Also add `is_countably_generated_at_top`.

### [2020-08-04T07:11:52+00:00](https://github.com/leanprover-community/mathlib/commit/b0de81144fb6ffa12055b26df148a06e122db31d)
chore(measure_theory/borel_space): DRY by using `order_dual` ([#3685](https://github.com/leanprover-community/mathlib/pull/#3685))

### [2020-08-04T02:05:22+00:00](https://github.com/leanprover-community/mathlib/commit/d9a6e478571a4f12a18960cc10f72412a4dcdd0c)
feat(measure_theory/group): regular, invariant, and conjugate measures ([#3650](https://github.com/leanprover-community/mathlib/pull/#3650))

Define the notion of a regular measure. I did this in Borel space, which required me to add an import measure_space -> borel_space.
Define left invariant and right invariant measures for groups
Define the conjugate measure, and show it is left invariant iff the original is right invariant

### [2020-08-04T00:36:52+00:00](https://github.com/leanprover-community/mathlib/commit/acedda0dfd5d44e140605c9e9c4ec52f87b3a5c8)
chore(scripts): update nolints.txt ([#3682](https://github.com/leanprover-community/mathlib/pull/#3682))

I am happy to remove some nolints for you!

### [2020-08-03T20:53:03+00:00](https://github.com/leanprover-community/mathlib/commit/b215e952994f8d91aaba0976f2ba66165cf3b7c0)
fix(data/set/intervals/basic): fix a typo ([#3680](https://github.com/leanprover-community/mathlib/pull/#3680))

### [2020-08-03T20:53:01+00:00](https://github.com/leanprover-community/mathlib/commit/234011d0f8e88a060224dcc2aa07229ed4a28bf6)
chore(order/filter/lift): prove `has_basis.lift` and `has_basis.lift'` ([#3618](https://github.com/leanprover-community/mathlib/pull/#3618))

### [2020-08-03T19:22:21+00:00](https://github.com/leanprover-community/mathlib/commit/50d1c48535cd426e94516cd9bb74aad9177cbd64)
feat(order/galois_connection): galois_coinsertions ([#3656](https://github.com/leanprover-community/mathlib/pull/#3656))



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-08-03T19:22:19+00:00](https://github.com/leanprover-community/mathlib/commit/40c6a295d2cda71b31ffe53c2bad52cd1863e2fd)
feat(measure_theory/content): define outer measure from content ([#3649](https://github.com/leanprover-community/mathlib/pull/#3649))

Part of the development for the Haar measure: define an outer measure from a content.

### [2020-08-03T17:57:40+00:00](https://github.com/leanprover-community/mathlib/commit/018309f0c5c8690e7ee833c11153a345b6c66aa5)
chore(linear_algebra/basis): replace explicit arguments for 0 ≠ 1 with nontrivial R ([#3678](https://github.com/leanprover-community/mathlib/pull/#3678))

### [2020-08-03T17:57:38+00:00](https://github.com/leanprover-community/mathlib/commit/6186c694cb487a15c7f280315a7b31670daa3605)
feat(group_theory/subgroup): range_gpowers_hom ([#3677](https://github.com/leanprover-community/mathlib/pull/#3677))



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-08-03T17:57:36+00:00](https://github.com/leanprover-community/mathlib/commit/b8df8aacccd354bd4bf1bfa513b9b39d14af61f8)
feat(algebra/ring): the codomain of a ring hom is trivial iff ... ([#3676](https://github.com/leanprover-community/mathlib/pull/#3676))

In the discussion of [#3488](https://github.com/leanprover-community/mathlib/pull/#3488), Johan (currently on vacation, so I'm not pinging him) noted that we were missing the lemma "if `f` is a ring homomorphism, `∀ x, f x = 0` implies that the codomain is trivial". This PR adds a couple of ways to derive from homomorphisms that rings are trivial.

I used `0 = 1` to express that the ring is trivial because that seems to be the one that is used in practice.



Co-authored-by: Vierkantor <vierkantor@vierkantor.com>

### [2020-08-03T17:57:34+00:00](https://github.com/leanprover-community/mathlib/commit/5f9e4277acdcf127bbbcd7021fbd2702447de00e)
feat(analysis/normed_space/add_torsor): isometries of normed_add_torsors ([#3666](https://github.com/leanprover-community/mathlib/pull/#3666))

Add the lemma that an isometry of `normed_add_torsor`s induces an
isometry of the corresponding `normed_group`s at any base point.

Previously discussed on Zulip, see
<https://leanprover-community.github.io/archive/stream/113488-general/topic/Undergraduate.20math.20list.html[#199450039](https://github.com/leanprover-community/mathlib/pull/#199450039)>;
both statement and proof have been revised along the lines indicated
in that discussion.

### [2020-08-03T17:57:32+00:00](https://github.com/leanprover-community/mathlib/commit/aef7ade706fb4a802fa365db1c79dce995f5211c)
feat(data/set/intervals): a few lemmas needed by FTC-1 ([#3653](https://github.com/leanprover-community/mathlib/pull/#3653))

### [2020-08-03T16:25:13+00:00](https://github.com/leanprover-community/mathlib/commit/c6381aa1175c78083b91732aebefb793156a656a)
chore(algebra/group_ring_action): docstring, move monoid.End to algebra/group/hom ([#3671](https://github.com/leanprover-community/mathlib/pull/#3671))

### [2020-08-03T14:09:09+00:00](https://github.com/leanprover-community/mathlib/commit/b2be1eeb1c8c8a651abdb24050596a15132e7718)
feat(measure_theory/measure_space): add 3 typeclasses ([#3664](https://github.com/leanprover-community/mathlib/pull/#3664))

Define `probability_measure`, `finite_measure`, and `locally_finite_measure`.

### [2020-08-03T11:29:40+00:00](https://github.com/leanprover-community/mathlib/commit/3781435d1473bc5285f5a655b2c64bd92cb523a5)
feat(algebra/category/Group): the category of abelian groups is abelian ([#3621](https://github.com/leanprover-community/mathlib/pull/#3621))

### [2020-08-03T11:29:38+00:00](https://github.com/leanprover-community/mathlib/commit/6079ef96a4f6ff9d1b20a4edf4ba2f3e8e143745)
feat(analysis/normed_space/real_inner_product): orthogonal projection ([#3563](https://github.com/leanprover-community/mathlib/pull/#3563))

`analysis.normed_space.real_inner_product` proves the existence of
orthogonal projections onto complete subspaces, but only in the form
of an existence theorem without a corresponding `def` for the function
that is proved to exist.  Add the corresponding `def` of
`orthogonal_projection` as a `linear_map` and lemmas with the basic
properties, extracted from the existing results with `some` and
`some_spec`.

For convenience in constructing the `linear_map`, some lemmas are
first proved for a version of the orthogonal projection as an
unbundled function, then used in the definition of the bundled
`linear_map` version, then restarted for the bundled version (the two
versions of each lemma being definitionally equal; the bundled version
is considered the main version that should be used in all subsequent
code).

This is preparation for defining the corresponding operation for
Euclidean affine spaces as an `affine_map`.




Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-08-03T10:04:53+00:00](https://github.com/leanprover-community/mathlib/commit/8e0d111ff84b84b237392ec824d93ee7d8f917c8)
feat(data/finset/lattice,data/finset/sort): singleton lemmas ([#3668](https://github.com/leanprover-community/mathlib/pull/#3668))

Add lemmas about `min'`, `max'` and `mono_of_fin` for a singleton
`finset`.

### [2020-08-03T10:04:51+00:00](https://github.com/leanprover-community/mathlib/commit/61db67de161e085c4068cf9e5b633d36356e9eee)
chore(measure_theory/integration): define composition of a `simple_func` and a measurable function ([#3667](https://github.com/leanprover-community/mathlib/pull/#3667))

### [2020-08-03T10:04:49+00:00](https://github.com/leanprover-community/mathlib/commit/292c921d93a8fc68ab78adba2c32f84ab92863a3)
doc(category_theory): add library note about 'dsimp, simp' pattern ([#3659](https://github.com/leanprover-community/mathlib/pull/#3659))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-03T09:08:57+00:00](https://github.com/leanprover-community/mathlib/commit/3d41e33fb43ccd646011a95e0838d6d1e006504c)
feat(group_theory/submonoid/operations): mrange_eq_map ([#3673](https://github.com/leanprover-community/mathlib/pull/#3673))

### [2020-08-03T08:41:40+00:00](https://github.com/leanprover-community/mathlib/commit/d3e1f5fb433365a09f636dbb81cf90949129c595)
feat(README): add @Vierkantor to maintainer list ([#3674](https://github.com/leanprover-community/mathlib/pull/#3674))



Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-08-03T07:29:19+00:00](https://github.com/leanprover-community/mathlib/commit/d6c17c9416e7418ab01f07dc3d68c697aa379086)
feat(linear_algebra/affine_space): simplex ext lemmas ([#3669](https://github.com/leanprover-community/mathlib/pull/#3669))

Add `ext` lemmas for `affine_space.simplex`.

### [2020-08-03T05:29:42+00:00](https://github.com/leanprover-community/mathlib/commit/60ba4782acc18ccbb8a682ffe638075c98c5fab0)
feat(algebra/category/Module): the category of R-modules is abelian ([#3606](https://github.com/leanprover-community/mathlib/pull/#3606))

### [2020-08-03T00:42:24+00:00](https://github.com/leanprover-community/mathlib/commit/fb883ea563782bbdd72b57167da296be06c35372)
chore(scripts): update nolints.txt ([#3670](https://github.com/leanprover-community/mathlib/pull/#3670))

I am happy to remove some nolints for you!

### [2020-08-02T22:03:03+00:00](https://github.com/leanprover-community/mathlib/commit/06df50382100448ef40a152d664bee676d758c27)
chore(analysis/calculus/times_cont_diff): transpose lemmas ([#3665](https://github.com/leanprover-community/mathlib/pull/#3665))

In [#3639](https://github.com/leanprover-community/mathlib/pull/#3639) , I accidentally placed the new lemma `times_cont_diff_at_inverse` between `times_cont_diff_at.prod_map'` and `times_cont_diff.prod_map`.  This fixes that.

### [2020-08-02T16:01:03+00:00](https://github.com/leanprover-community/mathlib/commit/4588400fdfac4ae6ae85930745aaf4a29cc6e7e9)
chore(group_theory/*): refactor quotient groups to use bundled subgroups ([#3321](https://github.com/leanprover-community/mathlib/pull/#3321))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>

### [2020-08-02T11:46:51+00:00](https://github.com/leanprover-community/mathlib/commit/65598321408df2289b227595bdeec4093f7b8f16)
feat(order/filter/lift): a few lemmas about `filter.lift' _ powerset` ([#3652](https://github.com/leanprover-community/mathlib/pull/#3652))

### [2020-08-02T11:46:49+00:00](https://github.com/leanprover-community/mathlib/commit/fe4da7bc4ce1f58ea16a7f14472163c5cb2d88e7)
feat(category_theory/limits): transporting is_limit ([#3598](https://github.com/leanprover-community/mathlib/pull/#3598))

Some lemmas about moving `is_limit` terms around over equivalences, or (post|pre)composing.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-02T11:46:47+00:00](https://github.com/leanprover-community/mathlib/commit/52c0b42187961cabaea04e55452e9c3c3f0ad22e)
feat(category_theory): Mon_ (C ⥤ D) ≌ C ⥤ Mon_ D ([#3576](https://github.com/leanprover-community/mathlib/pull/#3576))

When `D` is a monoidal category,
monoid objects in `C ⥤ D` are the same thing as functors from `C` into the monoid objects of `D`.

This is formalised as:
* `Mon_functor_category_equivalence : Mon_ (C ⥤ D) ≌ C ⥤ Mon_ D`

The intended application is that as `Ring ≌ Mon_ Ab` (not yet constructed!),
we have `presheaf Ring X ≌ presheaf (Mon_ Ab) X ≌ Mon_ (presheaf Ab X)`,
and we can model a module over a presheaf of rings as a module object in `presheaf Ab X`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-02T11:46:45+00:00](https://github.com/leanprover-community/mathlib/commit/e99518b207aca483ee8f095dfd9db4fb967f7557)
feat(category_theory): braided and symmetric categories ([#3550](https://github.com/leanprover-community/mathlib/pull/#3550))

Just the very basics:

* the definition of braided and symmetric categories
* braided functors, and compositions thereof
* the symmetric monoidal structure coming from products
* upgrading `Type u` to a symmetric monoidal structure

This is prompted by the desire to explore modelling sheaves of modules as the monoidal category of module objects for an internal commutative monoid in sheaves of `Ab`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-02T11:46:43+00:00](https://github.com/leanprover-community/mathlib/commit/8c1e2da7f522522ada06002b8323958435d32b6f)
feat(linear_algebra/tensor_algebra): Tensor algebras ([#3531](https://github.com/leanprover-community/mathlib/pull/#3531))

This PR constructs the tensor algebra of a module over a commutative ring.

The main components are:
1. The construction of the tensor algebra: `tensor_algebra R M` for a module `M` over a commutative ring `R`.
2. The linear map `univ R M` from `M` to `tensor_algebra R M`.
3. Given a linear map `f`from `M`to an `R`-algebra `A`, the lift of `f` to `tensor_algebra R M` is denoted `lift R M f`.
4. A theorem `univ_comp_lift` asserting that the composition of `univ R M` with `lift R M f`is `f`.
5. A theorem `lift_unique` asserting the uniqueness of `lift R M f`with respect to property 4.



Co-authored-by: Adam Topaz <adamtopaz@users.noreply.github.com>
Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2020-08-02T10:18:28+00:00](https://github.com/leanprover-community/mathlib/commit/58f2c36a5e0f9da0141b07c9f0b38e8ab40976bb)
feat(dynamics/periodic_pts): definition and basic properties ([#3660](https://github.com/leanprover-community/mathlib/pull/#3660))

Also add more lemmas about `inj/surj/bij_on` and `maps_to`.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-08-02T08:31:21+00:00](https://github.com/leanprover-community/mathlib/commit/78655b6eef558ccb36772934ed98ed83d9a56802)
feat(data/set/intervals): define `set.ord_connected` ([#3647](https://github.com/leanprover-community/mathlib/pull/#3647))

A set `s : set α`, `[preorder α]` is `ord_connected` if for
any `x y ∈ s` we have `[x, y] ⊆ s`. For real numbers this property
is equivalent to each of the properties `convex s`
and `is_preconnected s`. We define it for any `preorder`, prove some
basic properties, and migrate lemmas like `convex_I??` and
`is_preconnected_I??` to this API.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-08-02T08:31:19+00:00](https://github.com/leanprover-community/mathlib/commit/f2db6a8f068a2531e88b39719c295e50e597abd6)
chore(algebra/order): enable dot syntax ([#3643](https://github.com/leanprover-community/mathlib/pull/#3643))

Add dot syntax aliases to some lemmas about order (e.g.,
`has_le.le.trans`). Also remove `lt_of_le_of_ne'` (was equivalent
to `lt_of_le_of_ne`).

### [2020-08-02T06:44:24+00:00](https://github.com/leanprover-community/mathlib/commit/6394e4d4450f83834cc796f8f4967c6f084853a5)
feat(algebra/category/*): forget reflects isos ([#3600](https://github.com/leanprover-community/mathlib/pull/#3600))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-02T04:10:31+00:00](https://github.com/leanprover-community/mathlib/commit/d76c75e9f587f6eb342c2e846e6db5c0eb0b282a)
feat(measure_theory): cleanup and generalize measure' ([#3648](https://github.com/leanprover-community/mathlib/pull/#3648))

There were two functions `measure'` and `outer_measure'` with undescriptive names, and which were not very general

rename `measure'` -> `extend`
rename `outer_measure'` -> `induced_outer_measure`
generalize both `extend` and `induced_outer_measure` to an arbitrary subset of `set α` (instead of just the measurable sets). Most lemmas still hold in full generality, sometimes with a couple more assumptions. For the lemmas that need more assumptions, we have also kept the version that is just for `is_measurable`.
Move functions `extend`, `induced_outer_measure` and `trim` to `outer_measure.lean`.
rename `caratheodory_is_measurable` -> `of_function_caratheodory`
rename `trim_ge` -> `le_trim`
Make the section on caratheodory sets not private (and give a more descriptive name to lemmas).
Style in `measurable_space` and `outer_measure`

### [2020-08-02T03:20:12+00:00](https://github.com/leanprover-community/mathlib/commit/fc65ba0d700b3c2b19484a7a1a8a8eacb500f081)
feat(analysis/calculus/times_cont_diff): inversion is smooth ([#3639](https://github.com/leanprover-community/mathlib/pull/#3639))

At an invertible element of a complete normed algebra, the inversion operation is smooth.

### [2020-08-02T02:10:22+00:00](https://github.com/leanprover-community/mathlib/commit/d3de289a1c18173ffc66fae0590edb4a545b4fed)
feat(topology/local_homeomorph): open_embedding.continuous_at_iff ([#3599](https://github.com/leanprover-community/mathlib/pull/#3599))

```
lemma continuous_at_iff
  {f : α → β} {g : β → γ} (hf : open_embedding f) {x : α} :
  continuous_at (g ∘ f) x ↔ continuous_at g (f x) :=
```



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-08-01T21:07:07+00:00](https://github.com/leanprover-community/mathlib/commit/4274dddfeded08450ebe1bde01ef02afd9f15e6a)
chore(*): bump to Lean 3.18.4 ([#3610](https://github.com/leanprover-community/mathlib/pull/#3610))

* Remove `pi_arity` and the `vm_override` for `by_cases`, which have moved to core
* Fix fallout from the change to the definition of `max`
* Fix a small number of errors caused by changes to instance caching
* Remove `min_add`, which is generalized by `min_add_add_right`  and make `to_additive` generate some lemmas



Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-08-01T15:55:33+00:00](https://github.com/leanprover-community/mathlib/commit/92a20e647b829d160c35b42358f45b0bec1ff5e8)
feat(order/filter/extr, topology/local_extr): links between extremas of two eventually le/eq functions ([#3624](https://github.com/leanprover-community/mathlib/pull/#3624))

Add many lemmas that look similar to e.g : if f and g are equal at `a`, and `f ≤ᶠ[l] g` for some filter `l`, then `is_min_filter l f a`implies `is_min_filter l g a`

### [2020-08-01T12:08:21+00:00](https://github.com/leanprover-community/mathlib/commit/aa6731575b6c3c2f8653022daa28a58a1632a323)
chore(order/filter/bases): generalize `has_basis.restrict` ([#3645](https://github.com/leanprover-community/mathlib/pull/#3645))

The old lemma is renamed to `filter.has_basis.restrict_subset`

### [2020-08-01T09:06:29+00:00](https://github.com/leanprover-community/mathlib/commit/c6f33994d136141a9bfe90703b7fe4f6bf13b5ab)
feat(topology/subset_properties): add `is_compact.induction_on` ([#3642](https://github.com/leanprover-community/mathlib/pull/#3642))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-07-31T19:09:51+00:00](https://github.com/leanprover-community/mathlib/commit/37ab4263b452f08180e2a08f0020b7bc6cf08676)
feat(complete_lattice): put supr_congr and infi_congr back ([#3646](https://github.com/leanprover-community/mathlib/pull/#3646))

### [2020-07-31T17:41:12+00:00](https://github.com/leanprover-community/mathlib/commit/7e570ed122e0cb92b2f910a20a5e33c9c4d0ad5d)
chore(*): assorted small lemmas ([#3644](https://github.com/leanprover-community/mathlib/pull/#3644))

### [2020-07-31T17:41:10+00:00](https://github.com/leanprover-community/mathlib/commit/396a764f4fe398c9f824e57a745a866a6225de2f)
feat(analysis/calculus/fderiv): inversion is differentiable ([#3510](https://github.com/leanprover-community/mathlib/pull/#3510))

At an invertible element `x` of a complete normed algebra, the inversion operation of the algebra is Fréchet-differentiable, with derivative `λ t, - x⁻¹ * t * x⁻¹`.

### [2020-07-31T16:13:36+00:00](https://github.com/leanprover-community/mathlib/commit/3ae893dc18d9e49fd03f4dc9c93716316bbaa68f)
fix(tactic/simps): do not reach unreachable code ([#3637](https://github.com/leanprover-community/mathlib/pull/#3637))

Fixes [#3636](https://github.com/leanprover-community/mathlib/pull/#3636)

### [2020-07-30T22:46:17+00:00](https://github.com/leanprover-community/mathlib/commit/f78a012d976ebf3f2a4694fa16cff1632ce0b57f)
feat(group_theory/subgroup): Add `mem_infi` and `coe_infi` ([#3634](https://github.com/leanprover-community/mathlib/pull/#3634))

These already existed for submonoid, but were not lifted to subgroup.

Also adds some missing `norm_cast` attributes to similar lemmas.

### [2020-07-30T21:46:00+00:00](https://github.com/leanprover-community/mathlib/commit/985a56b144c92ffe2acac3241762a448bbfc9446)
ci(fetch_olean_cache.sh): error handling ([#3628](https://github.com/leanprover-community/mathlib/pull/#3628))

Previously, the CI would be interrupted if extracting the olean cache failed. After this PR, if that step fails, all oleans are deleted and then CI continues.

I also changed the search for ancestor commits with caches to look for `.xz` files instead of `.gz` files, for consistency.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-07-30T20:16:57+00:00](https://github.com/leanprover-community/mathlib/commit/1a393e7a4215747bf99fbf8bcf8661eb09d1b6c9)
feat(tactic/explode): support exploding "let" expressions and improve handling of "have" expressions ([#3632](https://github.com/leanprover-community/mathlib/pull/#3632))

The current #explode has little effect on proofs using "let" expressions, e.g., #explode nat.exists_infinite_primes. #explode also
occasionally ignores certain dependencies due to macros occurring in "have" expressions. See examples below. This PR fixes these issues.

theorem foo {p q : Prop}: p → p :=
λ hp, have hh : p, from hp, hh

#explode foo -- missing dependencies at forall introduction

theorem bar {p q : Prop}: p → p :=
λ hp, (λ (hh : p), hh) hp

#explode bar -- expected behavior

### [2020-07-30T17:59:32+00:00](https://github.com/leanprover-community/mathlib/commit/43ccce552af4206cc5a96916ea72643c51cba0ad)
feat(geometry): first stab on Lie groups ([#3529](https://github.com/leanprover-community/mathlib/pull/#3529))

### [2020-07-30T13:59:09+00:00](https://github.com/leanprover-community/mathlib/commit/77f3fa47786a767132593c94fae83b374d6462e9)
feat(tactic/interactive_expr): add copy button to type tooltip ([#3633](https://github.com/leanprover-community/mathlib/pull/#3633))

There should now be a 'copy expression' button in each tooltip which can
be used to copy the current expression to the clipboard.
![image](https://user-images.githubusercontent.com/5064353/88916012-374ff580-d25d-11ea-8260-8149966fc84a.png)

I have not tested on windows yet.

Also broke out `widget_override.goals_accomplished_message` so that
users can override it. For example:

```
meta def my_new_msg {α : Type} : widget.html α := "my message"
attribute [vm_override my_new_msg] widget_override.goals_accomplished_message
```




Co-authored-by: Ed Ayers <EdAyers@users.noreply.github.com>

### [2020-07-30T13:18:00+00:00](https://github.com/leanprover-community/mathlib/commit/e7075b849046b72cdfb35db0d7aff7d6289e3286)
chore(topology/algebra/ordered): fix assumptions in some lemmas ([#3629](https://github.com/leanprover-community/mathlib/pull/#3629))

* Some `nhds_within_I??_eq_nhds_within_I??` lemmas assumed strict
  inequalities when this was not needed.
* Remove TFAEs that only stated equality of three `nhds_within`s.
  Prove equality of `nhds_within`s instead.
* Genralize `I??_mem_nhds_within_I??` to `order_closed_topology`.

### [2020-07-30T08:41:45+00:00](https://github.com/leanprover-community/mathlib/commit/29d5f110fa87056d9f46090bf48cebaa22794299)
chore(algebra/group_with_zero): weaken assumptions in some lemmas ([#3630](https://github.com/leanprover-community/mathlib/pull/#3630))

### [2020-07-30T07:34:56+00:00](https://github.com/leanprover-community/mathlib/commit/e1fa5cbac04916fa8fa14a038cef1d496ed0598b)
feat(linear_algebra): invariant basis number property ([#3560](https://github.com/leanprover-community/mathlib/pull/#3560))

### [2020-07-30T05:41:44+00:00](https://github.com/leanprover-community/mathlib/commit/03c302dc2208c10a3231ae697aa774cfab792ccd)
feat(field_theory/fixed): field is separable over fixed subfield under group action ([#3568](https://github.com/leanprover-community/mathlib/pull/#3568))

### [2020-07-29T23:48:24+00:00](https://github.com/leanprover-community/mathlib/commit/ef89e9af1237ac1a8bc4755e02beb60c23150f02)
feat(data/qpf): compositional data type framework for inductive / coinductive types ([#3317](https://github.com/leanprover-community/mathlib/pull/#3317))

First milestone of the QPF project. Includes multivariate quotients of polynomial functors and compiler for coinductive types.

Not included in this PR
 * nested inductive / coinductive data types
 * universe polymorphism with more than one variable
 * inductive / coinductive families
 * equation compiler
 * efficient byte code implementation

Those are coming in future PRs

### [2020-07-30T01:14:09+02:00](https://github.com/leanprover-community/mathlib/commit/4985ad55d02baff245491f653c17f5e4c4689ecf)
Revert "feat(topology): path connected spaces"

This reverts commit 9208c2bd1f6c8dedc0cd1646dd107842f05b0b0c.

### [2020-07-30T01:12:56+02:00](https://github.com/leanprover-community/mathlib/commit/9208c2bd1f6c8dedc0cd1646dd107842f05b0b0c)
feat(topology): path connected spaces

### [2020-07-29T21:50:21+00:00](https://github.com/leanprover-community/mathlib/commit/86c83c3f9babb2380979f13415838ee405e8b0b6)
feat(topology): two missing connectedness lemmas ([#3626](https://github.com/leanprover-community/mathlib/pull/#3626))

From the sphere eversion project.

### [2020-07-29T20:38:16+00:00](https://github.com/leanprover-community/mathlib/commit/ebeeee7f11bb0ca0b4e7a131b6647fe43fb568cc)
feat(filters): a couple more lemmas ([#3625](https://github.com/leanprover-community/mathlib/pull/#3625))

Random lemmas gathered while thinking about https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nhds_left.20and.20nhds_right

### [2020-07-29T13:58:44+00:00](https://github.com/leanprover-community/mathlib/commit/652fb2e6fd7d1899adba7ce32f4e6448d1bf76a6)
chore(doc/*): add README files ([#3623](https://github.com/leanprover-community/mathlib/pull/#3623))

### [2020-07-29T11:45:51+00:00](https://github.com/leanprover-community/mathlib/commit/37e13a01020e1e6acbda036f28a3adf5c62ebd17)
feat(tactic/lint): quieter output by default ([#3622](https://github.com/leanprover-community/mathlib/pull/#3622))

* The behavior of `lint-` hasn't changed.
* `lint` will now suppress the output of successful checks. If everything succeeds, it will print "All linting checks passed!"
* `lint+` behaves like the old `lint`. It prints a confirmation for each test.

Zulip: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/quiet.20linter



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-29T11:19:36+00:00](https://github.com/leanprover-community/mathlib/commit/b0d1d17e16500ce2ff4c5bf0ef2d0b5bfd818f88)
feat(data/ulift): add `monad ulift` and `monad plift` ([#3588](https://github.com/leanprover-community/mathlib/pull/#3588))

We add `functor`/`applicative`/`monad` instances for `ulift` and `plift`.

### [2020-07-29T08:21:11+00:00](https://github.com/leanprover-community/mathlib/commit/80f2762c43e8040d9c555d963bd281334eeeabca)
feat(topology): assorted topological lemmas ([#3619](https://github.com/leanprover-community/mathlib/pull/#3619))

from the sphere eversion project



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-07-29T00:35:48+00:00](https://github.com/leanprover-community/mathlib/commit/e14ba7b059d149c69489d59003cae175ac45b24c)
chore(scripts): update nolints.txt ([#3620](https://github.com/leanprover-community/mathlib/pull/#3620))

I am happy to remove some nolints for you!

### [2020-07-28T23:25:03+00:00](https://github.com/leanprover-community/mathlib/commit/e24525466bad1df7b036643ebb2d1ba50009dbdc)
feat(category_theory/monoidal): λ_ (𝟙_ C) = ρ_ (𝟙_ C) ([#3556](https://github.com/leanprover-community/mathlib/pull/#3556))

The incredibly tedious proof from the axioms that `λ_ (𝟙_ C) = ρ_ (𝟙_ C)` in any monoidal category.

One would hope that it falls out from a coherence theorem, but we're not close to having one, and I suspect that this result might be a step in any proof.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-28T22:08:48+00:00](https://github.com/leanprover-community/mathlib/commit/2e6c488ce0fd9ac878cd9b153a26ec4efe870875)
chore(order/complete_lattice): use `Prop` args in `infi_inf` etc ([#3611](https://github.com/leanprover-community/mathlib/pull/#3611))

This way one can `rw binfi_inf` first, then prove `∃ i, p i`.

Also move some code up to make it available near `infi_inf`.

### [2020-07-28T21:33:31+00:00](https://github.com/leanprover-community/mathlib/commit/aafc48619e4c2cf4065c64e282b03de727067af4)
feat(topology/ordered): intervals frontiers ([#3617](https://github.com/leanprover-community/mathlib/pull/#3617))

from the sphere eversion project

### [2020-07-28T20:45:39+00:00](https://github.com/leanprover-community/mathlib/commit/5cd6eeb909663bb6e2aa41e5ddda95d9cb00ff9d)
chore(ci): only store oleans in azure cache ([#3616](https://github.com/leanprover-community/mathlib/pull/#3616))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-28T20:12:44+00:00](https://github.com/leanprover-community/mathlib/commit/4ae8752ca41a78cbb588ee44fa280afaf901d294)
chore(data/mv_polynomial): use bundled homs ([#3595](https://github.com/leanprover-community/mathlib/pull/#3595))

I've done a lot of the scut work, but there are still about half a dozen broken proofs, if anyone would like to take a bash at them!



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-07-28T19:31:16+00:00](https://github.com/leanprover-community/mathlib/commit/b7655704586bd8f9af2b4aa1aa36f9dad0c4f48f)
chore(topology): rename interior_eq_of_open ([#3614](https://github.com/leanprover-community/mathlib/pull/#3614))

This allows to use dot notation and is more consistent with
its closed twin is_closed.closure_eq

### [2020-07-28T17:35:02+00:00](https://github.com/leanprover-community/mathlib/commit/9f51e336d81bfe3d94c27a5c79f6ecd4a55dcdca)
feat(measure_theory/measurable_space): introduce `filter.is_measurably_generated` ([#3594](https://github.com/leanprover-community/mathlib/pull/#3594))

Sometimes I want to extract an `is_measurable` witness of a `filter.eventually` statement.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-07-28T17:35:00+00:00](https://github.com/leanprover-community/mathlib/commit/7236938ca1e2be48d45a759b9de4256bd90b37e3)
feat(measure_theory/measure_space): add `count_apply_infinite` ([#3592](https://github.com/leanprover-community/mathlib/pull/#3592))

Also add some supporting lemmas about `set.infinite`.

### [2020-07-28T17:02:06+00:00](https://github.com/leanprover-community/mathlib/commit/f6f6f8aae9a71db9814fc1261ef748e1c99bf6cb)
feat(linear_algebra/affine_space): more affine subspace lemmas ([#3552](https://github.com/leanprover-community/mathlib/pull/#3552))

Add more lemmas on affine subspaces that came up in the course of
proving existence and uniqueness of the circumcenter of a simplex in a
Euclidean space.

### [2020-07-28T15:30:51+00:00](https://github.com/leanprover-community/mathlib/commit/7848f28df40c08fa5eae08282cc96a0bee6443c1)
feat(category_theory): Mon_ (Type u) ≌ Mon.{u} ([#3562](https://github.com/leanprover-community/mathlib/pull/#3562))

Verifying that internal monoid objects in Type are the same thing as bundled monoid objects.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-28T14:20:39+00:00](https://github.com/leanprover-community/mathlib/commit/9e841c81756b12d797f96baed2158ad12233e414)
feat(data/list/basic): add a proof that `(a :: l) ≠ l` ([#3584](https://github.com/leanprover-community/mathlib/pull/#3584))

`list.cons_ne_self` is motivated by the existence of `nat.succ_ne_self`.

### [2020-07-28T13:45:08+00:00](https://github.com/leanprover-community/mathlib/commit/f1dfece4d46b524ab36171951d4979b39808d945)
feat(linear_algebra/affine_space): bundled affine independent families ([#3561](https://github.com/leanprover-community/mathlib/pull/#3561))

Define `affine_space.simplex` as `n + 1` affine independent points,
with the specific case of `affine_space.triangle`.  I expect most
definitions and results for these types (such as `circumcenter` and
`circumradius`, which I'm currently working on) will be specific to
the case of Euclidean affine spaces, but some make sense in a more
general affine space context.

### [2020-07-28T11:47:58+00:00](https://github.com/leanprover-community/mathlib/commit/5a876cabf73ef970e0bbf8cbb1a33686e02a7206)
feat(category_theory): monoidal_category (C ⥤ C) ([#3557](https://github.com/leanprover-community/mathlib/pull/#3557))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-28T10:21:52+00:00](https://github.com/leanprover-community/mathlib/commit/be99e535aa24ccd8d809846af44b91c3f8d1f8f0)
chore(ci): remove unused build step ([#3607](https://github.com/leanprover-community/mathlib/pull/#3607))

### [2020-07-28T10:21:50+00:00](https://github.com/leanprover-community/mathlib/commit/f1ad7a8ba9b043a8ba76c8f4387ebf75c2a7d215)
docs(topology/sheaves): better docs for presheaf ([#3596](https://github.com/leanprover-community/mathlib/pull/#3596))

Add module doc-strings to two files.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-28T10:21:48+00:00](https://github.com/leanprover-community/mathlib/commit/35f1f6370ad5f860ba68af0e12d40ca43af9185b)
doc(topology/basic): docstrings for nhds and a few related lemmas ([#3548](https://github.com/leanprover-community/mathlib/pull/#3548))

`nhds` was the only `def` in the file which didn't have an explanation, so I documented it.

I also went ahead and documented a few related lemmas which I felt were worth calling out.

Co-authored-by: Mario Carneiro <di.gama@gmail.com>



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-07-28T09:27:12+00:00](https://github.com/leanprover-community/mathlib/commit/037821b8d0cdba5d0b87480a33055860f6066ee3)
chore(category_theory/limits/types): remove simp lemmas ([#3604](https://github.com/leanprover-community/mathlib/pull/#3604))

No one wants to see how the sausage is being made.

Or at least, no one wants `simp` to show you without asking.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-28T09:27:10+00:00](https://github.com/leanprover-community/mathlib/commit/a574db136d9412fb4540a92c764e0158bc32c0ce)
refactor(algebra/category/*/limits): refactor concrete limits ([#3463](https://github.com/leanprover-community/mathlib/pull/#3463))

We used to construct categorical limits for `AddCommGroup` and `CommRing`.

Now we construct them for
* `(Add)(Comm)Mon`
* `(Add)(Comm)Group`
* `(Comm)(Semi)Ring`
* `Module R`
* `Algebra R`

Even better, we reuse structure along the way, and show that all the relevant forgetful functors preserve limits.

We're still not at the point were this can either be done by
* automation, or
* noticing that everything is a model of a Lawvere theory
but ... maybe one day.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-28T08:55:31+00:00](https://github.com/leanprover-community/mathlib/commit/ce70305bbaf7e67a4007d5add377400ed0cc7790)
feat(category_theory): monoidal_category (C ⥤ D) when D is monoidal ([#3571](https://github.com/leanprover-community/mathlib/pull/#3571))

When `C` is any category, and `D` is a monoidal category,
there is a natural "pointwise" monoidal structure on `C ⥤ D`.

The initial intended application is tensor product of presheaves.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-28T07:54:19+00:00](https://github.com/leanprover-community/mathlib/commit/35763812e21699fdc6d435b978c6e431d60ef397)
chore(ring_theory/subsemiring): tidy up docstrings ([#3580](https://github.com/leanprover-community/mathlib/pull/#3580))

### [2020-07-28T02:35:47+00:00](https://github.com/leanprover-community/mathlib/commit/865e8887a1af2afefd342c28df07235c978bdb90)
chore(*): make sure definitions don't generate `s x`, `s : set _` ([#3591](https://github.com/leanprover-community/mathlib/pull/#3591))

Fix the following definitions: `subtype.fintype`, `pfun.dom`, `pfun.as_subtype`, `pfun.equiv_subtype`.

### [2020-07-28T02:35:45+00:00](https://github.com/leanprover-community/mathlib/commit/d04e3fc16fe8c1c076080dd226e718db29d32395)
feat(linear_algebra/char_poly): relates the characteristic polynomial to trace, determinant, and dimension ([#3536](https://github.com/leanprover-community/mathlib/pull/#3536))

adds lemmas about the number of fixed points of a permutation
adds lemmas connecting the trace, determinant, and dimension of a matrix to its characteristic polynomial



Co-authored-by: Aaron Anderson <awainverse@gmail.com>
Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2020-07-28T02:35:42+00:00](https://github.com/leanprover-community/mathlib/commit/a9481d97f53ed6ac07e419aa2d0a0f3e921e307c)
feat(analysis/convex/basic): add lemmas about transformations of convex sets and functions ([#3524](https://github.com/leanprover-community/mathlib/pull/#3524))



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-07-28T02:35:40+00:00](https://github.com/leanprover-community/mathlib/commit/005201a2ee547dabfa9b3160cade557f9a717f26)
feat(linear_algebra/adic_completion): basic definitions about completions of modules ([#3452](https://github.com/leanprover-community/mathlib/pull/#3452))

### [2020-07-28T01:10:52+00:00](https://github.com/leanprover-community/mathlib/commit/7cd1e268ef09e4f24c18b63079ee61f917ce7836)
feat(data/set/basic): range_unique ([#3582](https://github.com/leanprover-community/mathlib/pull/#3582))

Add a lemma on the `range` of a function from a `unique` type.

### [2020-07-28T01:10:50+00:00](https://github.com/leanprover-community/mathlib/commit/23bd09a86ff29615aaf3cdd09f33fab4b2b5e22e)
chore(deprecated/ring): removing uses ([#3577](https://github.com/leanprover-community/mathlib/pull/#3577))

This strips out a lot of the use of `deprecated.ring`. It's now only imported by `data.polynomial.eval`, and `ring_theory.free_ring`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-28T01:10:48+00:00](https://github.com/leanprover-community/mathlib/commit/7d4d985bb675b1a56e4f2bb8bcefbdb152ed0858)
chore(data/polynomial): make eval2 irreducible ([#3543](https://github.com/leanprover-community/mathlib/pull/#3543))

A while back @gebner identified that [an unfortunate timeout could be avoided](https://github.com/leanprover-community/mathlib/pull/3380#issuecomment-657449148) by making `polynomial.eval2` irreducible.

This PR does that.

It's not perfect: on a few occasions I have to temporarily set it back to semireducible, because it looks like the proofs really do some heavy refling.

I'd like to make more things irreducible in the polynomial API, but not yet.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: jalex-stark <alexmaplegm@gmail.com>
Co-authored-by: kckennylau <kc_kennylau@yahoo.com.hk>

### [2020-07-28T00:39:31+00:00](https://github.com/leanprover-community/mathlib/commit/4afb21496f581155944f58d446ffa1df526675b8)
chore(scripts): update nolints.txt ([#3593](https://github.com/leanprover-community/mathlib/pull/#3593))

I am happy to remove some nolints for you!

### [2020-07-27T20:50:19+00:00](https://github.com/leanprover-community/mathlib/commit/7556353d4150644559106a2f857cb8feceaa3efb)
feat(data/int/cast): monoid_hom.ext_int ([#3587](https://github.com/leanprover-community/mathlib/pull/#3587))



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-07-27T20:50:17+00:00](https://github.com/leanprover-community/mathlib/commit/864a22abd7f18828fe39b8749d4cbecf1aa6e998)
chore(ci): delete doc generation steps ([#3586](https://github.com/leanprover-community/mathlib/pull/#3586))

Doc generation will be run on schedule in another repo for security reasons.




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-27T20:50:15+00:00](https://github.com/leanprover-community/mathlib/commit/2ecf70f7f470b3884a6bd21449c6e32ff83741a4)
feat(data/finset/basic): more lemmas on finsets of subtypes ([#3575](https://github.com/leanprover-community/mathlib/pull/#3575))

Add two more lemmas related to `not_mem_map_subtype_of_not_property`.

### [2020-07-27T15:26:50+00:00](https://github.com/leanprover-community/mathlib/commit/3550f4f3cb0f93ca43944ad33c8aafe6a0da30bc)
feat(*): remaining preliminaries for Haar measure ([#3541](https://github.com/leanprover-community/mathlib/pull/#3541))

Define `has_mul (finset α)`
more convenient formulation of `is_compact.finite_compact_cover`
some lemma additions



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-07-27T14:54:00+00:00](https://github.com/leanprover-community/mathlib/commit/adfcfe707eaec6e8127d158eb614ba96a8d8a373)
feat(category_theory/concrete_category): epi_of_surjective ([#3585](https://github.com/leanprover-community/mathlib/pull/#3585))

Also, change the proof of `mono_of_injective` to use the fact that the forgetful function reflects monomorphisms.

### [2020-07-27T12:21:03+00:00](https://github.com/leanprover-community/mathlib/commit/aeff5fc42b48841c8504b1dff4cb9e5bfdb161fe)
chore(ci): get xz archive ([#3581](https://github.com/leanprover-community/mathlib/pull/#3581))

We've been storing both .gz and .xz for a while for backward compatibility but will eventually drop .gz support.

### [2020-07-27T12:20:59+00:00](https://github.com/leanprover-community/mathlib/commit/133067cfd6a8d4bbc08f26de90b637a275100186)
feat(set_theory/cardinal_ordinal): cardinal.mk_finset_eq_mk ([#3578](https://github.com/leanprover-community/mathlib/pull/#3578))

### [2020-07-27T11:35:50+00:00](https://github.com/leanprover-community/mathlib/commit/4a5e25c5e384b76f094ebadbac86be1b4acdc823)
chore(ci): remove branch update script ([#3579](https://github.com/leanprover-community/mathlib/pull/#3579))

For security reasons, this will move to a scheduled action in a different repo.




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-27T11:35:48+00:00](https://github.com/leanprover-community/mathlib/commit/8ba59d8461be254a7c916840b60708f43ae97989)
feat(measure_theory/measure_space): 2 lemmas about compact sets ([#3573](https://github.com/leanprover-community/mathlib/pull/#3573))

A compact set `s` has finite (resp., zero) measure if every point of
`s` has a neighborhood within `s` of finite (resp., zero) measure.

### [2020-07-27T11:35:46+00:00](https://github.com/leanprover-community/mathlib/commit/da64c7f24e24f7021266a016515763a5ebce5be5)
chore(order/filter/basic): use `set.eq_on` in a few lemmas ([#3565](https://github.com/leanprover-community/mathlib/pull/#3565))

### [2020-07-27T10:07:11+00:00](https://github.com/leanprover-community/mathlib/commit/8c8d6a22871ef36917aa273c3bed618c07a7d8db)
feat(topology/tactic): continuity faster and more powerful ([#3545](https://github.com/leanprover-community/mathlib/pull/#3545))

Following up on the recent introduction of Reid's continuity tactic in [#2879](https://github.com/leanprover-community/mathlib/pull/#2879), I've made some tweaks that make it both faster and more capable.

1. we use `apply_rules {md:=semireducible}`, taking advantage of [#3538](https://github.com/leanprover-community/mathlib/pull/#3538). This makes examples like
`example : continuous (λ x : ℝ, exp ((max x (-x)) + sin (cos x))^2) := by continuity` viable.
2. in `apply_rules`, if we pull in lemmas using an attribute, we reverse the list of lemmas (on the heuristic that older lemmas are more frequently applicable than newer lemmas)
3. in `continuity`, I removed the `apply_assumption` step in the `tidy` loop, since `apply_rules` is already calling `assumption`
4. also in the `tidy` loop, I moved `intro1` above `apply_rules`.

The example in the test file
```
example {κ ι : Type}
  (K : κ → Type) [∀ k, topological_space (K k)] (I : ι → Type) [∀ i, topological_space (I i)]
  (e : κ ≃ ι) (F : Π k, homeomorph (K k) (I (e k))) :
  continuous (λ (f : Π k, K k) (i : ι), F (e.symm i) (f (e.symm i))) :=
by show_term { continuity }
```
which previously timed out now runs happily even with `-T50000`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-27T06:09:20+00:00](https://github.com/leanprover-community/mathlib/commit/4c0881e802089c10b905648b7d6a4446f6d65d25)
feat(measure_theory/measure_space): several lemmas about `restrict` ([#3574](https://github.com/leanprover-community/mathlib/pull/#3574))

### [2020-07-27T04:33:38+00:00](https://github.com/leanprover-community/mathlib/commit/d5d463e41fb682f8a05663cd80cbc42488b59a6b)
chore(topology/subset_properties): +2 lemmas about `is_compact` ([#3567](https://github.com/leanprover-community/mathlib/pull/#3567))

Also use `variables {s t : set α}`



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-07-27T03:38:45+00:00](https://github.com/leanprover-community/mathlib/commit/8673f23c598f159bc568ff31eb4c941d914d69e3)
chore(data/finsupp): move into finsupp folder ([#3566](https://github.com/leanprover-community/mathlib/pull/#3566))

### [2020-07-27T02:48:13+00:00](https://github.com/leanprover-community/mathlib/commit/d6e399f1e0872194d0d0f19f18f7c266d3ab5d97)
chore(order/filter/basic): add `@[simp]` to `principal_empty/univ` ([#3572](https://github.com/leanprover-community/mathlib/pull/#3572))

### [2020-07-27T01:32:13+00:00](https://github.com/leanprover-community/mathlib/commit/d06f62d58e21de0067a9d5721bc250796b579bec)
feat(analysis/calculus/times_cont_diff): more thorough times_cont_diff interface ([#3551](https://github.com/leanprover-community/mathlib/pull/#3551))

Add missing lemmas on smooth functions between vector spaces, that were necessary to solve the manifold exercises in Lftcm2020.

Changes the `{x : E}` argument from implicit to explicit in `lemma times_cont_diff_within_at.comp` and `lemma times_cont_diff_within_at.comp'`.

### [2020-07-27T00:02:05+00:00](https://github.com/leanprover-community/mathlib/commit/ca6cebc56de259b118a863ba550dbdf1a938dcfa)
feat(data/nat/digits): add `last_digit_ne_zero` ([#3544](https://github.com/leanprover-community/mathlib/pull/#3544))


The proof of `base_pow_length_digits_le` was refactored as suggested by @fpvandoorn in [#3498](https://github.com/leanprover-community/mathlib/pull/#3498).

### [2020-07-26T23:00:29+00:00](https://github.com/leanprover-community/mathlib/commit/3c4abe067d7eed49ca383415b81c0bdaf89eed04)
chore(ci): remove update_nolint action ([#3570](https://github.com/leanprover-community/mathlib/pull/#3570))

this action will move to another repository for security reasons




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-26T22:16:42+00:00](https://github.com/leanprover-community/mathlib/commit/4763febdfc3578fbf171cdbf5a6d59e1a0335f5e)
chore(topology/basic): directly use `self_of_nhds` in `eq_of_nhds` ([#3569](https://github.com/leanprover-community/mathlib/pull/#3569))

### [2020-07-26T17:38:11+00:00](https://github.com/leanprover-community/mathlib/commit/a6d3d65f457b5910b1bc24c5b7a1ffb803919a13)
chore(data/set/intervals): more `simp` lemmas ([#3564](https://github.com/leanprover-community/mathlib/pull/#3564))

### [2020-07-26T14:16:23+00:00](https://github.com/leanprover-community/mathlib/commit/692a689597c9fea7d1254570824b66c0a99c96b5)
feat(data/list/chain): chain'.append_overlap ([#3559](https://github.com/leanprover-community/mathlib/pull/#3559))

### [2020-07-26T10:41:56+00:00](https://github.com/leanprover-community/mathlib/commit/f4106afc0bd0943f32dd28b6e90641854f66e21b)
feat(order/filters, topology): relation between neighborhoods of a in [a, u), [a, u] and [a,+inf) + various nhds_within lemmas ([#3516](https://github.com/leanprover-community/mathlib/pull/#3516))

Content : 
- two lemmas about filters, namely `tendsto_sup` and `eventually_eq_inf_principal_iff`
- a few lemmas about `nhds_within`
- duplicate and move parts of the lemmas `tfae_mem_nhds_within_[Ioi/Iio/Ici/Iic]` that only require `order_closed_topology α` instead of `order_topology α`. This allows to turn any left/right neighborhood of `a` into its "canonical" form (i.e `Ioi`/`Iio`/`Ici`/`Iic`) with a weaker assumption than before



Co-authored-by: Anatole Dedecker <48656793+ADedecker@users.noreply.github.com>

### [2020-07-26T09:05:48+00:00](https://github.com/leanprover-community/mathlib/commit/f95e90b40908ec9ecd9cf30d9e8899fbb280d0dd)
chore(order/liminf_limsup): use dot notation and `order_dual` ([#3555](https://github.com/leanprover-community/mathlib/pull/#3555))

## New

* `filter.has_basis.Limsup_eq_infi_Sup`

## Rename

### Namespace `filter`

* `is_bounded_of_le` → `is_bounded_mono`;
* `is_bounded_under_of_is_bounded` → `is_bounded.is_bounded_under`;
* `is_cobounded_of_is_bounded` → `is_bounded.is_cobounded_flip`;
* `is_cobounded_of_le` → `is_cobounded.mono`;

### Top namespace

* `is_bounded_under_le_of_tendsto` → `filter.tendsto.is_bounded_under_le`;
* `is_cobounded_under_ge_of_tendsto` → `filter.tendsto.is_cobounded_under_ge`;
* `is_bounded_under_ge_of_tendsto` → `filter.tendsto.is_bounded_under_ge`;
* `is_cobounded_under_le_of_tendsto` → `filter.tendsto.is_cobounded_under_le`.

## Remove

* `filter.is_trans_le`, `filter.is_trans_ge`: we have both
  in `order/rel_classes`.

### [2020-07-26T09:05:46+00:00](https://github.com/leanprover-community/mathlib/commit/493a5b07c13ac3d90a27d2375d486ab982551053)
feat(data/set/lattice): add lemmas `disjoint.union_left/right` etc ([#3554](https://github.com/leanprover-community/mathlib/pull/#3554))

### [2020-07-26T07:41:04+00:00](https://github.com/leanprover-community/mathlib/commit/3c1f33299e9b923fd3996036769fa8cf55b4fc0c)
feat(tactic/to_additive): automate substructure naming ([#3553](https://github.com/leanprover-community/mathlib/pull/#3553))

This is all @cipher1024's work, improving `to_additive` to correctly generate names when we're talking about structures (rather than just operations).

Co-authored-by: Simon Hudon <simon.hudon@gmail.com>



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-26T07:03:20+00:00](https://github.com/leanprover-community/mathlib/commit/d7fcd8ca11b9a8706f87dc53f1f0ed7a8caec5cc)
chore(analysis/normed_space): remove 2 `norm_zero` lemmas ([#3558](https://github.com/leanprover-community/mathlib/pull/#3558))

We have a general `norm_zero` lemma and these lemmas are not used
before we introduce `normed_group` instances.

### [2020-07-26T02:39:04+00:00](https://github.com/leanprover-community/mathlib/commit/11179d5336947af3e395c55fba8905fe4b556de6)
feat(algebra/category/Group/*): compare categorical (co)kernels/images with the usual notions ([#3443](https://github.com/leanprover-community/mathlib/pull/#3443))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-25T15:53:29+00:00](https://github.com/leanprover-community/mathlib/commit/8582b06b0a5d06c33ee07d0bdf7c646cae22cf36)
feat(logic/basic): mark cast_eq as a `simp` lemma ([#3547](https://github.com/leanprover-community/mathlib/pull/#3547))

The theorem `cast_eq` is in core and says `theorem cast_eq : ∀ {α : Sort u} (h : α = α) (a : α), cast h a = a`




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-25T15:23:48+00:00](https://github.com/leanprover-community/mathlib/commit/3484194d41806cd8e1cf79318cd0dd036f21f358)
chore(geometry/manifold/real_instance): remove global fact instance ([#3549](https://github.com/leanprover-community/mathlib/pull/#3549))

Remove global `fact` instance that was used to get a manifold structure on `[0, 1]`, and register only the manifold structure.

### [2020-07-25T10:09:45+00:00](https://github.com/leanprover-community/mathlib/commit/e90c7b9682279026d55b294a183ed70b975aae65)
feat(data/num/prime): kernel-friendly decision procedure for prime ([#3525](https://github.com/leanprover-community/mathlib/pull/#3525))

### [2020-07-25T07:31:35+00:00](https://github.com/leanprover-community/mathlib/commit/0379d3aca9f0f8b602e3ffbe230e3a9567ca8258)
chore(*): minor import cleanup ([#3546](https://github.com/leanprover-community/mathlib/pull/#3546))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-25T06:33:04+00:00](https://github.com/leanprover-community/mathlib/commit/2a456a9c62b10f64e8cbf835d1494068d8511499)
feat(topology/*, geometry/*): missing lemmas ([#3528](https://github.com/leanprover-community/mathlib/pull/#3528))

Grab bag of missing lemmas on topology and geometry that were needed for the manifold exercises in Lftcm2020.


Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-07-25T06:33:02+00:00](https://github.com/leanprover-community/mathlib/commit/12a7ce39ae9e637f23ba00af759c815dded04d78)
feat(category_theory/isomorphism): lemmas about cancelling isomorphisms ([#3436](https://github.com/leanprover-community/mathlib/pull/#3436))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-25T05:30:35+00:00](https://github.com/leanprover-community/mathlib/commit/2d29f80abe37de259c203ed26f2ed76f0b2b56a9)
feat(data/finsupp): lattice structure on finsupp ([#3335](https://github.com/leanprover-community/mathlib/pull/#3335))

adds facts about order_isos respecting lattice operations
defines lattice structures on finsupps to N
constructs an order_iso out of finsupp.to_multiset



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-07-25T04:26:19+00:00](https://github.com/leanprover-community/mathlib/commit/8d55eda5d58b19650fcef3c9e968f6d6f12c27bc)
feat(topology/tactic): `continuity` tactic ([#2879](https://github.com/leanprover-community/mathlib/pull/#2879))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-07-24T21:19:13+00:00](https://github.com/leanprover-community/mathlib/commit/6f9da356a2d2c61aa43edc2c43b1ce0f7cced5f0)
feat(tactic/simps): improvements ([#3477](https://github.com/leanprover-community/mathlib/pull/#3477))

Features:
* `@[simps]` will look for `has_coe_to_sort` and `has_coe_to_fun` instances, and use those instead of direct projections. This should make it way more applicable for `equiv`, `local_equiv` and all other structures that coerce to a function (and for the few structures that coerce to a type). This works out-of-the-box without special configuration.
* Use `has_mul.mul`, `has_zero.zero` and all the other "notation projections" instead of the projections directly. This should make it more useful in category theory and the algebraic hierarchy (note: the `[notation_class]` attribute still needs to be added to all notation classes not defined in `init.core`)
* Add an easy way to specify custom projections of structures (like using `⇑e.symm` instead of `e.inv_fun`). They have to be definitionally equal to the projection.

Minor changes:
* Change the syntax to specify options.
* `prod` (and `pprod`) are treated as a special case: we do not recursively apply projections of these structure. This was the most common reason that we had to write the desired projections manually. You can still override this behavior by writing out the projections manually.
* A flag to apply `simp` to the rhs of the generated lemma, so that they are in simp-normal-form.
* Added an options to add more attributes to the generated lemmas
* Added an option which definitions to unfold to determine whether a type is a function type. By default it will unfold reducible definitions and instances (but e.g. not `set α`)
* Added an option to unfold definitions in the declaration to determine whether it is a constructor. (default: none)
* Added an option to not fully-apply the terms in the generated lemmas.

Design decisions:
* For every field in a structure there is a specified "projection expression" that acts as the projection for that field. For most fields this is just the projection of the structure, but this will be automatically overridden under certain conditions, like a coercion to functions/sorts existing, or a notation typeclass existing for a certain field.
* The first time you call `simps` for a specific structure, these projection expressions are cached using an attribute for that structure, and it is assumed you want to use the same projection expressions every time.
* You can also manually specify the projection. See Note [custom simps projection].

### [2020-07-24T18:42:44+00:00](https://github.com/leanprover-community/mathlib/commit/4d81149366b4b88fe72784f08a906c613af85a13)
chore(ring_theory/prod): move file to algebra/ring/prod ([#3540](https://github.com/leanprover-community/mathlib/pull/#3540))

### [2020-07-24T17:03:22+00:00](https://github.com/leanprover-community/mathlib/commit/47efcf3c7f7dadd98f47372c8bdcc1d220773201)
chore(algebraic_geometry/presheafed_space): use projection rather than fancy coercion ([#3507](https://github.com/leanprover-community/mathlib/pull/#3507))

We'd gone to great effort when writing `PresheafedSpace` to create a coercion from morphisms of `PresheafedSpace`s to morphisms in `Top`.

It's hard to read, it's fragile.

So this PR rips out that coercion, and renames the "continuous map between base spaces" field from `f` to `base`, and uses that throughout.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-24T13:04:01+00:00](https://github.com/leanprover-community/mathlib/commit/229cf6ef21126e17e6ec78b4acc5413ad0a8a02d)
feat(data/polynomial): irreducible_of_irreducible_mod_prime ([#3539](https://github.com/leanprover-community/mathlib/pull/#3539))

I was waiting on this, an exercise from Johan's tutorial at LftCM, to see if a participant would PR it. Perhaps not, so I'll contribute this now.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Chris Hughes <chrishughes24@gmail.com>
Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-07-24T13:03:59+00:00](https://github.com/leanprover-community/mathlib/commit/579b142d6d90cb7c5126f240fd05d128c9565f30)
feat(field_theory/fixed): a field is normal over the fixed subfield under a group action ([#3520](https://github.com/leanprover-community/mathlib/pull/#3520))

From my Galois theory repo.

### [2020-07-24T11:52:28+00:00](https://github.com/leanprover-community/mathlib/commit/a6ad9043d97dedfbc1bbac8de5dd861bdf36ec5a)
feat(tactic/apply_rules): allow apply_cfg argument ([#3538](https://github.com/leanprover-community/mathlib/pull/#3538))

This allows passing an `apply_cfg` argument to `apply_rules` (and simplifies the configuration argument to `solve_by_elim`).

This is prompted by the desire to try using `apply_rules` with `md := semireducible` when working on the `continuity` tactic.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-24T11:07:23+00:00](https://github.com/leanprover-community/mathlib/commit/2d47d0cb3a0e688d21c3f2969273591042572dc0)
chore(measure_theory/indicator_function): split into 2 files deps: 3503 ([#3509](https://github.com/leanprover-community/mathlib/pull/#3509))

Split `measure_theory/indicator_function` into 2 files.
This file formulated all lemmas for `measure.ae` but they hold for any filter.



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-07-24T09:01:42+00:00](https://github.com/leanprover-community/mathlib/commit/6fe81bd5e1395e2e4877538b3067eb0fdca51067)
chore(*): remove `plift` from some lemmas about `infi`/`supr` ([#3503](https://github.com/leanprover-community/mathlib/pull/#3503))

Now `supr_eq_supr_finset` etc assume `ι` is a `Type*` and don't use `plift`. If you want
to apply it to a `Sort*`, rewrite on `equiv.plift.surjective.supr_comp` first.

## Full list of API changes:

### `data/equiv/basic`

* `equiv.ulift`: change the order of universe arguments to match `ulift`;
* add `coe_ulift`, `coe_plift`, `coe_ulift_symm`, `coe_plift_symm`;

### `data/finset/lattice`

* `supr_eq_supr_finset`, `infi_eq_infi_finset`: assume `ι` is a `Type*`, avoid `plift`;
* `Union_eq_Union_finset`, `Inter_eq_Inter_finset`: same as above;

### `data/set/basic`

* `function.surjective.range_comp`: generalize to `Sort*` for 2 of 3 arguments;

### `order/complete_lattice`

* remove `supr_congr` and `infi_congr`;
* add `function.surjective.supr_comp` and `function.surjective.infi_comp`.

### [2020-07-24T08:19:54+00:00](https://github.com/leanprover-community/mathlib/commit/499cb9bb36f388bbd906059c783129084c27af0f)
refactor(data/nat/digits): refactor into sections ([#3527](https://github.com/leanprover-community/mathlib/pull/#3527))

Refactor `data.nat.digits` into sections and grouping similar lemmas together.

### [2020-07-24T07:44:28+00:00](https://github.com/leanprover-community/mathlib/commit/5d41ec7022a04e5304fb640eac7d7aa699313ca1)
feat(ring_theory/polynomial/basic): remove unnecessary commutativity assumption ([#3535](https://github.com/leanprover-community/mathlib/pull/#3535))

### [2020-07-24T00:41:59+00:00](https://github.com/leanprover-community/mathlib/commit/c88f8bebbd6552738b932b83cc9ae46fd3c1d6d0)
chore(scripts): update nolints.txt ([#3534](https://github.com/leanprover-community/mathlib/pull/#3534))

I am happy to remove some nolints for you!

### [2020-07-23T23:18:12+00:00](https://github.com/leanprover-community/mathlib/commit/bad4f97871452e381911ca9acdb8de8d5271f607)
feat(algebra/direct_sum): Add ⨁ notation ([#3473](https://github.com/leanprover-community/mathlib/pull/#3473))

This uses the unicode character "n-ary circled plus operator", which seems to be the usual symbol for this operation




Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-07-23T19:52:19+00:00](https://github.com/leanprover-community/mathlib/commit/289d17cdc9627bba29c4b8d9bf7a120d7f2a1407)
chore(data/equiv/basic): avoid `λ ⟨a, b⟩` in some defs, add `simp` lemmas ([#3530](https://github.com/leanprover-community/mathlib/pull/#3530))

### [2020-07-23T18:29:16+00:00](https://github.com/leanprover-community/mathlib/commit/2d395a99127fc52af726798097a1518c2e48b73d)
refactor(algebra/pi_instance): delete pi_instance file, and move instances to group/ring etc appropriately ([#3513](https://github.com/leanprover-community/mathlib/pull/#3513))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2020-07-23T14:56:16+00:00](https://github.com/leanprover-community/mathlib/commit/ed33a99dd39baf569a11ba825ad94033fe41d648)
chore(measure_theory/l1_space): make `measure` argument of `integrable` optional ([#3508](https://github.com/leanprover-community/mathlib/pull/#3508))

Other changes:

* a few trivial lemmas;
* fix notation for `∀ᵐ`: now Lean can use it for printing, not only
  for parsing.

### [2020-07-23T13:44:07+00:00](https://github.com/leanprover-community/mathlib/commit/396a66a053396275b39c1f073c86be6f65773d6e)
chore(order/filter/*): use `[nonempty _]` instead of `(_ : nonempty _)` ([#3526](https://github.com/leanprover-community/mathlib/pull/#3526))

In most cases Lean can find an instance automatically.

### [2020-07-23T11:08:28+00:00](https://github.com/leanprover-community/mathlib/commit/b9beca0bf8ab11e17db9318ed224c082b863a795)
chore(set_theory/ordinal): split into multiple files ([#3517](https://github.com/leanprover-community/mathlib/pull/#3517))

Split the file `ordinal.lean` into three files, and add docstrings for all definitions and file-level docstrings. This is just shuffling things around: no new content, no erased content.


Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-07-23T08:52:03+00:00](https://github.com/leanprover-community/mathlib/commit/79df8cc471152f3d7fd7f6f58926ffd51d3f7ec9)
refactor(order/filter/at_top): import order.filter.bases ([#3523](https://github.com/leanprover-community/mathlib/pull/#3523))

This way we can use facts about `filter.has_basis` in `filter.at_top`.

Also generalize `is_countably_generated_at_top_finset_nat`
to `at_top` filter on any `encodable` type.

### [2020-07-23T07:50:13+00:00](https://github.com/leanprover-community/mathlib/commit/d974457eaa5d0bb3690b7cb0fabe0e13687e6743)
feat(ring_theory/ideal_over): a prime ideal lying over a maximal ideal is maximal ([#3488](https://github.com/leanprover-community/mathlib/pull/#3488))

By making the results in `ideal_over.lean` a bit more general, we can transfer to quotient rings. This allows us to prove a strict inclusion `I < J` of ideals in `S` results in a strict inclusion `I.comap f < J.comap f` if `R` if `f : R ->+* S` is nice enough. As a corollary, a prime ideal lying over a maximal ideal is maximal.



Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-07-23T02:51:42+00:00](https://github.com/leanprover-community/mathlib/commit/7397db780c3f80099918306f18e48b057eb73c0c)
chore(data/sym2) : simplify proofs ([#3522](https://github.com/leanprover-community/mathlib/pull/#3522))

This shouldn't change any declarations, only proofs.


Co-authored-by: Aaron Anderson <awainverse@gmail.com>

### [2020-07-23T01:10:58+00:00](https://github.com/leanprover-community/mathlib/commit/c1498391a77078583b24d79ebc637cea47057a46)
chore(topology/uniform_space/basic): golf a proof ([#3521](https://github.com/leanprover-community/mathlib/pull/#3521))

Also prove that a `subsingleton` has a unique `topological_space` structure.

### [2020-07-23T01:10:56+00:00](https://github.com/leanprover-community/mathlib/commit/4a918fbb547146c10c9c9eccc73b47c769201f71)
chore(order/complete_lattice): add `supr/infi_of_empty(')` ([#3519](https://github.com/leanprover-community/mathlib/pull/#3519))

### [2020-07-23T01:10:54+00:00](https://github.com/leanprover-community/mathlib/commit/827fcd063969c7258f763915deaec072370677ae)
feat(analysis/convex/basic): add lemmas about convex combination of endpoints of intervals ([#3482](https://github.com/leanprover-community/mathlib/pull/#3482))



Co-authored-by: Frédéric Dupuis <31101893+dupuisf@users.noreply.github.com>

### [2020-07-22T23:58:19+00:00](https://github.com/leanprover-community/mathlib/commit/fbcd89088e9551eb164f1fbd0e45c1378ed1a7dd)
chore(data/subtype,order/complete_lattice): use `coe` instead of `subtype.val` ([#3518](https://github.com/leanprover-community/mathlib/pull/#3518))

### [2020-07-22T19:30:06+00:00](https://github.com/leanprover-community/mathlib/commit/1dd69d301d1a1a9296f0438fedcac46e50d04c1f)
refactor(data/polynomial): re-organizing ([#3512](https://github.com/leanprover-community/mathlib/pull/#3512))

This builds on [#3407](https://github.com/leanprover-community/mathlib/pull/#3407), trying to get related material closer together. 

There shouldn't be any change to the set of declarations, just the order they come in and the imports required to get them.

The major changes are:
1. `data.polynomial.derivative` now has much weaker imports
2. generally, material has been moved "upwards" to the first place it can be done (a lot of material moved out of `data.polynomial.degree` into `data.polynomial.degree.basic` -- essentially `degree` is the material about `degree` that also needs `eval` and friends; a further rename might be appropriate)
3. some of the later material is no longer a big chain of linear dependencies, but compiles separately



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>
Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2020-07-22T16:16:15+00:00](https://github.com/leanprover-community/mathlib/commit/36ea9e8443591810a5c7bac5b4e7e375b1ccc496)
chore(*): cleanup imports ([#3511](https://github.com/leanprover-community/mathlib/pull/#3511))

A not-very-interesting cleanup of imports.

I deleted 
```
instance orbit_fintype (b : β) [fintype α] [decidable_eq β] :	
  fintype (orbit α b) := set.fintype_range _
```
which wasn't being used, for the sake of not having to import everything about finiteness into `algebra.group_action`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-22T16:16:13+00:00](https://github.com/leanprover-community/mathlib/commit/a8cedf9f69f7d93d561e828a72b689dc02b70b64)
feat(data/nat/digits): a number is bigger than base^(digits length - 1) ([#3498](https://github.com/leanprover-community/mathlib/pull/#3498))

### [2020-07-22T14:52:45+00:00](https://github.com/leanprover-community/mathlib/commit/acc2802d0a22fd302556e1753d659a249d400c22)
feat(tactic/extract_goal): remove annoying spaces ([#3514](https://github.com/leanprover-community/mathlib/pull/#3514))

closes [#3375](https://github.com/leanprover-community/mathlib/pull/#3375)

### [2020-07-22T14:04:33+00:00](https://github.com/leanprover-community/mathlib/commit/a971a88f81d868c29afa6200128b12313bd9613b)
refactor(linear_algebra/nonsingular_inverse, data/matrix/basic): update_* rectangular matrices ([#3403](https://github.com/leanprover-community/mathlib/pull/#3403))




Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-07-22T11:32:56+00:00](https://github.com/leanprover-community/mathlib/commit/90d33863bbaf3a668b8cc18ae814c50e0aef217c)
feat(category_theory/kernels): compute kernel (f ≫ g) when one is an iso ([#3438](https://github.com/leanprover-community/mathlib/pull/#3438))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-22T10:18:14+00:00](https://github.com/leanprover-community/mathlib/commit/39f8f0209ddcff04197b1a460ee2c1acecf8481d)
refactor(algebra/big_operators): split file, reduce imports ([#3495](https://github.com/leanprover-community/mathlib/pull/#3495))

I've split up `algebra.big_operators`. It wasn't completely obvious how to divide it up, but this is an attempt to balance coherence / file size / minimal imports.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-07-22T08:55:49+00:00](https://github.com/leanprover-community/mathlib/commit/197b5015455100c587582a6b8ac9ed3d67834042)
feat(tactic/extract_goal): better support for `let` expressions ([#3496](https://github.com/leanprover-community/mathlib/pull/#3496))

Improve treatment of let expressions [#3375](https://github.com/leanprover-community/mathlib/pull/#3375) 



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-07-22T05:08:37+00:00](https://github.com/leanprover-community/mathlib/commit/64335decde43b892374d2609f973ef8061a18e64)
chore(topology/category/): switch to bundled morphisms in Top ([#3506](https://github.com/leanprover-community/mathlib/pull/#3506))

This is a natural follow-up to @Nicknamen's recent PRs splitting bundled continuous maps out of `compact_open`.

There is a slight regression in `algebraic_geometry.presheafed_space` and `algebraic_geometry.stalks`, requiring a more explicit coercion. I'd encourage reviewers to ignore this, as I'll make a separate PR simplifying this (basically: having a coercion from morphisms of `PresheafedSpace`s to morphisms of `Top`s is unrealistically ambitious, and moreover harder to read, than just using the projection notation, and removing it makes everything easier).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-22T03:47:11+00:00](https://github.com/leanprover-community/mathlib/commit/dced34364276b7036dfe3cbe6b335d97405cc757)
feat(data/list/basic): induction from both ends ([#3448](https://github.com/leanprover-community/mathlib/pull/#3448))

This was originally an induction principle on palindromes, but researching Coq solutions made me realize that weakening the statement made it simpler and much easier to prove.

- ["The way we proceeded was to prove first an induction principle for lists, considering insertions at both ends..."][1]
- ["... generalizing a single variable in that definition would create another inductive definition of a list."][2]

[1]: https://www.labri.fr/perso/casteran/CoqArt/inductive-prop-chap/palindrome.html
[2]: https://danilafe.com/blog/coq_palindrome/

This also adds the lemmas `length_init` and `init_append_last`.

### [2020-07-22T02:38:08+00:00](https://github.com/leanprover-community/mathlib/commit/55e7dcc1ac8f70af9e8473aad07ce669794277fb)
fix(ring_theory/jacobson): Clean up documentation in Jacobson Ring definitions ([#3501](https://github.com/leanprover-community/mathlib/pull/#3501))

Fixes to formatting and documentation found after merging the definition of Jacobson Rings in https://github.com/leanprover-community/mathlib/pull/3404

### [2020-07-22T01:12:15+00:00](https://github.com/leanprover-community/mathlib/commit/314b20949e0e16675763d1b5670b9824079f2994)
chore(scripts): update nolints.txt ([#3505](https://github.com/leanprover-community/mathlib/pull/#3505))

I am happy to remove some nolints for you!

### [2020-07-22T00:27:14+00:00](https://github.com/leanprover-community/mathlib/commit/2219dc1831d750032c80cd95481c9e598271b158)
feat(tactic/linarith): put certificate generation in tactic monad ([#3504](https://github.com/leanprover-community/mathlib/pull/#3504))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-22T00:27:12+00:00](https://github.com/leanprover-community/mathlib/commit/219e2981a86f9f88e69d4d0f79c449374d3888bb)
feat(ring_theory/discrete_valuation_ring): add DVR ([#3476](https://github.com/leanprover-community/mathlib/pull/#3476))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-21T23:16:29+00:00](https://github.com/leanprover-community/mathlib/commit/84d64972513fcc4879c2ec4ad2a0aaeabf7b561e)
fix(algebra/ring): add coe_neg_one lemma to units ([#3489](https://github.com/leanprover-community/mathlib/pull/#3489))

Follow up to [#3472](https://github.com/leanprover-community/mathlib/pull/#3472) - adds `coe_neg_one`, which allows `norm_cast` to handle hypotheses like `↑-1 = 1`

### [2020-07-21T22:26:30+00:00](https://github.com/leanprover-community/mathlib/commit/e448bb1a87c0db5a727fefd882ae7de103135bc9)
feat(tactic/linarith): modularize coefficient oracle ([#3502](https://github.com/leanprover-community/mathlib/pull/#3502))

This makes it easy to plug an alternate certificate search method (e.g. simplex-based) into `linarith`, should one desire.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-21T21:58:58+00:00](https://github.com/leanprover-community/mathlib/commit/c6aa8e728c057fe1c9f2b59740a7b53c3a4eb5c8)
feat(algebra/invertible): invertible elements are units ([#3499](https://github.com/leanprover-community/mathlib/pull/#3499))

### [2020-07-21T21:58:56+00:00](https://github.com/leanprover-community/mathlib/commit/2fb6a056da0ccd00e2c3ca8cd2f8ad0095ede562)
feat(group_theory/semidirect_product): semidirect_product.map ([#3492](https://github.com/leanprover-community/mathlib/pull/#3492))

### [2020-07-21T21:29:16+00:00](https://github.com/leanprover-community/mathlib/commit/dfef07a841b9d3120a88ad687173b19654809af0)
chore(analysis/special_functions): moved trig vals out of real.pi, added new trig vals ([#3497](https://github.com/leanprover-community/mathlib/pull/#3497))

Moved trigonometric lemmas from real.pi to analysis.special_functions.trigonometric. Also added two new trig lemmas, tan_pi_div_four and arctan_one, to analysis.special_functions.trigonometric.

https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Trig.20function.20values

### [2020-07-21T16:25:32+00:00](https://github.com/leanprover-community/mathlib/commit/c47d1d0d942e4668c923e0c737b9cdcaaada23a5)
feat(data/{mv_}polynomial): make args to aeval implicit ([#3494](https://github.com/leanprover-community/mathlib/pull/#3494))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-21T16:25:30+00:00](https://github.com/leanprover-community/mathlib/commit/7efdd990ca899f05d4486b51fecd734105c5155e)
feat(algebra/invertible): lemmas ([#3493](https://github.com/leanprover-community/mathlib/pull/#3493))

Coauthored by: Johan Commelin <johan@commelin.net>


Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-21T15:23:28+00:00](https://github.com/leanprover-community/mathlib/commit/5776f4c05da84f87abdacd85733abcd4b4cb2d28)
feat(topology): more lemmas about Ici and Iic neighborhoods ([#3474](https://github.com/leanprover-community/mathlib/pull/#3474))

Main feature :  add `tfae_mem_nhds_within_Ici` and `tfae_mem_nhds_within_Iic`, analogous to the existing `tfae_mem_nhds_within_Ioi` and `tfae_mem_nhds_within_Iio`, as well as related lemmas (again imitating the open case)

I also added a few lemmas in `data/set/intervals/basic.lean` that were useful for this and a few upcoming PRs



Co-authored-by: Anatole Dedecker <48656793+ADedecker@users.noreply.github.com>

### [2020-07-21T12:58:53+00:00](https://github.com/leanprover-community/mathlib/commit/49049e46f658527af573d1b79a890e95b5d0a664)
feat(topology): implemented continuous bundled maps ([#3486](https://github.com/leanprover-community/mathlib/pull/#3486))

In this PR we defined continuous bundled maps, adapted the file `compact_open` accordingly, and proved instances of algebraic structures over the type `continuous_map` of continuous bundled maps. This feature was suggested on Zulip multiple times, see for example https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Continuous.20maps



Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>

### [2020-07-21T11:50:25+00:00](https://github.com/leanprover-community/mathlib/commit/5c55e157fa3afd7a346b6e21698ab3ef5ce2cd21)
feat(data/finset/intervals): Lemma about filter and Ico ([#3479](https://github.com/leanprover-community/mathlib/pull/#3479))

Add "if you filter an Ico based on being less than or equal to its bottom element, you get the singleton bottom element".

### [2020-07-21T10:37:37+00:00](https://github.com/leanprover-community/mathlib/commit/d57130b300049d4fdbf3ff263acb8a995413e6a9)
feat(field_theory/mv_polynomial): char_p instance ([#3491](https://github.com/leanprover-community/mathlib/pull/#3491))

Co-authored-by: Johan Commelin <johan@commelin.net>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-21T09:25:11+00:00](https://github.com/leanprover-community/mathlib/commit/1a31e69cca9d3695083cb0a95123765664c464e9)
chore(algebra/group/anti_hom): remove is_group_anti_hom ([#3485](https://github.com/leanprover-community/mathlib/pull/#3485))

`is_group_anti_hom` is no longer used anywhere, so I'm going to count it as deprecated and propose removing it.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-21T08:38:58+00:00](https://github.com/leanprover-community/mathlib/commit/31699708810e72c518f38998a8abae06a4c021a5)
feat(category_theory/kernels): helper lemmas for constructing kernels ([#3439](https://github.com/leanprover-community/mathlib/pull/#3439))

This does for kernels what [#3398](https://github.com/leanprover-community/mathlib/pull/#3398) did for pullbacks.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-21T07:47:44+00:00](https://github.com/leanprover-community/mathlib/commit/d174d3d0427167448b2436d098f12466526ee6c6)
refactor(linear_algebra/*): postpone importing material on direct sums ([#3484](https://github.com/leanprover-community/mathlib/pull/#3484))

This is just a refactor, to avoid needing to develop material on direct sums before we can even define an algebra.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-07-21T04:06:36+00:00](https://github.com/leanprover-community/mathlib/commit/c71e67a9fa99276a900e5065e925d82f5d78fdee)
feat(ring_theory/jacobson): definition of Jacobson rings ([#3404](https://github.com/leanprover-community/mathlib/pull/#3404))

### [2020-07-21T01:55:48+00:00](https://github.com/leanprover-community/mathlib/commit/0322d8927d4cdc401a33743ab84e497e85916886)
refactor(topology/algebra/monoid): changed topological_monoid into has_continuous_mul ([#3481](https://github.com/leanprover-community/mathlib/pull/#3481))



Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>

### [2020-07-21T01:05:11+00:00](https://github.com/leanprover-community/mathlib/commit/079d409304a09b9b0acca1e1ea82c2b5754eebf4)
chore(scripts): update nolints.txt ([#3483](https://github.com/leanprover-community/mathlib/pull/#3483))

I am happy to remove some nolints for you!

### [2020-07-21T01:05:09+00:00](https://github.com/leanprover-community/mathlib/commit/6721ddfbb6f3ba6862b38843da5124e2d7b226b2)
refactor(ring_theory): remove unbundled leftovers in `ideal.quotient` ([#3467](https://github.com/leanprover-community/mathlib/pull/#3467))

This PR aims to smooth some corners in the `ideal.quotient` namespace left by the move to bundled `ring_hom`s. The main irritation is the ambiguity between different ways to map `x : R` to the quotient ring: `quot.mk`, `quotient.mk`, `quotient.mk'`, `submodule.quotient.mk`, `ideal.quotient.mk` and `ideal.quotient.mk_hom`, which caused a lot of duplication and more awkward proofs.

The specific changes are:

 * delete function `ideal_quotient.mk`
 * rename ring hom `ideal.quotient.mk_hom` to `ideal.quotient.mk`
 * make new `ideal_quotient.mk` the `simp` normal form
 * delete obsolete `mk_eq_mk_hom`
 * delete obsolete `mk_...` `simp` lemmas (use `ring_hom.map_...` instead)
 * delete `quotient.map_mk` which was unused and had no lemmas (`ideal.map quotient.mk` is used elsewhere)

### [2020-07-21T01:05:07+00:00](https://github.com/leanprover-community/mathlib/commit/564ab0224042e1aaab63f8e3e7872dbbde97c467)
feat(category_theory/kernels): cokernel (image.ι f) ≅ cokernel f ([#3441](https://github.com/leanprover-community/mathlib/pull/#3441))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-20T23:42:11+00:00](https://github.com/leanprover-community/mathlib/commit/32c082f5dbb320af2ee0fa5dfc0a555b1b0d5ba5)
fix(tactic/library_search): group monotone lemmas with le lemmas ([#3471](https://github.com/leanprover-community/mathlib/pull/#3471))

This lets `library_search` use `monotone` lemmas to prove `\le` goals, and vice versa, resolving a problem people were experiencing in Patrick's exercises at LftCM2020:

```
import order.filter.basic

open filter

example {α β γ : Type*} {A : filter α} {B : filter β} {C : filter γ} {f : α → β} {g : β → γ}
  (hf : tendsto f A B) (hg : tendsto g B C) : tendsto (g ∘ f) A C :=
calc
map (g ∘ f) A = map g (map f A) : by library_search
          ... ≤ map g B         : by library_search!
          ... ≤ C               : by library_search!
```



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-20T22:17:29+00:00](https://github.com/leanprover-community/mathlib/commit/2915faed77bd3dbfab1641dbdfd286f58c307a14)
feat(data/finset/basic): Cardinality of intersection with singleton ([#3480](https://github.com/leanprover-community/mathlib/pull/#3480))

Intersecting with a singleton produces a set of cardinality either 0 or 1.

### [2020-07-20T20:30:53+00:00](https://github.com/leanprover-community/mathlib/commit/1f74ddd2266b9558f19a66b5dc2bef11416fd1a3)
feat(topology/local_extr): add lemmas on composition with continuous functions ([#3459](https://github.com/leanprover-community/mathlib/pull/#3459))

### [2020-07-20T18:42:24+00:00](https://github.com/leanprover-community/mathlib/commit/7aa85c2bfa064d909a798995cb2ce2abccdabcd1)
fix(algebra/group/units): add missing coe lemmas to units ([#3472](https://github.com/leanprover-community/mathlib/pull/#3472))

Per @kbuzzard's suggestions [here](https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Shortening.20proof.20on.20product.20of.20units.20in.20Z.html[#204406319](https://github.com/leanprover-community/mathlib/pull/#204406319)):

- Add a new lemma `coe_eq_one` to `units` API
- Tag `eq_iff` with `norm_cast`


Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-07-20T17:56:13+00:00](https://github.com/leanprover-community/mathlib/commit/b66d1bee6393e4a9c086027c242aeb5f59c885d8)
feat(data/multivariate/qpf): definition ([#3395](https://github.com/leanprover-community/mathlib/pull/#3395))

Part of [#3317](https://github.com/leanprover-community/mathlib/pull/#3317)

### [2020-07-20T15:42:49+00:00](https://github.com/leanprover-community/mathlib/commit/78f438b70ae0202beee28d90a0532e0bf6cbdf6a)
feat(tactic/squeeze_*): improve suggestions ([#3431](https://github.com/leanprover-community/mathlib/pull/#3431))

This makes this gives `squeeze_simp`, `squeeze_simpa` and `squeeze_dsimp` the `?` optional argument that indicates that we should consider all `simp` lemmas that are also `_refl_lemma`

### [2020-07-20T14:17:48+00:00](https://github.com/leanprover-community/mathlib/commit/d0df6b81cd0920ad569158c06a3fd5abb9e63301)
feat(data/equiv/mul_add): refl_apply and trans_apply ([#3470](https://github.com/leanprover-community/mathlib/pull/#3470))

### [2020-07-20T14:17:46+00:00](https://github.com/leanprover-community/mathlib/commit/2994f1b968e08c89513c0febc095003b60ebdf71)
feat(solve_by_elim): add tracing ([#3468](https://github.com/leanprover-community/mathlib/pull/#3468))

When `solve_by_elim` fails, it now prints:

```
`solve_by_elim` failed.
Try `solve_by_elim { max_depth := N }` for a larger `N`,
or use `set_option trace.solve_by_elim true` to view the search.
```

and with `set_option trace.solve_by_elim true` we get messages like:

```
example (n m : ℕ) (f : ℕ → ℕ → Prop) (h : f n m) : ∃ p : ℕ × ℕ, f p.1 p.2 :=
begin
  repeat { fsplit },
  solve_by_elim*,
end
```
producing:
```
[solve_by_elim . ✅ `n` solves `⊢ ℕ`]
[solve_by_elim .. ✅ `n` solves `⊢ ℕ`]
[solve_by_elim ... ❌ failed to solve `⊢ f (n, n).fst (n, n).snd`]
[solve_by_elim .. ✅ `m` solves `⊢ ℕ`]
[solve_by_elim ... ✅ `h` solves `⊢ f (n, m).fst (n, m).snd`]
[solve_by_elim .... success!]
```

Fixed [#3063](https://github.com/leanprover-community/mathlib/pull/#3063) 



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-20T14:17:44+00:00](https://github.com/leanprover-community/mathlib/commit/38b95c8a958390828ed7613794a06535499840d3)
feat(set_theory/cardinal): simp lemmas about numerals ([#3450](https://github.com/leanprover-community/mathlib/pull/#3450))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-07-20T14:17:41+00:00](https://github.com/leanprover-community/mathlib/commit/9a923639485f8893341a58d6235e99c25103df22)
feat(logic/basic): nonempty.some ([#3449](https://github.com/leanprover-community/mathlib/pull/#3449))

Could we please have this? I've a number of times been annoyed by the difficulty of extracting an element from a `nonempty`.

(Criterion for alternative solutions: `library_search` solves `nonempty X -> X`.)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-20T14:17:39+00:00](https://github.com/leanprover-community/mathlib/commit/469043f9a65014791cb49758726b770f1537e1af)
refactor(tactic/generalizes): reimplement generalizes' ([#3416](https://github.com/leanprover-community/mathlib/pull/#3416))

The new implementation is somewhat simpler. It is inspired by the C++
function `generalize_indices` in `library/tactic/cases_tactic.cpp`,
which performs essentially the same construction.

The only non-internal change is the return type of `generalizes_intro`.

### [2020-07-20T12:54:51+00:00](https://github.com/leanprover-community/mathlib/commit/593b1bb5ff4c241a677ef9a617d404d4b6b06c32)
feat(linear_algebra/affine_space): lemmas on affine spans ([#3453](https://github.com/leanprover-community/mathlib/pull/#3453))

Add more lemmas on affine spans; in particular, that the points in an
`affine_span` are exactly the `affine_combination`s where the sum of
weights equals 1, provided the underlying ring is nontrivial.

### [2020-07-20T12:54:49+00:00](https://github.com/leanprover-community/mathlib/commit/65208ed7e278dfe4f1753757a8a21f8255c2db8b)
refactor(data/polynomial/*): further refactors ([#3435](https://github.com/leanprover-community/mathlib/pull/#3435))

There's a lot further to go, but I need to do other things for a while so will PR what I have so far.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-20T12:54:47+00:00](https://github.com/leanprover-community/mathlib/commit/cb06214584475305d87178ff222a3a87a35ce2cc)
feat(tactic/interactive_expr): always select all arguments ([#3384](https://github.com/leanprover-community/mathlib/pull/#3384))

If you hover over `id id 0` in the widget (or really any function with more than one argument), then it is possible to select the partial application `id id`.  The popup will then only show the function `id` and the argument `id`, but not the second argument `0`.

This PR changes this behavior so that you can't select partial applications and always see all argument in the popup.

### [2020-07-20T11:25:58+00:00](https://github.com/leanprover-community/mathlib/commit/4a3755a128d5b323f34123ac52184463154023df)
chore(algebra/ring): fix a mistake ([#3469](https://github.com/leanprover-community/mathlib/pull/#3469))

### [2020-07-20T09:41:20+00:00](https://github.com/leanprover-community/mathlib/commit/4dc0814ee529abb7bec989b65d82a0f93921c048)
feat (algebra/module): lemma about submodules ([#3466](https://github.com/leanprover-community/mathlib/pull/#3466))

Add a 3-line lemma saying that a linear combination of elements of a submodule is still in that submodule.

### [2020-07-20T08:16:52+00:00](https://github.com/leanprover-community/mathlib/commit/a400adb9391c9c355f60e16985a4f95269c13b85)
fix(tactic/library_search): 1 ≤ n goals in nat ([#3462](https://github.com/leanprover-community/mathlib/pull/#3462))

Fixes [#3432](https://github.com/leanprover-community/mathlib/pull/#3432).

This PR changes `library_search` and `suggest`:
1. instead of just selecting lemma with a single `name` as their head symbol, allows selecting from a `name_set`.
2. when the goal is `≤` on certain `ℕ` goals, set that `name_set` to `[has_lt.lt, has_le.le]`, for more flexible matching of inequality lemmas about `ℕ`
3. now successfully solves `theorem nonzero_gt_one (n : ℕ) : ¬ n = 0 → n ≥ 1 := by library_search!`
4. splits the `test/library_search/basic.lean` file into two parts, one which doesn't import `data.nat.basic`, for faster testing



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-20T06:04:37+00:00](https://github.com/leanprover-community/mathlib/commit/5080dd5621e8d7dbc11eec8a3cafdfde7ec938c3)
feat(data/padics/padic_norm): lemmas about padic_val_nat ([#3230](https://github.com/leanprover-community/mathlib/pull/#3230))

Collection of lemmas about `padic_val_nat`, culminating in `lemma prod_pow_prime_padic_val_nat : ∀ (n : nat) (s : n ≠ 0) (m : nat) (pr : n < m),  ∏ p in finset.filter nat.prime (finset.range m), pow p (padic_val_nat p n) = n`.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-07-20T05:06:14+00:00](https://github.com/leanprover-community/mathlib/commit/84d4ea77e05930bf873b316890754aedab3c6135)
feat(data/nat/digits): a bigger number has more digits ([#3457](https://github.com/leanprover-community/mathlib/pull/#3457))

### [2020-07-20T05:06:12+00:00](https://github.com/leanprover-community/mathlib/commit/792f54154006c2f52b1200bb1ad4c507361fe86d)
feat(field_theory/tower): tower law ([#3355](https://github.com/leanprover-community/mathlib/pull/#3355))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-20T03:39:14+00:00](https://github.com/leanprover-community/mathlib/commit/501aeb7f4cf2dc38a83f93f4bb4f5df61348dadf)
feat(data/quot.lean): add lift_on_beta\_2 ([#3456](https://github.com/leanprover-community/mathlib/pull/#3456))

This corresponds to `lift_on\_2` in `library/init/data/quot.lean` just as `lift_beta` and `lift_on_beta` correspond to `lift` and `lift_on`. It greatly simplifies quotient proofs but was, surprisingly, missing.

### [2020-07-20T03:10:32+00:00](https://github.com/leanprover-community/mathlib/commit/697488c8c2b8f6774152d5428b27bab9083acf72)
feat(tactic/unfold_cases): add unfold_cases tactic ([#3396](https://github.com/leanprover-community/mathlib/pull/#3396))

### [2020-07-20T00:16:06+00:00](https://github.com/leanprover-community/mathlib/commit/2975f93a74461a9e5d169886b55b42811f42014d)
chore(tactic/interactive): move non-monadic part of `clean` to `expr.clean` ([#3461](https://github.com/leanprover-community/mathlib/pull/#3461))

### [2020-07-20T00:16:04+00:00](https://github.com/leanprover-community/mathlib/commit/db1814466708c97bbae7a14385862cbcc1a1cae5)
chore(order/bounded_lattice): add `is_compl.inf_left_eq_bot_iff` etc ([#3460](https://github.com/leanprover-community/mathlib/pull/#3460))

### [2020-07-19T21:18:59+00:00](https://github.com/leanprover-community/mathlib/commit/1bb3d198adb92b0fe00b922a357cc29f54c35e70)
refactor(order/filter/basic): add class `filter.ne_bot` ([#3454](https://github.com/leanprover-community/mathlib/pull/#3454))

This way Lean will f`≠ ⊥` in a few most common cases
(incl. `nhds_ne_bot`, `at_top_ne_bot`) automatically.

Other API changes:

* many lemmas now take `[ne_bot l]` instead of `(hl : l ≠ ⊥)`;
* some lemmas got `'` versions that take an explicit `(hl : ne_bot l)`;
* rename `ultrafilter_unique` to `is_ultrafilter.unique`;
* `cauchy_downwards` is now `cauchy.mono` (instance arg) and `cauchy.mono'` (explicit arg);
* `cauchy_map` is now `cauchy.map`;
* `cauchy_comap` is now `cauchy.comap`;
* `totally_bounded_closure` is now `totally_bounded.closure`;
* `totally_bounded_image` is now `totally_bounded.image`;

### [2020-07-19T21:18:58+00:00](https://github.com/leanprover-community/mathlib/commit/953ab3ab6248182c68a909444b466b412cfd1ffb)
feat(geometry/manifold/charted_space): open subset of a manifold is a manifold ([#3442](https://github.com/leanprover-community/mathlib/pull/#3442))

An open subset of a charted space is naturally a charted space.  If the charted space has structure groupoid `G` (with `G` closed under restriction), then the open subset does also.

Most of the work is in `topology/local_homeomorph`, where it is proved that a local homeomorphism whose source is `univ` is an open embedding, and conversely.

### [2020-07-19T16:12:23+00:00](https://github.com/leanprover-community/mathlib/commit/bc278b7e92c6d3b977ab1c8013cb76224379016d)
fix(tactic/apply_rules): fix stuck metavariable bug ([#3451](https://github.com/leanprover-community/mathlib/pull/#3451))

`apply_rules` had the same bug `solve_by_elim` used to suffer from: applying a lemma once would fix its arguments, and prevent it from being applied a second time with different arguments.

This essentially ports over the fix from `solve_by_elim`: rather than carrying around a `list expr`, we carry a `list (tactic expr)` and generate on demand.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-07-19T15:29:48+00:00](https://github.com/leanprover-community/mathlib/commit/9b0435a01981c4cc723d6da3fb45ce7b8cee3054)
fix(tactic/linarith): find correct zero_lt_one ([#3455](https://github.com/leanprover-community/mathlib/pull/#3455))

Zulip: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/linarith.20and.20ordinal.20file



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-19T14:44:28+00:00](https://github.com/leanprover-community/mathlib/commit/47ea2a6ec1c473cec23253996e610fdd011e53ad)
feat(topology, analysis) : add lemmas about `has_neg.neg` (preliminaries for L'Hopital's rule) ([#3392](https://github.com/leanprover-community/mathlib/pull/#3392))

This PR contains a few lemmas about the `has_neg.neg` function, such as : 
- its limit along `at_top` and `at_bot`
- its limit along `nhds a`, `nhds_within a (Ioi a)` and similar filters
- its differentiability and derivative



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Anatole Dedecker <48656793+ADedecker@users.noreply.github.com>

### [2020-07-19T14:13:17+00:00](https://github.com/leanprover-community/mathlib/commit/8187551ddb72ce1efd1da3f5fe592e14af16fdd3)
feat(topology/algebra/continuous_functions): algebra structure over continuous functions ([#3383](https://github.com/leanprover-community/mathlib/pull/#3383))

### [2020-07-19T09:29:38+00:00](https://github.com/leanprover-community/mathlib/commit/5228d557b4a7a52eba0c9d35bf0cd6830f1939d2)
feat(linear_algebra/basic): add span_zero ([#3306](https://github.com/leanprover-community/mathlib/pull/#3306))

`simp` now proves span_zero for both submodules and ideals



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-07-19T06:24:31+00:00](https://github.com/leanprover-community/mathlib/commit/3354476387e05ee5a3bad26559282dbcacf558e0)
feat(data/indicator_function): more lemmas ([#3424](https://github.com/leanprover-community/mathlib/pull/#3424))

Add some lemmas of use when using `set.indicator` to manipulate
functions involved in summations.

### [2020-07-19T05:43:15+00:00](https://github.com/leanprover-community/mathlib/commit/8312419ca0bbb0c4c12f04e077294245e684145f)
refactor(data/polynomial): remove has_coe_to_fun, and @[reducible] on monomial ([#3420](https://github.com/leanprover-community/mathlib/pull/#3420))

I'm going to refactor in stages, trying to clean up some of the cruftier aspects of `data/polynomial/*`.

This PR:

1. removes the `has_coe_to_fun` on polynomial 

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-07-19T04:53:42+00:00](https://github.com/leanprover-community/mathlib/commit/eca55c9a248c741d819fb75ec2dcf37f23fc3f29)
feat(category_theory/equivalence): injectivity simp lemmas for equivalences ([#3437](https://github.com/leanprover-community/mathlib/pull/#3437))






Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-19T04:53:40+00:00](https://github.com/leanprover-community/mathlib/commit/eb68f4c241701e3d733c7999b60977cf2e6a6eaa)
feat (linear_algebra/matrix): make diag and trace compatible with semirings ([#3433](https://github.com/leanprover-community/mathlib/pull/#3433))

changes ring and related instances to semiring etc. in requirements for matrix.diag and matrix.trace



Co-authored-by: jalex-stark <alexmaplegm@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-07-19T04:53:38+00:00](https://github.com/leanprover-community/mathlib/commit/e6bfe18766f236b45b1314afcacf99eead428b23)
feat(topology/algebra/module): pi and proj for CLM ([#3430](https://github.com/leanprover-community/mathlib/pull/#3430))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-07-19T03:42:37+00:00](https://github.com/leanprover-community/mathlib/commit/f83cf57a485a8600f37d05339ecfbdcff31e857b)
feat(data/equiv/mul_add): minor lemmas ([#3447](https://github.com/leanprover-community/mathlib/pull/#3447))



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-07-19T03:42:35+00:00](https://github.com/leanprover-community/mathlib/commit/61bd966e6ae235ebb2710bbc9d7b6e5e0f84ec98)
feat(data/list/basic): add concat lemmas ([#3445](https://github.com/leanprover-community/mathlib/pull/#3445))

The first two are taken after the `head_eq_of_cons_eq` and `tail_eq_of_cons_eq` lemmas further up in the file.

The third, `reverse_concat`, is like `reverse_cons'` but with the `::` and `concat` swapped.

### [2020-07-19T03:15:24+00:00](https://github.com/leanprover-community/mathlib/commit/91ca9270eadae17ffd7b9d4c10f381f396ed9388)
feat(geometry/manifold/local_invariant_properties):  local structomorphism is `local_invariant_prop` ([#3434](https://github.com/leanprover-community/mathlib/pull/#3434))

For a groupoid `G`, define the property of being a local structomorphism; prove that if `G` is closed under restriction then this property satisfies `local_invariant_prop` (i.e., is local and `G`-invariant).

### [2020-07-18T16:49:37+00:00](https://github.com/leanprover-community/mathlib/commit/4760a33ade7444ff1e3cb82052d5685c57f48542)
feat(algebra/polynomial, data/polynomial): lemmas about monic polynomials ([#3402](https://github.com/leanprover-community/mathlib/pull/#3402))




Co-authored-by: Aaron Anderson <awainverse@gmail.com>

### [2020-07-18T16:19:16+00:00](https://github.com/leanprover-community/mathlib/commit/37cf166f290a316614c14899647bb926fbbcd26f)
feat(data/complex/exponential): added @[mono] tag to exp_le_exp and exp_lt_exp ([#3318](https://github.com/leanprover-community/mathlib/pull/#3318))

added @[mono] tag to exp_le_exp and exp_lt_exp.

### [2020-07-18T12:28:11+00:00](https://github.com/leanprover-community/mathlib/commit/e3e0aa0d9e616a6d144536c37c7d1dc1a3cde8ee)
chore(linear_algebra/direct_sum_module): add dosctrings ([#3418](https://github.com/leanprover-community/mathlib/pull/#3418))



Co-authored-by: Apurva-MacbookAir <apurvnakade@gmail.com>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-18T11:26:57+00:00](https://github.com/leanprover-community/mathlib/commit/21a16834fef622454d31c6f72bf50351a8e289e9)
feat(data/finsupp): sums over on_finset ([#3427](https://github.com/leanprover-community/mathlib/pull/#3427))

There aren't many lemmas about `finsupp.on_finset`.  Add one that's
useful for manipulating sums over `on_finset`.

### [2020-07-18T11:26:55+00:00](https://github.com/leanprover-community/mathlib/commit/4767b3033d1c07fcdaed7a0e4ca34f3cc36348b9)
feat(algebra/big_operators): more general prod_insert_one ([#3426](https://github.com/leanprover-community/mathlib/pull/#3426))

I found I had a use for a slightly more general version of
`prod_insert_one` / `sum_insert_zero`.  Add that version and use it in
the proof of `prod_insert_one`.




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-18T10:34:10+00:00](https://github.com/leanprover-community/mathlib/commit/f81568a3054d699a498a58363fa71dc4ce184803)
feat(group_theory/semidirect_product): mk_eq_inl_mul_inr and hom_ext ([#3408](https://github.com/leanprover-community/mathlib/pull/#3408))

### [2020-07-18T09:27:48+00:00](https://github.com/leanprover-community/mathlib/commit/907147ad79c65c6072b7d2107bfa7e143900423a)
feat(linear_algebra/matrix): define equivalences for reindexing matrices with equivalent types ([#3409](https://github.com/leanprover-community/mathlib/pull/#3409))

### [2020-07-18T06:56:08+00:00](https://github.com/leanprover-community/mathlib/commit/06823d6dd94d25bce25ae8793ae9012c508df898)
chore(*): add copyright header, cleanup imports ([#3440](https://github.com/leanprover-community/mathlib/pull/#3440))

Fixes

1. a missing copyright header
2. moves `tactic.obviously` into the imports of `tactic.basic`, so everyone has `tidy` and `obviously` available.
3. removes a few redundant imports



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-17T14:49:16+00:00](https://github.com/leanprover-community/mathlib/commit/9616f443f0ee658882e78a90cde21df0e64b5fe9)
feat(algebra/ordered_group): decidable_linear_order for multiplicative and additive ([#3429](https://github.com/leanprover-community/mathlib/pull/#3429))

### [2020-07-17T14:49:14+00:00](https://github.com/leanprover-community/mathlib/commit/3acf220fe116e07bb9e94e69a9c0d6c57c0244bf)
feat(group_theory/semidirect_product): inl_aut_inv ([#3410](https://github.com/leanprover-community/mathlib/pull/#3410))

### [2020-07-17T13:47:53+00:00](https://github.com/leanprover-community/mathlib/commit/899962557cc85d27e1d8818864caf2396cb5214c)
chore(*): more import reduction ([#3421](https://github.com/leanprover-community/mathlib/pull/#3421))

Another import reduction PR. (This is by hand, not just removing transitive imports.)

Mostly this one is from staring at `leanproject import-graph --to data.polynomial.basic` and wondering about weird edges in the graph.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-17T12:38:22+00:00](https://github.com/leanprover-community/mathlib/commit/207a1d4e7be227cfb10d0780ab38da61cbba4ed6)
feat(data/finset/basic): finset of empty type ([#3425](https://github.com/leanprover-community/mathlib/pull/#3425))

In a proof working by cases for whether a type is nonempty, I found I
had a use for the result that a `finset` of an empty type is empty.

### [2020-07-17T09:26:56+00:00](https://github.com/leanprover-community/mathlib/commit/4a6b7168e7fe47c7bb3991736de569f981ed93a8)
fix(tactic/nlinarith): stop nlinarith failing in the presence of squares when there is no order ([#3417](https://github.com/leanprover-community/mathlib/pull/#3417))

As reported by Heather Macbeth at https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/app_builder_exception.20in.20.60nlinarith.60/near/204138256



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-17T07:23:09+00:00](https://github.com/leanprover-community/mathlib/commit/7d31f772496b484294b74b3cfb3717ea4a519799)
refactor(measure_theory/*): big refactor ([#3373](https://github.com/leanprover-community/mathlib/pull/#3373))

Big refactor of integrals, fixes [#3084](https://github.com/leanprover-community/mathlib/pull/#3084) 

Make `integral (f : α → E) (μ : measure α)` the main definition, and use `notation` for other integrals
(over a set and/or w.r.t. the canonical measure `volume`).

### [2020-07-17T05:45:27+00:00](https://github.com/leanprover-community/mathlib/commit/819bd86be67f9fbe2b09eadf8ae7ea2cc249ccc6)
feat(tactic/squeeze_*): add `squeeze_dsimp` ([#3386](https://github.com/leanprover-community/mathlib/pull/#3386))

### [2020-07-17T03:52:34+00:00](https://github.com/leanprover-community/mathlib/commit/9d74f9b0267cf001388c2f2f122014496ad1650a)
chore(data/polynomial): reduce imports ([#3419](https://github.com/leanprover-community/mathlib/pull/#3419))

Now that @jalex-stark has split up `data.polynomial` into submodules, this PR minimises imports.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-17T00:03:26+00:00](https://github.com/leanprover-community/mathlib/commit/f1b687cdf7b6bb62e215d367754994e539dae0b2)
feat (order/order_iso): lemmas about order_isos on lattices ([#3397](https://github.com/leanprover-community/mathlib/pull/#3397))

shows that `order_embedding`s and `order_iso`s respect `lattice` operations



Co-authored-by: jalex-stark <alexmaplegm@gmail.com>
Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>

### [2020-07-16T19:13:26+00:00](https://github.com/leanprover-community/mathlib/commit/33d45bf0afd8e036dccd60da55d46e12096b5ec2)
chore(data/polynomial): break up behemoth file ([#3407](https://github.com/leanprover-community/mathlib/pull/#3407))

Polynomial refactor

The goal is to split `data/polynomial.lean` into several self-contained files in the same place. For the time being, the new place for all these files is `data/polynomial/`.
Future PRs may simplify proofs, remove duplicate lemmas, and move files out of the `data` directory.



Co-authored-by: Aaron Anderson <awainverse@gmail.com>

### [2020-07-16T18:00:07+00:00](https://github.com/leanprover-community/mathlib/commit/6fd4f8fa2951e1814d1fdf55e5712912abbdfeff)
feat(meta/expr): add tactic_format instance for declaration ([#3390](https://github.com/leanprover-community/mathlib/pull/#3390))

This allows you to `trace d` where `d : declaration`. Useful for debugging metaprograms.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-16T14:24:27+00:00](https://github.com/leanprover-community/mathlib/commit/25be04aebc4fa55ef2cb8010b5bff279859bb334)
feat(data/nat/digits): add lemmas about digits ([#3406](https://github.com/leanprover-community/mathlib/pull/#3406))

Added `lt_base_pow_length_digits`, `of_digits_lt_base_pow_length`, `of_digits_append` and `of_digits_digits_append_digits`

### [2020-07-16T12:55:24+00:00](https://github.com/leanprover-community/mathlib/commit/a8c10e1cbed075a57741aff399c5c5797697582d)
chore(topology/algebra/ordered): rename `lim*_eq_of_tendsto` to `tendsto.lim*_eq` ([#3415](https://github.com/leanprover-community/mathlib/pull/#3415))

Also add `tendsto_of_le_liminf_of_limsup_le`

### [2020-07-16T07:53:56+00:00](https://github.com/leanprover-community/mathlib/commit/1311eb2b33833397d962c5ad71af97716ca38c79)
feat(tactic/obviously): improve error reporting ([#3412](https://github.com/leanprover-community/mathlib/pull/#3412))

If `obviously` (used for auto_params) fails, it now prints a more useful message than "chain tactic made no progress"

If the goal presented to obviously contains `sorry`, it just uses `sorry` to discard it.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-16T06:45:37+00:00](https://github.com/leanprover-community/mathlib/commit/9ca3ce6e0634cf64af9dda31291905751d3e6c31)
chore(data/opposite): pp_nodot on op and unop ([#3413](https://github.com/leanprover-community/mathlib/pull/#3413))

Since it's not possible to write `X.op`, its extremely unhelpful for the pretty printer to output this.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-15T23:05:39+00:00](https://github.com/leanprover-community/mathlib/commit/c1a5ae94009707b86523648527d88acd81c788fe)
chore(order/directed): use implicit args in `iff`s ([#3411](https://github.com/leanprover-community/mathlib/pull/#3411))



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-07-15T16:50:18+00:00](https://github.com/leanprover-community/mathlib/commit/5fe67b779126bf3dc1ea6c1a5983cbd4c38f490b)
feat(measure_theory): preliminaries for Haar measure ([#3195](https://github.com/leanprover-community/mathlib/pull/#3195))

Move properties about lattice operations on encodable types to a new file. These are generalized from lemmas in the measure theory folder, for lattice operations and not just for `ennreal`. Also move them to the `encodable` namespace.
Rename `outer_measure.Union_aux` to `encodable.Union_decode2`.
Generalize some properties for outer measures to arbitrary complete lattices. This is useful for operations that behave like outer measures on a subset of `set α`.



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-07-15T13:56:45+00:00](https://github.com/leanprover-community/mathlib/commit/5f5d641767823914c699d7f87b3c384bca5a2c4e)
feat(algebra/ordered_group): instances for additive/multiplicative ([#3405](https://github.com/leanprover-community/mathlib/pull/#3405))

### [2020-07-15T11:42:20+00:00](https://github.com/leanprover-community/mathlib/commit/a41a307479d088db817f4eee5aa4c5eadc08ae02)
refactor(topology/algebra/infinite_sum): review ([#3371](https://github.com/leanprover-community/mathlib/pull/#3371))

## Rename

- `has_sum_unique` → `has_sum.unique`;
- `summable.summable_comp_of_injective` → `summable.comp_injective`;
- `has_sum_iff_tendsto_nat_of_summable` → `summable.has_sum_iff_tendsto_nat`;
- `tsum_eq_has_sum` → `has_sum.tsum_eq`;
- `support_comp` → `support_comp_subset`, delete `support_comp'`;

## Change arguments

- `tsum_eq_tsum_of_ne_zero_bij`, `has_sum_iff_has_sum_of_ne_zero_bij`: use functions from `support` instead of `Π x, f x ≠ 0 → β`;


## Add

- `indicator_compl_add_self_apply`, `indicator_compl_add_self`;
- `indicator_self_add_compl_apply`, `indicator_self_add_compl`;
- `support_subset_iff`, `support_subset_iff'`;
- `support_subset_comp`;
- `support_prod_mk`;
- `embedding.coe_subtype`;

### [2020-07-15T09:51:42+00:00](https://github.com/leanprover-community/mathlib/commit/503a40aa968696df41d13bbf6614a23ff76bc396)
feat(logic/basic) forall_imp ([#3391](https://github.com/leanprover-community/mathlib/pull/#3391))

Added a missing lemma, which is the one-way implication version of `forall_congr`.

### [2020-07-15T05:11:12+00:00](https://github.com/leanprover-community/mathlib/commit/51a75ffefa585c40b899f0cb9c2b08ae795d6682)
feat(category_theory/pullback): make the is_limit helper lemmas more ergonomic ([#3398](https://github.com/leanprover-community/mathlib/pull/#3398))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-15T00:57:03+00:00](https://github.com/leanprover-community/mathlib/commit/8495f76bc1b5716185b6a93185c54f5227fc986d)
feat(geometry/manifold/times_cont_mdiff): smooth functions between manifolds ([#3387](https://github.com/leanprover-community/mathlib/pull/#3387))

We define smooth functions between smooth manifolds, and prove their basic properties (including the facts that a composition of smooth functions is smooth, and that the tangent map of a smooth map is smooth).

To avoid reproving always the same stuff in manifolds, we build a general theory of local invariant properties in the model space (i.e., properties which are local, and invariant under the structure groupoids) and show that the lift of such properties to charted spaces automatically inherit all the good behavior of the original property. We apply this general machinery to prove most basic properties of smooth functions between manifolds.

### [2020-07-14T16:40:34+00:00](https://github.com/leanprover-community/mathlib/commit/708e481375565d90123d46a2305a7eae531165c2)
chore(data/set/basic): simp attribute on set.image_subset_iff ([#3394](https://github.com/leanprover-community/mathlib/pull/#3394))

see discussion here with @sgouezel :
https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.233387.3A.20smooth.20functions.20on.20manifolds/near/203751071

### [2020-07-14T15:06:30+00:00](https://github.com/leanprover-community/mathlib/commit/6c1ae3b173c83c425f96c2b211a9b69868e19d55)
chore(category_theory/natural_isomorphism): move lemmas to correct namespace, add simp lemma ([#3401](https://github.com/leanprover-community/mathlib/pull/#3401))





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-14T15:06:28+00:00](https://github.com/leanprover-community/mathlib/commit/f7825bf5af519cb86b47a16944a2ac24a5c6ffe4)
feat(algebra/polynomial): big_operators lemmas for polynomials ([#3378](https://github.com/leanprover-community/mathlib/pull/#3378))

This starts a new folder algebra/polynomial. As we refactor data/polynomial.lean, much of that content should land in this folder. 



Co-authored-by: Aaron Anderson <awainverse@gmail.com>

### [2020-07-14T14:42:05+00:00](https://github.com/leanprover-community/mathlib/commit/bcf61df216f49ea26f18af7f186e026dc76b6f37)
feat(data/qpf): uniformity iff preservation of supp ([#3388](https://github.com/leanprover-community/mathlib/pull/#3388))

### [2020-07-14T14:05:54+00:00](https://github.com/leanprover-community/mathlib/commit/02f2f9473b74891e969a900e36a2e08b5ab0ebd8)
refactor(category_theory/finite_limits): missing piece of [#3320](https://github.com/leanprover-community/mathlib/pull/#3320) ([#3400](https://github.com/leanprover-community/mathlib/pull/#3400))

A recent PR [#3320](https://github.com/leanprover-community/mathlib/pull/#3320) did some refactoring of special shapes of limits. It seems I forgot to include `wide_pullbacks` in that refactor, so I've done that here.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-14T11:42:20+00:00](https://github.com/leanprover-community/mathlib/commit/a0846da1e53590a4a15dad9771e74f985096f858)
chore(category_theory/limits/over): split a slow file ([#3399](https://github.com/leanprover-community/mathlib/pull/#3399))

This was previously the last file to finish compiling when compiling `category_theory/`. This PR splits it into some smaller pieces which can compile in parallel (and some pieces now come earlier in the import hierarchy).

No change to content.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-14T11:42:18+00:00](https://github.com/leanprover-community/mathlib/commit/0fff477d94c3365b7a8ac935044491cb7fddd3db)
feat(analysis/normed_space): complex Hahn-Banach theorem ([#3286](https://github.com/leanprover-community/mathlib/pull/#3286))

This proves the complex Hahn-Banach theorem by reducing it to the real version.

The corollaries from [#3021](https://github.com/leanprover-community/mathlib/pull/#3021) should be generalized as well at some point.

### [2020-07-14T11:05:58+00:00](https://github.com/leanprover-community/mathlib/commit/5f01b54479ffed6016c45f6b4fa0910be9459a6a)
feat(category_theory/kernels): kernel_iso_of_eq ([#3372](https://github.com/leanprover-community/mathlib/pull/#3372))

This provides two useful isomorphisms when working with abstract (co)kernels:

```
def kernel_zero_iso_source [has_kernel (0 : X ⟶ Y)] : kernel (0 : X ⟶ Y) ≅ X :=

def kernel_iso_of_eq {f g : X ⟶ Y} [has_kernel f] [has_kernel g] (h : f = g) : kernel f ≅ kernel g :=
```
and some associated simp lemmas.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-14T09:01:17+00:00](https://github.com/leanprover-community/mathlib/commit/58dde5b8fe3778d11b8e4d936a7b98fb790ea085)
chore(*): generalize tensor product to semirings ([#3389](https://github.com/leanprover-community/mathlib/pull/#3389))

### [2020-07-14T01:25:26+00:00](https://github.com/leanprover-community/mathlib/commit/0410946159f38b48600ed3f912eb283675ae7cbe)
chore(linear_algebra/nonsingular_inverse): swap update_row/column names ([#3393](https://github.com/leanprover-community/mathlib/pull/#3393))

The names for `update_row` and `update_column` did not correspond to their definitions. Doing a global swap of the names keep all the proofs valid and makes the semantics match.

### [2020-07-13T20:57:57+00:00](https://github.com/leanprover-community/mathlib/commit/32c75d014a0855e8a0038a86a99ab2e798cb55f8)
feat(linear_algebra/affine_space): more lemmas on directions of affine subspaces ([#3377](https://github.com/leanprover-community/mathlib/pull/#3377))

Add more lemmas on directions of affine subspaces, motivated by uses
for Euclidean geometry.

### [2020-07-13T20:02:35+00:00](https://github.com/leanprover-community/mathlib/commit/11322372ab537337a16c40581d9d7292503deaed)
feat(ring_theory/ideal_over): lemmas for nonzero ideals lying over nonzero ideals ([#3385](https://github.com/leanprover-community/mathlib/pull/#3385))

Let `f` be a ring homomorphism from `R` to `S` and `I` be an ideal in `S`. To show that `I.comap f` is not the zero ideal, we can show `I` contains a non-zero root of some non-zero polynomial `p : polynomial R`. As a corollary, if `S` is algebraic over `R` (e.g. the integral closure of `R`), nonzero ideals in `S` lie over nonzero ideals in `R`.

I created a new file because `integral_closure.comap_ne_bot` depends on `comap_ne_bot_of_algebraic_mem`, but `ring_theory/algebraic.lean` imports `ring_theory/integral_closure.lean` and I didn't see any obvious join in the dependency graph where they both belonged.



Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-07-13T19:35:16+00:00](https://github.com/leanprover-community/mathlib/commit/45477c8f940491285b54745fd5a7c1c7ad2d27f9)
feat(analysis/normed_space/real_inner_product): orthogonal subspaces ([#3369](https://github.com/leanprover-community/mathlib/pull/#3369))

Define the subspace of vectors orthogonal to a given subspace and
prove some basic properties of it, building on the existing results
about minimizers.  This is in preparation for doing similar things in
Euclidean geometry (working with the affine subspace through a given
point and orthogonal to a given affine subspace, for example).

### [2020-07-13T19:01:01+00:00](https://github.com/leanprover-community/mathlib/commit/2ae7ad811f7bacb636698705064c82551faddbf8)
feat(functor): definition multivariate functors ([#3360](https://github.com/leanprover-community/mathlib/pull/#3360))

One part of [#3317](https://github.com/leanprover-community/mathlib/pull/#3317)

### [2020-07-13T12:37:11+00:00](https://github.com/leanprover-community/mathlib/commit/f0348994b353e453427d805be4b5e82ebfa0fd4e)
feat(data/equiv/mul_add): conj as a mul_aut ([#3367](https://github.com/leanprover-community/mathlib/pull/#3367))

### [2020-07-13T09:46:22+00:00](https://github.com/leanprover-community/mathlib/commit/e26b459d02c1cd554a1b3fff227327e2118be9df)
feat(data/polynomial): some lemmas about eval2 and algebra_map ([#3382](https://github.com/leanprover-community/mathlib/pull/#3382))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-13T08:17:18+00:00](https://github.com/leanprover-community/mathlib/commit/792faaed7ac829785d809a6aca205fab528a1f84)
chore(data/polynomial): missing a simp attribute ([#3381](https://github.com/leanprover-community/mathlib/pull/#3381))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-13T08:17:16+00:00](https://github.com/leanprover-community/mathlib/commit/afa534cdfa220967e744b2c39c1006e8aaae423e)
chore(tactic/show_term): use Try this: ([#3374](https://github.com/leanprover-community/mathlib/pull/#3374))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-12T23:29:02+00:00](https://github.com/leanprover-community/mathlib/commit/eb851ae25c7d418999b72bb6082cd1899ba35f8f)
chore(data/nat/prime): @[pp_nodot] nat.prime ([#3379](https://github.com/leanprover-community/mathlib/pull/#3379))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-12T10:32:15+00:00](https://github.com/leanprover-community/mathlib/commit/a8d6bdf62c83b091dfcf16a844b13f85c247df36)
feat(algebra/category/AddCommGroup): has_image_maps ([#3366](https://github.com/leanprover-community/mathlib/pull/#3366))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-12T09:02:34+00:00](https://github.com/leanprover-community/mathlib/commit/fa6c45a8de1c686367318a98802020074cbfd219)
feat(data/polynomial): simp lemmas for bit0 / bit1 ([#3376](https://github.com/leanprover-community/mathlib/pull/#3376))

Add lemmas on polynomials and bit0/bit1 (as suggested [here](https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Eval.20of.20constant.20polynomial))

Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2020-07-12T07:43:26+00:00](https://github.com/leanprover-community/mathlib/commit/4e603f4b9252607f744f1ffacde8327dacb4a87d)
feat(geometry/manifold/charted_space):  typeclass `closed_under_restriction` for structure groupoids ([#3347](https://github.com/leanprover-community/mathlib/pull/#3347))

* Define a typeclass `closed_under_restriction` for structure groupoids.
* Prove that it is equivalent to requiring that the structure groupoid contain all local homeomorphisms equivalent to the restriction of the identity to an open subset.
* Verify that `continuous_groupoid` and `times_cont_diff_groupoid` satisfy `closed_under_restriction`.  
* Show that a charted space defined by a single chart is `has_groupoid` for any structure groupoid satisfying `closed_under_restriction`.

[Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Restriction.20in.20structure.20groupoid)

### [2020-07-12T05:07:52+00:00](https://github.com/leanprover-community/mathlib/commit/0e1c2bc440f4915995f0b84e9945679f021299a9)
feat(algebra/add_torsor): more cancellation lemmas ([#3368](https://github.com/leanprover-community/mathlib/pull/#3368))

Add more cancellation lemmas for `vsub`, similar to lemmas already
present for `vadd`.

### [2020-07-12T03:42:43+00:00](https://github.com/leanprover-community/mathlib/commit/b0473968f24ad973186eb93470bbbd350f56537e)
feat(data/set/finite): add a version of `prod_preimage` for `inj_on` ([#3342](https://github.com/leanprover-community/mathlib/pull/#3342))

* rename `finset.prod_preimage` to `finset.prod_preimage_of_bij`;
* new `prod_preimage` assumes `∀ x ∈ s, x ∉ range f, g x = 1`;
* rename `finset.image_preimage` to `finset.image_preimage_of_bij`;
* new `finset.image_preimage` says
  `image f (preimage s hf) = s.filter (λ x, x ∈ set.range f)`;
* change the order of implicit arguments in the definition of `set.inj_on`;
* add `prod_filter_of_ne`;
* use `coe` instead of `subtype.val` in `prod_attach`;
* add `finset.image_subset_iff`, `finset.image_subset_iff_subset_preimage`,
  `finset.map_subset_iff_subset_preimage`.

### [2020-07-12T00:42:49+00:00](https://github.com/leanprover-community/mathlib/commit/298caa08bb313b3511cd1ba00222839b0b3af598)
chore(scripts): update nolints.txt ([#3370](https://github.com/leanprover-community/mathlib/pull/#3370))

I am happy to remove some nolints for you!

### [2020-07-11T10:11:11+00:00](https://github.com/leanprover-community/mathlib/commit/d7ac180f24b9c672c028d5bc2094059b4ba72178)
feat(data/fintype/basic): set.to_finset_empty ([#3361](https://github.com/leanprover-community/mathlib/pull/#3361))

Add set.to_finset_empty, analogously to set.to_finset_univ.

### [2020-07-11T10:11:09+00:00](https://github.com/leanprover-community/mathlib/commit/34d3fe1d06d3cc1405c9023371dca6ec95f419cc)
chore(category_theory/comma): split into three files ([#3358](https://github.com/leanprover-community/mathlib/pull/#3358))

Just reorganisation.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-11T08:43:40+00:00](https://github.com/leanprover-community/mathlib/commit/f742a3d64e48b911f7baa1f138fc8f498c16b516)
refactor(tactic/push_neg): simp ¬ (p ∧ q) better ([#3362](https://github.com/leanprover-community/mathlib/pull/#3362))

This simplifies `¬ (p ∧ q)` to `(p → ¬ q)` instead of `¬ p ∨ ¬ q`. This has better behavior when going between `\forall x, P -> Q` and `\exists x, P /\ Q'` where `Q` and `Q'` are opposite.

### [2020-07-11T08:43:39+00:00](https://github.com/leanprover-community/mathlib/commit/36a25d9f49dac0b9297a1ff23a1a157877dc8215)
feat(algebra/category/*): get rid of the local reducible hack ([#3354](https://github.com/leanprover-community/mathlib/pull/#3354))

I thought I did this back in April, but apparently never made the PR.

We currently use a strange hack when setting up concrete categories, making them locally reducible. There's a library note about this, which ends:

```
TODO: Probably @[derive] should be able to create instances of the	
required form (without `id`), and then we could use that instead of	
this obscure `local attribute [reducible]` method.
```

This PR makes the small change required to `delta_instance` to make this happen, and then stops using the hack in setting up concrete categories (and deletes the library note explaining this hack).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2020-07-11T07:58:56+00:00](https://github.com/leanprover-community/mathlib/commit/75b9cfa342e805128647fd57e707afddb2fca30a)
feat(category/has_shift): missing simp lemmas ([#3365](https://github.com/leanprover-community/mathlib/pull/#3365))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-11T07:58:54+00:00](https://github.com/leanprover-community/mathlib/commit/f669a780ad3111041a647a0fe0d5edaa903e8363)
chore(category_theory/functor): explain how to type 𝟭 ([#3364](https://github.com/leanprover-community/mathlib/pull/#3364))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-11T06:47:13+00:00](https://github.com/leanprover-community/mathlib/commit/574dac55585ef42eef055807b937e05358a3f5e8)
feat(tactic/interval_cases): add `with h` option ([#3353](https://github.com/leanprover-community/mathlib/pull/#3353))

closes [#2881](https://github.com/leanprover-community/mathlib/pull/#2881)

### [2020-07-11T00:41:45+00:00](https://github.com/leanprover-community/mathlib/commit/5ddbdc18ddeaab0e03b9e6f575dfdb0d952056a1)
chore(scripts): update nolints.txt ([#3363](https://github.com/leanprover-community/mathlib/pull/#3363))

I am happy to remove some nolints for you!

### [2020-07-10T19:01:46+00:00](https://github.com/leanprover-community/mathlib/commit/1aff3affdb9cade2a8bd1fc8ed0bcef3b99ec3e8)
feat(interactive_expr): bigger accomplishment ([#3359](https://github.com/leanprover-community/mathlib/pull/#3359))

Lean is difficult, we need more incentives.

### [2020-07-10T17:35:22+00:00](https://github.com/leanprover-community/mathlib/commit/960fc8e37e939f62eefde4fd7971020b0bcb4825)
feat(data/univariate/qpf): compositional data type framework for (co)inductive types ([#3325](https://github.com/leanprover-community/mathlib/pull/#3325))

Define univariate QPFs (quotients of polynomial functors).  This is the first part of [#3317](https://github.com/leanprover-community/mathlib/pull/#3317).

### [2020-07-10T12:28:46+00:00](https://github.com/leanprover-community/mathlib/commit/d1e63f39860f5e348c6abe256f320f7254b51f57)
chore(category_theory/limits): remove an unnecessary import ([#3357](https://github.com/leanprover-community/mathlib/pull/#3357))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-10T12:28:40+00:00](https://github.com/leanprover-community/mathlib/commit/699c9153ad18a9952e8cbb2c0723c0d2675faf67)
feat(number_theory): pythagorean triples ([#3200](https://github.com/leanprover-community/mathlib/pull/#3200))

The classification of pythagorean triples (one of the "100 theorems")



Co-authored-by: paulvanwamelen <30371019+paulvanwamelen@users.noreply.github.com>

### [2020-07-10T11:15:29+00:00](https://github.com/leanprover-community/mathlib/commit/e52108d763e982eabfd8f587a667668a5a0b9918)
chore(data/int/basic): move content requiring advanced imports ([#3334](https://github.com/leanprover-community/mathlib/pull/#3334))

`data.int.basic` had grown to require substantial imports from `algebra.*`. This PR moves out the end of this file into separate files. As a consequence it's then possible to separate out `data.multiset.basic` into some further pieces.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2020-07-10T10:35:29+00:00](https://github.com/leanprover-community/mathlib/commit/a348944f9d72bf20c24cc9f774e92dccc283fb54)
chore(topology): rename compact to is_compact ([#3356](https://github.com/leanprover-community/mathlib/pull/#3356))

### [2020-07-10T07:09:28+00:00](https://github.com/leanprover-community/mathlib/commit/79bb8b775110eeae94c907fdd4c4274510cc911a)
feat(linear_algebra/cayley_hamilton): the Cayley-Hamilton theorem ([#3276](https://github.com/leanprover-community/mathlib/pull/#3276))

The Cayley-Hamilton theorem, following the proof at http://drorbn.net/AcademicPensieve/2015-12/CayleyHamilton.pdf.





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-07-10T06:31:16+00:00](https://github.com/leanprover-community/mathlib/commit/66db1ad233e5b579c304a70f88b330c0098b1bc4)
refactor(algebra/homology): handle co/homology uniformly ([#3316](https://github.com/leanprover-community/mathlib/pull/#3316))

A refactor of `algebra/homology` so homology and cohomology are handled uniformly, and factor out a file `image_to_kernel_map.lean` which gains some extra lemmas (which will be useful for talking about exact sequences).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-07-10T05:40:16+00:00](https://github.com/leanprover-community/mathlib/commit/bcf733fadc3fc02551b88fb30fc2555328e630af)
feat(data/matrix): add matrix.map and supporting lemmas ([#3352](https://github.com/leanprover-community/mathlib/pull/#3352))

As [requested](https://github.com/leanprover-community/mathlib/pull/3276/files#r452366674).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-10T04:14:30+00:00](https://github.com/leanprover-community/mathlib/commit/8b630df3e9ed1c6577085d9ccaa018f77f853509)
feat(ring_theory/matrix_algebra): drop commutativity assumption ([#3351](https://github.com/leanprover-community/mathlib/pull/#3351))

Remove the unnecessary assumption that `A` is commutative in `matrix n n A ≃ₐ[R] (A ⊗[R] matrix n n R)`.

(This didn't cause a problem for Cayley-Hamilton, but @alexjbest and Bassem Safieldeen [realised it's not necessary](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Tensor.20product.20of.20matrices).)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-10T04:14:28+00:00](https://github.com/leanprover-community/mathlib/commit/c949dd451cc59ddd88c85775bf12a58e85bf677f)
chore(logic/embedding): reuse proofs from `data.*` ([#3341](https://github.com/leanprover-community/mathlib/pull/#3341))

Other changes:

* rename `injective.prod` to `injective.prod_map`;
* add `surjective.prod_map`;
* redefine `sigma.map` without pattern matching;
* rename `sigma_map_injective` to `injective.sigma_map`;
* add `surjective.sigma_map`;
* add `injective.sum_map` and `surjective.sum_map`;
* rename `embedding.prod_congr` to `embedding.prod_map`;
* rename `embedding.sum_congr` to `embedding.sum_map`;
* delete `embedding.sigma_congr_right`, add more
  general `embedding.sigma_map`.

### [2020-07-10T02:38:09+00:00](https://github.com/leanprover-community/mathlib/commit/92d508a740d46e79f509b0d0e4cdfce85379e593)
chore(*): import tactic.basic as early as possible, and reduce imports ([#3333](https://github.com/leanprover-community/mathlib/pull/#3333))

As discussed on [zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import.20refactor.20and.20library_search), [#3235](https://github.com/leanprover-community/mathlib/pull/#3235) had the unfortunate effect of making `library_search` and `#where` and various other things unavailable in many places in mathlib.

This PR makes an effort to import `tactic.basic` as early as possible, while otherwise reducing unnecessary imports. 

1. import `tactic.basic` "as early as possible" (i.e. in any file that `tactic.basic` doesn't depend on, and which imports any tactic strictly between `tactic.core` and `tactic.basic`, just `import tactic.basic` itself
2. add `tactic.finish`, `tactic.tauto` and `tactic.norm_cast` to tactic.basic (doesn't requires adding any dependencies)
3. delete various unnecessary imports




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-10T00:38:39+00:00](https://github.com/leanprover-community/mathlib/commit/997025dc674e6c527ad43cdfb9fc390cfd031252)
chore(scripts): update nolints.txt ([#3350](https://github.com/leanprover-community/mathlib/pull/#3350))

I am happy to remove some nolints for you!

### [2020-07-09T22:44:21+00:00](https://github.com/leanprover-community/mathlib/commit/270e3c9461ae92338a931dac7c421341e98100f2)
chore(data/fintype/basic): add `finset.order_top` and `finset.bounded_distrib_lattice` ([#3345](https://github.com/leanprover-community/mathlib/pull/#3345))

### [2020-07-09T22:44:20+00:00](https://github.com/leanprover-community/mathlib/commit/f5fa6149eeab0b2a5ccb21aabd8a9fbafa94911f)
chore(*): some monotonicity lemmas ([#3344](https://github.com/leanprover-community/mathlib/pull/#3344))

### [2020-07-09T21:17:53+00:00](https://github.com/leanprover-community/mathlib/commit/d6e9f97b7562a5284f0fdb1831b2f48ab2c897d6)
feat(topology/basic): yet another mem_closure ([#3348](https://github.com/leanprover-community/mathlib/pull/#3348))

### [2020-07-09T21:17:51+00:00](https://github.com/leanprover-community/mathlib/commit/ac62213ba10ee69caa49dd583d06d1a7a479c712)
chore(order/filter/at_top_bot): in `order_top` `at_top = pure ⊤` ([#3346](https://github.com/leanprover-community/mathlib/pull/#3346))

### [2020-07-09T21:17:48+00:00](https://github.com/leanprover-community/mathlib/commit/4a63f3f2de5e3e2c7ced0a8de09b1c24af8ccc58)
feat(data/indicator_function): add `indicator_range_comp` ([#3343](https://github.com/leanprover-community/mathlib/pull/#3343))

Add
* `comp_eq_of_eq_on_range`;
* `piecewise_eq_on`;
* `piecewise_eq_on_compl`;
* `piecewise_compl`;
* `piecewise_range_comp`;
* `indicator_range_comp`.

### [2020-07-09T16:34:14+00:00](https://github.com/leanprover-community/mathlib/commit/d6ecb445ce8ca6da8db3ae25333f00ae5cec78eb)
feat(topology/basic): closure in term of subtypes ([#3339](https://github.com/leanprover-community/mathlib/pull/#3339))

### [2020-07-09T15:24:02+00:00](https://github.com/leanprover-community/mathlib/commit/593a4c830db8f09be67802b7caa7c67cd82bc8bc)
fix(tactic/norm_cast): remove bad norm_cast lemma ([#3340](https://github.com/leanprover-community/mathlib/pull/#3340))

This was identified as a move_cast lemma, which meant it was rewriting to the LHS which it couldn't reduce. It's better to let the conditional rewriting handle nat subtraction -- if the right inequality is in the context there's no need to go to `int.sub_nat_nat`.

Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-09T14:50:06+00:00](https://github.com/leanprover-community/mathlib/commit/33ca9f1675a7d077da62d42e1a24a362131ac895)
doc(category_theory/terminal): add doc-strings ([#3338](https://github.com/leanprover-community/mathlib/pull/#3338))

Just adding some doc-strings.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-09T13:55:03+00:00](https://github.com/leanprover-community/mathlib/commit/9d47b28b0a4e9f99e03ae98724446328f092f0ea)
feat(data): Mark all `sqrt`s as `@[pp_nodot]` ([#3337](https://github.com/leanprover-community/mathlib/pull/#3337))

### [2020-07-09T05:00:10-07:00](https://github.com/leanprover-community/mathlib/commit/e4ecf146efe15a9840a8b8e5dcb1ef8525640eb1)
I'm just another maintainer

### [2020-07-09T10:43:05+00:00](https://github.com/leanprover-community/mathlib/commit/be2e42fbd7410c0a06dfc289319a8fd8a065be81)
chore(ring_theory/algebraic): speedup slow proof ([#3336](https://github.com/leanprover-community/mathlib/pull/#3336))



Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2020-07-09T06:11:02+00:00](https://github.com/leanprover-community/mathlib/commit/c06f500f276409ed6888e61bb2ee177832c8ebc4)
feat(logic/basic): add eq_iff_true_of_subsingleton ([#3308](https://github.com/leanprover-community/mathlib/pull/#3308))

I'm surprised we didn't have this already.
```lean
example (x y : unit) : x = y := by simp
```


Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-07-09T03:35:05+00:00](https://github.com/leanprover-community/mathlib/commit/95cc1b11685e6897def6040d4e88697fa541add9)
refactor(topology/dense_embedding): simplify proof ([#3329](https://github.com/leanprover-community/mathlib/pull/#3329))

Using filter bases, we can give a cleaner proof of continuity of extension by continuity. Also switch to use the "new" `continuous_at` in the statement.

### [2020-07-09T03:35:03+00:00](https://github.com/leanprover-community/mathlib/commit/d5cfa877c62228bfee5e46e19c3cc18981feb472)
fix(tactic/lint/type_classes): add missing unfreeze_local_instances ([#3328](https://github.com/leanprover-community/mathlib/pull/#3328))

### [2020-07-09T03:06:58+00:00](https://github.com/leanprover-community/mathlib/commit/b535b0a5e82e1dd70bee5cec68509833d135ec81)
fix(tactic/default): add transport, equiv_rw ([#3330](https://github.com/leanprover-community/mathlib/pull/#3330))

Also added a tactic doc entry for `transport`.

### [2020-07-09T00:41:30+00:00](https://github.com/leanprover-community/mathlib/commit/65dcf4d326ebe108b3d48edeca8262b780ac752e)
chore(scripts): update nolints.txt ([#3331](https://github.com/leanprover-community/mathlib/pull/#3331))

I am happy to remove some nolints for you!

### [2020-07-08T20:57:45+00:00](https://github.com/leanprover-community/mathlib/commit/782013dbb908032b865848510a7ee1ea0b7bad01)
fix(tactic/monotonicity): support monotone in mono ([#3310](https://github.com/leanprover-community/mathlib/pull/#3310))

This PR allow the `mono` tactic to use lemmas stated using `monotone`.

Mostly authored by Simon Hudon

Co-authored-by: Simon Hudon <simon.hudon@gmail.com>



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-08T17:40:17+00:00](https://github.com/leanprover-community/mathlib/commit/19225c35676b6aaa79a79df67126ae8652e871d0)
chore(*): update to 3.17.1 ([#3327](https://github.com/leanprover-community/mathlib/pull/#3327))

### [2020-07-08T14:31:06+00:00](https://github.com/leanprover-community/mathlib/commit/27f622eff9ab56d2fe7f8f619dc5f6b4caf1c31e)
chore(data/fintype/basic): split, and reduce imports ([#3319](https://github.com/leanprover-community/mathlib/pull/#3319))

Following on from [#3256](https://github.com/leanprover-community/mathlib/pull/#3256) and [#3235](https://github.com/leanprover-community/mathlib/pull/#3235), this slices a little out of `data.fintype.basic`, and reduces imports, mostly in the vicinity of `data.fintype.basic`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-08T14:31:04+00:00](https://github.com/leanprover-community/mathlib/commit/f90fcc9e71da7f2416ecf480bfb0410c5c58bccb)
chore(*): use is_algebra_tower instead of algebra.comap and generalize some constructions to semirings ([#3299](https://github.com/leanprover-community/mathlib/pull/#3299))

`algebra.comap` is now reserved to the **creation** of new algebra instances. For assumptions of theorems / constructions, `is_algebra_tower` is the new way to do it. For example:
```lean
variables [algebra K L] [algebra L A]
lemma is_algebraic_trans (L_alg : is_algebraic K L) (A_alg : is_algebraic L A) :
  is_algebraic K (comap K L A) :=
```
is now written as:
```lean
variables [algebra K L] [algebra L A] [algebra K A] [is_algebra_tower K L A]
lemma is_algebraic_trans (L_alg : is_algebraic K L) (A_alg : is_algebraic L A) :
  is_algebraic K A :=
```

### [2020-07-08T14:31:02+00:00](https://github.com/leanprover-community/mathlib/commit/ba8af8cb3c8c6e0fc801b09aa24d1e0bb98fc8d7)
feat(ring_theory/polynomial_algebra): polynomial A ≃ₐ[R] (A ⊗[R] polynomial R) ([#3275](https://github.com/leanprover-community/mathlib/pull/#3275))

This is a formal nonsense preliminary to the Cayley-Hamilton theorem, which comes in the next PR.

We produce the algebra isomorphism `polynomial A ≃ₐ[R] (A ⊗[R] polynomial R)`, and as a consequence also the algebra isomorphism
```
matrix n n (polynomial R) ≃ₐ[R] polynomial (matrix n n R)
```
which is characterized by
```
coeff (matrix_polynomial_equiv_polynomial_matrix m) k i j = coeff (m i j) k
```

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Jalex Stark <alexmaplegm@gmail.com>
Co-authored-by: Aaron Anderson <awainverse@gmail.com>




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-08T13:22:00+00:00](https://github.com/leanprover-community/mathlib/commit/8f6090ca9c123396a819a0b6dea8ff88c1a3285e)
feat(algebra/ordered_field): missing lemma ([#3324](https://github.com/leanprover-community/mathlib/pull/#3324))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-07-08T11:56:25+00:00](https://github.com/leanprover-community/mathlib/commit/97853b96974ec0702dfe317bac4f12cde2822810)
doc(tactic/lean_core_docs): remove "hypothesis management" tag ([#3323](https://github.com/leanprover-community/mathlib/pull/#3323))

### [2020-07-08T10:26:52+00:00](https://github.com/leanprover-community/mathlib/commit/a3e21a881548f31812c0b32c9de7c062f7c3e59a)
feat(category_theory/zero): lemmas about zero objects and zero morphisms, and improve docs ([#3315](https://github.com/leanprover-community/mathlib/pull/#3315))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-07-08T10:26:50+00:00](https://github.com/leanprover-community/mathlib/commit/fbb49cbeb6d9cfea6c4dba519a10146fee44b0b9)
refactor(*): place map_map in the functor namespace ([#3309](https://github.com/leanprover-community/mathlib/pull/#3309))

Renames `_root_.map_map` to `functor.map_map` and `filter.comap_comap_comp` to `filter.comap_comap` (which is consistent with `filter.map_map`).

### [2020-07-08T09:01:29+00:00](https://github.com/leanprover-community/mathlib/commit/afae2c4bcc33e2ff7407256ef3d1a822a71c5ba0)
doc(tactic/localized): unnecessary escape characters ([#3322](https://github.com/leanprover-community/mathlib/pull/#3322))

This is probably left over from when it was a string literal instead of a doc string.

### [2020-07-08T08:25:47+00:00](https://github.com/leanprover-community/mathlib/commit/18246ac427c62348e7ff854965998cd9878c7692)
refactor(category_theory/finite_limits): reorganise import hierarchy ([#3320](https://github.com/leanprover-community/mathlib/pull/#3320))

Previously, all of the "special shapes" that happened to be finite imported `category_theory.limits.shapes.finite_limits`. Now it's the other way round, which I think ends up being cleaner.

This also results in some significant reductions to the dependency graph (e.g. talking about homology of complexes no longer requires compiling `data.fintype.basic` and all its antecedents).

No actual content, just moving content around.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-08T07:12:45+00:00](https://github.com/leanprover-community/mathlib/commit/13eea4c32c93579ea2a0163b2bc05576ebb6f4aa)
chore(category_theory/images): cleanup ([#3314](https://github.com/leanprover-community/mathlib/pull/#3314))

Just some cleanup, and adding two easy lemmas.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-08T07:12:43+00:00](https://github.com/leanprover-community/mathlib/commit/eb271b264d82b6ea03938071e76e08797b4efea5)
feat(data/int/basic): some lemmas ([#3313](https://github.com/leanprover-community/mathlib/pull/#3313))

A few small lemmas about `to_nat` that I wanted while playing with exact sequences.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-08T05:45:29+00:00](https://github.com/leanprover-community/mathlib/commit/ff1aea541fcfba14d19026e0ee7e5dd3082a4d42)
feat(data/equiv): α × α ≃ α for [subsingleton α] ([#3312](https://github.com/leanprover-community/mathlib/pull/#3312))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-08T00:37:50+00:00](https://github.com/leanprover-community/mathlib/commit/e987f625d67abc18fee27d5a0a69a28f97e220fd)
chore(scripts): update nolints.txt ([#3311](https://github.com/leanprover-community/mathlib/pull/#3311))

I am happy to remove some nolints for you!

### [2020-07-07T19:51:20+00:00](https://github.com/leanprover-community/mathlib/commit/23f449bddf5a61043798a939335dbf9ab2056ca1)
feat(topology/metric_space/basic): add closed_ball_mem_nhds ([#3305](https://github.com/leanprover-community/mathlib/pull/#3305))

I found this lemma handy when converting between the epsilon-N definition of convergence and the filter definition

### [2020-07-07T17:45:54+00:00](https://github.com/leanprover-community/mathlib/commit/35940dda4a51fc5ccdfb34cae31e4b77e0433dfb)
feat(linear_algebra/finite_dimensional): add dim_sup_add_dim_inf_eq ([#3304](https://github.com/leanprover-community/mathlib/pull/#3304))

Adding a finite-dimensional version of dim(W+X)+dim(W \cap X)=dim(W)+dim(X)

### [2020-07-07T16:39:23+00:00](https://github.com/leanprover-community/mathlib/commit/ea10944c4d856a08d4077965d771ce5399aacc0d)
feat(data/list/defs): list.singleton_append and list.bind_singleton ([#3298](https://github.com/leanprover-community/mathlib/pull/#3298))

I found these useful when working with palindromes and Fibonacci words respectively.

While `bind_singleton` is available as a monad law, I find the specialized version more convenient.

### [2020-07-07T15:15:11+00:00](https://github.com/leanprover-community/mathlib/commit/11ba68730ac1139d0987b8450499c6261fde1f28)
chore(algebra/big_operators): use proper `*_with_zero` class in `prod_eq_zero(_iff)` ([#3303](https://github.com/leanprover-community/mathlib/pull/#3303))

Also add a missing instance `comm_semiring → comm_monoid_with_zero`.

### [2020-07-07T09:59:21+00:00](https://github.com/leanprover-community/mathlib/commit/12c2acb8471493889c9a72347fc05fbb7b6e78f6)
feat(algebra/continued_fractions): add first set of approximation lemmas ([#3218](https://github.com/leanprover-community/mathlib/pull/#3218))



Co-authored-by: Kevin Kappelmann <kappelmann@users.noreply.github.com>

### [2020-07-07T09:25:12+00:00](https://github.com/leanprover-community/mathlib/commit/08ffbbb9c4cf392a998ab7c0d5f865c31d134c0c)
feat(analysis/normed_space/operator_norm): normed algebra of continuous linear maps ([#3282](https://github.com/leanprover-community/mathlib/pull/#3282))

Given a normed space `E`, its continuous linear endomorphisms form a normed ring, and a normed algebra if `E` is nonzero.  Moreover, the units of this ring are precisely the continuous linear equivalences.

### [2020-07-07T04:39:03+00:00](https://github.com/leanprover-community/mathlib/commit/095445ee23e32a7d384ddc8e5cf67ee8f05c9ab0)
refactor(order/*): make `data.set.basic` import `order.bounded_lattice` ([#3285](https://github.com/leanprover-community/mathlib/pull/#3285))

I have two goals:

* make it possible to refactor `set` to use `lattice` operations;
* make `submonoid.basic` independent of `data.nat.basic`.

### [2020-07-07T00:37:33+00:00](https://github.com/leanprover-community/mathlib/commit/d62e71d44c7506c4307337a87d24f529b4c4b9ec)
chore(scripts): update nolints.txt ([#3302](https://github.com/leanprover-community/mathlib/pull/#3302))

I am happy to remove some nolints for you!

### [2020-07-06T20:20:45+00:00](https://github.com/leanprover-community/mathlib/commit/f548db40bfb17eb127018d3f29db81dfe959b7d3)
feat(linear_algebra/affine_space): lattice structure on affine subspaces ([#3288](https://github.com/leanprover-community/mathlib/pull/#3288))

Define a `complete_lattice` instance on affine subspaces of an affine
space, and prove a few basic lemmas relating to it.  (There are plenty
more things that could be proved about it, that I think can reasonably
be added later.)

### [2020-07-06T19:04:56+00:00](https://github.com/leanprover-community/mathlib/commit/edd29d0f2db124c00789b3f5e2f221e712f37a2a)
chore(ring_theory/power_series): weaken assumptions for nontrivial ([#3301](https://github.com/leanprover-community/mathlib/pull/#3301))

### [2020-07-06T17:34:23+00:00](https://github.com/leanprover-community/mathlib/commit/c0926f0679a87080c8099535bafd727cc4f107ed)
chore(*): update to lean 3.17.0 ([#3300](https://github.com/leanprover-community/mathlib/pull/#3300))

### [2020-07-06T16:58:21+00:00](https://github.com/leanprover-community/mathlib/commit/f06e4e00a32ce6a349a0d2b0e3a65cd453599dbd)
feat(data/sym2) Defining the symmetric square (unordered pairs) ([#3264](https://github.com/leanprover-community/mathlib/pull/#3264))

This adds a type for the symmetric square of a type, which is the quotient of the cartesian square by permutations.  These are also known as unordered pairs.

Additionally, this provides some definitions and lemmas for equalities, functoriality, membership, and a relationship between symmetric relations and terms of the symmetric square.

I preferred `sym2` over `unordered_pairs` out of a combination of familiarity and brevity, but I could go either way for naming.

### [2020-07-06T15:34:25+00:00](https://github.com/leanprover-community/mathlib/commit/e3a1a61929b01f15ef441f26fc19bce840a6aa10)
feat(tactic/interactive): identity tactic ([#3295](https://github.com/leanprover-community/mathlib/pull/#3295))

A surprisingly missing tactic combinator.

### [2020-07-06T14:12:29+00:00](https://github.com/leanprover-community/mathlib/commit/33b6cba02e1dfee41ac3b9d2f9916896addb2286)
refactor(*): replace nonzero with nontrivial ([#3296](https://github.com/leanprover-community/mathlib/pull/#3296))

Introduce a typeclass `nontrivial` saying that a type has at least two distinct elements, and use it instead of the predicate `nonzero` requiring that `0` is different from `1`. These two predicates are equivalent in monoids with zero, which cover essentially all relevant ring-like situations, but `nontrivial` applies also to say that a vector space is nontrivial, for instance.

Along the way, fix some quirks in the alebraic hierarchy (replacing fields `zero_ne_one` in many structures with extending `nontrivial`, for instance). Also, `quadratic_reciprocity` was timing out. I guess it was just below the threshold before the refactoring, and some of the changes related to typeclass inference made it just above after the change. So, I squeeze_simped it, going from 47s to 1.7s on my computer.

Zulip discussion at https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202865366

### [2020-07-06T13:27:20+00:00](https://github.com/leanprover-community/mathlib/commit/2c9d9bd0017bb0ed90f1a751f476f6790c22485a)
chore(scripts/nolints_summary.sh): list number of nolints per file

### [2020-07-06T07:16:47+00:00](https://github.com/leanprover-community/mathlib/commit/5ff099b64e6168a241cc73f3c738fc250087a529)
feat(topology): preliminaries for Haar measure ([#3194](https://github.com/leanprover-community/mathlib/pull/#3194))

Define group operations on sets
Define compacts, in a similar way to opens
Prove some "separation" properties for topological groups
Rename `continuous.comap` to `opens.comap` (so that we can have comaps for other kinds of sets in topological spaces)
Rename `inf_val` to `inf_def` (unused)
Move some definitions from `topology.opens` to `topology.compacts`

### [2020-07-06T05:41:46+00:00](https://github.com/leanprover-community/mathlib/commit/2e140f1edf88c6fc058b277cb0b678eba7895111)
refactor(algebra/inj_surj): more lemmas, move to files, rename ([#3290](https://github.com/leanprover-community/mathlib/pull/#3290))

* use names `function.?jective.monoid` etc;
* move definitions to different files;
* add versions for `semimodules` and various `*_with_zero`;
* add `funciton.surjective.forall` etc.

### [2020-07-06T04:31:33+00:00](https://github.com/leanprover-community/mathlib/commit/ffa504c97a17bfbe8de0f21d4358239c23ab844f)
fix(finset/lattice): undo removal of bUnion_preimage_singleton ([#3293](https://github.com/leanprover-community/mathlib/pull/#3293))

In [#3189](https://github.com/leanprover-community/mathlib/pull/#3189) I removed it, which was a mistake.

### [2020-07-06T00:39:48+00:00](https://github.com/leanprover-community/mathlib/commit/e1f6ed2396ac57d41caba12096c25765da0fb149)
chore(scripts): update nolints.txt ([#3294](https://github.com/leanprover-community/mathlib/pull/#3294))

I am happy to remove some nolints for you!

### [2020-07-05T10:40:51+00:00](https://github.com/leanprover-community/mathlib/commit/0cd500efac23a84db0c60ea30519ffe4c3da12a3)
doc(tactic/explode): expand doc string ([#3271](https://github.com/leanprover-community/mathlib/pull/#3271))

Explanation copied from @digama0's Zulip message [here](https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/.23explode.20error/near/202396813). Also removed a redundant function and added some type ascriptions.

Co-authored-by: Mario Carneiro <di.gama@gmail.com>



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-07-05T10:13:00+00:00](https://github.com/leanprover-community/mathlib/commit/293287d5eca1c73b281eec7738351b67d382e2b8)
chore(category_theory/over/limits): change instance to def ([#3281](https://github.com/leanprover-community/mathlib/pull/#3281))

Having this as an instance causes confusion since it's a different terminal object to the one inferred by the other limit constructions in the file.

### [2020-07-05T09:46:41+00:00](https://github.com/leanprover-community/mathlib/commit/f39e0d7a73c71825315ce585e248bec28d8c6895)
chore(algebra/category): use preadditivity for biproducts ([#3280](https://github.com/leanprover-community/mathlib/pull/#3280))

We can avoid some scary calculations thanks to abstract nonsense.

### [2020-07-04T19:11:32+00:00](https://github.com/leanprover-community/mathlib/commit/023d4f7d3c93ca8fc5ba1c39246117b85a2da9c5)
feat(ring_theory/localization): order embedding of ideals, local ring instance ([#3287](https://github.com/leanprover-community/mathlib/pull/#3287))

### [2020-07-04T15:02:36+00:00](https://github.com/leanprover-community/mathlib/commit/08e1adc869a147f71b1198e167db02c2126adaca)
feat(data/pnat): basic pnat facts needed for perfect numbers (3094) ([#3274](https://github.com/leanprover-community/mathlib/pull/#3274))

define pnat.coprime
add some basic lemmas pnats, mostly about coprime, gcd
designate some existing lemmas with @[simp]



Co-authored-by: Aaron Anderson <65780815+awainverse@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-07-04T08:32:44+00:00](https://github.com/leanprover-community/mathlib/commit/0d249d706b5347a74d731c3cfcc7afc185e95d22)
feat(analysis/normed_space/*): group of units of a normed ring is open ([#3210](https://github.com/leanprover-community/mathlib/pull/#3210))

In a complete normed ring, the group of units is an open subset of the ring ([Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inversion.20is.20analytic))

Supporting material:
* `topology.metric_space.basic`, `analysis.normed_space.basic`, `normed_space.operator_norm`: some lemmas about limits and infinite sums in metric and normed spaces
* `analysis.normed_space.basic`, `normed_space.operator_norm`: left- and right- multiplication in a normed ring (algebra) is a bounded homomorphism (linear map); the algebra/linear-map versions are not needed for the main result but included for completeness
* `analysis.normed_space.basic`: a normed algebra is `nonzero` (not needed for the main result) ([Zulip](https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Dangerous.20instance))
* `algebra.group_with_zero`: the `subsingleton_or_nonzero` dichotomy for monoids with zero ([Zulip](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zero.20ring/near/202202187)) (written by @jcommelin )
* `analysis.specific_limits`: results on geometric series in a complete `normed_ring`; relies on
* `algebra.geom_sum`: "left" variants of some existing "right" lemmas on finite geometric series; relies on
* `algebra.opposites`, `algebra.group_power`, `algebra.big_operators`: lemmas about the opposite ring ([Zulip](https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Finite.20geometric.20series))

### [2020-07-04T06:17:21+00:00](https://github.com/leanprover-community/mathlib/commit/c2886d3116877eb2ffe97370ab370544acb287c6)
fix(tactic/default): import tactic.basic ([#3284](https://github.com/leanprover-community/mathlib/pull/#3284))

Some basic tactics and commands (e.g. `#explode`) were not available even if `import tactic` was used. I added `import tactic.basic` to `tactic/default.lean` to remedy this.

### [2020-07-04T00:39:31+00:00](https://github.com/leanprover-community/mathlib/commit/2a43e26f2881c07480c3f51e048736bc6a405e62)
chore(scripts): update nolints.txt ([#3283](https://github.com/leanprover-community/mathlib/pull/#3283))

I am happy to remove some nolints for you!

### [2020-07-03T23:00:44+00:00](https://github.com/leanprover-community/mathlib/commit/742dc887be1e7fd82453b63b4d82c580248889a3)
feat(ring_theory/polynomial): rational root theorem and integral root theorem ([#3241](https://github.com/leanprover-community/mathlib/pull/#3241))

Prove the rational root theorem for a unique factorization domain `A`: Let `K` be the field of fractions of `A` and `p` a polynomial over `A`. If `x : K` is a root of `p`, then the numerator of `x` divides the constant coefficient and the denominator of `x` divides the leading coefficient. (This required defining the numerator and denominator.) As a corollary we have the integral root theorem: if `p` is monic, then its roots in `K` are in fact elements of `A`. As a second corollary, the integral closure of `A` in `K` is `A` itself.



Co-authored-by: Anne Baanen <t.baanen@vu.nl>

### [2020-07-03T22:00:28+00:00](https://github.com/leanprover-community/mathlib/commit/c4bf9e44e0eea32a07488d70b3e8629652080fb4)
chore(algebra/ordered_group): deduplicate ([#3279](https://github.com/leanprover-community/mathlib/pull/#3279))

For historical reasons we have some lemmas duplicated for `ordered_comm_monoid`
and `ordered_cancel_comm_monoid`. This PR merges some duplicates.

### [2020-07-03T22:00:26+00:00](https://github.com/leanprover-community/mathlib/commit/f1637e56197d9c2584dfa3970c88b50abe72c3c4)
feat(field_theory/splitting_field): definition of splitting field ([#3272](https://github.com/leanprover-community/mathlib/pull/#3272))

### [2020-07-03T20:42:56+00:00](https://github.com/leanprover-community/mathlib/commit/48dea2fd7cfbb4f9c80953a199ec3062918ab50a)
feat(algebra/pointwise): make instances global ([#3240](https://github.com/leanprover-community/mathlib/pull/#3240))

add image2 and image3, the images of binary and ternary functions
cleanup in algebra/pointwise
make many variables implicit
make many names shorter
add some lemmas
add more simp lemmas
add type set_semiring as alias for set, with semiring instance using union as "addition"

### [2020-07-03T15:04:51+00:00](https://github.com/leanprover-community/mathlib/commit/f9f0ca6d1a5438018e4611f372bbd5e47ee2a055)
feat(analysic/calculus/times_cont_diff): add times_cont_diff_within_at ([#3262](https://github.com/leanprover-community/mathlib/pull/#3262))

I want to refactor manifolds, defining local properties in the model space and showing that they automatically inherit nice behavior in manifolds. 

In this PR, we modify a little bit the definition of smooth functions in vector spaces by introducing a predicate `times_cont_diff_within_at` (just like we already have `continuous_within_at` or `differentiable_within_at`) and using it in all definitions and proofs. This will be the basis of the locality argument in manifolds.

### [2020-07-03T09:21:25+00:00](https://github.com/leanprover-community/mathlib/commit/53c15319008e3a11d5e8f6c90b64cb0b68f03fa1)
feat(geometry/manifold/smooth_manifold_with_corners): product of smooth manifolds with corners ([#3250](https://github.com/leanprover-community/mathlib/pull/#3250))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-07-03T08:38:36+00:00](https://github.com/leanprover-community/mathlib/commit/e236160f9f8b8e4fe8ca8f4d991312a80dd9b7ae)
chore(order/filter/basic): implicit arg in `eventually_of_forall` ([#3277](https://github.com/leanprover-community/mathlib/pull/#3277))

Make `l : filter α` argument of `eventually_of_forall` implicit
because everywhere in `mathlib` it was used as `eventually_of_forall _`.

### [2020-07-03T07:27:21+00:00](https://github.com/leanprover-community/mathlib/commit/56ed551ec29bdf40454a8642eb1980e99e53e982)
fix(algebra/group_with_zero): fix left/right ([#3278](https://github.com/leanprover-community/mathlib/pull/#3278))

Rename `mul_inv_cancel_left'`/`mul_inv_cancel_right'` to match
`mul_inv_cancel_left`/`mul_inv_cancel_right`.

### [2020-07-03T04:28:12+00:00](https://github.com/leanprover-community/mathlib/commit/303740d45cc87cb7707845ccc8919d38420e4977)
feat(category_theory/abelian): every abelian category is preadditive  ([#3247](https://github.com/leanprover-community/mathlib/pull/#3247))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-03T00:58:35+00:00](https://github.com/leanprover-community/mathlib/commit/9b086e10e16f67c86fecc76dac1045aeeaa01b2d)
chore(*): reduce imports ([#3235](https://github.com/leanprover-community/mathlib/pull/#3235))

The RFC pull request simply removes some `import tactic` or `import tactic.basic`, and then makes the necessary changes in later files to import things as needed.

I'm not sure if it's useful or not 

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-07-03T00:22:34+00:00](https://github.com/leanprover-community/mathlib/commit/6a49975ff571e16bd7f30479491452117315aa28)
feat(category_theory/limits): fully faithful functors reflect limits and colimits ([#3269](https://github.com/leanprover-community/mathlib/pull/#3269))

A fully faithful functor reflects limits and colimits

### [2020-07-02T20:45:17+00:00](https://github.com/leanprover-community/mathlib/commit/838dc66ebf97ba102bf27f6118a2fe71165e6c8f)
feat(topology/basic): add `eventually_eventually_nhds` ([#3266](https://github.com/leanprover-community/mathlib/pull/#3266))

### [2020-07-02T19:38:26+00:00](https://github.com/leanprover-community/mathlib/commit/d84c48c8644bf5ef74159d6809afb885c5a5aa1f)
feat(data/real/cardinality): cardinalities of intervals of reals ([#3252](https://github.com/leanprover-community/mathlib/pull/#3252))

Use the existing result `mk_real` to deduce corresponding results for
all eight kinds of intervals of reals.

It's convenient for this result to add a new lemma to
`data.set.intervals.image_preimage` about the image of an interval
under `inv`.  Just as there are only a few results there about images
of intervals under multiplication rather than a full set, so I just
added the result I needed rather than all the possible variants.  (I
think there are something like 36 reasonable variants of that lemma
that could be stated, for (image or preimage - the same thing in this
case, but still separate statements) x (interval in positive or
negative reals) x (end closer to 0 is 0 (open), nonzero (open) or
nonzero (closed)) x (other end is open, closed or infinite).)

### [2020-07-02T18:55:47+00:00](https://github.com/leanprover-community/mathlib/commit/e4fdc750a9b889fdcdf81670be463372ec6553af)
refactor(analysis/calculus/*deriv): use eventually_eq in congruence statements ([#3261](https://github.com/leanprover-community/mathlib/pull/#3261))

Use `eventually_eq` instead of `mem_sets` for congruence lemmas in continuity and differentiability statements.

### [2020-07-02T18:14:59+00:00](https://github.com/leanprover-community/mathlib/commit/237b1ea5d78c170c761b3f428488c8362ec6e564)
feat(analysis/specific_limits): proof of harmonic series diverging and preliminaries ([#3233](https://github.com/leanprover-community/mathlib/pull/#3233))

This PR is made of two parts : 

- A few new generic lemmas, mostly by @PatrickMassot , in `order/filter/at_top_bot.lean` and `topology/algebra/ordered.lean`

- Definition of the harmonic series, basic lemmas about it, and proof of its divergence, in `analysis/specific_limits.lean`

Zulip : https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Harmonic.20Series.20Divergence/near/201651652

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-07-02T13:05:20+00:00](https://github.com/leanprover-community/mathlib/commit/8be66ee9d5ce29eae2bc9566fded078d3f2e594b)
fix(library_search): fix a bug with iff lemmas where both sides match ([#3270](https://github.com/leanprover-community/mathlib/pull/#3270))

Also add a proper failure message for `library_search`, using Mario's text.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-02T13:05:18+00:00](https://github.com/leanprover-community/mathlib/commit/18a80ea263a61dba24196ab731971665bcfffb82)
chore(tactic/noncomm_ring): allow simp to fail ([#3268](https://github.com/leanprover-community/mathlib/pull/#3268))

Fixes [#3267](https://github.com/leanprover-community/mathlib/pull/#3267).



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-02T10:27:52+00:00](https://github.com/leanprover-community/mathlib/commit/dc1d93697cce9528a158c37c4d42a5699cea70f5)
feat(data/polynomial): preliminaries for Cayley-Hamilton ([#3243](https://github.com/leanprover-community/mathlib/pull/#3243))

Many cheerful facts about polynomials!



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-02T00:35:42+00:00](https://github.com/leanprover-community/mathlib/commit/cd29ede960f977551b74af348a231d6196d35412)
chore(scripts): update nolints.txt ([#3265](https://github.com/leanprover-community/mathlib/pull/#3265))

I am happy to remove some nolints for you!

### [2020-07-01T23:16:08+00:00](https://github.com/leanprover-community/mathlib/commit/93099107945fd4c41601ed41b4140c902e9e9438)
chore(algebra/*): deduplicate `*_with_zero`/`semiring`/`field` ([#3259](https://github.com/leanprover-community/mathlib/pull/#3259))

All moved/renamed/merged lemmas were generalized to use
`*_with_zero`/`nonzero`/`mul_zero_class` instead of
`(semi)ring`/`division_ring`/`field`.

## Moved to `group_with_zero`

The following lemmas were formulated for
`(semi_)ring`s/`division_ring`s/`field`s. Some of them had strictly
more general “prime” versions for `*_with_zero`. I either moved a
lemma to `algebra/group_with_zero` and adjusted the requirements or
removed the non-prime version and `'` from the name of the prime
version. Sometimes I also made some arguments implicit.

TL;DR: moved to `group_with_zero`, removed `name'` lemma if it was there.

* `is_unit_zero_iff`;
* `not_is_unit_zero`;
* `div_eq_one_iff_eq`;
* `eq_div_iff_mul_eq`;
* `eq_div_of_mul_eq`;
* `eq_one_div_of_mul_eq_one`;
* `eq_one_div_of_mul_eq_one_left`;
* `one_div_one_div`;
* `eq_of_one_div_eq_one_div`;
* `one_div_div`;
* `mul_eq_of_eq_div`;
* `mul_mul_div`;
* `eq_zero_of_zero_eq_one`;
* `eq_inv_of_mul_right_eq_one`;
* `eq_inv_of_mul_left_eq_one`;
* `div_right_comm`;
* `div_div_div_cancel_right`;
* `div_mul_div_cancel`;

## Renamed/merged

* rename `mul_inv''` to `mul_inv'` and merge `mul_inv'` into `mul_inv_rev'`;
* `coe_unit_mul_inv`, `coe_unit_inv_mul`: `units.mul_inv'`, `units.inv_mul'`
* `division_ring.inv_eq_iff`: `inv_eq_iff`;
* `division_ring.inv_inj`: `inv_inj'`;
* `domain.mul_left_inj`: `mul_left_inj'`;
* `domain.mul_right_inj`: `mul_right_inj'`;
* `eq_of_mul_eq_mul_of_nonzero_left` and `eq_of_mul_eq_mul_left`: `mul_left_cancel'`;
* `eq_of_mul_eq_mul_of_nonzero_right` and `eq_of_mul_eq_mul_right`: `mul_right_cancel'`;
* `inv_inj`, `inv_inj'`, `inv_inj''`: `inv_injective`, `inv_inj`, and `inv_inj'`, respectively;
* `mul_inv_cancel_assoc_left`, `mul_inv_cancel_assoc_right`,
  `inv_mul_cancel_assoc_left`, `inv_mul_cancel_assoc_right`:
  `mul_inv_cancel_left'`, `mul_inv_cacnel_right'`,
  `inv_mul_cancel_left'`, `inv_mul_cancel_right'`;
* `ne_zero_and_ne_zero_of_mul_ne_zero` : `ne_zero_and_ne_zero_of_mul`.
* `ne_zero_of_mul_left_eq_one`: `left_ne_zero_of_mul_eq_one`
* `ne_zero_of_mul_ne_zero_left` : `right_ne_zero_of_mul`;
* `ne_zero_of_mul_ne_zero_right` : `left_ne_zero_of_mul`;
* `ne_zero_of_mul_right_eq_one`: `left_ne_zero_of_mul_eq_one`
* `neg_inj` and `neg_inj` renamed to `neg_injective` and `neg_inj`;
* `one_inv_eq`: merged into `inv_one`;
* `unit_ne_zero`: `units.ne_zero`;
* `units.mul_inv'` and `units.inv_mul'`: `units.mul_inv_of_eq` and `units.inv_mul_of_eq`;
* `units.mul_left_eq_zero_iff_eq_zero`,
  `units.mul_right_eq_zero_iff_eq_zero`: `units.mul_left_eq_zero`,
  `units.mul_right_eq_zero`;

## New

* `class cancel_monoid_with_zero`: a `monoid_with_zero` such that
  left/right multiplication by a non-zero element is injective; the
  main instances are `group_with_zero`s and `domain`s;
* `monoid_hom.map_ne_zero`, `monoid_hom.map_eq_zero`,
  `monoid_hom.map_inv'`, `monoid_hom.map_div`, `monoid_hom.injective`:
  lemmas about monoid homomorphisms of two groups with zeros such that
  `f 0 = 0`;
* `mul_eq_zero_of_left`, `mul_eq_zero_of_right`, `ne_zero_of_eq_one`
* `unique_of_zero_eq_one`, `eq_of_zero_eq_one`, `nonzero_psum_unique`,
  `zero_ne_one_or_forall_eq_0`;
* `mul_left_inj'`, `mul_right_inj'`

## Misc changes

* `eq_of_div_eq_one` no more requires `b ≠ 0`;

### [2020-07-01T18:46:03+00:00](https://github.com/leanprover-community/mathlib/commit/1a419a9fea7b959317eddd556e1bb9639f4dcc05)
feat(data/nat/digits): add digits_lt_base ([#3246](https://github.com/leanprover-community/mathlib/pull/#3246))

### [2020-07-01T17:12:55+00:00](https://github.com/leanprover-community/mathlib/commit/f00b7c0c3d228263f0c576045eab5b705dcdcecd)
chore(*): work on removing deprecated is_X_hom typeclasses ([#3258](https://github.com/leanprover-community/mathlib/pull/#3258))

It's far from over, but as I was bumping up against issues in `polynomial.lean` and `mv_polynomial.lean`, I'm going to PR this part for now, and then wait to return to it when other PRs affecting `polynomial.lean` have cleared.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-01T12:12:44+00:00](https://github.com/leanprover-community/mathlib/commit/e803c851d221764eb3ec8bf010e4ed300a32b113)
feat(field_theory/separable): relating irreducibility and separability ([#3198](https://github.com/leanprover-community/mathlib/pull/#3198))

### [2020-07-01T10:05:14+00:00](https://github.com/leanprover-community/mathlib/commit/a7cdab5d3c4555d536ce7e35df241b6281d722b7)
chore(data/set/basic): simp attribute on mem_range_self ([#3260](https://github.com/leanprover-community/mathlib/pull/#3260))

### [2020-07-01T10:05:12+00:00](https://github.com/leanprover-community/mathlib/commit/7bd19b3256511a9443507eb19a02bb8488923524)
chore(data/finset, data/multiset): split into smaller files ([#3256](https://github.com/leanprover-community/mathlib/pull/#3256))

This follows on from [#2341](https://github.com/leanprover-community/mathlib/pull/#2341), which split the second half of `data.list.basic` into separate files. This now does the same (trying to follow a similar split) for `data.multiset` and `data.finset`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-01T10:05:10+00:00](https://github.com/leanprover-community/mathlib/commit/8ba7595afd90702e5d681568deca6a0755dfe4d4)
feat(category/preadditive): properties of preadditive biproducts ([#3245](https://github.com/leanprover-community/mathlib/pull/#3245))

### Basic facts about morphisms between biproducts in preadditive categories.

* In any category (with zero morphisms), if `biprod.map f g` is an isomorphism,
  then both `f` and `g` are isomorphisms.

The remaining lemmas hold in any preadditive category.

* If `f` is a morphism `X₁ ⊞ X₂ ⟶ Y₁ ⊞ Y₂` whose `X₁ ⟶ Y₁` entry is an isomorphism,
  then we can construct isomorphisms `L : X₁ ⊞ X₂ ≅ X₁ ⊞ X₂` and `R : Y₁ ⊞ Y₂ ≅ Y₁ ⊞ Y₂`
  so that `L.hom ≫ g ≫ R.hom` is diagonal (with `X₁ ⟶ Y₁` component still `f`),
  via Gaussian elimination.

* As a corollary of the previous two facts,
  if we have an isomorphism `X₁ ⊞ X₂ ≅ Y₁ ⊞ Y₂` whose `X₁ ⟶ Y₁` entry is an isomorphism,
  we can construct an isomorphism `X₂ ≅ Y₂`.

* If `f : W ⊞ X ⟶ Y ⊞ Z` is an isomorphism, either `𝟙 W = 0`,
  or at least one of the component maps `W ⟶ Y` and `W ⟶ Z` is nonzero.

* If `f : ⨁ S ⟶ ⨁ T` is an isomorphism,
  then every column (corresponding to a nonzero summand in the domain)
  has some nonzero matrix entry.

This PR is preliminary to some work on semisimple categories.




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-01T09:03:47+00:00](https://github.com/leanprover-community/mathlib/commit/aff951a54ad2009b59dedefb5bae0602160d213d)
chore(algebra/big_operators): don't use omega ([#3255](https://github.com/leanprover-community/mathlib/pull/#3255))

Postpone importing `omega` a little bit longer.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-01T07:55:07+00:00](https://github.com/leanprover-community/mathlib/commit/e68503ad8e5d073809d1228acfad0a9e740c1424)
feat(ring_theory/valuation): definition and basic properties of valuations ([#3222](https://github.com/leanprover-community/mathlib/pull/#3222))

From the perfectoid project.

### [2020-07-01T03:39:36+00:00](https://github.com/leanprover-community/mathlib/commit/a22cd4d7cab3b3b9591f4f6b9b1f9fabc7db169d)
chore(algebra/group_with_zero): nolint ([#3254](https://github.com/leanprover-community/mathlib/pull/#3254))

Adding two doc strings to make the file lint-free again. cf. [#3253](https://github.com/leanprover-community/mathlib/pull/#3253).

### [2020-07-01T01:31:04+00:00](https://github.com/leanprover-community/mathlib/commit/859edfb043379c643335b815c9069d042d10b28e)
chore(scripts): update nolints.txt ([#3253](https://github.com/leanprover-community/mathlib/pull/#3253))

I am happy to remove some nolints for you!

### [2020-07-01T00:28:03+00:00](https://github.com/leanprover-community/mathlib/commit/89f3bbc2051b9882a35fb71882a5da359922730d)
feat(data/matrix): std_basis_matrix ([#3244](https://github.com/leanprover-community/mathlib/pull/#3244))

The definition of
```
def std_basis_matrix (i : m) (j : n) (a : α) : matrix m n α :=
(λ i' j', if i' = i ∧ j' = j then a else 0)
```
and associated lemmas, and some refactoring of `src/ring_theory/matrix_algebra.lean` to use it.

This is work of @jalex-stark which I'm PR'ing as part of getting Cayley-Hamilton ready.

Co-authored-by: Jalex Stark <alexmaplegm@gmail.com>



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-07-01T00:02:51+00:00](https://github.com/leanprover-community/mathlib/commit/a40be98774b441091a43e616994978a6299d9d91)
feat(category_theory/limits/shapes): simp lemmas to decompose pullback_cone.mk.fst ([#3249](https://github.com/leanprover-community/mathlib/pull/#3249))

Decompose `(pullback_cone.mk _ _ _).fst` into its first component (+symmetrical and dual versions)

### [2020-06-30T22:34:44+00:00](https://github.com/leanprover-community/mathlib/commit/06256910f05fcfb462acc6979820021d50d343f5)
chore(topology/*): use dot syntax for some lemmas ([#3251](https://github.com/leanprover-community/mathlib/pull/#3251))

Rename:

* `closure_eq_of_is_closed` to `is_closed.closure_eq`;
* `closed_of_compact` to `compact.is_closed`;
* `bdd_above_of_compact` to `compact.bdd_above`;
* `bdd_below_of_compact` to `compact.bdd_below`.
* `is_complete_of_is_closed` to `is_closed.is_complete`
* `is_closed_of_is_complete` to `is_complete.is_closed`
* `is_closed_iff_nhds` to `is_closed_iff_cluster_pt`
* `closure_subset_iff_subset_of_is_closed` to `is_closed.closure_subset_iff`

Add:

* `closure_closed_ball` (`@[simp]` lemma)
* `is_closed.closure_subset : is_closed s → closure s ⊆ s`

### [2020-06-30T17:14:16+00:00](https://github.com/leanprover-community/mathlib/commit/b3915636c4faaa21b357e912e17dddc68bf75ce0)
feat(algebra/lie_algebra): conjugation transformation for Lie algebras of skew-adjoint endomorphims, matrices ([#3229](https://github.com/leanprover-community/mathlib/pull/#3229))

The two main results are the lemmas:
 * skew_adjoint_lie_subalgebra_equiv
 * skew_adjoint_matrices_lie_subalgebra_equiv

The latter is expected to be useful when defining the classical Lie algebras
of type B and D.

### [2020-06-30T16:18:08+00:00](https://github.com/leanprover-community/mathlib/commit/ea961f76541618ed5a968430126d55e74f0a6ceb)
chore(ring_theory/polynomial): move `ring_theory.polynomial` to `ring_theory.polynomial.basic` ([#3248](https://github.com/leanprover-community/mathlib/pull/#3248))

This PR is the intersection of [#3223](https://github.com/leanprover-community/mathlib/pull/#3223) and [#3241](https://github.com/leanprover-community/mathlib/pull/#3241), allowing them to be merged in either order.

Zulip discussion: https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/where.20should.20these.20definitions.20live.3F



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-06-30T14:58:52+00:00](https://github.com/leanprover-community/mathlib/commit/9524dee3cb0cfca1414e3595f5d7b0b3669bfb4e)
feat(topology): real.image_Icc ([#3224](https://github.com/leanprover-community/mathlib/pull/#3224))

The image of a segment under a real-valued continuous function is a segment.




Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-06-30T12:42:26+00:00](https://github.com/leanprover-community/mathlib/commit/1bc6ebaa4cf7ae9799046dff939166b166da570c)
fix(tactic/interactive_expr): show let-values in tactic state widget ([#3228](https://github.com/leanprover-community/mathlib/pull/#3228))

Fixes the missing let-values in the tactic state widget:

![let_widget](https://user-images.githubusercontent.com/313929/86048315-9d740d80-ba50-11ea-9a8c-09c853687343.png)



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-06-30T11:46:05+00:00](https://github.com/leanprover-community/mathlib/commit/b82ed0c5bb0a99eb8ecbcec3d132faf27cd69ac7)
fix(tactic/apply_fun): beta reduction was too aggressive ([#3214](https://github.com/leanprover-community/mathlib/pull/#3214))

The beta reduction performed by `apply_fun` was previously too aggressive -- in particular it was unfolding `A * B` to `A.mul B` when `A` and `B` are matrices. 

This fix avoids using `dsimp`, and instead calls `head_beta` separately on the left and right sides of the new hypothesis. 



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-06-30T09:50:40+00:00](https://github.com/leanprover-community/mathlib/commit/6d0f40a6c1e7a435cfa4c2a799764fa68c49d15d)
chore(topology/algebra/ordered): use `continuous_at`, rename ([#3231](https://github.com/leanprover-community/mathlib/pull/#3231))

* rename `Sup_mem_of_is_closed` and `Inf_mem_of_is_closed` to
  `is_closed.Sup_mem` and `is_closed.Inf_mem`, similarly with
  `cSup` and `cInf`;
* make `Sup_of_continuous` etc take `continuous_at` instead
  of `continuous`, rename to `Sup_of_continuous_at_of_monotone` etc,
  similarly with `cSup`/`cInf`.

### [2020-06-30T08:06:04+00:00](https://github.com/leanprover-community/mathlib/commit/a143c3861868df5ba488fb359ab17c42f067b443)
refactor(linear_algebra/affine_space): allow empty affine subspaces ([#3219](https://github.com/leanprover-community/mathlib/pull/#3219))

When definitions of affine spaces and subspaces were added in [#2816](https://github.com/leanprover-community/mathlib/pull/#2816),
there was some discussion of whether an affine subspace should be
allowed to be empty.

After further consideration of what lemmas need to be added to fill
out the interface for affine subspaces, I've concluded that it does
indeed make sense to allow empty affine subspaces, with `nonempty`
hypotheses then added for those results that need them, to avoid
artificial `nonempty` hypotheses for other results on affine spans and
intersections of affine subspaces that don't depend on any way on
affine subspaces being nonempty and can be more cleanly stated if they
can be empty.

Thus, change the definition to allow affine subspaces to be empty and
remove the bundled `direction`.  The new definition of `direction` (as
the `vector_span` of the points in the subspace, i.e. the
`submodule.span` of the `vsub_set` of the points) is the zero
submodule for both empty affine subspaces and for those consisting of
a single point (and it's proved that in the nonempty case it contains
exactly the pairwise subtractions of points in the affine subspace).

This doesn't generally add new lemmas beyond those used in reproving
existing results (including what were previously the `add` and `sub`
axioms for affine subspaces) with the new definitions.  It also
doesn't add the complete lattice structure for affine subspaces, just
helps enable adding it later.

### [2020-06-30T05:20:57+00:00](https://github.com/leanprover-community/mathlib/commit/e250eb41850ff3d893a55179ae507bc735409629)
feat(category/schur): a small corollary of the baby schur's lemma ([#3239](https://github.com/leanprover-community/mathlib/pull/#3239))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-30T05:20:54+00:00](https://github.com/leanprover-community/mathlib/commit/d788d4b5892b252b9aac1425bafea3dd5eef7555)
chore(data/set/intervals): split `I??_union_I??_eq_I??` ([#3237](https://github.com/leanprover-community/mathlib/pull/#3237))

For each lemma `I??_union_I??_eq_I??` add a lemma
`I??_subset_I??_union_I??` with no assumptions.

### [2020-06-30T05:20:51+00:00](https://github.com/leanprover-community/mathlib/commit/af53c9d7f11e59f2b1bed3be111d65209ad60a39)
chore(algebra/ring): move some classes to `group_with_zero` ([#3232](https://github.com/leanprover-community/mathlib/pull/#3232))

Move `nonzero`, `mul_zero_class` and `no_zero_divisors` to
`group_with_zero`: these classes don't need `(+)`.

### [2020-06-30T05:20:45+00:00](https://github.com/leanprover-community/mathlib/commit/da481e772facd75d1bf1f4fbdd9c8c8ce12cc6cd)
chore(data/polynomial): partial move from is_ring_hom to ring_hom ([#3213](https://github.com/leanprover-community/mathlib/pull/#3213))

This does not attempt to do a complete refactor of `polynomial.lean` and `mv_polynomial.lean` to remove use of `is_ring_hom`, but only to fix `eval₂` which we need for the current work on Cayley-Hamilton.

Having struggled with these two files for the last few days, I'm keen to get them cleaned up, so I'll promise to return to this more thoroughly in a later PR.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Alex J. Best <alex.j.best@gmail.com>

### [2020-06-30T04:15:21+00:00](https://github.com/leanprover-community/mathlib/commit/38904ac8c3a469b455eb2501a395c0901b251ef1)
feat(data/fintype/basic): card_eq_zero_equiv_equiv_pempty ([#3238](https://github.com/leanprover-community/mathlib/pull/#3238))

Adds a constructive equivalence `α ≃ pempty.{v+1}` given `fintype.card α = 0`, which I think wasn't available previously.

I would have stated this as an `iff`, but as the right hand side is data is an `equiv` itself.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-30T04:15:19+00:00](https://github.com/leanprover-community/mathlib/commit/1588d81e48b73334397738337b6d305d317aba5b)
feat(category_theory): remove nearly all universe annotations ([#3221](https://github.com/leanprover-community/mathlib/pull/#3221))

Due to some recent changes to mathlib (does someone know the relevant versions/commits?) most of the universe annotations `.{v}` and `include 𝒞` statements that were previously needed in the category_theory library are no longer necessary.

This PR removes them!



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-06-30T03:05:21+00:00](https://github.com/leanprover-community/mathlib/commit/056a72aa92fa6cc3430348a84e19df6853d07775)
perf(linarith): don't repeat nonneg proofs for nat-to-int casts ([#3226](https://github.com/leanprover-community/mathlib/pull/#3226))

This performance issue showed up particularly when using `nlinarith` over `nat`s. Proofs that `(n : int) >= 0` were being repeated many times, which led to quadratic blowup in the `nlinarith` preprocessing.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-30T03:05:19+00:00](https://github.com/leanprover-community/mathlib/commit/791744b06cbd5485342c829fc535ef5557214c9b)
feat(analysis/normed_space/real_inner_product,geometry/euclidean): inner products of weighted subtractions ([#3203](https://github.com/leanprover-community/mathlib/pull/#3203))

Express the inner product of two weighted sums, where the weights in
each sum add to 0, in terms of the norms of pairwise differences.
Thus, express inner products for vectors expressed in terms of
`weighted_vsub` and distances for points expressed in terms of
`affine_combination`.

This is a general form of the standard formula for a distance between
points expressed in terms of barycentric coordinates: if the
difference between the normalized barycentric coordinates (with
respect to triangle ABC) for two points is (x, y, z) then the squared
distance between them is -(a^2 yz + b^2 zx + c^2 xy).

Although some of the lemmas are given with the two vectors expressed
as sums over different indexed families of vectors or points (since
nothing in the statement or proof depends on them being the same), I
expect almost all uses will be in cases where the two indexed families
are the same and only the weights vary.

### [2020-06-30T01:43:20+00:00](https://github.com/leanprover-community/mathlib/commit/4fcd6fd43cd09dc278152a2a189fa17adb979318)
chore(*): import expression widgets from core ([#3181](https://github.com/leanprover-community/mathlib/pull/#3181))

With widgets, the rendering of the tactic state is implemented in pure Lean code.  I would like to move this part (temporarily) into mathlib to facilitate collaborative improvement and rapid iteration under a mature community review procedure.  (That is, I want other people to tweak it themselves without having to wait a week for the next Lean release to see the effect.)

I didn't need to change anything in the source code (except for adding some doc strings).  So it should be easy to copy it back to core if we want to.

There are no changes required to core for this PR.

Co-authored-by: E.W.Ayers <E.W.Ayers@maths.cam.ac.uk>

### [2020-06-30T00:37:07+00:00](https://github.com/leanprover-community/mathlib/commit/e8fd085f3eb518f01dd1eed92f817b7972b41a1c)
chore(scripts): update nolints.txt ([#3234](https://github.com/leanprover-community/mathlib/pull/#3234))

I am happy to remove some nolints for you!

### [2020-06-29T19:03:51+00:00](https://github.com/leanprover-community/mathlib/commit/45904fba9b71e94b1c1ff72e720c36dc9363895a)
chore(*): change notation for `set.compl` ([#3212](https://github.com/leanprover-community/mathlib/pull/#3212))

* introduce typeclass `has_compl` and notation `∁` for `has_compl.compl`
* use it instead of `has_neg` for `set` and `boolean_algebra`

### [2020-06-29T16:12:00+00:00](https://github.com/leanprover-community/mathlib/commit/d3006badc2af402a15537995b1bb97d009e0ded4)
chore(init_/): remove this directory ([#3227](https://github.com/leanprover-community/mathlib/pull/#3227))

* remove `init_/algebra`;
* move `init_/data/nat` to `data/nat/basic`;
* move `init_/data/int` to `data/int/basic`.

### [2020-06-29T15:01:42+00:00](https://github.com/leanprover-community/mathlib/commit/eb05a940762a9e616e9eff1ed798100b581cbef1)
feat(order/filter/germ): define `filter.germ` ([#3172](https://github.com/leanprover-community/mathlib/pull/#3172))

Actually we already had this definition under the name
`filter_product`.

### [2020-06-29T13:48:28+00:00](https://github.com/leanprover-community/mathlib/commit/4907d5d637f2f3184c16c659e1b15be80f1f2fd0)
feat(algebra/ring): ite_mul_one and ite_mul_zero_... ([#3217](https://github.com/leanprover-community/mathlib/pull/#3217))

Three simple lemmas about if statements involving multiplication, useful while rewriting.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-29T13:48:26+00:00](https://github.com/leanprover-community/mathlib/commit/964f0e53fd21a434c0ce50b3cd1111d6fb5146a0)
feat(data/polynomial): work over noncommutative rings where possible ([#3193](https://github.com/leanprover-community/mathlib/pull/#3193))

After downgrading `C` from an algebra homomorphism to a ring homomorphism in [69931ac](https://github.com/leanprover-community/mathlib/commit/69931acfe7b6a29f988bcf7094e090767b34fb85), which requires a few tweaks, everything else is straightforward.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Alex J. Best <alex.j.best@gmail.com>

### [2020-06-29T13:48:23+00:00](https://github.com/leanprover-community/mathlib/commit/a708f854d02bb9631a4a5cc759aa10c180d92b1c)
feat(category/limits/shapes): fix biproducts ([#3175](https://github.com/leanprover-community/mathlib/pull/#3175))

This is a second attempt at [#3102](https://github.com/leanprover-community/mathlib/pull/#3102).

Previously the definition of a (binary) biproduct in a category with zero morphisms (but not necessarily) preadditive was just wrong.

The definition for a "bicone" was just something that was simultaneously a cone and a cocone, with the same cone points. It was a "biproduct bicone" if the cone was a limit cone and the cocone was a colimit cocone. However, this definition was not particularly useful. In particular, there was no way to prove that the two different `map` constructions providing a morphism `W ⊞ X ⟶ Y ⊞ Z` (i.e. by treating the biproducts either as cones, or as cocones) were actually equal. Blech.

So, I've added the axioms `inl ≫ fst = 𝟙 P`, `inl ≫ snd = 0`, `inr ≫ fst = 0`, and `inr ≫ snd = 𝟙 Q` to `bicone P Q`. (Note these only require the exist of zero morphisms, not preadditivity.)

Now the two map constructions are equal.

I've then entirely removed the `has_preadditive_biproduct` typeclass. Instead we have
1. additional theorems providing `total`, when `preadditive C` is available
2. alternative constructors for `has_biproduct` that use `total` rather than `is_limit` and `is_colimit`.

This PR also introduces some abbreviations along the lines of `abbreviation has_binary_product (X Y : C) := has_limit (pair X Y)`, just to improve readability.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-29T13:48:21+00:00](https://github.com/leanprover-community/mathlib/commit/78beab4feecf0f011126f3929289319baea3e0c2)
feat(linear_algebra/affine_space): affine independence ([#3140](https://github.com/leanprover-community/mathlib/pull/#3140))

Define affine independent indexed families of points (in terms of no
nontrivial `weighted_vsub` in the family being zero), prove that a
family of at most one point is affine independent, and prove a family
of points is affine independent if and only if a corresponding family
of subtractions is linearly independent.

There are of course other equivalent descriptions of affine
independent families it will be useful to add later (that the affine
span of all proper subfamilies is smaller than the affine span of the
whole family, that each point is not in the affine span of the rest;
in the case of a family indexed by a `fintype`, that the dimension of
the affine span is one less than the cardinality).  But I think the
definition and one equivalent formulation is a reasonable starting
point.




Co-authored-by: Patrick Massot <patrickmassot@free.fr>

### [2020-06-29T12:45:16+00:00](https://github.com/leanprover-community/mathlib/commit/36ce13fe9c52cda2d4a90d6ba5c258f2d943be60)
chore(finset/nat/antidiagonal): simplify some proofs ([#3225](https://github.com/leanprover-community/mathlib/pull/#3225))

Replace some proofs with `rfl`, and avoid `multiset.to_finset` when there is a `nodup` available.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-29T08:15:17+00:00](https://github.com/leanprover-community/mathlib/commit/c4f91767f9c699ccaa8732596726825a5875d77b)
feat(linear_algebra/tensor_product): ite_tmul ([#3216](https://github.com/leanprover-community/mathlib/pull/#3216))

```
((if P then x₁ else 0) ⊗ₜ[R] x₂) = if P then (x₁ ⊗ₜ x₂) else 0
```
and the symmetric version.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-29T06:59:46+00:00](https://github.com/leanprover-community/mathlib/commit/ca44926c1cdd735db3ce693ab6a008aab0d172d3)
chore(ring_theory/tensor_product): missing simp lemmas ([#3215](https://github.com/leanprover-community/mathlib/pull/#3215))

A few missing `simp` lemmas.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-29T04:45:10+00:00](https://github.com/leanprover-community/mathlib/commit/a443d8ba07c4eb74bc5f420986244702180d8e53)
feat(simp_nf): instructions for linter timeout ([#3205](https://github.com/leanprover-community/mathlib/pull/#3205))

### [2020-06-29T04:21:12+00:00](https://github.com/leanprover-community/mathlib/commit/9a1c0a6e138efb1b8bb20394c3830a0dd121338e)
feat(data/padics/padic_norm) Fix namespacing of padic_val_nat ([#3207](https://github.com/leanprover-community/mathlib/pull/#3207))

No longer need we `padic_val_rat.padic_val_nat`.

### [2020-06-29T03:57:10+00:00](https://github.com/leanprover-community/mathlib/commit/9acf5903f385e2c017cde4b93d2323d59232707a)
feat(data/matrix/notation): smul matrix lemmas ([#3208](https://github.com/leanprover-community/mathlib/pull/#3208))

### [2020-06-29T03:20:59+00:00](https://github.com/leanprover-community/mathlib/commit/d2b46abb9f3b8cccc9ac79a085b2bb61ee10bbe6)
chore(category_theory/punit): use discrete punit instead of punit ([#3201](https://github.com/leanprover-community/mathlib/pull/#3201))

Analogous to [#3191](https://github.com/leanprover-community/mathlib/pull/#3191) for `punit`. I also removed some `simp` lemmas which can be generated instead by `[simps]`.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-29T02:24:01+00:00](https://github.com/leanprover-community/mathlib/commit/b503fb45531edd1d1cf4daffeb778e8bb6bfb5ac)
chore(docs/tutorial): change category declarations ([#3220](https://github.com/leanprover-community/mathlib/pull/#3220))

change category declarations to match syntax in recent commit (i.e. no more explicit typeclass naming), delete unnecessary "include" lines as they are no longer needed for Lean to include the typeclass, update tutorial text to explain new syntax




Co-authored-by: agusakov <39916842+agusakov@users.noreply.github.com>

### [2020-06-28T22:51:22+00:00](https://github.com/leanprover-community/mathlib/commit/2ec83dc5e07dc04cb8946a2df645dd0fe4b0580a)
chore(group_theory/submonoid): split into 3 files ([#3058](https://github.com/leanprover-community/mathlib/pull/#3058))

Now

* `group_theory.submonoid.basic` contains the definition, `complete_lattice` structure, and some basic facts about `closure`;
* `group_theory.submonoid.operations` contains definitions of various operations on submonoids;
* `group_theory.submonoid.membership` contains various facts about membership in a submonoid or the submonoid closure of a set.

### [2020-06-28T22:28:30+00:00](https://github.com/leanprover-community/mathlib/commit/4ad82e5d029f1807044f223749403e3e20be581a)
feat(uniform_space): compact uniform spaces, Heine-Cantor ([#3180](https://github.com/leanprover-community/mathlib/pull/#3180))

feat(uniform_space): compact uniform spaces

Compact Hausdorff spaces are uniquely uniformizable and continuous
functions on them are uniformly continuous (Heine-Cantor).

### [2020-06-28T21:26:32+00:00](https://github.com/leanprover-community/mathlib/commit/3d72c9707c5c0b57b3ba1a19e7277d30cd19d9f2)
chore(measure_theory/outer_measure,measure_space): use `complete_lattice_of_Inf/Sup` ([#3185](https://github.com/leanprover-community/mathlib/pull/#3185))

Also add a few supporting lemmas about `bsupr`/`binfi` to `order/complete_lattice`

### [2020-06-28T13:39:01+00:00](https://github.com/leanprover-community/mathlib/commit/35fbfe0a40395e6ea394f05b1c56a2fbcf4b33ce)
fix(tactic/linarith): use refine instead of apply to avoid apply bug ([#3199](https://github.com/leanprover-community/mathlib/pull/#3199))

closes [#3142](https://github.com/leanprover-community/mathlib/pull/#3142)




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-28T09:35:54+00:00](https://github.com/leanprover-community/mathlib/commit/da210bf9c24afb32713655251175698442e202b6)
doc(contribute/bors.md): update some outdated info ([#3209](https://github.com/leanprover-community/mathlib/pull/#3209))

### [2020-06-28T08:10:20+00:00](https://github.com/leanprover-community/mathlib/commit/2f6a5f59e49732a0cdbb7d1ef3a7e135203a1bb2)
feat(nat, lattice): preliminaries for Haar measure ([#3190](https://github.com/leanprover-community/mathlib/pull/#3190))

PR 2/5 to put the Haar measure in mathlib. This PR: results about lattices and lattice operations on `nat`.
add some simp lemmas for `nat.find` (simplifying a proof in `sum_four_squares`)
rename `finset.sup_val` to `finset.sup_def` (it was unused). In PR 3 I will add a new declaration `finset.sup_val`
`Inf_nat_def` and `Sup_nat_def` renamed to `nat.Inf_def` and `nat.Sup_def`, and use `set.nonempty` in statement (they were unused outside that file)

### [2020-06-28T07:12:16+00:00](https://github.com/leanprover-community/mathlib/commit/4e2b46a72e5c26889c3fd31ade2c3c9783ff026f)
feat(algebra/big_operators): add induction principles ([#3197](https://github.com/leanprover-community/mathlib/pull/#3197))

add sum_induction and prod_induction

### [2020-06-28T06:01:24+00:00](https://github.com/leanprover-community/mathlib/commit/a220286ac49a16bee74e85d9d2b308ce0d30d858)
feat(subtype): standardize ([#3204](https://github.com/leanprover-community/mathlib/pull/#3204))

Add simp lemma from x.val to coe x
Use correct ext/ext_iff naming scheme
Use coe in more places in the library

### [2020-06-28T00:34:00+00:00](https://github.com/leanprover-community/mathlib/commit/dd2f1b9684da999892e857f8c0220ead5c72a72d)
chore(scripts): update nolints.txt ([#3206](https://github.com/leanprover-community/mathlib/pull/#3206))

I am happy to remove some nolints for you!

### [2020-06-27T18:19:16+00:00](https://github.com/leanprover-community/mathlib/commit/247fe80d8cf2d5182b5e57bbe8133fe744f95f7b)
feat(category_theory/cones): cone functoriality is fully faithful ([#3202](https://github.com/leanprover-community/mathlib/pull/#3202))

The functors `cones.functoriality` and `cocones.functoriality` are fully faithful if the transformation functor is as well.

### [2020-06-27T10:10:55+00:00](https://github.com/leanprover-community/mathlib/commit/adcd09d1175972999f6f0bee02533041c444f001)
chore(tactic/linarith): remove final linting error ([#3196](https://github.com/leanprover-community/mathlib/pull/#3196))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-06-27T05:25:00+00:00](https://github.com/leanprover-community/mathlib/commit/e7e9f30cd2c79a125322baf4cef4a49d94bf6119)
feat(set): preliminaries for Haar measure ([#3189](https://github.com/leanprover-community/mathlib/pull/#3189))

`comp_sup_eq_sup_comp` is renamed `comp_sup_eq_sup_comp_of_is_total` and there is a new version that doesn't assume that the order is linear.
`set.image_injective` is renamed `function.injective.image_injective` (in the same way as the existing `function.surjective.preimage_injective`). `set.image_injective` is now an `iff`.

### [2020-06-27T03:21:26+00:00](https://github.com/leanprover-community/mathlib/commit/8413b3f4ed9d964028b85b59c5ee3346202c603b)
feat(analysis/normed_space/real_inner_product): sums and bilinear form ([#3187](https://github.com/leanprover-community/mathlib/pull/#3187))

Add lemmas about distributing the inner product into a sum.  The
natural approach to proving those seems to be to use the corresponding
lemmas for bilinear forms, so also add a construction of a `bilin_form
ℝ α` from the inner product.

I realise this might all get refactored later if inner products get
refactored to cover the case of complex inner products as well.

### [2020-06-27T02:52:56+00:00](https://github.com/leanprover-community/mathlib/commit/6ed3325aa20d7ddb26d88081b5deb5f1dc621b3f)
feat(category_theory/limits): limit of point iso ([#3188](https://github.com/leanprover-community/mathlib/pull/#3188))

Prove a cone is a limit given that the canonical morphism from it to a limiting cone is an iso.

### [2020-06-27T00:32:10+00:00](https://github.com/leanprover-community/mathlib/commit/c6fd69d3f63fe76f7d5db2ca6c1dbdce4df06d70)
chore(scripts): update nolints.txt ([#3192](https://github.com/leanprover-community/mathlib/pull/#3192))

I am happy to remove some nolints for you!

### [2020-06-26T23:51:42+00:00](https://github.com/leanprover-community/mathlib/commit/78d67807587e44a24281fabde3f35ca1f7f078c7)
chore(category_theory/pempty): use discrete pempty instead of a special pempty category ([#3191](https://github.com/leanprover-community/mathlib/pull/#3191))

Use `discrete pempty` instead of a specialised `pempty` category.

Motivation: Since we have a good API for `discrete` categories, there doesn't seem to be much point in defining a specialised `pempty` category with an equivalence, instead we might as well just use `discrete pempty`.

### [2020-06-26T16:35:02+00:00](https://github.com/leanprover-community/mathlib/commit/2d270ff1bfc16a26624297850501eb284b2eeaf3)
feat(data/set/basic): +2 lemmas, +2 `simp` attrs ([#3182](https://github.com/leanprover-community/mathlib/pull/#3182))

### [2020-06-26T15:11:50+00:00](https://github.com/leanprover-community/mathlib/commit/ef62d1c0885d46e599683e1f8707d94e3f27c326)
chore(*): last preparations for Heine ([#3179](https://github.com/leanprover-community/mathlib/pull/#3179))

This is hopefully the last preparatory PR before we study compact uniform spaces. It has almost no mathematical content, except that I define `uniform_continuous_on`, and check it is equivalent to uniform continuity for the induced uniformity.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-06-26T13:39:18+00:00](https://github.com/leanprover-community/mathlib/commit/6624509eedb747ba52e0bebbe70ae559e00209a5)
feat(algebra/big_operators): telescoping sums ([#3184](https://github.com/leanprover-community/mathlib/pull/#3184))

generalize sum_range_sub_of_monotone, a theorem about nats, to a theorem about commutative groups

### [2020-06-26T09:59:19+00:00](https://github.com/leanprover-community/mathlib/commit/5b97da63fbb0fbb5520cbb13dcad8362660d50c1)
feat(ring_theory/matrix_equiv_tensor): matrix n n A ≃ₐ[R] (A ⊗[R] matrix n n R) ([#3177](https://github.com/leanprover-community/mathlib/pull/#3177))

When `A` is an `R`-algebra, matrices over `A` are equivalent (as an algebra) to `A ⊗[R] matrix n n R`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-26T07:16:55+00:00](https://github.com/leanprover-community/mathlib/commit/3cfc0e7368aef54cc8a78ae7225235aa5c5e02e2)
chore(category/*): linting ([#3178](https://github.com/leanprover-community/mathlib/pull/#3178))

Some linting work on `category_theory/`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-26T06:18:21+00:00](https://github.com/leanprover-community/mathlib/commit/c3923e39921b1379a1657c416d3247f56f793671)
feat(data/fintype): trunc_sigma_of_exists ([#3166](https://github.com/leanprover-community/mathlib/pull/#3166))

When working over a `fintype`, you can lift existential statements to `trunc` statements.

This PR adds:
```
def trunc_of_nonempty_fintype {α} (h : nonempty α) [fintype α] : trunc α

def trunc_sigma_of_exists {α} [fintype α] {P : α → Prop} [decidable_pred P] (h : ∃ a, P a) : trunc (Σ' a, P a)
```



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-26T01:23:06+00:00](https://github.com/leanprover-community/mathlib/commit/616cb5e6f199f5d2b1668e380c7638163d5d31bd)
chore(category_theory/equivalence) explicit transitivity transformation ([#3176](https://github.com/leanprover-community/mathlib/pull/#3176))

Modifies the construction of the transitive equivalence to be explicit in what exactly the natural transformations are.
The motivation for this is two-fold: firstly we get auto-generated projection lemmas for extracting the functor and inverse, and the natural transformations aren't obscured through `adjointify_η`.

### [2020-06-26T00:34:33+00:00](https://github.com/leanprover-community/mathlib/commit/abae5a3ce599d46d43b354b9f2e9f4f6a77371a9)
chore(scripts): update nolints.txt ([#3174](https://github.com/leanprover-community/mathlib/pull/#3174))

I am happy to remove some nolints for you!

### [2020-06-25T23:10:54+00:00](https://github.com/leanprover-community/mathlib/commit/43a2b24d1c42565d5dea731966624b9ce417f0b2)
feat(tactic/abel) teach abel to gsmul_zero ([#3173](https://github.com/leanprover-community/mathlib/pull/#3173))

As reported by Heather Macbeth in:
https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/limitations.20of.20.60abel.60

`abel` was not negating zero to zero.

### [2020-06-25T16:36:04+00:00](https://github.com/leanprover-community/mathlib/commit/db7a53af14f8d0f489729199600fcc2c9bd70765)
refactor(ring_theory/ideals): make local_ring a prop class ([#3171](https://github.com/leanprover-community/mathlib/pull/#3171))



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-06-25T15:51:37+00:00](https://github.com/leanprover-community/mathlib/commit/afc1c24e8294bcbed509f087f67e4ccdbf543139)
feat(category/default): comp_dite ([#3163](https://github.com/leanprover-community/mathlib/pull/#3163))

Adds lemmas to "distribute" composition over `if` statements.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-25T15:51:35+00:00](https://github.com/leanprover-community/mathlib/commit/c6f629bc45f9c69d21953327b0ddf41572b5b463)
feat(category_theory/limits): isos from reindexing limits ([#3100](https://github.com/leanprover-community/mathlib/pull/#3100))

Three related constructions which are helpful when identifying "the same limit written different ways".

1. The categories of cones over `F` and `G` are equivalent if `F` and `G` are naturally isomorphic
(possibly after changing the indexing category by an equivalence).

2. We can prove two cone points `(s : cone F).X` and `(t.cone F).X` are isomorphic if
* both cones are limit cones
* their indexing categories are equivalent via some `e : J ≌ K`,
* the triangle of functors commutes up to a natural isomorphism: `e.functor ⋙ G ≅ F`.

3. The chosen limits of `F : J ⥤ C` and `G : K ⥤ C` are isomorphic,
if there is an equivalence `e : J ≌ K` making the triangle commute up to natural isomorphism.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-25T14:32:01+00:00](https://github.com/leanprover-community/mathlib/commit/158e84ae35cbed47282545f318fb33c0ed483761)
feat(*): bump to Lean 3.16.5 ([#3170](https://github.com/leanprover-community/mathlib/pull/#3170))

There should be no changes required in mathlib.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-25T13:06:57+00:00](https://github.com/leanprover-community/mathlib/commit/7d331eb9124fb4c8051d1028abf2caeedf13aadf)
chore(*): assorted lemmas about `set` and `finset` ([#3158](https://github.com/leanprover-community/mathlib/pull/#3158))

### [2020-06-25T13:06:55+00:00](https://github.com/leanprover-community/mathlib/commit/80a087782587ec5bd44ee7391da145618763fde4)
feat(category_theory): show a pullback of a regular mono is regular ([#2780](https://github.com/leanprover-community/mathlib/pull/#2780))

And adds two methods for constructing limits which I've found much easier to use in practice.

### [2020-06-25T12:26:52+00:00](https://github.com/leanprover-community/mathlib/commit/3f868fabf3afbd606ec70f2fde59108efde14b5b)
feat(filter, topology): cluster_pt and principal notation, redefine compactness ([#3160](https://github.com/leanprover-community/mathlib/pull/#3160))

This PR implements what is discussed in https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Picking.20sides. It introduces a notation for `filter.principal`, defines `cluster_pt` and uses it to redefine compactness in a way which makes the library more consistent by always putting the neighborhood filter on the left, as in the description of closures and `nhds_within`.

### [2020-06-25T07:40:04+00:00](https://github.com/leanprover-community/mathlib/commit/e7db701ef4fc9bb4e9ff6fcbfd92c145ad640ff6)
feat(category/adjunction): missing simp lemmas ([#3168](https://github.com/leanprover-community/mathlib/pull/#3168))

Just two missing simp lemmas.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-25T07:40:02+00:00](https://github.com/leanprover-community/mathlib/commit/d86f1c83917b5d3a3e3848eaa32f5c3655d174cc)
chore(category/discrete): missing simp lemmas ([#3165](https://github.com/leanprover-community/mathlib/pull/#3165))

Some obvious missing `simp` lemmas for `discrete.nat_iso`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-25T07:40:01+00:00](https://github.com/leanprover-community/mathlib/commit/266d31637f2364eb1a0b0a9d1dcb51c749f1c4f7)
chore(category/equivalence): cleanup ([#3164](https://github.com/leanprover-community/mathlib/pull/#3164))

Previously some "shorthands" like
```
@[simp] def unit (e : C ≌ D) : 𝟭 C ⟶ e.functor ⋙ e.inverse := e.unit_iso.hom
```
had been added in `equivalence.lean`.

These were a bit annoying, as even though they were marked as `simp` sometimes the syntactic difference between `e.unit` and `e.unit_iso.hom` would get in the way of tactics working.

This PR turns these into abbreviations.

This comes at a slight cost: apparently expressions like `{ X := X }.Y` won't reduce when `.Y` is an abbreviation for `.X.Z`, so we add some `@[simp]` lemmas back in to achieve this.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-25T07:39:59+00:00](https://github.com/leanprover-community/mathlib/commit/e8187ac1dfaddd53ab09fcdde945afd7e1a65471)
feat(category/preadditive): comp_sum ([#3162](https://github.com/leanprover-community/mathlib/pull/#3162))

Adds lemmas to distribute composition over `finset.sum`, in a preadditive category.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-25T06:32:59+00:00](https://github.com/leanprover-community/mathlib/commit/3875012aeaaae5eef5b03e20ea5f52fd0f07869e)
feat(data/quot): add `map'`, `hrec_on'`, and `hrec_on₂'` ([#3148](https://github.com/leanprover-community/mathlib/pull/#3148))

Also add a few `simp` lemmas

### [2020-06-25T05:38:59+00:00](https://github.com/leanprover-community/mathlib/commit/553e4534a1e2398ab2586c0abe20847846c9ffcd)
feat(algebra/big_operators): prod_dite_eq ([#3167](https://github.com/leanprover-community/mathlib/pull/#3167))

Add `finset.prod_dite_eq`, the dependent analogue of `finset.prod_ite_eq`, and its primed version for the flipped equality.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-06-25T04:35:29+00:00](https://github.com/leanprover-community/mathlib/commit/8f04a92a5729261e048674cfe7de3c1d472a046b)
refactor(algebra/*): small API fixes ([#3157](https://github.com/leanprover-community/mathlib/pull/#3157))

## Changes to `canonically_ordered_comm_semiring`

* in the definition of `canonically_ordered_comm_semiring` replace
  `mul_eq_zero_iff` with `eq_zero_or_eq_zero_of_mul_eq_zero`; the other
  implication is always true because of `[semiring]`;
* add instance `canonically_ordered_comm_semiring.to_no_zero_divisors`;

## Changes to `with_top`

* use `to_additive` for `with_top.has_one`, `with_top.coe_one` etc;
* move `with_top.coe_ne_zero` to `algebra.ordered_group`;
* add `with_top.has_add`, make `coe_add`, `coe_bit*` require only `[has_add α]`;
* use proper instances for lemmas about multiplication in `with_top`, not
  just `canonically_ordered_comm_semiring` for everything;

## Changes to `associates`
* merge `associates.mk_zero_eq` and `associates.mk_eq_zero_iff_eq_zero` into
  `associates.mk_eq_zero`;
* drop `associates.mul_zero`, `associates.zero_mul`, `associates.zero_ne_one`,
  and `associates.mul_eq_zero_iff` in favor of typeclass instances;

## Misc changes

* drop `mul_eq_zero_iff_eq_zero_or_eq_zero` in favor of `mul_eq_zero`;
* drop `ennreal.mul_eq_zero` in favor of `mul_eq_zero` from instance.

### [2020-06-25T01:09:38+00:00](https://github.com/leanprover-community/mathlib/commit/e1a72b500626d3ea980947ea7ff4297305efbde2)
feat(archive/100-theorems-list/73_ascending_descending_sequences): Erdős–Szekeres ([#3074](https://github.com/leanprover-community/mathlib/pull/#3074))

Prove the Erdős-Szekeres theorem on ascending or descending sequences

### [2020-06-25T00:34:07+00:00](https://github.com/leanprover-community/mathlib/commit/5c7e1a2236c6dfbe2c6df3fa0bc0e9609686dd2c)
chore(scripts): update nolints.txt ([#3161](https://github.com/leanprover-community/mathlib/pull/#3161))

I am happy to remove some nolints for you!

### [2020-06-24T19:51:54+00:00](https://github.com/leanprover-community/mathlib/commit/2aa08c1fb72cb34e826e9c5044aa81dae19e9ebf)
chore(algebra/ordered_group): merge `add_le_add'` with `add_le_add` ([#3159](https://github.com/leanprover-community/mathlib/pull/#3159))

Also drop `mul_le_mul''` (was a weaker version of `mul_le_mul'`).

### [2020-06-24T14:36:47+00:00](https://github.com/leanprover-community/mathlib/commit/04a5bdbce97db37768b251237ca9217c390d74d5)
feat(linear_algebra/finsupp_vector_space): is_basis.tensor_product ([#3147](https://github.com/leanprover-community/mathlib/pull/#3147))

If `b : ι → M` and `c : κ → N` are bases then so is `λ i, b i.1 ⊗ₜ c i.2 : ι × κ → M ⊗ N`.

### [2020-06-24T10:22:57+00:00](https://github.com/leanprover-community/mathlib/commit/dd9b5c68ba58ccb5ff9f986beb4e0de9a5b4ec13)
refactor(tactic/linarith): big refactor and docs ([#3113](https://github.com/leanprover-community/mathlib/pull/#3113))

This PR:
* Splits `linarith` into multiple files for organizational purposes
* Uses the general `zify` and `cancel_denom` tactics instead of weaker custom versions
* Refactors many components of `linarith`, in particular,
* Modularizes `linarith` preprocessing, so that users can insert custom steps
* Implements `nlinarith` preprocessing as such a custom step, so it happens at the correct point of the preprocessing stage
* Better encapsulates the FM elimination module, to make it easier to plug in alternate oracles if/when they exist
* Docs, docs, docs

The change to zification means that some goals which involved multiplication of natural numbers will no longer be solved. However, others are now in scope. `nlinarith` is a possible drop-in replacement; otherwise, generalize the product of naturals to a single natural, and `linarith` should still succeed.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-24T09:30:51+00:00](https://github.com/leanprover-community/mathlib/commit/194edc1261acbfb35922062c4ada6cbacbaf4cce)
feat(ring_theory/localization): integral closure in field extension ([#3096](https://github.com/leanprover-community/mathlib/pull/#3096))

Let `A` be an integral domain with field of fractions `K` and `L` a finite extension of `K`. This PR shows the integral closure of `A` in `L` has fraction field `L`. If those definitions existed, the corollary is that the ring of integers of a number field is a number ring.

For this, we need two constructions on polynomials:
 * If `p` is a nonzero polynomial, `integral_normalization p` is a monic polynomial with roots `z * a` for `z` a root of `p` and `a` the leading coefficient of `p`
 * If `f` is the localization map from `A` to `K` and `p` has coefficients in `K`, then `f.integer_normalization p` is a polynomial with coefficients in `A` (think: `∀ i, is_integer (f.integer_normalization p).coeff i`) with the same roots as `p`.

### [2020-06-24T07:12:51+00:00](https://github.com/leanprover-community/mathlib/commit/8ecf53d9038acc05aa1e0d18e3b2e73999a08787)
feat(order/filter/countable_Inter): `sup` and `inf` ([#3154](https://github.com/leanprover-community/mathlib/pull/#3154))

### [2020-06-24T06:13:13+00:00](https://github.com/leanprover-community/mathlib/commit/617b07e029e91ce231268f8e79621340ed4a2049)
feat(uniform_space/separation): add separated_set ([#3130](https://github.com/leanprover-community/mathlib/pull/#3130))

Also add documentation and simplify the proof of separated => t2 and add the converse. 



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-06-24T00:48:46+00:00](https://github.com/leanprover-community/mathlib/commit/985cce7b7a3970a65e3344f2dc5b984a8c154457)
chore(scripts): update nolints.txt ([#3156](https://github.com/leanprover-community/mathlib/pull/#3156))

I am happy to remove some nolints for you!

### [2020-06-24T00:18:26+00:00](https://github.com/leanprover-community/mathlib/commit/d57ac08cf1bdaf70f22db948b329c06c18d1c3c9)
feat(field_theory/separable): definition and basic properties ([#3155](https://github.com/leanprover-community/mathlib/pull/#3155))

### [2020-06-23T22:02:55+00:00](https://github.com/leanprover-community/mathlib/commit/340d5a9d53cb163b82bc02ee99f3a0ef53ce8ee7)
refactor(geometry/manifold/*): rename to charted_space and tangent_map ([#3103](https://github.com/leanprover-community/mathlib/pull/#3103))

@PatrickMassot  had asked some time ago if what is currently called `manifold` in mathlib could be renamed to `charted_space`, and in a recent PR he asked if `bundled_mfderiv` could be called `tangent_map`. Both changes make sense. They are implemented in this PR, together with several tiny improvements to the manifold library.

### [2020-06-23T17:57:24+00:00](https://github.com/leanprover-community/mathlib/commit/bc3ed51b5ea71d68470a9d7fc1e39c81798b5f26)
chore(data/set/finite): use dot notation ([#3151](https://github.com/leanprover-community/mathlib/pull/#3151))

Rename:

* `finite_insert` to `finite.insert`;
* `finite_union` to `finite.union`;
* `finite_subset` to `finite.subset`;
* `finite_image` to `finite.image`;
* `finite_dependent_image` to `finite.dependent_image`;
* `finite_map` to `finite.map`;
* `finite_image_iff_on` to `finite_image_iff`;
* `finite_preimage` to `finite.preimage`;
* `finite_sUnion` to `finite.sUnion`;
* `finite_bUnion` to `finite.bUnion`, merge with `finite_bUnion'` and
  use `f : Π i ∈ s, set α` instead of `f : ι → set α`;
* `finite_prod` to `finite.prod`;
* `finite_seq` to `finite.seq`;
* `finite_subsets_of_finite` to `finite.finite_subsets`;
* `bdd_above_finite` to `finite.bdd_above`;
* `bdd_above_finite_union` to `finite.bdd_above_bUnion`;
* `bdd_below_finite` to `finite.bdd_below`;
* `bdd_below_finite_union` to `finite.bdd_below_bUnion`.

Delete

* `finite_of_finite_image_on`, was a copy of `finite_of_fintie_image`;
* `finite_bUnion'`: merge with `finite_bUnion` into `finite.bUnion`.

### [2020-06-23T17:15:59+00:00](https://github.com/leanprover-community/mathlib/commit/26918a05936335a46944c7a1fadeefcdb7224f97)
feat(topology/metric_space/baire): define filter `residual` ([#3149](https://github.com/leanprover-community/mathlib/pull/#3149))

Fixes [#2265](https://github.com/leanprover-community/mathlib/pull/#2265). Also define a typeclass `countable_Inter_filter` and prove that both `residual`
and `μ.ae` have this property.

### [2020-06-23T16:11:19+00:00](https://github.com/leanprover-community/mathlib/commit/62e13643c664c0a9151886351103327ae0acfcdb)
chore(linear_algebra/nonsingular_inverse): `matrix.nonsing_inv` no longer requires base ring to carry `has_inv` instance ([#3136](https://github.com/leanprover-community/mathlib/pull/#3136))

### [2020-06-23T14:59:38+00:00](https://github.com/leanprover-community/mathlib/commit/ea665e7db6aa1eac8b61b23e6213d5540c875d44)
fix(algebra/ordered*): add norm_cast attribute ([#3132](https://github.com/leanprover-community/mathlib/pull/#3132))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-23T13:58:52+00:00](https://github.com/leanprover-community/mathlib/commit/d287d34590761dc6237c7b21d9427580b2d339c4)
refactor(order/filter/basic): define `filter.eventually_eq` ([#3134](https://github.com/leanprover-community/mathlib/pull/#3134))

* Define `eventually_eq` (`f =^f[l] g`) and `eventually_le` (`f ≤^f[l] g`).
* Use new notation and definitions in some files.

### [2020-06-23T08:40:54+00:00](https://github.com/leanprover-community/mathlib/commit/421ed70350b1fc1adb7ac14f4b11e733a59178fb)
chore(topology/metric_space/baire): review ([#3146](https://github.com/leanprover-community/mathlib/pull/#3146))

* Simplify some proofs in `topology/metric_space/baire`;
* Allow dependency on `hi : i ∈ S` in some `bUnion`/`bInter` lemmas.

### [2020-06-23T08:40:52+00:00](https://github.com/leanprover-community/mathlib/commit/159766e93f2d19ee2e7308ffa89a4533af780bf4)
chore(topology/metric_space/basic): rename `uniform_continuous_dist'` ([#3145](https://github.com/leanprover-community/mathlib/pull/#3145))

* rename `uniform_continuous_dist'` to `uniform_continuous_dist`;
* rename `uniform_continuous_dist` to `uniform_continuous.dist`;
* add `uniform_continuous.nndist`.

### [2020-06-23T07:31:42+00:00](https://github.com/leanprover-community/mathlib/commit/02d880b02ad61531eb234db9545c0bf8f71dcb3d)
perf(tactic/cache): call `freeze_local_instances` after `reset_instance_cache` ([#3128](https://github.com/leanprover-community/mathlib/pull/#3128))

Calling `unfreeze_local_instances` unfreezes the local instances of the main goal, and thereby disables the type-class cache (for this goal).  It is therefore advisable to call `freeze_local_instances` afterwards as soon as possible.  (The type-class cache will still be trashed when you switch between goals with different local instances, but that's only half as bad as disabling the cache entirely.)

To this end this PR contains several changes:

 * The `reset_instance_cache` function (and `resetI` tactic) immediately call `freeze_local_instances`.

 * The `unfreezeI` tactic is removed.  Instead we introduce `unfreezingI { tac }`, which only temporarily unfreezes the local instances while executing `tac`.  Try to keep `tac` as small as possible.

 * We add `substI h` and `casesI t` tactics (which are short for `unfreezingI { subst h }` and `unfreezingI { casesI t }`, resp.) as abbreviations for the most common uses of `unfreezingI`.

 * Various other uses of `unfreeze_local_instances` are eliminated.  Avoid use of `unfreeze_local_instances` if possible.  Use the `unfreezing tac` combinator instead (the non-interactive version of `unfreezingI`).

See discussion at https://github.com/leanprover-community/mathlib/pull/3113#issuecomment-647150256



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-23T04:53:57+00:00](https://github.com/leanprover-community/mathlib/commit/c0d74a39f11d78f5b6fdcc3edc5cf9c1abc7091e)
refactor(group/perm) bundle sign of a perm as a monoid_hom ([#3143](https://github.com/leanprover-community/mathlib/pull/#3143))

We're trying to bundle everything right?

### [2020-06-23T03:11:26+00:00](https://github.com/leanprover-community/mathlib/commit/23d61413260b8d5470ab5b5627eb5afaa821b413)
chore(algebra/ring,char_zero): generalize some lemmas ([#3141](https://github.com/leanprover-community/mathlib/pull/#3141))

`mul_eq_zero` etc only need `[mul_zero_class]` and `[no_zero_divisors]`. In particular, they don't need `has_neg`. Also deduplicate with `group_with_zero.*`.

### [2020-06-23T00:34:00+00:00](https://github.com/leanprover-community/mathlib/commit/52abfcf566e3d310873536696030dbbaee08de82)
chore(scripts): update nolints.txt ([#3144](https://github.com/leanprover-community/mathlib/pull/#3144))

I am happy to remove some nolints for you!

### [2020-06-22T20:52:37+00:00](https://github.com/leanprover-community/mathlib/commit/b562575997f9a7badd771b7fa2a0ff6c79616591)
feat(data/finset): add card_insert_of_mem ([#3137](https://github.com/leanprover-community/mathlib/pull/#3137))

### [2020-06-22T19:11:00+00:00](https://github.com/leanprover-community/mathlib/commit/36e3b9f13f812b74c2e12d3b5d8bbcc9e3860172)
chore(*): update to Lean 3.16.4c ([#3139](https://github.com/leanprover-community/mathlib/pull/#3139))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-22T19:10:58+00:00](https://github.com/leanprover-community/mathlib/commit/67844a81107beac9f7a7e0b1545f20f4fe9977d6)
feat(order/complete_lattice): complete lattice of Sup ([#3138](https://github.com/leanprover-community/mathlib/pull/#3138))

Construct a complete lattice from a least upper bound function. 
From a Xena group discussion.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-06-22T18:22:19+00:00](https://github.com/leanprover-community/mathlib/commit/f05933654f0abf64f112854ac8db97691c6528b0)
fix(algebra/pi_instances): improve definitions of `pi.*` ([#3116](https://github.com/leanprover-community/mathlib/pull/#3116))

The new `test/pi_simp.lean` fails with current `master`. Note that
this is a workaround, not a proper fix for `tactic.pi_instance`.

See also [Zulip chat](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.60id.60.20in.20pi_instances)

Also use `@[to_additive]` to generate additive definitions, add ordered multiplicative monoids, and add `semimodule (Π i, f i) (Π, g i)`.

### [2020-06-22T16:12:16+00:00](https://github.com/leanprover-community/mathlib/commit/54cc126b3c5a205c3b658738ca851860bd858766)
feat(data/finset,data/fintype,algebra/big_operators): some more lemmas ([#3124](https://github.com/leanprover-community/mathlib/pull/#3124))

Add some `finset`, `fintype` and `algebra.big_operators` lemmas that
were found useful in proving things related to affine independent
families.  (In all cases where results are proved for products, and
then derived for sums where possible using `to_additive`, it was the
result for sums that I actually had a use for.  In the case of
`eq_one_of_card_le_one_of_prod_eq_one` and
`eq_zero_of_card_le_one_of_sum_eq_zero`, `to_additive` couldn't be
used because it also tries to convert the `1` in `s.card ≤ 1` to `0`.)

### [2020-06-22T13:19:55+00:00](https://github.com/leanprover-community/mathlib/commit/86dcd5cda7a5017c8b3c8876c89a510a19d49aad)
feat(analysis/calculus): C^1 implies strictly differentiable ([#3119](https://github.com/leanprover-community/mathlib/pull/#3119))

Over the reals, a continuously differentiable function is strictly differentiable.

Supporting material:  Add a standard mean-value-theorem-related trick as its own lemma, and refactor another proof (in `calculus/extend_deriv`) to use that lemma.

Other material:  an _equality_ (rather than _inequality_) version of the mean value theorem for domains; slight refactor of `normed_space/dual`.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-06-22T11:57:27+00:00](https://github.com/leanprover-community/mathlib/commit/46a889442d748dcb76c08b1732feaf313db83ca0)
feat(linear_algebra/affine_space): affine combinations for finsets ([#3122](https://github.com/leanprover-community/mathlib/pull/#3122))

Extend the definitions of affine combinations over a `fintype` to the
case of sums over a `finset` of an arbitrary index type (which is
appropriate for use cases such as affine independence of a possibly
infinite family of points).

Also change to have only bundled versions of `weighted_vsub_of_point`
and `weighted_vsub`, following review, so avoiding duplicating parts
of `linear_map` API.

### [2020-06-22T10:46:14+00:00](https://github.com/leanprover-community/mathlib/commit/105fa1761390042ed45320f69a091bfafc32cb04)
feat(linear_algebra/matrix): trace of an endomorphism independent of basis ([#3125](https://github.com/leanprover-community/mathlib/pull/#3125))

### [2020-06-22T08:01:57+00:00](https://github.com/leanprover-community/mathlib/commit/068aaafa5ed60ef1d16bce84577735d600b18a3e)
chore(data/finmap): nolint ([#3131](https://github.com/leanprover-community/mathlib/pull/#3131))

### [2020-06-22T07:22:10+00:00](https://github.com/leanprover-community/mathlib/commit/3f9b52ae170f70ba4d0a6f80328430a10a3e316b)
refactor(ring_theory/*): make PID class a predicate ([#3114](https://github.com/leanprover-community/mathlib/pull/#3114))

### [2020-06-22T00:33:41+00:00](https://github.com/leanprover-community/mathlib/commit/6aba9580fd8446b384779b5c897f688ae412fc6d)
chore(scripts): update nolints.txt ([#3133](https://github.com/leanprover-community/mathlib/pull/#3133))

I am happy to remove some nolints for you!

### [2020-06-21T21:04:24+00:00](https://github.com/leanprover-community/mathlib/commit/d59adc18dfa75566ec8805add7d4404b5066eb94)
chore(data/list/alist): nolint ([#3129](https://github.com/leanprover-community/mathlib/pull/#3129))

### [2020-06-21T19:44:08+00:00](https://github.com/leanprover-community/mathlib/commit/5b5ff79078be046ea09de0afa60da4cba268b353)
fix(tactic/delta_instance): bug in computing pi arity ([#3127](https://github.com/leanprover-community/mathlib/pull/#3127))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-21T19:09:48+00:00](https://github.com/leanprover-community/mathlib/commit/eff9ed3a5a51c25d482bdea83806d12941ae938e)
feat(topology/uniform_space): some basic lemmas ([#3123](https://github.com/leanprover-community/mathlib/pull/#3123))

This is the second PR on the road to Heine. It contains various elementary lemmas about uniform spaces.

### [2020-06-21T17:25:22+00:00](https://github.com/leanprover-community/mathlib/commit/7073c8b99cfb52995ab60ff7275639795fe60258)
feat(tactic/cancel_denoms): try to remove numeral denominators  ([#3109](https://github.com/leanprover-community/mathlib/pull/#3109))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-06-21T16:23:00+00:00](https://github.com/leanprover-community/mathlib/commit/b7d056a1774f55fe4009fe0320895146b16241fb)
feat(tactic/zify): move nat propositions to int ([#3108](https://github.com/leanprover-community/mathlib/pull/#3108))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-21T15:04:19+00:00](https://github.com/leanprover-community/mathlib/commit/d097161b3e947693ba1e38ac729cec06f5302024)
fix(tactic/set): use provided type for new variable ([#3126](https://github.com/leanprover-community/mathlib/pull/#3126))

closes [#3111](https://github.com/leanprover-community/mathlib/pull/#3111)




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-20T19:21:52+00:00](https://github.com/leanprover-community/mathlib/commit/8729fe211ebd7f2b40924e0f5ff0f6b5b1e56695)
feat(tactic/simps): option `trace.simps.verbose` prints generated lemmas ([#3121](https://github.com/leanprover-community/mathlib/pull/#3121))

### [2020-06-20T15:10:42+00:00](https://github.com/leanprover-community/mathlib/commit/e8ff6ff6b97aceaec6f6043e182f9bffbf768b5d)
feat(*): random lemmas about sets and filters ([#3118](https://github.com/leanprover-community/mathlib/pull/#3118))

This is the first in a series of PR that will culminate in a proof of Heine's theorem (a continuous function from a compact separated uniform space to any uniform space is uniformly continuous). I'm slicing a 600 lines files into PRs. This first PR is only about sets, filters and a bit of topology. Uniform spaces stuff will come later.




Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-06-20T11:22:01+00:00](https://github.com/leanprover-community/mathlib/commit/cd9e8b5324773942cabf9a3b25c6c87221a89640)
fix(tactic/group): bugfix for inverse of 1 ([#3117](https://github.com/leanprover-community/mathlib/pull/#3117))

The new group tactic made goals like

```lean
example {G : Type*} [group G] (x : G) (h : x = 1) : x = 1 :=
begin
  group, -- x * 1 ^(-1) = 1
  exact h,
end
```

worse, presumably from trying to move the rhs to the lhs we end up with `x * 1^(-1) = 1`, we add a couple more lemmas to try to fix this.

### [2020-06-19T13:54:55+00:00](https://github.com/leanprover-community/mathlib/commit/103743e3d09bdce5a9dc8265f78feaa8551e9348)
doc(tactic/core,uniform_space/basic): minor doc fixes ([#3115](https://github.com/leanprover-community/mathlib/pull/#3115))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-19T04:18:45+00:00](https://github.com/leanprover-community/mathlib/commit/8e44b9f17c15d8cb2072c6a3a56de4426953dde0)
feat(algebra/big_operators): `prod_apply_dite` and `prod_dite` ([#3110](https://github.com/leanprover-community/mathlib/pull/#3110))

Generalize `prod_apply_ite` and `prod_ite` to dependent if-then-else. Since the proofs require `prod_attach`, it needed to move to an earlier line.

Zulip discussion: https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/prod_ite_eq

### [2020-06-19T00:33:30+00:00](https://github.com/leanprover-community/mathlib/commit/56a580d28274b220ff4305a40346517cdef86324)
chore(scripts): update nolints.txt ([#3112](https://github.com/leanprover-community/mathlib/pull/#3112))

I am happy to remove some nolints for you!

### [2020-06-18T22:26:13+00:00](https://github.com/leanprover-community/mathlib/commit/ed44541a4504fd852728a54379653ccde7e03fc1)
chore(*): regularize naming using injective ([#3071](https://github.com/leanprover-community/mathlib/pull/#3071))

This begins some of the naming regularization discussed at https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming.20of.20injectivity.20lemmas

Some general rules:
1. Lemmas should have `injective` in the name iff they have `injective` in the conclusion
2. `X_injective` is preferable to `injective_X`.
3. Unidirectional `inj` lemmas should be dropped in favour of bidirectional ones.

Mostly, this PR tried to fix the names of lemmas that conclude `injective` (also `surjective` and `bijective`, but they seemed to be much better already).

A lot of the changes are from `injective_X` to `X_injective` style 

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-18T21:08:16+00:00](https://github.com/leanprover-community/mathlib/commit/e060c93d5bae37ea49969542d4a258afdff8a704)
feat(category_theory/discrete): build equivalence from equiv ([#3099](https://github.com/leanprover-community/mathlib/pull/#3099))

* renames all the construction building functors/transformations out of discrete categories as `discrete.functor`, `discrete.nat_trans`, `discrete.nat_iso`, rather than names using `of_function`.
* adds `def discrete.equivalence {I J : Type u₁} (e : I ≃ J) : discrete I ≌ discrete J`,
* removes some redundant definitions
* breaks some long lines, 
* and adds doc-strings.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-18T21:08:14+00:00](https://github.com/leanprover-community/mathlib/commit/73caeaa53c8d479310aaf0ee6122493aca9c840d)
perf(tactic/linarith): implement redundancy test to reduce number of comparisons ([#3079](https://github.com/leanprover-community/mathlib/pull/#3079))

This implements a redundancy check in `linarith` which can drastically reduce the size of the sets of comparisons that the tactic needs to deal with.

`linarith` iteratively transforms sets of inequalities to equisatisfiable sets by eliminating a single variable. If there are `n` comparisons in the set, we expect `O(n^2)` comparisons after one elimination step. Many of these comparisons are redundant, i.e. removing them from the set does not change its satisfiability.

Deciding redundancy is expensive, but there are cheap approximations that are very useful in practice. This PR tests comparisons for non-minimal history (http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.51.493&rep=rep1&type=pdf p.13, theorem 7). Non-minimal history implies redundancy.



Co-authored-by: Mario Carneiro <di.gama@gmail.com>
Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-18T20:37:24+00:00](https://github.com/leanprover-community/mathlib/commit/21bf8737836e1f225ff685563fda789e0a25c63c)
refactor(category_theory/abelian): use has_finite_products ([#2917](https://github.com/leanprover-community/mathlib/pull/#2917))

This doesn't go nearly as far as I wanted.

Really I'd like to factor out `additive`, which is a `preadditive` category with all finite biproducts, and then layer `abelian` on top of that (with (co)kernels and every epi/mono normal).

I can't do that immediately, because:
1. we don't provide the instances from `has_finite_biproducts` to `has_finite_(co)products`
2. we don't define the preadditive version of finite biproducts (we only did the binary ones)
3. hence we don't show that in a preadditive category finite products give rise to finite biproducts

@TwoFX, @b-mehta, if either of you are interested in doing any of these, that would be great. I'll hopefully get to them eventually.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-18T13:45:55+00:00](https://github.com/leanprover-community/mathlib/commit/53af714505097a5feebe3e3cfdbfdfff8dca7af1)
chore(*): update to lean 3.16.3 ([#3107](https://github.com/leanprover-community/mathlib/pull/#3107))

The changes to mathlib are from https://github.com/leanprover-community/lean/pull/321 which removed some redundant lemmas:
* `int.of_nat_inj` -> `int.of_nat.inj`
* `int.neg_succ_of_nat_inj` -> `int.neg_succ_of_nat.inj`
* `nat.succ_inj` -> `nat.succ.inj`



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-18T11:39:55+00:00](https://github.com/leanprover-community/mathlib/commit/24792be6322ee73df596e1bebdb7e9215de3522c)
chore(data/finset): minor review ([#3105](https://github.com/leanprover-community/mathlib/pull/#3105))

### [2020-06-18T09:54:38+00:00](https://github.com/leanprover-community/mathlib/commit/eb5b7fb7f406385cd1f2efaa15d9c0923541b955)
fix(tactic/linarith): don't fail trying to preprocess irrelevant hypotheses ([#3104](https://github.com/leanprover-community/mathlib/pull/#3104))




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-18T01:11:41+00:00](https://github.com/leanprover-community/mathlib/commit/b91909e77e219098a2f8cc031f89d595fe274bd2)
chore(category_theory/closed/cartesian): style ([#3098](https://github.com/leanprover-community/mathlib/pull/#3098))

Just breaking long lines, and using braces in a multi-goal proof, for a recently added file.
 ([#2894](https://github.com/leanprover-community/mathlib/pull/#2894))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-17T19:57:11+00:00](https://github.com/leanprover-community/mathlib/commit/b5baf5559ec648925d987c932bde47ebc7df87c9)
feat(algebra/linear_ordered_comm_group_with_zero) define linear_ordered_comm_group_with_zero ([#3072](https://github.com/leanprover-community/mathlib/pull/#3072))

### [2020-06-17T19:10:21+00:00](https://github.com/leanprover-community/mathlib/commit/48c4f400dddeb1ec835251cd70e16e1f4459f7cb)
refactor(measure_theory): make `volume` a bundled measure ([#3075](https://github.com/leanprover-community/mathlib/pull/#3075))

This way we can `apply` and `rw` lemmas about `measure`s without
introducing a `volume`-specific version.

### [2020-06-17T12:07:34+00:00](https://github.com/leanprover-community/mathlib/commit/0736c95c61521f5040666d5832d808f71c537ab8)
chore(order/filter/basic): move some parts to new files ([#3087](https://github.com/leanprover-community/mathlib/pull/#3087))

Move `at_top`/`at_bot`, `cofinite`, and `ultrafilter` to new files.

### [2020-06-17T11:06:54+00:00](https://github.com/leanprover-community/mathlib/commit/077cd7c01bd5b28d613e22c95343df473a5af180)
feat(algebra/category/Algebra): basic setup for category of bundled R-algebras ([#3047](https://github.com/leanprover-community/mathlib/pull/#3047))

Just boilerplate. If I don't run out of enthusiasm I'll do tensor product of R-algebras soon. ([#3050](https://github.com/leanprover-community/mathlib/pull/#3050))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-17T09:57:50+00:00](https://github.com/leanprover-community/mathlib/commit/54441b5dc61db1b6c246709f2871edd773e602ba)
feat(algebra/group_action_hom): define equivariant maps ([#2866](https://github.com/leanprover-community/mathlib/pull/#2866))

### [2020-06-17T03:12:21+00:00](https://github.com/leanprover-community/mathlib/commit/e40de30a5cee5fd7e6298f5075a9c840f55a34a6)
chore(category_theory/closed): move one thing to monoidal closed and fix naming ([#3090](https://github.com/leanprover-community/mathlib/pull/#3090))

Move one of the CCC defs to MCC as an example, and make the naming consistent.

### [2020-06-17T00:45:09+00:00](https://github.com/leanprover-community/mathlib/commit/a19dca67c228f784c9a3321106b939953a6f83ba)
chore(scripts): update nolints.txt ([#3091](https://github.com/leanprover-community/mathlib/pull/#3091))

I am happy to remove some nolints for you!

### [2020-06-16T19:33:00+00:00](https://github.com/leanprover-community/mathlib/commit/e3c9fd8df82a9b668f4a6cb5c6879818854b0c29)
feat(topology): sequential compactness ([#3061](https://github.com/leanprover-community/mathlib/pull/#3061))

This is the long overdue PR bringing Bolzano-Weierstrass to mathlib. I'm sorry it's a bit large. I did use a couple of preliminary PRs, that one is really about converging subsequences, but supporting material is spread in many files.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-06-16T17:58:48+00:00](https://github.com/leanprover-community/mathlib/commit/a478f91b2afdde01b98dc9be042938b8368dafaf)
chore(algebra/ring): move `add_mul_self_eq` to `comm_semiring` ([#3089](https://github.com/leanprover-community/mathlib/pull/#3089))

Also use `alias` instead of `def ... := @...` to make linter happy.

Fixes https://github.com/leanprover-community/lean/issues/232

### [2020-06-16T17:08:01+00:00](https://github.com/leanprover-community/mathlib/commit/ae6bf56270c3922aafe529e0f0672765022f2dce)
feat(ring_theory/tensor_product): tensor product of algebras ([#3050](https://github.com/leanprover-community/mathlib/pull/#3050))

The R-algebra structure on the tensor product of two R-algebras.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-16T06:49:06+00:00](https://github.com/leanprover-community/mathlib/commit/a432a3a193aac390d347835881f48a5e5bac6ed9)
feat(analysis/convex): Carathéodory's convexity theorem ([#2960](https://github.com/leanprover-community/mathlib/pull/#2960))

```
theorem caratheodory (s : set E) :
  convex_hull s = ⋃ (t : finset E) (w : ↑t ⊆ s) (b : t.card ≤ findim ℝ E + 1), convex_hull ↑t
```
and more explicitly
```
theorem eq_center_mass_card_dim_succ_of_mem_convex_hull (s : set E) (x : E) (h : x ∈ convex_hull s) :
  ∃ (t : finset E) (w : ↑t ⊆ s) (b : t.card ≤ findim ℝ E + 1)
    (f : E → ℝ), (∀ y ∈ t, 0 ≤ f y) ∧ t.sum f = 1 ∧ t.center_mass f id = x
```



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-06-16T04:03:38+00:00](https://github.com/leanprover-community/mathlib/commit/b51028f1dcfdcade4ace3b41c3073a19b5a00da7)
chore(linear_algebra/finite_dimensional): lin-indep lemma typos ([#3086](https://github.com/leanprover-community/mathlib/pull/#3086))

### [2020-06-16T02:35:24+00:00](https://github.com/leanprover-community/mathlib/commit/e087174257147f9f8e5f9d0000114262e7e004b6)
feat(linear_algebra/finite_dimensional): bases given by finsets ([#3041](https://github.com/leanprover-community/mathlib/pull/#3041))

In some cases, it might be more straightforward working with finsets of
the vector space instead of indexed types or carrying around a proof of
set.finite. Also provide a lemma on equal dimension
and basis cardinality lemma that uses a finset basis.

Co-authored-by: Scott Morrison scott.morrison@gmail.com

### [2020-06-15T23:58:09+00:00](https://github.com/leanprover-community/mathlib/commit/a7960085b28d4d2b59f500d197d9b1779cbc44c3)
feat(category_theory): cartesian closed categories ([#2894](https://github.com/leanprover-community/mathlib/pull/#2894))

Cartesian closed categories, from my topos project.

Co-authored-by: Scott Morrison <scott@tqft.net>

### [2020-06-15T20:59:03+00:00](https://github.com/leanprover-community/mathlib/commit/25e414d17b30c5192f09947cc66e146db34aa8b5)
feat(tactic/linarith): nlinarith tactic ([#2637](https://github.com/leanprover-community/mathlib/pull/#2637))

Based on Coq's [nra](https://coq.inria.fr/refman/addendum/micromega.html#coq:tacn.nra) tactic, and requested on [Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nonlinear.20linarith).

Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-06-15T16:49:19+00:00](https://github.com/leanprover-community/mathlib/commit/2e752e130127e6419a60930f7d9d52e90efdcefc)
feat(tactic/group): group normalization tactic ([#3062](https://github.com/leanprover-community/mathlib/pull/#3062))

A tactic to normalize expressions in multiplicative groups.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-06-15T15:45:46+00:00](https://github.com/leanprover-community/mathlib/commit/aa35f363adbe106ddb353dada825742599488219)
feat(analysis/hofer): Hofer's lemma ([#3064](https://github.com/leanprover-community/mathlib/pull/#3064))

Adds Hofer's lemma about complete metric spaces, with supporting material.



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-06-15T13:00:34+00:00](https://github.com/leanprover-community/mathlib/commit/4843bb12c51632e7388305588a76c3ed54d82c8c)
chore(linear_algebra/finsupp_vector_space): remove leftover pp.universes ([#3081](https://github.com/leanprover-community/mathlib/pull/#3081))

See also [#1608](https://github.com/leanprover-community/mathlib/pull/#1608).

### [2020-06-15T08:05:05+00:00](https://github.com/leanprover-community/mathlib/commit/758806ec5beb9478dbedfb3f84888dea038f00a8)
feat(linear_algebra/affine_space): more on affine subspaces ([#3076](https://github.com/leanprover-community/mathlib/pull/#3076))

Add extensionality lemmas for affine subspaces, and a constructor to
make an affine subspace from a point and a direction.

### [2020-06-15T02:06:19+00:00](https://github.com/leanprover-community/mathlib/commit/543359cebbef445a4c5f05a0809efb2876f1d847)
feat(field_theory/finite): Chevalley–Warning ([#1564](https://github.com/leanprover-community/mathlib/pull/#1564))

### [2020-06-15T01:22:53+00:00](https://github.com/leanprover-community/mathlib/commit/3a66d9acf42256c1b5883a9fea5e518d16cefe68)
feat(polynomial): generalising some material to (noncomm_)semiring ([#3043](https://github.com/leanprover-community/mathlib/pull/#3043))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-15T00:49:47+00:00](https://github.com/leanprover-community/mathlib/commit/01732f78a1d8d619164484ab06ca4b6f11fab09a)
chore(scripts): update nolints.txt ([#3078](https://github.com/leanprover-community/mathlib/pull/#3078))

I am happy to remove some nolints for you!

### [2020-06-15T00:15:36+00:00](https://github.com/leanprover-community/mathlib/commit/c91fc15073e24f4638629cd6cd5adca68e008e27)
chore(geometry/manifold/real_instances): use euclidean_space ([#3077](https://github.com/leanprover-community/mathlib/pull/#3077))

Now that `euclidean_space` has been refactored to use the product topology, we can fix the geometry file that used a version of the product space (with the sup norm!) called `euclidean_space2`, using now instead the proper `euclidean_space`.

### [2020-06-14T20:40:58+00:00](https://github.com/leanprover-community/mathlib/commit/c4a32e72336c866b0811f3879a38909e72f35123)
doc(topology/uniform_space/basic): library note on forgetful inheritance ([#3070](https://github.com/leanprover-community/mathlib/pull/#3070))

A (long) library note explaining design decisions related to forgetful inheritance, and reference to this note in various places (I have probably forgotten a few of them).

### [2020-06-14T19:26:34+00:00](https://github.com/leanprover-community/mathlib/commit/797177c3959e8a4816973b469d6cef9e553fdf52)
feat(linear_algebra/affine_space): affine combinations of points ([#2979](https://github.com/leanprover-community/mathlib/pull/#2979))

Some basic definitions and lemmas related to affine combinations of
points, in preparation for defining barycentric coordinates for use in
geometry.

This version for sums over a `fintype` is probably the most convenient
for geometrical uses (where the type will be `fin 3` in the case of a
triangle, or more generally `fin (n + 1)` for an n-simplex), but other
use cases may find that `finset` or `finsupp` versions of these
definitions are of use as well.

The definition `weighted_vsub` is expected to be used with weights
that sum to zero, and the definition `affine_combination` is expected
to be used with weights that sum to 1, but such a hypothesis is only
specified for lemmas that need it rather than for those definitions.
I expect that most nontrivial geometric uses of barycentric
coordinates will need to prove such a hypothesis at some point, but
that it will still be more convenient not to need to pass it to all
the definitions and trivial lemmas.




Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-06-14T16:36:35+00:00](https://github.com/leanprover-community/mathlib/commit/77c5dfe25b33ef9c793325ee4d42d179d4447334)
perf(*): avoid `user_attribute.get_param` ([#3073](https://github.com/leanprover-community/mathlib/pull/#3073))

Recent studies have shown that `monoid_localization.lean` is the slowest file in mathlib.  One hundred and three seconds (93%) of its class-leading runtime are spent in constructing the attribute cache for `_to_additive`.  This is due to the use of the `user_attribute.get_param` function inside `get_cache`.  See the [library note on user attribute parameters](https://leanprover-community.github.io/mathlib_docs/notes.html#user%20attribute%20parameters) for more information on this anti-pattern.

This PR removes two uses of `user_attribute.get_param`, one in `to_additive` and the other in `ancestor`.

### [2020-06-14T16:36:33+00:00](https://github.com/leanprover-community/mathlib/commit/0d052998340ffcf75a02d2d08305a4b40901e36c)
chore(data/finset): rename `ext`/`ext'`/`ext_iff` ([#3069](https://github.com/leanprover-community/mathlib/pull/#3069))

Now

* `ext` is the `@[ext]` lemma;
* `ext_iff` is the lemma `s₁ = s₂ ↔ ∀ a, a ∈ s₁ ↔ a ∈ s₂`.

Also add 2 `norm_cast` attributes and a lemma `ssubset_iff_of_subset`.

### [2020-06-14T16:36:31+00:00](https://github.com/leanprover-community/mathlib/commit/1f16da1b4c9b3bf093022e1bc0895b3871110499)
refactor(analysis/normed_space/real_inner_product): extend normed_space in the definition ([#3060](https://github.com/leanprover-community/mathlib/pull/#3060))

Currently, inner product spaces do not extend normed spaces, and a norm is constructed from the inner product. This makes it impossible to put an instance on reals, because it would lead to two non-defeq norms. We refactor inner product spaces to extend normed spaces, with the condition that the norm is equal (but maybe not defeq) to the square root of the inner product, to solve this issue.

The possibility to construct a norm from a well-behaved inner product is still given by a constructor `inner_product_space.of_core`.

We also register the inner product structure on a finite product of inner product spaces (not on the Pi type, which has the sup norm, but on `pi_Lp 2 one_le_two \alpha` which has the right norm).

### [2020-06-14T15:09:35+00:00](https://github.com/leanprover-community/mathlib/commit/85b8bdcb27eaa2c585df75738d5dbd7035f890ab)
perf(tactic/linarith): use key/value lists instead of rb_maps to represent linear expressions ([#3004](https://github.com/leanprover-community/mathlib/pull/#3004))

This has essentially no effect on the test file, but scales much better. 

See discussion at https://leanprover.zulipchat.com/#narrow/stream/187764-Lean-for.20teaching/topic/Real.20analysis for an example which is in reach with this change.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-14T12:37:42+00:00](https://github.com/leanprover-community/mathlib/commit/7f60a62d981f80fad8cd79183d26626b8941f07f)
chore(order/basic): move unbundled order classes to `rel_classes ([#3066](https://github.com/leanprover-community/mathlib/pull/#3066))

Reason: these classes are rarely used in `mathlib`, we don't need to mix them with classes extending `has_le`.

### [2020-06-14T12:37:40+00:00](https://github.com/leanprover-community/mathlib/commit/2c97f23920e75b1d6599ae1b0c4ae9cb8b438025)
feat(tactic/library_search): small improvements ([#3037](https://github.com/leanprover-community/mathlib/pull/#3037))

This makes the following small improvements to `library_search`:

1. ~~Don't use `*.inj` lemmas, which are rarely useful. (Cuts test file from 95 seconds to 90 seconds.)~~
2. Some refactoring for reusability in other tactics.
3. `apply_declaration` now reports how many subgoals were successfully closed by `solve_by_elim` (for use by new tactics)



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-14T12:37:38+00:00](https://github.com/leanprover-community/mathlib/commit/a6534db8a532c6f2f8c761bcf1ce033d496d8327)
feat(normed_space/dual): (topological) dual of a normed space ([#3021](https://github.com/leanprover-community/mathlib/pull/#3021))

Define the topological dual of a normed space, and prove that over the reals, the inclusion into the double dual is an isometry.

Supporting material:  a corollary of Hahn-Banach; material about spans of singletons added to `linear_algebra.basic` and `normed_space.operator_norm`; material about homotheties added to `normed_space.operator_norm`.

### [2020-06-14T11:55:48+00:00](https://github.com/leanprover-community/mathlib/commit/4e8868758386147017537eef427599a26dbfe313)
chore(data/complex/basic): rearrange into sections ([#3068](https://github.com/leanprover-community/mathlib/pull/#3068))

Also:
* reworded some docstrings,
* removed dependence on `deprecated.field` by changing the proofs of `of_real_div` and `of_real_fpow` to use `ring_hom` lemmas instead of `is_ring_hom` lemma,
* renamed the instance `of_real.is_ring_hom` too `coe.is_ring_hom`,
* renamed `real_prod_equiv*` to `equiv_prod_real*`, and
* `conj_two` was removed in favor of `conj_bit0` and `conj_bit1`.

### [2020-06-14T09:10:57+00:00](https://github.com/leanprover-community/mathlib/commit/2cd329fe1de9641c5c06ab960583fc7ce512da0a)
feat(algebra/continued_fractions): add correctness of terminating computations ([#2911](https://github.com/leanprover-community/mathlib/pull/#2911))

### What
Add correctness lemmas for terminating computations of continued fractions

### Why
To show that the continued fractions algorithm is computing the right thing in case of termination. For non-terminating sequences, lemmas about the limit will be added in a later PR.

### How
1. Show that the value to be approximated can always be obtained by adding the corresponding, remaining fractional part stored in `int_fract_pair.stream`.
2. Use this to derive that once the fractional part becomes 0 (and hence the continued fraction terminates), we have exactly computed the value.

Co-authored-by: Kevin Kappelmann <kappelmann@users.noreply.github.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-06-14T08:08:09+00:00](https://github.com/leanprover-community/mathlib/commit/fdc326c0ee8eaf38aef445852d18d9548caf9531)
feat(geometry/euclidean): sum of angles of a triangle ([#2994](https://github.com/leanprover-community/mathlib/pull/#2994))

Item 27 from the 100-theorems list.

### [2020-06-14T04:30:41+00:00](https://github.com/leanprover-community/mathlib/commit/c8c18697d4019608b756edf7989290303a96071a)
refactor(order/basic): make `*order.lift` use `[]` argument ([#3067](https://github.com/leanprover-community/mathlib/pull/#3067))

Take an order on the codomain as a `[*order β]` argument.

### [2020-06-14T01:30:16+00:00](https://github.com/leanprover-community/mathlib/commit/67f72889ee220775ac11e247015d9ef6ac729bec)
doc(measure_theory): document basic measure theory files ([#3057](https://github.com/leanprover-community/mathlib/pull/#3057))

### [2020-06-14T00:41:33+00:00](https://github.com/leanprover-community/mathlib/commit/0f98c37ccb1503349c78efbbaa4800c257ff3384)
chore(scripts): update nolints.txt ([#3065](https://github.com/leanprover-community/mathlib/pull/#3065))

I am happy to remove some nolints for you!

### [2020-06-13T19:37:02+00:00](https://github.com/leanprover-community/mathlib/commit/e33245cac482de78a48189d088e6e616ca4d1753)
feat(topology/metric_space/pi_Lp): L^p distance on finite products ([#3059](https://github.com/leanprover-community/mathlib/pull/#3059))

`L^p` edistance (or distance, or norm) on finite products of emetric spaces (or metric spaces, or normed groups), put on a type synonym `pi_Lp p hp α` to avoid instance clashes, and being careful to register as uniformity the product uniformity.

### [2020-06-13T13:42:10+00:00](https://github.com/leanprover-community/mathlib/commit/cc16d35b642fc1bb838f6a2555b37a32a5465c32)
feat(linear_algebra/finite_dimensional): cardinalities and linear independence ([#3056](https://github.com/leanprover-community/mathlib/pull/#3056))




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-13T12:38:45+00:00](https://github.com/leanprover-community/mathlib/commit/b7048a4e513f0f6cf93ad96726980a6ce403fae2)
feat(tactic/linarith): improve parsing expressions into linear form ([#2995](https://github.com/leanprover-community/mathlib/pull/#2995))

This PR generalizes the parsing stage of `linarith`. It will try harder to recognize expressions as linear combinations of monomials, and will match monomials up to commutativity. 
```lean
example (u v r s t : ℚ) (h : 0 < u*(t*v + t*r + s)) : 0 < (t*(r + v) + s)*3*u :=
by linarith
```

This is helpful for [#2637](https://github.com/leanprover-community/mathlib/pull/#2637) .



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-13T11:08:59+00:00](https://github.com/leanprover-community/mathlib/commit/4bb29abb0984b69458768866d5de180967017723)
doc(algebra/group/to_additive): add doc strings and tactic doc entry ([#3055](https://github.com/leanprover-community/mathlib/pull/#3055))

### [2020-06-13T11:08:57+00:00](https://github.com/leanprover-community/mathlib/commit/a22b657ff39351d4d73ec0a9800b94e328d76e53)
refactor(topology/uniform_space): docstring and notation ([#3052](https://github.com/leanprover-community/mathlib/pull/#3052))

The goal of this PR is to make `topology/uniform_space/basic.lean` more accessible. 

First it introduces the standard notation for relation composition that was inexplicably not used before. I used a non-standard unicode circle here `\ciw` but this is up for discussion as long as it looks like a composition circle.

Then I introduced balls as discussed on [this Zulip topic](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notations.20for.20uniform.20spaces).  There could be used more, but at least this should be mostly sufficient for following PRs.

And of course I put a huge module docstring. As with `order/filter/basic.lean`, I think we need more mathematical explanations than in the average mathlib file.

I also added a bit of content about symmetric entourages but I don't have enough courage to split this off unless someone really insists.

### [2020-06-13T09:51:05+00:00](https://github.com/leanprover-community/mathlib/commit/938b73a4cc852b643a31334cf89df4f29ac0784a)
feat(topology/metric_space/pi_lp): Holder and Minkowski inequalities in ennreal ([#2988](https://github.com/leanprover-community/mathlib/pull/#2988))

Hölder and Minkowski inequalities for finite sums. Versions for ennreals.

### [2020-06-13T09:19:08+00:00](https://github.com/leanprover-community/mathlib/commit/dc69dc3574b5ae09a795adcdbbe77de509e36b01)
refactor(ci): only update nolints once a day ([#3036](https://github.com/leanprover-community/mathlib/pull/#3036))

This PR moves the update nolints step to a new GitHub actions workflow `update_nolints.yml` which runs once a day.

### [2020-06-13T07:27:55+00:00](https://github.com/leanprover-community/mathlib/commit/1645542c9a3b3962424b15ded7ad5ac8be3c8b2c)
feat(linear_algebra): elements of a dim zero space ([#3054](https://github.com/leanprover-community/mathlib/pull/#3054))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-12T18:08:42+00:00](https://github.com/leanprover-community/mathlib/commit/51ad2a1867bdf25ae61b432c8105ec9da4cc93f1)
chore(*): update to Lean 3.16.2c ([#3053](https://github.com/leanprover-community/mathlib/pull/#3053))

### [2020-06-12T18:08:40+00:00](https://github.com/leanprover-community/mathlib/commit/ce594be5ec0d0bdfaf2ebb27b132367db5d65eae)
feat(linear_algebra/affine_space): define a few affine maps ([#2981](https://github.com/leanprover-community/mathlib/pull/#2981))

### [2020-06-12T16:33:01+00:00](https://github.com/leanprover-community/mathlib/commit/14292790529293a7ebc8caa70fc26b374e52a799)
feat(data/*): lemmas converting finset, set.finite, and their card ([#3042](https://github.com/leanprover-community/mathlib/pull/#3042))

Co-authored-by: Kenny Lau kc_kennylau@yahoo.com.hk

### [2020-06-12T16:32:59+00:00](https://github.com/leanprover-community/mathlib/commit/c955537e0bcd324880e25f7c1d8505d44f52aa14)
fix(library_search): only unfold reducible definitions when matching ([#3038](https://github.com/leanprover-community/mathlib/pull/#3038))

By default `library_search` only unfolds `reducible` definitions
when attempting to match lemmas against the goal.
Previously, it would unfold most definitions, sometimes giving surprising answers, or slow answers.
The old behaviour is still available via `library_search!`.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-12T15:35:03+00:00](https://github.com/leanprover-community/mathlib/commit/5c0000c0d7246dfefe6b578e2136ba54d5dee1eb)
chore(*): remove extra author info ([#3051](https://github.com/leanprover-community/mathlib/pull/#3051))

Removing changes to author headers in files with recent changes. Authorship should be cited in the headers only for significant contributions.

### [2020-06-12T13:27:48+00:00](https://github.com/leanprover-community/mathlib/commit/64461b839133afd3e8088d1ef5d203fde3a8571c)
chore(scripts): update nolints.txt ([#3049](https://github.com/leanprover-community/mathlib/pull/#3049))

I am happy to remove some nolints for you!

### [2020-06-12T12:19:15+00:00](https://github.com/leanprover-community/mathlib/commit/6aa24643a63735e8d96075d1819c7aa84356294d)
chore(scripts): update nolints.txt ([#3048](https://github.com/leanprover-community/mathlib/pull/#3048))

I am happy to remove some nolints for you!

### [2020-06-12T11:43:13+00:00](https://github.com/leanprover-community/mathlib/commit/f78693db5f4d14cf6335ac304c8eb5542330d18d)
chore(data/complex/exponential): linting and pp_nodot ([#3045](https://github.com/leanprover-community/mathlib/pull/#3045))

### [2020-06-12T11:43:11+00:00](https://github.com/leanprover-community/mathlib/commit/5808afcb4ed2e34fa92bec6b79b0668ecd59451e)
feat(analysis/mean_inequalities): Holder and Minkowski inequalities ([#3025](https://github.com/leanprover-community/mathlib/pull/#3025))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-06-12T11:10:43+00:00](https://github.com/leanprover-community/mathlib/commit/27a094663223f4ddf54255f828f6e9dd409f4d73)
chore(scripts): update nolints.txt ([#3046](https://github.com/leanprover-community/mathlib/pull/#3046))

I am happy to remove some nolints for you!

### [2020-06-12T10:19:27+00:00](https://github.com/leanprover-community/mathlib/commit/30e620ceba928dda716d91d9f26b75480c40021e)
chore(data/real/cau_seq): linting ([#3040](https://github.com/leanprover-community/mathlib/pull/#3040))

### [2020-06-12T09:31:29+00:00](https://github.com/leanprover-community/mathlib/commit/0f6b3ca41dc9ce63a283a302e805650688eabee4)
doc(data/complex/basic): docstrings and pp_nodots ([#3044](https://github.com/leanprover-community/mathlib/pull/#3044))

### [2020-06-12T05:32:43+00:00](https://github.com/leanprover-community/mathlib/commit/96676a76c77f9a53269dc59cf0e0a16d9372b804)
chore(scripts): update nolints.txt ([#3039](https://github.com/leanprover-community/mathlib/pull/#3039))

I am happy to remove some nolints for you!

### [2020-06-12T03:49:42+00:00](https://github.com/leanprover-community/mathlib/commit/4ec7cc58e126b736de864b91649c0f7f3d6a7d48)
refactor(*): fix field names in `linear_map` and `submodule` ([#3032](https://github.com/leanprover-community/mathlib/pull/#3032))

* `linear_map` now uses `map_add'` and `map_smul`';
* `submodule` now `extends add_submonoid` and adds `smul_mem'`;
* no more `submodule.is_add_subgroup` instance;
* `open_subgroup` now uses bundled subgroups;
* `is_linear_map` is not a `class` anymore: we had a couple of
  `instances` but zero lemmas taking it as a typeclass argument;
* `subgroup.mem_coe` now takes `{g : G}` as it should, not `[g : G]`.

### [2020-06-12T02:45:20+00:00](https://github.com/leanprover-community/mathlib/commit/338bbd20354b2bc390942de3d02a45f76a5cf379)
chore(measure/theory): remove useless module instances ([#3031](https://github.com/leanprover-community/mathlib/pull/#3031))

Remove useless `module` and `vector_space` instances, as these words are now synonyms of `semimodule`.

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-06-11T22:32:06+00:00](https://github.com/leanprover-community/mathlib/commit/593f731dd200fe74c218ff9886eb663d4a860dcd)
chore(scripts): update nolints.txt ([#3035](https://github.com/leanprover-community/mathlib/pull/#3035))

I am happy to remove some nolints for you!

### [2020-06-11T21:56:33+00:00](https://github.com/leanprover-community/mathlib/commit/5444945dfcd1c96a6468369e38dd6e1b4bfe180f)
chore(scripts): update nolints.txt ([#3034](https://github.com/leanprover-community/mathlib/pull/#3034))

I am happy to remove some nolints for you!

### [2020-06-11T21:56:31+00:00](https://github.com/leanprover-community/mathlib/commit/f71e35978a5a729f80ebdbcd4493deca669ece5c)
chore(ring_theory/power_series): avoid id in instances ([#3033](https://github.com/leanprover-community/mathlib/pull/#3033))

The power series instances contain a spurious `id`, that we remove.

### [2020-06-11T20:24:50+00:00](https://github.com/leanprover-community/mathlib/commit/9a7151c7359509623afb1411bf3f1953da823b61)
feat(data/finsupp): set.finite {m | m ≤ n} ([#3029](https://github.com/leanprover-community/mathlib/pull/#3029))

### [2020-06-11T20:24:48+00:00](https://github.com/leanprover-community/mathlib/commit/666b9e59ae85704defe698221d4415b614d567d6)
refactor(analysis/mean_inequalities): review ([#3023](https://github.com/leanprover-community/mathlib/pull/#3023))

Also add several lemmas to other files

### [2020-06-11T18:53:58+00:00](https://github.com/leanprover-community/mathlib/commit/257d1b7c0e5bd4baf3032c265c92d709d685d338)
feat(*): preparations for Caratheodory's convexity theorem ([#3030](https://github.com/leanprover-community/mathlib/pull/#3030))

### [2020-06-11T18:53:56+00:00](https://github.com/leanprover-community/mathlib/commit/447a2d6c4e74e33eb26d3c88b58649dc413722d8)
chore(data/matrix/basic): move numeral section into diagonal ([#3022](https://github.com/leanprover-community/mathlib/pull/#3022))

Since the numeral section defines numerals for matrices as scalar
multiples of `one_val`, which is the identity matrix, these are defined
solely for diagonal matrices of type `matrix n n r`. So the numeral
section should be in the diagonal section.




Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-06-11T18:19:12+00:00](https://github.com/leanprover-community/mathlib/commit/1df93013f7f625c9dc1fc412ad7304ecdfab2573)
feat(group_theory/semidirect_product): introduce semidirect_products of groups ([#3028](https://github.com/leanprover-community/mathlib/pull/#3028))



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-06-11T15:35:28+00:00](https://github.com/leanprover-community/mathlib/commit/ce48b6ba77a02430c098f26f3fcc3c11e516179b)
chore(data/finsupp): drop `finsupp.module` and `vector_space` ([#3009](https://github.com/leanprover-community/mathlib/pull/#3009))

These instances are not needed as `module` and `vector_space` are abbreviations for `semimodule`.

Also add two bundled versions of `eval`: as `add_monoid_hom` and as `linear_map`.

### [2020-06-11T11:41:18+00:00](https://github.com/leanprover-community/mathlib/commit/cf0c6b838b9857f1fa11c651cb07216edc4a2875)
chore(*): use prod and sum notation ([#3027](https://github.com/leanprover-community/mathlib/pull/#3027))

### [2020-06-11T09:43:11+00:00](https://github.com/leanprover-community/mathlib/commit/5129aed5856268a162dda9fd5e722d43eea2b050)
chore(algebra/group/to_additive): improve warning message ([#3024](https://github.com/leanprover-community/mathlib/pull/#3024))

Also prevent `group_theory/subgroup` from generating this warning.

### [2020-06-11T08:03:33+00:00](https://github.com/leanprover-community/mathlib/commit/ade196f8b7c38d4918b55be04a55c79e5df5ec15)
chore(scripts): update nolints.txt ([#3026](https://github.com/leanprover-community/mathlib/pull/#3026))

I am happy to remove some nolints for you!

### [2020-06-11T06:36:39+00:00](https://github.com/leanprover-community/mathlib/commit/8863666a745895c9162b2f13ac47a02f53f5f95d)
feat(ring_theory/ideals): prod_dvd_of_coprime ([#2815](https://github.com/leanprover-community/mathlib/pull/#2815))



Co-authored-by: kckennylau <kc_kennylau@yahoo.com.hk>

### [2020-06-10T19:03:46+00:00](https://github.com/leanprover-community/mathlib/commit/2779093b6dbd96f9fe8b8ccdf9a6a4f1b72d25d4)
feat(linear_algebra/matrix): matrix has finite dim  ([#3013](https://github.com/leanprover-community/mathlib/pull/#3013))

Using the fact that currying is a linear operation, we give matrix
a finite dimensional instance. This allows one to invoke `findim`
on matrices, giving the expected dimensions for a finite-dim matrix.

The import is changed to linear_algebra.finite_dimension,
which brings in the previous linear_algebra.dimension import.



Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Yakov Pechersky <pechersky@users.noreply.github.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-06-10T15:54:19+00:00](https://github.com/leanprover-community/mathlib/commit/067a96b7a8c82e3d87ce7e638243013053e35c94)
chore(*): update to lean 3.16.1c ([#3020](https://github.com/leanprover-community/mathlib/pull/#3020))

### [2020-06-10T15:54:17+00:00](https://github.com/leanprover-community/mathlib/commit/76e7d2986381f498bbb0845fdcf5fc45c501bc7a)
chore(scripts): update nolints.txt ([#3019](https://github.com/leanprover-community/mathlib/pull/#3019))

I am happy to remove some nolints for you!

### [2020-06-10T15:54:15+00:00](https://github.com/leanprover-community/mathlib/commit/f7654b3fdf04fe823592b77199ff989623b8ff4d)
feat(tactic/generalizes): tactic for generalizing over multiple expressions ([#2982](https://github.com/leanprover-community/mathlib/pull/#2982))

This commit adds a tactic `generalizes` which works like `generalize` but for multiple expressions at once. The tactic is more powerful than calling `generalize` multiple times since this usually fails when there are dependencies between the expressions. By contrast, `generalizes` handles at least some such situations.



Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2020-06-10T14:24:39+00:00](https://github.com/leanprover-community/mathlib/commit/daed8a41c379385c0beb1184f37d43870d6f8607)
style(*): use rcases patterns with ext ([#3018](https://github.com/leanprover-community/mathlib/pull/#3018))



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-10T14:24:37+00:00](https://github.com/leanprover-community/mathlib/commit/026d639f55e269a20f827aa61c62e39130309b23)
ci(build.yml): add -T100000 to test step ([#3017](https://github.com/leanprover-community/mathlib/pull/#3017))

cf. [#2276](https://github.com/leanprover-community/mathlib/pull/#2276).  This will also prevent some confusing timeouts, see e.g. https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Tests.20fail

### [2020-06-10T12:50:03+00:00](https://github.com/leanprover-community/mathlib/commit/614d1cad0e6071434e5605539d53c3378ae69d80)
chore(*): update to lean 3.16.0 ([#3016](https://github.com/leanprover-community/mathlib/pull/#3016))

The only change relevant to mathlib is that the precedence of unary `-` has changed, so that `-a^n` parses as `-(a^n)` and not (as formerly) `(-a)^n`.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-06-10T12:50:01+00:00](https://github.com/leanprover-community/mathlib/commit/4b622613bc4671224d411c1ff5df712450d3cb14)
chore(algebra/field): deduplicate with group_with_zero ([#3015](https://github.com/leanprover-community/mathlib/pull/#3015))

For historical reasons there are lots of lemmas we prove for `group_with_zero`, then again for a `division_ring`. Merge some of them.



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-06-10T12:49:59+00:00](https://github.com/leanprover-community/mathlib/commit/b427ebf99abfbe67af71f01cd651a965ea40f410)
chore(data/equiv/basic): add many docstrings, review ([#3008](https://github.com/leanprover-community/mathlib/pull/#3008))

Non-docstring changes:

* drop `decidable_eq_of_equiv` (was a copy of `equiv.decidable_eq`);
* rename `inhabited_of_equiv` to `equiv.inhabited`;
* rename `unique_of_equiv` to `equiv.unique`, take `unique β` as an
  instance argument;
* better defeq for `equiv.list_equiv_of_equiv`;
* use `coe` instead of `subtype.val` in `equiv.set.union'`;
* use `s ∩ t ⊆ ∅` instead of `s ∩ t = ∅` in `equiv.set.union`;
  this way it agrees with `disjoint`;
* use `[decidable_pred (λ x, x ∈ s)]` instead of `[decidable_pred s]`
  in `equiv.set.union`;
* use `coe` instead of `subtype.val` in `equiv.set.sep`;
* make `f` an explicit argument in `equiv.of_bijective f hf`;



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-06-10T12:49:57+00:00](https://github.com/leanprover-community/mathlib/commit/671284e3802df0cce88b464c4811d6b0d816f2ec)
feat(control/equiv_functor/instances): allow equiv_rw on finset ([#2997](https://github.com/leanprover-community/mathlib/pull/#2997))

Allows moving `finset` over an `equiv` using `equiv_rw`, as requested by @jcommelin.

e.g.
```
import data.finset
import tactic.equiv_rw

example (σ τ : Type) (e : σ ≃ τ) : finset σ ≃ finset τ :=
by { equiv_rw e, refl, }
```




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-10T11:19:50+00:00](https://github.com/leanprover-community/mathlib/commit/b932a51056c3c46004f45b616c157a8f353a3f1a)
feat(data/set/function): add lemmas about `semiconj` ([#3007](https://github.com/leanprover-community/mathlib/pull/#3007))

Also redefine `set.maps_to` to avoid unfolding `mem_preimage`.

### [2020-06-10T09:47:17+00:00](https://github.com/leanprover-community/mathlib/commit/836c0a26405daf50a495632819565f8f9413bdc8)
chore(*): use sum notation ([#3014](https://github.com/leanprover-community/mathlib/pull/#3014))

The biggest field test of the new summation notation.

### [2020-06-10T08:49:53+00:00](https://github.com/leanprover-community/mathlib/commit/d9934b2681b12b9b5558b6913f80c037e1be7a9a)
feat(linear_algebra/basic): curry is linear_equiv ([#3012](https://github.com/leanprover-community/mathlib/pull/#3012))

Currying provides a linear_equiv. This can be used to show that
matrix lookup is a linear operation. This should allow to easily
provide a finite_dimensional instance for matrices.



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-06-10T07:15:39+00:00](https://github.com/leanprover-community/mathlib/commit/6a0412e9c3d5fb244ff666fde0cb1ee432eb920d)
chore(data/fintype): generalise `to_finset_card` ([#2316](https://github.com/leanprover-community/mathlib/pull/#2316))

Slight generalisation of a lemma, allowing a more flexible `fintype` instance.

Also americanises some spelling. :-)

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-10T00:06:07+00:00](https://github.com/leanprover-community/mathlib/commit/f1df14c2214ee114c9738e733efd5de174deb95d)
feat(group_theory/subgroup): normal_closure and gpowers ([#2959](https://github.com/leanprover-community/mathlib/pull/#2959))

Transfer some more proofs from `deprecated/subgroup`



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-06-09T21:53:37+00:00](https://github.com/leanprover-community/mathlib/commit/4e1558bf03f5488efa14f449aa7db850c5f89d0b)
chore(algebra/group_power): simp attribute on nsmul_eq_mul and gsmul_eq_mul ([#2983](https://github.com/leanprover-community/mathlib/pull/#2983))

Also fix the resulting lint failures, corresponding to the fact that several lemmas are not in simp normal form any more.

### [2020-06-09T20:16:58+00:00](https://github.com/leanprover-community/mathlib/commit/a02ab48a53afad948228202cb375ae261e395006)
refactor(group_theory/subgroup): swap `mul_mem_cancel_left/right` ([#3011](https://github.com/leanprover-community/mathlib/pull/#3011))

This way the name follows the position of the term we cancel.

### [2020-06-09T19:36:31+00:00](https://github.com/leanprover-community/mathlib/commit/df34ee20df5f60e92116b5af0b3e0f78c7ad1648)
chore(scripts): update nolints.txt ([#3010](https://github.com/leanprover-community/mathlib/pull/#3010))

I am happy to remove some nolints for you!

### [2020-06-09T17:36:44+00:00](https://github.com/leanprover-community/mathlib/commit/1a4f0c225f3f21a6e9781c46cf6a236f1456d3a8)
refactor(algebra/ordered_group): multiplicative versions of ordered monoids/groups ([#2844](https://github.com/leanprover-community/mathlib/pull/#2844))

This PR defines multiplicative versions of ordered monoids and groups. It also lints the file.

### [2020-06-09T17:00:44+00:00](https://github.com/leanprover-community/mathlib/commit/f098c16eb551c2f1d3db2e4c099adf250d78cfbc)
feat(ring_theory/localization): more lemmas and defs about fields of fractions ([#3005](https://github.com/leanprover-community/mathlib/pull/#3005))

### [2020-06-09T12:21:46+00:00](https://github.com/leanprover-community/mathlib/commit/ccdf1d27f65f622efd0df3259c782abf9e68d2d7)
feat(category_theory/limits): prod.lift_comp_comp ([#2968](https://github.com/leanprover-community/mathlib/pull/#2968))

### [2020-06-09T11:36:39+00:00](https://github.com/leanprover-community/mathlib/commit/7cb0a85194218671094931492c5bb8c9f6128b86)
refactor(topology): rename `lim` to `Lim` ([#2977](https://github.com/leanprover-community/mathlib/pull/#2977))

Also introduce `lim (f : filter α) (g : α → β)`.

### [2020-06-09T11:05:31+00:00](https://github.com/leanprover-community/mathlib/commit/76792dccdb7a060bf3fc89e674f057ac5069f859)
feat(algebra/add_torsor): add `prod.add_torsor` ([#2980](https://github.com/leanprover-community/mathlib/pull/#2980))

### [2020-06-09T09:07:38+00:00](https://github.com/leanprover-community/mathlib/commit/42813431b3035d00ecde7f4a8bfe2c8b2d845334)
refactor(data/polynomial): redefine `C` as an `alg_hom` ([#3003](https://github.com/leanprover-community/mathlib/pull/#3003))

As a side effect Lean parses `C 1` as `polynomial nat`. If you need `polynomial R`, then use `C (1:R)`.

### [2020-06-09T08:13:56+00:00](https://github.com/leanprover-community/mathlib/commit/34302c63c8cd09c4b6eb6e5a720aa694c7ac4384)
chore(ring_theory/algebra): add comments explaining absence of 2 `simp` attrs ([#3002](https://github.com/leanprover-community/mathlib/pull/#3002))

### [2020-06-09T08:13:54+00:00](https://github.com/leanprover-community/mathlib/commit/03c345ffad99d3ee013d8819f4fa373cf59eea2a)
chore(data/real/nnreal): +2 lemmas ([#3000](https://github.com/leanprover-community/mathlib/pull/#3000))

### [2020-06-09T08:13:52+00:00](https://github.com/leanprover-community/mathlib/commit/10914620c767c0b7cfc3331b238b59ec47965786)
feat(analysis/special_functions/pow): `inv_rpow`, `div_rpow` ([#2999](https://github.com/leanprover-community/mathlib/pull/#2999))

Also use notation `ℝ≥0` and use `nnreal.eq` instead of `rw ← nnreal.coe_eq`.

### [2020-06-09T07:06:53+00:00](https://github.com/leanprover-community/mathlib/commit/45567dccd25b50ca9ce55a53b7e118805ef350e6)
chore(algebra/big_operators): add `@[simp] lemma sum_eq_zero_iff` ([#2998](https://github.com/leanprover-community/mathlib/pull/#2998))

### [2020-06-09T05:24:03+00:00](https://github.com/leanprover-community/mathlib/commit/24ce416aeaa45c13d12a9a12e7c23648caf99c79)
chore(data/matrix/basic): clean up of new lemmas on matrix numerals ([#2996](https://github.com/leanprover-community/mathlib/pull/#2996))

Generalise and improve use of `@[simp]` for some newly added lemmas about matrix numerals.



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-08T20:32:11+00:00](https://github.com/leanprover-community/mathlib/commit/7bb2d89fd61cac8184d206682786a127f55e61f9)
feat(dynamics/fixed_points/topology): new file ([#2991](https://github.com/leanprover-community/mathlib/pull/#2991))

* Move `is_fixed_pt_of_tendsto_iterate` from
  `topology.metric_space.contracting`, reformulate it without `∃`.
* Add `is_closed_fixed_points`.
* Move `dynamics.fixed_points` to `dynamics.fixed_points.basic`.

### [2020-06-08T19:36:45+00:00](https://github.com/leanprover-community/mathlib/commit/470ccd328e15391cf328e0e006e13a06ff7d7b29)
chore(scripts): update nolints.txt ([#2993](https://github.com/leanprover-community/mathlib/pull/#2993))

I am happy to remove some nolints for you!

### [2020-06-08T19:36:43+00:00](https://github.com/leanprover-community/mathlib/commit/94dedddf4dcc77f4eaff710e87f06d5fd9037ccb)
feat(data/real/conjugate_exponents): define real conjugate exponents ([#2992](https://github.com/leanprover-community/mathlib/pull/#2992))

### [2020-06-08T19:36:41+00:00](https://github.com/leanprover-community/mathlib/commit/4ee67acbb979efe044f808dddf120fddc21d839e)
chore(*): use prod notation ([#2989](https://github.com/leanprover-community/mathlib/pull/#2989))

The biggest field test of the new product notation.

### [2020-06-08T19:36:39+00:00](https://github.com/leanprover-community/mathlib/commit/a377993a8cd68f7e65aabdadf3103bd2ed9662fa)
feat(geometry/euclidean): angles and some basic lemmas ([#2865](https://github.com/leanprover-community/mathlib/pull/#2865))

Define angles (undirected, between 0 and π, in terms of inner
product), and prove some basic lemmas involving angles, for real inner
product spaces and Euclidean affine spaces.

From the 100-theorems list, this provides versions of
* 04 Pythagorean Theorem,
* 65 Isosceles Triangle Theorem and
* 94 The Law of Cosines, with various existing definitions implicitly providing
* 91 The Triangle Inequality.

### [2020-06-08T19:05:30+00:00](https://github.com/leanprover-community/mathlib/commit/dbbd696dd70936cdde1b8d0079d24542be25082b)
feat(order/ideal): order ideals, cofinal sets and the Rasiowa-Sikorski lemma ([#2850](https://github.com/leanprover-community/mathlib/pull/#2850))

We define order ideals and cofinal sets, and use them to prove the (very simple) Rasiowa-Sikorski lemma: given a countable family of cofinal subsets of an inhabited preorder, there is an upwards directed set meeting each one. This provides an API for certain recursive constructions.

### [2020-06-08T17:34:19+00:00](https://github.com/leanprover-community/mathlib/commit/d204daa5db57d1ae9fbe6aef9876082a69d4f1b4)
chore(*): add docs and nolints ([#2990](https://github.com/leanprover-community/mathlib/pull/#2990))

Other changes:

* Reuse `gmultiples_hom` for `AddCommGroup.as_hom`.
* Reuse `add_monoid_hom.ext_int` for `AddCommGroup.int_hom_ext`.
* Drop the following definitions, define an `instance` right away
  instead:
  - `algebra.div`;
  - `monoid_hom.one`, `add_monoid_hom.zero`;
  - `monoid_hom.mul`, `add_monoid_hom.add`;
  - `monoid_hom.inv`, `add_monoid_hom.neg`.

### [2020-06-08T17:34:17+00:00](https://github.com/leanprover-community/mathlib/commit/9fba817f812cc102633fd51f97458747695d828d)
refactor(algebra/*): move `commute` below `ring` in `import`s ([#2973](https://github.com/leanprover-community/mathlib/pull/#2973))

Fixes [#1865](https://github.com/leanprover-community/mathlib/pull/#1865)

API changes:

* drop lemmas about unbundled `center`;
* add `to_additive` to `semiconj_by` and `commute`;
* drop `inv_comm_of_comm` in favor of `commute.left_inv`,
  same with `inv_comm_of_comm` and `commute.left_inv'`;
* rename `monoid_hom.map_commute` to `commute.map`, same with
  `semiconj_by`;
* drop `commute.cast_*_*` and `nat/int/rat.mul_cast_comm`, add
  `nat/int/rat.cast_commute` and `nat.int.rat.commute_cast`;
* add `commute.mul_fpow`.

### [2020-06-08T16:39:55+00:00](https://github.com/leanprover-community/mathlib/commit/2caf479d7a4a1ae9d42c2f3e6714ebe75224dc5b)
feat(data/matrix/basic): add bit0, bit1 lemmas ([#2987](https://github.com/leanprover-community/mathlib/pull/#2987))

Based on a conversation in
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Matrix.20equality.20by.20extensionality
we define simp lemmas for matrices represented by numerals.
This should result in better representation of scalar multiples of
 `one_val : matrix n n a`.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-08T15:06:15+00:00](https://github.com/leanprover-community/mathlib/commit/3ca4c2702681c96b8626dd832779b91bb800ff03)
chore(algebra/ordered_ring): use le instead of ge ([#2986](https://github.com/leanprover-community/mathlib/pull/#2986))

### [2020-06-08T15:06:12+00:00](https://github.com/leanprover-community/mathlib/commit/47f733562c1ef46033a7dbc54ef76679c83b5c7a)
feat(data/nat/digits): digits, and divisibility tests for Freek 85 ([#2686](https://github.com/leanprover-community/mathlib/pull/#2686))

I couldn't quite believe how much low hanging fruit there is on Lean's attempt at Freek's list, and so took a moment to do surely the lowest of the low...

This provides `digits b n`, which extracts the digits of a natural number `n` with respect to a base `b`, and `of_digits b L`, which reconstitutes a number from its digits, proves a few simple facts about these functions, and proves the usual divisibility by 3, 9, and 11 tests.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-06-08T13:54:41+00:00](https://github.com/leanprover-community/mathlib/commit/a79304255d549d74e1ab51e087801ad6e75fd434)
feat(ring_theory/fractional_ideal): pushforward of fractional ideals ([#2984](https://github.com/leanprover-community/mathlib/pull/#2984))

Extend `submodule.map` to fractional ideals by showing that the pushforward is also fractional.

For this, we need a slightly tweaked definition of fractional ideal: if we localize `R` at the submonoid `S`, the old definition required a nonzero `x : R` such that `xI ≤ R`, and the new definition requires `x ∈ S` instead. In the most common case, `S = non_zero_divisors R`, the results are exactly the same, and all operations are still the same.

A practical use of these pushforwards is included: `canonical_equiv` states fractional ideals don't depend on choice of localization map.

Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-06-08T07:55:43+00:00](https://github.com/leanprover-community/mathlib/commit/c360e01ab5c8e34bbecffae8d7c038b60c347da4)
feat(ring/localization): add fraction map for int to rat cast ([#2921](https://github.com/leanprover-community/mathlib/pull/#2921))



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-06-08T07:00:32+00:00](https://github.com/leanprover-community/mathlib/commit/592f769e19fceea7c5bd57cc565598e2c900b216)
feat(dynamics/circle): define translation number of a lift of a circle homeo ([#2974](https://github.com/leanprover-community/mathlib/pull/#2974))

Define a structure `circle_deg1_lift`, a function `translation_number : circle_deg1_lift → ℝ`, and prove some basic properties

### [2020-06-07T17:42:45+00:00](https://github.com/leanprover-community/mathlib/commit/edd02097d1d7bffad1c014682afbdfd00fc2c761)
ci(deploy_docs.sh): generalize for use in doc-gen CI ([#2978](https://github.com/leanprover-community/mathlib/pull/#2978))

This moves some installation steps out of `deploy_docs.sh` script and makes it accept several path arguments so that it can be re-used in the CI for `doc-gen`. 

The associated `doc-gen` PR: https://github.com/leanprover-community/doc-gen/pull/27 will be updated after this is merged.

### [2020-06-07T16:14:35+00:00](https://github.com/leanprover-community/mathlib/commit/be21b9a4943c04b6549259039bed016d93c8df7f)
fix(data/nat/basic): use protected attribute ([#2976](https://github.com/leanprover-community/mathlib/pull/#2976))




Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-07T11:42:06+00:00](https://github.com/leanprover-community/mathlib/commit/516d9b5488952c86a6da185d3a21f08bd9168dad)
chore(scripts): update nolints.txt ([#2975](https://github.com/leanprover-community/mathlib/pull/#2975))

I am happy to remove some nolints for you!

### [2020-06-07T09:39:31+00:00](https://github.com/leanprover-community/mathlib/commit/a7f0069c04cb1cf40f7812b1218da94106e8a80a)
chore(algebra/ring): fix docs, `def`/`lemma` ([#2972](https://github.com/leanprover-community/mathlib/pull/#2972))



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-06-07T04:23:17+00:00](https://github.com/leanprover-community/mathlib/commit/16ad1b41f9e1a067dd69566c5b75243e21bca241)
chore(topology/basic): remove unneeded `mk_protected` ([#2971](https://github.com/leanprover-community/mathlib/pull/#2971))

It was already fixed by adding `@[protect_proj]`.

### [2020-06-07T03:29:48+00:00](https://github.com/leanprover-community/mathlib/commit/b59f777c36e8fb1fe148bfd4979c0b31095e0aec)
feat(category_theory/eq_to_hom): functor extensionality using heq ([#2712](https://github.com/leanprover-community/mathlib/pull/#2712))

Used in https://github.com/rwbarton/lean-homotopy-theory.
Also proves `faithful.div_comp`, but using it would create an import loop
so for now I just leave a comment.

### [2020-06-06T20:56:40+00:00](https://github.com/leanprover-community/mathlib/commit/2a36d256a8e095c460a587f504a4125662431163)
chore(analysis/normed_space/mazur_ulam): add `to_affine_map` ([#2963](https://github.com/leanprover-community/mathlib/pull/#2963))

### [2020-06-06T18:14:53+00:00](https://github.com/leanprover-community/mathlib/commit/a44c9a187dc4c675e01e6a318a7d22499fc3ab45)
chore(*): protect some definitions to get rid of _root_ ([#2846](https://github.com/leanprover-community/mathlib/pull/#2846))

These were amongst the worst offenders.

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-06-06T17:40:41+00:00](https://github.com/leanprover-community/mathlib/commit/e48c2af4f2f92c2331a912c588610db73085939d)
feat(data/padics/padic_norm): New padic_val_nat convenience functions ([#2970](https://github.com/leanprover-community/mathlib/pull/#2970))

Convenience functions to allow us to deal either with the p-adic valuation or with multiplicity in the naturals, depending on what is locally convenient.

### [2020-06-06T17:40:39+00:00](https://github.com/leanprover-community/mathlib/commit/589bdb97b6e51622117a0653169d4be0e266fb63)
feat(number_theory/lucas_lehmer): prime (2^127 - 1) ([#2842](https://github.com/leanprover-community/mathlib/pull/#2842))

This PR
1. proves the sufficiency of the Lucas-Lehmer test for Mersenne primes
2. provides a tactic that uses `norm_num` to do each step of the calculation of Lucas-Lehmer residues
3. proves 2^127 - 1 = 170141183460469231731687303715884105727 is prime

It doesn't
1. prove the necessity of the Lucas-Lehmer test (mathlib certainly has the necessary material if someone wants to do this)
2. use the trick `n ≡ (n % 2^p) + (n / 2^p) [MOD 2^p - 1]` that is essential to calculating Lucas-Lehmer residues quickly
3. manage to prove any "computer era" primes are prime! (Although my guess is that 2^521 - 1 would run in <1 day with the current implementation.)

I think using "the trick" is very plausible, and would be a fun project for someone who wanted to experiment with certified/fast arithmetic in Lean. It likely would make much larger Mersenne primes accessible.

This is a tidy-up and completion of work started by a student, Ainsley Pahljina.

### [2020-06-06T15:39:02+00:00](https://github.com/leanprover-community/mathlib/commit/ed5f63608ed6be6b7882ee8659a9f34c44313423)
chore(algebra/group_with_zero_power): review ([#2966](https://github.com/leanprover-community/mathlib/pull/#2966))

List of changes:
* Rename `gpow_neg_succ` to `gpow_neg_succ_of_nat` to match other names in `int` namespace.
* Add `units.coe_gpow`.
* Remove `fpow_neg_succ`, leave `fpow_neg_succ_of_nat`.
* Rewrite the proof of `fpow_add` in the same way I rewrote the proof of `gpow_add`.
* Make argument `a` implicit in some lemmas because they have an argument `ha : a ≠ 0`.
* Remove `fpow_inv`. This was a copy of `fpow_neg_one` with a misleading name.
* Remove `unit_pow` in favor of a more general `units.coe_pow`.
* Remove `unit_gpow`, add a more general `units.coe_gpow'` instead.

### [2020-06-06T15:05:30+00:00](https://github.com/leanprover-community/mathlib/commit/2f028a88a4b2b957a393cab084505fdad5d62e0d)
feat(analysis/convex/specific_functions): convexity of rpow ([#2965](https://github.com/leanprover-community/mathlib/pull/#2965))

The function `x -> x^p` is convex on `[0, +\infty)` when `p \ge 1`.

### [2020-06-06T13:23:11+00:00](https://github.com/leanprover-community/mathlib/commit/f096a74af0a3b085b272e72af0d0d3d11468dd80)
fix(tactic/ring_exp): `ring_exp` now recognizes that `2^(n+1+1) = 2 * 2^(n+1)` ([#2929](https://github.com/leanprover-community/mathlib/pull/#2929))

[Zulip thread with bug report](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ring_exp.20needs.20ring).

The problem was a missing lemma so that `norm_num` could fire on `x^y` if `x` and `y` are coefficients.

### [2020-06-06T09:55:46+00:00](https://github.com/leanprover-community/mathlib/commit/6f272716ea0180af23e06963e0b624a83f9fcc7d)
fix(documentation): fix a typo in the readme ([#2969](https://github.com/leanprover-community/mathlib/pull/#2969))

### [2020-06-06T08:01:08+00:00](https://github.com/leanprover-community/mathlib/commit/d1ae307b5fd50ceb29d5c558a4dd6a7fb330761f)
chore(algebra/ordered_group): add `exists_pos_add_of_lt` ([#2967](https://github.com/leanprover-community/mathlib/pull/#2967))

Also drop `protected` on `_root_.zero_lt_iff_ne_zero`.

### [2020-06-06T07:15:17+00:00](https://github.com/leanprover-community/mathlib/commit/d18061fb4be668950e62dcf24bf77e5abf01ff9d)
chore(algebra/add_torsor): a few more lemmas and implicit args ([#2964](https://github.com/leanprover-community/mathlib/pull/#2964))

### [2020-06-05T16:16:43+00:00](https://github.com/leanprover-community/mathlib/commit/1b2048d7195314a7e34e06770948ee00f0ac3545)
feat(analysis/special_functions/pow): rpow is differentiable ([#2930](https://github.com/leanprover-community/mathlib/pull/#2930))

Differentiability of the real power function `x ↦ x^p`. Also register the lemmas about the composition with a function to make sure that the simplifier can handle automatically the differentiability of `x ↦ (f x)^p` and more complicated expressions involving powers.

### [2020-06-05T13:39:37+00:00](https://github.com/leanprover-community/mathlib/commit/5c851bdb1f15294d82877c463ff3289168ec9473)
fix(tactic/squeeze_simp): make `squeeze_simp [←...]` work ([#2961](https://github.com/leanprover-community/mathlib/pull/#2961))

`squeeze_simp` parses the argument list using a function in core Lean, and when support for backwards arguments was added to `simp`, it used a new function to parse the additional structure. This PR fixes the TODO left in the code to switch `squeeze_simp` to the new function by deleting the code that needed it - it wasn't used anyway!

To add a test for the fix, I moved the single existing `squeeze_simp` test from the deprecated file `examples.lean` to a new file.

### [2020-06-05T11:58:53+00:00](https://github.com/leanprover-community/mathlib/commit/a433eb07a6931f76434201cad8dd796a7ece9d0b)
feat(analysis/special_functions/pow): real powers on ennreal ([#2951](https://github.com/leanprover-community/mathlib/pull/#2951))

Real powers of extended nonnegative real numbers. We develop an API based on that of real powers of reals and nnreals, proving the corresponding lemmas.

### [2020-06-05T10:41:53+00:00](https://github.com/leanprover-community/mathlib/commit/fd623d6ccd9860b52ef0d1fd45252ae7dc7f8be7)
feat(data/set/intervals/image_preimage): new file ([#2958](https://github.com/leanprover-community/mathlib/pull/#2958))

* Create a file for lemmas like
  `(λ x, x + a) '' Icc b c = Icc (b + a) (b + c)`.
* Prove lemmas about images and preimages of all intervals under
  `x ↦ x ± a`, `x ↦ a ± x`, and `x ↦ -x`.
* Move lemmas about multiplication from `basic`.

### [2020-06-05T10:10:03+00:00](https://github.com/leanprover-community/mathlib/commit/1ef65c993de643cbbae21556a98a318851b30cac)
feat(linear_algebra/quadratic_form): more constructions for quadratic forms ([#2949](https://github.com/leanprover-community/mathlib/pull/#2949))

Define multiplication of two linear forms to give a quadratic form and addition of quadratic forms. With these definitions, we can write a generic binary quadratic form as `a • proj R₁ 0 0 + b • proj R₁ 0 1 + c • proj R₁ 1 1 : quadratic_form R₁ (fin 2 → R₁)`.

In order to prove the linearity conditions on the constructions, there are new `simp` lemmas `polar_add_left`, `polar_smul_left`, `polar_add_right` and `polar_smul_right` copying from the corresponding fields of the `quadratic_form` structure, that use `⇑ Q` instead of `Q.to_fun`. The original field names have a `'` appended to avoid name clashes.

### [2020-06-05T08:41:12+00:00](https://github.com/leanprover-community/mathlib/commit/31ceb6245b636e3f7da0df9a3ab6bc135c93befe)
feat(data/int|nat/basic): add `add_monoid_hom.ext_nat/int` ([#2957](https://github.com/leanprover-community/mathlib/pull/#2957))

### [2020-06-05T08:41:10+00:00](https://github.com/leanprover-community/mathlib/commit/edb4422a69f128531de0cd3e75a2b3544b8809ae)
feat(algebra/add_torsor): add `equiv.const_vadd` and `equiv.vadd_const` ([#2907](https://github.com/leanprover-community/mathlib/pull/#2907))

Also define their `isometric.*` versions in `analysis/normed_space/add_torsor`.

### [2020-06-05T07:28:47+00:00](https://github.com/leanprover-community/mathlib/commit/a130c73a36a15ae2b98933e31ffb49a83c7f7420)
feat(topology/algebra/ordered): list of preconnected sets ([#2943](https://github.com/leanprover-community/mathlib/pull/#2943))

A subset of a densely ordered conditionally complete lattice (e.g., `ℝ`) with order topology is preconnected if and only if it is one of the intervals.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-06-05T05:31:21+00:00](https://github.com/leanprover-community/mathlib/commit/8f89bd8334ea6216da35f4b11d4c619268ca9422)
chore(algebra/group_power): simplify a proof ([#2955](https://github.com/leanprover-community/mathlib/pull/#2955))



Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-06-05T05:31:19+00:00](https://github.com/leanprover-community/mathlib/commit/d7fa4051f51e99d0f793474d54fbe02486ae9c55)
chore(algebra/*): merge `inv_inv''` with `inv_inv'` ([#2954](https://github.com/leanprover-community/mathlib/pull/#2954))

### [2020-06-05T05:31:17+00:00](https://github.com/leanprover-community/mathlib/commit/81618883d261bc1e6fd1ab809fdb5c0c5cad94aa)
feat(group_theory/subgroup): define normal bundled subgroups ([#2947](https://github.com/leanprover-community/mathlib/pull/#2947))

Most proofs are adapted from `deprecated/subgroup`.

### [2020-06-05T05:31:15+00:00](https://github.com/leanprover-community/mathlib/commit/2131382b1c53475741a4a75f06954389ffe33533)
feat(data/setoid/partition): some lemmas about partitions ([#2937](https://github.com/leanprover-community/mathlib/pull/#2937))

### [2020-06-05T04:53:19+00:00](https://github.com/leanprover-community/mathlib/commit/80a52e9987cef6d7f485dc08308d11acadc351cd)
chore(analysis/convex/basic): add `finset.convex_hull_eq` ([#2956](https://github.com/leanprover-community/mathlib/pull/#2956))

### [2020-06-04T18:38:01+00:00](https://github.com/leanprover-community/mathlib/commit/2ceb7f7f74cc1d4645d97c30100cb32f4c913eb6)
feat(analysis/convex): preparatory statement for caratheodory ([#2944](https://github.com/leanprover-community/mathlib/pull/#2944))

Proves

```lean
lemma convex_hull_eq_union_convex_hull_finite_subsets (s : set E) :
  convex_hull s = ⋃ (t : finset E) (w : ↑t ⊆ s), convex_hull ↑t
```



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-06-04T18:05:52+00:00](https://github.com/leanprover-community/mathlib/commit/beb5d45ccf7f97b3a4fb9e8d53cf97e418c0b9f3)
chore(scripts): update nolints.txt ([#2952](https://github.com/leanprover-community/mathlib/pull/#2952))

I am happy to remove some nolints for you!

### [2020-06-04T16:18:37+00:00](https://github.com/leanprover-community/mathlib/commit/1a297969fdeee180857ab2c0c1981c4585b417f4)
chore(is_ring_hom): remove some uses of is_ring_hom ([#2884](https://github.com/leanprover-community/mathlib/pull/#2884))

This PR deletes the definitions `is_ring_anti_hom` and `ring_anti_equiv`, in favour of using the bundled `R →+* Rᵒᵖ` and `R ≃+* Rᵒᵖ`. It also changes the definition of `ring_invo`.

This is work towards removing the deprecated `is_*_hom` family.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-06-04T15:38:26+00:00](https://github.com/leanprover-community/mathlib/commit/7d803a9884d6490f8c8e82943e32815437a94380)
feat(topology/metric_space/isometry): group structure on isometries ([#2950](https://github.com/leanprover-community/mathlib/pull/#2950))

Closes [#2908](https://github.com/leanprover-community/mathlib/pull/#2908)

### [2020-06-04T15:38:24+00:00](https://github.com/leanprover-community/mathlib/commit/add0c9a891e797984a77d3a8ccaf04ca885b8768)
feat(ring/localization): add construction of localization as a quotient type ([#2922](https://github.com/leanprover-community/mathlib/pull/#2922))

### [2020-06-04T15:06:53+00:00](https://github.com/leanprover-community/mathlib/commit/2dbf55081826295e36e3c920aba8032effdb90da)
feat(ring_theory/eisenstein_criterion): Eisenstein's criterion ([#2946](https://github.com/leanprover-community/mathlib/pull/#2946))



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-06-04T14:28:44+00:00](https://github.com/leanprover-community/mathlib/commit/c2e78d27f9a36c8e3e70252e38d0b926d5f74907)
refactor(data/zmod): generalize zmod.cast_hom ([#2900](https://github.com/leanprover-community/mathlib/pull/#2900))

Currently, `zmod.cast_hom` would cast `zmod n` to rings `R` of characteristic `n`.
This PR builds `cast_hom` for rings `R` with characteristic `m` that divides `n`.

### [2020-06-04T07:22:09+00:00](https://github.com/leanprover-community/mathlib/commit/e397b4c1266ee241e9412e17b1dd8724f56fba09)
chore(scripts): update nolints.txt ([#2948](https://github.com/leanprover-community/mathlib/pull/#2948))

I am happy to remove some nolints for you!

### [2020-06-04T04:42:31+00:00](https://github.com/leanprover-community/mathlib/commit/5744f8975a45a7a59da61aa4e68e7035234ac029)
chore(*): fix some `ge_or_gt` lint issues ([#2945](https://github.com/leanprover-community/mathlib/pull/#2945))

Also rename a few definitions:

* `ge_of_forall_ge_sub` : `le_of_forall_sub_le`;
* `power_series.order_ge_nat` : `power_series.nat_le_order`;
* `power_series.order_ge`: `power_series.le_order`;

### [2020-06-03T16:19:29+00:00](https://github.com/leanprover-community/mathlib/commit/ef6d8d9ef9f0893c6719404558d6b7a6117cf5d6)
refactor(analysis/specific_limits): prove `0 < r → (1+r)^n→∞` for semirings ([#2935](https://github.com/leanprover-community/mathlib/pull/#2935))

* Add `add_one_pow_unbounded_of_pos` and
  `tendsto_add_one_pow_at_top_at_top_of_pos` assuming
  `[linear_ordered_semiring α]` `[archimedean α]`.
* Rename `tendsto_pow_at_top_at_top_of_gt_1` to
  `tendsto_pow_at_top_at_top_of_one_lt`, generalize to an archimedean
  ordered ring.
* Rename `tendsto_pow_at_top_at_top_of_gt_1_nat` to
  `nat.tendsto_pow_at_top_at_top_of_one_lt`.

### [2020-06-03T15:11:28+00:00](https://github.com/leanprover-community/mathlib/commit/1adf2041198d6162a7f96ea757f49d2d3da36ae7)
chore(scripts): update nolints.txt ([#2942](https://github.com/leanprover-community/mathlib/pull/#2942))

I am happy to remove some nolints for you!

### [2020-06-03T15:11:26+00:00](https://github.com/leanprover-community/mathlib/commit/494b43ef5fa00159c5db3f157c945dec9cb91eba)
chore(category_theory/limits/over): granularity in forget preserving colimits ([#2941](https://github.com/leanprover-community/mathlib/pull/#2941))

a bit more granularity for instances about forget preserving colimits

### [2020-06-03T15:11:24+00:00](https://github.com/leanprover-community/mathlib/commit/97265f9cfd349ee0b35740bf1bb58efde6918f01)
feat(category_theory/limits): dualise a limits result ([#2940](https://github.com/leanprover-community/mathlib/pull/#2940))

Add the dual of `is_limit.of_cone_equiv`.

Co-authored-by: Scott Morrison <scott@tqft.net>

### [2020-06-03T13:41:29+00:00](https://github.com/leanprover-community/mathlib/commit/e2052286ac2e551163e17324cd26e5c61cbfa812)
feat(data/fintype/basic): to_finset_inj ([#2938](https://github.com/leanprover-community/mathlib/pull/#2938))

### [2020-06-03T13:41:27+00:00](https://github.com/leanprover-community/mathlib/commit/74037cba3853319f502a76fe1e3c4af3db8843cb)
feat(topology/algebra/ordered): IVT for two functions ([#2933](https://github.com/leanprover-community/mathlib/pull/#2933))

Also rename some `is_connected_I*` lemmas to `is_preconnected_I*`.

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-06-03T13:41:25+00:00](https://github.com/leanprover-community/mathlib/commit/f44509c0166b5d67c4fb00048f8c19d802c24d8e)
chore(tactic/localized): lower priority of bad decidability instances in classical locale ([#2932](https://github.com/leanprover-community/mathlib/pull/#2932))

Also add a decidability instance for complex numbers.

https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/monoid_algebra.2Emul_apply/near/199595932
https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/slow.20elaboration/near/199543997

Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2020-06-03T12:09:46+00:00](https://github.com/leanprover-community/mathlib/commit/ed91bb28fee8b7f2e1d4c7ab758ea800793fdd8c)
feat(data/setoid/partition): sUnion _classes ([#2936](https://github.com/leanprover-community/mathlib/pull/#2936))

### [2020-06-03T12:09:44+00:00](https://github.com/leanprover-community/mathlib/commit/c3221f7424a8a3decf942e0745c51e3df4154cc9)
feat(data/rat): denom_div_cast_eq_one_iff ([#2934](https://github.com/leanprover-community/mathlib/pull/#2934))

### [2020-06-03T12:09:43+00:00](https://github.com/leanprover-community/mathlib/commit/1f2102d5fadc6e761c92b97b3bcdf3d67b8ad51b)
chore(group_theory/group_action): protect_proj attribute for mul_action ([#2931](https://github.com/leanprover-community/mathlib/pull/#2931))

### [2020-06-03T12:09:41+00:00](https://github.com/leanprover-community/mathlib/commit/687fc519b08a4ddebb8324734a09030092908b7e)
ci(bors): set `cut_body_after` to `---` ([#2927](https://github.com/leanprover-community/mathlib/pull/#2927))

### [2020-06-03T12:09:39+00:00](https://github.com/leanprover-community/mathlib/commit/9fc241373de4cfffd5abb56bd3de7dec33c53b72)
feat(order/iterate): a few more lemmas about `f^[n]` ([#2925](https://github.com/leanprover-community/mathlib/pull/#2925))

### [2020-06-03T12:09:37+00:00](https://github.com/leanprover-community/mathlib/commit/0ec9c0e3181bcb1afe814e963610b7bc49553b43)
feat(algebra/iterate_hom): add `mul_left_iterate` etc ([#2923](https://github.com/leanprover-community/mathlib/pull/#2923))

### [2020-06-03T11:09:01+00:00](https://github.com/leanprover-community/mathlib/commit/8d9e541b2d37d756c26805dca8690ea1c66f78f4)
feat(group_theory/group_action): some lemmas about orbits ([#2928](https://github.com/leanprover-community/mathlib/pull/#2928))

also remove the simp attribute unfolding the definition of orbit.
Depends on [#2924](https://github.com/leanprover-community/mathlib/pull/#2924)

### [2020-06-03T09:28:49+00:00](https://github.com/leanprover-community/mathlib/commit/50202855d2a665c7d564b357e705e0ef7458da85)
chore(group_theory/group_action): simp attributes on inv_smul_smul and smul_inv_smul ([#2924](https://github.com/leanprover-community/mathlib/pull/#2924))

### [2020-06-03T07:59:41+00:00](https://github.com/leanprover-community/mathlib/commit/3904374268cd93ea539432fea69128db6cea2fd8)
chore(algebra/ordered_group)`: add `strict_mono.add_const/const_add` ([#2926](https://github.com/leanprover-community/mathlib/pull/#2926))

### [2020-06-03T06:31:17+00:00](https://github.com/leanprover-community/mathlib/commit/879bad2ea48543a4da9bfbc78b00b43d328b416f)
feat(analysis/normed_space/enorm): define extended norm ([#2897](https://github.com/leanprover-community/mathlib/pull/#2897))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-06-02T21:15:28+00:00](https://github.com/leanprover-community/mathlib/commit/efae3d9cd5bc355f2123b7dd693f82da5b1f0a66)
feat(data/mv_polynomial): C_inj and C_injective ([#2920](https://github.com/leanprover-community/mathlib/pull/#2920))

### [2020-06-02T19:58:24+00:00](https://github.com/leanprover-community/mathlib/commit/607286eefb61c5d727672d5f1bf5bf990861d40e)
feat(data/*): ring_hom.ext_{nat,int,rat,zmod} ([#2918](https://github.com/leanprover-community/mathlib/pull/#2918))

### [2020-06-02T17:27:51+00:00](https://github.com/leanprover-community/mathlib/commit/62ec2c57a4104d6c3d697b917ad4e5950a650d26)
feat(linear_algebra/matrix): add alg_equiv_matrix ([#2919](https://github.com/leanprover-community/mathlib/pull/#2919))

### [2020-06-02T07:41:15+00:00](https://github.com/leanprover-community/mathlib/commit/1a4de99ede8382f9040230ec0767e3bc308ad913)
feat(category_theory/limits) equalizer morphism is regular mono ([#2916](https://github.com/leanprover-community/mathlib/pull/#2916))

The equalizer morphism is a regular mono, and its dual

### [2020-06-02T06:13:44+00:00](https://github.com/leanprover-community/mathlib/commit/1494cc14977edded9087d6e022c65dad2ac51865)
feat(order/semiconj_Sup): use `Sup` to semiconjugate functions ([#2895](https://github.com/leanprover-community/mathlib/pull/#2895))

Formalize two lemmas from a paper by É. Ghys.

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-06-02T02:13:40+00:00](https://github.com/leanprover-community/mathlib/commit/4372d17b341b302c13a090a69dab8d1ff7a2a469)
chore(scripts): update nolints.txt ([#2914](https://github.com/leanprover-community/mathlib/pull/#2914))

I am happy to remove some nolints for you!

### [2020-06-02T00:43:24+00:00](https://github.com/leanprover-community/mathlib/commit/eb616cf4e132c6327b868291d6713ec1224b8641)
chore(*): split long lines ([#2913](https://github.com/leanprover-community/mathlib/pull/#2913))

### [2020-06-01T23:39:34+00:00](https://github.com/leanprover-community/mathlib/commit/b95f165598e421dd3b864ad63034ed8d087c9676)
chore(group_theory/sub*): move unbundled submonoids and subgroups to `deprecated` ([#2912](https://github.com/leanprover-community/mathlib/pull/#2912))

* move unbundled submonoids to `deprecated/submonoid.lean`;
* move unbundled subgroups to `deprecated/subgroup.lean`;
* move bundled subgroups to `group_theory/subgroup.lean`;
* unbundled versions import bundled.

### [2020-06-01T21:26:03+00:00](https://github.com/leanprover-community/mathlib/commit/66ce5d07fc3d0966539e854ff26e98839a1e62e9)
feat(representation_theory/maschke): Maschke's theorem ([#2762](https://github.com/leanprover-community/mathlib/pull/#2762))

The final theorem is
```
lemma monoid_algebra.submodule.exists_is_compl
  (not_dvd : ¬(ring_char k ∣ fintype.card G)) (p : submodule (monoid_algebra k G) V) :
  ∃ q : submodule (monoid_algebra k G) V, is_compl p q
```
for `[field k]`.

The core computation, turning a `k`-linear retraction of `k[G]`-linear map into a `k[G]`-linear retraction by averaging over `G`, happens over an arbitrary `[comm_ring k]` in which `[invertible (fintype.card G : k)]`.


Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>

### [2020-06-01T19:40:48+00:00](https://github.com/leanprover-community/mathlib/commit/085aadebb4b1c7c61d22cf5322daa6e0c60da84d)
chore(linear_algebra/affine_space): use implicit args ([#2905](https://github.com/leanprover-community/mathlib/pull/#2905))

Whenever we have an argument `f : affine_map k V P`, Lean can figure out `k`, `V`, and `P`.

### [2020-06-01T17:01:58+00:00](https://github.com/leanprover-community/mathlib/commit/17296e9cba40a1c28a73eb8302873e3e25817e66)
feat(category_theory/abelian): Schur's lemma ([#2838](https://github.com/leanprover-community/mathlib/pull/#2838))

I wrote this mostly to gain some familiarity with @TwoFX's work on abelian categories from [#2817](https://github.com/leanprover-community/mathlib/pull/#2817).

That all looked great, and Schur's lemma was pleasantly straightforward.

Co-authored-by: Markus Himmel <markus@himmel-villmar.de>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-01T15:13:02+00:00](https://github.com/leanprover-community/mathlib/commit/2812cdc22780f63f783d011754a3e7c95302a8c2)
fix(ci): check nolints.txt against master ([#2906](https://github.com/leanprover-community/mathlib/pull/#2906))

Currently, leanprover-community-bot makes an "update nolints" PR if both of the following hold:
- the `nolints` branch doesn't exist, meaning there isn't already an open nolints PR
- `nolints.txt` has been modified compared to HEAD.

This can lead to a duplicate nolints PR (see e.g. [#2899](https://github.com/leanprover-community/mathlib/pull/#2899) and [#2901](https://github.com/leanprover-community/mathlib/pull/#2901)), since a nolints PR might have been merged after this build on `master` started, but before this step runs.

This PR changes the second check so that it instead compares `nolints.txt` against the most recent `master` commit, which should fix this.

### [2020-06-01T12:17:18+00:00](https://github.com/leanprover-community/mathlib/commit/f142b4208bee350d00931b9fa38069cc740c83ef)
fix(scripts/deploy_docs): correct git push syntax ([#2903](https://github.com/leanprover-community/mathlib/pull/#2903))

The suggestion I made in [#2893](https://github.com/leanprover-community/mathlib/pull/#2893) didn't work.

### [2020-06-01T12:17:17+00:00](https://github.com/leanprover-community/mathlib/commit/b405a5eae738df6654692781b1a58beccfce8664)
fix(tactic/equiv_rw): use kdepends_on rather than occurs ([#2898](https://github.com/leanprover-community/mathlib/pull/#2898))

`kdepends_on t e` and `e.occurs t` sometimes give different answers, and it seems `equiv_rw` wants the behaviour that `kdepends_on` provides.

There is a new test which failed with `occurs`, and succeeds using `kdepends_on`. No other changes.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-06-01T11:48:05+00:00](https://github.com/leanprover-community/mathlib/commit/b9d485db867c9c5c9815f65d2da43bb59a3cef72)
chore(data/mv_polynomial): swap the order of mv_polynomial.ext_iff ([#2902](https://github.com/leanprover-community/mathlib/pull/#2902))

The previous order of implications is not the one you usually want to simp or rw with.

### [2020-06-01T10:50:43+00:00](https://github.com/leanprover-community/mathlib/commit/0485e0f7a13b026e5f56e9ee6b565a6c262b8340)
feat(scripts/deploy_docs): force push generated docs ([#2893](https://github.com/leanprover-community/mathlib/pull/#2893))

(1) We build the full html docs in every CI run, even though they only get saved on master builds. Just compiling the .lean files used in doc generation should be enough to catch 95% of breaks. I think the bit of extra risk is worth speeding up the CI runs, especially since linting is now as fast as tests + docs. 

(2) The repo hosting the html pages was 1.3gb because we kept every revision. Half of the time spent on doc builds was just checking out the repo. I've deleted the history. This PR changes the build script to overwrite the previous version. 

Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-06-01T09:01:28+00:00](https://github.com/leanprover-community/mathlib/commit/9172cdf8b7eda1902edac2a5205b4b1c62ad7657)
feat(linear_algebra/affine_space): affine spaces ([#2816](https://github.com/leanprover-community/mathlib/pull/#2816))

Define (very minimally) affine spaces (as an abbreviation for
add_torsor in the case where the group is a vector space), affine
subspaces, the affine span of a set of points and affine maps.

### [2020-06-01T06:43:53+00:00](https://github.com/leanprover-community/mathlib/commit/6beebb0a9b7486d5baa6e1b2f6a5a775637a4ded)
chore(scripts): update nolints.txt ([#2899](https://github.com/leanprover-community/mathlib/pull/#2899))

I am happy to remove some nolints for you!

### [2020-06-01T05:31:26+00:00](https://github.com/leanprover-community/mathlib/commit/7263917e2e95ea5801eff79a5b9fe9d65ecd733e)
chore(order/complete_lattice): redefine `ord_continuous` ([#2886](https://github.com/leanprover-community/mathlib/pull/#2886))

Redefine `ord_continuous` using `is_lub` to ensure that the definition
makes sense for `conditionally_complete_lattice`s.

### [2020-06-01T04:59:52+00:00](https://github.com/leanprover-community/mathlib/commit/ea76bd8f3ca0a8bf0a166a06a475b10663dec44a)
chore(scripts): update nolints.txt ([#2896](https://github.com/leanprover-community/mathlib/pull/#2896))

I am happy to remove some nolints for you!

### [2020-06-01T03:45:00+00:00](https://github.com/leanprover-community/mathlib/commit/5c27885774807b5c0f33f7736861d0aa72bf0226)
feat(order/order_iso): group structure on order automorphisms ([#2875](https://github.com/leanprover-community/mathlib/pull/#2875))

Also add a few missing lemmas about `order_iso`

### [2020-06-01T01:58:08+00:00](https://github.com/leanprover-community/mathlib/commit/73f95a7a1c8dbe2ef98823a8490c076fa0d410b5)
chore(algebra/group): move defs to `defs.lean` ([#2885](https://github.com/leanprover-community/mathlib/pull/#2885))

Also delete the aliases `eq_of_add_eq_add_left` and `eq_of_add_eq_add_right`.

### [2020-05-31T20:01:07+00:00](https://github.com/leanprover-community/mathlib/commit/d3fc918b4ba2988e91e1515f10e339887b485fe2)
chore(scripts): update nolints.txt ([#2892](https://github.com/leanprover-community/mathlib/pull/#2892))

I am happy to remove some nolints for you!

### [2020-05-31T18:58:17+00:00](https://github.com/leanprover-community/mathlib/commit/1fd5195ffc3643345df92859a742acd030ebb027)
chore(data/equiv/mul_add): review ([#2874](https://github.com/leanprover-community/mathlib/pull/#2874))

* make `mul_aut` and `add_aut` reducible to get `coe_fn`
* add some `coe_*` lemmas

### [2020-05-31T17:05:57+00:00](https://github.com/leanprover-community/mathlib/commit/7c7e86695a21371384cd5dba67c25839321389d7)
chore(*): update to lean 3.15.0 ([#2851](https://github.com/leanprover-community/mathlib/pull/#2851))

The main effect for mathlib comes from https://github.com/leanprover-community/lean/pull/282, which changes the elaboration strategy for structure instance literals (`{ foo := 42 }`).  There are two points where we need to pay attention:

1. Avoid sourcing (`{ ..e }` where e.g. `e : euclidean_domain α`) for fields like `add`, `mul`, `zero`, etc.  Instead write `{ add := (+), mul := (*), zero := 0, ..e }`.  The reason is that `{ ..e }` is equivalent to `{ mul := euclidean_domain.mul, ..e }`.  And `euclidean_domain.mul` should never be mentioned.

I'm not completely sure if this issue remains visible once the structure literal has been elaborated, but this hasn't changed since 3.14.  For now, my advice is: if you get weird errors like "cannot unify `a * b` and `?m_1 * ?m_2` in a structure literal, add `mul := (*)`.

2. `refine { le := (≤), .. }; simp` is slower.  This is because references to `(≤)` are no longer reduced to `le` in the subgoals.  If a subgoal like `a ≤ b → b ≤ a → a = b` was stated for preorders (because `partial_order` extends `preorder`), then the `(≤)` will contain a `preorder` subterm.  This subterm also contains other subgoals (proofs of reflexivity and transitivity).  Therefore the goals are larger than you might expect:

```
∀ (a b : α),
    @has_le.le.{u} α
      (@preorder.to_has_le.{u} α
         (@preorder.mk.{u} α le (@lattice.lt._default.{u} α le)
            (@conditionally_complete_lattice.copy._aux_1.{u} α c le eq_le sup eq_sup inf eq_inf Sup eq_Sup Inf eq_Inf)
            (@conditionally_complete_lattice.copy._aux_2.{u} α c le eq_le sup eq_sup inf eq_inf Sup eq_Sup Inf eq_Inf)
            (λ (a b : α), iff.refl (@has_lt.lt.{u} α (@has_lt.mk.{u} α (@lattice.lt._default.{u} α le)) a b))))
      a
      b →
    @has_le.le.{u} α
      (@preorder.to_has_le.{u} α
         (@preorder.mk.{u} α le (@lattice.lt._default.{u} α le)
            (@conditionally_complete_lattice.copy._aux_1.{u} α c le eq_le sup eq_sup inf eq_inf Sup eq_Sup Inf eq_Inf)
            (@conditionally_complete_lattice.copy._aux_2.{u} α c le eq_le sup eq_sup inf eq_inf Sup eq_Sup Inf eq_Inf)
            (λ (a b : α), iff.refl (@has_lt.lt.{u} α (@has_lt.mk.{u} α (@lattice.lt._default.{u} α le)) a b))))
      b
      a →
    @eq.{u+1} α a b
```

Advice: in cases such as this, try `refine { le := (≤), .. }; abstract { simp }` to reduce the size of the (dependent) subgoals.

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean.203.2E15.2E0).

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: E.W.Ayers <E.W.Ayers@maths.cam.ac.uk>
Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2020-05-31T15:03:10+00:00](https://github.com/leanprover-community/mathlib/commit/25fc0a8f779d7299a7dc2d17c1589f4b8bb1a571)
feat(field_theory/splitting_field): lemmas ([#2887](https://github.com/leanprover-community/mathlib/pull/#2887))

### [2020-05-31T06:22:54+00:00](https://github.com/leanprover-community/mathlib/commit/13b34b360dd8940796620d6cc807028264054cef)
chore(*): split long lines ([#2883](https://github.com/leanprover-community/mathlib/pull/#2883))

Also move docs for `control/fold` from a comment to a module docstring.

### [2020-05-31T04:59:04+00:00](https://github.com/leanprover-community/mathlib/commit/a285049b81c622ccea3d292a09ec979bcf7a1547)
chore(algebra/group_hom): rename `add_monoid.smul` to `nsmul` ([#2861](https://github.com/leanprover-community/mathlib/pull/#2861))

Also drop `•` as a notation for two `smul`s  declared in this file,
use `•ℕ` and `•ℤ` instead.

This way one can immediately see that a lemma uses `nsmul`/`gsmul`, not `has_scalar.smul`.

### [2020-05-31T01:56:14+00:00](https://github.com/leanprover-community/mathlib/commit/28e79d48ab7802014f421bae2212e6e8dfb52a86)
chore(data/set/basic): add some lemmas to `function.surjective` ([#2876](https://github.com/leanprover-community/mathlib/pull/#2876))

This way they can be used with dot notation. Also rename
`set.surjective_preimage` to
`function.surjective.injective_preimage`. I think that the old name
was misleading.

### [2020-05-31T01:56:12+00:00](https://github.com/leanprover-community/mathlib/commit/297806e690c97100279b767a128e03622aecb31f)
feat(topology/homeomorph): sum_prod_distrib ([#2870](https://github.com/leanprover-community/mathlib/pull/#2870))

Also modify the `inv_fun` of `equiv.sum_prod_distrib` to have
more useful definitional behavior. This also simplifies
`measurable_equiv.sum_prod_distrib`.

### [2020-05-30T22:43:58+00:00](https://github.com/leanprover-community/mathlib/commit/0827a30c00a8c5e9801cdfa30953be797ed6e273)
feat(tactic/noncomm_ring): add noncomm_ring tactic ([#2858](https://github.com/leanprover-community/mathlib/pull/#2858))

Fixes https://github.com/leanprover-community/mathlib/issues/2727

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-05-30T21:15:08+00:00](https://github.com/leanprover-community/mathlib/commit/6e581ef29ab308425c476044ade0a9a1a9d423e0)
chore(scripts): update nolints.txt ([#2878](https://github.com/leanprover-community/mathlib/pull/#2878))

I am happy to remove some nolints for you!

### [2020-05-30T19:55:19+00:00](https://github.com/leanprover-community/mathlib/commit/c034b4c2371fec22bec40d9e47a53121a9df62d9)
chore(order/bounds): +2 lemmas, fix a name ([#2877](https://github.com/leanprover-community/mathlib/pull/#2877))

### [2020-05-30T19:08:27+00:00](https://github.com/leanprover-community/mathlib/commit/9d76ac247de64c3ca053ff637af05a6108e4d1fe)
chore(scripts): update nolints.txt ([#2873](https://github.com/leanprover-community/mathlib/pull/#2873))

I am happy to remove some nolints for you!

### [2020-05-30T18:01:32+00:00](https://github.com/leanprover-community/mathlib/commit/f05acc8e115c7b72072dcd0f6b7c78b8cac96204)
feat(group_theory/group_action): orbit_equiv_quotient_stabilizer_symm_apply and docs ([#2864](https://github.com/leanprover-community/mathlib/pull/#2864))

### [2020-05-30T16:24:08+00:00](https://github.com/leanprover-community/mathlib/commit/67f1951bb38d8cf344a4b13dc422c40e864ff2bd)
refactor(algebra/module): change module into an abbreviation for semimodule ([#2848](https://github.com/leanprover-community/mathlib/pull/#2848))

The file `algebra/module.lean` contains the lines
```
There were several attempts to make `module` an abbreviation of `semimodule` but this makes
  class instance search too hard for Lean 3.
```
It turns out that this was too hard for Lean 3 until recently, but this is not too hard for Lean 3.14. This PR removes these two lines, and changes the files accordingly.

This means that the basic objects of linear algebra are now semimodules over semiring, making it possible to talk about matrices with natural number coefficients or apply general results on multilinear maps to get the binomial or the multinomial formula.

A linear map is now defined over semirings, between semimodules which are `add_comm_monoid`s. For some statements, you need to have an `add_comm_group`, and a `ring` or a `comm_semiring` or a `comm_ring`. I have not tried to lower the possible typeclass assumptions like this in all files, but I have done it carefully in the following files:
* `algebra/module`
* `linear_algebra/basic`
* `linear_algebra/multilinear`
* `topology/algebra/module`
* `topology/algebra/multilinear`

Other files can be optimised later in the same way when needed, but this PR is already big enough.

I have also fixed the breakage in all the other files. It was sometimes completely mysterious (in tensor products, I had to replace several times `linear_map.id.flip` with `linear_map.flip linear_map.id`), but globally all right. I have tweaked a few instance priorities to make sure that things don't go too bad: there are often additional steps in typeclass inference, going from `ring` to `semiring` and from `add_comm_group` to `add_comm_monoid`, so I have increased their priority (putting it strictly between 100 and 1000), and adjusted some other priorities to get more canonical instance paths, fixing some preexisting weirdnesses (notably in multilinear maps). One place where I really had to help Lean is with normed spaces of continuous multilinear maps, where instance search is just too big.

I am aware that this will be a nightmare to refer, but as often with big refactor it's an "all or nothing" PR, impossible to split in tiny pieces.

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-05-30T15:05:49+00:00](https://github.com/leanprover-community/mathlib/commit/cc06d538378b040fcd60c80412cf6e5cecf93ff7)
feat(algebra/big_operators): prod_ne_zero ([#2863](https://github.com/leanprover-community/mathlib/pull/#2863))

### [2020-05-30T13:12:33+00:00](https://github.com/leanprover-community/mathlib/commit/b40ac2af681c57e71253aecb8d4f87772e2fa2a6)
chore(topology): make topological_space fields protected ([#2867](https://github.com/leanprover-community/mathlib/pull/#2867))

This uses the recent `protect_proj` attribute ([#2855](https://github.com/leanprover-community/mathlib/pull/#2855)).

### [2020-05-30T07:33:44+00:00](https://github.com/leanprover-community/mathlib/commit/62cb7f2f34079df7c054239d467f72c61be4f63a)
feat(geometry/euclidean): Euclidean space ([#2852](https://github.com/leanprover-community/mathlib/pull/#2852))

Define Euclidean affine spaces (not necessarily finite-dimensional),
and a corresponding instance for the standard Euclidean space `fin n → ℝ`.

This just defines the type class and the instance, with some other
basic geometric definitions and results to be added separately once
this is in.

I haven't attempted to do anything about the `euclidean_space`
definition in geometry/manifold/real_instances.lean that comes with a
comment that it uses the wrong norm.  That might better be refactored
by someone familiar with the manifold code.

By defining Euclidean spaces such that they are defined to be metric
spaces, and providing an instance, this probably implicitly gives item
91 "The Triangle Inequality" from the 100-theorems list, if that's
taken to have a geometric interpretation as in the Coq version, but
it's not very clear how something implicit like that from various
different pieces of the library, and where the item on the list could
be interpreted in several different ways anyway, should be entered in
100.yaml.

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-05-30T06:12:38+00:00](https://github.com/leanprover-community/mathlib/commit/74d446d34d3556a18eb4cdc2ca43a84a12f54832)
feat(order/iterate): some inequalities on `f^[n] x` and `g^[n] x` ([#2859](https://github.com/leanprover-community/mathlib/pull/#2859))

### [2020-05-30T04:46:16+00:00](https://github.com/leanprover-community/mathlib/commit/aa47bba50cf950c8e98521c88cb7c8f8d5376098)
feat(data/equiv): equiv_of_subsingleton_of_subsingleton ([#2856](https://github.com/leanprover-community/mathlib/pull/#2856))

### [2020-05-30T00:45:00+00:00](https://github.com/leanprover-community/mathlib/commit/5455fe1968a1b6d604ee480f53b5f53405d42bd1)
chore(scripts): update nolints.txt ([#2862](https://github.com/leanprover-community/mathlib/pull/#2862))

I am happy to remove some nolints for you!

### [2020-05-29T22:20:28+00:00](https://github.com/leanprover-community/mathlib/commit/f95e8090d8a02dc89c451adfa8ca10df94a56bd8)
chore(algebra): displace zero_ne_one_class with nonzero and make no_zero_divisors a Prop ([#2847](https://github.com/leanprover-community/mathlib/pull/#2847))

- `[nonzero_semiring α]` becomes `[semiring α] [nonzero α]`
- `[nonzero_comm_semiring α]` becomes `[comm_semiring α] [nonzero α]`
- `[nonzero_comm_ring α]` becomes `[comm_ring α] [nonzero α]`
- `no_zero_divisors` is now a `Prop`
- `units.ne_zero` (originally for `domain`) merges into `units.coe_ne_zero` (originally for `nonzero_comm_semiring`)

### [2020-05-29T20:46:37+00:00](https://github.com/leanprover-community/mathlib/commit/b2f643e9802e6e2a6aee5695d76ed03b55dd45a2)
feat(dynamics/fixed_points): define `is_fixed_pt` ([#2857](https://github.com/leanprover-community/mathlib/pull/#2857))

Define `function.is_fixed_pt` and prove some basic properties.

### [2020-05-29T16:24:04+00:00](https://github.com/leanprover-community/mathlib/commit/836184a8f3a23d39a2b130a6f9977d065b3e8679)
feat(tactic/protect_proj): protect_proj attribute for structures ([#2855](https://github.com/leanprover-community/mathlib/pull/#2855))

This attribute protect the projections of a structure that is being defined. 

There were some errors in Euclidean domain caused by `rw` using `euclidean_domain.mul_assoc` instead of `mul_assoc` because the `euclidean_domain` namespace was open. This fixes this problem, and makes the `group` and `ring` etc. namespaces more usable.

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>
Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-05-29T16:24:02+00:00](https://github.com/leanprover-community/mathlib/commit/77674a04e3ec11f5e0f94f4f787e56887b1d9dc6)
chore(category_theory): T50000 challenge ([#2840](https://github.com/leanprover-community/mathlib/pull/#2840))

A lame effort at making something compile with `-T50000`. No actual speed improvement, just split up a definition into pieces.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-05-29T16:24:00+00:00](https://github.com/leanprover-community/mathlib/commit/07cdafe9b0a377e8704f26597a3a57cb5e8b624a)
feat(tactic/with_local_reducibility): alter reducibility attributes locally ([#2820](https://github.com/leanprover-community/mathlib/pull/#2820))

### [2020-05-29T14:48:35+00:00](https://github.com/leanprover-community/mathlib/commit/4a5799e1035b3baf2b4bd02c44e3b11a5e21ab6b)
feat(data/equiv/basic): subtype_prod_equiv_prod ([#2717](https://github.com/leanprover-community/mathlib/pull/#2717))

### [2020-05-29T06:50:56+00:00](https://github.com/leanprover-community/mathlib/commit/b013b2d6318b42e5ae49a4a588b1271e37809685)
feat(ring_theory): define subsemirings ([#2837](https://github.com/leanprover-community/mathlib/pull/#2837))

~~Depends on [#2836](https://github.com/leanprover-community/mathlib/pull/#2836),~~ needs a better module docstring.

Some lemmas are missing, most notably `(subsemiring.closure s : set R) = add_submonoid.closure (submonoid.closure s)`.

### [2020-05-29T05:57:08+00:00](https://github.com/leanprover-community/mathlib/commit/6c046c752c681a0c56772ba1c9eb02567bc1d906)
chore(data/setoid): split into `basic` and `partition` ([#2853](https://github.com/leanprover-community/mathlib/pull/#2853))

The `basic` part has slightly fewer dependencies and `partition` part
is never used in `mathlib`.

### [2020-05-28T23:10:08+00:00](https://github.com/leanprover-community/mathlib/commit/543ae52c94eb24a62e552da9e72329621df231e2)
feat(analysis/normed_space/add_torsor): normed_add_torsor ([#2814](https://github.com/leanprover-community/mathlib/pull/#2814))

Define the metric space structure on torsors of additive normed group
actions.  The motivating case is Euclidean affine spaces.

See
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Some.20olympiad.20formalisations
for the discussion leading to this particular handling of the
distance.

Note: I'm not sure what the right way is to address the
dangerous_instance linter error "The following arguments become
metavariables. argument 1: (V : Type u_1)".

### [2020-05-28T13:26:09+00:00](https://github.com/leanprover-community/mathlib/commit/e9ba32d122e65de435e8a3c78a34992c3b506cb3)
chore(scripts): update nolints.txt ([#2849](https://github.com/leanprover-community/mathlib/pull/#2849))

I am happy to remove some nolints for you!

### [2020-05-28T11:54:54+00:00](https://github.com/leanprover-community/mathlib/commit/ca95726e40f3088b9b1625768b0a04525d43ade5)
feat(algebra/free) additive versions, docs. ([#2755](https://github.com/leanprover-community/mathlib/pull/#2755))

https://github.com/leanprover-community/mathlib/issues/930

### [2020-05-28T08:37:23+00:00](https://github.com/leanprover-community/mathlib/commit/cbf4740a95f30c8bbede192b601c8b4adc9050dc)
refactor(data/equiv/local_equiv): use dot notation for `eq_on_source` ([#2830](https://github.com/leanprover-community/mathlib/pull/#2830))

Also reuse more lemmas from `data/set/function`.

### [2020-05-28T08:37:21+00:00](https://github.com/leanprover-community/mathlib/commit/28dc2ed5c6d5b92324f81b25325a41f631507beb)
fix(tactic/suggest): normalize synonyms uniformly in goal and lemma ([#2829](https://github.com/leanprover-community/mathlib/pull/#2829))

This change is intended to make `library_search` and `suggest` a bit more robust in unfolding the types of the goal and lemma in order to determine which lemmas it will try to apply.

Before, there were two ad-hoc systems to map a head symbol to the name(s) that it should match, now there is only one ad-hoc function that does so.  As a consequence, `library_search` should be able to use a lemma with return type `a > b` to close the goal `b < a`, and use `lemma foo : p → false` to close the goal `¬ p`.
(The `>` normalization shouldn't "really" be needed if we all strictly followed the `gt_or_ge` linter but we don't and the failure has already caused confusion.)

[Discussion on Zulip starts here](https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/How.20to.20get.20familiar.20enough.20with.20Mathlib.20to.20use.20it/near/198746479)

### [2020-05-28T07:50:25+00:00](https://github.com/leanprover-community/mathlib/commit/005763ecb4f89bf1aad86ad2cba350e845ea864f)
feat(linear_algebra/lagrange): Lagrange interpolation ([#2764](https://github.com/leanprover-community/mathlib/pull/#2764))

Fixes [#2600](https://github.com/leanprover-community/mathlib/pull/#2600).

### [2020-05-28T07:50:22+00:00](https://github.com/leanprover-community/mathlib/commit/fa371f7b99cae0f55ae09de8388d7154ea95f92d)
feat(linear_algebra/bilinear_form): introduce adjoints of linear maps ([#2746](https://github.com/leanprover-community/mathlib/pull/#2746))

We also use this to define the Lie algebra structure on skew-adjoint
endomorphisms / matrices. The motivation is to enable us to define the
classical Lie algebras.

### [2020-05-28T07:02:07+00:00](https://github.com/leanprover-community/mathlib/commit/315ba3e3419357dc243d450d2f8215744076dc8c)
feat(category_theory): show an epi regular mono is an iso ([#2781](https://github.com/leanprover-community/mathlib/pull/#2781))

a really minor proof to show that a regular mono which is epi is an iso

### [2020-05-27T21:30:17+00:00](https://github.com/leanprover-community/mathlib/commit/efb4e9594edf6bdbaa960036eba90dd631d11899)
refactor(*iterate*): move to `function`; renamings ([#2832](https://github.com/leanprover-community/mathlib/pull/#2832))

* move lemmas about `iterate` from `data.nat.basic` to `logic.function.iterate`;
* move lemmas like `nat.iterate_succ` to `function` namespace;
* rename some lemmas:
  - `iterate₀` to `iterate_fixed`,
  - `iterate₁` to `semiconj.iterate_right`, see also `commute.iterate_left` and `commute.iterate_right`;
  - `iterate₂` to `semiconj₂.iterate`;
  - `iterate_cancel` to `left_inverse.iterate` and `right_inverse.iterate`;
* move lemmas `*_hom.iterate_map_*` to `algebra/iterate_hom`.

### [2020-05-27T18:57:00+00:00](https://github.com/leanprover-community/mathlib/commit/198836482b720032f08dc7cd929c0b8fb6f1eb1a)
feat(src/ring_theory): in a PID, all fractional ideals are invertible ([#2826](https://github.com/leanprover-community/mathlib/pull/#2826))

This would show that all PIDs are Dedekind domains, once we have a definition of Dedekind domain (we could define it right now, but it would depend on the choice of field of fractions).

In `localization.lean`, I added a few small lemmas on localizations (`localization.exists_integer_multiple` and `fraction_map.to_map_eq_zero_iff`). @101damnations, are these additions compatible with your branches? I'm happy to change them if not.

### [2020-05-27T13:41:59+00:00](https://github.com/leanprover-community/mathlib/commit/c812ebebde49c0409c5a93e41e3a36431f72b0a5)
feat(category_theory/abelian): abelian categories ([#2817](https://github.com/leanprover-community/mathlib/pull/#2817))

~~Depends on [#2779](https://github.com/leanprover-community/mathlib/pull/#2779).~~ Closes [#2178](https://github.com/leanprover-community/mathlib/pull/#2178). I will give instances for `AddCommGroup` and `Module`, but since this PR is large already, I'll wait until the next PR with that.

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-05-27T12:11:16+00:00](https://github.com/leanprover-community/mathlib/commit/2deb6b46fc5768c9226289feec1b32c7028a135c)
feat(algebra/continued_fractions): add computation definitions and basic translation lemmas ([#2797](https://github.com/leanprover-community/mathlib/pull/#2797))

### What
- add definitions of the computation of a continued fraction for a given value (in a given floor field)
- add very basic, mostly technical lemmas to convert between the different structures used by the computation

### Why
- I want to be able to compute the continued fraction of a value. I next will add termination, approximation, and correctness lemmas for the definitions in this commit (I already have them lying around on my PC for ages :cold_sweat: )
- The technical lemmas are needed for the next bunch of commits.

### How
- Follow the straightforward approach as described, for example, on [Wikipedia](https://en.wikipedia.org/wiki/Continued_fraction#Calculating_continued_fraction_representations)

Co-authored-by: Kevin Kappelmann <kappelmann@users.noreply.github.com>

### [2020-05-27T12:11:14+00:00](https://github.com/leanprover-community/mathlib/commit/798c61ba34e7e991227894d88cc0d976d38bf8a3)
feat(data/nat/prime): eq_prime_pow_of_dvd_least_prime_pow ([#2791](https://github.com/leanprover-community/mathlib/pull/#2791))

Proves
```lean
lemma eq_prime_pow_of_dvd_least_prime_pow
  (a p k : ℕ) (pp : prime p) (h₁ : ¬(a ∣ p^k)) (h₂ : a ∣ p^(k+1)) :
  a = p^(k+1)
```

### [2020-05-27T12:11:12+00:00](https://github.com/leanprover-community/mathlib/commit/85f08ec867dbf58b76675a6679d4e6b208a3a572)
feat(CI): add -T100000 to the build step in CI ([#2276](https://github.com/leanprover-community/mathlib/pull/#2276))

This PR adds `-T100000` to CI. This is the default timeout setting in the VS Code extension and emacs.

With some exceptions, noted with `FIXME` comments mentioning `-T50000`, the library now compiles with `-T50000`:

- [ ] `has_sum.has_sum_ne_zero` in `src/topology/algebra/infinite_sum.lean`, where I don't really understand why it is slow.
- [ ] `exists_norm_eq_infi_of_complete_convex` in `src/analysis/normed_space/real_inner_product.lean`, which has a giant proof which should be rewritten in several steps.
- [ ] `tangent_bundle_core.coord_change_comp` in `src/geometry/manifold/basic_smooth_bundle.lean`.
- [ ] `change_origin_radius` in `src/analysis/analytic/basic.lean`

There are 3 `def`s related to category theory which also don't compile:
- [ ] `adj₁` in `src/topology/category/Top/adjunctions.lean`
- [x] `cones_equiv_inverse` in `src/category_theory/limits/over.lean` (addressed in [#2840](https://github.com/leanprover-community/mathlib/pull/#2840))
- [ ] `prod_functor` in `src/category_theory/limits/shapes/binary_products.lean`

This proof no longer causes problems with `-T50000`, but it should still be broken up at some point.
- [ ] `simple_func_sequence_tendsto` in `src/measure_theory/simple_func_dense.lean`, which has a giant proof which should be rewritten in several steps. ~~This one is really bad, and doesn't even compile with `-T100000`.~~ 

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/-T50000.20challenge).

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>

### [2020-05-27T11:24:35+00:00](https://github.com/leanprover-community/mathlib/commit/7c5eab3c1a251a1e7b5e19b503be360048e51145)
chore(scripts): update nolints.txt ([#2841](https://github.com/leanprover-community/mathlib/pull/#2841))

I am happy to remove some nolints for you!

### [2020-05-27T08:57:27+00:00](https://github.com/leanprover-community/mathlib/commit/a7063eccc781ec2ece389974c16d15dadebacf92)
feat(ring_theory/prod): ring homs to/from `R × S` ([#2836](https://github.com/leanprover-community/mathlib/pull/#2836))

* move some instances from `algebra/pi_instances`;
* add `prod.comm_semiring`;
* define `ring_hom.fst`, `ring_hom.snd`, `ring_hom.prod`, and
  `ring_hom.prod_map`.

### [2020-05-27T08:57:25+00:00](https://github.com/leanprover-community/mathlib/commit/6ee3a47e36bd79ed36fe297090ae44b024f60768)
chore(data/equiv/basic): simplify some defs, add `coe` lemmas ([#2835](https://github.com/leanprover-community/mathlib/pull/#2835))

Use functions like `prod.map`, `curry`, `uncurry`, `sum.elim`, `sum.map` to define equivalences.

### [2020-05-27T08:57:23+00:00](https://github.com/leanprover-community/mathlib/commit/2a48225aa9b7bb3665049356e467815f2b465554)
feat(computability/tm_to_partrec): partrec functions are TM-computable ([#2792](https://github.com/leanprover-community/mathlib/pull/#2792))

A construction of a Turing machine that can evaluate any partial recursive function. This PR contains the bulk of the work but the end to end theorem (which asserts that any `computable` function can be evaluated by a Turing machine) has not yet been stated.

### [2020-05-27T07:09:31+00:00](https://github.com/leanprover-community/mathlib/commit/0d6d0b0f3dcbbe91e3688a6782aff950dae32835)
chore(*): split long lines, unindent in namespaces ([#2834](https://github.com/leanprover-community/mathlib/pull/#2834))

The diff is large but here is the word diff (search for `[-` or `[+`):

``` shellsession
$ git diff --word-diff=plain --ignore-all-space master | grep '(^---|\[-|\[\+)'
--- a/src/algebra/big_operators.lean
[-λ l, @is_group_anti_hom.map_prod _ _ _ _ _ inv_is_group_anti_hom l-]-- TODO there is probably a cleaner proof of this
        { have : [-(to_finset s).sum (λx,-]{+∑ x in s.to_finset,+} ite (x = a) 1 [-0)-]{+0+} = [-({a} : finset α).sum (λx,-]{+∑ x in {a},+} ite (x = a) 1 [-0),-]
[-          { apply (finset.sum_subset _ _).symm,-]{+0,+}
          { [-intros _ H, rwa mem_singleton.1 H },-]
[-            { exact λ _ _ H, if_neg (mt finset.mem_singleton.2 H) }-]{+rw [finset.sum_ite_eq', if_pos h, finset.sum_singleton, if_pos rfl],+} },
--- a/src/algebra/category/Group/basic.lean
[-a-]{+an+} `add_equiv` between `add_group`s."]
--- a/src/algebra/category/Group/colimits.lean
--- a/src/algebra/category/Mon/basic.lean
[-a-]{+an+} `add_equiv` between `add_monoid`s."]
[-a-]{+an+} `add_equiv` between `add_comm_monoid`s."]
--- a/src/algebra/free.lean
--- a/src/algebra/group/units.lean
--- a/src/algebra/group/units_hom.lean
--- a/src/category_theory/category/default.lean
[-universes v u-]-- The order in this declaration matters: v often needs to be explicitly specified while u often
--- a/src/control/monad/cont.lean
    simp [-[call_cc,except_t.call_cc,call_cc_bind_right,except_t.goto_mk_label,map_eq_bind_pure_comp,bind_assoc,@call_cc_bind_left-]{+[call_cc,except_t.call_cc,call_cc_bind_right,except_t.goto_mk_label,map_eq_bind_pure_comp,+}
  call_cc_bind_left  := by { intros, simp [-[call_cc,option_t.call_cc,call_cc_bind_right,option_t.goto_mk_label,map_eq_bind_pure_comp,bind_assoc,@call_cc_bind_left-]{+[call_cc,option_t.call_cc,call_cc_bind_right,+}
  call_cc_bind_left  := by { intros, simp [-[call_cc,state_t.call_cc,call_cc_bind_left,(>>=),state_t.bind,state_t.goto_mk_label],-]{+[call_cc,state_t.call_cc,call_cc_bind_left,(>>=),+}
  call_cc_dummy := by { intros, simp [-[call_cc,state_t.call_cc,call_cc_bind_right,(>>=),state_t.bind,@call_cc_dummy-]{+[call_cc,state_t.call_cc,call_cc_bind_right,(>>=),+}
  call_cc_bind_left  := by { intros, simp [-[call_cc,reader_t.call_cc,call_cc_bind_left,reader_t.goto_mk_label],-]{+[call_cc,reader_t.call_cc,call_cc_bind_left,+}
--- a/src/control/monad/writer.lean
--- a/src/control/traversable/basic.lean
   online at <http://arxiv.org/pdf/1202.2919>[-Synopsis-]
--- a/src/data/analysis/filter.lean
--- a/src/data/equiv/basic.lean
--- a/src/data/fin.lean
--- a/src/data/finset.lean
  [-by-]{+{+} rw [-[eq],-]{+[eq] },+}
--- a/src/data/hash_map.lean
--- a/src/data/int/basic.lean
--- a/src/data/list/basic.lean
--- a/src/data/list/tfae.lean
--- a/src/data/num/lemmas.lean
[-Properties of the binary representation of integers.-]
--- a/src/data/zsqrtd/basic.lean
--- a/src/group_theory/congruence.lean
with [-a-]{+an+} addition."]
@[to_additive Sup_eq_add_con_gen "The supremum of a set of additive congruence relations [-S-]{+`S`+} equals
--- a/src/group_theory/monoid_localization.lean
--- a/src/group_theory/submonoid.lean
--- a/src/number_theory/dioph.lean
--- a/src/set_theory/ordinal.lean
--- a/src/tactic/apply.lean
--- a/src/tactic/lean_core_docs.lean
--- a/src/tactic/lint/type_classes.lean
--- a/src/tactic/omega/main.lean
--- a/test/coinductive.lean
--- a/test/localized/import3.lean
--- a/test/norm_num.lean
--- a/test/tidy.lean
--- a/test/where.lean
```
P.S.: I don't know how to make `git diff` hide all non-interesting chunks.

Co-authored-by: Scott Morrison <scott@tqft.net>

### [2020-05-27T01:18:54+00:00](https://github.com/leanprover-community/mathlib/commit/2792c93ac5ad99a82945caad1110e6e284fd6ff7)
feat(ring_theory/fintype): in a finite nonzero_semiring, fintype.card (units R) < fintype.card R ([#2793](https://github.com/leanprover-community/mathlib/pull/#2793))

### [2020-05-26T17:35:27+00:00](https://github.com/leanprover-community/mathlib/commit/63b8c52cc4e395d80660d51a784e0e04504be9dc)
chore(scripts): update nolints.txt ([#2833](https://github.com/leanprover-community/mathlib/pull/#2833))

I am happy to remove some nolints for you!

### [2020-05-26T16:47:21+00:00](https://github.com/leanprover-community/mathlib/commit/4dfd706f71843263cdeb200db62cf41d198a1a32)
chore(scripts): update nolints.txt ([#2831](https://github.com/leanprover-community/mathlib/pull/#2831))

I am happy to remove some nolints for you!

### [2020-05-26T16:47:19+00:00](https://github.com/leanprover-community/mathlib/commit/4ca776ee14e48396dd201d12cc78ca9a4ccc94df)
feat(linear_algebra/quadratic_form): equivalence of quadratic forms ([#2769](https://github.com/leanprover-community/mathlib/pull/#2769))

### [2020-05-26T15:15:29+00:00](https://github.com/leanprover-community/mathlib/commit/9630eca84d9fe8a9638056e4f2ddb0cb09680768)
feat(data/nat/primes): lemmas about min_fac ([#2790](https://github.com/leanprover-community/mathlib/pull/#2790))

### [2020-05-26T13:30:46+00:00](https://github.com/leanprover-community/mathlib/commit/895f56890bc7e6ba31dcd84dae80120e237f0ef8)
perf(tactic/lint): speed up nolint attribute ([#2828](https://github.com/leanprover-community/mathlib/pull/#2828))

Looking up the nolint attribute only takes 15 seconds out of the 45 minutes, so speeding up this part has little effect.  More importantly, this PR removes one branch from the mathlib repository.

### [2020-05-26T13:30:44+00:00](https://github.com/leanprover-community/mathlib/commit/1cf59fccd1a057b0e2a1f2750346995c92500970)
chore(src/algebra/ordered_ring.lean): fix linting errors ([#2827](https://github.com/leanprover-community/mathlib/pull/#2827))

[Mentioned, but not really discussed, in this Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/How.20to.20get.20familiar.20enough.20with.20Mathlib.20to.20use.20it/near/198747067).

This PR also removes `mul_pos'` and `mul_nonneg'` lemmas because they are now identical to the improved `mul_pos` and `mul_nonneg`.

### [2020-05-26T13:30:42+00:00](https://github.com/leanprover-community/mathlib/commit/7d864755ebd98e02c4070befdf8746aa02550900)
feat(data/polynomial): eq_one_of_is_unit_of_monic ([#2823](https://github.com/leanprover-community/mathlib/pull/#2823))

~~Depends on [#2822](https://github.com/leanprover-community/mathlib/pull/#2822) ~~

### [2020-05-26T13:30:40+00:00](https://github.com/leanprover-community/mathlib/commit/099ffd3847fe794a6d8694c8acf92181979e9489)
chore(algebra/free_monoid): use implicit args in `lift` ([#2821](https://github.com/leanprover-community/mathlib/pull/#2821))

### [2020-05-26T13:30:38+00:00](https://github.com/leanprover-community/mathlib/commit/fc7908925eb8d6255ee4046a2262412b424cbc18)
feat(number_theory/primorial): Bound on the primorial function ([#2701](https://github.com/leanprover-community/mathlib/pull/#2701))

This lemma is needed for Erdös's proof of Bertrand's postulate, but it may be of independent interest.

### [2020-05-26T11:43:31+00:00](https://github.com/leanprover-community/mathlib/commit/2c40bd3fa2ac97475a22b5f3dd00f00461089d52)
feat(tactic/push_cast): take list of extra simp lemmas ([#2825](https://github.com/leanprover-community/mathlib/pull/#2825))

closes [#2783](https://github.com/leanprover-community/mathlib/pull/#2783) 

Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-05-26T10:40:07+00:00](https://github.com/leanprover-community/mathlib/commit/ab2e52e063db8c1db9c10f643a3dcae3b28eddda)
feat(order/filter/basic): a local left inverse locally equals a local right inverse ([#2808](https://github.com/leanprover-community/mathlib/pull/#2808))

### [2020-05-26T10:40:05+00:00](https://github.com/leanprover-community/mathlib/commit/8c36b32f480b822ebfbfce90fe330297b8a84656)
feat(order/filter/basic): add `eventually.curry` ([#2807](https://github.com/leanprover-community/mathlib/pull/#2807))

I'm not sure that this is a good name. Suggestions of better names are welcome.

### [2020-05-26T10:40:03+00:00](https://github.com/leanprover-community/mathlib/commit/597946df62e88f89be90e552bb5dbc1c38d45f59)
feat(analysis/calculus/implicit): Implicit function theorem ([#2749](https://github.com/leanprover-community/mathlib/pull/#2749))

Fixes [#1849](https://github.com/leanprover-community/mathlib/pull/#1849)

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/2749.20Implicit.20function.20theorem).

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-05-26T09:33:44+00:00](https://github.com/leanprover-community/mathlib/commit/b4d4d9aace717e0b2bee4f64840097135093ed07)
feat(ring_theory/algebra): more on restrict_scalars ([#2445](https://github.com/leanprover-community/mathlib/pull/#2445))



Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-05-26T08:11:51+00:00](https://github.com/leanprover-community/mathlib/commit/ea403b34791d6bebd9834e70dcc5a1b6a85dffc7)
feat(algebra/group_with_zero): mul_self_mul_inv ([#2795](https://github.com/leanprover-community/mathlib/pull/#2795))

I found this lemma was useful for simplifying some expressions without
needing to split into cases or provide a proof that the denominator is
nonzero, and it doesn't show up with library_search.

### [2020-05-26T06:41:18+00:00](https://github.com/leanprover-community/mathlib/commit/1c265e264bfefdd14f888c61a6054d65ffef583d)
feat(data/nat/basic): with_bot lemmas ([#2822](https://github.com/leanprover-community/mathlib/pull/#2822))

### [2020-05-26T05:06:40+00:00](https://github.com/leanprover-community/mathlib/commit/9bb99568ad12420c8c21bda24f7f60e544848777)
feat(data/nat/basic): inequalities ([#2801](https://github.com/leanprover-community/mathlib/pull/#2801))

Adds some simple inequalities about `nat.pow`.

### [2020-05-26T00:59:03+00:00](https://github.com/leanprover-community/mathlib/commit/4b616e6de6d3450ac53affbe5da2ead3089e6456)
feat(category_theory/limits): transport lemmas for kernels ([#2779](https://github.com/leanprover-community/mathlib/pull/#2779))



Co-authored-by: Scott Morrison <scott@tqft.net>

### [2020-05-25T20:20:32+00:00](https://github.com/leanprover-community/mathlib/commit/aad2dfc40e8e6a7e258287a7c1580318e865817e)
fix(group_with_zero): fix definition of comm_monoid_with_zero ([#2818](https://github.com/leanprover-community/mathlib/pull/#2818))

Also generate instance comm_group_with_zero -> comm_monoid_with_zero.

### [2020-05-25T15:03:03+00:00](https://github.com/leanprover-community/mathlib/commit/ae5b55bdf3f4cab4681fa54de75dfb8772b666fd)
feat(algebra/ring): ring_hom.map_dvd ([#2813](https://github.com/leanprover-community/mathlib/pull/#2813))



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-05-25T12:50:28+00:00](https://github.com/leanprover-community/mathlib/commit/52b839f3e54ebe2216a144928016399fbce41b57)
feat(data/polynomial): is_unit_C ([#2812](https://github.com/leanprover-community/mathlib/pull/#2812))

### [2020-05-25T12:50:26+00:00](https://github.com/leanprover-community/mathlib/commit/3e0668e079d0d57e2e53f9028ac7bec5efee0e5c)
feat(linear_algebra/projection): add `equiv_prod_of_surjective_of_is_compl` ([#2787](https://github.com/leanprover-community/mathlib/pull/#2787))

If kernels of two surjective linear maps `f`, `g` are complement subspaces,
then `x ↦ (f x, g x)` defines a  linear equivalence.

I also add a version of this equivalence for continuous maps.
Depends on [#2785](https://github.com/leanprover-community/mathlib/pull/#2785)

### [2020-05-25T12:07:49+00:00](https://github.com/leanprover-community/mathlib/commit/60f0b012d3f724159b3d5366077ed85eef18a4f2)
feat(logic/function): define `semiconj` and `commute` ([#2788](https://github.com/leanprover-community/mathlib/pull/#2788))

### [2020-05-25T10:18:13+00:00](https://github.com/leanprover-community/mathlib/commit/96f318c5075063837afc8b284cb9cf272ccf4390)
feat(algebra/group_power): int.nat_abs_pow_two ([#2811](https://github.com/leanprover-community/mathlib/pull/#2811))



Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-05-25T10:18:11+00:00](https://github.com/leanprover-community/mathlib/commit/9da47ada8533b139910f032cd556dd3179345b6e)
feat(data/zmod): lemmas about coercions to zmod ([#2802](https://github.com/leanprover-community/mathlib/pull/#2802))

I'm not particularly happy with the location of these new lemmas within the file `data.zmod`. If anyone has a suggestion that they should be some particular place higher or lower in the file, that would be welcome.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-05-25T08:49:00+00:00](https://github.com/leanprover-community/mathlib/commit/dd062f027be77f3d403760ab749d5f9c0e6633b6)
feat(data/nat/prime): pow_not_prime ([#2810](https://github.com/leanprover-community/mathlib/pull/#2810))

### [2020-05-25T07:24:08+00:00](https://github.com/leanprover-community/mathlib/commit/a2d50075a4eabd77f24485f61916f6350147187f)
chore(topology/algebra/module): prove `fst.prod snd = id` ([#2806](https://github.com/leanprover-community/mathlib/pull/#2806))

### [2020-05-25T07:24:07+00:00](https://github.com/leanprover-community/mathlib/commit/ccf646d322bcfe693df4ba53d34a605f283199d8)
chore(set_theory/ordinal): use a `protected lemma` to drop a `nolint` ([#2805](https://github.com/leanprover-community/mathlib/pull/#2805))

### [2020-05-25T07:24:05+00:00](https://github.com/leanprover-community/mathlib/commit/a3b3aa628e8ac454bb7a6d8cd490542da14f123c)
fix(tactic/norm_num): workaround int.sub unfolding bug ([#2804](https://github.com/leanprover-community/mathlib/pull/#2804))

Fixes https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/certificates.20for.20calculations/near/198631936 . Or rather, it works around an issue in how the kernel unfolds applications. The real fix is probably to adjust the definitional height or other heuristics around `add_group_has_sub` and `int.sub` so that tries to prove that they are defeq that way rather than unfolding `bit0` and `bit1`. Here is a MWE for the issue:

```lean
example : int.has_sub = add_group_has_sub := rfl

example :
  (@has_sub.sub ℤ int.has_sub 5000 2 : ℤ) =
  (@has_sub.sub ℤ add_group_has_sub 5000 2) := rfl -- deep recursion
```

Co-authored-by: Scott Morrison <scott@tqft.net>

### [2020-05-25T06:35:44+00:00](https://github.com/leanprover-community/mathlib/commit/6552f21e86dd2e80649ebc59a8f8e09810a49512)
feat(algebra/add_torsor): torsors of additive group actions ([#2720](https://github.com/leanprover-community/mathlib/pull/#2720))

Define torsors of additive group actions, to the extent needed for
(and with notation motivated by) affine spaces, to the extent needed
for Euclidean spaces.  See
https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Some.20olympiad.20formalisations
for the discussion leading to this particular structure.

### [2020-05-25T05:05:19+00:00](https://github.com/leanprover-community/mathlib/commit/518d0fd989486e8028f6d54dcdfdf815b5859017)
feat(data/int/basic): eq_zero_of_dvd_of_nonneg_of_lt ([#2803](https://github.com/leanprover-community/mathlib/pull/#2803))

### [2020-05-24T19:02:14+00:00](https://github.com/leanprover-community/mathlib/commit/8d352b200937598eba3aa303b5acc558713e645a)
feat(char_p): generalize zmod.neg_one_ne_one ([#2796](https://github.com/leanprover-community/mathlib/pull/#2796))

### [2020-05-24T17:52:18+00:00](https://github.com/leanprover-community/mathlib/commit/61b57cd7abf4bdabe86651c9890d119e676d27cf)
chore(scripts): update nolints.txt ([#2799](https://github.com/leanprover-community/mathlib/pull/#2799))

I am happy to remove some nolints for you!

### [2020-05-24T17:03:59+00:00](https://github.com/leanprover-community/mathlib/commit/1445e088fe75c42bdae8d5c6e06d5ad73d171162)
chore(scripts): update nolints.txt ([#2798](https://github.com/leanprover-community/mathlib/pull/#2798))

I am happy to remove some nolints for you!

### [2020-05-24T16:14:04+00:00](https://github.com/leanprover-community/mathlib/commit/8590081fba80d89a447d5644bf1ae7ecbd9202dc)
feat(category_theory): Product comparison ([#2753](https://github.com/leanprover-community/mathlib/pull/#2753))

Construct the product comparison morphism, and show it's an iso iff F preserves binary products.

### [2020-05-24T15:07:07+00:00](https://github.com/leanprover-community/mathlib/commit/292fc0423c6c1a679ddf564f36413ce23951d2a7)
feat(category_theory): adjunction convenience defs ([#2754](https://github.com/leanprover-community/mathlib/pull/#2754))

Transport adjunctions along natural isomorphisms, and `is_left_adjoint` or `is_right_adjoint` versions of existing adjunction properties.

### [2020-05-24T09:09:11+00:00](https://github.com/leanprover-community/mathlib/commit/2ef444afbbdcae10682b2d46479c3f267caca0b6)
feat(linear_algebra/basic): range of `linear_map.prod` ([#2785](https://github.com/leanprover-community/mathlib/pull/#2785))

Also make `ker_prod` a `simp` lemma.

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-05-24T07:37:41+00:00](https://github.com/leanprover-community/mathlib/commit/5449203f9f463e34f13dc130b4e4c6764119b715)
chore(order/basic): change "minimum" in descriptions to "minimal" ([#2789](https://github.com/leanprover-community/mathlib/pull/#2789))

### [2020-05-23T13:13:15+00:00](https://github.com/leanprover-community/mathlib/commit/79e296bdc9f83b9447dc1b81730d36f63a99f72d)
doc(archive/100-theorems-list): Update README.md ([#2750](https://github.com/leanprover-community/mathlib/pull/#2750))

Making the 100.yaml file more discoverable.

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-05-23T12:26:58+00:00](https://github.com/leanprover-community/mathlib/commit/2a3f59a10cf880dd2d6dbd55b876ecccc8553811)
chore(scripts): update nolints.txt ([#2782](https://github.com/leanprover-community/mathlib/pull/#2782))

I am happy to remove some nolints for you!

### [2020-05-23T11:01:14+00:00](https://github.com/leanprover-community/mathlib/commit/2b79f1da03c11f53f86f92f5d521c1a1e8072394)
feat(ring_theory/ideal_operations): lemmas about ideals and galois connections ([#2767](https://github.com/leanprover-community/mathlib/pull/#2767))

depends on [#2766](https://github.com/leanprover-community/mathlib/pull/#2766) 

Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-05-23T09:33:06+00:00](https://github.com/leanprover-community/mathlib/commit/ceb13bad567d063a3ec44d46c202dedaab25c717)
chore(order/basic): add `monotone.order_dual`, `strict_mono.order_dual` ([#2778](https://github.com/leanprover-community/mathlib/pull/#2778))

Also split long lines and lint.

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-05-23T09:33:05+00:00](https://github.com/leanprover-community/mathlib/commit/90abd3bbc01b96b4fc0ec7f6db1736986db27b95)
feat(data/fintype): finset.univ_map_embedding ([#2765](https://github.com/leanprover-community/mathlib/pull/#2765))

Adds the lemma

```
lemma finset.univ_map_embedding {α : Type*} [fintype α] (e : α ↪ α) :
  (finset.univ).map e = finset.univ :=
```

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-05-23T09:33:02+00:00](https://github.com/leanprover-community/mathlib/commit/694850510c5dd050bdfa0858237257c2a94332f2)
feat(data/polynomial): prime_of_degree_eq_one_of_monic ([#2745](https://github.com/leanprover-community/mathlib/pull/#2745))

### [2020-05-23T07:44:20+00:00](https://github.com/leanprover-community/mathlib/commit/8c1793fe916f0a60097dcd1e3c99a59703bac731)
chore(data/equiv): make `equiv.ext` args use { } ([#2776](https://github.com/leanprover-community/mathlib/pull/#2776))

Other changes:

* rename lemmas `eq_of_to_fun_eq` to `coe_fn_injective`;
* add `left_inverse.eq_right_inverse` and use it to prove `equiv.ext`.

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-05-22T09:41:03+00:00](https://github.com/leanprover-community/mathlib/commit/f66caaadf4d1655d434e8bd13ac4257176269268)
chore(scripts): update nolints.txt ([#2777](https://github.com/leanprover-community/mathlib/pull/#2777))

I am happy to remove some nolints for you!

### [2020-05-22T08:09:58+00:00](https://github.com/leanprover-community/mathlib/commit/c6aab26251f5fe6b235faf52e4248a06131f3ffa)
feat(algebra/invertible): invertible_of_ring_char_not_dvd ([#2775](https://github.com/leanprover-community/mathlib/pull/#2775))

```
def invertible_of_ring_char_not_dvd {R : Type*} [field R] {t : ℕ} (not_dvd : ¬(ring_char R ∣ t)) :
  invertible (t : R)
```

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-05-22T08:09:56+00:00](https://github.com/leanprover-community/mathlib/commit/58789f7dc0be3d0df787cc53ab9a2cfb369ed127)
feat(analysis/normed_space/banach): add `continuous_linear_equiv.of_bijective` ([#2774](https://github.com/leanprover-community/mathlib/pull/#2774))

### [2020-05-22T07:28:22+00:00](https://github.com/leanprover-community/mathlib/commit/80ad9edc9a6d6d2971dd044f6079cc770e755020)
refactor(ring_theory/localization): characterise ring localizations up to isomorphism ([#2714](https://github.com/leanprover-community/mathlib/pull/#2714))

Beginnings of ```ring_theory/localization``` refactor from [#2675](https://github.com/leanprover-community/mathlib/pull/#2675).

It's a bit sad that using the characteristic predicate means Lean can't infer the R-algebra structure of the localization. I've tried to get round this, but I'm not using •, and I've duplicated some fairly random lemmas about modules & algebras to take ```f``` as an explicit argument - mostly just what I needed to make ```fractional_ideal``` work. Should I duplicate more?

My comments in the ```fractional_ideal``` docs about 'preserving definitional equalities' wrt getting an R-module structure from an R-algebra structure: do they make sense? I had some errors about definitional equality of instances which I *think* I fixed after making sure the R-module structure always came from the R-algebra structure, as well as doing a few other things. I never chased up exactly what the errors were or how they went away, so I'm just guessing at my explanation.

Things I've got left to PR to ```ring_theory/localization``` after this: 
- ```away``` (localization at submonoid generated by one element)
- localization as a quotient type & proof it satisfies the char pred
- localization at the complement of a prime ideal and the fact this is a local ring
- more lemmas about fields of fractions
- the order embedding for ideals of the localization vs. ideals of the original ring

Co-authored-by: Amelia Livingston <40745104+101damnations@users.noreply.github.com>

### [2020-05-22T06:26:36+00:00](https://github.com/leanprover-community/mathlib/commit/a012d76d5034d587924f23ccd0cdefa11569d5d9)
chore(linear_algebra/projection): use implicit args in lemmas ([#2773](https://github.com/leanprover-community/mathlib/pull/#2773))

### [2020-05-22T06:26:34+00:00](https://github.com/leanprover-community/mathlib/commit/749e39fee160726f4d2a614bc8dddc4507728e90)
feat(category_theory): preadditive binary biproducts ([#2747](https://github.com/leanprover-community/mathlib/pull/#2747))

This PR introduces "preadditive binary biproducts", which correspond to the second definition of biproducts given in [#2177](https://github.com/leanprover-community/mathlib/pull/#2177).

* Preadditive binary biproducts are binary biproducts.
* In a preadditive category, a binary product is a preadditive binary biproduct.
* This directly implies that `AddCommGroup` has preadditive binary biproducts. The existence of binary coproducts in `AddCommGroup` is then a consequence of abstract nonsense.

### [2020-05-22T05:08:46+00:00](https://github.com/leanprover-community/mathlib/commit/5585e3cb7ddc4ce75911d251eb19d6c0e2b30158)
chore(linear_algebra/basic): redefine le on submodule ([#2766](https://github.com/leanprover-community/mathlib/pull/#2766))

Previously, to prove an `S \le T`, there would be a coercion in the statement after `intro x`. This fixes that.

### [2020-05-21T22:53:42+00:00](https://github.com/leanprover-community/mathlib/commit/a9960ceffff8577750080d5fce05581ab35bd8ce)
chore(scripts): update nolints.txt ([#2771](https://github.com/leanprover-community/mathlib/pull/#2771))

I am happy to remove some nolints for you!

### [2020-05-21T20:35:43+00:00](https://github.com/leanprover-community/mathlib/commit/6c71874b6bb9574d8bbfa60320a139e6389c4d29)
feat(analysis/normed_space): complemented subspaces ([#2738](https://github.com/leanprover-community/mathlib/pull/#2738))

Define complemented subspaces and prove some basic facts.

### [2020-05-21T20:35:41+00:00](https://github.com/leanprover-community/mathlib/commit/fd45e28822418774fb4a6ed106e497d2952f9fb2)
fix(*): do not nolint simp_nf ([#2734](https://github.com/leanprover-community/mathlib/pull/#2734))

The `nolint simp_nf` for `subgroup.coe_coe` was hiding an actual nontermination issue.  Please just ping me if you're unsure about the `simp_nf` linter.

### [2020-05-21T18:58:04+00:00](https://github.com/leanprover-community/mathlib/commit/ec01a0d58037c354e4969b8df01c78af0a77557f)
perf(tactic/lint/simp): speed up `simp_comm` linter ([#2760](https://github.com/leanprover-community/mathlib/pull/#2760))

This is a fairly unimportant linter, but takes 35% of the linting runtime in my unscientific small-case profiling run.

### [2020-05-21T15:42:46+00:00](https://github.com/leanprover-community/mathlib/commit/d532eb60e445083b30f79d7ba0e9370177c19a63)
feat(order/lattice): sup_left_idem and similar ([#2768](https://github.com/leanprover-community/mathlib/pull/#2768))

### [2020-05-21T07:51:07+00:00](https://github.com/leanprover-community/mathlib/commit/951b967dcc0281a10bbb058a9bdcea2b8b33d812)
refactor(data/nat/basic): use function equality for `iterate` lemmas ([#2748](https://github.com/leanprover-community/mathlib/pull/#2748))

### [2020-05-20T19:37:56+00:00](https://github.com/leanprover-community/mathlib/commit/a540d79b457fb4ace649bc5a6dab6152405b0d36)
chore(archive/sensitivity): Clean up function coercion in sensitivity proof (depends on [#2756](https://github.com/leanprover-community/mathlib/pull/#2756)) ([#2758](https://github.com/leanprover-community/mathlib/pull/#2758))

This formalizes the proof of an old conjecture: `is_awesome Gabriel`. I also took the opportunity to remove type class struggling, which I think is related to the proof of `is_awesome Floris`.
I think @jcommelin should also update this sensitivity file to use his sum notations if applicable.

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-05-20T18:10:11+00:00](https://github.com/leanprover-community/mathlib/commit/3c9bf6b8851b6ddae404b92b2b4a5f92775339c2)
chore(scripts): update nolints.txt ([#2763](https://github.com/leanprover-community/mathlib/pull/#2763))

I am happy to remove some nolints for you!

### [2020-05-20T15:35:04+00:00](https://github.com/leanprover-community/mathlib/commit/d6420bdc3b96a53c3aa501da974be06db830b75c)
feat(ring_theory/principal_ideal_domain): definition of principal submodule ([#2761](https://github.com/leanprover-community/mathlib/pull/#2761))

This PR generalizes the definition of principal ideals to principal submodules. It turns out that it's essentially enough to replace `ideal R` with `submodule R M` in the relevant places. With this change, it's possible to talk about principal fractional ideals (although that development will have to wait [#2714](https://github.com/leanprover-community/mathlib/pull/#2714) gets merged).

Since the PR already changes the variables used in this file, I took the opportunity to rename them so `[ring α]` becomes `[ring R]`.

### [2020-05-20T15:35:02+00:00](https://github.com/leanprover-community/mathlib/commit/4c3e1a9d70beb60eaac082dcf63f7b6c33e6c3f0)
feat(algebra): the R-module structure on S-linear maps, for S an R-algebra ([#2759](https://github.com/leanprover-community/mathlib/pull/#2759))

I couldn't find this already in mathlib, but perhaps I've missed it. 

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-05-20T15:34:59+00:00](https://github.com/leanprover-community/mathlib/commit/6df77a61f6d8ca614331b1a2fdbf823ebc7cda96)
chore(*): update to Lean 3.14.0 ([#2756](https://github.com/leanprover-community/mathlib/pull/#2756))

This is an optimistic PR, betting *nothing* will break when moving to Lean 3.14.0.

### [2020-05-20T15:34:58+00:00](https://github.com/leanprover-community/mathlib/commit/164c2e3c74adccae8e3abf6411d4d3f7d87d27f6)
chore(category_theory): attributes and a transport proof ([#2751](https://github.com/leanprover-community/mathlib/pull/#2751))

A couple of cleanups, modified a proof or two so that `@[simps]` can be used, which let me clean up some other proofs. Also a proof that we can transfer that `F` preserves the limit `K` along an isomorphism in `K`.

(Preparation for some PRs from my topos project)

### [2020-05-20T12:01:53+00:00](https://github.com/leanprover-community/mathlib/commit/ab5d0f15414d9222d05aba626f2411c651e4426f)
feat(category_theory/binary_products): some product lemmas and their dual ([#2752](https://github.com/leanprover-community/mathlib/pull/#2752))

A bunch of lemmas about binary products.

### [2020-05-20T11:03:44+00:00](https://github.com/leanprover-community/mathlib/commit/1f00282972fcf8957c3d4b4ecac0601dd7550355)
docs(linear_algebra/sesquilinear_form): correct module docs ([#2757](https://github.com/leanprover-community/mathlib/pull/#2757))

@PatrickMassot mentioned that the docs for `sesquilinear_form` mention bilinear forms instead in a few places. This PR corrects them to use "sesquilinear form" everywhere.

### [2020-05-20T06:18:22+00:00](https://github.com/leanprover-community/mathlib/commit/cbe80ed26d0d8ca6def780e403396b4299fe1fa6)
feat(linear_algebra/projection): projection to a subspace ([#2739](https://github.com/leanprover-community/mathlib/pull/#2739))

Define equivalence between complement subspaces and projections.

### [2020-05-19T22:34:25+00:00](https://github.com/leanprover-community/mathlib/commit/3c1f9f9c23478dab92df98a038feeef922efc334)
feat(data/nat/choose): sum_range_choose_halfway ([#2688](https://github.com/leanprover-community/mathlib/pull/#2688))

This is a lemma on the way to proving that the product of primes less than `n` is less than `4 ^ n`, which is itself a lemma in Bertrand's postulate.

The lemma itself is of dubious significance, but it will eventually be necessary for Bertrand, and I want to commit early and often. Brief discussion of this decision at https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Candidate.20for.20inclusion.20in.20mathlib/near/197619722 .

This is my second PR to mathlib; the code is definitely verbose and poorly structured, but I don't know how to fix it. I'm expecting almost no lines of the original to remain by the end of this!

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-05-19T18:38:27+00:00](https://github.com/leanprover-community/mathlib/commit/e3aca90ae94a189acaef381b80be2ae117152f2b)
feat(logic/basic): spaces with a zero or a one are nonempty ([#2743](https://github.com/leanprover-community/mathlib/pull/#2743))

Register instances that a space with a zero or a one is not empty, with low priority as we don't want to embark on a search for a zero or a one if this is not necessary.

Discussion on Zulip at https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inhabited.20and.20nonempty.20instances/near/198030072

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-05-19T17:00:43+00:00](https://github.com/leanprover-community/mathlib/commit/607767e2e29f57d511e944588a54df50fbf60eec)
feat(algebra/big_operators): reversing an interval doesn't change the product ([#2740](https://github.com/leanprover-community/mathlib/pull/#2740))

Also use Gauss summation in the Gauss summation formula.

Inspired by [#2688](https://github.com/leanprover-community/mathlib/pull/#2688)

### [2020-05-19T15:54:58+00:00](https://github.com/leanprover-community/mathlib/commit/62c22dafd3e7c60f64cf1523c7728ab894a1d3db)
fix(ci): replace 2 old secret names ([#2744](https://github.com/leanprover-community/mathlib/pull/#2744))

[`lean-3.13.2`](https://github.com/leanprover-community/mathlib/tree/lean-3.13.2) is out of date, since I missed two instances of `DEPLOY_NIGHTLY_GITHUB_TOKEN` in [#2737](https://github.com/leanprover-community/mathlib/pull/#2737).

### [2020-05-19T11:50:10+00:00](https://github.com/leanprover-community/mathlib/commit/1e18512517fe53cc5f45b2cba78996e606ac67ba)
chore(*): remove non-canonical `option.decidable_eq_none` instance ([#2741](https://github.com/leanprover-community/mathlib/pull/#2741))

I also removed the hack in `ulower.primcodable` where I had to use `none = o` instead of `o = none`.

### [2020-05-19T09:58:39+00:00](https://github.com/leanprover-community/mathlib/commit/93b41e565767ee0d471b0211b4cdd825ace27ae0)
fix(*): put headings in multiline module docs on their own lines ([#2742](https://github.com/leanprover-community/mathlib/pull/#2742))

found using regex: `/-! #([^-/])*$`.

These don't render correctly in the mathlib docs. Module doc strings that consist of a heading on its own line are OK so I haven't changed them.

I also moved some descriptive text from copyright headers to module docs, or removed such text if there was already a module doc string.

### [2020-05-19T09:58:37+00:00](https://github.com/leanprover-community/mathlib/commit/3d948bf189260a0d044af45ad20bd9462b6b8246)
feat(analysis/normed_space): interior of `closed_ball` etc ([#2723](https://github.com/leanprover-community/mathlib/pull/#2723))

* define `sphere x r`
* prove formulas for `interior`, `closure`, and `frontier` of open and closed balls in real normed vector spaces.

### [2020-05-19T08:28:09+00:00](https://github.com/leanprover-community/mathlib/commit/f2cb546255adea131306b6dc8b489e018c4c3718)
fix(ci): setup git before nolints, rename secret ([#2737](https://github.com/leanprover-community/mathlib/pull/#2737))

Oops, I broke the update nolints step on master. This should fix it.

### [2020-05-19T08:28:08+00:00](https://github.com/leanprover-community/mathlib/commit/3968f7f483359d5413224d4351f52b3f2d0cbf34)
feat(linear_algebra): equiv_of_is_basis' and module.fintype_of_fintype ([#2735](https://github.com/leanprover-community/mathlib/pull/#2735))

### [2020-05-19T08:28:05+00:00](https://github.com/leanprover-community/mathlib/commit/80b7f975f8d5b835825b9c634ff2f72f7230eb5d)
feat(tactic/localized): fail if unused locale is open ([#2718](https://github.com/leanprover-community/mathlib/pull/#2718))

This is more in line with the behavior of `open`.

Closes [#2702](https://github.com/leanprover-community/mathlib/pull/#2702) 

Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-05-19T08:28:03+00:00](https://github.com/leanprover-community/mathlib/commit/3ba7d1289ba42ad3c1dd2c3ae649f5da6214eff5)
feat(algebra): obtaining algebraic classes through in/surjective maps ([#2638](https://github.com/leanprover-community/mathlib/pull/#2638))

This is needed for the definition of Witt vectors.

### [2020-05-19T07:10:15+00:00](https://github.com/leanprover-community/mathlib/commit/52aa1281863341a409038f1ce98088944ac43a5b)
feat(data/equiv): add add_equiv.to_multiplicative ([#2732](https://github.com/leanprover-community/mathlib/pull/#2732))

We already have `add_monoid_hom.to_multiplicative`. This adds `add_equiv.to_multiplicative`.

It is placed in `data/equiv/mul_add.lean` because `data/equiv/mul_add.lean` already imports `algebra/group/type_tags.lean`.

### [2020-05-19T06:13:04+00:00](https://github.com/leanprover-community/mathlib/commit/906220cace361013804834d316b7e4a7376b14b0)
feat(topology/bounded_continuous_function): Normed algebra of bounded continuous functions ([#2722](https://github.com/leanprover-community/mathlib/pull/#2722))

The space `C(α, γ)` of bounded continuous functions into a normed algebra γ is a normed algebra.  The space of bounded continuous functions into a normed 𝕜-space is a `C(α, 𝕜)`-module.

Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>
Co-authored-by: hrmacbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2020-05-19T03:26:24+00:00](https://github.com/leanprover-community/mathlib/commit/01efaebc3ca6776608f9842135935dc85a1e8a76)
feat(ci): run lint and tests in parallel ([#2736](https://github.com/leanprover-community/mathlib/pull/#2736))

Actions doesn't let us run *steps* in parallel, but we can run *jobs* in parallel. The lint and test jobs are part of the same *workflow*. Understanding Actions terminology is half the battle.

Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-05-18T18:12:30+00:00](https://github.com/leanprover-community/mathlib/commit/f01260a72c6ff5e6677ac8c6a8d92997d2a817e7)
feat(algebra/char_p): eq_iff_modeq_int ([#2731](https://github.com/leanprover-community/mathlib/pull/#2731))

### [2020-05-18T16:18:17+00:00](https://github.com/leanprover-community/mathlib/commit/9d762df7cb644cf59636ae89c1ea7fe8ceedbdd8)
chore(scripts): update nolints.txt ([#2733](https://github.com/leanprover-community/mathlib/pull/#2733))

I am happy to remove some nolints for you!

### [2020-05-18T13:38:47+00:00](https://github.com/leanprover-community/mathlib/commit/ff3130da134188aa6491efa6cebe94efa4247273)
feat(topology/constructions): topology on ulift ([#2716](https://github.com/leanprover-community/mathlib/pull/#2716))

### [2020-05-18T13:38:45+00:00](https://github.com/leanprover-community/mathlib/commit/4026bd8c1eca60206588be464939285f79a81ed5)
feat(category_theory/full_subcategory): induced category from a groupoid is a groupoid ([#2715](https://github.com/leanprover-community/mathlib/pull/#2715))

Also some minor cleanup to the same file.

### [2020-05-18T13:38:43+00:00](https://github.com/leanprover-community/mathlib/commit/2fa1d7cd3c6735a3d74a8767f9b737852d21861f)
Revert "fix(category_theory/eq_to_hom): remove bad simp lemmas ([#1346](https://github.com/leanprover-community/mathlib/pull/#1346))" ([#2713](https://github.com/leanprover-community/mathlib/pull/#2713))

These are good simp lemmas: they push things into a proof-irrelevant position.

This reverts commit 5a309a3aa30fcec122a26f379f05b466ee46fc7a.

### [2020-05-18T13:38:41+00:00](https://github.com/leanprover-community/mathlib/commit/8b422458ee63a25929f28695e9057a7ae707d7de)
refactor(algebra): merge init_.algebra into algebra ([#2707](https://github.com/leanprover-community/mathlib/pull/#2707))

This is a big refactor PR. It depends on [#2697](https://github.com/leanprover-community/mathlib/pull/#2697), which brings in the algebra hierarchy without any change to the file structure. This PR merges `init_.algebra.group` into `algebra.group` and so on for the rest of the algebraic hierarchy.

Co-authored-by: Mario Carneiro <di.gama@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-05-18T13:38:39+00:00](https://github.com/leanprover-community/mathlib/commit/18217e9ab6e059b6e04658b04aad36e79ce63dee)
feat(nat/choose): Generalise nat.dvd_choose ([#2703](https://github.com/leanprover-community/mathlib/pull/#2703))

Spin-off from [#2701](https://github.com/leanprover-community/mathlib/pull/#2701).

### [2020-05-18T11:24:28+00:00](https://github.com/leanprover-community/mathlib/commit/434e6a65b8d8cc80371f7a6a835e672fa112c111)
chore(*): update to lean 3.13.2 ([#2728](https://github.com/leanprover-community/mathlib/pull/#2728))

This should fix the bug with the missing module doc strings in the documentation.

### [2020-05-17T23:39:12+00:00](https://github.com/leanprover-community/mathlib/commit/93119dd66bf63f38aa4a2fbdd7506cef4ccac1c6)
chore(scripts): update nolints.txt ([#2721](https://github.com/leanprover-community/mathlib/pull/#2721))

I am happy to remove some nolints for you!

### [2020-05-17T22:37:56+00:00](https://github.com/leanprover-community/mathlib/commit/7325104787508bbf614bc0d6ec1be4806e2974cb)
feat(ci): store xz archives ([#2719](https://github.com/leanprover-community/mathlib/pull/#2719))

https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean.20cache

Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-05-17T20:01:37+00:00](https://github.com/leanprover-community/mathlib/commit/cdf97dcc6132bc97c24b157f2265beea77aa92d1)
refactor(field_theory): preparations for Chevalley–Warning ([#2590](https://github.com/leanprover-community/mathlib/pull/#2590))

This PR adds some preparations for the Chevalley–Warning theorem.

depends on: ~[#2606](https://github.com/leanprover-community/mathlib/pull/#2606), [#2607](https://github.com/leanprover-community/mathlib/pull/#2607), [#2623](https://github.com/leanprover-community/mathlib/pull/#2623)~

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-05-17T17:58:04+00:00](https://github.com/leanprover-community/mathlib/commit/f23c361e3902dc947f1f8f8003522a870ecaf393)
chore(*): bump to lean-3.13.1 ([#2697](https://github.com/leanprover-community/mathlib/pull/#2697))

## Move algebra to mathlib

The algebraic hierarchy has moved from the core library to `init_`. In later PRs this can be integrated into the existing directory structure of mathlib.

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-05-17T15:08:29+00:00](https://github.com/leanprover-community/mathlib/commit/3449510c095f2f9dc81456cebf1f0054d0bb8231)
feat(algebra/big_operators): Alternative phrasing of prod-bij ([#2709](https://github.com/leanprover-community/mathlib/pull/#2709))

Requested by @ChrisHughes24 in https://github.com/leanprover-community/mathlib/pull/2688/files#r426184248

A repaired version of [#2708](https://github.com/leanprover-community/mathlib/pull/#2708).

### [2020-05-17T12:00:04+00:00](https://github.com/leanprover-community/mathlib/commit/a206df1e21689f2e1a742e9c3269f9ebdfea958c)
chore(scripts): update nolints.txt ([#2711](https://github.com/leanprover-community/mathlib/pull/#2711))

I am happy to remove some nolints for you!

### [2020-05-17T07:42:04+00:00](https://github.com/leanprover-community/mathlib/commit/b530cdb4b3d0ba20b13f931cd07536d9cd271cb1)
refactor(normed_space): require `norm_smul_le` instead of `norm_smul` ([#2693](https://github.com/leanprover-community/mathlib/pull/#2693))

While in many cases we can prove `norm_smul` directly, in some cases (e.g., for the operator norm) it's easier to prove `norm_smul_le`. Redefine `normed_space` to avoid repeating the same trick over and over.

Co-authored-by: Heather Macbeth <hrmacbeth@users.noreply.github.com>

Co-authored-by: Heather Macbeth <25316162+hrmacbeth@users.noreply.github.com>

### [2020-05-17T04:33:06+00:00](https://github.com/leanprover-community/mathlib/commit/39af0f66d01935427c5b2520d65f23c9b9ac04d8)
chore(algebra/ring): drop an unneeded instance ([#2705](https://github.com/leanprover-community/mathlib/pull/#2705))

We're incompatible with Lean 3.4.2 for a long time.

### [2020-05-17T02:07:24+00:00](https://github.com/leanprover-community/mathlib/commit/1580cd87b07169ae1712a70eefa68c2152dd7828)
fix(algebra/big_operators): typo fix ([#2704](https://github.com/leanprover-community/mathlib/pull/#2704))

Fix cut-and-paste typos in the doc string for `∑ x, f x`.

### [2020-05-17T02:07:22+00:00](https://github.com/leanprover-community/mathlib/commit/4f484a1e1b218984815ca8769a8dca04af33577b)
feat(archive/100-theorems-list): Sum of the Reciprocals of the Triangular Numbers ([#2692](https://github.com/leanprover-community/mathlib/pull/#2692))

Adds a folder `archive/100-theorems-list`, moves our proof of 82 into it, and provides a proof of 42. There's a readme, I haven't really thought about what should go in there.

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-05-17T00:07:54+00:00](https://github.com/leanprover-community/mathlib/commit/21bdb7872b6a6f03aab5714726d5286d393185df)
feat(ring_theory/ideal_operations): jacobson radical, is_local, and primary ideals ([#768](https://github.com/leanprover-community/mathlib/pull/#768))



Co-authored-by: Aniruddh Agarwal <5279150+anrddh@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Aniruddh Agarwal <me@anrddh.me>

### [2020-05-16T21:18:08+00:00](https://github.com/leanprover-community/mathlib/commit/00024db7fee8ccf1ca39434b3a8a14b671bd2467)
refactor(group_theory/monoid_localization): use old_structure_cmd ([#2683](https://github.com/leanprover-community/mathlib/pull/#2683))

Second bit of [#2675](https://github.com/leanprover-community/mathlib/pull/#2675).
The change to ```old_structure_cmd``` is so ring localizations can use this file more easily.

I've not made sure the map ```f``` is implicit when it can be because ```f.foo``` notation means it doesn't make much difference, but I'll change this if needed.*

I have changed some of the bad names at the end; they are still not great.  Does anyone have any
alternative suggestions?

Things to come in future PRs: the group completion of a comm monoid and some examples, ```away``` (localization at a submonoid generated by one element), more stuff on the localization as a quotient type & the fact it satisfies the char pred.

I think I've learnt some stuff about the ```@[simp]``` linter today. Hopefully I'll be making fewer commits trying and failing to appease it.

*edit: I mean I haven't checked how many places I can make ```f``` implicit & remove the appropriate ```f.```'s.

### [2020-05-16T17:50:21+00:00](https://github.com/leanprover-community/mathlib/commit/a7b17cdd9ce1ca1c176005ad33b311367082d9c7)
feat(data/finset): remove uses of choice for infima ([#2699](https://github.com/leanprover-community/mathlib/pull/#2699))

This PR removes the dependence of many lemmas about inf of finset sets on the axiom of choice. The motivation for this is to make `category_theory.limits.has_finite_limits_of_semilattice_inf_top` not depend on choice, which I would like so that I can prove independence results about topos models of set theory from the axiom of choice.

This does make the decidable_classical linter fail.

### [2020-05-16T14:49:11+00:00](https://github.com/leanprover-community/mathlib/commit/c81be77b8d60118a7756479601d252991251f90b)
feat(data/finset) Another finset disjointness lemma ([#2698](https://github.com/leanprover-community/mathlib/pull/#2698))

I couldn't find this anywhere, and I wanted it.

Naming question: this is "obviously" called `disjoint_filter`, except there's already a lemma with that name.

I know I've broken one of the rules of using `simp` here ("don't do it at the beginning"), but this proof is much longer than I'd have thought would be necessary so I'm rather expecting someone to hop in with a one-liner.

### [2020-05-16T07:36:54+00:00](https://github.com/leanprover-community/mathlib/commit/4b71428d7ba651bcfa326e42995aa551541c2102)
doc(tactic/solve_by_elim): improve docs ([#2696](https://github.com/leanprover-community/mathlib/pull/#2696))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-05-16T02:47:42+00:00](https://github.com/leanprover-community/mathlib/commit/74286f51ce03a0bda2f1d424ca82ae5626bc9d75)
feat(category_theory/limits/shapes): avoid choice for binary products ([#2695](https://github.com/leanprover-community/mathlib/pull/#2695))

A tiny change to liberate binary products from the axiom of choice

### [2020-05-15T21:05:48+00:00](https://github.com/leanprover-community/mathlib/commit/1b85e3c213f57dc4675a821721f51c6c46c9b65a)
chore(*): bump to lean-3.12.0 ([#2681](https://github.com/leanprover-community/mathlib/pull/#2681))

## Changes to bracket notation

* `{a}` now requires an instance `has_singleton`;
* `insert a ∅ = {a}` is called `insert_emptyc_eq`, provided by an `is_lawful_singleton` instance;
* `a ∈ ({b} : set α)` is now defeq `a = b`, not `a = b ∨ false`;
* `({a} : set α)` is no longer defeq `insert a ∅`;
* `({a} : finset α)` now means `⟨⟨[a]⟩, _⟩` (used to be called `finset.singleton a`), not `insert a ∅`;
* removed `finset.singleton`;
* `{a, b}` is now `insert a {b}`, not `insert b {a}`.
* `finset.univ : finset bool` is now `{tt, ff}`;
* `(({a} : finset α) : set α)` is no longer defeq `{a}`.

## Tactic `norm_num`

The interactive tactic `norm_num` was recently rewritten in Lean. The non-interactive `tactic.norm_num` has been removed in Lean 3.12 so that we can migrate the algebraic hierarchy to mathlib in 3.13.

## Tactic combinators

https://github.com/leanprover-community/lean/pull/212 renames a bunch of tactic combinators. We change to using the new names.

## Tactic `case`

https://github.com/leanprover-community/lean/pull/228 slightly changes the semantics of the `case` tactic. We fix the resulting breakage to be conform the new semantics.

Co-authored-by: Jannis Limperg <jannis@limperg.de>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2020-05-15T21:05:46+00:00](https://github.com/leanprover-community/mathlib/commit/f5f7a3cfdb7556a0ff549ef2988c55a6cd4c34f2)
feat(analysis/special_functions/exp_log): power series for log around 1 ([#2646](https://github.com/leanprover-community/mathlib/pull/#2646))

This PR adds the power series expansion for the real logarithm around `1`, in the form
```lean
has_sum (λ (n : ℕ), x ^ (n + 1) / (n + 1)) (-log (1 - x))
```

### [2020-05-15T18:16:25+00:00](https://github.com/leanprover-community/mathlib/commit/14a82b30165faa50113cbf463e5bc42e1f53a5ff)
fix(tactic/norm_num): div/mod with negative first arg ([#2689](https://github.com/leanprover-community/mathlib/pull/#2689))

bugfix from https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/norm_num.20doesn't.20prove/near/197674516

### [2020-05-15T16:34:16+00:00](https://github.com/leanprover-community/mathlib/commit/a4266a01d2dcb10de19369307c986d038c7bb6a6)
chore(scripts): update nolints.txt ([#2690](https://github.com/leanprover-community/mathlib/pull/#2690))

I am happy to remove some nolints for you!

### [2020-05-15T13:15:27+00:00](https://github.com/leanprover-community/mathlib/commit/471d29e8835ccc5d1accc9ec54b2160780f15109)
perf(tactic/ring): use new norm_num, avoid mk_app ([#2685](https://github.com/leanprover-community/mathlib/pull/#2685))

Remove `tactic.norm_num` from `ring`, and do some performance upgrades borrowed from the `norm_num` overhaul while I'm at it.

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-05-15T07:57:55+00:00](https://github.com/leanprover-community/mathlib/commit/b44fa3ca86bc6ccc6366f8246d0ee10dffaeea4e)
chore(data/int/basic): mark cast_sub with simp attribute ([#2687](https://github.com/leanprover-community/mathlib/pull/#2687))

I think the reason this didn't have the `simp` attribute already was from the time when `sub_eq_add_neg` was a `simp` lemma, so it wasn't necessary. I'm adding the `simp` attribute back now that `sub_eq_add_neg` is not a `simp` lemma.

### [2020-05-15T04:51:31+00:00](https://github.com/leanprover-community/mathlib/commit/f07ac364691e793f1c77408a8976d8e55cd9e358)
feat(category_theory/limits/lattice): finite limits in a semilattice ([#2665](https://github.com/leanprover-community/mathlib/pull/#2665))

Construct finite limits in a semilattice_inf_top category, and finite colimits in a semilattice_sup_bot category.

### [2020-05-15T03:11:30+00:00](https://github.com/leanprover-community/mathlib/commit/378aa0d778662eba3b2b74e4b5af3e8d8fd79224)
feat(data/nat/choose): Sum a row of Pascal's triangle ([#2684](https://github.com/leanprover-community/mathlib/pull/#2684))

Add the "sum of the nth row of Pascal's triangle" theorem.

Naming is hard, of course, and this is my first PR to mathlib, so naming suggestions are welcome.

Briefly discussed at https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Candidate.20for.20inclusion.20in.20mathlib/near/197619403 .

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-05-14T18:21:52+00:00](https://github.com/leanprover-community/mathlib/commit/be03a3d4d67170811fb59d263c14cda35527e0af)
chore(scripts): update nolints.txt ([#2682](https://github.com/leanprover-community/mathlib/pull/#2682))

I am happy to remove some nolints for you!

### [2020-05-14T18:21:50+00:00](https://github.com/leanprover-community/mathlib/commit/606be81d92db3dfe79265f67569eab804c9d6426)
perf(tactic/ext): NEVER USE `user_attribute.get_param` ([#2674](https://github.com/leanprover-community/mathlib/pull/#2674))

Refactor the extensionality attribute a bit so that it avoids `get_param`, which is a performance nightmare because it uses `eval_expr`.

```lean
import all

set_option profiler true
example (f g : bool → bool → set bool) : f = g :=
by ext

-- before: tactic execution took 2.19s
-- after: tactic execution took 33ms
```

### [2020-05-14T18:21:48+00:00](https://github.com/leanprover-community/mathlib/commit/7427f8e0d9fd01da1ad81c19e88c236b00deccd2)
feat(topology): a few properties of `tendsto _ _ (𝓤 α)` ([#2645](https://github.com/leanprover-community/mathlib/pull/#2645))

- prove that `λ f g, tendsto (λ x, (f x, g x)) l (𝓤 α)` is an equivalence realtion;
- in case of a metric space, restate this relation as `tendsto (λ x, dist (f x) (g x)) l (𝓝 0)`;
- prove that `tendsto f l (𝓝 a) ↔ tendsto g l (𝓝 b)` provided that
  `tendsto (λ x, (f x, g x)) l (𝓤 α)`.

### [2020-05-14T15:22:51+00:00](https://github.com/leanprover-community/mathlib/commit/d412cfd086abadf27b7d03f1e534e55f6cd4d162)
chore(algebra/ring): lemmas about units in a semiring ([#2680](https://github.com/leanprover-community/mathlib/pull/#2680))

The lemmas in non-localization files from [#2675](https://github.com/leanprover-community/mathlib/pull/#2675). (Apart from one, which wasn't relevant to [#2675](https://github.com/leanprover-community/mathlib/pull/#2675)).

(Edit: I am bad at git. I was hoping there would only be 1 commit here. I hope whatever I'm doing wrong is inconsequential...)

### [2020-05-14T11:14:27+00:00](https://github.com/leanprover-community/mathlib/commit/03c272e5a10461350cf6f067f59e0a20adf33ba3)
chore(scripts): update nolints.txt ([#2679](https://github.com/leanprover-community/mathlib/pull/#2679))

I am happy to remove some nolints for you!

### [2020-05-14T11:14:24+00:00](https://github.com/leanprover-community/mathlib/commit/2871bd1e895699880f6df467f3234b782f38007c)
chore(logic/function): drop `function.uncurry'` ([#2678](https://github.com/leanprover-community/mathlib/pull/#2678))

See [lean[#161](https://github.com/leanprover-community/mathlib/pull/#161)](https://github.com/leanprover-community/lean/pull/161/files#diff-42c23da308a4d5900f9f3244953701daR132)
Also add `uniform_continuous.prod_map` and `uniform_continuous₂.bicompl`

### [2020-05-14T11:14:19+00:00](https://github.com/leanprover-community/mathlib/commit/3da777aa54bc8c34302bd6119a429c84aa8366a9)
chore(linear_algebra/basis): use dot notation, simplify some proofs ([#2671](https://github.com/leanprover-community/mathlib/pull/#2671))

### [2020-05-14T07:53:24+00:00](https://github.com/leanprover-community/mathlib/commit/d0beb496140b5506530e18033591c711030546ad)
doc(*): move most docs to website, update links ([#2676](https://github.com/leanprover-community/mathlib/pull/#2676))

The relaunched https://leanprover-community.github.io now contains copies of most of the doc files. This PR replaces the corresponding markdown files on mathlib with pointers to their new locations so that they only need to be maintained in one place.

The two remaining markdown files are `docs/contribute/bors.md` and `docs/contribute/code-review.md`.

Fixes [#2168](https://github.com/leanprover-community/mathlib/pull/#2168).

### [2020-05-14T04:40:05+00:00](https://github.com/leanprover-community/mathlib/commit/7077b5886e96dfe366ad81eddacf196ce414893a)
chore(logic/function): move to `logic/function/basic` ([#2677](https://github.com/leanprover-community/mathlib/pull/#2677))

Also add some docstrings.

I'm going to add more `logic.function.*` files with theorems that can't go to `basic` because of imports.

### [2020-05-14T04:40:03+00:00](https://github.com/leanprover-community/mathlib/commit/6ffb6137b31ebe40405380bb7ef1227880ca9cba)
chore(algebra/free_monoid): add a custom `rec_on` ([#2670](https://github.com/leanprover-community/mathlib/pull/#2670))

### [2020-05-14T00:19:02+00:00](https://github.com/leanprover-community/mathlib/commit/f7cb3634bf9ad8a9a4dd51eecdb7ff0db6aa6f71)
refactor(order/lattice): adjust proofs to avoid choice ([#2666](https://github.com/leanprover-community/mathlib/pull/#2666))

For foundational category theoretic reasons, I'd like these lattice properties to avoid choice.
In particular, I'd like the proof here: https://github.com/leanprover-community/mathlib/pull/2665 to be intuitionistic.

 For most of them it was very easy, eg changing `finish` to `simp`. For `sup_assoc` and `inf_assoc` it's a bit more complex though - for `inf_assoc` I wrote out a term mode proof, and for `sup_assoc` I used `ifinish`. I realise `ifinish` is deprecated because it isn't always intuitionistic, but in this case it did give an intuitionistic proof. I think both should be proved the same way, but I'm including one of each to see which is preferred.

### [2020-05-13T18:31:18+00:00](https://github.com/leanprover-community/mathlib/commit/fc0c02581ee89d16db2472f8e0ad6befbb838930)
refactor(scripts/mk_all): generate a single deterministic all.lean file ([#2673](https://github.com/leanprover-community/mathlib/pull/#2673))

The current `mk_all.sh` script is non-deterministic, and creates invalid Lean code for the `data.matrix.notation` import.  The generated `all.lean` files are also slow: they take two minutes to compile on my machine.

The new script fixes all of that.  The single generated `all.lean` file takes only 27 seconds to compile now.

### [2020-05-13T12:20:02+00:00](https://github.com/leanprover-community/mathlib/commit/9f16f8668e99b5a1cbc374ff932177086dd3c67f)
feat(topology/algebra/infinite_sum): sums on subtypes ([#2659](https://github.com/leanprover-community/mathlib/pull/#2659))

For `f` a summable function defined on the integers, we prove the formula
```
(∑ i in range k, f i) + (∑' i, f (i + k)) = (∑' i, f i)
```
This is deduced from a general version on subtypes of the form `univ - s` where `s` is a finset.

### [2020-05-13T10:27:15+00:00](https://github.com/leanprover-community/mathlib/commit/c9f2cbcd1485ea696fffdb1c8e1e17280457d3ac)
chore(scripts): update nolints.txt ([#2669](https://github.com/leanprover-community/mathlib/pull/#2669))

I am happy to remove some nolints for you!

### [2020-05-13T10:27:13+00:00](https://github.com/leanprover-community/mathlib/commit/506a71f9172ca890706945beeb27a39871ef2a4a)
feat(category_theory): preadditive categories ([#2663](https://github.com/leanprover-community/mathlib/pull/#2663))

[As discussed](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean.20in.20the.20wild/near/197168926), here is the pedestrian definition of preadditive categories. Hopefully, it is not here to stay, but it will allow me to start PRing abelian categories.

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-05-13T10:27:11+00:00](https://github.com/leanprover-community/mathlib/commit/ce86d33b5abbf88d3953617e490c7dff77ac8dfb)
feat(analysis/calculus/(f)deriv): differentiability of a finite sum of functions ([#2657](https://github.com/leanprover-community/mathlib/pull/#2657))

We show that, if each `f i` is differentiable, then `λ y, ∑ i in s, f i y` is also differentiable when `s` is a finset, and give the lemmas around this for `fderiv` and `deriv`.

### [2020-05-13T07:01:46+00:00](https://github.com/leanprover-community/mathlib/commit/ed183f9503da7ba6282d9a633712367c2c4b9836)
chore(group_theory/submonoid): use `complete_lattice_of_Inf` ([#2661](https://github.com/leanprover-community/mathlib/pull/#2661))

* Use `complete_lattice_of_Inf` for `submonoid` and `subgroup` lattices.
* Add `sub*.copy`.
* Add a few `@[simp]` lemmas.

### [2020-05-13T03:44:20+00:00](https://github.com/leanprover-community/mathlib/commit/51e2b4ccef20e49bc24ef86a6afe6e48196abbcf)
feat(topology/separation): add `subtype.t1_space` and `subtype.regular` ([#2667](https://github.com/leanprover-community/mathlib/pull/#2667))

Also simplify the proof of `exists_open_singleton_of_fintype`

### [2020-05-13T03:44:18+00:00](https://github.com/leanprover-community/mathlib/commit/4857284a9a88ca389ba239bc1e336c61116793ad)
feat(topology/bounded_continuous_function): the normed space C^0 ([#2660](https://github.com/leanprover-community/mathlib/pull/#2660))

For β a normed (vector) space over a nondiscrete normed field 𝕜, we construct the normed 𝕜-space structure on the set of bounded continuous functions from a topological space into β.

### [2020-05-13T01:57:37+00:00](https://github.com/leanprover-community/mathlib/commit/cbffb34caaef7bd2db665b263ba878563caa59a0)
feat(analysis/specific_limits): more geometric series ([#2658](https://github.com/leanprover-community/mathlib/pull/#2658))

Currently, the sum of a geometric series is only known for real numbers in `[0,1)`. We prove it for any element of a normed field with norm `< 1`, and specialize it to real numbers in `(-1, 1)`.

Some lemmas in `analysis/specific_limits` are also moved around (but their content is not changed) to get a better organization of this file.

### [2020-05-12T18:35:33+00:00](https://github.com/leanprover-community/mathlib/commit/437fdaf891cd362884def00c5ab672e17c5373b9)
feat(category_theory/creates): creates limits => preserves limits ([#2639](https://github.com/leanprover-community/mathlib/pull/#2639))

Show that `F` preserves limits if it creates them and the target category has them.

### [2020-05-12T15:37:33+00:00](https://github.com/leanprover-community/mathlib/commit/11415339c033500a19d822bca191da7efbdff330)
feat(data/matrix): matrix and vector notation ([#2656](https://github.com/leanprover-community/mathlib/pull/#2656))

This PR adds notation for matrices and vectors [as discussed on Zulip a couple of months ago](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation.20for.20matrices.20and.20vectors), so that `![![a, b], ![c, d]]` constructs a 2x2 matrix with rows `![a, b] : fin 2 -> α` and `![c, d]`. It also adds corresponding `simp` lemmas for all matrix operations defined in `data.matrix.basic`. These lemmas should apply only when the input already contains `![...]`.

To express the `simp` lemmas nicely, I defined a function `dot_product : (v w : n -> α) -> α` which returns the sum of the entrywise product of two vectors. IMO, this makes the definitions of `matrix.mul`, `matrix.mul_vec` and `matrix.vec_mul` clearer, and it allows us to share some proofs. I could also inline `dot_product` (restoring the old situation) if the reviewers prefer.

Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-05-12T15:37:31+00:00](https://github.com/leanprover-community/mathlib/commit/34a0c8c5e57b3504d157a7b93069a189054e8b17)
chore(*): unify use of left and right for injectivity lemmas ([#2655](https://github.com/leanprover-community/mathlib/pull/#2655))

This is the evil twin of [#2652](https://github.com/leanprover-community/mathlib/pull/#2652) using the opposite convention: the name of a lemma stating that a function in two arguments is injective in one of the arguments refers to the argument that changes. Example:
```lean
lemma sub_right_inj : a - b = a - c ↔ b = c
```
See also the [Zulip discussion](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pow_(left.7Cright)_inj(ective)).

This PR renames lemmas following the other convention. The following lemmas were renamed:

`algebra/group/basic.lean`:
* `mul_left_injective` ↔ `mul_right_injective`
* `mul_left_inj` ↔ `mul_right_inj`
* `sub_left_inj` ↔ `sub_right_inj`

`algebra/goup/units.lean`:
* `mul_left_inj` ↔ `mul_right_inj`
* `divp_right_inj` → `divp_left_inj`

`algebra/group_power.lean`:
* `pow_right_inj` → `pow_left_inj`

`algebra/group_with_zero.lean`:
* `div_right_inj'` → ` div_left_inj'`
* `mul_right_inj'` → `mul_left_inj'`

`algebra/ring.lean`:
* `domain.mul_right_inj` ↔ `domain.mul_left_inj`

`data/finsupp.lean`:
* `single_right_inj` → `single_left_inj`

`data/list/basic.lean`:
* `append_inj_left` ↔ `append_inj_right`
* `append_inj_left'` ↔ `append_inj_right'`
* `append_left_inj` ↔ `append_right_inj`
* `prefix_append_left_inj` → `prefix_append_right_inj`

`data/nat/basic.lean`:
* `mul_left_inj` ↔ `mul_right_inj`

`data/real/ennreal.lean`:
* `add_left_inj` ↔ `add_right_inj`
* `sub_left_inj` → `sub_right_inj`

`set_theory/ordinal.lean`:
* `mul_left_inj` → `mul_right_inj`

### [2020-05-12T15:37:29+00:00](https://github.com/leanprover-community/mathlib/commit/77b3d504f6832fd8ab18795ef33d5901c97a6bb4)
chore(topology/instances/ennreal): add +1 version of `tsum_eq_supr_sum` ([#2633](https://github.com/leanprover-community/mathlib/pull/#2633))

Also add a few lemmas about `supr` and monotone functions.

### [2020-05-12T15:37:27+00:00](https://github.com/leanprover-community/mathlib/commit/ff184e6dfce99c511c1ebd1b8c98d6e6e5b8d2c3)
feat(analysis/normed_space): add Mazur-Ulam theorem ([#2214](https://github.com/leanprover-community/mathlib/pull/#2214))

Based on a proof by Jussi Väisälä, see [journal version](https://www.jstor.org/stable/3647749) or [preprint on web.archive](https://web.archive.org/web/20180516125105/http://www.helsinki.fi/~jvaisala/mazurulam.pdf).

Also rename `reflection` to `point_reflection` as was suggested by @rwbarton and @PatrickMassot

### [2020-05-12T13:39:55+00:00](https://github.com/leanprover-community/mathlib/commit/3f216bc6a2c3729391ca1c8aaaf156fc96e7f10e)
feat(number_theory/basic): dvd_sub_pow_of_dvd_sub ([#2640](https://github.com/leanprover-community/mathlib/pull/#2640))

Co-authored with: Kenny Lau <kc_kennylau@yahoo.com.hk>

### [2020-05-12T11:31:31+00:00](https://github.com/leanprover-community/mathlib/commit/61b59ec572f474713692e4bd5e35ebeb6b43638f)
fix(order/filter/basic): markdown error in module doc ([#2664](https://github.com/leanprover-community/mathlib/pull/#2664))

### [2020-05-12T06:37:08+00:00](https://github.com/leanprover-community/mathlib/commit/295b87eced56371d9b4c120793ce6fa8c51bae0e)
feat(ring_theory/integral_domain): sum in integral domain indexed by finite group ([#2623](https://github.com/leanprover-community/mathlib/pull/#2623))

In other words: nontrivial sums are trivial

Moved from `field_theory.finite` to the new `ring_theory.integral_domain`:
- `card_nth_roots_subgroup_units`
- `subgroup_units_cyclic`

Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2020-05-12T05:22:17+00:00](https://github.com/leanprover-community/mathlib/commit/f0e781721bf423a257ce24535187077d231f7853)
chore(scripts): update nolints.txt ([#2662](https://github.com/leanprover-community/mathlib/pull/#2662))

I am happy to remove some nolints for you!

### [2020-05-12T01:24:40+00:00](https://github.com/leanprover-community/mathlib/commit/8c8872163e19b33c7ffdfe364b5f9efd1e964fe9)
feat(data/list): assorted lemmas ([#2651](https://github.com/leanprover-community/mathlib/pull/#2651))

Some lemmas I found useful for [#2578](https://github.com/leanprover-community/mathlib/pull/#2578)

### [2020-05-11T13:23:56+00:00](https://github.com/leanprover-community/mathlib/commit/eb9e382464287615efd263d396e5d0fea4dfa09f)
test(tactic/norm_num): import tests from lean core ([#2654](https://github.com/leanprover-community/mathlib/pull/#2654))

### [2020-05-11T11:46:09+00:00](https://github.com/leanprover-community/mathlib/commit/a87f326d80f1cf828d8de7660acb7c9887df03f7)
chore(scripts): update nolints.txt ([#2653](https://github.com/leanprover-community/mathlib/pull/#2653))

I am happy to remove some nolints for you!

### [2020-05-11T09:42:50+00:00](https://github.com/leanprover-community/mathlib/commit/e777d0b42321545e6abaaf00fbe337749ae4a632)
refactor(data/real/pi): add tactics for pi computation ([#2641](https://github.com/leanprover-community/mathlib/pull/#2641))

Depends on [#2589](https://github.com/leanprover-community/mathlib/pull/#2589). Moves pi bounds from @fpvandoorn's gist to mathlib, and also adds a small tactic to uniformize the proofs (and also skip some unsqueezed proofs), making the compilation even faster (just around 1 second for the longest proofs).

### [2020-05-11T06:32:55+00:00](https://github.com/leanprover-community/mathlib/commit/ff37fb8afbaa00977fea1188a39eacc45f30eb46)
feat(algebra/ring): monoid structure on `R →+* R` ([#2649](https://github.com/leanprover-community/mathlib/pull/#2649))

Also add `comp_id` and `id_comp`

### [2020-05-11T03:53:42+00:00](https://github.com/leanprover-community/mathlib/commit/7146082c9f45907c981384f537cb540e330bb7d6)
refactor(data/fintype/basic): weaken assumptions of set.fintype ([#2650](https://github.com/leanprover-community/mathlib/pull/#2650))

### [2020-05-10T20:24:02+00:00](https://github.com/leanprover-community/mathlib/commit/b9bdc67863b74fdfcfaaa981a1f221716cf23404)
feat(*): prove some `*.iterate` theorems ([#2647](https://github.com/leanprover-community/mathlib/pull/#2647))

### [2020-05-10T17:09:22+00:00](https://github.com/leanprover-community/mathlib/commit/8c6b14ea4fe7fc495c971acea5a929ba145a72fe)
fix(library_search): use custom apply tactic for the main goal, as well as subgoals ([#2648](https://github.com/leanprover-community/mathlib/pull/#2648))

cf https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/List.20lemmas

### [2020-05-10T07:14:07+00:00](https://github.com/leanprover-community/mathlib/commit/3710744b411550474ecf27d3c50d92156b5ffc95)
feat(meta/uchange): universe lifting and lowering in meta ([#2627](https://github.com/leanprover-community/mathlib/pull/#2627))

We define the meta type `uchange (α : Type v) : Type u`, which permits us to change the universe of a type analogously to `ulift`.  However since `uchange` is meta, it can both lift and lower the universe.

As requested on Zulip: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget/near/196808542

### [2020-05-10T04:05:15+00:00](https://github.com/leanprover-community/mathlib/commit/b248481b941a7a92dee22a87cbc5a26ddb958637)
chore(algebra/char_zero): add `∀ n : ℕ, (n + 1 : α) ≠ 0` ([#2644](https://github.com/leanprover-community/mathlib/pull/#2644))

### [2020-05-10T04:05:14+00:00](https://github.com/leanprover-community/mathlib/commit/75900904739935f8241d82c705edcfdd2dbabe1b)
chore(scripts): update nolints.txt ([#2643](https://github.com/leanprover-community/mathlib/pull/#2643))

I am happy to remove some nolints for you!

### [2020-05-10T00:45:41+00:00](https://github.com/leanprover-community/mathlib/commit/81f97bdf3e9f146a315152d6871d7541bbd837da)
chore(*): move to lean-3.11.0 ([#2632](https://github.com/leanprover-community/mathlib/pull/#2632))

Related Zulip thread: https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/lean.23211.20don't.20unfold.20irred.20defs

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2020-05-09T23:30:16+00:00](https://github.com/leanprover-community/mathlib/commit/a584d527e43639156a2e1bd715986ab082e0dafe)
chore(scripts): update nolints.txt ([#2642](https://github.com/leanprover-community/mathlib/pull/#2642))

I am happy to remove some nolints for you!

### [2020-05-09T20:30:31+00:00](https://github.com/leanprover-community/mathlib/commit/9f33b7dd6d4beee9f89c815b21e31cafacd3b8c3)
feat(algebra/ordered_*): arithmetic operations on monotone functions ([#2634](https://github.com/leanprover-community/mathlib/pull/#2634))

Also move `strict_mono` to `order/basic` and add a module docstring.

### [2020-05-09T20:30:29+00:00](https://github.com/leanprover-community/mathlib/commit/d04429faeb9c00cc25db37a7f2305874e4ad6c85)
chore(logic/embedding,order/order_iso): review ([#2618](https://github.com/leanprover-community/mathlib/pull/#2618))

* swap `inj` with `inj'` to match other bundled homomorphisms;
* make some arguments explicit to avoid `embedding.of_surjective _`
  in the pretty printer output;
* make `set_value` computable.

### [2020-05-09T20:30:27+00:00](https://github.com/leanprover-community/mathlib/commit/08d4316389dd980b38ef56d51e97a1f71aec340b)
refactor(computability/turing_machine): add list_blank ([#2605](https://github.com/leanprover-community/mathlib/pull/#2605))

This ended up being a major refactor of `computability.turing_machine`. It started as a change of the definition of turing machine so that the tape is a quotient of lists up to the relation "ends with blanks", but the file is quite old and I updated it to pass the linter as well. I'm not up to speed on the new documentation requirements, but now is a good time to request them for this file. This doesn't add many new theorems, it's mostly just fixes to make it compile again after the change. (Some of the turing machine constructions are also simplified.)

### [2020-05-09T20:30:25+00:00](https://github.com/leanprover-community/mathlib/commit/b7698468726c8aafc0c7479381345519855edf1d)
feat(tactic/norm_num): new all-lean norm_num ([#2589](https://github.com/leanprover-community/mathlib/pull/#2589))

This is a first draft of the lean replacement for `tactic.norm_num` in core. This isn't completely polished yet; the rest of `norm_num` can now be a little less "global-recursive" since the primitives for e.g. adding and multiplying natural numbers are exposed.

I'm also trying out a new approach using functions like `match_neg` and `match_numeral` instead of directly pattern matching on exprs, because this generates smaller (and hopefully more efficient) code. (Without this, some of the matches were hitting the equation compiler depth limit.)

I'm open to new feature suggestions as well here. `nat.succ` and coercions seem useful to support in the core part, and additional flexibility using `def_replacer` is also on the agenda.

### [2020-05-09T17:40:41+00:00](https://github.com/leanprover-community/mathlib/commit/20c741887683179f5b61b1ddc5b01f01e8336307)
chore(data/finset): drop `to_set`, use `has_lift` instead ([#2629](https://github.com/leanprover-community/mathlib/pull/#2629))

Also cleanup `coe_to_finset` lemmas. Now we have `set.finite.coe_to_finset` and `set.coe_to_finset`.

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-05-09T14:34:49+00:00](https://github.com/leanprover-community/mathlib/commit/e1192f356d42a464069ef82f688d5695f4dea41b)
feat(data/nat/basic): add `mod_add_mod` and `add_mod_mod` ([#2635](https://github.com/leanprover-community/mathlib/pull/#2635))

Added the `mod_add_mod` and `add_mod_mod` lemmas for `data.nat.basic`. I copied them from `data.int.basic`, and just changed the data type. Would there be issues with it being labelled `@[simp]`?

Also, would it make sense to refactor `add_mod` above it to use `mod_add_mod` and `add_mod_mod`? It'd make it considerably shorter.

(Tangential note, there's a disparity between the `mod` lemmas for `nat` and the `mod` lemmas for `int`, for example `int` doesn't have `add_mod`, should that be added in a separate PR?)

### [2020-05-09T08:33:21+00:00](https://github.com/leanprover-community/mathlib/commit/96efc220f6225bc7a5ed8349900391a33a38cc56)
feat(data/nat/cast): nat.cast_with_bot ([#2636](https://github.com/leanprover-community/mathlib/pull/#2636))

As requested on Zulip: https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196979007

### [2020-05-08T21:01:31+00:00](https://github.com/leanprover-community/mathlib/commit/67e19cd9e69103af56378cc189d5f7122ea42fd4)
feat(src/ring_theory/algebra): define equivalence of algebras ([#2625](https://github.com/leanprover-community/mathlib/pull/#2625))



Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-05-08T16:39:26+00:00](https://github.com/leanprover-community/mathlib/commit/fc8c4b9fb002bae27719e63cbc48d713fe5df038)
chore(`analysis/normed_space/banach`): minor review ([#2631](https://github.com/leanprover-community/mathlib/pull/#2631))

* move comment to module docstring;
* don't import `bounded_linear_maps`;
* reuse `open_mapping` in `linear_equiv.continuous_symm`;
* add a few `simp` lemmas.

### [2020-05-08T01:30:44+00:00](https://github.com/leanprover-community/mathlib/commit/ac3fb4ebe35f26cb50d6713bc46f06c9f02c349a)
chore(scripts): update nolints.txt ([#2628](https://github.com/leanprover-community/mathlib/pull/#2628))

I am happy to remove some nolints for you!

### [2020-05-07T22:43:02+00:00](https://github.com/leanprover-community/mathlib/commit/a7e80393be22d4f8de01091577093dd9c8b8a127)
feat(data/equiv/encodable): `ulower` lowers countable types to `Type 0` ([#2574](https://github.com/leanprover-community/mathlib/pull/#2574))

Given a type `α : Type u`, we can lift it into a higher universe using `ulift α : Type (max u v)`.  This PR introduces an analogous construction going in the other direction.  Given an encodable (= countable) type `α : Type u`, we can lower it to the very bottom using `ulower α : Type 0`.  The equivalence is primitive recursive if the type is primcodable.

The definition of the equivalence was already present as `encodable.equiv_range_encode`.  However it is very inconvenient to use since it requires decidability instances (`encodable.decidable_range_encode`) that are not enabled by default because they would introduce overlapping instances that are not definitionally equal.

### [2020-05-07T21:02:37+00:00](https://github.com/leanprover-community/mathlib/commit/ed453c723fa38586e78f6b2dea9fc9f401986a52)
chore(data/polynomial): remove unused argument ([#2626](https://github.com/leanprover-community/mathlib/pull/#2626))

### [2020-05-07T18:46:03+00:00](https://github.com/leanprover-community/mathlib/commit/bdce19563f7e7a8ab220a9ae36fdef9278008792)
chore(linear_algebra/basic): review ([#2616](https://github.com/leanprover-community/mathlib/pull/#2616))

* several new `simp` lemmas;
* use `linear_equiv.coe_coe` instead of `coe_apply`;
* rename `sup_quotient_to_quotient_inf` to `quotient_inf_to_sup_quotient` because it better reflects the definition; similarly for `equiv`.
* make `general_linear_group` reducible.

### [2020-05-07T15:51:38+00:00](https://github.com/leanprover-community/mathlib/commit/5d3b8307dd8c86ca07afc23eab434d9fa7664902)
refactor(order/lattice): add `sup/inf_eq_*`, rename `inf_le_inf_*` ([#2624](https://github.com/leanprover-community/mathlib/pull/#2624))

## New lemmas:

* `sup_eq_right : a ⊔ b = b ↔a ≤ b`, and similarly for `sup_eq_left`, `left_eq_sup`, `right_eq_sup`,
  `inf_eq_right`, `inf_eq_left`, `left_eq_inf`, and `right_eq_inf`; all these lemmas are `@[simp]`;
* `sup_elim` and `inf_elim`: if `(≤)` is a total order, then `p a → p b → p (a ⊔ b)`, and similarly for `inf`.

## Renamed

* `inf_le_inf_right` is now `inf_le_inf_left` and vice versa. This agrees with `sup_le_sup_left`/`sup_le_sup_right`, and the rest of the library.
* `ord_continuous_sup` -> `ord_continuous.sup`;
* `ord_continuous_mono` -> `ord_continuous.mono`.

### [2020-05-07T13:09:37+00:00](https://github.com/leanprover-community/mathlib/commit/6c4844410416c9dfb1d13620d8d67bee3b65ddeb)
feat(algebra/lie_algebra): `lie_algebra.of_associative_algebra` is functorial ([#2620](https://github.com/leanprover-community/mathlib/pull/#2620))

More precisely we:
  * define the Lie algebra homomorphism associated to a morphism of associative algebras
  * prove that the correspondence is functorial
  * prove that subalgebras and Lie subalgebras correspond

### [2020-05-07T10:25:22+00:00](https://github.com/leanprover-community/mathlib/commit/da10afcf940e4ee82ed4035cabe9c7abf3027e34)
feat(*): define `equiv.reflection` and `isometry.reflection` ([#2609](https://github.com/leanprover-community/mathlib/pull/#2609))

Define reflection in a point and prove basic properties.
It is defined both as an `equiv.perm` of an `add_comm_group` and
as an `isometric` of a `normed_group`.

Other changes:

* rename `two_smul` to `two_smul'`, add `two_smul` using `semimodule`
  instead of `add_monoid.smul`;
* minor review of `algebra.midpoint`;
* arguments of `isometry.dist_eq` and `isometry.edist_eq` are now explicit;
* rename `isometry.inv` to `isometry.right_inv`; now it takes `right_inverse`
  instead of `equiv`;
* drop `isometry_inv_fun`: use `h.symm.isometry` instead;
* pull a few more lemmas about `equiv` and `isometry` to the `isometric` namespace.

### [2020-05-07T07:12:04+00:00](https://github.com/leanprover-community/mathlib/commit/a6415d79b6094802cc44d5db178aa06ae675dbc5)
chore(data/set/basic): use implicit args in `set.ext_iff` ([#2619](https://github.com/leanprover-community/mathlib/pull/#2619))

Most other `ext_iff` lemmas use implicit arguments, let `set.ext_iff` use them too.

### [2020-05-07T02:39:51+00:00](https://github.com/leanprover-community/mathlib/commit/f6edebaa6bb4c282a7989a3f038a1a4752295e49)
chore(scripts): update nolints.txt ([#2622](https://github.com/leanprover-community/mathlib/pull/#2622))

I am happy to remove some nolints for you!

### [2020-05-07T00:42:46+00:00](https://github.com/leanprover-community/mathlib/commit/a8eafb659462ad8b8add2de496704ca9fbfdce31)
chore(scripts): update nolints.txt ([#2621](https://github.com/leanprover-community/mathlib/pull/#2621))

I am happy to remove some nolints for you!

### [2020-05-06T22:41:38+00:00](https://github.com/leanprover-community/mathlib/commit/0c8d2e28de9b9a89381c9db4fa18139219af797b)
chore(data/set/countable): use dot syntax here and there ([#2617](https://github.com/leanprover-community/mathlib/pull/#2617))

Renamed:

* `exists_surjective_of_countable` -> `countable.exists_surjective`;
* `countable_subset` -> `countable.mono`;
* `countable_image` -> `countable.image`;
* `countable_bUnion` -> `countable.bUnion`;
* `countable_sUnion` -> `countable.sUnion`;
* `countable_union` -> `countable.union`;
* `countable_insert` -> `countable.insert`;
* `countable_finite` -> `finite.countable`;

Add:

* `finset.countable_to_set`

### [2020-05-06T19:39:53+00:00](https://github.com/leanprover-community/mathlib/commit/c3d76d01e2612af6d00ad119f0cbde4c9ae1a68f)
chore(*): a few missing `simp` lemmas ([#2615](https://github.com/leanprover-community/mathlib/pull/#2615))

Also replaces `monoid_hom.exists_inv_of_comp_exists_inv` with `monoid_hom.map_exists_right_inv` and adds `monoid_hom.map_exists_left_inv`.

### [2020-05-06T19:39:51+00:00](https://github.com/leanprover-community/mathlib/commit/460d9d43b6ea7df92f746f25d581e19461ba7569)
refactor(data/equiv/local_equiv, topology/local_homeomorph): use coercions ([#2603](https://github.com/leanprover-community/mathlib/pull/#2603))

Local equivs and local homeomorphisms use `e.to_fun x` and `e.inv_fun x`, instead of coercions as in most of mathlib, as there were problems with coercions that made them unusable in manifolds. These problems have been fixed in Lean 3.10, so we switch to coercions for them also.

This is 95% a refactor PR, erasing `.to_fun` and replacing `.inv_fun` with `.symm` in several files, and fixing proofs. Plus a few simp lemmas on the coercions to let things go smoothly. I have also linted all the files I have touched.

### [2020-05-06T19:39:49+00:00](https://github.com/leanprover-community/mathlib/commit/b1c0398ac610971e567889ca51e19db368c8777c)
feat(analysis/analytic/composition): the composition of formal series is associative ([#2513](https://github.com/leanprover-community/mathlib/pull/#2513))

The composition of formal multilinear series is associative. I will need this when doing the analytic local inverse theorem, and I was surprised by how nontrivial this is: one should show that two double sums coincide by reindexing, but the reindexing is combinatorially tricky (it involves joining and splitting lists carefully). 

Preliminary material on lists, sums and compositions is done in [#2501](https://github.com/leanprover-community/mathlib/pull/#2501) and [#2554](https://github.com/leanprover-community/mathlib/pull/#2554), and the proof is in this PR.

Co-authored-by: Mario Carneiro <di.gama@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-05-06T16:31:27+00:00](https://github.com/leanprover-community/mathlib/commit/0a7ff10fcf6465406bc0734683504851c312cf81)
feat(algebra/units): some norm_cast attributes ([#2612](https://github.com/leanprover-community/mathlib/pull/#2612))

### [2020-05-06T14:05:37+00:00](https://github.com/leanprover-community/mathlib/commit/93a64dae9016700e572ef30e14f6ec8e4cf6501c)
chore(data/pnat/basic): add `mk_le_mk`, `mk_lt_mk`, `coe_le_coe`, `coe_lt_coe` ([#2613](https://github.com/leanprover-community/mathlib/pull/#2613))

### [2020-05-06T09:03:06+00:00](https://github.com/leanprover-community/mathlib/commit/5593155673c871d4470cd7744471c4b1f5b2541a)
feat(*): lemmas on sums and products over fintypes ([#2598](https://github.com/leanprover-community/mathlib/pull/#2598))

### [2020-05-06T02:11:34+00:00](https://github.com/leanprover-community/mathlib/commit/4503f8fe2ab79301730e796be2899f234acca0e0)
chore(scripts): update nolints.txt ([#2610](https://github.com/leanprover-community/mathlib/pull/#2610))

I am happy to remove some nolints for you!

### [2020-05-05T22:33:19+00:00](https://github.com/leanprover-community/mathlib/commit/c7593cc5be4db7f844a7f3080b8babf7d1a8a3ea)
refactor(field_theory): move finite_card.lean into finite.lean ([#2607](https://github.com/leanprover-community/mathlib/pull/#2607))



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-05-05T22:33:16+00:00](https://github.com/leanprover-community/mathlib/commit/0db59dbfc8f9c953000afe0ad6935ebf44545b7b)
feat(data/equiv/basic): some elementary equivs ([#2602](https://github.com/leanprover-community/mathlib/pull/#2602))

### [2020-05-05T20:16:28+00:00](https://github.com/leanprover-community/mathlib/commit/359031f90bc60b6c86c48bebba2a0ab7a5427f0d)
refactor(*): remove instance max depth ([#2608](https://github.com/leanprover-community/mathlib/pull/#2608))

With current Lean, all the manual increases of the maximum instance depth have become unnecessary. This PR removes them all.

### [2020-05-05T19:08:14+00:00](https://github.com/leanprover-community/mathlib/commit/a66d0a81a4a27501c4b504a80cf92eec1cae12cc)
chore(field_theory/finite): meaningful variable names ([#2606](https://github.com/leanprover-community/mathlib/pull/#2606))

### [2020-05-05T14:29:27+00:00](https://github.com/leanprover-community/mathlib/commit/0c1b60b6e0ad3770cc2d7a622b46635491b7afdc)
feat(group_theory/order_of_element): order_of_eq_prime ([#2604](https://github.com/leanprover-community/mathlib/pull/#2604))

### [2020-05-05T08:02:15+00:00](https://github.com/leanprover-community/mathlib/commit/7a367f372e845567c60dd993ca20ca42ab74209f)
feat(algebra/char_p): add lemma ring_char_ne_one ([#2595](https://github.com/leanprover-community/mathlib/pull/#2595))

This lemma is more useful than the extant `false_of_nonzero_of_char_one`
when we are working with the function `ring_char` rather than the `char_p`
Prop.

### [2020-05-05T06:09:07+00:00](https://github.com/leanprover-community/mathlib/commit/91b390660cf0ab8d2df5e385e5998fc5f3e40bd8)
feat(data/polynomial): misc on derivatives of polynomials ([#2596](https://github.com/leanprover-community/mathlib/pull/#2596))

Co-authored by: @alexjbest

### [2020-05-05T04:42:12+00:00](https://github.com/leanprover-community/mathlib/commit/d6ddfd2f8434d890ca719b8d688886d8be4b46db)
feat(algebra/midpoint): define `midpoint`, prove basic properties ([#2599](https://github.com/leanprover-community/mathlib/pull/#2599))

Part of [#2214](https://github.com/leanprover-community/mathlib/pull/#2214)

### [2020-05-04T22:27:29+00:00](https://github.com/leanprover-community/mathlib/commit/1c4b5ec9ac380d1f0dda576c3da3c5459f19c205)
feat(ring_theory/ideals): quotient map to residue field as ring hom ([#2597](https://github.com/leanprover-community/mathlib/pull/#2597))

### [2020-05-04T10:57:29+00:00](https://github.com/leanprover-community/mathlib/commit/14aa1f7b87854e99fa2378f8c1f89514fc82db6a)
feat(combinatorics/composition): refactor compositions, split a list wrt a composition ([#2554](https://github.com/leanprover-community/mathlib/pull/#2554))

Refactor `composition`, replacing in its definition a list of positive integers with a list of integers which are positive. This avoids going back and forth all the time between `nat` and `pnat`.

Also introduce the ability to split a list of length `n` with respect to a composition `c` of `n`, giving rise to a list of `c.length` sublists whose join is the original list.

Co-authored-by: Mario Carneiro <di.gama@gmail.com>

### [2020-05-04T05:40:22+00:00](https://github.com/leanprover-community/mathlib/commit/70245f4373b294d2abc5a02b799ff91653feb977)
feat(algebra/big_operators): prod_comp ([#2594](https://github.com/leanprover-community/mathlib/pull/#2594))

This is a lemma that @jcommelin looks like he could have used in Chevalley Warning, and is probably useful elsewhere.

### [2020-05-03T12:27:43+00:00](https://github.com/leanprover-community/mathlib/commit/08a17d629ae32c868c7e9ff282f8f83f15365997)
chore(scripts): update nolints.txt ([#2593](https://github.com/leanprover-community/mathlib/pull/#2593))

I am happy to remove some nolints for you!

### [2020-05-03T08:34:26+00:00](https://github.com/leanprover-community/mathlib/commit/a223bbb6e2a454a1d8c60da46e9e33c9e3ec3b8f)
chore(*): switch to lean 3.10.0 ([#2587](https://github.com/leanprover-community/mathlib/pull/#2587))

There have been two changes in Lean 3.10 that have a significant effect on mathlib:

 - `rename'` has been moved to core.  Therefore `rename'` has been removed.

 - Given a term `⇑f x`, the simplifier can now rewrite in both `f` and `x`.  In many cases we had both `⇑f = ⇑f'` and `⇑f x = ⇑f' x` as simp lemmas; the latter is redundant now and has been removed (or just not marked simp anymore).  The new and improved congruence lemmas are also used by `convert` and `congr`, these tactics have become more powerful as well.

I've also sneaked in two related changes that I noticed while fixing the proofs affected by the changes above:

 - `@[to_additive, simp]` has been replaced by `@[simp, to_additive]` in the monoid localization file.  The difference is that `@[to_additive, simp]` only marks the multiplicative lemma as simp.

 - `def prod_comm : α × β ≃ β × α` (etc.) is no longer marked `@[simp]`.  Marking this kind of lemmas as simp causes the simplifier to unfold the definition of `prod_comm` (instead of just rewriting `α × β` to `β × α` in the `≃` simp relation).  This has become a bigger issue now since the simplifier can rewrite the `f` in `⇑f x`.

Co-authored-by: Jannis Limperg <jannis@limperg.de>

### [2020-05-02T22:38:27+00:00](https://github.com/leanprover-community/mathlib/commit/d1eae21454202855aeeda028bd9c39d45c57b6ed)
chore(build.yml): Don't build nolints branch ([#2591](https://github.com/leanprover-community/mathlib/pull/#2591))

### [2020-05-02T15:22:25+00:00](https://github.com/leanprover-community/mathlib/commit/a99f9b550639342a9c9b1142a20637401789d24e)
refactor(algebra/big_operators): introduce notation for finset.prod and finset.sum ([#2582](https://github.com/leanprover-community/mathlib/pull/#2582))

I have not gone through all of mathlib to use this notation everywhere. I think we can maybe transition naturally.

Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: Reid Barton <rwbarton@gmail.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-05-02T12:33:54+00:00](https://github.com/leanprover-community/mathlib/commit/1cc83e9c8aa10d608cab96b01050e4f9932b0251)
chore(algebra/ordered_field): move inv_neg to field and prove for division ring ([#2588](https://github.com/leanprover-community/mathlib/pull/#2588))

`neg_inv` this lemma with the equality swapped was already in the library, so maybe we should just get rid of this or `neg_inv`

[Zulip thread](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/inv_neg/near/196042954)

### [2020-05-02T09:41:43+00:00](https://github.com/leanprover-community/mathlib/commit/b902f6e0a7e48c87d16f1112199d812e14fdee6b)
feat(*): several `@[simp]` lemmas ([#2579](https://github.com/leanprover-community/mathlib/pull/#2579))

Also add an explicit instance for `submodule.has_coe_to_sort`.
This way `rintro ⟨x, hx⟩` results in `(hx : x ∈ p)`.

Also fixes some timeouts introduced by [#2363](https://github.com/leanprover-community/mathlib/pull/#2363). See Zulip: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/partrec_code

### [2020-05-02T09:41:41+00:00](https://github.com/leanprover-community/mathlib/commit/06bae3e11245a3b0147709986ae7da7e9a5e35e6)
fix(data/int/basic): use has_coe_t to prevent looping ([#2573](https://github.com/leanprover-community/mathlib/pull/#2573))

The file `src/computability/partrec.lean` no longer opens in vscode because type-class search times out.  This happens because we have the instance `has_coe ℤ α` which causes non-termination because coercions are chained transitively (`has_coe ℤ ℤ`, `has_coe ℤ ℤ`, ...).  Even if the coercions would not apply to integers (and maybe avoid non-termination), it would still enumerate all `0,1,+,-` structures, of which there are unfortunately very many.

This PR therefore downgrades such instances to `has_coe_t` to prevent non-termination due to transitivity.  It also adds a linter to prevent this kind of error in the future.

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-05-02T09:41:39+00:00](https://github.com/leanprover-community/mathlib/commit/9d57f682c3adfab894562e0d280a362f1060ffcd)
feat(order/bounded_lattice): introduce `is_compl` predicate ([#2569](https://github.com/leanprover-community/mathlib/pull/#2569))

Also move `disjoint` from `data/set/lattice`

### [2020-05-02T08:31:10+00:00](https://github.com/leanprover-community/mathlib/commit/738bbae0cb1327e8a35243220f819d42220a0ea7)
feat(algebra/group_ring_action): action on polynomials ([#2586](https://github.com/leanprover-community/mathlib/pull/#2586))

### [2020-05-02T06:01:16+00:00](https://github.com/leanprover-community/mathlib/commit/d0a1d77648448dd0cc3b3d1eeaad909663ca21bb)
doc(tactic/rcases): mention the "rfl" pattern ([#2585](https://github.com/leanprover-community/mathlib/pull/#2585))

Edited from @jcommelin's answer on Zulip here: https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/noob.20question%28s%29/near/184491982

### [2020-05-01T21:31:28+00:00](https://github.com/leanprover-community/mathlib/commit/eb383b14b4043f0d0036eda5ebec547e687d939d)
chore(group_theory/perm): delete duplicate lemmas ([#2584](https://github.com/leanprover-community/mathlib/pull/#2584))

`sum_univ_perm` is a special case of `sum_equiv`, so it's not necessary. 

I also moved `sum_equiv` into the `finset` namespace.

### [2020-05-01T15:51:57+00:00](https://github.com/leanprover-community/mathlib/commit/4daa7e8f9fb1b69c5c225e13191ec1d4b1c5b5ba)
feat(algebra/lie_algebra): define simple Lie algebras and define classical Lie algebra, slₙ ([#2567](https://github.com/leanprover-community/mathlib/pull/#2567))

The changes here introduce a few important properties of Lie algebras and also begin providing definitions of the classical Lie algebras. The key changes are the following definitions:
 * `lie_algebra.is_abelian`
 * `lie_module.is_irreducible`
 * `lie_algebra.is_simple`
 * `lie_algebra.special_linear.sl`

Some simple related proofs are also included such as:
 * `commutative_ring_iff_abelian_lie_ring`
 * `lie_algebra.special_linear.sl_non_abelian`

### [2020-05-01T12:56:42+00:00](https://github.com/leanprover-community/mathlib/commit/6a2559a588e7ef2d8b3d961279448666776f1daf)
chore(algebra/group_with_zero): rename div_eq_inv_mul' to div_eq_inv_mul ([#2583](https://github.com/leanprover-community/mathlib/pull/#2583))

There are no occurrences of the name without ' in either core or mathlib
so this change in name (from [#2242](https://github.com/leanprover-community/mathlib/pull/#2242)) seems to have been unnecessary.

### [2020-05-01T10:09:30+00:00](https://github.com/leanprover-community/mathlib/commit/ee488b27b109accc5c78d6f0e631257d7d930462)
fix(tactic/lint/basic): remove default argument for auto_decl and enable more linters ([#2580](https://github.com/leanprover-community/mathlib/pull/#2580))

Run more linters on automatically-generated declarations.  Quite a few linters should have been run on them, but I forgot about it because the `auto_decls` flag is optional and off by default.  I've made it non-optional so that you don't forget about it when defining a linter.

https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/simp.20linter.20and.20structure.20fields/near/195810856

### [2020-05-01T07:42:20+00:00](https://github.com/leanprover-community/mathlib/commit/67f3fdeaffa7334cadce4e3689899e355d65d079)
feat(algebra/group_ring_action) define group actions on rings ([#2566](https://github.com/leanprover-community/mathlib/pull/#2566))

Define group action on rings.

Related Zulip discussions: 
- https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.232566.20group.20actions.20on.20ring 
- https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mul_action

### [2020-05-01T05:59:47+00:00](https://github.com/leanprover-community/mathlib/commit/74d24aba44e1a0a3ceab60d98e5d2f5c6adeb7b0)
feat(topology/instances/real_vector_space): `E →+ F` to `E →L[ℝ] F` ([#2577](https://github.com/leanprover-community/mathlib/pull/#2577))

A continuous additive map between two vector spaces over `ℝ` is `ℝ`-linear.

### [2020-05-01T04:49:00+00:00](https://github.com/leanprover-community/mathlib/commit/d3140fbee369364fe714e3882db35bd977aee741)
feat(data/mv_polynomial): lemmas on total_degree ([#2575](https://github.com/leanprover-community/mathlib/pull/#2575))

This is a small preparation for the Chevalley–Warning theorem.

### [2020-04-30T21:10:46+00:00](https://github.com/leanprover-community/mathlib/commit/c568bb401d33aae685caf3ee34a47f3773d0474f)
fix(scripts): stop updating mathlib-nightly repository ([#2576](https://github.com/leanprover-community/mathlib/pull/#2576))

The `gothub` tool that we've used to push the nightlies doesn't build at the moment.  Now that we have `leanproject`, we no longer need the separate nightlies repository.

### [2020-04-30T21:10:44+00:00](https://github.com/leanprover-community/mathlib/commit/06adf7d1e68c70e3a61dade3386007a7a93615b7)
chore(scripts): update nolints.txt ([#2572](https://github.com/leanprover-community/mathlib/pull/#2572))

I am happy to remove some nolints for you!

### [2020-04-30T18:20:23+00:00](https://github.com/leanprover-community/mathlib/commit/caf93b74f4a349d5c258e2960d3a75ca232a1dd4)
feat(*): small additions that prepare for Chevalley-Warning ([#2560](https://github.com/leanprover-community/mathlib/pull/#2560))

A number a small changes that prepare for [#1564](https://github.com/leanprover-community/mathlib/pull/#1564).

### [2020-04-30T14:07:21+00:00](https://github.com/leanprover-community/mathlib/commit/8fa8f175271320d675277a672f59ec53abd62f10)
refactor(tsum): use ∑' instead of ∑ as notation ([#2571](https://github.com/leanprover-community/mathlib/pull/#2571))

As discussed in: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big.20ops/near/195821357

This is the result of
```
git grep -l '∑' | grep -v "mean_ineq" | xargs sed -i "s/∑/∑'/g"
```
after manually cleaning some occurences of `∑` in TeX strings. Probably `∑` has now also been changed in a lot of comments and docstrings, but my reasoning is that if the string "tsum" occurs in the file, then it doesn't do harm to write `∑'` instead of `∑` in the comments as well.

### [2020-04-30T14:07:19+00:00](https://github.com/leanprover-community/mathlib/commit/ee70afbe448a57be73f0d1384859c34805be9cdf)
doc(.github): remove pull-request template ([#2568](https://github.com/leanprover-community/mathlib/pull/#2568))

Move the pull-request template to `CONTRIBUTING.md`.  This reduces the boilerplate in the PR description that almost nobody reads anyhow.

### [2020-04-30T11:23:34+00:00](https://github.com/leanprover-community/mathlib/commit/9c8bc7a52a1962f59ede596d2de2756a4685ecbf)
fix(tactic/interactive): make `inhabit` work on quantified goals ([#2570](https://github.com/leanprover-community/mathlib/pull/#2570))

This didn't work before because of the `∀` in the goal:
```lean
lemma c {α} [nonempty α] : ∀ n : ℕ, ∃ b : α, n = n :=
by inhabit α; intro; use default _; refl
```

### [2020-04-30T07:10:15+00:00](https://github.com/leanprover-community/mathlib/commit/b14a26ee31a482c5f3d26069876481988b2c746f)
refactor(analysis/complex/exponential): split into three files in special_functions/ ([#2565](https://github.com/leanprover-community/mathlib/pull/#2565))

The file `analysis/complex/exponential.lean` was growing out of control (2500 lines) and was dealing with complex and real exponentials, trigonometric functions, and power functions. I split it into three files corresponding to these three topics, and put them instead in `analysis/special_functions/`, as it was not specifically complex.

This is purely a refactor, so absolutely no new material nor changed proof.

Related Zulip discussion: https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.232565.20exponential.20split

### [2020-04-29T17:26:19+00:00](https://github.com/leanprover-community/mathlib/commit/e6491de7339a0e450e017ace9f91524ea4fdc833)
chore(data/equiv/ring): make ring_aut reducible ([#2563](https://github.com/leanprover-community/mathlib/pull/#2563))

This makes the coercion to fun work. This is the same approach as we used for `perm` and it worked okay for `perm`.

Related Zulip thread: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ring_aut.20coerce.20to.20function

### [2020-04-29T16:12:56+00:00](https://github.com/leanprover-community/mathlib/commit/8490c545a42efe03aa3f707b12bbcecfabb7d9bc)
refactor(analysis/complex/exponential): define log x = log |x|  for x < 0 ([#2564](https://github.com/leanprover-community/mathlib/pull/#2564))

Previously we had `log  x = 0` for `x < 0`. This PR changes it to `log x = log (-x)`, to make sure that the formulas `log (xy) = log x + log y` and `log' = 1/x` are true for all nonzero variables.

Also, add a few simp lemmas on the differentiability properties of `log` to make sure that the following works:
```lean
example (x : ℝ) (h : x ≠ 0) : deriv (λ x, x * (log x - 1)) x = log x :=
by simp [h]
```

Related Zulip discussion: https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/definition.20of.20real.20log

### [2020-04-29T13:32:57+00:00](https://github.com/leanprover-community/mathlib/commit/4580069605c80796d9a7f90055c9a8a78d00c040)
feat(field_theory/subfield): is_subfield.inter and is_subfield.Inter ([#2562](https://github.com/leanprover-community/mathlib/pull/#2562))

Prove that intersection of subfields is subfield.

### [2020-04-29T10:32:44+00:00](https://github.com/leanprover-community/mathlib/commit/84f8b3954bbba5f8194d9482d7c7cc5465354ca0)
chore(data/nat/basic): move `iterate_inj` to `injective.iterate` ([#2561](https://github.com/leanprover-community/mathlib/pull/#2561))

Also add versions for `surjective` and `bijective`

### [2020-04-29T07:43:15+00:00](https://github.com/leanprover-community/mathlib/commit/f8fe596897fcbc39e201e508d4008dd6b36aaae2)
chore(algebra/*): missing `simp`/`inj` lemmas ([#2557](https://github.com/leanprover-community/mathlib/pull/#2557))

Sometimes I have a specialized `ext` lemma for `A →+ B` that uses structure of `A` (e.g., `A = monoid_algebra α R`) and want to apply it to `A →+* B` or `A →ₐ[R] B`. These `coe_*_inj` lemmas make it easier.

Also add missing `simp` lemmas for bundled multiplication and rename `pow_of_add` and `gpow_of_add` to `of_add_smul` and `of_add_gsmul`, respectively.

### [2020-04-29T05:44:26+00:00](https://github.com/leanprover-community/mathlib/commit/cb3a017fa53baf886fca6f10e484b016264abd43)
chore(category_theory): remove `[𝒞 : category.{v₁} C] / include 𝒞` ([#2556](https://github.com/leanprover-community/mathlib/pull/#2556))

It is no longer necessary in Lean 3.9.0, thanks to
https://github.com/leanprover-community/lean/commit/01063857bb6814374156433e8cbc0c94a9483f52

### [2020-04-29T04:34:22+00:00](https://github.com/leanprover-community/mathlib/commit/ba9fc4d73a09d27d0a94a9c840fb4df571e5e418)
doc(install/*): remove outdated youtube links ([#2559](https://github.com/leanprover-community/mathlib/pull/#2559))

Fixes [#2558](https://github.com/leanprover-community/mathlib/pull/#2558).

### [2020-04-28T23:03:24+00:00](https://github.com/leanprover-community/mathlib/commit/94ff59ad7efdcf0ae51809c2ee0dfd0ae605d249)
chore(scripts): update nolints.txt ([#2555](https://github.com/leanprover-community/mathlib/pull/#2555))

I am happy to remove some nolints for you!

### [2020-04-28T19:57:52+00:00](https://github.com/leanprover-community/mathlib/commit/d12db89ac21bdcf5d33fd1dc7262ebbd3a7dcf54)
chore(category): rename to control ([#2516](https://github.com/leanprover-community/mathlib/pull/#2516))

This is parallel to https://github.com/leanprover-community/lean/pull/202 for community Lean (now merged).

It seems the changes are actually completely independent; this compiles against current community Lean, and that PR. (I'm surprised, but I guess it's just that everything is in the root namespace, and in `init/`.)

This PR anticipates then renaming `category_theory/` to `category/`.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-28T19:57:50+00:00](https://github.com/leanprover-community/mathlib/commit/c435b1cb79a44452d23207aad3dcba39df8cbe7e)
feat(analysis/calculus/inverse): Inverse function theorem ([#2228](https://github.com/leanprover-community/mathlib/pull/#2228))

Ref [#1849](https://github.com/leanprover-community/mathlib/pull/#1849)



Co-authored-by: Scott Morrison <scott@tqft.net>

### [2020-04-28T17:54:30+00:00](https://github.com/leanprover-community/mathlib/commit/3c02800ddb48d043adeee09a6ce3a1f822d16897)
chore(data/dfinsupp): use more precise `decidable` requirement ([#2535](https://github.com/leanprover-community/mathlib/pull/#2535))

Removed `decidable_zero_symm` and replaced all `[Π i, decidable_pred (eq (0 : β i))]` with `[Π i (x : β i), decidable (x ≠ 0)]`. This should work better with `open_locale classical` because now the lemmas and definitions don't assume that `[Π i (x : β i), decidable (x ≠ 0)]` comes from `decidable_zero_symm`.

### [2020-04-28T15:02:18+00:00](https://github.com/leanprover-community/mathlib/commit/f6c93723ecc8c6f57526baeac4f9c19adf08e1d8)
feat(data/fin): add some lemmas about coercions ([#2522](https://github.com/leanprover-community/mathlib/pull/#2522))

Two of these lemmas allow norm_cast to work with inequalities
involving fin values converted to ℕ.  The rest are for simplifying
expressions where coercions are used to convert from ℕ to fin, in
cases where an inequality means those coercions do not in fact change
the value.

There are very few lemmas relating to coercions from ℕ to fin in
mathlib at present; the lemma of_nat_eq_coe (and val_add on which it
depends, and a few similarly trivial lemmas alongside val_add) is
moved from data.zmod.basic to fin.basic for use in proving the other
lemmas, while the nat lemma add_mod is moved to data.nat.basic for use
in the proof of of_nat_eq_coe, and mul_mod is moved alongside it as
suggested in review.  These lemmas were found useful in formalising
solutions to an olympiad problem, see
<https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Some.20olympiad.20formalisations>,
and seem more generally relevant than to just that particular problem.

### [2020-04-28T12:08:15+00:00](https://github.com/leanprover-community/mathlib/commit/f56796282215ce6219e374e9591e40b228d5503a)
feat(data/complex/basic): inv_I and div_I ([#2550](https://github.com/leanprover-community/mathlib/pull/#2550))




Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-04-28T12:08:13+00:00](https://github.com/leanprover-community/mathlib/commit/9c818865e2465ad89b8ae06b72dc3c26aa516787)
fix(tactic/doc_commands): clean up copy_doc_string command ([#2543](https://github.com/leanprover-community/mathlib/pull/#2543))

[#2471](https://github.com/leanprover-community/mathlib/pull/#2471) added a command for copying a doc string from one decl to another. This PR:
* documents this command
* extends it to copy to a list of decls
* moves `add_doc_string` from root to the `tactic` namespace



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-04-28T06:54:15+00:00](https://github.com/leanprover-community/mathlib/commit/ae06db33b352e41bdd7afcaee5cde3679f234bd2)
feat(category_theory/concrete): make constructing morphisms easier ([#2502](https://github.com/leanprover-community/mathlib/pull/#2502))

Previously, if you wrote:
```lean
example (R : CommMon.{u}) : R ⟶ R :=
{ to_fun := λ x, _,
  map_one' := sorry,
  map_mul' := sorry, }
```
you were told the expected type was `↥(bundled.map comm_monoid.to_monoid R)`, which is not particularly reassuring unless you understand the details of how we've set up concrete categories.

If you called `dsimp`, this got better, just giving `R.α`. This still isn't ideal, as we prefer to talk about the underlying type of a bundled object via the coercion, not the structure projection.

After this PR, which provides a slightly different mechanism for constructing "induced" categories from bundled categories, the expected type is exactly what you might have hoped for: `↥R`.

There seems to be one place where we used to get away with writing `𝟙 _` and now have to write `𝟙 A`, but otherwise there appear to be no ill-effects of this change.

(For follow-up, I think I can entirely get rid of our `local attribute [reducible]` work-arounds when setting up concrete categories, and in fact construct most of the instances in `@[derive]` handlers, but these will be separate PRs.)

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-27T16:34:48+00:00](https://github.com/leanprover-community/mathlib/commit/fd3afb4478d1868c2591d4ceb989bb6dbad2b387)
chore(ring_theory/algebra): move instances about complex to get rid of dependency ([#2549](https://github.com/leanprover-community/mathlib/pull/#2549))

Previously `ring_theory.algebra` imported the complex numbers. This PR moves some instances in order to get rid of that dependency.

### [2020-04-27T14:30:55+00:00](https://github.com/leanprover-community/mathlib/commit/948d0fff16f8937e4cb10d0a24ad432633d13336)
chore(topology/algebra/module): don't use unbundled homs for `algebra` instance ([#2545](https://github.com/leanprover-community/mathlib/pull/#2545))

Define special `algebra.of_semimodule` and `algebra.of_semimodule'`
constructors instead.

ref. [#2534](https://github.com/leanprover-community/mathlib/pull/#2534)

### [2020-04-27T05:41:19+00:00](https://github.com/leanprover-community/mathlib/commit/2fc9b15898020df81bc1ec96b6820f5700956a62)
chore(data/real/*): use bundled homs to prove `coe_sum` etc ([#2533](https://github.com/leanprover-community/mathlib/pull/#2533))

### [2020-04-26T21:58:07+00:00](https://github.com/leanprover-community/mathlib/commit/134c5a529846fcb0b0a30f9fc728a0c4960669ca)
chore(scripts): update nolints.txt ([#2548](https://github.com/leanprover-community/mathlib/pull/#2548))

I am happy to remove some nolints for you!

### [2020-04-26T20:47:49+00:00](https://github.com/leanprover-community/mathlib/commit/039c5a6def13392f7ba07f94803232491b653f1d)
chore(ring_theory/adjoin_root): drop `is_ring_hom` instance ([#2546](https://github.com/leanprover-community/mathlib/pull/#2546))

ref [#2534](https://github.com/leanprover-community/mathlib/pull/#2534)

### [2020-04-26T19:06:10+00:00](https://github.com/leanprover-community/mathlib/commit/942b795c61560c5d255e4d5e31d79c908d8c41fb)
doc(field_theory/subfield): don't mention unbundled homs in the comment ([#2544](https://github.com/leanprover-community/mathlib/pull/#2544))

ref [#2534](https://github.com/leanprover-community/mathlib/pull/#2534)

### [2020-04-26T13:59:51+00:00](https://github.com/leanprover-community/mathlib/commit/fa13d16018a9cb2579a4feefbdbcad89b6212169)
chore(scripts): update nolints.txt ([#2542](https://github.com/leanprover-community/mathlib/pull/#2542))

I am happy to remove some nolints for you!

### [2020-04-26T12:04:36+00:00](https://github.com/leanprover-community/mathlib/commit/30ae5ba28d42b47bcde8d89b3199037169550f4c)
chore(scripts): update nolints.txt ([#2541](https://github.com/leanprover-community/mathlib/pull/#2541))

I am happy to remove some nolints for you!

### [2020-04-26T12:04:34+00:00](https://github.com/leanprover-community/mathlib/commit/74b96471109bd45b812925fe96afac0189bbaa4b)
feat(measure_theory/measure_space): pigeonhole principle in a measure space ([#2538](https://github.com/leanprover-community/mathlib/pull/#2538))

ref [#2272](https://github.com/leanprover-community/mathlib/pull/#2272)

### [2020-04-26T09:29:30+00:00](https://github.com/leanprover-community/mathlib/commit/c170ce3a88a06790991b654fda963c315b92555e)
chore(data/finset): add `coe_map`, `coe_image_subset_range`, and `coe_map_subset_range` ([#2530](https://github.com/leanprover-community/mathlib/pull/#2530))

### [2020-04-26T09:29:28+00:00](https://github.com/leanprover-community/mathlib/commit/40e97d37088d121d203e1edaeb5b8d5dbd40001e)
feat(topology/algebra/module): ker, range, cod_restrict, subtype_val, coprod ([#2525](https://github.com/leanprover-community/mathlib/pull/#2525))

Also move `smul_right` to `general_ring` and define some
maps/equivalences useful for the inverse/implicit function theorem.

### [2020-04-26T09:29:26+00:00](https://github.com/leanprover-community/mathlib/commit/11ccc1b5f33274312135db222468401b8510452f)
feat(analysis/calculus/deriv): define `has_strict_deriv_at` ([#2524](https://github.com/leanprover-community/mathlib/pull/#2524))

Also make more proofs explicitly use their `has_fderiv*` counterparts
and mark some lemmas in `fderiv` as `protected`.

### [2020-04-26T06:46:28+00:00](https://github.com/leanprover-community/mathlib/commit/21b729226b2cef327ff35452efcdadb85ba3863e)
feat(data/nat/basic): add `iterate_one` and `iterate_mul` ([#2540](https://github.com/leanprover-community/mathlib/pull/#2540))

### [2020-04-26T06:46:26+00:00](https://github.com/leanprover-community/mathlib/commit/21d8e0af9a46fbfeb91e83d793ef34cce0ed1166)
chore(data/real/ennreal): +2 simple lemmas ([#2539](https://github.com/leanprover-community/mathlib/pull/#2539))

Extracted from [#2311](https://github.com/leanprover-community/mathlib/pull/#2311)

### [2020-04-26T06:46:24+00:00](https://github.com/leanprover-community/mathlib/commit/401d321611ce5356a8a887eb975939fd6e967063)
feat(analysis/normed_space/basic): add continuous_at.div ([#2532](https://github.com/leanprover-community/mathlib/pull/#2532))

When proving a particular function continuous at a particular point,
lemmas such as continuous_at.mul, continuous_at.add and
continuous_at.comp can be used to build this up from continuity
properties of simpler functions.  It's convenient to have something
similar for division as well.

This adds continuous_at.div for normed fields, as suggested by Yury.
If mathlib gets topological (semi)fields in future, this should become
a result for those.

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-04-26T06:46:22+00:00](https://github.com/leanprover-community/mathlib/commit/1182e9100ce808c6f46e6679dd7341b46599aa9e)
refactor(tactic/nth_rewrite): enable rewriting hypotheses, add docstrings ([#2471](https://github.com/leanprover-community/mathlib/pull/#2471))

This PR

* renames the interactive tactic `perform_nth_rewrite` to `nth_rewrite`
* enables rewriting at hypotheses, instead of only the target
* renames the directory and namespace `rewrite_all` to `nth_rewrite`
* adds a bunch of docstrings



Co-authored-by: Simon Hudon <simon.hudon@gmail.com>
Co-authored-by: Keeley Hoek <keeley@hoek.io>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-26T03:56:10+00:00](https://github.com/leanprover-community/mathlib/commit/c34add7ae78fc1129cfc518469d83a549e9f6650)
chore(scripts): update nolints.txt ([#2537](https://github.com/leanprover-community/mathlib/pull/#2537))

I am happy to remove some nolints for you!

### [2020-04-26T03:56:08+00:00](https://github.com/leanprover-community/mathlib/commit/bda206ab7202eaf6c5891dccf531915f55fd8557)
chore(data/option,order/bounded_lattice): 2 simple lemmas about `get_or_else` ([#2531](https://github.com/leanprover-community/mathlib/pull/#2531))

I'm going to use these lemmas for `polynomial.nat_degree`. I don't want to PR
this change to `data/polynomial` because this would create merge conflicts later.

### [2020-04-26T03:56:06+00:00](https://github.com/leanprover-community/mathlib/commit/ee6f20a697a4bd3feec368304cea729951885762)
chore(algebra/module): use bundled homs for `smul_sum` and `sum_smul` ([#2529](https://github.com/leanprover-community/mathlib/pull/#2529))

### [2020-04-25T23:03:27+00:00](https://github.com/leanprover-community/mathlib/commit/5219ca1a95c3628c46a0f21820ccaffe949f8879)
doc(data/nat/modeq): add module docstring and lemma ([#2528](https://github.com/leanprover-community/mathlib/pull/#2528))

I add a simple docstrong and also a lemma which I found useful for a codewars kata.

### [2020-04-25T23:03:25+00:00](https://github.com/leanprover-community/mathlib/commit/ba4dc1a4a519ef3af29414115b81c51a7df385e2)
doc(algebra/order_functions): add docstring and lemma ([#2526](https://github.com/leanprover-community/mathlib/pull/#2526))

I added a missing lemma, and then figured that while I was here I should add a docstring

### [2020-04-25T19:55:53+00:00](https://github.com/leanprover-community/mathlib/commit/a8ae8e8e51aa75d518d7d3ff80ab2cfe3383a4d0)
feat(data/bool): add de Morgan's laws ([#2523](https://github.com/leanprover-community/mathlib/pull/#2523))

I will go away with my tail between my legs if someone can show me that our esteemed mathematics library already contains de Morgan's laws for booleans. I also added a docstring. I can't lint the file because it's so high up in the import heirarchy, but I also added a docstring for the two instances.

### [2020-04-25T19:55:51+00:00](https://github.com/leanprover-community/mathlib/commit/94fd41a2f423543171a3185ed9a43993a6e20111)
refactor(data/padics/*): use [fact p.prime] to assume that p is prime ([#2519](https://github.com/leanprover-community/mathlib/pull/#2519))

### [2020-04-25T18:43:05+00:00](https://github.com/leanprover-community/mathlib/commit/632c4baa435a291283dc44171a3c115f4053a2b9)
feat(continued_fractions) add equivalence of convergents computations ([#2459](https://github.com/leanprover-community/mathlib/pull/#2459))

### What
Add lemmas showing that the two methods for computing the convergents of a continued fraction (recurrence relation vs direct evaluation) coincide. A high-level overview on how the proof works is given in the header of the file. 

### Why
One wants to be able to relate both computations. The recurrence relation can be faster to compute, the direct evaluation is more intuitive and might be easier for some proofs.

### How
The proof of the equivalence is by induction. To make the induction work, one needs to "squash" a sequence into a shorter one while maintaining the value of the convergents computations. Most lemmas in this commit deal with this squashing operation.



Co-authored-by: Kevin Kappelmann <kappelmann@users.noreply.github.com>

### [2020-04-25T09:58:14+00:00](https://github.com/leanprover-community/mathlib/commit/d9327e433804004aa1dc65091bbe0de1e5a08c5e)
refactor(geometry/manifold/real_instances): use fact instead of lt_class ([#2521](https://github.com/leanprover-community/mathlib/pull/#2521))

To define a manifold with boundary structure on the interval `[x, y]`, typeclass inference needs to know that `x < y`. This used to be provided by the introduction of a dummy class `lt_class`. The new mechanism based on `fact` makes it possible to remove this dummy class.

### [2020-04-25T09:58:12+00:00](https://github.com/leanprover-community/mathlib/commit/2b95532750e612cde37129d41c779a9990bbf135)
refactor(*): use [fact p.prime] for frobenius and perfect_closure ([#2518](https://github.com/leanprover-community/mathlib/pull/#2518))

This also removes the dependency of `algebra.char_p` on `data.padics.padic_norm`, which was only there to make `nat.prime` a class.

I also used this opportunity to rename all alphas and betas to `K` and `L` in the perfect closure file.

### [2020-04-25T08:51:08+00:00](https://github.com/leanprover-community/mathlib/commit/f192f2fe263a6f0dfe4bc56750fe4368cc85f2b4)
chore(*): move quadratic_reciprocity to number_theory/ ([#2520](https://github.com/leanprover-community/mathlib/pull/#2520))

I've never really understood why we put all these cool theorems under the data/ directory, so I suggest moving them out of there, and into the place where thy "belong".

### [2020-04-25T05:42:30+00:00](https://github.com/leanprover-community/mathlib/commit/3c8584d6308411410bb79195a45efb108d7f793c)
feat(order/filter/bases): add `exists_iff` and `forall_iff` ([#2507](https://github.com/leanprover-community/mathlib/pull/#2507))

### [2020-04-25T05:42:28+00:00](https://github.com/leanprover-community/mathlib/commit/199f6fe431d150710b3c50f869349ef8363a479e)
refactor(tactic/suggest): call library_search and suggest with additional lemmas, better lemma caching ([#2429](https://github.com/leanprover-community/mathlib/pull/#2429))

This PR is mainly a refactoring of suggest. The changes include:

* Removed `(discharger : tactic unit := done)` from `library_search`, `suggest`, `suggest_scripts` `suggest_core`, `suggest_core'`, `apply_declaration` and `apply_and_solve` and replaced by `(opt : by_elim_opt := { })` from `solve_by_elim`.

* Replaced all occurences of `discharger` by `opt`, `opt.discharger`, or `..opt`.

* inserted a do block into the interactive `library_search` function.

* Added `asms ← mk_assumption_set no_dflt hs attr_names`, to the interactive `suggest` and `library_search` functions. This is so `library_search` and `suggest` don't rebuild the assumption set each time a lemma is applied.

* Added several inputs for the interactive `library_search` and `suggest` function. These parameters were lifted from the interactive `solve_by_elim` function and allow the user to control how `solve_by_elim` is utilized by `library_search` and `suggest`.

* Removed the `message` function (redundant code.)

* Removed several unnecessary `g ← instantiate_mvars g`, lines.



Co-authored-by: Lucas Allen <u6338192@anu.edu.au>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-25T04:11:06+00:00](https://github.com/leanprover-community/mathlib/commit/06f8c5563fdf6be4f94e8302f392e08fafab65f9)
chore(scripts): update nolints.txt ([#2517](https://github.com/leanprover-community/mathlib/pull/#2517))

I am happy to remove some nolints for you!

### [2020-04-25T02:22:56+00:00](https://github.com/leanprover-community/mathlib/commit/22d89c4091c599a35123a7ff0000a657f51ee860)
chore(scripts): update nolints.txt ([#2515](https://github.com/leanprover-community/mathlib/pull/#2515))

I am happy to remove some nolints for you!

### [2020-04-24T23:37:04+00:00](https://github.com/leanprover-community/mathlib/commit/e918f726cfc12a352f6655371b21675d001bc601)
refactor(zmod): merge `zmodp` into `zmod`, use `[fact p.prime]` for tc search ([#2511](https://github.com/leanprover-community/mathlib/pull/#2511))

This PR introduces the class `fact P := P` for `P : Prop`, which is a way to inject elementary propositions into the type class system. This desing is inspired by @cipher1024 's https://gist.github.com/cipher1024/9bd785a75384a4870b331714ec86ad6f#file-zmod_redesign-lean.

We use this to endow `zmod p` with a `field` instance under the assumption `[fact p.prime]`.
As a consequence, the type `zmodp` is no longer needed, which removes a lot of duplicate code.
Besides that, we redefine `zmod n`, so that `n` is a natural number instead of a *positive* natural number, and `zmod 0` is now definitionally the integers.
To preserve computational properties, `zmod n` is not defined as quotient type, but rather as `int` and `fin n`, depending on whether `n` is `0` or `(k+1)`.

The rest of this PR is adapting the library to the new definitions (most notably quadratic reciprocity and Lagrange's four squares theorem).

Future work: Refactor the padics to use `[fact p.prime]` instead of making `nat.prime` a class in those files. This will address [#1601](https://github.com/leanprover-community/mathlib/pull/#1601) and [#1648](https://github.com/leanprover-community/mathlib/pull/#1648). Once that is done, we can clean up the mess in `char_p` (where the imports are really tangled) and finally get some movement in [#1564](https://github.com/leanprover-community/mathlib/pull/#1564).

### [2020-04-24T23:37:01+00:00](https://github.com/leanprover-community/mathlib/commit/3e54e977c693a960284b08a6b62ebb9516f0b9ac)
chore(topology/separation): prove that `{y | y ≠ x}` is open ([#2506](https://github.com/leanprover-community/mathlib/pull/#2506))

### [2020-04-24T21:12:05+00:00](https://github.com/leanprover-community/mathlib/commit/ee8451b9f60deb741e0480789f4d0406c553857d)
feat(data/list): more lemmas on joins and sums ([#2501](https://github.com/leanprover-community/mathlib/pull/#2501))

A few more lemmas on lists (especially joins) and sums. I also linted the file `lists/basic.lean` and converted some comments to section headers.

Some lemmas got renamed:
`of_fn_prod_take` -> `prod_take_of_fn`
`of_fn_sum_take` -> `sum_take_of_fn`
`of_fn_prod` ->`prod_of_fn`
`of_fn_sum` -> `sum_of_fn`

The arguments of `nth_le_repeat` were changed for better `simp` efficiency

### [2020-04-24T20:10:09+00:00](https://github.com/leanprover-community/mathlib/commit/6795c9df551a31780439ee83b21ec7b7cfcf7f96)
chore(scripts): update nolints.txt ([#2514](https://github.com/leanprover-community/mathlib/pull/#2514))

I am happy to remove some nolints for you!

### [2020-04-24T17:09:09+00:00](https://github.com/leanprover-community/mathlib/commit/3162c1c9e3f9ae29e79749e6898221e1069779b5)
feat(tactic/delta_instance): protect names and deal with functions ([#2477](https://github.com/leanprover-community/mathlib/pull/#2477))

There were (at least) two issues with the `delta_instance` derive handler:
* It couldn't protect the names of the instances it generated, so they had to be ugly to avoid clashes.
* It didn't deal well with deriving instances on function types, so `@[derive monad]` usually failed.

This should fix both. The first is possible with recent(ish) additions to core.

closes [#1951](https://github.com/leanprover-community/mathlib/pull/#1951)



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-04-24T14:15:51+00:00](https://github.com/leanprover-community/mathlib/commit/2f6b8d7312251a7d24f6940fdead8de8fd8229d6)
chore(scripts): update nolints.txt ([#2510](https://github.com/leanprover-community/mathlib/pull/#2510))

I am happy to remove some nolints for you!

### [2020-04-24T14:15:48+00:00](https://github.com/leanprover-community/mathlib/commit/7a718662a04be5248d8348de59f748b8b24c1328)
chore(topology/algebra/module): make `id` use explicit args ([#2509](https://github.com/leanprover-community/mathlib/pull/#2509))

### [2020-04-24T14:15:46+00:00](https://github.com/leanprover-community/mathlib/commit/62feebc2edae2e1d82bff527704dd140fe96a257)
chore(*): add missing copyright headers ([#2505](https://github.com/leanprover-community/mathlib/pull/#2505))

I think these are close to the last remaining files without copyright headers.

(We decided at some point to allow that `import`-only files don't need one.)


Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-04-24T14:15:44+00:00](https://github.com/leanprover-community/mathlib/commit/c8946c9dd562c7ab1521501c7df8f92bf8527f0c)
chore(tactic/*): remove some unused args in commands ([#2498](https://github.com/leanprover-community/mathlib/pull/#2498))




Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-04-24T11:14:03+00:00](https://github.com/leanprover-community/mathlib/commit/00d7da20ad15dae5403c7899173b871039aeda17)
docs(*): merge rewrite tactic tag into rewriting ([#2512](https://github.com/leanprover-community/mathlib/pull/#2512))

We had two overlapping tags in the docs.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-04-24T11:14:01+00:00](https://github.com/leanprover-community/mathlib/commit/13393e3cf53cb19584cc3006a7d7495c063186b8)
chore(data/list/*): various renamings to use dot notation ([#2481](https://github.com/leanprover-community/mathlib/pull/#2481))

* use dot notation
* add a version of `list.perm.prod_eq` that only assumes that elements of the list pairwise commute instead of commutativity of the monoid.

## List of renamed symbols

### `data/list/basic`

* `append_sublist_append_of_sublist_right` : `sublist.append_right`;
* `reverse_sublist` : `sublist.reverse`;
* `append_sublist_append` : `sublist.append`;
* `subset_of_sublist`: `sublist.subset`;
* `sublist_antisymm` : `sublist.antisymm`;
* `filter_map_sublist_filter_map` : `sublist.filter_map`
* `map_sublist_map` : `sublist.map`
* `erasep_sublist_erasep`: `sublist.erasep`
* `erase_sublist_erase` : `sublist.erase`;
* `diff_sublist_of_sublist` : `sublist.diff_right`;

### `data/list/perm`

* `perm.skip` : `perm.cons`;
* `perm_comm` (new);
* `perm_subset` : `perm.subset`;
* `mem_of_perm` : `perm.mem_iff`;
* `perm_app_left` : `perm.append_right` (note `right` vs `left`)
* `perm_app_right` : `perm.append_left` (note `right` vs `left`)
* `perm_app` : `perm.append`;
* `perm_app_cons` : `perm.append_cons`;
* `perm_cons_app` : `perm_append_singleton`;
* `perm_app_comm` : `perm_append_comm`;
* `perm_length` : `perm.length_eq`;
* `eq_nil_of_perm_nil` : `perm.eq_nil` and `perm.nil_eq`
  with different choices of lhs/rhs;
* `eq_singleton_of_perm_inv` : `perm.eq_singleton` and `perm.singleton_eq`
  with different choices of lhs/rhs;
* `perm_singleton` and `singleton_perm`: `iff` versions
  of `perm.eq_singleton` and `perm.singleton_eq`;
* `eq_singleton_of_perm` : `singleton_perm_singleton`;
* `perm_cons_app_cons` : `perm_cons_append_cons`;
* `perm_repeat` : `repeat_perm`; new `perm_repeat` differs from it
  in the choice of lhs/rhs;
* `perm_erase` : `perm_cons_erase`;
* `perm_filter_map` : `perm.filter_map`;
* `perm_map` : `perm.map`;
* `perm_pmap` : `perm.pmap`;
* `perm_filter` : `perm.filter`;
* `subperm_of_sublist` : `sublist.subperm`;
* `subperm_of_perm` : `perm.subperm`;
* `subperm.refl` : now has `@[refl]` attribute;
* `subperm.trans` : now has `@[trans]` attribute;
* `length_le_of_subperm` : `subperm.length_le`;
* `subset_of_subperm` : `subperm.subset`;
* `exists_perm_append_of_sublist` : `sublist.exists_perm_append`;
* `perm_countp` : `perm.countp_eq`;
* `countp_le_of_subperm` : `subperm.countp_le`;
* `perm_count` : `perm.count_eq`;
* `count_le_of_subperm` : `subperm.count_le`;
* `foldl_eq_of_perm` : `perm.foldl_eq`, added a primed version
  with slightly weaker assumptions;
* `foldr_eq_of_perm` : `perm.foldr_eq`;
* `rec_heq_of_perm` : `perm.eec_heq`;
* `fold_op_eq_of_perm` : `perm.fold_op_eq`;
* `prod_eq_of_perm`: `perm.prod_eq` and `perm.prod_eq'`;
* `perm_cons_inv` : `perm.cons_inv`;
* `perm_cons` : now is a `@[simp]` lemma;
* `perm_app_right_iff` : `perm_append_right_iff`;
* `subperm_app_left` : `subperm_append_left`;
* `subperm_app_right` : `subperm_append_right`;
* `perm_ext_sublist_nodup` : `nodup.sublist_ext`;
* `erase_perm_erase` : `perm.erase`;
* `subperm_cons_erase` (new);
* `erase_subperm_erase` : `subperm.erase`;
* `perm_diff_left` : `perm.diff_right` (note `left` vs `right`);
* `perm_diff_right` : `perm.diff_left` (note `left` vs `right`);
* `perm.diff`, `subperm.diff_right`, `erase_cons_subperm_cons_erase` (new);
* `perm_bag_inter_left` : `perm.bag_inter_right` (note `left` vs `right`);
* `perm_bag_inter_right` : `perm.bag_inter_left` (note `left` vs `right`);
* `perm.bag_inter` (new);
* `perm_erase_dup_of_perm` : `perm.erase_dup`;
* `perm_union_left` : `perm.union_right` (note `left` vs `right`);
* `perm_union_right` : `perm.union_left` (note `left` vs `right`);
* `perm_union` : `perm.union`;
* `perm_inter_left` : `perm.inter_right` (note `left` vs `right`);
* `perm_inter_right` : `perm.inter_left` (note `left` vs `right`);
* `perm_inter` : `perm.inter`;
* `perm_nodup` : `perm.nodup_iff`;
* `perm_bind_left` : `perm.bind_right` (note `left` vs `right`);
* `perm_bind_right` : `perm.bind_left` (note `left` vs `right`);
* `perm_product_left` : `perm.product_right` (note `left` vs `right`);
* `perm_product_right` : `peerm.product_left` (note `left` vs `right`);
* `perm_product` : `perm.product`;
* `perm_erasep` : `perm.erasep`;

### `data/list/sigma`

* `nodupkeys.pairwise_ne` (new);
* `perm_kreplace` : `perm.kreplace`;
* `perm_kerase` : `perm.kerase`;
* `perm_kinsert` : `perm.kinsert`;
* `erase_dupkeys_cons` : now take `x : sigma β` instead
  of `{x : α}` and `{y : β x}`;
* `perm_kunion_left` : `perm.kunion_right` (note `left` vs `right`);
* `perm_kunion_right` : `perm.kunion_left` (note `left` vs `right`);
* `perm_kunion` : `perm.kunion`;
*

### [2020-04-24T11:13:59+00:00](https://github.com/leanprover-community/mathlib/commit/3ae22de48f6cda753d9477d4c4edfe8480e61449)
feat(linear_algebra): quadratic forms ([#2480](https://github.com/leanprover-community/mathlib/pull/#2480))

Define quadratic forms over a module, maps from quadratic forms to bilinear forms and matrices, positive definite quadratic forms and the discriminant of quadratic forms.

Along the way, I added some definitions to `data/matrix/basic.lean` and `linear_algebra/bilinear_form.lean` and did some cleaning up.



Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>

### [2020-04-24T06:43:01+00:00](https://github.com/leanprover-community/mathlib/commit/e7bd31272242958e79eb0b817eb5d4754e9e9cde)
chore(tactic/pi_instance): add a docstring, remove a little bit of redundancy ([#2500](https://github.com/leanprover-community/mathlib/pull/#2500))

### [2020-04-24T04:03:04+00:00](https://github.com/leanprover-community/mathlib/commit/b7af28383aa9101ace093346b480efa81cfa3072)
feat(algebra): define `invertible` typeclass ([#2504](https://github.com/leanprover-community/mathlib/pull/#2504))

In the discussion for [#2480](https://github.com/leanprover-community/mathlib/pull/#2480), we decided that the definitions would be cleaner if the elaborator could supply us with a suitable value of `1/2`. With these changes, we can now add an `[invertible 2]` argument to write `⅟ 2`.

Related to Zulip discussion: https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.232480.20bilinear.20forms

### [2020-04-24T01:03:57+00:00](https://github.com/leanprover-community/mathlib/commit/02d73084f4449d2bbdd1a26b831d2bf7f601324b)
feat(cmd/simp): let `#simp` use declared `variables` ([#2478](https://github.com/leanprover-community/mathlib/pull/#2478))

Let `#simp` see declared `variables`.

~~Sits atop the minor `tactic.core` rearrangement in [#2465](https://github.com/leanprover-community/mathlib/pull/#2465).~~

@semorrison It turns out that `push_local_scope` and `pop_local_scope` weren't required; the parser is smarter than we thought, and if you declared some `variables` and then tried to `#simp` them, lean would half-know what you are talking about.

Indeed, the parsed `pexpr` from the command would include this information, but `to_expr` would report `no such 'blah'` when called afterward. To fix this you have to add the local variables you want `simp` to be able to see as local hypotheses in the same `tactic_state` in which you invoke `expr.simp`---so no wrapping your call to `expr.simp` directly in `lean.parser.of_tactic` (since this cooks up a fresh `tactic_state` for you).

Closes [#2475](https://github.com/leanprover-community/mathlib/pull/#2475).

<br>
<br>




Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Scott Morrison <scott@tqft.net>

### [2020-04-23T23:53:50+00:00](https://github.com/leanprover-community/mathlib/commit/019674867f21e08292cb9f6fcfb589f8c9387f8b)
chore(scripts): update nolints.txt ([#2503](https://github.com/leanprover-community/mathlib/pull/#2503))

I am happy to remove some nolints for you!

### [2020-04-23T21:05:16+00:00](https://github.com/leanprover-community/mathlib/commit/fdbf22d7dfb1d5c82456dc6c37f7ff1028e60e83)
doc(tactic/*): doc entries for some missing tactics ([#2489](https://github.com/leanprover-community/mathlib/pull/#2489))

This covers most of the remaining list in the old issue [#450](https://github.com/leanprover-community/mathlib/pull/#450). I've already checked off my additions.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>
Co-authored-by: Scott Morrison <scott@tqft.net>

### [2020-04-23T18:01:07+00:00](https://github.com/leanprover-community/mathlib/commit/fc7ac675abcdf5865080950189ec76e78e101680)
feat(data/string): add docstrings and improve semantics ([#2497](https://github.com/leanprover-community/mathlib/pull/#2497))

Could have gone in [#2493](https://github.com/leanprover-community/mathlib/pull/#2493), but I didn't want to hold up [#2478](https://github.com/leanprover-community/mathlib/pull/#2478). Besides, what's a tiny pull request between friends.


This "writing docstrings" thing really lets helps you discover tiny little tweaks here and here.


<br>
<br>
<br>

### [2020-04-23T15:14:10+00:00](https://github.com/leanprover-community/mathlib/commit/9ccfa926c3e2af2ce4d727d1c26798581cb3ff10)
feat(data/string): add phrasings common to conventional languages ([#2493](https://github.com/leanprover-community/mathlib/pull/#2493))

Just add a pair of string comparison functions with semantics which are common to conventional programming languages.

<br>
<br>
<br>

### [2020-04-23T12:15:02+00:00](https://github.com/leanprover-community/mathlib/commit/64e464f1970e29ab77e8bdf0a9d3751cdd429f5a)
chore(*): remove unnecessary transitive imports ([#2496](https://github.com/leanprover-community/mathlib/pull/#2496))

This removes all imports which have already been imported by other imports.

Overall, this is slightly over a third of the total import lines. This should have no effect whatsoever on compilation, but should make `leanproject import-graph` somewhat... leaner!


Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Keeley Hoek <keeley@hoek.io>

### [2020-04-23T09:12:20+00:00](https://github.com/leanprover-community/mathlib/commit/8a7b94fb9a82ff9de09f5ee8090b8b055d8145a4)
chore(tactic/suggest): add a docstring ([#2499](https://github.com/leanprover-community/mathlib/pull/#2499))




Co-authored-by: Scott Morrison <scott@tqft.net>

### [2020-04-23T02:52:58+00:00](https://github.com/leanprover-community/mathlib/commit/7c10fd2b34f2ba5e03fd7d63e389555da8ea5a62)
feat(category_theory/epi_mono): opposite epi mono properties ([#2479](https://github.com/leanprover-community/mathlib/pull/#2479))

Relating epis and monos to the opposite category.

### [2020-04-23T01:10:17+00:00](https://github.com/leanprover-community/mathlib/commit/4d94de48848d9691ebdf40fc78e5bab7f915affa)
feat(category_theory): wide pullbacks and limits in the over category ([#2461](https://github.com/leanprover-community/mathlib/pull/#2461))

This PR introduces [wide pullbacks](https://ncatlab.org/nlab/show/wide+pullback). 
Ordinary pullbacks are then defined as a special case of wide pullbacks, which simplifies some of the definitions and proofs there. 
Finally we show that the existence of wide pullbacks in `C` gives products in the slice `C/B`, and in fact gives all limits.



Co-authored-by: Keeley Hoek <keeley@hoek.io>

### [2020-04-22T23:11:50+00:00](https://github.com/leanprover-community/mathlib/commit/4dadd26daab24c13a22814727966efad1d90a355)
chore(scripts): update nolints.txt ([#2495](https://github.com/leanprover-community/mathlib/pull/#2495))

I am happy to remove some nolints for you!

### [2020-04-22T21:20:58+00:00](https://github.com/leanprover-community/mathlib/commit/bcbdebaacbdac0ac0c89de98d7baa0dd6754c569)
chore(tactic/apply_fun): add doc string and remove duplication ([#2485](https://github.com/leanprover-community/mathlib/pull/#2485))

I was just adding a docstring to `tactic.apply_fun`, and then saw some duplication and removed it. An example of a use of [#2484](https://github.com/leanprover-community/mathlib/pull/#2484).

<br>
<br>
<br>



Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-04-22T18:31:17+00:00](https://github.com/leanprover-community/mathlib/commit/691a230f0763153062c673d769cfa2e0fe0817fe)
chore(scripts): update nolints.txt ([#2494](https://github.com/leanprover-community/mathlib/pull/#2494))

I am happy to remove some nolints for you!

### [2020-04-22T18:31:15+00:00](https://github.com/leanprover-community/mathlib/commit/2fb6022e1f2962ab53d1ef59262475a672bd0d8d)
feat(mk_iff_of_inductive_prop): add, use, and document command ([#2490](https://github.com/leanprover-community/mathlib/pull/#2490))

This existed as an (undocumented) tactic that was being called with `run_cmd`. It deserves to be a documented user command.



Co-authored-by: Rob Lewis <rob.y.lewis@gmail.com>

### [2020-04-22T16:17:53+00:00](https://github.com/leanprover-community/mathlib/commit/591a0a006de5e8fe75b1c55258123d91dd416b2d)
chore(*): only import one file per line ([#2470](https://github.com/leanprover-community/mathlib/pull/#2470))

This perhaps-unnecessarily-obsessive PR puts every import statement on its own line.

Why?

1. it's nice to be able to grep for `import X`
2. ~~if we enforced this, it would be easier deal with commands after imports, etc.~~ (irrelevant in 3.9)
3. it means I can remove all unnecessary transitive imports with a script
4. it's just tidier. :-)

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>
Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-04-22T15:09:08+00:00](https://github.com/leanprover-community/mathlib/commit/8865b00a13007d14c7444c522db79d3316206927)
chore(scripts): update nolints.txt ([#2491](https://github.com/leanprover-community/mathlib/pull/#2491))

I am happy to remove some nolints for you!

### [2020-04-22T12:17:00+00:00](https://github.com/leanprover-community/mathlib/commit/d40662f575c6d8a4dfeb2350f0e454a31eea1a36)
chore(tactic/auto_cases): add docstring and remove duplication ([#2488](https://github.com/leanprover-community/mathlib/pull/#2488))

I was just adding a docstring, and I saw some duplication so I removed it too.


<br>
<br>
<br>

### [2020-04-22T12:16:58+00:00](https://github.com/leanprover-community/mathlib/commit/f760ad5fa7e48632b885830796fd543954b940a2)
chore(meta/expr): add a docstring ([#2487](https://github.com/leanprover-community/mathlib/pull/#2487))

Add a docstring.


<br>
<br>
<br>



Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-04-22T12:16:56+00:00](https://github.com/leanprover-community/mathlib/commit/62a613fa59879675c1315848b018614338523499)
feat(data/option): add `option.mmap` and `option.maybe` ([#2484](https://github.com/leanprover-community/mathlib/pull/#2484))

Please let me know if something like this exists already! Over the last few days I've wanted it multiple times, and it is used in [#2485](https://github.com/leanprover-community/mathlib/pull/#2485).


<br>
<br>
<br>

### [2020-04-22T12:16:54+00:00](https://github.com/leanprover-community/mathlib/commit/e4abcedcd4d2d657b55baffb227bd2bd24e57d33)
chore(data/polynomial): rename type vars ([#2483](https://github.com/leanprover-community/mathlib/pull/#2483))

Rename `α` to `R` etc; use `ι` for index types

No other changes

### [2020-04-22T12:16:52+00:00](https://github.com/leanprover-community/mathlib/commit/596537093afa4642a18636ebb0123b5b6a71ca62)
feat(data/monoid_algebra): algebra structure, lift of morphisms ([#2366](https://github.com/leanprover-community/mathlib/pull/#2366))

Prove that for a monoid homomorphism `f : G →* R` from a monoid `G` to a `k`-algebra `R` there exists a unique algebra morphism `g : k[G] →ₐ[k] R` such that `∀ x : G, g (single x 1) = f x`.

This is expressed as `def lift : (G →* R) ≃ (monoid_algebra k G →ₐ[k] R)`.

I want to use this to define `aeval` and `eval₂` for polynomials. This way we'll have many properties for free.



Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-22T09:12:07+00:00](https://github.com/leanprover-community/mathlib/commit/142f0017326da83061e0c989e21af37d339f20d3)
chore(cmd/where): remove unused argument ([#2486](https://github.com/leanprover-community/mathlib/pull/#2486))

Just remove an unused argument from the `#where` declaration, satisfying the linter.

<br>
<br>
<br>

### [2020-04-22T03:48:09+00:00](https://github.com/leanprover-community/mathlib/commit/5e2025f6288231ab7983fe2f019f3e7f1ba571de)
feat(group_theory/bundled_subgroup): bundled subgroup ([#2140](https://github.com/leanprover-community/mathlib/pull/#2140))

Add bundled subgroups. While `is_subgroup` is a class taking `s : set G` as an argument, `subgroup G` is a structure with a field `carrier : set G` and a coercion to `set G`.



Co-authored-by: JasonKYi <57107612+JasonKYi@users.noreply.github.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>

### [2020-04-21T20:46:05+00:00](https://github.com/leanprover-community/mathlib/commit/585d77aef8c65db83d924ba4fffcf3d8dfd7f0f0)
chore(scripts): update nolints.txt ([#2482](https://github.com/leanprover-community/mathlib/pull/#2482))

I am happy to remove some nolints for you!

### [2020-04-21T17:16:35+00:00](https://github.com/leanprover-community/mathlib/commit/ffa97d0fb55565829672ac16f4beaa07a3c1b276)
fix(tactic/where): remove hackery from `#where`, using Lean 3c APIs ([#2465](https://github.com/leanprover-community/mathlib/pull/#2465))

We remove almost all of the hackery from `#where`, using the Lean 3c APIs exposed by @cipher1024. In doing so we add pair of library functions which make this a tad more convenient.

The last "hack" which remains is by far the most mild; we expose `lean.parser.get_current_namespace`, which creates a dummy definition in the environment in order to obtain the current namespace. Of course this should be replaced with an exposed C++ function when the time comes (crossref with the leanprover-community/lean issue here: https://github.com/leanprover-community/lean/issues/196).





Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-21T10:37:45+00:00](https://github.com/leanprover-community/mathlib/commit/533a55234b59460d6beae924db2a70ac0482c6fd)
feat(tactic/hint): if hint can solve the goal, say so ([#2474](https://github.com/leanprover-community/mathlib/pull/#2474))

It used to be that `hint` would print:

```
the following tactics make progress:
----
tac1
tac2
tac3
```

with the tactics listed in order of number of resulting goals. In particular, if `tac1` and `tac2` actually solve the goal, while `tac3` only makes progress, this isn't explained.

With this PR, if any of those tactics actually close the goal, we only print those tactics, with text:
```
the following tactics solve the goal:
----
tac1
tac2
```

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-21T10:37:42+00:00](https://github.com/leanprover-community/mathlib/commit/15d35b1ab49c0f0427d98cb532a81043f783ca79)
feat(tactic/#simp): a user_command for #simp ([#2446](https://github.com/leanprover-community/mathlib/pull/#2446))

```lean
#simp 5 - 5
```
prints `0`.

If anyone knows how to get access to local `variables` while parsing an expression, that would be awesome. Then we could write 
```lean
variable (x : ℝ)
#simp [exp_ne_zero] : deriv (λ x, (sin x) / (exp x)) x
```
as well as
```lean
#simp [exp_ne_zero] : λ x, deriv (λ x, (sin x) / (exp x)) x
```

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-21T07:42:40+00:00](https://github.com/leanprover-community/mathlib/commit/df84064ef7bfb8fa7a7b1a41a6c90f3d63ae557c)
fix(tactic/clear): don't use rb_map unnecessarily ([#2325](https://github.com/leanprover-community/mathlib/pull/#2325))

The `clear_dependent` tactic seems to unnecessarily convert `list` back and forth to an `rb_map`, for no purpose, and this makes the internal tactic unnecessarily difficult to call.

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: Jannis Limperg <jannis@limperg.de>
Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-21T05:12:16+00:00](https://github.com/leanprover-community/mathlib/commit/3edb6a4a3bef0a5f6f490cd0e033689e0b70a023)
fix(category_theory/concrete): access the carrier type by the coercion ([#2473](https://github.com/leanprover-community/mathlib/pull/#2473))

This should marginally reduce the pain of using concrete categories, as the underlying types of a bundled object should more uniformly described via a coercion, rather than the `.α` projection.

(There's still some separate pain involving `bundled.map`, but it has an orthogonal fix which I'm working on in another branch.)

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-21T01:17:00+00:00](https://github.com/leanprover-community/mathlib/commit/7a13a11a35ee726795d8aca63b72192092c8372f)
chore(category_theory): delete two empty files ([#2472](https://github.com/leanprover-community/mathlib/pull/#2472))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-20T18:19:41+00:00](https://github.com/leanprover-community/mathlib/commit/5d0a7240b8d1c993844eb83e1a2bc8f8c7b66e4f)
chore(docs/naming): update ([#2468](https://github.com/leanprover-community/mathlib/pull/#2468))

This file has been bit-rotting.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-20T15:36:57+00:00](https://github.com/leanprover-community/mathlib/commit/762676377a8c2f79f9b27aedb96507cdd30cc569)
fix(algebra/category/*/colimits): cleaning up ([#2469](https://github.com/leanprover-community/mathlib/pull/#2469))

With the passage of time, it seems some difficulties have dissolved away, and steps in the semi-automated construction of colimits in algebraic categories which previously required `rw` or even `erw`, can now be handled by `simp`. Yay!

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-20T15:36:55+00:00](https://github.com/leanprover-community/mathlib/commit/8adfafd95f5c93460782c598be58ca4ece6b9584)
feat(data/nat,data/int): add some modular arithmetic lemmas ([#2460](https://github.com/leanprover-community/mathlib/pull/#2460))

These lemmas (a) were found useful in formalising solutions to some
olympiad problems, see
<https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Some.20olympiad.20formalisations>;
(b) seem more generally relevant than to just those particular
problems; (c) do not show up through library_search as being already
present.

### [2020-04-20T15:36:53+00:00](https://github.com/leanprover-community/mathlib/commit/d1ba87a9ab6cc00b3a916a9f379d040321c5f6ea)
feat(category_theory/faithful): faithful.of_iso ([#2453](https://github.com/leanprover-community/mathlib/pull/#2453))

A minor useful lemma, about to be abandoned on another branch.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-20T15:36:51+00:00](https://github.com/leanprover-community/mathlib/commit/51e03aadcbf36013093e2e2f3a925c9904369a68)
feat(data/monoid_algebra): the distrib_mul_action ([#2417](https://github.com/leanprover-community/mathlib/pull/#2417))



Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>

### [2020-04-20T14:24:18+00:00](https://github.com/leanprover-community/mathlib/commit/036b038665266a97de918129e68e182e6fcbeb1e)
chore(category_theory/opposites): typo fix ([#2466](https://github.com/leanprover-community/mathlib/pull/#2466))

As mentioned in [#2464](https://github.com/leanprover-community/mathlib/pull/#2464).

### [2020-04-20T13:15:51+00:00](https://github.com/leanprover-community/mathlib/commit/59a767ee6f23d5f4705f4d1412fc47b7531a815a)
chore(scripts): update nolints.txt ([#2467](https://github.com/leanprover-community/mathlib/pull/#2467))

I am happy to remove some nolints for you!

### [2020-04-20T11:18:14+00:00](https://github.com/leanprover-community/mathlib/commit/44743821e4b9ebe0e41367da84404c148da7f987)
feat(category_theory/opposites): some opposite category properties ([#2464](https://github.com/leanprover-community/mathlib/pull/#2464))

Add some more basic properties relating to the opposite category.

Make sure you have:

  * [x] reviewed and applied the coding style: [coding](https://github.com/leanprover-community/mathlib/blob/master/docs/contribute/style.md), [naming](https://github.com/leanprover-community/mathlib/blob/master/docs/contribute/naming.md)
  * [x] reviewed and applied [the documentation requirements](https://github.com/leanprover-community/mathlib/blob/master/docs/contribute/doc.md)
  * [x] make sure definitions and lemmas are put in the right files
  * [x] make sure definitions and lemmas are not redundant

For reviewers: [code review check list](https://github.com/leanprover-community/mathlib/blob/master/docs/contribute/code-review.md)

If you're confused by comments on your PR like `bors r+` or `bors d+`, please see our [notes on bors](https://github.com/leanprover-community/mathlib/blob/master/docs/contribute/bors.md) for information on our merging workflow.

### [2020-04-20T08:26:52+00:00](https://github.com/leanprover-community/mathlib/commit/58088cc95bd159c1ee2e37096c034f86a68af255)
fix(tactic/delta_instance): handle universe metavariables ([#2463](https://github.com/leanprover-community/mathlib/pull/#2463))



Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-20T07:17:35+00:00](https://github.com/leanprover-community/mathlib/commit/9b2557819cd586ae38dcc79ff752c47fb2c3207f)
fix(category_theory/limits): avoid a rewrite in a definition ([#2458](https://github.com/leanprover-community/mathlib/pull/#2458))

The proof that every equalizer of `f` and `g` is an isomorphism if `f = g` had an ugly rewrite in a definition (introduced by yours truly). This PR reformulates the proof in a cleaner way by working with two morphisms `f` and `g` and a proof of `f = g` right from the start, which is easy to specialze to the case `(f, f)`, instead of trying to reduce the `(f, g)` case to the `(f, f)` case by rewriting.

This also lets us get rid of `fork.eq_of_ι_ι`, unless someone wants to keep it, but personally I don't think that using it is ever a good idea.

### [2020-04-20T01:36:42+00:00](https://github.com/leanprover-community/mathlib/commit/c0afa80ebbdd36a66d5de2ee32a1a931954d4f97)
chore(tactic/simp_result): forgot to import in tactic.basic ([#2462](https://github.com/leanprover-community/mathlib/pull/#2462))

When I write a new tactic, I tend not to import it into `tactic.basic` or `tactic.interactive` while testing it and PR'ing it, to save having to recompile the whole library every time I tweak the tactic.

But then, inevitably, I forget to add the import before the review process is finished.

This imports `simp_result`, from [#2356](https://github.com/leanprover-community/mathlib/pull/#2356), into `tactic.basic`.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-19T15:18:08+00:00](https://github.com/leanprover-community/mathlib/commit/a8edb5e21978113c6f4cca4af05daa903eddc0b4)
fix(category_theory/limits): make image.map_comp a simp lemma ([#2456](https://github.com/leanprover-community/mathlib/pull/#2456))

This was not possible in Lean 3.8. Many thanks to @gebner for tracking down and fixing leanprover-community/lean[#181](https://github.com/leanprover-community/mathlib/pull/#181) in Lean 3.9.

### [2020-04-19T15:18:06+00:00](https://github.com/leanprover-community/mathlib/commit/e6aa533bf9eccaf6bc9b8d0d9fd8fc362dbde271)
fix(category_theory/limits): remove an unnecessary axiom in has_image_map ([#2455](https://github.com/leanprover-community/mathlib/pull/#2455))

I somehow missed the fact that `has_image_map.factor_map` is actually a consequence of `has_image_map.map_ι` together with the fact that `image.ι` is always a monomorphism.

### [2020-04-19T14:00:03+00:00](https://github.com/leanprover-community/mathlib/commit/aa55f8b50354b3e11ba64792dcb06cccb2d8ee28)
feat(category_theory/eq_to_iso): missing simp lemma ([#2454](https://github.com/leanprover-community/mathlib/pull/#2454))

A missing simp lemma.

Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-19T14:00:01+00:00](https://github.com/leanprover-community/mathlib/commit/9801c1c07c36bb38c6b496f162c6e2a16adbd186)
feat(continued_fractions) add stabilisation under termination lemmas ([#2451](https://github.com/leanprover-community/mathlib/pull/#2451))

- continued fractions: add lemmas for stabilisation of computations under termination and add them to default exports
- seq: make argument in seq.terminated_stable explicit

### [2020-04-19T13:02:57+00:00](https://github.com/leanprover-community/mathlib/commit/6054f7c99f357d71dd6ebdc4d4d4a1adb64de8b2)
chore(number_theory/sum_four_squares): slightly shorten proof ([#2457](https://github.com/leanprover-community/mathlib/pull/#2457))

This proof was unnecessarily long due to a ring bug which has now been fixed.

### [2020-04-19T19:50:13+10:00](https://github.com/leanprover-community/mathlib/commit/d344310e32b1b40d7993bff10ec9bf25bdd02d59)
chore(category_theory/monoidal): some arguments that need to be made explicit in 3.8

### [2020-04-19T07:58:32+00:00](https://github.com/leanprover-community/mathlib/commit/11d89a2f1a9bffcec73373b7370a126e8c164966)
chore(algebra/module): replace typeclass arguments with inferred arguments ([#2444](https://github.com/leanprover-community/mathlib/pull/#2444))

This doesn't change the explicit type signature of any functions, but makes some inferable typeclass arguments implicit.

Beyond the potential performance improvement, my motivation for doing this was that in `monoid_algebra` we currently have two possible `module k (monoid_algebra k G)` instances: one directly from `monoid_algebra.module`, and another one via `restrict_scalars`. These are equal, but not definitionally. In another experimental branch, I couldn't even express the isomorphism between these module structures, because type inference was filling in the `monoid_algebra.module` instance in composition of linear maps, and then failing because one of the linear maps was actually using the other module structure...

This change fixes this.


Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: Scott Morrison <scott.morrison@gmail.com>

### [2020-04-19T01:55:09+00:00](https://github.com/leanprover-community/mathlib/commit/0ceac44dc7459370c069753ad469cab47b61701d)
feat(data/nat/prime) factors of a prime number is the list [p] ([#2452](https://github.com/leanprover-community/mathlib/pull/#2452))

The factors of a prime number are [p].



Co-authored-by: Scott Morrison <scott@tqft.net>

### [2020-04-18T23:47:08+00:00](https://github.com/leanprover-community/mathlib/commit/99245b33741b6b3adc6832858c88e7b0ce2de519)
chore(*): switch to lean 3.9.0 ([#2449](https://github.com/leanprover-community/mathlib/pull/#2449))

It's been too long since the last Lean release.

### [2020-04-18T23:47:06+00:00](https://github.com/leanprover-community/mathlib/commit/d76a882dcd9edf0d27362dcbdb3ecb6420313d99)
feat(category_theory/limits/over): over category has connected limits ([#2438](https://github.com/leanprover-community/mathlib/pull/#2438))

Show that the forgetful functor from the over category creates connected limits.

The key consequence of this is that the over category has equalizers, which we will use to show that it has all (finite) limits if the base category does.

I've also moved the connected category examples into `category_theory/connected.lean`.
Also I removed the proof of
`instance {B : C} [has_pullbacks.{v} C] : has_pullbacks.{v} (over B)`
which I wrote and semorrison massively improved, as the new instances generalise it. 

I also added a `reassoc` for `is_limit.fac`, which simplified one of the proofs I had.



Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>

### [2020-04-18T21:59:03+00:00](https://github.com/leanprover-community/mathlib/commit/8ec447d86fd355998f08fdbaecebb7461c680866)
fix(*): remove `@[nolint simp_nf]` ([#2450](https://github.com/leanprover-community/mathlib/pull/#2450))

This removes a couple more nolints:
 - `coe_units_equiv_ne_zero` doesn't cause any problems anymore
 - `coe_mk` is redundant
 - `mk_eq_div` was not in simp-normal form (previously the linter timed out instead of reporting it as an error)
 - `factor_set.coe_add` is redundant

### [2020-04-18T17:48:38+00:00](https://github.com/leanprover-community/mathlib/commit/5107c2bd833f89938eff552a0b4359a8660bec10)
fix(docs/extra/calc.md): remove extra space ([#2448](https://github.com/leanprover-community/mathlib/pull/#2448))

This was breaking the rendered doc at https://leanprover-community.github.io/mathlib_docs/calc.html#using-more-than-one-operator

### [2020-04-18T17:48:36+00:00](https://github.com/leanprover-community/mathlib/commit/16552e6a5bf58cfb11d0ae69023701306ce4e0bc)
fix(group_theory/submonoid): looping simp lemma ([#2447](https://github.com/leanprover-community/mathlib/pull/#2447))

Removes a `@[nolint simp_nf]`.  I have no idea why I didn't notice this earlier, but `coe_coe` loops due to `coe_sort_coe_base` since `submonoid` doesn't have it's own `has_coe_to_sort` instance.

### [2020-04-18T15:15:21+00:00](https://github.com/leanprover-community/mathlib/commit/4e87223866d93c974a2a1899f31a77ae38bc0fc1)
feat(tactic/transport): transport structures across equivalences ([#2251](https://github.com/leanprover-community/mathlib/pull/#2251))

~~Blocked by [#2246](https://github.com/leanprover-community/mathlib/pull/#2246).~~

~~Blocked on [#2319](https://github.com/leanprover-community/mathlib/pull/#2319) and [#2334](https://github.com/leanprover-community/mathlib/pull/#2334), which both fix lower tactic layers used by `transport`.~~

From the doc-string:

---
Given a goal `⊢ S β` for some parametrized structure type `S`,
`transport` will look for a hypothesis `s : S α` and an equivalence `e : α ≃ β`,
and attempt to close the goal by transporting `s` across the equivalence `e`.
```lean
example {α : Type} [ring α] {β : Type} (e : α ≃ β) : ring β :=
by transport.
```
You can specify the object to transport using `transport s`,
and the equivalence to transport across using `transport s using e`.

---

You can just as easily transport a [`semilattice_sup_top`](https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lattice.20with.20antiautomorphism) or a `lie_ring`.

In the `test/transport.lean` file we transport `semiring` from `nat` to `mynat`, and verify that it's possible to do simple things with the transported structure.

### [2020-04-18T12:23:55+00:00](https://github.com/leanprover-community/mathlib/commit/ffb99a338dfb571b48791868835b4be9352bfeb1)
chore(algebra/group/type_tags): add `additive.to_mul` etc ([#2363](https://github.com/leanprover-community/mathlib/pull/#2363))

Don't make `additive` and `multiplicative` irreducible (yet?) because
it breaks compilation here and there.

Also prove that homomorphisms from `ℕ`, `ℤ` and their `multiplicative`
versions are defined by the image of `1`.



Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2020-04-18T10:03:42+00:00](https://github.com/leanprover-community/mathlib/commit/8b21231ce3f5e947cd32f35a6999888aaafe66ac)
chore(data/mv_polynomial): adding a comment about a T50000 regression ([#2442](https://github.com/leanprover-community/mathlib/pull/#2442))



Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>

### [2020-04-18T07:33:17+00:00](https://github.com/leanprover-community/mathlib/commit/a530a817f2c5c63bed4324358639902230708190)
refactor(data/nat/fib): simplify proof of fib_succ_succ ([#2443](https://github.com/leanprover-community/mathlib/pull/#2443))

By tweaking some of the lemmas, I managed to shorten `fib_succ_succ` from 7 complicated lines to a single call to `simp`.

An alternative expression would be:

```lean
unfold fib,
repeat { rw fib_aux_stream_succ },
unfold fib_aux_step,
```

I can change to that if you think the `simp` is too pithy.

### [2020-04-18T04:12:58+00:00](https://github.com/leanprover-community/mathlib/commit/1ef989f8b9414ea150dc7213aa7b47e4ad451a26)
docs(install/*): put extra emphasis ([#2439](https://github.com/leanprover-community/mathlib/pull/#2439))

Put extra emphasis on creating and working with projects

If people like this change I'll also make it on the other pages.





Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-04-18T00:48:02+00:00](https://github.com/leanprover-community/mathlib/commit/6b095759061cbb736fdd7aaed8ca603a2e657b3e)
feat(tactic/lint): lint for missing has_coe_to_fun instances ([#2437](https://github.com/leanprover-community/mathlib/pull/#2437))

Enforces the library note "function coercion":
https://github.com/leanprover-community/mathlib/blob/715be9f7466f30f1d4cbff4e870530af43767fba/src/logic/basic.lean#L69-L94

See [#2434](https://github.com/leanprover-community/mathlib/pull/#2434) for a recent PR where this issue popped up.

### [2020-04-17T21:00:09+00:00](https://github.com/leanprover-community/mathlib/commit/24d464c637e86804c0b9793c85c3e9542255c041)
fix(github/workflows): ignore new bors branch ([#2441](https://github.com/leanprover-community/mathlib/pull/#2441))

Two hours ago, bors renamed the temporary branches. https://github.com/bors-ng/bors-ng/pull/933  :roll_eyes:

### [2020-04-17T19:48:56+00:00](https://github.com/leanprover-community/mathlib/commit/da29275970e1b12375240b1edf0ad8d7cf536cc6)
chore(scripts): update nolints.txt ([#2440](https://github.com/leanprover-community/mathlib/pull/#2440))

I am happy to remove some nolints for you!

### [2020-04-17T16:30:37+00:00](https://github.com/leanprover-community/mathlib/commit/64f6903e104d413d1698a3a05241c46ee59b9ea7)
chore(*): migrate `nat/int/rat.eq_cast` to bundled homs ([#2427](https://github.com/leanprover-community/mathlib/pull/#2427))

Now it is `ring_hom.eq_*_cast`, `ring_hom.map_*_cast`, `add_monoid_hom.eq_int/nat_cast`.
Also turn `complex.of_real` into a `ring_hom`.



Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-04-17T13:44:40+00:00](https://github.com/leanprover-community/mathlib/commit/855e70bfa5e42f2ccbe3c6b30352225e42f1fbfa)
feat(data/nat): Results about nat.choose ([#2421](https://github.com/leanprover-community/mathlib/pull/#2421))

A convenience lemma for symmetry of choose and inequalities about choose.

More results from my combinatorics project.

### [2020-04-17T09:39:01+00:00](https://github.com/leanprover-community/mathlib/commit/0bc15f82140e44f1a22c13aa5f819749612bddc5)
feat(analysis/analytic/composition): the composition of analytic functions is analytic ([#2399](https://github.com/leanprover-community/mathlib/pull/#2399))

The composition of analytic functions is analytic. 
The argument is the following. Assume `g z = ∑ qₙ (z, ..., z)` and `f y = ∑ pₖ (y, ..., y)`. Then
```
g (f y) = ∑ qₙ (∑ pₖ (y, ..., y), ..., ∑ pₖ (y, ..., y))
= ∑ qₙ (p_{i₁} (y, ..., y), ..., p_{iₙ} (y, ..., y)).
```
For each `n` and `i₁, ..., iₙ`, define a `i₁ + ... + iₙ` multilinear function mapping
`(y₀, ..., y_{i₁ + ... + iₙ - 1})` to
`qₙ (p_{i₁} (y₀, ..., y_{i₁-1}), p_{i₂} (y_{i₁}, ..., y_{i₁ + i₂ - 1}), ..., p_{iₙ} (....)))`.
Then `g ∘ f` is obtained by summing all these multilinear functions.

The main difficulty is to make sense of this (especially the ellipsis) in a way that Lean understands. For this, this PR uses a structure containing a decomposition of `n` as a sum `i_1 + ... i_k` (called `composition`), and a whole interface around it developed in [#2398](https://github.com/leanprover-community/mathlib/pull/#2398). Once it is available, the main proof is not too hard.

This supersedes [#2328](https://github.com/leanprover-community/mathlib/pull/#2328), after a new start implementing compositions using sequences.

Co-authored-by: Scott Morrison <scott@tqft.net>

### [2020-04-17T06:57:05+00:00](https://github.com/leanprover-community/mathlib/commit/715be9f7466f30f1d4cbff4e870530af43767fba)
chore(scripts): update nolints.txt ([#2436](https://github.com/leanprover-community/mathlib/pull/#2436))

I am happy to remove some nolints for you!

### [2020-04-17T05:53:51+00:00](https://github.com/leanprover-community/mathlib/commit/0567b7faba5783ac4c272c3b6265a4513f69c47d)
feat(category_theory/limits): strong epimorphisms and strong epi-mono factorizations ([#2433](https://github.com/leanprover-community/mathlib/pull/#2433))

This PR contains the changes I mentioned in [#2374](https://github.com/leanprover-community/mathlib/pull/#2374). It contains:

* the definition of a lift of a commutative square
* the definition of a strong epimorphism
* a proof that every regular epimorphism is strong
* the definition of a strong epi-mono factorization
* the class `has_strong_epi_images`
* the construction `has_strong_epi_images` -> `has_image_maps`
* a small number of changes which should have been part of [#2423](https://github.com/leanprover-community/mathlib/pull/#2423)

### [2020-04-17T04:14:01+00:00](https://github.com/leanprover-community/mathlib/commit/f347147942bc9df1feccc80c986cd5acde56c29f)
feat(category_theory):  creation of limits and reflection of isomorphisms ([#2426](https://github.com/leanprover-community/mathlib/pull/#2426))

Define creation of limits and reflection of isomorphisms.

Part 2 of a sequence of PRs aiming to resolve my TODO [here](https://github.com/leanprover-community/mathlib/blob/cf89963e14cf535783cefba471247ae4470fa8c3/src/category_theory/limits/over.lean#L143) - that the forgetful functor from the over category creates connected limits.

Remaining:

- [x] Add an instance or def which gives that if `F` creates limits and `K ⋙ F` `has_limit` then `has_limit K` as well.
- [x] Move the forget creates limits proof to limits/over, and remove the existing proof since this one is strictly stronger - make sure to keep the statement there though using the previous point.
- [x] Add more docstrings

Probably relevant to @semorrison and @TwoFX.



Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>

### [2020-04-17T02:42:19+00:00](https://github.com/leanprover-community/mathlib/commit/0d3e5465ddebf2929864964ad1bdce4265559846)
chore(scripts): update nolints.txt ([#2435](https://github.com/leanprover-community/mathlib/pull/#2435))

I am happy to remove some nolints for you!

### [2020-04-17T01:11:58+00:00](https://github.com/leanprover-community/mathlib/commit/d2db3e831a8f8e20564e7c702409bd3bdda691f5)
chore(algebra/lie_algebra): add function coercion for morphisms ([#2434](https://github.com/leanprover-community/mathlib/pull/#2434))

In fact three different changes are being made here:
 1. Adding direct function coercion for `lie_algebra.morphism`, allowing us to tidy up `map_lie` and increase simp scope
 2. Providing a zero element for `lie_subalgebra`, thus allowing removal of a `has_inhabited_instance` exception in nolints.txt
 3. Providing a zero element for `lie_submodule`, thus allowing removal of a `has_inhabited_instance` exception in nolints.txt

### [2020-04-16T14:03:47+00:00](https://github.com/leanprover-community/mathlib/commit/c3d943e2e081c39226d38b62e5b00aeacb84d59e)
feat(computability): strong reducibility and degrees ([#1203](https://github.com/leanprover-community/mathlib/pull/#1203))



Co-authored-by: Mario Carneiro <di.gama@gmail.com>
Co-authored-by: Jeremy Avigad <avigad@cmu.edu>

### [2020-04-16T12:26:28+00:00](https://github.com/leanprover-community/mathlib/commit/a113d6e65e820daca613eb5ad9e86c2b6e002000)
chore(scripts): update nolints.txt ([#2432](https://github.com/leanprover-community/mathlib/pull/#2432))

I am happy to remove some nolints for you!

### [2020-04-16T11:10:10+00:00](https://github.com/leanprover-community/mathlib/commit/846cbabb4045701660c059e549578e3bdda6bed6)
feat(analysis/calculus): let simp compute derivatives ([#2422](https://github.com/leanprover-community/mathlib/pull/#2422))

After this PR:
```lean
example (x : ℝ) : deriv (λ x, cos (sin x) * exp x) x = (cos(sin(x))-sin(sin(x))*cos(x))*exp(x) :=
by { simp, ring }
```

Excerpts from the docstrings:

The simplifier is set up to prove automatically that some functions are differentiable, or differentiable at a point (but not differentiable on a set or within a set at a point, as checking automatically that the good domains are mapped one to the other when using composition is not something the simplifier can easily do). This means that one can write
`example (x : ℝ) : differentiable ℝ (λ x, sin (exp (3 + x^2)) - 5 * cos x) := by simp`.
If there are divisions, one needs to supply to the simplifier proofs that the denominators do not vanish, as in
```lean
example (x : ℝ) (h : 1 + sin x ≠ 0) : differentiable_at ℝ (λ x, exp x / (1 + sin x)) x :=
by simp [h]
```
The simplifier is not set up to compute the Fréchet derivative of maps (as these are in general complicated multidimensional linear maps), but it will compute one-dimensional derivatives.

To make sure that the simplifier can prove automatically that functions are differentiable, we tag many lemmas with the `simp` attribute, for instance those saying that the sum of differentiable functions is differentiable, as well as their product, their cartesian product, and so on. A notable exception is the chain rule: we do not mark as a simp lemma the fact that, if `f` and `g` are differentiable, then their composition also is: `simp` would always be able to match this lemma, by taking `f` or `g` to be the identity. Instead, for every reasonable function (say, `exp`), we add a lemma that if `f` is differentiable then so is `(λ x, exp (f x))`. This means adding some boilerplate lemmas, but these can also be useful in their own right. 

Tests for this ability of the simplifier (with more examples) are provided in `tests/differentiable.lean`.

### [2020-04-16T11:10:08+00:00](https://github.com/leanprover-community/mathlib/commit/ec8006115e59f5fd9ef2571f180bde1fbe67b841)
refactor(analysis/asymptotics): make is_o irreducible ([#2416](https://github.com/leanprover-community/mathlib/pull/#2416))

`is_o` is currently not irreducible. Since it is a complicated type, Lean can have trouble checking if two types with `is_o` are defeq or not, leading to timeouts as described in https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/undergraduate.20calculus/near/193776607
This PR makes `is_o` irreducible.

### [2020-04-16T08:33:27+00:00](https://github.com/leanprover-community/mathlib/commit/5fd4afc46fd27874d41d6b42264fe68629cc322f)
refactor(tactic/norm_cast): simplified attributes and numeral support ([#2407](https://github.com/leanprover-community/mathlib/pull/#2407))

This is @pnmadelaine's work, I'm just updating it to work with current mathlib.

New and improved version of `norm_cast` as described in the paper "normalizing casts and coercions": https://arxiv.org/abs/2001.10594

The main new user-facing feature are the simplified attributes.  There is now only the `@[norm_cast]` attribute which subsumes the previous `norm_cast`, `elim_cast`, `squash_cast`, and `move_cast` attributes.

There is a new `set_option trace.norm_cast true` option to enable debugging output.

Co-authored-by: Paul-Nicolas Madelaine <paul-nicolas.madelaine@ens.fr>



Co-authored-by: Paul-Nicolas Madelaine <paul-nicolas.madelaine@ens.fr>

### [2020-04-16T04:20:38+00:00](https://github.com/leanprover-community/mathlib/commit/7270af9c8166de796259bcbb6965f021af84f17f)
chore(scripts): update nolints.txt ([#2430](https://github.com/leanprover-community/mathlib/pull/#2430))

I am happy to remove some nolints for you!

### [2020-04-16T01:05:50+00:00](https://github.com/leanprover-community/mathlib/commit/5ac2b48c38b82e4a89fbbadb54ad0d426bbb2435)
feat(category_theory): connected categories ([#2413](https://github.com/leanprover-community/mathlib/pull/#2413))

- Define connected categories (using the convention that they must be nonempty) by asserting every functor to a discrete category is isomorphic to a constant functor. We also give some equivalent conditions which are more useful in practice: for instance that any function which is constant for objects which have a single morphism between them is constant everywhere.
- Give the definition of connected category as specified on wikipedia, and show it's equivalent. (This is more intuitive but it seems harder to both prove and use in lean, it also seems nicer stated with `head'`. If reviewers believe this should be removed, I have no objection, but I include it for now since it is the more familiar definition).
- Give three examples of connected categories.
- Prove that `X × -` preserves connected limits.

This PR is the first of three PRs aiming to resolve my TODO [here](https://github.com/leanprover-community/mathlib/blob/cf89963e14cf535783cefba471247ae4470fa8c3/src/category_theory/limits/over.lean#L143) - that the forgetful functor from the over category creates connected limits.

Make sure you have:

  * [x] reviewed and applied the coding style: [coding](https://github.com/leanprover-community/mathlib/blob/master/docs/contribute/style.md), [naming](https://github.com/leanprover-community/mathlib/blob/master/docs/contribute/naming.md)
  * [x] reviewed and applied [the documentation requirements](https://github.com/leanprover-community/mathlib/blob/master/docs/contribute/doc.md)
  * [x] make sure definitions and lemmas are put in the right files
  * [x] make sure definitions and lemmas are not redundant

If this PR is related to a discussion on Zulip, please include a link in the discussion.

For reviewers: [code review check list](https://github.com/leanprover-community/mathlib/blob/master/docs/contribute/code-review.md)

### [2020-04-15T22:29:29+00:00](https://github.com/leanprover-community/mathlib/commit/66cc29804344de86894d440d10167bb68c2cca83)
feat(data/finset): existence of a smaller set ([#2420](https://github.com/leanprover-community/mathlib/pull/#2420))

Show the existence of a smaller finset contained in a given finset.

The next in my series of lemmas for my combinatorics project.

### [2020-04-15T18:44:26+00:00](https://github.com/leanprover-community/mathlib/commit/8510f07ed70c9fad9dca7d1a41c82989f8c12575)
chore(scripts): update nolints.txt ([#2425](https://github.com/leanprover-community/mathlib/pull/#2425))

I am happy to remove some nolints for you!

### [2020-04-15T17:53:24+00:00](https://github.com/leanprover-community/mathlib/commit/1e212d7da37065ca143dcd2e6bf54c2ef02a8bcf)
fix(data/zmod/basic): typo ([#2424](https://github.com/leanprover-community/mathlib/pull/#2424))

### [2020-04-15T16:47:40+00:00](https://github.com/leanprover-community/mathlib/commit/ce72cde867feabe5bb908cf9e895acc0e11bf1eb)
feat(category_theory/limits): special shapes API cleanup ([#2423](https://github.com/leanprover-community/mathlib/pull/#2423))

This is the 2.5th PR in a series of most likely three PRs about the cohomology functor. This PR has nothing to do with cohomology, but I'm going to need a lemma from this pull request in the final PR in the series.

In this PR, I
* perform various documentation and cleanup tasks
* add lemmas similar to the ones seen in [#2396](https://github.com/leanprover-community/mathlib/pull/#2396) for equalizers, kernels and pullbacks (NB: these are not needed for biproducts since the `simp` and `ext` lemmas for products and coproducts readily fire)
* generalize `prod.hom_ext` to the situation where we have a `binary_fan X Y` and an `is_limit` for that specific fan (and similar for the other shapes)
* add "bundled" versions of lift and desc. Here is the most important example:
```lean
def kernel.lift' {W : C} (k : W ⟶ X) (h : k ≫ f = 0) : {l : W ⟶ kernel f // l ≫ kernel.ι f = k} :=
⟨kernel.lift f k h, kernel.lift_ι _ _ _⟩
```
This definition doesn't really do anything by itself, but it makes proofs comforable and readable. For example, if you say `obtain ⟨t, ht⟩ := kernel.lift' g p hpg`, then the interesting property of `t` is right there in the tactic view, which I find helpful in keeping track of things when a proof invokes a lot of universal properties.

### [2020-04-15T13:54:37+00:00](https://github.com/leanprover-community/mathlib/commit/9b797ee35089a4dcfc74b84b01bcb1d7c7b8492f)
feat(library_search): (efficiently) try calling symmetry before searching the library ([#2415](https://github.com/leanprover-community/mathlib/pull/#2415))

This fixes a gap in `library_search` we've known about for a long time: it misses lemmas stated "the other way round" than what you were looking for.

This PR fixes that. I cache the `tactic_state` after calling `symmetry`, so it is only called once, regardless of how much of the library we're searching.

When `library_search` was already succeeding, it should still succeed, with the same run time.
When it was failing, it will now either succeed (because it found a lemma after calling `symmetry`), or fail (in the same time, if `symmetry` fails, or approximately twice the time, if `symmetry` succeeds). I think this is a reasonable time trade-off for better search results.

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-04-15T07:41:54+00:00](https://github.com/leanprover-community/mathlib/commit/8e8037f5ce6f1633dba7f8b284a92a6dc2941abc)
chore(category_theory/limits): remove dependency on concrete_categories ([#2411](https://github.com/leanprover-community/mathlib/pull/#2411))

Just move some content around, so that `category_theory/limits/cones.lean` doesn't need to depend on the development of `concrete_category`.

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>

### [2020-04-14T12:45:29+00:00](https://github.com/leanprover-community/mathlib/commit/fd0dc27e5d35545c7a8723d0d0002bdd4d5b2850)
chore(scripts): update nolints.txt ([#2418](https://github.com/leanprover-community/mathlib/pull/#2418))

I am happy to remove some nolints for you!

### [2020-04-14T11:02:03+00:00](https://github.com/leanprover-community/mathlib/commit/96a07a71914c7f97b0a895fc811b9a9b4e51c683)
refactor(analysis/calculus/deriv): split comp and scomp ([#2410](https://github.com/leanprover-community/mathlib/pull/#2410))

The derivative of the composition of a function and a scalar function was written using `smul`, regardless of the fact that the first function was vector-valued (in which case `smul` is not avoidable)  or scalar-valued (in which case it can be replaced by `mul`). Instead, this PR introduces two sets of lemmas (named `scomp` for the first type and `comp` for the second type) to get the usual multiplication in the formula for the derivative of the composition of two scalar functions.

### [2020-04-14T11:02:02+00:00](https://github.com/leanprover-community/mathlib/commit/15fcb8a19d425b2af33f2b2045329f5995fbc7c8)
feat(algebra/lie_algebra): define equivalences, direct sums of Lie algebras ([#2404](https://github.com/leanprover-community/mathlib/pull/#2404))

This pull request does two things:

1. Defines equivalences of Lie algebras (and proves that these do indeed form an equivalence relation)
2. Defines direct sums of Lie algebras

The intention is to knock another chip off https://github.com/leanprover-community/mathlib/issues/1093

### [2020-04-14T08:19:33+00:00](https://github.com/leanprover-community/mathlib/commit/ba154bc1f3338629a69b88d8348e9f0f29d0941b)
fix(library_search): find id ([#2414](https://github.com/leanprover-community/mathlib/pull/#2414))

Previously `library_search` could not find theorems that did not have a head symbol (e.g. were function types with source and target both "variables all the way down"). Now it can, so it solves:

```lean
example (α : Prop) : α → α :=
by library_search -- says: `exact id`

example (p : Prop) [decidable p] : (¬¬p) → p :=
by library_search -- says: `exact not_not.mp`

example (a b : Prop) (h : a ∧ b) : a := 
by library_search -- says: `exact h.left`

example (P Q : Prop) [decidable P] [decidable Q]: (¬ Q → ¬ P) → (P → Q) :=
by library_search -- says: `exact not_imp_not.mp`
```

### [2020-04-14T07:18:15+00:00](https://github.com/leanprover-community/mathlib/commit/af27ee336c8f2565b391edbd9cd01dd33fda830b)
chore(analysis): two more -T50000 challenges ([#2393](https://github.com/leanprover-community/mathlib/pull/#2393))

Refactor two proofs to bring them under `-T50000`, in the hope that we can later add this requirement to CI, per [#2276](https://github.com/leanprover-community/mathlib/pull/#2276).

### [2020-04-13T17:33:51+00:00](https://github.com/leanprover-community/mathlib/commit/8356b798a907953521bb9fa4e9c8abee127993df)
feat(logic/basic): a few simp lemmas about `and` and `or` ([#2408](https://github.com/leanprover-community/mathlib/pull/#2408))

### [2020-04-13T17:33:49+00:00](https://github.com/leanprover-community/mathlib/commit/fe878eaffb6137e9247c570848244284e3c15946)
feat(algebra/big-operators): some big operator lemmas ([#2152](https://github.com/leanprover-community/mathlib/pull/#2152))

Lemmas I found useful in my [combinatorics](https://b-mehta.github.io/combinatorics/) project

Make sure you have:

  * [x] reviewed and applied the coding style: [coding](https://github.com/leanprover/mathlib/blob/master/docs/contribute/style.md), [naming](https://github.com/leanprover/mathlib/blob/master/docs/contribute/naming.md)
  * [x] reviewed and applied [the documentation requirements](https://github.com/leanprover/mathlib/blob/master/docs/contribute/doc.md)
  * [x] make sure definitions and lemmas are put in the right files
  * [x] make sure definitions and lemmas are not redundant

If this PR is related to a discussion on Zulip, please include a link in the discussion.

For reviewers: [code review check list](https://github.com/leanprover/mathlib/blob/master/docs/contribute/code-review.md)

### [2020-04-13T17:33:47+00:00](https://github.com/leanprover-community/mathlib/commit/67e363fdb56932177152920b47b613c09d27144a)
feat(data/finset): finset lemmas from combinatorics ([#2149](https://github.com/leanprover-community/mathlib/pull/#2149))

The beginnings of moving results from my combinatorics project

Make sure you have:

  * [x] reviewed and applied the coding style: [coding](https://github.com/leanprover/mathlib/blob/master/docs/contribute/style.md), [naming](https://github.com/leanprover/mathlib/blob/master/docs/contribute/naming.md)
  * [x] reviewed and applied [the documentation requirements](https://github.com/leanprover/mathlib/blob/master/docs/contribute/doc.md)
  * [x] make sure definitions and lemmas are put in the right files
  * [x] make sure definitions and lemmas are not redundant

For reviewers: [code review check list](https://github.com/leanprover/mathlib/blob/master/docs/contribute/code-review.md)

### [2020-04-13T14:53:40+00:00](https://github.com/leanprover-community/mathlib/commit/f3ac7b7034edc09c627859f519524da4b4f9c30c)
feat(combinatorics/composition): introduce compositions of an integer ([#2398](https://github.com/leanprover-community/mathlib/pull/#2398))

A composition of an integer `n` is a decomposition of `{0, ..., n-1}` into blocks of consecutive
integers. Equivalently, it is a decomposition `n = i₀ + ... + i_{k-1}` into a sum of positive
integers. We define compositions in this PR, and introduce a whole interface around it. The goal is to use this as a tool in the proof that the composition of analytic functions is analytic

### [2020-04-13T13:52:21+00:00](https://github.com/leanprover-community/mathlib/commit/01ac691d57b537a9dd3b4435dd611bfdd41debda)
feat(category_theory/limits/shapes/binary_products): add some basic API for prod and coprod ([#2396](https://github.com/leanprover-community/mathlib/pull/#2396))

Adding explicit proofs of some basic results about maps into A x B and maps from A coprod B

### [2020-04-13T12:55:12+00:00](https://github.com/leanprover-community/mathlib/commit/cf89963e14cf535783cefba471247ae4470fa8c3)
chore(scripts): update nolints.txt ([#2405](https://github.com/leanprover-community/mathlib/pull/#2405))

I am happy to remove some nolints for you!

### [2020-04-13T08:52:34+00:00](https://github.com/leanprover-community/mathlib/commit/17b2d065eeab325157bf45eb44a1557e965be498)
refactor(order/filter): refactor filters infi and bases ([#2384](https://github.com/leanprover-community/mathlib/pull/#2384))

This PR expands what Yury wrote about filter bases, and takes the opportunity to bring long overdue clarification to our treatment of infimums of filters (and also improve documentation and ordering in
filter.basic). I'm sorry it mixes reorganization and some new content, but this was hard to avoid (I do keep what motivated all this for a later PR).

The fundamental problem is that the infimum construction remained mysterious in filter.basic. All lemmas about it assume a directed family of filters. Yet there are many uses of infimums without this condition, notatably things like `⨅ i, principal (s i)` without condition on the indexed family of sets `s`.

Related to this, `filter.generate` stayed mysterious. It was used only as a technical device to lift the complete lattice structure from `set (set a)`. However it has a perfectly valid mathematical existence,
as explained by the lemma 
```lean
lemma sets_iff_generate {s : set (set α)} {f : filter α} : f ≤ filter.generate s ↔ s ⊆ f.sets
```
which justifies the docstring of `generate`: `generate g` is the smallest filter containing the sets `g`.

As an example of the mess this created, consider:
https://github.com/leanprover-community/mathlib/blob/e758263/src/topology/bases.lean#L25 
```lean
def has_countable_basis (f : filter α) : Prop :=
∃ s : set (set α), countable s ∧ f = ⨅ t ∈ s, principal t
```
As it stands, this definition is not clearly related to asking for the existence of a countable `s` such that `f = generate s`.

Here the main mathematical content this PR adds in this direction:

```lean
lemma mem_generate_iff (s : set $ set α) {U : set α} : U ∈ generate s ↔
∃ t ⊆ s, finite t ∧ ⋂₀ t ⊆ U

lemma infi_eq_generate (s : ι → filter α) : infi s = generate (⋃ i, (s
i).sets) 

lemma mem_infi_iff {ι} {s : ι → filter α} {U : set α} : (U ∈ ⨅ i, s i) ↔
  ∃ I : set ι, finite I ∧ ∃ V : {i | i ∈ I} → set α, (∀ i, V i ∈ s i) ∧
  (⋂ i, V i) ⊆ U
```

All the other changes in filter.basic are either:
* moving out stuff that should have been in other files (such as the lemmas that used to be at
the very top of this file)
* reordering lemmas so that we can have section headers and things are easier to find, 
* adding to the module docstring. This module docstring contains more mathematical explanation than our usual ones. I feel this is needed because many people think filters are exotic (whereas I'm more and more convinced we should teach filters).

The reordering stuff makes it clear we could split this file into a linear chain of files, like we did with topology, but this is open for discussion.

Next I added a lot to `filter.bases`. Here the issue is filter bases are used in two different ways. If you already have a filter, but you want to point out it suffices to use certain sets in it. Here you want to use Yury's `has_basis`. Or you can start with a (small) family of sets having nice properties, and build a filter out of it. Currently we don't have this in mathlib, but this is crucial for incoming PRs from the perfectoid project. For instance, in order to define the I-adic topology, you start with powers of I, make a filter and then make a topology. This also reduces the gap with Bourbaki which uses filter bases everywhere.

I turned `has_basis` into a single field structure. It makes it very slightly less convenient to prove (you need an extra pair of angle brackets) but much easier to extend when you want to record more
properties of the basis, like being countable or decreasing. Also I proved the fundamental property that `f.has_basis p s` implies that `s` (filtered by `p`) actually *is* a filter basis. This is of course easy but crucial to connect with real world maths.

At the end of this file, I moved the countable filter basis stuff that is currently in topology.bases (aiming for first countable topologies) except that I used the foundational work on filter.basic to clearly prove all different formulations. In particular:
```lean
lemma generate_eq_generate_inter (s : set (set α)) : generate s = generate (sInter '' { t | finite t ∧ t ⊆ s})
```
clarifies things because the right-hand colleciton is countable if `s` is, and has the nice directedness condition.

I also took the opportunity to simplify a proof in topology.sequences, showcasing the power of the newly introduced
```lean
lemma has_antimono_basis.tendsto [semilattice_sup ι] [nonempty ι] {l :
filter α} {p : ι → Prop} {s : ι → set α} (hl : l.has_antimono_basis p s)
{φ : ι → α} (h : ∀ i : ι, φ i ∈ s i) : tendsto φ at_top l
```
(I will add more to that sequences file in the next PR).

### [2020-04-13T08:52:32+00:00](https://github.com/leanprover-community/mathlib/commit/92c8d93d30da7b5f2a6f5b33717201b61ac87f4e)
feat(algebra/homology): the cohomology functor ([#2374](https://github.com/leanprover-community/mathlib/pull/#2374))

This is the second in a series of most likely three PRs about the cohomology functor. As such, this PR depends on [#2373](https://github.com/leanprover-community/mathlib/pull/#2373).

In the project laid out in `homology.lean`, @semorrison asks what the minimal assumptions are that are needed to get induced maps on images. In this PR, I offer a tautologial answer to this question: We get induced maps on images when there are induced maps on images. In this way, we can let type class resolution answer the question whether cohomology is functorial.

In particular, the third PR will contain the fact that if our images are strong epi-mono factorizations, then we get induced maps on images. Since the regular coimage construction in regular categories is a strong epi-mono factorization, the approach in this PR generalizes the previous suggestion of requiring `V` to be regular.

A quick remark about cohomology and dependent types: As you can see, at one point Lean forces us to write `i - 1 + 1` instead of `i` because these two things are not definitionally equal. I am afraid, as we do more with cohomology, there will be many cases of this issue, and to compose morphisms whose types contain different incarnations of the same integer, we will have to insert some `eq_to_hom`-esque glue and pray that we will be able to rewrite them all away in the proofs without getting the beloved `motive is not type correct` error. Maybe there is some better way to solve this problem? (Or am I overthinking this and it is not actually going to be an issue at all?)

### [2020-04-13T07:55:23+00:00](https://github.com/leanprover-community/mathlib/commit/ca98659831d8bc9b8fcf113ef620bd3e38c67455)
chore(scripts): update nolints.txt ([#2403](https://github.com/leanprover-community/mathlib/pull/#2403))

I am happy to remove some nolints for you!

### [2020-04-13T05:19:08+00:00](https://github.com/leanprover-community/mathlib/commit/51f7319b52be84cae60473156666a022cf60043b)
chore(algebra/module): rename type vars, minor cleanup, add module docstring ([#2392](https://github.com/leanprover-community/mathlib/pull/#2392))

* Use `R`, `S` for rings, `k` for a field, `M`, `M₂` etc for modules;
* Add a `semiring` version of `ring_hom.to_module`;
* Stop using `{rα : ring α}` trick as Lean 3.7 tries unification before class search;
* Add a short module docstring

### [2020-04-13T03:08:38+00:00](https://github.com/leanprover-community/mathlib/commit/64fa9a2062bc18cdfac3b1bf03a1f714cb434f86)
chore(*): futureproof import syntax ([#2402](https://github.com/leanprover-community/mathlib/pull/#2402))

The next community version of Lean will treat a line starting in the first column
after an import as a new command, not a continuation of the import.

### [2020-04-12T20:36:49+00:00](https://github.com/leanprover-community/mathlib/commit/ef4d235443ee195008787cd330f546c548ab1403)
feat(category_theory): biproducts, and biproducts in AddCommGroup ([#2187](https://github.com/leanprover-community/mathlib/pull/#2187))

This PR
1. adds typeclasses `has_biproducts` (implicitly restricting to finite biproducts, which is the only interesting case) and `has_binary_biproducts`, and the usual tooling for special shapes of limits.
2. provides customised `has_products` and `has_coproducts` instances for `AddCommGroup`, which are both just dependent functions (for `has_coproducts` we have to assume the indexed type is finite and decidable)
3. because these custom instances have identical underlying objects, it's trivial to put them together to get a `has_biproducts AddCommGroup`.
4. as for 2 & 3 with binary biproducts for AddCommGroup, implemented simply as the cartesian group.

### [2020-04-12T18:17:30+00:00](https://github.com/leanprover-community/mathlib/commit/1433f05123ba4c2d120bb341965e2a8ff6e62a06)
fix(tactic/norm_cast): typo ([#2400](https://github.com/leanprover-community/mathlib/pull/#2400))

### [2020-04-12T06:01:35+00:00](https://github.com/leanprover-community/mathlib/commit/d84de80404badbc9ef9d50943480a49f07483337)
feat(set_theory/game): short games, boards, and domineering ([#1540](https://github.com/leanprover-community/mathlib/pull/#1540))

This is a do-over of my previous attempt to implement the combinatorial game of domineering. This time, we get a nice clean definition, and it computes!

To achieve this, I follow Reid's advice: generalise! We define 
```
class state (S : Type u) :=
(turn_bound : S → ℕ)
(L : S → finset S)
(R : S → finset S)
(left_bound : ∀ {s t : S} (m : t ∈ L s), turn_bound t < turn_bound s)
(right_bound : ∀ {s t : S} (m : t ∈ R s), turn_bound t < turn_bound s)
```
a typeclass describing `S` as "the state of a game", and provide `pgame.of [state S] : S \to pgame`.

This allows a short and straightforward definition of Domineering:
```lean
/-- A Domineering board is an arbitrary finite subset of `ℤ × ℤ`. -/
def board := finset (ℤ × ℤ)

...

/-- The instance describing allowed moves on a Domineering board. -/
instance state : state board :=
{ turn_bound := λ s, s.card / 2,
  L := λ s, (left s).image (move_left s),
  R := λ s, (right s).image (move_right s),
  left_bound := _
  right_bound := _, }
```
which computes:
```
example : (domineering ([(0,0), (0,1), (1,0), (1,1)].to_finset) ≈ pgame.of_lists [1] [-1]) := dec_trivial
```

### [2020-04-12T00:32:35+00:00](https://github.com/leanprover-community/mathlib/commit/0f8939208878cbd08d95e74e4769cdb2d3a7d6f8)
chore(scripts): update nolints.txt ([#2395](https://github.com/leanprover-community/mathlib/pull/#2395))

I am happy to remove some nolints for you!

### [2020-04-11T22:53:11+00:00](https://github.com/leanprover-community/mathlib/commit/ee8cb15adbe880cd1e09cb14c2aeb3c399e0d246)
feat(category_theory): functorial images ([#2373](https://github.com/leanprover-community/mathlib/pull/#2373))

This is the first in a series of most likely three PRs about the cohomology functor. In this PR, I
* add documentation for `comma.lean`,
* introduce the arrow category as a special case of the comma construction, and
* introduce the notion of functorial images, which means that commutative squares induce morphisms on images making the obvious diagram commute.

### [2020-04-11T21:19:21+00:00](https://github.com/leanprover-community/mathlib/commit/aa42f3b425e0a66cc721b7e605a3490a24894782)
chore(scripts): update nolints.txt ([#2391](https://github.com/leanprover-community/mathlib/pull/#2391))

I am happy to remove some nolints for you!

### [2020-04-11T18:44:17+00:00](https://github.com/leanprover-community/mathlib/commit/5f1bfcf2a3f76d0989395489c94448948e1997cd)
chore(tactic/lean_core_docs): add API docs for core Lean tactics ([#2371](https://github.com/leanprover-community/mathlib/pull/#2371))

This is an attempt to get some documentation of most core Lean tactics into the API docs.

See https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/undocumented.20core.20tactics (and the link in my second message in that thread) for background.

Co-Authored-By: Rob Lewis <Rob.y.lewis@gmail.com>
Co-Authored-By: Scott Morrison <scott@tqft.net>
Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-04-11T18:44:15+00:00](https://github.com/leanprover-community/mathlib/commit/80340d8334432e4df0a43e254f9a302aa65611db)
feat(category_theory): define action_category ([#2358](https://github.com/leanprover-community/mathlib/pull/#2358))

This is a simple construction that I couldn't find anywhere else: given a monoid/group action on X, we get a category/groupoid structure on X. The plan is to use to use the action groupoid in the proof of Nielsen-Schreier, where the projection onto the single object groupoid is thought of as a covering map.

To make sense of "stabilizer is mul_equiv to End", I added the simple fact that the stabilizer of any multiplicative action is a submonoid. This already existed for group actions. As far as I can tell, this instance shouldn't cause any problems as it is a Prop.

### [2020-04-11T16:16:28+00:00](https://github.com/leanprover-community/mathlib/commit/e1feab4edca144bfaf95bfa172a44fd106bfb68a)
refactor(*): rename ordered groups/monoids to ordered add_ groups/monoids ([#2347](https://github.com/leanprover-community/mathlib/pull/#2347))

In the perfectoid project we need ordered commutative monoids, and they are multiplicative. So the additive versions should be renamed to make some place.

### [2020-04-11T14:27:08+00:00](https://github.com/leanprover-community/mathlib/commit/c9fca15420e2ad443707ace831679fd1762580fe)
chore(algebra/category): remove some [reducible] after Lean 3.8 ([#2389](https://github.com/leanprover-community/mathlib/pull/#2389))

Now that Lean 3.8 has arrived, we can essentially revert [#2290](https://github.com/leanprover-community/mathlib/pull/#2290), but leave in the examples verifying that everything still works.

Lovely!

### [2020-04-11T13:00:39+00:00](https://github.com/leanprover-community/mathlib/commit/83359d14cfa7b346baca7a4a99207fa28f9be1a0)
chore(scripts): update nolints.txt ([#2390](https://github.com/leanprover-community/mathlib/pull/#2390))

I am happy to remove some nolints for you!

### [2020-04-11T09:58:11+00:00](https://github.com/leanprover-community/mathlib/commit/4fa292494dc5291cee171f0fc6e19267220fba1b)
chore(scripts): update nolints.txt ([#2388](https://github.com/leanprover-community/mathlib/pull/#2388))

I am happy to remove some nolints for you!

### [2020-04-11T09:58:09+00:00](https://github.com/leanprover-community/mathlib/commit/81d8104ffba4d0ae7f3683d14a5623cf75a505d4)
feat(actions): manage labels on PR review ([#2387](https://github.com/leanprover-community/mathlib/pull/#2387))

Github actions will now add "ready-to-merge" to PRs that are approved by writing "bors r+" / "bors merge" in a PR reviews. It will also remove the "request-review" label, if present.

### [2020-04-11T09:58:07+00:00](https://github.com/leanprover-community/mathlib/commit/c68f23dffa9b589faa0e1d29e1fbad64e8aad0ea)
chore(category_theory/types): add documentation, remove bad simp lemmas and instances, add notation for functions as morphisms ([#2383](https://github.com/leanprover-community/mathlib/pull/#2383))

* Add module doc and doc strings for `src/category_theory/types.lean`.
* Remove some bad simp lemmas and instances in that file and `src/category_theory/category/default.lean`.
* Add a notation `↾f` which enables Lean to see a function `f : α → β` as a morphism `α ⟶ β` in the category of types.

### [2020-04-11T09:58:05+00:00](https://github.com/leanprover-community/mathlib/commit/00b510eb073523f8657eeb9c21e90ab95c81b39b)
perf(data/*): add inline attributes ([#2380](https://github.com/leanprover-community/mathlib/pull/#2380))

This is part of an effort to bring `rewrite_search` to mathlib. Depends on [#2375](https://github.com/leanprover-community/mathlib/pull/#2375).

Co-authored-by: Keeley Hoek <keeley@hoek.io>

### [2020-04-11T09:58:03+00:00](https://github.com/leanprover-community/mathlib/commit/690643ab8b149ba784460d4d787e61299634e569)
fix(tactic/equiv_rw): don't use `subst` unnecessarily ([#2334](https://github.com/leanprover-community/mathlib/pull/#2334))

This removes an unnecessary `subst` from the algorithm in `equiv_rw`, which was responsible for inserting `eq.rec`'s in data terms.

### [2020-04-11T07:17:19+00:00](https://github.com/leanprover-community/mathlib/commit/8556499f7f89f427640e9f0cd8904072f9f1f008)
feat(category_theory): make defining groupoids easier ([#2360](https://github.com/leanprover-community/mathlib/pull/#2360))

The point of this PR is to lower the burden of proof in showing that a category is a groupoid. Rather than constructing well-defined two-sided inverses everywhere, with `groupoid.of_trunc_split_mono` you'll only need to show that every morphism has some retraction. This makes defining the free groupoid painless. There the retractions are defined by recursion on a quotient, so this saves the work of showing that all the retractions agree.

I used `trunc` instead of `nonempty` to avoid choice / noncomputability.

I don't understand why the @'s are needed: it seems Lean doesn't know what category structure C has without specifying it?

### [2020-04-11T04:27:56+00:00](https://github.com/leanprover-community/mathlib/commit/597704ac267dfc849da21fc563f13168ce6c40a3)
chore(*): switch to lean 3.8.0 ([#2361](https://github.com/leanprover-community/mathlib/pull/#2361))

Switch to Lean 3.8.

### [2020-04-10T20:56:06+00:00](https://github.com/leanprover-community/mathlib/commit/ebdeb3b6124f420adb50733b0042aad763b22e68)
chore(scripts): update nolints.txt ([#2386](https://github.com/leanprover-community/mathlib/pull/#2386))

I am happy to remove some nolints for you!

### [2020-04-10T18:03:50+00:00](https://github.com/leanprover-community/mathlib/commit/29080c8cef560f1dcd15ee272f46a0ac2c7b32a1)
feat(data/list/range): add sum lemmas ([#2385](https://github.com/leanprover-community/mathlib/pull/#2385))

Adding the proof that left and right multiplication in a ring commute with list sum.

### [2020-04-10T18:03:48+00:00](https://github.com/leanprover-community/mathlib/commit/61fa48961310dc1f1d4163d695418d0081d7004f)
feat(tactic/trunc_cases): a tactic for case analysis on trunc hypotheses ([#2368](https://github.com/leanprover-community/mathlib/pull/#2368))

```
/--
Perform case analysis on a `trunc` expression, 
preferentially using the recursor `trunc.rec_on_subsingleton` 
when the goal is a subsingleton, 
and using `trunc.rec` otherwise.

Additionally, if the new hypothesis is a type class, 
reset the instance cache.
-/
```

### [2020-04-10T15:39:37+00:00](https://github.com/leanprover-community/mathlib/commit/3cc7a32bce29bc47e0815e5e1463f8dfec9f23d6)
feat(order/complete_lattice): add a constructor from `partial_order` and `Inf` ([#2359](https://github.com/leanprover-community/mathlib/pull/#2359))

Also use `∃!` in `data/setoid`.

### [2020-04-10T13:48:32+00:00](https://github.com/leanprover-community/mathlib/commit/5169595d2d982ba522047b6709c112bf305f87d8)
chore(tactic/omega): add trace.omega option to show internal representation ([#2377](https://github.com/leanprover-community/mathlib/pull/#2377))

This is helpful when debugging issues such as [#2376](https://github.com/leanprover-community/mathlib/pull/#2376) and [#1484](https://github.com/leanprover-community/mathlib/pull/#1484).

### [2020-04-10T13:48:30+00:00](https://github.com/leanprover-community/mathlib/commit/bf8f25aed730a7e23f00264689485a81a1436462)
feat(algebra/lie_algebra): quotients of Lie modules are Lie modules ([#2335](https://github.com/leanprover-community/mathlib/pull/#2335))

### [2020-04-10T12:54:03+00:00](https://github.com/leanprover-community/mathlib/commit/1a099b38f3f456fb4bc3e36e4f2c0ca0345a80fa)
chore(scripts): update nolints.txt ([#2381](https://github.com/leanprover-community/mathlib/pull/#2381))

I am happy to remove some nolints for you!

### [2020-04-10T12:54:02+00:00](https://github.com/leanprover-community/mathlib/commit/a7142455cb59ce6cef0d935d6b897b194cb57446)
feat(group_theory/order_of_element): order_of_dvd_iff_pow_eq_one ([#2364](https://github.com/leanprover-community/mathlib/pull/#2364))

### [2020-04-10T11:53:26+00:00](https://github.com/leanprover-community/mathlib/commit/55814dc3a1c11262c7a7ad0ef842d4cd1ca6fafc)
fix(.github/workflows/add_label): add missing outputs ([#2379](https://github.com/leanprover-community/mathlib/pull/#2379))

I hope this fixes the `add_label` workflow.

### [2020-04-10T11:53:24+00:00](https://github.com/leanprover-community/mathlib/commit/808fa8df7a3caafafaf541dae8f8306024b23b52)
chore(.github): remove linebreaks from pull request template ([#2378](https://github.com/leanprover-community/mathlib/pull/#2378))

github treats a newline in the markdown text as a linebreak.

### [2020-04-10T10:19:59+00:00](https://github.com/leanprover-community/mathlib/commit/e75826316f5942ebf17eb10f77335c32404a01b6)
refactor(ring_theory/algebra): use bundled homs, allow semirings ([#2303](https://github.com/leanprover-community/mathlib/pull/#2303))

Fixes [#2297](https://github.com/leanprover-community/mathlib/pull/#2297)

Build fails because of some class instance problems, asked [on Zulip](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Need.20help.20with.20class.20instance.20resolution), no answer yet.

### [2020-04-10T07:02:46+00:00](https://github.com/leanprover-community/mathlib/commit/f723f37531502d76e9f7a3a27c225884918a70b5)
feat(ci): switch from mergify to bors ([#2322](https://github.com/leanprover-community/mathlib/pull/#2322))

This PR (joint work with @gebner) changes the automation that merges our PRs from mergify to a service called [bors](https://bors.tech/). Currently, the "time-to-master" of an approved PR grows linearly with the number of currently queued PRs, since mergify builds PRs against master one at a time. bors batches approved PRs together before building them against master so that most PRs should merge within 2*(current build time).

As far as day-to-day use goes, the main difference is that maintainers will approve PRs by commenting with the magic words "`bors r+`" instead of "approving" on Github and adding the "ready-to-merge" label. Contributors should be aware that pushing additional commits to an approved PR will now require a new approval.

Some longer notes on bors and mathlib can be found [here](https://github.com/leanprover-community/mathlib/blob/2ea15d65c32574aaf513e27feb24424354340eea/docs/contribute/bors.md).

Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2020-04-10T06:01:10+00:00](https://github.com/leanprover-community/mathlib/commit/495deb970bca765cd365d3eb9b1fe42b2f5486c0)
chore(scripts): update nolints.txt

### [2020-04-10T05:27:11+00:00](https://github.com/leanprover-community/mathlib/commit/6152d4509da42742d0651e96773e7e69b58d2735)
refactor(field_theory/perfect_closure): use bundled homs, review ([#2357](https://github.com/leanprover-community/mathlib/pull/#2357))

* refactor(field_theory/perfect_closure): use bundled homs, review

Also add lemmas like `monoid_hom.iterate_map_mul`.

* Fix a typo spotted by `lint`

* Apply suggestions from code review

Co-Authored-By: Johan Commelin <johan@commelin.net>

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-10T02:46:37+00:00](https://github.com/leanprover-community/mathlib/commit/b15c213a4b4dbf602ca6e130d8a82516ab890fe4)
chore(*): replace uses of `---` delimiter in tactic docs ([#2372](https://github.com/leanprover-community/mathlib/pull/#2372))

* update abel doc string

the tactic doc entry seems completely fine as the doc string,
I don't know why these were separated

* replace uses of --- in docs

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-09T23:56:46+00:00](https://github.com/leanprover-community/mathlib/commit/19e1a96953ad5baa2d3aefaf5528b117b2adc40c)
doc(add_tactic_doc): slight improvement to docs ([#2365](https://github.com/leanprover-community/mathlib/pull/#2365))

* doc(add_tactic_doc): slight improvement to docs

* Update docs/contribute/doc.md

Co-Authored-By: Yury G. Kudryashov <urkud@urkud.name>

* sentence

* update add_tactic_doc doc entry

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-09T21:05:16+00:00](https://github.com/leanprover-community/mathlib/commit/4a1dc427a94dbaf52bc07045394a6d636f89c7fe)
chore(scripts): update nolints.txt

### [2020-04-09T20:31:33+00:00](https://github.com/leanprover-community/mathlib/commit/6a7db27987b66b28e3783e38b4573eee7c8ac572)
feat(tactic/ring_exp) allow ring_exp inside of conv blocks ([#2369](https://github.com/leanprover-community/mathlib/pull/#2369))

* allow ring_exp inside of conv blocks

* Update test/ring_exp.lean

* Update test/ring_exp.lean

* Update test/ring_exp.lean

* add docstrings

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-09T17:41:23+00:00](https://github.com/leanprover-community/mathlib/commit/d240f3826cd1f7487d04f538a152b63a60250165)
feat(tactic/simp_result): tactics for simplifying the results of other tactics ([#2356](https://github.com/leanprover-community/mathlib/pull/#2356))

* feat(tactic/simp_result): tactics for simplifying the results of other tactics

* word

* better tests

* order of arguments

* Revert "order of arguments"

This reverts commit 38cfec6867459fcc4c5ef2d41f5313a5b0466c53.

* fix add_tactic_doc

* slightly robustify testing

* improve documentation

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-09T12:44:49+00:00](https://github.com/leanprover-community/mathlib/commit/63fc23a6b94d0483412bf777bb2667941fcc3c16)
feat(data/list): chain_iff_nth_le ([#2354](https://github.com/leanprover-community/mathlib/pull/#2354))

* feat(data/list): chain_iff_nth_le

* Update src/data/list/basic.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* move

* fix

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-09T10:08:54+00:00](https://github.com/leanprover-community/mathlib/commit/bda8a05057d4dc327560d63957b62bbd7d9c733d)
doc(docs/extras/tactic_writing) add cheap method ([#2198](https://github.com/leanprover-community/mathlib/pull/#2198))

* doc(docs/extras/tactic_writing) add cheap method

About 50% of my personal use cases for writing tactics are just because I want a simple way of stringing several tactics together, so I propose adding this so I will know where to look when I realise I can't remember the syntax.

* style fixes

* Update tactic_writing.md

* Update tactic_writing.md

* Update docs/extras/tactic_writing.md

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-09T09:03:53+00:00](https://github.com/leanprover-community/mathlib/commit/a8797ce73ef6464314045c3c724673345db9f91a)
feat(data/set/basic): add lemmata ([#2353](https://github.com/leanprover-community/mathlib/pull/#2353))

* feat(data/set/basic): add lemmata

* switch to term mode proof

* removing dupe

* make linter happy

* Update src/data/set/basic.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* change proof

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-09T06:10:23+00:00](https://github.com/leanprover-community/mathlib/commit/80d3ed8f76ef962fd109a52b4af44477428b98ea)
fix(algebra/euclidean_domain): remove decidable_eq assumption ([#2362](https://github.com/leanprover-community/mathlib/pull/#2362))

This PR removes the `decidable_eq` assumption on the `field.to_euclidean_domain` instance.  Decidable equality was only used to define the remainder with an if-then-else, but this can also be done by exploiting the fact that `0⁻¹ = 0`.

The current instance is a bit problematic since it can cause `a + b : ℝ` to be noncomputable if type-class inference happens to choose the wrong instance (going through `euclidean_domain` instead of "directly" through some kind of ring).

### [2020-04-09T03:16:05+00:00](https://github.com/leanprover-community/mathlib/commit/67b121e41708c473297860e30f61c8868b564498)
chore(scripts): update nolints.txt

### [2020-04-09T02:50:30+00:00](https://github.com/leanprover-community/mathlib/commit/fbc9592788fe71b15bdefc972a98f40b79d29bab)
chore(data/list): move some sections to separate files ([#2341](https://github.com/leanprover-community/mathlib/pull/#2341))

* move list.func namespace to its own file

* move erase_dup to its own file

* move rotate to its own file

* move tfae to its own file

* move bag_inter and intervals

* move range out

* move nodup

* move chain and pairwise

* move zip

* move forall2

* move of_fn

* add copyright headers

* remove unnecessary sections, move defns to func.set and tfae

* fixes

* oops, forgot to add file

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-09T00:00:42+00:00](https://github.com/leanprover-community/mathlib/commit/e4e483e58ff3648e38e5bae248f79b9c36b7ee3a)
Bugfix for norm num when testing divisibility of integers ([#2355](https://github.com/leanprover-community/mathlib/pull/#2355))

they were assumed nats somehow

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-08T21:12:22+00:00](https://github.com/leanprover-community/mathlib/commit/c3d9cf9006732c3494a0ce2841490e661af682f7)
feat(analysis/analytic/basic): change origin of power series ([#2327](https://github.com/leanprover-community/mathlib/pull/#2327))

* feat(analysis/analytic/basic): move basepoint of power series

* docstring

* Update src/analysis/analytic/basic.lean

Co-Authored-By: Scott Morrison <scott@tqft.net>

* Update src/analysis/analytic/basic.lean

Co-Authored-By: Scott Morrison <scott@tqft.net>

* Update src/analysis/analytic/basic.lean

Co-Authored-By: Scott Morrison <scott@tqft.net>

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-08T18:19:54+00:00](https://github.com/leanprover-community/mathlib/commit/dae7154d7ba4581b422cf67038cd3a2ea9c643d4)
chore(scripts): update nolints.txt

### [2020-04-08T17:46:11+00:00](https://github.com/leanprover-community/mathlib/commit/55d430ca22bad157799afdf5e3d9a26597ee37f9)
feat(tactic/linter): add decidable_classical linter ([#2352](https://github.com/leanprover-community/mathlib/pull/#2352))

* feat(tactic/linter): add decidable_classical linter

* docstring

* cleanup

* fix build, cleanup

* fix test

* Update src/tactic/lint/type_classes.lean

Co-Authored-By: Scott Morrison <scott@tqft.net>

* Update src/tactic/lint/type_classes.lean

Co-Authored-By: Scott Morrison <scott@tqft.net>

* Update src/tactic/lint/default.lean

Co-Authored-By: Scott Morrison <scott@tqft.net>

* Update src/tactic/lint/type_classes.lean

Co-Authored-By: Scott Morrison <scott@tqft.net>

* Update src/data/dfinsupp.lean

Co-Authored-By: Yury G. Kudryashov <urkud@urkud.name>

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-08T15:10:31+00:00](https://github.com/leanprover-community/mathlib/commit/65a5dc0f40d712d14436f932b38da011b6e9ea6b)
feat(data/support): define support of a function and prove some properties ([#2340](https://github.com/leanprover-community/mathlib/pull/#2340))

* feat(data/support): define support of a function and prove some properties

* Add `support_mul'` for `group_with_zero`

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-08T12:29:19+00:00](https://github.com/leanprover-community/mathlib/commit/b550c1655887ddcbc72a10fb2700e4108ab3fd99)
fix(tactic/solve_by_elim): fix metavariable bug from [#2269](https://github.com/leanprover-community/mathlib/pull/#2269) ([#2289](https://github.com/leanprover-community/mathlib/pull/#2289))

* chore(tactic/solve_by_elim): fix metavariable bug from [#2269](https://github.com/leanprover-community/mathlib/pull/#2269)

* tests

* forgot to save file?

* fix bug, and tweak docs

* fix

* oops, remove stray

* provide both `lemmas` and `lemma_thunks` fields

* fix

* fix

* remove code duplication

* fix indenting

* add comments about evaluating thunks in mk_assumption_set

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-08T09:55:55+00:00](https://github.com/leanprover-community/mathlib/commit/bd21cffcfc9a1156c5999c38cf2bd16e170e523a)
feat(data/list/basic): some lemmas about sum/head/tail for list ℕ ([#2342](https://github.com/leanprover-community/mathlib/pull/#2342))

* feat(data/list/basic): some lemmas about sum/head/tail for list ℕ

* Add comment

* remove lemma, moving to another PR

* suggestion from review

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-08T07:20:14+00:00](https://github.com/leanprover-community/mathlib/commit/cb8d8ace62a0d93cae663991abb11347ac4e09dc)
feat (data/list/basic): lemmas about prod and take ([#2345](https://github.com/leanprover-community/mathlib/pull/#2345))

* feat (data/list/basic): lemmas about prod and take

* move lemma

* one more

* using to_additive properly

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-08T01:12:13+00:00](https://github.com/leanprover-community/mathlib/commit/732f7109c5cb2ece35481c200faa38fbbb4dc995)
feat(data/list/basic): nth_le 0 = head ([#2350](https://github.com/leanprover-community/mathlib/pull/#2350))

* feat(data/list/basic): nth_le 0 = head

* oops

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-07T22:38:07+00:00](https://github.com/leanprover-community/mathlib/commit/0e2970c7cba7938f948226d50449e0e7685804bd)
feat(algebra/group/basic.lean): add inv_mul_eq_one ([#2349](https://github.com/leanprover-community/mathlib/pull/#2349))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-07T19:50:30+00:00](https://github.com/leanprover-community/mathlib/commit/34ae62adf3639efdbd0ac819aaddaa72b882597e)
feat(algebra/homology): functoriality of induced maps on cycles ([#2338](https://github.com/leanprover-community/mathlib/pull/#2338))

* feat(algebra/homology): Functoriality of induced maps on cycles

* Rename cycles to cocycles, induced_maps_on_cocycles_functor to kernels_functor

* update names

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-07T17:07:59+00:00](https://github.com/leanprover-community/mathlib/commit/e2fa8b2b1b732d7c25119229e3cdfba8370cb00f)
chore(test/refine_struct): remove dead code ([#2348](https://github.com/leanprover-community/mathlib/pull/#2348))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-07T16:06:37+00:00](https://github.com/leanprover-community/mathlib/commit/abccc3010512a55a29fb85e9600692643b4a9f23)
chore(scripts): update nolints.txt

### [2020-04-07T15:31:37+00:00](https://github.com/leanprover-community/mathlib/commit/6f75c57e2dd055963c3822df06d56cd1370a7fb1)
refactor(measure_theory/borel): `borel` is not an `instance` ([#2326](https://github.com/leanprover-community/mathlib/pull/#2326))

Redo Borel spaces in a way similar to `closed_order_topology`/`order_topology`.

* `borel` is no longer an `instance`;
* define typeclass `opens_measurable_space` for a space with `measurable_space` and `topological_space` structures such that all open sets are measurable;
* define typeclass `borel_space` for a space with `measurable_space` and `topological_space` structures such that `measurable_space` structure is equal to `borel`;
* use dot syntax in more cases;
* review some proofs that started to fail because of this change.

### [2020-04-07T12:40:05+00:00](https://github.com/leanprover-community/mathlib/commit/97c4302525262ff98f19d780ae47c8750623d238)
feat(data/list/basic): add map_take/drop_take ([#2344](https://github.com/leanprover-community/mathlib/pull/#2344))

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-07T10:10:41+00:00](https://github.com/leanprover-community/mathlib/commit/2f2e016e477555ef4583270ba514dfe9aa78f5e5)
chore(data/list/basic): rename take_all -> take_length ([#2343](https://github.com/leanprover-community/mathlib/pull/#2343))

* chore(data/list/basic): rename take_all -> take_length

* also rename drop_all

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-07T08:48:42+00:00](https://github.com/leanprover-community/mathlib/commit/d936c288638ddf20a0f27694cfc7b7b6bb635e8f)
feat(data/real/nnreal): coe_max and coe_min ([#2346](https://github.com/leanprover-community/mathlib/pull/#2346))

### [2020-04-07T06:44:18+00:00](https://github.com/leanprover-community/mathlib/commit/c85453d964ec4f330f321ea0d6a908a91f26e749)
fix(tactic/refine_struct): don't add unnecessary `eq.mpr` or `id` ([#2319](https://github.com/leanprover-community/mathlib/pull/#2319))

* fix(tactic/interactive): don't unfold non-Prop goals

The old behaviour caused `eq.mpr`'s in `pi_instance` output.

* add a test file

* move test

* actually move test

* Update test/refine_struct.lean

* test: fix compile

* Apply suggestions from code review

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* Try a fix by @gebner and @cipher1024

* Update test/refine_struct.lean

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* apply Gabriel's suggestion

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-07T04:14:25+00:00](https://github.com/leanprover-community/mathlib/commit/df64ea9c03ea7b04b5bf9f268923bb6aca793d2d)
chore(scripts): update nolints.txt

### [2020-04-07T03:42:42+00:00](https://github.com/leanprover-community/mathlib/commit/60d14579e1a924a9a6342e7d7a5a09a883c66d11)
chore(algebra/big_operators): drop some `decidable_eq` assumptions ([#2332](https://github.com/leanprover-community/mathlib/pull/#2332))

* chore(algebra/big_operators): drop some `decidable_eq` assumptions

I wonder why `lint` didn't report them.

* Drop unused arguments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-06T23:32:14+00:00](https://github.com/leanprover-community/mathlib/commit/7628c6c763d482134ed86172f6ddd031545849da)
chore(scripts): update nolints.txt

### [2020-04-06T23:05:14+00:00](https://github.com/leanprover-community/mathlib/commit/48cc0c81ad5e027a96612236f41c8bd351524f78)
feat(algebra/group_with_zero): groups with a zero element adjoined ([#2242](https://github.com/leanprover-community/mathlib/pull/#2242))

* feat(algebra/group_with_zero*): Basics on groups with a zero adjoined

* feat(algebra/group_with_zero*): Basics on groups with a zero adjoined

* Make argument implicit

* Move inv_eq_zero out of gwz namespace

* Partial refactor

* Remove open_locale classical

* Fix build

* Factor out monoid_with_zero

* Fix linter errors, hopefully

* Fix build

* Fix tests

* Replace G with G0

* Add spaces around `^`

* Add spaces and backticks in docstrings

* Fix docstring of `mk0`

* Fix statement of inv_eq_iff

* Golf inv_injective

* Golf inv_eq_zero

* Remove the gwz namespace

* Fix build

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-06T21:01:55+00:00](https://github.com/leanprover-community/mathlib/commit/89fdec6ede015b76231b43658c37329b45c4d027)
fix(data/finset): add comment ([#2336](https://github.com/leanprover-community/mathlib/pull/#2336))

* doc(data/finset): adding comment

* fix(topology/metric_space/basic): comment typo

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-06T18:20:25+00:00](https://github.com/leanprover-community/mathlib/commit/7b120a355b262a01eb806c0aac3302cf665f32f4)
feat(data/mv_polynomial): add pderivative_eq_zero_of_not_mem_vars ([#2324](https://github.com/leanprover-community/mathlib/pull/#2324))

* feat(data/mv_polynomial): add pderivative_eq_zero_of_not_mem_vars

* Added doc comment for `pderivative.add_monoid_hom`

* Fix formatting

* fixed issues from review

* change begin end to braces.

* fix issues from review

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-06T15:34:03+00:00](https://github.com/leanprover-community/mathlib/commit/ff910dca9c4a5efc584894858a47dbc0e21650ef)
feat(topology/bounded_continuous_function): composition of limits when uniform convergence ([#2260](https://github.com/leanprover-community/mathlib/pull/#2260))

* feat(topology/bounded_continuous_function): composition of limits when uniform convergence

* better statement

* uniform space version

* cleanup

* fix linter

* reviewer's comments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-06T12:39:52+00:00](https://github.com/leanprover-community/mathlib/commit/572fad122011790fc0678fdc3edb16e7f9480156)
chore(topology/instances/ennreal): prove `tendsto_iff_edist_tendsto_0` ([#2333](https://github.com/leanprover-community/mathlib/pull/#2333))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-06T10:15:13+00:00](https://github.com/leanprover-community/mathlib/commit/3d60e1344d5d3126c5a2adfe0da132fdebd6e60a)
chore(algebra/field): move some lemmas from `field` to `division_ring` ([#2331](https://github.com/leanprover-community/mathlib/pull/#2331))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-05T23:39:22+00:00](https://github.com/leanprover-community/mathlib/commit/a2e763913693c470b3205a938a989f958da862e6)
feat(order/filter): more eventually/frequently API ([#2330](https://github.com/leanprover-community/mathlib/pull/#2330))

* feat(order/filter): more eventually/frequently API

* Update after review

* Add simp attribute

* Update src/order/filter/basic.lean

Co-Authored-By: Yury G. Kudryashov <urkud@urkud.name>

* Update src/order/filter/basic.lean

Co-Authored-By: Yury G. Kudryashov <urkud@urkud.name>

Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-05T17:46:07+00:00](https://github.com/leanprover-community/mathlib/commit/26bf27309d78ea0d19f135e09d4689cba72852e4)
feat(logic/embedding): embedding punit/prod ([#2315](https://github.com/leanprover-community/mathlib/pull/#2315))

* feat(logic/embedding): embedding punit/prod

* renaming to sectl

* Revert disambiguations no longer needed

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-05T05:53:08+00:00](https://github.com/leanprover-community/mathlib/commit/23681c3db3dc30695a97a769641a99511297f784)
feat(tactic/linarith): split conjunctions in hypotheses ([#2320](https://github.com/leanprover-community/mathlib/pull/#2320))

* feat(tactic/linarith): split conjunctions in hypotheses

* update doc

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-04T17:59:00+00:00](https://github.com/leanprover-community/mathlib/commit/dea8bd4bb17e74ff82f0ee1814912f46465fd289)
feat(*/multilinear): more material ([#2197](https://github.com/leanprover-community/mathlib/pull/#2197))

* feat(*/multilinear): more material

* improvements

* docstring

* elaboration strategy

* remove begin ... end

* fix build

* linter

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-04T16:43:46+00:00](https://github.com/leanprover-community/mathlib/commit/8406896b65f947dfd8691ad2ebcd85aaa8fe1434)
chore(ci): always push release to azure ([#2321](https://github.com/leanprover-community/mathlib/pull/#2321))

PR [#2048](https://github.com/leanprover-community/mathlib/pull/#2048) changed the CI so that olean caches are not pushed to Azure if a later commit on the same branch occurs. The reasoning was that it was unlikely that anyone would fetch those caches. That's changed as of [#2278](https://github.com/leanprover-community/mathlib/pull/#2278), since `fetch_olean_cache.sh` now looks for caches from commits earlier in the history. This means that currently, we can observe the following wasteful sequence of events in several PRs (e.g. [#2258](https://github.com/leanprover-community/mathlib/pull/#2258)):

1. commit A gets pushed to a certain branch and CI_A starts.
2. While CI_A is still running the `leanpkg build` step, commit B is pushed and CI_B starts.
3. CI_A finishes `leanpkg build` but doesn't upload its cache to Azure because of [#2048](https://github.com/leanprover-community/mathlib/pull/#2048) 
4. Now commit C is pushed and can't use the results of CI_A
5. CI_B finishes `leanpkg build` but doesn't upload its cache
6. Commit D is pushed and can't use the results of CI_A or CI_B ...

(This can keep happening as long as the next commit arrives before the most recent CI uploads to Azure).

I also cleaned up some stuff that was left over from when we ran the build on both "pr" and "push" events.

### [2020-04-04T08:11:40+00:00](https://github.com/leanprover-community/mathlib/commit/63aa8b1e9c0ede49d159e59aa6487f1483a9e89d)
feat(data/mv_polynomial): add partial derivatives ([#2298](https://github.com/leanprover-community/mathlib/pull/#2298))

* feat(data/mv_polynomial): add partial derivatives

* Added suggestions from PR.

* trying to placate simp linter

* Updated implementation of `pderivative`

* formatting suggestions from Bryan

Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

* Suggestions from review.

* rearrange aux lemmas

Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>
Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-04T05:20:52+00:00](https://github.com/leanprover-community/mathlib/commit/906874e2f337e78235d81e27f01f25152846e392)
feat(category_theory): quotient categories ([#2310](https://github.com/leanprover-community/mathlib/pull/#2310))

This constructs the quotient of a category by an arbitrary family of relations on its hom-sets. Analogous to "quotient of a group by the normal closure of a subset", as opposed to "quotient of a group by a normal subgroup".

The plan is to eventually use this together with the path category to construct the free groupoid on a graph.

### [2020-04-03T12:34:08+00:00](https://github.com/leanprover-community/mathlib/commit/a590d4b50347eae62c4af5209fc5436f3862554f)
feat(group_theory/monoid_localization): some homs induced on localizations: lift, map ([#2118](https://github.com/leanprover-community/mathlib/pull/#2118))

* should I be changing and committing toml idk

* initial monoid loc lemmas

* responding to PR comments

* removing bad @[simp]

* inhabited instances

* remove #lint

* additive inhabited instance

* using is_unit & is_add_unit

* doc string

* remove simp

* submonoid.monoid_loc... -> submonoid.localization

* submonoid.monoid_loc... -> submonoid.localization

* generalize inhabited instance

* remove inhabited instance

* 2nd section

* docs and linting

* removing questionable `@[simp]s`

* removing away

* adding lemmas, removing 'include'

* removing import

* responding to PR comments

* use eq_of_eq to prove comp_eq_of_eq

* name change

* trying to update mathlib

* make lemma names consistent

* Update src/algebra/group/is_unit.lean

* Update src/algebra/group/is_unit.lean

* fix build

* documentation and minor changes

* spacing

* fix build

* applying comments

Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>
Co-authored-by: Chris Hughes <chrishughes24@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-03T08:57:48+00:00](https://github.com/leanprover-community/mathlib/commit/6af5901be84b62fe2d9feff61ddd102c88870acd)
chore(scripts): update nolints.txt

### [2020-04-03T08:24:57+00:00](https://github.com/leanprover-community/mathlib/commit/8af4bb8dfe77a60d19b670e4346473b0de93afce)
refactor(tactic/lint): split into multiple files ([#2299](https://github.com/leanprover-community/mathlib/pull/#2299))

The `lint.lean` file is getting too long for me to comfortably navigate.  This PR splits the file up into several parts:
 * `tactic.lint.basic` defining the `linter` structure and the `@[linter]` and `@[nolint]` attributes
 * `tactic.lint.frontend` defined the functions to run the linters and the various `#lint` commands
 * The linters are split into three separate files, the simp linters, the type class linters, and the rest.
 * `tactic.lint` imports all of the files above so `import tactic.lint` still works as before

### [2020-04-03T06:55:45+00:00](https://github.com/leanprover-community/mathlib/commit/cb0a1b50f259c1b0fb7df7e15f747864a108fee7)
feat(order/filter): add lemmas about `∀ᶠ`, `∃ᶠ` and logic operations ([#2314](https://github.com/leanprover-community/mathlib/pull/#2314))

* feat(order/filter): add lemmas about `∀ᶠ`, `∃ᶠ` and logic operations

* Remove `@[congr]`

* Apply suggestions from code review

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-03T04:11:38+00:00](https://github.com/leanprover-community/mathlib/commit/1b24e0a0c254c390d8997f86fffd8e4c506daa5f)
chore(test/*): move tests into individual files ([#2317](https://github.com/leanprover-community/mathlib/pull/#2317))

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>

### [2020-04-02T19:25:32+00:00](https://github.com/leanprover-community/mathlib/commit/d3b8622bdb1b00917c727beab08d53af4aee00e9)
fix(tactic/lint): simp_nf: do not ignore errors ([#2266](https://github.com/leanprover-community/mathlib/pull/#2266))

This PR fixes some bugs in the `simp_nf` linter.  Previously it ignored all errors (from failing tactics).  I've changed this so that errors from linters are handled centrally and reported as linter warnings.  The `simp_is_conditional` function was also broken.

As usual, new linters find new issues:

 1. Apparently Lean sometimes throws away simp lemmas.  https://github.com/leanprover-community/lean/issues/163
 2. Some types define `has_coe` but have an incorrect `has_coe_to_fun`, causing the simplifier to loop `⇑f a = ⇑↑f a = ⇑f a`.  See the new library note:

### [2020-04-02T16:19:33+00:00](https://github.com/leanprover-community/mathlib/commit/654533ffcac48b07e13b8fc4b91949e19cd6cf29)
feat(logic/basic): a few lemmas about `exists_unique` ([#2283](https://github.com/leanprover-community/mathlib/pull/#2283))

The goal is to be able to deal with formulas like `∃! x ∈ s, p x`. Lean parses them as `∃! x, ∃! (hx : x ∈ s), p x`. While this is equivalent to `∃! x, x ∈ s ∧ p x`, it is not defeq to this formula.

### [2020-04-02T13:55:30+00:00](https://github.com/leanprover-community/mathlib/commit/a88356ff00b46ca1ea498c282e14c245e1424f79)
chore(topology/metric_space): use dot notation ([#2313](https://github.com/leanprover-community/mathlib/pull/#2313))

* in `continuous.dist` and `continuous.edist`;
* in `tendsto.dist` and `tendsto.edist`.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-02T11:19:51+00:00](https://github.com/leanprover-community/mathlib/commit/3c27d28437d8f130a10e84307fdaf398a9d56446)
feat(algebra/pi_instances): bundled homs for apply and single ([#2186](https://github.com/leanprover-community/mathlib/pull/#2186))

feat(algebra/pi_instances): bundled homs for apply and single ([#2186](https://github.com/leanprover-community/mathlib/pull/#2186))

This adds some bundled monoid homomorphisms, in particular

```
def monoid_hom.apply (i : I) : (Π i, f i) →* f i := ...
```

and

```
def add_monoid_hom.single (i : I) : f i →+ Π i, f i :=
```

and supporting lemmas.

### [2020-04-02T08:17:59+00:00](https://github.com/leanprover-community/mathlib/commit/313cc2fe9c213c497a338d3dd16446d3285806fa)
chore(category_theory/concrete_category): take an instance, rather than extending, category ([#2195](https://github.com/leanprover-community/mathlib/pull/#2195))

chore(category_theory/concrete_category): take an instance, rather than extending, category ([#2195](https://github.com/leanprover-community/mathlib/pull/#2195))

Our current design for `concrete_category` has it extend `category`.

This PR changes that so that is takes an instance, instead.

I want to do this because I ran into a problem defining `concrete_monoidal_category`, which is meant to be a monoidal category, whose faithful functor to Type is lax monoidal. (The prime example here is `Module R`, where there's a map `F(X) \otimes F(Y) \to F(X \otimes Y)`, but not the other way: here `F(X) \otimes F(Y)` is just the monoidal product in Type, i.e. cartesian product, and the function here is `(x, y) \mapsto x \otimes y`.)

Now, `monoidal_category` does not extend `category`, but instead takes a typeclass, so with the old design `concrete_monoidal_category` was going to be a Frankenstein, extending `concrete_category` and taking a `[monoidal_category]` type class. However, when 3.7 landed this went horribly wrong, and even defining `concrete_monoidal_category` caused an unbounded typeclass search.

So.... I've made everything simpler, and just not used `extends` at all. It's all just typeclasses. This makes some places a bit more verbose, as we have to summon lots of separate typeclasses, but besides that everything works smoothly.

(Note, this PR makes the change to `concrete_category`, but does not yet introduce `concrete_monoidal_category`.)

### [2020-04-02T05:51:39+00:00](https://github.com/leanprover-community/mathlib/commit/f55e3ce4ef281b7ab7d83eacaf53eec0b67220ed)
refactor(*): move `algebra` below `polynomial` in the `import` chain ([#2294](https://github.com/leanprover-community/mathlib/pull/#2294))

* Move `algebra` below `polynomial` in the `import` chain

This PR only moves code and slightly generalizes
`mv_polynomial.aeval`.

* Fix compile

* Update src/data/mv_polynomial.lean

* Apply suggestions from code review

* Apply suggestions from code review

Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-02T03:27:11+00:00](https://github.com/leanprover-community/mathlib/commit/652fc17a56309b8e90ac2900193585006e14d943)
chore(data/set/lattice): add `set_of_exists` and `set_of_forall` ([#2312](https://github.com/leanprover-community/mathlib/pull/#2312))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-01T22:05:57+00:00](https://github.com/leanprover-community/mathlib/commit/5b972be71d8d71d18d34b810ba43f524bfa6ac3c)
chore(scripts): update nolints.txt

### [2020-04-01T21:30:30+00:00](https://github.com/leanprover-community/mathlib/commit/33764abc51cbd699d43976085513444216639670)
chore(tactic/transport): rename to transform_decl ([#2308](https://github.com/leanprover-community/mathlib/pull/#2308))

* chore(tactic/transport): rename to transform_decl

* satisfying the linter

* oops, wrong comment format

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-01T18:42:34+00:00](https://github.com/leanprover-community/mathlib/commit/badc615e38b90dc618a7fb4d461c5977986127e2)
chore(scripts): update nolints.txt

### [2020-04-01T18:06:00+00:00](https://github.com/leanprover-community/mathlib/commit/a8076b2cedffa15202191cb4e98669935ff8b00b)
refactor(data/real/irrational): review ([#2304](https://github.com/leanprover-community/mathlib/pull/#2304))

* refactor(data/real/irrational): review

* Update src/data/real/irrational.lean

* Update src/data/real/irrational.lean

* Apply suggestions from code review

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-01T13:29:58+00:00](https://github.com/leanprover-community/mathlib/commit/203ebb20d304b77d6bf1469d28e480904554bd82)
feat(tactic/simp_rw): support `<-` in `simp_rw` ([#2309](https://github.com/leanprover-community/mathlib/pull/#2309))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-01T10:26:28+00:00](https://github.com/leanprover-community/mathlib/commit/fb658acdda380dc7a302367f54dd93b2227b5ac7)
chore(scripts): update nolints.txt

### [2020-04-01T09:50:28+00:00](https://github.com/leanprover-community/mathlib/commit/003141c88763fd628c8a728402f79b5bddf3a639)
chore(algebra/module): cleanup `is_linear_map` ([#2296](https://github.com/leanprover-community/mathlib/pull/#2296))

* reuse facts about `→+`;
* add `map_smul`
* add a few docstrings

### [2020-04-01T06:47:48+00:00](https://github.com/leanprover-community/mathlib/commit/c7fb84bad81f16b7117abcba4b3914593732db18)
refactor(group_theory/submonoid): review API ([#2173](https://github.com/leanprover-community/mathlib/pull/#2173))

The old API was mirroring the API for unbundled submonoids, while the
new one is based on the API of `submodule`.

Also move some facts about `monoid`/`group` structure on `M × N` to
`algebra/group/prod`.

### [2020-04-01T04:05:06+00:00](https://github.com/leanprover-community/mathlib/commit/67e7f90dabc54e5052ddc5d603a341451b6a1111)
fix(algebra/category): make has_coe_to_sort instances for bundled categories reducible ([#2290](https://github.com/leanprover-community/mathlib/pull/#2290))

* fix(algebra/category): make has_coe_to_sort instances for bundled categories reducible

* fix library notes

* fix import

* Update src/algebra/category/CommRing/basic.lean

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* fix notes

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-04-01T01:14:10+00:00](https://github.com/leanprover-community/mathlib/commit/cc20a86590c91c20551222809e9d4746f3af0a56)
feat(data/nat/basic): `simp` lemmas about inequalities with `bit*` ([#2207](https://github.com/leanprover-community/mathlib/pull/#2207))

* feat(data/nat/basic): `simp` lemmas about inequalities with `bit*`

* Fix compile of `computability/partrec_code`

* Fix `nat.bit_cases` to work for `Type*` too

* Generalize some lemmas to `linear_ordered_semiring`s

* Apply suggestions from code review

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* Apply suggestions from code review

Co-Authored-By: Scott Morrison <scott@tqft.net>

* fixing a proof

Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-31T22:26:22+00:00](https://github.com/leanprover-community/mathlib/commit/7d89f2eae014929e3486f0ced345b95d0d7c8856)
feat(data/fintype/card): prod_univ_sum ([#2284](https://github.com/leanprover-community/mathlib/pull/#2284))

* feat(data/fintype/card): prod_univ_sum

* Update src/data/fintype.lean

* Update src/data/fintype/card.lean

* docstrings

* fix build

* remove unused argument

* fix build

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-31T19:02:55+00:00](https://github.com/leanprover-community/mathlib/commit/224ba7e096ce9cf19e596ac8368946f17fd01a2c)
feat(data/finset): card_image_le ([#2295](https://github.com/leanprover-community/mathlib/pull/#2295))

* feat(data/finset): card_image_le

* add list.to_finset_card_le

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-31T16:02:27+00:00](https://github.com/leanprover-community/mathlib/commit/72d3b6e3491b856e0eb3871bee70f11af3563bc7)
feat(tactic/equiv_rw): incorporating equiv_functor ([#2301](https://github.com/leanprover-community/mathlib/pull/#2301))

* feat(tactic): rewriting along equivalences

* header

* minor

* type

* actually, rewriting the goal under functors is easy

* rewriting inside function types

* more

* way better

* improving comments

* fun

* feat(data/equiv): pi_congr

* various

* feat(data/equiv): sigma_congr

* docstrings

* change case for consistency

* tidying up

* minor

* minor

* switching names

* fixes

* add some tracing routines for convenience

* feat(tactic/core): trace_for

* typo

* oops

* oops

* various

* chore(tactic/solve_by_elim): cleanup

* cleanup

* what happened to my commit?

* fix

* fix

* rename to trace_if_enabled

* fixed?

* Tweak comments

* feat(tactic/solve_by_elim): add accept parameter to prune tree search

* when called with empty lemmas, use the same default set as the interactive tactic

* trace_state_if_enabled

* Update src/data/equiv/basic.lean

* implicit arguments

* stop cheating with [] ~ none

* indenting

* yay, working via solve_by_elim

* pretty good

* various

* various

* docstring

* fix docstrings

* more docs

* docs

* feat(data/equiv/functor): bifunctor.map_equiv

* bifunctors

* test rewriting under unique

* start

* sketch of equiv_functor

* rewriting in subtypes

* add documentation, and make the function an explicit argument

* documentation

* fix doc-strings

* typos

* minor

* adding demonstration of transporting semigroup

* update

* removing unimpressive inhabited example; easier later

* Update .vscode/settings.json

* err

* trying to transport through monoid

* err?

* much better

* improve documentation of accept, and add doc-string

* fix duplicated namespace

* improve docs

* feat(logic/basic): trivial transport lemmas

* try again with documentation

* update

* oops

* oops

* omit

* revert unnecessary change

* fix doc-string

* chore(data/equiv/basic): simp to_fun to coe

* feat(tactic/equiv_rw): incorporating equiv_functor

* rename adapt_equiv

* simplify the equivalence produced, and provide a tactic to access the equivalence

* add max_steps option

* add decl_name to add_tactic_doc

* fix add_tactic_doc

* satisfying linter

* fix names

* finish fix

* add defaults for cfg arguments

* remove simplify_term, which already existed as expr.simp

* remove duplicate functions that have been PRd separately

* no need for accept

* Update src/tactic/equiv_rw.lean

Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

* Update src/tactic/equiv_rw.lean

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* replace max_steps with max_depth

* use solve_aux

* add missing simp lemmas about arrow_congr'

* fix failing test, by making sure we don't leave any ≃ goals on the table

* add comment

* comment out trace output

* fix fields

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-31T14:30:05+00:00](https://github.com/leanprover-community/mathlib/commit/b508d0e001850a321481d278e709e5e8f7d88e00)
feat(tactic/equiv_rw): rewriting along equivalences ([#2246](https://github.com/leanprover-community/mathlib/pull/#2246))

* feat(tactic): rewriting along equivalences

* header

* minor

* type

* actually, rewriting the goal under functors is easy

* rewriting inside function types

* more

* way better

* improving comments

* fun

* feat(data/equiv): pi_congr

* various

* feat(data/equiv): sigma_congr

* docstrings

* change case for consistency

* tidying up

* minor

* minor

* switching names

* fixes

* add some tracing routines for convenience

* feat(tactic/core): trace_for

* typo

* oops

* oops

* various

* chore(tactic/solve_by_elim): cleanup

* cleanup

* what happened to my commit?

* fix

* fix

* rename to trace_if_enabled

* fixed?

* Tweak comments

* feat(tactic/solve_by_elim): add accept parameter to prune tree search

* when called with empty lemmas, use the same default set as the interactive tactic

* trace_state_if_enabled

* Update src/data/equiv/basic.lean

* implicit arguments

* stop cheating with [] ~ none

* indenting

* yay, working via solve_by_elim

* pretty good

* various

* various

* docstring

* fix docstrings

* more docs

* docs

* feat(data/equiv/functor): bifunctor.map_equiv

* bifunctors

* test rewriting under unique

* rewriting in subtypes

* add documentation, and make the function an explicit argument

* documentation

* fix doc-strings

* typos

* minor

* adding demonstration of transporting semigroup

* Update .vscode/settings.json

* err

* trying to transport through monoid

* err?

* much better

* improve documentation of accept, and add doc-string

* fix duplicated namespace

* improve docs

* try again with documentation

* update

* oops

* rename adapt_equiv

* simplify the equivalence produced, and provide a tactic to access the equivalence

* add max_steps option

* add decl_name to add_tactic_doc

* fix add_tactic_doc

* satisfying linter

* add defaults for cfg arguments

* remove simplify_term, which already existed as expr.simp

* remove duplicate functions that have been PRd separately

* no need for accept

* Update src/tactic/equiv_rw.lean

Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

* Update src/tactic/equiv_rw.lean

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* replace max_steps with max_depth

* use solve_aux

* add missing simp lemmas about arrow_congr'

* fix failing test, by making sure we don't leave any ≃ goals on the table

* add comment

* comment out trace output

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-31T11:30:19+00:00](https://github.com/leanprover-community/mathlib/commit/266906244357df2ef83d329eec77713ba3d85c8d)
feat(data/monoid_algebra): some lemmas about group rings ([#2239](https://github.com/leanprover-community/mathlib/pull/#2239))

* feat(algebra/ring): generalize mul_ite

* fix proofs

* going off the deep-end

* cleaning up

* much better

* getting there

* no new congr lemma

* oops

* ...

* to_additive

* removing bad simp lemmas again...

* fix proof

* fix'

* oops

* feat(data/monoid_algebra): some lemmas about group rings

* Update src/algebra/ring.lean

* remove unnecessary arguments, thanks linter

* err.. marking simp again, because I can't remember what goes wrong and need CI to compile for me

* handing it back to CI for another try

* fix prod_ite as well

* cast_ite

* gross fix for quadratic reciprocity argument

* remove simp from add_ite, add comment

* sadness

* slight improvement

* remove redundant lemmas

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>
Co-authored-by: Chris Hughes <chrishughes24@gmail.com>

### [2020-03-31T09:10:23+00:00](https://github.com/leanprover-community/mathlib/commit/17632202cdf9682cea972e86437d32ac20c91b06)
chore(scripts): update nolints.txt

### [2020-03-31T08:35:51+00:00](https://github.com/leanprover-community/mathlib/commit/85affa45c5671f73ec032f31c2dca999d78c3a8f)
refactor(*): migrate more files to bundled `ring_hom`s ([#2286](https://github.com/leanprover-community/mathlib/pull/#2286))

* refactor(*): migrate more files to bundled `ring_hom`s

* Fix lint

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-31T05:47:42+00:00](https://github.com/leanprover-community/mathlib/commit/66f30901d1b065a68c4545455c79aba7fb37a71a)
feat(analysis/analytic): first take on analytic functions ([#2199](https://github.com/leanprover-community/mathlib/pull/#2199))

* analytic: first definitions

* docstrings

* cleanup

* Update src/analysis/analytic/basic.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* comment on polydisk of convergence

* coefficient at 0

* protect sum

* rename with_top.dense_coe

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-31T03:13:56+00:00](https://github.com/leanprover-community/mathlib/commit/20bff2c7006a1a3fe136ad38729841cfee73e344)
chore(scripts): update nolints.txt

### [2020-03-31T02:43:53+00:00](https://github.com/leanprover-community/mathlib/commit/4168aba3be69094b48f899ebd9496c251621b1e5)
refactor(data/fintype): move data/fintype to data/fintype/basic ([#2285](https://github.com/leanprover-community/mathlib/pull/#2285))

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-31T00:17:23+00:00](https://github.com/leanprover-community/mathlib/commit/c5181d11af30c927f9e54a266faec282d5858b6e)
feat(*): more `prod`-related (continuous) linear maps and their derivatives ([#2277](https://github.com/leanprover-community/mathlib/pull/#2277))

* feat(*): more `prod`-related (continuous) linear maps and their derivatives

* Make `R` argument of `continuous_linear_equiv.refl` explicit

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-03-30T20:48:51+00:00](https://github.com/leanprover-community/mathlib/commit/64f835b50f6364392d081ea90768353ca4f38541)
chore(scripts): update nolints.txt

### [2020-03-30T20:13:52+00:00](https://github.com/leanprover-community/mathlib/commit/8a617238907b440fdb6511264bbf287dc1e89d1e)
fix(algebra/punit_instance): punit.smul_eq is marked simp and can be proved by simp ([#2291](https://github.com/leanprover-community/mathlib/pull/#2291))

### [2020-03-30T16:48:08+00:00](https://github.com/leanprover-community/mathlib/commit/3f0e700caf325cd13cd82e349f5b42cb3cb47f5f)
doc(algebra/group/type_tags): add docs ([#2287](https://github.com/leanprover-community/mathlib/pull/#2287))

* doc(algebra/group/type_tags): add docs

* Update src/algebra/group/type_tags.lean

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-03-30T13:16:33+00:00](https://github.com/leanprover-community/mathlib/commit/1331e29b5f596be8fdbd1d5b018a14633d53bbdc)
chore(*): completing most of the -T50000 challenge ([#2281](https://github.com/leanprover-community/mathlib/pull/#2281))

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-30T10:46:51+00:00](https://github.com/leanprover-community/mathlib/commit/37212a78dde15673dde428527c2ddc0f439e938f)
feat(data/fin*): uniqueness of increasing bijection ([#2258](https://github.com/leanprover-community/mathlib/pull/#2258))

* feat(data/fin*): uniqueness of increasing bijection

* protect

* remove tidy call

* Update src/data/finset.lean

Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

* Update src/data/finset.lean

Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

* Update src/data/fintype/card.lean

Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

* Update src/data/fintype/card.lean

Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

* Update src/data/fintype/card.lean

Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

* prove prod_add, and use this to prove sum_pow_mul_eq_add_pow

* forgot to save

* fix build

* remove card_sub_card

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: Chris Hughes <chrishughes24@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-30T08:09:21+00:00](https://github.com/leanprover-community/mathlib/commit/cd38923e03d202115d9970a464c063f6504ab2b5)
docs(algebraic_geometry/prime_spectrum): linkify url in module docs ([#2288](https://github.com/leanprover-community/mathlib/pull/#2288))

### [2020-03-30T06:25:08+00:00](https://github.com/leanprover-community/mathlib/commit/9288d10ee38cf9e0c936a7ae5ca3920d44e28df8)
chore(scripts): update nolints.txt

### [2020-03-30T05:50:58+00:00](https://github.com/leanprover-community/mathlib/commit/51553e36ff9ae93ee4fbfb05a39e5d04c71be565)
chore(data/set/lattice): use dot syntax for `disjoint.*` ([#2282](https://github.com/leanprover-community/mathlib/pull/#2282))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-30T03:22:11+00:00](https://github.com/leanprover-community/mathlib/commit/cf648606449407d1e6a16763438707a44bc0b1ee)
chore(*): remove 'using_well_founded wf_tacs', fixed in core ([#2280](https://github.com/leanprover-community/mathlib/pull/#2280))

Co-authored-by: Scott Morrison <scott.morrison@anu.edu.au>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-30T00:45:51+00:00](https://github.com/leanprover-community/mathlib/commit/8c1e32f35721f79788e6d56a79e23d8c83435820)
chore(scripts): update nolints.txt

### [2020-03-30T00:11:57+00:00](https://github.com/leanprover-community/mathlib/commit/7dad872f79a6621280c5b1d7ff7ee75a8808b645)
feat(ci): try fetching olean caches from older commits ([#2278](https://github.com/leanprover-community/mathlib/pull/#2278))

* feat(ci): try fetching older branch oleans

* docstring edits for set_theory.surreal

* debug

* debug 2

* formatting

* try fetching

* just increase depth

* improve script, improve surreal docstrings

* env context

* quieter curl

* fix overwriting

* git clean

* ci test: delete surreal.lean

* fix env var GIT_HISTORY_DEPTH

* add back surreal

* reviewer comments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-29T21:31:54+00:00](https://github.com/leanprover-community/mathlib/commit/c14c84e42fc701d2dea551c6bfe927571c3f5b71)
chore(topology/algebra/ordered): `le_of_tendsto`: use `∀ᶠ`, add primed versions ([#2270](https://github.com/leanprover-community/mathlib/pull/#2270))

Also fix two typos in `order/filter/basic`

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-29T19:03:26+00:00](https://github.com/leanprover-community/mathlib/commit/8b679d989a152fac669d3889021b7112f3515d8d)
fix(tactic/squeeze): make suggestion at correct location ([#2279](https://github.com/leanprover-community/mathlib/pull/#2279))

Fixes [#2267](https://github.com/leanprover-community/mathlib/pull/#2267).

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-29T16:22:44+00:00](https://github.com/leanprover-community/mathlib/commit/38544f14662d9d1fd97bd1fb132213c546292025)
feat(tactic/core): basic interaction monad functions ([#1658](https://github.com/leanprover-community/mathlib/pull/#1658))

* feat(tactic/core): basic interaction monad functions

* review

* remove get_result

* update comments

* whitespace

* american spelling

Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-29T13:46:46+00:00](https://github.com/leanprover-community/mathlib/commit/c4fb4035df1ddd76ba0fcfa685eee1b078a7da56)
fix(tactic/core): remove all_goals option from apply_any ([#2275](https://github.com/leanprover-community/mathlib/pull/#2275))

* fix(tactic/core): remove all_goals option from any_apply

* remove unnecessary imports

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-29T11:19:27+00:00](https://github.com/leanprover-community/mathlib/commit/da8b23f907f750528539bffa604875b98717fb93)
chore(data/opposite): two trivial lemmas ([#2274](https://github.com/leanprover-community/mathlib/pull/#2274))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-29T08:42:21+00:00](https://github.com/leanprover-community/mathlib/commit/79880e86ee3f30bb162055a98a63f9b1e8370334)
chore(data/fintype/intervals): `simp` `Ico_*_card` lemmas ([#2271](https://github.com/leanprover-community/mathlib/pull/#2271))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-29T05:46:53+00:00](https://github.com/leanprover-community/mathlib/commit/5d9e7f58125137e0fb792ad3295e6abd1c7567a5)
feat(analysis/calculus/fderiv): define `has_strict_fderiv_at` ([#2249](https://github.com/leanprover-community/mathlib/pull/#2249))

* Move code aroud

* general constructions (product, chain rule) before arithmetic;
* bundled `E →L[𝕜] F` maps before unbundled

* Use `maps_to` instead of `f '' _ ⊆ _`

* feat(analysis/calculus/fderiv): define `has_strict_fderiv_at`

Prove strict differentiability of all functions found in this file, cleanup.

* Update src/analysis/calculus/fderiv.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Docs, var name

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-29T03:24:03+00:00](https://github.com/leanprover-community/mathlib/commit/de8c20782dca3faad67ce6d89bf0de82ad11544b)
chore(scripts): update nolints.txt

### [2020-03-29T02:52:21+00:00](https://github.com/leanprover-community/mathlib/commit/8454c1086d6b9290089f555ab75dfc72ee5308e2)
doc(ring_theory/noetherian): add docstring, normalise notation ([#2219](https://github.com/leanprover-community/mathlib/pull/#2219))

* change notation; add module docstring

* adding reference to A-M

* Update src/ring_theory/noetherian.lean

Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

* Apply suggestions from code review

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-29T00:11:06+00:00](https://github.com/leanprover-community/mathlib/commit/ecdb13831d4671eb304c41e78adb5b280c2fc365)
feat(category/equiv_functor): type-level functoriality w.r.t. equiv ([#2255](https://github.com/leanprover-community/mathlib/pull/#2255))

* feat(data/equiv/functor): bifunctor.map_equiv

* start

* sketch of equiv_functor

* update

* removing unimpressive inhabited example; easier later

* omit

* revert unnecessary change

* fix doc-string

* fix names

* finish fix

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-28T21:19:19+00:00](https://github.com/leanprover-community/mathlib/commit/d500210b7bcb44944fafc802159acd1a4bda4652)
feat(algebra/big_operators): missing lemmas ([#2259](https://github.com/leanprover-community/mathlib/pull/#2259))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-28T18:32:12+00:00](https://github.com/leanprover-community/mathlib/commit/ad53e0b7d90aa6a3a8fbcab9f9bb2af769f82b19)
feat(tactic/solve_by_elim): add accept parameter to prune tree search ([#2245](https://github.com/leanprover-community/mathlib/pull/#2245))

* chore(tactic/solve_by_elim): cleanup

* cleanup

* what happened to my commit?

* fix

* fix

* fixed?

* Tweak comments

* feat(tactic/solve_by_elim): add accept parameter to prune tree search

* when called with empty lemmas, use the same default set as the interactive tactic

* stop cheating with [] ~ none

* indenting

* various

* various

* docstring

* fix docstrings

* more docs

* docs

* fix doc-strings

* improve documentation of accept, and add doc-string

* improve docs

* try again with documentation

* clarify when accept runs

* Update src/tactic/solve_by_elim.lean

Co-Authored-By: Rob Lewis <Rob.y.lewis@gmail.com>

* Update src/tactic/solve_by_elim.lean

* Update src/tactic/solve_by_elim.lean

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-28T17:37:54+00:00](https://github.com/leanprover-community/mathlib/commit/0187cb57bd6449bc05d7a0303f16d276cc361b0a)
fix(scripts/deploy_docs.sh): cd before git log ([#2264](https://github.com/leanprover-community/mathlib/pull/#2264))

* fix(scripts/deploy_docs.sh): cd before git log

* Update scripts/deploy_docs.sh

### [2020-03-28T12:46:28+00:00](https://github.com/leanprover-community/mathlib/commit/17f8340912468f49bdc30acdb9a9fa02eeb0473a)
chore(data/equiv/basic): simp to_fun to coe ([#2256](https://github.com/leanprover-community/mathlib/pull/#2256))

* chore(data/equiv/basic): simp to_fun to coe

* fix proofs

* Update src/data/equiv/basic.lean

* fix proof

* partially removing to_fun

* finish switching to coercions

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-28T06:05:30+00:00](https://github.com/leanprover-community/mathlib/commit/d470ae77751769a8749e4697fa86ef8087dc3a77)
fix(tactic/squeeze): do not fail when closing the goal ([#2262](https://github.com/leanprover-community/mathlib/pull/#2262))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-28T03:34:11+00:00](https://github.com/leanprover-community/mathlib/commit/6732788115c44384554e08745825de1dda88f987)
feat(analysis/normed_space/operator_norm): a few more estimates ([#2233](https://github.com/leanprover-community/mathlib/pull/#2233))

* feat(*): a few more theorems about `unique` and `subsingleton`

* Fix compile, fix two non-terminate `simp`s

* Update src/topology/metric_space/antilipschitz.lean

This lemma will go to another PR

* feat(analysis/normed_space/operator_norm): a few more estimates

* `le_op_norm_of_le` : `∥x∥ ≤ c → ∥f x∥ ≤ ∥f∥ * c`;
* `norm_id` → `norm_id_le`, new `norm_id` assumes `∃ x : E, x ≠ 0`
* estimates on the norm of `e : E ≃L[𝕜] F`` and `e.symm`.

* rename `(anti)lipschitz_with.to_inverse` to `to_right_inverse`

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-28T02:36:23+00:00](https://github.com/leanprover-community/mathlib/commit/1b13ccdf56479b879d45037af9a89f6d93ada4db)
chore(scripts/deploy_docs.sh): skip gen_docs if already built ([#2263](https://github.com/leanprover-community/mathlib/pull/#2263))

* chore(scripts/deploy_docs.sh): skip gen_docs if already built

* Update scripts/deploy_docs.sh

### [2020-03-28T00:46:23+00:00](https://github.com/leanprover-community/mathlib/commit/211c5d110f1c4c1aa00eb3459e42b775e95970cf)
chore(data/int/basic): change instance order ([#2257](https://github.com/leanprover-community/mathlib/pull/#2257))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-27T22:08:58+00:00](https://github.com/leanprover-community/mathlib/commit/3c0b35c499aaf8aadd9d451aaa033a7b213b9fb0)
chore(scripts): update nolints.txt

### [2020-03-27T21:37:51+00:00](https://github.com/leanprover-community/mathlib/commit/d0a8507382a0727f2a07a7d34a86840a3ca7d424)
feat(algebra/ring): generalize mul_ite ([#2223](https://github.com/leanprover-community/mathlib/pull/#2223))

* feat(algebra/ring): generalize mul_ite

* fix proofs

* going off the deep-end

* cleaning up

* much better

* getting there

* no new congr lemma

* oops

* ...

* to_additive

* removing bad simp lemmas again...

* fix proof

* fix'

* oops

* Update src/algebra/ring.lean

* err.. marking simp again, because I can't remember what goes wrong and need CI to compile for me

* handing it back to CI for another try

* fix prod_ite as well

* cast_ite

* gross fix for quadratic reciprocity argument

* remove simp from add_ite, add comment

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-27T18:48:08+00:00](https://github.com/leanprover-community/mathlib/commit/786c737586da1e9f06e18348bfdf383a0faa14eb)
feat(logic/basic): trivial transport lemmas ([#2254](https://github.com/leanprover-community/mathlib/pull/#2254))

* feat(logic/basic): trivial transport lemmas

* oops

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-27T16:08:17+00:00](https://github.com/leanprover-community/mathlib/commit/451de279c947af8ed1f286bdeaae14eb5f973b69)
chore(tactic/lint): typo ([#2253](https://github.com/leanprover-community/mathlib/pull/#2253))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-27T13:19:03+00:00](https://github.com/leanprover-community/mathlib/commit/21ad1d3ac95936a9b747c8693e0f3c5b3fafe526)
chore(tactic/*): update tags ([#2224](https://github.com/leanprover-community/mathlib/pull/#2224))

* add missing tactic tags

* add missing command tags

* add missing hole command tags

* add missing attribute tags

* combine tags 'type class' and 'type classes'

* combine tags 'logical manipulation' and 'logic'

* attribute additions and changes

* more tag updates

* hypothesis management -> context management

* remove 'simplification', add more tags

* classical reasoning -> classical logic

* substitution -> rewrite

* normalization -> simplification

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-27T12:12:17+00:00](https://github.com/leanprover-community/mathlib/commit/d3cbd4d0a9357d7c077e5ca0d548cdfc7ceb17db)
chore(ci): update nolints before docs and leanchecker ([#2250](https://github.com/leanprover-community/mathlib/pull/#2250))

* Update build.yml

* run lint+tests if build step succeeds (see [#2250](https://github.com/leanprover-community/mathlib/pull/#2250)) ([#2252](https://github.com/leanprover-community/mathlib/pull/#2252))

* run lint+tests if build succeeds

* move lint (and nolints.txt) before tests

* Apply suggestions from code review

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-26T16:57:24-04:00](https://github.com/leanprover-community/mathlib/commit/de39b9a8491326995a54cce96d90483e4fb7ba89)
chore(.mergify.yml): cleanup ([#2248](https://github.com/leanprover-community/mathlib/pull/#2248))

remove [skip-ci] and pr bits that no longer apply.

### [2020-03-26T20:55:31+00:00](https://github.com/leanprover-community/mathlib/commit/2fbf0070dc135a983173409ede677405d83a88ec)
doc(docs/install/project.md): mention that projects are git repositories ([#2244](https://github.com/leanprover-community/mathlib/pull/#2244))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-26T20:00:59+00:00](https://github.com/leanprover-community/mathlib/commit/75b4ee86939a30fd12364dba65b40ac4d2659686)
feat(data/equiv/local_equiv): construct from `bij_on` or `inj_on` ([#2232](https://github.com/leanprover-community/mathlib/pull/#2232))

* feat(data/equiv/local_equiv): construct from `bij_on` or `inj_on`

Also fix usage of `nonempty` vs `inhabited` in `set/function`. Linter
didn't catch these bugs because the types use the `.to_nonempty`
projection of the `[inhabited]` arguments.

* Add `simps`/`simp` attrs

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-26T17:30:38+00:00](https://github.com/leanprover-community/mathlib/commit/8943351e5aecd9e19b3e17fef1acc0902f14910e)
feat(topology/algebra/module): define `fst` and `snd`, review ([#2247](https://github.com/leanprover-community/mathlib/pull/#2247))

* feat(topology/algebra/module): define `fst` and `snd`, review

* Fix compile

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-26T14:41:41+00:00](https://github.com/leanprover-community/mathlib/commit/5b443634fc1f53ce057c5660688c67bcc9e09142)
chore(scripts): update nolints.txt

### [2020-03-26T13:38:06+00:00](https://github.com/leanprover-community/mathlib/commit/0fc4e6a8e19449312d943d5376df9d4e55e9d022)
refactor(data/set/function): move `function.restrict` to `set`, redefine ([#2243](https://github.com/leanprover-community/mathlib/pull/#2243))

* refactor(data/set/function): move `function.restrict` to `set`, redefine

We had `subtype.restrict` and `function.restrict` both defined in the
same way using `subtype.val`. This PR moves `function.restrict` to
`set.restrict` and makes it use `coe` instead of `subtype.val`.

* Fix compile

* Update src/data/set/function.lean

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-26T11:00:48+00:00](https://github.com/leanprover-community/mathlib/commit/fa36a8ef6cd8ae0630dd5d8b425b756de30416f4)
chore(scripts): update nolints.txt

### [2020-03-26T10:05:36+00:00](https://github.com/leanprover-community/mathlib/commit/ea10e1737579bca3da8f19baa9507e62153bf98d)
feat(data/equiv/functor): bifunctor.map_equiv ([#2241](https://github.com/leanprover-community/mathlib/pull/#2241))

* feat(data/equiv/functor): bifunctor.map_equiv

* add documentation, and make the function an explicit argument

* Update src/data/equiv/functor.lean

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-26T07:48:43+00:00](https://github.com/leanprover-community/mathlib/commit/ab33237d3d932e18b1256e1cadaa677c77b49a8d)
chore(scripts): update nolints.txt

### [2020-03-26T06:56:37+00:00](https://github.com/leanprover-community/mathlib/commit/dbc4284c94ffa92b965b1a271e4add8a06f69e56)
feat(tactic/squeeze): improve suggestion of `cases x; squeeze_simp` ([#2218](https://github.com/leanprover-community/mathlib/pull/#2218))

* feat(tactic/squeeze): improve produced argument list and format

* feat(tactic/squeeze): combine suggestions of repeated executions

* add documentation

* remove dead code

* suggestion from reviewers

* Apply suggestions from code review

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* Update squeeze.lean

* Apply suggestions from code review

Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

* simplify and remove comparison of proof terms

* simplify goal comparison data structure

* add documentation and fix meta-variable handling

* add example

* fix tests

* move tests

* use binders with trivial names to abstract meta variables

Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-26T04:20:05+00:00](https://github.com/leanprover-community/mathlib/commit/30146a027b6f3e207f95571c0802d647f613b38a)
chore(tactic/solve_by_elim): refactor ([#2222](https://github.com/leanprover-community/mathlib/pull/#2222))

* chore(tactic/solve_by_elim): cleanup

* cleanup

* what happened to my commit?

* fix

* fix

* fixed?

* Tweak comments

* when called with empty lemmas, use the same default set as the interactive tactic

* stop cheating with [] ~ none

* indenting

* docstring

* fix docstrings

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-26T01:26:44+00:00](https://github.com/leanprover-community/mathlib/commit/2755eaeae2b332efafc7b2fa293bad36a4087213)
chore(ci): only run on push ([#2237](https://github.com/leanprover-community/mathlib/pull/#2237))

* chore(ci): only run on push

* update contribution docs

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-26T00:32:53+00:00](https://github.com/leanprover-community/mathlib/commit/6e6c81a48c4fe85514dc3a82840b4a6c88dfaaca)
feat(algebra/homology): chain complexes ([#2174](https://github.com/leanprover-community/mathlib/pull/#2174))

* thoughts on chain complexes

* minor

* feat(category_theory): split epis and monos, and a result about (co)projections

* total functor faithful

* homology!

* remove lint

* something something homology

* comment out broken stuff

* adding comments

* various

* rewrite

* fixes

* Update src/category_theory/epi_mono.lean

* Update src/category_theory/epi_mono.lean

* Update src/category_theory/epi_mono.lean

* better use of ext

* feat(category_theory): subsingleton (has_zero_morphisms)

* revert some independent changes moved to [#2180](https://github.com/leanprover-community/mathlib/pull/#2180)

* revert some independent changes moved to [#2181](https://github.com/leanprover-community/mathlib/pull/#2181)

* revert independent changes moved to [#2182](https://github.com/leanprover-community/mathlib/pull/#2182)

* fix

* Apply suggestions from code review

Co-Authored-By: Johan Commelin <johan@commelin.net>

* changes from review

* module docs

* various

* Update src/category_theory/shift.lean

Co-Authored-By: Kevin Buzzard <k.buzzard@imperial.ac.uk>

* various

* various fixes

* fix

* all the minor suggestions

Co-Authored-By: Markus Himmel <markus@himmel-villmar.de>

* ugh... fix reverting stuff from [#2180](https://github.com/leanprover-community/mathlib/pull/#2180)

* off by one

* various

* use abbreviation

* chain as well as cochain

* satisfy the linter

* some simp lemmas

* simp lemmas

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>
Co-authored-by: Markus Himmel <markus@himmel-villmar.de>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-25T21:56:35+00:00](https://github.com/leanprover-community/mathlib/commit/e04892ec571349bb3b2ef2946e312abf50be7ab1)
feat(topology/metric_space/isometry): add_left/right, neg ([#2234](https://github.com/leanprover-community/mathlib/pull/#2234))

Also add some lemmas from `equiv` namespace to `isometric`.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-25T19:18:04+00:00](https://github.com/leanprover-community/mathlib/commit/bb01537b2e63702967d6953ebca5bab72d689c00)
feat(topology/local_homeomorph): a few facts about `local_homeomorph` ([#2231](https://github.com/leanprover-community/mathlib/pull/#2231))

* `eventually_inv_right`, `eventually_inv_left`
* `is_O_congr`, `is_o_congr`

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-25T16:34:50+00:00](https://github.com/leanprover-community/mathlib/commit/05aa9556ec5bbb304126946611a5b13f98f4a3d0)
chore(scripts): update nolints.txt

### [2020-03-25T15:44:21+00:00](https://github.com/leanprover-community/mathlib/commit/bedb810b29a40c45343b074205f4dc8146d5594e)
feat(*): a few more theorems about `unique` and `subsingleton` ([#2230](https://github.com/leanprover-community/mathlib/pull/#2230))

* feat(*): a few more theorems about `unique` and `subsingleton`

* Fix compile, fix two non-terminate `simp`s

* Update src/topology/metric_space/antilipschitz.lean

This lemma will go to another PR

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-25T13:11:33+00:00](https://github.com/leanprover-community/mathlib/commit/1eae0be1aef939154f17882b20025c1a17c12061)
feat(data/equiv): pi_congr ([#2204](https://github.com/leanprover-community/mathlib/pull/#2204))

* feat(data/equiv): pi_congr

* docstrings

* change case for consistency

* tidying up

* switching names

* fixes

* Update src/data/equiv/basic.lean

* implicit arguments

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-25T10:30:42+00:00](https://github.com/leanprover-community/mathlib/commit/83014bf7808efe8b4916286603f7f2d3acec4edf)
chore(README): add Bryan; alphabetize ([#2238](https://github.com/leanprover-community/mathlib/pull/#2238))

### [2020-03-25T03:10:56+00:00](https://github.com/leanprover-community/mathlib/commit/d9083bcb5f23b4fb70f6a54986f0d9fbac89760e)
chore(algebra/ordered_field): merge `inv_pos` / `zero_lt_inv` with `inv_pos'` / `inv_neg` ([#2226](https://github.com/leanprover-community/mathlib/pull/#2226))

* chore(algebra/ordered_field): merge `inv_pos` / `zero_lt_inv` with `inv_pos'` / `inv_neg`

Also move some lemmas to `linear_ordered_field`

* Update src/data/real/hyperreal.lean

* Fix compile

* Actually fix compile of `data/real/hyperreal`

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-25T00:53:41+00:00](https://github.com/leanprover-community/mathlib/commit/24b82c91583843597e8cfeb7928d446dec776456)
feat(tactic/core): trace_if_enabled ([#2209](https://github.com/leanprover-community/mathlib/pull/#2209))

* feat(tactic/core): trace_for

* typo

* oops

* oops

* rename to trace_if_enabled

* trace_state_if_enabled

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-24T22:07:53+00:00](https://github.com/leanprover-community/mathlib/commit/efdc8504899687ad6f0de25948affc7d30576ff5)
feat(tactic/conv/apply_congr): using congruence lemmas inside conv ([#2221](https://github.com/leanprover-community/mathlib/pull/#2221))

* Update interactive.lean

Added Keeley Hoeks Zoom tactic.

* Add files via upload

Added operand.lean file to the tactic folder.

* Add files via upload

Added the test files for zoom and operand.

* Rename operand_test.lean to operand.lean

* Update and rename zoom_test.lean to zoom.lean

Fixed the imports

* Update operand.lean

* Update tactics.md

* Update operand.lean

Fixed the lamda problem.

* Update operand.lean

Added tests without lamdas

* Update operand.lean

Added header

* Update operand.lean

Added header

* Update operand.lean

deleted zoom

* Update zoom.lean

Added comment to self

* Update operand.lean

Added doc_string to operand

* Update interactive.lean

Added doc_string to zoom

* Update tactics.md

Fixed colon and brackets in operand doc

* Update operand.lean

Fixed colon placements and brackets

* merge

* feat(tactic/converter/apply_congr): apply congruence lemmas in conv

* last example

* fix docs

* Apply suggestions from code review

Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

* remove docs from tactics.md

* merge doc comment fragments

* import in tactic.basic

* docs

* add to conv doc tactic

Co-authored-by: u6338192 <51683915+u6338192@users.noreply.github.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-24T18:51:00+00:00](https://github.com/leanprover-community/mathlib/commit/5437b10a9bee066c83255aa1810e5b85bdfea8cc)
feat(tactic/show_term): show_term { t } prints the term constructed by t ([#2227](https://github.com/leanprover-community/mathlib/pull/#2227))

* feat(tactic): show_term { t } prints the term constructed by t

* add to tactic.basic

* move tests

* silencing

* Update src/tactic/show_term.lean

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* clean up

* remove tests

* Update src/tactic/show_term.lean

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-24T16:01:34+00:00](https://github.com/leanprover-community/mathlib/commit/5f376b26aa5207aa43cf40c0c277b382a798e078)
feat(data/equiv): sigma_congr ([#2205](https://github.com/leanprover-community/mathlib/pull/#2205))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-24T12:31:39+00:00](https://github.com/leanprover-community/mathlib/commit/bb6e1d4f8010171dc972418c7c284a59921b8e36)
chore(README,docs/*): replace tactic doc files with links to mathlib docs ([#2225](https://github.com/leanprover-community/mathlib/pull/#2225))

* chore(README,doc/*): replace tactic doc files with links to mathlib docs

Other cleanup:
- replaced leanprover/lean and leanprover/mathlib with
  leanprover-community/lean and leanprover-community/mathlib
- updated pull request template and instructions for contributors with
  info about tactic doc entries
- formatting / style for simp.md and tactic_writing.md
- fixed broken link in category_theory.category.default

* reword contributor suggestion for tactic tests

* reviewer comments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-24T09:46:52+00:00](https://github.com/leanprover-community/mathlib/commit/b50443020d5303797357d82f121810a9917e269b)
feat(linear_algebra): add range_le_ker_iff ([#2229](https://github.com/leanprover-community/mathlib/pull/#2229))

### [2020-03-23T18:23:19+00:00](https://github.com/leanprover-community/mathlib/commit/6a7e55e45d42a29004bd393fb73fa572fd7a914e)
chore(scripts): update nolints.txt

### [2020-03-23T17:30:32+00:00](https://github.com/leanprover-community/mathlib/commit/9a9794d7dffc5e72440284e0529fb8643bb46bf9)
doc(data/int/gcd): attribution + module doc ([#2217](https://github.com/leanprover-community/mathlib/pull/#2217))

* doc(data/int/gcd): attribution + module doc

* reword

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-23T14:57:34+00:00](https://github.com/leanprover-community/mathlib/commit/9832fba50df70a6fd637aa1843eb1a45dd07f4bd)
refactor(topology/metric_space/contracting): redefine using emetric ([#2070](https://github.com/leanprover-community/mathlib/pull/#2070))

* refactor(topology/metric_space/contracting): redefine using emetric

* Fix a typo produced by "copy+paste"

* Fix compile

* Refactor `efixed_point`, `efixed_point'`

* Prove a version of Banach fixed point theorem for a map contracting
  on a complete forward-invariant set.

* Separately prove "primed" lemmas.

I Tried to define `efixed_point'` in terms of `efixed_point` and
failed: every time I use it, it generates a goal `complete_space ↥s`.
So, I decided to deduce `exists_fixed_point'` from
`exists_fixed_point`, then use it in the proofs.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-23T12:25:53+00:00](https://github.com/leanprover-community/mathlib/commit/25df50e63d82975077999151210038cc39db2854)
chore(scripts): update nolints.txt

### [2020-03-23T11:21:48+00:00](https://github.com/leanprover-community/mathlib/commit/5b2c9521b0281ee6e2cd52b9d10d0a38afb5b750)
feat(analysis/convex.cone): prove M. Riesz extension theorem, Hahn-Banach theorem ([#2120](https://github.com/leanprover-community/mathlib/pull/#2120))

* feat(analysis/convex.cone): prove M. Riesz extension theorem

WIP

* Complete the proof

TODO: move many facts to `linear_algebra/basic`,
fix possible build failures in other files

* Fix compile of `analysis/convex/cone`

* Cleanup, rewrite using `linear_pmap`s

* Deduce Hahn-Banach theorem from M. Riesz extension theorem

* Fix lint

* Apply suggestions from code review [skip_ci]

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Expand comments, prove properties of `convex.to_cone`.

* Docstrings

* Apply suggestions from code review

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Update src/analysis/convex/cone.lean

* Update src/linear_algebra/basic.lean

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-23T04:27:27+00:00](https://github.com/leanprover-community/mathlib/commit/d3d78a98b48c6bd9e5e4b2f4e6c0db9b3039740a)
chore(ring_theory/algebra): generalize restrict_scalars to noncommutative algebras ([#2216](https://github.com/leanprover-community/mathlib/pull/#2216))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-23T01:53:56+00:00](https://github.com/leanprover-community/mathlib/commit/fe40a15a2ded457859467ae0b58585c3ea2df357)
chore(scripts): update nolints.txt

### [2020-03-23T01:05:38+00:00](https://github.com/leanprover-community/mathlib/commit/6aa5572e2dcd02e0e5380aa86de34670da41a234)
feat(algebra/module): `f : E →+ F` is `ℚ`-linear ([#2215](https://github.com/leanprover-community/mathlib/pull/#2215))

* feat(algebra/module): `f : E →+ F` is `ℚ`-linear

Also cleanup similar lemmas about `ℕ` and `ℤ`.

* Fix a typo

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-22T22:10:26+00:00](https://github.com/leanprover-community/mathlib/commit/b9ee94d850ec20d8f31941e3bc33308a71b84385)
chore(scripts): update nolints.txt

### [2020-03-22T21:15:30+00:00](https://github.com/leanprover-community/mathlib/commit/7f103fd36f5b0533d9a0bf67cdfbd0d52a836997)
fix(tactic/transport): make `to_additive` copy `protected`status ([#2212](https://github.com/leanprover-community/mathlib/pull/#2212))

* fix(tactic/transport): make `to_additive` copy `protected`status

Fixes [#2210](https://github.com/leanprover-community/mathlib/pull/#2210), also slightly cleanup `algebra/group/units`

* Fix compile (protected `finset.sum`)

* Fix usage of `finset.sum`

* Update src/tactic/transport.lean

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* fix build

Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-22T17:01:05+00:00](https://github.com/leanprover-community/mathlib/commit/6febc8c09580419fe71cd411f450f78386f05ecd)
feat(tactic/doc_commands): allow doc strings on add_tactic_doc ([#2201](https://github.com/leanprover-community/mathlib/pull/#2201))

* feat(tactic/doc_commands): allow doc strings on add_tactic_doc

* Add link to Lean issue.

* Update src/tactic/doc_commands.lean

Co-Authored-By: Rob Lewis <Rob.y.lewis@gmail.com>

* Change all `description :=` to docstrings.

* Change suggested by Bryan.

* Use docstrings in library_note

* Factor out `tactic.eval_pexpr`.

* Add add_decl_doc command.

* Update docs/contribute/doc.md

* Update src/tactic/doc_commands.lean

* Update src/tactic/doc_commands.lean

Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-03-22T13:55:54+00:00](https://github.com/leanprover-community/mathlib/commit/4e46b306303b4e574bcbc39cf4dc8305bfeb0f03)
chore(scripts): update nolints.txt

### [2020-03-22T13:06:37+00:00](https://github.com/leanprover-community/mathlib/commit/7d02c2318f5fb0310292a3f5ba2c64871048c880)
chore(linear_algebra/*): rename copair, pair to coprod, prod ([#2213](https://github.com/leanprover-community/mathlib/pull/#2213))

* chore(linear_algebra/*): rename copair, pair to coprod, prod

* add back mistakenly deleted lemma

* fix sensitivity, change comments to module docs

* docstrings, linting

* Update archive/sensitivity.lean

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-22T08:44:10+00:00](https://github.com/leanprover-community/mathlib/commit/3a7149955412cf9a5b06f8319794c3cc4a9c4a4f)
feat(ring_theory/algebra) : generalize `rat.algebra_rat` to `division_ring` ([#2208](https://github.com/leanprover-community/mathlib/pull/#2208))

Other changes:

* add lemmas about field inverse to `algebra/semiconj` and `algebra/commute`;

* drop `rat.cast`, define `instance : has_coe` right away to avoid
  accidental use of `rat.cast` in theorems;

* define `rat.cast_hom` instead of `is_ring_hom rat.cast`;

* generalize some theorems about from `field` to `division_ring`.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-22T04:38:42+00:00](https://github.com/leanprover-community/mathlib/commit/9485a857c30198ceadef4774f78915ef1b72103e)
fix(linear_algebra/basic): make R explicit in linear_equiv.refl ([#2161](https://github.com/leanprover-community/mathlib/pull/#2161))

* fix(linear_algebra/basic): make R explicit in linear_equiv.refl

* getting mathlib to compile again

* better variablism

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-22T02:00:48+00:00](https://github.com/leanprover-community/mathlib/commit/19de4162df73b159ec6f55aa0cd9e5a320ccdf46)
doc(ring_theory/adjoin_root): add docstring ([#2211](https://github.com/leanprover-community/mathlib/pull/#2211))

* docstring for adjoin_root

* adding some quotes

### [2020-03-21T14:18:51-07:00](https://github.com/leanprover-community/mathlib/commit/09401b7f1e1e96914abf5876ce7d958ab3354370)
revert accidental push to master

### [2020-03-21T14:00:51-07:00](https://github.com/leanprover-community/mathlib/commit/3375126ca39ceba4cfc83f640f9765cb82a27ba8)
feat(tactic/core): trace_for

### [2020-03-21T19:24:58+00:00](https://github.com/leanprover-community/mathlib/commit/af0cf30e28190a7122e5910ba66308fc448e2bc3)
chore(scripts): update nolints.txt

### [2020-03-21T18:41:30+00:00](https://github.com/leanprover-community/mathlib/commit/0bd8b94df240e593500a38d6c74b92fe73ab66b0)
refactor(scripts/mk_nolint): produce nolints.txt file during linting ([#2194](https://github.com/leanprover-community/mathlib/pull/#2194))

* Factor out code to determine automatically-generated declarations.

* Mark bool.decidable_eq and decidable.to_bool as [inline]

* Execute linters in parallel.

* Add lint_mathlib.lean script.

* Switch CI to new lint_mathlib.lean script.

* Make linter fail.

* Revert "Make linter fail."

This reverts commit 8b509c5815d862d0d060eac407cf6d22d743f960.

* Remove one line from nolints.txt

* Change shebang in rm_all.sh to be nixos-compatible

* Disable parallel checking.

* Make linter fail.

* Revert "Make linter fail."

This reverts commit 8f5ec62030ecaec93d01981b273c2a737d67eddf.

* Move is_auto_decl to meta/expr.lean

* Remove list.mmap_async

* Factor out name.from_string

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-21T10:35:34+00:00](https://github.com/leanprover-community/mathlib/commit/dd85db0cc7b5d0849f6f75535e109fa3d6f7ac56)
doc(docs/contribute/index.md): remove obsolete recommendation to use lean-3.7.2 branch ([#2206](https://github.com/leanprover-community/mathlib/pull/#2206))

### [2020-03-21T08:46:38+00:00](https://github.com/leanprover-community/mathlib/commit/bc84a2057c78563e4afdacfd5181c774589252ea)
chore(leanpkg.toml): Lean 3.7.2c ([#2203](https://github.com/leanprover-community/mathlib/pull/#2203))

* chore(leanpkg.toml): Lean 3.7.2c

Lean 3.7.1c had a bug that prevented Lean on windows from importing oleans properly (see https://github.com/leanprover-community/lean/pull/155). This is fixed in Lean 3.7.2c.

* update contribute/index.md

### [2020-03-21T02:10:50+00:00](https://github.com/leanprover-community/mathlib/commit/34bac8d3688807417caaac4a794241ccbbcc95c0)
feat(category_theory): add naturality_assoc simp lemma ([#2200](https://github.com/leanprover-community/mathlib/pull/#2200))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-20T23:38:07+00:00](https://github.com/leanprover-community/mathlib/commit/99ba8f448504a66ed2440145131929597070fe02)
chore(category_theory): change monoidal_of_has_finite_products to use binary products ([#2190](https://github.com/leanprover-community/mathlib/pull/#2190))

* chore(category_theory): change monoidal_of_has_finite_products to use binary products

* remove some simp annotations for now

* fixes

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-20T21:22:50+00:00](https://github.com/leanprover-community/mathlib/commit/942016773ae7b5e919757e4787996c055649c042)
feat(category_theory): unbundled functors and lax monoidal functors ([#2193](https://github.com/leanprover-community/mathlib/pull/#2193))

* feat(category_theory): unbundled functors and lax monoidal functors

* doc string

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-20T18:53:45+00:00](https://github.com/leanprover-community/mathlib/commit/b224943d8006458d69aa3d27acf24521e208404c)
chore(scripts): update nolints.txt

### [2020-03-20T17:26:39+00:00](https://github.com/leanprover-community/mathlib/commit/8d44098db351fc50028c3980fe563096193a2b16)
feat(finsupp): move convolution product to type wrapper `add_monoid_algebra`. ([#2135](https://github.com/leanprover-community/mathlib/pull/#2135))

* pulling out convolution product

* various

* chore(ring_theory/polynomial): refactor proof of is_noetherian_ring_fin

* not there yet

* feat(ring_theory/polynomial): refactor of is_integral_domain_fin

* fix

* ..

* refactor

* fix

* yay

* cleanup

* satisfying the linter

* linter

* improving documentation

* add distrib instance for pointwise multiplication

* move files per Johan's suggestion

* fix import

* Update src/data/polynomial.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* type annotation

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-20T15:01:46+00:00](https://github.com/leanprover-community/mathlib/commit/0f1b46548ea8ed07f6c1546648613131db3fb60e)
feat(category_theory/limits): the isomorphism expressing preservation of chosen limits ([#2192](https://github.com/leanprover-community/mathlib/pull/#2192))

* feat(category_theory/limits): the isomorphism expressing preservation of chosen limits

* Update src/category_theory/limits/limits.lean

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-20T12:24:26+00:00](https://github.com/leanprover-community/mathlib/commit/c66c4afaeabbb86114ba81cc27a38849f5988b99)
chore(algebra/Module/monoidal): add the simp lemmas for unitors and associativity ([#2196](https://github.com/leanprover-community/mathlib/pull/#2196))

* feat(algebra/category/Module/monoidal): simp lemmas

* oops

* depressingly easy

* order of arguments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-20T10:05:42+00:00](https://github.com/leanprover-community/mathlib/commit/d93e0ddb7c4f7332f6558bd2850b8ad0073eb189)
chore(category_theory): missing simp lemmas ([#2188](https://github.com/leanprover-community/mathlib/pull/#2188))

* chore(category_theory): missing simp lemmas

* Apply suggestions from code review

Co-Authored-By: Johan Commelin <johan@commelin.net>

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-20T07:32:29+00:00](https://github.com/leanprover-community/mathlib/commit/b4e6313a9732fca1f8a43e93995898fbfe96344f)
feat(category_theory): subsingleton (has_zero_morphisms) ([#2180](https://github.com/leanprover-community/mathlib/pull/#2180))

* feat(category_theory): subsingleton (has_zero_morphisms)

* fix

* Update src/category_theory/limits/shapes/zero.lean

Co-Authored-By: Markus Himmel <markus@himmel-villmar.de>

* Update src/category_theory/limits/shapes/zero.lean

Co-Authored-By: Markus Himmel <markus@himmel-villmar.de>

* non-terminal simp

* add warning message

* Update src/category_theory/discrete_category.lean

Co-Authored-By: Markus Himmel <markus@himmel-villmar.de>

* Apply suggestions from code review

Co-authored-by: Markus Himmel <markus@himmel-villmar.de>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-20T05:08:55+00:00](https://github.com/leanprover-community/mathlib/commit/cc04132589e6400b4c010e12f0d50864e8c24bef)
chore(scripts): update nolints.txt

### [2020-03-20T03:59:59+00:00](https://github.com/leanprover-community/mathlib/commit/6c97ce028b9532ffa795c5e8217f719b8db8bd44)
feat(category_theory): some natural isomorphisms related to composition by functors ([#2189](https://github.com/leanprover-community/mathlib/pull/#2189))

* feat(category_theory): some natural isomorphisms related to composition by functors

* tidy up

* cleanup

* fix

* better design

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-20T01:35:59+00:00](https://github.com/leanprover-community/mathlib/commit/d12bbc009fe677e4608e6973b9dbdefa61f78577)
feat(data/zmod): lemmas about totient and zmod ([#2158](https://github.com/leanprover-community/mathlib/pull/#2158))

* feat(data/zmod): lemmas about totient and zmod

* docstring

* Changes based on Johan's comments

* fix build

* subsingleton (units(zmod 2))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-19T23:15:04+00:00](https://github.com/leanprover-community/mathlib/commit/3dd95a2e9c96078b5bd2af22e5b00958dcf72971)
chore(scripts): update nolints.txt

### [2020-03-19T21:56:33+00:00](https://github.com/leanprover-community/mathlib/commit/1a398a7212f9d81e33436008594727bfb5724053)
docs(category_theory/limits): adding many docstrings ([#2185](https://github.com/leanprover-community/mathlib/pull/#2185))

* lots of comments!

* remove #lint

* Apply suggestions from code review

lots of missing "co"s

Co-Authored-By: Johan Commelin <johan@commelin.net>

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-19T18:52:34+00:00](https://github.com/leanprover-community/mathlib/commit/344a41e801dc3c65b938ca4002bbfafee2d6d10d)
feat(data/finset): monotone bijection from fin k ([#2163](https://github.com/leanprover-community/mathlib/pull/#2163))

* feat(data/finset): increasing bijection between fin k and an ordered finset

* fix build

* fix linter

* make argument explicit

* add equiv for fintype

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-19T16:32:37+00:00](https://github.com/leanprover-community/mathlib/commit/b3ef6859f96f7465b289d41da2a446c92279d8ce)
chore(scripts): update nolints.txt

### [2020-03-19T15:12:14+00:00](https://github.com/leanprover-community/mathlib/commit/9dbc60694d781952ef1ce705a05c059a6d8b2957)
refactor(*): drop `lattice` namespace ([#2166](https://github.com/leanprover-community/mathlib/pull/#2166))

* refactor(*): drop `lattice` namespace

Other changes:

* rename `*neg*` to `*compl*` in `boolean_algebra`.

I didn't touch `sub` in `boolean_algebra`; should it become `sdiff`?

* Fix some compile failures

* Fix the rest of compile failures

Drop `real.Sup` and `real.Inf`, define instances instead.

* fix build

* fix build

* Fix build

Co-authored-by: Chris Hughes <chrishughes24@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-19T10:59:44+00:00](https://github.com/leanprover-community/mathlib/commit/a20f378f15fa116ce1b760cb4209902ddd466bcb)
chore(category_theory/images): fix some minor problems ([#2182](https://github.com/leanprover-community/mathlib/pull/#2182))

* chore(category_theory/images): fix some minor problems

* minor

* oops, misplaced comment

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-19T08:46:53+00:00](https://github.com/leanprover-community/mathlib/commit/4bc32ae4c51178df67dd628053334ad372bc4d9c)
feat(category_theory): regular monos ([#2154](https://github.com/leanprover-community/mathlib/pull/#2154))

* feat(category_theory): regular and normal monos

* fixes

* Apply suggestions from code review

Co-Authored-By: Markus Himmel <markus@himmel-villmar.de>

* shorter proofs

* typos, thanks

Co-Authored-By: Markus Himmel <markus@himmel-villmar.de>

* Update src/category_theory/limits/shapes/regular_mono.lean

Co-Authored-By: Markus Himmel <markus@himmel-villmar.de>

* linting

Co-authored-by: Markus Himmel <markus@himmel-villmar.de>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-19T06:18:29+00:00](https://github.com/leanprover-community/mathlib/commit/445e3320762f302f2e53e0035f1b011008e85af0)
chore(category_theory/isomorphism): use @[simps] ([#2181](https://github.com/leanprover-community/mathlib/pull/#2181))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-19T03:47:29+00:00](https://github.com/leanprover-community/mathlib/commit/e2b0e387b36acc417028dc0e23f9e6b64c54de74)
chore(category_theory/binary_products): tweak spacing in notation ([#2184](https://github.com/leanprover-community/mathlib/pull/#2184))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-19T01:12:44+00:00](https://github.com/leanprover-community/mathlib/commit/034685b9f3e3aba7c9972162d7201ed1473213e0)
chore(scripts): update nolints.txt

### [2020-03-18T23:51:31+00:00](https://github.com/leanprover-community/mathlib/commit/00d9f1def359f4d08bd4a4c270ada12e0f2500e1)
feat(topology/algebra/infinite_sum): dot notation, cauchy sequences ([#2171](https://github.com/leanprover-community/mathlib/pull/#2171))

* more material on infinite sums

* minor fixes

* cleanup

* yury's comments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-18T21:14:22+00:00](https://github.com/leanprover-community/mathlib/commit/e719f8ee3b0de0f02e3e32ff2a196f9703b63083)
chore(*): switch to lean 3.7.1c ([#2106](https://github.com/leanprover-community/mathlib/pull/#2106))

* fix(deprecated/group): remove dangerous instances

* Update Lean version to nightly.

* Remove composition instances for group homomorphisms.

* Remove dangerous is_submonoid instances.

* Flip instance arguments.

* Various Lean 3.7 fixes.

* Correctly use lemma.

* Use new elan 0.8.0 lean version name.

* Remove dangerous *.comp instances.

* Fix comp instance fallout.

* Fix more *.comp fallout

* Fix more *.comp fallout.

* More *.comp fallout.

* Fix *.comp fallout

* Fix *.comp fallout

* Port to has_attribute and copy_attribute changes.

* Fix monad_writer_adapter_trans instance.

* Revert 3.6 hacks.

* Update library note for *.comp morphisms.

* fix(scripts/deploy_docs.sh): use lean_version from mathlib leanpkg.toml

* Do not mention is_mul_hom.mul in library note.

* Update lean version to 3.7.0.

* Remove of_tactic'

* switch to 3.7.1c

Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-18T18:36:06+00:00](https://github.com/leanprover-community/mathlib/commit/69f7bf8644b8b60c5f7d8ebb11d50906ddbda439)
chore(scripts): update nolints.txt

### [2020-03-18T17:04:44+00:00](https://github.com/leanprover-community/mathlib/commit/5f62d3bb8df2b0137bf4db4d8abf099e374b9254)
feat(topology/bounded_continuous_functions): more general uniform convergence ([#2165](https://github.com/leanprover-community/mathlib/pull/#2165))

* feat(topology/buonded_continuous_functions): more general uniform convergence

* yury's comments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-18T14:55:37+00:00](https://github.com/leanprover-community/mathlib/commit/739e831ffee5d4f5cea10dcf28fd9fc9400a1184)
feat(analysis/complex/exponential): real powers of nnreals ([#2164](https://github.com/leanprover-community/mathlib/pull/#2164))

* feat(analysis/complex/exponential): real powers of nnreals

* cleanup

* mean inequalities in nnreal

* mean inequalities

* use < instead of >

* reviewer's comments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-18T03:19:02+00:00](https://github.com/leanprover-community/mathlib/commit/f07a1ebf4ed2d4ccfca9fa74e2f457a8a5c53eec)
feat(category_theory): images in Ab and Type ([#2101](https://github.com/leanprover-community/mathlib/pull/#2101))

* not stacked on top of limits/colimits

* comment

* add ext to add_monoid_hom.ext

* fix

* cleanup

* suggestions from review

* fix

* use more existing structure

* fix names

* oops

* linter

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-18T00:03:33+00:00](https://github.com/leanprover-community/mathlib/commit/6af37d37ef2e83bac310c4e82b52157e3ae2fbc1)
fix(category_theory/limits): require explicit instances of has_zero_morphisms ([#2169](https://github.com/leanprover-community/mathlib/pull/#2169))

* fix(category_theory/limits): require explicit instances of has_zero_morphisms

* Fix unused arguments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-17T14:49:48+01:00](https://github.com/leanprover-community/mathlib/commit/422f6400946c1d87e2f8f8bf398d35190ebbc7ca)
fix(scripts/mk_nolint): fix error introduced by [#2090](https://github.com/leanprover-community/mathlib/pull/#2090) ([#2170](https://github.com/leanprover-community/mathlib/pull/#2170))

### [2020-03-17T03:38:32+00:00](https://github.com/leanprover-community/mathlib/commit/e94fef0121317cce8afd4af2b1d94645012088f5)
feat(lint): run some linters on automatically generated declarations ([#2090](https://github.com/leanprover-community/mathlib/pull/#2090))

* style(lint): remove double periods

remove spacing in the OK-results of #lint
add newline after ever failed result of #lint_mathlib (1 newline between two files, 2 newlines between two linters)

* run some linters on automatically generated declarations

* fix doc string

* fix mk_nolint

* fix test

* fix linter errors

also explain how to fix linter errors for automatically generated declarations

* fix linter errors

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-17T01:31:51+00:00](https://github.com/leanprover-community/mathlib/commit/496939ce06befc6bae3cb8d5519c2424c9bf2fb1)
feat(data/real/*nnreal): add division lemmas ([#2167](https://github.com/leanprover-community/mathlib/pull/#2167))

* feat(data/real/*nnreal): add division lemmas

* fix build

* elim_cast

* another elim_cast

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-16T23:16:44+00:00](https://github.com/leanprover-community/mathlib/commit/4754368c486ffc84beebbf9ccef9ffc945aadcca)
feat(category_theory): split epis and monos, and a result about (co)projections ([#2146](https://github.com/leanprover-community/mathlib/pull/#2146))

* feat(category_theory): split epis and monos, and a result about (co)projections

* rearranging

* reviewers' suggestions

* A split mono `f` equalizes `(retraction f ≫ f)` and `(𝟙 Y)`.

* fix

* cleanup

* split_epi_coequalizes

* fix

* cleanup

* reduce priorities

* Update src/category_theory/epi_mono.lean

Co-Authored-By: Yury G. Kudryashov <urkud@urkud.name>

* Update src/category_theory/epi_mono.lean

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-16T21:22:20+00:00](https://github.com/leanprover-community/mathlib/commit/bc087d82ff58997024e4685c444e167a096716df)
chore(scripts): update nolints.txt

### [2020-03-16T20:04:17+00:00](https://github.com/leanprover-community/mathlib/commit/7a5496f6ea4630595cbfabf4dbd97ad0b357172e)
chore(order/liminf_limsup): lint and cleanup the file ([#2162](https://github.com/leanprover-community/mathlib/pull/#2162))

* chore(order/liminf_limsup): lint and cleanup the file, add some statements

* use eventually_mono

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-16T19:22:51+00:00](https://github.com/leanprover-community/mathlib/commit/007b575c4e77de475d624f77eee538442c4d655a)
chore(scripts): update nolints.txt

### [2020-03-16T17:51:32+00:00](https://github.com/leanprover-community/mathlib/commit/42b92aaaa6369e6c778d5e279524ab14f493ca87)
feat(tactic): command for adding tactic, command, and attribute documentation ([#2114](https://github.com/leanprover-community/mathlib/pull/#2114))

* chore(*): switch to lean 3.6.0

* begin tactic_doc command

* merge add_tactic_doc with library_note

* fix library_note imports

* undo accidental revert

* better attribute description

* unneeded to_expr

* fix doc string attribution

* unicode input error

Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

* display and collect doc entries

* missing doc string

* update for lean 3.6

* document core tactics

I considered adding these as doc strings in core. But the entry for `conv` mentions mathlib-specific things.

* move tfae and rcases docs

* move rintros and obtain

* simpa

* move part of tactic.interactive

* move more of tactic.interactive

* finish tactic.interactive

* move omega

* move renaming tactics

* move more

* move norm_cast

* more

* move more

* doc commands in core + docstring tweaks

* abel, alias, cache

* elide, finish

* hint, linearith, pi_instances

* norm_num, rewrite

* ring, ring_exp

* solve_by_elim, suggest

* doc_commands, rcases

* ext

* explode, find

* lint

* tidy

* localized

* reassoc_axiom, replacer, restate_axiom, where

* simps

* markdown files

* interactive

* new additions

* revert changes to md files

* fix merge

* allow entries with different categories to share the same name

* better error messages

* fix merge

* linter errors

* use derive handler for inhabited instances

* shorten doc entry names after category fix

* copy simp.md to doc entry, tag: "simp" -> "simplification"

* update add_tactic_doc_command docstring and doc.md

* simp doc entry changed to its doc string

* Apply suggestions from code review

* doc: horizontal rules must be surrounded by new lines

* address reviewer suggestions

* Update docs/contribute/doc.md

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* fix add_tactic_doc_command docstring

Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-16T15:33:24+00:00](https://github.com/leanprover-community/mathlib/commit/04c738194df05936a5d6a7a1159dcb22533e445f)
doc(docs/install/windows): emphasize projects link ([#2150](https://github.com/leanprover-community/mathlib/pull/#2150))

You can't use mathlib in the test project created in step 6. I've seen a couple of Windows users get tripped up here.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-16T14:46:06+00:00](https://github.com/leanprover-community/mathlib/commit/555528e16307abe1eb5dc3549cd27148e5a1a97e)
feat(category_theory/image): comparison maps for precomposition ([#2153](https://github.com/leanprover-community/mathlib/pull/#2153))

* feat(category_theory/image): comparison maps for precomposition

* remove duplicate argument

* unused argument

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-16T09:18:06+00:00](https://github.com/leanprover-community/mathlib/commit/1e38cb1bf3dedc3c56082467d88ebbd9e6bf1433)
chore(scripts): update nolints.txt

### [2020-03-16T08:00:01+00:00](https://github.com/leanprover-community/mathlib/commit/ff84bf47af4df934ea15620bd74788c655f3298c)
feat(category_theory/monad/limits): forgetful creates colimits ([#2138](https://github.com/leanprover-community/mathlib/pull/#2138))

* forgetful creates colimits

* tidy up proofs

* add docs

* suggestions from review

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-16T05:54:25+00:00](https://github.com/leanprover-community/mathlib/commit/4aed8625483bc79f78805a239f3e8b5bfa9fe3e1)
feat(analysis/normed_space/operator_norm): completeness of the space of operators ([#2160](https://github.com/leanprover-community/mathlib/pull/#2160))

* feat(analysis/normed_space/operator_norm): completeness of the space of operators

* add some comments

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-16T03:42:23+00:00](https://github.com/leanprover-community/mathlib/commit/d8e5d99a674be9a72e16731a7b7e6c7cc3e4f6e4)
feat(category_theory/limits): Convenience methods for building limit (co)forks ([#2155](https://github.com/leanprover-community/mathlib/pull/#2155))

* feat(category_theory/limits): Convenience methods for building limit (co)forks

* Formatting

* Rework a proof about kernels

* feat(category_theory/limits): kernel forks

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-16T01:31:06+00:00](https://github.com/leanprover-community/mathlib/commit/c240fcb38cfdbe15b790f8f62dae391e194277bd)
feat(category_theory/limits): pullbacks from binary products and equalizers ([#2143](https://github.com/leanprover-community/mathlib/pull/#2143))

* feat(category_theory/limits): derive has_binary_products from has_limit (pair X Y)

* Rename *_of_diagram to diagram_iso_*

* feat(category_theory/limits): pullbacks from binary products and equalizers

* Fix build

* Fix indentation

* typos

* Fix proof

* Remove some simp lemmas that were duplicated during merge

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-15T23:30:43+00:00](https://github.com/leanprover-community/mathlib/commit/fbe2ce093130e0f3786899466b80f8e61cb68de6)
feat(category_theory/limits): kernel forks ([#2156](https://github.com/leanprover-community/mathlib/pull/#2156))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-15T21:15:49+00:00](https://github.com/leanprover-community/mathlib/commit/87f8ab22d97dfa5f76be928ba3aefe7bc8da5e4e)
chore(nnreal): replace coe_le with coe_le_coe ([#2159](https://github.com/leanprover-community/mathlib/pull/#2159))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-15T15:21:50+00:00](https://github.com/leanprover-community/mathlib/commit/7104132ef532a98bf34ceaa670455f5df6b4e1dd)
chore(field_theory/finite): spelling mistake ([#2157](https://github.com/leanprover-community/mathlib/pull/#2157))

### [2020-03-15T04:22:33+00:00](https://github.com/leanprover-community/mathlib/commit/0cbfbabb8714ae8ca6b4dbb78dc59f41db922141)
refactor(logic/function): inv_fun takes a nonempty instance instead of inhabited ([#2148](https://github.com/leanprover-community/mathlib/pull/#2148))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-15T03:04:18+00:00](https://github.com/leanprover-community/mathlib/commit/b314df2e1b45b69453b48d31953b754cc954b527)
chore(scripts): update nolints.txt

### [2020-03-15T01:43:38+00:00](https://github.com/leanprover-community/mathlib/commit/8c2a254c671897a98982364939628e03a7260e5d)
feat(category_theory): comonads and coalgebras ([#2134](https://github.com/leanprover-community/mathlib/pull/#2134))

* Comonads and coalgebras

* Update docstring

* add docstrings

* Update src/category_theory/monad/algebra.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/category_theory/monad/algebra.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/category_theory/monad/algebra.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* make the linter happy

* revert change to nolints

* disable inhabited instance linter

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-15T00:49:28+00:00](https://github.com/leanprover-community/mathlib/commit/e4bf0bfa883298663af8b1911b79f68c333b33f8)
chore(scripts): update nolints.txt

### [2020-03-14T23:31:44+00:00](https://github.com/leanprover-community/mathlib/commit/54339730e20d63c9f5ad3f2b5fd90110457175b9)
feat(category_theory): limits and colimits in Ab ([#2097](https://github.com/leanprover-community/mathlib/pull/#2097))

* limits and colimits in AddCommGroup

* feat(category_theory): limits and colimits in Ab

* to_additive comes last

* add to nolints

* Update src/algebra/category/Group/limits.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* docstrings

* use bundled homs throughout

* comment about better model of colimits

* fix comments

* fixes

* linter

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-14T21:19:35+00:00](https://github.com/leanprover-community/mathlib/commit/2e781eb085851889ddbfd3d0e5a0892e1a1c752f)
doc(docs/install/*): emphasize projects link ([#2151](https://github.com/leanprover-community/mathlib/pull/#2151))

### [2020-03-14T20:14:08+00:00](https://github.com/leanprover-community/mathlib/commit/2065438d2ba732861508466f85b5f9a2d3d84d06)
feat(category_theory/comma): some limits in the over category and iterated slices ([#2131](https://github.com/leanprover-community/mathlib/pull/#2131))

* iterated slice and limits in over category

* A bit more docs

* changes from review

* removed simp attributes

* over prod map left

* Update src/category_theory/comma.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* simplify equivalence definition

* fix indentation

* make lemmas simp again

* removed simp

* fix equalizers proof

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-14T18:14:17+00:00](https://github.com/leanprover-community/mathlib/commit/cc39a15040c426f7da374bb33729de14e3e771a3)
chore(scripts): update nolints.txt

### [2020-03-14T17:09:36+00:00](https://github.com/leanprover-community/mathlib/commit/7b2be40f1091a2dcc46bb287dfdba6ef75fe254d)
refactor(data/equiv/algebra): split ([#2147](https://github.com/leanprover-community/mathlib/pull/#2147))

* refactor(data/equiv/algebra): split

I want to use `≃*` without importing `ring`.

* Update src/data/equiv/ring.lean

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-14T15:02:52+00:00](https://github.com/leanprover-community/mathlib/commit/e6ccfe03d223c1a6157d59048072f5a01155a40b)
feat(algebra): the forgetful functor Module ℤ ⥤ Ab is an equivalence ([#2130](https://github.com/leanprover-community/mathlib/pull/#2130))

* feat(algebra): the forgetful functor Module ℤ ⥤ Ab is an equivalence

* oops, forgot to add file

* missing conversion

* not there yet

* fixes

* doc-strings, and remove more instances

* various

* oops

* revert

* Delete multilinear.olean.lock

* revert

* move instances

* Remove note about a bug fixed in [#1586](https://github.com/leanprover-community/mathlib/pull/#1586).

* whitespace

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-14T12:47:55+00:00](https://github.com/leanprover-community/mathlib/commit/d313d14ef7bede5df005af192749ce175fee5a40)
chore(scripts): update nolints.txt

### [2020-03-14T11:28:34+00:00](https://github.com/leanprover-community/mathlib/commit/559921a5a2676ecb9ccb21a6664d3768d163d7d7)
feat(algebra/category/Group): the free-forgetful adjunction for AddCommGroup ([#2141](https://github.com/leanprover-community/mathlib/pull/#2141))

* feat(algebra/category/Group): the free-forgetful adjunction for AddCommGroup

* fixes

* Update src/group_theory/free_abelian_group.lean

* oops

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-14T09:21:38+00:00](https://github.com/leanprover-community/mathlib/commit/465f599641945157e6e44eeee8cfea83e77ecb98)
chore(scripts): update nolints.txt

### [2020-03-14T08:02:49+00:00](https://github.com/leanprover-community/mathlib/commit/81d3ebf38b385a9579f7233a4ac8fd48ce7f4543)
feat(algebra): monoidal category of R-modules ([#2125](https://github.com/leanprover-community/mathlib/pull/#2125))

* feat(algebra): monoidal category of R-modules

* docstrings

* minor

* tweaks

* fix import

* fixes

* reduce use of @

* broken

* fixes

* Update src/algebra/category/Module/basic.lean

Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>
Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>

### [2020-03-14T04:10:31+00:00](https://github.com/leanprover-community/mathlib/commit/3d621b5e3518cf6ecc9b16dbe875d981105eee67)
refactor(ring_theory/subring): use bundled homs ([#2144](https://github.com/leanprover-community/mathlib/pull/#2144))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-14T01:59:21+00:00](https://github.com/leanprover-community/mathlib/commit/ade1ee309eaa5efe3ae306aa32d83ee16c397959)
feat(category_theory/limits): derive has_binary_products from has_limit (pair X Y) ([#2139](https://github.com/leanprover-community/mathlib/pull/#2139))

* feat(category_theory/limits): derive has_binary_products from has_limit (pair X Y)

* Rename *_of_diagram to diagram_iso_*

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-13T18:31:09+00:00](https://github.com/leanprover-community/mathlib/commit/49f5fb880d5bc102e3ee350327895ab7f32d9ddd)
chore(algebra/category/CommRing/limits): avoid `is_ring_hom` ([#2142](https://github.com/leanprover-community/mathlib/pull/#2142))

define a `ring_hom` instead

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-13T12:20:20+00:00](https://github.com/leanprover-community/mathlib/commit/32c2768b41b30e2c9ef988f24fca0f3bdaab306a)
chore(linear_algebra/basic): simplify two proofs ([#2123](https://github.com/leanprover-community/mathlib/pull/#2123))

* chore(linear_algebra/basic): simplify two proofs

Also drop `linear_map.congr_right` in favor of
`linear_equiv.congr_right`. I'll restore the deleted `congr_right`
as `comp_map : (M₂ →ₗ[R] M₃) →ₗ[R] (M →ₗ[R] M₂) →ₗ[R] (M →ₗ[R] M₃)` soon.

* Fix compile

* Restore `congr_right` under the name `comp_right`.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-13T10:18:27+00:00](https://github.com/leanprover-community/mathlib/commit/aec62dc423297ff14e287d84b0fa10259076b6b5)
chore(scripts): update nolints.txt

### [2020-03-13T09:00:12+00:00](https://github.com/leanprover-community/mathlib/commit/b54960d1f8f6c06d66bbba085074b06da4fc704f)
refactor(*): migrate some files to bundled ring homs ([#2133](https://github.com/leanprover-community/mathlib/pull/#2133))

* refactor(*): migrate some files to bundled ring homs

* Rename ring_hom.is_local back to is_local_ring_hom

* Apply suggestions from code review

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Restore 2 instances, make `map` use bundled homs

* More bundled homs

* Add a docstring

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-03-12T18:52:10+00:00](https://github.com/leanprover-community/mathlib/commit/1c449b6c7047a481a77cb8efc7e2ee45062ff470)
chore(algebra/field*, field_theory/subfield): drop some `x ≠ 0`, use `division_ring` ([#2136](https://github.com/leanprover-community/mathlib/pull/#2136))

* chore(algebra/field*, field_theory/subfield): drop some `x ≠ 0`, use `division_ring`

We have `0⁻¹=0` in `division_ring` now, so no need to assume `field`
in `ring_hom.map_inv` etc.

* Fix lint

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-12T16:38:40+00:00](https://github.com/leanprover-community/mathlib/commit/5fe72b6b40cabe9e1e46ec9ba37099287f38c340)
chore(scripts): update nolints.txt

### [2020-03-12T15:18:41+00:00](https://github.com/leanprover-community/mathlib/commit/f5787f53f5ef86f30a19885e6cd1e392c4404b97)
doc(*): switch from update-mathlib to leanproject ([#2093](https://github.com/leanprover-community/mathlib/pull/#2093))

* doc(*): switch from update-mathlib to leanproject

* Apply suggestions from code review

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Use shiny new `leanproject new` and `leanproject get`

* documentation tweaks

* project.md tweaks

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Patrick Massot <patrickmassot@free.fr>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-12T13:07:30+00:00](https://github.com/leanprover-community/mathlib/commit/8131108879bcf8f2156f3765a201a31206313f4b)
feat(category_theory/opposites): add nat_iso.unop ([#2132](https://github.com/leanprover-community/mathlib/pull/#2132))

* Add nat_iso.unop

* Add docstrings to nat_iso.op, nat_iso.unop

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-12T10:56:40+00:00](https://github.com/leanprover-community/mathlib/commit/7d357d7479676aac65d9dfeafacd2aaf54e7e839)
Fix a typo ([#2137](https://github.com/leanprover-community/mathlib/pull/#2137))

### [2020-03-12T05:14:27+00:00](https://github.com/leanprover-community/mathlib/commit/35a6e682bf3534ed79b750168e116e4a54bdf000)
chore(scripts): update nolints.txt

### [2020-03-12T04:06:30+00:00](https://github.com/leanprover-community/mathlib/commit/1b0a749349b3679a1dd0ce63c12183451d843d94)
feat(topology): is_closed_proj_of_compact ([#2069](https://github.com/leanprover-community/mathlib/pull/#2069))

* feat(lattice): add inf_le_inf_left/right

* feat(set/lattice): image_inter_subset

* feat(set/lattice): push_pull

* feat(order/filter): push_pull and product notation

* feat(topology/subset_properties): is_closed_proj_of_compact

* feat(set/lattice): push_pull'

* fix(order/filter): forgotten doc

* lint (including old missing docstrings in filter).

* Apply Yury's suggestions.

* Forgotten style fix

* urkud's suggestions

Co-Authored-By: Yury G. Kudryashov <urkud@urkud.name>

* Update src/order/filter/basic.lean

Co-Authored-By: Scott Morrison <scott@tqft.net>

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-11T22:56:21+00:00](https://github.com/leanprover-community/mathlib/commit/7c8dc2ad88655d009b8a047416653333e73c73f5)
feat(category_theory/limits): construct equalizers from pullbacks and products ([#2124](https://github.com/leanprover-community/mathlib/pull/#2124))

* construct equalizers from pullbacks and products

* ...

* changes from review

* Add docstrings

* golf proofs a little

* linter

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-11T18:57:43+00:00](https://github.com/leanprover-community/mathlib/commit/7cffe2520a5518bba19227a107078d83fa725ddc)
chore(category_theory/cones): make functor argument of forget explicit ([#2128](https://github.com/leanprover-community/mathlib/pull/#2128))

### [2020-03-11T10:15:41+00:00](https://github.com/leanprover-community/mathlib/commit/43431be5ab141dcf9a6c7f446cdaf35e4b7f071a)
chore(category_theory): remove functor.of ([#2127](https://github.com/leanprover-community/mathlib/pull/#2127))

* chore(category_theory): remove functor.of

* fix

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-11T07:13:33+00:00](https://github.com/leanprover-community/mathlib/commit/d909a61200168cdcf6f6d22813ae1989a112eb8e)
fix(algebra/category): avoid deprecated lemmas ([#2126](https://github.com/leanprover-community/mathlib/pull/#2126))

### [2020-03-10T19:54:59+00:00](https://github.com/leanprover-community/mathlib/commit/36ac9162ffc5cb792ea14a6ea5be41f18fb5b8cd)
Add two missing duals ([#2122](https://github.com/leanprover-community/mathlib/pull/#2122))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-10T17:38:33+00:00](https://github.com/leanprover-community/mathlib/commit/699401bc4b0c392c98598d8806b7c97f4d914f1d)
feat(ci): look for equivalent oleans on Azure ([#2094](https://github.com/leanprover-community/mathlib/pull/#2094))

* first attempt at avoiding recompilation in ci

* avoid using leanproject

* delete most of library for testing

* modify non-lean file for testing

* Revert "delete most of library for testing"

This reverts commit b4f298e866513a6e1517f7fb370fcf9e03eb8030.

* unnecessary to look up the exact git sha

* simplify

* apply Gabriel's suggestion

* untar all and only src directory

* Revert "modify non-lean file for testing"

This reverts commit 3157cb1d0d0b3530445c36f8a1e9f725847f71ce.

* simplify

* add git reset to script

* Revert "add git reset to script"

This reverts commit c63a8281fef1a16ad0133521b7c8b002ef47907e.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-10T15:29:25+00:00](https://github.com/leanprover-community/mathlib/commit/668a98e7ab7d0b33f0a491fe1560f3dcb2315259)
feat(measurable_space): is_measurable_supr lemma ([#2092](https://github.com/leanprover-community/mathlib/pull/#2092))

* feat(data/set/lattice): add @[simp] to lemmas

* feat(measurable_space): is_measurable_supr lemma

* fix proof

* fix proof

* fix proof

* oops

* fix proofs

* typo in doc string

* remove @[simp]

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-10T13:12:10+00:00](https://github.com/leanprover-community/mathlib/commit/9feefee8ef5109f2504cab1ac98aadd5a743d0ba)
feat(ring_theory/polynomial): refactor of is_integral_domain_fin ([#2119](https://github.com/leanprover-community/mathlib/pull/#2119))

* chore(ring_theory/polynomial): refactor proof of is_noetherian_ring_fin

* not there yet

* feat(ring_theory/polynomial): refactor of is_integral_domain_fin

* fix

* refactor

* fix

* fix

* suggestion from linter

* Update src/data/mv_polynomial.lean

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-10T10:57:20+00:00](https://github.com/leanprover-community/mathlib/commit/cdc56baf367dc295e006541b170c6507e2f0fde1)
feat(analysis/calculus/tangent_cone): prove that all intervals are `unique_diff_on` ([#2108](https://github.com/leanprover-community/mathlib/pull/#2108))

* feat(analysis/calculus/tangent_cone): prove that all intervals are `unique_diff_on`

* Drop some unneeded assumptions

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-10T06:39:45+00:00](https://github.com/leanprover-community/mathlib/commit/e8ad2e385d1546535a3badea6dedaf7b85c116a9)
feat(category_theory/limits): the pullback of a monomorphism is a monomorphism ([#2113](https://github.com/leanprover-community/mathlib/pull/#2113))

* The pullback of a monomorphism is a monomorphism

* The pushout of an epimorphism is an epimorphism

* Fix a proof

* renaming

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-10T04:22:40+00:00](https://github.com/leanprover-community/mathlib/commit/945845d8e0a9175f09ec52059d46eaa492ab9d4a)
feat(linter): include linter name in report ([#2116](https://github.com/leanprover-community/mathlib/pull/#2116))

* feat(linter): include linter name in report (closes [#2098](https://github.com/leanprover-community/mathlib/pull/#2098))

* Update src/tactic/lint.lean

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-10T02:12:06+00:00](https://github.com/leanprover-community/mathlib/commit/4089712fab415048a0f20bf09bb23ca4e212b097)
chore(ring_theory/polynomial): refactor proof of is_noetherian_ring_fin ([#2117](https://github.com/leanprover-community/mathlib/pull/#2117))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-09T23:57:38+00:00](https://github.com/leanprover-community/mathlib/commit/25df88424050f1e76e8708529c35480719762291)
reflexive transitive closure is symmetric of original ([#2115](https://github.com/leanprover-community/mathlib/pull/#2115))

* reflexive transitive closure is symmetric if original

* Update src/logic/relation.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/logic/relation.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-09T21:54:46+00:00](https://github.com/leanprover-community/mathlib/commit/f90803c91d59c6a8856ae00102427ef6f956d5c6)
feat(algebra/group/hom): cancel injective/surjective `monoid_hom`s ([#2112](https://github.com/leanprover-community/mathlib/pull/#2112))

* feat(algebra/group/hom): cancel injective/surjective `monoid_hom`s

* Add a `ring_hom` version

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-09T19:43:42+00:00](https://github.com/leanprover-community/mathlib/commit/b39713feedd1208beef9dea31068ee70b5fda022)
feat(analysis/calculus/darboux): IVT for derivatives ([#2110](https://github.com/leanprover-community/mathlib/pull/#2110))

* feat(analysis/calculus/darboux): IVT for derivatives

* whitespace

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-09T14:27:32+00:00](https://github.com/leanprover-community/mathlib/commit/62abc4d53c7228ce61b69fb57720a7b70c46598c)
feat(category_theory): images ([#2100](https://github.com/leanprover-community/mathlib/pull/#2100))

* feat(category_theory): images

* oops, forgot to add file

* Update src/category_theory/category/default.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* some improvements

* linting

* oops

* Update src/category_theory/limits/shapes/images.lean

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-09T12:22:18+00:00](https://github.com/leanprover-community/mathlib/commit/d8d09271b3ad0faf65ae3c4a2474010e2d942a1a)
refactor(topology/algebra/ordered): rename `tendsto_of_tendsto_of_tendsto_of_le_of_le` to `tendsto_of_tendsto_of_tendsto_of_le_of_le'` ([#2111](https://github.com/leanprover-community/mathlib/pull/#2111))

The new `tendsto_of_tendsto_of_tendsto_of_le_of_le` assumes that
the inequalities hold everywhere.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-09T10:19:36+00:00](https://github.com/leanprover-community/mathlib/commit/4258f5eea8df10fc3c6cf27922451d929f5d35b7)
refactor(analysis/normed_space/banach): use bundled `→L[𝕜]` maps ([#2107](https://github.com/leanprover-community/mathlib/pull/#2107))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-09T07:16:17+00:00](https://github.com/leanprover-community/mathlib/commit/434b6299fb71b4847794e53763a028147b34f46f)
chore(scripts): update nolints.txt

### [2020-03-09T05:00:06+00:00](https://github.com/leanprover-community/mathlib/commit/ce7248abca1a36b1631350a77952101d738adc6d)
doc(docs/tutorial/category_theory): introductory category theory tutorial ([#2104](https://github.com/leanprover-community/mathlib/pull/#2104))

* doc(docs/tutorial/category_theory): Adding WIP beginner category theory docs

* linewraps

* presumably uncontroversial edits

* oops

* whitespace

* explaining more about universes

* warning about definitional associativity

* add TODO

* Update docs/tutorial/category_theory/category_theory_intro.md

* rename

* cleanup

* adding lean version

* various

* add a note about debugging universe problems

* rename

* delete old markdown tutorial

* adding sections to make variable names nicer

* tidy up universes

* url escape parentheses inside links

* tweaking text

* Update docs/tutorial/category_theory/intro.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-09T02:49:14+00:00](https://github.com/leanprover-community/mathlib/commit/61d70ce8cba12e90d92604b4246ed7940e5fb0d0)
chore(algebra/group): streamlining imports ([#2099](https://github.com/leanprover-community/mathlib/pull/#2099))

* chore(algebra/group): streamlining imports

* reducing imports

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-09T00:56:10+00:00](https://github.com/leanprover-community/mathlib/commit/ca370cb94eae530c97bd43d53826310e0832e319)
fix(deprecated/group): remove dangerous instances ([#2096](https://github.com/leanprover-community/mathlib/pull/#2096))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-08T22:46:03+00:00](https://github.com/leanprover-community/mathlib/commit/15d3268e1e616d962978593d6e735ad08646831c)
chore(category_theory/functor): make arguments implicit ([#2103](https://github.com/leanprover-community/mathlib/pull/#2103))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-08T05:53:07+00:00](https://github.com/leanprover-community/mathlib/commit/b7444b03574bb37a182229a3bcecf61d038d8237)
Remove limits.lean which is superseded by limits_of_products_and_equalizers.lean ([#2105](https://github.com/leanprover-community/mathlib/pull/#2105))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-07T21:37:38+00:00](https://github.com/leanprover-community/mathlib/commit/d53bbb6ecd4a82ac925a2d5eafbc144541092282)
feat(data/fin_enum): `fin_enum` class for finite types with an enumeration order ([#1368](https://github.com/leanprover-community/mathlib/pull/#1368))

* feat(data/enum): `enumerable` class for finite types with an
enumeration order

* little fixes

* Update enum.lean

* Update enum.lean

* Update finset.lean

* add documentation

* Update src/data/enum.lean

Co-Authored-By: Scott Morrison <scott@tqft.net>

* Update src/data/enum.lean [skip ci]

Co-Authored-By: Scott Morrison <scott@tqft.net>

* Update fin.lean [skip ci[

* Update enum.lean

* Update enum.lean

* Update fin.lean [skip ci]

* Update enum.lean

* Update src/data/enum.lean [skip ci]

Co-Authored-By: Bryan Gin-ge Chen <bryangingechen@gmail.com>

* Update interactive.lean [skip ci]

* Rename enum.lean to fin_enum.lean [skip ci]

* add `mono using` to doc/tactics.md [skip ci]

* update to Lean 3.5.1

* address lint comments

* Update src/data/fin_enum.lean

Co-Authored-By: Scott Morrison <scott@tqft.net>

* Update fin_enum.lean

* Apply suggestions from code review

Co-Authored-By: Scott Morrison <scott@tqft.net>

* remove unneeded lemmas

* add `nodup_to_list`

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: Bryan Gin-ge Chen <bryangingechen@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-07T02:22:02+00:00](https://github.com/leanprover-community/mathlib/commit/726d83f1baed16426c9fbeca93bcc82412736b39)
feat(lint): add two new linters ([#2089](https://github.com/leanprover-community/mathlib/pull/#2089))

* feat(lint): add two new linters

checks whether type-class inference searches end relatively quickly
checks that there are no instances has_coe a t with variable a

* remove `is_fast` from `has_coe_variable`

* add link to note

* typo in priority

* fix error, implement comments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-07T00:15:07+00:00](https://github.com/leanprover-community/mathlib/commit/c5437b4bbce4cdaa8c732fdc808ff00c9781780f)
chore(scripts): update nolints.txt

### [2020-03-06T21:32:35+00:00](https://github.com/leanprover-community/mathlib/commit/6c23bad21c7c61a57ed18be1f82df1f400ef2c2c)
feat(data/set/lattice): add @[simp] to lemmas ([#2091](https://github.com/leanprover-community/mathlib/pull/#2091))

* feat(data/set/lattice): add @[simp] to lemmas

* fix proof

* fix proof

* fix proof

* oops

* fix proofs

* typo in doc string

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-06T19:21:21+00:00](https://github.com/leanprover-community/mathlib/commit/4f10d1eb9ed4b02a0bf25e437ffad048711876bd)
refactor(group_theory/monoid_localization): use characteristic predicate ([#2004](https://github.com/leanprover-community/mathlib/pull/#2004))

* should I be changing and committing toml idk

* initial monoid loc lemmas

* responding to PR comments

* removing bad @[simp]

* inhabited instances

* remove #lint

* additive inhabited instance

* using is_unit & is_add_unit

* doc string

* remove simp

* submonoid.monoid_loc... -> submonoid.localization

* submonoid.monoid_loc... -> submonoid.localization

* generalize inhabited instance

* remove inhabited instance

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-06T11:43:23+00:00](https://github.com/leanprover-community/mathlib/commit/36b336cb81612e0c4a37181a93262fb5d1a15fbf)
chore(scripts): update nolints.txt

### [2020-03-06T09:04:50+00:00](https://github.com/leanprover-community/mathlib/commit/8fb9881ac821f078cf2096717d6ebe67ad3394a0)
fix(category_theory/limits): Add some missing instances for special shapes of limits ([#2083](https://github.com/leanprover-community/mathlib/pull/#2083))

* Add some instances for limit shapes

* Deduce has_(equalizers|kernels|pullbacks) from has_finite_limits

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-06T06:56:58+00:00](https://github.com/leanprover-community/mathlib/commit/f81f861e89e49d119114ecfd4fd7dcd49fa4bcef)
feat(category_theory/limits): the kernel of the cokernel of an epimorphism is an isomorphism ([#2088](https://github.com/leanprover-community/mathlib/pull/#2088))

* The kernel of the cokernel of an epimorphism is an isomorphism

* Fix unused argument warnings

* Remove a set_option

* Fix a typo

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-05T18:58:12-08:00](https://github.com/leanprover-community/mathlib/commit/0f9751c2c8e0402fd6c4841dbeac23253a844619)
feat(data/traversable): improve support for instances for recursive types ([#2072](https://github.com/leanprover-community/mathlib/pull/#2072))

### [2020-03-06T01:31:18+00:00](https://github.com/leanprover-community/mathlib/commit/093ac77ac9d27ce83ebf4e76ca5bd9b3eaebedaa)
feat(analysis/calculus/specific_functions): smoothness of exp(-1/x) ([#2087](https://github.com/leanprover-community/mathlib/pull/#2087))

* feat(analysis/calculus/specific_functions): smoothness of exp(-1/x)

* use namespace; shorter names

* fix field_simp

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-05T16:05:27+00:00](https://github.com/leanprover-community/mathlib/commit/50c4adf9661a070cda0ea35a923178569acb1599)
chore(scripts): update nolints.txt

### [2020-03-05T13:17:04+00:00](https://github.com/leanprover-community/mathlib/commit/78ffbae077c50ed8ee060b3ac544f6f1d4359f39)
chore(*): switch to lean 3.6.1 ([#2064](https://github.com/leanprover-community/mathlib/pull/#2064))

* chore(*): switch to lean 3.6.0

* Port `src/linear_algebra` to Lean 3.6c

* Port `src/ring_theory` to Lean 3.6c

* Port `src/algebra` and its dependencies to Lean 3.6c

* Port `src/group_theory` to Lean 3.6c

* WIP: Ports part of `src/data` to Lean 3.6c

* Port `src/data` (and dependencies) to Lean 3.6

* fix set_theory.lists

* fix ring2

* fix pell.lean

these aren't the cleanest proofs, but pell.lean is kind of a standalone thing.

* fix dioph.lean

* Port `src/number_theory/sum_four_squares.lean` to Lean 3.6c

* Port `src/field_theory` to Lean 3.6

* Port `src/computability` to Lean 3.6c

* Port `src/measure_theory` (and dependencies) to Lean 3.6c

* fix manifold/real_instances

* fix analysis/complex/polynomial

* Fix some compile errors in `real_inner_product`

* Upgrade to Lean 3.6.1

* perf: speed up calls to linarith

* Reduce instance priorities for potentially noncomputable instances.

* Remove cyclic instance.

* Make arguments {implicit} in instances where they can be filled in via unification.

* Make inner_product_space compile.

* Style.

* Port data.nat.modeq

* Port data.int.parity

* Port data.int.modeq

* Port data.real.hyperreal

* fix(ci): always run git setup step

closes [#2079](https://github.com/leanprover-community/mathlib/pull/#2079)

(cherry picked from commit 8a0157dc8dfc946d98eba02417052c3c9556559e)

* Remove pre-3.6 legacy code.

* Fix test/monotonicity.lean

* Fix test/ring_exp.lean

* Fix test/conv.lean

* Fix archive/imo1988_q6.lean

* Fix docs/tutorial/Zmod37.lean

* Fix archive/sensitivity.lean

* refactor(algebra/lie_algebra): lie_algebra should not extend lie_ring

* remove unused argument

* add doc-string to instance that became a def

* add docstring

* Fix linting error ☺

* Fix data.real.irrational

* fixing a proof

* cleaning up proof

* fix broken proof

* fix proof

* fix some more proofs

* fix

* fix proofs

Co-authored-by: Vierkantor <Vierkantor@users.noreply.github.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Yury G. Kudryashov <urkud@urkud.name>
Co-authored-by: Scott Morrison <scott@tqft.net>

### [2020-03-05T00:24:49+00:00](https://github.com/leanprover-community/mathlib/commit/8535132345bc8c4f48b56ebf89e0db5bcad8b456)
refactor(algebra/lie_algebra): lie_algebra should not extend lie_ring ([#2084](https://github.com/leanprover-community/mathlib/pull/#2084))

* refactor(algebra/lie_algebra): lie_algebra should not extend lie_ring

* Fix linting error ☺

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-04T22:23:00+00:00](https://github.com/leanprover-community/mathlib/commit/7d6c4fbed62d9641a2c4da31df521243eee82fcb)
fix(congruence): use has_coe_t instead of has_coe ([#2086](https://github.com/leanprover-community/mathlib/pull/#2086))

* fix(congruence): use has_coe_t instead of has_coe

* capitalization

Does that matter for doc generation?

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-04T19:56:00+00:00](https://github.com/leanprover-community/mathlib/commit/9fc675c43151a53052b7f467c8182ea3bece7de6)
chore(analysis/normed_space/basic): rename `ne_mem_of_tendsto_norm_at_top` ([#2085](https://github.com/leanprover-community/mathlib/pull/#2085))

It uses `∀ᶠ` now, so rename to `eventually_ne_of_tendsto_norm_at_top`.

### [2020-03-04T13:10:10+00:00](https://github.com/leanprover-community/mathlib/commit/f1124087b95b92f2158382ba4de3ef15b81cd143)
fix(ci): adjust conditions for fixing steps ([#2082](https://github.com/leanprover-community/mathlib/pull/#2082))

* fix(ci): always run git setup step

closes [#2079](https://github.com/leanprover-community/mathlib/pull/#2079)

* fix(ci): always test doc gen

documentation will still be pushed only under the same conditions as before

closes [#2081](https://github.com/leanprover-community/mathlib/pull/#2081)

* Update scripts/deploy_docs.sh

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

Co-authored-by: Gabriel Ebner <gebner@gebner.org>

### [2020-03-04T07:09:20+00:00](https://github.com/leanprover-community/mathlib/commit/cc4ac8a66eb61785819bec26a77fbdfe946dcb82)
chore(scripts): update nolints.txt

### [2020-03-03T20:45:05-08:00](https://github.com/leanprover-community/mathlib/commit/0f1eb80e3832c6504dfa4ad47958ab98f26d400c)
fix(CI/documentation): add a name back

### [2020-03-03T22:24:50+00:00](https://github.com/leanprover-community/mathlib/commit/13f04c00fc3d3e80258af91aeeb2ebc66f9ff838)
feat(tactic/extract_goal): improve formatting to put assumptions on their own line ([#2076](https://github.com/leanprover-community/mathlib/pull/#2076))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-03T20:14:28+00:00](https://github.com/leanprover-community/mathlib/commit/545dd03d7cb77cf8517e4ac862bc131c40c05b0f)
feat(topology/metric_space/antilipschitz): define `antilipschitz_with` ([#2075](https://github.com/leanprover-community/mathlib/pull/#2075))

* chore(data/real/ennreal): weaker assumptions in `sub_mul`, add `coe_inv_le`

* feat(topology/metric_space/antilipschitz): define `antilipschitz_with`

Also make some proofs use facts about `antilipschitz_with`.

* Rename inequalities, move `K` to the other side

This way it's easier to glue it with the rest of the library, and
we can avoid assuming `0 < K` in many lemmas.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-03T14:39:18+00:00](https://github.com/leanprover-community/mathlib/commit/02d22c390090677c433dab69ccb79739b41f9f5c)
chore(scripts): update nolints.txt

### [2020-03-03T11:51:46+00:00](https://github.com/leanprover-community/mathlib/commit/f7e82d06b5465a9954184d851d44f68a2f14e062)
feat(tactic/lint): check for redundant simp lemmas ([#2066](https://github.com/leanprover-community/mathlib/pull/#2066))

* chore(*): fix simp lemmas

* feat(tactic/lint): check for redundant simp lemmas

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-03-03T09:04:21+00:00](https://github.com/leanprover-community/mathlib/commit/2d1bd457d4da3383a8154528bb2df09a977523a2)
fix some docstrings [ci skip] ([#2078](https://github.com/leanprover-community/mathlib/pull/#2078))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-03T07:18:28+00:00](https://github.com/leanprover-community/mathlib/commit/2a9ad03ca32b51a12bded43e0b089484b83d50e0)
feat(data/list/basic): more lemmas about `list.chain'`; `chain'_of_pairwise` → `pairwise.chain'` ([#2071](https://github.com/leanprover-community/mathlib/pull/#2071))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-03T05:29:57+00:00](https://github.com/leanprover-community/mathlib/commit/e0030149a7e753283e01c64f6ec8de94d2eebf93)
feat(analysis/calculus/iterated_deriv): iterated derivative of a function defined on the base field ([#2067](https://github.com/leanprover-community/mathlib/pull/#2067))

* iterated deriv

* cleanup

* fix docstring

* add iterated_deriv_within_succ'

* remove n.succ

* n+1 -> n + 1

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-03T00:17:40+00:00](https://github.com/leanprover-community/mathlib/commit/262a39ef44d4bde94328bf4da180042cc8d79c62)
chore(scripts): update nolints.txt

### [2020-03-02T21:45:35+00:00](https://github.com/leanprover-community/mathlib/commit/fe9d7ff401624ad2f64b416e5292ec4efb073c53)
feat(tactic/nat_cases): a tactic to case bash inequalities on natural numbers ([#1596](https://github.com/leanprover-community/mathlib/pull/#1596))

* starting on finset_cases

* looking pretty nice

* moving lemma that rewrites nat.add back to (+)

* update tactics.md

* cleanup

* suggestions from review

* Update src/tactic/fin_cases.lean

Co-Authored-By: semorrison <scott@tqft.net>

* incomplete implementation of `with` syntax

* looks good

* failed attempt to use unification

* test showing elaboration problem

* elaborating the `with` argument with respect to the expected type

* testing the type of A in `x ∈ A` using unification rather than syntactic matching

* refactor and cleanup

* refactor

* initial start on nat_cases

* initial start on nat_cases

* resuming work on nat_cases

* looks reasonable

* documentation

* reverting bad merge in fin_cases

* fix module comment

* move non-meta lemmas

* add tests for Chris' use case

* cleanup

* oops

* starting on fintype instances for Icos

* finishing fintypes

* minor

* not really sure what to do next

* oops, forgot to commit??

* oops

* bit more work

* more progress

* everything works?

* moving everything to their natural homes

* rearrange

* cleanup

* linting

* doc-strings

* merge two interactive tactics, via `using` keyword

* improve documentation, in response to review

* add interval_cases to tactic.default

* Apply suggestions from code review

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-02T19:54:08+00:00](https://github.com/leanprover-community/mathlib/commit/1d82a7c2814a7f9c21770fbc32571e9de341b0e8)
doc(data/fin): add docs; fin_zero_elim -> fin.elim0; fin_zero_elim' -> fin_zero_elim ([#2055](https://github.com/leanprover-community/mathlib/pull/#2055))

* doc(data/fin): add some docs

Also drom `fin_zero_elim` in favor of `fin.elim0` from `stdlib` and
rename `fin_zero_elim'` to `fin_zero_elim`.

* Update src/data/fin.lean

Co-Authored-By: Rob Lewis <Rob.y.lewis@gmail.com>

* Update docs, fix `Π` vs `∀`.

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-02T18:11:18+00:00](https://github.com/leanprover-community/mathlib/commit/8919541a5bbd0b6d1bfa37ae58ca4997dc157bc1)
feat(data/finset): new basic material on finsets and fintypes ([#2068](https://github.com/leanprover-community/mathlib/pull/#2068))

* feat(data/finset): additional basic material

* minor fixes

* golfed

* Update src/data/finset.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/data/finset.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/data/finset.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* golfed

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-02T16:19:30+00:00](https://github.com/leanprover-community/mathlib/commit/62756bd3420d41a9815d9ac2d5c948d6e8b98d0a)
chore(data/real/ennreal): weaker assumptions in `sub_mul`, add `coe_inv_le` ([#2074](https://github.com/leanprover-community/mathlib/pull/#2074))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-02T14:25:59+00:00](https://github.com/leanprover-community/mathlib/commit/bfbd0937f06448d68b7c60dc6d9772de7b5d25d7)
chore(algebra/group): move `is_mul/monoid/group_hom` to `deprecated/` ([#2056](https://github.com/leanprover-community/mathlib/pull/#2056))

* Move `is_mul/monoid/group_hom` to `deprecated/`

Also improve deprecation docstring.

TODO: fix compile

* chore(algebra/group): move `is_mul/monoid/group_hom` to `deprecated/`

Also migrate a few definitions to bundled homs:

* use `monoid_hom.map_is_conj` instead of `is_group_hom.is_conj`;
* `with_one.lift` and `with_one.map` now take `f` and an explicit
  argument `h : ∀ x y, f (x * y) = f x * f y` instead of `f` and
  `[is_mul_hom f]`, and produce a `monoid_hom`. As a side effect, they
  are now defined for semigroup homomorphisms only.

* Adjust module docstring

* Update src/algebra/group/with_one.lean

I wonder if mergify will do its job now.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-02T12:33:13+00:00](https://github.com/leanprover-community/mathlib/commit/3055b3c08d3e437bd97b6c8653151f9258ef3683)
chore(topology/metric_space/isometry): rename `(e)metric.isometry.diam_image` to `isometry.(e)diam_image` ([#2073](https://github.com/leanprover-community/mathlib/pull/#2073))

This way we can use dot notation to access these lemmas. Also add `(e)diam_range`.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-02T10:42:53+00:00](https://github.com/leanprover-community/mathlib/commit/2683fa0988af169ece97fd48d91fce72d21f7301)
feat(order/galois_connection): lemmas about galois insertions and supr/infi ([#2052](https://github.com/leanprover-community/mathlib/pull/#2052))

* feat(order/galois_connection): lemmas about galois insertions and supr/infi

* Fix build, hopefully

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-02T08:53:22+00:00](https://github.com/leanprover-community/mathlib/commit/d5d907b1b60fd74b8d56079e3ee36a28160c6ff2)
feat(algebra/free_monoid): define `lift` and `map`, move out of `algebra/group` ([#2060](https://github.com/leanprover-community/mathlib/pull/#2060))

* Move `free_monoid` from `algebra/group/` to `algebra/`

* feat(algebra/free_monoid): define `lift` and `map`

* Expand docstring, drop unneeded arguments to `to_additive`

* Fix compile

* Update src/algebra/free_monoid.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-03-01T23:09:46-08:00](https://github.com/leanprover-community/mathlib/commit/aec54b3bc664beb0f856fbb15105d6fe85ade844)
fix(.mergify.yml): remove " (leanprover-community/lean:3.5.1)" ([#2077](https://github.com/leanprover-community/mathlib/pull/#2077))

### [2020-02-28T18:23:59+01:00](https://github.com/leanprover-community/mathlib/commit/19a9bdc23efc4fa9fcf10d1adfdc3929c5328c0f)
fix(tactic/omega): reify nonconstant ints and nats ([#1748](https://github.com/leanprover-community/mathlib/pull/#1748))

### [2020-02-28T16:36:14+01:00](https://github.com/leanprover-community/mathlib/commit/354a4ed1f644077944ffcb89e474f821605ae0aa)
chore(ci): remove unneeded Lean version restrictions ([#2065](https://github.com/leanprover-community/mathlib/pull/#2065))

* remove lean version from CI

* more version references

* fix?

* persist environment var between steps

### [2020-02-28T15:33:18+00:00](https://github.com/leanprover-community/mathlib/commit/07608293529f5c634799d7aae614ab6ae5e0679a)
feat(ring_theory): Fractional ideals ([#2062](https://github.com/leanprover-community/mathlib/pull/#2062))

* Some WIP work on fractional ideals

* Fill in the `sorry`

* A lot of instances for fractional_ideal

* Show that an invertible fractional ideal `I` has inverse `1 : I`

* Cleanup and documentation

* Move `has_div submodule` to algebra_operations

* More cleanup and documentation

* Explain the `non_zero_divisors R` in the `quotient` section

* whitespace

Co-Authored-By: Scott Morrison <scott@tqft.net>

* `has_inv` instance for `fractional_ideal`

* `set.univ.image` -> `set.range`

* Fix: `mem_div_iff.mpr` should be `mem_div_iff.mp`
(but both reduce to reflexivity anyway)

* Add `mem_div_iff_smul_subset`

Since that is how the definition of `I / J` is traditionally done,
but it is not as convenient to work with, I didn't change the definition
but added a lemma stating the two are equivalent

* whitespace again

(it got broken because I merged changes incorrectly)

* Fix unused argument to `inv_nonzero`

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-28T13:49:48+00:00](https://github.com/leanprover-community/mathlib/commit/4149099c900a9bf53c541a14db53460908a8634e)
fix(tactic/ring): more precise pattern match for div ([#1557](https://github.com/leanprover-community/mathlib/pull/#1557))

* fix(tactic/ring): more precise pattern match for div

* add test

* fix instance check for div

* chore(algebra/quadratic_discriminant): add braces in have steps

* use norm_num instead of ring to evaluate exponents

* fix norm_num uses

* fix norm_num pow bug

* bugfix

* fix proof

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-28T04:02:06+00:00](https://github.com/leanprover-community/mathlib/commit/0bf20640813b50377a352cf14848f7f515f1af70)
chore(scripts): update nolints.txt

### [2020-02-28T01:50:01+00:00](https://github.com/leanprover-community/mathlib/commit/4637e5c85ccd5c0798574d87005f94bf15b01bb3)
refactor(analysis/calculus/times_cont_diff): massive refactor ([#2012](https://github.com/leanprover-community/mathlib/pull/#2012))

* feat(data/fin): append

* Update fin.lean

* Update fintype.lean

* replace but_last with init

* cons and append commute

* feat(*/multilinear): better multilinear

* docstrings

* snoc

* fix build

* comp_snoc and friends

* refactor(analysis/calculus/times_cont_diff): massive refactor

* fix docstring

* move notation

* fix build

* linter

* linter again

* Update src/analysis/calculus/times_cont_diff.lean

Co-Authored-By: Scott Morrison <scott@tqft.net>

* Update src/analysis/calculus/times_cont_diff.lean

Co-Authored-By: Scott Morrison <scott@tqft.net>

* Update src/analysis/calculus/times_cont_diff.lean

Co-Authored-By: Scott Morrison <scott@tqft.net>

* Update src/analysis/calculus/times_cont_diff.lean

Co-Authored-By: Scott Morrison <scott@tqft.net>

* Update src/analysis/calculus/times_cont_diff.lean

Co-Authored-By: Scott Morrison <scott@tqft.net>

* curryfication -> currying

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-27T22:04:31+00:00](https://github.com/leanprover-community/mathlib/commit/0e4eb09d3ad09e47d26e8aa1a58c9dc648ced6fe)
feat(ci): avoid push to Azure if branch has been updated ([#2048](https://github.com/leanprover-community/mathlib/pull/#2048))

* avoid push to Azure if branch has been updated

* changes to git config in deploy_nightly.sh break git fetch

* I don't understand why this is different than on my own repo

* artifact upload breaks fetch, I guess?

* factor out git config

* fix env variable

* adjustments

* removed repo check

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-27T17:35:47+00:00](https://github.com/leanprover-community/mathlib/commit/691456c655bed118e03ad2d3cc2e8f05595b1eab)
chore(scripts): update nolints.txt

### [2020-02-27T15:18:39+00:00](https://github.com/leanprover-community/mathlib/commit/7907f8f3cce9aab39045ff9ad9e8df4772074534)
feat(tactic/tidy): include norm_cast in tidy ([#2063](https://github.com/leanprover-community/mathlib/pull/#2063))

* feat(tactic/tidy): include norm_cast in tidy

* Update src/tactic/core.lean

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-27T13:32:50+00:00](https://github.com/leanprover-community/mathlib/commit/6c2411bdd895f5cf63af07cd62273d78967d6a2d)
chore(scripts): update nolints.txt

### [2020-02-27T11:54:47+00:00](https://github.com/leanprover-community/mathlib/commit/a46b3e5725d0fc8cc97121a2adcd01be5d109e9b)
doc(data/finsupp): module docs and docstrings  ([#2059](https://github.com/leanprover-community/mathlib/pull/#2059))

* doc(data/finsupp): module docs and docstrings

* chore(data/finsupp): squeeze_simp, cleanup, style

* reviewer comments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-27T01:35:32+00:00](https://github.com/leanprover-community/mathlib/commit/ef1e38ecb619768facfd118295e8846c2d00ec5c)
chore(scripts): update nolints.txt

### [2020-02-26T23:31:28+00:00](https://github.com/leanprover-community/mathlib/commit/f0bb2f826bd20e217edf199b8703b5baeba1354a)
feat(ring_theory/polynomial): mv_polynomial.integral_domain ([#2021](https://github.com/leanprover-community/mathlib/pull/#2021))

* feat(ring_theory/polynomial): mv_polynomial.integral_domain

* Add docstrings

* Add docstrings

* Fix import

* Fix build

* Please linter, please

* Update src/algebra/ring.lean

* Clean up code, process comments

* Update src/data/equiv/fin.lean

* Update src/data/equiv/fin.lean

* Update src/data/equiv/fin.lean

* Update src/ring_theory/polynomial.lean

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-26T10:53:53+00:00](https://github.com/leanprover-community/mathlib/commit/73b41b2ca0f4f34d88028f7cb21f5ff4b63c7fe9)
chore(data/prod): rename `injective_prod` to `injective.prod` ([#2058](https://github.com/leanprover-community/mathlib/pull/#2058))

This way we can use dot notation

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-25T22:59:53+00:00](https://github.com/leanprover-community/mathlib/commit/6a6beaa716e81e09a6aea825e79e01bac808b4de)
chore(data/list/basic): drop `append_foldl` and `append_foldr`, add `map_nil` and `prod_singleton` ([#2057](https://github.com/leanprover-community/mathlib/pull/#2057))

`append_foldl` and `append_foldr` were unused duplicates of
`foldl_append` and `foldr_append`

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-25T21:09:35+00:00](https://github.com/leanprover-community/mathlib/commit/7be3e9385b107a8b3fe363487ce5cd20caf1cd8b)
chore(field_theory/minimal_polynomial): fix timeout ([#2054](https://github.com/leanprover-community/mathlib/pull/#2054))

* chore(field_theory/minimal_polynomial): fix timeout

* Update src/field_theory/minimal_polynomial.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-25T19:22:49+00:00](https://github.com/leanprover-community/mathlib/commit/06c5594037e69b3bba34244c30f00dd67b4c1a13)
chore(analyis/normed_space/banach): split proof to avoid timeout ([#2053](https://github.com/leanprover-community/mathlib/pull/#2053))

* chore(analyis/normed_space/banach): split proof to avoid timeout

* delay introducing unnecessary variable

* Apply suggestions from code review

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* fix indent

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-25T16:06:50+00:00](https://github.com/leanprover-community/mathlib/commit/089d058642290b9b5a47aef655cae47eb22cbd97)
feat(tactic/lint): linter for commutativity lemmas that are marked simp ([#2045](https://github.com/leanprover-community/mathlib/pull/#2045))

* feat(tactic/lint): linter for commutativity lemmas that are marked simp

* chore(*): remove simp from commutativity lemmas

* doc(*): document simp_comm linter

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-25T14:16:23+00:00](https://github.com/leanprover-community/mathlib/commit/450dcdf964cc338bd957de6169e4c547102db19b)
refactor(order/bounds): use dot notation, reorder, prove more properties ([#2028](https://github.com/leanprover-community/mathlib/pull/#2028))

* refactor(order/bounds): use dot notation, prove more properties

Also make parts of `complete_lattice` and
`conditionally_complete_lattice` use these lemmas.

* Comments

* Add a module docstring

* Fixes from review, +4 lemmas about images

* Fix a typo in the previous commit

* Update src/order/bounds.lean

* Update src/order/bounds.lean

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-25T12:27:02+00:00](https://github.com/leanprover-community/mathlib/commit/a227e06c380bd2ea9c690f6da617fc3a89c8581f)
Unify naming of lemmas related to the (co)lim functor ([#2040](https://github.com/leanprover-community/mathlib/pull/#2040))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-25T10:39:52+00:00](https://github.com/leanprover-community/mathlib/commit/f77cb57fb89865e455b43f18a3eed4396562f92a)
chore(data/fintype): move  results depending on big_operators ([#2044](https://github.com/leanprover-community/mathlib/pull/#2044))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-25T08:51:21+00:00](https://github.com/leanprover-community/mathlib/commit/61d75bb1229794def8449edf220517e6d00b316b)
chore(scripts): update nolints.txt

### [2020-02-25T06:38:57+00:00](https://github.com/leanprover-community/mathlib/commit/17a33f0db99c1786a30bacee9bd1fbff63b262e9)
refactor(order/copy): move complete_lattice.copy to its own file ([#2050](https://github.com/leanprover-community/mathlib/pull/#2050))

* refactor(order/copy): move complete_lattice.copy to its own file

* Docstrings

* Update src/order/copy.lean

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-24T23:51:03+00:00](https://github.com/leanprover-community/mathlib/commit/5770369f6d3f28356be20931c9ade07be37a01ad)
refactor(topology/metric_space/isometry): remove isometry_inv_fun from isometric ([#2051](https://github.com/leanprover-community/mathlib/pull/#2051))

* refactor(topology/metric_space/isometry): remove isometry_inv_fun from isometric; it is automatic

* Alternative constructor for isometric bijections

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-24T22:06:59+00:00](https://github.com/leanprover-community/mathlib/commit/3ff50d99a66c892289ab3d0c27770a517a59c9e8)
chore(scripts): update nolints.txt

### [2020-02-24T19:58:16+00:00](https://github.com/leanprover-community/mathlib/commit/fb878e78462e5a5c86792eaf61fe76a321ee1870)
feat(tactic/lint): add linter for simp lemmas whose lhs has a variable as head symbol ([#2038](https://github.com/leanprover-community/mathlib/pull/#2038))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-24T18:12:09+00:00](https://github.com/leanprover-community/mathlib/commit/cb4bdd83d8556c73c96db2b31e5b1839cd418141)
doc(category_theory): add a few docstrings ([#2046](https://github.com/leanprover-community/mathlib/pull/#2046))

* doc(category_theory): add a few docstrings

* Apply suggestions from code review

Co-Authored-By: Johan Commelin <johan@commelin.net>

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-24T17:33:16+01:00](https://github.com/leanprover-community/mathlib/commit/8030469cccb4306230015df55ba50a5e280727bf)
Revert "Update README.md"

This reverts commit 4d3ef8368051e45e1b20e77462b958be3e427c87.

### [2020-02-24T17:31:46+01:00](https://github.com/leanprover-community/mathlib/commit/4d3ef8368051e45e1b20e77462b958be3e427c87)
Update README.md

### [2020-02-24T15:43:04+00:00](https://github.com/leanprover-community/mathlib/commit/0fc45dcd16b7042179efb36a8e62f908bf0bd0e9)
feat(tactic/lint): support @[nolint unused_arguments] ([#2041](https://github.com/leanprover-community/mathlib/pull/#2041))

* feat(tactic/lint): support @[nolint unused_arguments]

* refactor(scripts/mk_nolint): include failing linter name in nolints.txt

* chore(scripts/nolints): update nolints.txt

* doc(category/functor): add docstrings

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-24T11:42:56+00:00](https://github.com/leanprover-community/mathlib/commit/32b32ad912406254ac7ddb7100d50f00b86e46f5)
docs(data/set/basic): add module docstring ([#1991](https://github.com/leanprover-community/mathlib/pull/#1991))

* adding module docstring

* tidying up

* markdown fixes

* more md tidying

* remove some unnecessary {alpha : Type*}

* responding to comments

* responding to comments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-23T17:01:48+00:00](https://github.com/leanprover-community/mathlib/commit/28e4bdfc5efdf8549cdebee8594471f4b1836f12)
feat(topology): an `is_complete` set is a `complete_space` ([#2037](https://github.com/leanprover-community/mathlib/pull/#2037))

* feat(*): misc simple lemmas

* +1 lemma

* Rename `inclusion_range` to `range_inclusion`

Co-Authored-By: Johan Commelin <johan@commelin.net>

* feat(topology): an `is_complete` set is a `complete_space`

Also simplify a proof in `topology/metric_space/closeds`.

* Use in `finite_dimension`

Co-authored-by: Johan Commelin <johan@commelin.net>

### [2020-02-23T13:57:52+00:00](https://github.com/leanprover-community/mathlib/commit/16c1d9d3c1063f302f6aa0ac68af5431fdc91fde)
chore(*): minimise imports of data.list.basic ([#2042](https://github.com/leanprover-community/mathlib/pull/#2042))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-23T12:16:38+00:00](https://github.com/leanprover-community/mathlib/commit/256bedc31b1bfa58e0c65c356a3baa6cfdb3d553)
chore(test): don't use sorry in tests, to reduce noise ([#2043](https://github.com/leanprover-community/mathlib/pull/#2043))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-22T22:26:53+00:00](https://github.com/leanprover-community/mathlib/commit/bfa246504b9e3a5d1c8eabded802e413f937f108)
refactor(topology/metric_space/lipschitz): redefine for an `emetric_space` ([#2035](https://github.com/leanprover-community/mathlib/pull/#2035))

* refactor(topology/metric_space/lipschitz): redefine for an `emetric_space`

* Fix compile

* Fixes, thanks @sgouzel

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-22T20:47:15+00:00](https://github.com/leanprover-community/mathlib/commit/ea149c8d28f20ace0ced47e6e41122e880323157)
feat(algebraic_geometry/prime_spectrum): prime spectrum of a ring is compact ([#1987](https://github.com/leanprover-community/mathlib/pull/#1987))

* wip

* wip

* wip

* wip

* WIP

* WIP

* Reset changes that belong to other PR

* Docstrings

* Add Heine--Borel to docstring

* Cantor's intersection theorem

* Cantor for sequences

* Revert "Reset changes that belong to other PR"

This reverts commit e6026b8819570ef6a763582a25d7ae5ad508134b.

* Move submodule lemmas to other file

* Fix build

* Update prime_spectrum.lean

* Docstring

* Update prime_spectrum.lean

* Slight improvement?

* Slightly improve structure of proof

* WIP

* Cleaning up proofs

* Final fixes

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-22T19:10:31+00:00](https://github.com/leanprover-community/mathlib/commit/d615ee6706dcbcb2f936dde4af59cb3c70e7486b)
feat(ci): skip Azure upload if archive already exists ([#2039](https://github.com/leanprover-community/mathlib/pull/#2039))

* skip upload if archive already exists

* simplify script

* remove unused variable

* fix

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-22T16:24:24+00:00](https://github.com/leanprover-community/mathlib/commit/1c6a317aebee0b2cf2729e2661c22e52df900087)
feat(*): misc simple lemmas ([#2036](https://github.com/leanprover-community/mathlib/pull/#2036))

* feat(*): misc simple lemmas

* +1 lemma

* Rename `inclusion_range` to `range_inclusion`

Co-Authored-By: Johan Commelin <johan@commelin.net>

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-22T13:59:03+00:00](https://github.com/leanprover-community/mathlib/commit/603c7baebdc17c3422a6c444d00aec66e51ed356)
chore(scripts): update nolints.txt

### [2020-02-22T12:05:43+00:00](https://github.com/leanprover-community/mathlib/commit/eabcd1326dcbd61ebb31ddd7954d9af8d56a7535)
feat(category_theory/limits): kernels ([#1988](https://github.com/leanprover-community/mathlib/pull/#1988))

* chore(category_theory): require morphisms live in Type

* move back to Type

* fixes

* feat(category_theory/limits): kernels

* finishing basic API for kernels

* update post [#1412](https://github.com/leanprover-community/mathlib/pull/#1412)

* fix

* documentation

* documentation

* more docs

* replacing dumb code

* forall -> Pi

* removing all instances

* working on Reid's suggested lemmas

* experiments

* lots to do

* Show that equalizers are monomorphisms

* Show that equalizer of (f, f) is always an iso

* Show that an equalizer that is an epimorphism is an isomorphism

* Clean up

* Show that the kernel of a monomorphism is zero

* Fix

* Show that the kernel of a linear map is a kernel in the categorical sense

* Modify proof

* Compactify proof

* Various cleanup

* Some more cleanup

* Fix bibtex

* Address some issues raised during discussion of the PR

* Fix some more incorrect indentation

* Some more minor fixes

* Unify capitalization in Bibtex entries

* Replace equalizer.lift.uniq with equalizer.hom_ext

* Some more slight refactors

* Typo

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-22T11:14:19+01:00](https://github.com/leanprover-community/mathlib/commit/a9ed54ca0329771deab21d7574d7d19b417bf4a3)
feat(ci): upload all branch builds to Azure server ([#2032](https://github.com/leanprover-community/mathlib/pull/#2032))

### [2020-02-22T09:45:22+00:00](https://github.com/leanprover-community/mathlib/commit/928496ad56bcf9064ff036ba6535156ecf0d24be)
feat(category_theory/limits) Binary product from pullbacks and terminal object ([#1998](https://github.com/leanprover-community/mathlib/pull/#1998))

* Binary product from pullbacks and terminal object

* Update binary_products.lean

* simplifications

* pare down the proof a bit more

* changes from review

* adjust simp to rw

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-22T08:15:14+00:00](https://github.com/leanprover-community/mathlib/commit/03af46c48c7db763573270510077f66192b3c535)
chore(presheafed_space): avoid deterministic timeout ([#1617](https://github.com/leanprover-community/mathlib/pull/#1617))

* chore(presheafed_space): avoid deterministic timeout

* fix proofs: now works with -T16000

* fix

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-22T00:36:59+00:00](https://github.com/leanprover-community/mathlib/commit/11797e62ce984eb26e7b2912b13ab2acfa88d8b4)
chore(topology/metric_space/emetric_space): use filter bases in 2 proofs ([#2034](https://github.com/leanprover-community/mathlib/pull/#2034))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-21T22:47:11+00:00](https://github.com/leanprover-community/mathlib/commit/ffb6d6eb2ddb3cbc87c3518696f8940765ed04b7)
feat(tactic): add various tactics about local definitions ([#1953](https://github.com/leanprover-community/mathlib/pull/#1953))

* feat(tactic): add various tactics about local definitions

* remove {α β}

* rename generalize' in monotonicity.

* updates after reviews

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-21T21:54:18+01:00](https://github.com/leanprover-community/mathlib/commit/86c9417678ed050e2a9905d150c873748e739dcd)
doc(topology/dense_embedding): fix list syntax in a comment ([#2033](https://github.com/leanprover-community/mathlib/pull/#2033))

### [2020-02-21T19:29:22+00:00](https://github.com/leanprover-community/mathlib/commit/ff36e0f7a8a31844aa07d2a342171da1c61f18a1)
chore(scripts): update nolints.txt

### [2020-02-21T17:46:31+00:00](https://github.com/leanprover-community/mathlib/commit/472156f9ea40e95adb5fcaa49ae1a5573ca442ae)
feat(tactic/lint): check that left-hand side of all simp lemmas is in simp-normal form ([#2017](https://github.com/leanprover-community/mathlib/pull/#2017))

* feat(tactic/lint): check that lhs of simp lemmas are in simp nf

* fix(topology/metric_space/basic): remove @[simp] from lemmas with {x,y} on the lhs

* chore(topology/local_homeomorph): remove redundant lemmas from the simp set

* fix(topology/algebra/module): fix simp-nf lints

* chore(ring_theory/localization): mark fewer things as simp

* fix(set_theory/ordinal): put lhs into simp-normal form

* chore(algebra/big_operators): fix simp lemmas

* chore(data/set/lattice): remove redundant simp lemmas

* chore(data/set/basic): remove redundant simp lemma

* chore(data/zsqrtd/basic): make simp_nf lint happy

* fix(order/complete_lattice): remove lemmas from simp set

* chore(order/filter/filter_product): fix linting issues

* feat(data/mv_polynomial): add simp lemmas about neg

* fix(data/multiset): fix simp_nf linter issues

* chore(data/list/sigma): fix simp_nf linter issues

* fix(data/list/basic): remove redundant and unapplicable simp lemmas

* fix(measure_theory/set_integral): remove redundant simp lemma

* fix(measure_theory/l1_space): remove redundant simp lemmas

* fix(algebra/group_power): remove simp lemmas that are not in nf

* fix(algebra/field): remove redundant simp lemma

* chore(data/list/alist): remove simp lemmas

* fix(data/int/basic): simp-normal form for coercions...

* fix(data/finset): formulate simp-lemmas for simp-nf

* fix(data/int/parity): use simp-normal form

* fix(data/equiv/denumerable): remove redundant simp lemma

* fix(category_theory/**): fix simp-normal forms

* fix(set_theory/zfc): put simp lemmas in simp-normal form

* fix(tactlic/lint): ignore sub_eq_add_neg for simp_nf lint

* doc(tactic/lint): add simp_nf linter to module doc

* doc(docs/commands): add simp_nf linter

* fix(*): put lemmas in simp-normal form

### [2020-02-21T11:26:12+00:00](https://github.com/leanprover-community/mathlib/commit/bb7631fb1c9ddfa3d11cb58d44b8cd91a0a6620c)
feat(algebraic_geometry/prime_spectrum): vanishing ideal ([#1972](https://github.com/leanprover-community/mathlib/pull/#1972))

* wip

* wip

* Remove stuff for next PR

* Update prime_spectrum.lean

* Process comments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-21T05:36:39+00:00](https://github.com/leanprover-community/mathlib/commit/b30b5e95dac3e6fa8f642b2ff7c6aea814c2c0ae)
feat(tactic/hint): update tactic list ([#2024](https://github.com/leanprover-community/mathlib/pull/#2024))

* feat(tactic/hint): update tactic list

* Removing `fsplit` in favour of `fconstructor`.

Co-Authored-By: Floris van Doorn <fpvdoorn@gmail.com>

* fix test

* silence a test

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-21T02:50:57+00:00](https://github.com/leanprover-community/mathlib/commit/888e75b5fddd10171cece16cef77017338bc0caf)
refactor(*/multilinear): better right curryfication ([#1985](https://github.com/leanprover-community/mathlib/pull/#1985))

* feat(data/fin): append

* Update fin.lean

* Update fintype.lean

* replace but_last with init

* cons and append commute

* feat(*/multilinear): better multilinear

* docstrings

* snoc

* fix build

* comp_snoc and friends

* fix docstring

* typo

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-20T15:52:23-08:00](https://github.com/leanprover-community/mathlib/commit/eeedc6a7973cc32816d77a2b2c4a99d8d8058d06)
fix(*): remove loopy simp lemmas ([#2026](https://github.com/leanprover-community/mathlib/pull/#2026))

### [2020-02-20T21:25:20+00:00](https://github.com/leanprover-community/mathlib/commit/b0eeea468a62a76864895ea29e5156a5dfce0f74)
fix(data/bool): remove simp attribute from commutativity lemmas ([#2027](https://github.com/leanprover-community/mathlib/pull/#2027))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-20T16:55:22+00:00](https://github.com/leanprover-community/mathlib/commit/aefdb86ea76d2a78e3c54b18c987a128493db469)
feat(data/int/basic): format -42 as -42 instead of -(41+1) ([#2025](https://github.com/leanprover-community/mathlib/pull/#2025))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-20T15:24:23+00:00](https://github.com/leanprover-community/mathlib/commit/d933ea538d2e9237e3448d4186817c67ce3f1ece)
doc(lint): add linter missing from list of defaults ([#2023](https://github.com/leanprover-community/mathlib/pull/#2023))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-20T14:50:00+01:00](https://github.com/leanprover-community/mathlib/commit/43dd93881abf2d0b93a2d0c50927272cc2089ab0)
chore(ci): check roadmap directory ([#2022](https://github.com/leanprover-community/mathlib/pull/#2022))

* chore(ci): check roadmap directory

partially addresses [#2016](https://github.com/leanprover-community/mathlib/pull/#2016)

* fix roadmap compilation

### [2020-02-20T11:06:30+00:00](https://github.com/leanprover-community/mathlib/commit/4e398cca14f2e9560449ab3afa35b5b242c95ca2)
chore(scripts): update nolints.txt

### [2020-02-20T09:21:34+00:00](https://github.com/leanprover-community/mathlib/commit/68b9c16458fb32666cb9dc94ff2f9d2dbb8c83f1)
feat(algebra/group): add `units.lift_right` and `is_unit.lift_right` ([#2020](https://github.com/leanprover-community/mathlib/pull/#2020))

* Rename type variables, add a docstring

* feat(algebra/group): add `units.lift_right` and `is_unit.lift_right`

These defs/lemmas may be useful for `monoid_localization`.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-20T02:23:59+00:00](https://github.com/leanprover-community/mathlib/commit/d42d29bf0793f203abc8165ccaf5c55bd77fa2b3)
fix(tactic/tauto): fix typos ([#2019](https://github.com/leanprover-community/mathlib/pull/#2019))

* fix(tactic/tauto): fix typos

* fix same error in tactics.md

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-20T00:52:33+00:00](https://github.com/leanprover-community/mathlib/commit/34724f43b071dd132fa45db3080de58d694f3070)
chore(scripts): update nolints.txt

### [2020-02-19T23:20:36+00:00](https://github.com/leanprover-community/mathlib/commit/2d6556dd69faddc92baacaf97d6c0fb39a804b19)
feat(analysis/mean_inequalities) : Prove AM-GM ([#1836](https://github.com/leanprover-community/mathlib/pull/#1836))

* feat(analysis/mean_inequalities) : Prove AM-GM

* Update, add more inequalities

* Update src/analysis/convex/specific_functions.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Update src/analysis/mean_inequalities.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Update src/analysis/mean_inequalities.lean

* Small fixes, thanks @sgouezel

* Update src/analysis/mean_inequalities.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-19T21:46:28+00:00](https://github.com/leanprover-community/mathlib/commit/5b77b64fea7185318628822c2126bfc18c419614)
refactor(analysis/calculus/tangent_cone): split a proof into parts ([#2013](https://github.com/leanprover-community/mathlib/pull/#2013))

* refactor(analysis/calculus/tangent_cone): split a proof into parts

Prove `submodule.eq_top_of_nonempty_interior` and use it in the
proof of `unique_diff_on_convex`.

* Update src/analysis/normed_space/basic.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Fix a docstring.

* Update src/topology/algebra/module.lean

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-02-19T12:42:42+00:00](https://github.com/leanprover-community/mathlib/commit/bcdb4c3ae78e59d5b6b545ba2a5454f6254916bb)
chore(scripts): update nolints.txt

### [2020-02-19T11:05:33+00:00](https://github.com/leanprover-community/mathlib/commit/856369501cf0a57fcc18a76ce887158b7405da6b)
refactor(algebra/associated): move `is_unit` def to `algebra/group` ([#2015](https://github.com/leanprover-community/mathlib/pull/#2015))

* refactor(algebra/associated): move `is_unit` def to `algebra/group`

I think it makes sense to have it near `units`.

* Add a docstring to `units`, mention `is_unit` there.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-19T08:48:40+00:00](https://github.com/leanprover-community/mathlib/commit/177c06f537275f3c2df64c6350dad518012cfb54)
chore(measure_theory/*): make a few proofs slightly shorter ([#2014](https://github.com/leanprover-community/mathlib/pull/#2014))

### [2020-02-18T23:13:13+00:00](https://github.com/leanprover-community/mathlib/commit/8700aa7d78b10b65cf8db1d9e320872ae313517a)
feat(docs): install mathlibtools package with pip ([#2010](https://github.com/leanprover-community/mathlib/pull/#2010))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-18T20:06:18+00:00](https://github.com/leanprover-community/mathlib/commit/2198d2c43b58ef9ca85b30f9290b69583075ef6e)
feat(roadmap): add some formal roadmaps in topology ([#1914](https://github.com/leanprover-community/mathlib/pull/#1914))

* feat(roadmap): add some formal roadmaps in topology

* Update roadmap/topology/paracompact.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update roadmap/todo.lean

* Update roadmap/topology/shrinking_lemma.lean

Co-Authored-By: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

* add `todo` tactic as a wrapper for `exact todo`

* Update roadmap/topology/shrinking_lemma.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* copyright notices and module docs

* oops

Co-authored-by: Scott Morrison <scott@tqft.net>
Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-18T17:07:17+00:00](https://github.com/leanprover-community/mathlib/commit/0c2dbd5685dc5a2472445a5c63d1defe2d2abf86)
chore(analysis/normed_space/basic): implicit args ([#2011](https://github.com/leanprover-community/mathlib/pull/#2011))

Arguments to these `iff`s should be implicit.

### [2020-02-18T14:56:44+00:00](https://github.com/leanprover-community/mathlib/commit/8a660ecbf4b04f170e43ecb965706571f80bf2cf)
feat(scripts/deploy_nightly): change pre-release to release ([#2009](https://github.com/leanprover-community/mathlib/pull/#2009))

The `--pre-release` doesn't really achieve anything as far as we can tell, and complicates some scripting: see https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20nightlies

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-18T12:09:47+00:00](https://github.com/leanprover-community/mathlib/commit/115e513526d8689bb950eb4f73a6df0fd0414ce9)
chore(topology/constructions): rename `tendsto_prod_mk_nhds` ([#2008](https://github.com/leanprover-community/mathlib/pull/#2008))

New name is `tendsto.prod_mk_nhds`. Also use it in a few proofs and
generalize `tendsto_smul` to a `topological_semimodule`.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-18T09:33:08+00:00](https://github.com/leanprover-community/mathlib/commit/1435a196db69a7886a11e310e8923f3dcf249b81)
refactor(topology/maps): split the proof of `is_open_map_iff_nhds_le` ([#2007](https://github.com/leanprover-community/mathlib/pull/#2007))

Extract a lemma `is_open_map.image_mem_nhds` from the proof, and make
the proof use this lemma.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-18T02:10:56+00:00](https://github.com/leanprover-community/mathlib/commit/2d00f2081b63cd943dc6f8db334a63ebf8edf875)
feat(data/fin): init and snoc ([#1978](https://github.com/leanprover-community/mathlib/pull/#1978))

* feat(data/fin): append

* Update fin.lean

* Update fintype.lean

* replace but_last with init

* cons and append commute

* change append to snoc

* comp_snoc and friends

* markdown in docstrings

* fix docstring

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-18T00:40:07+00:00](https://github.com/leanprover-community/mathlib/commit/b373daea17bdd591ea99c3c1efadd960f46ad87a)
feat(linear_algebra/contraction): define contraction maps between a module and its dual ([#1973](https://github.com/leanprover-community/mathlib/pull/#1973))

* feat(linear_algebra/contraction): define contraction maps between a module and its dual

* Implicit carrier types for smul_comm

* Add comment with license and file description

* Build on top of extant linear_map.smul_right

* Feedback from code review

Co-authored-by: Johan Commelin <johan@commelin.net>

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-17T23:10:41+00:00](https://github.com/leanprover-community/mathlib/commit/4299a801f21d8a2ee7082f521bebadbf98ade1a8)
refactor(topology/subset_properties): use finite subcovers indexed by types ([#1980](https://github.com/leanprover-community/mathlib/pull/#1980))

* wip

* wip

* wip

* wip

* WIP

* WIP

* Reset changes that belong to other PR

* Docstrings

* Add Heine--Borel to docstring

* Cantor's intersection theorem

* Cantor for sequences

* Generalise Cantor intersection thm

* More fixes

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-17T21:45:03+00:00](https://github.com/leanprover-community/mathlib/commit/bbf5d1a5b96dae1932bd4e10b617b481346b0a2d)
refactor(algebra/field): partially migrate to bundled homs ([#1999](https://github.com/leanprover-community/mathlib/pull/#1999))

* refactor(algebra/field): partially migrate to bundled homs

* Add a few `@[simp]` attrs

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-17T20:10:20+00:00](https://github.com/leanprover-community/mathlib/commit/6cdd96b33d32d56d21714ff7a23cb53851a85f9f)
chore(*): reduce proof size ([#2006](https://github.com/leanprover-community/mathlib/pull/#2006))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-17T18:37:15+00:00](https://github.com/leanprover-community/mathlib/commit/5eefae2765261bc3c1b840158f3f8b32bc94fd08)
chore(set_theory/ordinal): shorten proofs ([#2005](https://github.com/leanprover-community/mathlib/pull/#2005))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-17T17:00:24+00:00](https://github.com/leanprover-community/mathlib/commit/5f0669282c6ec3dc6467e92862a6aee08c9065b6)
feat(data/set/intervals): add `Ici_subset_Ici`, `Iic_subset_Iic` ([#2003](https://github.com/leanprover-community/mathlib/pull/#2003))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-17T13:55:11+00:00](https://github.com/leanprover-community/mathlib/commit/f8d0931cd0787afb7566002286e926a20d50c1e2)
feat(tactic/rename_var): A teaching tactic ([#1974](https://github.com/leanprover-community/mathlib/pull/#1974))

* feat(tactic/rename_var): A teaching tactic

The goal is to teach that bound variables names are irrelevant, and also
help clarify local context.

* allow rename_var to act on several locations at once

* Apply suggestions from code review

by Rob.

Co-Authored-By: Rob Lewis <Rob.y.lewis@gmail.com>

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-17T12:19:30+00:00](https://github.com/leanprover-community/mathlib/commit/cd0e2f6af4201b832c1f6ebefbc352108ff38458)
add "Try this: " to squeeze_simp and suggest ([#1990](https://github.com/leanprover-community/mathlib/pull/#1990))

* add "Try this" to squeeze_simp and suggest

* update docs

* fix suggest tests

* add "try this" to rcases, rintro, and tidy

* add "try this" to hint

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-17T10:45:46+00:00](https://github.com/leanprover-community/mathlib/commit/557b01d2e4773e677fe522852ef0365efdb99868)
chore(analysis/calculus/tangent_cone): simplify a proof ([#2002](https://github.com/leanprover-community/mathlib/pull/#2002))

Use `linear_map.span_inl_union_inr` instead of repeating its proof.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-17T09:07:47+00:00](https://github.com/leanprover-community/mathlib/commit/b42e5687d8b45e47de69e64e944637a6a7b03e1c)
chore(algebra/group_power): rename type vars, minor cleanup ([#1997](https://github.com/leanprover-community/mathlib/pull/#1997))

The only non-BC change should be removing
is_group_hom.map_gpow` / `is_add_group_hom.map_gsmul` in favor of `monoid_hom.map_gpow`.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-17T07:29:08+00:00](https://github.com/leanprover-community/mathlib/commit/d673e55b1d8e0e959e4c558acc822790aca0afec)
feat(ring_theory/algebra): add ext_iff ([#1996](https://github.com/leanprover-community/mathlib/pull/#1996))

* feat(ring_theory/algebra): add ext_iff

* also add eq_top_iff

* Update src/ring_theory/algebra.lean

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-17T05:59:51+00:00](https://github.com/leanprover-community/mathlib/commit/770c56bd21b821bb9b482d942af73ffc33775ac9)
doc(topology/metric_space/basic): add 1 docstring ([#2000](https://github.com/leanprover-community/mathlib/pull/#2000))

* doc(topology/metric_space/basic): add 1 docstring

* Update src/topology/metric_space/basic.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-17T04:35:05+00:00](https://github.com/leanprover-community/mathlib/commit/dbb21c882f87fdeb25085049a48eb1f998d759ec)
chore(scripts): update nolints.txt

### [2020-02-17T02:59:50+00:00](https://github.com/leanprover-community/mathlib/commit/1b1b626ae32b9a23d4eeab59dd78e0f9b3ac594e)
chore(topology/sequences): use filter bases, minor fixes ([#2001](https://github.com/leanprover-community/mathlib/pull/#2001))

### [2020-02-15T23:38:34+00:00](https://github.com/leanprover-community/mathlib/commit/c7eb6f81a471c622ee5366e25f5710384622bf11)
chore(algebra/group/hom): add a missing `simp` lemma ([#1994](https://github.com/leanprover-community/mathlib/pull/#1994))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-15T13:33:39+00:00](https://github.com/leanprover-community/mathlib/commit/dbb61ea3a6cd8f68fc2fde3edf12d7995ad1d4ba)
feat(tactic/hint): try out a customisable list of tactics, and report which ones make progress ([#1955](https://github.com/leanprover-community/mathlib/pull/#1955))

* feat(tactic/hint): try out a fixed list of tactics, and report which ones make progress

* add hint to tactic.default

* make the list of hint tactics customisable

* suggestion

* fix linting errors

* simplify use of add_hint, and add hints

* remove TODO

* Update src/tactic/hint.lean

Co-Authored-By: Rob Lewis <Rob.y.lewis@gmail.com>

* various

* Update docs/tactics.md

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-02-15T09:59:41+00:00](https://github.com/leanprover-community/mathlib/commit/0b6d398e01faa2cbb856cd6163c8dd6578ebefdf)
chore(algebra/group/basic): rename type vars ([#1989](https://github.com/leanprover-community/mathlib/pull/#1989))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-14T17:55:38+00:00](https://github.com/leanprover-community/mathlib/commit/d36930b25a644250f68129d1aa40c777d2aa3a91)
chore(scripts): update nolints.txt

### [2020-02-14T16:27:08+00:00](https://github.com/leanprover-community/mathlib/commit/edefe20e37983cf0b56ba1f92adf1544bc5a0e60)
feat(ci): update nolints.txt after master builds ([#1979](https://github.com/leanprover-community/mathlib/pull/#1979))

* feat(ci): update nolints.txt after master builds

* avoid failure when no changes

* update for production

* update condition

* header override is already unset

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-14T10:30:14+00:00](https://github.com/leanprover-community/mathlib/commit/938960ee6d6aef11647a38711c84d49dd1776731)
fix(scripts/deploy_docs): remove last trace of nightly builds ([#1986](https://github.com/leanprover-community/mathlib/pull/#1986))

### [2020-02-14T01:44:12+00:00](https://github.com/leanprover-community/mathlib/commit/4441394dfc0d547cd34ff01fc9b1a136a7f49824)
chore(category_theory/conj): avoid `is_mul_hom` ([#1984](https://github.com/leanprover-community/mathlib/pull/#1984))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-14T00:07:30+00:00](https://github.com/leanprover-community/mathlib/commit/9a911258bc5fca8bfc79dcb4e781bbdb8dd29d0d)
chore(group_theory/sub*) : rename type vars ([#1982](https://github.com/leanprover-community/mathlib/pull/#1982))

Use `M`, `G`, `A` instead of greek letters

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-13T22:27:55+00:00](https://github.com/leanprover-community/mathlib/commit/db1c50015039e782c15a10cbb5b317dca03b1e56)
refactor(data/set/function): use dot notation ([#1934](https://github.com/leanprover-community/mathlib/pull/#1934))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-13T21:47:45+01:00](https://github.com/leanprover-community/mathlib/commit/0372fb02057edfa7a0f157b56894def30eaaaadc)
fix(scripts/deploy_docs.sh): header override is already unset

Before, the nightly and doc deploys were running in different builds.
Now they're in the same build, so we don't need to (and can't) unset the
variable twice.

### [2020-02-13T20:44:53+00:00](https://github.com/leanprover-community/mathlib/commit/56a52403c9a18eed273579e9bdc93e4e7c860c84)
feat(calculus/fderiv): invariance of fderiv under linear equivs ([#1977](https://github.com/leanprover-community/mathlib/pull/#1977))

* feat(calculus/fderiv): invariance of fderiv under linear equivs

* missing material

* coherent naming conventions

* fix build

* coherent naming conventions

* yury's comments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-13T19:03:11+00:00](https://github.com/leanprover-community/mathlib/commit/a79a055fe4483bdbba2d928c00a9867264944359)
refactor(group_theory/submonoid): redefine `subtype.monoid` manually ([#1981](https://github.com/leanprover-community/mathlib/pull/#1981))

* refactor(group_theory/submonoid): redefine `subtype.monoid` manually

This way `group.to_monoid subtype.group` is defeq `subtype.monoid group.to_monoid`.

* Fix compile of `ring_theory/integral_closure`

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-02-13T18:26:28+01:00](https://github.com/leanprover-community/mathlib/commit/b7ffc6f36efdf0b8c98f93a8d2e9db8b05bd5fc9)
fix(mergify): remove references to nightly builds

### [2020-02-13T13:18:09+01:00](https://github.com/leanprover-community/mathlib/commit/aa4da84a2558c3ff5aaa10366fd2412dcfb85e6b)
chore(ci): don't build with Lean nightly ([#1975](https://github.com/leanprover-community/mathlib/pull/#1975))

* chore(ci): don't build with Lean nightly

* fix condition for doc upload

### [2020-02-11T15:33:16+00:00](https://github.com/leanprover-community/mathlib/commit/abd412b9e841845819ac46a6947d5da239cc84e5)
chore(scripts): update nolints ([#1976](https://github.com/leanprover-community/mathlib/pull/#1976))

### [2020-02-11T13:43:45+00:00](https://github.com/leanprover-community/mathlib/commit/176852df72c07156d18c9ba537e08da1c50cb4c6)
feat(tactic/lint): check if inhabited instances should be nonempty ([#1971](https://github.com/leanprover-community/mathlib/pull/#1971))

* add inhabited vs nonempty linter

* add new linter to ci

* start updating files to pass linter

* more linter fixes

* fix more linter errors

* more fixes

* fix build

* remove unnecessary instances

* nicer proof

* adjust inhabit tactic

* improve proof

* move instance to better place

* generalize instance

* fix build

* inhabited -> nonempty

* fix build

### [2020-02-11T09:25:41+00:00](https://github.com/leanprover-community/mathlib/commit/4e2c7e36308b6349c5a794237ebfef91e309ac2f)
feat(topology/subset_properties): alternative definitions of irreducible and connected ([#1970](https://github.com/leanprover-community/mathlib/pull/#1970))

* refactor(topology/*): irreducible and connected sets are nonempty

* Fix typos

* Fix more typos

* Update src/topology/subset_properties.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Update src/topology/subset_properties.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Refactor 'nonempty' fields

* Fix spacing in set-builder

* Use dot notation

* Write a comment on the nonempty assumption

* Apply suggestions from code review

* irreducible_iff statements

* Fix build

* Tiny improvements

* Justify that connected spaces are nonempty

* Add docstrings

* Update src/topology/subset_properties.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Update subset_properties.lean

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-10T16:32:09+00:00](https://github.com/leanprover-community/mathlib/commit/93ba8b6d19fc4b93c862de99e0021b502c7e9126)
refactor(topology/metric_space): introduce&use `edist`/`dist` bases ([#1969](https://github.com/leanprover-community/mathlib/pull/#1969))

* refactor(topology/metric_space): introduce&use `edist`/`dist` bases

* Introduce bases for `emetric_space` and `metric_space`.
* Make some proofs use general facts about filter bases.

* Fix some lint errors

* Update src/topology/metric_space/emetric_space.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* +2 docstrings

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-09T09:33:32+00:00](https://github.com/leanprover-community/mathlib/commit/777f21412d557ba089b94a563048af9c6f27b9de)
refactor(data/matrix,linear_algebra): Use `matrix.mul` as default multiplication in matrix lemmas ([#1959](https://github.com/leanprover-community/mathlib/pull/#1959))

* Change `has_mul.mul` to `matrix.mul` in a few `simp` lemmas

* Standardise more lemmas for matrix multiplication

* Generalize `to_pequiv_mul_matrix` to rectangular matrices

Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-02-08T13:25:39+00:00](https://github.com/leanprover-community/mathlib/commit/bcb63ebf8d0c6274e8cf8717cedab49ae0dbdceb)
refactor(topology/*): irreducible and connected sets are nonempty ([#1964](https://github.com/leanprover-community/mathlib/pull/#1964))

* refactor(topology/*): irreducible and connected sets are nonempty

* Fix typos

* Fix more typos

* Update src/topology/subset_properties.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Update src/topology/subset_properties.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Refactor 'nonempty' fields

* Fix spacing in set-builder

* Use dot notation

* Write a comment on the nonempty assumption

* Apply suggestions from code review

* Fix build

* Tiny improvements

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-08T10:42:31+00:00](https://github.com/leanprover-community/mathlib/commit/2e18388b55b60cdf5648e222c27bfc7389f9d64a)
feat(linear_algebra): The Special linear group SL(n, R) ([#1960](https://github.com/leanprover-community/mathlib/pull/#1960))

* Define the special linear group

* Make definitions independent of PR [#1959](https://github.com/leanprover-community/mathlib/pull/#1959)

That PR changes `det_mul` to have another, still definitionally equal, type.
If the invocations to `det_mul` are independent of syntactic equality, i.e. we
only pass `det_mul` to `erw`, this branch should be compatible with the state
before the change and after.

* Documentation and code style improvements

* Improve module docstring

* Fix documentation

`matrix.special_linear_group` is not a set but a type

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Don't directly coerce from SL to linear maps

Now we coerce from `matrix.special_linear_group n R` to `matrix n n R` instead
of `general_linear_group R (n -> R)`

* Whitespace fixes

* Fix failing build in `src/linear_algebra/dual.lean`

* Give an almost generic formula for `det_adjugate`

* Move `det_eq_one_of_card_eq_zero` to the correct section

* Replace the ad-hoc assumption of `det_adjugate_of_invertible` with `is_unit`

* Fix linting error

There was an unnecessary assumption [decidable_eq α] floating around

* Replace `special_linear_group.val` with the appropriate coercions

* whitespace

Correctly indent continued line

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Docstrings for the `det_adjugate_of_...` lemmas

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-07T16:57:48+00:00](https://github.com/leanprover-community/mathlib/commit/2007d34f52385f2317cc1e04c8670d2b6260493c)
feat(analysis/normed_space/multilinear): norm on continuous multilinear maps ([#1956](https://github.com/leanprover-community/mathlib/pull/#1956))

* feat(analysis/normed_space/multilinear): norm on continuous multilinear maps

* docstring

* improved docstrings

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-07T06:21:24+00:00](https://github.com/leanprover-community/mathlib/commit/f912a6b493e2d0e2c224bf2e00f4e962cabbcc33)
feat(algebraic_geometry/prime_spectrum): first definitions ([#1957](https://github.com/leanprover-community/mathlib/pull/#1957))

* Start on prime spectrum

* Define comap betwee prime spectra; prove continuity

* Update src/algebraic_geometry/prime_spectrum.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* chore(*): rename `filter.inhabited_of_mem_sets` to `nonempty_of_mem_sets` ([#1943](https://github.com/leanprover-community/mathlib/pull/#1943))

In other names `inhabited` means that we have a `default` element.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

* refactor(linear_algebra/multilinear): cleanup of multilinear maps ([#1921](https://github.com/leanprover-community/mathlib/pull/#1921))

* staging [ci skip]

* staging

* staging

* cleanup norms

* complete currying

* docstrings

* docstrings

* cleanup

* nonterminal simp

* golf

* missing bits for derivatives

* sub_apply

* cleanup

* better docstrings

* remove two files

* reviewer's comments

* use fintype

* line too long

Co-authored-by: Yury G. Kudryashov <urkud@ya.ru>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

* feat(ring_theory/power_series): several simp lemmas ([#1945](https://github.com/leanprover-community/mathlib/pull/#1945))

* Small start on generating functions

* Playing with Bernoulli

* Finished sum_bernoulli

* Some updates after PRs

* Analogue for mv_power_series

* Cleanup after merged PRs

* feat(ring_theory/power_series): several simp lemmas

* Remove file that shouldn't be there yet

* Update src/ring_theory/power_series.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Generalise lemma to canonically_ordered_monoid

* Update name

* Fix build

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

* feat(tactic/lint): Three new linters, update illegal_constants ([#1947](https://github.com/leanprover-community/mathlib/pull/#1947))

* add three new linters

* fix failing declarations

* restrict and rename illegal_constants linter

* update doc

* update ge_or_gt test

* update mk_nolint

* fix error

* Update scripts/mk_nolint.lean

Co-Authored-By: Rob Lewis <Rob.y.lewis@gmail.com>

* Update src/meta/expr.lean

Co-Authored-By: Rob Lewis <Rob.y.lewis@gmail.com>

* clarify unfolds_to_class

* fix names since name is no longer protected

also change one declaration back to instance, since it did not cause a linter failure

* fix errors, move notes to docstrings

* add comments to docstring

* update mk_all.sh

* fix linter errors

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

* feat(number_theory/bernoulli): Add definition of Bernoulli numbers ([#1952](https://github.com/leanprover-community/mathlib/pull/#1952))

* Small start on generating functions

* Playing with Bernoulli

* Finished sum_bernoulli

* Some updates after PRs

* Analogue for mv_power_series

* Cleanup after merged PRs

* feat(number_theory/bernoulli): Add definition of Bernoulli numbers

* Remove old file

* Process comments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

* feat(topology/algebra/multilinear): define continuous multilinear maps ([#1948](https://github.com/leanprover-community/mathlib/pull/#1948))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

* feat(data/set/intervals): define intervals and prove basic properties ([#1949](https://github.com/leanprover-community/mathlib/pull/#1949))

* things about intervals

* better documentation

* better file name

* add segment_eq_interval

* better proof for is_measurable_interval

* better import and better proof

* better proof

Co-authored-by: Yury G. Kudryashov <urkud@ya.ru>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

* refactor(*): migrate from `≠ ∅` to `set.nonempty` ([#1954](https://github.com/leanprover-community/mathlib/pull/#1954))

* refactor(*): migrate from `≠ ∅` to `set.nonempty`

Sorry for a huge PR but it's easier to do it in one go.
Basically, I got rid of all `≠ ∅` in theorem/def types, then fixed
compile.

I also removed most lemmas about `≠ ∅` from `set/basic` to make sure
that I didn't miss something I should change elsewhere. Should I
restore (some of) them?

* Fix compile of `archive/`

* Drop +1 unneeded argument, thanks @sgouezel.

* Fix build

* Update src/algebraic_geometry/prime_spectrum.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Update src/algebraic_geometry/prime_spectrum.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Change I to s, and little fixes

* Update src/algebraic_geometry/prime_spectrum.lean

Co-Authored-By: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

* Update src/algebraic_geometry/prime_spectrum.lean

Co-Authored-By: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

* Update src/algebraic_geometry/prime_spectrum.lean

Co-Authored-By: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

* Update src/algebraic_geometry/prime_spectrum.lean

Co-Authored-By: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

* Indentation

* Update prime_spectrum.lean

* fix build

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Yury G. Kudryashov <urkud@ya.ru>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>
Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: Zhouhang Zhou <zhouhanz@andrew.cmu.edu>
Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-02-06T15:25:57+00:00](https://github.com/leanprover-community/mathlib/commit/fb160f0eb51d03cda00467802c02884f95260806)
refactor(topology/continuous_on): use filter bases ([#1968](https://github.com/leanprover-community/mathlib/pull/#1968))

### [2020-02-06T12:20:38+00:00](https://github.com/leanprover-community/mathlib/commit/0e533d06addb1cbb0366b52e0036e49ec825942e)
refactor(topology/basic): rewrite some proofs using filter bases ([#1967](https://github.com/leanprover-community/mathlib/pull/#1967))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-06T10:51:04+00:00](https://github.com/leanprover-community/mathlib/commit/b4c2ec2e1ea8c9b5728cece050aa1c2b26d2e9c8)
chore(topology/metric_space/basic): simplify `tendsto_nhds` ([#1966](https://github.com/leanprover-community/mathlib/pull/#1966))

* chore(topology/metric_space/basic): simplify `tendsto_nhds`

No reason to have an extra `∃ n ∈ f`.

* whitespace

Co-Authored-By: Johan Commelin <johan@commelin.net>

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-06T09:12:40+00:00](https://github.com/leanprover-community/mathlib/commit/34f9a172b70a40c2255dcd0348bae6f188ae9624)
feat(*): a few simple lemmas ([#1965](https://github.com/leanprover-community/mathlib/pull/#1965))

### [2020-02-05T20:37:51+00:00](https://github.com/leanprover-community/mathlib/commit/8c086a68e919549bb9d88ee76ac643a9cfcb3328)
chore(tactic/basic,default): add missing tactics ([#1962](https://github.com/leanprover-community/mathlib/pull/#1962))

### [2020-02-05T17:46:23+00:00](https://github.com/leanprover-community/mathlib/commit/8786ea6d6d46d6969ac9a869eb818bf100802882)
refactor(measure_theory/set_integral): move set integral into namespace set and add some lemmas ([#1950](https://github.com/leanprover-community/mathlib/pull/#1950))

* move set integral into namespace set and add some lemmas

* Update bochner_integration.lean

* better theorem names

* Update set_integral.lean

* Update set_integral.lean

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-05T14:27:45+00:00](https://github.com/leanprover-community/mathlib/commit/08581ccc3eca5e1d83b653599cebb20333a8f612)
feat(tactic/rename): Add improved renaming tactic ([#1916](https://github.com/leanprover-community/mathlib/pull/#1916))

* feat(tactic/rename): Add improved renaming tactic

We add a tactic `rename'` which works like `rename`, with the following
improvements:

* Multiple hypotheses can be renamed at once.
* Renaming always preserve the position of a hypothesis in the context.

* Move private def `drop_until_inclusive` to `list.after`

* Change `rename'` docs to rely less on knowledge of `rename`

* Improve formatting of list.after docs

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-02-05T13:11:44+01:00](https://github.com/leanprover-community/mathlib/commit/6845aaa696e0869a1159c3ac06548a0c156b9995)
chore(*): bump Lean version to 3.5.1c ([#1958](https://github.com/leanprover-community/mathlib/pull/#1958))

* chore(leanpkg.toml): bump lean version to 3.5.0

* update CI to build with 3.5.0

* update mergify

* update contribute docs

* update deploy_nightly.sh

* 3.5.0 -> 3.5.1

### [2020-02-05T06:25:59+00:00](https://github.com/leanprover-community/mathlib/commit/dd8da5165bd00b07408dbb87173e96908c6926a4)
refactor(*): migrate from `≠ ∅` to `set.nonempty` ([#1954](https://github.com/leanprover-community/mathlib/pull/#1954))

* refactor(*): migrate from `≠ ∅` to `set.nonempty`

Sorry for a huge PR but it's easier to do it in one go.
Basically, I got rid of all `≠ ∅` in theorem/def types, then fixed
compile.

I also removed most lemmas about `≠ ∅` from `set/basic` to make sure
that I didn't miss something I should change elsewhere. Should I
restore (some of) them?

* Fix compile of `archive/`

* Drop +1 unneeded argument, thanks @sgouezel.

### [2020-02-04T22:11:27+00:00](https://github.com/leanprover-community/mathlib/commit/253f75c8c4af1b6c838bd13e1de9d80e16c89354)
feat(data/set/intervals): define intervals and prove basic properties ([#1949](https://github.com/leanprover-community/mathlib/pull/#1949))

* things about intervals

* better documentation

* better file name

* add segment_eq_interval

* better proof for is_measurable_interval

* better import and better proof

* better proof

Co-authored-by: Yury G. Kudryashov <urkud@ya.ru>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-04T19:56:41+00:00](https://github.com/leanprover-community/mathlib/commit/475a669a15ceaba083000caea010d349a30279f0)
feat(topology/algebra/multilinear): define continuous multilinear maps ([#1948](https://github.com/leanprover-community/mathlib/pull/#1948))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-04T14:32:21+00:00](https://github.com/leanprover-community/mathlib/commit/9dbc894fe9bd8384a52916b4452a6c8919836341)
feat(number_theory/bernoulli): Add definition of Bernoulli numbers ([#1952](https://github.com/leanprover-community/mathlib/pull/#1952))

* Small start on generating functions

* Playing with Bernoulli

* Finished sum_bernoulli

* Some updates after PRs

* Analogue for mv_power_series

* Cleanup after merged PRs

* feat(number_theory/bernoulli): Add definition of Bernoulli numbers

* Remove old file

* Process comments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-04T12:42:22+00:00](https://github.com/leanprover-community/mathlib/commit/c5febb524e160b1019e1cecd66ba569270d09680)
feat(tactic/lint): Three new linters, update illegal_constants ([#1947](https://github.com/leanprover-community/mathlib/pull/#1947))

* add three new linters

* fix failing declarations

* restrict and rename illegal_constants linter

* update doc

* update ge_or_gt test

* update mk_nolint

* fix error

* Update scripts/mk_nolint.lean

Co-Authored-By: Rob Lewis <Rob.y.lewis@gmail.com>

* Update src/meta/expr.lean

Co-Authored-By: Rob Lewis <Rob.y.lewis@gmail.com>

* clarify unfolds_to_class

* fix names since name is no longer protected

also change one declaration back to instance, since it did not cause a linter failure

* fix errors, move notes to docstrings

* add comments to docstring

* update mk_all.sh

* fix linter errors

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-03T13:52:06+00:00](https://github.com/leanprover-community/mathlib/commit/bfa7055d9fc18c37baf6c9c027cf543f662155f4)
feat(ring_theory/power_series): several simp lemmas ([#1945](https://github.com/leanprover-community/mathlib/pull/#1945))

* Small start on generating functions

* Playing with Bernoulli

* Finished sum_bernoulli

* Some updates after PRs

* Analogue for mv_power_series

* Cleanup after merged PRs

* feat(ring_theory/power_series): several simp lemmas

* Remove file that shouldn't be there yet

* Update src/ring_theory/power_series.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Generalise lemma to canonically_ordered_monoid

* Update name

* Fix build

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-03T11:26:46+00:00](https://github.com/leanprover-community/mathlib/commit/626466731fcb8a754d4cf1ec051bb6568777133d)
refactor(linear_algebra/multilinear): cleanup of multilinear maps ([#1921](https://github.com/leanprover-community/mathlib/pull/#1921))

* staging [ci skip]

* staging

* staging

* cleanup norms

* complete currying

* docstrings

* docstrings

* cleanup

* nonterminal simp

* golf

* missing bits for derivatives

* sub_apply

* cleanup

* better docstrings

* remove two files

* reviewer's comments

* use fintype

* line too long

Co-authored-by: Yury G. Kudryashov <urkud@ya.ru>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-03T09:55:20+00:00](https://github.com/leanprover-community/mathlib/commit/59629da64de8b56c73badec1876389239bc5a2dd)
chore(*): rename `filter.inhabited_of_mem_sets` to `nonempty_of_mem_sets` ([#1943](https://github.com/leanprover-community/mathlib/pull/#1943))

In other names `inhabited` means that we have a `default` element.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-03T07:14:34+00:00](https://github.com/leanprover-community/mathlib/commit/a3421322713f94ff0fa85a0db54bb801208eef7e)
refactor(topology/metric_space/emetric_space): redefine `diam` ([#1941](https://github.com/leanprover-community/mathlib/pull/#1941))

* feat(data/set/basic): define `set.subsingleton`

Also rename `nonempty.of_subset` to `nonempty.mono`

* Add a missing lemma

* refactor(topology/metric_space/emetric_space): redefine `diam`

* Give a more readable definition of `emetric.diam`;

* Add a few lemmas including diameter of a pair and of a triple of
  points;

* Simplify some proofs;

* Reformulate some theorems to use `∀ (x ∈ s) (y ∈ s)` instead
  of `∀ x y ∈ s` because the former plays better with existing `simp`
  lemmas.

* Redefine `set.subsingleton` using `(x ∈ s) (y ∈ s)`, prove `metric.diam_triangle`

### [2020-02-02T12:18:31+00:00](https://github.com/leanprover-community/mathlib/commit/1843bfc909765b7d8ec1f053cbb0126fe73c6b61)
feat(algebra/pointwise): pointwise scalar-multiplication lemmas ([#1925](https://github.com/leanprover-community/mathlib/pull/#1925))

* feat(algebra/pointwise): more lemmas about scaling sets

- rename `smul_set` to `scale_set` for disambiguation
- define `scale_set_action`, which subsumes `one_smul_set`
- additional lemmas lemmas

* fix(analysis/convex): refactor proofs for `scale_set`

* feat(algebra/pointwise): re-organise file

- subsume `pointwise_mul_action`

* feat(algebra/pointwise): remove `pointwise_mul_action`

- subsumed by `smul_set_action` with left-regular action.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-02T10:49:49+00:00](https://github.com/leanprover-community/mathlib/commit/58899d43f093c134b7dddf79c82cab3ea7adbbbc)
feat(data/set/basic): define `set.subsingleton` ([#1939](https://github.com/leanprover-community/mathlib/pull/#1939))

* feat(data/set/basic): define `set.subsingleton`

Also rename `nonempty.of_subset` to `nonempty.mono`

* Add a missing lemma

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-02T01:12:16+00:00](https://github.com/leanprover-community/mathlib/commit/bacd4da551f5239e0fe2054365d13ccb672a203f)
chore(data/subtype): fix `∀` vs `Π` ([#1940](https://github.com/leanprover-community/mathlib/pull/#1940))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-01T23:40:10+00:00](https://github.com/leanprover-community/mathlib/commit/11b94970b0c979c7ae68fb14169de5e2114e791c)
feat(data/fintype): range_prod_eq_univ_prod ([#1937](https://github.com/leanprover-community/mathlib/pull/#1937))

* feat(algebra/big_operators): range_prod_eq_univ_prod

* fix build, part 1

* fix build, part 2

* fix build, part 3

* Fix build, part 4

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-01T18:15:45+00:00](https://github.com/leanprover-community/mathlib/commit/6e6e6da67d9157542c754b4b2baba2fc8a42e452)
feat(data/nat/basic): two identities for `choose` ([#1936](https://github.com/leanprover-community/mathlib/pull/#1936))

* feat(data/nat/basic): two identities for `choose`

* fix build

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-02-01T16:26:13+00:00](https://github.com/leanprover-community/mathlib/commit/a500c24c46500eda7e1fdedc373507c4f212f8e9)
Update units.lean ([#1938](https://github.com/leanprover-community/mathlib/pull/#1938))

### [2020-02-01T10:59:44+00:00](https://github.com/leanprover-community/mathlib/commit/50bbb8dfb9900c76c964f8d5f7bebd57a6cd5cc4)
fix(data/nat/basic): make arguments to `choose_succ_right_eq` explicit ([#1935](https://github.com/leanprover-community/mathlib/pull/#1935))

### [2020-01-31T17:07:56+00:00](https://github.com/leanprover-community/mathlib/commit/5ce0c0a2b6b2ddf40a45a0667ac5ea8e015b19f3)
feat(linear_algebra/matrix): Add proof that trace AB = trace BA, for matrices. ([#1913](https://github.com/leanprover-community/mathlib/pull/#1913))

* feat(linear_algebra/matrix): trace AB = trace BA

* Remove now-redundant matrix.smul_sum

In a striking coincidence,
  https://github.com/leanprover-community/mathlib/pull/1910
was merged almost immediately before
  https://github.com/leanprover-community/mathlib/pull/1883
thus rendering matrix.smul_sum redundant.

* Make arguments explicit for matrix.trace, matrix.diag

* Tidy up whitespace

* Remove now-redundant type ascriptions

* Update src/linear_algebra/matrix.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Feedback from code review

* Generalize diag_transpose, trace_transpose.

With apologies to the CI for triggering another build :-/

* Explicit arguments trace, diag defs but not lemmas

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-31T14:13:56+01:00](https://github.com/leanprover-community/mathlib/commit/ddba2aea848fd91fe9788483f8ddee1981bfd61e)
chore(scripts/nolints): regenerate

### [2020-01-31T12:11:16+00:00](https://github.com/leanprover-community/mathlib/commit/a8ba81b3fb767c569cf7301cb70929038516f3a4)
feat(analysis/convex): define convex hull ([#1915](https://github.com/leanprover-community/mathlib/pull/#1915))

* feat(analysis/convex): define convex hull

fixes [#1851](https://github.com/leanprover-community/mathlib/pull/#1851)

* Fix compile

* Drop an unused argument

* Split line

* Rename some `_iff`s, drop others

* Mention `std_simplex` in the docs

* More docs

* Rename `α` to `ι`, other small fixes

* Use `range` instead of `f '' univ`

* More docs

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-30T15:28:23-08:00](https://github.com/leanprover-community/mathlib/commit/cae9cc97a2e20b6e5890ecf9cc60ddf45b623b64)
chore(ci): remove unused olean-rs setup from build ([#1932](https://github.com/leanprover-community/mathlib/pull/#1932))

### [2020-01-30T18:49:20+00:00](https://github.com/leanprover-community/mathlib/commit/80f5bd54e07561514a2d2ff238df3717507cde07)
feat(ci): build and push html documentation ([#1927](https://github.com/leanprover-community/mathlib/pull/#1927))

* feat(ci): build and push html doc generation

* fix(scripts/deploy_docs): change from temporary doc repo

* chore(ci): re-enable check for deployment

* fix git add

* Update scripts/deploy_docs.sh

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* Update .github/workflows/build.yml

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* Update scripts/deploy_docs.sh

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* Update scripts/deploy_docs.sh

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* remove chmod line

* revert additional check for testing purposes

* is this the error?

Try a test build before I get to the office

* rmeove _test

* reapply author attribution change

* revert change for testing

* missing --

* revert email and name config

Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-30T17:24:56+00:00](https://github.com/leanprover-community/mathlib/commit/4c2d6787f127f6263bc57de0258bd74723d669ed)
fix(data/set/finite): finite.fintype is a def ([#1931](https://github.com/leanprover-community/mathlib/pull/#1931))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-30T15:16:25+00:00](https://github.com/leanprover-community/mathlib/commit/b7e5f75fc9449053a0bde260c8d90a951c2313a4)
fix(tactic/scc): detect Props ([#1930](https://github.com/leanprover-community/mathlib/pull/#1930))

* fix(tactic/scc): detect Props

* test(test/tactics): add test

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-30T13:41:06+00:00](https://github.com/leanprover-community/mathlib/commit/1bd23bf14f5fe61add70fd291886375928dbc7f0)
feat(tactic/use): apply exists_prop after use ([#1882](https://github.com/leanprover-community/mathlib/pull/#1882))

* feat(tactic/use): apply exists_prop after use

* change implementation

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>
Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-01-30T11:13:26+00:00](https://github.com/leanprover-community/mathlib/commit/dcbc719bf506586cd3a9f82c3df474f3b4b72ae6)
fix(tactic/squeeze): compatibility with `simp [<-...]` ([#1923](https://github.com/leanprover-community/mathlib/pull/#1923))

* Add polyfills to `squeeze_simp` which should ensure compatibility with Lean 3.4 and 3.5

* Use `decode_simp_arg_list` so `squeeze_simp` doesn't have to pattern-match

(Except of course for the polyfill `has_to_tactic_format simp_arg_type` instance...)

* Reword comment for `erase_simp_args`

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-30T08:20:49+00:00](https://github.com/leanprover-community/mathlib/commit/9bc01784f72226c0dc833c5607f371faf373f11a)
fix(tactic/finish): fix one classical leak, document another ([#1929](https://github.com/leanprover-community/mathlib/pull/#1929))

* fix(tactic/finish): fix one classical leak, document another

* fix(src/tactic): deprecate intuitionistic versions in docstrings. Closes [#1927](https://github.com/leanprover-community/mathlib/pull/#1927).

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-30T00:09:21+00:00](https://github.com/leanprover-community/mathlib/commit/868333b9e72570dbb9cf7012adfb0960754bbf51)
feat(data/W): show finitely branching W types are encodable ([#1817](https://github.com/leanprover-community/mathlib/pull/#1817))

* feat(data/equiv,data/fintype): an encodable fintype is equiv to a fin

* feat(data/W): finitely branching W types are encodable

* feat(archive/examples/prop_encodable): show a type of propositional formulas is encodable

* fix(data/W): remove unused type class argument

* fix(data/equiv): add two docstrings

* fix(*): multiple fixes from code review

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-29T18:36:33+00:00](https://github.com/leanprover-community/mathlib/commit/4ac87ab5b346e3b8e355898d311d36235385a814)
chore(category_theory): use the new @[ext] attribute on structures ([#1663](https://github.com/leanprover-community/mathlib/pull/#1663))

* chore(category_theory): use the new @[ext] attribute on structures

* fixes

* unnecessary repeated exts

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-01-29T17:00:12+00:00](https://github.com/leanprover-community/mathlib/commit/4aa3eee46f0c7764481c6f3ada8897efa7c6d2c9)
chore(*): add inhabited instances ([#1898](https://github.com/leanprover-community/mathlib/pull/#1898))

* chore(*): add inhabited instances

* Fix linting errors.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-28T21:32:29+01:00](https://github.com/leanprover-community/mathlib/commit/b36831204c0db0c18b35918b56ffd3df55707c9e)
fix(ci): set GITHUB_TOKEN environment variable for gothub ([#1920](https://github.com/leanprover-community/mathlib/pull/#1920))

### [2020-01-28T20:04:21+01:00](https://github.com/leanprover-community/mathlib/commit/99962ad7c429fc6bf6859171d6e54be14520b13f)
fix(ci): unshallow repo before pushing nightly tags ([#1919](https://github.com/leanprover-community/mathlib/pull/#1919))

### [2020-01-28T18:53:21+00:00](https://github.com/leanprover-community/mathlib/commit/a948e31396a80aa5e40e27f9e871db5fb89a8156)
chore(analysis/convex): move to `analysis/convex/basic` ([#1918](https://github.com/leanprover-community/mathlib/pull/#1918))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-28T18:27:54+01:00](https://github.com/leanprover-community/mathlib/commit/e36d7eccc86d43f4e92b9ed9a9af7488830cf76d)
fix(ci): work around github hack

### [2020-01-28T16:36:42+01:00](https://github.com/leanprover-community/mathlib/commit/8e0d47ad988a94032d9c3b86cfeb96d132c7edae)
fix(ci): try again to fix authentication

### [2020-01-28T14:09:28+01:00](https://github.com/leanprover-community/mathlib/commit/75743acb771fd55d8c85663d026965df3da91585)
fix(scripts/deploy_nightly.sh): try to fix CI ([#1917](https://github.com/leanprover-community/mathlib/pull/#1917))

### [2020-01-28T11:49:19+00:00](https://github.com/leanprover-community/mathlib/commit/cafd19372c3333ee9c7af819dfda503b998a0699)
chore(*): use filter.eventually ([#1897](https://github.com/leanprover-community/mathlib/pull/#1897))

* chore(*): use filter.eventually

* Update src/measure_theory/integration.lean

Co-Authored-By: Yury G. Kudryashov <urkud@ya.ru>

* Fix closeds.complete_space.

* Fix tendsto_integral_of_dominated_convergence

* Fix tendsto_exp_at_top

* Fix exists_norm_eq_infi_of_complete_convex

* Use obtain.

* Use filter.eventually_of_forall

Co-authored-by: Yury G. Kudryashov <urkud@ya.ru>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-27T20:50:19+00:00](https://github.com/leanprover-community/mathlib/commit/bba84730c3969b1dd65ee5e9ae493e4b96986cec)
feat(linear_algebra): Matrix inverses for square nonsingular matrices ([#1816](https://github.com/leanprover-community/mathlib/pull/#1816))

* Prove that some matrices have inverses

* Finish the proof: show that the determinant is 0 if a column is repeated

* Show that nonsingular_inv is also a right inverse

* Cleanup and code movement

* Small lemmata on transpose

* WIP: some work on inverse matrices

* Code cleanup and documentation

* More cleanup and documentation

* Generalize det_zero_of_column_eq to remove the linear order assumption

* Fix linting issues.

* Unneeded import can be removed

* A little bit more cleanup

* Generalize nonsing_inv to any ring with inverse

* Improve comments for `nonsingular_inverse`

* Remove the less general `det_zero_of_column_eq_of_char_ne_two` proof

* Rename `cramer_map_val` -> `cramer_map_def`

Co-Authored-By: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

* whitespace

Co-Authored-By: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

* whitespace: indent tactic proofs

* More renaming `cramer_map_val` -> `cramer_map_def`

* `swap_mul_self_mul` can be a `simp` lemma

* Make parameter σ to `swap_mul_eq_iff` implicit

* Update usage of `function.update_same` and `function.update_noteq`

* Replace `det_permute` with `det_permutation`

Although the statement now gives the determinant of a permutation matrix,
the proof is easier if we write it as a permuted identity matrix.
Thus the proof is basically the same, except a different line showing that the
entries are the same.

* Re-introduce `matrix.det_permute` (now based on `matrix.det_permutation`)

* Delete `cramer_at` and clean up the proofs depending on it

* Replace `cramer_map` with `cramer` after defining `cramer`

* Apply suggestions from code review

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Clean up imports

* Formatting: move } to previous lines

* Move assumptions of `det_zero_of_repeated_column` from variable to argument

* whitespace

Insert space between `finset.filter` and the filter condition.

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Improve docstrings

* Make argument to `prod_cancels_of_partition_cancels` explicit

* Rename `replace_column` and `replace_row` to `update_column` and `update_row`

* Replace `update_column_eq` with `update_column_self` + rewriting step

* whitespace

Newlines between all lemmas

* whitespace

Newline before 'begin'

* Fix conflicts with latest mathlib

* Remove unnecessary explicitification of arguments

Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-27T16:29:02+00:00](https://github.com/leanprover-community/mathlib/commit/5f0159135df99338764629caa2a68ac6c74238f1)
fix(.github/workflows/build): set pipefail ([#1911](https://github.com/leanprover-community/mathlib/pull/#1911))

Without `pipefail`, the shell command `false | cat` terminates
successfully.

### [2020-01-27T14:52:05+00:00](https://github.com/leanprover-community/mathlib/commit/898cd708ef5b799ff84dcac80a6783bfdce384a9)
fix(archive/cubing_a_cube): roof broken by [#1903](https://github.com/leanprover-community/mathlib/pull/#1903) ([#1912](https://github.com/leanprover-community/mathlib/pull/#1912))

### [2020-01-26T21:08:12+00:00](https://github.com/leanprover-community/mathlib/commit/497e692b946d93906900bb33a51fd243e7649406)
feat(linear_algebra/matrix): define the trace of a square matrix ([#1883](https://github.com/leanprover-community/mathlib/pull/#1883))

* feat(linear_algebra/matrix): define the trace of a square matrix

* Move ring carrier to correct universe

* Add lemma trace_one, and define diag as linear map

* Define diag and trace solely as linear functions

* Diag and trace for module-valued matrices

* Fix cyclic import

* Rename matrix.mul_sum' --> matrix.smul_sum

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Trigger CI

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-26T19:37:06+00:00](https://github.com/leanprover-community/mathlib/commit/587b312e0a2f4ed6e31561cf713ff7fcc533ce11)
refactor(order/filter/basic): redefine `filter.pure` ([#1889](https://github.com/leanprover-community/mathlib/pull/#1889))

* refactor(order/filter/basic): redefine `filter.pure`

New definition has `s ∈ pure a` definitionally equal to `a ∈ s`.

* Update src/order/filter/basic.lean

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* Minor fixes suggested by @gebner

* Fix compile

* Update src/order/filter/basic.lean

Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-26T15:54:48+00:00](https://github.com/leanprover-community/mathlib/commit/ce2e7a85998bae835233215e55bc3a2997e21e83)
feat(linear_algebra/multilinear): image of sum ([#1908](https://github.com/leanprover-community/mathlib/pull/#1908))

* staging

* fix build

* linting

* staging

* docstring

### [2020-01-26T13:49:29+00:00](https://github.com/leanprover-community/mathlib/commit/ab155ef99d5117d360ed827e1932c213abb22540)
refactor(*): refactor `sum_smul`/`smul_sum` ([#1910](https://github.com/leanprover-community/mathlib/pull/#1910))

* refactor(*): refactor `sum_smul`/`smul_sum`

API changes:

* Define both versions for `list, `multiset`, and `finset`;
* new `finset.smul_sum` is the old `finset.smul_sum` or `_root_.sum_smul.symm``
* new `finset.sum_smul` is the old `finset.smul_sum'`
* new `smul_smul` doesn't need a `Type` argument
* some lemmas are generalized to a `semimodule` or a `distrib_mul_action`

* Fix compile

### [2020-01-26T03:58:09+00:00](https://github.com/leanprover-community/mathlib/commit/2297d200d0a45eb4346abc7ab7272cc59d6908a2)
feat(tactic/clear): add clear' tactic ([#1899](https://github.com/leanprover-community/mathlib/pull/#1899))

* feat(tactic/clear): add clear' tactic

We add an improved version of the `clear` tactic. When clearing multiple
hypotheses, `clear` can fail even though all hypotheses could be
cleared. This happens when the hypotheses depend on each other and are
given in the wrong order:

```lean
example : ∀ {α : Type} {β : α → Type} (a : α) (b : β a), unit :=
  begin
    intros α β a b,
    clear a b, -- fails
    exact ()
  end
```

When `clear` tries to clear `a`, `b`, which depends on `a`, is still in the
context, so the operation fails. We give a tactic `clear'` which
recognises this and clears `b` before `a`.

* refactor(tactic/clear): better implementation of clear'

We refactor `clear'`, replacing the old implementation with one that is
more concise and should be faster. The new implementation strategy also
gives us a new variant of `clear`, `clear_dependent`, almost for free.

`clear_dependent` works like `clear'`, but in addition to the given
hypotheses, it also clears any other hypotheses which depend on them.

* style(test/tactics, docs/tactics): less indentation

* test(test/tactics): better tests for clear' and clear_dependent

We make the tests for `clear'` and `clear_dependent` more meaningful:
They now permit less illegal behaviours.

* refactor(tactic/clear): simplify error message formatting

Co-authored-by: Simon Hudon <simon.hudon@gmail.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-26T01:12:21+00:00](https://github.com/leanprover-community/mathlib/commit/9decec2b611ba9fb0c6e7b56cbcb0b959126f2f3)
feat(*): some simple lemmas about sets and finite sets ([#1903](https://github.com/leanprover-community/mathlib/pull/#1903))

* feat(*): some simple lemmas about sets and finite sets

* More lemmas, simplify proofs

* Introduce `finsup.nonempty` and use it.

* Update src/algebra/big_operators.lean

Co-Authored-By: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

* Revert "Update src/algebra/big_operators.lean"

This reverts commit 17c89a808545203dc5a80a4f11df4f62e949df8d. It
breaks compile if we rewrite right to left.

* simp, to_additive

* Add a missing docstring

Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-25T23:45:34+00:00](https://github.com/leanprover-community/mathlib/commit/d3e5621d07d810b0c8f0f37f867b39cd500d36f5)
feat(data/real/ereal): add `ereal` := [-oo,oo] ([#1703](https://github.com/leanprover-community/mathlib/pull/#1703))

* feat(data/real/ereal): add `ereal` := [-oo,oo]

* some updates

* some cleanup in ereal

* move pattern attribute

* works

* more docstring

* don't understand why this file was broken

* more tidyup

* deducing complete lattice from type class inference

* another neg theorem

* adding some module doc

* tinkering

* deriving addition

Co-authored-by: Floris van Doorn <fpvdoorn@gmail.com>
Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-25T21:18:30+00:00](https://github.com/leanprover-community/mathlib/commit/d4aa088e1db71ae01592e318dd34749e96d0429c)
fix(scripts/deploy_nightly): fill in blank env vars ([#1909](https://github.com/leanprover-community/mathlib/pull/#1909))

* fix(scripts/deploy_nightly): fill in blank env vars

* fix: LEAN_VERSION="lean-3.4.2"

### [2020-01-25T14:01:56+00:00](https://github.com/leanprover-community/mathlib/commit/707724222e237d8c0e33f7b0c19389caea210bb3)
doc (analysis/normed_space/operator_norm): cleanup ([#1906](https://github.com/leanprover-community/mathlib/pull/#1906))

* doc (analysis/normed_space/operator_norm): cleanup

* typo

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-25T12:31:17+00:00](https://github.com/leanprover-community/mathlib/commit/8c9a15eba356a311f6ae1747be9703df528256b7)
feat(topology/instances/ennreal): continuity of multiplication by const ([#1905](https://github.com/leanprover-community/mathlib/pull/#1905))

* feat(topology/instances/ennreal): continuity of multiplication by const

* Fix compile

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-25T10:51:17+00:00](https://github.com/leanprover-community/mathlib/commit/20f153a5dc9e914bf4f3601fc320ae36b9a066ae)
fix(scripts/deploy_nightly): token is now just the PAT, need to add user ([#1907](https://github.com/leanprover-community/mathlib/pull/#1907))

### [2020-01-25T08:42:04+00:00](https://github.com/leanprover-community/mathlib/commit/3bbf8eb82cc30c60dcc24b73069b7c37f0bcf30c)
feat(data/real/nnreal): a few lemmas about subtraction ([#1904](https://github.com/leanprover-community/mathlib/pull/#1904))

### [2020-01-24T23:34:43+00:00](https://github.com/leanprover-community/mathlib/commit/3b9ee8e8cb021b265e06ca6643929b0387c96665)
doc(geometry/manifold): fix markdown ([#1901](https://github.com/leanprover-community/mathlib/pull/#1901))

* doc(geometry/manifold): fix markdown

* Update src/geometry/manifold/manifold.lean

* Update src/geometry/manifold/manifold.lean

* Update src/geometry/manifold/manifold.lean

* Update src/geometry/manifold/manifold.lean

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-24T21:56:45+01:00](https://github.com/leanprover-community/mathlib/commit/d07569527248e0823a3c1490608f17881cc45091)
fix(build): typo in deploy_nightly script name ([#1902](https://github.com/leanprover-community/mathlib/pull/#1902))

### [2020-01-24T20:01:58+01:00](https://github.com/leanprover-community/mathlib/commit/2db02b8049aa283688d4a6eee040303536f8818f)
feat(.github): switch to github actions for ci ([#1893](https://github.com/leanprover-community/mathlib/pull/#1893))

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-01-24T12:07:12+00:00](https://github.com/leanprover-community/mathlib/commit/601d5b1372328b29131af3868ceedcc67e7a8c59)
feat(tactic/simp_rw): add `simp_rw` tactic, a mix of `simp` and `rw` ([#1900](https://github.com/leanprover-community/mathlib/pull/#1900))

* add `simp_rw` tactic that is a mix of `simp` and `rw`

* Style fixes

* Module documentation for the file `tactic/simp_rw.lean`

* Apply suggestions to improve documentation of `simp_rw`

* Documentation and tests for `simp_rw [...] at ...`

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-24T09:09:29+00:00](https://github.com/leanprover-community/mathlib/commit/69099f00ea5bdd2a7692bf3edcfa5a9a6cc5f348)
feat(order/filter/bases): define `filter.has_basis` ([#1896](https://github.com/leanprover-community/mathlib/pull/#1896))

* feat(*): assorted simple lemmas, simplify some proofs

* feat(order/filter/bases): define `filter.has_basis`

* Add `@[nolint]`

* +1 lemma, +1 simplified proof

* Remove whitespaces

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Ref. note nolint_ge

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-24T00:47:07+00:00](https://github.com/leanprover-community/mathlib/commit/aad853b54cf7ee4311428d9b4d4e2ec133dc3b7e)
docs(data/mv_polynomial): add module docstring [ci skip] ([#1892](https://github.com/leanprover-community/mathlib/pull/#1892))

* adding docstring

* fix markdown

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* fix markdown

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* variables have type sigma

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* don't tell the reader about the interface

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* consistent conventions for monomial

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* variables are terms of type sigma

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* Update src/data/mv_polynomial.lean

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* Update src/data/mv_polynomial.lean

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* version 2

* one last tinker

* removing $ signs

* next attempt

* Update src/data/mv_polynomial.lean

* Update src/data/mv_polynomial.lean

* Update src/data/mv_polynomial.lean

Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

### [2020-01-22T20:10:27+00:00](https://github.com/leanprover-community/mathlib/commit/b686bc24e798f19b023cc74775032224570b483a)
feat(algebra/lie_algebra): define Lie subalgebras, morphisms, modules, submodules, quotients ([#1835](https://github.com/leanprover-community/mathlib/pull/#1835))

* feat(algebra/lie_algebra): define Lie subalgebras, morphisms, modules, submodules, quotients

* Code review: colons at end of line

* Update src/algebra/lie_algebra.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/algebra/lie_algebra.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/algebra/lie_algebra.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Catch up after GH commits from code review

* Remove accidentally-included '#lint'

* Rename: lie_subalgebra.bracket --> lie_subalgebra.lie_mem

* Lie ideals are subalgebras

* Add missing doc string

* Update src/algebra/lie_algebra.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Allow quotients of lie_modules by lie_submodules (part 1)

The missing piece is the construction of a lie_module structure on
the quotient by a lie_submodule, i.e.,:
`instance lie_quotient_lie_module : lie_module R L N.quotient := ...`

I will add this in due course.

* Code review: minor fixes

* New lie_module approach based on add_action, linear_action

* Remove add_action by merging into linear_action.

I would prefer to keep add_action, and especially like to keep the feature
that linear_action extends has_scalar, but unfortunately this is not
possible with the current typeclass resolution algorithm since we should
never extend a class with fewer carrier types.

* Add missing doc string

* Simplify Lie algebra adjoing action definitions

* whitespace tweaks

* Remove redundant explicit type

* Update src/algebra/lie_algebra.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/algebra/lie_algebra.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/algebra/lie_algebra.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/algebra/lie_algebra.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Catch up after rename bracket --> map_lie in morphism

* Update src/linear_algebra/linear_action.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/linear_algebra/linear_action.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/linear_algebra/linear_action.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/linear_algebra/linear_action.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/linear_algebra/linear_action.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/linear_algebra/linear_action.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/linear_algebra/linear_action.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/linear_algebra/linear_action.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/linear_algebra/linear_action.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-22T00:57:34+00:00](https://github.com/leanprover-community/mathlib/commit/96ee2a6979b5bd20bee9de497d77fcd7f562ed4f)
feat(order/filter/basic): prove `@cofinite ℕ = at_top` ([#1888](https://github.com/leanprover-community/mathlib/pull/#1888))

* feat(order/filter/basic): prove `@cofinite ℕ = at_top`

Also generalize `not_injective_(nat/int)_fintype`, and use `[infinite
α]` instead of `set.infinite (@univ α)` as an argument.

* Update src/data/equiv/basic.lean

Co-Authored-By: Gabriel Ebner <gebner@gebner.org>

* Drop a duplicate definition, thanks @ChrisHughes24

Co-authored-by: Gabriel Ebner <gebner@gebner.org>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-21T21:29:04+00:00](https://github.com/leanprover-community/mathlib/commit/aa6cc06ff010f97cf9a40071a0ec5691e733176c)
feat(measure_theory/set_integral): integrals over subsets ([#1875](https://github.com/leanprover-community/mathlib/pull/#1875))

* feat(measure_theory/set_integral): integral on a set

* mismached variables

* move if_preimage

* Update src/measure_theory/l1_space.lean

Co-Authored-By: Yury G. Kudryashov <urkud@ya.ru>

* Small fixes

* Put indicator_function into data folder

* Use antimono as names

* Change name to antimono

* Fix everything

* Use binder notation for integrals

* delete an extra space

* Update set_integral.lean

* adjust implicit and explicit variables
* measurable_on_singleton

* prove integral_on_Union

* Update indicator_function.lean

* Update set_integral.lean

* lint

* Update bochner_integration.lean

* reviewer's comment

* use Yury's proof

Co-authored-by: Yury G. Kudryashov <urkud@ya.ru>

### [2020-01-21T18:58:28+00:00](https://github.com/leanprover-community/mathlib/commit/217b5e72c339d55b9d2626b5c9368accf16a893c)
refactor(algebra/char_zero): use `function.injective` ([#1894](https://github.com/leanprover-community/mathlib/pull/#1894))

No need to require `↔` in the definition.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-21T09:56:58+00:00](https://github.com/leanprover-community/mathlib/commit/f3835fabbe2e738460ebf88b826e800b76f7efd0)
feat(*): assorted simple lemmas, simplify some proofs ([#1895](https://github.com/leanprover-community/mathlib/pull/#1895))

* feat(*): assorted simple lemmas, simplify some proofs

* +1 lemma, +1 simplified proof

### [2020-01-18T08:16:09+00:00](https://github.com/leanprover-community/mathlib/commit/d32c79778c79bc82266946fe3d50ec30899f1a75)
feat(data/bool): coe_bool_iff ([#1891](https://github.com/leanprover-community/mathlib/pull/#1891))

### [2020-01-18T05:20:13+00:00](https://github.com/leanprover-community/mathlib/commit/d548d92eaa7d202eeb2d4189a6ace4414cb85f5f)
chore(ring_theory/polynomial): remove decidable_eq assumptions ([#1890](https://github.com/leanprover-community/mathlib/pull/#1890))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-17T18:46:09+00:00](https://github.com/leanprover-community/mathlib/commit/c8ae79d0f51c98dbddd97d2cdadb4110cfa97b21)
feat(measure_theory/bochner_integration): dominated convergence theorem for filters ([#1884](https://github.com/leanprover-community/mathlib/pull/#1884))

* Dominated convergence theorem for filters

* Update bases.lean

* Update bochner_integration.lean

* reviewer's comments

Co-authored-by: Rob Lewis <Rob.y.lewis@gmail.com>

### [2020-01-17T03:02:01+00:00](https://github.com/leanprover-community/mathlib/commit/9ac26cb6220deec0960f8a719572a82ead25f90e)
feat(geometry/manifold/mfderiv): derivative of functions between smooth manifolds ([#1872](https://github.com/leanprover-community/mathlib/pull/#1872))

* feat(geometry/manifold/mfderiv): derivative of functions between smooth manifolds

* Update src/geometry/manifold/mfderiv.lean

Co-Authored-By: Yury G. Kudryashov <urkud@ya.ru>

* more details in docstrings [ci skip]

* fix docstrings [ci skip]

* reviewer's comments

Co-authored-by: Yury G. Kudryashov <urkud@ya.ru>

### [2020-01-16T11:40:38+00:00](https://github.com/leanprover-community/mathlib/commit/4f81942dcd5d4e24c505a9d0e19eeafca762d345)
feat(logic/basic): forall_or_distrib ([#1887](https://github.com/leanprover-community/mathlib/pull/#1887))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-16T10:23:06+00:00](https://github.com/leanprover-community/mathlib/commit/58610ffd12b4387bd2211fe0b9af0ef8a3221d1a)
chore(order/filter/*): use `s ∈ f` instead of `s ∈ f.sets` ([#1885](https://github.com/leanprover-community/mathlib/pull/#1885))

Other changes:
* compose old `mem_infi` and `mem_binfi` with `mem_Union` and
  `mem_bUnion_iff` to avoid `.sets` and simplify usage (it was
  `rw [mem_infi, mem_Union]` every time)
* drop `lift_sets_eq` and `mem_lift_iff` in favor of `mem_lift_sets`

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-16T08:11:17+00:00](https://github.com/leanprover-community/mathlib/commit/05457fdd93d4d12b6d897e174639d81d393c8d8b)
feat(analysis/calculus/tangent_cone): define and use `tangent_cone_congr` ([#1886](https://github.com/leanprover-community/mathlib/pull/#1886))

* feat(analysis/calculus/tangent_cone): define and use `tangent_cone_congr`

This way some proofs become shorter and hopefully more readable.

* Add a docstring

### [2020-01-15T15:04:46+00:00](https://github.com/leanprover-community/mathlib/commit/b3ed6e61a7684002d57e0a32ff632978459f982b)
chore(*): use `ne_` instead of `neq_` in lemma names ([#1878](https://github.com/leanprover-community/mathlib/pull/#1878))

One exception: `mem_sets_of_neq_bot` is now `mem_sets_of_eq_bot`
because it has an equality as an assumption.

Also add `filter.infi_ne_bot_(iff_?)of_directed'` with a different
`nonempty` assumption, and use it to simplify the proof of
`lift_ne_bot_iff`.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-15T10:13:40+00:00](https://github.com/leanprover-community/mathlib/commit/8e70388a9ed6e6f9a39303c8f705909e2e451eca)
docs(README): add new maintainers ([#1881](https://github.com/leanprover-community/mathlib/pull/#1881))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-15T09:15:30+00:00](https://github.com/leanprover-community/mathlib/commit/d6147362bfbb0fc8fc105d2b11f061f3b80623c0)
feat(linear_algebra/tensor_product): tensor product right identity ([#1880](https://github.com/leanprover-community/mathlib/pull/#1880))

* feat(linear_algebra/tensor_product): tensor product right identity

* Golf proof of tensor_product.rid

* Add missing docstrings

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-15T07:24:37+00:00](https://github.com/leanprover-community/mathlib/commit/819939fbf1333c8d5ee8eb1d9540d235c5d2d9bf)
refactor(order/lattice): generalize `directed_of_mono` ([#1879](https://github.com/leanprover-community/mathlib/pull/#1879))

It suffices to have `semilattice_sup`, not `decidable_linear_order`.
Also add `directed_of_antimono`.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-14T16:00:47+00:00](https://github.com/leanprover-community/mathlib/commit/9f7ae9ab88b4c0872b0c67f333540b8882525111)
chore(data/set/lattice): use `∃ x ∈ s` instead of `∃ x, x ∈ s ∧` in `mem_bUnion_iff` ([#1877](https://github.com/leanprover-community/mathlib/pull/#1877))

This seems to be more in line with the rest of the library

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-14T14:20:21+00:00](https://github.com/leanprover-community/mathlib/commit/416b7d871bb21896782f2ad0feaadb23fad9bfbd)
fix doc strings ([#1876](https://github.com/leanprover-community/mathlib/pull/#1876))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-14T06:33:00+00:00](https://github.com/leanprover-community/mathlib/commit/e095e3065ca80a7cd9ac787034f6af07c73d2f21)
feat(analysis/ODE/gronwall): A version of Grönwall's inequality ([#1846](https://github.com/leanprover-community/mathlib/pull/#1846))

* feat(analysis/ODE/gronwall): A version of Gronwall's inequality

+ uniqueness of solutions of an ODE with a Lipschitz continuous RHS

* Consistently use ö in Grönwall

* Fix a typo

* Fix docs, drop assumption `0 < K`, add a version for functions `ℝ → ℝ`.

* Fix docs

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Fix docs

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>

### [2020-01-12T06:48:46+00:00](https://github.com/leanprover-community/mathlib/commit/c5d91bc788383c914cfb4a96e688778bbd30883e)
feat(topology/algebra/ordered): add order topology for partial orders… ([#1276](https://github.com/leanprover-community/mathlib/pull/#1276))

* feat(topology/algebra/ordered): doc, add convergence in ordered groups criterion

* docstring

* reviewer's comments

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-11T14:51:07+00:00](https://github.com/leanprover-community/mathlib/commit/25dded2dd3b27bbb402057eb38990a2b3d7f5f28)
chore(measure_theory/bochner_integration): make proofs shorter ([#1871](https://github.com/leanprover-community/mathlib/pull/#1871))

* More consistent use of the dot notation

* Revert "More consistent use of the dot notation"

This reverts commit 854a499a9be105b42ca486eb25593a2379b07404.

* Revert "Revert "More consistent use of the dot notation""

This reverts commit 57aaf22695c031fc8dcc581110cc9d1ac397f695.

* fix things

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-11T00:42:53+00:00](https://github.com/leanprover-community/mathlib/commit/f67df78cb302f5f39d8bb857d8b9c16e29a84cc4)
chore(algebra/module): add some missing `*_cast` tags ([#1863](https://github.com/leanprover-community/mathlib/pull/#1863))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-10T01:05:49+00:00](https://github.com/leanprover-community/mathlib/commit/ff2a41e4579d2238b8864e2bd072831a2006a808)
refactor(docs): additions, modifications, reorganization ([#1815](https://github.com/leanprover-community/mathlib/pull/#1815))

* move cc.md to tactics.md

* change h3 to h2

* remove h3

* update simp.md headers

* updates to casts.md

* update holes.md

* update docstrings

* add commands.md

* hole commands in emacs

* reference library_search from find

* delete casts.md

* minor updates

* minor fixes

* more minor fixes

* fix header level

* updating mathlib-overview and removing a bunch of useless  files

Co-authored-by: Kevin Buzzard <k.buzzard@imperial.ac.uk>

### [2020-01-09T22:58:55+00:00](https://github.com/leanprover-community/mathlib/commit/baa3aa7370e506ef89c40557eed8bd1cc811ab30)
refactor(data/set/basic): change def of `⊂` to match `<` ([#1862](https://github.com/leanprover-community/mathlib/pull/#1862))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-09T21:23:09+00:00](https://github.com/leanprover-community/mathlib/commit/d7cebcf6310d7979a85d61ec9f9892e6c9e3a1ea)
feat(linear_algebra/multilinear): basics of multilinear maps ([#1814](https://github.com/leanprover-community/mathlib/pull/#1814))

* multilinear maps

* progress

* isomorphisms

* Update src/logic/function.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* better docstring

* variable module

* dep cons

* make everything dependent

* remove print statement

* fix build

* Update src/linear_algebra/multilinear.lean

Co-Authored-By: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

* Update src/linear_algebra/multilinear.lean

Co-Authored-By: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>

* fixes

* docstrings

* reviewer's comments

* cleanup

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: Chris Hughes <33847686+ChrisHughes24@users.noreply.github.com>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-09T04:14:44+00:00](https://github.com/leanprover-community/mathlib/commit/39c10cdbc8e88e2d5f4164bccfc4ba13288002d3)
docs(tactic/tauto): elaborate tauto docs [ci skip] ([#1869](https://github.com/leanprover-community/mathlib/pull/#1869))

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-09T02:47:17+00:00](https://github.com/leanprover-community/mathlib/commit/52899945cf9fcf5d2733afb8a690236417103e13)
feat(analysis/calculus/mean_value): add generalized "fencing" inequality ([#1838](https://github.com/leanprover-community/mathlib/pull/#1838))

* feat(analysis/calculus/mean_value): add generalized "fencing" inequality

This version can be used to deduce, e.g., Gronwall inequality as well
as its generalized version that deals with approximate solutions.

* Adjust to merged branches, use `liminf` instead of `limsup`, add more variations

* Go through dim-1 liminf estimates

* Fix: use `b ∈ Ioc a c` as a hypothesis for `I??_mem_nhds_within_Iio`

* Update src/analysis/calculus/mean_value.lean

Co-Authored-By: sgouezel <sebastien.gouezel@univ-rennes1.fr>

* Drop `Prop`-valued `variables`, add some docs

* More docstrings

* Drop `Prop`-valued `variables`, drop assumption `x ∉ s`.

Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-08T20:16:58+00:00](https://github.com/leanprover-community/mathlib/commit/9afc6f2fa4573f38b6eaa799623e2d509b64d095)
docs(tactics): tautology ([#1860](https://github.com/leanprover-community/mathlib/pull/#1860))

* added a short description of the tautology tactic

* added a short description of the tautology tactic

* Update docs/tactics.md

Co-Authored-By: Johan Commelin <johan@commelin.net>

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-08T13:16:54+00:00](https://github.com/leanprover-community/mathlib/commit/92841c2e1c6ecaa8c054695fbfd64b174e84a1de)
refactor(analysis/asymptotics): introduce `is_O_with` ([#1857](https://github.com/leanprover-community/mathlib/pull/#1857))

* refactor(analysis/asymptotics): introduce `is_O_with`

I use it to factor out common parts of the proofs of facts about
`is_O` and `is_o`. It can also be used with `principal s` filter to
operate with `∀ x ∈ s, ∥f x∥ ≤ C * ∥g x∥` is a manner similar to `is_O`.

* lint

* Fix compile

* Drop `(s)mul_same` lemmas.

It's easy to use `(s)mul_is_O (is_O_refl _ _)` or `(is_O_refl _
_).mul_is_o _` instead

* docs: say explicitly that `is_O` is better than `is_O_with`

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-07T00:44:17+00:00](https://github.com/leanprover-community/mathlib/commit/69e07e25d252ccf444efff5ac81a6e82a3b62289)
chore(order/zorn): add docstrings, drop `chain.directed` ([#1861](https://github.com/leanprover-community/mathlib/pull/#1861))

`chain.directed_on` is almost the same and uses a named predicate.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-06T23:48:35+00:00](https://github.com/leanprover-community/mathlib/commit/a1b73125d23dc75b7a6d632f2337f3f019506c57)
feat(topology/maps): a few lemmas about `is_open_map` ([#1855](https://github.com/leanprover-community/mathlib/pull/#1855))

* feat(topology/maps): a few lemmas about `is_open_map`

Also fix arguments order in all `*.comp` in this file.

* Use restricted version of `continuous_of_left_inverse` to prove non-restricted

* Fix compile by reverting a name change

### [2020-01-06T03:49:33+00:00](https://github.com/leanprover-community/mathlib/commit/15c434a24a8879e475e69f79b0179df1fa492545)
chore(*): various simple lemmas about `*_equiv`, add missing attrs ([#1854](https://github.com/leanprover-community/mathlib/pull/#1854))

* chore(*): various simple lemmas about `*_equiv`, add missing attrs

* Fix compile of `ring_theory/localization`

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-05T21:25:17+00:00](https://github.com/leanprover-community/mathlib/commit/63670b5918ba567ce1b8de70262f02adba47b103)
feat(data/real/nnreal): add a few simple lemmas ([#1856](https://github.com/leanprover-community/mathlib/pull/#1856))

### [2020-01-04T15:28:27+00:00](https://github.com/leanprover-community/mathlib/commit/585e107f9811719832c6656f49e1263a8eef5380)
feat(topology/algebra/module): continuous linear equiv ([#1839](https://github.com/leanprover-community/mathlib/pull/#1839))

* feat(topology/algebra/module): continuous linear equiv

* linting

* reviewer's comments

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-02T22:16:08+00:00](https://github.com/leanprover-community/mathlib/commit/5c3606dd68398a5c737536087672def3724c7b04)
feat(order/filter/basic): define `filter.eventually` and `filter.frequently` ([#1845](https://github.com/leanprover-community/mathlib/pull/#1845))

* feat(order/filter/basic): define `filter.eventually` and `filter.frequently`

As suggested in [#119](https://github.com/leanprover-community/mathlib/pull/#119)

* More lemmas, use notation

* Fix a typo

* Update src/order/filter/basic.lean

Co-Authored-By: Johan Commelin <johan@commelin.net>

* Update src/order/filter/basic.lean

* Add a short file docstring

* Update src/order/filter/basic.lean

Co-authored-by: Johan Commelin <johan@commelin.net>
Co-authored-by: sgouezel <sebastien.gouezel@univ-rennes1.fr>
Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-02T19:10:24+00:00](https://github.com/leanprover-community/mathlib/commit/840bd1f5ffe4bae593802505bd198e331d7a7cee)
feat(analysis/calculus/deriv): add aliases for `const op f` and `f op const` ([#1843](https://github.com/leanprover-community/mathlib/pull/#1843))

* feat(analysis/calculus/deriv): add aliases for `const op f` and `f op const`

Often this leads to simpler answers.

* Docs

* Fix compile of `mean_value.lean`

* Drop comments, use `open_locale classical`

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-02T18:35:24+00:00](https://github.com/leanprover-community/mathlib/commit/7b18bbf91e27e7ee7695daa5e7d981bfab5ba89a)
feat(topology/algebra/ordered): add `*_mem_nhds_within_Ioi`, reorder args of `is_closed.Icc_subset_of_forall_exists_gt` ([#1844](https://github.com/leanprover-community/mathlib/pull/#1844))

### [2020-01-02T10:40:36+00:00](https://github.com/leanprover-community/mathlib/commit/033ecbfd01923645b7522c3fb70ff4ac3f01f307)
chore(topology/*): add a few more trivial `continuous_(within_)at` lemmas ([#1842](https://github.com/leanprover-community/mathlib/pull/#1842))

### [2020-01-02T09:04:12+00:00](https://github.com/leanprover-community/mathlib/commit/ffa978527977fe92110a4cc0d6666f6920c51372)
feat(topology/algebra/ordered): prove that `nhds_within (Ioi a) b ≠ ⊥` if `a ≤ b` ([#1841](https://github.com/leanprover-community/mathlib/pull/#1841))

+ few similar statements
Also drop decidability assumption in `closure_Ioo` etc. We don't care
about using classical reasoning anyway, and usage of `classical.DLO`
here doesn't lead to any `noncomputable` defs.

Co-authored-by: mergify[bot] <37929162+mergify[bot]@users.noreply.github.com>

### [2020-01-01T22:13:19+00:00](https://github.com/leanprover-community/mathlib/commit/d08d50959cf9727504e87a80367a0e6db46aeb96)
fix(metric_space/gromo_hausdorff): lemma should be instance + linting ([#1840](https://github.com/leanprover-community/mathlib/pull/#1840))